---
title: Informazioni sulle tabelle Atom
description: In questa sezione vengono illustrate le tabelle atom.
ms.assetid: 12114a3e-99a4-480f-9d1a-57c1942b7382
keywords:
- atomi
- Tabelle atom
- nomi atom
- Dynamic Data Exchange (DDE), atoms
- DDE (Dynamic Data Exchange),atoms
- tabelle atom globali
- tabelle atom locali
- atomi integer
- atomi di stringa
ms.topic: article
ms.date: 08/25/2020
ms.openlocfilehash: 92a8304e1e96c7385ddb11ba6391258acbe62a26
ms.sourcegitcommit: f848119a8faa29b27585f4df53f6e50ee9666684
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/27/2021
ms.locfileid: "110549606"
---
# <a name="about-atom-tables"></a><span data-ttu-id="44099-112">Informazioni sulle tabelle Atom</span><span class="sxs-lookup"><span data-stu-id="44099-112">About Atom Tables</span></span>

<span data-ttu-id="44099-113">Una *tabella atom è* una tabella definita dal sistema che archivia stringhe e identificatori corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="44099-113">An *atom table* is a system-defined table that stores strings and corresponding identifiers.</span></span> <span data-ttu-id="44099-114">Un'applicazione inserisce una stringa in una tabella atom e riceve un intero a 16 bit, denominato *atom*, che può essere usato per accedere alla stringa.</span><span class="sxs-lookup"><span data-stu-id="44099-114">An application places a string in an atom table and receives a 16-bit integer, called an *atom*, that can be used to access the string.</span></span> <span data-ttu-id="44099-115">Una stringa inserita in una tabella atom è denominata nome *atom*.</span><span class="sxs-lookup"><span data-stu-id="44099-115">A string that has been placed in an atom table is called an *atom name*.</span></span>

<span data-ttu-id="44099-116">Il sistema fornisce una serie di tabelle atom.</span><span class="sxs-lookup"><span data-stu-id="44099-116">The system provides a number of atom tables.</span></span> <span data-ttu-id="44099-117">Ogni tabella atom ha uno scopo diverso.</span><span class="sxs-lookup"><span data-stu-id="44099-117">Each atom table serves a different purpose.</span></span> <span data-ttu-id="44099-118">Ad esempio, le Dynamic Data Exchange (DDE) usano la tabella [atom](#global-atom-table) globale per condividere stringhe nome-elemento e nome argomento con altre applicazioni.</span><span class="sxs-lookup"><span data-stu-id="44099-118">For example, Dynamic Data Exchange (DDE) applications use the [global atom table](#global-atom-table) to share item-name and topic-name strings with other applications.</span></span> <span data-ttu-id="44099-119">Anziché passare stringhe effettive, un'applicazione DDE passa atomi globali all'applicazione partner.</span><span class="sxs-lookup"><span data-stu-id="44099-119">Rather than passing actual strings, a DDE application passes global atoms to its partner application.</span></span> <span data-ttu-id="44099-120">Il partner usa gli atom per ottenere le stringhe dalla tabella atom.</span><span class="sxs-lookup"><span data-stu-id="44099-120">The partner uses the atoms to obtain the strings from the atom table.</span></span>

<span data-ttu-id="44099-121">Le applicazioni possono usare tabelle atom locali per archiviare le proprie associazioni nome-elemento.</span><span class="sxs-lookup"><span data-stu-id="44099-121">Applications can use local atom tables to store their own item-name associations.</span></span>

<span data-ttu-id="44099-122">Il sistema usa tabelle atom che non sono direttamente accessibili alle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="44099-122">The system uses atom tables that are not directly accessible to applications.</span></span> <span data-ttu-id="44099-123">Tuttavia, l'applicazione usa questi atomi quando chiama un'ampia gamma di funzioni.</span><span class="sxs-lookup"><span data-stu-id="44099-123">However, the application uses these atoms when calling a variety of functions.</span></span> <span data-ttu-id="44099-124">Ad esempio, i formati degli Appunti registrati vengono archiviati in una tabella atom interna usata dal sistema.</span><span class="sxs-lookup"><span data-stu-id="44099-124">For example, registered clipboard formats are stored in an internal atom table used by the system.</span></span> <span data-ttu-id="44099-125">Un'applicazione aggiunge atom a questa tabella atom usando la [**funzione RegisterClipboardFormat.**](/windows/desktop/api/Winuser/nf-winuser-registerclipboardformata)</span><span class="sxs-lookup"><span data-stu-id="44099-125">An application adds atoms to this atom table using the [**RegisterClipboardFormat**](/windows/desktop/api/Winuser/nf-winuser-registerclipboardformata) function.</span></span> <span data-ttu-id="44099-126">Inoltre, le classi registrate vengono archiviate in una tabella atom interna usata dal sistema.</span><span class="sxs-lookup"><span data-stu-id="44099-126">Also, registered classes are stored in an internal atom table used by the system.</span></span> <span data-ttu-id="44099-127">Un'applicazione aggiunge atom a questa tabella atom usando la [**funzione RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) o [**RegisterClassEx.**](/windows/desktop/api/winuser/nf-winuser-registerclassexa)</span><span class="sxs-lookup"><span data-stu-id="44099-127">An application adds atoms to this atom table using the [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) or [**RegisterClassEx**](/windows/desktop/api/winuser/nf-winuser-registerclassexa) function.</span></span>

<span data-ttu-id="44099-128">In questa sezione vengono descritti gli argomenti seguenti.</span><span class="sxs-lookup"><span data-stu-id="44099-128">The following topics are discussed in this section.</span></span>

-   [<span data-ttu-id="44099-129">Tabella Atom globale</span><span class="sxs-lookup"><span data-stu-id="44099-129">Global Atom Table</span></span>](#global-atom-table)
-   [<span data-ttu-id="44099-130">Tabella Atom utente</span><span class="sxs-lookup"><span data-stu-id="44099-130">User Atom Table</span></span>](#user-atom-table)
-   [<span data-ttu-id="44099-131">Tabelle atom locali</span><span class="sxs-lookup"><span data-stu-id="44099-131">Local Atom Tables</span></span>](#local-atom-tables)
-   [<span data-ttu-id="44099-132">Tipi Atom</span><span class="sxs-lookup"><span data-stu-id="44099-132">Atom Types</span></span>](#atom-types)
    -   [<span data-ttu-id="44099-133">Atomi di stringhe</span><span class="sxs-lookup"><span data-stu-id="44099-133">String Atoms</span></span>](#string-atoms)
    -   [<span data-ttu-id="44099-134">Atomi interi</span><span class="sxs-lookup"><span data-stu-id="44099-134">Integer Atoms</span></span>](#integer-atoms)
-   [<span data-ttu-id="44099-135">Numero di creazione e utilizzo di Atom</span><span class="sxs-lookup"><span data-stu-id="44099-135">Atom Creation and Usage Count</span></span>](#atom-creation-and-usage-count)
-   [<span data-ttu-id="44099-136">Query con tabella Atom</span><span class="sxs-lookup"><span data-stu-id="44099-136">Atom-Table Queries</span></span>](#atom-table-queries)
-   [<span data-ttu-id="44099-137">Formati di stringa Atom</span><span class="sxs-lookup"><span data-stu-id="44099-137">Atom String Formats</span></span>](#atom-string-formats)

## <a name="global-atom-table"></a><span data-ttu-id="44099-138">Tabella Atom globale</span><span class="sxs-lookup"><span data-stu-id="44099-138">Global Atom Table</span></span>

<span data-ttu-id="44099-139">La tabella atom globale è disponibile per tutte le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="44099-139">The global atom table is available to all applications.</span></span> <span data-ttu-id="44099-140">Quando un'applicazione inserisce una stringa nella tabella atom globale, il sistema genera un atom univoco in tutto il sistema.</span><span class="sxs-lookup"><span data-stu-id="44099-140">When an application places a string in the global atom table, the system generates an atom that is unique throughout the system.</span></span> <span data-ttu-id="44099-141">Qualsiasi applicazione con l'atom può ottenere la stringa identificata tramite query sulla tabella atom globale.</span><span class="sxs-lookup"><span data-stu-id="44099-141">Any application that has the atom can obtain the string it identifies by querying the global atom table.</span></span>

<span data-ttu-id="44099-142">Un'applicazione che definisce un formato dati DDE privato per la condivisione dei dati con altre applicazioni deve inserire il nome del formato nella tabella atom globale.</span><span class="sxs-lookup"><span data-stu-id="44099-142">An application that defines a private DDE-data format for sharing data with other applications should place the format name in the global atom table.</span></span> <span data-ttu-id="44099-143">Questa tecnica impedisce conflitti con i nomi dei formati definiti dal sistema o da altre applicazioni e rende disponibili per le altre applicazioni gli identificatori (atomi) per i messaggi o i formati.</span><span class="sxs-lookup"><span data-stu-id="44099-143">This technique prevents conflicts with the names of formats defined by the system or by other applications, and makes the identifiers (atoms) for the messages or formats available to the other applications.</span></span>

## <a name="user-atom-table"></a><span data-ttu-id="44099-144">Tabella Atom utente</span><span class="sxs-lookup"><span data-stu-id="44099-144">User Atom Table</span></span>

<span data-ttu-id="44099-145">Oltre alla tabella atom globale, la tabella atom dell'utente è un'altra tabella atom di sistema condivisa anche tra tutti i processi.</span><span class="sxs-lookup"><span data-stu-id="44099-145">In addition to the global atom table, the user atom table is another system atom table that is also shared across all processes.</span></span> <span data-ttu-id="44099-146">La tabella atom dell'utente viene usata per un numero ridotto di scenari interni a win32k. ad esempio nomi di moduli windows, stringhe note in win32k, formati OLE e così via. Anche se le applicazioni non interagiscono direttamente con la tabella atom dell'utente, chiamano diverse API, ad esempio [RegisterClass,](/windows/win32/api/winuser/nf-winuser-registerclassexa) [RegisterWindowMessage](/windows/win32/api/winuser/nf-winuser-registerwindowmessagea)e [RegisterClipboardFormat,](/windows/win32/api/winuser/nf-winuser-registerclipboardformata)che aggiungono voci alla tabella atom dell'utente.</span><span class="sxs-lookup"><span data-stu-id="44099-146">The user atom table is used for a small number of scenarios internal to win32k; for example, windows module names, well known strings in win32k, OLE formats, etc. Although applications do not interact with the user atom table directly, they call several APIs—such as [RegisterClass](/windows/win32/api/winuser/nf-winuser-registerclassexa), [RegisterWindowMessage](/windows/win32/api/winuser/nf-winuser-registerwindowmessagea), and [RegisterClipboardFormat](/windows/win32/api/winuser/nf-winuser-registerclipboardformata)—that add entries to the user atom table.</span></span> <span data-ttu-id="44099-147">Le voci aggiunte da `RegisterClass` possono essere eliminate da `UnregisterClass` .</span><span class="sxs-lookup"><span data-stu-id="44099-147">The entries added by `RegisterClass` can be deleted by `UnregisterClass`.</span></span> <span data-ttu-id="44099-148">Tuttavia, le voci aggiunte da `RegisterWindowMessage` e non vengono eliminate fino al termine della `RegisterClipboardFormat` sessione.</span><span class="sxs-lookup"><span data-stu-id="44099-148">However, the entries added by `RegisterWindowMessage` and `RegisterClipboardFormat` do not get deleted until the session ends.</span></span> <span data-ttu-id="44099-149">Se la tabella atom dell'utente non ha più spazio e la stringa passata non è già presente nella tabella, la chiamata avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="44099-149">If the user atom table has no more space and the string being passed in is not already in the table, the call will fail.</span></span> 

### <a name="atom-table-size"></a><span data-ttu-id="44099-150">Dimensioni tabella Atom</span><span class="sxs-lookup"><span data-stu-id="44099-150">Atom Table Size</span></span>
 
<span data-ttu-id="44099-151">Molte API critiche, tra cui [CreateWindow,](/windows/win32/api/winuser/nf-winuser-createwindowa)si basano su atomi utente.</span><span class="sxs-lookup"><span data-stu-id="44099-151">Many critical APIs, including [CreateWindow](/windows/win32/api/winuser/nf-winuser-createwindowa), rely on user atoms.</span></span> <span data-ttu-id="44099-152">Di conseguenza, l'esaurimento dello spazio nella tabella atom dell'utente comporta gravi problemi. Ad esempio, l'avvio di tutte le applicazioni potrebbe non riuscire.</span><span class="sxs-lookup"><span data-stu-id="44099-152">Therefore, space exhaustion in the user atom table will result in serious issues; for example, all applications may fail to launch.</span></span> <span data-ttu-id="44099-153">Ecco alcuni consigli per garantire che l'applicazione usa in modo efficiente le tabelle atom e mantengono l'affidabilità e le prestazioni dell'applicazione e del sistema:</span><span class="sxs-lookup"><span data-stu-id="44099-153">Here are some recommendations to ensure your application utilizes atom tables efficiently and preserves the reliability and performance of the application and system:</span></span>  

1. <span data-ttu-id="44099-154">È consigliabile limitare l'utilizzo della tabella atom dell'utente da parte dell'app.</span><span class="sxs-lookup"><span data-stu-id="44099-154">You should limit your app's usage of the user atom table.</span></span> <span data-ttu-id="44099-155">L'archiviazione di stringhe univoche tramite API come , o occupa spazio nella tabella atom dell'utente, usata a livello globale da altre app per registrare le classi di finestre `RegisterClass` `RegisterWindowMessage` usando le `RegisterClipboardFormat` stringhe.</span><span class="sxs-lookup"><span data-stu-id="44099-155">Storing unique strings using APIs like `RegisterClass`, `RegisterWindowMessage`, or `RegisterClipboardFormat` takes space in the user atom table, which is used globally by other apps to register window classes using strings.</span></span> <span data-ttu-id="44099-156">Se possibile, è consigliabile usare [AddAtom](/windows/desktop/api/Winbase/nf-winbase-addatomw)DeleteAtom per archiviare le stringhe in una tabella atom locale o / [](/windows/desktop/api/Winbase/nf-winbase-deleteatom) [GlobalAddAtom](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) / [GlobalDeleteAtom](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) se gli atom sono necessari tra processi incrociati.</span><span class="sxs-lookup"><span data-stu-id="44099-156">If at all possible, you should use [AddAtom](/windows/desktop/api/Winbase/nf-winbase-addatomw)/[DeleteAtom](/windows/desktop/api/Winbase/nf-winbase-deleteatom) to store strings in a local atom table, or  [GlobalAddAtom](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma)/[GlobalDeleteAtom](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) if the atoms are needed cross-process.</span></span>

1. <span data-ttu-id="44099-157">Se l'applicazione causa problemi di tabella atom utente, è possibile analizzare la causa radice connettendo il debugger del kernel ed interrompendo il processo nelle chiamate a `UserAddAtomEx` ( `bae1 win32kbase!UserAddAtomEx /p <eprocess> "kc10;g"` ).</span><span class="sxs-lookup"><span data-stu-id="44099-157">If there is concern about the application causing user atom table issues, you can investigate the root cause by connecting the kernel debugger and breaking into the process on calls to `UserAddAtomEx` (`bae1 win32kbase!UserAddAtomEx /p <eprocess> "kc10;g"`).</span></span> <span data-ttu-id="44099-158">Cercare nel `user32!` callstack per vedere quale API viene chiamata.</span><span class="sxs-lookup"><span data-stu-id="44099-158">Look for `user32!` on the callstack to see which API is being called.</span></span> <span data-ttu-id="44099-159">La metodologia è simile al rilevamento dei problemi delle tabelle atom globali descritto in [Identificazione delle perdite di tabelle Atom globali](/archive/blogs/ntdebugging/identifying-global-atom-table-leaks).</span><span class="sxs-lookup"><span data-stu-id="44099-159">The methodology is similar to the global atom table issue detection explained in [Identifying Global Atom Table Leaks](/archive/blogs/ntdebugging/identifying-global-atom-table-leaks).</span></span> <span data-ttu-id="44099-160">Un altro modo per eseguire il dump del contenuto della tabella atom utente è chiamando [GetClipboardFormatName](/windows/win32/api/winuser/nf-winuser-getclipboardformatnamea) sull'intervallo di possibili atomi da 0xC000 a 0xFFFF.</span><span class="sxs-lookup"><span data-stu-id="44099-160">Another way to dump the contents of the user atom table is by calling [GetClipboardFormatName](/windows/win32/api/winuser/nf-winuser-getclipboardformatnamea) over the range of possible atoms from 0xC000 to 0xFFFF.</span></span> <span data-ttu-id="44099-161">Se il numero totale di atomi aumenta costantemente mentre l'applicazione è in esecuzione o non torna alla baseline quando l'app viene chiusa, si verifica un problema.</span><span class="sxs-lookup"><span data-stu-id="44099-161">If the total atom count steadily goes up while the application is running or does not return to baseline when the app is closed, there is a problem.</span></span>

## <a name="local-atom-tables"></a><span data-ttu-id="44099-162">Tabelle atom locali</span><span class="sxs-lookup"><span data-stu-id="44099-162">Local Atom Tables</span></span>

<span data-ttu-id="44099-163">Un'applicazione può usare una tabella atom locale per gestire in modo efficiente un numero elevato di stringhe usate solo all'interno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="44099-163">An application can use a local atom table to efficiently manage a large number of strings used only within the application.</span></span> <span data-ttu-id="44099-164">Queste stringhe e gli atomi associati sono disponibili solo per l'applicazione che ha creato la tabella.</span><span class="sxs-lookup"><span data-stu-id="44099-164">These strings, and the associated atoms, are available only to the application that created the table.</span></span>

<span data-ttu-id="44099-165">Un'applicazione che richiede la stessa stringa in un numero di strutture può ridurre l'utilizzo della memoria usando una tabella atom locale.</span><span class="sxs-lookup"><span data-stu-id="44099-165">An application requiring the same string in a number of structures can reduce memory usage by using a local atom table.</span></span> <span data-ttu-id="44099-166">Anziché copiare la stringa in ogni struttura, l'applicazione può inserire la stringa nella tabella atom e includere l'atomo risultante nelle strutture.</span><span class="sxs-lookup"><span data-stu-id="44099-166">Rather than copying the string into each structure, the application can place the string in the atom table and include the resulting atom in the structures.</span></span> <span data-ttu-id="44099-167">In questo modo, una stringa viene visualizzata una sola volta in memoria, ma può essere usata più volte nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="44099-167">In this way, a string appears only once in memory but can be used many times in the application.</span></span>

<span data-ttu-id="44099-168">Le applicazioni possono anche usare tabelle atom locali per risparmiare tempo durante la ricerca di una determinata stringa.</span><span class="sxs-lookup"><span data-stu-id="44099-168">Applications can also use local atom tables to save time when searching for a particular string.</span></span> <span data-ttu-id="44099-169">Per eseguire una ricerca, un'applicazione deve inserire solo la stringa di ricerca nella tabella atom e confrontare l'atomo risultante con gli atomi nelle strutture pertinenti.</span><span class="sxs-lookup"><span data-stu-id="44099-169">To perform a search, an application need only place the search string in the atom table and compare the resulting atom with the atoms in the relevant structures.</span></span> <span data-ttu-id="44099-170">Il confronto di atomi è in genere più veloce rispetto al confronto di stringhe.</span><span class="sxs-lookup"><span data-stu-id="44099-170">Comparing atoms is typically faster than comparing strings.</span></span>

<span data-ttu-id="44099-171">Le tabelle Atom vengono implementate come tabelle hash.</span><span class="sxs-lookup"><span data-stu-id="44099-171">Atom tables are implemented as hash tables.</span></span> <span data-ttu-id="44099-172">Per impostazione predefinita, una tabella atom locale usa 37 bucket per la tabella hash.</span><span class="sxs-lookup"><span data-stu-id="44099-172">By default, a local atom table uses 37 buckets for its hash table.</span></span> <span data-ttu-id="44099-173">Tuttavia, è possibile modificare il numero di bucket usati chiamando la [**funzione InitAtomTable.**](/windows/desktop/api/Winbase/nf-winbase-initatomtable)</span><span class="sxs-lookup"><span data-stu-id="44099-173">However, you can change the number of buckets used by calling the [**InitAtomTable**](/windows/desktop/api/Winbase/nf-winbase-initatomtable) function.</span></span> <span data-ttu-id="44099-174">Se l'applicazione chiama **InitAtomTable**, tuttavia, deve eseguire questa operazione prima di chiamare qualsiasi altra funzione di gestione atom.</span><span class="sxs-lookup"><span data-stu-id="44099-174">If the application calls **InitAtomTable**, however, it must do so before calling any other atom-management functions.</span></span>

## <a name="atom-types"></a><span data-ttu-id="44099-175">Tipi Atom</span><span class="sxs-lookup"><span data-stu-id="44099-175">Atom Types</span></span>

<span data-ttu-id="44099-176">Le applicazioni possono creare due tipi di atomi: atomi di stringa e atomi di interi.</span><span class="sxs-lookup"><span data-stu-id="44099-176">Applications can create two types of atoms: string atoms and integer atoms.</span></span> <span data-ttu-id="44099-177">I valori degli atomi integer e degli atomi di stringa non si sovrappongono, quindi entrambi i tipi di atomi possono essere usati nello stesso blocco di codice.</span><span class="sxs-lookup"><span data-stu-id="44099-177">The values of integer atoms and string atoms do not overlap, so both types of atoms can be used in the same block of code.</span></span>

<span data-ttu-id="44099-178">Diverse funzioni accettano stringhe o atom come parametri.</span><span class="sxs-lookup"><span data-stu-id="44099-178">Several functions accept either strings or atoms as parameters.</span></span> <span data-ttu-id="44099-179">Quando si passa un atom a queste funzioni, un'applicazione può usare la macro [**MAKEINTATOM**](/windows/desktop/api/Winbase/nf-winbase-makeintatom) per convertire l'atom in un formato che può essere usato dalla funzione.</span><span class="sxs-lookup"><span data-stu-id="44099-179">When passing an atom to these functions, an application can use the [**MAKEINTATOM**](/windows/desktop/api/Winbase/nf-winbase-makeintatom) macro to convert the atom into a form that can be used by the function.</span></span>

<span data-ttu-id="44099-180">Le sezioni seguenti descrivono i tipi atom.</span><span class="sxs-lookup"><span data-stu-id="44099-180">The following sections describe atom types.</span></span>

-   [<span data-ttu-id="44099-181">Atomi di stringa</span><span class="sxs-lookup"><span data-stu-id="44099-181">String Atoms</span></span>](#string-atoms)
-   [<span data-ttu-id="44099-182">Atomi integer</span><span class="sxs-lookup"><span data-stu-id="44099-182">Integer Atoms</span></span>](#integer-atoms)

### <a name="string-atoms"></a><span data-ttu-id="44099-183">Atomi di stringa</span><span class="sxs-lookup"><span data-stu-id="44099-183">String Atoms</span></span>

<span data-ttu-id="44099-184">Quando le applicazioni passano stringhe con terminazione Null alle funzioni [**GlobalAddAtom,**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma)e [**FindAtom,**](/windows/desktop/api/Winbase/nf-winbase-findatoma) ricevono *atomi* di stringa (interi a 16 bit) in cambio.</span><span class="sxs-lookup"><span data-stu-id="44099-184">When applications pass null-terminated strings to the [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma), and [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) functions, they receive *string atoms* (16-bit integers) in return.</span></span> <span data-ttu-id="44099-185">Gli atomi di stringa hanno le proprietà seguenti:</span><span class="sxs-lookup"><span data-stu-id="44099-185">String atoms have the following properties:</span></span>

-   <span data-ttu-id="44099-186">I valori degli atomi di stringa sono nell'intervallo 0xC000 (MAXINTATOM) fino 0xFFFF.</span><span class="sxs-lookup"><span data-stu-id="44099-186">The values of string atoms are in the range 0xC000 (MAXINTATOM) through 0xFFFF.</span></span>
-   <span data-ttu-id="44099-187">La distinzione tra maiuscole e minuscole non è significativa nelle ricerche di un nome atom in una tabella atom.</span><span class="sxs-lookup"><span data-stu-id="44099-187">Case is not significant in searches for an atom name in an atom table.</span></span> <span data-ttu-id="44099-188">Inoltre, l'intera stringa deve corrispondere in un'operazione di ricerca. non viene eseguita alcuna corrispondenza di sottostringhe.</span><span class="sxs-lookup"><span data-stu-id="44099-188">Also, the entire string must match in a search operation; no substring matching is performed.</span></span>
-   <span data-ttu-id="44099-189">Le dimensioni della stringa associata a un atom di stringa non possono essere superiori a 255 byte.</span><span class="sxs-lookup"><span data-stu-id="44099-189">The string associated with a string atom can be no more than 255 bytes in size.</span></span> <span data-ttu-id="44099-190">Questa limitazione si applica a tutte le funzioni atom.</span><span class="sxs-lookup"><span data-stu-id="44099-190">This limitation applies to all atom functions.</span></span>
-   <span data-ttu-id="44099-191">Un *conteggio dei* riferimenti è associato a ogni nome atom.</span><span class="sxs-lookup"><span data-stu-id="44099-191">A *reference count* is associated with each atom name.</span></span> <span data-ttu-id="44099-192">Il conteggio viene incrementato ogni volta che il nome atom viene aggiunto alla tabella e decrementato ogni volta che il nome atom viene eliminato.</span><span class="sxs-lookup"><span data-stu-id="44099-192">The count is incremented each time the atom name is added to the table and decremented each time the atom name is deleted from it.</span></span> <span data-ttu-id="44099-193">In questo modo si impedisce a utenti diversi dello stesso atom di stringa di eliminare i reciproci nomi di atom.</span><span class="sxs-lookup"><span data-stu-id="44099-193">This prevents different users of the same string atom from destroying each other's atom names.</span></span> <span data-ttu-id="44099-194">Quando il conteggio dei riferimenti per un nome atom è uguale a zero, il sistema rimuove l'atom e il nome atom dalla tabella.</span><span class="sxs-lookup"><span data-stu-id="44099-194">When the reference count for an atom name equals zero, the system removes the atom and the atom name from the table.</span></span>

### <a name="integer-atoms"></a><span data-ttu-id="44099-195">Atomi integer</span><span class="sxs-lookup"><span data-stu-id="44099-195">Integer Atoms</span></span>

<span data-ttu-id="44099-196">Gli atomi interi differiscono dagli atomi di stringa nei modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="44099-196">Integer atoms differ from string atoms in the following ways:</span></span>

-   <span data-ttu-id="44099-197">I valori degli atomi interi sono nell'intervallo compreso tra 0x0001 e 0xBFFF (**MAXINTATOM**– 1).</span><span class="sxs-lookup"><span data-stu-id="44099-197">The values of integer atoms are in the range 0x0001 through 0xBFFF (**MAXINTATOM**– 1).</span></span>
-   <span data-ttu-id="44099-198">La rappresentazione di stringa di un atom integer \# *è dddd*, dove i valori rappresentati da *dddd* sono cifre decimali.</span><span class="sxs-lookup"><span data-stu-id="44099-198">The string representation of an integer atom is \#*dddd*, where the values represented by *dddd* are decimal digits.</span></span> <span data-ttu-id="44099-199">Gli zeri iniziali vengono ignorati.</span><span class="sxs-lookup"><span data-stu-id="44099-199">Leading zeros are ignored.</span></span>
-   <span data-ttu-id="44099-200">Non è presente alcun numero di riferimenti o sovraccarico di archiviazione associato a un atom integer.</span><span class="sxs-lookup"><span data-stu-id="44099-200">There is no reference count or storage overhead associated with an integer atom.</span></span>

## <a name="atom-creation-and-usage-count"></a><span data-ttu-id="44099-201">Numero di creazione e utilizzo di Atom</span><span class="sxs-lookup"><span data-stu-id="44099-201">Atom Creation and Usage Count</span></span>

<span data-ttu-id="44099-202">Un'applicazione crea un atom locale chiamando la [**funzione AddAtom.**](/windows/desktop/api/Winbase/nf-winbase-addatomw) crea un atom globale chiamando la [**funzione GlobalAddAtom.**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma)</span><span class="sxs-lookup"><span data-stu-id="44099-202">An application creates a local atom by calling the [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) function; it creates a global atom by calling the [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) function.</span></span> <span data-ttu-id="44099-203">Entrambe le funzioni richiedono un puntatore a una stringa.</span><span class="sxs-lookup"><span data-stu-id="44099-203">Both functions require a pointer to a string.</span></span> <span data-ttu-id="44099-204">Il sistema cerca la stringa nella tabella atom appropriata e restituisce l'atom corrispondente all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="44099-204">The system searches the appropriate atom table for the string and returns the corresponding atom to the application.</span></span> <span data-ttu-id="44099-205">Nel caso di un atom di stringa, se la stringa si trova già nella tabella atom, il sistema incrementa il conteggio dei riferimenti per la stringa durante questo processo.</span><span class="sxs-lookup"><span data-stu-id="44099-205">In the case of a string atom, if the string already resides in the atom table, the system increments the reference count for the string during this process.</span></span>

<span data-ttu-id="44099-206">Le chiamate ripetute per aggiungere lo stesso nome atom restituiscono lo stesso atomo.</span><span class="sxs-lookup"><span data-stu-id="44099-206">Repeated calls to add the same atom name return the same atom.</span></span> <span data-ttu-id="44099-207">Se il nome atom non esiste nella tabella quando viene chiamato [**AddAtom,**](/windows/desktop/api/Winbase/nf-winbase-addatomw) il nome atom viene aggiunto alla tabella e viene restituito un nuovo atom.</span><span class="sxs-lookup"><span data-stu-id="44099-207">If the atom name does not exist in the table when [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) is called, the atom name is added to the table and a new atom is returned.</span></span> <span data-ttu-id="44099-208">Se si tratta di un atomo di stringhe, anche il conteggio dei riferimenti viene impostato su uno.</span><span class="sxs-lookup"><span data-stu-id="44099-208">If it is a string atom, its reference count is also set to one.</span></span>

<span data-ttu-id="44099-209">Un'applicazione deve chiamare [**la funzione DeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-deleteatom) quando non deve più usare un atom locale. deve chiamare la [**funzione GlobalDeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) quando non richiede più un atom globale.</span><span class="sxs-lookup"><span data-stu-id="44099-209">An application should call the [**DeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-deleteatom) function when it no longer needs to use a local atom; it should call the [**GlobalDeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) function when it no longer needs a global atom.</span></span> <span data-ttu-id="44099-210">Nel caso di un atomo di stringhe, una di queste funzioni riduce di uno il conteggio dei riferimenti dell'atomo corrispondente.</span><span class="sxs-lookup"><span data-stu-id="44099-210">In the case of a string atom, either of these functions reduces the reference count of the corresponding atom by one.</span></span> <span data-ttu-id="44099-211">Quando il conteggio dei riferimenti raggiunge lo zero, il sistema elimina il nome atom dalla tabella.</span><span class="sxs-lookup"><span data-stu-id="44099-211">When the reference count reaches zero, the system deletes the atom name from the table.</span></span>

<span data-ttu-id="44099-212">Il nome atom di un atom di stringa rimane nella tabella atom globale purché il conteggio dei riferimenti sia maggiore di zero, anche dopo la fine dell'applicazione che lo ha inserito nella tabella.</span><span class="sxs-lookup"><span data-stu-id="44099-212">The atom name of a string atom remains in the global atom table as long as its reference count is greater than zero, even after the application that placed it in the table terminates.</span></span> <span data-ttu-id="44099-213">Una tabella atom locale viene distrutta quando l'applicazione associata termina, indipendentemente dal conteggio dei riferimenti degli atomi nella tabella.</span><span class="sxs-lookup"><span data-stu-id="44099-213">A local atom table is destroyed when the associated application terminates, regardless of the reference counts of the atoms in the table.</span></span>

## <a name="atom-table-queries"></a><span data-ttu-id="44099-214">Atom-Table query</span><span class="sxs-lookup"><span data-stu-id="44099-214">Atom-Table Queries</span></span>

<span data-ttu-id="44099-215">Un'applicazione può determinare se una determinata stringa si trova già in una tabella atom usando la [**funzione FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) o [**GlobalFindAtom.**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma)</span><span class="sxs-lookup"><span data-stu-id="44099-215">An application can determine whether a particular string is already in an atom table by using the [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) or [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) function.</span></span> <span data-ttu-id="44099-216">Queste funzioni ricercano in una tabella atom la stringa specificata e, se la stringa è presente, restituiscono l'atom corrispondente.</span><span class="sxs-lookup"><span data-stu-id="44099-216">These functions search an atom table for the specified string and, if the string is there, return the corresponding atom.</span></span>

<span data-ttu-id="44099-217">Un'applicazione può usare la [**funzione GetAtomName**](/windows/desktop/api/Winbase/nf-winbase-getatomnamea) o [**GlobalGetAtomName**](/windows/desktop/api/Winbase/nf-winbase-globalgetatomnamea) per recuperare una stringa con nome atom da una tabella atom, purché l'applicazione abbia l'atom corrispondente alla stringa cercata.</span><span class="sxs-lookup"><span data-stu-id="44099-217">An application can use the [**GetAtomName**](/windows/desktop/api/Winbase/nf-winbase-getatomnamea) or [**GlobalGetAtomName**](/windows/desktop/api/Winbase/nf-winbase-globalgetatomnamea) function to retrieve an atom-name string from an atom table, provided the application has the atom corresponding to the string being sought.</span></span> <span data-ttu-id="44099-218">Entrambe le funzioni copiano la stringa del nome atom dell'atom specificato in un buffer e restituiscono la lunghezza della stringa copiata.</span><span class="sxs-lookup"><span data-stu-id="44099-218">Both functions copy the atom-name string of the specified atom to a buffer and return the length of the string that was copied.</span></span> <span data-ttu-id="44099-219">**GetAtomName** recupera una stringa di nome atom da una tabella atom locale e **GlobalGetAtomName** recupera una stringa di nome atom dalla tabella atom globale.</span><span class="sxs-lookup"><span data-stu-id="44099-219">**GetAtomName** retrieves an atom-name string from a local atom table, and **GlobalGetAtomName** retrieves an atom-name string from the global atom table.</span></span>

## <a name="atom-string-formats"></a><span data-ttu-id="44099-220">Formati di stringa Atom</span><span class="sxs-lookup"><span data-stu-id="44099-220">Atom String Formats</span></span>

<span data-ttu-id="44099-221">Le [**funzioni AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma)e [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) accettano un puntatore a una stringa con terminazione Null.</span><span class="sxs-lookup"><span data-stu-id="44099-221">The [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma), and [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) functions take a pointer to a null-terminated string.</span></span> <span data-ttu-id="44099-222">Un'applicazione può specificare questo puntatore in uno dei modi seguenti.</span><span class="sxs-lookup"><span data-stu-id="44099-222">An application can specify this pointer in one of the following ways.</span></span>



|     <span data-ttu-id="44099-223">Formato stringa</span><span class="sxs-lookup"><span data-stu-id="44099-223">String format</span></span>               |    <span data-ttu-id="44099-224">Descrizione</span><span class="sxs-lookup"><span data-stu-id="44099-224">Description</span></span>                                                                                                |
|--------------------|----------------------------------------------------------------------------------------------------|
| <span data-ttu-id="44099-225">\#*Dv*</span><span class="sxs-lookup"><span data-stu-id="44099-225">\#*dddd*</span></span>           | <span data-ttu-id="44099-226">Intero specificato come stringa decimale.</span><span class="sxs-lookup"><span data-stu-id="44099-226">An integer specified as a decimal string.</span></span> <span data-ttu-id="44099-227">Usato per creare o trovare un atom di numeri interi.</span><span class="sxs-lookup"><span data-stu-id="44099-227">Used to create or find an integer atom.</span></span>                  |
| <span data-ttu-id="44099-228">*string atom name*</span><span class="sxs-lookup"><span data-stu-id="44099-228">*string atom name*</span></span> | <span data-ttu-id="44099-229">Nome atom di stringa.</span><span class="sxs-lookup"><span data-stu-id="44099-229">A string atom name.</span></span> <span data-ttu-id="44099-230">Usato per aggiungere un nome atom di stringa a una tabella atom e ricevere un atom in cambio.</span><span class="sxs-lookup"><span data-stu-id="44099-230">Used to add a string atom name to an atom table and receive an atom in return.</span></span> |



 

 

 
