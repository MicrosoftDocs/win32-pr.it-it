---
title: Informazioni sulle tabelle Atom
description: In questa sezione vengono descritte le tabelle Atom.
ms.assetid: 12114a3e-99a4-480f-9d1a-57c1942b7382
keywords:
- atomi
- tabelle Atom
- nomi Atom
- Dynamic Data Exchange (DDE), atomi
- DDE (Dynamic Data Exchange), atomi
- tabelle atom globali
- tabelle Atom locali
- atomi Integer
- atomi di stringa
ms.topic: article
ms.date: 08/25/2020
ms.openlocfilehash: 27f7cdb4bb2dc2fd97b4dba6909022b297df1a1d
ms.sourcegitcommit: e985e0532f0f895ae418e8c2658dac819cdae3b1
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/26/2020
ms.locfileid: "104399807"
---
# <a name="about-atom-tables"></a><span data-ttu-id="e4b78-112">Informazioni sulle tabelle Atom</span><span class="sxs-lookup"><span data-stu-id="e4b78-112">About Atom Tables</span></span>

<span data-ttu-id="e4b78-113">Una *tabella Atom* è una tabella definita dal sistema che archivia stringhe e identificatori corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="e4b78-113">An *atom table* is a system-defined table that stores strings and corresponding identifiers.</span></span> <span data-ttu-id="e4b78-114">Un'applicazione inserisce una stringa in una tabella Atom e riceve un intero a 16 bit, denominato *Atom*, che può essere usato per accedere alla stringa.</span><span class="sxs-lookup"><span data-stu-id="e4b78-114">An application places a string in an atom table and receives a 16-bit integer, called an *atom*, that can be used to access the string.</span></span> <span data-ttu-id="e4b78-115">Una stringa che è stata inserita in una tabella Atom è detta *nome Atom*.</span><span class="sxs-lookup"><span data-stu-id="e4b78-115">A string that has been placed in an atom table is called an *atom name*.</span></span>

<span data-ttu-id="e4b78-116">Il sistema fornisce un numero di tabelle Atom.</span><span class="sxs-lookup"><span data-stu-id="e4b78-116">The system provides a number of atom tables.</span></span> <span data-ttu-id="e4b78-117">Ogni tabella Atom svolge uno scopo diverso.</span><span class="sxs-lookup"><span data-stu-id="e4b78-117">Each atom table serves a different purpose.</span></span> <span data-ttu-id="e4b78-118">Ad esempio, le applicazioni Dynamic Data Exchange (DDE) utilizzano la [tabella Atom globale](#global-atom-table) per condividere le stringhe nome-elemento e nome argomento con altre applicazioni.</span><span class="sxs-lookup"><span data-stu-id="e4b78-118">For example, Dynamic Data Exchange (DDE) applications use the [global atom table](#global-atom-table) to share item-name and topic-name strings with other applications.</span></span> <span data-ttu-id="e4b78-119">Anziché passare stringhe effettive, un'applicazione DDE passa gli atomi globali alla relativa applicazione partner.</span><span class="sxs-lookup"><span data-stu-id="e4b78-119">Rather than passing actual strings, a DDE application passes global atoms to its partner application.</span></span> <span data-ttu-id="e4b78-120">Il partner utilizza gli atomi per ottenere le stringhe dalla tabella Atom.</span><span class="sxs-lookup"><span data-stu-id="e4b78-120">The partner uses the atoms to obtain the strings from the atom table.</span></span>

<span data-ttu-id="e4b78-121">Le applicazioni possono utilizzare le tabelle Atom locali per archiviare le proprie associazioni di nomi di elemento.</span><span class="sxs-lookup"><span data-stu-id="e4b78-121">Applications can use local atom tables to store their own item-name associations.</span></span>

<span data-ttu-id="e4b78-122">Il sistema utilizza tabelle Atom non direttamente accessibili per le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="e4b78-122">The system uses atom tables that are not directly accessible to applications.</span></span> <span data-ttu-id="e4b78-123">Tuttavia, l'applicazione utilizza questi atomi quando si chiamano diverse funzioni.</span><span class="sxs-lookup"><span data-stu-id="e4b78-123">However, the application uses these atoms when calling a variety of functions.</span></span> <span data-ttu-id="e4b78-124">Ad esempio, i formati degli Appunti registrati vengono archiviati in una tabella Atom interna utilizzata dal sistema.</span><span class="sxs-lookup"><span data-stu-id="e4b78-124">For example, registered clipboard formats are stored in an internal atom table used by the system.</span></span> <span data-ttu-id="e4b78-125">Un'applicazione aggiunge atomi a questa tabella Atom usando la funzione [**RegisterClipboardFormat**](/windows/desktop/api/Winuser/nf-winuser-registerclipboardformata) .</span><span class="sxs-lookup"><span data-stu-id="e4b78-125">An application adds atoms to this atom table using the [**RegisterClipboardFormat**](/windows/desktop/api/Winuser/nf-winuser-registerclipboardformata) function.</span></span> <span data-ttu-id="e4b78-126">Inoltre, le classi registrate vengono archiviate in una tabella Atom interna utilizzata dal sistema.</span><span class="sxs-lookup"><span data-stu-id="e4b78-126">Also, registered classes are stored in an internal atom table used by the system.</span></span> <span data-ttu-id="e4b78-127">Un'applicazione aggiunge atomi a questa tabella Atom usando la funzione [**registerClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) o [**RegisterClassEx**](/windows/desktop/api/winuser/nf-winuser-registerclassexa) .</span><span class="sxs-lookup"><span data-stu-id="e4b78-127">An application adds atoms to this atom table using the [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) or [**RegisterClassEx**](/windows/desktop/api/winuser/nf-winuser-registerclassexa) function.</span></span>

<span data-ttu-id="e4b78-128">In questa sezione vengono descritti gli argomenti seguenti.</span><span class="sxs-lookup"><span data-stu-id="e4b78-128">The following topics are discussed in this section.</span></span>

-   [<span data-ttu-id="e4b78-129">Tabella Atom globale</span><span class="sxs-lookup"><span data-stu-id="e4b78-129">Global Atom Table</span></span>](#global-atom-table)
-   [<span data-ttu-id="e4b78-130">Tabella Atom utente</span><span class="sxs-lookup"><span data-stu-id="e4b78-130">User Atom Table</span></span>](#user-atom-table)
-   [<span data-ttu-id="e4b78-131">Tabelle Atom locali</span><span class="sxs-lookup"><span data-stu-id="e4b78-131">Local Atom Tables</span></span>](#local-atom-tables)
-   [<span data-ttu-id="e4b78-132">Tipi Atom</span><span class="sxs-lookup"><span data-stu-id="e4b78-132">Atom Types</span></span>](#atom-types)
    -   [<span data-ttu-id="e4b78-133">Atomi di stringa</span><span class="sxs-lookup"><span data-stu-id="e4b78-133">String Atoms</span></span>](#string-atoms)
    -   [<span data-ttu-id="e4b78-134">Atomi Integer</span><span class="sxs-lookup"><span data-stu-id="e4b78-134">Integer Atoms</span></span>](#integer-atoms)
-   [<span data-ttu-id="e4b78-135">Conteggio utilizzo e creazione Atom</span><span class="sxs-lookup"><span data-stu-id="e4b78-135">Atom Creation and Usage Count</span></span>](#atom-creation-and-usage-count)
-   [<span data-ttu-id="e4b78-136">Query di tabella Atom</span><span class="sxs-lookup"><span data-stu-id="e4b78-136">Atom-Table Queries</span></span>](#atom-table-queries)
-   [<span data-ttu-id="e4b78-137">Formati di stringa Atom</span><span class="sxs-lookup"><span data-stu-id="e4b78-137">Atom String Formats</span></span>](#atom-string-formats)

## <a name="global-atom-table"></a><span data-ttu-id="e4b78-138">Tabella Atom globale</span><span class="sxs-lookup"><span data-stu-id="e4b78-138">Global Atom Table</span></span>

<span data-ttu-id="e4b78-139">La tabella Atom globale è disponibile per tutte le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="e4b78-139">The global atom table is available to all applications.</span></span> <span data-ttu-id="e4b78-140">Quando un'applicazione inserisce una stringa nella tabella Atom globale, il sistema genera un Atom univoco nel sistema.</span><span class="sxs-lookup"><span data-stu-id="e4b78-140">When an application places a string in the global atom table, the system generates an atom that is unique throughout the system.</span></span> <span data-ttu-id="e4b78-141">Qualsiasi applicazione che dispone di Atom può ottenere la stringa che identifica eseguendo una query sulla tabella Atom globale.</span><span class="sxs-lookup"><span data-stu-id="e4b78-141">Any application that has the atom can obtain the string it identifies by querying the global atom table.</span></span>

<span data-ttu-id="e4b78-142">Un'applicazione che definisce un formato dati DDE privato per la condivisione di dati con altre applicazioni deve inserire il nome del formato nella tabella Atom globale.</span><span class="sxs-lookup"><span data-stu-id="e4b78-142">An application that defines a private DDE-data format for sharing data with other applications should place the format name in the global atom table.</span></span> <span data-ttu-id="e4b78-143">Questa tecnica impedisce i conflitti con i nomi dei formati definiti dal sistema o da altre applicazioni e rende disponibili gli identificatori (atomi) per i messaggi o i formati per le altre applicazioni.</span><span class="sxs-lookup"><span data-stu-id="e4b78-143">This technique prevents conflicts with the names of formats defined by the system or by other applications, and makes the identifiers (atoms) for the messages or formats available to the other applications.</span></span>

## <a name="user-atom-table"></a><span data-ttu-id="e4b78-144">Tabella Atom utente</span><span class="sxs-lookup"><span data-stu-id="e4b78-144">User Atom Table</span></span>

<span data-ttu-id="e4b78-145">Oltre alla tabella Atom globale, la tabella Atom dell'utente è un'altra tabella Atom di sistema condivisa anche in tutti i processi.</span><span class="sxs-lookup"><span data-stu-id="e4b78-145">In addition to the global atom table, the user atom table is another system atom table that is also shared across all processes.</span></span> <span data-ttu-id="e4b78-146">La tabella Atom utente viene utilizzata per un numero ridotto di scenari interni a Win32k; ad esempio, i nomi dei moduli di Windows, le stringhe note in Win32k, i formati OLE e così via. Sebbene le applicazioni non interagiscano direttamente con la tabella Atom dell'utente, chiamano diverse API, ad esempio [registerClass](/windows/win32/api/winuser/nf-winuser-registerclassexa), [RegisterWindowMessage](/windows/win32/api/winuser/nf-winuser-registerwindowmessagea)e [RegisterClipboardFormat](/windows/win32/api/winuser/nf-winuser-registerclipboardformata), che aggiungono voci alla tabella Atom dell'utente.</span><span class="sxs-lookup"><span data-stu-id="e4b78-146">The user atom table is used for a small number of scenarios internal to win32k; for example, windows module names, well known strings in win32k, OLE formats, etc. Although applications do not interact with the user atom table directly, they call several APIs—such as [RegisterClass](/windows/win32/api/winuser/nf-winuser-registerclassexa), [RegisterWindowMessage](/windows/win32/api/winuser/nf-winuser-registerwindowmessagea), and [RegisterClipboardFormat](/windows/win32/api/winuser/nf-winuser-registerclipboardformata)—that add entries to the user atom table.</span></span> <span data-ttu-id="e4b78-147">Le voci aggiunte da `RegisterClass` possono essere eliminate da `UnregisterClass` .</span><span class="sxs-lookup"><span data-stu-id="e4b78-147">The entries added by `RegisterClass` can be deleted by `UnregisterClass`.</span></span> <span data-ttu-id="e4b78-148">Tuttavia, le voci aggiunte da `RegisterWindowMessage` e non `RegisterClipboardFormat` vengono eliminate fino alla fine della sessione.</span><span class="sxs-lookup"><span data-stu-id="e4b78-148">However, the entries added by `RegisterWindowMessage` and `RegisterClipboardFormat` do not get deleted until the session ends.</span></span> <span data-ttu-id="e4b78-149">Se la tabella Atom dell'utente non ha più spazio e la stringa passata non è già presente nella tabella, la chiamata avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="e4b78-149">If the user atom table has no more space and the string being passed in is not already in the table, the call will fail.</span></span> 

### <a name="atom-table-size"></a><span data-ttu-id="e4b78-150">Dimensioni tabella Atom</span><span class="sxs-lookup"><span data-stu-id="e4b78-150">Atom Table Size</span></span>
 
<span data-ttu-id="e4b78-151">Molte API critiche, tra cui [CreateWindow](/windows/win32/api/winuser/nf-winuser-createwindowa), si basano sugli atomi utente.</span><span class="sxs-lookup"><span data-stu-id="e4b78-151">Many critical APIs, including [CreateWindow](/windows/win32/api/winuser/nf-winuser-createwindowa), rely on user atoms.</span></span> <span data-ttu-id="e4b78-152">Pertanto, l'esaurimento dello spazio nella tabella Atom dell'utente provocherà gravi problemi; ad esempio, l'avvio di tutte le applicazioni potrebbe non riuscire.</span><span class="sxs-lookup"><span data-stu-id="e4b78-152">Therefore, space exhaustion in the user atom table will result in serious issues; for example, all applications may fail to launch.</span></span> <span data-ttu-id="e4b78-153">Di seguito sono riportate alcune indicazioni per garantire che l'applicazione utilizzi le tabelle Atom in modo efficiente e preservare l'affidabilità e le prestazioni dell'applicazione e del sistema:</span><span class="sxs-lookup"><span data-stu-id="e4b78-153">Here are some recommendations to ensure your application utilizes atom tables efficiently and preserves the reliability and performance of the application and system:</span></span>  

1. <span data-ttu-id="e4b78-154">È necessario limitare l'utilizzo dell'app della tabella Atom dell'utente.</span><span class="sxs-lookup"><span data-stu-id="e4b78-154">You should limit your app's usage of the user atom table.</span></span> <span data-ttu-id="e4b78-155">L'archiviazione di stringhe univoche tramite API come `RegisterClass` , `RegisterWindowMessage` o `RegisterClipboardFormat` occupa spazio nella tabella Atom dell'utente, che viene usata a livello globale da altre app per registrare le classi di finestra usando le stringhe.</span><span class="sxs-lookup"><span data-stu-id="e4b78-155">Storing unique strings using APIs like `RegisterClass`, `RegisterWindowMessage`, or `RegisterClipboardFormat` takes space in the user atom table, which is used globally by other apps to register window classes using strings.</span></span> <span data-ttu-id="e4b78-156">Se possibile, è consigliabile usare [AddAtom](/windows/desktop/api/Winbase/nf-winbase-addatomw) / [DeleteAtom](/windows/desktop/api/Winbase/nf-winbase-deleteatom) per archiviare le stringhe in una tabella atom locale o [GlobalAddAtom](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) / [GlobalDeleteAtom](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) se gli atomi sono necessari tra processi.</span><span class="sxs-lookup"><span data-stu-id="e4b78-156">If at all possible, you should use [AddAtom](/windows/desktop/api/Winbase/nf-winbase-addatomw)/[DeleteAtom](/windows/desktop/api/Winbase/nf-winbase-deleteatom) to store strings in a local atom table, or  [GlobalAddAtom](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma)/[GlobalDeleteAtom](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) if the atoms are needed cross-process.</span></span>

1. <span data-ttu-id="e4b78-157">Se si verificano problemi relativi all'applicazione che causa problemi della tabella Atom dell'utente, è possibile esaminare la causa radice connettendo il debugger del kernel e suddividendo il processo nelle chiamate a `UserAddAtomEx` ( `bae1 win32kbase!UserAddAtomEx /p <eprocess> "kc10;g"` ).</span><span class="sxs-lookup"><span data-stu-id="e4b78-157">If there is concern about the application causing user atom table issues, you can investigate the root cause by connecting the kernel debugger and breaking into the process on calls to `UserAddAtomEx` (`bae1 win32kbase!UserAddAtomEx /p <eprocess> "kc10;g"`).</span></span> <span data-ttu-id="e4b78-158">Cercare `user32!` su stack per vedere quale API viene chiamata.</span><span class="sxs-lookup"><span data-stu-id="e4b78-158">Look for `user32!` on the callstack to see which API is being called.</span></span> <span data-ttu-id="e4b78-159">La metodologia è simile al rilevamento dei problemi della tabella Atom globale illustrato nell' [identificazione delle perdite di tabella atom globali](/archive/blogs/ntdebugging/identifying-global-atom-table-leaks).</span><span class="sxs-lookup"><span data-stu-id="e4b78-159">The methodology is similar to the global atom table issue detection explained in [Identifying Global Atom Table Leaks](/archive/blogs/ntdebugging/identifying-global-atom-table-leaks).</span></span> <span data-ttu-id="e4b78-160">Un altro modo per eseguire il dump del contenuto della tabella Atom utente consiste nel chiamare [GetClipboardFormatName](/windows/win32/api/winuser/nf-winuser-getclipboardformatnamea) sull'intervallo di atomi possibili da 0XC000 a 0xFFFF.</span><span class="sxs-lookup"><span data-stu-id="e4b78-160">Another way to dump the contents of the user atom table is by calling [GetClipboardFormatName](/windows/win32/api/winuser/nf-winuser-getclipboardformatnamea) over the range of possible atoms from 0xC000 to 0xFFFF.</span></span> <span data-ttu-id="e4b78-161">Se il numero totale di Atom aumenta costantemente mentre l'applicazione è in esecuzione o non torna alla baseline quando l'app viene chiusa, si verifica un problema.</span><span class="sxs-lookup"><span data-stu-id="e4b78-161">If the total atom count steadily goes up while the application is running or does not return to baseline when the app is closed, there is a problem.</span></span>

## <a name="local-atom-tables"></a><span data-ttu-id="e4b78-162">Tabelle Atom locali</span><span class="sxs-lookup"><span data-stu-id="e4b78-162">Local Atom Tables</span></span>

<span data-ttu-id="e4b78-163">Un'applicazione può utilizzare una tabella atom locale per gestire in modo efficiente un numero elevato di stringhe utilizzate solo all'interno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e4b78-163">An application can use a local atom table to efficiently manage a large number of strings used only within the application.</span></span> <span data-ttu-id="e4b78-164">Queste stringhe e gli atomi associati sono disponibili solo per l'applicazione che ha creato la tabella.</span><span class="sxs-lookup"><span data-stu-id="e4b78-164">These strings, and the associated atoms, are available only to the application that created the table.</span></span>

<span data-ttu-id="e4b78-165">Un'applicazione che richiede la stessa stringa in una serie di strutture può ridurre l'utilizzo della memoria utilizzando una tabella atom locale.</span><span class="sxs-lookup"><span data-stu-id="e4b78-165">An application requiring the same string in a number of structures can reduce memory usage by using a local atom table.</span></span> <span data-ttu-id="e4b78-166">Anziché copiare la stringa in ogni struttura, l'applicazione può inserire la stringa nella tabella Atom e includere il Atom risultante nelle strutture.</span><span class="sxs-lookup"><span data-stu-id="e4b78-166">Rather than copying the string into each structure, the application can place the string in the atom table and include the resulting atom in the structures.</span></span> <span data-ttu-id="e4b78-167">In questo modo, una stringa viene visualizzata solo una volta in memoria, ma può essere utilizzata più volte nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e4b78-167">In this way, a string appears only once in memory but can be used many times in the application.</span></span>

<span data-ttu-id="e4b78-168">Le applicazioni possono inoltre utilizzare tabelle Atom locali per risparmiare tempo durante la ricerca di una determinata stringa.</span><span class="sxs-lookup"><span data-stu-id="e4b78-168">Applications can also use local atom tables to save time when searching for a particular string.</span></span> <span data-ttu-id="e4b78-169">Per eseguire una ricerca, un'applicazione deve inserire solo la stringa di ricerca nella tabella Atom e confrontare il valore Atom risultante con gli atomi nelle strutture pertinenti.</span><span class="sxs-lookup"><span data-stu-id="e4b78-169">To perform a search, an application need only place the search string in the atom table and compare the resulting atom with the atoms in the relevant structures.</span></span> <span data-ttu-id="e4b78-170">Il confronto di atomi è in genere più veloce rispetto a quello delle stringhe.</span><span class="sxs-lookup"><span data-stu-id="e4b78-170">Comparing atoms is typically faster than comparing strings.</span></span>

<span data-ttu-id="e4b78-171">Le tabelle Atom vengono implementate come tabelle hash.</span><span class="sxs-lookup"><span data-stu-id="e4b78-171">Atom tables are implemented as hash tables.</span></span> <span data-ttu-id="e4b78-172">Per impostazione predefinita, una tabella atom locale usa bucket 37 per la relativa tabella hash.</span><span class="sxs-lookup"><span data-stu-id="e4b78-172">By default, a local atom table uses 37 buckets for its hash table.</span></span> <span data-ttu-id="e4b78-173">Tuttavia, è possibile modificare il numero di bucket usati chiamando la funzione [**InitAtomTable**](/windows/desktop/api/Winbase/nf-winbase-initatomtable) .</span><span class="sxs-lookup"><span data-stu-id="e4b78-173">However, you can change the number of buckets used by calling the [**InitAtomTable**](/windows/desktop/api/Winbase/nf-winbase-initatomtable) function.</span></span> <span data-ttu-id="e4b78-174">Se l'applicazione chiama **InitAtomTable**, tuttavia, questa operazione deve essere eseguita prima di chiamare qualsiasi altra funzione di gestione Atom.</span><span class="sxs-lookup"><span data-stu-id="e4b78-174">If the application calls **InitAtomTable**, however, it must do so before calling any other atom-management functions.</span></span>

## <a name="atom-types"></a><span data-ttu-id="e4b78-175">Tipi Atom</span><span class="sxs-lookup"><span data-stu-id="e4b78-175">Atom Types</span></span>

<span data-ttu-id="e4b78-176">Le applicazioni possono creare due tipi di atomi, ovvero atomi di stringa e atomi di tipo Integer.</span><span class="sxs-lookup"><span data-stu-id="e4b78-176">Applications can create two types of atoms: string atoms and integer atoms.</span></span> <span data-ttu-id="e4b78-177">I valori di atomi Integer e atomi di stringa non si sovrappongono, quindi è possibile usare entrambi i tipi di atomi nello stesso blocco di codice.</span><span class="sxs-lookup"><span data-stu-id="e4b78-177">The values of integer atoms and string atoms do not overlap, so both types of atoms can be used in the same block of code.</span></span>

<span data-ttu-id="e4b78-178">Diverse funzioni accettano stringhe o atomi come parametri.</span><span class="sxs-lookup"><span data-stu-id="e4b78-178">Several functions accept either strings or atoms as parameters.</span></span> <span data-ttu-id="e4b78-179">Quando si passa un Atom a queste funzioni, un'applicazione può utilizzare la macro [**MAKEINTATOM**](/windows/desktop/api/Winbase/nf-winbase-makeintatom) per convertire il valore Atom in un form che può essere utilizzato dalla funzione.</span><span class="sxs-lookup"><span data-stu-id="e4b78-179">When passing an atom to these functions, an application can use the [**MAKEINTATOM**](/windows/desktop/api/Winbase/nf-winbase-makeintatom) macro to convert the atom into a form that can be used by the function.</span></span>

<span data-ttu-id="e4b78-180">Nelle sezioni seguenti vengono descritti i tipi Atom.</span><span class="sxs-lookup"><span data-stu-id="e4b78-180">The following sections describe atom types.</span></span>

-   [<span data-ttu-id="e4b78-181">Atomi di stringa</span><span class="sxs-lookup"><span data-stu-id="e4b78-181">String Atoms</span></span>](#string-atoms)
-   [<span data-ttu-id="e4b78-182">Atomi Integer</span><span class="sxs-lookup"><span data-stu-id="e4b78-182">Integer Atoms</span></span>](#integer-atoms)

### <a name="string-atoms"></a><span data-ttu-id="e4b78-183">Atomi di stringa</span><span class="sxs-lookup"><span data-stu-id="e4b78-183">String Atoms</span></span>

<span data-ttu-id="e4b78-184">Quando le applicazioni passano stringhe con terminazione null alle funzioni [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma)e [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) , ricevono *atomi di stringa* (interi a 16 bit) in return.</span><span class="sxs-lookup"><span data-stu-id="e4b78-184">When applications pass null-terminated strings to the [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma), and [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) functions, they receive *string atoms* (16-bit integers) in return.</span></span> <span data-ttu-id="e4b78-185">Gli atomi di stringa hanno le proprietà seguenti:</span><span class="sxs-lookup"><span data-stu-id="e4b78-185">String atoms have the following properties:</span></span>

-   <span data-ttu-id="e4b78-186">I valori degli atomi di stringa sono compresi tra 0xC000 (MAXINTATOM) e 0xFFFF.</span><span class="sxs-lookup"><span data-stu-id="e4b78-186">The values of string atoms are in the range 0xC000 (MAXINTATOM) through 0xFFFF.</span></span>
-   <span data-ttu-id="e4b78-187">Il caso non è significativo nelle ricerche di un nome Atom in una tabella Atom.</span><span class="sxs-lookup"><span data-stu-id="e4b78-187">Case is not significant in searches for an atom name in an atom table.</span></span> <span data-ttu-id="e4b78-188">Inoltre, l'intera stringa deve corrispondere in un'operazione di ricerca; non viene eseguita alcuna corrispondenza della sottostringa.</span><span class="sxs-lookup"><span data-stu-id="e4b78-188">Also, the entire string must match in a search operation; no substring matching is performed.</span></span>
-   <span data-ttu-id="e4b78-189">La stringa associata a un Atom di stringa non può avere una dimensione superiore a 255 byte.</span><span class="sxs-lookup"><span data-stu-id="e4b78-189">The string associated with a string atom can be no more than 255 bytes in size.</span></span> <span data-ttu-id="e4b78-190">Questa limitazione si applica a tutte le funzioni Atom.</span><span class="sxs-lookup"><span data-stu-id="e4b78-190">This limitation applies to all atom functions.</span></span>
-   <span data-ttu-id="e4b78-191">Un *conteggio dei riferimenti* è associato a ogni nome Atom.</span><span class="sxs-lookup"><span data-stu-id="e4b78-191">A *reference count* is associated with each atom name.</span></span> <span data-ttu-id="e4b78-192">Il conteggio viene incrementato ogni volta che il nome Atom viene aggiunto alla tabella e decrementato ogni volta che il nome Atom viene eliminato.</span><span class="sxs-lookup"><span data-stu-id="e4b78-192">The count is incremented each time the atom name is added to the table and decremented each time the atom name is deleted from it.</span></span> <span data-ttu-id="e4b78-193">In questo modo si impedisce a utenti diversi della stessa stringa Atom di eliminare definitivamente i nomi Atom.</span><span class="sxs-lookup"><span data-stu-id="e4b78-193">This prevents different users of the same string atom from destroying each other's atom names.</span></span> <span data-ttu-id="e4b78-194">Quando il conteggio dei riferimenti per un nome Atom è uguale a zero, il sistema rimuove il nome Atom e il nome Atom dalla tabella.</span><span class="sxs-lookup"><span data-stu-id="e4b78-194">When the reference count for an atom name equals zero, the system removes the atom and the atom name from the table.</span></span>

### <a name="integer-atoms"></a><span data-ttu-id="e4b78-195">Atomi Integer</span><span class="sxs-lookup"><span data-stu-id="e4b78-195">Integer Atoms</span></span>

<span data-ttu-id="e4b78-196">Gli atomi Integer differiscono dagli atomi di stringa nei modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="e4b78-196">Integer atoms differ from string atoms in the following ways:</span></span>

-   <span data-ttu-id="e4b78-197">I valori degli atomi integer sono compresi nell'intervallo compreso tra 0x0001 e 0xBFFF (**MAXINTATOM**-1).</span><span class="sxs-lookup"><span data-stu-id="e4b78-197">The values of integer atoms are in the range 0x0001 through 0xBFFF (**MAXINTATOM**– 1).</span></span>
-   <span data-ttu-id="e4b78-198">La rappresentazione di stringa di un Atom Integer è \# *dddd*, dove i valori rappresentati da *dddd* sono cifre decimali.</span><span class="sxs-lookup"><span data-stu-id="e4b78-198">The string representation of an integer atom is \#*dddd*, where the values represented by *dddd* are decimal digits.</span></span> <span data-ttu-id="e4b78-199">Gli zeri iniziali vengono ignorati.</span><span class="sxs-lookup"><span data-stu-id="e4b78-199">Leading zeros are ignored.</span></span>
-   <span data-ttu-id="e4b78-200">Nessun conteggio dei riferimenti o overhead di archiviazione associato a un Atom di tipo Integer.</span><span class="sxs-lookup"><span data-stu-id="e4b78-200">There is no reference count or storage overhead associated with an integer atom.</span></span>

## <a name="atom-creation-and-usage-count"></a><span data-ttu-id="e4b78-201">Conteggio utilizzo e creazione Atom</span><span class="sxs-lookup"><span data-stu-id="e4b78-201">Atom Creation and Usage Count</span></span>

<span data-ttu-id="e4b78-202">Un'applicazione crea un Atom locale chiamando la funzione [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) . viene creato un Atom globale chiamando la funzione [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) .</span><span class="sxs-lookup"><span data-stu-id="e4b78-202">An application creates a local atom by calling the [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) function; it creates a global atom by calling the [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) function.</span></span> <span data-ttu-id="e4b78-203">Entrambe le funzioni richiedono un puntatore a una stringa.</span><span class="sxs-lookup"><span data-stu-id="e4b78-203">Both functions require a pointer to a string.</span></span> <span data-ttu-id="e4b78-204">Il sistema esegue la ricerca della stringa nella tabella Atom appropriata e restituisce l'Atom corrispondente all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e4b78-204">The system searches the appropriate atom table for the string and returns the corresponding atom to the application.</span></span> <span data-ttu-id="e4b78-205">Nel caso di un Atom di stringa, se la stringa si trova già nella tabella Atom, il sistema incrementa il conteggio dei riferimenti per la stringa durante questo processo.</span><span class="sxs-lookup"><span data-stu-id="e4b78-205">In the case of a string atom, if the string already resides in the atom table, the system increments the reference count for the string during this process.</span></span>

<span data-ttu-id="e4b78-206">Le chiamate ripetute per aggiungere lo stesso nome Atom restituiscono lo stesso Atom.</span><span class="sxs-lookup"><span data-stu-id="e4b78-206">Repeated calls to add the same atom name return the same atom.</span></span> <span data-ttu-id="e4b78-207">Se il nome Atom non esiste nella tabella quando viene chiamato [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) , il nome Atom viene aggiunto alla tabella e viene restituito un nuovo Atom.</span><span class="sxs-lookup"><span data-stu-id="e4b78-207">If the atom name does not exist in the table when [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) is called, the atom name is added to the table and a new atom is returned.</span></span> <span data-ttu-id="e4b78-208">Se si tratta di una stringa Atom, il conteggio dei riferimenti viene impostato su uno.</span><span class="sxs-lookup"><span data-stu-id="e4b78-208">If it is a string atom, its reference count is also set to one.</span></span>

<span data-ttu-id="e4b78-209">Quando non è più necessario usare un Atom locale, un'applicazione deve chiamare la funzione [**DeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-deleteatom) . deve chiamare la funzione [**GlobalDeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) quando non è più necessario un Atom globale.</span><span class="sxs-lookup"><span data-stu-id="e4b78-209">An application should call the [**DeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-deleteatom) function when it no longer needs to use a local atom; it should call the [**GlobalDeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) function when it no longer needs a global atom.</span></span> <span data-ttu-id="e4b78-210">Nel caso di una stringa Atom, una di queste funzioni riduce il conteggio dei riferimenti del Atom corrispondente di uno.</span><span class="sxs-lookup"><span data-stu-id="e4b78-210">In the case of a string atom, either of these functions reduces the reference count of the corresponding atom by one.</span></span> <span data-ttu-id="e4b78-211">Quando il conteggio dei riferimenti raggiunge zero, il sistema elimina il nome Atom dalla tabella.</span><span class="sxs-lookup"><span data-stu-id="e4b78-211">When the reference count reaches zero, the system deletes the atom name from the table.</span></span>

<span data-ttu-id="e4b78-212">Il nome Atom di un Atom di stringa rimane nella tabella Atom globale purché il conteggio dei riferimenti sia maggiore di zero, anche dopo che l'applicazione che lo ha inserito nella tabella viene terminata.</span><span class="sxs-lookup"><span data-stu-id="e4b78-212">The atom name of a string atom remains in the global atom table as long as its reference count is greater than zero, even after the application that placed it in the table terminates.</span></span> <span data-ttu-id="e4b78-213">Una tabella atom locale viene distrutta quando l'applicazione associata viene terminata, indipendentemente dal conteggio dei riferimenti degli atomi nella tabella.</span><span class="sxs-lookup"><span data-stu-id="e4b78-213">A local atom table is destroyed when the associated application terminates, regardless of the reference counts of the atoms in the table.</span></span>

## <a name="atom-table-queries"></a><span data-ttu-id="e4b78-214">Query di Atom-Table</span><span class="sxs-lookup"><span data-stu-id="e4b78-214">Atom-Table Queries</span></span>

<span data-ttu-id="e4b78-215">Un'applicazione può determinare se una determinata stringa si trova già in una tabella Atom usando la funzione [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) o [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) .</span><span class="sxs-lookup"><span data-stu-id="e4b78-215">An application can determine whether a particular string is already in an atom table by using the [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) or [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) function.</span></span> <span data-ttu-id="e4b78-216">Queste funzioni ricercano una tabella Atom per la stringa specificata e, se la stringa è presente, restituiscono il valore Atom corrispondente.</span><span class="sxs-lookup"><span data-stu-id="e4b78-216">These functions search an atom table for the specified string and, if the string is there, return the corresponding atom.</span></span>

<span data-ttu-id="e4b78-217">Un'applicazione può utilizzare la funzione [**GetAtomName**](/windows/desktop/api/Winbase/nf-winbase-getatomnamea) o [**GlobalGetAtomName**](/windows/desktop/api/Winbase/nf-winbase-globalgetatomnamea) per recuperare una stringa del nome Atom da una tabella Atom, purché l'applicazione disponga del valore Atom corrispondente alla stringa cercata.</span><span class="sxs-lookup"><span data-stu-id="e4b78-217">An application can use the [**GetAtomName**](/windows/desktop/api/Winbase/nf-winbase-getatomnamea) or [**GlobalGetAtomName**](/windows/desktop/api/Winbase/nf-winbase-globalgetatomnamea) function to retrieve an atom-name string from an atom table, provided the application has the atom corresponding to the string being sought.</span></span> <span data-ttu-id="e4b78-218">Entrambe le funzioni copiano la stringa del nome Atom del Atom specificato in un buffer e restituiscono la lunghezza della stringa copiata.</span><span class="sxs-lookup"><span data-stu-id="e4b78-218">Both functions copy the atom-name string of the specified atom to a buffer and return the length of the string that was copied.</span></span> <span data-ttu-id="e4b78-219">**GetAtomName** recupera una stringa del nome Atom da una tabella atom locale e **GlobalGetAtomName** recupera una stringa del nome Atom dalla tabella Atom globale.</span><span class="sxs-lookup"><span data-stu-id="e4b78-219">**GetAtomName** retrieves an atom-name string from a local atom table, and **GlobalGetAtomName** retrieves an atom-name string from the global atom table.</span></span>

## <a name="atom-string-formats"></a><span data-ttu-id="e4b78-220">Formati di stringa Atom</span><span class="sxs-lookup"><span data-stu-id="e4b78-220">Atom String Formats</span></span>

<span data-ttu-id="e4b78-221">Le funzioni [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma)e [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) accettano un puntatore a una stringa con terminazione null.</span><span class="sxs-lookup"><span data-stu-id="e4b78-221">The [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma), and [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) functions take a pointer to a null-terminated string.</span></span> <span data-ttu-id="e4b78-222">Un'applicazione può specificare questo puntatore in uno dei modi seguenti.</span><span class="sxs-lookup"><span data-stu-id="e4b78-222">An application can specify this pointer in one of the following ways.</span></span>



|                    |                                                                                                    |
|--------------------|----------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e4b78-223">\#*dddd*</span><span class="sxs-lookup"><span data-stu-id="e4b78-223">\#*dddd*</span></span>           | <span data-ttu-id="e4b78-224">Intero specificato come stringa decimale.</span><span class="sxs-lookup"><span data-stu-id="e4b78-224">An integer specified as a decimal string.</span></span> <span data-ttu-id="e4b78-225">Utilizzato per creare o trovare un Atom di tipo Integer.</span><span class="sxs-lookup"><span data-stu-id="e4b78-225">Used to create or find an integer atom.</span></span>                  |
| <span data-ttu-id="e4b78-226">*nome Atom stringa*</span><span class="sxs-lookup"><span data-stu-id="e4b78-226">*string atom name*</span></span> | <span data-ttu-id="e4b78-227">Nome Atom della stringa.</span><span class="sxs-lookup"><span data-stu-id="e4b78-227">A string atom name.</span></span> <span data-ttu-id="e4b78-228">Utilizzato per aggiungere un nome Atom di stringa a una tabella Atom e ricevere un Atom in return.</span><span class="sxs-lookup"><span data-stu-id="e4b78-228">Used to add a string atom name to an atom table and receive an atom in return.</span></span> |



 

 

 
