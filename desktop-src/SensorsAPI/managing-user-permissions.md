---
description: L'API del sensore fornisce un metodo che è possibile usare per richiedere all'utente le autorizzazioni per usare un sensore o una raccolta di sensori.
ms.assetid: c755edcf-18c1-43d5-9dfe-c073e1f96b5f
title: Gestione delle autorizzazioni utente
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ecb65fa5a9962be4850aa4711cafa03fb7658212
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103966575"
---
# <a name="managing-user-permissions"></a><span data-ttu-id="4b747-103">Gestione delle autorizzazioni utente</span><span class="sxs-lookup"><span data-stu-id="4b747-103">Managing User Permissions</span></span>

<span data-ttu-id="4b747-104">L'API del sensore fornisce un metodo che è possibile usare per richiedere all'utente le autorizzazioni per usare un sensore o una raccolta di sensori.</span><span class="sxs-lookup"><span data-stu-id="4b747-104">The Sensor API provides a method you can use to prompt the user for permissions to use a sensor or collection of sensors.</span></span>

<span data-ttu-id="4b747-105">Poiché i sensori possono rivelare informazioni riservate, Windows richiede che gli utenti abiliti i sensori prima che il programma possa accedere a tutti i dati.</span><span class="sxs-lookup"><span data-stu-id="4b747-105">Because sensors can reveal sensitive information, Windows requires that users enable sensors before your program can access any data.</span></span>

<span data-ttu-id="4b747-106">Potrebbe essere necessario richiedere l'autorizzazione quando si vogliono usare i sensori per i quali il [**SensorState**](/windows/win32/api/sensorsapi/ne-sensorsapi-sensorstate) corrente è \_ stato \_ \_ negato.</span><span class="sxs-lookup"><span data-stu-id="4b747-106">You may want to request permission when you want to use sensors for which the current [**SensorState**](/windows/win32/api/sensorsapi/ne-sensorsapi-sensorstate) is SENSOR\_STATE\_ACCESS\_DENIED.</span></span>

<span data-ttu-id="4b747-107">Per richiedere le autorizzazioni, chiamare il metodo [**ISensorManager:: RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) .</span><span class="sxs-lookup"><span data-stu-id="4b747-107">To request permissions, call the [**ISensorManager::RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) method.</span></span> <span data-ttu-id="4b747-108">Quando si chiama questo metodo, Windows apre la finestra di dialogo **Abilita sensori** per richiedere all'utente di abilitare i sensori richiesti.</span><span class="sxs-lookup"><span data-stu-id="4b747-108">When you call this method, Windows opens the **Enable sensors** dialog box to prompt the user to enable the sensors you requested.</span></span> <span data-ttu-id="4b747-109">Questa finestra di dialogo consente all'utente di usare i nomi dei sensori richiesti.</span><span class="sxs-lookup"><span data-stu-id="4b747-109">This dialog box provides the user with the names of the sensors you requested.</span></span> <span data-ttu-id="4b747-110">L'utente può scegliere una delle opzioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="4b747-110">The user can choose one of the following options:</span></span>

-   <span data-ttu-id="4b747-111">**Abilitare i sensori**.</span><span class="sxs-lookup"><span data-stu-id="4b747-111">**Enable these sensors**.</span></span>
-   <span data-ttu-id="4b747-112">**Non abilitare questi sensori**.</span><span class="sxs-lookup"><span data-stu-id="4b747-112">**Don't enable these sensors**.</span></span>
-   <span data-ttu-id="4b747-113">**Aprire il pannello di controllo per altre opzioni**.</span><span class="sxs-lookup"><span data-stu-id="4b747-113">**Open Control Panel for more options**.</span></span>

<span data-ttu-id="4b747-114">Se un utente sceglie di **non abilitare questi sensori**, Windows non visualizzerà di nuovo la finestra di dialogo **Abilita sensori** per quei sensori specifici, anche se il programma chiama [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions).</span><span class="sxs-lookup"><span data-stu-id="4b747-114">If a user chooses **Don't enable these sensors**, Windows will not show the **Enable sensors** dialog box again for those particular sensors, even if your program calls [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions).</span></span> <span data-ttu-id="4b747-115">Se l'utente sceglie un'altra opzione, Windows consentirà la visualizzazione della finestra di dialogo quando richiesto.</span><span class="sxs-lookup"><span data-stu-id="4b747-115">If the user chooses any other option, Windows will allow the dialog box to be displayed when requested.</span></span> <span data-ttu-id="4b747-116">Se la chiamata a **RequestPermissions** contiene alcuni sensori che l'utente ha scelto in precedenza di rimanere disabilitato, l'API del sensore rimuoverà questi sensori dall'elenco dei sensori che l'utente vede.</span><span class="sxs-lookup"><span data-stu-id="4b747-116">If your call to **RequestPermissions** contains some sensors that the user has previously chosen to keep disabled, the Sensor API will remove these sensors from the list of sensors the user sees.</span></span>

### <a name="modal-or-modeless-behavior"></a><span data-ttu-id="4b747-117">Comportamento modale o non modale</span><span class="sxs-lookup"><span data-stu-id="4b747-117">Modal or Modeless Behavior</span></span>

<span data-ttu-id="4b747-118">Il metodo [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) accetta un argomento **booleano** che determina se la finestra di dialogo **Abilita sensori** viene visualizzata come finestra modale o non modale.</span><span class="sxs-lookup"><span data-stu-id="4b747-118">The [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) method takes a **Boolean** argument that determines whether the **Enable sensors** dialog box is displayed as a modal or modeless window.</span></span> <span data-ttu-id="4b747-119">Questa impostazione influiscono inoltre sull'eventuale comportamento del codice restituito dalla finestra di dialogo come sincrono o asincrono.</span><span class="sxs-lookup"><span data-stu-id="4b747-119">This setting also affects whether the behavior of the dialog box return code is synchronous or asynchronous.</span></span>

<span data-ttu-id="4b747-120">Quando modale, la finestra di dialogo ha lo stato attivo esclusivo tra le finestre dell'applicazione fino a quando l'utente non sceglie un'opzione e il codice **HRESULT** restituito dalla chiamata a [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) indica la scelta dell'utente.</span><span class="sxs-lookup"><span data-stu-id="4b747-120">When modal, the dialog box has exclusive focus among application windows until the user chooses an option, and the **HRESULT** return code from your call to [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) indicates the user choice.</span></span> <span data-ttu-id="4b747-121">Quando non è modale, la finestra di dialogo non ha lo stato attivo esclusivo e la chiamata a **RequestPermissions** restituisce immediatamente un risultato.</span><span class="sxs-lookup"><span data-stu-id="4b747-121">When modeless, the dialog box does not have exclusive focus and your call to **RequestPermissions** returns immediately.</span></span> <span data-ttu-id="4b747-122">In questo caso, il codice restituito indica se il metodo ha avuto esito positivo, ma non può essere usato per verificare la scelta dell'utente.</span><span class="sxs-lookup"><span data-stu-id="4b747-122">In this case, the return code indicates whether the method succeeded, but cannot be used to ascertain the user's choice.</span></span> <span data-ttu-id="4b747-123">È quindi possibile determinare quali sensori sono stati abilitati gestendo l'evento [**OnStateChanged**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensorevents-onstatechanged) e controllando che ogni sensore sia \_ pronto per lo stato del sensore \_ .</span><span class="sxs-lookup"><span data-stu-id="4b747-123">You can then determine which sensors have been enabled by handling the [**OnStateChanged**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensorevents-onstatechanged) event and checking each sensor for SENSOR\_STATE\_READY.</span></span>

<span data-ttu-id="4b747-124">Per ulteriori informazioni sui codici restituiti, vedere la pagina di riferimento di [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) .</span><span class="sxs-lookup"><span data-stu-id="4b747-124">For more information about return codes, see the [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) reference page.</span></span>

### <a name="best-practice-avoid-multiple-modeless-calls-to-requestpermissions"></a><span data-ttu-id="4b747-125">Procedura consigliata: evitare più chiamate non modali a RequestPermissions</span><span class="sxs-lookup"><span data-stu-id="4b747-125">Best Practice: Avoid Multiple Modeless Calls to RequestPermissions</span></span>

<span data-ttu-id="4b747-126">Le chiamate non modali ripetute a [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) visualizzeranno più istanze della finestra di dialogo **Abilita questi sensori** e potrebbero compromettere lo schermo con le finestre di dialogo, causando un'esperienza utente insufficiente.</span><span class="sxs-lookup"><span data-stu-id="4b747-126">Repeated modeless calls to [**RequestPermissions**](/windows/win32/api/sensorsapi/nf-sensorsapi-isensormanager-requestpermissions) will display multiple instances of the **Enable these sensors** dialog box, and can potentially flood the screen with dialog boxes, resulting in a poor user experience.</span></span> <span data-ttu-id="4b747-127">Se si ritiene che dopo la prima chiamata a **RequestPermissions**, potrebbero essere installati altri sensori di posizione, richiedendo un'altra chiamata a **RequestPermissions**, è necessario chiamare **RequestPermissions** modale oppure attendere che tutti i sensori di posizione siano installati per effettuare una chiamata non modale.</span><span class="sxs-lookup"><span data-stu-id="4b747-127">If you think that after your first call to **RequestPermissions**, other location sensors might be installed, requiring another call to **RequestPermissions**, you should either call **RequestPermissions** modally, or wait until all location sensors are installed to make a modeless call.</span></span>

## <a name="related-topics"></a><span data-ttu-id="4b747-128">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="4b747-128">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4b747-129">Privacy e sicurezza nella piattaforma sensore e posizione</span><span class="sxs-lookup"><span data-stu-id="4b747-129">Privacy and Security in the Sensor and Location Platform</span></span>](privacy-and-security-in-the-sensor-and-location-platform.md)
</dt> <dt>

[<span data-ttu-id="4b747-130">Richiesta di autorizzazioni utente</span><span class="sxs-lookup"><span data-stu-id="4b747-130">Requesting User Permissions</span></span>](requesting-user-permissions.md)
</dt> </dl>

 

 
