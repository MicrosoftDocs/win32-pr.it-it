---
title: Creazione di un controllo di accesso a destra
description: Per aggiungere un diritto di accesso di controllo a un server di Active Directory, creare un oggetto controlAccessRight nel contenitore Extended-Rights della partizione di configurazione.
ms.assetid: dacd42c6-17d9-4dfe-8f51-e4a470766494
ms.tgt_platform: multiple
keywords:
- Creazione di un controllo AD Access Right AD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 11bdc764b09f0fe5bd165e87e23a89db7d368bfe
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/17/2020
ms.locfileid: "103724594"
---
# <a name="creating-a-control-access-right"></a>Creazione di un controllo di accesso a destra

Per aggiungere un diritto di accesso di controllo a un server di Active Directory, creare un oggetto [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) nel contenitore Extended-Rights della partizione di configurazione. Per ulteriori informazioni e un esempio di codice, vedere [codice di esempio per la creazione di un diritto di accesso al controllo](example-code-for-creating-a-control-access-right.md). Per usare il diritto di accesso Control, è necessario completare alcuni passaggi, a seconda che il diritto di accesso al controllo sia per un'operazione speciale o un set di proprietà.

Se si definisce un diritto di accesso di controllo per un set di proprietà, utilizzare **rightsGuid** dell'oggetto [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) per identificare le proprietà nel set. Ogni proprietà è definita da un oggetto [**attributeSchema**](/windows/desktop/ADSchema/c-attributeschema) nello schema Active Directory. La proprietà [**attributeSecurityGUID**](/windows/desktop/ADSchema/a-attributesecurityguid) di un oggetto **attributeSchema** identifica il set di proprietà, se presente, a cui appartiene la proprietà. Tenere presente che la proprietà **attributeSecurityGUID** è a valore singolo e archivia il GUID in formato binario (sintassi delle stringhe di ottetti).

Se si definisce un diritto di accesso di controllo per la limitazione dell'accesso a una determinata operazione, l'applicazione deve eseguire il controllo di accesso quando un utente tenta di eseguire l'operazione.

**Per configurare il controllo dell'accesso**

1.  Creare un diritto di accesso di controllo che definisce il tipo di accesso all'applicazione o al servizio. Per ulteriori informazioni, vedere l'esempio di codice seguente.
2.  Creare un Active Directory Domain Services oggetto che rappresenta l'applicazione, il servizio o la risorsa da proteggere.
3.  Aggiungere le voci ACE degli oggetti all'elenco DACL nel descrittore di sicurezza dell'oggetto per concedere o negare agli utenti o ai gruppi il diritto di accesso di controllo su tale oggetto. Per ulteriori informazioni, vedere [impostazione di un controllo ACE Rights Access Right nell'ACL di un oggetto](setting-a-control-access-right-ace-in-an-objectampaposs-acl.md).
4.  Quando un utente tenta di eseguire l'operazione, verificare i diritti utente passando il descrittore di sicurezza dell'oggetto e il token di accesso utente alla funzione [**AccessCheckByTypeResultList**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-accesscheckbytyperesultlist) . Per ulteriori informazioni, vedere controllo dell' [accesso a un controllo direttamente nell'elenco ACL di un oggetto](checking-a-control-access-right-in-an-objectampaposs-acl.md).

In base al risultato del controllo di accesso sull'oggetto, l'applicazione o il servizio può consentire o negare l'accesso dell'utente all'applicazione o al servizio.

Quando si crea un oggetto [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) , impostare gli attributi, elencati nella tabella seguente, per rendere l'oggetto un diritto di accesso di controllo valido riconosciuto da Active Directory Domain Services e dai sistemi di sicurezza di Windows.



| Attributo                                     | Descrizione                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|-----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**cn**](/windows/desktop/ADSchema/a-cn)                       | Proprietà a valore singolo che rappresenta il nome distinto relativo (RDN) dell'oggetto nel contenitore Extended-Rights. **CN** è il nome del controllo di accesso a destra in Active Directory Domain Services.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [**appliesTo**](/windows/desktop/ADSchema/a-appliesto)         | Proprietà multivalore che elenca le classi di oggetti a cui si applica il diritto di controllo di accesso. Ad esempio, il controllo di accesso [**Send-As**](/windows/desktop/ADSchema/r-send-as) elenca le classi di oggetti [**utente**](/windows/desktop/ADSchema/c-user) e [**computer**](/windows/desktop/ADSchema/c-computer) nella relativa proprietà **appliesTo** . Nell'elenco ogni classe di oggetti viene identificata dal [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) del relativo oggetto [**classSchema**](/windows/desktop/ADSchema/c-classschema) . I GUID vengono archiviati come stringhe del modulo prodotto dalla funzione [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) nella libreria com ma senza le parentesi graffe iniziali e terminate ({}). Il GUID seguente, ad esempio, è **schemaIDGUID** per la classe [**computer**](/windows/desktop/ADSchema/c-computer) : bf967a86-0de6-11D0-A285-00aa003049e2.<br/> Tenere presente che la proprietà [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) di un oggetto [**classSchema**](/windows/desktop/ADSchema/c-classschema) viene archiviata come GUID binario usando la sintassi della stringa ottetto. Per convertire questo formato stringa ottetto nel formato stringa usato nella proprietà [**appliesTo**](/windows/desktop/ADSchema/a-appliesto) , usare la funzione [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) e rimuovere le parentesi graffe dalla stringa restituita.<br/> Per ulteriori informazioni sulla proprietà [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) di una delle classi di oggetti predefinite, ad esempio [**User**](/windows/desktop/ADSchema/c-user) o [**computer**](/windows/desktop/ADSchema/c-computer), vedere la pagina di riferimento della classe nel riferimento allo schema Active Directory nel [riferimento Active Directory Domain Services](active-directory-domain-services-reference.md). Per ulteriori informazioni e un esempio di codice che recupera un **schemaIDGUID** da un oggetto classSchema, vedere [lettura di oggetti attributeSchema e classSchema](reading-attributeschema-and-classschema-objects.md).<br/> |
| [**displayName**](/windows/desktop/ADSchema/a-displayname)     | Stringa utilizzata per visualizzare il controllo di accesso direttamente nelle interfacce utente, ad esempio la pagina delle proprietà **sicurezza** e altre posizioni nello snap-in MMC utenti e computer Active Directory.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [**rightsGuid**](/windows/desktop/ADSchema/a-rightsguid)       | GUID che identifica il diritto di accesso al controllo in una voce ACE. Il GUID viene archiviato come stringa nel formato prodotto dalla funzione [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) , ma senza le parentesi graffe di inizio e di fine. Usare Uuidgen.exe per un'altra utilità per generare un GUID per il diritto di accesso del controllo. Se si definisce un nuovo set di proprietà, utilizzare [**rightsGuid**](/windows/desktop/ADSchema/a-rightsguid) dell'oggetto [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) per identificare le proprietà nel set. Per ogni proprietà nel set di proprietà, impostare il valore [**attributeSecurityGUID**](/windows/desktop/ADSchema/a-attributesecurityguid) della proprietà sul valore di **rightsGuid** del set di proprietà. Il valore **attributeSecurityGUID** di una proprietà viene archiviato nella definizione [**attributeSchema**](/windows/desktop/ADSchema/c-attributeschema) della proprietà nello schema Active Directory. La proprietà **attributeSecurityGUID** è a valore singolo e archivia il GUID in formato binario (sintassi delle stringhe di ottetti).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [**objectClass**](/windows/desktop/ADSchema/a-objectclass)     | Questo attributo specifica [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) come classe di oggetti.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [**validAccesses**](/windows/desktop/ADSchema/a-validaccesses) | Per i set di proprietà, impostare questo attributo su 0x30 (**Ads \_ Rights \_ DS \_ Read \_ prop** \| **Ads \_ right \_ DS \_ Write \_ prop**). Per i diritti di accesso di controllo, impostare questo attributo su 0x100 (**Ads \_ right \_ DS \_ Control \_ Access**). La pagina delle proprietà sicurezza riconosce i diritti di accesso di controllo solo se l'attributo [**validAccesses**](/windows/desktop/ADSchema/a-validaccesses) è impostato sul valore appropriato. Se è zero, il diritto di accesso al controllo viene ignorato o non viene visualizzato nella pagina delle proprietà sicurezza.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

Tenere presente che le classi di schema predefinite utilizzano l'attributo **localizationDisplayId** di un oggetto [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) per specificare un identificatore di messaggio utilizzato per recuperare un nome visualizzato localizzato da Dssec.dll. Non impostare l'attributo **localizationDisplayId** se si definisce un nuovo oggetto **controlAccessRight** .

 

