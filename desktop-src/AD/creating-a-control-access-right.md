---
title: Creazione di un controllo di accesso a destra
description: Per aggiungere un diritto di accesso di controllo a un server di Active Directory, creare un oggetto controlAccessRight nel contenitore Extended-Rights della partizione di configurazione.
ms.assetid: dacd42c6-17d9-4dfe-8f51-e4a470766494
ms.tgt_platform: multiple
keywords:
- Creazione di un controllo AD Access Right AD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 11bdc764b09f0fe5bd165e87e23a89db7d368bfe
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/17/2020
ms.locfileid: "103724594"
---
# <a name="creating-a-control-access-right"></a><span data-ttu-id="9bebc-104">Creazione di un controllo di accesso a destra</span><span class="sxs-lookup"><span data-stu-id="9bebc-104">Creating a Control Access Right</span></span>

<span data-ttu-id="9bebc-105">Per aggiungere un diritto di accesso di controllo a un server di Active Directory, creare un oggetto [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) nel contenitore Extended-Rights della partizione di configurazione.</span><span class="sxs-lookup"><span data-stu-id="9bebc-105">To add a control access right to an Active Directory server, create a [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) object in the Extended-Rights container of the Configuration partition.</span></span> <span data-ttu-id="9bebc-106">Per ulteriori informazioni e un esempio di codice, vedere [codice di esempio per la creazione di un diritto di accesso al controllo](example-code-for-creating-a-control-access-right.md).</span><span class="sxs-lookup"><span data-stu-id="9bebc-106">For more information and a code example, see [Example Code for Creating a Control Access Right](example-code-for-creating-a-control-access-right.md).</span></span> <span data-ttu-id="9bebc-107">Per usare il diritto di accesso Control, è necessario completare alcuni passaggi, a seconda che il diritto di accesso al controllo sia per un'operazione speciale o un set di proprietà.</span><span class="sxs-lookup"><span data-stu-id="9bebc-107">To use the control access right, you must complete a few more steps, depending on whether the control access right is for a special operation or a property set.</span></span>

<span data-ttu-id="9bebc-108">Se si definisce un diritto di accesso di controllo per un set di proprietà, utilizzare **rightsGuid** dell'oggetto [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) per identificare le proprietà nel set.</span><span class="sxs-lookup"><span data-stu-id="9bebc-108">If you define a control access right for a property set, use the **rightsGUID** of the [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) object to identify the properties in the set.</span></span> <span data-ttu-id="9bebc-109">Ogni proprietà è definita da un oggetto [**attributeSchema**](/windows/desktop/ADSchema/c-attributeschema) nello schema Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9bebc-109">Every property is defined by an [**attributeSchema**](/windows/desktop/ADSchema/c-attributeschema) object in the Active Directory schema.</span></span> <span data-ttu-id="9bebc-110">La proprietà [**attributeSecurityGUID**](/windows/desktop/ADSchema/a-attributesecurityguid) di un oggetto **attributeSchema** identifica il set di proprietà, se presente, a cui appartiene la proprietà.</span><span class="sxs-lookup"><span data-stu-id="9bebc-110">The [**attributeSecurityGUID**](/windows/desktop/ADSchema/a-attributesecurityguid) property of an **attributeSchema** object identifies the property set, if any, that the property belongs to.</span></span> <span data-ttu-id="9bebc-111">Tenere presente che la proprietà **attributeSecurityGUID** è a valore singolo e archivia il GUID in formato binario (sintassi delle stringhe di ottetti).</span><span class="sxs-lookup"><span data-stu-id="9bebc-111">Be aware that the **attributeSecurityGUID** property is single-valued and stores the GUID in binary format (octet string syntax).</span></span>

<span data-ttu-id="9bebc-112">Se si definisce un diritto di accesso di controllo per la limitazione dell'accesso a una determinata operazione, l'applicazione deve eseguire il controllo di accesso quando un utente tenta di eseguire l'operazione.</span><span class="sxs-lookup"><span data-stu-id="9bebc-112">If you define a control access right to place restrictions on access to a particular operation, your application must perform the access check when a user attempts the operation.</span></span>

<span data-ttu-id="9bebc-113">**Per configurare il controllo dell'accesso**</span><span class="sxs-lookup"><span data-stu-id="9bebc-113">**To set up access check**</span></span>

1.  <span data-ttu-id="9bebc-114">Creare un diritto di accesso di controllo che definisce il tipo di accesso all'applicazione o al servizio.</span><span class="sxs-lookup"><span data-stu-id="9bebc-114">Create a control access right that defines the type of access to the application or service.</span></span> <span data-ttu-id="9bebc-115">Per ulteriori informazioni, vedere l'esempio di codice seguente.</span><span class="sxs-lookup"><span data-stu-id="9bebc-115">For more information, see the following code example.</span></span>
2.  <span data-ttu-id="9bebc-116">Creare un Active Directory Domain Services oggetto che rappresenta l'applicazione, il servizio o la risorsa da proteggere.</span><span class="sxs-lookup"><span data-stu-id="9bebc-116">Create an Active Directory Domain Services object that represents the application, service, or resource that you are protecting.</span></span>
3.  <span data-ttu-id="9bebc-117">Aggiungere le voci ACE degli oggetti all'elenco DACL nel descrittore di sicurezza dell'oggetto per concedere o negare agli utenti o ai gruppi il diritto di accesso di controllo su tale oggetto.</span><span class="sxs-lookup"><span data-stu-id="9bebc-117">Add object ACEs to the DACL in the object security descriptor to grant or deny users or groups the control access right on that object.</span></span> <span data-ttu-id="9bebc-118">Per ulteriori informazioni, vedere [impostazione di un controllo ACE Rights Access Right nell'ACL di un oggetto](setting-a-control-access-right-ace-in-an-objectampaposs-acl.md).</span><span class="sxs-lookup"><span data-stu-id="9bebc-118">For more information, see [Setting a Control Access Right ACE in an Object's ACL](setting-a-control-access-right-ace-in-an-objectampaposs-acl.md).</span></span>
4.  <span data-ttu-id="9bebc-119">Quando un utente tenta di eseguire l'operazione, verificare i diritti utente passando il descrittore di sicurezza dell'oggetto e il token di accesso utente alla funzione [**AccessCheckByTypeResultList**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-accesscheckbytyperesultlist) .</span><span class="sxs-lookup"><span data-stu-id="9bebc-119">When a user attempts to perform the operation, verify the user rights by passing the object security descriptor and the user access token to the [**AccessCheckByTypeResultList**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-accesscheckbytyperesultlist) function.</span></span> <span data-ttu-id="9bebc-120">Per ulteriori informazioni, vedere controllo dell' [accesso a un controllo direttamente nell'elenco ACL di un oggetto](checking-a-control-access-right-in-an-objectampaposs-acl.md).</span><span class="sxs-lookup"><span data-stu-id="9bebc-120">For more information, see [Checking a Control Access Right in an Object's ACL](checking-a-control-access-right-in-an-objectampaposs-acl.md).</span></span>

<span data-ttu-id="9bebc-121">In base al risultato del controllo di accesso sull'oggetto, l'applicazione o il servizio può consentire o negare l'accesso dell'utente all'applicazione o al servizio.</span><span class="sxs-lookup"><span data-stu-id="9bebc-121">Based on the result of the access check on the object, the application or service can allow or deny the user access to the application or service.</span></span>

<span data-ttu-id="9bebc-122">Quando si crea un oggetto [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) , impostare gli attributi, elencati nella tabella seguente, per rendere l'oggetto un diritto di accesso di controllo valido riconosciuto da Active Directory Domain Services e dai sistemi di sicurezza di Windows.</span><span class="sxs-lookup"><span data-stu-id="9bebc-122">When you create a [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) object, set the attributes, listed in the following table, to make the object a legal control access right that is recognized by Active Directory Domain Services and the Windows security systems.</span></span>



| <span data-ttu-id="9bebc-123">Attributo</span><span class="sxs-lookup"><span data-stu-id="9bebc-123">Attribute</span></span>                                     | <span data-ttu-id="9bebc-124">Descrizione</span><span class="sxs-lookup"><span data-stu-id="9bebc-124">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|-----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="9bebc-125">**cn**</span><span class="sxs-lookup"><span data-stu-id="9bebc-125">**cn**</span></span>](/windows/desktop/ADSchema/a-cn)                       | <span data-ttu-id="9bebc-126">Proprietà a valore singolo che rappresenta il nome distinto relativo (RDN) dell'oggetto nel contenitore Extended-Rights.</span><span class="sxs-lookup"><span data-stu-id="9bebc-126">A single-valued property that is the object's relative distinguished name (RDN) in the Extended-Rights container.</span></span> <span data-ttu-id="9bebc-127">**CN** è il nome del controllo di accesso a destra in Active Directory Domain Services.</span><span class="sxs-lookup"><span data-stu-id="9bebc-127">The **cn** is the name of the access control right in Active Directory Domain Services.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="9bebc-128">**appliesTo**</span><span class="sxs-lookup"><span data-stu-id="9bebc-128">**appliesTo**</span></span>](/windows/desktop/ADSchema/a-appliesto)         | <span data-ttu-id="9bebc-129">Proprietà multivalore che elenca le classi di oggetti a cui si applica il diritto di controllo di accesso.</span><span class="sxs-lookup"><span data-stu-id="9bebc-129">A multi-valued property that lists the object classes that the access control right applies to.</span></span> <span data-ttu-id="9bebc-130">Ad esempio, il controllo di accesso [**Send-As**](/windows/desktop/ADSchema/r-send-as) elenca le classi di oggetti [**utente**](/windows/desktop/ADSchema/c-user) e [**computer**](/windows/desktop/ADSchema/c-computer) nella relativa proprietà **appliesTo** .</span><span class="sxs-lookup"><span data-stu-id="9bebc-130">For example, the [**Send-As**](/windows/desktop/ADSchema/r-send-as) access control right lists the [**user**](/windows/desktop/ADSchema/c-user) and [**computer**](/windows/desktop/ADSchema/c-computer) object classes in its **appliesTo** property.</span></span> <span data-ttu-id="9bebc-131">Nell'elenco ogni classe di oggetti viene identificata dal [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) del relativo oggetto [**classSchema**](/windows/desktop/ADSchema/c-classschema) .</span><span class="sxs-lookup"><span data-stu-id="9bebc-131">In the list, each object class is identified by the [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) of its [**classSchema**](/windows/desktop/ADSchema/c-classschema) object.</span></span> <span data-ttu-id="9bebc-132">I GUID vengono archiviati come stringhe del modulo prodotto dalla funzione [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) nella libreria com ma senza le parentesi graffe iniziali e terminate ({}).</span><span class="sxs-lookup"><span data-stu-id="9bebc-132">The GUIDs are stored as strings of the form produced by the [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) function in the COM library but without the starting and terminating braces ({ }).</span></span> <span data-ttu-id="9bebc-133">Il GUID seguente, ad esempio, è **schemaIDGUID** per la classe [**computer**](/windows/desktop/ADSchema/c-computer) : bf967a86-0de6-11D0-A285-00aa003049e2.</span><span class="sxs-lookup"><span data-stu-id="9bebc-133">For example, the following GUID is the **schemaIDGUID** for the [**computer**](/windows/desktop/ADSchema/c-computer) class: bf967a86-0de6-11d0-a285-00aa003049e2.</span></span><br/> <span data-ttu-id="9bebc-134">Tenere presente che la proprietà [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) di un oggetto [**classSchema**](/windows/desktop/ADSchema/c-classschema) viene archiviata come GUID binario usando la sintassi della stringa ottetto.</span><span class="sxs-lookup"><span data-stu-id="9bebc-134">Be aware that the [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) property of a [**classSchema**](/windows/desktop/ADSchema/c-classschema) object is stored as a binary GUID using the octet string syntax.</span></span> <span data-ttu-id="9bebc-135">Per convertire questo formato stringa ottetto nel formato stringa usato nella proprietà [**appliesTo**](/windows/desktop/ADSchema/a-appliesto) , usare la funzione [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) e rimuovere le parentesi graffe dalla stringa restituita.</span><span class="sxs-lookup"><span data-stu-id="9bebc-135">To convert this octet string format to the string format used in the [**appliesTo**](/windows/desktop/ADSchema/a-appliesto) property, use the [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) function and remove the braces from the returned string.</span></span><br/> <span data-ttu-id="9bebc-136">Per ulteriori informazioni sulla proprietà [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) di una delle classi di oggetti predefinite, ad esempio [**User**](/windows/desktop/ADSchema/c-user) o [**computer**](/windows/desktop/ADSchema/c-computer), vedere la pagina di riferimento della classe nel riferimento allo schema Active Directory nel [riferimento Active Directory Domain Services](active-directory-domain-services-reference.md).</span><span class="sxs-lookup"><span data-stu-id="9bebc-136">For more information about the [**schemaIDGUID**](/windows/desktop/ADSchema/a-schemaidguid) property of one of the predefined object classes, such as [**user**](/windows/desktop/ADSchema/c-user) or [**computer**](/windows/desktop/ADSchema/c-computer), see the class reference page in the Active Directory Schema Reference in the [Active Directory Domain Services Reference](active-directory-domain-services-reference.md).</span></span> <span data-ttu-id="9bebc-137">Per ulteriori informazioni e un esempio di codice che recupera un **schemaIDGUID** da un oggetto classSchema, vedere [lettura di oggetti attributeSchema e classSchema](reading-attributeschema-and-classschema-objects.md).</span><span class="sxs-lookup"><span data-stu-id="9bebc-137">For more information and a code example that retrieves a **schemaIDGUID** from a classSchema object, see [Reading attributeSchema and classSchema Objects](reading-attributeschema-and-classschema-objects.md).</span></span><br/> |
| [<span data-ttu-id="9bebc-138">**displayName**</span><span class="sxs-lookup"><span data-stu-id="9bebc-138">**displayName**</span></span>](/windows/desktop/ADSchema/a-displayname)     | <span data-ttu-id="9bebc-139">Stringa utilizzata per visualizzare il controllo di accesso direttamente nelle interfacce utente, ad esempio la pagina delle proprietà **sicurezza** e altre posizioni nello snap-in MMC utenti e computer Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9bebc-139">The string used to display the access control right in user interfaces such as the **Security** property page and other places in the Active Directory Users and Computers MMC snap-in.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [<span data-ttu-id="9bebc-140">**rightsGuid**</span><span class="sxs-lookup"><span data-stu-id="9bebc-140">**rightsGuid**</span></span>](/windows/desktop/ADSchema/a-rightsguid)       | <span data-ttu-id="9bebc-141">GUID che identifica il diritto di accesso al controllo in una voce ACE.</span><span class="sxs-lookup"><span data-stu-id="9bebc-141">A GUID that identifies the control access right in an ACE.</span></span> <span data-ttu-id="9bebc-142">Il GUID viene archiviato come stringa nel formato prodotto dalla funzione [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) , ma senza le parentesi graffe di inizio e di fine.</span><span class="sxs-lookup"><span data-stu-id="9bebc-142">The GUID is stored as a string of the form produced by the [**StringFromGUID2**](/windows/win32/api/combaseapi/nf-combaseapi-stringfromguid2) function, but without the starting and terminating braces.</span></span> <span data-ttu-id="9bebc-143">Usare Uuidgen.exe per un'altra utilità per generare un GUID per il diritto di accesso del controllo. Se si definisce un nuovo set di proprietà, utilizzare [**rightsGuid**](/windows/desktop/ADSchema/a-rightsguid) dell'oggetto [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) per identificare le proprietà nel set.</span><span class="sxs-lookup"><span data-stu-id="9bebc-143">Use Uuidgen.exe for some other utility to generate a GUID for the control access right.If you define a new property set, you use the [**rightsGuid**](/windows/desktop/ADSchema/a-rightsguid) of the [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) object to identify the properties in the set.</span></span> <span data-ttu-id="9bebc-144">Per ogni proprietà nel set di proprietà, impostare il valore [**attributeSecurityGUID**](/windows/desktop/ADSchema/a-attributesecurityguid) della proprietà sul valore di **rightsGuid** del set di proprietà.</span><span class="sxs-lookup"><span data-stu-id="9bebc-144">For each property in the property set, set the property's [**attributeSecurityGUID**](/windows/desktop/ADSchema/a-attributesecurityguid) value to the value of the property set's **rightsGUID**.</span></span> <span data-ttu-id="9bebc-145">Il valore **attributeSecurityGUID** di una proprietà viene archiviato nella definizione [**attributeSchema**](/windows/desktop/ADSchema/c-attributeschema) della proprietà nello schema Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9bebc-145">A property's **attributeSecurityGUID** value is stored in the property's [**attributeSchema**](/windows/desktop/ADSchema/c-attributeschema) definition in the Active Directory schema.</span></span> <span data-ttu-id="9bebc-146">La proprietà **attributeSecurityGUID** è a valore singolo e archivia il GUID in formato binario (sintassi delle stringhe di ottetti).</span><span class="sxs-lookup"><span data-stu-id="9bebc-146">The **attributeSecurityGUID** property is single-valued and stores the GUID in binary format (octet string syntax).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [<span data-ttu-id="9bebc-147">**objectClass**</span><span class="sxs-lookup"><span data-stu-id="9bebc-147">**objectClass**</span></span>](/windows/desktop/ADSchema/a-objectclass)     | <span data-ttu-id="9bebc-148">Questo attributo specifica [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) come classe di oggetti.</span><span class="sxs-lookup"><span data-stu-id="9bebc-148">This attribute specifies [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) as the object class.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [<span data-ttu-id="9bebc-149">**validAccesses**</span><span class="sxs-lookup"><span data-stu-id="9bebc-149">**validAccesses**</span></span>](/windows/desktop/ADSchema/a-validaccesses) | <span data-ttu-id="9bebc-150">Per i set di proprietà, impostare questo attributo su 0x30 (**Ads \_ Rights \_ DS \_ Read \_ prop** \| **Ads \_ right \_ DS \_ Write \_ prop**).</span><span class="sxs-lookup"><span data-stu-id="9bebc-150">For property sets, set this attribute to 0x30 (**ADS\_RIGHT\_DS\_READ\_PROP** \| **ADS\_RIGHT\_DS\_WRITE\_PROP**).</span></span> <span data-ttu-id="9bebc-151">Per i diritti di accesso di controllo, impostare questo attributo su 0x100 (**Ads \_ right \_ DS \_ Control \_ Access**).</span><span class="sxs-lookup"><span data-stu-id="9bebc-151">For control access rights, set this attribute to 0x100 (**ADS\_RIGHT\_DS\_CONTROL\_ACCESS**).</span></span> <span data-ttu-id="9bebc-152">La pagina delle proprietà sicurezza riconosce i diritti di accesso di controllo solo se l'attributo [**validAccesses**](/windows/desktop/ADSchema/a-validaccesses) è impostato sul valore appropriato.</span><span class="sxs-lookup"><span data-stu-id="9bebc-152">The security property page recognizes control access rights only if the [**validAccesses**](/windows/desktop/ADSchema/a-validaccesses) attribute is set to the appropriate value.</span></span> <span data-ttu-id="9bebc-153">Se è zero, il diritto di accesso al controllo viene ignorato o non viene visualizzato nella pagina delle proprietà sicurezza.</span><span class="sxs-lookup"><span data-stu-id="9bebc-153">If zero, the control access right is ignored or not displayed by the security property page.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

<span data-ttu-id="9bebc-154">Tenere presente che le classi di schema predefinite utilizzano l'attributo **localizationDisplayId** di un oggetto [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) per specificare un identificatore di messaggio utilizzato per recuperare un nome visualizzato localizzato da Dssec.dll.</span><span class="sxs-lookup"><span data-stu-id="9bebc-154">Be aware that the predefined schema classes use the **localizationDisplayId** attribute of a [**controlAccessRight**](/windows/desktop/ADSchema/c-controlaccessright) object to specify a message identifier used to retrieve a localized display name from Dssec.dll.</span></span> <span data-ttu-id="9bebc-155">Non impostare l'attributo **localizationDisplayId** se si definisce un nuovo oggetto **controlAccessRight** .</span><span class="sxs-lookup"><span data-stu-id="9bebc-155">Do not set the **localizationDisplayId** attribute if you define a new **controlAccessRight** object.</span></span>

 

