---
title: Funzioni del servizio directory (AD DS)
description: Le funzioni del servizio directory forniscono un'utilità per l'individuazione di un controller di dominio in un dominio Windows NT o Windows 2000.
ms.assetid: 7b519c81-5a6c-470a-a525-1894efd53305
ms.tgt_platform: multiple
keywords:
- Funzioni del servizio directory
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 75b071128806926e07cf61d62e53b823d8e7e1ac
ms.sourcegitcommit: 8ea1a82717bd3dbb3457be0697329aa37fb13f08
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/11/2019
ms.locfileid: "104046199"
---
# <a name="directory-service-functions-ad-ds"></a><span data-ttu-id="6cf3d-104">Funzioni del servizio directory (AD DS)</span><span class="sxs-lookup"><span data-stu-id="6cf3d-104">Directory Service Functions (AD DS)</span></span>

<span data-ttu-id="6cf3d-105">Le funzioni del servizio directory forniscono un'utilità per l'individuazione di un controller di dominio in un dominio Windows NT o Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-105">The directory service functions provide a utility for locating a domain controller (DC) in a Windows NT or Windows 2000 domain.</span></span> <span data-ttu-id="6cf3d-106">L'architettura interagisce con i client e i server in tutte le versioni di Windows NT e Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-106">The architecture interacts with clients as well as servers in all versions of Windows NT and Windows 2000.</span></span> <span data-ttu-id="6cf3d-107">Le funzioni seguenti consentono agli sviluppatori di utilizzare il controller di dominio e l'appartenenza al dominio nel servizio directory:</span><span class="sxs-lookup"><span data-stu-id="6cf3d-107">The following functions enable developers to work with the domain controller and domain membership in the directory service:</span></span>

-   [<span data-ttu-id="6cf3d-108">**DsAddressToSiteNames**</span><span class="sxs-lookup"><span data-stu-id="6cf3d-108">**DsAddressToSiteNames**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsaddresstositenamesa)
-   [<span data-ttu-id="6cf3d-109">**DsAddressToSiteNamesEx**</span><span class="sxs-lookup"><span data-stu-id="6cf3d-109">**DsAddressToSiteNamesEx**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsaddresstositenamesexa)
-   [<span data-ttu-id="6cf3d-110">**DsDeregisterDnsHostRecords**</span><span class="sxs-lookup"><span data-stu-id="6cf3d-110">**DsDeregisterDnsHostRecords**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsderegisterdnshostrecordsa)
-   [<span data-ttu-id="6cf3d-111">**DsEnumerateDomainTrusts**</span><span class="sxs-lookup"><span data-stu-id="6cf3d-111">**DsEnumerateDomainTrusts**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsenumeratedomaintrustsa)
-   [<span data-ttu-id="6cf3d-112">**DsGetDcClose**</span><span class="sxs-lookup"><span data-stu-id="6cf3d-112">**DsGetDcClose**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetdcclosew)
-   [<span data-ttu-id="6cf3d-113">**DsGetDcName**</span><span class="sxs-lookup"><span data-stu-id="6cf3d-113">**DsGetDcName**</span></span>](/windows/desktop/api/DsGetDC/nf-dsgetdc-dsgetdcnamea)
-   [<span data-ttu-id="6cf3d-114">**DsGetDcNext**</span><span class="sxs-lookup"><span data-stu-id="6cf3d-114">**DsGetDcNext**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetdcnexta)
-   [<span data-ttu-id="6cf3d-115">**DsGetDcOpen**</span><span class="sxs-lookup"><span data-stu-id="6cf3d-115">**DsGetDcOpen**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetdcopena)
-   [<span data-ttu-id="6cf3d-116">**DsGetDcSiteCoverage**</span><span class="sxs-lookup"><span data-stu-id="6cf3d-116">**DsGetDcSiteCoverage**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetdcsitecoveragea)
-   [<span data-ttu-id="6cf3d-117">**DsGetForestTrustInformationW**</span><span class="sxs-lookup"><span data-stu-id="6cf3d-117">**DsGetForestTrustInformationW**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetforesttrustinformationw)
-   [<span data-ttu-id="6cf3d-118">**DsGetSiteName**</span><span class="sxs-lookup"><span data-stu-id="6cf3d-118">**DsGetSiteName**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetsitenamea)
-   [<span data-ttu-id="6cf3d-119">**DsMergeForestTrustInformationW**</span><span class="sxs-lookup"><span data-stu-id="6cf3d-119">**DsMergeForestTrustInformationW**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsmergeforesttrustinformationw)
-   [<span data-ttu-id="6cf3d-120">**DsRoleFreeMemory**</span><span class="sxs-lookup"><span data-stu-id="6cf3d-120">**DsRoleFreeMemory**</span></span>](/windows/desktop/api/Dsrole/nf-dsrole-dsrolefreememory)
-   [<span data-ttu-id="6cf3d-121">**DsRoleGetPrimaryDomainInformation**</span><span class="sxs-lookup"><span data-stu-id="6cf3d-121">**DsRoleGetPrimaryDomainInformation**</span></span>](/windows/desktop/api/Dsrole/nf-dsrole-dsrolegetprimarydomaininformation)
-   [<span data-ttu-id="6cf3d-122">**DsValidateSubnetName**</span><span class="sxs-lookup"><span data-stu-id="6cf3d-122">**DsValidateSubnetName**</span></span>](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsvalidatesubnetnamea)

<span data-ttu-id="6cf3d-123">Il localizzatore del controller di dominio, [**DsGetDcName**](/windows/desktop/api/DsGetDC/nf-dsgetdc-dsgetdcnamea), viene implementato dal servizio Netlogon.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-123">The DC locator, [**DsGetDcName**](/windows/desktop/api/DsGetDC/nf-dsgetdc-dsgetdcnamea), is implemented by the Netlogon service.</span></span> <span data-ttu-id="6cf3d-124">Ogni controller di dominio registra il nome DNS nel server DNS e il relativo nome NetBIOS usando un meccanismo specifico del trasporto, ad esempio in WINS.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-124">Each DC registers its DNS name on the DNS server and its NetBIOS name using a transport-specific mechanism, for example, in WINS.</span></span> <span data-ttu-id="6cf3d-125">Il localizzatore del controller di dominio cerca il nome, quindi Invia un datagramma a, o ping, il controller di dominio che ha registrato il nome.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-125">The DC locator looks up the name, then sends a datagram to, or pings, the DC that registered the name.</span></span> <span data-ttu-id="6cf3d-126">Per i nomi di dominio NetBIOS, il datagramma è un messaggio inserimento/espulsione.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-126">For NetBIOS domain names, the datagram is a mailslot message.</span></span> <span data-ttu-id="6cf3d-127">Per i nomi di dominio DNS, il datagramma è una ricerca UDP LDAP.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-127">For DNS domain names, the datagram is an LDAP UDP search.</span></span> <span data-ttu-id="6cf3d-128">Ogni controller di dominio di questo tipo risponde indicando che è attualmente operativo.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-128">Each such DC responds indicating that it is currently operational.</span></span> <span data-ttu-id="6cf3d-129">Il primo controller di dominio da rispondere viene restituito al chiamante.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-129">The first DC to respond is returned to the caller.</span></span>

<span data-ttu-id="6cf3d-130">Il controller di dominio restituito viene memorizzato nella cache, in modo che i chiamanti successivi non debbano ripetere l'algoritmo precedente e incoraggiare tutti i chiamanti a usare lo stesso controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-130">The returned DC is cached, so that subsequent callers need not repeat the preceding algorithm, and to encourage all callers to use that same DC.</span></span> <span data-ttu-id="6cf3d-131">In questo modo si garantisce che un singolo client disponga di una visualizzazione coerente del contenuto del controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-131">This ensures that a single client has a consistent view of the contents of the DC.</span></span>

<span data-ttu-id="6cf3d-132">Quando si cerca un controller di dominio in base al nome di dominio DNS, DC Locator tenta di trovare un controller di dominio nel sito "più vicino".</span><span class="sxs-lookup"><span data-stu-id="6cf3d-132">When searching for a DC by DNS domain name, the DC locator attempts to find a DC in the "closest" site.</span></span> <span data-ttu-id="6cf3d-133">Ogni controller di dominio registra record DNS aggiuntivi che indicano il sito in cui si trova il controller di dominio e i siti inclusi nel controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-133">Each DC registers additional DNS records indicating what site that the DC is in and what sites the DC includes.</span></span> <span data-ttu-id="6cf3d-134">DC Locator cerca innanzitutto questo record DNS specifico del sito prima di cercare il record DNS che non è specifico del sito, in modo che preferisca un controller di dominio in tale sito.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-134">The DC locator first searches for this site-specific DNS record before searching for the DNS record that is not site-specific, thus preferring a DC in that site.</span></span> <span data-ttu-id="6cf3d-135">Quando il localizzatore del controller di dominio invia un datagramma al controller di dominio, il controller di dominio cerca l'indirizzo IP del client nel contenitore di configurazione/siti/subnet del DS per trovare un oggetto subnet.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-135">When the DC locator sends a datagram to the DC, the DC looks up the IP address of the client in the Configuration/Sites/Subnet container of the DS to find a subnet object.</span></span> <span data-ttu-id="6cf3d-136">La proprietà **siteObject** dell'oggetto subnet definisce il nome del sito che contiene il client.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-136">The **siteObject** property of the subnet object defines the name of the site that contains the client.</span></span> <span data-ttu-id="6cf3d-137">Il controller di dominio risponde al ping con il nome del sito che contiene il client, insieme a un indicatore che indica se il controller di dominio copre tale sito.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-137">The DC responds to the ping with the name of the site that contains the client, along with an indicator of whether this DC covers that site.</span></span> <span data-ttu-id="6cf3d-138">Se il controller di dominio non include il sito e il localizzatore del controller di dominio non ha ancora tentato di trovare un controller di dominio in tale sito, il localizzatore controller di dominio tenterà nuovamente di trovare un controller di dominio nel sito.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-138">If the DC does not include that site and the DC locator has not yet attempted to find a DC in that site, the DC locator tries again to find a DC in the site.</span></span>

<span data-ttu-id="6cf3d-139">Per trovare il nome del sito contenente il client, usare la funzione [**DsGetSiteName**](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetsitenamea) .</span><span class="sxs-lookup"><span data-stu-id="6cf3d-139">To find the name of the site containing the client, use the [**DsGetSiteName**](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsgetsitenamea) function.</span></span> <span data-ttu-id="6cf3d-140">I nomi degli oggetti nel contenitore Configuration/sites/subnet devono essere nomi di subnet validi.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-140">The names of the objects in the Configuration/Sites/Subnet container must be valid subnet names.</span></span> <span data-ttu-id="6cf3d-141">La funzione [**DsValidateSubnetName**](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsvalidatesubnetnamea) indica se il nome di una subnet specificato è valido.</span><span class="sxs-lookup"><span data-stu-id="6cf3d-141">The [**DsValidateSubnetName**](/windows/desktop/api/Dsgetdc/nf-dsgetdc-dsvalidatesubnetnamea) function indicates whether a specified subnet name is valid.</span></span>

 

 




