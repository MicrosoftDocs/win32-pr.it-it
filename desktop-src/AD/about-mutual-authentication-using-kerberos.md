---
title: Informazioni sull'autenticazione reciproca tramite Kerberos
description: Nell'autenticazione reciproca, il client e il servizio devono verificare le rispettive identità tra loro prima di eseguire le funzioni dell'applicazione.
ms.assetid: 5ce923d6-bede-4acb-b297-e93f2f506ea9
ms.tgt_platform: multiple
keywords:
- Informazioni sull'autenticazione reciproca tramite AD Kerberos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9685dad0bd20f233b8dcb0ecf12af338f318646f
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "104044019"
---
# <a name="about-mutual-authentication-using-kerberos"></a><span data-ttu-id="9bf5e-104">Informazioni sull'autenticazione reciproca tramite Kerberos</span><span class="sxs-lookup"><span data-stu-id="9bf5e-104">About Mutual Authentication Using Kerberos</span></span>

<span data-ttu-id="9bf5e-105">Nell'autenticazione reciproca, il client e il servizio devono verificare le rispettive identità tra loro prima di eseguire le funzioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-105">In mutual authentication, the client and service must verify their respective identities to each other before performing application functions.</span></span> <span data-ttu-id="9bf5e-106">Nessuna delle parti può eseguire operazioni con l'altra fino a quando non è stata verificata l'identità. ovvero, il servizio deve essere in grado di verificare il client senza eseguire query sul client e il client deve essere in grado di verificare il servizio senza eseguire query sul servizio.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-106">Neither party can perform operations with the other until identity has been verified; that is, the service must be able to verify the client without querying the client and the client must be able to verify the service without querying the service.</span></span>

<span data-ttu-id="9bf5e-107">Il valore di un servizio in grado di autenticare un client è noto.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-107">The value of a service that can authenticate a client is well-known.</span></span> <span data-ttu-id="9bf5e-108">Ad esempio, un servizio file rappresenta un client per determinare a quali file può accedere il client.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-108">For example, a file service impersonates a client to determine which files the client can access.</span></span>

<span data-ttu-id="9bf5e-109">Il valore di un client in grado di autenticare un servizio è meno noto.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-109">The value of a client that can authenticate a service is less understood.</span></span> <span data-ttu-id="9bf5e-110">L'autenticazione di un servizio consente al client di considerare attendibili i dati ottenuti dal servizio e di essere protetti per l'invio di dati sensibili al servizio.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-110">Authenticating a service enables the client to trust the data that it gets from the service and to be secure in sending sensitive data to the service.</span></span> <span data-ttu-id="9bf5e-111">La capacità di un client di autenticare un servizio è particolarmente importante nelle applicazioni client/di servizio che supportano la delega del contesto di sicurezza del client. ovvero il client autorizza il servizio a fungere da delegato per accedere a servizi aggiuntivi o a risorse di rete.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-111">The ability of a client to authenticate a service is particularly important in client/service applications that support delegation of the client's security context; that is, the client authorizes the service to act as its delegate in accessing additional services or network resources.</span></span>

<span data-ttu-id="9bf5e-112">Un servizio autentica un client come segue: il client stabilisce un contesto di sicurezza locale eseguendo in un contesto precedentemente stabilito, ad esempio, nella sessione di un utente connesso o presentando in modo esplicito le credenziali al provider di sicurezza sottostante.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-112">A service authenticates a client as follows: The client establishes a local security context either by executing in a previously established context, for example, in the session of a logged-in user, or by explicitly presenting credentials to the underlying security provider.</span></span> <span data-ttu-id="9bf5e-113">Il servizio non è in grado di accettare connessioni da un client non autenticato.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-113">The service cannot accept connections from any unauthenticated client.</span></span>

<span data-ttu-id="9bf5e-114">Il meccanismo Kerberos mediante il quale un client autentica un servizio funziona nel modo seguente: quando viene installato un servizio, un programma di installazione del servizio, in esecuzione con privilegi di amministratore, registra uno o più nomi SPN univoci per ogni istanza del servizio.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-114">The Kerberos mechanism by which a client authenticates a service works as follows: When a service is installed, a service installer, running with administrator privileges, registers one or more unique SPNs for each service instance.</span></span> <span data-ttu-id="9bf5e-115">I nomi vengono registrati nel controller di Dominio di Active Directory (DC) nell'oggetto account utente o computer che verrà utilizzato dall'istanza del servizio per l'accesso.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-115">The names are registered in the Active Directory Domain Controller (DC) on the user or computer account object that the service instance will use to log on.</span></span> <span data-ttu-id="9bf5e-116">Quando un client richiede una connessione a un servizio, compone un nome SPN per un'istanza del servizio usando dati noti o dati forniti dall'utente.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-116">When a client requests a connection to a service, it composes an SPN for a service instance, using known data or data provided by the user.</span></span> <span data-ttu-id="9bf5e-117">Il client utilizza quindi il pacchetto di negoziazione SSPI per presentare il nome SPN al Centro distribuzione chiavi (KDC) per l'account di dominio del client.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-117">The client then uses the SSPI negotiate package to present the SPN to the Key Distribution Center (KDC) for the client domain account.</span></span> <span data-ttu-id="9bf5e-118">Il KDC Cerca nell'insieme di strutture un account utente o computer in cui è registrato il nome SPN.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-118">The KDC searches the forest for a user or computer account on which that SPN is registered.</span></span> <span data-ttu-id="9bf5e-119">Se il nome SPN è registrato in più di un account, l'autenticazione ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-119">If the SPN is registered on more than one account, the authentication fails.</span></span> <span data-ttu-id="9bf5e-120">In caso contrario, il KDC crittografa un messaggio utilizzando la password dell'account in cui è stato registrato il nome SPN.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-120">Otherwise, the KDC encrypts a message using the password of the account on which the SPN was registered.</span></span> <span data-ttu-id="9bf5e-121">Il KDC passa questo messaggio crittografato al client, che a sua volta lo passa all'istanza del servizio.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-121">The KDC passes this encrypted message to the client, which in turn passes it to the service instance.</span></span> <span data-ttu-id="9bf5e-122">Il servizio utilizza il pacchetto di negoziazione SSPI per decrittografare il messaggio, che passa di nuovo al client e al KDC del client.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-122">The service uses the SSPI negotiate package to decrypt the message, which it passes back to the client and on to the client's KDC.</span></span> <span data-ttu-id="9bf5e-123">Il KDC autentica il servizio se il messaggio decrittografato corrisponde al messaggio originale.</span><span class="sxs-lookup"><span data-stu-id="9bf5e-123">The KDC authenticates the service if the decrypted message matches its original message.</span></span>

-   <span data-ttu-id="9bf5e-124">Per ulteriori informazioni sulla composizione e la registrazione di SPN, vedere. [Nomi dell'entità servizio](service-principal-names.md)</span><span class="sxs-lookup"><span data-stu-id="9bf5e-124">For more information about composing and registering SPNs, see .[Service Principal Names](service-principal-names.md)</span></span>
-   <span data-ttu-id="9bf5e-125">Per ulteriori informazioni e un esempio di codice che compone un nome SPN per un servizio Windows Sockets che viene pubblicato con un punto di connessione del servizio, vedere [composizione dei nomi SPN per un servizio con SCP](composing-the-spns-for-a-service-with-an-scp.md).</span><span class="sxs-lookup"><span data-stu-id="9bf5e-125">For more information and a code example that composes an SPN for a Windows Sockets service that publishes itself with a service connection point, see [Composing the SPNs for a Service with an SCP](composing-the-spns-for-a-service-with-an-scp.md).</span></span>
-   <span data-ttu-id="9bf5e-126">Per ulteriori informazioni e un esempio di codice che compone un nome SPN per un servizio RPC, vedere [composizione di nomi SPN per un servizio RpcNs](composing-spns-for-an-rpcns-service.md).</span><span class="sxs-lookup"><span data-stu-id="9bf5e-126">For more information and a code example that composes an SPN for an RPC service, see [Composing SPNs for an RpcNs Service](composing-spns-for-an-rpcns-service.md).</span></span>

 

 




