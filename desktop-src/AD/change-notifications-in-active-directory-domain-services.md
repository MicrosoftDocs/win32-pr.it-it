---
title: Modificare le notifiche in Active Directory Domain Services
description: Active Directory Domain Services fornire un meccanismo per la registrazione di un'applicazione client con un controller di dominio per la ricezione delle notifiche di modifica.
ms.assetid: 27f6c7c1-b32e-457a-9be5-47836d097ab1
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ee564727cfbcb2bfdb367f822fdc137bca7c4e37
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/17/2020
ms.locfileid: "104046554"
---
# <a name="change-notifications-in-active-directory-domain-services"></a><span data-ttu-id="00a87-103">Modificare le notifiche in Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="00a87-103">Change Notifications in Active Directory Domain Services</span></span>

<span data-ttu-id="00a87-104">Active Directory Domain Services fornire un meccanismo per la registrazione di un'applicazione client con un controller di dominio per la ricezione delle notifiche di modifica.</span><span class="sxs-lookup"><span data-stu-id="00a87-104">Active Directory Domain Services provide a mechanism for a client application to register with a domain controller to receive change notifications.</span></span> <span data-ttu-id="00a87-105">A tale scopo, il client specifica il controllo di notifica delle modifiche LDAP in un'operazione di ricerca LDAP asincrona.</span><span class="sxs-lookup"><span data-stu-id="00a87-105">To do this, the client specifies the LDAP change notification control in an asynchronous LDAP search operation.</span></span> <span data-ttu-id="00a87-106">Il client specifica anche i parametri di ricerca seguenti.</span><span class="sxs-lookup"><span data-stu-id="00a87-106">The client also specifies the following search parameters.</span></span>



| <span data-ttu-id="00a87-107">Parametro</span><span class="sxs-lookup"><span data-stu-id="00a87-107">Parameter</span></span>             | <span data-ttu-id="00a87-108">Descrizione</span><span class="sxs-lookup"><span data-stu-id="00a87-108">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|-----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="00a87-109">Ambito</span><span class="sxs-lookup"><span data-stu-id="00a87-109">Scope</span></span><br/>      | <span data-ttu-id="00a87-110">Specificare una **\_ \_ base di ambito LDAP** per monitorare solo l'oggetto o **l' \_ ambito LDAP \_ unlivello** per monitorare gli elementi figlio immediati dell'oggetto, escluso l'oggetto stesso.</span><span class="sxs-lookup"><span data-stu-id="00a87-110">Specify either **LDAP\_SCOPE\_BASE** to monitor just the object, or **LDAP\_SCOPE\_ONELEVEL** to monitor the immediate children of the object, not including the object itself.</span></span> <span data-ttu-id="00a87-111">Non specificare un **\_ \_ sottoalbero con ambito LDAP**.</span><span class="sxs-lookup"><span data-stu-id="00a87-111">Do not specify **LDAP\_SCOPE\_SUBTREE**.</span></span> <span data-ttu-id="00a87-112">Sebbene l'ambito del sottoalbero sia supportato se l'oggetto di base è la radice di un contesto dei nomi, il suo utilizzo può influire gravemente sulle prestazioni del server, perché genera un messaggio di risultato della ricerca LDAP ogni volta che viene modificato un oggetto nel contesto dei nomi.</span><span class="sxs-lookup"><span data-stu-id="00a87-112">Although the subtree scope is supported if the base object is the root of a naming context, its use can severely impact server performance, because it generates an LDAP search result message every time an object in the naming context is modified.</span></span> <span data-ttu-id="00a87-113">Non è possibile specificare un **\_ \_ sottoalbero con ambito LDAP** per un sottoalbero arbitrario.</span><span class="sxs-lookup"><span data-stu-id="00a87-113">You cannot specify **LDAP\_SCOPE\_SUBTREE** for an arbitrary subtree.</span></span><br/> |
| <span data-ttu-id="00a87-114">Filtra</span><span class="sxs-lookup"><span data-stu-id="00a87-114">Filter</span></span><br/>     | <span data-ttu-id="00a87-115">Specificare un filtro di ricerca "(objectClass = \* )", che significa che vengono ricevute le notifiche per le modifiche apportate a qualsiasi oggetto nell'ambito specificato.</span><span class="sxs-lookup"><span data-stu-id="00a87-115">Specify a search filter of "(objectclass=\*)", which means you receive notifications for changes to any object in the specified scope.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="00a87-116">Attributi</span><span class="sxs-lookup"><span data-stu-id="00a87-116">Attributes</span></span><br/> | <span data-ttu-id="00a87-117">Consente di specificare un elenco di attributi da restituire quando si verifica una modifica.</span><span class="sxs-lookup"><span data-stu-id="00a87-117">Specify a list of attributes to return when a change occurs.</span></span> <span data-ttu-id="00a87-118">Tenere presente che si ricevono notifiche quando viene modificato un attributo, non solo gli attributi specificati.</span><span class="sxs-lookup"><span data-stu-id="00a87-118">Be aware that you receive notifications when any attribute is modified, not just the specified attributes.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                               |



 

<span data-ttu-id="00a87-119">È possibile registrare fino a cinque richieste di notifica su una singola connessione LDAP.</span><span class="sxs-lookup"><span data-stu-id="00a87-119">You can register up to five notification requests on a single LDAP connection.</span></span> <span data-ttu-id="00a87-120">È necessario disporre di un thread dedicato che attenda le notifiche e li elabori rapidamente.</span><span class="sxs-lookup"><span data-stu-id="00a87-120">You must have a dedicated thread that waits for the notifications and processes them quickly.</span></span> <span data-ttu-id="00a87-121">Quando si chiama la \_ \_ funzione Ext di ricerca LDAP per registrare una richiesta di notifica, la funzione restituisce un identificatore di messaggio che identifica la richiesta.</span><span class="sxs-lookup"><span data-stu-id="00a87-121">When you call the ldap\_search\_ext function to register a notification request, the function returns a message identifier that identifies that request.</span></span> <span data-ttu-id="00a87-122">Si usa quindi la [**funzione \_ risultato LDAP**](/previous-versions/windows/desktop/api/winldap/nf-winldap-ldap_result) per attendere le notifiche di modifica.</span><span class="sxs-lookup"><span data-stu-id="00a87-122">You then use the [**ldap\_result**](/previous-versions/windows/desktop/api/winldap/nf-winldap-ldap_result) function to wait for change notifications.</span></span> <span data-ttu-id="00a87-123">Quando si verifica una modifica, il server invia un messaggio LDAP contenente l'identificatore del messaggio per la richiesta di notifica che ha generato la notifica.</span><span class="sxs-lookup"><span data-stu-id="00a87-123">When a change occurs, the server sends you an LDAP message that contains the message identifier for the notification request that generated the notification.</span></span> <span data-ttu-id="00a87-124">Questa operazione determina la restituzione della funzione di **\_ risultato LDAP** con i risultati della ricerca che identificano l'oggetto modificato.</span><span class="sxs-lookup"><span data-stu-id="00a87-124">This causes the **ldap\_result** function to return with search results that identify the object that changed.</span></span>

<span data-ttu-id="00a87-125">L'applicazione client deve determinare lo stato iniziale dell'oggetto monitorato.</span><span class="sxs-lookup"><span data-stu-id="00a87-125">The client application must determine the initial state of the object monitored.</span></span> <span data-ttu-id="00a87-126">A tale scopo, è necessario prima registrare la richiesta di notifica e quindi leggere lo stato corrente.</span><span class="sxs-lookup"><span data-stu-id="00a87-126">To do this, you must first register the notification request and then read the current state.</span></span>

<span data-ttu-id="00a87-127">Anche l'applicazione client deve determinare la ragione della modifica.</span><span class="sxs-lookup"><span data-stu-id="00a87-127">The client application must also determine the cause of the change.</span></span> <span data-ttu-id="00a87-128">Per una ricerca a livello di base, una notifica si verifica quando viene modificato qualsiasi attributo o quando l'oggetto viene eliminato o spostato.</span><span class="sxs-lookup"><span data-stu-id="00a87-128">For a base level search, a notification occurs when any attribute changes, or when the object is deleted or moved.</span></span> <span data-ttu-id="00a87-129">Per una ricerca a un livello, si verifica una notifica quando un oggetto figlio viene creato, eliminato, spostato o modificato.</span><span class="sxs-lookup"><span data-stu-id="00a87-129">For a one-level search, a notification occurs when a child object is created, deleted, moved, or modified.</span></span> <span data-ttu-id="00a87-130">Tenere presente che la modifica o la ridenominazione di un oggetto nella gerarchia precedente a un oggetto di destinazione non genera una notifica anche se il nome distinto della destinazione è stato modificato di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="00a87-130">Be aware that moving or renaming an object in the hierarchy above a target object does not generate a notification even though the distinguished name of the target changed as a result.</span></span> <span data-ttu-id="00a87-131">Se, ad esempio, si esegue il monitoraggio delle modifiche apportate agli oggetti figlio in un contenitore, le notifiche non vengono ricevute se il contenitore stesso è stato spostato o rinominato.</span><span class="sxs-lookup"><span data-stu-id="00a87-131">For example, if monitoring changes to the child objects in a container, you will not receive notifications if the container itself is moved or renamed.</span></span>

<span data-ttu-id="00a87-132">Quando il client elabora i risultati della ricerca, può utilizzare la \_ funzione LDAP Get \_ DN per ottenere il nome distinto dell'oggetto modificato.</span><span class="sxs-lookup"><span data-stu-id="00a87-132">When the client processes the search results, it can use the ldap\_get\_dn function to get the distinguished name of the object that changed.</span></span> <span data-ttu-id="00a87-133">Non basarsi sui nomi distinti per identificare gli oggetti monitorati, perché i nomi distinti possono cambiare.</span><span class="sxs-lookup"><span data-stu-id="00a87-133">Do not rely on distinguished names to identify the objects tracked, because distinguished names can change.</span></span> <span data-ttu-id="00a87-134">In alternativa, includere l'attributo **objectGUID** nell'elenco di attributi da recuperare.</span><span class="sxs-lookup"><span data-stu-id="00a87-134">Instead, include the **objectGUID** attribute in the list of attributes to retrieve.</span></span> <span data-ttu-id="00a87-135">Il **objectGUID** di ogni oggetto rimane invariato indipendentemente dalla posizione in cui l'oggetto viene spostato all'interno della foresta aziendale.</span><span class="sxs-lookup"><span data-stu-id="00a87-135">Each object's **objectGUID** remains unchanged regardless of where the object is moved within the enterprise forest.</span></span>

<span data-ttu-id="00a87-136">Se un oggetto all'interno dell'ambito di ricerca viene eliminato, il client riceve una notifica di modifica e l'attributo **Indeleted** dell'oggetto viene impostato su **true**.</span><span class="sxs-lookup"><span data-stu-id="00a87-136">If an object within the search scope is deleted, the client receives a change notification and the **isDeleted** attribute of the object is set to **TRUE**.</span></span> <span data-ttu-id="00a87-137">In questo caso, i risultati della ricerca segnalano il nuovo nome distinto dell'oggetto nel contenitore degli oggetti eliminati della relativa partizione.</span><span class="sxs-lookup"><span data-stu-id="00a87-137">In this case, the search results report the new distinguished name of the object in the Deleted Objects container of its partition.</span></span> <span data-ttu-id="00a87-138">Non è necessario specificare il controllo contrassegnato per la rimozione definitiva (server LDAP, ovvero l'[ \_ \_ \_ \_ OID eliminato](/previous-versions/windows/desktop/ldap/ldap-server-show-deleted-oid)) per ricevere le notifiche delle eliminazioni di oggetti.</span><span class="sxs-lookup"><span data-stu-id="00a87-138">It is not necessary to specify the tombstone control ([LDAP\_SERVER\_SHOW\_DELETED\_OID](/previous-versions/windows/desktop/ldap/ldap-server-show-deleted-oid)) to get notifications of object deletions.</span></span> <span data-ttu-id="00a87-139">Per ulteriori informazioni, vedere [recupero di oggetti eliminati](retrieving-deleted-objects.md).</span><span class="sxs-lookup"><span data-stu-id="00a87-139">For more information, see [Retrieving Deleted Objects](retrieving-deleted-objects.md).</span></span>

<span data-ttu-id="00a87-140">Quando un client ha registrato una richiesta di notifica, il client continua a ricevere notifiche fino a quando la connessione non viene interrotta o il client abbandona la ricerca chiamando la \_ funzione di abbandono LDAP.</span><span class="sxs-lookup"><span data-stu-id="00a87-140">When a client has registered a notification request, the client continues to receive notifications until the connection is broken or the client abandons the search by calling the ldap\_abandon function.</span></span> <span data-ttu-id="00a87-141">Se il client o il server si disconnette, ad esempio in caso di errore del server, la richiesta di notifica viene terminata.</span><span class="sxs-lookup"><span data-stu-id="00a87-141">If the client or server disconnects, for example, if the server fails, the notification request is terminated.</span></span> <span data-ttu-id="00a87-142">Quando il client si riconnette, deve registrarsi di nuovo per le notifiche e quindi leggere lo stato corrente degli oggetti di interesse nel caso in cui siano state apportate modifiche mentre il client è stato disconnesso.</span><span class="sxs-lookup"><span data-stu-id="00a87-142">When the client reconnects, it must register for notifications again, and then read the current state of the objects of interest in case there were changes while the client was disconnected.</span></span>

<span data-ttu-id="00a87-143">Il client può usare il valore dell'attributo **uSNChanged** di un oggetto per determinare se lo stato corrente dell'oggetto nel server riflette le ultime modifiche ricevute dal client.</span><span class="sxs-lookup"><span data-stu-id="00a87-143">The client can use the value of an object's **uSNChanged** attribute to determine whether the current state of the object on the server reflects the latest changes that the client has received.</span></span> <span data-ttu-id="00a87-144">Il sistema aumenta l'attributo **uSNChanged** di un oggetto quando l'oggetto viene spostato o modificato.</span><span class="sxs-lookup"><span data-stu-id="00a87-144">The system increases an object's **uSNChanged** attribute when the object is moved or modified.</span></span> <span data-ttu-id="00a87-145">Se, ad esempio, il server ha esito negativo e la partizione di directory viene ripristinata da un backup, la replica del server di un oggetto potrebbe non riflettere le modifiche precedentemente segnalate al client, nel qual caso il valore **uSNChanged** sul server sarà inferiore al valore archiviato dal client.</span><span class="sxs-lookup"><span data-stu-id="00a87-145">For example, if the server fails and the directory partition is restored from a backup, the server's replica of an object may not reflect changes previously reported to the client, in which case the **uSNChanged** value on the server will be lower than the value stored by the client.</span></span>

<span data-ttu-id="00a87-146">Per ulteriori informazioni e un esempio di codice in cui viene utilizzato il controllo di notifica delle modifiche LDAP in un'operazione di ricerca LDAP asincrona, vedere il [codice di esempio per la ricezione delle notifiche delle modifiche](example-code-for-receiving-change-notifications.md).</span><span class="sxs-lookup"><span data-stu-id="00a87-146">For more information and a code example that uses the LDAP change notification control in an asynchronous LDAP search operation, see [Example Code for Receiving Change Notifications](example-code-for-receiving-change-notifications.md).</span></span>

<span data-ttu-id="00a87-147">Per ulteriori informazioni sull'utilizzo del controllo delle notifiche delle modifiche LDAP, vedere [Cenni preliminari sulle tecniche di rilevamento modifiche](overview-of-change-tracking-techniques.md).</span><span class="sxs-lookup"><span data-stu-id="00a87-147">For more information about when to use the LDAP change notification control, see [Overview of Change Tracking Techniques](overview-of-change-tracking-techniques.md).</span></span>

 

