---
title: Impostazione delle autorizzazioni per le directory virtuali
description: Per motivi di sicurezza, Servizio trasferimento intelligente in background (BITS) non carica i file in una directory virtuale in cui sono abilitati gli script e le autorizzazioni di esecuzione.
ms.assetid: cf5c8b50-066f-431e-8bdf-ed0692219b20
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e6753c326e926724a57e1905c3fb9fe24e28fdc7
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104046962"
---
# <a name="setting-permissions-on-virtual-directories"></a><span data-ttu-id="7caff-103">Impostazione delle autorizzazioni per le directory virtuali</span><span class="sxs-lookup"><span data-stu-id="7caff-103">Setting Permissions on Virtual Directories</span></span>

<span data-ttu-id="7caff-104">Per motivi di sicurezza, Servizio trasferimento intelligente in background (BITS) non carica i file in una directory virtuale in cui sono abilitati gli script e le autorizzazioni di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="7caff-104">For security reasons, Background Intelligent Transfer Service (BITS) does not upload files to a virtual directory that has scripting and execute permissions enabled.</span></span> <span data-ttu-id="7caff-105">Se si carica un file in una directory virtuale in cui sono abilitate queste autorizzazioni, il processo ha esito negativo con un codice di errore di \_ esecuzione del server BG E \_ \_ \_ abilitata.</span><span class="sxs-lookup"><span data-stu-id="7caff-105">If you upload a file to a virtual directory that has these permissions enabled, the job fails with an error code of BG\_E\_SERVER\_EXECUTE\_ENABLED.</span></span>

<span data-ttu-id="7caff-106">BITS non richiede che la directory virtuale sia abilitata per la scrittura, pertanto è consigliabile disattivare l'accesso in scrittura alla directory virtuale.</span><span class="sxs-lookup"><span data-stu-id="7caff-106">BITS does not require the virtual directory to be write enabled, so it is recommended that you turn off write access to the virtual directory.</span></span>

<span data-ttu-id="7caff-107">L'utente autenticato (o l'utente anonimo di IIS per l'autenticazione anonima) deve disporre delle autorizzazioni di modifica per la directory fisica a cui viene mappata la directory virtuale. la concessione di autorizzazioni di scrittura non è sufficiente.</span><span class="sxs-lookup"><span data-stu-id="7caff-107">The authenticated user (or IIS's Anonymous user for anonymous authentication) must have Change permissions on the physical directory to which the virtual directory is mapped; granting Write permissions does not suffice.</span></span>

## <a name="specifying-permissions-for-notifications"></a><span data-ttu-id="7caff-108">Impostazione delle autorizzazioni per le notifiche</span><span class="sxs-lookup"><span data-stu-id="7caff-108">Specifying Permissions for Notifications</span></span>

<span data-ttu-id="7caff-109">Lo schema di autenticazione specificato per la directory virtuale e l'URL di notifica (vedere la proprietà [BITSServerNotificationURL](bits-iis-extension-properties.md) ) deve essere compatibile.</span><span class="sxs-lookup"><span data-stu-id="7caff-109">The authentication scheme you specify for the virtual directory and notification URL (see the [BITSServerNotificationURL](bits-iis-extension-properties.md) property) must be compatible.</span></span> <span data-ttu-id="7caff-110">BITS usa lo schema di autenticazione specificato per la directory virtuale per accedere all'URL di notifica.</span><span class="sxs-lookup"><span data-stu-id="7caff-110">BITS uses the authentication scheme specified for the virtual directory to access the notification URL.</span></span> <span data-ttu-id="7caff-111">Il processo di caricamento non riesce se BITS non è in grado di accedere all'URL di notifica a causa di un errore di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="7caff-111">The upload job fails if BITS is unable to access the notification URL due to authentication failure.</span></span>

<span data-ttu-id="7caff-112">Se il tipo di notifica (vedere la proprietà [BITSServerNotificationType](bits-iis-extension-properties.md) ) è [per riferimento](using-bits-notification-request-response-headers.md), l'applicazione deve assicurarsi che l'utente abbia accesso al file a cui si fa riferimento (vedere l'intestazione [bits-request-DataFile-Name](notification-protocol-for-server-applications.md) ).</span><span class="sxs-lookup"><span data-stu-id="7caff-112">If the notification type (see the [BITSServerNotificationType](bits-iis-extension-properties.md) property) is [by reference](using-bits-notification-request-response-headers.md), the application must ensure the user has access to the referenced file (see the [BITS-Request-DataFile-Name](notification-protocol-for-server-applications.md) header).</span></span> <span data-ttu-id="7caff-113">BITS imposta gli ACL nel file a cui si fa riferimento su quelli della directory fisica a cui viene mappata la directory virtuale.</span><span class="sxs-lookup"><span data-stu-id="7caff-113">BITS sets the ACLs on the referenced file to those of the physical directory to which the virtual directory is mapped.</span></span>

> [!Note]  
> <span data-ttu-id="7caff-114">L'applicazione notificata deve essere in grado di eseguire il mapping e accedere al file remoto anche se l'URL di notifica viene servito da un server Web che si trova in un computer diverso da quello della directory di caricamento fisica.</span><span class="sxs-lookup"><span data-stu-id="7caff-114">The notified application must be able to map and access the remote file even if the notification URL is serviced by a web server that is on a different computer than the physical upload directory.</span></span> <span data-ttu-id="7caff-115">L'intestazione [bits-request-DataFile-Name](notification-protocol-for-server-applications.md) contiene sempre una specifica del percorso relativa al computer che ospita il componente estensioni BITS.</span><span class="sxs-lookup"><span data-stu-id="7caff-115">The [BITS-Request-DataFile-Name](notification-protocol-for-server-applications.md) header always contains a path specification that is relative to the computer hosting the BITS Extensions component.</span></span> <span data-ttu-id="7caff-116">Un'applicazione in esecuzione in un altro computer potrebbe dover convertire il percorso in un percorso UNC prima di accedervi.</span><span class="sxs-lookup"><span data-stu-id="7caff-116">An application running on another computer might need to convert the path to an UNC path before accessing it.</span></span>

 

<span data-ttu-id="7caff-117">BITS supporta molte combinazioni di schemi di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="7caff-117">BITS supports many combinations of authentication schemes.</span></span> <span data-ttu-id="7caff-118">Tuttavia, è necessario utilizzare lo schema di autenticazione seguente per la directory virtuale e l'URL di notifica corrispondente.</span><span class="sxs-lookup"><span data-stu-id="7caff-118">However, you should use the following authentication scheme for the virtual directory and the matching notification URL.</span></span>

-   <span data-ttu-id="7caff-119">Per supportare le notifiche di riferimento, la directory virtuale deve essere configurata per l'utilizzo dell'autenticazione NTLM (Negotiate) se la directory di caricamento fisico (la directory a cui punta la directory virtuale) utilizza uno schema di autenticazione diverso da anonimo.</span><span class="sxs-lookup"><span data-stu-id="7caff-119">To support by reference notifications, the virtual directory should be configured to use NTLM (negotiate) authentication if the physical upload directory (the directory to which the virtual directory points) uses an authentication scheme other than anonymous.</span></span> <span data-ttu-id="7caff-120">Se la directory di caricamento fisico consente richieste anonime (nessuna autenticazione), la directory virtuale deve abilitare l'anonima (nessuna autenticazione).</span><span class="sxs-lookup"><span data-stu-id="7caff-120">If the physical upload directory allows anonymous requests (no authentication), the virtual directory should enable anonymous (no authentication).</span></span>

    <span data-ttu-id="7caff-121">Gli ACL nella directory di caricamento fisica devono essere impostati in modo tale che l'utente autenticato possa leggere i file nella directory a cui punta l'URL di notifica.</span><span class="sxs-lookup"><span data-stu-id="7caff-121">The ACLs on the physical upload directory must be set such that the authenticated user can read files on the directory to which the notification URL points.</span></span> <span data-ttu-id="7caff-122">BITS usa gli ACL della directory di caricamento fisico per impostare gli ACL del file di caricamento temporaneo (l'intestazione [bits-request-DataFile-Name](notification-protocol-for-server-applications.md) contiene il percorso del file temporaneo).</span><span class="sxs-lookup"><span data-stu-id="7caff-122">BITS uses the ACLs of the physical upload directory to set the ACLs of temporary upload file (the [BITS-Request-DataFile-Name](notification-protocol-for-server-applications.md) header contains the path to the temporary file).</span></span>

-   <span data-ttu-id="7caff-123">Poiché per le notifiche [di valore](using-bits-notification-request-response-headers.md) non è necessario che l'applicazione notificata acceda a un file temporaneo che contiene il contenuto di caricamento, lo schema di autenticazione può essere anonimo o negoziabile (NTLM).</span><span class="sxs-lookup"><span data-stu-id="7caff-123">Because [by value](using-bits-notification-request-response-headers.md) notifications do not require the notified application to access a temporary file that contains the upload contents, the authentication scheme can be either anonymous or negotiate (NTLM).</span></span> <span data-ttu-id="7caff-124">L'unico requisito è che l'utente autenticato per la directory virtuale debba essere anche autorizzato ad accedere all'URL di notifica.</span><span class="sxs-lookup"><span data-stu-id="7caff-124">The only requirement is that the authenticated user for the virtual directory must also be authorized to access the notification URL.</span></span>

## <a name="specifying-permissions-for-remote-shares"></a><span data-ttu-id="7caff-125">Impostazione delle autorizzazioni per le condivisioni remote</span><span class="sxs-lookup"><span data-stu-id="7caff-125">Specifying Permissions for Remote Shares</span></span>

<span data-ttu-id="7caff-126">Una directory virtuale può puntare a un'unità mappata in un computer diverso o in una condivisione di rete.</span><span class="sxs-lookup"><span data-stu-id="7caff-126">A virtual directory can point to a mapped drive on a different machine or a network share.</span></span> <span data-ttu-id="7caff-127">Se punta a un'unità di rete mappata, le credenziali usate per eseguire il mapping dell'unità dovrebbero avere il controllo completo sulla condivisione remota.</span><span class="sxs-lookup"><span data-stu-id="7caff-127">If it points to a mapped network drive, the credentials used to map the drive should have full control on the remote share.</span></span>

<span data-ttu-id="7caff-128">Se la directory virtuale punta a una condivisione di rete, BITS usa le credenziali utente **Connetti come** della directory virtuale per accedere alla condivisione remota.</span><span class="sxs-lookup"><span data-stu-id="7caff-128">If the virtual directory points to a network share, BITS uses the virtual directory's **Connect As** user credentials to access the remote share.</span></span> <span data-ttu-id="7caff-129">Per accedere a una condivisione remota, è necessario che l'account **Connect As** disponga dei privilegi descritti nella documentazione relativa alla funzione [**LogonUser**](/windows/desktop/api/winbase/nf-winbase-logonusera) .</span><span class="sxs-lookup"><span data-stu-id="7caff-129">To access a remote share, the **Connect As** account needs to have privileges as described in the documentation for the [**LogonUser**](/windows/desktop/api/winbase/nf-winbase-logonusera) function.</span></span> <span data-ttu-id="7caff-130">BITS accede usando i \_ tipi di \_ \_ accesso interattivo batch o LOGON32 \_ di accesso LOGON32.</span><span class="sxs-lookup"><span data-stu-id="7caff-130">BITS logs on using LOGON32\_LOGON\_BATCH or LOGON32\_LOGON\_INTERACTIVE logon types.</span></span> <span data-ttu-id="7caff-131">Per l'account utente **Connect As** è necessario Full-Access le autorizzazioni per la condivisione remota; la concessione di autorizzazioni di scrittura non è sufficiente.</span><span class="sxs-lookup"><span data-stu-id="7caff-131">The **Connect As** user account needs Full-Access permissions to the remote share; granting Write permissions does not suffice.</span></span>

<span data-ttu-id="7caff-132">Quando la directory di caricamento fisico è mappata a una condivisione di rete, l'identità del chiamante che richiede l'URL di notifica è l'utente di **connessione come** o l'utente autenticato della directory di caricamento fisico (disponibile solo in IIS 6,0 e versioni successive, quando la casella **di controllo Usa sempre le credenziali dell'utente autenticato per la convalida dell'accesso alla risorsa di rete** è selezionata nella finestra **di dialogo Connetti**</span><span class="sxs-lookup"><span data-stu-id="7caff-132">When the physical upload directory is mapped to a network share, the identity of the caller requesting the notification URL is either the **Connect As** user, or the authenticated user of the physical upload directory (only available in IIS 6.0 and later, when the check box **Always use the authenticated user's credentials when validating access to the network resource** is selected on the **Connect As** dialog box).</span></span>

 

 