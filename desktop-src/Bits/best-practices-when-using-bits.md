---
title: Procedure consigliate per l'uso di BITS
description: Questa sezione contiene informazioni da tenere in considerazione quando si progetta un'applicazione che usa BITS.
ms.assetid: f4a09a80-2a85-4b59-b0fd-c23c128973f7
ms.topic: article
ms.date: 7/12/2019
ms.openlocfilehash: bbf69e75b99994eea3e8986d1be9920ff1a12bc5
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "103955239"
---
# <a name="best-practices-when-using-bits"></a><span data-ttu-id="e9407-103">Procedure consigliate per l'uso di BITS</span><span class="sxs-lookup"><span data-stu-id="e9407-103">Best Practices When Using BITS</span></span>

<span data-ttu-id="e9407-104">Questa sezione contiene informazioni da tenere in considerazione quando si progetta un'applicazione che usa BITS.</span><span class="sxs-lookup"><span data-stu-id="e9407-104">This section contains information you should consider when designing an application that uses BITS.</span></span>

## <a name="user-context-or-service-context"></a><span data-ttu-id="e9407-105">Contesto utente o contesto del servizio</span><span class="sxs-lookup"><span data-stu-id="e9407-105">User context or service context</span></span>

<span data-ttu-id="e9407-106">BITS trasferisce i file solo quando il proprietario del processo è connesso al computer (l'utente deve avere eseguito l'accesso in modo interattivo).</span><span class="sxs-lookup"><span data-stu-id="e9407-106">BITS transfers files only when the job's owner is logged on to the computer (the user must have logged on interactively).</span></span> <span data-ttu-id="e9407-107">BITS non supporta il comando **RunAs** .</span><span class="sxs-lookup"><span data-stu-id="e9407-107">BITS does not support the **RunAs** command.</span></span> <span data-ttu-id="e9407-108">Per ulteriori informazioni, vedere [utenti e connessioni di rete](users-and-network-connections.md).</span><span class="sxs-lookup"><span data-stu-id="e9407-108">For more details, see [Users and Network Connections](users-and-network-connections.md).</span></span>

<span data-ttu-id="e9407-109">Se non è necessario il contesto di un utente per l'applicazione, è consigliabile scrivere un servizio eseguito come LocalSystem, LocalService o NetworkService.</span><span class="sxs-lookup"><span data-stu-id="e9407-109">If you do not require a user's context for your application, consider writing a service running as LocalSystem, LocalService, or NetworkService instead.</span></span> <span data-ttu-id="e9407-110">Questi account di sistema sono sempre connessi, quindi il trasferimento non è soggetto a una disconnessione utente.</span><span class="sxs-lookup"><span data-stu-id="e9407-110">These system accounts are always logged on, so the transfer is not subject to a user logging off.</span></span> <span data-ttu-id="e9407-111">Tuttavia, se si rappresenta un utente durante la creazione del processo, vengono applicate le regole di accesso interattivo.</span><span class="sxs-lookup"><span data-stu-id="e9407-111">However, if you impersonate a user when you create the job, the interactive logon rules apply.</span></span> <span data-ttu-id="e9407-112">Per ulteriori informazioni, vedere [account del servizio e BITS](service-accounts-and-bits.md).</span><span class="sxs-lookup"><span data-stu-id="e9407-112">For more details, see [Service Accounts and BITS](service-accounts-and-bits.md).</span></span>

## <a name="jobs-are-persistent"></a><span data-ttu-id="e9407-113">I processi sono persistenti</span><span class="sxs-lookup"><span data-stu-id="e9407-113">Jobs are persistent</span></span>

<span data-ttu-id="e9407-114">I processi rimangono nella coda fino a quando non viene chiamato il metodo [**Metodo ibackgroundcopyjob:: complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) o [**Metodo ibackgroundcopyjob:: Cancel**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel) .</span><span class="sxs-lookup"><span data-stu-id="e9407-114">Jobs remain in the queue until you call the [**IBackgroundCopyJob::Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) or [**IBackgroundCopyJob::Cancel**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel) method.</span></span> <span data-ttu-id="e9407-115">I file del processo non sono disponibili per l'utente fino a quando non viene chiamato il **completamento**.</span><span class="sxs-lookup"><span data-stu-id="e9407-115">The files in the job are not available to the user until you call **Complete**.</span></span> <span data-ttu-id="e9407-116">In genere, si chiama **completa** quando lo stato del processo è **il \_ processo \_ BG stato \_ trasferito** e si chiama **Annulla** quando il processo si trova nello stato di errore **\_ \_ \_ temporaneo dello stato del processo \_ BG** o in stato del **\_ processo \_ \_ BG** e non può più avanzare.</span><span class="sxs-lookup"><span data-stu-id="e9407-116">Typically, you call **Complete** when the state of the job is **BG\_JOB\_STATE\_TRANSFERRED**, and you call **Cancel** when the job is in the **BG\_JOB\_STATE\_TRANSIENT\_ERROR** or **BG\_JOB\_STATE\_ERROR** state and can no longer make progress.</span></span>

<span data-ttu-id="e9407-117">Se non si chiama il metodo [**complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) o il metodo [**Cancel**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel) entro 90 giorni ( [JobInactivityTimeout](group-policies.md) predefinito criteri di gruppo), il servizio annulla il processo.</span><span class="sxs-lookup"><span data-stu-id="e9407-117">If you do not call the [**Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) method or the [**Cancel**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel) method within 90 days (default [JobInactivityTimeout](group-policies.md) Group Policy), the service cancels the job.</span></span> <span data-ttu-id="e9407-118">È sempre necessario chiamare il metodo **complete** o **Cancel** e non basarsi sul criterio JobInactivityTimeout per la pulizia dei processi.</span><span class="sxs-lookup"><span data-stu-id="e9407-118">You should always call the **Complete** or the **Cancel** method and not rely on the JobInactivityTimeout policy to cleanup your jobs.</span></span> <span data-ttu-id="e9407-119">I processi rimasti nella coda possono impedire agli utenti di creare altri processi se viene raggiunto il limite dei criteri MaxJobsPerUser o MaxJobsPerMachine.</span><span class="sxs-lookup"><span data-stu-id="e9407-119">Jobs left in the queue may prevent users from creating other jobs if the MaxJobsPerUser or MaxJobsPerMachine policy limit is reached.</span></span>

## <a name="when-to-use-foreground-or-background-priority"></a><span data-ttu-id="e9407-120">Quando usare la priorità in primo piano o in background</span><span class="sxs-lookup"><span data-stu-id="e9407-120">When to use foreground or background priority</span></span>

<span data-ttu-id="e9407-121">A meno che il processo non sia critico all'ora o l'utente sia attivamente in attesa, è consigliabile utilizzare sempre una priorità in background.</span><span class="sxs-lookup"><span data-stu-id="e9407-121">Unless the job is time critical or the user is actively waiting, you should always use a background priority.</span></span> <span data-ttu-id="e9407-122">Tuttavia, in alcuni casi può essere necessario passare dalla priorità in background alla priorità in primo piano, ad esempio quando il proxy o il server non supporta l'intestazione Content-Range oppure il software antivirus nel client rimuove la richiesta di intestazione di intervallo.</span><span class="sxs-lookup"><span data-stu-id="e9407-122">However, there are times when you may want to switch from background priority to foreground priority, for example, when the proxy or server does not support the Content-Range header, or antivirus software on the client removes the range header request.</span></span> <span data-ttu-id="e9407-123">Il passare alla priorità in primo piano funziona solo per i file le cui dimensioni del file sono inferiori a 2 GB.</span><span class="sxs-lookup"><span data-stu-id="e9407-123">Switching to foreground priority works only for those files whose file size is less than 2 GB.</span></span> <span data-ttu-id="e9407-124">Per un esempio, vedere l'implementazione per il metodo [**IBackgroundCopyCallback:: JobError**](/windows/desktop/api/Bits/nn-bits-ibackgroundcopycallback) .</span><span class="sxs-lookup"><span data-stu-id="e9407-124">For an example, see the implementation for the [**IBackgroundCopyCallback::JobError**](/windows/desktop/api/Bits/nn-bits-ibackgroundcopycallback) method.</span></span> <span data-ttu-id="e9407-125">Si noti inoltre che se il processo in primo piano viene interrotto a causa di una disconnessione della rete o quando l'utente si disconnette, il processo avrà esito negativo perché BITS invierà una richiesta di intervallo per tentare di riavviare il trasferimento dal punto in cui è stata interrotta.</span><span class="sxs-lookup"><span data-stu-id="e9407-125">Also note that if the foreground job is then interrupted due to a network disconnect or the user logging off, the job will fail because BITS will send a range request to try to restart the transfer from where it left off.</span></span>

<span data-ttu-id="e9407-126">A partire da Windows 8, è consigliabile configurare i processi di download con il **\_ \_ \_ \_ contenuto dinamico della proprietà processo BITS** e il **\_ \_ \_ primo piano priorità processo BG** quando si fa riferimento a server che non soddisfano i [requisiti http per i download BITS](http-requirements-for-bits-downloads.md).</span><span class="sxs-lookup"><span data-stu-id="e9407-126">Starting with Windows 8, you should configure download jobs with **BITS\_JOB\_PROPERTY\_DYNAMIC\_CONTENT** and **BG\_JOB\_PRIORITY\_FOREGROUND** when targeting servers that do not meet the [HTTP Requirements for BITS Downloads](http-requirements-for-bits-downloads.md).</span></span> <span data-ttu-id="e9407-127">Tenere presente che questa operazione comporterà la necessità di riavviare il download dall'inizio se viene interrotto, ad esempio a causa di problemi di connettività o di riavvio del sistema.</span><span class="sxs-lookup"><span data-stu-id="e9407-127">Bear in mind that this will result in BITS having to restart the download from the beginning if it ever gets interrupted (for example, due to connectivity issues or system reboot).</span></span>

<span data-ttu-id="e9407-128">Per informazioni sulle priorità disponibili e sul modo in cui BITS usa il livello di priorità per pianificare i processi, vedere [**\_ \_ priorità del processo BG**](/windows/desktop/api/Bits/ne-bits-bg_job_priority).</span><span class="sxs-lookup"><span data-stu-id="e9407-128">For information on the available priorities and how BITS uses the priority level to schedule jobs, see [**BG\_JOB\_PRIORITY**](/windows/desktop/api/Bits/ne-bits-bg_job_priority).</span></span>

## <a name="transient-and-fatal-errors"></a><span data-ttu-id="e9407-129">Errori temporanei ed irreversibili</span><span class="sxs-lookup"><span data-stu-id="e9407-129">Transient and fatal errors</span></span>

<span data-ttu-id="e9407-130">Alcuni errori sono reversibili e altri no.</span><span class="sxs-lookup"><span data-stu-id="e9407-130">Some errors are recoverable and some are not.</span></span> <span data-ttu-id="e9407-131">Ad esempio, l'errore "server non disponibile" è un errore reversibile e l'errore "accesso negato" è un errore irreversibile.</span><span class="sxs-lookup"><span data-stu-id="e9407-131">For example, the error "Server is Unavailable" is a recoverable error, and the error "Access Denied" is a fatal error.</span></span> <span data-ttu-id="e9407-132">BITS inserisce errori reversibili in uno stato di errore temporaneo e ritenta il processo dopo un intervallo specificato.</span><span class="sxs-lookup"><span data-stu-id="e9407-132">BITS puts recoverable errors in a transient error state and tries the job again after a specified interval.</span></span> <span data-ttu-id="e9407-133">Se il processo non è in grado di eseguire lo stato di avanzamento, BITS sposta il processo in uno stato di errore irreversibile.</span><span class="sxs-lookup"><span data-stu-id="e9407-133">If the job is unable to make progress, BITS moves the job to a fatal error state.</span></span> <span data-ttu-id="e9407-134">Usare i metodi [**Metodo ibackgroundcopyjob:: SetMinimumRetryDelay**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setminimumretrydelay) e [**Metodo ibackgroundcopyjob:: SetNoProgressTimeout**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) per controllare il modo in cui bits elabora gli errori temporanei.</span><span class="sxs-lookup"><span data-stu-id="e9407-134">Use the [**IBackgroundCopyJob::SetMinimumRetryDelay**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setminimumretrydelay) and [**IBackgroundCopyJob::SetNoProgressTimeout**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) methods to control how BITS processes transient errors.</span></span>

<span data-ttu-id="e9407-135">Per i processi in primo piano, è necessario limitare la quantità di tempo in cui un processo rimane nello stato di errore temporaneo e provare a eseguire il ripristino.</span><span class="sxs-lookup"><span data-stu-id="e9407-135">For foreground jobs, you should limit the amount of time you let a job stay in the transient error state and try to recover.</span></span> <span data-ttu-id="e9407-136">Usare il metodo [**SetNoProgressTimeout**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) per limitare la quantità di tempo per cui un processo rimane nello stato di errore temporaneo o per forzare il processo nello stato di errore irreversibile.</span><span class="sxs-lookup"><span data-stu-id="e9407-136">Use the [**SetNoProgressTimeout**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) method to limit the amount of time a job stays in the transient error state or to force the job into the fatal error state.</span></span> <span data-ttu-id="e9407-137">Se si lascia che il processo tenti il ripristino, è consigliabile usare il metodo [**SetMinimumRetryDelay**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setminimumretrydelay) per impostare il ritardo minimo dei tentativi su 60 secondi oppure chiamare il metodo [**Metodo ibackgroundcopyjob:: Resume**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-resume) per attivare nuovamente il processo.</span><span class="sxs-lookup"><span data-stu-id="e9407-137">If you let the job try to recover, you should use the [**SetMinimumRetryDelay**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setminimumretrydelay) method to set the minimum retry delay to 60 seconds or call the [**IBackgroundCopyJob::Resume**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-resume) method to activate the job again.</span></span>

<span data-ttu-id="e9407-138">Per ulteriori informazioni, vedere [**\_ \_ lo stato del processo BG**](/windows/desktop/api/Bits/ne-bits-bg_job_state), [il ciclo di vita di un processo BITS e la](life-cycle-of-a-bits-job.md) [gestione degli errori](handling-errors.md).</span><span class="sxs-lookup"><span data-stu-id="e9407-138">For more information, see [**BG\_JOB\_STATE**](/windows/desktop/api/Bits/ne-bits-bg_job_state), [Life Cycle of a BITS Job](life-cycle-of-a-bits-job.md), and [Handling Errors](handling-errors.md).</span></span>

## <a name="measuring-network-bandwidth-usage"></a><span data-ttu-id="e9407-139">Misurazione dell'utilizzo della larghezza di banda di rete</span><span class="sxs-lookup"><span data-stu-id="e9407-139">Measuring network bandwidth usage</span></span>

<span data-ttu-id="e9407-140">BITS potrebbe usare la scheda di rete del client per stimare la larghezza di banda di rete disponibile.</span><span class="sxs-lookup"><span data-stu-id="e9407-140">BITS might use the client's network adapter to estimate available network bandwidth.</span></span> <span data-ttu-id="e9407-141">Poiché BITS non è in grado di misurare la larghezza di banda oltre il client, BITS potrebbe congestionere il collegamento WAN.</span><span class="sxs-lookup"><span data-stu-id="e9407-141">Because BITS is not able to measure bandwidth beyond the client, BITS may congest the WAN link.</span></span> <span data-ttu-id="e9407-142">Per ridurre la congestione sul collegamento WAN, è possibile utilizzare i criteri di gruppo **MaxInternetBandwidth** per limitare la quantità di larghezza di banda utilizzata dal client.</span><span class="sxs-lookup"><span data-stu-id="e9407-142">To reduce congestion on the WAN link, you can use the **MaxInternetBandwidth** group policy to limit the amount of bandwidth that the client uses.</span></span> <span data-ttu-id="e9407-143">Per altre informazioni, vedere [larghezza di banda di rete](network-bandwidth.md) e [criteri di gruppo](group-policies.md).</span><span class="sxs-lookup"><span data-stu-id="e9407-143">For more information, see [Network Bandwidth](network-bandwidth.md) and [Group Policies](group-policies.md).</span></span>

<span data-ttu-id="e9407-144">Se si sta scrivendo un'applicazione che molti client utilizzeranno per scaricare i file da un determinato server, è necessario prendere in considerazione uno schema che Sfalsa le richieste di download in modo da non sovraccaricare il server con le richieste.</span><span class="sxs-lookup"><span data-stu-id="e9407-144">If you are writing an application that many clients will use to download files from a given server, you should consider a scheme that staggers the download requests so you do not overload the server with requests.</span></span>

## <a name="setting-credentials-for-proxy-and-server-authentication"></a><span data-ttu-id="e9407-145">Impostazione delle credenziali per l'autenticazione del server e del proxy</span><span class="sxs-lookup"><span data-stu-id="e9407-145">Setting credentials for proxy and server authentication</span></span>

<span data-ttu-id="e9407-146">Se si prevede che il proxy o il server richieda le credenziali utente, è necessario fornire le credenziali a BITS.</span><span class="sxs-lookup"><span data-stu-id="e9407-146">If you expect the proxy or server to require user credentials, you must provide the credentials to BITS.</span></span> <span data-ttu-id="e9407-147">Per specificare le credenziali, chiamare il metodo [**IBackgroundCopyJob2:: Secredentials**](/windows/desktop/api/Bits1_5/nf-bits1_5-ibackgroundcopyjob2-setcredentials) .</span><span class="sxs-lookup"><span data-stu-id="e9407-147">To specify the credentials, call the [**IBackgroundCopyJob2::SetCredentials**](/windows/desktop/api/Bits1_5/nf-bits1_5-ibackgroundcopyjob2-setcredentials) method.</span></span> <span data-ttu-id="e9407-148">BITS supporta gli schemi di autenticazione di base, digest, Negotiate, NTLM e Passport.</span><span class="sxs-lookup"><span data-stu-id="e9407-148">BITS supports Basic, Digest, Negotiate, NTLM, and Passport authentication schemes.</span></span>

<span data-ttu-id="e9407-149">Per informazioni dettagliate sull'autenticazione, vedere [autenticazione](authentication.md).</span><span class="sxs-lookup"><span data-stu-id="e9407-149">For details on authentication, see [Authentication](authentication.md).</span></span>

## <a name="specifying-proxy-settings-for-user-accounts-and-service-accounts"></a><span data-ttu-id="e9407-150">Specifica delle impostazioni proxy per gli account utente e gli account del servizio</span><span class="sxs-lookup"><span data-stu-id="e9407-150">Specifying proxy settings for user accounts and service accounts</span></span>

<span data-ttu-id="e9407-151">Per impostazione predefinita, BITS usa le impostazioni proxy di Internet Explorer dell'utente.</span><span class="sxs-lookup"><span data-stu-id="e9407-151">By default, BITS uses the user's Internet Explorer proxy settings.</span></span> <span data-ttu-id="e9407-152">Per eseguire l'override delle impostazioni proxy di Internet Explorer dell'utente, chiamare il metodo [**Metodo ibackgroundcopyjob:: SetProxySettings**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setproxysettings) .</span><span class="sxs-lookup"><span data-stu-id="e9407-152">To override the user's Internet Explorer proxy settings, call the [**IBackgroundCopyJob::SetProxySettings**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setproxysettings) method.</span></span>

<span data-ttu-id="e9407-153">Le impostazioni proxy di Internet Explorer non sono valide per gli account di sistema, pertanto il comportamento predefinito del proxy (**\_ \_ \_ \_ preconfigurazione utilizzo proxy processo BG**) funzionerà correttamente nelle distribuzioni WPAD (Web Proxy Auto-Discovery Protocol), a meno che non vengano eseguiti passaggi di configurazione aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="e9407-153">The Internet Explorer proxy settings do not apply to system accounts, so the default proxy behavior (**BG\_JOB\_PROXY\_USAGE\_PRECONFIG**) will only work correctly in Web Proxy Auto-Discovery Protocol (WPAD) deployments, unless additional configuration steps are taken.</span></span> <span data-ttu-id="e9407-154">Se l'applicazione è un servizio in esecuzione come LocalSystem, LocalService o NetworkService, prendere in considerazione la configurazione di un token helper nei processi BITS oppure impostare in modo esplicito le impostazioni del proxy corrette chiamando [**Metodo ibackgroundcopyjob:: SetProxySettings**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setproxysettings) con **\_ \_ \_ \_ l'override di utilizzo del proxy del processo BG**.</span><span class="sxs-lookup"><span data-stu-id="e9407-154">If your application is a service running as LocalSystem, LocalService, or NetworkService, consider configuring a helper token on your BITS jobs, or explicitly setting the correct proxy settings by calling [**IBackgroundCopyJob::SetProxySettings**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setproxysettings) with **BG\_JOB\_PROXY\_USAGE\_OVERRIDE**.</span></span> <span data-ttu-id="e9407-155">In alternativa, è possibile usare le opzioni **/util/SetIEProxy** di BitsAdmin.exe per impostare le impostazioni proxy di Internet Explorer per l'account di sistema LocalSystem, LocalService o NetworkService.</span><span class="sxs-lookup"><span data-stu-id="e9407-155">As an alternative, you can use the **/Util /SetIEProxy** switches of BitsAdmin.exe to set Internet Explorer proxy settings for the LocalSystem, LocalService, or NetworkService system account.</span></span> <span data-ttu-id="e9407-156">Per informazioni dettagliate, vedere [lo strumento Bitsadmin](bitsadmin-tool.md).</span><span class="sxs-lookup"><span data-stu-id="e9407-156">For details, see [BitsAdmin Tool](bitsadmin-tool.md).</span></span>

<span data-ttu-id="e9407-157">BITS non riconosce le impostazioni proxy impostate utilizzando il file di Proxycfg.exe.</span><span class="sxs-lookup"><span data-stu-id="e9407-157">BITS does not recognize the proxy settings that are set using the Proxycfg.exe file.</span></span>

<span data-ttu-id="e9407-158">A partire da Windows 10 ottobre 2018 aggiornamento (10,0; Build 17763), BITS usa lo stesso ordine del proxy usato da WinHttp con AUTOMATIC_PROXY.</span><span class="sxs-lookup"><span data-stu-id="e9407-158">Starting with the Windows 10 October 2018 Update (10.0; Build 17763), BITS uses the same proxy order that WinHttp uses with AUTOMATIC_PROXY.</span></span> <span data-ttu-id="e9407-159">BITS usa questo ordinamento più compatibile quando si specifica BG_JOB_PROXY_USAGE_PRECONFIG.</span><span class="sxs-lookup"><span data-stu-id="e9407-159">BITS uses this more compatible ordering when BG_JOB_PROXY_USAGE_PRECONFIG is specified.</span></span> <span data-ttu-id="e9407-160">BG_JOB_PROXY_USAGE_PRECONFIG è il valore predefinito per specificare il proxy HTTP.</span><span class="sxs-lookup"><span data-stu-id="e9407-160">BG_JOB_PROXY_USAGE_PRECONFIG is the default value for specifying the HTTP proxy.</span></span>

## <a name="specifying-user-specific-settings-for-authenticating-proxies"></a><span data-ttu-id="e9407-161">Specifica delle impostazioni specifiche dell'utente per l'autenticazione dei proxy</span><span class="sxs-lookup"><span data-stu-id="e9407-161">Specifying user-specific settings for authenticating proxies</span></span>

<span data-ttu-id="e9407-162">Se si utilizzano BITS in un ambiente che richiede l'autenticazione proxy mentre è in esecuzione come account senza credenziali NTLM o Kerberos utilizzabili nel dominio di rete del computer, è necessario eseguire passaggi aggiuntivi per l'autenticazione corretta utilizzando le credenziali di un altro account utente che dispone di credenziali nel dominio.</span><span class="sxs-lookup"><span data-stu-id="e9407-162">If you are using BITS in an environment that requires proxy authentication while running as an account without usable NTLM or Kerberos credentials in the machine's network domain, you must take extra steps to authenticate properly by using the credentials of another user account that does have credentials on the domain.</span></span> <span data-ttu-id="e9407-163">Si tratta di uno scenario tipico quando il codice BITS è in esecuzione come servizio di sistema, ad esempio LocalService, NetworkService o LocalSystem, in quanto questi account non dispongono di credenziali NTLM o Kerberos utilizzabili.</span><span class="sxs-lookup"><span data-stu-id="e9407-163">This is a typical scenario when your BITS code is running as a system service such as LocalService, NetworkService, or LocalSystem, as those accounts do not have usable NTLM or Kerberos credentials.</span></span>

<span data-ttu-id="e9407-164">Per informazioni dettagliate sul funzionamento dell'autenticazione in questo scenario, vedere [Authentication.](authentication.md)</span><span class="sxs-lookup"><span data-stu-id="e9407-164">For details on how authentication works in this scenario, see [Authentication.](authentication.md)</span></span>

## <a name="scalability"></a><span data-ttu-id="e9407-165">Scalabilità</span><span class="sxs-lookup"><span data-stu-id="e9407-165">Scalability</span></span>

<span data-ttu-id="e9407-166">Se nella coda sono presenti più di 100 processi, le prestazioni possono iniziare a diminuire a seconda della composizione del processo.</span><span class="sxs-lookup"><span data-stu-id="e9407-166">If more than 100 jobs are in the queue, performance may start to decrease depending on the composition of the job.</span></span> <span data-ttu-id="e9407-167">BITS usa l'impostazione dei criteri [MaxJobsPerMachine](group-policies.md) per imporre un limite rigido al numero di processi nella coda.</span><span class="sxs-lookup"><span data-stu-id="e9407-167">BITS uses the [MaxJobsPerMachine](group-policies.md) policy setting to impose a hard limit on the number of jobs in the queue.</span></span> <span data-ttu-id="e9407-168">Le applicazioni devono limitare il numero di processi a circa 10, in modo che più applicazioni abbiano la possibilità di superare le linee guida per 100 processi.</span><span class="sxs-lookup"><span data-stu-id="e9407-168">Applications should limit the number of their jobs to about 10, so that multiple applications will have less of a chance of exceeding the 100-job guideline.</span></span> <span data-ttu-id="e9407-169">In genere, un'applicazione con un numero elevato di processi da inviare Invia prima di tutto 10 processi, quindi ne invia uno alla volta al termine di ogni processo.</span><span class="sxs-lookup"><span data-stu-id="e9407-169">Typically, an application with a large number of jobs to submit would first submit 10 jobs and then submit one at a time as each job finishes.</span></span>

<span data-ttu-id="e9407-170">Anche il numero di file nel processo deve essere limitato a un massimo di 10 file.</span><span class="sxs-lookup"><span data-stu-id="e9407-170">The number of files in the job should also be limited to a maximum of 10 files.</span></span> <span data-ttu-id="e9407-171">Se si desidera trasferire un numero elevato di file per un processo, provare a creare un file CAB che contenga tutti i file.</span><span class="sxs-lookup"><span data-stu-id="e9407-171">If you want to transfer a large number of files for a job, consider creating a CAB file that contains all the files instead.</span></span>

## <a name="http-headers-can-be-in-any-case"></a><span data-ttu-id="e9407-172">Le intestazioni HTTP possono essere in qualsiasi caso</span><span class="sxs-lookup"><span data-stu-id="e9407-172">HTTP Headers can be in any case</span></span>

<span data-ttu-id="e9407-173">Gli standard HTTP hanno sempre detto che le intestazioni HTTP devono essere considerate senza distinzione tra maiuscole e minuscole (RFC 7230 sezione 3,2).</span><span class="sxs-lookup"><span data-stu-id="e9407-173">The HTTP standards have always said that HTTP headers must be treated as case-insensitive (RFC 7230 section 3.2).</span></span> <span data-ttu-id="e9407-174">Lo standard HTTP più recente, RFC 7540, va oltre e dice che il traffico HTTP/2 deve confrontare le intestazioni senza distinzione tra maiuscole e minuscole e deve presentare intestazioni in lettere minuscole (RFC 6540, sezione 8.1.2).</span><span class="sxs-lookup"><span data-stu-id="e9407-174">The most recent HTTP standard, RFC 7540, goes further and says that HTTP/2 traffic must compare the headers as case-insensitive and must present headers in lower case (RFC 6540, section 8.1.2).</span></span> <span data-ttu-id="e9407-175">Anche quando il traffico viene inviato con intestazioni non minuscole, i proxy possono scegliere di forzare le intestazioni in lettere minuscole.</span><span class="sxs-lookup"><span data-stu-id="e9407-175">Even when traffic is sent with non lower-case headers, proxies may well choose to force the headers to lower-case.</span></span>

## <a name="avoiding-personally-identifiable-information-pii"></a><span data-ttu-id="e9407-176">Evitare informazioni personali (PII)</span><span class="sxs-lookup"><span data-stu-id="e9407-176">Avoiding personally identifiable information (PII)</span></span>

<span data-ttu-id="e9407-177">I processi BITS, inclusi il nome visualizzato e la descrizione e i nomi dei file, sono visibili a tutti gli utenti con privilegi di amministratore.</span><span class="sxs-lookup"><span data-stu-id="e9407-177">BITS jobs including the job display name and description and file names are visible to all users with admin privileges.</span></span> <span data-ttu-id="e9407-178">Possono anche essere aggiunti ai dati di telemetria di Windows.</span><span class="sxs-lookup"><span data-stu-id="e9407-178">They may also be added to Windows Telemetry.</span></span> <span data-ttu-id="e9407-179">È consigliabile evitare di inserire dati sensibili, ad esempio il nome dell'utente, nei dettagli del processo.</span><span class="sxs-lookup"><span data-stu-id="e9407-179">You should avoid putting sensitive data (like the user's own name) in the job details.</span></span>
