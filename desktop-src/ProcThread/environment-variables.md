---
description: 'Ogni processo dispone di un blocco di ambiente che contiene un set di variabili di ambiente e i relativi valori. Esistono due tipi di variabili di ambiente: le variabili di ambiente utente (impostate per ogni utente) e le variabili di ambiente di sistema (impostate per Everyone).'
ms.assetid: 6732b12f-ced1-4769-b947-79da8fd2237a
title: Variabili di ambiente
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6f50226d12286d01c77025d1cc38e33e2778392a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106311989"
---
# <a name="environment-variables"></a><span data-ttu-id="7ff71-104">Variabili di ambiente</span><span class="sxs-lookup"><span data-stu-id="7ff71-104">Environment Variables</span></span>

<span data-ttu-id="7ff71-105">Ogni processo dispone di un blocco di ambiente che contiene un set di variabili di ambiente e i relativi valori.</span><span class="sxs-lookup"><span data-stu-id="7ff71-105">Every process has an environment block that contains a set of environment variables and their values.</span></span> <span data-ttu-id="7ff71-106">Esistono due tipi di variabili di ambiente: le variabili di ambiente utente (impostate per ogni utente) e le variabili di ambiente di sistema (impostate per Everyone).</span><span class="sxs-lookup"><span data-stu-id="7ff71-106">There are two types of environment variables: user environment variables (set for each user) and system environment variables (set for everyone).</span></span>

<span data-ttu-id="7ff71-107">Per impostazione predefinita, un processo figlio eredita le variabili di ambiente del processo padre.</span><span class="sxs-lookup"><span data-stu-id="7ff71-107">By default, a child process inherits the environment variables of its parent process.</span></span> <span data-ttu-id="7ff71-108">I programmi avviati dal processore dei comandi ereditano le variabili di ambiente del processore dei comandi.</span><span class="sxs-lookup"><span data-stu-id="7ff71-108">Programs started by the command processor inherit the command processor's environment variables.</span></span> <span data-ttu-id="7ff71-109">Per specificare un ambiente diverso per un processo figlio, creare un nuovo blocco di ambiente e passarvi un puntatore come parametro alla funzione [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) .</span><span class="sxs-lookup"><span data-stu-id="7ff71-109">To specify a different environment for a child process, create a new environment block and pass a pointer to it as a parameter to the [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) function.</span></span>

<span data-ttu-id="7ff71-110">Il processore dei comandi fornisce il comando **set** per visualizzare il relativo blocco di ambiente o per creare nuove variabili di ambiente.</span><span class="sxs-lookup"><span data-stu-id="7ff71-110">The command processor provides the **set** command to display its environment block or to create new environment variables.</span></span> <span data-ttu-id="7ff71-111">È anche possibile visualizzare o modificare le variabili di ambiente selezionando **sistema** dal **Pannello di controllo**, selezionando **impostazioni di sistema avanzate** e facendo clic su **variabili di ambiente**.</span><span class="sxs-lookup"><span data-stu-id="7ff71-111">You can also view or modify the environment variables by selecting **System** from the **Control Panel**, selecting **Advanced system settings**, and clicking **Environment Variables**.</span></span>

<span data-ttu-id="7ff71-112">Ogni blocco di ambiente contiene le variabili di ambiente nel formato seguente:</span><span class="sxs-lookup"><span data-stu-id="7ff71-112">Each environment block contains the environment variables in the following format:</span></span><dl> <span data-ttu-id="7ff71-113">*Var1* = *Value1* \\ 0</span><span class="sxs-lookup"><span data-stu-id="7ff71-113">*Var1*=*Value1*\\0</span></span>  
<span data-ttu-id="7ff71-114">*Var2* = *Value2* \\ 0</span><span class="sxs-lookup"><span data-stu-id="7ff71-114">*Var2*=*Value2*\\0</span></span>  
<span data-ttu-id="7ff71-115">*Var3* = *Valore3* \\ 0</span><span class="sxs-lookup"><span data-stu-id="7ff71-115">*Var3*=*Value3*\\0</span></span>  
<span data-ttu-id="7ff71-116">...</span><span class="sxs-lookup"><span data-stu-id="7ff71-116">...</span></span>  
<span data-ttu-id="7ff71-117">*VarN* = *Valore di* \\ 0 \\ 0</span><span class="sxs-lookup"><span data-stu-id="7ff71-117">*VarN*=*ValueN*\\0\\0</span></span>  
</dl>

<span data-ttu-id="7ff71-118">Il nome di una variabile di ambiente non può includere un segno di uguale (=).</span><span class="sxs-lookup"><span data-stu-id="7ff71-118">The name of an environment variable cannot include an equal sign (=).</span></span>

<span data-ttu-id="7ff71-119">La funzione [**GetEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-getenvironmentstrings) restituisce un puntatore al blocco dell'ambiente del processo chiamante.</span><span class="sxs-lookup"><span data-stu-id="7ff71-119">The [**GetEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-getenvironmentstrings) function returns a pointer to the environment block of the calling process.</span></span> <span data-ttu-id="7ff71-120">Questa operazione deve essere considerata come un blocco di sola lettura. non modificarla direttamente.</span><span class="sxs-lookup"><span data-stu-id="7ff71-120">This should be treated as a read-only block; do not modify it directly.</span></span> <span data-ttu-id="7ff71-121">Usare invece la funzione [**nell'SetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) per modificare una variabile di ambiente.</span><span class="sxs-lookup"><span data-stu-id="7ff71-121">Instead, use the [**SetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) function to change an environment variable.</span></span> <span data-ttu-id="7ff71-122">Una volta terminato il blocco dell'ambiente ottenuto da **GetEnvironmentStrings**, chiamare la funzione [**FreeEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-freeenvironmentstringsa) per liberare il blocco.</span><span class="sxs-lookup"><span data-stu-id="7ff71-122">When you are finished with the environment block obtained from **GetEnvironmentStrings**, call the [**FreeEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-freeenvironmentstringsa) function to free the block.</span></span>

<span data-ttu-id="7ff71-123">La chiamata a [**nell'SetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) non ha alcun effetto sulle variabili di ambiente di sistema.</span><span class="sxs-lookup"><span data-stu-id="7ff71-123">Calling [**SetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) has no effect on the system environment variables.</span></span> <span data-ttu-id="7ff71-124">Per aggiungere o modificare a livello di codice le variabili di ambiente di sistema, aggiungerle alla chiave del registro di **\_ sistema HKEY LOCAL \_ Machine \\ System \\ CurrentControlSet \\ Control \\ Session Manager \\ Environment** , quindi trasmettere un messaggio [**WM \_ SETTINGCHANGE**](/windows/desktop/winmsg/wm-settingchange) con *lParam* impostato sulla stringa "Environment".</span><span class="sxs-lookup"><span data-stu-id="7ff71-124">To programmatically add or modify system environment variables, add them to the **HKEY\_LOCAL\_MACHINE\\System\\CurrentControlSet\\Control\\Session Manager\\Environment** registry key, then broadcast a [**WM\_SETTINGCHANGE**](/windows/desktop/winmsg/wm-settingchange) message with *lParam* set to the string "Environment".</span></span> <span data-ttu-id="7ff71-125">Questo consente alle applicazioni, ad esempio la shell, di prelevare gli aggiornamenti.</span><span class="sxs-lookup"><span data-stu-id="7ff71-125">This allows applications, such as the shell, to pick up your updates.</span></span>

<span data-ttu-id="7ff71-126">La dimensione massima di una variabile di ambiente definita dall'utente è 32.767 caratteri.</span><span class="sxs-lookup"><span data-stu-id="7ff71-126">The maximum size of a user-defined environment variable is 32,767 characters.</span></span> <span data-ttu-id="7ff71-127">Non esiste alcuna limitazione tecnica sulle dimensioni del blocco dell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="7ff71-127">There is no technical limitation on the size of the environment block.</span></span> <span data-ttu-id="7ff71-128">Tuttavia, esistono limiti pratici a seconda del meccanismo utilizzato per accedere al blocco.</span><span class="sxs-lookup"><span data-stu-id="7ff71-128">However, there are practical limits depending on the mechanism used to access the block.</span></span> <span data-ttu-id="7ff71-129">Un file batch, ad esempio, non può impostare una variabile che supera la lunghezza massima consentita per la riga di comando.</span><span class="sxs-lookup"><span data-stu-id="7ff71-129">For example, a batch file cannot set a variable that is longer than the maximum command line length.</span></span>

<span data-ttu-id="7ff71-130">**Windows Server 2003 e Windows XP:** La dimensione massima del blocco di ambiente per il processo è di 32.767 caratteri.</span><span class="sxs-lookup"><span data-stu-id="7ff71-130">**Windows Server 2003 and Windows XP:** The maximum size of the environment block for the process is 32,767 characters.</span></span> <span data-ttu-id="7ff71-131">A partire da Windows Vista e Windows Server 2008, non esiste alcuna limitazione tecnica sulle dimensioni del blocco dell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="7ff71-131">Starting with Windows Vista and Windows Server 2008, there is no technical limitation on the size of the environment block.</span></span>

<span data-ttu-id="7ff71-132">La funzione [**GetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-getenvironmentvariable) determina se una variabile specificata è definita nell'ambiente del processo chiamante e, in caso affermativo, qual è il relativo valore.</span><span class="sxs-lookup"><span data-stu-id="7ff71-132">The [**GetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-getenvironmentvariable) function determines whether a specified variable is defined in the environment of the calling process, and, if so, what its value is.</span></span>

<span data-ttu-id="7ff71-133">Per recuperare una copia del blocco di ambiente per un determinato utente, utilizzare la funzione [**CreateEnvironmentBlock**](/windows/win32/api/userenv/nf-userenv-createenvironmentblock) .</span><span class="sxs-lookup"><span data-stu-id="7ff71-133">To retrieve a copy of the environment block for a given user, use the [**CreateEnvironmentBlock**](/windows/win32/api/userenv/nf-userenv-createenvironmentblock) function.</span></span>

<span data-ttu-id="7ff71-134">Per espandere le stringhe delle variabili di ambiente, usare la funzione [**ExpandEnvironmentStrings**](/windows/desktop/api/processenv/nf-processenv-expandenvironmentstringsa) .</span><span class="sxs-lookup"><span data-stu-id="7ff71-134">To expand environment-variable strings, use the [**ExpandEnvironmentStrings**](/windows/desktop/api/processenv/nf-processenv-expandenvironmentstringsa) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7ff71-135">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="7ff71-135">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7ff71-136">Modifica delle variabili di ambiente</span><span class="sxs-lookup"><span data-stu-id="7ff71-136">Changing Environment Variables</span></span>](changing-environment-variables.md)
</dt> <dt>

[<span data-ttu-id="7ff71-137">Variabili di ambiente utente</span><span class="sxs-lookup"><span data-stu-id="7ff71-137">User Environment Variables</span></span>](../shell/user-environment-variables.md)
</dt> </dl>

 

 
