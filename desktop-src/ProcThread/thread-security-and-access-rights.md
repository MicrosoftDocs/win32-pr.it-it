---
description: Microsoft Windows consente di controllare l'accesso agli oggetti thread. Per altre informazioni sulla sicurezza, vedere Access-Control Model.
ms.assetid: 72709446-5c59-4fac-8dc8-7912906ecc85
title: Sicurezza dei thread e diritti di accesso
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c5e14b634b9e41f592df4911211c3374a67166e36fc4735f4a90009275b5da1b
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/11/2021
ms.locfileid: "119427710"
---
# <a name="thread-security-and-access-rights"></a>Sicurezza dei thread e diritti di accesso

Microsoft Windows consente di controllare l'accesso agli oggetti thread. Per altre informazioni sulla sicurezza, vedere [Modello di controllo di accesso](../secauthz/access-control-model.md).

È possibile specificare un [descrittore](../secauthz/security-descriptors.md) di sicurezza per un thread quando si chiama la funzione [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), [**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera), [**CreateProcessWithLogonW**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithlogonw), [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread)o [**CreateRemoteThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethread) . Se si specifica **NULL,** il thread ottiene un descrittore di sicurezza predefinito. Gli ACL nel descrittore di sicurezza predefinito per un thread provengono dal token primario o di rappresentazione dell'autore.

Per recuperare il descrittore di sicurezza di un thread, chiamare la [**funzione GetSecurityInfo.**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo) Per modificare il descrittore di sicurezza di un thread, chiamare la [**funzione SetSecurityInfo.**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo)

L'handle restituito dalla [**funzione CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread) dispone dell'accesso **THREAD ALL \_ \_ ACCESS** all'oggetto thread. Quando si chiama la [**funzione GetCurrentThread,**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentthread) il sistema restituisce uno pseudohandle con l'accesso massimo consentito dal descrittore di sicurezza del thread al chiamante.

I diritti di accesso validi per gli oggetti thread includono i [diritti di accesso standard](../secauthz/standard-access-rights.md) e alcuni diritti di accesso specifici del thread. Nella tabella seguente sono elencati i diritti di accesso standard usati da tutti gli oggetti.

| Valore                           | Significato                                                                                                                                                                                                                                                                                  |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **DELETE** (0x00010000L)        | Obbligatorio per eliminare l'oggetto.                                                                                                                                                                                                                                                           |
| **LETTURA \_ CONTROL** (0x00020000L) | Obbligatorio per leggere le informazioni nel descrittore di sicurezza per l'oggetto, senza includere le informazioni nel SACL. Per leggere o scrivere il SACL, è necessario richiedere il diritto **di accesso ACCESS SYSTEM \_ \_ SECURITY.** Per altre informazioni, vedere [Diritto di accesso SACL.](../secauthz/sacl-access-right.md) |
| **SYNCHRONIZE** (0x00100000L)   | Diritto di utilizzare l'oggetto per la sincronizzazione. Ciò consente a un thread di attendere finché l'oggetto non si trova nello stato segnalato.                                                                                                                                                                |
| **WRITE \_ Applicazione livello dati** (0x00040000L)    | Obbligatorio per modificare l'elenco DACL nel descrittore di sicurezza per l'oggetto.                                                                                                                                                                                                                   |
| **WRITE \_ OWNER** (0x00080000L)  | Obbligatorio per modificare il proprietario nel descrittore di sicurezza per l'oggetto.                                                                                                                                                                                                                  |



 

Nella tabella seguente sono elencati i diritti di accesso specifici del thread.



| Valore                                            | Significato                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|--------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **SYNCHRONIZE** (0x00100000L)                    | Abilita l'uso dell'handle del thread in una delle [funzioni di attesa](../sync/wait-functions.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **THREAD \_ ALL \_ ACCESS**                          | Tutti i diritti di accesso possibili per un oggetto thread. **Windows Server 2003 e Windows XP:** Il valore del flag **THREAD \_ ALL \_ ACCESS** è aumentato Windows Server 2008 e Windows Vista. Se un'applicazione compilata per Windows Server 2008 e Windows Vista viene eseguita in Windows Server 2003 o Windows XP, il flag **THREAD \_ ALL \_ ACCESS** contiene bit di accesso non supportati e la funzione che specifica questo flag ha esito negativo con **ERRORE ACCESS \_ \_ DENIED**. Per evitare questo problema, specificare il set minimo di diritti di accesso necessari per l'operazione. Se **è necessario usare THREAD ALL \_ \_ ACCESS,** impostare **\_ WIN32 \_ WINNT** sul sistema operativo minimo di destinazione dell'applicazione , ad esempio `#define _WIN32_WINNT _WIN32_WINNT_WINXP` . Per altre informazioni, vedere [Using the Windows Headers](../winprog/using-the-windows-headers.md). <br/> |
| **THREAD \_ RAPPRESENTAZIONE \_ DIRETTA** (0x0200)       | Obbligatorio per un thread del server che rappresenta un client.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **THREAD \_ GET \_ CONTEXT** (0x0008)                | Obbligatorio per leggere il contesto di un thread usando [**GetThreadContext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getthreadcontext).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **THREAD \_ IMPERSONATE** (0x0100)                 | Necessario per usare direttamente le informazioni di sicurezza di un thread senza chiamarle usando un meccanismo di comunicazione che fornisce servizi di rappresentazione.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **THREAD \_ INFORMAZIONI \_ SULLE QUERY** (0x0040)          | Obbligatorio per leggere determinate informazioni dall'oggetto thread, ad esempio il codice di uscita (vedere [**GetExitCodeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getexitcodethread)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **THREAD \_ QUERY \_ LIMITED \_ INFORMATION** (0x0800) | Obbligatorio per leggere determinate informazioni dagli oggetti thread (vedere [**GetProcessIdOfThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getprocessidofthread)). A un handle con diritto di accesso **THREAD \_ QUERY \_ INFORMATION** viene concesso automaticamente **THREAD QUERY LIMITED \_ \_ \_ INFORMATION**.**Windows Server 2003 e Windows XP: questo** diritto di accesso non è supportato.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **THREAD \_ SET \_ CONTEXT** (0x0010)                | Necessario per scrivere il contesto di un thread usando [**SetThreadContext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadcontext).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **THREAD \_ SET \_ INFORMATION** (0x0020)            | Obbligatorio per impostare determinate informazioni nell'oggetto thread.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **THREAD \_ SET \_ LIMITED \_ INFORMATION** (0x0400)   | Obbligatorio per impostare determinate informazioni nell'oggetto thread. A un handle con diritto di accesso **THREAD \_ SET \_ INFORMATION** viene concesso automaticamente **THREAD SET LIMITED \_ \_ \_ INFORMATION**.**Windows Server 2003 e Windows XP: questo** diritto di accesso non è supportato.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **THREAD \_ SET \_ THREAD \_ TOKEN** (0x0080)          | Obbligatorio per impostare il token di rappresentazione per un thread usando [**SetThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadtoken).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **THREAD \_ SUSPEND \_ RESUME** (0x0002)             | Obbligatorio per sospendere o riprendere un thread (vedere [**SuspendThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-suspendthread) e [**ResumeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-resumethread)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **THREAD \_ TERMINATE** (0x0001)                   | Obbligatorio per terminare un thread [**usando TerminateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminatethread).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |



 

È possibile richiedere il diritto **di accesso ACCESS SYSTEM \_ \_ SECURITY** a un oggetto thread se si vuole leggere o scrivere il SACL dell'oggetto. Per altre informazioni, vedere [Elenchi di controllo di accesso (ACL)](../secauthz/access-control-lists.md) e Diritto di accesso [SACL.](../secauthz/sacl-access-right.md)

## <a name="protected-processes"></a>Processi protetti

*I processi protetti migliorano* il supporto per Rights Management. Il sistema limita l'accesso ai processi protetti e ai thread dei processi protetti.

**Windows Server 2003 e Windows XP:** I processi protetti sono stati aggiunti a partire da Windows Vista.

I diritti di accesso specifici seguenti non sono consentiti da un processo ai thread di un processo protetto:

**THREAD \_ ALL \_ ACCESS**  
**RAPPRESENTAZIONE \_ DIRETTA \_ DEI THREAD**  
**THREAD \_ GET \_ CONTEXT**  
**RAPPRESENTAZIONE \_ DEL THREAD**  
**INFORMAZIONI \_ SULLE QUERY DI \_ THREAD**  
**CONTESTO \_ DEL SET DI \_ THREAD**  
**INFORMAZIONI \_ SUI SET DI \_ THREAD**  
**TOKEN \_ DI SET DI \_ THREAD**  
**TERMINAZIONE \_ DEL THREAD**  


È stato introdotto il diritto **\_ THREAD QUERY LIMITED \_ \_ INFORMATION** per fornire l'accesso a un subset delle informazioni disponibili tramite **THREAD QUERY \_ \_ INFORMATION**.

 

 
