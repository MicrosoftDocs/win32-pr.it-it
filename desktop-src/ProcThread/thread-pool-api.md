---
description: Il Application Programming Interface del pool di thread (API) utilizza una struttura basata su oggetti.
ms.assetid: c8656469-a273-4838-aa1a-86140b0cd0a2
title: API del pool di thread
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 38e9c267123b24c08d5931e5743a18e94d70d5a9
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106313319"
---
# <a name="thread-pool-api"></a>API del pool di thread

Il Application Programming Interface del pool di thread (API) utilizza una struttura basata su oggetti. Ognuno degli oggetti seguenti è rappresentato da una struttura di dati in modalità utente:

-   Un oggetto pool è un set di thread di lavoro che può essere utilizzato per eseguire il lavoro. Ogni processo può creare più pool isolati con caratteristiche diverse, se necessario. Esiste anche un pool predefinito per ogni processo.
-   Un gruppo di pulitura è associato a un set di oggetti che generano callback. Sono presenti funzioni che attendono e rilasciano tutti gli oggetti che sono membri di ogni gruppo di pulizia. In questo modo l'applicazione non tiene traccia di tutti gli oggetti creati.
-   Un oggetto lavoro viene assegnato a un pool e, facoltativamente, a un gruppo di pulizia. Può essere inviato, causando un thread di lavoro dal pool per eseguire il callback. Un oggetto di lavoro può avere più post in attesa; ogni genera un callback. L'operazione post non può avere esito negativo a causa di risorse insufficienti.
-   Un oggetto timer controlla la pianificazione dei callback. Ogni volta che un timer scade, il relativo callback viene inserito nel pool di lavoro. L'impostazione di un timer non può avere esito negativo a causa di risorse insufficienti.
-   Un oggetto Wait fa in modo che un thread del cameriere attenda un handle di attesa. Dopo che l'attesa è stata soddisfatta o il periodo di timeout scade, il thread del cameriere invia il callback degli oggetti di attesa al pool di lavoro dell'attesa. L'impostazione di un'attesa non può avere esito negativo a causa di risorse insufficienti.
-   Un oggetto I/O associa un handle di file alla porta di completamento I/O per il pool di thread. Quando un'operazione di I/O asincrona viene completata, un thread di lavoro preleva lo stato dell'operazione e chiama il callback dell'oggetto I/O.

Nella tabella seguente vengono descritte le funzionalità delle API del pool di thread originali e correnti.



| Funzionalità              | API originale                                                                                                                                                                                                                                                                                                                   | API corrente                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Sincrono                | [**RegisterWaitForSingleObject**](/windows/win32/api/winbase/nf-winbase-registerwaitforsingleobject)<br/> [**Unregisterwaitex ha provocato**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-unregisterwaitex)<br/>                                                                                                                                                                                        | [**CloseThreadpoolWait**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolwait)<br/> [**CreateThreadpoolWait**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolwait)<br/> [**SetThreadpoolWait**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpoolwait)<br/> [**WaitForThreadpoolWaitCallbacks**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpoolwaitcallbacks)<br/>                                                                                                                                                                                                                                                                                                                   |
| Lavoro                 | [**QueueUserWorkItem**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-queueuserworkitem)<br/>                                                                                                                                                                                                                                                                      | [**CloseThreadpoolWork**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolwork)<br/> [**CreateThreadpoolWork**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolwork)<br/> [**SubmitThreadpoolWork**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-submitthreadpoolwork)<br/> [**TrySubmitThreadpoolCallback**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-trysubmitthreadpoolcallback)<br/> [**WaitForThreadpoolWorkCallbacks**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpoolworkcallbacks)<br/>                                                                                                                                                                                                                               |
| Timer                | [**CreateTimerQueue ha provocato**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-createtimerqueue)<br/> [**CreateTimerQueueTimer ha provocato**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-createtimerqueuetimer)<br/> [**ChangeTimerQueueTimer**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-changetimerqueuetimer)<br/> [**DeleteTimerQueueTimer ha provocato**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-deletetimerqueuetimer)<br/> [**DeleteTimerQueueEx**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-deletetimerqueueex)<br/> | [**CloseThreadpoolTimer**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpooltimer)<br/> [**CreateThreadpoolTimer**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpooltimer)<br/> [**IsThreadpoolTimerSet**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-isthreadpooltimerset)<br/> [**SetThreadpoolTimer**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpooltimer)<br/> [**WaitForThreadpoolTimerCallbacks**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpooltimercallbacks)<br/>                                                                                                                                                                                                                                           |
| I/O                  | [**BindIoCompletionCallback ha provocato**](/windows/desktop/api/WinBase/nf-winbase-bindiocompletioncallback)<br/>                                                                                                                                                                                                                                                        | [**CancelThreadpoolIo**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-cancelthreadpoolio)<br/> [**CloseThreadpoolIo**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolio)<br/> [**CreateThreadpoolIo**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolio)<br/> [**StartThreadpoolIo**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-startthreadpoolio)<br/> [**WaitForThreadpoolIoCallbacks**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpooliocallbacks)<br/>                                                                                                                                                                                                                                                                   |
| Gruppo di pulizia       |                                                                                                                                                                                                                                                                                                                                | [**CloseThreadpoolCleanupGroup**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolcleanupgroup)<br/> [**CloseThreadpoolCleanupGroupMembers**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolcleanupgroupmembers)<br/> [**CreateThreadpoolCleanupGroup**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolcleanupgroup)<br/>                                                                                                                                                                                                                                                                                                                                     |
| Pool                 |                                                                                                                                                                                                                                                                                                                                | [**CloseThreadpool**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpool)<br/> [**CreateThreadpool**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpool)<br/> [**SetThreadpoolThreadMaximum**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpoolthreadmaximum)<br/> [**SetThreadpoolThreadMinimum**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpoolthreadminimum)<br/>                                                                                                                                                                                                                                                                                                                         |
| Ambiente di callback |                                                                                                                                                                                                                                                                                                                                | [**DestroyThreadpoolEnvironment**](/windows/desktop/api/WinBase/nf-winbase-destroythreadpoolenvironment)<br/> [**InitializeThreadpoolEnvironment**](/windows/desktop/api/WinBase/nf-winbase-initializethreadpoolenvironment)<br/> [**SetThreadpoolCallbackCleanupGroup**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackcleanupgroup)<br/> [**SetThreadpoolCallbackLibrary**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbacklibrary)<br/> [**SetThreadpoolCallbackPool**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackpool)<br/> [**SetThreadpoolCallbackPriority**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackpriority)<br/> [**SetThreadpoolCallbackRunsLong**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackrunslong)<br/> |
| Callback             |                                                                                                                                                                                                                                                                                                                                | [**CallbackMayRunLong**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-callbackmayrunlong)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Pulizia callback    |                                                                                                                                                                                                                                                                                                                                | [**DisassociateCurrentThreadFromCallback**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-disassociatecurrentthreadfromcallback)<br/> [**FreeLibraryWhenCallbackReturns**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-freelibrarywhencallbackreturns)<br/> [**LeaveCriticalSectionWhenCallbackReturns**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-leavecriticalsectionwhencallbackreturns)<br/> [**ReleaseMutexWhenCallbackReturns**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-releasemutexwhencallbackreturns)<br/> [**ReleaseSemaphoreWhenCallbackReturns**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-releasesemaphorewhencallbackreturns)<br/> [**SetEventWhenCallbackReturns**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-seteventwhencallbackreturns)<br/>                                 |



 

## <a name="related-topics"></a>Argomenti correlati

<dl> <dt>

[Pool di thread](thread-pools.md)
</dt> <dt>

[Uso delle funzioni del pool di thread](using-the-thread-pool-functions.md)
</dt> </dl>

 

 
