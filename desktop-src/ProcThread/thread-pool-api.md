---
description: L'API (Application Programming Interface) del pool di thread usa una progettazione basata su oggetti.
ms.assetid: c8656469-a273-4838-aa1a-86140b0cd0a2
title: Thread Pool API
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 38e2c9446c6a0432d0fc71e4d888448e73aca3e3282ed03e332f2347390cc72f
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/11/2021
ms.locfileid: "117792969"
---
# <a name="thread-pool-api"></a>Thread Pool API

L'API (Application Programming Interface) del pool di thread usa una progettazione basata su oggetti. Ognuno degli oggetti seguenti è rappresentato da una struttura di dati in modalità utente:

-   Un oggetto pool è un set di thread di lavoro che possono essere usati per eseguire operazioni. Ogni processo può creare più pool isolati con caratteristiche diverse in base alle esigenze. Esiste anche un pool predefinito per ogni processo.
-   Un gruppo di pulizia è associato a un set di oggetti che generano callback. Le funzioni esistono per attendere e rilasciare tutti gli oggetti che sono membri di ogni gruppo di pulizia. In questo modo l'applicazione non tiene traccia di tutti gli oggetti creati.
-   Un oggetto di lavoro viene assegnato a un pool e facoltativamente a un gruppo di pulizia. Può essere pubblicato, causando l'esecuzione del callback di un thread di lavoro del pool. Un oggetto di lavoro può avere più post in sospeso. ognuno genera un callback. L'operazione successiva non può avere esito negativo a causa della mancanza di risorse.
-   Un oggetto timer controlla la pianificazione dei callback. Ogni volta che un timer scade, il callback viene inviato al pool di lavoro. L'impostazione di un timer non può avere esito negativo a causa della mancanza di risorse.
-   Un oggetto di attesa fa sì che un thread del waiter attenda un handle waitable. Dopo che l'attesa è stata soddisfatta o il periodo di timeout scade, il thread del waiter invia il callback degli oggetti di attesa al pool di lavoro dell'attesa. L'impostazione di un'attesa non può avere esito negativo a causa della mancanza di risorse.
-   Un oggetto di I/O associa un handle di file alla porta di completamento I/O per il pool di thread. Al termine di un'operazione di I/O asincrona, un thread di lavoro recupera lo stato dell'operazione e chiama il callback dell'oggetto di I/O.

Nella tabella seguente vengono descritte le funzionalità delle API del pool di thread originale e corrente.



| Funzionalità              | API originale                                                                                                                                                                                                                                                                                                                   | API corrente                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Sincrono                | [**Registerwaitforsingleobject**](/windows/win32/api/winbase/nf-winbase-registerwaitforsingleobject)<br/> [**UnregisterWaitEx**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-unregisterwaitex)<br/>                                                                                                                                                                                        | [**CloseThreadpoolWait**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolwait)<br/> [**CreateThreadpoolWait**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolwait)<br/> [**SetThreadpoolWait**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpoolwait)<br/> [**WaitForThreadpoolWaitCallbacks**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpoolwaitcallbacks)<br/>                                                                                                                                                                                                                                                                                                                   |
| Lavoro                 | [**Queueuserworkitem**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-queueuserworkitem)<br/>                                                                                                                                                                                                                                                                      | [**CloseThreadpoolWork**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolwork)<br/> [**CreateThreadpoolWork**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolwork)<br/> [**SubmitThreadpoolWork**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-submitthreadpoolwork)<br/> [**TrySubmitThreadpoolCallback**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-trysubmitthreadpoolcallback)<br/> [**WaitForThreadpoolWorkCallbacks**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpoolworkcallbacks)<br/>                                                                                                                                                                                                                               |
| Timer                | [**CreateTimerQueue**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-createtimerqueue)<br/> [**CreateTimerQueueTimer**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-createtimerqueuetimer)<br/> [**ChangeTimerQueueTimer**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-changetimerqueuetimer)<br/> [**DeleteTimerQueueTimer**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-deletetimerqueuetimer)<br/> [**DeleteTimerQueueEx**](/windows/win32/api/threadpoollegacyapiset/nf-threadpoollegacyapiset-deletetimerqueueex)<br/> | [**CloseThreadpoolTimer**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpooltimer)<br/> [**CreateThreadpoolTimer**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpooltimer)<br/> [**IsThreadpoolTimerSet**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-isthreadpooltimerset)<br/> [**SetThreadpoolTimer**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpooltimer)<br/> [**WaitForThreadpoolTimerCallbacks**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpooltimercallbacks)<br/>                                                                                                                                                                                                                                           |
| I/O                  | [**BindIoCompletionCallback**](/windows/desktop/api/WinBase/nf-winbase-bindiocompletioncallback)<br/>                                                                                                                                                                                                                                                        | [**CancelThreadpoolIo**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-cancelthreadpoolio)<br/> [**CloseThreadpoolIo**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolio)<br/> [**CreateThreadpoolIo**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolio)<br/> [**StartThreadpoolIo**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-startthreadpoolio)<br/> [**WaitForThreadpoolIoCallbacks**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-waitforthreadpooliocallbacks)<br/>                                                                                                                                                                                                                                                                   |
| Gruppo di pulizia       |                                                                                                                                                                                                                                                                                                                                | [**CloseThreadpoolCleanupGroup**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolcleanupgroup)<br/> [**Closethreadpoolcleanupgroupmembers**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpoolcleanupgroupmembers)<br/> [**CreateThreadpoolCleanupGroup**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpoolcleanupgroup)<br/>                                                                                                                                                                                                                                                                                                                                     |
| Pool                 |                                                                                                                                                                                                                                                                                                                                | [**CloseThreadpool**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-closethreadpool)<br/> [**CreateThreadpool**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-createthreadpool)<br/> [**SetThreadpoolThreadMaximum**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpoolthreadmaximum)<br/> [**SetThreadpoolThreadMinimum**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-setthreadpoolthreadminimum)<br/>                                                                                                                                                                                                                                                                                                                         |
| Ambiente di callback |                                                                                                                                                                                                                                                                                                                                | [**DestroyThreadpoolEnvironment**](/windows/desktop/api/WinBase/nf-winbase-destroythreadpoolenvironment)<br/> [**InitializeThreadpoolEnvironment**](/windows/desktop/api/WinBase/nf-winbase-initializethreadpoolenvironment)<br/> [**SetThreadpoolCallbackCleanupGroup**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackcleanupgroup)<br/> [**SetThreadpoolCallbackLibrary**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbacklibrary)<br/> [**SetThreadpoolCallbackPool**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackpool)<br/> [**SetThreadpoolCallbackPriority**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackpriority)<br/> [**SetThreadpoolCallbackRunsLong**](/windows/desktop/api/WinBase/nf-winbase-setthreadpoolcallbackrunslong)<br/> |
| Callback             |                                                                                                                                                                                                                                                                                                                                | [**CallbackMayRunLong**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-callbackmayrunlong)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Pulizia del callback    |                                                                                                                                                                                                                                                                                                                                | [**DisassociateCurrentThreadFromCallback**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-disassociatecurrentthreadfromcallback)<br/> [**FreeLibraryWhenCallbackReturns**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-freelibrarywhencallbackreturns)<br/> [**LeaveCriticalSectionWhenCallbackReturns**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-leavecriticalsectionwhencallbackreturns)<br/> [**ReleaseMutexWhenCallbackReturns**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-releasemutexwhencallbackreturns)<br/> [**ReleaseSemaphoreWhenCallbackReturns**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-releasesemaphorewhencallbackreturns)<br/> [**SetEventWhenCallbackReturns**](/windows/win32/api/threadpoolapiset/nf-threadpoolapiset-seteventwhencallbackreturns)<br/>                                 |



 

## <a name="related-topics"></a>Argomenti correlati

<dl> <dt>

[Pool di thread](thread-pools.md)
</dt> <dt>

[Uso delle funzioni del pool di thread](using-the-thread-pool-functions.md)
</dt> </dl>

 

 
