---
description: 'I computer con più processori sono in genere progettati per una delle due architetture seguenti: NUMA (non-Uniform Memory Access) o SMP (symmetric multiprocessing).'
ms.assetid: 3c9186c8-a54d-4536-8237-bfff78cc7d11
title: Processori multipli
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0093404a0df653a153823915f1ac72b5e41d50c0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106311984"
---
# <a name="multiple-processors"></a><span data-ttu-id="204ce-103">Processori multipli</span><span class="sxs-lookup"><span data-stu-id="204ce-103">Multiple Processors</span></span>

<span data-ttu-id="204ce-104">I computer con più processori sono in genere progettati per una delle due architetture seguenti: NUMA (non-Uniform Memory Access) o SMP (symmetric multiprocessing).</span><span class="sxs-lookup"><span data-stu-id="204ce-104">Computers with multiple processors are typically designed for one of two architectures: non-uniform memory access (NUMA) or symmetric multiprocessing (SMP).</span></span>

<span data-ttu-id="204ce-105">In un computer NUMA, ogni processore è più vicino ad alcune parti della memoria rispetto ad altri, rendendo più veloce l'accesso alla memoria per alcune parti della memoria rispetto ad altre parti.</span><span class="sxs-lookup"><span data-stu-id="204ce-105">In a NUMA computer, each processor is closer to some parts of memory than others, making memory access faster for some parts of memory than other parts.</span></span> <span data-ttu-id="204ce-106">Nel modello NUMA, il sistema tenta di pianificare i thread sui processori vicini alla memoria utilizzata.</span><span class="sxs-lookup"><span data-stu-id="204ce-106">Under the NUMA model, the system attempts to schedule threads on processors that are close to the memory being used.</span></span> <span data-ttu-id="204ce-107">Per ulteriori informazioni su NUMA, vedere [supporto NUMA](numa-support.md).</span><span class="sxs-lookup"><span data-stu-id="204ce-107">For more information about NUMA, see [NUMA Support](numa-support.md).</span></span>

<span data-ttu-id="204ce-108">In un computer SMP, due o più processori o Core identici si connettono a una singola memoria principale condivisa.</span><span class="sxs-lookup"><span data-stu-id="204ce-108">In an SMP computer, two or more identical processors or cores connect to a single shared main memory.</span></span> <span data-ttu-id="204ce-109">Nel modello SMP è possibile assegnare qualsiasi thread a qualsiasi processore.</span><span class="sxs-lookup"><span data-stu-id="204ce-109">Under the SMP model, any thread can be assigned to any processor.</span></span> <span data-ttu-id="204ce-110">Pertanto, la pianificazione dei thread in un computer SMP è simile alla pianificazione dei thread in un computer con un singolo processore.</span><span class="sxs-lookup"><span data-stu-id="204ce-110">Therefore, scheduling threads on an SMP computer is similar to scheduling threads on a computer with a single processor.</span></span> <span data-ttu-id="204ce-111">Tuttavia, l'utilità di pianificazione dispone di un pool di processori, in modo che sia in grado di pianificare l'esecuzione simultanea dei thread.</span><span class="sxs-lookup"><span data-stu-id="204ce-111">However, the scheduler has a pool of processors, so that it can schedule threads to run concurrently.</span></span> <span data-ttu-id="204ce-112">La pianificazione è ancora determinata dalla priorità dei thread, ma può essere influenzata dall'impostazione dell'affinità dei thread e del processore ideale del thread, come descritto in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="204ce-112">Scheduling is still determined by thread priority, but it can be influenced by setting thread affinity and thread ideal processor, as discussed in this topic.</span></span>

## <a name="thread-affinity"></a><span data-ttu-id="204ce-113">Affinità di thread</span><span class="sxs-lookup"><span data-stu-id="204ce-113">Thread Affinity</span></span>

<span data-ttu-id="204ce-114">L' *affinità dei thread* impone l'esecuzione di un thread su un subset specifico di processori.</span><span class="sxs-lookup"><span data-stu-id="204ce-114">*Thread affinity* forces a thread to run on a specific subset of processors.</span></span> <span data-ttu-id="204ce-115">È in genere consigliabile evitare di impostare l'affinità di thread, perché può interferire con la capacità dell'utilità di pianificazione di pianificare i thread in modo efficiente tra i processori.</span><span class="sxs-lookup"><span data-stu-id="204ce-115">Setting thread affinity should generally be avoided, because it can interfere with the scheduler's ability to schedule threads effectively across processors.</span></span> <span data-ttu-id="204ce-116">Questo può ridurre il miglioramento delle prestazioni prodotto dall'elaborazione parallela.</span><span class="sxs-lookup"><span data-stu-id="204ce-116">This can decrease the performance gains produced by parallel processing.</span></span> <span data-ttu-id="204ce-117">Un uso appropriato dell'affinità di thread sta testando ogni processore.</span><span class="sxs-lookup"><span data-stu-id="204ce-117">An appropriate use of thread affinity is testing each processor.</span></span>

<span data-ttu-id="204ce-118">Il sistema rappresenta l'affinità con una maschera di stato chiamata maschera di affinità del processore.</span><span class="sxs-lookup"><span data-stu-id="204ce-118">The system represents affinity with a bitmask called a processor affinity mask.</span></span> <span data-ttu-id="204ce-119">La maschera di affinità è la dimensione del numero massimo di processori nel sistema, con bit impostati per identificare un subset di processori.</span><span class="sxs-lookup"><span data-stu-id="204ce-119">The affinity mask is the size of the maximum number of processors in the system, with bits set to identify a subset of processors.</span></span> <span data-ttu-id="204ce-120">Inizialmente, il sistema determina il subset di processori nella maschera.</span><span class="sxs-lookup"><span data-stu-id="204ce-120">Initially, the system determines the subset of processors in the mask.</span></span>

<span data-ttu-id="204ce-121">È possibile ottenere l'affinità di thread corrente per tutti i thread del processo chiamando la funzione [**GetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-getprocessaffinitymask) .</span><span class="sxs-lookup"><span data-stu-id="204ce-121">You can obtain the current thread affinity for all threads of the process by calling the [**GetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-getprocessaffinitymask) function.</span></span> <span data-ttu-id="204ce-122">Utilizzare la funzione [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask) per specificare l'affinità di thread per tutti i thread del processo.</span><span class="sxs-lookup"><span data-stu-id="204ce-122">Use the [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask) function to specify thread affinity for all threads of the process.</span></span> <span data-ttu-id="204ce-123">Per impostare l'affinità di thread per un singolo thread, usare la funzione [**SetThreadAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setthreadaffinitymask) .</span><span class="sxs-lookup"><span data-stu-id="204ce-123">To set the thread affinity for a single thread, use the [**SetThreadAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setthreadaffinitymask) function.</span></span> <span data-ttu-id="204ce-124">L'affinità di thread deve essere un subset dell'affinità del processo.</span><span class="sxs-lookup"><span data-stu-id="204ce-124">The thread affinity must be a subset of the process affinity.</span></span>

<span data-ttu-id="204ce-125">Nei sistemi con più di 64 processori, affinity mask rappresenta inizialmente i processori in un singolo gruppo di processori.</span><span class="sxs-lookup"><span data-stu-id="204ce-125">On systems with more than 64 processors, the affinity mask initially represents processors in a single processor group.</span></span> <span data-ttu-id="204ce-126">Tuttavia, l'affinità di thread può essere impostata su un processore in un gruppo diverso, che modifica la maschera di affinità per il processo.</span><span class="sxs-lookup"><span data-stu-id="204ce-126">However, thread affinity can be set to a processor in a different group, which alters the affinity mask for the process.</span></span> <span data-ttu-id="204ce-127">Per ulteriori informazioni, vedere [gruppi di processori](processor-groups.md).</span><span class="sxs-lookup"><span data-stu-id="204ce-127">For more information, see [Processor Groups](processor-groups.md).</span></span>

## <a name="thread-ideal-processor"></a><span data-ttu-id="204ce-128">Processore ideale per thread</span><span class="sxs-lookup"><span data-stu-id="204ce-128">Thread Ideal Processor</span></span>

<span data-ttu-id="204ce-129">Quando si specifica un *processore ideale* per i thread, l'utilità di pianificazione esegue il thread sul processore specificato, quando possibile.</span><span class="sxs-lookup"><span data-stu-id="204ce-129">When you specify a *thread ideal processor*, the scheduler runs the thread on the specified processor when possible.</span></span> <span data-ttu-id="204ce-130">Utilizzare la funzione [**SetThreadIdealProcessor**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessor) per specificare un processore preferito per un thread.</span><span class="sxs-lookup"><span data-stu-id="204ce-130">Use the [**SetThreadIdealProcessor**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessor) function to specify a preferred processor for a thread.</span></span> <span data-ttu-id="204ce-131">Ciò non garantisce che venga scelto il processore ideale, ma fornisce un suggerimento utile all'utilità di pianificazione.</span><span class="sxs-lookup"><span data-stu-id="204ce-131">This does not guarantee that the ideal processor will be chosen but provides a useful hint to the scheduler.</span></span> <span data-ttu-id="204ce-132">Nei sistemi con più di 64 processori, è possibile usare la funzione [**SetThreadIdealProcessorEx**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessorex) per specificare un processore preferito in un gruppo di processori specifico.</span><span class="sxs-lookup"><span data-stu-id="204ce-132">On systems with more than 64 processors, you can use the [**SetThreadIdealProcessorEx**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessorex) function to specify a preferred processor in a specific processor group.</span></span>

## <a name="related-topics"></a><span data-ttu-id="204ce-133">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="204ce-133">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="204ce-134">Supporto NUMA</span><span class="sxs-lookup"><span data-stu-id="204ce-134">NUMA Support</span></span>](numa-support.md)
</dt> <dt>

[<span data-ttu-id="204ce-135">Gruppi di processori</span><span class="sxs-lookup"><span data-stu-id="204ce-135">Processor Groups</span></span>](processor-groups.md)
</dt> </dl>

 

 
