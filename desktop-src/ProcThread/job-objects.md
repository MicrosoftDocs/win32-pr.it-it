---
description: Un oggetto processo consente di gestire gruppi di processi come unità. Gli oggetti processo sono oggetti namable, a protezione diretta e condivisibili che controllano gli attributi dei processi ad essi associati.
ms.assetid: 59296384-5e78-44dd-8019-f1df6668928b
title: Oggetti processo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 07e6d9758faf2b66f047ca60dbba91601b202b4c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104345471"
---
# <a name="job-objects"></a><span data-ttu-id="0fbfc-104">Oggetti processo</span><span class="sxs-lookup"><span data-stu-id="0fbfc-104">Job Objects</span></span>

<span data-ttu-id="0fbfc-105">Un *oggetto processo* consente la gestione di gruppi di processi come unità.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-105">A *job object* allows groups of processes to be managed as a unit.</span></span> <span data-ttu-id="0fbfc-106">Gli oggetti processo sono oggetti namable, a protezione diretta e condivisibili che controllano gli attributi dei processi ad essi associati.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-106">Job objects are namable, securable, sharable objects that control attributes of the processes associated with them.</span></span> <span data-ttu-id="0fbfc-107">Le operazioni eseguite su un oggetto processo interessano tutti i processi associati all'oggetto processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-107">Operations performed on a job object affect all processes associated with the job object.</span></span> <span data-ttu-id="0fbfc-108">Tra gli esempi sono inclusi i limiti di applicazione, ad esempio working set dimensioni e la priorità del processo o la terminazione di tutti i processi associati a un processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-108">Examples include enforcing limits such as working set size and process priority or terminating all processes associated with a job.</span></span>

-   [<span data-ttu-id="0fbfc-109">Creazione di processi</span><span class="sxs-lookup"><span data-stu-id="0fbfc-109">Creating Jobs</span></span>](#creating-jobs)
-   [<span data-ttu-id="0fbfc-110">Gestione dei processi nei processi</span><span class="sxs-lookup"><span data-stu-id="0fbfc-110">Managing Processes in Jobs</span></span>](#managing-processes-in-jobs)
-   [<span data-ttu-id="0fbfc-111">Limiti e notifiche dei processi</span><span class="sxs-lookup"><span data-stu-id="0fbfc-111">Job Limits and Notifications</span></span>](#job-limits-and-notifications)
-   [<span data-ttu-id="0fbfc-112">Contabilità risorse per i processi</span><span class="sxs-lookup"><span data-stu-id="0fbfc-112">Resource Accounting for Jobs</span></span>](#resource-accounting-for-jobs)
-   [<span data-ttu-id="0fbfc-113">Gestione degli oggetti processo</span><span class="sxs-lookup"><span data-stu-id="0fbfc-113">Managing Job Objects</span></span>](#managing-job-objects)
-   [<span data-ttu-id="0fbfc-114">Gestione di un albero di processi che utilizza oggetti processo</span><span class="sxs-lookup"><span data-stu-id="0fbfc-114">Managing a Process Tree that Uses Job Objects</span></span>](#managing-a-process-tree-that-uses-job-objects)

## <a name="creating-jobs"></a><span data-ttu-id="0fbfc-115">Creazione di processi</span><span class="sxs-lookup"><span data-stu-id="0fbfc-115">Creating Jobs</span></span>

<span data-ttu-id="0fbfc-116">Per creare un oggetto processo, usare la funzione [**CreateJobObject**](/windows/desktop/api/WinBase/nf-winbase-createjobobjecta) .</span><span class="sxs-lookup"><span data-stu-id="0fbfc-116">To create a job object, use the [**CreateJobObject**](/windows/desktop/api/WinBase/nf-winbase-createjobobjecta) function.</span></span> <span data-ttu-id="0fbfc-117">Quando il processo viene creato, al processo non è associato alcun processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-117">When the job is created, no processes are associated with the job.</span></span>

<span data-ttu-id="0fbfc-118">Per associare un processo a un processo, usare la funzione [**AssignProcessToJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-assignprocesstojobobject) .</span><span class="sxs-lookup"><span data-stu-id="0fbfc-118">To associate a process with a job, use the [**AssignProcessToJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-assignprocesstojobobject) function.</span></span> <span data-ttu-id="0fbfc-119">Dopo che un processo è stato associato a un processo, l'associazione non può essere interruppe.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-119">After a process is associated with a job, the association cannot be broken.</span></span> <span data-ttu-id="0fbfc-120">Un processo può essere associato a più processi in una gerarchia di processi annidati.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-120">A process can be associated with more than one job in a hierarchy of nested jobs.</span></span> <span data-ttu-id="0fbfc-121">Per ulteriori informazioni, vedere [processi annidati](nested-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="0fbfc-121">For more information, see [Nested Jobs](nested-jobs.md).</span></span>

<span data-ttu-id="0fbfc-122">**Windows 7, Windows server 2008 R2, Windows XP con SP3, Windows server 2008, Windows Vista e Windows server 2003:** Un processo può essere associato a un solo processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-122">**Windows 7, Windows Server 2008 R2, Windows XP with SP3, Windows Server 2008, Windows Vista and Windows Server 2003:** A process can be associated with only one job.</span></span> <span data-ttu-id="0fbfc-123">I processi non possono essere annidati.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-123">Jobs cannot be nested.</span></span> <span data-ttu-id="0fbfc-124">La possibilità di annidare i processi è stata aggiunta in Windows 8 e Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-124">The ability to nest jobs was added in Windows 8 and Windows Server 2012.</span></span>

<span data-ttu-id="0fbfc-125">È possibile specificare un descrittore di sicurezza per un oggetto processo quando si chiama la funzione [**CreateJobObject**](/windows/desktop/api/WinBase/nf-winbase-createjobobjecta) .</span><span class="sxs-lookup"><span data-stu-id="0fbfc-125">You can specify a security descriptor for a job object when you call the [**CreateJobObject**](/windows/desktop/api/WinBase/nf-winbase-createjobobjecta) function.</span></span> <span data-ttu-id="0fbfc-126">Per ulteriori informazioni, vedere [sicurezza dell'oggetto processo e diritti di accesso](job-object-security-and-access-rights.md).</span><span class="sxs-lookup"><span data-stu-id="0fbfc-126">For more information, see [Job Object Security and Access Rights](job-object-security-and-access-rights.md).</span></span>

## <a name="managing-processes-in-jobs"></a><span data-ttu-id="0fbfc-127">Gestione dei processi nei processi</span><span class="sxs-lookup"><span data-stu-id="0fbfc-127">Managing Processes in Jobs</span></span>

<span data-ttu-id="0fbfc-128">Dopo che un processo è stato associato a un processo, per impostazione predefinita tutti i processi figlio creati mediante [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) sono associati anche al processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-128">After a process is associated with a job, by default any child processes it creates using [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) are also associated with the job.</span></span> <span data-ttu-id="0fbfc-129">I processi figlio creati utilizzando [**il \_ processo Win32. Create**](../cimwin32prov/create-method-in-class-win32-process.md) non sono associati al processo. Questo comportamento predefinito può essere modificato impostando il limite dell'oggetto del processo di limite esteso OK \_ \_ o il limite dell' \_ \_ \_ oggetto processo \_ \_ \_ \_ per il processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-129">(Child processes created using [**Win32\_Process.Create**](../cimwin32prov/create-method-in-class-win32-process.md) are not associated with the job.) This default behavior can be changed by setting the extended limit JOB\_OBJECT\_LIMIT\_BREAKAWAY\_OK or JOB\_OBJECT\_LIMIT\_SILENT\_BREAKAWAY\_OK for the job.</span></span>

-   <span data-ttu-id="0fbfc-130">Se il processo ha il limite dell'oggetto del processo limite esteso \_ \_ \_ \_ OK e il processo padre è stato creato con il \_ flag di creazione della fuga \_ dal processo, i \_ processi figlio del processo padre non sono associati al processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-130">If the job has the extended limit JOB\_OBJECT\_LIMIT\_BREAKAWAY\_OK and the parent process was created with the CREATE\_BREAKAWAY\_FROM\_JOB flag, then child processes of the parent process are not associated with the job.</span></span>
-   <span data-ttu-id="0fbfc-131">Se il processo ha l'oggetto limite esteso \_ \_ , il limite \_ di fuga invisibile al processo è \_ \_ OK, i processi figlio di qualsiasi processo padre associato al processo non sono associati al processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-131">If the job has the extended limit JOB\_OBJECT\_LIMIT\_SILENT\_BREAKAWAY\_OK, then child processes of any parent process associated with the job are not associated with the job.</span></span> <span data-ttu-id="0fbfc-132">Non è necessario che i processi padre vengano creati con il flag crea \_ fuga \_ dal \_ processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-132">It is not necessary for parent processes to be created with the CREATE\_BREAKAWAY\_FROM\_JOB flag.</span></span>

<span data-ttu-id="0fbfc-133">Se il processo è annidato, le impostazioni separati dei processi padre nella gerarchia influiscono sul fatto che i processi figlio siano associati a un altro processo nella gerarchia.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-133">If the job is nested, the breakaway settings of parent jobs in the hierarchy affect whether child processes are associated with another job in the hierarchy.</span></span> <span data-ttu-id="0fbfc-134">Per ulteriori informazioni, vedere [processi annidati](nested-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="0fbfc-134">For more information, see [Nested Jobs](nested-jobs.md).</span></span>

<span data-ttu-id="0fbfc-135">Per determinare se un processo è in esecuzione in un processo, usare la funzione [**IsProcessInJob**](/windows/win32/api/jobapi/nf-jobapi-isprocessinjob) .</span><span class="sxs-lookup"><span data-stu-id="0fbfc-135">To determine if a process is running in a job, use the [**IsProcessInJob**](/windows/win32/api/jobapi/nf-jobapi-isprocessinjob) function.</span></span>

<span data-ttu-id="0fbfc-136">Per terminare tutti i processi attualmente associati a un oggetto processo, usare la funzione [**TerminateJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-terminatejobobject) .</span><span class="sxs-lookup"><span data-stu-id="0fbfc-136">To terminate all processes currently associated with a job object, use the [**TerminateJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-terminatejobobject) function.</span></span>

## <a name="job-limits-and-notifications"></a><span data-ttu-id="0fbfc-137">Limiti e notifiche dei processi</span><span class="sxs-lookup"><span data-stu-id="0fbfc-137">Job Limits and Notifications</span></span>

<span data-ttu-id="0fbfc-138">Un processo può applicare limiti come la dimensione working set, la priorità di processo e il limite di tempo di fine processo per ogni processo associato al processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-138">A job can enforce limits such as working set size, process priority, and end-of-job time limit on each process that is associated with the job.</span></span> <span data-ttu-id="0fbfc-139">Se un processo associato a un processo tenta di aumentare le dimensioni working set o la priorità di processo rispetto al limite stabilito dal processo, le chiamate di funzione hanno esito positivo, ma vengono ignorate automaticamente.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-139">If a process associated with a job attempts to increase its working set size or process priority from the limit established by the job, the function calls succeed but are silently ignored.</span></span> <span data-ttu-id="0fbfc-140">Un processo può anche impostare limiti che attivano una notifica quando vengono superati, ma consentono di continuare l'esecuzione del processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-140">A job can also set limits that trigger a notification when they are exceeded but allow the job to continue to run.</span></span>

<span data-ttu-id="0fbfc-141">Per impostare i limiti per un processo, usare la funzione [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) .</span><span class="sxs-lookup"><span data-stu-id="0fbfc-141">To set limits for a job, use the [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) function.</span></span> <span data-ttu-id="0fbfc-142">Per un elenco dei limiti possibili che è possibile impostare per un processo, vedere gli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="0fbfc-142">For a list of possible limits that can be set for a job, see the following topics:</span></span>

-   [<span data-ttu-id="0fbfc-143">**\_ \_ informazioni sul limite di JOBOBJECT Basic \_**</span><span class="sxs-lookup"><span data-stu-id="0fbfc-143">**JOBOBJECT\_BASIC\_LIMIT\_INFORMATION**</span></span>](/windows/desktop/api/WinNT/ns-winnt-jobobject_basic_limit_information)
-   [<span data-ttu-id="0fbfc-144">**\_ \_ restrizioni dell'interfaccia utente di base di JOBOBJECT \_**</span><span class="sxs-lookup"><span data-stu-id="0fbfc-144">**JOBOBJECT\_BASIC\_UI\_RESTRICTIONS**</span></span>](/windows/desktop/api/WinNT/ns-winnt-jobobject_basic_ui_restrictions)
-   [<span data-ttu-id="0fbfc-145">**\_ \_ \_ informazioni sul controllo della frequenza CPU JOBOBJECT \_**</span><span class="sxs-lookup"><span data-stu-id="0fbfc-145">**JOBOBJECT\_CPU\_RATE\_CONTROL\_INFORMATION**</span></span>](/windows/desktop/api/Winnt/ns-winnt-jobobject_cpu_rate_control_information)
-   [<span data-ttu-id="0fbfc-146">**\_ \_ informazioni sul limite esteso JOBOBJECT \_**</span><span class="sxs-lookup"><span data-stu-id="0fbfc-146">**JOBOBJECT\_EXTENDED\_LIMIT\_INFORMATION**</span></span>](/windows/desktop/api/WinNT/ns-winnt-jobobject_extended_limit_information)
-   [<span data-ttu-id="0fbfc-147">**\_ \_ informazioni sul limite di notifica JOBOBJECT \_**</span><span class="sxs-lookup"><span data-stu-id="0fbfc-147">**JOBOBJECT\_NOTIFICATION\_LIMIT\_INFORMATION**</span></span>](/windows/desktop/api/WinNT/ns-winnt-jobobject_notification_limit_information)

<span data-ttu-id="0fbfc-148">I limiti di sicurezza devono essere impostati singolarmente per ogni processo associato a un oggetto processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-148">Security limits must be set individually for each process associated with a job object.</span></span> <span data-ttu-id="0fbfc-149">Per altre informazioni, vedere [sicurezza dei processi e diritti di accesso](process-security-and-access-rights.md).</span><span class="sxs-lookup"><span data-stu-id="0fbfc-149">For more information, see [Process Security and Access Rights](process-security-and-access-rights.md).</span></span>

<span data-ttu-id="0fbfc-150">**Windows XP con SP3 e Windows Server 2003:** La funzione [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) può essere utilizzata per impostare limitazioni di sicurezza per tutti i processi associati a un oggetto processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-150">**Windows XP with SP3 and Windows Server 2003:** The [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) function can be used to set security limitations for all processes associated with a job object.</span></span> <span data-ttu-id="0fbfc-151">A partire da Windows Vista, è necessario impostare i limiti di sicurezza singolarmente per ogni processo associato a un oggetto processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-151">Starting with Windows Vista, security limits must be set individually for each process associated with a job object.</span></span>

<span data-ttu-id="0fbfc-152">Se il processo è annidato, i processi padre nella gerarchia influiscono sul limite applicato per il processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-152">If the job is nested, parent jobs in the hierarchy influence the limit that is enforced for the job.</span></span> <span data-ttu-id="0fbfc-153">Per ulteriori informazioni, vedere [processi annidati](nested-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="0fbfc-153">For more information, see [Nested Jobs](nested-jobs.md).</span></span>

<span data-ttu-id="0fbfc-154">Se il processo dispone di una porta di completamento I/O associata, può ricevere notifiche quando vengono superati determinati limiti di processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-154">If the job has an associated I/O completion port, it can receive notifications when certain job limits are exceeded.</span></span> <span data-ttu-id="0fbfc-155">Quando viene superato un limite o se si verificano altri eventi, il sistema invia messaggi alla porta di completamento.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-155">The system sends messages to the completion port when a limit is exceeded or certain other events occur.</span></span> <span data-ttu-id="0fbfc-156">Per associare una porta di completamento a un processo, usare la funzione [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) con la classe di informazioni dell'oggetto processo **JobObjectAssociateCompletionPortInformation** e un puntatore a una struttura di [**porte di \_ \_ completamento \_ di associazione JOBOBJECT**](/windows/desktop/api/WinNT/ns-winnt-jobobject_associate_completion_port) .</span><span class="sxs-lookup"><span data-stu-id="0fbfc-156">To associate a completion port with a job, use the [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) function with the job object information class **JobObjectAssociateCompletionPortInformation** and a pointer to a [**JOBOBJECT\_ASSOCIATE\_COMPLETION\_PORT**](/windows/desktop/api/WinNT/ns-winnt-jobobject_associate_completion_port) structure.</span></span> <span data-ttu-id="0fbfc-157">È consigliabile eseguire questa operazione quando il processo è inattivo, in modo da ridurre la possibilità di ricevere notifiche mancanti per i processi i cui Stati cambiano durante l'associazione della porta di completamento.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-157">It is best to do this when the job is inactive, to reduce the chance of missing notifications for processes whose states change during the association of the completion port.</span></span>

<span data-ttu-id="0fbfc-158">Tutti i messaggi vengono inviati direttamente dal processo come se il processo avesse chiamato la funzione [**PostQueuedCompletionStatus ha provocato**](/windows/win32/api/ioapiset/nf-ioapiset-postqueuedcompletionstatus) .</span><span class="sxs-lookup"><span data-stu-id="0fbfc-158">All messages are sent directly from the job as if the job had called the [**PostQueuedCompletionStatus**](/windows/win32/api/ioapiset/nf-ioapiset-postqueuedcompletionstatus) function.</span></span> <span data-ttu-id="0fbfc-159">Un thread deve monitorare la porta di completamento utilizzando la funzione [**GetQueuedCompletionStatus**](/windows/win32/api/ioapiset/nf-ioapiset-getqueuedcompletionstatus) per prelevare i messaggi.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-159">A thread must monitor the completion port using the [**GetQueuedCompletionStatus**](/windows/win32/api/ioapiset/nf-ioapiset-getqueuedcompletionstatus) function to pick up the messages.</span></span> <span data-ttu-id="0fbfc-160">Si noti che, con l'eccezione dei limiti impostati con la classe di informazioni **JobObjectNotificationLimitInformation** , il recapito dei messaggi alla porta di completamento non è garantito. l'esito negativo di un messaggio in arrivo non significa necessariamente che l'evento non si è verificato.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-160">Note that, with the exception of limits set with the **JobObjectNotificationLimitInformation** information class, delivery of messages to the completion port is not guaranteed; failure of a message to arrive does not necessarily mean that the event did not occur.</span></span> <span data-ttu-id="0fbfc-161">Viene garantita la ricezione delle notifiche per i limiti impostati con **JobObjectNotificationLimitInformation** alla porta di completamento.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-161">Notifications for limits set with **JobObjectNotificationLimitInformation** are guaranteed to arrive at the completion port.</span></span> <span data-ttu-id="0fbfc-162">Per un elenco dei messaggi possibili, vedere [**la \_ \_ \_ porta di completamento associata JOBOBJECT**](/windows/desktop/api/WinNT/ns-winnt-jobobject_associate_completion_port).</span><span class="sxs-lookup"><span data-stu-id="0fbfc-162">For a list of possible messages, see [**JOBOBJECT\_ASSOCIATE\_COMPLETION\_PORT**](/windows/desktop/api/WinNT/ns-winnt-jobobject_associate_completion_port).</span></span>

## <a name="resource-accounting-for-jobs"></a><span data-ttu-id="0fbfc-163">Contabilità risorse per i processi</span><span class="sxs-lookup"><span data-stu-id="0fbfc-163">Resource Accounting for Jobs</span></span>

<span data-ttu-id="0fbfc-164">L'oggetto processo registra le informazioni di contabilità di base per tutti i processi associati, inclusi quelli che sono stati terminati.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-164">The job object records basic accounting information for all its associated processes, including those that have terminated.</span></span> <span data-ttu-id="0fbfc-165">Per recuperare queste informazioni di contabilità, utilizzare la funzione [**QueryInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-queryinformationjobobject) .</span><span class="sxs-lookup"><span data-stu-id="0fbfc-165">To retrieve this accounting information, use the [**QueryInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-queryinformationjobobject) function.</span></span> <span data-ttu-id="0fbfc-166">Per un elenco delle informazioni di contabilità gestite per un processo, vedere gli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="0fbfc-166">For a list of the accounting information that is maintained for a job, see the following topics:</span></span>

-   [<span data-ttu-id="0fbfc-167">**\_informazioni di \_ contabilità di base di JOBOBJECT \_**</span><span class="sxs-lookup"><span data-stu-id="0fbfc-167">**JOBOBJECT\_BASIC\_ACCOUNTING\_INFORMATION**</span></span>](/windows/desktop/api/WinNT/ns-winnt-jobobject_basic_accounting_information)
-   [<span data-ttu-id="0fbfc-168">**informazioni su JOBOBJECT \_ Basic \_ e \_ io \_ Accounting \_**</span><span class="sxs-lookup"><span data-stu-id="0fbfc-168">**JOBOBJECT\_BASIC\_AND\_IO\_ACCOUNTING\_INFORMATION**</span></span>](/windows/desktop/api/WinNT/ns-winnt-jobobject_basic_and_io_accounting_information)

<span data-ttu-id="0fbfc-169">Se l'oggetto processo è annidato, le informazioni di contabilità per ogni processo figlio vengono aggregate nel processo padre.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-169">If the job object is nested, accounting information for each child job is aggregated in its parent job.</span></span> <span data-ttu-id="0fbfc-170">Per ulteriori informazioni, vedere [processi annidati](nested-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="0fbfc-170">For more information, see [Nested Jobs](nested-jobs.md).</span></span>

## <a name="managing-job-objects"></a><span data-ttu-id="0fbfc-171">Gestione degli oggetti processo</span><span class="sxs-lookup"><span data-stu-id="0fbfc-171">Managing Job Objects</span></span>

<span data-ttu-id="0fbfc-172">Lo stato di un oggetto processo viene impostato su segnalato quando tutti i relativi processi vengono interrotti perché è stato superato il limite di tempo di fine del processo specificato.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-172">The state of a job object is set to signaled when all of its processes are terminated because the specified end-of-job time limit has been exceeded.</span></span> <span data-ttu-id="0fbfc-173">Usare [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject) o [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) per monitorare l'oggetto processo per questo evento.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-173">Use [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject) or [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) to monitor the job object for this event.</span></span>

<span data-ttu-id="0fbfc-174">Per ottenere un handle per un oggetto processo esistente, utilizzare la funzione [**OpenJobObject**](/windows/desktop/api/WinBase/nf-winbase-openjobobjecta) e specificare il nome assegnato all'oggetto al momento della creazione.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-174">To obtain a handle for an existing job object, use the [**OpenJobObject**](/windows/desktop/api/WinBase/nf-winbase-openjobobjecta) function and specify the name given to the object when it was created.</span></span> <span data-ttu-id="0fbfc-175">È possibile aprire solo oggetti processo denominati.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-175">Only named job objects can be opened.</span></span>

<span data-ttu-id="0fbfc-176">Per chiudere un handle di oggetto processo, usare la funzione [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle) .</span><span class="sxs-lookup"><span data-stu-id="0fbfc-176">To close a job object handle, use the [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle) function.</span></span> <span data-ttu-id="0fbfc-177">Il processo viene eliminato definitivamente quando l'ultimo handle è stato chiuso e tutti i processi associati sono stati terminati.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-177">The job is destroyed when its last handle has been closed and all associated processes have been terminated.</span></span> <span data-ttu-id="0fbfc-178">Tuttavia, se per il processo è stato \_ specificato il limite per l'oggetto processo \_ \_ e il \_ flag di chiusura del processo è stato \_ \_ specificato, la chiusura dell'ultimo handle dell'oggetto processo termina tutti i processi associati e quindi Elimina l'oggetto processo stesso.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-178">However, if the job has the JOB\_OBJECT\_LIMIT\_KILL\_ON\_JOB\_CLOSE flag specified, closing the last job object handle terminates all associated processes and then destroys the job object itself.</span></span> <span data-ttu-id="0fbfc-179">Se per un processo annidato è \_ stato \_ specificato il limite \_ di chiusura dell'oggetto processo nel flag di chiusura del \_ \_ processo, la \_ chiusura dell'ultimo handle dell'oggetto processo termina tutti i processi associati al processo e ai relativi processi figlio nella gerarchia.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-179">If a nested job has the JOB\_OBJECT\_LIMIT\_KILL\_ON\_JOB\_CLOSE flag specified, closing the last job object handle terminates all processes associated with the job and its child jobs in the hierarchy.</span></span>

## <a name="managing-a-process-tree-that-uses-job-objects"></a><span data-ttu-id="0fbfc-180">Gestione di un albero di processi che utilizza oggetti processo</span><span class="sxs-lookup"><span data-stu-id="0fbfc-180">Managing a Process Tree that Uses Job Objects</span></span>

<span data-ttu-id="0fbfc-181">A partire da Windows 8 e Windows Server 2012, un'applicazione può utilizzare [processi annidati](nested-jobs.md) per gestire un albero del processo che utilizza più di un oggetto processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-181">Starting with Windows 8 and Windows Server 2012, an application can use [nested jobs](nested-jobs.md) to manage a process tree that uses more than one job object.</span></span> <span data-ttu-id="0fbfc-182">Tuttavia, un'applicazione che deve essere eseguita in Windows 7, Windows Server 2008 R2 o versioni precedenti di Windows che non supportano i processi annidati deve gestire l'albero del processo in altri modi.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-182">However, an application that must run on Windows 7, Windows Server 2008 R2, or earlier versions of Windows that do not support nested jobs must manage the process tree in other ways.</span></span>

<span data-ttu-id="0fbfc-183">Se uno strumento deve gestire un albero del processo che utilizza oggetti processo e non è possibile utilizzare i processi annidati, sia lo strumento che i membri dell'albero del processo devono cooperare.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-183">If a tool must manage a process tree that uses job objects and it is not possible to use nested jobs, both the tool and the members of the process tree must cooperate.</span></span> <span data-ttu-id="0fbfc-184">Usare una delle seguenti opzioni:</span><span class="sxs-lookup"><span data-stu-id="0fbfc-184">Use one of the following options:</span></span>

-   <span data-ttu-id="0fbfc-185">Usare il limite dell'oggetto processo per il limite \_ \_ \_ \_ \_ OK.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-185">Use the JOB\_OBJECT\_LIMIT\_SILENT\_BREAKAWAY\_OK limit.</span></span> <span data-ttu-id="0fbfc-186">Se lo strumento utilizza questo limite, non sarà in grado di monitorare un intero albero dei processi.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-186">If the tool uses this limit, it cannot monitor an entire process tree.</span></span> <span data-ttu-id="0fbfc-187">Lo strumento consente di monitorare solo i processi che aggiunge al processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-187">The tool can monitor only the processes it adds to the job.</span></span> <span data-ttu-id="0fbfc-188">Se questi processi creano processi figlio, non sono associati al processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-188">If these processes create child processes, they are not associated with the job.</span></span> <span data-ttu-id="0fbfc-189">In questa opzione, i processi figlio possono essere associati ad altri oggetti processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-189">In this option, child processes can be associated with other job objects.</span></span>
-   <span data-ttu-id="0fbfc-190">Usare il limite \_ di \_ \_ fughe \_ OK per l'oggetto processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-190">Use the JOB\_OBJECT\_LIMIT\_BREAKAWAY\_OK limit.</span></span> <span data-ttu-id="0fbfc-191">Se lo strumento utilizza questo limite, può monitorare l'intero albero del processo, ad eccezione dei processi che qualsiasi membro dell'albero interrompe in modo esplicito l'albero.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-191">If the tool uses this limit, it can monitor the entire process tree, except for those processes that any member of the tree explicitly breaks away from the tree.</span></span> <span data-ttu-id="0fbfc-192">Un membro dell'albero può creare un processo figlio in un nuovo oggetto processo chiamando la funzione [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) con il flag di creazione della \_ fuga \_ dal \_ processo, quindi chiamando la funzione [**AssignProcessToJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-assignprocesstojobobject) .</span><span class="sxs-lookup"><span data-stu-id="0fbfc-192">A member of the tree can create a child process in a new job object by calling the [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) function with the CREATE\_BREAKAWAY\_FROM\_JOB flag, then calling the [**AssignProcessToJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-assignprocesstojobobject) function.</span></span> <span data-ttu-id="0fbfc-193">In caso contrario, il membro deve gestire i casi in cui **AssignProcessToJobObject** ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-193">Otherwise, the member must handle cases in which **AssignProcessToJobObject** fails.</span></span>

    <span data-ttu-id="0fbfc-194">Il \_ flag crea fuga \_ dal processo non \_ produce alcun effetto se l'albero non viene monitorato dallo strumento.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-194">The CREATE\_BREAKAWAY\_FROM\_JOB flag has no effect if the tree is not being monitored by the tool.</span></span> <span data-ttu-id="0fbfc-195">Pertanto, si tratta dell'opzione preferita, ma è necessario conoscere in anticipo i processi monitorati.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-195">Therefore, this is the preferred option, but it requires advance knowledge of the processes being monitored.</span></span>

-   <span data-ttu-id="0fbfc-196">Evitare le fughe di qualsiasi tipo impostando il limite dell'oggetto del processo dispari \_ \_ \_ \_ OK o l'oggetto processo limite di assenza invisibile al limite \_ \_ \_ \_ \_ OK.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-196">Prevent breakaways of any kind by setting neither the JOB\_OBJECT\_LIMIT\_BREAKAWAY\_OK nor the JOB\_OBJECT\_LIMIT\_SILENT\_BREAKAWAY\_OK limit.</span></span> <span data-ttu-id="0fbfc-197">In questa opzione, lo strumento è in grado di monitorare l'intero albero dei processi.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-197">In this option, the tool can monitor the entire process tree.</span></span> <span data-ttu-id="0fbfc-198">Tuttavia, se un processo figlio tenta di associarsi a se stesso o a un altro processo figlio con un processo chiamando [**AssignProcessToJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-assignprocesstojobobject), la chiamata avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-198">However, if a child process attempts to associate itself or another child process with a job by calling [**AssignProcessToJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-assignprocesstojobobject), the call will fail.</span></span> <span data-ttu-id="0fbfc-199">Se il processo è stato progettato per essere associato a un processo specifico, questo errore potrebbe impedire il corretto funzionamento del processo.</span><span class="sxs-lookup"><span data-stu-id="0fbfc-199">If the process was designed to be associated with a specific job, this failure may prevent the process from working properly.</span></span>

 

 
