---
description: Il server pipe specifica la modalità del tipo di pipe, la modalità di lettura e la modalità di attesa nel parametro dwPipeMode della funzione CreateNamedPipe. I client pipe possono specificare queste modalità di pipe per i rispettivi handle di pipe utilizzando la funzione CreateFile.
ms.assetid: 07cf9d06-6265-47f4-a9f1-c19c06cc5f9f
title: Tipo di named pipe, modalità lettura e attesa
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b116e5ca9357a65a6d63549b96065843b046d479
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103878565"
---
# <a name="named-pipe-type-read-and-wait-modes"></a><span data-ttu-id="a24e3-104">Tipo di named pipe, modalità lettura e attesa</span><span class="sxs-lookup"><span data-stu-id="a24e3-104">Named Pipe Type, Read, and Wait Modes</span></span>

<span data-ttu-id="a24e3-105">Il server pipe specifica la modalità del tipo di pipe, la modalità di lettura e la modalità di attesa nel parametro *dwPipeMode* della funzione [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) .</span><span class="sxs-lookup"><span data-stu-id="a24e3-105">The pipe server specifies the pipe type mode, read mode, and wait mode in the *dwPipeMode* parameter of the [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) function.</span></span> <span data-ttu-id="a24e3-106">I client pipe possono specificare queste modalità di pipe per i rispettivi handle di pipe utilizzando la funzione [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) .</span><span class="sxs-lookup"><span data-stu-id="a24e3-106">Pipe clients can specify these pipe modes for their pipe handles using the [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) function.</span></span>

## <a name="type-mode"></a><span data-ttu-id="a24e3-107">Modalità tipo</span><span class="sxs-lookup"><span data-stu-id="a24e3-107">Type Mode</span></span>

<span data-ttu-id="a24e3-108">La modalità del tipo di una pipe determina il modo in cui i dati vengono scritti in un named pipe.</span><span class="sxs-lookup"><span data-stu-id="a24e3-108">The type mode of a pipe determines how data is written to a named pipe.</span></span> <span data-ttu-id="a24e3-109">I dati possono essere trasmessi tramite un named pipe come un flusso di byte o come flusso di messaggi.</span><span class="sxs-lookup"><span data-stu-id="a24e3-109">Data can be transmitted through a named pipe as either a stream of bytes or as a stream of messages.</span></span> <span data-ttu-id="a24e3-110">Il server pipe specifica il tipo di pipe quando si chiama [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) per creare un'istanza di un named pipe.</span><span class="sxs-lookup"><span data-stu-id="a24e3-110">The pipe server specifies the pipe type when calling [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) to create an instance of a named pipe.</span></span> <span data-ttu-id="a24e3-111">Le modalità del tipo devono essere le stesse per tutte le istanze di una pipe.</span><span class="sxs-lookup"><span data-stu-id="a24e3-111">The type modes must be the same for all instances of a pipe.</span></span>

<span data-ttu-id="a24e3-112">Per creare una pipe di tipo byte, specificare \_ il tipo di pipe \_ byte o usare il valore predefinito.</span><span class="sxs-lookup"><span data-stu-id="a24e3-112">To create a byte-type pipe, specify PIPE\_TYPE\_BYTE or use the default value.</span></span> <span data-ttu-id="a24e3-113">I dati vengono scritti sulla pipe come un flusso di byte e il sistema non distingue i byte scritti in operazioni di scrittura diverse.</span><span class="sxs-lookup"><span data-stu-id="a24e3-113">The data is written to the pipe as a stream of bytes, and the system does not differentiate between the bytes written in different write operations.</span></span>

<span data-ttu-id="a24e3-114">Per creare una pipe del tipo di messaggio, specificare il messaggio del tipo di PIPE \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="a24e3-114">To create a message-type pipe, specify PIPE\_TYPE\_MESSAGE.</span></span> <span data-ttu-id="a24e3-115">Il sistema considera i byte scritti in ogni operazione di scrittura sulla pipe come unità di messaggio.</span><span class="sxs-lookup"><span data-stu-id="a24e3-115">The system treats the bytes written in each write operation to the pipe as a message unit.</span></span> <span data-ttu-id="a24e3-116">Il sistema esegue sempre operazioni di scrittura sulle pipe del tipo di messaggio come se fosse abilitata la modalità Write-through.</span><span class="sxs-lookup"><span data-stu-id="a24e3-116">The system always performs write operations on message-type pipes as if write-through mode were enabled.</span></span>

## <a name="read-mode"></a><span data-ttu-id="a24e3-117">Modalità lettura</span><span class="sxs-lookup"><span data-stu-id="a24e3-117">Read Mode</span></span>

<span data-ttu-id="a24e3-118">La modalità di lettura di una pipe determina il modo in cui i dati vengono letti da un named pipe.</span><span class="sxs-lookup"><span data-stu-id="a24e3-118">The read mode of a pipe determines how data is read from a named pipe.</span></span> <span data-ttu-id="a24e3-119">Il server pipe specifica la modalità di lettura iniziale per un handle di pipe quando si chiama [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea).</span><span class="sxs-lookup"><span data-stu-id="a24e3-119">The pipe server specifies the initial read mode for a pipe handle when calling [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea).</span></span> <span data-ttu-id="a24e3-120">I dati possono essere letti in modalità lettura byte o in modalità lettura messaggio.</span><span class="sxs-lookup"><span data-stu-id="a24e3-120">Data can be read in byte-read mode or message-read mode.</span></span> <span data-ttu-id="a24e3-121">Un handle per una pipe di tipo byte può essere solo in modalità di lettura byte.</span><span class="sxs-lookup"><span data-stu-id="a24e3-121">A handle to a byte-type pipe can be in byte-read mode only.</span></span> <span data-ttu-id="a24e3-122">Un handle per una pipe di tipo messaggio può essere in modalità lettura byte o lettura messaggio.</span><span class="sxs-lookup"><span data-stu-id="a24e3-122">A handle to a message-type pipe can be in either byte-read or message-read mode.</span></span> <span data-ttu-id="a24e3-123">Per una pipe di tipo messaggio, la modalità di lettura può essere diversa per gli handle server e client per la stessa istanza di pipe.</span><span class="sxs-lookup"><span data-stu-id="a24e3-123">For a message-type pipe, the read mode can be different for server and client handles to the same pipe instance.</span></span>

<span data-ttu-id="a24e3-124">Per creare l'handle della pipe in modalità di lettura byte, specificare PIPE \_ READMODE \_ byte o usare il valore predefinito.</span><span class="sxs-lookup"><span data-stu-id="a24e3-124">To create the pipe handle in byte-read mode, specify PIPE\_READMODE\_BYTE or use the default value.</span></span> <span data-ttu-id="a24e3-125">I dati vengono letti dalla pipe come un flusso di byte.</span><span class="sxs-lookup"><span data-stu-id="a24e3-125">Data is read from the pipe as a stream of bytes.</span></span> <span data-ttu-id="a24e3-126">Un'operazione di lettura viene completata correttamente quando vengono letti tutti i byte disponibili nella pipe o quando viene letto il numero di byte specificato.</span><span class="sxs-lookup"><span data-stu-id="a24e3-126">A read operation is completed successfully when all available bytes in the pipe are read or when the specified number of bytes is read.</span></span>

<span data-ttu-id="a24e3-127">Per creare l'handle della pipe in modalità di lettura del messaggio, \_ specificare \_ Message READMODE pipe.</span><span class="sxs-lookup"><span data-stu-id="a24e3-127">To create the pipe handle in message-read mode, specify PIPE\_READMODE\_MESSAGE.</span></span> <span data-ttu-id="a24e3-128">I dati vengono letti dalla pipe come un flusso di messaggi.</span><span class="sxs-lookup"><span data-stu-id="a24e3-128">Data is read from the pipe as a stream of messages.</span></span> <span data-ttu-id="a24e3-129">Un'operazione di lettura viene completata correttamente solo quando viene letto l'intero messaggio.</span><span class="sxs-lookup"><span data-stu-id="a24e3-129">A read operation is completed successfully only when the entire message is read.</span></span> <span data-ttu-id="a24e3-130">Se il numero specificato di byte da leggere è inferiore alla dimensione del messaggio successivo, la funzione legge il maggior numero possibile di messaggi prima di restituire zero (la funzione [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) restituisce l'errore \_ più \_ dati).</span><span class="sxs-lookup"><span data-stu-id="a24e3-130">If the specified number of bytes to read is less than the size of the next message, the function reads as much of the message as possible before returning zero (the [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) function returns ERROR\_MORE\_DATA).</span></span> <span data-ttu-id="a24e3-131">Il resto del messaggio può essere letto usando un'altra operazione di lettura.</span><span class="sxs-lookup"><span data-stu-id="a24e3-131">The remainder of the message can be read using another read operation.</span></span>

<span data-ttu-id="a24e3-132">Per un client pipe, un handle di pipe restituito da [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) è sempre in modalità di lettura byte inizialmente.</span><span class="sxs-lookup"><span data-stu-id="a24e3-132">For a pipe client, a pipe handle returned by [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) is always in byte-read mode initially.</span></span> <span data-ttu-id="a24e3-133">Sia i client pipe che i server pipe possono utilizzare la funzione [**SetNamedPipeHandleState**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) per modificare la modalità di lettura di un handle di pipe.</span><span class="sxs-lookup"><span data-stu-id="a24e3-133">Both pipe clients and pipe servers can use the [**SetNamedPipeHandleState**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) function to change the read mode of a pipe handle.</span></span> <span data-ttu-id="a24e3-134">L'handle della pipe deve avere il \_ diritto di accesso con attributi di scrittura file \_ .</span><span class="sxs-lookup"><span data-stu-id="a24e3-134">The pipe handle must have the FILE\_WRITE\_ATTRIBUTES access right.</span></span>

## <a name="wait-mode"></a><span data-ttu-id="a24e3-135">Modalità di attesa</span><span class="sxs-lookup"><span data-stu-id="a24e3-135">Wait Mode</span></span>

<span data-ttu-id="a24e3-136">La modalità di attesa di un handle di pipe determina il modo in cui le funzioni [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile)e [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) gestiscono le operazioni di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="a24e3-136">The wait mode of a pipe handle determines how the [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile), and [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) functions handle lengthy operations.</span></span> <span data-ttu-id="a24e3-137">In modalità di blocco-attesa, le funzioni attendono indefinitamente che un processo sull'altra estremità della pipe per completare un'operazione.</span><span class="sxs-lookup"><span data-stu-id="a24e3-137">In blocking-wait mode, the functions wait indefinitely for a process on the other end of the pipe to complete an operation.</span></span> <span data-ttu-id="a24e3-138">In modalità di attesa non di blocco, le funzioni restituiscono immediatamente in situazioni che altrimenti richiederebbero un'attesa indefinita.</span><span class="sxs-lookup"><span data-stu-id="a24e3-138">In nonblocking-wait mode, the functions return immediately in situations that would otherwise require an indefinite wait.</span></span>

<span data-ttu-id="a24e3-139">Un'operazione [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) è interessata dalla modalità di attesa di un handle di pipe quando la pipe è vuota.</span><span class="sxs-lookup"><span data-stu-id="a24e3-139">A [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) operation is affected by the wait mode of a pipe handle when the pipe is empty.</span></span> <span data-ttu-id="a24e3-140">Con un handle di attesa di blocco, l'operazione non viene completata correttamente fino a quando i dati non sono disponibili da un thread che scrive sull'altra estremità della pipe.</span><span class="sxs-lookup"><span data-stu-id="a24e3-140">With a blocking-wait handle, the operation is not completed successfully until data is available from a thread writing to the other end of the pipe.</span></span> <span data-ttu-id="a24e3-141">Utilizzando un handle di attesa non di blocco, la funzione restituisce immediatamente zero e la funzione [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) restituisce l'errore \_ nessun \_ dato.</span><span class="sxs-lookup"><span data-stu-id="a24e3-141">Using a nonblocking-wait handle, the function returns zero immediately, and the [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) function returns ERROR\_NO\_DATA.</span></span>

<span data-ttu-id="a24e3-142">Un'operazione [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) è interessata dalla modalità di attesa di un handle di pipe quando lo spazio nel buffer della pipe non è sufficiente.</span><span class="sxs-lookup"><span data-stu-id="a24e3-142">A [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) operation is affected by the wait mode of a pipe handle when there is insufficient space in the pipe's buffer.</span></span> <span data-ttu-id="a24e3-143">Con un handle di attesa di blocco, l'operazione di scrittura non può avere esito positivo finché non viene creato spazio sufficiente nel buffer da parte di un thread che legge dall'altra estremità della pipe.</span><span class="sxs-lookup"><span data-stu-id="a24e3-143">With a blocking-wait handle, the write operation cannot succeed until sufficient space is created in the buffer by a thread reading from the other end of the pipe.</span></span> <span data-ttu-id="a24e3-144">Con un handle di attesa non di blocco, l'operazione di scrittura restituisce immediatamente un valore diverso da zero, senza scrivere alcun byte (per una pipe del tipo di messaggio) o dopo la scrittura di un numero di byte pari al buffer (per una pipe di tipo byte).</span><span class="sxs-lookup"><span data-stu-id="a24e3-144">With a nonblocking-wait handle, the write operation returns a nonzero value immediately, without writing any bytes (for a message-type pipe) or after writing as many bytes as the buffer holds (for a byte-type pipe).</span></span>

<span data-ttu-id="a24e3-145">Un'operazione [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) è interessata dalla modalità di attesa di un handle di pipe quando non è presente alcun client connesso o in attesa di connettersi all'istanza di pipe.</span><span class="sxs-lookup"><span data-stu-id="a24e3-145">A [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) operation is affected by the wait mode of a pipe handle when there is no client connected or waiting to connect to the pipe instance.</span></span> <span data-ttu-id="a24e3-146">Con un handle di attesa di blocco, l'operazione di connessione non riesce fino a quando un client pipe si connette all'istanza della pipe chiamando la funzione [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) o [**CallNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-callnamedpipea) .</span><span class="sxs-lookup"><span data-stu-id="a24e3-146">With a blocking-wait handle, the connect operation does not succeed until a pipe client connects to the pipe instance by calling either the [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) or [**CallNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-callnamedpipea) function.</span></span> <span data-ttu-id="a24e3-147">Con un handle di attesa non di blocco, l'operazione di connessione restituisce immediatamente zero e la funzione [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) restituisce la pipe di errore in \_ \_ ascolto.</span><span class="sxs-lookup"><span data-stu-id="a24e3-147">With a nonblocking-wait handle, the connect operation returns zero immediately, and the [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) function returns ERROR\_PIPE\_LISTENING.</span></span>

<span data-ttu-id="a24e3-148">Per impostazione predefinita, tutti gli handle di named pipe restituiti dalla funzione [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) o [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) vengono creati con la modalità di attesa blocco abilitata.</span><span class="sxs-lookup"><span data-stu-id="a24e3-148">By default, all named pipe handles returned by the [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) or [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) function are created with blocking-wait mode enabled.</span></span> <span data-ttu-id="a24e3-149">Per creare la pipe in modalità di attesa non di blocco, il server pipe specifica la PIPE \_ nowait quando si chiama **CreateNamedPipe**.</span><span class="sxs-lookup"><span data-stu-id="a24e3-149">To create the pipe in nonblocking-wait mode, the pipe server specifies PIPE\_NOWAIT when calling **CreateNamedPipe**.</span></span>

<span data-ttu-id="a24e3-150">Sia i client pipe che i server pipe possono modificare la modalità di attesa di un handle di pipe specificando \_ la pipe Wait o pipe \_ nowait in una chiamata alla funzione [**SetNamedPipeHandleState**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) .</span><span class="sxs-lookup"><span data-stu-id="a24e3-150">Both pipe clients and pipe servers can change a pipe handle's wait mode by specifying either PIPE\_WAIT or PIPE\_NOWAIT in a call to the [**SetNamedPipeHandleState**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) function.</span></span>

> [!Note]  
> <span data-ttu-id="a24e3-151">La modalità di attesa non di blocco è supportata per la compatibilità con Microsoft LAN Manager versione 2,0.</span><span class="sxs-lookup"><span data-stu-id="a24e3-151">The nonblocking-wait mode is supported for compatibility with Microsoft LAN Manager version 2.0.</span></span> <span data-ttu-id="a24e3-152">Questa modalità non deve essere utilizzata per ottenere l'input e l'output sovrapposti (I/O) con named pipe.</span><span class="sxs-lookup"><span data-stu-id="a24e3-152">This mode should not be used to achieve overlapped input and output (I/O) with named pipes.</span></span> <span data-ttu-id="a24e3-153">In alternativa, è necessario utilizzare l'I/O sovrapposto perché consente di eseguire operazioni che richiedono molto tempo in background dopo la restituzione della funzione.</span><span class="sxs-lookup"><span data-stu-id="a24e3-153">Overlapped I/O should be used instead, because it enables time-consuming operations to run in the background after the function returns.</span></span> <span data-ttu-id="a24e3-154">Per ulteriori informazioni sull'I/O sovrapposto, vedere [input e output sincroni e sovrapposti](synchronous-and-overlapped-input-and-output.md).</span><span class="sxs-lookup"><span data-stu-id="a24e3-154">For more information about overlapped I/O, see [Synchronous and Overlapped Input and Output](synchronous-and-overlapped-input-and-output.md).</span></span>

 

 

 
