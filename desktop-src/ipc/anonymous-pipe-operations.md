---
description: Operazioni di pipe anonime, tra cui creazione di pipe, scrittura in una pipe, handle di pipe.
ms.assetid: df81471c-1072-4456-a877-304e76ade4bd
title: Operazioni di pipe anonime
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 963d7127c51859b05e570d00291470a49be5ba66
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106310851"
---
# <a name="anonymous-pipe-operations"></a><span data-ttu-id="5a5ba-103">Operazioni di pipe anonime</span><span class="sxs-lookup"><span data-stu-id="5a5ba-103">Anonymous Pipe Operations</span></span>

<span data-ttu-id="5a5ba-104">La funzione [**non**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-createpipe) crea una pipe anonima e restituisce due handle: un handle di lettura alla pipe e un handle di scrittura alla pipe.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-104">The [**CreatePipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-createpipe) function creates an anonymous pipe and returns two handles: a read handle to the pipe and a write handle to the pipe.</span></span> <span data-ttu-id="5a5ba-105">L'handle di lettura ha accesso in sola lettura alla pipe e l'handle di scrittura ha accesso in sola scrittura alla pipe.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-105">The read handle has read-only access to the pipe, and the write handle has write-only access to the pipe.</span></span> <span data-ttu-id="5a5ba-106">Per comunicare usando la pipe, il server pipe deve passare un handle di pipe a un altro processo.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-106">To communicate using the pipe, the pipe server must pass a pipe handle to another process.</span></span> <span data-ttu-id="5a5ba-107">In genere, questa operazione viene eseguita tramite ereditarietà; ovvero il processo consente di ereditare l'handle da un processo figlio.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-107">Usually, this is done through inheritance; that is, the process allows the handle to be inherited by a child process.</span></span> <span data-ttu-id="5a5ba-108">Il processo può anche duplicare un handle di pipe usando la funzione [**DuplicateHandle**](/windows/desktop/api/handleapi/nf-handleapi-duplicatehandle) e inviarlo a un processo non correlato usando una forma di comunicazione interprocesso, ad esempio DDE o Shared Memory.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-108">The process can also duplicate a pipe handle using the [**DuplicateHandle**](/windows/desktop/api/handleapi/nf-handleapi-duplicatehandle) function and send it to an unrelated process using some form of interprocess communication, such as DDE or shared memory.</span></span>

<span data-ttu-id="5a5ba-109">Un server pipe può inviare l'handle di lettura o l'handle di scrittura al client pipe, a seconda che il client debba utilizzare la pipe anonima per inviare informazioni o ricevere informazioni.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-109">A pipe server can send either the read handle or the write handle to the pipe client, depending on whether the client should use the anonymous pipe to send information or receive information.</span></span> <span data-ttu-id="5a5ba-110">Per leggere dalla pipe, utilizzare l'handle di lettura della pipe in una chiamata alla funzione [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) .</span><span class="sxs-lookup"><span data-stu-id="5a5ba-110">To read from the pipe, use the pipe's read handle in a call to the [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) function.</span></span> <span data-ttu-id="5a5ba-111">La chiamata **ReadFile** restituisce quando un altro processo ha scritto nella pipe.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-111">The **ReadFile** call returns when another process has written to the pipe.</span></span> <span data-ttu-id="5a5ba-112">La chiamata **ReadFile** può anche restituire se tutti gli handle di scrittura sulla pipe sono stati chiusi o se si verifica un errore prima del completamento dell'operazione di lettura.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-112">The **ReadFile** call can also return if all write handles to the pipe have been closed or if an error occurs before the read operation has been completed.</span></span>

<span data-ttu-id="5a5ba-113">Per scrivere nella pipe, utilizzare l'handle di scrittura della pipe in una chiamata alla funzione [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) .</span><span class="sxs-lookup"><span data-stu-id="5a5ba-113">To write to the pipe, use the pipe's write handle in a call to the [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) function.</span></span> <span data-ttu-id="5a5ba-114">La chiamata a **WriteFile** non viene restituita fino a quando non viene scritto il numero specificato di byte nella pipe o si verifica un errore.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-114">The **WriteFile** call does not return until it has written the specified number of bytes to the pipe or an error occurs.</span></span> <span data-ttu-id="5a5ba-115">Se il buffer della pipe è pieno e sono presenti più byte da scrivere, **WriteFile** non restituisce alcun risultato fino a quando un altro processo non legge dalla pipe, rendendo disponibile più spazio nel buffer.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-115">If the pipe buffer is full and there are more bytes to be written, **WriteFile** does not return until another process reads from the pipe, making more buffer space available.</span></span> <span data-ttu-id="5a5ba-116">Il server pipe specifica le dimensioni del buffer per la pipe quando chiama [**non**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-createpipe).</span><span class="sxs-lookup"><span data-stu-id="5a5ba-116">The pipe server specifies the buffer size for the pipe when it calls [**CreatePipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-createpipe).</span></span>

<span data-ttu-id="5a5ba-117">Le operazioni di lettura e scrittura asincrone (sovrapposte) non sono supportate da pipe anonime.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-117">Asynchronous (overlapped) read and write operations are not supported by anonymous pipes.</span></span> <span data-ttu-id="5a5ba-118">Ciò significa che non è possibile usare le funzioni [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex) e [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) con le pipe anonime.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-118">This means that you cannot use the [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex) and [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) functions with anonymous pipes.</span></span> <span data-ttu-id="5a5ba-119">Inoltre, il parametro *lpOverlapped* di [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) e [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) viene ignorato quando queste funzioni vengono usate con le pipe anonime.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-119">In addition, the *lpOverlapped* parameter of [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) and [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) is ignored when these functions are used with anonymous pipes.</span></span>

<span data-ttu-id="5a5ba-120">Esiste una pipe anonima finché tutti gli handle di pipe, sia di lettura che di scrittura, non sono stati chiusi.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-120">An anonymous pipe exists until all pipe handles, both read and write, have been closed.</span></span> <span data-ttu-id="5a5ba-121">Un processo può chiudere gli handle di pipe usando la funzione [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle) .</span><span class="sxs-lookup"><span data-stu-id="5a5ba-121">A process can close its pipe handles by using the [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle) function.</span></span> <span data-ttu-id="5a5ba-122">Tutti gli handle di pipe vengono chiusi anche al termine del processo.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-122">All pipe handles are also closed when the process terminates.</span></span>

<span data-ttu-id="5a5ba-123">Le pipe anonime vengono implementate usando un named pipe con un nome univoco.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-123">Anonymous pipes are implemented using a named pipe with a unique name.</span></span> <span data-ttu-id="5a5ba-124">Pertanto, è spesso possibile passare un handle a una pipe anonima a una funzione che richiede un handle a una named pipe.</span><span class="sxs-lookup"><span data-stu-id="5a5ba-124">Therefore, you can often pass a handle to an anonymous pipe to a function that requires a handle to a named pipe.</span></span>

 

 
