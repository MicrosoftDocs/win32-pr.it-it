---
title: Autenticazione per le connessioni remote
description: Gestione remota Windows mantiene la sicurezza per la comunicazione tra i computer, supportando diversi metodi standard di autenticazione e crittografia dei messaggi.
ms.assetid: 97a13b07-ae7a-4d2f-8841-77a22c91b204
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
topic_type:
- kbArticle
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: 0e9aa125f2ccf5d8c224eee645a6dba1ec2fd96e
ms.sourcegitcommit: 25c6d442ab55cbf0e065398a006b1d409349fffd
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/27/2020
ms.locfileid: "104046447"
---
# <a name="authentication-for-remote-connections"></a><span data-ttu-id="61251-103">Autenticazione per le connessioni remote</span><span class="sxs-lookup"><span data-stu-id="61251-103">Authentication for Remote Connections</span></span>

<span data-ttu-id="61251-104">Gestione remota Windows mantiene la sicurezza per la comunicazione tra i computer, supportando diversi metodi standard di autenticazione e crittografia dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="61251-104">Windows Remote Management maintains security for communication between computers by supporting several standard methods of authentication and message encryption.</span></span>

## <a name="default-group-access"></a><span data-ttu-id="61251-105">Accesso al gruppo predefinito</span><span class="sxs-lookup"><span data-stu-id="61251-105">Default Group Access</span></span>

<span data-ttu-id="61251-106">Durante l'installazione, WinRM crea il gruppo **locale \_ \_ WinRMRemoteWMIUsers**.</span><span class="sxs-lookup"><span data-stu-id="61251-106">During setup, WinRM creates the local group **WinRMRemoteWMIUsers\_\_**.</span></span> <span data-ttu-id="61251-107">WinRM limita quindi l'accesso remoto a tutti gli utenti che non sono membri del gruppo di amministrazione locale o del gruppo **WinRMRemoteWMIUsers \_ \_** .</span><span class="sxs-lookup"><span data-stu-id="61251-107">WinRM then restricts remote access to any user that is not a member of either the local administration group or the **WinRMRemoteWMIUsers\_\_** group.</span></span> <span data-ttu-id="61251-108">È possibile aggiungere un utente locale, un utente di dominio o un gruppo di dominio a **WinRMRemoteWMIUsers \_ \_** digitando **net localgroup WinRMRemoteWMIUsers \_ \_ /Add <domain> \\ <username>** al prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="61251-108">You can add a local user, domain user, or domain group to **WinRMRemoteWMIUsers\_\_** by typing **net localgroup WinRMRemoteWMIUsers\_\_ /add <domain>\\<username>** at the command prompt.</span></span> <span data-ttu-id="61251-109">Facoltativamente, è possibile utilizzare il Criteri di gruppo per aggiungere un utente al gruppo.</span><span class="sxs-lookup"><span data-stu-id="61251-109">Optionally, you can use the Group Policy to add a user to the group.</span></span>

## <a name="default-authentication-settings"></a><span data-ttu-id="61251-110">Impostazioni di autenticazione predefinite</span><span class="sxs-lookup"><span data-stu-id="61251-110">Default Authentication Settings</span></span>

<span data-ttu-id="61251-111">Le credenziali predefinite, il nome utente e la password sono le credenziali per l'account utente connesso che esegue lo script.</span><span class="sxs-lookup"><span data-stu-id="61251-111">The default credentials, user name, and password, are the credentials for the logged-on user account that runs the script.</span></span>

<span data-ttu-id="61251-112">**Per passare a un altro account in un computer remoto**</span><span class="sxs-lookup"><span data-stu-id="61251-112">**To change to another account on a remote computer**</span></span>

1.  <span data-ttu-id="61251-113">Specificare le credenziali in un oggetto [**ConnectionOptions**](connectionoptions.md) o [**IWSManConnectionOptions**](/windows/desktop/api/WSManDisp/nn-wsmandisp-iwsmanconnectionoptions) e fornirle alla chiamata [**CreateSession**](wsman-createsession.md) .</span><span class="sxs-lookup"><span data-stu-id="61251-113">Specify the credentials in a [**ConnectionOptions**](connectionoptions.md) or [**IWSManConnectionOptions**](/windows/desktop/api/WSManDisp/nn-wsmandisp-iwsmanconnectionoptions) object and supply that to the [**CreateSession**](wsman-createsession.md) call.</span></span>
2.  <span data-ttu-id="61251-114">Impostare **WSManFlagCredUserNamePassword** nel parametro *Flags* della chiamata [**CreateSession**](wsman-createsession.md) .</span><span class="sxs-lookup"><span data-stu-id="61251-114">Set the **WSManFlagCredUserNamePassword** in the *flags* parameter in the [**CreateSession**](wsman-createsession.md) call.</span></span>

<span data-ttu-id="61251-115">Nell'elenco seguente è incluso un elenco di ciò che accade quando uno script o un'applicazione viene eseguita con le credenziali predefinite:</span><span class="sxs-lookup"><span data-stu-id="61251-115">The following list contains a list of what occurs when a script or application runs under the default credentials:</span></span>

-   <span data-ttu-id="61251-116">[*Kerberos*](windows-remote-management-glossary.md) è il metodo di autenticazione predefinito quando il client si trova in un dominio e la stringa di destinazione remota non è una delle seguenti: localhost, 127.0.0.1 o \[ :: 1 \] .</span><span class="sxs-lookup"><span data-stu-id="61251-116">[*Kerberos*](windows-remote-management-glossary.md) is the default method of authentication when the client is in a domain and the remote destination string is not one of the following: localhost, 127.0.0.1, or \[::1\].</span></span>
-   <span data-ttu-id="61251-117">[*Negotiate*](windows-remote-management-glossary.md) è il metodo predefinito quando il client non si trova in un dominio, ma la stringa di destinazione remota è una delle seguenti: localhost, 127.0.0.1 o \[ :: 1 \] .</span><span class="sxs-lookup"><span data-stu-id="61251-117">[*Negotiate*](windows-remote-management-glossary.md) is the default method when the client is not in a domain, but the remote destination string is one of the following: localhost, 127.0.0.1, or \[::1\].</span></span>

<span data-ttu-id="61251-118">Se si specificano credenziali esplicite con un oggetto [**ConnectionOptions**](connectionoptions.md) , Negotiate è il metodo predefinito.</span><span class="sxs-lookup"><span data-stu-id="61251-118">If you supply explicit credentials with a [**ConnectionOptions**](connectionoptions.md) object, Negotiate is the default method.</span></span> <span data-ttu-id="61251-119">L'autenticazione Negotiate determina se il metodo di autenticazione in corso è Kerberos o NTLM, a seconda che i computer si trovino in un dominio o in un gruppo di lavoro.</span><span class="sxs-lookup"><span data-stu-id="61251-119">Negotiate authentication determines whether the ongoing authentication method is Kerberos or NTLM, depending on whether the computers are in a domain or workgroup.</span></span> <span data-ttu-id="61251-120">Se ci si connette a un computer di destinazione remoto usando un account locale, l'account deve essere preceduto dal nome del computer.</span><span class="sxs-lookup"><span data-stu-id="61251-120">If connecting to a remote target computer using a local account, then the account should be prefixed with the computer name.</span></span> <span data-ttu-id="61251-121">Ad esempio, nomecomputer \\ utente.</span><span class="sxs-lookup"><span data-stu-id="61251-121">For example, myComputer\\myUsername.</span></span>

<span data-ttu-id="61251-122">Se si specifica l'autenticazione Negotiate, digest o Basic e non si fornisce un oggetto [**ConnectionOptions**](connectionoptions.md) , verrà visualizzato un errore che indica che sono necessarie credenziali esplicite.</span><span class="sxs-lookup"><span data-stu-id="61251-122">If you specify Negotiate, Digest, or Basic authentication and fail to supply a [**ConnectionOptions**](connectionoptions.md) object, then you will receive an error indicating that explicit credentials are required.</span></span> <span data-ttu-id="61251-123">Se HTTPS non è il trasporto, il computer remoto di destinazione deve essere configurato nell'elenco dei computer host attendibili.</span><span class="sxs-lookup"><span data-stu-id="61251-123">If HTTPS is not the transport, then the target remote computer must be configured in the list of trusted host computers.</span></span>

<span data-ttu-id="61251-124">Per ulteriori informazioni sui tipi di autenticazione abilitati nelle impostazioni di configurazione predefinite, vedere [installazione e configurazione per gestione remota Windows](installation-and-configuration-for-windows-remote-management.md).</span><span class="sxs-lookup"><span data-stu-id="61251-124">For more information about the authentication types that are enabled in the default configuration settings, see [Installation and Configuration for Windows Remote Management](installation-and-configuration-for-windows-remote-management.md).</span></span>

## <a name="basic-authentication"></a><span data-ttu-id="61251-125">Autenticazione di base</span><span class="sxs-lookup"><span data-stu-id="61251-125">Basic Authentication</span></span>

<span data-ttu-id="61251-126">Per stabilire in modo esplicito l'autenticazione di [*base*](windows-remote-management-glossary.md) nella chiamata a [**WSMan. CreateSession**](wsman-createsession.md), impostare i flag **WSManFlagUseBasic** e **WSManFlagCredUserNamePassword** nel parametro *Flags* .</span><span class="sxs-lookup"><span data-stu-id="61251-126">To explicitly establish [*Basic*](windows-remote-management-glossary.md) authentication in the call to [**WSMan.CreateSession**](wsman-createsession.md), set the **WSManFlagUseBasic** and **WSManFlagCredUserNamePassword** flags in the *flags* parameter.</span></span> <span data-ttu-id="61251-127">L'autenticazione di base è disabilitata nelle impostazioni di configurazione predefinite sia per il client WinRM che per il server WinRM.</span><span class="sxs-lookup"><span data-stu-id="61251-127">Basic authentication is disabled in the default configuration settings for both the WinRM client and the WinRM server.</span></span>

## <a name="digest-authentication"></a><span data-ttu-id="61251-128">Autenticazione del digest</span><span class="sxs-lookup"><span data-stu-id="61251-128">Digest Authentication</span></span>

<span data-ttu-id="61251-129">Per stabilire in modo esplicito l'autenticazione del [*digest*](windows-remote-management-glossary.md) nella chiamata a [**WSMan. CreateSession**](wsman-createsession.md), impostare il flag **WSManFlagUseDigest** nel parametro *Flags* .</span><span class="sxs-lookup"><span data-stu-id="61251-129">To explicitly establish [*Digest*](windows-remote-management-glossary.md) authentication in the call to [**WSMan.CreateSession**](wsman-createsession.md), set the **WSManFlagUseDigest** flag in the *flags* parameter.</span></span> <span data-ttu-id="61251-130">Il digest non è supportato.</span><span class="sxs-lookup"><span data-stu-id="61251-130">Digest is not supported.</span></span> <span data-ttu-id="61251-131">Non può essere configurato per il componente server WinRM.</span><span class="sxs-lookup"><span data-stu-id="61251-131">It cannot be configured, for the WinRM server component.</span></span>

## <a name="negotiate-authentication"></a><span data-ttu-id="61251-132">Negozia autenticazione</span><span class="sxs-lookup"><span data-stu-id="61251-132">Negotiate Authentication</span></span>

<span data-ttu-id="61251-133">Per stabilire in modo esplicito l'autenticazione di [*negoziazione*](windows-remote-management-glossary.md) , nota anche come autenticazione integrata di Windows, nella chiamata a [**WSMan. CreateSession**](wsman-createsession.md)impostare il flag **WSManFlagUseNegotiate** nel parametro *Flags* .</span><span class="sxs-lookup"><span data-stu-id="61251-133">To explicitly establish [*Negotiate*](windows-remote-management-glossary.md) authentication, also known as Windows Integrated Authentication, in the call to [**WSMan.CreateSession**](wsman-createsession.md), set the **WSManFlagUseNegotiate** flag in the *flags* parameter.</span></span>

<span data-ttu-id="61251-134">Il [controllo dell'account utente (UAC)](https://support.microsoft.com/help/922708/how-to-use-user-account-control-uac-in-windows-vista) influiscono sull'accesso al servizio WinRM.</span><span class="sxs-lookup"><span data-stu-id="61251-134">[User Account Control (UAC)](https://support.microsoft.com/help/922708/how-to-use-user-account-control-uac-in-windows-vista) affects access to the WinRM service.</span></span> <span data-ttu-id="61251-135">Quando si usa l'autenticazione Negotiate in un gruppo di lavoro, solo l'account Administrator predefinito può accedere al servizio.</span><span class="sxs-lookup"><span data-stu-id="61251-135">When Negotiate authentication is used in a workgroup, only the built-in Administrator account can access the service.</span></span> <span data-ttu-id="61251-136">Per consentire a tutti gli account del gruppo Administrators di accedere al servizio, impostare il valore del registro di sistema seguente:</span><span class="sxs-lookup"><span data-stu-id="61251-136">To allow all accounts in the Administrators group to access the service, set the following registry value:</span></span>

<span data-ttu-id="61251-137">**HKEY \_ \_Computer locale** \\ **software** \\ **Microsoft** \\ **Windows** \\ **CurrentVersion** \\ **Policies** \\ **System** \\ **LocalAccountTokenFilterPolicy** = 1</span><span class="sxs-lookup"><span data-stu-id="61251-137">**HKEY\_LOCAL\_MACHINE**\\**SOFTWARE**\\**Microsoft**\\**Windows**\\**CurrentVersion**\\**Policies**\\**System**\\**LocalAccountTokenFilterPolicy** = 1</span></span>

## <a name="kerberos-authentication"></a><span data-ttu-id="61251-138">Autenticazione Kerberos</span><span class="sxs-lookup"><span data-stu-id="61251-138">Kerberos Authentication</span></span>

<span data-ttu-id="61251-139">Per stabilire in modo esplicito l'autenticazione [*Kerberos*](windows-remote-management-glossary.md) nella chiamata a [**WSMan. CreateSession**](wsman-createsession.md), impostare il flag **WSManFlagUseKerberos** nel parametro *Flags* .</span><span class="sxs-lookup"><span data-stu-id="61251-139">To explicitly establish [*Kerberos*](windows-remote-management-glossary.md) authentication in the call to [**WSMan.CreateSession**](wsman-createsession.md), set the **WSManFlagUseKerberos** flag in the *flags* parameter.</span></span> <span data-ttu-id="61251-140">Il client e i computer server devono essere aggiunti a un dominio.</span><span class="sxs-lookup"><span data-stu-id="61251-140">Both the client and the server computers must be joined to a domain.</span></span> <span data-ttu-id="61251-141">Se si usa Kerberos come metodo di autenticazione, non è possibile usare un indirizzo IP nella chiamata a [**WSMan. CreateSession**](wsman-createsession.md) o [**IWSMan:: CreateSession**](/windows/desktop/api/WSManDisp/nf-wsmandisp-iwsman-createsession).</span><span class="sxs-lookup"><span data-stu-id="61251-141">If you use Kerberos as the authentication method, you cannot use an IP address in the call to [**WSMan.CreateSession**](wsman-createsession.md) or [**IWSMan::CreateSession**](/windows/desktop/api/WSManDisp/nf-wsmandisp-iwsman-createsession).</span></span>

## <a name="client-certificate-based-authentication"></a><span data-ttu-id="61251-142">Autenticazione basata su certificati client</span><span class="sxs-lookup"><span data-stu-id="61251-142">Client Certificate-based Authentication</span></span>

<span data-ttu-id="61251-143">Per stabilire l'autenticazione basata sui certificati client nella chiamata a [**WSMan. CreateSession**](wsman-createsession.md), impostare il flag **WSManFlagUseClientCertificate** nel parametro *Flags* .</span><span class="sxs-lookup"><span data-stu-id="61251-143">To establish client certificate-based authentication in the call to [**WSMan.CreateSession**](wsman-createsession.md), set the **WSManFlagUseClientCertificate** flag in the *flags* parameter.</span></span>

<span data-ttu-id="61251-144">Per prima cosa, è necessario abilitare l'autenticazione del certificato nel client e nel servizio usando lo strumento da riga di comando WinRM.</span><span class="sxs-lookup"><span data-stu-id="61251-144">You must first enable certificate authentication on both the client and service by using the Winrm command line tool.</span></span> <span data-ttu-id="61251-145">Per ulteriori informazioni, vedere [Abilitazione delle opzioni di autenticazione](#enabling-or-disabling-authentication-options).</span><span class="sxs-lookup"><span data-stu-id="61251-145">For more information, see [Enabling Authentication Options](#enabling-or-disabling-authentication-options).</span></span> <span data-ttu-id="61251-146">È inoltre necessario creare una voce nella tabella mapping certificato nel computer server WinRM.</span><span class="sxs-lookup"><span data-stu-id="61251-146">You must also create an entry in the CertMapping table on the WinRM server computer.</span></span> <span data-ttu-id="61251-147">Viene stabilito un mapping tra uno o più certificati e un account locale.</span><span class="sxs-lookup"><span data-stu-id="61251-147">This establishes a mapping between one or more certificates and a local account.</span></span> <span data-ttu-id="61251-148">Dopo che il certificato è stato utilizzato per l'autenticazione e l'autorizzazione, l'account locale corrispondente viene utilizzato per le operazioni eseguite dal servizio WinRM.</span><span class="sxs-lookup"><span data-stu-id="61251-148">After the certificate has been used for authentication and authorization, the corresponding local account is used for operations performed by the WinRM service.</span></span>

<span data-ttu-id="61251-149">Il mapping può essere creato per un URI di risorsa specifico.</span><span class="sxs-lookup"><span data-stu-id="61251-149">The mapping can be created for a specific resource URI.</span></span> <span data-ttu-id="61251-150">Per ulteriori informazioni, tra cui come creare una voce di tabella mapping certificato, digitare **winrm help mapping certificato** al prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="61251-150">To learn more, including how to create a CertMapping table entry, type **winrm help certmapping** at the command prompt.</span></span>

> [!Note]  
> <span data-ttu-id="61251-151">Il certificato di dimensione massima utilizzabile da WinRM in questo contesto è 16KB.</span><span class="sxs-lookup"><span data-stu-id="61251-151">The maximum size certificate usable by WinRM in this context is 16KB.</span></span>

 

## <a name="enabling-or-disabling-authentication-options"></a><span data-ttu-id="61251-152">Abilitazione o disabilitazione delle opzioni di autenticazione</span><span class="sxs-lookup"><span data-stu-id="61251-152">Enabling or Disabling Authentication Options</span></span>

<span data-ttu-id="61251-153">L'opzione di autenticazione predefinita nell'installazione del sistema è Kerberos.</span><span class="sxs-lookup"><span data-stu-id="61251-153">The default authentication option at system installation is Kerberos.</span></span> <span data-ttu-id="61251-154">Per ulteriori informazioni, vedere [installazione e configurazione per gestione remota Windows](installation-and-configuration-for-windows-remote-management.md).</span><span class="sxs-lookup"><span data-stu-id="61251-154">For more information, see [Installation and Configuration for Windows Remote Management](installation-and-configuration-for-windows-remote-management.md).</span></span>

<span data-ttu-id="61251-155">Se lo script o l'applicazione richiede un metodo di autenticazione specifico che non è abilitato, è necessario modificare la configurazione per abilitare questo tipo di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="61251-155">If your script or application requires a specific authentication method that is not enabled, you must change the configuration to enable this type of authentication.</span></span> <span data-ttu-id="61251-156">Questa modifica può essere eseguita utilizzando lo strumento da riga di comando **WinRM** o tramite criteri di gruppo per l' **oggetto gestione remota Windows Criteri di gruppo**.</span><span class="sxs-lookup"><span data-stu-id="61251-156">This change can be made using the **Winrm** command-line tool or through Group Policy for the **Windows Remote Management Group Policy Object**.</span></span> <span data-ttu-id="61251-157">Si può anche scegliere di disabilitare determinati metodi di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="61251-157">You may also choose to disable certain methods of authentication.</span></span>

<span data-ttu-id="61251-158">**Per abilitare o disabilitare l'autenticazione con lo strumento WinRM**</span><span class="sxs-lookup"><span data-stu-id="61251-158">**To enable or disable authentication with the Winrm tool**</span></span>

1.  <span data-ttu-id="61251-159">Per impostare la configurazione per il client WinRM, utilizzare il comando **winrm set** e specificare il client.</span><span class="sxs-lookup"><span data-stu-id="61251-159">To set the configuration for the WinRM client, use the **Winrm Set** command and specify the client.</span></span> <span data-ttu-id="61251-160">Ad esempio, il comando seguente disabilita l'autenticazione del digest per il client.</span><span class="sxs-lookup"><span data-stu-id="61251-160">For example, the following command disables digest authentication for the client.</span></span>

    <span data-ttu-id="61251-161">**winrm set winrm/config/client/auth @ {digest = "false"}**</span><span class="sxs-lookup"><span data-stu-id="61251-161">**winrm set winrm/config/client/auth @{Digest="false"}**</span></span>

2.  <span data-ttu-id="61251-162">Per impostare la configurazione per il server WinRM, utilizzare il comando **winrm set** e specificare il servizio.</span><span class="sxs-lookup"><span data-stu-id="61251-162">To set the configuration for the WinRM server, use the **Winrm Set** command and specify the service.</span></span> <span data-ttu-id="61251-163">Il comando seguente, ad esempio, consente di abilitare l'autenticazione Kerberos per il servizio.</span><span class="sxs-lookup"><span data-stu-id="61251-163">For example, the following command enables Kerberos authentication for the service.</span></span>

    <span data-ttu-id="61251-164">**winrm set winrm/config/Service/auth @ {Kerberos = "true"}**</span><span class="sxs-lookup"><span data-stu-id="61251-164">**winrm set winrm/config/service/auth @{Kerberos="true"}**</span></span>

## <a name="related-topics"></a><span data-ttu-id="61251-165">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="61251-165">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="61251-166">Informazioni su Gestione remota Windows</span><span class="sxs-lookup"><span data-stu-id="61251-166">About Windows Remote Management</span></span>](about-windows-remote-management.md)
</dt> <dt>

[<span data-ttu-id="61251-167">**WSMan. CreateSession**</span><span class="sxs-lookup"><span data-stu-id="61251-167">**WSMan.CreateSession**</span></span>](wsman-createsession.md)
</dt> <dt>

[<span data-ttu-id="61251-168">Utilizzo di Gestione remota Windows</span><span class="sxs-lookup"><span data-stu-id="61251-168">Using Windows Remote Management</span></span>](using-windows-remote-management.md)
</dt> </dl>

 

 




