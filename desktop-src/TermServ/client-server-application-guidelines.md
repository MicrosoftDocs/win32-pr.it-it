---
title: Linee guida per applicazioni client/server
description: Le applicazioni client/server non devono presupporre che una connessione a computer singolo sia equivalente a una singola sessione utente.
ms.assetid: 69822ef1-eca8-4302-b014-8e5894d52109
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cd0c1a71256f3ab469bfeb1c08b2d096b56ac1b5
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "106299864"
---
# <a name="clientserver-application-guidelines"></a><span data-ttu-id="2faf3-103">Linee guida per applicazioni client/server</span><span class="sxs-lookup"><span data-stu-id="2faf3-103">Client/Server application guidelines</span></span>

<span data-ttu-id="2faf3-104">Le applicazioni client/server non devono presupporre che una connessione a computer singolo sia equivalente a una singola sessione utente.</span><span class="sxs-lookup"><span data-stu-id="2faf3-104">Client/server applications must not assume that a single computer connection is equivalent to a single user session.</span></span> <span data-ttu-id="2faf3-105">Si tratta di un caso speciale del problema descritto in [indirizzi IP e nomi di computer](ip-addresses-and-computer-names.md).</span><span class="sxs-lookup"><span data-stu-id="2faf3-105">This is a special case of the issue discussed in [IP Addresses and Computer Names](ip-addresses-and-computer-names.md).</span></span>

<span data-ttu-id="2faf3-106">Per identificare in modo univoco una connessione client/server, ogni modulo client deve usare un nome o un identificatore univoco.</span><span class="sxs-lookup"><span data-stu-id="2faf3-106">To uniquely identify a client/server connection, each client module must use a unique name or identifier.</span></span> <span data-ttu-id="2faf3-107">Le applicazioni possono usare oggetti denominati o pipe, socket o altri metodi IPC.</span><span class="sxs-lookup"><span data-stu-id="2faf3-107">Applications can use named objects or pipes, sockets, or other IPC methods.</span></span> <span data-ttu-id="2faf3-108">Per altre informazioni, vedere [spazi dei nomi degli oggetti kernel](kernel-object-namespaces.md).</span><span class="sxs-lookup"><span data-stu-id="2faf3-108">For more information, see [Kernel Object Namespaces](kernel-object-namespaces.md).</span></span>

<span data-ttu-id="2faf3-109">Per essere Servizi Desktop remoto compatibile, il modulo server in un'applicazione client/server deve essere in grado di gestire più client che si connettono dallo stesso computer.</span><span class="sxs-lookup"><span data-stu-id="2faf3-109">To be Remote Desktop Services compatible, the server module in a client/server application must be able to handle multiple clients connecting from the same computer.</span></span> <span data-ttu-id="2faf3-110">A tale scopo, è necessario che il modulo server accetti le connessioni client tramite un'interfaccia globale ben definita, ad esempio RPC o Named Pipes.</span><span class="sxs-lookup"><span data-stu-id="2faf3-110">To accomplish this, the server module must accept client connections through a well-defined global interface, such as RPC or named pipes.</span></span> <span data-ttu-id="2faf3-111">Il server e il client devono negoziare un canale di comunicazione diverso per ogni sessione utente.</span><span class="sxs-lookup"><span data-stu-id="2faf3-111">The server and client must negotiate a different communication channel for each user session.</span></span> <span data-ttu-id="2faf3-112">Il client deve stabilire una connessione al server utilizzando protocolli che supportano facilmente questo tipo di operazione, ad esempio TCP/IP, in cui è possibile utilizzare una connessione socket diversa per ogni applicazione client.</span><span class="sxs-lookup"><span data-stu-id="2faf3-112">The client must establish a connection to the server by using protocols that easily support this type of operation, such as TCP/IP, where a different socket connection can be used for each client application.</span></span>

<span data-ttu-id="2faf3-113">Il modulo client può chiamare la funzione [**ProcessIdToSessionId**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-processidtosessionid) per recuperare l'identificatore della sessione di Servizi Desktop remoto.</span><span class="sxs-lookup"><span data-stu-id="2faf3-113">The client module can call the [**ProcessIdToSessionId**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-processidtosessionid) function to retrieve the identifier of its Remote Desktop Services session.</span></span> <span data-ttu-id="2faf3-114">Il client usa quindi una forma di comunicazione interprocesso per passare il relativo identificatore di sessione al modulo server.</span><span class="sxs-lookup"><span data-stu-id="2faf3-114">The client then uses some form of interprocess communication to pass its session identifier to the server module.</span></span> <span data-ttu-id="2faf3-115">I moduli client e server possono quindi utilizzare l'identificatore di sessione per configurare un canale di comunicazione privato.</span><span class="sxs-lookup"><span data-stu-id="2faf3-115">The client and server modules can then use the session identifier to set up a private communication channel.</span></span> <span data-ttu-id="2faf3-116">Ad esempio, il modulo server può usare un identificatore di sessione per accedere agli oggetti nello spazio dei nomi della sessione per gli oggetti kernel.</span><span class="sxs-lookup"><span data-stu-id="2faf3-116">For example, the server module can use a session identifier to access objects in the session's namespace for kernel objects.</span></span>

<span data-ttu-id="2faf3-117">Il modulo server può inoltre usare l'identificatore di sessione in una chiamata [**WTSQuerySessionInformation**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsquerysessioninformationa) per recuperare informazioni aggiuntive sul client.</span><span class="sxs-lookup"><span data-stu-id="2faf3-117">Furthermore, the server module can use the session identifier in a [**WTSQuerySessionInformation**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsquerysessioninformationa) call to retrieve additional information about the client.</span></span> <span data-ttu-id="2faf3-118">Il modulo server può anche usare l'identificatore di sessione in una chiamata [**WTSSendMessage**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtssendmessagea) per visualizzare un messaggio nel terminale client.</span><span class="sxs-lookup"><span data-stu-id="2faf3-118">The server module can also use the session identifier in a [**WTSSendMessage**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtssendmessagea) call to display a message on the client terminal.</span></span> <span data-ttu-id="2faf3-119">Il modulo server può inoltre creare due eventi per monitorare la connessione e la disconnessione del client da una sessione.</span><span class="sxs-lookup"><span data-stu-id="2faf3-119">The server module can also create two events to monitor client connection to and disconnection from a session.</span></span> <span data-ttu-id="2faf3-120">Per eseguire questa operazione, tuttavia, deve essere registrato nel server host sessione Desktop remoto (host sessione Desktop remoto).</span><span class="sxs-lookup"><span data-stu-id="2faf3-120">However, it must be registered on the Remote Desktop Session Host (RD Session Host) server to do this.</span></span> <span data-ttu-id="2faf3-121">Per ulteriori informazioni, vedere [monitoraggio delle connessioni di sessione e disconnessione](monitoring-session-connections-and-disconnections.md).</span><span class="sxs-lookup"><span data-stu-id="2faf3-121">For more information, see [Monitoring Session Connections and Disconnections](monitoring-session-connections-and-disconnections.md).</span></span>

<span data-ttu-id="2faf3-122">Le richieste di input dell'utente costituiscono una potenziale fonte di problemi per le applicazioni client/server.</span><span class="sxs-lookup"><span data-stu-id="2faf3-122">Prompts for user input are a potential source of problems for client/server applications.</span></span> <span data-ttu-id="2faf3-123">Se, ad esempio, un servizio chiama la funzione [**MessageBox**](/windows/desktop/api/winuser/nf-winuser-messagebox) , la finestra di messaggio viene visualizzata sul desktop del server Host sessione Desktop remoto e non sul desktop client.</span><span class="sxs-lookup"><span data-stu-id="2faf3-123">For example, if a service calls the [**MessageBox**](/windows/desktop/api/winuser/nf-winuser-messagebox) function, the message box is displayed on the desktop of the RD Session Host server, not on the client desktop.</span></span> <span data-ttu-id="2faf3-124">Per visualizzare un messaggio su un desktop client, il servizio può chiamare la funzione [**WtsSendMessage**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtssendmessagea) .</span><span class="sxs-lookup"><span data-stu-id="2faf3-124">To display a message on a client desktop, the service can call the [**WtsSendMessage**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtssendmessagea) function.</span></span> <span data-ttu-id="2faf3-125">In alternativa, il servizio può richiedere l'input dal modulo client e il modulo client può visualizzare l'interfaccia utente e inviare di nuovo l'input risultante al servizio.</span><span class="sxs-lookup"><span data-stu-id="2faf3-125">Alternatively, the service can request input from the client module, and the client module can display the user interface and send the resulting input back to the service.</span></span>

<span data-ttu-id="2faf3-126">I processi generati da più sessioni possono inviare e ricevere dati tra loro tramite l'utilizzo di blocchi di memoria condivisi.</span><span class="sxs-lookup"><span data-stu-id="2faf3-126">Processes spawned from multiple sessions can send data to and receive data from each other through the use of shared memory blocks.</span></span> <span data-ttu-id="2faf3-127">Per ulteriori informazioni, vedere [creazione di una memoria condivisa denominata](/windows/desktop/Memory/creating-named-shared-memory).</span><span class="sxs-lookup"><span data-stu-id="2faf3-127">For more information, see [Creating Named Shared Memory](/windows/desktop/Memory/creating-named-shared-memory).</span></span> <span data-ttu-id="2faf3-128">La memoria condivisa non può essere utilizzata nelle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="2faf3-128">Shared memory cannot be used under the following conditions:</span></span>

-   <span data-ttu-id="2faf3-129">I processi che utilizzano il blocco di memoria condivisa sono stati generati da più sessioni.</span><span class="sxs-lookup"><span data-stu-id="2faf3-129">The processes using the shared memory block were spawned by multiple sessions.</span></span>
-   <span data-ttu-id="2faf3-130">Le sessioni condividono le stesse credenziali di autenticazione utente.</span><span class="sxs-lookup"><span data-stu-id="2faf3-130">The sessions share the same user authentication credential.</span></span>

 

 