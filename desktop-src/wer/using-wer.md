---
title: Uso di WER
description: A partire da Windows Vista, Windows fornisce la segnalazione di errori di arresto anomalo, di non risposta e del kernel, per impostazione predefinita senza richiedere modifiche all'applicazione.
ms.assetid: c096cd89-e3a7-4959-a35f-40e6168f277e
keywords:
- Segnalazione errori Windows Segnalazione errori Windows, utilizzo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 655bed6d11757d7d4e08cd00ac47479e1246f96b
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/17/2020
ms.locfileid: "104398842"
---
# <a name="using-wer"></a><span data-ttu-id="118e9-104">Uso di WER</span><span class="sxs-lookup"><span data-stu-id="118e9-104">Using WER</span></span>

<span data-ttu-id="118e9-105">A partire da Windows Vista, Windows fornisce la segnalazione di errori di arresto anomalo, di non risposta e del kernel, per impostazione predefinita senza richiedere modifiche all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="118e9-105">Beginning with Windows Vista, Windows provides crash, non-response, and kernel fault error reporting by default without requiring changes to your application.</span></span> <span data-ttu-id="118e9-106">Se necessario, il report includerà i minidump e le informazioni sul dump dell'heap.</span><span class="sxs-lookup"><span data-stu-id="118e9-106">The report will include minidump and heap dump information if required.</span></span> <span data-ttu-id="118e9-107">Le applicazioni usano invece l'API WER per inviare segnalazioni di problemi specifici dell'applicazione a Microsoft.</span><span class="sxs-lookup"><span data-stu-id="118e9-107">Applications instead use the WER API to send application-specific problem reports to Microsoft.</span></span>

<span data-ttu-id="118e9-108">Poiché Windows segnala automaticamente le eccezioni non gestite, l'applicazione non deve gestire le eccezioni irreversibili.</span><span class="sxs-lookup"><span data-stu-id="118e9-108">Because Windows automatically reports unhandled exceptions, application should not handle fatal exceptions.</span></span> <span data-ttu-id="118e9-109">Se il processo di errore o non risposta è interattivo, WER Visualizza un'interfaccia utente che informa l'utente del problema.</span><span class="sxs-lookup"><span data-stu-id="118e9-109">If the faulting or not-responding process is interactive, WER displays a user interface informing the user of the problem.</span></span> <span data-ttu-id="118e9-110">Un'applicazione è considerata non risponde se non risponde ai messaggi di Windows per cinque secondi mentre l'utente tenta di interagire con l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="118e9-110">An application is considered unresponsive if it does not respond to Windows messages for five seconds while the user is trying to interact with the application.</span></span>

## <a name="windows-error-reporting-flow-for-crashes-non-response-and-kernel-faults"></a><span data-ttu-id="118e9-111">Flusso di Segnalazione errori Windows per arresti anomali, non di risposta e errori del kernel</span><span class="sxs-lookup"><span data-stu-id="118e9-111">Windows Error Reporting flow for crashes, non-response, and kernel faults</span></span>

<span data-ttu-id="118e9-112">Di seguito vengono illustrati i passaggi che si verificano per l'arresto anomalo dell'applicazione, la mancata risposta o l'errore del kernel.</span><span class="sxs-lookup"><span data-stu-id="118e9-112">The following shows the steps that occur for an application crash, non-response, or kernel fault.</span></span>

1.  <span data-ttu-id="118e9-113">Si è verificato l'evento relativo al problema.</span><span class="sxs-lookup"><span data-stu-id="118e9-113">The problem event occurs.</span></span>
2.  <span data-ttu-id="118e9-114">Il sistema operativo richiama WER.</span><span class="sxs-lookup"><span data-stu-id="118e9-114">The operating system invokes WER.</span></span>
3.  <span data-ttu-id="118e9-115">WER raccoglie i dati, compila un report e richiede il consenso dell'utente (se necessario).</span><span class="sxs-lookup"><span data-stu-id="118e9-115">WER collects the data, builds a report, and prompts the user for consent (if needed).</span></span>
4.  <span data-ttu-id="118e9-116">WER invia il report a Microsoft (server Watson) se l'utente ha acconsentito.</span><span class="sxs-lookup"><span data-stu-id="118e9-116">WER sends the report to Microsoft (Watson Server) if the user consented.</span></span>
5.  <span data-ttu-id="118e9-117">Se il server Watson richiede dati aggiuntivi, WER raccoglie i dati e chiede all'utente il consenso (se necessario).</span><span class="sxs-lookup"><span data-stu-id="118e9-117">If the Watson server requests additional data, WER collects the data and prompts the user for consent (if needed).</span></span>
6.  <span data-ttu-id="118e9-118">Se l'applicazione è stata registrata per il ripristino e il riavvio, WER esegue le funzioni di callback registrate mentre i dati vengono compressi e inviati a Microsoft, se l'utente ha acconsentito.</span><span class="sxs-lookup"><span data-stu-id="118e9-118">If the application has registered for recovery and restart, WER executes the registered callback functions while the data is compressed and sent to Microsoft (if the user consented).</span></span>
7.  <span data-ttu-id="118e9-119">Se una risposta al problema è disponibile da Microsoft, l'utente riceve una notifica.</span><span class="sxs-lookup"><span data-stu-id="118e9-119">If a response to the problem is available from Microsoft, the user is notified.</span></span>

<span data-ttu-id="118e9-120">Le applicazioni possono utilizzare le seguenti funzioni per personalizzare il contenuto del report inviato a Microsoft.</span><span class="sxs-lookup"><span data-stu-id="118e9-120">Applications can use the following functions to customize the contents of the report that is sent to Microsoft.</span></span> <span data-ttu-id="118e9-121">Le funzioni di registrazione indicano a WER di includere i file e i blocchi di memoria specifici nella segnalazione degli errori creata.</span><span class="sxs-lookup"><span data-stu-id="118e9-121">The registration functions tell WER to include the specific files and memory blocks in the error report that it creates.</span></span>

-   [<span data-ttu-id="118e9-122">**WerRegisterFile**</span><span class="sxs-lookup"><span data-stu-id="118e9-122">**WerRegisterFile**</span></span>](/windows/desktop/api/Werapi/nf-werapi-werregisterfile)
-   [<span data-ttu-id="118e9-123">**WerRegisterMemoryBlock**</span><span class="sxs-lookup"><span data-stu-id="118e9-123">**WerRegisterMemoryBlock**</span></span>](/windows/desktop/api/Werapi/nf-werapi-werregistermemoryblock)
-   [<span data-ttu-id="118e9-124">**WerSetFlags**</span><span class="sxs-lookup"><span data-stu-id="118e9-124">**WerSetFlags**</span></span>](/windows/desktop/api/Werapi/nf-werapi-wersetflags)
-   [<span data-ttu-id="118e9-125">**WerUnregisterFile**</span><span class="sxs-lookup"><span data-stu-id="118e9-125">**WerUnregisterFile**</span></span>](/windows/desktop/api/Werapi/nf-werapi-werunregisterfile)
-   [<span data-ttu-id="118e9-126">**WerUnregisterMemoryBlock**</span><span class="sxs-lookup"><span data-stu-id="118e9-126">**WerUnregisterMemoryBlock**</span></span>](/windows/desktop/api/Werapi/nf-werapi-werunregistermemoryblock)
-   [<span data-ttu-id="118e9-127">**WerGetFlags**</span><span class="sxs-lookup"><span data-stu-id="118e9-127">**WerGetFlags**</span></span>](/windows/desktop/api/Werapi/nf-werapi-wergetflags)

## <a name="windows-error-reporting-flow-for-generic-event-reporting"></a><span data-ttu-id="118e9-128">Flusso di Segnalazione errori Windows per la segnalazione di eventi generici</span><span class="sxs-lookup"><span data-stu-id="118e9-128">Windows Error Reporting flow for generic event reporting</span></span>

<span data-ttu-id="118e9-129">Nei passaggi seguenti viene illustrato il modo in cui le applicazioni possono ottenere una segnalazione errori per una condizione di errore non irreversibile.</span><span class="sxs-lookup"><span data-stu-id="118e9-129">The following steps show how applications can get an error report for a non-fatal error condition.</span></span>

1.  <span data-ttu-id="118e9-130">Si verifica l'evento di problema non irreversibile.</span><span class="sxs-lookup"><span data-stu-id="118e9-130">The non-fatal problem event occurs.</span></span>
2.  <span data-ttu-id="118e9-131">L'applicazione riconosce l'evento e utilizza la seguente sequenza di chiamate di funzione per generare il report.</span><span class="sxs-lookup"><span data-stu-id="118e9-131">The application recognizes the event and uses the following sequence of function calls to generate the report.</span></span>
    1.  <span data-ttu-id="118e9-132">Chiamare la funzione [**WerReportCreate**](/windows/desktop/api/Werapi/nf-werapi-werreportcreate) per creare il report.</span><span class="sxs-lookup"><span data-stu-id="118e9-132">Call the [**WerReportCreate**](/windows/desktop/api/Werapi/nf-werapi-werreportcreate) function to create the report.</span></span>
    2.  <span data-ttu-id="118e9-133">Chiamare la funzione [**WerReportSetParameter**](/windows/desktop/api/Werapi/nf-werapi-werreportsetparameter) per impostare i parametri del report.</span><span class="sxs-lookup"><span data-stu-id="118e9-133">Call the [**WerReportSetParameter**](/windows/desktop/api/Werapi/nf-werapi-werreportsetparameter) function to set the report parameters.</span></span>
    3.  <span data-ttu-id="118e9-134">Chiamare la funzione [**WerReportAddFile**](/windows/desktop/api/Werapi/nf-werapi-werreportaddfile) per aggiungere file al report.</span><span class="sxs-lookup"><span data-stu-id="118e9-134">Call the [**WerReportAddFile**](/windows/desktop/api/Werapi/nf-werapi-werreportaddfile) function to add files to the report.</span></span>
    4.  <span data-ttu-id="118e9-135">Chiamare la funzione [**WerReportAddDump**](/windows/desktop/api/Werapi/nf-werapi-werreportadddump) per aggiungere un minidump al report, se necessario.</span><span class="sxs-lookup"><span data-stu-id="118e9-135">Call the [**WerReportAddDump**](/windows/desktop/api/Werapi/nf-werapi-werreportadddump) function to add a minidump to the report (if needed).</span></span>
    5.  <span data-ttu-id="118e9-136">Chiamare la funzione [**WerReportSubmit**](/windows/desktop/api/Werapi/nf-werapi-werreportsubmit) per inviare il report.</span><span class="sxs-lookup"><span data-stu-id="118e9-136">Call the [**WerReportSubmit**](/windows/desktop/api/Werapi/nf-werapi-werreportsubmit) function to send the report.</span></span>
    6.  <span data-ttu-id="118e9-137">Chiamare [**WerReportCloseHandle**](/windows/desktop/api/Werapi/nf-werapi-werreportclosehandle) per liberare risorse.</span><span class="sxs-lookup"><span data-stu-id="118e9-137">Call the [**WerReportCloseHandle**](/windows/desktop/api/Werapi/nf-werapi-werreportclosehandle) to free resources.</span></span>
3.  <span data-ttu-id="118e9-138">A seconda delle opzioni specifiche utilizzate quando si chiamano le funzioni nel passaggio 2, WER completerà la segnalazione degli errori.</span><span class="sxs-lookup"><span data-stu-id="118e9-138">Depending on the specific options used when calling the functions in step 2, WER will finish the error reporting.</span></span> <span data-ttu-id="118e9-139">WER garantisce che la creazione di report venga eseguita in base ai criteri impostati dall'utente.</span><span class="sxs-lookup"><span data-stu-id="118e9-139">WER will ensure that the reporting is done in accordance with the policies set by the user.</span></span> <span data-ttu-id="118e9-140">Ad esempio, WER invierà il report a Microsoft, Accoda il report e visualizzerà le interfacce utente appropriate per l'utente.</span><span class="sxs-lookup"><span data-stu-id="118e9-140">For example, WER will send the report to Microsoft, queue the report, and show the appropriate user interfaces to the user.</span></span>

## <a name="excluding-an-application-from-windows-error-reporting"></a><span data-ttu-id="118e9-141">Esclusione di un'applicazione da Segnalazione errori Windows</span><span class="sxs-lookup"><span data-stu-id="118e9-141">Excluding an application from Windows Error Reporting</span></span>

<span data-ttu-id="118e9-142">Per escludere l'applicazione da segnalazione errori Windows, utilizzare la funzione [**WerAddExcludedApplication**](/windows/desktop/api/Werapi/nf-werapi-weraddexcludedapplication) .</span><span class="sxs-lookup"><span data-stu-id="118e9-142">To exclude your application from Windows error reporting, use the [**WerAddExcludedApplication**](/windows/desktop/api/Werapi/nf-werapi-weraddexcludedapplication) function.</span></span> <span data-ttu-id="118e9-143">Per ripristinare la segnalazione degli errori per l'applicazione, utilizzare la funzione [**WerRemoveExcludedApplication**](/windows/desktop/api/Werapi/nf-werapi-werremoveexcludedapplication) .</span><span class="sxs-lookup"><span data-stu-id="118e9-143">To restore error reporting for your application, use the [**WerRemoveExcludedApplication**](/windows/desktop/api/Werapi/nf-werapi-werremoveexcludedapplication) function.</span></span>

## <a name="automatically-recovering-data-and-restarting-a-faulted-application"></a><span data-ttu-id="118e9-144">Ripristino automatico dei dati e riavvio di un'applicazione con errori</span><span class="sxs-lookup"><span data-stu-id="118e9-144">Automatically recovering data and restarting a faulted application</span></span>

<span data-ttu-id="118e9-145">Un'applicazione può usare il ripristino e il riavvio dell'applicazione per salvare i dati e le informazioni sullo stato prima che l'applicazione venga chiusa a causa di un'eccezione non gestita o quando l'applicazione smette di rispondere.</span><span class="sxs-lookup"><span data-stu-id="118e9-145">An application can use Application Recovery and Restart to save data and state information before the application exits due to an unhandled exception or when the application stops responding.</span></span> <span data-ttu-id="118e9-146">Se richiesto, viene riavviata anche l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="118e9-146">The application is also restarted, if requested.</span></span> <span data-ttu-id="118e9-147">Per informazioni dettagliate, vedere [ripristino dell'applicazione e riavvio](/windows/desktop/Recovery/application-recovery-and-restart-portal).</span><span class="sxs-lookup"><span data-stu-id="118e9-147">For details, see [Application Recovery and Restart](/windows/desktop/Recovery/application-recovery-and-restart-portal).</span></span>

## <a name="legacy-api"></a><span data-ttu-id="118e9-148">API legacy</span><span class="sxs-lookup"><span data-stu-id="118e9-148">Legacy API</span></span>

<span data-ttu-id="118e9-149">Un'applicazione può segnalare un errore chiamando la funzione [**ReportFault**](/windows/desktop/api/ErrorRep/nf-errorrep-reportfault) .</span><span class="sxs-lookup"><span data-stu-id="118e9-149">An application can report a fault by calling the [**ReportFault**](/windows/desktop/api/ErrorRep/nf-errorrep-reportfault) function.</span></span> <span data-ttu-id="118e9-150">Tuttavia, non è consigliabile usare la funzione **ReportFault** , a meno che non si disponga di un requisito molto specifico che il comportamento predefinito di segnalazione errori del sistema operativo non possa essere completato.</span><span class="sxs-lookup"><span data-stu-id="118e9-150">However, you should not use the **ReportFault** function unless you have a very specific requirement that the operating system's default error reporting behavior cannot fulfill.</span></span>

<span data-ttu-id="118e9-151">Se la segnalazione errori è abilitata, viene visualizzata una finestra di dialogo che indica che l'applicazione ha riscontrato un problema e si chiuderà.</span><span class="sxs-lookup"><span data-stu-id="118e9-151">If error reporting is enabled, the system displays a dialog box to the user indicating that the application has encountered a problem and will close.</span></span> <span data-ttu-id="118e9-152">Se è presente un debugger configurato nella **HKEY della \_ chiave \_ \\ \\ Microsoft \\ Windows NT \\ CurrentVersion \\ AeDebug del software del computer locale** , all'utente viene assegnata l'opzione per avviare il debugger.</span><span class="sxs-lookup"><span data-stu-id="118e9-152">If there is a debugger configured in the **HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\AeDebug** key, the user is given the option to launch the debugger.</span></span> <span data-ttu-id="118e9-153">All'utente viene inoltre offerta la possibilità di inviare un report a Microsoft.</span><span class="sxs-lookup"><span data-stu-id="118e9-153">The user is also given the option to send a report to Microsoft.</span></span> <span data-ttu-id="118e9-154">Se l'utente invia il report, viene visualizzata un'altra finestra di dialogo che ringrazia l'utente per il report e fornisce un collegamento a ulteriori informazioni.</span><span class="sxs-lookup"><span data-stu-id="118e9-154">If the user sends the report, the system displays another dialog box thanking the user for the report and providing a link to more information.</span></span>

<span data-ttu-id="118e9-155">Il sistema di segnalazione degli errori supporta le modalità operative seguenti.</span><span class="sxs-lookup"><span data-stu-id="118e9-155">The error reporting system supports the following operation modes.</span></span>



| <span data-ttu-id="118e9-156">Modalità operativa</span><span class="sxs-lookup"><span data-stu-id="118e9-156">Operation mode</span></span>          | <span data-ttu-id="118e9-157">Descrizione</span><span class="sxs-lookup"><span data-stu-id="118e9-157">Description</span></span>                                                                                                                                                                                                                                                                                                                                  |
|-------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="118e9-158">Segnalazione memoria condivisa</span><span class="sxs-lookup"><span data-stu-id="118e9-158">Shared memory reporting</span></span> | <span data-ttu-id="118e9-159">Se il contesto di sicurezza dell'applicazione è lo stesso del contesto di sicurezza dell'utente connesso, il sistema di segnalazione degli errori utilizza un blocco di memoria condivisa per la comunicazione.</span><span class="sxs-lookup"><span data-stu-id="118e9-159">If the application's security context is the same as the security context of the logged-on user, the error reporting system uses a block of shared memory for communication.</span></span> <span data-ttu-id="118e9-160">Questa modalità non può essere utilizzata con la modalità di creazione rapporti manifesto.</span><span class="sxs-lookup"><span data-stu-id="118e9-160">This mode cannot be used with manifest reporting mode.</span></span><br/>                                                                                               |
| <span data-ttu-id="118e9-161">Creazione di report manifesto</span><span class="sxs-lookup"><span data-stu-id="118e9-161">Manifest reporting</span></span>      | <span data-ttu-id="118e9-162">Se il contesto di sicurezza dell'applicazione non corrisponde al contesto di sicurezza dell'utente connesso, il sistema di segnalazione degli errori utilizza un file per la comunicazione.</span><span class="sxs-lookup"><span data-stu-id="118e9-162">If the application's security context is not the same as the security context of the logged-on user, the error reporting system uses a file for communication.</span></span> <span data-ttu-id="118e9-163">Questa modalità viene usata anche per segnalare le applicazioni che non rispondono e gli errori del kernel.</span><span class="sxs-lookup"><span data-stu-id="118e9-163">This mode is also used for reporting unresponsive applications and kernel faults.</span></span> <span data-ttu-id="118e9-164">Questa modalità non può essere utilizzata con la modalità di segnalazione memoria condivisa.</span><span class="sxs-lookup"><span data-stu-id="118e9-164">This mode cannot be used with shared memory reporting mode.</span></span><br/>                      |
| <span data-ttu-id="118e9-165">Segnalazione Internet</span><span class="sxs-lookup"><span data-stu-id="118e9-165">Internet reporting</span></span>      | <span data-ttu-id="118e9-166">Il sistema di segnalazione degli errori invia tutti i dati a Microsoft attraverso Internet.</span><span class="sxs-lookup"><span data-stu-id="118e9-166">The error reporting system sends all data to Microsoft through the Internet.</span></span> <span data-ttu-id="118e9-167">Questa è la modalità operativa predefinita.</span><span class="sxs-lookup"><span data-stu-id="118e9-167">This is the default mode of operation.</span></span> <span data-ttu-id="118e9-168">Non può essere utilizzato con la modalità di creazione di report aziendale.</span><span class="sxs-lookup"><span data-stu-id="118e9-168">It cannot be used with corporate reporting mode.</span></span> <span data-ttu-id="118e9-169">Questa modalità viene usata in assenza di un percorso di caricamento aziendale specificato dall'amministratore.</span><span class="sxs-lookup"><span data-stu-id="118e9-169">This mode is used when there is no corporate upload path specified by the administrator.</span></span><br/>                                                                     |
| <span data-ttu-id="118e9-170">Creazione di report aziendali</span><span class="sxs-lookup"><span data-stu-id="118e9-170">Corporate reporting</span></span>     | <span data-ttu-id="118e9-171">Il sistema di segnalazione degli errori invia tutti i dati a una condivisione file anziché caricarli direttamente in Microsoft.</span><span class="sxs-lookup"><span data-stu-id="118e9-171">The error reporting system sends all data to a file share instead of uploading it directly to Microsoft.</span></span> <span data-ttu-id="118e9-172">Ciò consente ai responsabili IT aziendali di esaminare i dati prima che vengano inviati a Microsoft.</span><span class="sxs-lookup"><span data-stu-id="118e9-172">This allows corporate IT managers to review data before it is sent to Microsoft.</span></span> <span data-ttu-id="118e9-173">Questa modalità viene usata quando è presente un percorso di caricamento aziendale specificato dall'amministratore.</span><span class="sxs-lookup"><span data-stu-id="118e9-173">This mode is used when there is a corporate upload path specified by the administrator.</span></span> <span data-ttu-id="118e9-174">Non può essere utilizzato con la modalità di segnalazione Internet.</span><span class="sxs-lookup"><span data-stu-id="118e9-174">It cannot be used with Internet reporting mode.</span></span><br/> |
| <span data-ttu-id="118e9-175">Creazione di report</span><span class="sxs-lookup"><span data-stu-id="118e9-175">Headless reporting</span></span>      | <span data-ttu-id="118e9-176">Nel sistema di segnalazione degli errori non verrà visualizzata alcuna finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="118e9-176">The error reporting system will not display any dialog boxes to the user.</span></span> <span data-ttu-id="118e9-177">Ciò consente ai responsabili IT aziendali di raccogliere in qualsiasi momento le segnalazioni degli errori dai propri dipendenti.</span><span class="sxs-lookup"><span data-stu-id="118e9-177">This allows corporate IT managers to collect error reports from their employees at all times.</span></span> <span data-ttu-id="118e9-178">Questa modalità viene utilizzata quando la creazione di report viene abilitata dall'amministratore, ma la notifica è disabilitata.</span><span class="sxs-lookup"><span data-stu-id="118e9-178">This mode is used when reporting is enabled by the administrator, but notification is disabled.</span></span> <span data-ttu-id="118e9-179">Può essere usato solo con la modalità di creazione di report aziendale.</span><span class="sxs-lookup"><span data-stu-id="118e9-179">It can be used only with corporate reporting mode.</span></span><br/>        |



 

<span data-ttu-id="118e9-180">Per escludere l'applicazione dalla segnalazione errori, usare la funzione [**AddERExcludedApplication**](/windows/desktop/api/ErrorRep/nf-errorrep-adderexcludedapplicationa) .</span><span class="sxs-lookup"><span data-stu-id="118e9-180">To exclude your application from error reporting, use the [**AddERExcludedApplication**](/windows/desktop/api/ErrorRep/nf-errorrep-adderexcludedapplicationa) function.</span></span>

 

