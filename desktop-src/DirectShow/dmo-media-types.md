---
description: Tipi di supporto DMO
ms.assetid: 40958e12-09c7-4ce5-aa4d-5ed8b1f40aa3
title: Tipi di supporto DMO
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1997abb1cc3c8eb10301778982ef7a46690855ed
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/03/2021
ms.locfileid: "104530552"
---
# <a name="dmo-media-types"></a><span data-ttu-id="0a734-103">Tipi di supporto DMO</span><span class="sxs-lookup"><span data-stu-id="0a734-103">DMO Media Types</span></span>

<span data-ttu-id="0a734-104">Un tipo di supporto descrive il formato associato a un flusso di dati multimediali.</span><span class="sxs-lookup"><span data-stu-id="0a734-104">A media type describes the format associated with a stream of media data.</span></span> <span data-ttu-id="0a734-105">Questo articolo descrive il modo in cui DMOs gestisce i tipi di supporto.</span><span class="sxs-lookup"><span data-stu-id="0a734-105">This article describes how DMOs handle media types.</span></span> <span data-ttu-id="0a734-106">È destinato principalmente agli sviluppatori che scrivono un DMOs personalizzato.</span><span class="sxs-lookup"><span data-stu-id="0a734-106">It is primarily intended for developers who are writing their own custom DMOs.</span></span>

<span data-ttu-id="0a734-107">I tipi di supporto vengono definiti utilizzando la struttura del [**\_ \_ tipo di supporto DMO**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) .</span><span class="sxs-lookup"><span data-stu-id="0a734-107">Media types are defined using the [**DMO\_MEDIA\_TYPE**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) structure.</span></span> <span data-ttu-id="0a734-108">Questa struttura include le informazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="0a734-108">This structure includes the following information:</span></span>

-   <span data-ttu-id="0a734-109">Il *tipo principale* è un identificatore univoco globale (Guid) che definisce un'ampia categoria, ad esempio audio o video.</span><span class="sxs-lookup"><span data-stu-id="0a734-109">The *major type* is a globally unique identifier (GUID) that defines a broad category, such as audio or video.</span></span>
-   <span data-ttu-id="0a734-110">Il *sottotipo* è un GUID che definisce aspetti più specifici del tipo.</span><span class="sxs-lookup"><span data-stu-id="0a734-110">The *subtype* is a GUID that defines more specific aspects of the type.</span></span> <span data-ttu-id="0a734-111">Ad esempio, all'interno di video, i sottotipi includono RGB a 16 bit, RGB a 24 bit, UYVY, video con codifica DV e così via.</span><span class="sxs-lookup"><span data-stu-id="0a734-111">For example, within video, the subtypes include 16-bit RGB, 24-bit RGB, UYVY, DV-encoded video, and so forth.</span></span>
-   <span data-ttu-id="0a734-112">Il *blocco di formato* è una struttura secondaria che specifica completamente il formato.</span><span class="sxs-lookup"><span data-stu-id="0a734-112">The *format block* is a secondary structure that fully specifies the format.</span></span> <span data-ttu-id="0a734-113">Il layout del blocco di formato dipende dal tipo di dati.</span><span class="sxs-lookup"><span data-stu-id="0a734-113">The layout of the format block depends on the type of data.</span></span> <span data-ttu-id="0a734-114">Ad esempio, l'audio PCM usa la struttura **WAVEFORMATEX** .</span><span class="sxs-lookup"><span data-stu-id="0a734-114">For example, PCM audio uses the **WAVEFORMATEX** structure.</span></span> <span data-ttu-id="0a734-115">Il video usa diverse altre strutture, tra cui **VIDEOINFOHEADER** e **VIDEOINFOHEADER2**.</span><span class="sxs-lookup"><span data-stu-id="0a734-115">Video uses various other structures, including **VIDEOINFOHEADER** and **VIDEOINFOHEADER2**.</span></span> <span data-ttu-id="0a734-116">Il layout del blocco di formato è identificato da un GUID di tipo di formato.</span><span class="sxs-lookup"><span data-stu-id="0a734-116">The layout of the format block is identified by a format type GUID.</span></span> <span data-ttu-id="0a734-117">Ad esempio, FORMAT \_ WAVEFORMATEX specifica una struttura **WAVEFORMATEX** .</span><span class="sxs-lookup"><span data-stu-id="0a734-117">For example, FORMAT\_WaveFormatEx specifies a **WAVEFORMATEX** structure.</span></span>

<span data-ttu-id="0a734-118">Quando un DMO viene creato per la prima volta, i flussi non hanno un tipo di supporto.</span><span class="sxs-lookup"><span data-stu-id="0a734-118">When a DMO is first created, the streams do not have a media type.</span></span> <span data-ttu-id="0a734-119">Prima che DMO possa elaborare i dati, il client deve impostare un tipo di supporto per ogni flusso.</span><span class="sxs-lookup"><span data-stu-id="0a734-119">Before the DMO can process any data, the client must set a media type for each stream.</span></span> <span data-ttu-id="0a734-120">Questo processo viene descritto dal punto di vista del client nell' [impostazione dei tipi di supporto in un DMO](setting-media-types-on-a-dmo.md).</span><span class="sxs-lookup"><span data-stu-id="0a734-120">This process is described from the client's perspective in [Setting Media Types on a DMO](setting-media-types-on-a-dmo.md).</span></span>

<span data-ttu-id="0a734-121">**Tipi di supporto nel registro di sistema**</span><span class="sxs-lookup"><span data-stu-id="0a734-121">**Media Types in the Registry**</span></span>

<span data-ttu-id="0a734-122">Un DMO può aggiungere un elenco di tipi di supporti che supporta al registro di sistema, chiamando la funzione [**DMORegister**](/previous-versions/windows/desktop/api/Dmoreg/nf-dmoreg-dmoregister) .</span><span class="sxs-lookup"><span data-stu-id="0a734-122">A DMO can add a list of media types that it supports to the registry, by calling the [**DMORegister**](/previous-versions/windows/desktop/api/Dmoreg/nf-dmoreg-dmoregister) function.</span></span> <span data-ttu-id="0a734-123">Un'applicazione può usare queste informazioni per cercare DMOs che corrispondano a un particolare formato.</span><span class="sxs-lookup"><span data-stu-id="0a734-123">An application can use this information to search for DMOs that match a particular format.</span></span> <span data-ttu-id="0a734-124">Le informazioni nel registro di sistema non sono destinate a essere complete.</span><span class="sxs-lookup"><span data-stu-id="0a734-124">The information in the registry is not meant to be comprehensive.</span></span> <span data-ttu-id="0a734-125">In genere, si includono solo i tipi principali supportati da DMO.</span><span class="sxs-lookup"><span data-stu-id="0a734-125">Typically, you would include only the main types that the DMO supports.</span></span> <span data-ttu-id="0a734-126">La voce del registro di sistema ha chiavi separate per i tipi di input e di output, ma non distingue tra i singoli flussi.</span><span class="sxs-lookup"><span data-stu-id="0a734-126">The registry entry has separate keys for input and output types, but does not distinguish among individual streams.</span></span>

<span data-ttu-id="0a734-127">La funzione **DMORegister** usa la [**struttura \_ \_ MEDIATYPE parziale DMO**](/previous-versions/windows/desktop/api/Dmoreg/ns-dmoreg-dmo_partial_mediatype) per descrivere i tipi di supporto.</span><span class="sxs-lookup"><span data-stu-id="0a734-127">The **DMORegister** function uses the [**DMO\_PARTIAL\_MEDIATYPE**](/previous-versions/windows/desktop/api/Dmoreg/ns-dmoreg-dmo_partial_mediatype) structure to describe media types.</span></span> <span data-ttu-id="0a734-128">Questa struttura contiene un subset delle informazioni disponibili nella struttura del **\_ \_ tipo di supporto DMO** , ovvero il tipo principale e il sottotipo.</span><span class="sxs-lookup"><span data-stu-id="0a734-128">This structure contains a subset of the information found in the **DMO\_MEDIA\_TYPE** structure—namely the major type and the subtype.</span></span> <span data-ttu-id="0a734-129">Non include un blocco di formato perché il blocco di formato contiene in genere informazioni troppo granulari da includere nel registro di sistema, ad esempio l'altezza e la larghezza di un'immagine video.</span><span class="sxs-lookup"><span data-stu-id="0a734-129">It does not include a format block, because the format block typically contains information that is too granular to include in the registry, such as the height and width of a video image.</span></span>

<span data-ttu-id="0a734-130">**Tipi di supporti preferiti**</span><span class="sxs-lookup"><span data-stu-id="0a734-130">**Preferred Media Types**</span></span>

<span data-ttu-id="0a734-131">Dopo che l'applicazione ha creato un DMO, può eseguire una query su DMO per i tipi di supporto supportati.</span><span class="sxs-lookup"><span data-stu-id="0a734-131">After the application has created a DMO, it can query the DMO for the media types it supports.</span></span> <span data-ttu-id="0a734-132">Per ogni flusso, DMO crea un elenco di tipi di supporti (possibilmente vuoti), classificati in ordine di preferenza.</span><span class="sxs-lookup"><span data-stu-id="0a734-132">For each stream, the DMO creates a list of media types (possibly empty), ranked in order of preference.</span></span> <span data-ttu-id="0a734-133">I metodi [**IMediaObject:: GetInputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getinputtype) e [**IMediaObject:: GetOutputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputtype) enumerano i tipi preferiti.</span><span class="sxs-lookup"><span data-stu-id="0a734-133">The [**IMediaObject::GetInputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getinputtype) and [**IMediaObject::GetOutputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputtype) methods enumerate the preferred types.</span></span> <span data-ttu-id="0a734-134">I tipi preferiti di un flusso possono cambiare in modo dinamico quando l'applicazione imposta i tipi di supporto su altri flussi.</span><span class="sxs-lookup"><span data-stu-id="0a734-134">A stream's preferred types can change dynamically when the application sets media types on other streams.</span></span> <span data-ttu-id="0a734-135">Ad esempio, l'elenco dei tipi di output preferiti può variare dopo l'impostazione del tipo di input o viceversa.</span><span class="sxs-lookup"><span data-stu-id="0a734-135">For example, the list of preferred output types might change after the input type is set, or vice versa.</span></span> <span data-ttu-id="0a734-136">Tuttavia, non è necessario che il DMO aggiorni i tipi preferiti in modo dinamico.</span><span class="sxs-lookup"><span data-stu-id="0a734-136">However, the DMO is not required to update its preferred types dynamically.</span></span> <span data-ttu-id="0a734-137">L'applicazione non può presumere che tutti i tipi ricevuti siano validi.</span><span class="sxs-lookup"><span data-stu-id="0a734-137">The application cannot assume that every type it receives is valid.</span></span> <span data-ttu-id="0a734-138">Per questo motivo, i metodi [**IMediaObject:: SetInputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-setinputtype) e [**IMediaObject:: SetOutputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-setoutputtype) supportano un flag per il test di un tipo specifico.</span><span class="sxs-lookup"><span data-stu-id="0a734-138">For this reason, the [**IMediaObject::SetInputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-setinputtype) and [**IMediaObject::SetOutputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-setoutputtype) methods support a flag for testing a specific type.</span></span>

<span data-ttu-id="0a734-139">I metodi **GetInputType** e **GetOutputType** restituiscono entrambi una struttura del **\_ \_ tipo di supporto DMO** .</span><span class="sxs-lookup"><span data-stu-id="0a734-139">The **GetInputType** and **GetOutputType** methods both return a **DMO\_MEDIA\_TYPE** structure.</span></span> <span data-ttu-id="0a734-140">DMO può lasciare vuote alcune informazioni in questa struttura per indicare un intervallo di tipi.</span><span class="sxs-lookup"><span data-stu-id="0a734-140">The DMO can leave some of the information in this structure blank, to indicate a range of types.</span></span> <span data-ttu-id="0a734-141">Il tipo o il sottotipo principale può essere \_ null GUID e il blocco di formato può essere vuoto (zero byte).</span><span class="sxs-lookup"><span data-stu-id="0a734-141">The major type or subtype can be GUID\_NULL, and the format block can be empty (zero bytes).</span></span> <span data-ttu-id="0a734-142">Se il blocco di formato è vuoto, il tipo di formato deve essere GUID \_ null.</span><span class="sxs-lookup"><span data-stu-id="0a734-142">If the format block is empty, the format type must be GUID\_NULL.</span></span>

<span data-ttu-id="0a734-143">Dopo che l'applicazione ha impostato tutti i tipi di input DMO, in genere DMO deve restituire almeno un tipo completo per ogni flusso di output.</span><span class="sxs-lookup"><span data-stu-id="0a734-143">After the application sets all of a DMO's input types, the DMO should generally return at least one complete type for each output stream.</span></span> <span data-ttu-id="0a734-144">Un tipo di output completo facilita i test e le applicazioni possono utilizzarlo come valore predefinito ragionevole.</span><span class="sxs-lookup"><span data-stu-id="0a734-144">A complete output type facilitates testing, and applications can use it as a reasonable default.</span></span> <span data-ttu-id="0a734-145">L'applicazione di test DMO si basa su questo comportamento.</span><span class="sxs-lookup"><span data-stu-id="0a734-145">The DMO test application relies on this behavior.</span></span> <span data-ttu-id="0a734-146">Vedere [utilizzo dell'applicazione DMOTest](using-the-dmotest-application.md).</span><span class="sxs-lookup"><span data-stu-id="0a734-146">(See [Using the DMOTest Application](using-the-dmotest-application.md).)</span></span>

<span data-ttu-id="0a734-147">**Impostazione dei tipi di supporto**</span><span class="sxs-lookup"><span data-stu-id="0a734-147">**Setting the Media Types**</span></span>

<span data-ttu-id="0a734-148">Le applicazioni utilizzano i metodi **SetInputType** e **SetOutputType** per testare, impostare o cancellare i tipi in un flusso specificato.</span><span class="sxs-lookup"><span data-stu-id="0a734-148">Applications use the **SetInputType** and **SetOutputType** methods to test, set, or clear types on a specified stream.</span></span> <span data-ttu-id="0a734-149">L'applicazione deve specificare completamente il tipo.</span><span class="sxs-lookup"><span data-stu-id="0a734-149">The application must fully specify the type.</span></span> <span data-ttu-id="0a734-150">DMO verifica se può accettare il tipo proposto.</span><span class="sxs-lookup"><span data-stu-id="0a734-150">The DMO verifies whether it can accept the proposed type.</span></span> <span data-ttu-id="0a734-151">La risposta può dipendere dai tipi impostati in altri flussi.</span><span class="sxs-lookup"><span data-stu-id="0a734-151">The answer may depend on which types have been set on other streams.</span></span> <span data-ttu-id="0a734-152">Il \_ flag DMO set \_ TYPEF \_ Clear cancella il tipo di un flusso, in modo che l'applicazione possa "tornare indietro" e provare un'altra combinazione.</span><span class="sxs-lookup"><span data-stu-id="0a734-152">The DMO\_SET\_TYPEF\_CLEAR flag clears a stream's type, so the application can "back out" and try another combination.</span></span>

<span data-ttu-id="0a734-153">**Scenari di esempio**</span><span class="sxs-lookup"><span data-stu-id="0a734-153">**Example Scenarios**</span></span>

<span data-ttu-id="0a734-154">Negli esempi seguenti vengono descritti alcuni scenari tipici, per illustrare i punti creati nelle sezioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="0a734-154">The following examples describe some typical scenarios, to illustrate the points made in the previous sections.</span></span>

-   <span data-ttu-id="0a734-155">**Decodificatori video.**</span><span class="sxs-lookup"><span data-stu-id="0a734-155">**Video Decoders.**</span></span> <span data-ttu-id="0a734-156">In un decodificatore video tipico, il tipo di input determina in parte il tipo di output.</span><span class="sxs-lookup"><span data-stu-id="0a734-156">In a typical video decoder, the input type partly determines the output type.</span></span> <span data-ttu-id="0a734-157">Ad esempio, in genere entrambi i flussi devono avere la stessa frequenza dei fotogrammi e le stesse dimensioni di immagine.</span><span class="sxs-lookup"><span data-stu-id="0a734-157">For example, usually both streams must have the same frame rate and image dimensions.</span></span> <span data-ttu-id="0a734-158">Una delle opzioni non è quella di definire i tipi di output preferiti fino a quando non viene impostato il tipo di input.</span><span class="sxs-lookup"><span data-stu-id="0a734-158">One option is not to define any preferred output types until the input type is set.</span></span> <span data-ttu-id="0a734-159">Un'altra opzione consiste nell'enumerare un set di tipi incompleti, omettendo il blocco di formato.</span><span class="sxs-lookup"><span data-stu-id="0a734-159">Another option is to enumerate a set of incomplete types, omitting the format block.</span></span> <span data-ttu-id="0a734-160">Usare il sottotipo per indicare i tipi non compressi supportati, ad esempio RGB a 16 bit, RGB a 24 bit e così via.</span><span class="sxs-lookup"><span data-stu-id="0a734-160">Use the subtype to indicate the supported uncompressed types, such as 16-bit RGB, 24-bit RGB, and so forth.</span></span> <span data-ttu-id="0a734-161">Inoltre, i decodificatori video in genere non supportano l'impostazione del tipo di output prima del tipo di input.</span><span class="sxs-lookup"><span data-stu-id="0a734-161">Also, video decoders generally do not support setting the output type before the input type.</span></span> <span data-ttu-id="0a734-162">Il solito scenario consiste nel decodificare da un formato di input noto, quindi questa limitazione è ragionevole.</span><span class="sxs-lookup"><span data-stu-id="0a734-162">The usual scenario is to decode from a known input format, so this limitation is reasonable.</span></span>
-   <span data-ttu-id="0a734-163">**Decodificatori audio.**</span><span class="sxs-lookup"><span data-stu-id="0a734-163">**Audio Decoders.**</span></span> <span data-ttu-id="0a734-164">Un decodificatore audio potrebbe supportare un set di formati di output fisso e limitato.</span><span class="sxs-lookup"><span data-stu-id="0a734-164">An audio decoder might support a limited, fixed set of output formats.</span></span> <span data-ttu-id="0a734-165">In tal caso, potrebbe essere in grado di creare un elenco di formati di output preferiti prima che il formato di input sia noto.</span><span class="sxs-lookup"><span data-stu-id="0a734-165">In that case, it may be able to create a list of preferred output formats before the input format is known.</span></span>
-   <span data-ttu-id="0a734-166">**Compressori.**</span><span class="sxs-lookup"><span data-stu-id="0a734-166">**Compressors.**</span></span> <span data-ttu-id="0a734-167">Nella maggior parte dei casi, un compressore video non può specificare completamente i formati di output preferiti fino a quando l'applicazione non imposta il formato di input e viceversa.</span><span class="sxs-lookup"><span data-stu-id="0a734-167">In most cases, a video compressor cannot fully specify its preferred output formats until the application sets the input format, and vice versa.</span></span> <span data-ttu-id="0a734-168">Al contrario, DMO deve restituire un tipo incompleto senza blocco di formato.</span><span class="sxs-lookup"><span data-stu-id="0a734-168">Instead, the DMO should return an incomplete type with no format block.</span></span> <span data-ttu-id="0a734-169">Per la compressione audio e video, in genere l'applicazione deve impostare diversi parametri di output, ad esempio la velocità in bit.</span><span class="sxs-lookup"><span data-stu-id="0a734-169">For both audio and video compression, the application usually needs to set various output parameters, such as the bit rate.</span></span> <span data-ttu-id="0a734-170">Tuttavia, dopo aver impostato il tipo di input, il compressore deve restituire almeno un tipo di output completo per i motivi citati in precedenza.</span><span class="sxs-lookup"><span data-stu-id="0a734-170">However, after the input type is set, the compressor should return at least one complete output type, for the reasons mentioned previously.</span></span>

## <a name="related-topics"></a><span data-ttu-id="0a734-171">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="0a734-171">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0a734-172">Scrittura di un DMO</span><span class="sxs-lookup"><span data-stu-id="0a734-172">Writing a DMO</span></span>](writing-a-dmo.md)
</dt> </dl>

 

 



