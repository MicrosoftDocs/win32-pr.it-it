---
description: Distributori di plug-in
ms.assetid: 80ff713d-f704-40d3-9317-cbf33d932207
title: Distributori di plug-in
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f7817e5e31b29444cc596b0be583be2198adc018
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "106303935"
---
# <a name="plug-in-distributors"></a><span data-ttu-id="05f18-103">Distributori di plug-in</span><span class="sxs-lookup"><span data-stu-id="05f18-103">Plug-in Distributors</span></span>

<span data-ttu-id="05f18-104">I distributori di plug-in (PID) rappresentano un modo per estendere la funzionalità di gestione del grafo dei filtri.</span><span class="sxs-lookup"><span data-stu-id="05f18-104">Plug-in distributors (PIDs) are a way to extend the functionality of the filter graph manager.</span></span> <span data-ttu-id="05f18-105">Un server di distribuzione plug-in è un oggetto COM che viene aggregato da gestione grafo del filtro in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="05f18-105">A plug-in distributor is a COM object that the filter graph manager aggregates at run time.</span></span> <span data-ttu-id="05f18-106">Le applicazioni ottengono l'accesso al PID tramite Filter Graph Manager.</span><span class="sxs-lookup"><span data-stu-id="05f18-106">Applications obtain access to the PID through the filter graph manager.</span></span>

<span data-ttu-id="05f18-107">Quando viene eseguita una query sul gestore del grafico di filtri per un'interfaccia non supportata, viene eseguita una ricerca nel registro di sistema di una chiave con il formato seguente:</span><span class="sxs-lookup"><span data-stu-id="05f18-107">When the filter graph manager is queried for an interface that it does not support, it searches the registry for a key with the following form:</span></span>


```C++
HKEY_CLASSES_ROOT\Interface\IID\Distributor
```



<span data-ttu-id="05f18-108">`IID` stringa che contiene l'identificatore di interfaccia.</span><span class="sxs-lookup"><span data-stu-id="05f18-108">`IID` is a string containing the interface identifier.</span></span> <span data-ttu-id="05f18-109">Se la voce del registro di sistema esiste, il valore della voce definisce l'identificatore di classe (CLSID) di un PID che supporta l'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="05f18-109">If the registry entry exists, the value of the entry defines the class identifier (CLSID) of a PID that supports the interface.</span></span> <span data-ttu-id="05f18-110">Filter Graph Manager aggrega il PID e restituisce un puntatore a interfaccia, che funge quindi da **IUnknown** esterno per il PID.</span><span class="sxs-lookup"><span data-stu-id="05f18-110">The filter graph manager aggregates the PID and returns an interface pointer, thereby acting as the outer **IUnknown** for the PID.</span></span> <span data-ttu-id="05f18-111">Quando l'applicazione chiama i metodi nell'interfaccia, li chiama effettivamente nel PID.</span><span class="sxs-lookup"><span data-stu-id="05f18-111">When the application calls methods on the interface, it is actually calling them on the PID.</span></span> <span data-ttu-id="05f18-112">Tuttavia, l'esistenza del PID è trasparente per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="05f18-112">However, the existence of the PID is transparent to the application.</span></span>

<span data-ttu-id="05f18-113">Il termine *server di distribuzione* deriva dal fatto che un PID può eseguire query sul puntatore **IUnknown** esterno per le interfacce in gestione grafico dei filtri.</span><span class="sxs-lookup"><span data-stu-id="05f18-113">The term *distributor* stems from the fact that a PID can query its outer **IUnknown** pointer for interfaces on the filter graph manager.</span></span> <span data-ttu-id="05f18-114">Chiamando il metodo [**IFilterGraph:: EnumFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-enumfilters) , il PID può enumerare i filtri nel grafico e distribuire le chiamate al metodo a tali filtri.</span><span class="sxs-lookup"><span data-stu-id="05f18-114">By calling the [**IFilterGraph::EnumFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-enumfilters) method, the PID can enumerate the filters in the graph and distribute method calls to those filters.</span></span> <span data-ttu-id="05f18-115">In questo modo, un PID può fungere da singolo punto di controllo per l'applicazione per chiamare i metodi sui filtri.</span><span class="sxs-lookup"><span data-stu-id="05f18-115">In this way, a PID can serve as a single control point for the application to call methods on filters.</span></span>

<span data-ttu-id="05f18-116">Quando il gestore del grafico del filtro aggrega un PID, esegue una query sul PID per l'interfaccia [**IDistributorNotify**](/windows/desktop/api/Strmif/nn-strmif-idistributornotify) .</span><span class="sxs-lookup"><span data-stu-id="05f18-116">When the filter graph manager aggregates a PID, it queries the PID for the [**IDistributorNotify**](/windows/desktop/api/Strmif/nn-strmif-idistributornotify) interface.</span></span> <span data-ttu-id="05f18-117">Se il PID supporta questa interfaccia, il gestore del grafo del filtro lo utilizza per notificare al PID le modifiche apportate al grafo:</span><span class="sxs-lookup"><span data-stu-id="05f18-117">If the PID supports this interface, the filter graph manager uses it to notify the PID about changes in the graph:</span></span>

-   <span data-ttu-id="05f18-118">Quando il grafico di filtro passa tra gli Stati Run, Paused e Stopped, viene chiamato [**IDistributorNotify:: Run**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-run), [**IDistributorNotify::P ause**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-pause)o [**IDistributorNotify:: Stop**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-stop).</span><span class="sxs-lookup"><span data-stu-id="05f18-118">When the filter graph switches between run, paused, and stopped states, it calls [**IDistributorNotify::Run**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-run), [**IDistributorNotify::Pause**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-pause), or [**IDistributorNotify::Stop**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-stop).</span></span>
-   <span data-ttu-id="05f18-119">Quando viene impostato un clock di riferimento, il gestore del grafo dei filtri chiama [**IDistributorNotify:: SetSyncSource**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-setsyncsource).</span><span class="sxs-lookup"><span data-stu-id="05f18-119">When a reference clock is set, the filter graph manager calls [**IDistributorNotify::SetSyncSource**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-setsyncsource).</span></span>
-   <span data-ttu-id="05f18-120">Quando si aggiungono o rimuovono i filtri o si modificano le connessioni pin, il gestore del grafo dei filtri chiama [**IDistributorNotify:: NotifyGraphChange**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-notifygraphchange).</span><span class="sxs-lookup"><span data-stu-id="05f18-120">When filters are added or removed, or pin connections are changed, the filter graph manager calls [**IDistributorNotify::NotifyGraphChange**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-notifygraphchange).</span></span>

<span data-ttu-id="05f18-121">Per implementare un PID personalizzato, creare un oggetto COM che supporta l'aggregazione.</span><span class="sxs-lookup"><span data-stu-id="05f18-121">To implement a custom PID, create a COM object that supports aggregation.</span></span> <span data-ttu-id="05f18-122">Deve supportare un'interfaccia che non è ancora supportata da gestione grafo del filtro.</span><span class="sxs-lookup"><span data-stu-id="05f18-122">It must support an interface that the filter graph manager does not already support.</span></span> <span data-ttu-id="05f18-123">Facoltativamente, può supportare l'interfaccia **IDistributorNotify** .</span><span class="sxs-lookup"><span data-stu-id="05f18-123">Optionally, it can support the **IDistributorNotify** interface.</span></span>

<span data-ttu-id="05f18-124">Se il PID ottiene tutti i puntatori di interfaccia dal gestore del grafico dei filtri, dovrebbe rilasciarli immediatamente.</span><span class="sxs-lookup"><span data-stu-id="05f18-124">If the PID obtains any interface pointers from the filter graph manager, it should release them immediately.</span></span> <span data-ttu-id="05f18-125">In caso contrario, potrebbe creare un conteggio dei riferimenti circolari, che potrebbe impedire l'eliminazione definitiva del gestore del grafico del filtro.</span><span class="sxs-lookup"><span data-stu-id="05f18-125">Otherwise, it might create a circular reference count, which could prevent the filter graph manager from being destroyed.</span></span> <span data-ttu-id="05f18-126">Il mantenimento di un conteggio dei riferimenti in gestione grafico dei filtri non è necessario in alcun caso, perché il gestore del grafico dei filtri controlla la durata del PID.</span><span class="sxs-lookup"><span data-stu-id="05f18-126">Holding a reference count on the filter graph manager is unnecessary in any case, because the filter graph manager controls the PID's lifetime.</span></span>

<span data-ttu-id="05f18-127">Poiché un PID è progettato specificamente per l'aggregazione da parte del gestore del grafo del filtro, è possibile applicare questa operazione nel metodo del costruttore del PID.</span><span class="sxs-lookup"><span data-stu-id="05f18-127">Because a PID is designed specifically for aggregation by the filter graph manager, you might want to enforce this in the PID's constructor method.</span></span> <span data-ttu-id="05f18-128">Controllare se il puntatore **IUnknown** esterno è **null** e, in caso affermativo, restituire il codice di errore VFW \_ E \_ need \_ owner.</span><span class="sxs-lookup"><span data-stu-id="05f18-128">Check whether the outer **IUnknown** pointer is **NULL**, and if so, return the error code VFW\_E\_NEED\_OWNER.</span></span> <span data-ttu-id="05f18-129">Vedere [codici di errore e di esito positivo](error-and-success-codes.md). Per impedire ad altri oggetti di aggregare il PID, è inoltre possibile eseguire una query sul puntatore **IUnknown** esterno per l'interfaccia [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) .</span><span class="sxs-lookup"><span data-stu-id="05f18-129">(See [Error and Success Codes](error-and-success-codes.md).) Also, to prevent other objects from aggregating the PID, you can query the outer **IUnknown** pointer for the [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) interface.</span></span> <span data-ttu-id="05f18-130">Restituisce un codice di errore se l'oggetto non espone **IGraphBuilder**.</span><span class="sxs-lookup"><span data-stu-id="05f18-130">Return an error code if the object does not expose **IGraphBuilder**.</span></span>

 

 



