---
description: Catene di filtri
ms.assetid: c17b3b58-65ab-4e83-91f2-54a995f22ddf
title: Catene di filtri
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d22ee33f7bc24495bc5099d0abeca7b8c70bc6d4
ms.sourcegitcommit: 63753fcfb0afbbe5ec283fb8316e62c2dc950f66
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/22/2021
ms.locfileid: "107909059"
---
# <a name="filter-chains"></a><span data-ttu-id="b663c-103">Catene di filtri</span><span class="sxs-lookup"><span data-stu-id="b663c-103">Filter Chains</span></span>

<span data-ttu-id="b663c-104">Una *catena di* filtri è una sequenza di filtri che soddisfa le condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="b663c-104">A *filter chain* is a sequence of filters that meets the following conditions:</span></span>

-   <span data-ttu-id="b663c-105">Ogni filtro nella catena ha al massimo un pin di input connesso e un pin di output connesso.</span><span class="sxs-lookup"><span data-stu-id="b663c-105">Each filter in the chain has at most one connected input pin and one connected output pin.</span></span>
-   <span data-ttu-id="b663c-106">È possibile attraversare ogni filtro nella catena senza attraversare i filtri all'esterno della catena.</span><span class="sxs-lookup"><span data-stu-id="b663c-106">It is possible to traverse every filter in the chain without traversing filters outside the chain.</span></span>

<span data-ttu-id="b663c-107">Nel diagramma seguente, ad esempio, i filtri A-B, C-D e F-G-H sono catene di filtri.</span><span class="sxs-lookup"><span data-stu-id="b663c-107">For example, in the following diagram, filters A–B, C–D, and F–G–H are filter chains.</span></span> <span data-ttu-id="b663c-108">Ogni subchain in F-G-H (F-G e G-H) è anche una catena di filtri.</span><span class="sxs-lookup"><span data-stu-id="b663c-108">Each subchain in F–G–H (F–G and G–H) is also a filter chain.</span></span> <span data-ttu-id="b663c-109">Una catena di filtri può essere costituita da un singolo filtro, quindi anche i filtri A, B, C, D, F, G e H sono catene di filtri distinte.</span><span class="sxs-lookup"><span data-stu-id="b663c-109">A filter chain can consist of a single filter, so filters A, B, C, D, F, G, and H are also distinct filter chains.</span></span> <span data-ttu-id="b663c-110">Il filtro E ha due connessioni di input, quindi qualsiasi sequenza di filtri che include il filtro E non è una catena di filtri.</span><span class="sxs-lookup"><span data-stu-id="b663c-110">Filter E has two input connections, so any sequence of filters that includes filter E is not a filter chain.</span></span>

![catena di filtri (esempio 1)](images/filter-chain1.png)

<span data-ttu-id="b663c-112">[**L'interfaccia IFilterChain**](/windows/desktop/api/Strmif/nn-strmif-ifilterchain) fornisce i metodi seguenti per controllare le catene di filtri:</span><span class="sxs-lookup"><span data-stu-id="b663c-112">The [**IFilterChain**](/windows/desktop/api/Strmif/nn-strmif-ifilterchain) interface provides the following methods for controlling filter chains:</span></span>



| <span data-ttu-id="b663c-113">Label</span><span class="sxs-lookup"><span data-stu-id="b663c-113">Label</span></span> | <span data-ttu-id="b663c-114">Valore</span><span class="sxs-lookup"><span data-stu-id="b663c-114">Value</span></span> |
|---------------------------------------------------------------|---------------------------------|
| [<span data-ttu-id="b663c-115">**IFilterChain::StartChain**</span><span class="sxs-lookup"><span data-stu-id="b663c-115">**IFilterChain::StartChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-startchain)   | <span data-ttu-id="b663c-116">Avvia una catena.</span><span class="sxs-lookup"><span data-stu-id="b663c-116">Starts a chain.</span></span>                 |
| [<span data-ttu-id="b663c-117">**IFilterChain::StopChain**</span><span class="sxs-lookup"><span data-stu-id="b663c-117">**IFilterChain::StopChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-stopchain)     | <span data-ttu-id="b663c-118">Arresta una catena.</span><span class="sxs-lookup"><span data-stu-id="b663c-118">Stops a chain.</span></span>                  |
| [<span data-ttu-id="b663c-119">**IFilterChain::P auseChain**</span><span class="sxs-lookup"><span data-stu-id="b663c-119">**IFilterChain::PauseChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-pausechain)   | <span data-ttu-id="b663c-120">Sospende una catena.</span><span class="sxs-lookup"><span data-stu-id="b663c-120">Pauses a chain.</span></span>                 |
| [<span data-ttu-id="b663c-121">**IFilterChain::RemoveChain**</span><span class="sxs-lookup"><span data-stu-id="b663c-121">**IFilterChain::RemoveChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-removechain) | <span data-ttu-id="b663c-122">Rimuove una catena dal grafico.</span><span class="sxs-lookup"><span data-stu-id="b663c-122">Removes a chain from the graph.</span></span> |



 

<span data-ttu-id="b663c-123">Non esiste alcun metodo specifico per l'aggiunta di una catena.</span><span class="sxs-lookup"><span data-stu-id="b663c-123">There is no specific method for adding a chain.</span></span> <span data-ttu-id="b663c-124">Per aggiungere una catena, inserire i nuovi filtri usando il [**metodo IFilterGraph::AddFilter.**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-addfilter)</span><span class="sxs-lookup"><span data-stu-id="b663c-124">To add a chain, insert the new filters using the [**IFilterGraph::AddFilter**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-addfilter) method.</span></span> <span data-ttu-id="b663c-125">Connettere quindi i filtri chiamando [**IGraphBuilder::Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect), [**IGraphBuilder::Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render)o metodi simili.</span><span class="sxs-lookup"><span data-stu-id="b663c-125">Then connect the filters by calling [**IGraphBuilder::Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect), [**IGraphBuilder::Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render), or similar methods.</span></span>

<span data-ttu-id="b663c-126">Quando il grafico è in esecuzione, una catena di filtri può passare dall'esecuzione all'arresto.</span><span class="sxs-lookup"><span data-stu-id="b663c-126">When the graph is running, a filter chain can switch between running and stopped.</span></span> <span data-ttu-id="b663c-127">Quando il grafico viene sospeso, può passare da sospeso a arrestato.</span><span class="sxs-lookup"><span data-stu-id="b663c-127">When the graph is paused, it can switch between paused and stopped.</span></span> <span data-ttu-id="b663c-128">Queste sono le uniche transizioni di stato possibili con le catene di filtri.</span><span class="sxs-lookup"><span data-stu-id="b663c-128">These are the only state transitions possible with filter chains.</span></span>

## <a name="filter-chain-guidelines"></a><span data-ttu-id="b663c-129">Linee guida per la catena di filtri</span><span class="sxs-lookup"><span data-stu-id="b663c-129">Filter Chain Guidelines</span></span>

<span data-ttu-id="b663c-130">Quando si usano **i metodi IFilterChain,** è importante assicurarsi che i filtri nel grafico supportino le operazioni di concatenamento dei filtri.</span><span class="sxs-lookup"><span data-stu-id="b663c-130">When you use **IFilterChain** methods, it is important to make sure that the filters in the graph can support filter chaining operations.</span></span> <span data-ttu-id="b663c-131">In caso contrario, potrebbero verificarsi deadlock o errori del grafo.</span><span class="sxs-lookup"><span data-stu-id="b663c-131">Otherwise, you might cause deadlocks or graph errors.</span></span> <span data-ttu-id="b663c-132">I filtri connessi alla catena devono funzionare correttamente dopo la modifica dello stato della catena.</span><span class="sxs-lookup"><span data-stu-id="b663c-132">Filters connected to the chain must function correctly after the chain changes state.</span></span>

<span data-ttu-id="b663c-133">Il modo migliore per usare **IFilterChain** è con un set di filtri progettato specificamente per il concatenamento.</span><span class="sxs-lookup"><span data-stu-id="b663c-133">The best way to use **IFilterChain** is with a set of filters that you have designed specifically for chaining.</span></span> <span data-ttu-id="b663c-134">Usare le linee guida seguenti per assicurarsi che i filtri siano sicuri per le operazioni della catena di filtri.</span><span class="sxs-lookup"><span data-stu-id="b663c-134">Use the following guidelines to ensure that your filters are safe for filter chain operations.</span></span> <span data-ttu-id="b663c-135">Questi punti fanno riferimento al diagramma seguente.</span><span class="sxs-lookup"><span data-stu-id="b663c-135">These points refer to the following diagram.</span></span>

![Catena di filtri (esempio 2)](images/filter-chain2.png)

-   <span data-ttu-id="b663c-137">Prima che lo stato della catena di filtri cambi, tutte le chiamate di elaborazione dati al limite della catena di filtri devono essere completate.</span><span class="sxs-lookup"><span data-stu-id="b663c-137">Before the filter chain's state changes, all data processing calls at the boundary of the filter chain must be completed.</span></span> <span data-ttu-id="b663c-138">Questa regola si applica ai [**metodi IMemInputPin::Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive), [**IPin::NewSegment**](/windows/desktop/api/Strmif/nf-strmif-ipin-newsegment)e [**IPin::EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream).</span><span class="sxs-lookup"><span data-stu-id="b663c-138">This rule applies to the methods [**IMemInputPin::Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive), [**IPin::NewSegment**](/windows/desktop/api/Strmif/nf-strmif-ipin-newsegment), and [**IPin::EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream).</span></span> <span data-ttu-id="b663c-139">I filtri nella catena devono restituire dalle chiamate a questi metodi effettuate dai filtri all'esterno della catena. e i filtri all'esterno della catena devono restituire dalle chiamate effettuate dai filtri all'interno della catena.</span><span class="sxs-lookup"><span data-stu-id="b663c-139">Filters in the chain must return from calls to these methods made by filters outside the chain; and filters outside the chain must return from calls made by filters within the chain.</span></span>

<span data-ttu-id="b663c-140">Ad esempio, nel diagramma precedente, il filtro B deve completare tutte le chiamate di elaborazione dati dal filtro A e filtrare E deve completare tutte le chiamate dal filtro D. Se i pin espongono le interfacce [**IPinFlowControl**](/windows/desktop/api/Strmif/nn-strmif-ipinflowcontrol) e [**IPinConnection,**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection) è possibile eseguire il push dei dati tramite il grafico chiamando i metodi [**IPinFlowControl::Block**](/windows/desktop/api/Strmif/nf-strmif-ipinflowcontrol-block) e [**IGraphConfig::P ushThroughData,**](/windows/desktop/api/Strmif/nf-strmif-igraphconfig-pushthroughdata) come descritto in [Riconnessione dinamica](dynamic-reconnection.md).</span><span class="sxs-lookup"><span data-stu-id="b663c-140">For example, in the previous diagram, filter B must complete any data processing calls from filter A, and filter E must finish any calls from filter D. If the pins expose the [**IPinFlowControl**](/windows/desktop/api/Strmif/nn-strmif-ipinflowcontrol) and [**IPinConnection**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection) interfaces, you can push the data through the graph by calling the [**IPinFlowControl::Block**](/windows/desktop/api/Strmif/nf-strmif-ipinflowcontrol-block) and [**IGraphConfig::PushThroughData**](/windows/desktop/api/Strmif/nf-strmif-igraphconfig-pushthroughdata) methods, as described in [Dynamic Reconnection](dynamic-reconnection.md).</span></span> <span data-ttu-id="b663c-141">I filtri possono anche supportare metodi privati per il push dei dati.</span><span class="sxs-lookup"><span data-stu-id="b663c-141">Filters might also support private methods for pushing the data.</span></span>

-   <span data-ttu-id="b663c-142">I filtri upstream devono prevedere la modifica dello stato della catena.</span><span class="sxs-lookup"><span data-stu-id="b663c-142">Upstream filters must expect the chain's state to change.</span></span> <span data-ttu-id="b663c-143">Ad esempio, nel diagramma precedente si supponga che la catena sia arrestata ma che il filtro A **chiami IMemInputPin::Receive**.</span><span class="sxs-lookup"><span data-stu-id="b663c-143">For example, in the previous diagram, suppose the chain is stopped but filter A calls **IMemInputPin::Receive**.</span></span> <span data-ttu-id="b663c-144">La chiamata non riesce e la risposta del filtro A è arrestare lo streaming.</span><span class="sxs-lookup"><span data-stu-id="b663c-144">The call fails and the response of filter A is to stop streaming.</span></span> <span data-ttu-id="b663c-145">Quando l'applicazione riavvia la catena, non ha alcun effetto perché il filtro A non esegue più lo streaming dei dati.</span><span class="sxs-lookup"><span data-stu-id="b663c-145">When the application restarts the chain, it has no effect because filter A is no longer streaming data.</span></span>
-   <span data-ttu-id="b663c-146">Anche i filtri downstream devono prevedere la modifica dello stato della catena.</span><span class="sxs-lookup"><span data-stu-id="b663c-146">Downstream filters must also expect the chain's state to change.</span></span> <span data-ttu-id="b663c-147">In caso contrario, il filtro downstream potrebbe bloccarsi durante l'attesa di campioni che non arrivano mai.</span><span class="sxs-lookup"><span data-stu-id="b663c-147">If not, the downstream filter might block while it waits for samples that never arrive.</span></span> <span data-ttu-id="b663c-148">Ad esempio, i filtri multiplexer (MUX) spesso richiedono dati da tutti i pin di input.</span><span class="sxs-lookup"><span data-stu-id="b663c-148">For example, multiplexer (MUX) filters often require data from all of their input pins.</span></span> <span data-ttu-id="b663c-149">L'interruzione del flusso di dati da un pin di input potrebbe impedire l'elaborazione degli altri flussi.</span><span class="sxs-lookup"><span data-stu-id="b663c-149">Halting the flow of data from one input pin might block the other streams from processing.</span></span> <span data-ttu-id="b663c-150">Ciò può causare un deadlock del grafo.</span><span class="sxs-lookup"><span data-stu-id="b663c-150">This can cause the graph to deadlock.</span></span>
-   <span data-ttu-id="b663c-151">Ogni connessione pin da un filtro esterno alla catena a un filtro all'interno della catena deve avere un proprio allocatore, che non è condiviso da altre connessioni.</span><span class="sxs-lookup"><span data-stu-id="b663c-151">Each pin connection from a filter outside the chain to a filter within the chain should have its own allocator, which is not shared by other connections.</span></span> <span data-ttu-id="b663c-152">Quando lo stato della catena cambia o viene rimosso dal grafico, l'allocatore potrebbe essere decommesso.</span><span class="sxs-lookup"><span data-stu-id="b663c-152">When the chain changes state or is removed from the graph, the allocator might be decommitted.</span></span> <span data-ttu-id="b663c-153">Se altre connessioni usano lo stesso allocatore, non possono più elaborare esempi.</span><span class="sxs-lookup"><span data-stu-id="b663c-153">If other connections were using the same allocator, they can no longer process samples.</span></span>
-   <span data-ttu-id="b663c-154">Non rimuovere una catena a meno che i filtri connessi alla catena non supportino la disconnessione dinamica.</span><span class="sxs-lookup"><span data-stu-id="b663c-154">Do not remove a chain unless the filters connected to the chain support dynamic disconnection.</span></span> <span data-ttu-id="b663c-155">In genere, i filtri connessi supportano **l'interfaccia IPinConnection** o **IPinFlowControl,** ma potrebbero invece supportare interfacce private.</span><span class="sxs-lookup"><span data-stu-id="b663c-155">Typically, the connected filters will support the **IPinConnection** or **IPinFlowControl** interface, but might support private interfaces instead.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b663c-156">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="b663c-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b663c-157">Creazione dinamica di grafi</span><span class="sxs-lookup"><span data-stu-id="b663c-157">Dynamic Graph Building</span></span>](dynamic-graph-building.md)
</dt> </dl>

 

 



