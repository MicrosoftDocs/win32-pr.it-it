---
description: Uso di flussi multimediali nelle applicazioni
ms.assetid: 73cfe89b-df46-445a-92c7-2f7323672441
title: Uso di flussi multimediali nelle applicazioni
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f30dab204bc7b0bddbdc293708daecbe0558e8f9
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/03/2021
ms.locfileid: "103968915"
---
# <a name="using-multimedia-streams-in-applications"></a><span data-ttu-id="4510b-103">Uso di flussi multimediali nelle applicazioni</span><span class="sxs-lookup"><span data-stu-id="4510b-103">Using Multimedia Streams in Applications</span></span>

> [!Note]  
> <span data-ttu-id="4510b-104">Queste API sono deprecate.</span><span class="sxs-lookup"><span data-stu-id="4510b-104">These APIs are deprecated.</span></span> <span data-ttu-id="4510b-105">Le applicazioni devono usare il filtro [**grabber di esempio**](sample-grabber-filter.md) o implementare un filtro personalizzato per ottenere i dati da un grafico filtro DirectShow.</span><span class="sxs-lookup"><span data-stu-id="4510b-105">Applications should use the [**Sample Grabber**](sample-grabber-filter.md) filter or implement a custom filter to get data from a DirectShow filter graph.</span></span>

 

<span data-ttu-id="4510b-106">Le interfacce di streaming multimediali semplificano notevolmente il processo di manipolazione dei dati multimediali rimuovendo la dipendenza da caratteristiche specifiche dell'hardware o dell'origine software e fornendo supporto per tutti i formati di file multimediali Microsoft DirectX®.</span><span class="sxs-lookup"><span data-stu-id="4510b-106">The multimedia streaming interfaces greatly simplify the process of manipulating multimedia data by removing the dependency on specific characteristics of the hardware or software source and providing support for all Microsoft DirectX® media formats.</span></span> <span data-ttu-id="4510b-107">I flussi astraggono i dati a un livello molto elevato; le applicazioni possono anche spostare i dati da un flusso all'altro senza conoscere il formato dei dati.</span><span class="sxs-lookup"><span data-stu-id="4510b-107">Streams abstract the data to a very high level; applications can even move data from one stream to another without knowing anything about the data's format.</span></span>

<span data-ttu-id="4510b-108">Per creare un flusso multimediale, seguire questa procedura.</span><span class="sxs-lookup"><span data-stu-id="4510b-108">Perform the following steps to create a multimedia stream.</span></span>

1.  <span data-ttu-id="4510b-109">Creare il flusso multimediale.</span><span class="sxs-lookup"><span data-stu-id="4510b-109">Create the multimedia stream.</span></span> <span data-ttu-id="4510b-110">Il metodo di creazione e inizializzazione del flusso è specifico dell'architettura.</span><span class="sxs-lookup"><span data-stu-id="4510b-110">The method of creation and initialization of the stream is architecture specific.</span></span> <span data-ttu-id="4510b-111">DirectShow supporta l'interfaccia [**IAMMultiMediaStream**](/previous-versions/windows/desktop/api/amstream/nn-amstream-iammultimediastream) , che viene usata per inizializzare il flusso.</span><span class="sxs-lookup"><span data-stu-id="4510b-111">DirectShow supports the [**IAMMultiMediaStream**](/previous-versions/windows/desktop/api/amstream/nn-amstream-iammultimediastream) interface, which is used to initialize the stream.</span></span> <span data-ttu-id="4510b-112">Altre implementazioni del server in-process di [**IMultiMediaStream**](/previous-versions/windows/desktop/api/mmstream/nn-mmstream-imultimediastream) verranno create e inizializzate con meccanismi diversi.</span><span class="sxs-lookup"><span data-stu-id="4510b-112">Other in-process server implementations of [**IMultiMediaStream**](/previous-versions/windows/desktop/api/mmstream/nn-mmstream-imultimediastream) will be created and initialized using different mechanisms.</span></span>
2.  <span data-ttu-id="4510b-113">Dopo l'inizializzazione dell'oggetto flusso multimediale, l'applicazione utilizzerà **QueryInterface** per recuperare l'interfaccia **IMultiMediaStream** per l'oggetto.</span><span class="sxs-lookup"><span data-stu-id="4510b-113">After the multimedia stream object is initialized, the application will use **QueryInterface** to retrieve the **IMultiMediaStream** interface for the object.</span></span> <span data-ttu-id="4510b-114">Usare questa interfaccia per determinare le proprietà del flusso ed enumerare i flussi stessi.</span><span class="sxs-lookup"><span data-stu-id="4510b-114">Use this interface to determine the stream's properties and enumerate the streams themselves.</span></span> <span data-ttu-id="4510b-115">È possibile recuperare un flusso specifico chiamando il metodo [**IMultiMediaStream:: GetMediaStream**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imultimediastream-getmediastream) con un ID scopo specifico.</span><span class="sxs-lookup"><span data-stu-id="4510b-115">You can retrieve a specific stream by calling the [**IMultiMediaStream::GetMediaStream**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imultimediastream-getmediastream) method with a specific purpose ID.</span></span> <span data-ttu-id="4510b-116">MSPID \_ PrimaryVideo e MSPID \_ PrimaryAudio, che rappresentano i flussi video e audio principali, sono gli ID finalità usati più di frequente.</span><span class="sxs-lookup"><span data-stu-id="4510b-116">MSPID\_PrimaryVideo and MSPID\_PrimaryAudio, which represent the primary video and audio streams, are the most commonly used purpose IDs.</span></span>
3.  <span data-ttu-id="4510b-117">Chiamare **IUnknown:: QueryInterface** per un'interfaccia specifica del tipo di supporto del flusso.</span><span class="sxs-lookup"><span data-stu-id="4510b-117">Call **IUnknown::QueryInterface** for an interface specific to the stream's media type.</span></span> <span data-ttu-id="4510b-118">Se si vuole eseguire il rendering di un flusso video, ad esempio, recuperare l'interfaccia [**IDirectDrawMediaStream**](/previous-versions/windows/desktop/api/ddstream/nn-ddstream-idirectdrawmediastream) .</span><span class="sxs-lookup"><span data-stu-id="4510b-118">If you want to render a video stream, for example, retrieve its [**IDirectDrawMediaStream**](/previous-versions/windows/desktop/api/ddstream/nn-ddstream-idirectdrawmediastream) interface.</span></span> <span data-ttu-id="4510b-119">Le interfacce specifiche del supporto definiscono metodi aggiuntivi necessari per sfruttare appieno le funzionalità di un formato.</span><span class="sxs-lookup"><span data-stu-id="4510b-119">Media-specific interfaces define additional methods necessary for taking full advantage of a format's capabilities.</span></span>
4.  <span data-ttu-id="4510b-120">Creare uno o più esempi dai dati di flusso.</span><span class="sxs-lookup"><span data-stu-id="4510b-120">Create one or more samples from the stream data.</span></span> <span data-ttu-id="4510b-121">Ogni flusso multimediale supporta il metodo [**IMediaStream:: CreateSharedSample**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imediastream-createsharedsample) per la creazione di esempi.</span><span class="sxs-lookup"><span data-stu-id="4510b-121">Every media stream supports the [**IMediaStream::CreateSharedSample**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imediastream-createsharedsample) method for sample creation.</span></span> <span data-ttu-id="4510b-122">L'esempio risultante supporta l'interfaccia [**IStreamSample**](/previous-versions/windows/desktop/api/mmstream/nn-mmstream-istreamsample) , che consente di controllare l'esempio e le relative caratteristiche.</span><span class="sxs-lookup"><span data-stu-id="4510b-122">The resulting sample supports the [**IStreamSample**](/previous-versions/windows/desktop/api/mmstream/nn-mmstream-istreamsample) interface, which provides control over the sample and its characteristics.</span></span> <span data-ttu-id="4510b-123">In genere, il flusso multimediale supporta un metodo specifico del formato per la creazione di esempi più potente rispetto ai metodi **IStreamSample** sopra indicati.</span><span class="sxs-lookup"><span data-stu-id="4510b-123">Typically, the media stream supports a format-specific method of sample creation that is more powerful than the aforementioned **IStreamSample** methods.</span></span> <span data-ttu-id="4510b-124">**IDirectDrawMediaStream**, ad esempio, può creare esempi collegati a una superficie e un rettangolo di ritaglio di DirectDraw desiderati.</span><span class="sxs-lookup"><span data-stu-id="4510b-124">**IDirectDrawMediaStream**, for example, can create samples attached to a desired DirectDraw surface and clipping rectangle.</span></span> <span data-ttu-id="4510b-125">In alcune situazioni, tuttavia, è necessario gestire i dati senza conoscere il relativo formato dati.</span><span class="sxs-lookup"><span data-stu-id="4510b-125">In some situations, however, you must handle data without knowing about its data format.</span></span> <span data-ttu-id="4510b-126">Se si vuole trasmettere i dati indipendentemente dal formato, usare il metodo **IMediaStream:: CreateSharedSample** per creare gli esempi di dati.</span><span class="sxs-lookup"><span data-stu-id="4510b-126">If you want to stream data independent of its format, use the **IMediaStream::CreateSharedSample** method to create the data samples.</span></span>
5.  <span data-ttu-id="4510b-127">Dopo aver creato tutti gli esempi di flusso desiderati, avviare il flusso chiamando il metodo [**IMultiMediaStream:: sestate**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imultimediastream-setstate) e passare il \_ flag di esecuzione STREAMSTATE come parametro.</span><span class="sxs-lookup"><span data-stu-id="4510b-127">After creating all desired stream samples, start the stream by calling the [**IMultiMediaStream::SetState**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imultimediastream-setstate) method and pass in the STREAMSTATE\_RUN flag as its parameter.</span></span>
6.  <span data-ttu-id="4510b-128">Chiamare [**IStreamSample:: Update**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-istreamsample-update) per aggiornare l'esempio di flusso.</span><span class="sxs-lookup"><span data-stu-id="4510b-128">Call [**IStreamSample::Update**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-istreamsample-update) to update the stream sample.</span></span> <span data-ttu-id="4510b-129">Quando il metodo **IStreamSample:: Update** viene chiuso, è possibile accedere ai dati dell'esempio.</span><span class="sxs-lookup"><span data-stu-id="4510b-129">When the **IStreamSample::Update** method exits, you can access the sample's data.</span></span> <span data-ttu-id="4510b-130">Se si desidera che un trigger chiami un evento o una funzione specifica quando l'aggiornamento viene restituito, passare i puntatori appropriati al metodo **IStreamSample:: Update** .</span><span class="sxs-lookup"><span data-stu-id="4510b-130">If you want a trigger a specific event or function call when the update returns, pass the appropriate pointers to the **IStreamSample::Update** method.</span></span>

<span data-ttu-id="4510b-131">Per altre informazioni sulle interfacce di streaming multimediali, vedere [streaming multimediale](multimedia-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="4510b-131">For more information on the multimedia streaming interfaces, see [Multimedia Streaming](multimedia-streaming.md).</span></span>

 

 



