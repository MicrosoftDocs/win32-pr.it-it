---
description: Connessione intelligente
ms.assetid: 938ba1b0-822e-4871-8786-b7eeee243867
title: Connessione intelligente
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 12aead305867ccec1f1f1f0cbd76c652ba3ec412
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "104482301"
---
# <a name="intelligent-connect"></a><span data-ttu-id="cd444-103">Connessione intelligente</span><span class="sxs-lookup"><span data-stu-id="cd444-103">Intelligent Connect</span></span>

<span data-ttu-id="cd444-104">La connessione intelligente è il meccanismo utilizzato dal gestore del grafo del filtro per compilare i grafici dei filtri.</span><span class="sxs-lookup"><span data-stu-id="cd444-104">Intelligent Connect is the mechanism the Filter Graph Manager uses to build filter graphs.</span></span> <span data-ttu-id="cd444-105">È costituito da diversi algoritmi correlati che selezionano i filtri e li aggiungono al grafico dei filtri.</span><span class="sxs-lookup"><span data-stu-id="cd444-105">It consists of several related algorithms that select filters and add them to the filter graph.</span></span>

<span data-ttu-id="cd444-106">Leggere questo argomento se si verificano problemi durante la creazione di un grafico di filtro specifico e si desidera risolvere il problema o se si sta scrivendo un filtro personalizzato e si desidera renderlo disponibile per la compilazione automatica dei grafici.</span><span class="sxs-lookup"><span data-stu-id="cd444-106">Read this topic if you are having trouble building a certain filter graph and want to troubleshoot the problem, or if you are writing your own filter and want to make it available for automatic graph building.</span></span>

<span data-ttu-id="cd444-107">La connessione intelligente prevede i seguenti metodi di [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) :</span><span class="sxs-lookup"><span data-stu-id="cd444-107">Intelligent Connect involves the following [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) methods:</span></span>

-   [<span data-ttu-id="cd444-108">**IGraphBuilder::AddSourceFilter**</span><span class="sxs-lookup"><span data-stu-id="cd444-108">**IGraphBuilder::AddSourceFilter**</span></span>](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-addsourcefilter)
-   [<span data-ttu-id="cd444-109">**IGraphBuilder:: Render**</span><span class="sxs-lookup"><span data-stu-id="cd444-109">**IGraphBuilder::Render**</span></span>](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render)
-   [<span data-ttu-id="cd444-110">**IGraphBuilder:: RenderFile**</span><span class="sxs-lookup"><span data-stu-id="cd444-110">**IGraphBuilder::RenderFile**</span></span>](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile)
-   [<span data-ttu-id="cd444-111">**IGraphBuilder:: Connect**</span><span class="sxs-lookup"><span data-stu-id="cd444-111">**IGraphBuilder::Connect**</span></span>](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect)

### <a name="igraphbuilderaddsourcefilter"></a><span data-ttu-id="cd444-112">IGraphBuilder::AddSourceFilter</span><span class="sxs-lookup"><span data-stu-id="cd444-112">IGraphBuilder::AddSourceFilter</span></span>

<span data-ttu-id="cd444-113">Il metodo [**IGraphBuilder:: AddSourceFilter**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-addsourcefilter) aggiunge un filtro di origine in grado di eseguire il rendering di un file specificato.</span><span class="sxs-lookup"><span data-stu-id="cd444-113">The [**IGraphBuilder::AddSourceFilter**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-addsourcefilter) method adds a source filter that can render a specified file.</span></span> <span data-ttu-id="cd444-114">In primo luogo, Cerca nel registro di sistema e trova la corrispondenza con il protocollo (ad esempio `https://` ), l'estensione del nome del file o un set di *byte di controllo* predeterminati, che sono byte con offset specifici nel file che corrispondono a determinati modelli.</span><span class="sxs-lookup"><span data-stu-id="cd444-114">First it looks in the registry and matches against the protocol (such as `https://`), the file name extension, or a set of predetermined *check bytes*, which are bytes at particular offsets in the file that match certain patterns.</span></span> <span data-ttu-id="cd444-115">Per informazioni dettagliate, vedere la pagina relativa alla [registrazione di un tipo di file personalizzato](registering-a-custom-file-type.md).</span><span class="sxs-lookup"><span data-stu-id="cd444-115">For details, see [Registering a Custom File Type](registering-a-custom-file-type.md).</span></span> <span data-ttu-id="cd444-116">Supponendo che il metodo trovi un filtro di origine appropriato, crea un'istanza di tale filtro, la aggiunge al grafo e chiama il metodo [**IFileSourceFilter:: Load**](/windows/desktop/api/Strmif/nf-strmif-ifilesourcefilter-load) del filtro con il nome del file.</span><span class="sxs-lookup"><span data-stu-id="cd444-116">Assuming that the method locates an appropriate source filter, it then creates an instance of that filter, adds it to the graph, and calls the filter's [**IFileSourceFilter::Load**](/windows/desktop/api/Strmif/nf-strmif-ifilesourcefilter-load) method with the file name.</span></span>

### <a name="igraphbuilderrender"></a><span data-ttu-id="cd444-117">IGraphBuilder:: Render</span><span class="sxs-lookup"><span data-stu-id="cd444-117">IGraphBuilder::Render</span></span>

<span data-ttu-id="cd444-118">Il metodo [**IGraphBuilder:: Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) compila una sottosezione di un grafico.</span><span class="sxs-lookup"><span data-stu-id="cd444-118">The [**IGraphBuilder::Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) method builds a subsection of a graph.</span></span> <span data-ttu-id="cd444-119">Inizia da un pin di output non connesso e funziona a valle, aggiungendo nuovi filtri in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="cd444-119">It starts from an unconnected output pin and works downstream, adding new filters as needed.</span></span> <span data-ttu-id="cd444-120">Il filtro iniziale deve essere già presente nel grafico.</span><span class="sxs-lookup"><span data-stu-id="cd444-120">The starting filter must already be in the graph.</span></span> <span data-ttu-id="cd444-121">A ogni passaggio, il metodo **Render** Cerca un filtro in grado di connettersi al filtro precedente.</span><span class="sxs-lookup"><span data-stu-id="cd444-121">At each step, the **Render** method searches for a filter that can connect to the previous filter.</span></span> <span data-ttu-id="cd444-122">Il flusso può creare un ramo se un filtro di connessione ha più pin di output.</span><span class="sxs-lookup"><span data-stu-id="cd444-122">The stream can branch if a connecting filter has multiple output pins.</span></span> <span data-ttu-id="cd444-123">La ricerca si interrompe quando ogni flusso dispone di un renderer.</span><span class="sxs-lookup"><span data-stu-id="cd444-123">The search stops when every stream has a renderer.</span></span> <span data-ttu-id="cd444-124">Se il metodo di **rendering** si blocca, è possibile eseguire il backup e riprovare usando un set di filtri diverso.</span><span class="sxs-lookup"><span data-stu-id="cd444-124">If the **Render** method gets stuck, it might back up and try again, using a different set of filters.</span></span>

<span data-ttu-id="cd444-125">Per connettere ogni pin di output, il metodo [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) esegue le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="cd444-125">To connect each output pin, the [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) method does the following:</span></span>

1.  <span data-ttu-id="cd444-126">Se il pin supporta l'interfaccia [**IStreamBuilder**](/windows/desktop/api/Strmif/nn-strmif-istreambuilder) , il gestore del grafo del filtro delega l'intero processo al metodo [**IStreamBuilder:: Render**](/windows/desktop/api/Strmif/nf-strmif-istreambuilder-render) del PIN.</span><span class="sxs-lookup"><span data-stu-id="cd444-126">If the pin supports the [**IStreamBuilder**](/windows/desktop/api/Strmif/nn-strmif-istreambuilder) interface, the Filter Graph Manager delegates the entire process to the pin's [**IStreamBuilder::Render**](/windows/desktop/api/Strmif/nf-strmif-istreambuilder-render) method.</span></span> <span data-ttu-id="cd444-127">Esponendo questa interfaccia, il pin si assume la responsabilità di creare il resto del grafo fino al renderer.</span><span class="sxs-lookup"><span data-stu-id="cd444-127">By exposing this interface, the pin assumes responsibility for building the remainder of the graph, down to the renderer.</span></span> <span data-ttu-id="cd444-128">Tuttavia, pochissimi pin supportano questa interfaccia.</span><span class="sxs-lookup"><span data-stu-id="cd444-128">However, very few pins support this interface.</span></span>
2.  <span data-ttu-id="cd444-129">Il gestore del grafico del filtro tenta di utilizzare i filtri memorizzati nella cache, se presenti.</span><span class="sxs-lookup"><span data-stu-id="cd444-129">The Filter Graph Manager tries to use filters that are cached in memory, if any.</span></span> <span data-ttu-id="cd444-130">Durante il processo di connessione intelligente, il gestore del grafico dei filtri può memorizzare nella cache i filtri dei passaggi precedenti del processo.</span><span class="sxs-lookup"><span data-stu-id="cd444-130">Throughout the Intelligent Connect process, the Filter Graph Manager may cache filters from earlier steps in the process.</span></span> <span data-ttu-id="cd444-131">(Vedere anche [creazione di grafici dinamici](dynamic-graph-building.md)).</span><span class="sxs-lookup"><span data-stu-id="cd444-131">(Also, see [Dynamic Graph Building](dynamic-graph-building.md).)</span></span>
3.  <span data-ttu-id="cd444-132">Se il grafico del filtro contiene filtri con pin di input non connessi, il gestore del grafico del filtro li tenterà di nuovo.</span><span class="sxs-lookup"><span data-stu-id="cd444-132">If the filter graph contains any filters with unconnected input pins, the Filter Graph Manager tries them next.</span></span> <span data-ttu-id="cd444-133">È possibile forzare il metodo [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) a provare un filtro particolare aggiungendo tale filtro al grafo prima di chiamare **il rendering**.</span><span class="sxs-lookup"><span data-stu-id="cd444-133">You can force the [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) method to try a particular filter by adding that filter to the graph before calling **Render**.</span></span>
4.  <span data-ttu-id="cd444-134">A partire da Windows 7, DirectShow include un elenco di filtri preferiti per determinati sottotipi di supporti.</span><span class="sxs-lookup"><span data-stu-id="cd444-134">Starting in Windows 7, DirectShow has a list of preferred filters for certain media subtypes.</span></span> <span data-ttu-id="cd444-135">Se è presente un filtro preferito per il tipo di supporto di cui è in corso il rendering, il gestore del grafico del filtro tenterà di filtrare il filtro.</span><span class="sxs-lookup"><span data-stu-id="cd444-135">If there is a preferred filter for the media type that is being rendered, the Filter Graph Manager tries that filter next.</span></span> <span data-ttu-id="cd444-136">Un'applicazione può modificare l'elenco dei filtri preferiti usando l'interfaccia [**IAMPluginControl**](/windows/desktop/api/Strmif/nn-strmif-iamplugincontrol) .</span><span class="sxs-lookup"><span data-stu-id="cd444-136">An application can modify the list of preferred filters by using the [**IAMPluginControl**](/windows/desktop/api/Strmif/nn-strmif-iamplugincontrol) interface.</span></span> <span data-ttu-id="cd444-137">Le modifiche apportate all'elenco influiscono sul processo corrente dell'applicazione e vengono eliminate al termine del processo.</span><span class="sxs-lookup"><span data-stu-id="cd444-137">Changes to the list affect the application's current process, and are discarded after the process ends.</span></span>
5.  <span data-ttu-id="cd444-138">Infine, se non è stato trovato alcun filtro appropriato, il gestore del grafico dei filtri Cerca nel registro di sistema, usando il metodo [**IFilterMapper2:: EnumMatchingFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-enummatchingfilters) .</span><span class="sxs-lookup"><span data-stu-id="cd444-138">Finally, if no suitable filter has been found, the Filter Graph Manager searches the registry, using the [**IFilterMapper2::EnumMatchingFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-enummatchingfilters) method.</span></span> <span data-ttu-id="cd444-139">Tenta di far corrispondere i tipi di supporti preferiti del PIN di output ai tipi di supporti elencati nel registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="cd444-139">It tries to match the output pin's preferred media types against media types listed in the registry.</span></span>

    <span data-ttu-id="cd444-140">Ogni filtro viene registrato con un valore di *Merit*, un valore numerico che indica il modo in cui il filtro è preferibile rispetto ad altri filtri.</span><span class="sxs-lookup"><span data-stu-id="cd444-140">Each filter is registered with a *merit*, a numerical value that indicates how preferable the filter is, relative to other filters.</span></span> <span data-ttu-id="cd444-141">Il metodo [**EnumMatchingFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-enummatchingfilters) restituisce i filtri in ordine di merito, con un valore minimo di Merit, che **\_ \_ non \_ USA** + 1.</span><span class="sxs-lookup"><span data-stu-id="cd444-141">The [**EnumMatchingFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-enummatchingfilters) method returns filters in order of merit, with a minimum merit of **MERIT\_DO\_NOT\_USE** + 1.</span></span> <span data-ttu-id="cd444-142">Ignora i filtri con un valore Merit of **Merit \_ che \_ non \_ USA** o meno.</span><span class="sxs-lookup"><span data-stu-id="cd444-142">It ignores filters with a merit of **MERIT\_DO\_NOT\_USE** or less.</span></span> <span data-ttu-id="cd444-143">Anche i filtri vengono raggruppati in categorie, definiti da GUID.</span><span class="sxs-lookup"><span data-stu-id="cd444-143">Filters are also grouped into categories, defined by GUID.</span></span> <span data-ttu-id="cd444-144">Le categorie stesse hanno il merito e il metodo **EnumMatchingFilters** ignora qualsiasi categoria con un valore Merit of **Merit che \_ \_ non \_ USA** o meno, anche se i filtri in tale categoria hanno valori Merit più elevati.</span><span class="sxs-lookup"><span data-stu-id="cd444-144">Categories themselves have merit, and the **EnumMatchingFilters** method ignores any category with a merit of **MERIT\_DO\_NOT\_USE** or less, even if the filters in that category have higher merit values.</span></span>

    <span data-ttu-id="cd444-145">A partire da Windows 7, DirectShow include un elenco di filtri bloccati per determinati sottotipi di supporti.</span><span class="sxs-lookup"><span data-stu-id="cd444-145">Starting in Windows 7, DirectShow has a list of blocked filters for certain media subtypes.</span></span> <span data-ttu-id="cd444-146">Filter Graph Manager ignora i filtri in questo elenco.</span><span class="sxs-lookup"><span data-stu-id="cd444-146">The Filter Graph Manager skips filters on this list.</span></span> <span data-ttu-id="cd444-147">Un'applicazione può modificare l'elenco dei filtri bloccati usando l'interfaccia [**IAMPluginControl**](/windows/desktop/api/Strmif/nn-strmif-iamplugincontrol) .</span><span class="sxs-lookup"><span data-stu-id="cd444-147">An application can modify the list of blocked filters by using the [**IAMPluginControl**](/windows/desktop/api/Strmif/nn-strmif-iamplugincontrol) interface.</span></span> <span data-ttu-id="cd444-148">Le modifiche apportate a questo elenco influiscono sul processo corrente dell'applicazione e vengono eliminate al termine del processo.</span><span class="sxs-lookup"><span data-stu-id="cd444-148">Changes to this list affect the application's current process, and are discarded after the process ends.</span></span>

<span data-ttu-id="cd444-149">Per riepilogare, il metodo [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) tenta i filtri nell'ordine seguente:</span><span class="sxs-lookup"><span data-stu-id="cd444-149">To summarize, the [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) method tries filters in the following order:</span></span>

1.  <span data-ttu-id="cd444-150">Usare [**IStreamBuilder**](/windows/desktop/api/Strmif/nn-strmif-istreambuilder).</span><span class="sxs-lookup"><span data-stu-id="cd444-150">Use [**IStreamBuilder**](/windows/desktop/api/Strmif/nn-strmif-istreambuilder).</span></span>
2.  <span data-ttu-id="cd444-151">Provare i filtri memorizzati nella cache.</span><span class="sxs-lookup"><span data-stu-id="cd444-151">Try cached filters.</span></span>
3.  <span data-ttu-id="cd444-152">Provare i filtri nel grafico.</span><span class="sxs-lookup"><span data-stu-id="cd444-152">Try filters in the graph.</span></span>
4.  <span data-ttu-id="cd444-153">Windows 7 o versioni successive: provare il filtro preferito per il tipo di supporto, se disponibile.</span><span class="sxs-lookup"><span data-stu-id="cd444-153">Windows 7 or later: Try the preferred filter for the media type, if any.</span></span>
5.  <span data-ttu-id="cd444-154">Cercare i filtri nel registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="cd444-154">Look up filters in the registry.</span></span>

### <a name="igraphbuilderrenderfile"></a><span data-ttu-id="cd444-155">IGraphBuilder:: RenderFile</span><span class="sxs-lookup"><span data-stu-id="cd444-155">IGraphBuilder::RenderFile</span></span>

<span data-ttu-id="cd444-156">Il metodo [**IGraphBuilder:: RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile) compila un grafico di riproduzione predefinito da un nome file.</span><span class="sxs-lookup"><span data-stu-id="cd444-156">The [**IGraphBuilder::RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile) method builds a default playback graph from a file name.</span></span> <span data-ttu-id="cd444-157">Internamente, questo metodo usa [**AddSourceFilter**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-addsourcefilter) per individuare il filtro di origine corretto e il [**rendering**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) per compilare il resto del grafo.</span><span class="sxs-lookup"><span data-stu-id="cd444-157">Internally, this method uses [**AddSourceFilter**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-addsourcefilter) to locate the correct source filter, and [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) to build the rest of the graph.</span></span>

### <a name="igraphbuilderconnect"></a><span data-ttu-id="cd444-158">IGraphBuilder:: Connect</span><span class="sxs-lookup"><span data-stu-id="cd444-158">IGraphBuilder::Connect</span></span>

<span data-ttu-id="cd444-159">Il metodo [**IGraphBuilder:: Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect) connette un pin di output a un pin di input.</span><span class="sxs-lookup"><span data-stu-id="cd444-159">The [**IGraphBuilder::Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect) method connects an output pin to an input pin.</span></span> <span data-ttu-id="cd444-160">Se necessario, questo metodo aggiunge filtri intermedi, usando una variante dell'algoritmo descritto per il metodo [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) :</span><span class="sxs-lookup"><span data-stu-id="cd444-160">This method adds intermediate filters if needed, using a variation of the algorithm described for the [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) method:</span></span>

1.  <span data-ttu-id="cd444-161">Provare una connessione diretta tra i filtri, senza filtri intermedi.</span><span class="sxs-lookup"><span data-stu-id="cd444-161">Try a direct connection between the filters, with no intermediate filters.</span></span>
2.  <span data-ttu-id="cd444-162">Provare i filtri memorizzati nella cache.</span><span class="sxs-lookup"><span data-stu-id="cd444-162">Try cached filters.</span></span>
3.  <span data-ttu-id="cd444-163">Provare i filtri nel grafico.</span><span class="sxs-lookup"><span data-stu-id="cd444-163">Try filters in the graph.</span></span>
4.  <span data-ttu-id="cd444-164">Windows 7 o versioni successive: provare il filtro preferito per il tipo di supporto, se disponibile.</span><span class="sxs-lookup"><span data-stu-id="cd444-164">Windows 7 or later: Try the preferred filter for the media type, if any.</span></span>
5.  <span data-ttu-id="cd444-165">Cercare i filtri nel registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="cd444-165">Look up filters in the registry.</span></span>

## <a name="related-topics"></a><span data-ttu-id="cd444-166">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="cd444-166">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="cd444-167">Filtra categorie</span><span class="sxs-lookup"><span data-stu-id="cd444-167">Filter Categories</span></span>](filter-categories.md)
</dt> <dt>

[<span data-ttu-id="cd444-168">Merito</span><span class="sxs-lookup"><span data-stu-id="cd444-168">Merit</span></span>](merit.md)
</dt> <dt>

[<span data-ttu-id="cd444-169">Simulazione della creazione di grafici con GraphEdit</span><span class="sxs-lookup"><span data-stu-id="cd444-169">Simulating Graph Building with GraphEdit</span></span>](simulating-graph-building-with-graphedit.md)
</dt> <dt>

[<span data-ttu-id="cd444-170">Creazione del grafico di filtro</span><span class="sxs-lookup"><span data-stu-id="cd444-170">Building the Filter Graph</span></span>](building-the-filter-graph.md)
</dt> </dl>

 

 



