---
description: Introduzione alla programmazione di applicazioni DirectShow
ms.assetid: 21a72efa-95df-4754-8304-ad56965a914d
title: Introduzione alla programmazione di applicazioni DirectShow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f6218a346a7eb9711259c025aef09133ef2e58f6
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "104401177"
---
# <a name="introduction-to-directshow-application-programming"></a><span data-ttu-id="7f4b5-103">Introduzione alla programmazione di applicazioni DirectShow</span><span class="sxs-lookup"><span data-stu-id="7f4b5-103">Introduction to DirectShow Application Programming</span></span>

<span data-ttu-id="7f4b5-104">Questo articolo presenta i concetti e la terminologia di base usati in DirectShow.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-104">This article introduces the basic terminology and concepts that are used in DirectShow.</span></span> <span data-ttu-id="7f4b5-105">Dopo aver letto questa sezione, si sarà pronti per scrivere la prima applicazione DirectShow.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-105">After reading this section, you will be ready to write your first DirectShow application.</span></span>

<span data-ttu-id="7f4b5-106">**Filtra e filtra i grafici**</span><span class="sxs-lookup"><span data-stu-id="7f4b5-106">**Filters and Filter Graphs**</span></span>

<span data-ttu-id="7f4b5-107">Il blocco predefinito di DirectShow è un componente software denominato *filtro*.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-107">The building block of DirectShow is a software component called a *filter*.</span></span> <span data-ttu-id="7f4b5-108">Un filtro è un componente software che esegue un'operazione su un flusso multimediale.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-108">A filter is a software component that performs some operation on a multimedia stream.</span></span> <span data-ttu-id="7f4b5-109">Ad esempio, i filtri DirectShow possono</span><span class="sxs-lookup"><span data-stu-id="7f4b5-109">For example, DirectShow filters can</span></span>

-   <span data-ttu-id="7f4b5-110">Leggi file</span><span class="sxs-lookup"><span data-stu-id="7f4b5-110">read files</span></span>
-   <span data-ttu-id="7f4b5-111">ottenere video da un dispositivo di acquisizione video</span><span class="sxs-lookup"><span data-stu-id="7f4b5-111">get video from a video capture device</span></span>
-   <span data-ttu-id="7f4b5-112">decodificare diversi formati di flusso, ad esempio MPEG-1 video</span><span class="sxs-lookup"><span data-stu-id="7f4b5-112">decode various stream formats, such as MPEG-1 video</span></span>
-   <span data-ttu-id="7f4b5-113">passare i dati alla scheda grafica o audio</span><span class="sxs-lookup"><span data-stu-id="7f4b5-113">pass data to the graphics or sound card</span></span>

<span data-ttu-id="7f4b5-114">I filtri ricevono l'input e producono l'output.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-114">Filters receive input and produce output.</span></span> <span data-ttu-id="7f4b5-115">Se, ad esempio, un filtro decodifica il video MPEG-1, l'input è il flusso codificato MPEG e l'output è costituito da una serie di fotogrammi video non compressi.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-115">For example, if a filter decodes MPEG-1 video, the input is the MPEG-encoded stream and the output is a series of uncompressed video frames.</span></span>

<span data-ttu-id="7f4b5-116">In DirectShow, un'applicazione esegue qualsiasi attività connettendo catene di filtri, in modo che l'output di un filtro diventi l'input per un altro.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-116">In DirectShow, an application performs any task by connecting chains of filters together, so that the output from one filter becomes the input for another.</span></span> <span data-ttu-id="7f4b5-117">Un set di filtri connessi è denominato *grafico a filtro*.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-117">A set of connected filters is called a *filter graph*.</span></span> <span data-ttu-id="7f4b5-118">Il diagramma seguente, ad esempio, Mostra un grafico di filtro per la riproduzione di un file AVI.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-118">For example, the following diagram shows a filter graph for playing an AVI file.</span></span>

![filtrare il grafico per riprodurre un file AVI](images/avi-filter-graph.png)

<span data-ttu-id="7f4b5-120">Il filtro di origine file legge il file AVI dal disco rigido.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-120">The File Source filter reads the AVI file from the hard disk.</span></span> <span data-ttu-id="7f4b5-121">Il filtro Splitter AVI analizza il file in due flussi, un flusso video compresso e un flusso audio.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-121">The AVI Splitter filter parses the file into two streams, a compressed video stream and an audio stream.</span></span> <span data-ttu-id="7f4b5-122">Il filtro Decompressore AVI decodifica i fotogrammi video.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-122">The AVI Decompressor filter decodes the video frames.</span></span> <span data-ttu-id="7f4b5-123">Il filtro renderer video disegna i frame sullo schermo, usando DirectDraw o GDI.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-123">The Video Renderer filter draws the frames to the display, using DirectDraw or GDI.</span></span> <span data-ttu-id="7f4b5-124">Il filtro di dispositivo DirectSound predefinito riproduce il flusso audio usando DirectSound.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-124">The Default DirectSound Device filter plays the audio stream, using DirectSound.</span></span>

<span data-ttu-id="7f4b5-125">Non è necessario che l'applicazione gestisca tutti i flussi di dati.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-125">The application does not have to manage all of this data flow.</span></span> <span data-ttu-id="7f4b5-126">I filtri sono invece controllati da un componente di livello elevato denominato Filter Graph Manager.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-126">Instead, the filters are controlled by a high-level component called the Filter Graph Manager.</span></span> <span data-ttu-id="7f4b5-127">L'applicazione effettua chiamate API di alto livello, ad esempio "Run" (per spostare i dati attraverso il grafo) o "Stop" (per arrestare il flusso di dati).</span><span class="sxs-lookup"><span data-stu-id="7f4b5-127">The application makes high-level API calls such as "Run" (to move data through the graph) or "Stop" (to stop the flow of data).</span></span> <span data-ttu-id="7f4b5-128">Se è necessario un maggiore controllo sulle operazioni di flusso, è possibile accedere ai filtri direttamente tramite le interfacce COM.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-128">If you require more control over the stream operations, you can access the filters directly through COM interfaces.</span></span> <span data-ttu-id="7f4b5-129">Filter Graph Manager passa anche le notifiche degli eventi all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-129">The Filter Graph Manager also passes event notifications to the application.</span></span>

<span data-ttu-id="7f4b5-130">Il gestore del grafo del filtro rappresenta anche un altro scopo: fornisce metodi che consentono all'applicazione di creare il grafico del filtro connettendo i filtri.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-130">The Filter Graph Manager serves another purpose as well: It provides methods for the application to build the filter graph, by connecting the filters together.</span></span> <span data-ttu-id="7f4b5-131">DirectShow fornisce anche vari oggetti helper che semplificano questo processo.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-131">(DirectShow also provides various helper objects that simplify this process.</span></span> <span data-ttu-id="7f4b5-132">Questi sono descritti accuratamente nella documentazione di.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-132">These are thoroughly described in the documentation.)</span></span>

<span data-ttu-id="7f4b5-133">**Scrittura di un'applicazione DirectShow**</span><span class="sxs-lookup"><span data-stu-id="7f4b5-133">**Writing a DirectShow Application**</span></span>

<span data-ttu-id="7f4b5-134">In termini generali, esistono tre attività che devono essere eseguite da qualsiasi applicazione DirectShow.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-134">In broad terms, there are three tasks that any DirectShow application must perform.</span></span> <span data-ttu-id="7f4b5-135">Sono illustrati nel diagramma seguente.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-135">These are illustrated in the following diagram.</span></span>

![applicazione DirectShow tipica](images/fgm.png)

1.  <span data-ttu-id="7f4b5-137">L'applicazione crea un'istanza di Filter Graph Manager.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-137">The application creates an instance of the Filter Graph Manager.</span></span>
2.  <span data-ttu-id="7f4b5-138">Nell'applicazione viene utilizzato Filter Graph Manager per creare un grafico di filtro.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-138">The application uses the Filter Graph Manager to build a filter graph.</span></span> <span data-ttu-id="7f4b5-139">Il set esatto di filtri nel grafico dipende dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-139">The exact set of filters in the graph will depend on the application.</span></span>
3.  <span data-ttu-id="7f4b5-140">L'applicazione utilizza Filter Graph Manager per controllare il grafico del filtro e trasmettere i dati tramite i filtri.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-140">The application uses the Filter Graph Manager to control the filter graph and stream data through the filters.</span></span> <span data-ttu-id="7f4b5-141">Durante questo processo, l'applicazione risponderà anche agli eventi del gestore del grafico dei filtri.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-141">Throughout this process, the application will also respond to events from the Filter Graph Manager.</span></span>

<span data-ttu-id="7f4b5-142">Al termine dell'elaborazione, l'applicazione rilascia la gestione del grafo dei filtri e tutti i filtri.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-142">When processing is completed, the application releases the Filter Graph Manager and all of the filters.</span></span>

<span data-ttu-id="7f4b5-143">DirectShow si basa su COM; Filter Graph Manager e i filtri sono tutti oggetti COM.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-143">DirectShow is based on COM; the Filter Graph Manager and the filters are all COM objects.</span></span> <span data-ttu-id="7f4b5-144">Prima di iniziare a programmare DirectShow, è necessario avere una conoscenza generale della programmazione dei client COM.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-144">You should have a general understanding of COM client programming before you begin programming DirectShow.</span></span> <span data-ttu-id="7f4b5-145">Sono disponibili molti libri sulla programmazione COM.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-145">Many books about COM programming are available.</span></span>

<span data-ttu-id="7f4b5-146">Per iniziare a usare DirectShow, vedere l'articolo [come riprodurre un file](how-to-play-a-file.md), che presenta una semplice applicazione console per riprodurre un file video.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-146">To get started with DirectShow, read the article [How To Play a File](how-to-play-a-file.md), which presents a simple console application to play a video file.</span></span> <span data-ttu-id="7f4b5-147">La sezione [relativa a DirectShow](about-directshow.md) illustra in modo più dettagliato l'architettura DirectShow, mentre la sezione relativa all' [uso di DirectShow](using-directshow.md) esamina gli scenari principali supportati da DirectShow, ad esempio acquisizione, modifica video, riproduzione DVD e televisione.</span><span class="sxs-lookup"><span data-stu-id="7f4b5-147">The section [About DirectShow](about-directshow.md) explains the DirectShow architecture in more detail, while the section [Using DirectShow](using-directshow.md) examines the major scenarios that are supported by DirectShow, such as capture, video editing, DVD playback, and television.</span></span>

 

 



