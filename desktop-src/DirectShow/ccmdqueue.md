---
description: La classe CCmdQueue è una classe di base che fornisce una coda di oggetti CDeferredCommand e funzioni membro per aggiungere, rimuovere, controllare lo stato e richiamare i comandi in coda.
ms.assetid: 6bd0f0f3-3c56-47d2-9fd8-e2863a2afa33
title: Classe CCmdQueue
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- CCmdQueue
api_type:
- COM
api_location: ''
ms.openlocfilehash: 78af7a975d54ba832bbdf1fb7f8027f87b747660
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "104123765"
---
# <a name="ccmdqueue-class"></a><span data-ttu-id="7ed66-103">Classe CCmdQueue</span><span class="sxs-lookup"><span data-stu-id="7ed66-103">CCmdQueue class</span></span>

<span data-ttu-id="7ed66-104">La `CCmdQueue` classe è una classe di base che fornisce una coda di oggetti [**CDeferredCommand**](cdeferredcommand.md) e funzioni membro per aggiungere, rimuovere, controllare lo stato e richiamare i comandi in coda.</span><span class="sxs-lookup"><span data-stu-id="7ed66-104">The `CCmdQueue` class is a base class that provides a queue of [**CDeferredCommand**](cdeferredcommand.md) objects and member functions to add, remove, check status, and invoke the queued commands.</span></span> <span data-ttu-id="7ed66-105">Un `CCmdQueue` oggetto fa parte di un oggetto che implementa i metodi [**IQueueCommand**](/windows/desktop/api/Control/nn-control-iqueuecommand) .</span><span class="sxs-lookup"><span data-stu-id="7ed66-105">A `CCmdQueue` object is a part of an object that implements [**IQueueCommand**](/windows/desktop/api/Control/nn-control-iqueuecommand) methods.</span></span> <span data-ttu-id="7ed66-106">Filter Graph Manager implementa i metodi **IQueueCommand** in modo che le applicazioni possano accodare i comandi al grafo del filtro.</span><span class="sxs-lookup"><span data-stu-id="7ed66-106">The filter graph manager implements **IQueueCommand** methods so that applications can queue commands to the filter graph.</span></span> <span data-ttu-id="7ed66-107">I filtri che implementano l'interfaccia **IQueueCommand** usano direttamente questa classe.</span><span class="sxs-lookup"><span data-stu-id="7ed66-107">Filters that implement the **IQueueCommand** interface directly use this class.</span></span> <span data-ttu-id="7ed66-108">Se si desidera utilizzare oggetti **CDeferredCommand** , è necessario che la coda derivi da questa classe.</span><span class="sxs-lookup"><span data-stu-id="7ed66-108">If you want to use **CDeferredCommand** objects, your queue must be derived from this class.</span></span>

<span data-ttu-id="7ed66-109">Sono disponibili due modalità di sincronizzazione: grossolana e accurata.</span><span class="sxs-lookup"><span data-stu-id="7ed66-109">There are two modes of synchronization: coarse and accurate.</span></span> <span data-ttu-id="7ed66-110">In modalità grossolana, l'applicazione attende fino a quando non arriva un orario specificato e quindi esegue il comando.</span><span class="sxs-lookup"><span data-stu-id="7ed66-110">In coarse mode, the application waits until a specified time arrives and then executes the command.</span></span> <span data-ttu-id="7ed66-111">In modalità accurata, l'applicazione attende fino a quando l'elaborazione non inizia nell'esempio visualizzato al momento, quindi esegue il comando.</span><span class="sxs-lookup"><span data-stu-id="7ed66-111">In accurate mode, the application waits until processing begins on the sample that appears at the time, and then executes the command.</span></span> <span data-ttu-id="7ed66-112">Il filtro determina quale implementazione verrà implementata.</span><span class="sxs-lookup"><span data-stu-id="7ed66-112">The filter determines which one it will implement.</span></span> <span data-ttu-id="7ed66-113">Filter Graph Manager implementa sempre la modalità grossolana per i comandi in coda in gestione grafico dei filtri.</span><span class="sxs-lookup"><span data-stu-id="7ed66-113">The filter graph manager always implements coarse mode for commands that are queued at the filter graph manager.</span></span>

<span data-ttu-id="7ed66-114">Se si desidera una sincronizzazione grossolana, è probabile che si desideri attendere fino a quando non è presente un comando, quindi eseguirlo.</span><span class="sxs-lookup"><span data-stu-id="7ed66-114">If you want coarse synchronization, you probably want to wait until there is a command due, and then execute it.</span></span> <span data-ttu-id="7ed66-115">È possibile eseguire questa operazione chiamando [**CCmdQueue:: GetDueCommand**](ccmdqueue-getduecommand.md).</span><span class="sxs-lookup"><span data-stu-id="7ed66-115">You can do this by calling [**CCmdQueue::GetDueCommand**](ccmdqueue-getduecommand.md).</span></span> <span data-ttu-id="7ed66-116">Se sono presenti diversi aspetti da attendere, ottenere l'handle dell'evento da [**CCmdQueue:: GetDueHandle**](ccmdqueue-getduehandle.md) e quindi chiamare **CCmdQueue:: GetDueCommand** quando questo viene segnalato.</span><span class="sxs-lookup"><span data-stu-id="7ed66-116">If you have several things to wait for, get the event handle from [**CCmdQueue::GetDueHandle**](ccmdqueue-getduehandle.md) and then call **CCmdQueue::GetDueCommand** when this is signaled.</span></span> <span data-ttu-id="7ed66-117">il [**tempo di flusso**](stream-time.md) viene anticipato solo tra le chiamate alle funzioni membro [**CCmdQueue:: Run**](ccmdqueue-run.md) e [**CCmdQueue:: EndRun**](ccmdqueue-endrun.md) .</span><span class="sxs-lookup"><span data-stu-id="7ed66-117">[**stream time**](stream-time.md) will advance only between calls to the [**CCmdQueue::Run**](ccmdqueue-run.md) and [**CCmdQueue::EndRun**](ccmdqueue-endrun.md) member functions.</span></span> <span data-ttu-id="7ed66-118">Non esiste alcuna garanzia che se l'handle è impostato, sarà pronto un comando.</span><span class="sxs-lookup"><span data-stu-id="7ed66-118">There is no guarantee that if the handle is set, there will be a command ready.</span></span> <span data-ttu-id="7ed66-119">Ogni volta che l'evento viene segnalato, chiamare la funzione membro **GetDueCommand** (probabilmente con un timeout di zero); Questo può restituire E \_ interrompere se nessun comando è pronto.</span><span class="sxs-lookup"><span data-stu-id="7ed66-119">Each time the event is signaled, call the **GetDueCommand** member function (probably with a time-out of zero); this can return E\_ABORT if no command is ready.</span></span>

<span data-ttu-id="7ed66-120">Se si vuole sincronizzare con precisione, chiamare la funzione membro [**CCmdQueue:: GetCommandDueFor**](ccmdqueue-getcommandduefor.md) e passare gli esempi che verranno elaborati come parametro.</span><span class="sxs-lookup"><span data-stu-id="7ed66-120">If you want accurate synchronization, call the [**CCmdQueue::GetCommandDueFor**](ccmdqueue-getcommandduefor.md) member function and pass the samples you are about to process as a parameter.</span></span> <span data-ttu-id="7ed66-121">Viene restituito quanto segue:</span><span class="sxs-lookup"><span data-stu-id="7ed66-121">This returns the following:</span></span>

-   <span data-ttu-id="7ed66-122">Un comando in fase di flusso dovuto a o prima del tempo di flusso.</span><span class="sxs-lookup"><span data-stu-id="7ed66-122">A stream-time command due at or before that stream time.</span></span>
-   <span data-ttu-id="7ed66-123">Comando in fase di presentazione dovuto a o prima della presentazione del tempo del flusso.</span><span class="sxs-lookup"><span data-stu-id="7ed66-123">A presentation-time command due at or before the presentation of the stream time.</span></span> <span data-ttu-id="7ed66-124">Eseguire questa operazione solo tra le funzioni membro [**CCmdQueue:: Run**](ccmdqueue-run.md) e [**CCmdQueue:: EndRun**](ccmdqueue-endrun.md) , perché al di fuori di questo, il mapping dal tempo di flusso al tempo di presentazione non è noto.</span><span class="sxs-lookup"><span data-stu-id="7ed66-124">Do this only between the [**CCmdQueue::Run**](ccmdqueue-run.md) and [**CCmdQueue::EndRun**](ccmdqueue-endrun.md) member functions, because outside of this, the mapping from stream time to presentation time is not known.</span></span>
-   <span data-ttu-id="7ed66-125">Qualsiasi comando della fase di presentazione ora.</span><span class="sxs-lookup"><span data-stu-id="7ed66-125">Any presentation-time command due now.</span></span>

<span data-ttu-id="7ed66-126">Se si desidera sincronizzare accuratamente gli esempi che potrebbero essere elaborati in modalità di sospensione, è necessario utilizzare i comandi in fase di flusso.</span><span class="sxs-lookup"><span data-stu-id="7ed66-126">If you want accurate synchronization for samples that might be processed during paused mode, you must use stream-time commands.</span></span>

<span data-ttu-id="7ed66-127">In tutti i casi, i comandi rimangono accodati fino a quando non viene chiamato o annullato.</span><span class="sxs-lookup"><span data-stu-id="7ed66-127">In all cases, commands remain queued until called or canceled.</span></span> <span data-ttu-id="7ed66-128">L'impostazione e la reimpostazione dell'handle di evento sono gestite interamente da questo oggetto Queue.</span><span class="sxs-lookup"><span data-stu-id="7ed66-128">The setting and resetting of the event handle is managed entirely by this queue object.</span></span>



| <span data-ttu-id="7ed66-129">Membri dati protetti</span><span class="sxs-lookup"><span data-stu-id="7ed66-129">Protected Data Members</span></span>                                 | <span data-ttu-id="7ed66-130">Descrizione</span><span class="sxs-lookup"><span data-stu-id="7ed66-130">Description</span></span>                                                                                            |
|--------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="7ed66-131">m \_ Bruning</span><span class="sxs-lookup"><span data-stu-id="7ed66-131">m\_bRunning</span></span>                                            | <span data-ttu-id="7ed66-132">Flag per lo stato di esecuzione; impostare **true** durante l'esecuzione di.</span><span class="sxs-lookup"><span data-stu-id="7ed66-132">Flag for running state; set **TRUE** when running.</span></span>                                                     |
| <span data-ttu-id="7ed66-133">\_dwAdvise m</span><span class="sxs-lookup"><span data-stu-id="7ed66-133">m\_dwAdvise</span></span>                                            | <span data-ttu-id="7ed66-134">Identificatore di notifica dal clock di riferimento (zero se nessun avviso in attesa).</span><span class="sxs-lookup"><span data-stu-id="7ed66-134">Advise identifier from the reference clock (zero if no outstanding advise).</span></span>                            |
| <span data-ttu-id="7ed66-135">\_evDue m</span><span class="sxs-lookup"><span data-stu-id="7ed66-135">m\_evDue</span></span>                                               | <span data-ttu-id="7ed66-136">Imposta l'ora in cui i comandi sono dovuti.</span><span class="sxs-lookup"><span data-stu-id="7ed66-136">Sets the time when any commands are due.</span></span>                                                               |
| <span data-ttu-id="7ed66-137">\_listPresentation m</span><span class="sxs-lookup"><span data-stu-id="7ed66-137">m\_listPresentation</span></span>                                    | <span data-ttu-id="7ed66-138">Archivia i comandi accodati in fase di presentazione.</span><span class="sxs-lookup"><span data-stu-id="7ed66-138">Stores commands queued in presentation time.</span></span>                                                           |
| <span data-ttu-id="7ed66-139">\_listStream m</span><span class="sxs-lookup"><span data-stu-id="7ed66-139">m\_listStream</span></span>                                          | <span data-ttu-id="7ed66-140">Archivia i comandi accodati nel tempo di flusso.</span><span class="sxs-lookup"><span data-stu-id="7ed66-140">Stores commands queued in stream time.</span></span>                                                                 |
| <span data-ttu-id="7ed66-141">\_blocco m</span><span class="sxs-lookup"><span data-stu-id="7ed66-141">m\_Lock</span></span>                                                | <span data-ttu-id="7ed66-142">Protegge l'accesso agli elenchi.</span><span class="sxs-lookup"><span data-stu-id="7ed66-142">Protects access to lists.</span></span>                                                                              |
| <span data-ttu-id="7ed66-143">\_pClock m</span><span class="sxs-lookup"><span data-stu-id="7ed66-143">m\_pClock</span></span>                                              | <span data-ttu-id="7ed66-144">Clock di riferimento corrente.</span><span class="sxs-lookup"><span data-stu-id="7ed66-144">Current reference clock.</span></span>                                                                               |
| <span data-ttu-id="7ed66-145">\_StreamTimeOffset m</span><span class="sxs-lookup"><span data-stu-id="7ed66-145">m\_StreamTimeOffset</span></span>                                    | <span data-ttu-id="7ed66-146">Contiene l'offset dell'ora del flusso quando **m \_ Brunne** è **true**.</span><span class="sxs-lookup"><span data-stu-id="7ed66-146">Contains the stream time offset when **m\_bRunning** is **TRUE**.</span></span>                                      |
| <span data-ttu-id="7ed66-147">\_StreamTimeOffset m</span><span class="sxs-lookup"><span data-stu-id="7ed66-147">m\_StreamTimeOffset</span></span>                                    | <span data-ttu-id="7ed66-148">Contiene l'offset dell'ora del flusso quando **m \_ Brunne** è **true**.</span><span class="sxs-lookup"><span data-stu-id="7ed66-148">Contains the stream time offset when **m\_bRunning** is **TRUE**.</span></span>                                      |
| <span data-ttu-id="7ed66-149">Funzioni di membro</span><span class="sxs-lookup"><span data-stu-id="7ed66-149">Member Functions</span></span>                                       | <span data-ttu-id="7ed66-150">Descrizione</span><span class="sxs-lookup"><span data-stu-id="7ed66-150">Description</span></span>                                                                                            |
| [<span data-ttu-id="7ed66-151">**CCmdQueue**</span><span class="sxs-lookup"><span data-stu-id="7ed66-151">**CCmdQueue**</span></span>](ccmdqueue-ccmdqueue.md)               | <span data-ttu-id="7ed66-152">Costruisce un oggetto **CCmdQueue** .</span><span class="sxs-lookup"><span data-stu-id="7ed66-152">Constructs a **CCmdQueue** object.</span></span>                                                                     |
| [<span data-ttu-id="7ed66-153">**CheckTime**</span><span class="sxs-lookup"><span data-stu-id="7ed66-153">**CheckTime**</span></span>](ccmdqueue-checktime.md)               | <span data-ttu-id="7ed66-154">Determina se un dato tempo è dovuto.</span><span class="sxs-lookup"><span data-stu-id="7ed66-154">Determines if a given time is due.</span></span>                                                                     |
| [<span data-ttu-id="7ed66-155">**GetDueHandle**</span><span class="sxs-lookup"><span data-stu-id="7ed66-155">**GetDueHandle**</span></span>](ccmdqueue-getduehandle.md)         | <span data-ttu-id="7ed66-156">Recupera l'handle dell'evento che verrà segnalato.</span><span class="sxs-lookup"><span data-stu-id="7ed66-156">Retrieves the event handle that will be signaled.</span></span>                                                      |
| <span data-ttu-id="7ed66-157">Funzioni membro sottoponibili a override</span><span class="sxs-lookup"><span data-stu-id="7ed66-157">Overridable Member Functions</span></span>                           | <span data-ttu-id="7ed66-158">Descrizione</span><span class="sxs-lookup"><span data-stu-id="7ed66-158">Description</span></span>                                                                                            |
| [<span data-ttu-id="7ed66-159">**EndRun**</span><span class="sxs-lookup"><span data-stu-id="7ed66-159">**EndRun**</span></span>](ccmdqueue-endrun.md)                     | <span data-ttu-id="7ed66-160">Passa alla modalità arrestata o sospesa.</span><span class="sxs-lookup"><span data-stu-id="7ed66-160">Switches to stopped or paused mode.</span></span>                                                                    |
| [<span data-ttu-id="7ed66-161">**GetCommandDueFor**</span><span class="sxs-lookup"><span data-stu-id="7ed66-161">**GetCommandDueFor**</span></span>](ccmdqueue-getcommandduefor.md) | <span data-ttu-id="7ed66-162">Recupera un comando posticipato pianificato a un'ora specificata.</span><span class="sxs-lookup"><span data-stu-id="7ed66-162">Retrieves a deferred command that is scheduled at a specified time.</span></span>                                    |
| [<span data-ttu-id="7ed66-163">**GetDueCommand**</span><span class="sxs-lookup"><span data-stu-id="7ed66-163">**GetDueCommand**</span></span>](ccmdqueue-getduecommand.md)       | <span data-ttu-id="7ed66-164">Recupera un puntatore al comando successivo che è dovuto a.</span><span class="sxs-lookup"><span data-stu-id="7ed66-164">Retrieves a pointer to the next command that is due.</span></span>                                                   |
| [<span data-ttu-id="7ed66-165">**Insert**</span><span class="sxs-lookup"><span data-stu-id="7ed66-165">**Insert**</span></span>](ccmdqueue-insert.md)                     | <span data-ttu-id="7ed66-166">Aggiunge l'oggetto [**CDeferredCommand**](cdeferredcommand.md) alla coda.</span><span class="sxs-lookup"><span data-stu-id="7ed66-166">Adds the [**CDeferredCommand**](cdeferredcommand.md) object to the queue.</span></span>                             |
| [<span data-ttu-id="7ed66-167">**Nuova**</span><span class="sxs-lookup"><span data-stu-id="7ed66-167">**New**</span></span>](ccmdqueue-new.md)                           | <span data-ttu-id="7ed66-168">Inizializza un comando da eseguire e restituisce un nuovo oggetto [**CDeferredCommand**](cdeferredcommand.md) .</span><span class="sxs-lookup"><span data-stu-id="7ed66-168">Initializes a command to be run and returns a new [**CDeferredCommand**](cdeferredcommand.md) object.</span></span> |
| [<span data-ttu-id="7ed66-169">**Rimuovi**</span><span class="sxs-lookup"><span data-stu-id="7ed66-169">**Remove**</span></span>](ccmdqueue-remove.md)                     | <span data-ttu-id="7ed66-170">Rimuove l'oggetto [**CDeferredCommand**](cdeferredcommand.md) dalla coda.</span><span class="sxs-lookup"><span data-stu-id="7ed66-170">Removes the [**CDeferredCommand**](cdeferredcommand.md) object from the queue.</span></span>                        |
| [<span data-ttu-id="7ed66-171">**Correre**</span><span class="sxs-lookup"><span data-stu-id="7ed66-171">**Run**</span></span>](ccmdqueue-run.md)                           | <span data-ttu-id="7ed66-172">Passa alla modalità di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="7ed66-172">Switches to running mode.</span></span>                                                                              |
| [<span data-ttu-id="7ed66-173">**SetSyncSource**</span><span class="sxs-lookup"><span data-stu-id="7ed66-173">**SetSyncSource**</span></span>](ccmdqueue-setsyncsource.md)       | <span data-ttu-id="7ed66-174">Imposta l'orologio usato per la temporizzazione.</span><span class="sxs-lookup"><span data-stu-id="7ed66-174">Sets the clock used for timing.</span></span>                                                                        |
| [<span data-ttu-id="7ed66-175">**SetTimeAdvise**</span><span class="sxs-lookup"><span data-stu-id="7ed66-175">**SetTimeAdvise**</span></span>](ccmdqueue-settimeadvise.md)       | <span data-ttu-id="7ed66-176">Imposta un evento del timer con l'orologio di riferimento.</span><span class="sxs-lookup"><span data-stu-id="7ed66-176">Sets up a timer event with the reference clock.</span></span>                                                        |



 

 

 



