---
description: Convalida della catena di certificati
ms.assetid: e0c36f04-1694-40d8-94a1-06ee7de08777
title: Convalida della catena di certificati
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 13436513ae9199feb7ba5fcba399537da198ba85
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "104232284"
---
# <a name="validating-the-certificate-chain"></a><span data-ttu-id="1c5f9-103">Convalida della catena di certificati</span><span class="sxs-lookup"><span data-stu-id="1c5f9-103">Validating the Certificate Chain</span></span>

<span data-ttu-id="1c5f9-104">In questo argomento viene descritto come convalidare la catena di certificati del driver quando si utilizza COPP (Certified Output Protocol).</span><span class="sxs-lookup"><span data-stu-id="1c5f9-104">This topic describes how to validate the driver's certificate chain when using Certified Output Protection Protocol (COPP).</span></span>

<span data-ttu-id="1c5f9-105">La catena di certificati del driver grafico è un documento XML.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-105">The graphic driver's certificate chain is an XML document.</span></span> <span data-ttu-id="1c5f9-106">La catena di certificati contiene tre certificati.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-106">The certificate chain contains three certificates.</span></span> <span data-ttu-id="1c5f9-107">Il primo certificato è denominato *certificato foglia* e è il certificato Copp del driver.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-107">The first certificate is called the *leaf certificate*, and is the driver's COPP certificate.</span></span> <span data-ttu-id="1c5f9-108">Il certificato successivo è il certificato di firma del fornitore dell'hardware indipendente (IHV).</span><span class="sxs-lookup"><span data-stu-id="1c5f9-108">The next certificate is the signing certificate of the Independent Hardware Vendor (IHV).</span></span> <span data-ttu-id="1c5f9-109">L'ultimo certificato è il certificato di firma di Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-109">The last certificate is Microsoft's signing certificate.</span></span> <span data-ttu-id="1c5f9-110">Per assicurarsi che il driver di grafica sia un dispositivo COPP legittimo, l'applicazione deve convalidare tutti e tre questi certificati.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-110">To ensure that the graphics driver is a legitimate COPP device, the application must validate all three of these certificates.</span></span> <span data-ttu-id="1c5f9-111">Un programma dannoso può impedire il funzionamento di COPP se un'applicazione non convalida correttamente i certificati nella catena.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-111">A malicious program can prevent COPP from working if an application does not correctly validate the certificates in the chain.</span></span>

<span data-ttu-id="1c5f9-112">Le catene di certificati COPP utilizzano il set di caratteri UTF-8.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-112">COPP certificate chains use the UTF-8 character set.</span></span> <span data-ttu-id="1c5f9-113">I dati binari nei certificati, ad esempio la chiave pubblica RSA, sono codificati in base 64 e archiviati in ordine big endian.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-113">Binary data in the certificates, such as the RSA public key, are base64-encoded and stored in big-endian order.</span></span> <span data-ttu-id="1c5f9-114">(*Big-Endian* significa che il byte più significativo viene archiviato nella posizione di memoria con l'indirizzo più basso).</span><span class="sxs-lookup"><span data-stu-id="1c5f9-114">(*Big-endian* means that the most significant byte is stored in the memory location with the lowest address.)</span></span>

<span data-ttu-id="1c5f9-115">Alcuni elementi all'interno di un certificato contengono valori booleani per indicare che esiste una funzionalità del certificato.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-115">Some elements within a certificate contain Boolean values to denote that a feature of the certificate exists.</span></span> <span data-ttu-id="1c5f9-116">Se la funzionalità esiste, il valore dell'elemento figlio corrispondente viene impostato su 1.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-116">If the feature exists, the corresponding child element value is set to 1.</span></span> <span data-ttu-id="1c5f9-117">Se una funzionalità non è presente, l'elemento figlio non è presente nel certificato.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-117">If a feature is not present, that child element is not present in the certificate.</span></span>

### <a name="xml-element-definitions"></a><span data-ttu-id="1c5f9-118">Definizioni degli elementi XML</span><span class="sxs-lookup"><span data-stu-id="1c5f9-118">XML Element Definitions</span></span>

<span data-ttu-id="1c5f9-119">Di seguito sono riportate le definizioni degli elementi nello schema del certificato:</span><span class="sxs-lookup"><span data-stu-id="1c5f9-119">The following are definitions for elements in the certificate schema:</span></span>

-   <span data-ttu-id="1c5f9-120">**Certificate**.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-120">**CertificateCollection**.</span></span> <span data-ttu-id="1c5f9-121">Elemento radice del documento XML.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-121">The root element of the XML document.</span></span> <span data-ttu-id="1c5f9-122">Contiene gli elementi del certificato, uno per ogni certificato nella catena.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-122">It contains Certificate elements, one for each certificate in the chain.</span></span>
-   <span data-ttu-id="1c5f9-123">**Certificato**.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-123">**Certificate**.</span></span> <span data-ttu-id="1c5f9-124">Contiene un certificato.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-124">Contains one certificate.</span></span> <span data-ttu-id="1c5f9-125">Questo elemento contiene i dati e gli elementi della firma.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-125">This element contains Data and Signature elements.</span></span>
-   <span data-ttu-id="1c5f9-126">**Dati**.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-126">**Data**.</span></span> <span data-ttu-id="1c5f9-127">Contiene informazioni sul certificato.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-127">Contains information about the certificate.</span></span> <span data-ttu-id="1c5f9-128">In particolare, contiene la chiave pubblica del certificato e il tipo.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-128">In particular, it contains the certificate's public key and type.</span></span> <span data-ttu-id="1c5f9-129">L'elemento dati contiene gli elementi figlio seguenti:</span><span class="sxs-lookup"><span data-stu-id="1c5f9-129">The Data element contains the following child elements:</span></span>
    -   <span data-ttu-id="1c5f9-130">**PublicKey**.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-130">**PublicKey**.</span></span> <span data-ttu-id="1c5f9-131">Contiene la chiave pubblica RSA del certificato.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-131">Contains the certificate's RSA public key.</span></span> <span data-ttu-id="1c5f9-132">L'elemento PublicKey contiene un elemento di un valore di valore che contiene un elemento RSAKeyValue.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-132">The PublicKey element contains a KeyValue element, which contains an RSAKeyValue element.</span></span> <span data-ttu-id="1c5f9-133">L'elemento RSAKeyValue ha due elementi figlio, modulo ed esponente, che definiscono la chiave pubblica.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-133">The RSAKeyValue element has two child elements, Modulus and Exponent, and these define the public key.</span></span> <span data-ttu-id="1c5f9-134">Gli elementi modulo ed esponente sono codificati in base 64 e archiviati in ordine big endian.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-134">The Modulus and Exponent elements are base64-encoded and stored in big-endian order.</span></span>
    -   <span data-ttu-id="1c5f9-135">**Utilizzo di dati**.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-135">**KeyUsage**.</span></span> <span data-ttu-id="1c5f9-136">Se il certificato è il certificato COPP del driver, questo elemento deve contenere un elemento figlio denominato EncryptKey.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-136">If the certificate is the driver's COPP certificate, this element should contain a child element called EncryptKey.</span></span> <span data-ttu-id="1c5f9-137">Se il certificato è il certificato di firma di IHV o il certificato di firma di Microsoft, deve contenere un elemento figlio denominato SignCertificate.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-137">If the certificate is the IHV's signing certificate or Microsoft's signing certificate, it should contain a child element called SignCertificate.</span></span> <span data-ttu-id="1c5f9-138">Entrambi questi elementi figlio contengono valori booleani.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-138">Both of these child elements contain Boolean values.</span></span>
    -   <span data-ttu-id="1c5f9-139">**SecurityLevel**.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-139">**SecurityLevel**.</span></span> <span data-ttu-id="1c5f9-140">Questo elemento deve essere ignorato.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-140">This element should be ignored.</span></span>
    -   <span data-ttu-id="1c5f9-141">**ManufacturerData**.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-141">**ManufacturerData**.</span></span> <span data-ttu-id="1c5f9-142">Specifica il produttore e il modello del dispositivo di grafica.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-142">Specifies the manufacturer and model of the graphics device.</span></span> <span data-ttu-id="1c5f9-143">Questo elemento è solo informativo.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-143">This element is informational only.</span></span>
    -   <span data-ttu-id="1c5f9-144">**Features**.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-144">**Features**.</span></span> <span data-ttu-id="1c5f9-145">Contiene gli elementi figlio che specificano l'utilizzo del certificato.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-145">Contains child elements that specify the usage of the certificate.</span></span> <span data-ttu-id="1c5f9-146">L'unico elemento pertinente per COPP è l'elemento COPPCertificate.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-146">The only one relevant to COPP is the COPPCertificate element.</span></span> <span data-ttu-id="1c5f9-147">Potrebbero essere presenti altri elementi figlio; in tal caso, devono essere ignorati.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-147">Other child elements might be present; if so, they should be ignored.</span></span> <span data-ttu-id="1c5f9-148">Se l'elemento COPPCertificate esiste, il certificato è un certificato COPP.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-148">If the COPPCertificate element exists, the certificate is a COPP certificate.</span></span> <span data-ttu-id="1c5f9-149">Questo elemento deve essere presente nel nodo foglia di un certificato COPP valido.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-149">This element must be present in the leaf node of a valid COPP certificate.</span></span> <span data-ttu-id="1c5f9-150">Questo elemento contiene un valore booleano.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-150">This element contains a Boolean value.</span></span>
-   <span data-ttu-id="1c5f9-151">**Firma**.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-151">**Signature**.</span></span> <span data-ttu-id="1c5f9-152">Contiene la firma per il certificato.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-152">Contains the signature for this certificate.</span></span> <span data-ttu-id="1c5f9-153">Contiene gli elementi figlio seguenti:</span><span class="sxs-lookup"><span data-stu-id="1c5f9-153">It contains the following child elements:</span></span>
    -   <span data-ttu-id="1c5f9-154">**SignedInfo**.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-154">**SignedInfo**.</span></span> <span data-ttu-id="1c5f9-155">Contiene informazioni sulla firma.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-155">Contains information about the signature.</span></span> <span data-ttu-id="1c5f9-156">L'elemento figlio importante di questo elemento è l'elemento DigestValue, che contiene il valore con codifica Base64 dell'hash SHA-1 sull'elemento dati.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-156">The important child element of this element is the DigestValue element, which contains the base64-encoded value of the SHA-1 hash over the Data element.</span></span> <span data-ttu-id="1c5f9-157">Il valore digest viene utilizzato per controllare il certificato rispetto all'elenco di revoche di certificati (CRL).</span><span class="sxs-lookup"><span data-stu-id="1c5f9-157">The digest value is used when checking the certificate against the certificate revocation list (CRL).</span></span>
    -   <span data-ttu-id="1c5f9-158">**SignatureValue**.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-158">**SignatureValue**.</span></span> <span data-ttu-id="1c5f9-159">Questo valore viene calcolato sull'elemento dati e viene calcolato in base allo schema di firma digitale RSASSA-PSS definito in Public-Key Cryptography Standards (PKCS) \# 1 (versione 2,1).</span><span class="sxs-lookup"><span data-stu-id="1c5f9-159">This value is computed over the Data element and is computed according to the RSASSA-PSS digital signature scheme defined in Public-Key Cryptography Standards (PKCS) \#1 (version 2.1).</span></span> <span data-ttu-id="1c5f9-160">Per informazioni su PKCS \# 1, visitare [https://www.rsa.com/](https://www.rsa.com/) .</span><span class="sxs-lookup"><span data-stu-id="1c5f9-160">For information about PKCS \#1, visit [https://www.rsa.com/](https://www.rsa.com/).</span></span>
    -   <span data-ttu-id="1c5f9-161">**Informazioni sui dati**.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-161">**KeyInfo**.</span></span> <span data-ttu-id="1c5f9-162">Contiene la chiave pubblica RSA del certificato successivo nella catena.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-162">Contains the RSA public key of the next certificate in the chain.</span></span> <span data-ttu-id="1c5f9-163">Questo elemento viene utilizzato per verificare che i dati nell'elemento dati non siano stati manomessi.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-163">This element is used to verify that the data in the Data element has not been tampered with.</span></span> <span data-ttu-id="1c5f9-164">Questo elemento ha lo stesso formato dell'elemento PublicKey.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-164">This element has the same format as the PublicKey element.</span></span>

### <a name="certificate-validation"></a><span data-ttu-id="1c5f9-165">Convalida del certificato</span><span class="sxs-lookup"><span data-stu-id="1c5f9-165">Certificate Validation</span></span>

<span data-ttu-id="1c5f9-166">Per convalidare correttamente la catena di certificati, l'applicazione deve eseguire i passaggi seguenti.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-166">The application must perform the following steps to correctly validate the certificate chain.</span></span> <span data-ttu-id="1c5f9-167">Se un passaggio ha esito negativo o se un elemento a cui si fa riferimento in queste procedure non esiste, la convalida ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-167">If any step fails, or if any element referred to in these procedures does not exist, the validation fails.</span></span>

### <a name="validate-certificate-collection-procedure"></a><span data-ttu-id="1c5f9-168">Procedura convalida raccolta certificati</span><span class="sxs-lookup"><span data-stu-id="1c5f9-168">Validate Certificate Collection Procedure</span></span>

<span data-ttu-id="1c5f9-169">Per convalidare la catena di certificati, seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="1c5f9-169">To validate the certificate chain, perform the following steps:</span></span>

1.  <span data-ttu-id="1c5f9-170">Verificare che il formato di certificate sia XML.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-170">Verify that the CertificateCollection is well-formed XML.</span></span>
2.  <span data-ttu-id="1c5f9-171">Verificare che l'oggetto certificate sia codificato in formato UTF-8.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-171">Verify that the CertificateCollection is encoded in UTF-8 format.</span></span>
3.  <span data-ttu-id="1c5f9-172">Verificare che l'attributo Version nell'elemento certificate sia 2,0 o versione successiva.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-172">Check that the Version attribute in the CertificateCollection element is 2.0 or later.</span></span>
4.  <span data-ttu-id="1c5f9-173">Verificare che la catena di certificati contenga esattamente tre elementi del certificato.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-173">Verify that the certificate chain contains exactly three Certificate elements.</span></span>
5.  <span data-ttu-id="1c5f9-174">Scorrere ogni elemento del certificato nella catena di certificati ed eseguire la procedura di convalida del certificato, descritta di seguito, su ciascuno di essi.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-174">Loop through each Certificate element in the certificate chain and perform the Validate Certificate procedure, described below, on each.</span></span>

### <a name="validate-certificate-procedure"></a><span data-ttu-id="1c5f9-175">Procedura di convalida del certificato</span><span class="sxs-lookup"><span data-stu-id="1c5f9-175">Validate Certificate Procedure</span></span>

<span data-ttu-id="1c5f9-176">Per convalidare un certificato nella catena, seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="1c5f9-176">To validate a certificate in the chain, perform the following steps:</span></span>

1.  <span data-ttu-id="1c5f9-177">Verificare che nessuno degli elementi figlio nell'elemento dati sia duplicato.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-177">Verify that none of the child elements in the Data element is duplicated.</span></span> <span data-ttu-id="1c5f9-178">Ad esempio, deve essere presente un solo elemento PublicKey.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-178">For example, there should be only one PublicKey element.</span></span>
2.  <span data-ttu-id="1c5f9-179">Verificare che l'elemento data/PublicKey/valore di RSAKeyValue/modulo esista.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-179">Ensure that the Data/PublicKey/KeyValue/RSAKeyValue/Modulus element exists.</span></span> <span data-ttu-id="1c5f9-180">Il valore con decodifica Base64 deve avere una lunghezza di 256 byte per tutti i certificati ad eccezione della radice.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-180">The base64-decoded value must be 256 bytes long for all certificates except the root.</span></span> <span data-ttu-id="1c5f9-181">Nel certificato radice, questo elemento deve essere lungo 128 byte.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-181">In the root certificate, this element must be 128 bytes long.</span></span>
3.  <span data-ttu-id="1c5f9-182">Verificare che l'elemento data/PublicKey/valore di RSAKeyValue/esponente esista.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-182">Ensure that the Data/PublicKey/KeyValue/RSAKeyValue/Exponent element exists.</span></span> <span data-ttu-id="1c5f9-183">Il valore con decodifica Base64 non deve essere maggiore di 4 byte.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-183">The base64-decoded value must not be larger than 4 bytes.</span></span>
4.  <span data-ttu-id="1c5f9-184">Se il certificato è il certificato foglia, verificare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="1c5f9-184">If this certificate is the leaf certificate, verify the following:</span></span>
    -   <span data-ttu-id="1c5f9-185">L'elemento DataUsage contiene un elemento EncryptKey con il valore 1.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-185">The KeyUsage element contains an EncryptKey element with the value 1.</span></span>
    -   <span data-ttu-id="1c5f9-186">L'elemento features contiene un elemento COPPCertificate con il valore 1.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-186">The Features element contains a COPPCertificate element with the value 1.</span></span>
5.  <span data-ttu-id="1c5f9-187">Se il certificato non è il certificato foglia, verificare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="1c5f9-187">If this certificate is not the leaf certificate, verify the following:</span></span>
    -   <span data-ttu-id="1c5f9-188">Il modulo e l'esponente dell'elemento data/PublicKey corrispondono esattamente al modulo e all'esponente dell'elemento Signature/datainfo del certificato precedente.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-188">The modulus and exponent from the Data/PublicKey element exactly match the modulus and exponent from the Signature/KeyInfo element of the previous certificate.</span></span>
    -   <span data-ttu-id="1c5f9-189">L'elemento DataUsage contiene un elemento SignCertificate con il valore 1.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-189">The KeyUsage element contains a SignCertificate element, with the value 1.</span></span>
6.  <span data-ttu-id="1c5f9-190">Utilizzare l'algoritmo hash SHA-1 per eseguire l'hashing di ogni byte nell'elemento dati del certificato.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-190">Use the SHA-1 hash algorithm to hash every byte in the certificate's Data element.</span></span> <span data-ttu-id="1c5f9-191">È necessario eseguire l'hashing di ogni byte dal primo carattere del <Data> tag all'ultimo carattere </Data> del tag di chiusura.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-191">Every byte from the first character in the <Data> tag to the last character in the closing </Data> tag should be hashed.</span></span> <span data-ttu-id="1c5f9-192">Il valore hash viene utilizzato per verificare il certificato rispetto all'elenco di revoche di certificati (CRL), come descritto in [elenchi di revoche di certificati](certificate-revocation-lists.md)</span><span class="sxs-lookup"><span data-stu-id="1c5f9-192">The hash value is used to check the certificate against the certificate revocation list (CRL), as described in [Certificate Revocation Lists](certificate-revocation-lists.md)</span></span>
7.  <span data-ttu-id="1c5f9-193">Confrontare il valore hash del passaggio 6 con il valore decodificato in base 64 dell'elemento Signature/SignedInfo/reference/DigestValue.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-193">Compare the hash value from step 6 with the base64-decoded value of the Signature/SignedInfo/Reference/DigestValue element.</span></span> <span data-ttu-id="1c5f9-194">Questi valori devono corrispondere.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-194">These values must match.</span></span>
8.  <span data-ttu-id="1c5f9-195">Eseguire la procedura Verify Signature, descritta di seguito.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-195">Perform the Verify Signature procedure, described below.</span></span>
9.  <span data-ttu-id="1c5f9-196">Se questo certificato non è il certificato finale della catena, salvare il valore Signature/Keychain/valore/RSAKeyValue per l'iterazione successiva del ciclo.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-196">If this certificate is not the final certificate in the chain, save the Signature/KeyInfo/KeyValue/RSAKeyValue value for the next iteration of the loop.</span></span>
10. <span data-ttu-id="1c5f9-197">Se questo certificato è il certificato finale della catena, verificare che il valore di Signature/Key Info/chiave/valore/RSAKeyValue corrisponda alla chiave pubblica di Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-197">If this certificate is the final certificate in the chain, ensure that the value of Signature/KeyInfo/KeyValue/RSAKeyValue matches Microsoft's public key.</span></span> <span data-ttu-id="1c5f9-198">La chiave pubblica Microsoft presenta i seguenti valori con codifica Base64:</span><span class="sxs-lookup"><span data-stu-id="1c5f9-198">The Microsoft public key has the following base64-encoded values:</span></span>
    -   <span data-ttu-id="1c5f9-199">Modulo</span><span class="sxs-lookup"><span data-stu-id="1c5f9-199">Modulus:</span></span>

        `pjoeWLSTLDonQG8She6QhkYbYott9fPZ8tHdB128ZETcghn5KHoyin7HkJEcPJ0Eg4UdSv a0KDIYDjA3EXd69R3CN2Wp/QyOo0ZPYWYp3NXpJ700tKPgIplzo5wVd/69g7j+j8M66W7V NmDwaNs9mDc1p2+VVMsDhOsV/Au6E+E=`

    -   <span data-ttu-id="1c5f9-200">Esponente `AQAB`</span><span class="sxs-lookup"><span data-stu-id="1c5f9-200">Exponent: `AQAB`</span></span>

### <a name="verify-signature-procedure"></a><span data-ttu-id="1c5f9-201">Verificare la procedura di firma</span><span class="sxs-lookup"><span data-stu-id="1c5f9-201">Verify Signature Procedure</span></span>

<span data-ttu-id="1c5f9-202">Il valore dell'elemento SignatureValue viene calcolato sull'elemento dati in base allo schema di firma digitale RSASSA-PSS definito in PKCS \# 1 versione 2,1 (in seguito denominato Pkcs).</span><span class="sxs-lookup"><span data-stu-id="1c5f9-202">The value of the SignatureValue element is computed over the Data element according to the RSASSA-PSS digital signature scheme defined in PKCS \#1 version 2.1 (hereinafter referred to as PKCS).</span></span> <span data-ttu-id="1c5f9-203">Per verificare la firma, seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="1c5f9-203">To verify this signature, perform the following steps:</span></span>

1.  <span data-ttu-id="1c5f9-204">Decodificare i valori del modulo e dell'esponente nell'elemento Signature/info/RSAKeyValue/valore dell'elemento.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-204">Decode the Modulus and Exponent values in the Signature/KeyInfo/KeyValue/RSAKeyValue element.</span></span> <span data-ttu-id="1c5f9-205">Questi valori definiscono la chiave pubblica RSA del certificato di firma.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-205">These values define the RSA public key of the signing certificate.</span></span>
2.  <span data-ttu-id="1c5f9-206">Decodificare l'elemento Signature/SignatureValue.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-206">Decode the Signature/SignatureValue element.</span></span>
3.  <span data-ttu-id="1c5f9-207">Calcolare l'operazione RSASSA-PSS-Verify, definita nella sezione 8.1.2 di PKCS.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-207">Compute the RSASSA-PSS-Verify operation, defined in section 8.1.2 of PKCS.</span></span>

<span data-ttu-id="1c5f9-208">Per l'operazione RSASSA-PSS-Verify, usare gli input seguenti:</span><span class="sxs-lookup"><span data-stu-id="1c5f9-208">For the RSASSA-PSS-Verify operation, use the following inputs:</span></span>

-   <span data-ttu-id="1c5f9-209">(*n*,*e*) è la chiave pubblica del passaggio 1.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-209">(*n*,*e*) is the public key from step 1.</span></span>
-   <span data-ttu-id="1c5f9-210">*M* è costituito da tutti i byte nell'elemento dati, inclusi i tag <Data> e</Data> che racchiudono l'elemento.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-210">*M* is all of the bytes in the Data element, including the <Data> and </Data> tags that enclose the element.</span></span>
-   <span data-ttu-id="1c5f9-211">*S* è il valore della firma decodificato dal passaggio 2.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-211">*S* is the decoded signature value from step 2.</span></span>

<span data-ttu-id="1c5f9-212">L'operazione RSASSA-PSS-Verify usa l'operazione EMSA-PSS-ENCODE, definita nella sezione 9.1.1.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-212">The RSASSA-PSS-Verify operation uses the EMSA-PSS-ENCODE operation, defined in section 9.1.1.</span></span> <span data-ttu-id="1c5f9-213">di PKCS.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-213">of PKCS.</span></span> <span data-ttu-id="1c5f9-214">Per questa operazione, COPP usa le opzioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="1c5f9-214">For this operation, COPP uses the following options:</span></span>

-   <span data-ttu-id="1c5f9-215">Hash = SHA-1</span><span class="sxs-lookup"><span data-stu-id="1c5f9-215">Hash = SHA-1</span></span>
-   <span data-ttu-id="1c5f9-216">*hlen* = 20</span><span class="sxs-lookup"><span data-stu-id="1c5f9-216">*hLen* = 20</span></span>
-   <span data-ttu-id="1c5f9-217">MGF (funzione di generazione della maschera) = maschera MGF1</span><span class="sxs-lookup"><span data-stu-id="1c5f9-217">MGF (mask generation function) = MGF1</span></span>
-   <span data-ttu-id="1c5f9-218">*slen* = 0</span><span class="sxs-lookup"><span data-stu-id="1c5f9-218">*sLen* = 0</span></span>

<span data-ttu-id="1c5f9-219">La funzione di generazione della maschera maschera MGF1 è definita nell'Appendice B. 2 di PKCS.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-219">The mask generation function MGF1 is defined in Appendix B.2 of PKCS.</span></span> <span data-ttu-id="1c5f9-220">Per questa funzione, COPP usa le opzioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="1c5f9-220">For this function, COPP uses the following options:</span></span>

-   <span data-ttu-id="1c5f9-221">Hash = SHA-1</span><span class="sxs-lookup"><span data-stu-id="1c5f9-221">Hash = SHA-1</span></span>
-   <span data-ttu-id="1c5f9-222">*hlen* = 20</span><span class="sxs-lookup"><span data-stu-id="1c5f9-222">*hLen* = 20</span></span>

<span data-ttu-id="1c5f9-223">L'output dell'operazione RSASSA-PSS-Verify indica se la firma è valida o non valida.</span><span class="sxs-lookup"><span data-stu-id="1c5f9-223">The output of the RSASSA-PSS-Verify operation indicates whether the signature is valid or invalid.</span></span>

## <a name="related-topics"></a><span data-ttu-id="1c5f9-224">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="1c5f9-224">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="1c5f9-225">Uso di COPP (Certified Output Protocol)</span><span class="sxs-lookup"><span data-stu-id="1c5f9-225">Using Certified Output Protection Protocol (COPP)</span></span>](using-certified-output-protection-protocol--copp.md)
</dt> </dl>

 

 



