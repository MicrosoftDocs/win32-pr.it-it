---
description: Filtri di acquisizione video DirectShow
ms.assetid: e4d1452d-ceac-4b5c-b9ba-ad4722ecff76
title: Filtri di acquisizione video DirectShow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 238f18dd77bc40011fa9fc0dbab3192ea81a223f
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "104480876"
---
# <a name="directshow-video-capture-filters"></a><span data-ttu-id="e0c61-103">Filtri di acquisizione video DirectShow</span><span class="sxs-lookup"><span data-stu-id="e0c61-103">DirectShow Video Capture Filters</span></span>

<span data-ttu-id="e0c61-104">I filtri di acquisizione in DirectShow hanno alcune funzionalità che li distinguono da altri tipi di filtri.</span><span class="sxs-lookup"><span data-stu-id="e0c61-104">Capture filters in DirectShow have some features that distinguish them from other kinds of filters.</span></span> <span data-ttu-id="e0c61-105">Sebbene il [Generatore di grafici di acquisizione](capture-graph-builder.md) nasconda molti dei dettagli, è consigliabile leggere questa sezione per avere una conoscenza generale dei grafici di acquisizione DirectShow.</span><span class="sxs-lookup"><span data-stu-id="e0c61-105">Although the [Capture Graph Builder](capture-graph-builder.md) hides many of the details, it is a good idea to read this section, in order to have a general understanding of DirectShow capture graphs.</span></span>

<span data-ttu-id="e0c61-106">**Aggiungi categorie**</span><span class="sxs-lookup"><span data-stu-id="e0c61-106">**Pin Categories**</span></span>

<span data-ttu-id="e0c61-107">Un filtro di acquisizione ha spesso due o più pin di output che forniscono lo stesso tipo di dati, ad esempio un pin di anteprima e un pin di acquisizione.</span><span class="sxs-lookup"><span data-stu-id="e0c61-107">A capture filter often has two or more output pins that deliver the same kind of data—for example, a preview pin and a capture pin.</span></span> <span data-ttu-id="e0c61-108">Pertanto, i tipi di supporto non sono un metodo efficace per distinguere i pin.</span><span class="sxs-lookup"><span data-stu-id="e0c61-108">Therefore, media types are not a good way to distinguish the pins.</span></span> <span data-ttu-id="e0c61-109">I pin sono invece distinti dalla relativa funzionalità, che viene identificata usando un GUID, denominato *categoria pin*.</span><span class="sxs-lookup"><span data-stu-id="e0c61-109">Instead, the pins are distinguished by their functionality, which is identified using a GUID, called the *pin category*.</span></span>

<span data-ttu-id="e0c61-110">Per informazioni su come eseguire query sui pin per la relativa categoria, vedere [Working with pin Categories](working-with-pin-categories.md).</span><span class="sxs-lookup"><span data-stu-id="e0c61-110">For a discussion of how to query pins for their category, see [Working with Pin Categories](working-with-pin-categories.md).</span></span> <span data-ttu-id="e0c61-111">Per la maggior parte delle applicazioni, tuttavia, non sarà necessario eseguire query direttamente sui pin.</span><span class="sxs-lookup"><span data-stu-id="e0c61-111">For most applications, however, you will not have to query pins directly.</span></span> <span data-ttu-id="e0c61-112">Al contrario, diversi metodi [**ICaptureGraphBuilder2**](/windows/desktop/api/Strmif/nn-strmif-icapturegraphbuilder2) accettano parametri che specificano la categoria di pin su cui operare.</span><span class="sxs-lookup"><span data-stu-id="e0c61-112">Instead, various [**ICaptureGraphBuilder2**](/windows/desktop/api/Strmif/nn-strmif-icapturegraphbuilder2) methods take parameters that specify the pin category on which to operate.</span></span> <span data-ttu-id="e0c61-113">Il generatore del grafico di acquisizione individua automaticamente il PIN corretto.</span><span class="sxs-lookup"><span data-stu-id="e0c61-113">The Capture Graph Builder automatically locates the correct pin.</span></span>

<span data-ttu-id="e0c61-114">**Pin di anteprima e pin di acquisizione**</span><span class="sxs-lookup"><span data-stu-id="e0c61-114">**Preview Pins and Capture Pins**</span></span>

<span data-ttu-id="e0c61-115">Alcuni dispositivi di acquisizione video hanno PIN di output distinti per l'anteprima e l'acquisizione.</span><span class="sxs-lookup"><span data-stu-id="e0c61-115">Some video capture devices have separate output pins for preview and capture.</span></span> <span data-ttu-id="e0c61-116">Il pin di anteprima viene usato per eseguire il rendering del video sullo schermo, mentre il pin di acquisizione viene usato per scrivere video in un file.</span><span class="sxs-lookup"><span data-stu-id="e0c61-116">The preview pin is used to render video to the screen, while the capture pin is used to write video to a file.</span></span>

<span data-ttu-id="e0c61-117">Un pin di anteprima e un pin di acquisizione presentano le differenze seguenti:</span><span class="sxs-lookup"><span data-stu-id="e0c61-117">A preview pin and a capture pin have the following differences:</span></span>

-   <span data-ttu-id="e0c61-118">Un pin di anteprima Elimina i frame necessari per mantenere la velocità effettiva sul pin di acquisizione.</span><span class="sxs-lookup"><span data-stu-id="e0c61-118">A preview pin drops frames as needed to maintain throughput on the capture pin.</span></span>
-   <span data-ttu-id="e0c61-119">Ogni fotogramma di un pin di acquisizione viene stampato con l'ora del flusso in cui è stato acquisito il frame.</span><span class="sxs-lookup"><span data-stu-id="e0c61-119">Each frame from a capture pin is time-stamped with the stream time when the frame was captured.</span></span> <span data-ttu-id="e0c61-120">Un pin di anteprima non rilascia il timestamp degli esempi forniti.</span><span class="sxs-lookup"><span data-stu-id="e0c61-120">A preview pin does not time stamp the samples it delivers.</span></span>

<span data-ttu-id="e0c61-121">Il motivo per cui i frame di anteprima non hanno timestamp è che il grafico del filtro introduce una piccola quantità di latenza nel flusso.</span><span class="sxs-lookup"><span data-stu-id="e0c61-121">The reason that preview frames do not have time stamps is that the filter graph introduces a small amount of latency into the stream.</span></span> <span data-ttu-id="e0c61-122">Se il tempo di acquisizione viene usato come ora di presentazione, il renderer video considera ogni campione come leggermente tardivo.</span><span class="sxs-lookup"><span data-stu-id="e0c61-122">If the capture time is used as the presentation time, the video renderer treats every sample as being slightly late.</span></span> <span data-ttu-id="e0c61-123">In questo modo il renderer video può rilasciare frame mentre tenta di aggiornarsi.</span><span class="sxs-lookup"><span data-stu-id="e0c61-123">This can cause the video renderer to drop frames while it tries to catch up.</span></span> <span data-ttu-id="e0c61-124">La rimozione dei timestamp garantisce che il renderer presenti ogni campione al momento dell'arrivo senza eliminare i frame.</span><span class="sxs-lookup"><span data-stu-id="e0c61-124">Removing the time stamps ensures that the renderer presents each sample when it arrives, without dropping frames.</span></span>

<span data-ttu-id="e0c61-125">La categoria pin per i pin di anteprima è la \_ categoria pin \_ Preview.</span><span class="sxs-lookup"><span data-stu-id="e0c61-125">The pin category for preview pins is PIN\_CATEGORY\_PREVIEW.</span></span> <span data-ttu-id="e0c61-126">La categoria per i pin di acquisizione è l' \_ acquisizione della categoria pin \_ .</span><span class="sxs-lookup"><span data-stu-id="e0c61-126">The category for capture pins is PIN\_CATEGORY\_CAPTURE.</span></span>

<span data-ttu-id="e0c61-127">**PIN della porta video**</span><span class="sxs-lookup"><span data-stu-id="e0c61-127">**Video Port Pins**</span></span>

<span data-ttu-id="e0c61-128">Una porta video è una connessione hardware tra un dispositivo video, ad esempio un sintonizzatore TV analogico, e la scheda video.</span><span class="sxs-lookup"><span data-stu-id="e0c61-128">A video port is a hardware connection between a video device (such as an analog TV tuner) and the video card.</span></span> <span data-ttu-id="e0c61-129">Una porta video consente al dispositivo di inviare dati video direttamente alla scheda grafica.</span><span class="sxs-lookup"><span data-stu-id="e0c61-129">A video port enables the device to send video data directly to the graphics card.</span></span> <span data-ttu-id="e0c61-130">Il video viene visualizzato sullo schermo usando una sovrapposizione hardware.</span><span class="sxs-lookup"><span data-stu-id="e0c61-130">The video is displayed on the screen using a hardware overlay.</span></span> <span data-ttu-id="e0c61-131">Una porta video potrebbe essere un cavo effettivo che connette due dispositivi a schede separate; oppure potrebbe trattarsi di una connessione cablata sulla stessa scheda.</span><span class="sxs-lookup"><span data-stu-id="e0c61-131">A video port might be an actual cable that connects two devices on separate cards; or it might be a hard-wired connection on the same card.</span></span>

<span data-ttu-id="e0c61-132">Il vantaggio di una porta video è che il video passa direttamente alla memoria video, senza alcuna attività da parte della CPU.</span><span class="sxs-lookup"><span data-stu-id="e0c61-132">The advantage of a video port is that the video goes directly into video memory, without any work by the CPU.</span></span> <span data-ttu-id="e0c61-133">Tuttavia, le porte video presentano alcuni svantaggi:</span><span class="sxs-lookup"><span data-stu-id="e0c61-133">However, video ports have some drawbacks:</span></span>

-   <span data-ttu-id="e0c61-134">Una porta video usa sempre la superficie della sovrimpressione durante l'acquisizione, indipendentemente dal fatto che si desideri visualizzare l'anteprima del video.</span><span class="sxs-lookup"><span data-stu-id="e0c61-134">A video port always uses the overlay surface during capture, regardless of whether you want to preview the video.</span></span>
-   <span data-ttu-id="e0c61-135">Il capovolgimento tra i frame viene eseguito automaticamente, rendendo difficile la sincronizzazione del flip con altre operazioni video.</span><span class="sxs-lookup"><span data-stu-id="e0c61-135">Flipping between frames occurs automatically, which makes it difficult to synchronize the flip with other video operations.</span></span>

<span data-ttu-id="e0c61-136">Se un dispositivo di acquisizione usa una porta video, il filtro di acquisizione ha un PIN della porta video anziché un pin di anteprima.</span><span class="sxs-lookup"><span data-stu-id="e0c61-136">If a capture device uses a video port, the capture filter has a video port pin instead of a preview pin.</span></span> <span data-ttu-id="e0c61-137">La categoria pin per i pin della porta video è PIN \_ categoria \_ VIDEOPORT.</span><span class="sxs-lookup"><span data-stu-id="e0c61-137">The pin category for video port pins is PIN\_CATEGORY\_VIDEOPORT.</span></span>

<span data-ttu-id="e0c61-138">Ogni filtro di acquisizione include almeno un pin di acquisizione.</span><span class="sxs-lookup"><span data-stu-id="e0c61-138">Every capture filter has at least one capture pin.</span></span> <span data-ttu-id="e0c61-139">Potrebbe inoltre avere un pin di anteprima o un PIN della porta video, ma mai entrambi.</span><span class="sxs-lookup"><span data-stu-id="e0c61-139">In addition it might have a preview pin or a video port pin, but never both.</span></span> <span data-ttu-id="e0c61-140">I filtri possono avere più pin di acquisizione e pin di anteprima, ognuno dei quali fornisce un tipo di supporto separato.</span><span class="sxs-lookup"><span data-stu-id="e0c61-140">Filters can have multiple capture pins and preview pins, each delivering a separate media type.</span></span> <span data-ttu-id="e0c61-141">Un singolo filtro potrebbe quindi avere un pin di acquisizione video, un pin di anteprima video, un pin di acquisizione audio e un pin di anteprima audio.</span><span class="sxs-lookup"><span data-stu-id="e0c61-141">Thus, a single filter could have a video capture pin, a video preview pin, an audio capture pin, and an audio preview pin.</span></span> <span data-ttu-id="e0c61-142">(Tuttavia, non esiste alcun equivalente a una porta video per l'audio).</span><span class="sxs-lookup"><span data-stu-id="e0c61-142">(There is nothing equivalent to a video port for audio, however.)</span></span>

<span data-ttu-id="e0c61-143">**Filtri WDM upstream**</span><span class="sxs-lookup"><span data-stu-id="e0c61-143">**Upstream WDM Filters**</span></span>

<span data-ttu-id="e0c61-144">I dispositivi Windows Driver Model (WDM) potrebbero richiedere filtri aggiuntivi upstream dal filtro di acquisizione.</span><span class="sxs-lookup"><span data-stu-id="e0c61-144">Windows Driver Model (WDM) devices may require some additional filters upstream from the capture filter.</span></span> <span data-ttu-id="e0c61-145">Questi filtri includono quanto segue:</span><span class="sxs-lookup"><span data-stu-id="e0c61-145">These filters include the following:</span></span>

-   <span data-ttu-id="e0c61-146">[Filtro sintonizzatore TV](tv-tuner-filter.md).</span><span class="sxs-lookup"><span data-stu-id="e0c61-146">[TV Tuner Filter](tv-tuner-filter.md).</span></span> <span data-ttu-id="e0c61-147">Controlla l'ottimizzazione dei sintonizzatori TV analoghi.</span><span class="sxs-lookup"><span data-stu-id="e0c61-147">Controls tuning for analog TV tuners.</span></span>
-   <span data-ttu-id="e0c61-148">[Filtro audio TV](tv-audio-filter.md).</span><span class="sxs-lookup"><span data-stu-id="e0c61-148">[TV Audio Filter](tv-audio-filter.md).</span></span> <span data-ttu-id="e0c61-149">Controlla le impostazioni audio per i sintonizzatori TV analoghi.</span><span class="sxs-lookup"><span data-stu-id="e0c61-149">Controls audio settings for analog TV tuners.</span></span>
-   <span data-ttu-id="e0c61-150">[Filtro traversa video analogo](analog-video-crossbar-filter.md).</span><span class="sxs-lookup"><span data-stu-id="e0c61-150">[Analog Video Crossbar Filter](analog-video-crossbar-filter.md).</span></span> <span data-ttu-id="e0c61-151">Instrada i segnali video e audio tramite il dispositivo hardware.</span><span class="sxs-lookup"><span data-stu-id="e0c61-151">Routes video and audio signals through the hardware device.</span></span> <span data-ttu-id="e0c61-152">Ad esempio, un dispositivo potrebbe avere più input, ad esempio S-video e composite video.</span><span class="sxs-lookup"><span data-stu-id="e0c61-152">For example, a device might have multiple inputs, such as S-Video and composite video.</span></span> <span data-ttu-id="e0c61-153">Il filtro traversa consente all'applicazione di selezionare l'input.</span><span class="sxs-lookup"><span data-stu-id="e0c61-153">The crossbar filter enables the application to select the input.</span></span>

<span data-ttu-id="e0c61-154">Sebbene si tratta di filtri distinti in DirectShow, rappresentano in genere lo stesso dispositivo hardware.</span><span class="sxs-lookup"><span data-stu-id="e0c61-154">Although these are separate filters in DirectShow, they typically represent the same hardware device.</span></span> <span data-ttu-id="e0c61-155">Ogni filtro controlla una funzione diversa del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e0c61-155">Each filter controls a different function of the device.</span></span> <span data-ttu-id="e0c61-156">I filtri sono connessi tramite PIN, ma non vengono spostati dati multimediali tra le connessioni pin.</span><span class="sxs-lookup"><span data-stu-id="e0c61-156">The filters are connected by pins, but no media data moves across the pin connections.</span></span> <span data-ttu-id="e0c61-157">Pertanto, i pin su questi filtri non si connettono stabilendo un tipo di supporto.</span><span class="sxs-lookup"><span data-stu-id="e0c61-157">Therefore, the pins on these filters do not connect by establishing a media type.</span></span> <span data-ttu-id="e0c61-158">Usano invece valori GUID denominati *medium*.</span><span class="sxs-lookup"><span data-stu-id="e0c61-158">Instead, they use GUID values called *mediums*.</span></span> <span data-ttu-id="e0c61-159">I GUID medi sono definiti in modo univoco per un determinato dispositivo minidriver.</span><span class="sxs-lookup"><span data-stu-id="e0c61-159">Medium GUIDs are uniquely defined for a given device minidriver.</span></span> <span data-ttu-id="e0c61-160">Ad esempio, il filtro del sintonizzatore TV e il filtro di acquisizione video per la stessa scheda TV supporteranno lo stesso supporto, che consente all'applicazione di compilare correttamente il grafo.</span><span class="sxs-lookup"><span data-stu-id="e0c61-160">For example, the TV Tuner filter and the Video Capture filter for the same TV card will both support the same medium, which enables the application to build the graph correctly.</span></span>

<span data-ttu-id="e0c61-161">In pratica, fino a quando si usa **ICaptureGraphBuilder2** per compilare i grafici di acquisizione, questi filtri vengono aggiunti automaticamente al grafico.</span><span class="sxs-lookup"><span data-stu-id="e0c61-161">In practice, as long as you are using **ICaptureGraphBuilder2** to build your capture graphs, these filters are added to the graph automatically.</span></span> <span data-ttu-id="e0c61-162">Per una descrizione più dettagliata, vedere la pagina relativa ai [filtri driver di classe WDM](wdm-class-driver-filters.md).</span><span class="sxs-lookup"><span data-stu-id="e0c61-162">For a more detailed discussion, see [WDM Class Driver Filters](wdm-class-driver-filters.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="e0c61-163">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="e0c61-163">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e0c61-164">Informazioni su acquisizione video in DirectShow</span><span class="sxs-lookup"><span data-stu-id="e0c61-164">About Video Capture in DirectShow</span></span>](about-video-capture-in-directshow.md)
</dt> </dl>

 

 



