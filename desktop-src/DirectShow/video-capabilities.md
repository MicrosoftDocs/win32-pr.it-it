---
description: Funzionalità video
ms.assetid: 305bd009-f58e-4dcc-9b70-252de87dc86d
title: Funzionalità video
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6287839b75bd5044644480c3abcc8248cc46dc0a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "104555497"
---
# <a name="video-capabilities"></a><span data-ttu-id="fb111-103">Funzionalità video</span><span class="sxs-lookup"><span data-stu-id="fb111-103">Video Capabilities</span></span>

<span data-ttu-id="fb111-104">Il metodo [**IAMStreamConfig:: GetStreamCaps**](/windows/desktop/api/Strmif/nf-strmif-iamstreamconfig-getstreamcaps) presenta le funzionalità video in una matrice di coppie [**di \_ \_ tipi di supporto am**](/windows/win32/api/strmif/ns-strmif-am_media_type) e di [**\_ \_ configurazione \_ del flusso video**](/windows/win32/api/strmif/ns-strmif-video_stream_config_caps) .</span><span class="sxs-lookup"><span data-stu-id="fb111-104">The [**IAMStreamConfig::GetStreamCaps**](/windows/desktop/api/Strmif/nf-strmif-iamstreamconfig-getstreamcaps) method presents video capabilities in an array of pairs of [**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) and [**VIDEO\_STREAM\_CONFIG\_CAPS**](/windows/win32/api/strmif/ns-strmif-video_stream_config_caps) structures.</span></span> <span data-ttu-id="fb111-105">È possibile usarlo per esporre tutti i formati e le risoluzioni supportati in un PIN, come descritto di seguito.</span><span class="sxs-lookup"><span data-stu-id="fb111-105">You can use this to expose all the formats and resolutions supported on a pin as discussed below.</span></span>

<span data-ttu-id="fb111-106">Per esempi relativi all'audio di **GetStreamCaps**, vedere [funzionalità audio](audio-capabilities.md).</span><span class="sxs-lookup"><span data-stu-id="fb111-106">For audio-related examples of **GetStreamCaps**, see [Audio Capabilities](audio-capabilities.md).</span></span>

<span data-ttu-id="fb111-107">Si supponga che la scheda di acquisizione supporti il formato JPEG con tutte le risoluzioni comprese tra 160 x 120 pixel e 320 x 240 pixel, inclusi.</span><span class="sxs-lookup"><span data-stu-id="fb111-107">Suppose your capture card supports JPEG format at all resolutions between 160 x 120 pixels and 320 x 240 pixels, inclusive.</span></span> <span data-ttu-id="fb111-108">La differenza tra le risoluzioni supportate è una in questo caso perché si aggiunge o si sottrae un pixel da ogni risoluzione supportata per ottenere la risoluzione successiva supportata.</span><span class="sxs-lookup"><span data-stu-id="fb111-108">The difference between supported resolutions is one in this case because you add or subtract one pixel from each supported resolution to get the next supported resolution.</span></span> <span data-ttu-id="fb111-109">Questa differenza nelle risoluzioni supportate è detta granularità.</span><span class="sxs-lookup"><span data-stu-id="fb111-109">This difference in supported resolutions is called granularity.</span></span>

<span data-ttu-id="fb111-110">Si supponga che la scheda supporti anche le dimensioni 640 x 480.</span><span class="sxs-lookup"><span data-stu-id="fb111-110">Suppose your card also supports the size 640 x 480.</span></span> <span data-ttu-id="fb111-111">Di seguito viene illustrata questa singola risoluzione e l'intervallo di risoluzioni precedente (tutte le dimensioni comprese tra 160 x 120 pixel e 320 x 240 pixel).</span><span class="sxs-lookup"><span data-stu-id="fb111-111">The following illustrates this single resolution and the above range of resolutions (all sizes between 160 x 120 pixels and 320 x 240 pixels).</span></span>

![risoluzione da 160 x 120 a 320 x 240 pixel, più 640 x 480](images/strmcap1.png)

<span data-ttu-id="fb111-113">Si supponga inoltre che supporti il formato RGB a 24 bit alle risoluzioni comprese tra 160 x 120 e 320 x 240, ma con una granularità pari a 8.</span><span class="sxs-lookup"><span data-stu-id="fb111-113">Also, suppose it supports 24-bit color RGB format at resolutions between 160 x 120 and 320 x 240, but with a granularity of 8.</span></span> <span data-ttu-id="fb111-114">Nella figura seguente vengono illustrate alcune delle dimensioni valide in questo caso.</span><span class="sxs-lookup"><span data-stu-id="fb111-114">The following illustration shows some of the valid sizes in this case.</span></span>

![risoluzione da 160 x 120 a 320 a 240, con granularità = 8](images/strmcap3.png)

<span data-ttu-id="fb111-116">Per metterlo in un altro modo e elencare altre soluzioni, di seguito sono elencate tutte le soluzioni valide.</span><span class="sxs-lookup"><span data-stu-id="fb111-116">To put it another way, and listing more resolutions, the following are all among the list of valid resolutions.</span></span>

-   <span data-ttu-id="fb111-117">160 x 120</span><span class="sxs-lookup"><span data-stu-id="fb111-117">160 x 120</span></span>
-   <span data-ttu-id="fb111-118">168 x 120</span><span class="sxs-lookup"><span data-stu-id="fb111-118">168 x 120</span></span>
-   <span data-ttu-id="fb111-119">168 x 128</span><span class="sxs-lookup"><span data-stu-id="fb111-119">168 x 128</span></span>
-   <span data-ttu-id="fb111-120">176 x 128</span><span class="sxs-lookup"><span data-stu-id="fb111-120">176 x 128</span></span>
-   <span data-ttu-id="fb111-121">176 x 136</span><span class="sxs-lookup"><span data-stu-id="fb111-121">176 x 136</span></span>
-   <span data-ttu-id="fb111-122">... ulteriori risoluzioni...</span><span class="sxs-lookup"><span data-stu-id="fb111-122">... additional resolutions ...</span></span>
-   <span data-ttu-id="fb111-123">312 x 232</span><span class="sxs-lookup"><span data-stu-id="fb111-123">312 x 232</span></span>
-   <span data-ttu-id="fb111-124">320 x 240</span><span class="sxs-lookup"><span data-stu-id="fb111-124">320 x 240</span></span>

<span data-ttu-id="fb111-125">Usare **GetStreamCaps** per esporre le funzionalità relative al formato colori e alla dimensione offrendo un tipo di supporto di 320 x 240 JPEG (se le dimensioni predefinite o preferite) sono abbinate alle funzionalità minime di 160 x 120, alle capacità massime di 320 x 240 e a una granularità pari a 1.</span><span class="sxs-lookup"><span data-stu-id="fb111-125">Use **GetStreamCaps** to expose these color format and dimension capabilities by offering a media type of 320 x 240 JPEG (if that is your default or preferred size) coupled with minimum capabilities of 160 x 120, maximum capabilities of 320 x 240, and a granularity of 1.</span></span> <span data-ttu-id="fb111-126">La coppia successiva esposta tramite **GetStreamCaps** è un tipo di supporto di 640 x 480 JPEG accoppiato con un minimo di 640 x 480 e un massimo di 640 x 480 e una granularità pari a 0.</span><span class="sxs-lookup"><span data-stu-id="fb111-126">The next pair you expose by using **GetStreamCaps** is a media type of 640 x 480 JPEG coupled with a minimum of 640 x 480 and a maximum of 640 x 480 and a granularity of 0.</span></span> <span data-ttu-id="fb111-127">La terza coppia include un tipo di supporto di 320 x 240, RGB a 24 bit con funzionalità minime di 160 x 120, capacità massima di 320 x 240 e una granularità pari a 8.</span><span class="sxs-lookup"><span data-stu-id="fb111-127">The third pair includes a media type of 320 x 240, 24-bit RGB with minimum capabilities of 160 x 120, maximum capabilities of 320 x 240, and a granularity of 8.</span></span> <span data-ttu-id="fb111-128">In questo modo è possibile pubblicare quasi tutti i formati e le funzionalità che la scheda potrebbe supportare.</span><span class="sxs-lookup"><span data-stu-id="fb111-128">In this way you can publish almost every format and capability your card might support.</span></span> <span data-ttu-id="fb111-129">Un'applicazione che deve conoscere i formati di compressione forniti può ottenere tutte le coppie e creare un elenco di tutti i sottotipi univoci dei tipi di supporto.</span><span class="sxs-lookup"><span data-stu-id="fb111-129">An application that must know what compression formats you provide can get all the pairs and make a list of all the unique subtypes of the media types.</span></span>

<span data-ttu-id="fb111-130">Un filtro ottiene i rettangoli di origine e di destinazione del tipo di supporto rispettivamente dai membri **rcSource** e **RcTarget** della struttura [**VIDEOINFOHEADER**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader) .</span><span class="sxs-lookup"><span data-stu-id="fb111-130">A filter obtains its media type source and target rectangles from the [**VIDEOINFOHEADER**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader) structure's **rcSource** and **rcTarget** members, respectively.</span></span> <span data-ttu-id="fb111-131">I filtri non devono supportare i rettangoli di origine e di destinazione.</span><span class="sxs-lookup"><span data-stu-id="fb111-131">Filters do not have to support source and target rectangles.</span></span>

<span data-ttu-id="fb111-132">Il rettangolo di ritaglio descritto in tutta la documentazione di [**IAMStreamConfig**](/windows/desktop/api/Strmif/nn-strmif-iamstreamconfig) è uguale al rettangolo **RcSource** della struttura **VIDEOINFOHEADER** per il pin di output.</span><span class="sxs-lookup"><span data-stu-id="fb111-132">The cropping rectangle described throughout the [**IAMStreamConfig**](/windows/desktop/api/Strmif/nn-strmif-iamstreamconfig) documentation is the same as the **VIDEOINFOHEADER** structure's **rcSource** rectangle for the output pin.</span></span>

<span data-ttu-id="fb111-133">Il rettangolo di output descritto nella documentazione di **IAMStreamConfig** è identico a quello dei membri **biWidth** e **biHeight** della struttura **BITMAPINFOHEADER** del PIN di output. vedere la pagina relativa ai [dati DV nel formato di file AVI](dv-data-in-the-avi-file-format.md).</span><span class="sxs-lookup"><span data-stu-id="fb111-133">The output rectangle described throughout the **IAMStreamConfig** documentation is the same as the **biWidth** and **biHeight** members of the output pin's **BITMAPINFOHEADER** structure (see [DV Data in the AVI File Format](dv-data-in-the-avi-file-format.md).).</span></span>

<span data-ttu-id="fb111-134">Se un pin di output di un filtro è connesso a un tipo di supporto con rettangoli di origine e di destinazione non vuoti, il filtro è necessario per estendere il sottorettangolo di origine del formato di input nel sottorettangolo di destinazione del formato di output.</span><span class="sxs-lookup"><span data-stu-id="fb111-134">If a filter's output pin is connected to a media type with nonempty source and target rectangles, then your filter is required to stretch the input format's source subrectangle into the output format's target subrectangle.</span></span> <span data-ttu-id="fb111-135">Il sottorettangolo di origine viene archiviato nel membro **InputSize** della struttura [**\_ Caps di \_ configurazione \_ del flusso video**](/windows/win32/api/strmif/ns-strmif-video_stream_config_caps) .</span><span class="sxs-lookup"><span data-stu-id="fb111-135">The source subrectangle is stored in the [**VIDEO\_STREAM\_CONFIG\_CAPS**](/windows/win32/api/strmif/ns-strmif-video_stream_config_caps) structure's **InputSize** member.</span></span>

<span data-ttu-id="fb111-136">Si consideri, ad esempio, lo scenario di compressione video seguente: l'immagine di input è in formato RGB e ha una dimensione di 160 x 120 pixel.</span><span class="sxs-lookup"><span data-stu-id="fb111-136">For example, consider the following video compressor scenario: The input image is in RGB format and has a size of 160 x 120 pixels.</span></span> <span data-ttu-id="fb111-137">L'angolo superiore sinistro del rettangolo di origine è in corrispondenza della coordinata (20, 20) e nell'angolo inferiore destro si trova in corrispondenza di (30, 30).</span><span class="sxs-lookup"><span data-stu-id="fb111-137">The source rectangle's upper-left corner is at coordinate (20,20), and its lower-right corner is at (30,30).</span></span> <span data-ttu-id="fb111-138">L'immagine di output è in formato MPEG con una dimensione di 320 x 240.</span><span class="sxs-lookup"><span data-stu-id="fb111-138">The output image is in MPEG format with a size of 320 x 240.</span></span> <span data-ttu-id="fb111-139">L'angolo superiore sinistro del rettangolo di destinazione si trova in corrispondenza di (0, 0) e l'angolo inferiore destro è pari a (100.100).</span><span class="sxs-lookup"><span data-stu-id="fb111-139">The target rectangle's upper-left corner is at (0,0) and its lower-right corner is at (100,100).</span></span> <span data-ttu-id="fb111-140">In questo caso, il filtro deve prendere un pezzo da 10 x 10 della bitmap di origine RGB 160 x 120 e riempirlo con l'area superiore 100 x 100 di una bitmap 320 x 240, lasciando invariato il resto della bitmap 320 x 240.</span><span class="sxs-lookup"><span data-stu-id="fb111-140">In this case, the filter should take a 10 x 10 piece of the 160 x 120 RGB source bitmap, and make it fill the top 100 x 100 area of a 320 x 240 bitmap, leaving the rest of the 320 x 240 bitmap untouched.</span></span> <span data-ttu-id="fb111-141">Nella figura seguente viene illustrato questo scenario.</span><span class="sxs-lookup"><span data-stu-id="fb111-141">The following illustration shows this scenario.</span></span>

![estensione del sottorettangolo](images/strmcap4.png)

<span data-ttu-id="fb111-143">Un filtro potrebbe non supportare questa operazione e può non riuscire a connettersi con un tipo di supporto in cui **rcSource** e **rcTarget** non sono vuoti.</span><span class="sxs-lookup"><span data-stu-id="fb111-143">A filter might not support this and can fail to connect with a media type where **rcSource** and **rcTarget** are not empty.</span></span>

<span data-ttu-id="fb111-144">La struttura **VIDEOINFOHEADER** espone informazioni sulle funzionalità della velocità dei dati di un filtro.</span><span class="sxs-lookup"><span data-stu-id="fb111-144">The **VIDEOINFOHEADER** structure exposes information about a filter's data rate capabilities.</span></span> <span data-ttu-id="fb111-145">Si supponga, ad esempio, di aver connesso il pin di output al filtro successivo con un determinato tipo di supporto, direttamente o usando il tipo di supporto passato dalla funzione [**CMediaType:: Seformat**](cmediatype-setformat.md) .</span><span class="sxs-lookup"><span data-stu-id="fb111-145">For example, suppose you connected your output pin to the next filter with a certain media type (either directly or by using the media type passed by the [**CMediaType::SetFormat**](cmediatype-setformat.md) function).</span></span> <span data-ttu-id="fb111-146">Esaminare il membro **dwBitRate** della struttura del formato **VIDEOINFOHEADER** del tipo di supporto per visualizzare la velocità dei dati in cui si deve comprimere il video.</span><span class="sxs-lookup"><span data-stu-id="fb111-146">Look at the **dwBitRate** member of that media type's **VIDEOINFOHEADER** format structure to see what data rate you should compress the video to.</span></span> <span data-ttu-id="fb111-147">Se si moltiplica il numero di unità di tempo per fotogramma nel membro **AvgTimePerFrame** della struttura **VIDEOINFOHEADER** per la velocità dati nel membro **dwBitRate** e si divide per 10 milioni (numero di unità al secondo), è possibile determinare il numero di byte che ciascun frame deve avere.</span><span class="sxs-lookup"><span data-stu-id="fb111-147">If you multiply the number of units of time per frame in the **VIDEOINFOHEADER** structure's **AvgTimePerFrame** member by the data rate in the **dwBitRate** member and divide by 10,000,000 (the number of units per second), you can figure out how many bytes each frame should be.</span></span> <span data-ttu-id="fb111-148">È possibile produrre un frame di dimensioni inferiori, ma mai uno più grande.</span><span class="sxs-lookup"><span data-stu-id="fb111-148">You can produce a smaller sized frame, but never a larger one.</span></span> <span data-ttu-id="fb111-149">Per determinare la frequenza dei fotogrammi per un commediatore video o per un filtro di acquisizione, usare **AvgTimePerFrame** dal tipo di supporto del PIN di output.</span><span class="sxs-lookup"><span data-stu-id="fb111-149">To determine the frame rate for a video compressor or for a capture filter, use **AvgTimePerFrame** from your output pin's media type.</span></span>

 

 



