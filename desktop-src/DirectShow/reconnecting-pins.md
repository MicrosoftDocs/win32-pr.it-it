---
description: Riconnessione di pin
ms.assetid: 34b3e4de-e4eb-48c5-aaef-fc99b63e8691
title: Riconnessione di pin
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f9fc71b4d5a62ee066edaa5f97b4cc3332b2231d
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "104521321"
---
# <a name="reconnecting-pins"></a><span data-ttu-id="9b8ff-103">Riconnessione di pin</span><span class="sxs-lookup"><span data-stu-id="9b8ff-103">Reconnecting Pins</span></span>

<span data-ttu-id="9b8ff-104">Durante una connessione pin, un filtro può disconnettere e riconnettere uno degli altri pin, come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="9b8ff-104">During a pin connection, a filter can disconnect and reconnect one of its other pins, as follows:</span></span>

1.  <span data-ttu-id="9b8ff-105">Il filtro chiama [**Ipin:: QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) sul pin dell'altro filtro e specifica il nuovo tipo di supporto.</span><span class="sxs-lookup"><span data-stu-id="9b8ff-105">The filter calls [**IPin::QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) on the other filter's pin, and specifies the new media type.</span></span>
2.  <span data-ttu-id="9b8ff-106">Se **QueryAccept** restituisce S \_ OK, il filtro chiama [**IFilterGraph2:: ReconnectEx**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph2-reconnectex) per riconnettere i pin.</span><span class="sxs-lookup"><span data-stu-id="9b8ff-106">If **QueryAccept** returns S\_OK, the filter calls [**IFilterGraph2::ReconnectEx**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph2-reconnectex) to reconnect the pins.</span></span>

<span data-ttu-id="9b8ff-107">Di seguito sono riportati alcuni esempi di quando un filtro potrebbe dover riconnettere i pin:</span><span class="sxs-lookup"><span data-stu-id="9b8ff-107">The following are some examples of when a filter might need to reconnect pins:</span></span>

-   <span data-ttu-id="9b8ff-108">**Filtri tee.**</span><span class="sxs-lookup"><span data-stu-id="9b8ff-108">**Tee filters.**</span></span> <span data-ttu-id="9b8ff-109">Un *filtro Tee* suddivide un flusso di input in più output senza modificare i dati nel flusso.</span><span class="sxs-lookup"><span data-stu-id="9b8ff-109">A *tee filter* splits an input stream into multiple outputs without changing the data in the stream.</span></span> <span data-ttu-id="9b8ff-110">Un filtro Tee può accettare un intervallo di tipi di supporti, ma i tipi devono corrispondere in tutte le connessioni pin.</span><span class="sxs-lookup"><span data-stu-id="9b8ff-110">A tee filter can accept a range of media types, but the types must match across all pin connections.</span></span> <span data-ttu-id="9b8ff-111">Pertanto, quando il pin di input si connette, potrebbe essere necessario rinegoziare le connessioni esistenti nei pin di output e viceversa.</span><span class="sxs-lookup"><span data-stu-id="9b8ff-111">Therefore, when the input pin connects, the filter might need to renegotiate any existing connections on the output pins, and vice versa.</span></span> <span data-ttu-id="9b8ff-112">Per un esempio, vedere l'esempio di [filtro InfTee](inftee-filter-sample.md).</span><span class="sxs-lookup"><span data-stu-id="9b8ff-112">For an example, see the [InfTee Filter Sample](inftee-filter-sample.md).</span></span>
-   <span data-ttu-id="9b8ff-113">**Filtri trans-on-Place.**</span><span class="sxs-lookup"><span data-stu-id="9b8ff-113">**Trans-in-place filters.**</span></span> <span data-ttu-id="9b8ff-114">Un filtro *Trans-on-Place* modifica i dati di input nel buffer originale anziché copiare i dati in un buffer di output separato.</span><span class="sxs-lookup"><span data-stu-id="9b8ff-114">A *trans-in-place* filter modifies the input data in the original buffer instead of copying the data to a separate output buffer.</span></span> <span data-ttu-id="9b8ff-115">Un filtro Trans-on-Place deve usare lo stesso allocatore per le connessioni upstream e downstream.</span><span class="sxs-lookup"><span data-stu-id="9b8ff-115">A trans-in-place filter must use the same allocator for both the upstream and the downstream connections.</span></span> <span data-ttu-id="9b8ff-116">Il primo pin per connettersi (input o output) negozia un allocatore nel modo consueto.</span><span class="sxs-lookup"><span data-stu-id="9b8ff-116">The first pin to connect (input or output) negotiates an allocator in the usual way.</span></span> <span data-ttu-id="9b8ff-117">Quando l'altro pin si connette, tuttavia, il primo allocatore potrebbe non essere accettabile.</span><span class="sxs-lookup"><span data-stu-id="9b8ff-117">When the other pin connects, however, the first allocator might not be acceptable.</span></span> <span data-ttu-id="9b8ff-118">In tal caso, il secondo pin sceglie un allocatore diverso e il primo pin si riconnette usando il nuovo allocatore.</span><span class="sxs-lookup"><span data-stu-id="9b8ff-118">In that case, the second pin chooses a different allocator, and the first pin reconnects using the new allocator.</span></span> <span data-ttu-id="9b8ff-119">Per un'implementazione di esempio, vedere la classe [**CTransInPlaceFilter**](ctransinplacefilter.md) .</span><span class="sxs-lookup"><span data-stu-id="9b8ff-119">For an example implementation, see the [**CTransInPlaceFilter**](ctransinplacefilter.md) class.</span></span>

<span data-ttu-id="9b8ff-120">Nel metodo **ReconnectEx** , il gestore del grafico del filtro disconnette e riconnette in modo asincrono i pin.</span><span class="sxs-lookup"><span data-stu-id="9b8ff-120">In the **ReconnectEx** method, the Filter Graph Manager asynchronously disconnects and reconnects the pins.</span></span> <span data-ttu-id="9b8ff-121">Il filtro non deve tentare la riconnessione, a meno che **QueryAccept** non restituisca S \_ OK.</span><span class="sxs-lookup"><span data-stu-id="9b8ff-121">The filter must not attempt the reconnection unless **QueryAccept** returns S\_OK.</span></span> <span data-ttu-id="9b8ff-122">In caso contrario, il PIN verrà lasciato disconnesso, causando errori di grafo.</span><span class="sxs-lookup"><span data-stu-id="9b8ff-122">Otherwise, the pin will be left disconnected, causing graph errors.</span></span> <span data-ttu-id="9b8ff-123">Inoltre, il filtro deve richiedere la riconnessione dall'interno del metodo [**Ipin:: Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) nello stesso thread.</span><span class="sxs-lookup"><span data-stu-id="9b8ff-123">Also, the filter should request the reconnection from inside the [**IPin::Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) method, on the same thread.</span></span> <span data-ttu-id="9b8ff-124">Se il metodo **Connect** restituisce in un thread, mentre un altro thread esegue la richiesta di riconnessione, il grafico di gestione del filtro potrebbe eseguire il grafo prima di effettuare la riconnessione, causando errori di grafo.</span><span class="sxs-lookup"><span data-stu-id="9b8ff-124">If the **Connect** method returns on one thread, while another thread makes the reconnection request, the Filter Graph Manager might run the graph before it makes the reconnection, causing graph errors.</span></span>

 

 



