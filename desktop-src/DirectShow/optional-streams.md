---
description: Flussi facoltativi
ms.assetid: 94477a71-c267-4602-893b-1bd1256b34ef
title: Flussi facoltativi
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 940be49196396aa2d1fa71502213b0d4fbacb5ea
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "106303889"
---
# <a name="optional-streams"></a><span data-ttu-id="0be4a-103">Flussi facoltativi</span><span class="sxs-lookup"><span data-stu-id="0be4a-103">Optional Streams</span></span>

<span data-ttu-id="0be4a-104">Un DMO può designare alcuni dei flussi di output come facoltativi.</span><span class="sxs-lookup"><span data-stu-id="0be4a-104">A DMO can designate some of its output streams as optional.</span></span> <span data-ttu-id="0be4a-105">Un flusso facoltativo genera dati che l'applicazione può rimuovere, completamente o in caso di esempi occasionali.</span><span class="sxs-lookup"><span data-stu-id="0be4a-105">An optional stream produces data that the application can discard, either completely or on occasional samples.</span></span> <span data-ttu-id="0be4a-106">Ad esempio, un flusso facoltativo potrebbe contenere informazioni aggiuntive su un flusso primario.</span><span class="sxs-lookup"><span data-stu-id="0be4a-106">For example, an optional stream might contain additional information about a primary stream.</span></span>

<span data-ttu-id="0be4a-107">Per eseguire una query sull'eventuale presenza di un flusso facoltativo, chiamare il metodo [**IMediaObject:: GetOutputStreamInfo**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputstreaminfo) e controllare il parametro *pdwFlags* .</span><span class="sxs-lookup"><span data-stu-id="0be4a-107">To query whether a stream is optional, call the [**IMediaObject::GetOutputStreamInfo**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputstreaminfo) method and check the *pdwFlags* parameter.</span></span> <span data-ttu-id="0be4a-108">I flussi facoltativi restituiscono il \_ flag di output DMO \_ STREAMF \_ o il \_ \_ flag STREAMF facoltativo di output DMO \_ .</span><span class="sxs-lookup"><span data-stu-id="0be4a-108">Optional streams return either the DMO\_OUTPUT\_STREAMF\_DISCARDABLE flag or the DMO\_OUTPUT\_STREAMF\_OPTIONAL flag.</span></span> <span data-ttu-id="0be4a-109">Questi flag indicano quasi la stessa cosa. una differenza secondaria tra di essi verrà illustrata a breve.</span><span class="sxs-lookup"><span data-stu-id="0be4a-109">These flags mean almost the same thing; one minor difference between them will be explained shortly.</span></span>

<span data-ttu-id="0be4a-110">Se un flusso è facoltativo, il client può indicare a DMO di rimuovere i dati dal flusso quando elabora l'output.</span><span class="sxs-lookup"><span data-stu-id="0be4a-110">If a stream is optional, the client can instruct the DMO to discard data from that stream when it processes the output.</span></span> <span data-ttu-id="0be4a-111">A tale scopo, chiamare il metodo [**IMediaObject::P rocessoutput**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-processoutput) e impostare il buffer di output su **null** per ogni flusso che si desidera eliminare.</span><span class="sxs-lookup"><span data-stu-id="0be4a-111">To do so, call the [**IMediaObject::ProcessOutput**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-processoutput) method and set the output buffer to **NULL** for each stream that you wish to discard.</span></span> <span data-ttu-id="0be4a-112">Il buffer di output viene specificato nel membro **pbuffer** del [**\_ \_ \_ buffer dei dati di output DMO**](/previous-versions/windows/desktop/api/Mediaobj/ns-mediaobj-dmo_output_data_buffer). Impostare anche l' \_ output del processo DMO \_ \_ \_ se \_ non è presente alcun \_ flag del buffer nel parametro *dwFlags* .</span><span class="sxs-lookup"><span data-stu-id="0be4a-112">(The output buffer is specified in the **pBuffer** member of the [**DMO\_OUTPUT\_DATA\_BUFFER**](/previous-versions/windows/desktop/api/Mediaobj/ns-mediaobj-dmo_output_data_buffer).) Also set the DMO\_PROCESS\_OUTPUT\_DISCARD\_WHEN\_NO\_BUFFER flag in the *dwFlags* parameter.</span></span>

<span data-ttu-id="0be4a-113">Per ogni flusso in cui il puntatore *pbuffer* è **null**, DMO tenterà di eliminare i dati.</span><span class="sxs-lookup"><span data-stu-id="0be4a-113">For each stream where the *pBuffer* pointer is **NULL**, the DMO will attempt to discard the data.</span></span> <span data-ttu-id="0be4a-114">Se il flusso è facoltativo, è garantito che l'oggetto DMO elimini i dati.</span><span class="sxs-lookup"><span data-stu-id="0be4a-114">If the stream is optional, the DMO is guaranteed to discard the data.</span></span> <span data-ttu-id="0be4a-115">Se il flusso non è facoltativo, DMO Elimina i dati quando possibile, ma non è garantito.</span><span class="sxs-lookup"><span data-stu-id="0be4a-115">If the stream is not optional, the DMO discards the data when possible, but is not guaranteed to do so.</span></span> <span data-ttu-id="0be4a-116">Se non è possibile rimuovere i dati, imposta il \_ flag di output DMO \_ \_ BUFFERF data \_ .</span><span class="sxs-lookup"><span data-stu-id="0be4a-116">If it cannot discard the data, it sets the DMO\_OUTPUT\_DATA\_BUFFERF\_INCOMPLETE flag.</span></span> <span data-ttu-id="0be4a-117">Se si imposta un puntatore *pbuffer* su **null** ma non si imposta l'output del processo DMO per l' \_ \_ \_ eliminazione \_ quando non è \_ presente alcun \_ flag del buffer, DMO non rimuove i dati.</span><span class="sxs-lookup"><span data-stu-id="0be4a-117">If you set a *pBuffer* pointer to **NULL** but do not set the DMO\_PROCESS\_OUTPUT\_DISCARD\_WHEN\_NO\_BUFFER flag, the DMO does not discard the data.</span></span> <span data-ttu-id="0be4a-118">In tal caso, l'oggetto DMO memorizza nel buffer l'output internamente o semplicemente non riesce a eseguire la chiamata **ProcessOutput** .</span><span class="sxs-lookup"><span data-stu-id="0be4a-118">In that case, the DMO either buffers the output internally, or simply fails the **ProcessOutput** call.</span></span>

<span data-ttu-id="0be4a-119">L'unica differenza funzionale tra il \_ \_ flag STREAMF di output DMO \_ e il flag di \_ output DMO STREAMF facoltativo \_ \_ è la seguente:</span><span class="sxs-lookup"><span data-stu-id="0be4a-119">The only functional difference between the DMO\_OUTPUT\_STREAMF\_OPTIONAL flag and the DMO\_OUTPUT\_STREAMF\_DISCARDABLE flag is the following:</span></span>

-   <span data-ttu-id="0be4a-120">Il \_ flag di output DMO \_ STREAMF \_ facoltativo indica che il client non deve impostare un tipo di supporto su tale flusso.</span><span class="sxs-lookup"><span data-stu-id="0be4a-120">The DMO\_OUTPUT\_STREAMF\_OPTIONAL flag indicates that the client does not have to set a media type on that stream.</span></span> <span data-ttu-id="0be4a-121">Tuttavia, se il client inizia a elaborare i dati senza impostare il tipo di supporto per il flusso, deve eliminare i dati dal flusso per l'intera durata del flusso.</span><span class="sxs-lookup"><span data-stu-id="0be4a-121">However, if the client begins processing data without setting the media type for that stream, then it must discard the data from that stream for the entire duration of streaming.</span></span> <span data-ttu-id="0be4a-122">Se si desidera rimuovere gli esempi in modo selettivo, è necessario impostare il tipo di supporto.</span><span class="sxs-lookup"><span data-stu-id="0be4a-122">If you want to discard samples selectively, then you must set the media type.</span></span>
-   <span data-ttu-id="0be4a-123">Il \_ flag di output DMO \_ STREAMF \_ indica che, anche se il flusso è facoltativo, richiede sempre un tipo di supporto.</span><span class="sxs-lookup"><span data-stu-id="0be4a-123">The DMO\_OUTPUT\_STREAMF\_DISCARDABLE flag indicates that, although the stream is optional, it always requires a media type.</span></span>

## <a name="related-topics"></a><span data-ttu-id="0be4a-124">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="0be4a-124">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0be4a-125">Hosting diretto di un DMO</span><span class="sxs-lookup"><span data-stu-id="0be4a-125">Directly Hosting a DMO</span></span>](directly-hosting-a-dmo.md)
</dt> </dl>

 

 



