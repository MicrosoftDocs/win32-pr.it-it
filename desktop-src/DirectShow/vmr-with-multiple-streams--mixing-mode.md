---
description: VMR con più flussi (modalità di combinazione)
ms.assetid: 053edb70-8631-4fe4-a137-2fe54e02ab9e
title: VMR con più flussi (modalità di combinazione)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a21a954b0ad78afbceabf0fde493f920961b90dd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106314369"
---
# <a name="vmr-with-multiple-streams-mixing-mode"></a><span data-ttu-id="225f0-103">VMR con più flussi (modalità di combinazione)</span><span class="sxs-lookup"><span data-stu-id="225f0-103">VMR with Multiple Streams (Mixing Mode)</span></span>

<span data-ttu-id="225f0-104">VMR è in grado di eseguire il rendering di più flussi di input.</span><span class="sxs-lookup"><span data-stu-id="225f0-104">The VMR can render multiple input streams.</span></span> <span data-ttu-id="225f0-105">In questa configurazione, chiamata modalità di combinazione, VMR carica il mixer e il compositor per eseguire la combinazione e la fusione prima del rendering.</span><span class="sxs-lookup"><span data-stu-id="225f0-105">In this configuration, called mixing mode, the VMR loads its mixer and compositor to perform the mixing and blending prior to rendering.</span></span> <span data-ttu-id="225f0-106">La modalità di combinazione può essere usata quando il VMR è in modalità finestra o in modalità senza finestra.</span><span class="sxs-lookup"><span data-stu-id="225f0-106">Mixing mode can be used either while the VMR is in windowed mode or windowless mode.</span></span>

<span data-ttu-id="225f0-107">Per la modalità di combinazione è necessario che il driver di grafica supporti i \_ flag di funzionalità DDCAPS BLTFOURCC e DDCAPS \_ BLTSTRETCH (rispettivamente conversione dello spazio dei colori e stretch blitting).</span><span class="sxs-lookup"><span data-stu-id="225f0-107">Mixing mode requires that the graphics driver supports the DDCAPS\_BLTFOURCC and DDCAPS\_BLTSTRETCH capability flags (color space conversion and stretch blitting, respectively).</span></span> <span data-ttu-id="225f0-108">Quasi tutti i nuovi driver grafici hanno le stesse funzionalità.</span><span class="sxs-lookup"><span data-stu-id="225f0-108">Almost all new graphics drivers have those capabilities.</span></span> <span data-ttu-id="225f0-109">Inoltre, il driver deve supportare la creazione di destinazioni di rendering Direct3D per la profondità dei pixel di visualizzazione corrente.</span><span class="sxs-lookup"><span data-stu-id="225f0-109">In addition, the driver must support the creation of Direct3D render targets for the current display pixel depth.</span></span> <span data-ttu-id="225f0-110">Alcuni dispositivi non supportano le operazioni Direct3D quando la visualizzazione è impostata su 24 bit per pixel.</span><span class="sxs-lookup"><span data-stu-id="225f0-110">Some devices do not support Direct3D operations when the display is set to 24 bits per pixel.</span></span> <span data-ttu-id="225f0-111">Per ulteriori informazioni, vedere la documentazione di DirectX Graphics SDK.</span><span class="sxs-lookup"><span data-stu-id="225f0-111">For more information, see the DirectX Graphics SDK documentation.</span></span>

> [!Note]  
> <span data-ttu-id="225f0-112">Quando VMR combina più flussi video, il grafico del filtro non viene cercato correttamente.</span><span class="sxs-lookup"><span data-stu-id="225f0-112">When the VMR mixes multiple video streams, the filter graph does not seek correctly.</span></span> <span data-ttu-id="225f0-113">Se è necessario cercare più flussi video, è necessario creare grafici di filtro distinti che condividono lo stesso oggetto allocatore-Presenter personalizzato.</span><span class="sxs-lookup"><span data-stu-id="225f0-113">If you need to seek multiple video streams, you must create separate filter graphs that share the same custom allocator-presenter object.</span></span>

 

<span data-ttu-id="225f0-114">**Configurazione di VMR-7 per più flussi**</span><span class="sxs-lookup"><span data-stu-id="225f0-114">**Configuring the VMR-7 for Multiple Streams**</span></span>

<span data-ttu-id="225f0-115">Per eseguire il rendering di più flussi di input con VMR-7, eseguire le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="225f0-115">To render multiple input streams with the VMR-7, do the following:</span></span>

1.  <span data-ttu-id="225f0-116">Prima di connettere i pin di input di VMR, chiamare il metodo [**IVMRFilterConfig:: SetNumberOfStreams**](/windows/desktop/api/Strmif/nf-strmif-ivmrfilterconfig-setnumberofstreams) con il numero di flussi.</span><span class="sxs-lookup"><span data-stu-id="225f0-116">Before connecting any of the VMR's input pins, call the [**IVMRFilterConfig::SetNumberOfStreams**](/windows/desktop/api/Strmif/nf-strmif-ivmrfilterconfig-setnumberofstreams) method with the number of streams.</span></span> <span data-ttu-id="225f0-117">In questo modo, il VMR caricherà il mixer e il compositor e creerà il numero specificato di pin di input.</span><span class="sxs-lookup"><span data-stu-id="225f0-117">This causes the VMR to load the mixer and compositor and to create the specified number of input pins.</span></span>
2.  <span data-ttu-id="225f0-118">Chiamare [**IVMRFilterConfig:: SetRenderingPrefs**](/windows/desktop/api/Strmif/nf-strmif-ivmrfilterconfig-setrenderingprefs) per specificare diverse preferenze di rendering.</span><span class="sxs-lookup"><span data-stu-id="225f0-118">Call [**IVMRFilterConfig::SetRenderingPrefs**](/windows/desktop/api/Strmif/nf-strmif-ivmrfilterconfig-setrenderingprefs) to specify various rendering preferences.</span></span>
3.  <span data-ttu-id="225f0-119">Connettere i pin ai filtri upstream.</span><span class="sxs-lookup"><span data-stu-id="225f0-119">Connect the pins to the upstream filters.</span></span> <span data-ttu-id="225f0-120">Il modo più semplice per eseguire questa operazione è chiamare [**IGraphBuilder:: RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile) per ogni flusso di input.</span><span class="sxs-lookup"><span data-stu-id="225f0-120">The easiest way to do this is to call [**IGraphBuilder::RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile) for each input stream.</span></span> <span data-ttu-id="225f0-121">Se il pin di output sul filtro upstream (in genere un decodificatore) e il pin di input in VMR non sono in grado di accettare una connessione, verrà creata una nuova istanza di VMR con le impostazioni predefinite.</span><span class="sxs-lookup"><span data-stu-id="225f0-121">If the output pin on the upstream filter (usually a decoder) and the input pin on the VMR cannot agree on a connection, then a new instance of the VMR with default settings will be created.</span></span> <span data-ttu-id="225f0-122">Verrà generata una nuova finestra con "ActiveMovie" nella barra del titolo.</span><span class="sxs-lookup"><span data-stu-id="225f0-122">This will result in a new window with "ActiveMovie" in the title bar.</span></span> <span data-ttu-id="225f0-123">Per evitare che ciò accada, l'applicazione deve sempre verificare che venga usata l'istanza corretta di VMR chiamando un metodo come [**Ipin:: ConnectedTo**](/windows/desktop/api/Strmif/nf-strmif-ipin-connectedto).</span><span class="sxs-lookup"><span data-stu-id="225f0-123">To prevent this from happening, the application should always verify that the correct instance of the VMR is being used by calling a method such as [**IPin::ConnectedTo**](/windows/desktop/api/Strmif/nf-strmif-ipin-connectedto).</span></span> <span data-ttu-id="225f0-124">Un'altra opzione consiste nell'aggiungere il filtro di origine e quindi connettere i pin usando **IGraphBuilder:: Connect**.</span><span class="sxs-lookup"><span data-stu-id="225f0-124">Another option is to add the source filter and then connect the pins using **IGraphBuilder::Connect**.</span></span>
4.  <span data-ttu-id="225f0-125">Usare l'interfaccia [**IVMRMixerControl**](/windows/desktop/api/Strmif/nn-strmif-ivmrmixercontrol) in VMR per controllare i parametri per ogni flusso, ad esempio il valore alfa, l'ordinamento Z e il rettangolo di output.</span><span class="sxs-lookup"><span data-stu-id="225f0-125">Use the [**IVMRMixerControl**](/windows/desktop/api/Strmif/nn-strmif-ivmrmixercontrol) interface on the VMR to control parameters for each stream, such as the alpha value, the Z-ordering, and the output rectangle.</span></span>
5.  <span data-ttu-id="225f0-126">Eseguire il grafico dei filtri.</span><span class="sxs-lookup"><span data-stu-id="225f0-126">Run the filter graph.</span></span>

<span data-ttu-id="225f0-127">**Configurazione di VMR-9 per più flussi**</span><span class="sxs-lookup"><span data-stu-id="225f0-127">**Configuring the VMR-9 for Multiple Streams**</span></span>

<span data-ttu-id="225f0-128">Per impostazione predefinita, VMR-9 crea quattro pin di input.</span><span class="sxs-lookup"><span data-stu-id="225f0-128">By default, the VMR-9 creates four input pins.</span></span> <span data-ttu-id="225f0-129">Se si vogliono combinare più di quattro flussi video, chiamare [**IVMRFilterConfig9:: SetNumberOfStreams**](/previous-versions/windows/desktop/api/Vmr9/nf-vmr9-ivmrfilterconfig9-setnumberofstreams) prima di connettere i pin di input.</span><span class="sxs-lookup"><span data-stu-id="225f0-129">If you want to mix more than four video streams, call [**IVMRFilterConfig9::SetNumberOfStreams**](/previous-versions/windows/desktop/api/Vmr9/nf-vmr9-ivmrfilterconfig9-setnumberofstreams) before connecting any input pins.</span></span> <span data-ttu-id="225f0-130">Usare l'interfaccia [**IVMRMixerControl9**](/previous-versions/windows/desktop/api/Vmr9/nn-vmr9-ivmrmixercontrol9) per impostare i parametri del flusso, ad esempio Alpha, Z-order e position.</span><span class="sxs-lookup"><span data-stu-id="225f0-130">Use the [**IVMRMixerControl9**](/previous-versions/windows/desktop/api/Vmr9/nn-vmr9-ivmrmixercontrol9) interface to set the stream parameters, such as alpha, Z-order, and position.</span></span>

## <a name="related-topics"></a><span data-ttu-id="225f0-131">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="225f0-131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="225f0-132">Uso della modalità di combinazione VMR</span><span class="sxs-lookup"><span data-stu-id="225f0-132">Using VMR Mixing Mode</span></span>](using-vmr-mixing-mode.md)
</dt> </dl>

 

 



