---
description: Filtro Overlay Mixer
ms.assetid: e80938b7-31f0-467b-a3fa-c4511d14758d
title: Filtro Overlay Mixer
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d26ad8ba8a41a1cdb94eec0f4406c4845f25cda5
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "103875973"
---
# <a name="overlay-mixer-filter"></a><span data-ttu-id="b5eff-103">Filtro Overlay Mixer</span><span class="sxs-lookup"><span data-stu-id="b5eff-103">Overlay Mixer Filter</span></span>

<span data-ttu-id="b5eff-104">Il filtro overlay mixer è un renderer video progettato in modo specifico per la riproduzione DVD e la trasmissione di flussi video con didascalie chiuse a linee 21.</span><span class="sxs-lookup"><span data-stu-id="b5eff-104">The Overlay Mixer filter is a video renderer designed specifically for DVD playback and broadcast video streams with line-21 closed captioning.</span></span> <span data-ttu-id="b5eff-105">Il mixer overlay supporta anche VPEs (video Port Extensions), consentendo l'uso di decodificatori MPEG-2 hardware o sintonizzatori TV analoghi che inviano video direttamente alla scheda grafica, anziché sul bus PCI.</span><span class="sxs-lookup"><span data-stu-id="b5eff-105">The Overlay Mixer also supports Video Port Extensions (VPEs), enabling it to work with hardware MPEG-2 decoders or analog TV tuners that send video directly to the graphics card, rather than over the PCI bus.</span></span>

> [!Note]  
> <span data-ttu-id="b5eff-106">Il [renderer 9 di mixaggio video](video-mixing-renderer-filter-9.md) è ora preferito sul filtro del mixer sovrapposto, eccetto negli scenari VPE.</span><span class="sxs-lookup"><span data-stu-id="b5eff-106">The [Video Mixing Renderer 9](video-mixing-renderer-filter-9.md) is now preferred over the Overlay Mixer filter, except in VPE scenarios.</span></span>

 

<span data-ttu-id="b5eff-107">Il mixer overlay USA DirectDraw per il rendering.</span><span class="sxs-lookup"><span data-stu-id="b5eff-107">The Overlay Mixer uses DirectDraw for rendering.</span></span> <span data-ttu-id="b5eff-108">Richiede una superficie sovrapposta sulla scheda grafica.</span><span class="sxs-lookup"><span data-stu-id="b5eff-108">It requires an overlay surface on the graphics card.</span></span> <span data-ttu-id="b5eff-109">Il flusso video primario deve essere connesso al pin 0.</span><span class="sxs-lookup"><span data-stu-id="b5eff-109">The primary video stream should be connected to pin 0.</span></span> <span data-ttu-id="b5eff-110">I flussi secondari (grafica didascalia chiusa o immagini secondarie DVD) sono connessi ai pin 1 e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="b5eff-110">Secondary streams (closed caption graphics or DVD subpictures) are connected to pins 1 and higher.</span></span> <span data-ttu-id="b5eff-111">Il mixer overlay Blits i flussi secondari direttamente nel suface primario; non vengono combinate o combinate in modo alfa.</span><span class="sxs-lookup"><span data-stu-id="b5eff-111">The Overlay Mixer blits the secondary streams directly onto the primary suface; it does not mix or alpha blend them.</span></span>

<span data-ttu-id="b5eff-112">Il mixer overlay usa il renderer video per gestione finestre.</span><span class="sxs-lookup"><span data-stu-id="b5eff-112">The Overlay Mixer uses the Video Renderer for window management.</span></span> <span data-ttu-id="b5eff-113">Il renderer video si connette al pin di output del mixer overlay.</span><span class="sxs-lookup"><span data-stu-id="b5eff-113">The Video Renderer connects to the Overlay Mixer's output pin.</span></span>

<span data-ttu-id="b5eff-114">Questo filtro viene aggiunto automaticamente al grafico filtro quando le applicazioni utilizzano le interfacce [**IDvdGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-idvdgraphbuilder) e [**ICaptureGraphBuilder2**](/windows/desktop/api/Strmif/nn-strmif-icapturegraphbuilder2) per creare il grafico.</span><span class="sxs-lookup"><span data-stu-id="b5eff-114">This filter is added to the filter graph automatically when applications use the [**IDvdGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-idvdgraphbuilder) and [**ICaptureGraphBuilder2**](/windows/desktop/api/Strmif/nn-strmif-icapturegraphbuilder2) interfaces to create the graph.</span></span> <span data-ttu-id="b5eff-115">Il gestore del grafico del filtro non aggiungerà automaticamente il mixer della sovrimpressione al grafico.</span><span class="sxs-lookup"><span data-stu-id="b5eff-115">The Filter Graph Manager will not automatically add the Overlay Mixer to the graph.</span></span>

> [!Note]  
> <span data-ttu-id="b5eff-116">Nella tabella seguente, i sottotipi di supporto accettati nel pin di input 0 sono dipendenti dall'hardware.</span><span class="sxs-lookup"><span data-stu-id="b5eff-116">In the following table, the media subtypes accepted on input pin 0 are hardware dependent.</span></span> <span data-ttu-id="b5eff-117">Il mixer sovrapposto non è in grado di determinare se un sottotipo specifico è supportato fino a quando non viene creata la superficie DirectDraw.</span><span class="sxs-lookup"><span data-stu-id="b5eff-117">The Overlay Mixer cannot determine whether a particular subtype is supported until it creates the DirectDraw surface.</span></span> <span data-ttu-id="b5eff-118">Pertanto, l'unico modo per un filtro upstream per determinare se un sottotipo è supportato consiste nel tentare una connessione con tale sottotipo.</span><span class="sxs-lookup"><span data-stu-id="b5eff-118">Therefore, the only way for an upstream filter to determine whether a subtype is supported is to attempt a connection with that subtype.</span></span>

 



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><span data-ttu-id="b5eff-119">Interfacce di filtro</span><span class="sxs-lookup"><span data-stu-id="b5eff-119">Filter Interfaces</span></span></td>
<td><span data-ttu-id="b5eff-120"><a href="/windows/desktop/api/Strmif/nn-strmif-iamoverlayfx"><strong>IAMOverlayFX</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iamvideodecimationproperties"><strong>IAMVideoDecimationProperties</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ibasefilter"><strong>IBaseFilter</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo"><strong>IDDrawExclModeVideo</strong></a>, <a href="ikspropertyset.md"><strong>IKsPropertySet</strong></a>, <a href="/windows/desktop/api/Control/nn-control-imediaposition"><strong>IMediaPosition</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imediaseeking"><strong>IMediaSeeking</strong></a>, <a href="/previous-versions/windows/desktop/api/Mixerocx/nn-mixerocx-imixerocx"><strong>IMixerOCX</strong></a>, <a href="/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop"><strong>IQualProp</strong></a>, <a href="/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify"><strong>IVPNotify</strong></a>, <a href="/previous-versions/windows/desktop/api/vpnotify/nn-vpnotify-ivpnotify2"><strong>IVPNotify2</strong></a></span><span class="sxs-lookup"><span data-stu-id="b5eff-120"><a href="/windows/desktop/api/Strmif/nn-strmif-iamoverlayfx"><strong>IAMOverlayFX</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iamvideodecimationproperties"><strong>IAMVideoDecimationProperties</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ibasefilter"><strong>IBaseFilter</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo"><strong>IDDrawExclModeVideo</strong></a>, <a href="ikspropertyset.md"><strong>IKsPropertySet</strong></a>, <a href="/windows/desktop/api/Control/nn-control-imediaposition"><strong>IMediaPosition</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imediaseeking"><strong>IMediaSeeking</strong></a>, <a href="/previous-versions/windows/desktop/api/Mixerocx/nn-mixerocx-imixerocx"><strong>IMixerOCX</strong></a>, <a href="/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop"><strong>IQualProp</strong></a>, <a href="/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify"><strong>IVPNotify</strong></a>, <a href="/previous-versions/windows/desktop/api/vpnotify/nn-vpnotify-ivpnotify2"><strong>IVPNotify2</strong></a></span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="b5eff-121">Tipi di supporti pin di input</span><span class="sxs-lookup"><span data-stu-id="b5eff-121">Input Pin Media Types</span></span></td>
<td><span data-ttu-id="b5eff-122">Tipo principale: MEDIATYPE_Video</span><span class="sxs-lookup"><span data-stu-id="b5eff-122">Major Type: MEDIATYPE_Video</span></span><br/> <span data-ttu-id="b5eff-123">Sottotipi</span><span class="sxs-lookup"><span data-stu-id="b5eff-123">Subtypes:</span></span><br/>
<ul>
<li><span data-ttu-id="b5eff-124">MEDIASUBTYPE_Overlay (solo pin 0)</span><span class="sxs-lookup"><span data-stu-id="b5eff-124">MEDIASUBTYPE_Overlay (pin 0 only)</span></span></li>
<li><span data-ttu-id="b5eff-125">Formati YUV DirectDraw (solo pin 0)</span><span class="sxs-lookup"><span data-stu-id="b5eff-125">DirectDraw YUV formats (pin 0 only)</span></span></li>
<li><span data-ttu-id="b5eff-126">Formati di accelerazione video DirectDraw (solo pin 0)</span><span class="sxs-lookup"><span data-stu-id="b5eff-126">DirectDraw Video Acceleration formats (pin 0 only)</span></span></li>
<li><span data-ttu-id="b5eff-127">Formati RGB di DirectDraw (tutti i pin di input)</span><span class="sxs-lookup"><span data-stu-id="b5eff-127">DirectDraw RGB formats (all input pins)</span></span></li>
</ul>
<span data-ttu-id="b5eff-128">Tipi di formato:</span><span class="sxs-lookup"><span data-stu-id="b5eff-128">Format Types:</span></span><br/>
<ul>
<li><span data-ttu-id="b5eff-129">Format_VIDEOINFO</span><span class="sxs-lookup"><span data-stu-id="b5eff-129">Format_VIDEOINFO</span></span></li>
<li><span data-ttu-id="b5eff-130">Format_VIDEOINFO2</span><span class="sxs-lookup"><span data-stu-id="b5eff-130">Format_VIDEOINFO2</span></span></li>
</ul></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="b5eff-131">Interfacce pin di input</span><span class="sxs-lookup"><span data-stu-id="b5eff-131">Input Pin Interfaces</span></span></td>
<td><span data-ttu-id="b5eff-132"><a href="/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator"><strong>IAMVideoAccelerator</strong></a>, <a href="ikspin.md"><strong>IKsPin</strong></a>, <a href="ikspropertyset.md"><strong>IKsPropertySet</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imeminputpin"><strong>IMemInputPin</strong></a>, <a href="/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig"><strong>IMixerPinConfig</strong></a>, <a href="/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2"><strong>IMixerPinConfig2</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ioverlay"><strong>iOverlay</strong></a> (solo pin 0), <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>Ipin</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ipinconnection"><strong>IPinConnection</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a>, <a href="/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify"><strong>IVPNotify</strong></a>, <a href="/previous-versions/windows/desktop/api/vpnotify/nn-vpnotify-ivpnotify2"><strong>IVPNotify2</strong></a></span><span class="sxs-lookup"><span data-stu-id="b5eff-132"><a href="/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator"><strong>IAMVideoAccelerator</strong></a>, <a href="ikspin.md"><strong>IKsPin</strong></a>, <a href="ikspropertyset.md"><strong>IKsPropertySet</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imeminputpin"><strong>IMemInputPin</strong></a>, <a href="/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig"><strong>IMixerPinConfig</strong></a>, <a href="/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2"><strong>IMixerPinConfig2</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ioverlay"><strong>IOverlay</strong></a> (pin 0 only), <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>IPin</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ipinconnection"><strong>IPinConnection</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a>, <a href="/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify"><strong>IVPNotify</strong></a>, <a href="/previous-versions/windows/desktop/api/vpnotify/nn-vpnotify-ivpnotify2"><strong>IVPNotify2</strong></a></span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="b5eff-133">Tipi di supporti pin di output</span><span class="sxs-lookup"><span data-stu-id="b5eff-133">Output Pin Media Types</span></span></td>
<td><span data-ttu-id="b5eff-134">MEDIATYPE_Video, MEDIASUBTYPE_Overlay</span><span class="sxs-lookup"><span data-stu-id="b5eff-134">MEDIATYPE_Video, MEDIASUBTYPE_Overlay</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="b5eff-135">Interfacce del PIN di output</span><span class="sxs-lookup"><span data-stu-id="b5eff-135">Output Pin Interfaces</span></span></td>
<td><span data-ttu-id="b5eff-136"><a href="/windows/desktop/api/Control/nn-control-imediaposition"><strong>IMediaPosition</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imediaseeking"><strong>IMediaSeeking</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>Ipin</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a></span><span class="sxs-lookup"><span data-stu-id="b5eff-136"><a href="/windows/desktop/api/Control/nn-control-imediaposition"><strong>IMediaPosition</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imediaseeking"><strong>IMediaSeeking</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>IPin</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a></span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="b5eff-137">CLSID filtro</span><span class="sxs-lookup"><span data-stu-id="b5eff-137">Filter CLSID</span></span></td>
<td><span data-ttu-id="b5eff-138">CLSID_OverlayMixer</span><span class="sxs-lookup"><span data-stu-id="b5eff-138">CLSID_OverlayMixer</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="b5eff-139">CLSID della pagina delle proprietà</span><span class="sxs-lookup"><span data-stu-id="b5eff-139">Property Page CLSID</span></span></td>
<td><span data-ttu-id="b5eff-140">Nessuna pagina delle proprietà.</span><span class="sxs-lookup"><span data-stu-id="b5eff-140">No property page.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="b5eff-141">File eseguibile</span><span class="sxs-lookup"><span data-stu-id="b5eff-141">Executable</span></span></td>
<td><span data-ttu-id="b5eff-142">qdvd.dll</span><span class="sxs-lookup"><span data-stu-id="b5eff-142">qdvd.dll</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="b5eff-143"><a href="merit.md">Merito</a></span><span class="sxs-lookup"><span data-stu-id="b5eff-143"><a href="merit.md">Merit</a></span></span></td>
<td><span data-ttu-id="b5eff-144">MERIT_DO_NOT_USE</span><span class="sxs-lookup"><span data-stu-id="b5eff-144">MERIT_DO_NOT_USE</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="b5eff-145"><a href="filter-categories.md">Categoria filtro</a></span><span class="sxs-lookup"><span data-stu-id="b5eff-145"><a href="filter-categories.md">Filter Category</a></span></span></td>
<td><span data-ttu-id="b5eff-146">CLSID_LegacyAmFilterCategory</span><span class="sxs-lookup"><span data-stu-id="b5eff-146">CLSID_LegacyAmFilterCategory</span></span></td>
</tr>
</tbody>
</table>



 

### <a name="remarks"></a><span data-ttu-id="b5eff-147">Commenti</span><span class="sxs-lookup"><span data-stu-id="b5eff-147">Remarks</span></span>

<span data-ttu-id="b5eff-148">Il mixer overlay usa la chiave di colore di destinazione per combinare le superfici video con sovrimpressioni.</span><span class="sxs-lookup"><span data-stu-id="b5eff-148">The Overlay Mixer uses destination color keying to mix video surfaces with overlays.</span></span> <span data-ttu-id="b5eff-149">Blits la chiave di colore e il video secondario sull'area primaria e invia il video principale alla superficie di sovrapposizione.</span><span class="sxs-lookup"><span data-stu-id="b5eff-149">It blits the color key and the secondary video to the primary surface, and sends the primary video to the overlay surface.</span></span> <span data-ttu-id="b5eff-150">La scheda grafica compone quindi le due superfici nel buffer dei frame.</span><span class="sxs-lookup"><span data-stu-id="b5eff-150">The graphics card then composites the two surfaces into its frame buffer.</span></span>

<span data-ttu-id="b5eff-151">Per verificare se il driver di grafica supporta la sovrimpressione hardware, chiamare **IDirectDraw7:: getcaps**.</span><span class="sxs-lookup"><span data-stu-id="b5eff-151">To test whether the graphics driver supports hardware overlay, call **IDirectDraw7::GetCaps**.</span></span> <span data-ttu-id="b5eff-152">Se il campo **dwMaxVisibleOverlays** nella struttura **DDCAPS** è maggiore di zero, il driver supporta la sovrimpressione hardware.</span><span class="sxs-lookup"><span data-stu-id="b5eff-152">If the **dwMaxVisibleOverlays** field in the **DDCAPS** structure is greater than zero, the driver supports hardware overlay.</span></span>

<span data-ttu-id="b5eff-153">Le applicazioni possono controllare alcuni comportamenti sul mixer sovrapposto tramite l'interfaccia [**IMixerPinConfig2**](/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2) .</span><span class="sxs-lookup"><span data-stu-id="b5eff-153">Applications can control some behaviors on the Overlay Mixer through the [**IMixerPinConfig2**](/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2) interface.</span></span> <span data-ttu-id="b5eff-154">Gli sviluppatori di giochi possono usare il mixer overlay per visualizzare i video in modalità esclusiva di DirectDraw, come descritto più avanti in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="b5eff-154">Game developers can use the Overlay Mixer to display video in DirectDraw Exclusive Mode, as described later in this section.</span></span> <span data-ttu-id="b5eff-155">Il [filtro del renderer video mixing 9](video-mixing-renderer-filter-9.md) (VMR-9) offre ora un supporto migliore per i video nei giochi.</span><span class="sxs-lookup"><span data-stu-id="b5eff-155">The [Video Mixing Renderer Filter 9](video-mixing-renderer-filter-9.md) (VMR-9) now provides better support for video in games, however.</span></span> <span data-ttu-id="b5eff-156">Per ulteriori informazioni, vedere [using the video Mixing Renderer](using-the-video-mixing-renderer.md).</span><span class="sxs-lookup"><span data-stu-id="b5eff-156">For more information, see [Using the Video Mixing Renderer](using-the-video-mixing-renderer.md).</span></span>

<span data-ttu-id="b5eff-157">Vengono fornite le informazioni seguenti per il vantaggio di filtrare gli sviluppatori e gli sviluppatori di giochi che desiderano utilizzare il mixer overlay in modalità esclusiva DirectDraw.</span><span class="sxs-lookup"><span data-stu-id="b5eff-157">The following information is provided for the benefit of filter developers, and game developers who want to use the Overlay Mixer in DirectDraw Exclusive Mode.</span></span>

<span data-ttu-id="b5eff-158">**Operazioni interne del mixer overlay**</span><span class="sxs-lookup"><span data-stu-id="b5eff-158">**Overlay Mixer Internal Operations**</span></span>

<span data-ttu-id="b5eff-159">Il mixer overlay espone un pin di input per ogni flusso in ingresso.</span><span class="sxs-lookup"><span data-stu-id="b5eff-159">The Overlay Mixer exposes an input pin for each incoming stream.</span></span> <span data-ttu-id="b5eff-160">In genere, sono presenti tre pin di input: pin 0 per i dati video e pin 1 e 2 per la riga 21 e i dati delle sottoimmagini DVD.</span><span class="sxs-lookup"><span data-stu-id="b5eff-160">Typically, there are three input pins: pin 0 for video data, and pins 1 and 2 for line 21 and DVD subpicture data.</span></span> <span data-ttu-id="b5eff-161">Internamente, il mixer overlay crea un oggetto DirectDraw con una superficie primaria che comprende l'intero desktop, più una superficie sovrapposta il cui rettangolo è definito dalla dimensione del flusso video sul pin 0.</span><span class="sxs-lookup"><span data-stu-id="b5eff-161">Internally, the Overlay Mixer creates a DirectDraw object with a primary surface comprising the entire desktop, plus an overlay surface whose rectangle is defined by the size of the video stream on Pin 0.</span></span> <span data-ttu-id="b5eff-162">Se il decodificatore non specifica una chiave di colore, il mixer overlay usa le chiavi di colore predefinite: grigio scuro per le schede grafiche più recenti e magenta per le schede a colori 256 precedenti.</span><span class="sxs-lookup"><span data-stu-id="b5eff-162">If the decoder does not specify a color key, the Overlay Mixer uses default color keys: dark gray for more recent graphics cards and magenta for older 256-color cards.</span></span>

> [!Note]  
> <span data-ttu-id="b5eff-163">I risultati non sono definiti se il decodificatore recapita due flussi video secondari contemporaneamente nella stessa posizione sulla superficie della sovrimpressione.</span><span class="sxs-lookup"><span data-stu-id="b5eff-163">The results are undefined if the decoder delivers two secondary video streams simultaneously in the same place on the overlay surface.</span></span> <span data-ttu-id="b5eff-164">Questo problema si verifica a volte con DVD che contengono flussi di immagini e 21. Il video potrebbe sfarfallare o visualizzare solo uno dei flussi.</span><span class="sxs-lookup"><span data-stu-id="b5eff-164">(This sometimes occurs with DVDs that contain subpicture and line 21 streams.) The video might flicker, or display only one of the streams.</span></span>

 

<span data-ttu-id="b5eff-165">In Windows Vista o versioni successive, il mixer sovrimpressione Disabilita la Gestione finestre desktop (DWM) se il driver di visualizzazione supporta la sovrimpressione hardware.</span><span class="sxs-lookup"><span data-stu-id="b5eff-165">On Windows Vista or later, the Overlay Mixer disables Desktop Window Manager (DWM) composition if the display driver supports hardware overlay.</span></span> <span data-ttu-id="b5eff-166">Le applicazioni devono evitare di usare il filtro overlay mixer; usare invece VMR-9 o il renderer video avanzato (EVR).</span><span class="sxs-lookup"><span data-stu-id="b5eff-166">Applications should avoid using the Overlay Mixer filter; use the VMR-9 or the Enhanced Video Renderer (EVR) instead.</span></span>

<span data-ttu-id="b5eff-167">**Connessione upstream con il decodificatore video**</span><span class="sxs-lookup"><span data-stu-id="b5eff-167">**Upstream Connection with the Video Decoder**</span></span>

<span data-ttu-id="b5eff-168">In genere, i pin di input del mixer overlay si connettono a un decodificatore video upstream.</span><span class="sxs-lookup"><span data-stu-id="b5eff-168">Typically the Overlay Mixer's input pins connect to an upstream video decoder.</span></span> <span data-ttu-id="b5eff-169">Il flusso video primario deve connettersi al pin 0.</span><span class="sxs-lookup"><span data-stu-id="b5eff-169">The primary video stream must connect to the pin 0.</span></span> <span data-ttu-id="b5eff-170">I flussi della riga 21 o della sottoimmagine si connettono al pin 1 o superiore.</span><span class="sxs-lookup"><span data-stu-id="b5eff-170">The line 21 or subpicture streams connect to pin 1 or greater.</span></span> <span data-ttu-id="b5eff-171">Se il decodificatore è un decodificatore software che usa esclusivamente la CPU dell'host, la connessione tra il decodificatore e il pin 0 è una connessione [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) .</span><span class="sxs-lookup"><span data-stu-id="b5eff-171">If the decoder is a software decoder that uses the host CPU exclusively, the connection between the decoder and the Pin 0 is an [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) connection.</span></span> <span data-ttu-id="b5eff-172">Se il decodificatore usa l'accelerazione hardware, la connessione al pin 0 deve usare [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) interfaccia.</span><span class="sxs-lookup"><span data-stu-id="b5eff-172">If the decoder uses hardware acceleration, the connection to Pin 0 must use the [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) inferface.</span></span> <span data-ttu-id="b5eff-173">Questi due tipi di connessioni si escludono a vicenda.</span><span class="sxs-lookup"><span data-stu-id="b5eff-173">These two types of connections are mutually exclusive.</span></span>

<span data-ttu-id="b5eff-174">Se il decodificatore viene disegnato direttamente sulla superficie della sovrimpressione, deve usare l'interfaccia [**iOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay) sul pin 0 e implementare l'interfaccia [**IOverlayNotify**](/windows/desktop/api/Strmif/nn-strmif-ioverlaynotify) .</span><span class="sxs-lookup"><span data-stu-id="b5eff-174">If the decoder draws directly onto the overlay surface, it should use the [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay) interface on pin 0 and implement the [**IOverlayNotify**](/windows/desktop/api/Strmif/nn-strmif-ioverlaynotify) interface.</span></span>

<span data-ttu-id="b5eff-175">I filtri che racchiudono un decodificatore hardware e si connettono al mixer sovrapposto tramite una porta video devono implementare l'interfaccia [**IVPConfig**](/previous-versions/windows/desktop/api/Vpconfig/nn-vpconfig-ivpconfig) .</span><span class="sxs-lookup"><span data-stu-id="b5eff-175">Filters that wrap a hardware decoder and connect to the Overlay Mixer through a video port must implement the [**IVPConfig**](/previous-versions/windows/desktop/api/Vpconfig/nn-vpconfig-ivpconfig) interface.</span></span> <span data-ttu-id="b5eff-176">Il mixer overlay implementa l'interfaccia [**IVPNotify**](/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify) .</span><span class="sxs-lookup"><span data-stu-id="b5eff-176">The Overlay Mixer implements the [**IVPNotify**](/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify) interface.</span></span> <span data-ttu-id="b5eff-177">Queste due interfacce consentono al decodificatore di specificare le superfici di sovrapposizione richieste e consentono al mixer della sovrimpressione di indicare al decodificatore la posizione di tali superfici nella memoria video.</span><span class="sxs-lookup"><span data-stu-id="b5eff-177">These two interfaces enable the decoder to specify the overlay surfaces it requires, and they enable the Overlay Mixer to inform the decoder of the location of those surfaces in video memory.</span></span>

<span data-ttu-id="b5eff-178">Il mixer overlay garantisce inoltre che il rettangolo video venga ridimensionato correttamente.</span><span class="sxs-lookup"><span data-stu-id="b5eff-178">The Overlay Mixer also ensures that the video rectangle is scaled correctly.</span></span> <span data-ttu-id="b5eff-179">L'acquisizione video comporta determinati problemi per quanto riguarda il ridimensionamento dell'immagine di anteprima e l'acquisizione di fotogrammi video con interfoliazione.</span><span class="sxs-lookup"><span data-stu-id="b5eff-179">Video capture involves certain issues with respect to scaling the preview image and capturing interleaved video frames.</span></span> <span data-ttu-id="b5eff-180">Se si sviluppa un filtro o un driver WDM per un dispositivo di acquisizione video hardware, vedere le pagine di riferimento [**IVPConfig**](/previous-versions/windows/desktop/api/Vpconfig/nn-vpconfig-ivpconfig) e [**IVPNotify**](/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify) per altre informazioni su questi argomenti.</span><span class="sxs-lookup"><span data-stu-id="b5eff-180">If you are developing a filter or WDM driver for a hardware video capture device, refer to the [**IVPConfig**](/previous-versions/windows/desktop/api/Vpconfig/nn-vpconfig-ivpconfig) and [**IVPNotify**](/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify) reference pages for more information on these topics.</span></span>

<span data-ttu-id="b5eff-181">Il mixer overlay non viene usato negli scenari di acquisizione 1394 o USB.</span><span class="sxs-lookup"><span data-stu-id="b5eff-181">The Overlay Mixer is not used in 1394 or USB capture scenarios.</span></span> <span data-ttu-id="b5eff-182">Viene usato nell'acquisizione video tramite il bus PCI.</span><span class="sxs-lookup"><span data-stu-id="b5eff-182">It is used in video capture over the PCI bus.</span></span>

<span data-ttu-id="b5eff-183">**Connessione downstream con il renderer video**</span><span class="sxs-lookup"><span data-stu-id="b5eff-183">**Downstream Connection with the Video Renderer**</span></span>

<span data-ttu-id="b5eff-184">Il mixer di sovrimpressione ha un pin di output che si connette al filtro [renderer video](video-renderer-filter.md) .</span><span class="sxs-lookup"><span data-stu-id="b5eff-184">The Overlay Mixer has an output pin that connects to the [Video Renderer](video-renderer-filter.md) filter.</span></span> <span data-ttu-id="b5eff-185">Il renderer video, in questo caso, non esegue il rendering del video; gestisce semplicemente la finestra video.</span><span class="sxs-lookup"><span data-stu-id="b5eff-185">The Video Renderer in this case does not render the video; it simply manages the video window.</span></span>

<span data-ttu-id="b5eff-186">La connessione pin usa l'interfaccia [**iOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay) anziché l'interfaccia [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) .</span><span class="sxs-lookup"><span data-stu-id="b5eff-186">The pin connection uses the [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay) interface rather than the [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) interface.</span></span> <span data-ttu-id="b5eff-187">Il renderer video passa il relativo handle di finestra tramite il mixer overlay a DirectDraw, che gestisce il ritaglio del rettangolo.</span><span class="sxs-lookup"><span data-stu-id="b5eff-187">The Video Renderer passes its window handle through the Overlay Mixer to DirectDraw, which manages the rectangle clipping.</span></span> <span data-ttu-id="b5eff-188">Le applicazioni possono controllare il renderer video tramite le interfacce [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow) e [**IBasicVideo2**](/windows/desktop/api/Control/nn-control-ibasicvideo2) in gestione grafico dei filtri.</span><span class="sxs-lookup"><span data-stu-id="b5eff-188">Applications can control the Video Renderer through the [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow) and [**IBasicVideo2**](/windows/desktop/api/Control/nn-control-ibasicvideo2) interfaces on the Filter Graph Manager.</span></span>

<span data-ttu-id="b5eff-189">**Modalità esclusiva di DirectDraw**</span><span class="sxs-lookup"><span data-stu-id="b5eff-189">**DirectDraw Exclusive Mode**</span></span>

<span data-ttu-id="b5eff-190">La modalità esclusiva DirectDraw del mixer overlay consente ai giochi di visualizzare video in una parte dello schermo.</span><span class="sxs-lookup"><span data-stu-id="b5eff-190">The Overlay Mixer's DirectDraw exclusive mode enables games to display video on some part of the screen.</span></span> <span data-ttu-id="b5eff-191">In questa modalità, il mixer di sovrimpressione esegue il rendering del video direttamente in una superficie DirectDraw creata dall'applicazione di gioco, anziché in una finestra fornita dal renderer video.</span><span class="sxs-lookup"><span data-stu-id="b5eff-191">In this mode, the Overlay Mixer renders the video directly to a DirectDraw surface created by the game application, rather than to a window provided by the Video Renderer.</span></span> <span data-ttu-id="b5eff-192">Questo consente ai giochi di controllare la chiave di colore.</span><span class="sxs-lookup"><span data-stu-id="b5eff-192">This enables games to control the color key.</span></span> <span data-ttu-id="b5eff-193">Il mixer sovrimpressione espone solo un pin di input in modalità esclusiva DirectDraw, il che significa che in questa modalità non è possibile eseguire la combinazione di una singola riga 21 o DVD.</span><span class="sxs-lookup"><span data-stu-id="b5eff-193">The Overlay Mixer exposes only one input pin in DirectDraw exclusive mode, which means that no mixing of Line 21 or DVD subpicture can be performed in this mode.</span></span>

<span data-ttu-id="b5eff-194">Per usare il mixer overlay in modalità esclusiva DirectDraw, creare un'istanza del mixer overlay ed eseguire una query per l'interfaccia [**IDDrawExclModeVideo**](/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo) prima di compilare il grafico del filtro.</span><span class="sxs-lookup"><span data-stu-id="b5eff-194">To use the Overlay Mixer in DirectDraw exclusive mode, create an instance of the Overlay Mixer and query it for the [**IDDrawExclModeVideo**](/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo) interface before building the filter graph.</span></span> <span data-ttu-id="b5eff-195">Chiamare quindi [**IDDrawExclModeVideo:: SetDDrawSurface**](/windows/desktop/api/Strmif/nf-strmif-iddrawexclmodevideo-setddrawsurface) per specificare la superficie DirectDraw per il rendering.</span><span class="sxs-lookup"><span data-stu-id="b5eff-195">Then call [**IDDrawExclModeVideo::SetDDrawSurface**](/windows/desktop/api/Strmif/nf-strmif-iddrawexclmodevideo-setddrawsurface) to specify the DirectDraw surface for rendering.</span></span> <span data-ttu-id="b5eff-196">Una limitazione significativa di questa modalità è che il gioco non ottiene l'accesso ai bit di video effettivi.</span><span class="sxs-lookup"><span data-stu-id="b5eff-196">One significant limitation of this mode is that the game does not get access to the actual video bits.</span></span> <span data-ttu-id="b5eff-197">Se si usa **IDDrawExclModeVideo**, l'applicazione crea la superficie primaria e il mixer di sovrapposizione crea la superficie della sovrimpressione.</span><span class="sxs-lookup"><span data-stu-id="b5eff-197">If you use **IDDrawExclModeVideo**, your application creates the primary surface, and the Overlay Mixer creates the overlay surface.</span></span>

<span data-ttu-id="b5eff-198">È anche possibile usare la modalità esclusiva DirectDraw per eseguire il rendering senza finestra, ad esempio in una pagina Web, ma questa operazione non è consigliata, perché il mixer overlay non esegue alcuna operazione di combinazione in questa modalità.</span><span class="sxs-lookup"><span data-stu-id="b5eff-198">You can also use DirectDraw exclusive mode to perform windowless rendering—for example, in a Web page—but this is not recommended, because the Overlay Mixer does not perform any mixing in this mode.</span></span> <span data-ttu-id="b5eff-199">Ciò significa che non è possibile visualizzare alcuna riga 21 o dati di immagine.</span><span class="sxs-lookup"><span data-stu-id="b5eff-199">This means that no line 21 or subpicture data can be displayed.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b5eff-200">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="b5eff-200">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b5eff-201">Filtri DirectShow</span><span class="sxs-lookup"><span data-stu-id="b5eff-201">DirectShow Filters</span></span>](directshow-filters.md)
</dt> </dl>

 

 




