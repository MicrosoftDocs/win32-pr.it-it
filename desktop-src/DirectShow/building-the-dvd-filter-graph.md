---
description: Creazione del grafico del filtro DVD
ms.assetid: 1d2f8284-2deb-4207-b067-24a54d6b286c
title: Creazione del grafico del filtro DVD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 96d15c7d84ec138771e1f5da8be4270faae049cc
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "104125313"
---
# <a name="building-the-dvd-filter-graph"></a><span data-ttu-id="a236a-103">Creazione del grafico del filtro DVD</span><span class="sxs-lookup"><span data-stu-id="a236a-103">Building the DVD Filter Graph</span></span>

<span data-ttu-id="a236a-104">Come per qualsiasi applicazione DirectShow, un'applicazione di riproduzione DVD inizia con la creazione di un grafico di filtro.</span><span class="sxs-lookup"><span data-stu-id="a236a-104">As with any DirectShow application, a DVD playback application starts by building a filter graph.</span></span> <span data-ttu-id="a236a-105">DirectShow fornisce i componenti seguenti per la riproduzione DVD:</span><span class="sxs-lookup"><span data-stu-id="a236a-105">DirectShow provides the following components for DVD playback:</span></span>

-   <span data-ttu-id="a236a-106">[Generatore di grafici DVD](dvd-graph-builder.md).</span><span class="sxs-lookup"><span data-stu-id="a236a-106">[DVD Graph Builder](dvd-graph-builder.md).</span></span> <span data-ttu-id="a236a-107">Oggetto helper che costruisce il grafico del filtro.</span><span class="sxs-lookup"><span data-stu-id="a236a-107">A helper object that constructs the filter graph.</span></span> <span data-ttu-id="a236a-108">Espone l'interfaccia [**IDvdGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-idvdgraphbuilder) .</span><span class="sxs-lookup"><span data-stu-id="a236a-108">It exposes the [**IDvdGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-idvdgraphbuilder) interface.</span></span>
-   <span data-ttu-id="a236a-109">Filtro del [navigatore DVD](dvd-navigator-filter.md) .</span><span class="sxs-lookup"><span data-stu-id="a236a-109">[DVD Navigator](dvd-navigator-filter.md) filter.</span></span> <span data-ttu-id="a236a-110">Filtro DirectShow che gestisce la riproduzione DVD, la navigazione e altri comandi.</span><span class="sxs-lookup"><span data-stu-id="a236a-110">A DirectShow filter that handles DVD playback, navigation, and other commands.</span></span>

<span data-ttu-id="a236a-111">La riproduzione DVD richiede anche un decodificatore MPEG-2.</span><span class="sxs-lookup"><span data-stu-id="a236a-111">DVD playback also requires an MPEG-2 decoder.</span></span> <span data-ttu-id="a236a-112">I decodificatori MPEG-2 hardware e software sono disponibili da terze parti.</span><span class="sxs-lookup"><span data-stu-id="a236a-112">Hardware and software MPEG-2 decoders are available from third parties.</span></span> <span data-ttu-id="a236a-113">Per prima cosa, creare un'istanza dell'oggetto generatore di grafici DVD.</span><span class="sxs-lookup"><span data-stu-id="a236a-113">First, create an instance of the DVD Graph Builder object.</span></span>


```C++
IDvdGraphBuilder *pBuild = NULL;
hr = CoCreateInstance(CLSID_DvdGraphBuilder, NULL, 
    CLSCTX_INPROC_SERVER, IID_IDvdGraphBuilder, (void **)&pBuild);
```



<span data-ttu-id="a236a-114">A questo punto, è possibile selezionare e configurare il renderer video prima di compilare il resto del grafo.</span><span class="sxs-lookup"><span data-stu-id="a236a-114">At this point, you can select and configure the video renderer before you build the rest of the graph.</span></span> <span data-ttu-id="a236a-115">Questo passaggio, facoltativo, viene descritto più dettagliatamente nella sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="a236a-115">This step, which is optional, is described in more detail in the next section.</span></span> <span data-ttu-id="a236a-116">Se si omette questo passaggio, il generatore di DVD Graph seleziona un renderer predefinito.</span><span class="sxs-lookup"><span data-stu-id="a236a-116">If you omit this step, the DVD Graph Builder selects a default renderer.</span></span> <span data-ttu-id="a236a-117">Compilare quindi il grafo chiamando il metodo [**IDvdGraphBuilder:: RenderDvdVideoVolume**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-renderdvdvideovolume) .</span><span class="sxs-lookup"><span data-stu-id="a236a-117">Next, build the graph by calling the [**IDvdGraphBuilder::RenderDvdVideoVolume**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-renderdvdvideovolume) method.</span></span>


```C++
AM_DVD_RENDERSTATUS buildStatus;
hr = pBuild->RenderDvdVideoVolume(L"Z:\\video_ts", 0, &buildStatus);
```



<span data-ttu-id="a236a-118">Il primo parametro è il nome di una directory che contiene i file DVD.</span><span class="sxs-lookup"><span data-stu-id="a236a-118">The first parameter is the name of a directory that contains the DVD files.</span></span> <span data-ttu-id="a236a-119">In un disco DVD questi file si trovano in una directory denominata VIDEO \_ TS.</span><span class="sxs-lookup"><span data-stu-id="a236a-119">On a DVD disc, these files reside in a directory named VIDEO\_TS.</span></span> <span data-ttu-id="a236a-120">Se il primo parametro è **null**, il generatore di DVD Graph usa la prima unità che contiene un volume DVD.</span><span class="sxs-lookup"><span data-stu-id="a236a-120">If the first parameter is **NULL**, the DVD Graph Builder uses the first drive that contains a DVD volume.</span></span>

<span data-ttu-id="a236a-121">Il secondo parametro contiene diversi flag facoltativi per la scelta del tipo di decodificatore (hardware o software) e di altre opzioni.</span><span class="sxs-lookup"><span data-stu-id="a236a-121">The second parameter contains various optional flags for choosing the type of decoder (hardware or software) and other options.</span></span>

<span data-ttu-id="a236a-122">Il terzo parametro è una [**struttura \_ \_ RENDERSTATUS DVD**](/windows/win32/api/strmif/ns-strmif-am_dvd_renderstatus) che riceve informazioni sullo stato.</span><span class="sxs-lookup"><span data-stu-id="a236a-122">The third parameter is an [**AM\_DVD\_RENDERSTATUS**](/windows/win32/api/strmif/ns-strmif-am_dvd_renderstatus) structure that receives status information.</span></span> <span data-ttu-id="a236a-123">Se il metodo [**RenderDvdVideoVolume**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-renderdvdvideovolume) restituisce \_ false, significa che la chiamata è parzialmente riuscita (o parzialmente non riuscita, se si è un pessimistico).</span><span class="sxs-lookup"><span data-stu-id="a236a-123">If the [**RenderDvdVideoVolume**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-renderdvdvideovolume) method returns S\_FALSE, it means the call partially succeeded (or partially failed, if you're a pessimist).</span></span> <span data-ttu-id="a236a-124">Ad esempio, il metodo potrebbe non essere in grado di eseguire il rendering del flusso dell'immagine, anche se gli altri flussi sono stati visualizzati correttamente.</span><span class="sxs-lookup"><span data-stu-id="a236a-124">For example, the method might fail to render the subpicture stream, even though the other streams rendered successfully.</span></span> <span data-ttu-id="a236a-125">Se il metodo **RenderDvdVideoVolume** restituisce un codice di errore o il valore di \_ false, è possibile esaminare la struttura di **\_ \_ RENDERSTATUS per DVD** per informazioni dettagliate sull'errore.</span><span class="sxs-lookup"><span data-stu-id="a236a-125">If the **RenderDvdVideoVolume** method returns an error code or the value S\_FALSE, you can examine the **AM\_DVD\_RENDERSTATUS** structure for details about the error.</span></span>

<span data-ttu-id="a236a-126">Ottenere quindi un puntatore al gestore del grafico del filtro chiamando [**IDvdGraphBuilder:: GetFiltergraph**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getfiltergraph).</span><span class="sxs-lookup"><span data-stu-id="a236a-126">Next, get a pointer to the Filter Graph Manager by calling [**IDvdGraphBuilder::GetFiltergraph**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getfiltergraph).</span></span> <span data-ttu-id="a236a-127">Questo metodo restituisce un puntatore all'interfaccia [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) del gestore del grafico dei filtri.</span><span class="sxs-lookup"><span data-stu-id="a236a-127">This method returns a pointer to the Filter Graph Manager's [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) interface.</span></span>


```C++
IGraphBuilder *pGraph = NULL;
hr =  pBuild->GetFiltergraph(&m_pGraph);
```



<span data-ttu-id="a236a-128">Usare il metodo [**IDvdGraphBuilder:: GetDvdInterface**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getdvdinterface) per recuperare le interfacce correlate a DVD, incluse le seguenti:</span><span class="sxs-lookup"><span data-stu-id="a236a-128">Use the [**IDvdGraphBuilder::GetDvdInterface**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getdvdinterface) method to retrieve DVD-related interfaces, including the following:</span></span>

-   <span data-ttu-id="a236a-129">[**IDVDControl2**](/windows/desktop/api/Strmif/nn-strmif-idvdcontrol2).</span><span class="sxs-lookup"><span data-stu-id="a236a-129">[**IDvdControl2**](/windows/desktop/api/Strmif/nn-strmif-idvdcontrol2).</span></span> <span data-ttu-id="a236a-130">Controlla i comandi di riproduzione e DVD</span><span class="sxs-lookup"><span data-stu-id="a236a-130">Controls playback and DVD commands</span></span>
-   <span data-ttu-id="a236a-131">[**IDvdInfo2**](/windows/desktop/api/Strmif/nn-strmif-idvdinfo2).</span><span class="sxs-lookup"><span data-stu-id="a236a-131">[**IDvdInfo2**](/windows/desktop/api/Strmif/nn-strmif-idvdinfo2).</span></span> <span data-ttu-id="a236a-132">Restituisce informazioni sullo stato corrente del navigatore DVD.</span><span class="sxs-lookup"><span data-stu-id="a236a-132">Returns information about the DVD Navigator's current state.</span></span>
-   <span data-ttu-id="a236a-133">[**IAMLine21Decoder**](/previous-versions/windows/desktop/api/il21dec/nn-il21dec-iamline21decoder).</span><span class="sxs-lookup"><span data-stu-id="a236a-133">[**IAMLine21Decoder**](/previous-versions/windows/desktop/api/il21dec/nn-il21dec-iamline21decoder).</span></span> <span data-ttu-id="a236a-134">Controlla la visualizzazione della didascalia chiusa.</span><span class="sxs-lookup"><span data-stu-id="a236a-134">Controls closed caption display.</span></span> <span data-ttu-id="a236a-135">La visualizzazione didascalia chiusa è abilitata per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="a236a-135">Closed caption display is enabled by default.</span></span> <span data-ttu-id="a236a-136">Per disabilitarla, chiamare [**IAMLine21Decoder:: SetServiceState**](/previous-versions/windows/desktop/api/il21dec/nf-il21dec-iamline21decoder-setservicestate) con il \_ flag AM L21 \_ CCSTATE \_ off.</span><span class="sxs-lookup"><span data-stu-id="a236a-136">To disable it, call [**IAMLine21Decoder::SetServiceState**](/previous-versions/windows/desktop/api/il21dec/nf-il21dec-iamline21decoder-setservicestate) with the AM\_L21\_CCSTATE\_Off flag.</span></span>
-   <span data-ttu-id="a236a-137">[**IBasicAudio**](/windows/desktop/api/Control/nn-control-ibasicaudio).</span><span class="sxs-lookup"><span data-stu-id="a236a-137">[**IBasicAudio**](/windows/desktop/api/Control/nn-control-ibasicaudio).</span></span> <span data-ttu-id="a236a-138">Controlla il volume e il bilanciamento audio.</span><span class="sxs-lookup"><span data-stu-id="a236a-138">Controls audio volume and balance.</span></span>

<span data-ttu-id="a236a-139">Il codice seguente, ad esempio, restituisce l'interfaccia [**IDVDControl2**](/windows/desktop/api/Strmif/nn-strmif-idvdcontrol2) .</span><span class="sxs-lookup"><span data-stu-id="a236a-139">For example, the following code returns the [**IDvdControl2**](/windows/desktop/api/Strmif/nn-strmif-idvdcontrol2) interface.</span></span>


```C++
IDvdControl2 *pDvdControl = NULL;
hr = pBuild->GetDvdInterface(IID_IDvdControl2, (void**)&pDvdControl);
```



<span data-ttu-id="a236a-140">Il modo consigliato per creare il grafico del filtro per la riproduzione DVD consiste nel fare in modo che un oggetto [Generatore di grafici DVD](dvd-graph-builder.md) esegua automaticamente questa operazione.</span><span class="sxs-lookup"><span data-stu-id="a236a-140">The recommended way to build the DVD playback filter graph is to have a [DVD Graph Builder](dvd-graph-builder.md) object do it for you automatically.</span></span> <span data-ttu-id="a236a-141">Questo approccio è illustrato di seguito e nell'applicazione di esempio DVD.</span><span class="sxs-lookup"><span data-stu-id="a236a-141">This approach is demonstrated below and in the DVD sample application.</span></span> <span data-ttu-id="a236a-142">Se è necessario creare manualmente il grafico del filtro DVD, è possibile eseguire questa operazione seguendo le regole di base della creazione di un grafico illustrate altrove nella documentazione di DirectShow.</span><span class="sxs-lookup"><span data-stu-id="a236a-142">If you need to build your DVD filter graph manually, you can do so by following the basic rules of graph building discussed elsewhere in the DirectShow documentation.</span></span> <span data-ttu-id="a236a-143">In genere, è consigliabile non aggiungere, rimuovere, connettere o disconnettere manualmente i singoli filtri nel grafico creato dal generatore di DVD Graph, perché questa operazione potrebbe confondere il codice di pulizia.</span><span class="sxs-lookup"><span data-stu-id="a236a-143">Generally, you should not manually add, remove, connect, or disconnect individual filters in the graph created by the DVD Graph Builder, because doing so might confuse the cleanup code.</span></span>

<span data-ttu-id="a236a-144">Configurazione del renderer video</span><span class="sxs-lookup"><span data-stu-id="a236a-144">Configuring the Video Renderer</span></span>

<span data-ttu-id="a236a-145">DirectShow offre diversi filtri per renderer video.</span><span class="sxs-lookup"><span data-stu-id="a236a-145">DirectShow provides several video renderer filters.</span></span> <span data-ttu-id="a236a-146">Prima di compilare il grafico, è possibile scegliere quale renderer video si preferisce.</span><span class="sxs-lookup"><span data-stu-id="a236a-146">Before you build the graph, you can chose which video renderer you prefer.</span></span> <span data-ttu-id="a236a-147">Selezionare il renderer chiamando [**IDvdGraphBuilder:: GetDvdInterface**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getdvdinterface) e richiedendo un'interfaccia specifica per il renderer:</span><span class="sxs-lookup"><span data-stu-id="a236a-147">Select the renderer by calling [**IDvdGraphBuilder::GetDvdInterface**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getdvdinterface) and requesting an interface that is specific to that renderer:</span></span>

-   <span data-ttu-id="a236a-148">Filtro del mixer sovrapposto: [**IDDrawExclModeVideo**](/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo).</span><span class="sxs-lookup"><span data-stu-id="a236a-148">Overlay Mixer Filter: [**IDDrawExclModeVideo**](/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo).</span></span>
-   <span data-ttu-id="a236a-149">Renderer di video mixing 7 (VMR-7): [**IVMRFilterConfig**](/windows/desktop/api/Strmif/nn-strmif-ivmrfilterconfig).</span><span class="sxs-lookup"><span data-stu-id="a236a-149">Video Mixing Renderer 7 (VMR-7): [**IVMRFilterConfig**](/windows/desktop/api/Strmif/nn-strmif-ivmrfilterconfig).</span></span>
-   <span data-ttu-id="a236a-150">Renderer di video mixing 9 (VMR-9): [**IVMRFilterConfig9**](/previous-versions/windows/desktop/api/Vmr9/nn-vmr9-ivmrfilterconfig9).</span><span class="sxs-lookup"><span data-stu-id="a236a-150">Video Mixing Renderer 9 (VMR-9): [**IVMRFilterConfig9**](/previous-versions/windows/desktop/api/Vmr9/nn-vmr9-ivmrfilterconfig9).</span></span>
-   <span data-ttu-id="a236a-151">Renderer video migliorato (EVR): [**IEVRFilterConfig**](/windows/desktop/api/evr/nn-evr-ievrfilterconfig).</span><span class="sxs-lookup"><span data-stu-id="a236a-151">Enhanced Video Renderer (EVR): [**IEVRFilterConfig**](/windows/desktop/api/evr/nn-evr-ievrfilterconfig).</span></span>

<span data-ttu-id="a236a-152">Se si richiede una di queste interfacce prima di creare il grafico del filtro, il generatore di DVD Graph crea il renderer video corrispondente.</span><span class="sxs-lookup"><span data-stu-id="a236a-152">If you request any of these interfaces before building the filter graph, the DVD Graph Builder creates the corresponding video renderer.</span></span> <span data-ttu-id="a236a-153">Successivamente, quando si compila il grafico, il generatore di DVD Graph tenterà di usare il renderer.</span><span class="sxs-lookup"><span data-stu-id="a236a-153">Later, when you build the graph, the DVD Graph Builder will try to use that renderer.</span></span> <span data-ttu-id="a236a-154">Tuttavia, se non è possibile compilare il grafo utilizzando il renderer selezionato, può passare a un altro renderer.</span><span class="sxs-lookup"><span data-stu-id="a236a-154">But if it cannot build the graph using the renderer you selected, it may switch to another renderer.</span></span> <span data-ttu-id="a236a-155">Ad esempio, il decodificatore MPEG-2 potrebbe non essere compatibile con il filtro VMR, nel qual caso il generatore di DVD Graph utilizzerà per impostazione predefinita il mixer sovrapposto.</span><span class="sxs-lookup"><span data-stu-id="a236a-155">For example, your MPEG-2 decoder might not be compatible with the VMR filter, in which case the DVD Graph Builder would default to the Overlay Mixer.</span></span>

<span data-ttu-id="a236a-156">Queste interfacce offrono inoltre la possibilità di configurare il renderer prima che sia connesso al decodificatore.</span><span class="sxs-lookup"><span data-stu-id="a236a-156">These interfaces also give you a chance to configure the renderer before it is connected to the decoder.</span></span> <span data-ttu-id="a236a-157">Ad esempio, è possibile impostare VMR per usare la modalità senza finestra anziché la modalità finestra predefinita.</span><span class="sxs-lookup"><span data-stu-id="a236a-157">For example, you can set the VMR to use windowless mode instead of the default windowed mode.</span></span> <span data-ttu-id="a236a-158">Per ulteriori informazioni sui renderer video, vedere l'argomento [relativo al rendering video in DirectShow](about-video-rendering-in-directshow.md).</span><span class="sxs-lookup"><span data-stu-id="a236a-158">For more information about video renderers, see the topic [About Video Rendering in DirectShow](about-video-rendering-in-directshow.md).</span></span>

<span data-ttu-id="a236a-159">In Windows XP e versioni successive, il generatore di grafici DVD usa sempre il [renderer di mixaggio video 7](video-mixing-renderer-filter-7.md) (VMR-7), a meno che non sia:</span><span class="sxs-lookup"><span data-stu-id="a236a-159">On Windows XP and later, the DVD Graph Builder always uses the [Video Mixing Renderer 7](video-mixing-renderer-filter-7.md) (VMR-7), unless:</span></span>

-   <span data-ttu-id="a236a-160">Le interfacce di query del chiamante hanno trovato solo il [mixer overlay](overlay-mixer-filter.md), ad esempio [**IMixerPinConfig2**](/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2).</span><span class="sxs-lookup"><span data-stu-id="a236a-160">The caller queries interfaces found only the [Overlay Mixer](overlay-mixer-filter.md), such as [**IMixerPinConfig2**](/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2).</span></span> <span data-ttu-id="a236a-161">In questo modo viene inviato un suggerimento al generatore di grafici DVD che l'applicazione vuole usare il mixer overlay e non il VMR.</span><span class="sxs-lookup"><span data-stu-id="a236a-161">This sends a hint to the DVD Graph Builder that the application wants to use the Overlay Mixer and not the VMR.</span></span> <span data-ttu-id="a236a-162">Windows Media Player dispone inoltre di un'opzione della finestra di dialogo per forzare l'utilizzo del mixer overlay.</span><span class="sxs-lookup"><span data-stu-id="a236a-162">Windows Media Player also has a dialog box option to force the use of the Overlay Mixer.</span></span>
-   <span data-ttu-id="a236a-163">Il decoder installato non è compatibile con VMR.</span><span class="sxs-lookup"><span data-stu-id="a236a-163">The installed decoder is not VMR-compatible.</span></span> <span data-ttu-id="a236a-164">Durante la creazione del grafico, la nuova interfaccia [**IAMDecoderCaps**](/windows/desktop/api/Strmif/nn-strmif-iamdecodercaps) viene utilizzata per verificare il supporto VMR del decodificatore.</span><span class="sxs-lookup"><span data-stu-id="a236a-164">During graph building, the new [**IAMDecoderCaps**](/windows/desktop/api/Strmif/nn-strmif-iamdecodercaps) interface is used to check for the decoder's VMR support.</span></span> <span data-ttu-id="a236a-165">Se non è presente, il generatore di grafici DVD utilizzerà il mixer sovrapposto.</span><span class="sxs-lookup"><span data-stu-id="a236a-165">If that is not present, the DVD Graph Builder will use the Overlay Mixer.</span></span>
-   <span data-ttu-id="a236a-166">Quando si utilizza un decodificatore hardware, il decodificatore non è in grado di connettersi a [video Port Manager](video-port-manager.md) (VPM).</span><span class="sxs-lookup"><span data-stu-id="a236a-166">While using a hardware decoder, the decoder cannot connect to the [Video Port Manager](video-port-manager.md) (VPM).</span></span> <span data-ttu-id="a236a-167">Se un decodificatore hardware non è in grado di utilizzare VPM, non potrà utilizzare VMR e quindi il generatore di DVD Graph tenterà di compilare un grafo utilizzando il mixer overlay.</span><span class="sxs-lookup"><span data-stu-id="a236a-167">If a hardware decoder cannot use the VPM, then it cannot use the VMR, and so the DVD Graph Builder then tries to build a graph using the Overlay Mixer.</span></span>
-   <span data-ttu-id="a236a-168">La scheda video è nota per avere risorse e/o funzionalità insufficienti per supportare il VMR, ma non segnala correttamente questo problema nel driver.</span><span class="sxs-lookup"><span data-stu-id="a236a-168">The display card is known to have insufficient resources and/or capabilities to support the VMR but does not correctly report this in the driver.</span></span> <span data-ttu-id="a236a-169">(Alcuni casi noti sono esclusi in modo specifico dal generatore di grafici DVD).</span><span class="sxs-lookup"><span data-stu-id="a236a-169">(Some known cases are specifically excluded by the DVD Graph Builder.)</span></span>
-   <span data-ttu-id="a236a-170">La connessione tra il decodificatore e il VMR non riesce per qualsiasi motivo, in genere a causa della mancanza di VRAM per creare le superfici necessarie.</span><span class="sxs-lookup"><span data-stu-id="a236a-170">The connection between the decoder and the VMR fails for any reason, usually due to a lack of VRAM to create the necessary surfaces.</span></span> <span data-ttu-id="a236a-171">In questi casi, il generatore di DVD Graph disattiva l'uso di VMR e prova a usare il mixer overlay per compilare un grafo.</span><span class="sxs-lookup"><span data-stu-id="a236a-171">In these cases, the DVD Graph Builder switches off VMR use and tries to use the Overlay Mixer to build a graph.</span></span>

<span data-ttu-id="a236a-172">Modalità finestra</span><span class="sxs-lookup"><span data-stu-id="a236a-172">Windowed Mode</span></span>

<span data-ttu-id="a236a-173">In modalità finestra (mixer sovrapposto o VMR), il renderer crea la propria finestra video.</span><span class="sxs-lookup"><span data-stu-id="a236a-173">In windowed mode (Overlay Mixer or VMR), the renderer creates its own video window.</span></span> <span data-ttu-id="a236a-174">Per rendere questa finestra un elemento figlio della finestra dell'applicazione, chiamare [**IVideoWindow::p \_ proprietario UT**](/windows/desktop/api/Control/nf-control-ivideowindow-put_owner) con un handle per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a236a-174">To make this window a child of the application window, call [**IVideoWindow::put\_Owner**](/windows/desktop/api/Control/nf-control-ivideowindow-put_owner) with a handle to the application.</span></span> <span data-ttu-id="a236a-175">Chiamare anche [**IVideoWindow::p UT \_ WindowStyle**](/windows/desktop/api/Control/nf-control-ivideowindow-put_windowstyle) per impostare gli \_ stili WS Child e WS \_ CLIPSIBLINGS nella finestra video del renderer.</span><span class="sxs-lookup"><span data-stu-id="a236a-175">Also call [**IVideoWindow::put\_WindowStyle**](/windows/desktop/api/Control/nf-control-ivideowindow-put_windowstyle) to set the WS\_CHILD and WS\_CLIPSIBLINGS styles on the renderer's video window.</span></span> <span data-ttu-id="a236a-176">Per ottenere i messaggi del mouse dalla finestra video del renderer, chiamare [**IVideoWindow::p UT \_ MessageDrain**](/windows/desktop/api/Control/nf-control-ivideowindow-put_messagedrain) con un handle per la finestra dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a236a-176">To get mouse messages from the renderer's video window, call [**IVideoWindow::put\_MessageDrain**](/windows/desktop/api/Control/nf-control-ivideowindow-put_messagedrain) with a handle to the application window.</span></span> <span data-ttu-id="a236a-177">Questo metodo imposta un "svuotamento del messaggio": la finestra del video inoltra tutti i messaggi del mouse ricevuti alla finestra di svuotamento del messaggio.</span><span class="sxs-lookup"><span data-stu-id="a236a-177">This method sets up a "message drain" — the video window forwards any mouse messages it receives to the message drain window.</span></span>


```C++
pVideoWindow->put_Owner((OAHWND)hwnd);
pVideoWindow->put_WindowStyle(WS_CHILD | WS_CLIPSIBLINGS);
pVideoWindow->put_MessageDrain((OAHWND)hwnd) ;
```



<span data-ttu-id="a236a-178">Lo svuotamento del messaggio semplifica la selezione dei pulsanti di menu DVD.</span><span class="sxs-lookup"><span data-stu-id="a236a-178">The message drain makes selecting DVD menu buttons somewhat complicated.</span></span> <span data-ttu-id="a236a-179">Supponendo che la finestra del video non riempia l'intera area client dell'applicazione, alcuni eventi del mouse rientrano all'esterno della finestra del video.</span><span class="sxs-lookup"><span data-stu-id="a236a-179">Assuming the video window does not fill the application's entire client area, some mouse events will fall outside the video window.</span></span> <span data-ttu-id="a236a-180">Quando si ottiene un evento del mouse *dalla finestra* video, è necessario elaborarlo per la navigazione nel menu DVD.</span><span class="sxs-lookup"><span data-stu-id="a236a-180">When you get a mouse event from *inside* the video window, you should process it for DVD menu navigation.</span></span> <span data-ttu-id="a236a-181">Gli eventi del mouse dall' *esterno* della finestra video non devono essere elaborati.</span><span class="sxs-lookup"><span data-stu-id="a236a-181">Mouse events from *outside* the video window should not be processed.</span></span> <span data-ttu-id="a236a-182">Con lo svuotamento del messaggio, non è possibile distinguere tra i due.</span><span class="sxs-lookup"><span data-stu-id="a236a-182">With the message drain, there is no way to distinguish between the two.</span></span> <span data-ttu-id="a236a-183">Inoltre, le coordinate per gli eventi del mouse dalla finestra video sono relative all'area client della finestra video; ma gli eventi del mouse dall'esterno della finestra video sono relativi all'area client dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a236a-183">Furthermore, the coordinates for mouse events from the video window are relative to the video window's client area; but mouse events from outside the video window are relative to the application's client area.</span></span>

<span data-ttu-id="a236a-184">Modalità senza finestra</span><span class="sxs-lookup"><span data-stu-id="a236a-184">Windowless Mode</span></span>

<span data-ttu-id="a236a-185">La modalità senza finestra evita i problemi con i messaggi del mouse.</span><span class="sxs-lookup"><span data-stu-id="a236a-185">Windowless mode avoids the problems with mouse messages altogether.</span></span> <span data-ttu-id="a236a-186">Non è necessario un svuotamento dei messaggi perché VMR (o EVR) non crea la propria finestra in modalità senza finestra.</span><span class="sxs-lookup"><span data-stu-id="a236a-186">You do not need a message drain, because the VMR (or EVR) does not create its own window in windowless mode.</span></span> <span data-ttu-id="a236a-187">Viene invece disegnato direttamente nella finestra dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a236a-187">Instead, it draws directly onto your application window.</span></span> <span data-ttu-id="a236a-188">Se il rettangolo di destinazione è più piccolo dell'area client dell'applicazione, il navigatore DVD prende in considerazione questo aspetto quando calcola le posizioni dei pulsanti DVD.</span><span class="sxs-lookup"><span data-stu-id="a236a-188">If the destination rectangle is smaller than the application client area, the DVD Navigator takes this into account when it calculates the DVD button positions.</span></span> <span data-ttu-id="a236a-189">Pertanto, quando si riceve un messaggio del mouse, è possibile passare le coordinate direttamente al navigatore DVD, come descritto nella sezione navigazione dei menu.</span><span class="sxs-lookup"><span data-stu-id="a236a-189">Therefore, when you get a mouse message, you can pass the coordinates directly to the DVD Navigator, as described in the section Menu Navigation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a236a-190">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="a236a-190">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a236a-191">Applicazioni DVD</span><span class="sxs-lookup"><span data-stu-id="a236a-191">DVD Applications</span></span>](dvd-applications.md)
</dt> </dl>

 

 
