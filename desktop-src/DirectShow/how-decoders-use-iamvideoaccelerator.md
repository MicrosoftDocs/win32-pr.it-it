---
description: Come i decodificatori usano IAMVideoAccelerator
ms.assetid: 0bc6b65b-4502-4c6f-a0f2-82a2bd444d1d
title: Come i decodificatori usano IAMVideoAccelerator
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 436768b3561a999f6708ef4f6438b816e0ad303b
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "103965467"
---
# <a name="how-decoders-use-iamvideoaccelerator"></a><span data-ttu-id="8480a-103">Come i decodificatori usano IAMVideoAccelerator</span><span class="sxs-lookup"><span data-stu-id="8480a-103">How Decoders Use IAMVideoAccelerator</span></span>

<span data-ttu-id="8480a-104">L'interfaccia [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) consente operazioni di accelerazione video generiche, inclusa l'accelerazione video DirectX (va).</span><span class="sxs-lookup"><span data-stu-id="8480a-104">The [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) interface enables generic video acceleration operations, including DirectX Video Acceleration (VA).</span></span> <span data-ttu-id="8480a-105">Per l'accelerazione non DirectX VA, il decodificatore e il driver video devono entrambi rispettare un protocollo comune.</span><span class="sxs-lookup"><span data-stu-id="8480a-105">For non-DirectX VA acceleration, the decoder and video driver must both adhere to a common protocol.</span></span>

<span data-ttu-id="8480a-106">In questa sezione viene descritto l'ordine generale delle operazioni che qualsiasi decodificatore deve seguire quando si utilizza questa interfaccia.</span><span class="sxs-lookup"><span data-stu-id="8480a-106">This section describes the general order of operations that any decoder should follow when using this interface.</span></span> <span data-ttu-id="8480a-107">Altre informazioni specifiche per i decodificatori basati su DirectX VA sono disponibili in [mapping dell'accelerazione video DirectX a IAMVideoAccelerator](mapping-directx-video-acceleration-to-iamvideoaccelerator.md).</span><span class="sxs-lookup"><span data-stu-id="8480a-107">Further information specific to DirectX VA-based decoders can be found in [Mapping DirectX Video Acceleration to IAMVideoAccelerator](mapping-directx-video-acceleration-to-iamvideoaccelerator.md).</span></span>

> [!Note]  
> <span data-ttu-id="8480a-108">Questa interfaccia è disponibile in Windows 2000 e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="8480a-108">This interface is available in Windows 2000 and later.</span></span>

 

<span data-ttu-id="8480a-109">L'interfaccia [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) viene esposta sul pin di input del [mixer overlay](overlay-mixer-filter.md) o del renderer di mixaggio video (VMR).</span><span class="sxs-lookup"><span data-stu-id="8480a-109">The [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) interface is exposed on the input pin of the [Overlay Mixer](overlay-mixer-filter.md) or Video Mixing Renderer (VMR).</span></span> <span data-ttu-id="8480a-110">L'interfaccia [**IAMVideoAcceleratorNotify**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoacceleratornotify) viene esposta sul pin di output del decodificatore.</span><span class="sxs-lookup"><span data-stu-id="8480a-110">The [**IAMVideoAcceleratorNotify**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoacceleratornotify) interface is exposed on the decoder's output pin.</span></span> <span data-ttu-id="8480a-111">La sequenza di eventi per la connessione dei pin del filtro è la seguente:</span><span class="sxs-lookup"><span data-stu-id="8480a-111">The sequence of events for connecting the filter pins is as follows:</span></span>

1.  <span data-ttu-id="8480a-112">Il gestore del grafo dei filtri chiama [**Ipin:: Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) sul pin di output del filtro decodificatore.</span><span class="sxs-lookup"><span data-stu-id="8480a-112">The Filter Graph Manager calls [**IPin::Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) on the decoder filter's output pin.</span></span> <span data-ttu-id="8480a-113">Un [**\_ \_ tipo di supporto am**](/windows/win32/api/strmif/ns-strmif-am_media_type) è un parametro facoltativo.</span><span class="sxs-lookup"><span data-stu-id="8480a-113">An [**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) is an optional parameter.</span></span>
    -   <span data-ttu-id="8480a-114">[**Am \_ MEDIA \_ Type**](/windows/win32/api/strmif/ns-strmif-am_media_type) è una struttura di dati che descrive un tipo di supporto.</span><span class="sxs-lookup"><span data-stu-id="8480a-114">[**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) is a data structure that describes a type of media.</span></span> <span data-ttu-id="8480a-115">Contiene un GUID di majortype (che in questo caso deve essere MEDIATYPE \_ video), un GUID del sottotipo (che in questo caso deve essere un GUID del tasto di scelta rapida video) e una serie di altri elementi.</span><span class="sxs-lookup"><span data-stu-id="8480a-115">It contains a majortype GUID (which in our case should be MEDIATYPE\_Video), a subtype GUID (which in our case should be a video accelerator GUID), and a variety of other things.</span></span> <span data-ttu-id="8480a-116">Uno di questi elementi è un GUID di tipo formato che contiene informazioni sui supporti, inclusi in questo caso la larghezza e l'altezza di un'immagine video non compressa, molto probabilmente in una struttura [**MPEG1VIDEOINFO**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-mpeg1videoinfo), [**VIDEOINFOHEADER**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader), [**MPEG2VIDEOINFO**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-mpeg2videoinfo)o [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) .</span><span class="sxs-lookup"><span data-stu-id="8480a-116">One of those things is a format type GUID containing information about the media, including in our case the width and height of an uncompressed video picture, most likely in an [**MPEG1VIDEOINFO**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-mpeg1videoinfo), [**VIDEOINFOHEADER**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader), [**MPEG2VIDEOINFO**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-mpeg2videoinfo), or [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) structure.</span></span>
    -   <span data-ttu-id="8480a-117">La struttura del [**\_ \_ tipo di supporto am**](/windows/win32/api/strmif/ns-strmif-am_media_type) , se presente, indica al decodificatore di funzionare usando il tipo di supporto specificato, che può essere "completo" o "parzialmente specificato".</span><span class="sxs-lookup"><span data-stu-id="8480a-117">The [**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) structure, if present, tells the decoder to operate using the specified media type, which may be "fully specified" or "partially specified".</span></span> <span data-ttu-id="8480a-118">Se "completamente specificato", il decodificatore normalmente tenterà semplicemente di operare con tale tipo di supporto.</span><span class="sxs-lookup"><span data-stu-id="8480a-118">If "fully specified," the decoder would normally simply attempt to operate with that media type.</span></span> <span data-ttu-id="8480a-119">Se il valore è "parzialmente specificato", verrà tentata la ricerca di una modalità di funzionamento compatibile con "completo", che può essere usata per connettersi in modo coerente con il tipo di supporto "parzialmente specificato".</span><span class="sxs-lookup"><span data-stu-id="8480a-119">If "partially specified," it will attempt to find a "fully-specified" compatible mode of operation that it can use to connect in a manner consistent with the "partially-specified" media type.</span></span>
    -   <span data-ttu-id="8480a-120">Il modo comune per tentare di trovare un tipo di supporto "completo" da usare per una connessione consiste semplicemente nell'eseguire un elenco di tutti i tipi di supporto "completo" supportati dal pin di output, che è compatibile con il tipo di supporto "parzialmente specificato" e tenta di connettersi a ognuno di essi fino a quando non riesce.</span><span class="sxs-lookup"><span data-stu-id="8480a-120">The ordinary manner for attempting to find a "fully-specified" media type to use for a connection is to simply run through a list of every "fully-specified" media type that the output pin supports which is compatible with the "partially-specified" media type and attempt to connect with each of them until successful.</span></span> <span data-ttu-id="8480a-121">Il processo sarebbe normalmente simile se nessun \_ \_ tipo di supporto AM è contenuto nella chiamata [**Ipin:: Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) , ma con il pin di output è necessario controllare tutti i relativi tipi di supporto.</span><span class="sxs-lookup"><span data-stu-id="8480a-121">The process would normally be similar if no AM\_MEDIA\_TYPE is contained in the [**IPin::Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) call, but with the output pin needing to check all of its media types.</span></span>
2.  <span data-ttu-id="8480a-122">Se il decodificatore vuole verificare se un [**\_ \_ tipo di supporto am**](/windows/win32/api/strmif/ns-strmif-am_media_type) specifico (incluso un GUID del tasto di scelta rapida) è supportato dal pin di input downstream, può chiamare il [**Ipin:: QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) (con il GUID del tasto di scelta rapida video come sottotipo del **\_ \_ tipo di supporto am**) o semplicemente tentare di connettersi al pin, come descritto nell'articolo 5 seguente.</span><span class="sxs-lookup"><span data-stu-id="8480a-122">If the decoder wants to check whether a specific [**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) (including a video accelerator GUID) is supported by the downstream input pin, it can call that pin's [**IPin::QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) (with the video accelerator GUID as the subtype of the **AM\_MEDIA\_TYPE**) or it can simply attempt to connect to that pin as described in item 5 below.</span></span>
3.  <span data-ttu-id="8480a-123">Se il decodificatore non è in grado di stabilire quali GUID del tasto di scelta rapida sono supportati dal pin di input downstream e non si desidera proporre solo un determinato GUID dell'acceleratore video candidato chiamando il [**Ipin:: QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept)del PIN di input downstream, il decodificatore può chiamare [**IAMVideoAccelerator:: GetVideoAcceleratorGUIDs**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getvideoacceleratorguids) per ottenere un elenco dei GUID del tasto di scelta rapida supportati dal pin.</span><span class="sxs-lookup"><span data-stu-id="8480a-123">If the decoder does not know which video accelerator GUIDs the downstream input pin supports and does not wish to propose just some particular candidate video accelerator GUID by calling the downstream input pin's [**IPin::QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept), the decoder can call [**IAMVideoAccelerator::GetVideoAcceleratorGUIDs**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getvideoacceleratorguids) to get a list of the video accelerator GUIDs the pin supports.</span></span>
4.  <span data-ttu-id="8480a-124">Per alcuni GUID del tasto di scelta rapida video, il decodificatore può chiamare il pin di input downstream [**IAMVideoAccelerator:: GetUncompFormatsSupported**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getuncompformatssupported) per ottenere un elenco dei formati pixel **DDPIXELFORMAT** che possono essere usati per eseguire il rendering di un GUID acceleratore video specifico.</span><span class="sxs-lookup"><span data-stu-id="8480a-124">For some particular video accelerator GUIDs, the decoder can call the downstream input pin's [**IAMVideoAccelerator::GetUncompFormatsSupported**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getuncompformatssupported) to get a list of the **DDPIXELFORMAT** pixel formats that can be used to render a specific video accelerator GUID.</span></span> <span data-ttu-id="8480a-125">L'elenco restituito deve essere considerato in ordine di preferenza decrescente (ovvero con il formato preferito elencato per primo).</span><span class="sxs-lookup"><span data-stu-id="8480a-125">The list returned should be considered to be in decreasing preference order (that is, with the most preferred format listed first).</span></span>
5.  <span data-ttu-id="8480a-126">Il decodificatore chiama il [**Ipin:: ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection)del PIN di input downstream, passandogli un [**\_ \_ tipo di supporto am**](/windows/win32/api/strmif/ns-strmif-am_media_type) con il GUID del tasto di scelta rapida del video appropriato come sottotipo del tipo di supporto.</span><span class="sxs-lookup"><span data-stu-id="8480a-126">The decoder calls the downstream input pin's [**IPin::ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection), passing it an [**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) with the proper video accelerator GUID as the subtype of the media type.</span></span> <span data-ttu-id="8480a-127">In questo modo viene configurata la connessione per l'operazione, inclusa la creazione delle superfici di output non compresse (allocate usando la larghezza e l'altezza trovate nel **\_ \_ tipo di supporto am** e il numero di superfici da allocare trovate da una chiamata descritta di seguito e tutte le altre informazioni disponibili per l'acceleratore video, ad esempio il GUID dell'acceleratore video).</span><span class="sxs-lookup"><span data-stu-id="8480a-127">This sets up the connection for operation, including the creation of the uncompressed output surfaces (which are allocated using the width and height found in **AM\_MEDIA\_TYPE**, and the number of surfaces to allocate found by a call described below, and whatever other information the video accelerator has available and wishes to use for that purpose—such as the video accelerator GUID itself).</span></span> <span data-ttu-id="8480a-128">Se il pin di input downstream rifiuta il GUID dell'acceleratore video o un altro aspetto della connessione, questo può causare un errore di **Ipin:: ReceiveConnection** .</span><span class="sxs-lookup"><span data-stu-id="8480a-128">If the downstream input pin rejects the video accelerator GUID or some other aspect of the connection, this can cause the **IPin::ReceiveConnection** to fail.</span></span> <span data-ttu-id="8480a-129">Se **Ipin:: ReceiveConnection** ha esito negativo, viene indicato in un **HRESULT** restituito e il decodificatore può tentare di eseguire di nuovo la chiamata, ad esempio, con un nuovo GUID acceleratore video nella struttura del **\_ \_ tipo di supporto am** .</span><span class="sxs-lookup"><span data-stu-id="8480a-129">If **IPin::ReceiveConnection** fails, this is indicated in a returned **HRESULT**, and the decoder can try to make the call again, for example, with a new video accelerator GUID in the **AM\_MEDIA\_TYPE** structure.</span></span>
    -   [!Note]  
        > <span data-ttu-id="8480a-130">Si tratta di un altro modo (e il modo più definitivo) per il decodificatore di determinare ciò che è supportato dal pin di input downstream, ovvero semplicemente chiamando [**Ipin:: ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) e tentando di connettersi, quindi controllando se il tentativo di connessione ha avuto esito positivo.</span><span class="sxs-lookup"><span data-stu-id="8480a-130">This is another way (and the most definitive way) for the decoder to determine what is supported by the downstream input pin—simply calling [**IPin::ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) and trying to connect, and then checking whether the connection attempt was successful.</span></span>

         

    -   <span data-ttu-id="8480a-131">Durante [**Ipin:: ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection), il renderer chiama [**IAMVideoAcceleratorNotify:: GetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getuncompsurfacesinfo)del decodificatore, passandogli il GUID dell'acceleratore video e una struttura [**AMVAUncompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvauncompbufferinfo) per determinare il numero di superfici non compresse da allocare.</span><span class="sxs-lookup"><span data-stu-id="8480a-131">During the [**IPin::ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection), the renderer calls the decoder's [**IAMVideoAcceleratorNotify::GetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getuncompsurfacesinfo), passing it the video accelerator GUID and an [**AMVAUncompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvauncompbufferinfo) structure, in order to figure out how many uncompressed surfaces to allocate.</span></span> <span data-ttu-id="8480a-132">Il decodificatore compila e restituisce la struttura che contiene il numero minimo e massimo di superfici da allocare del tipo specifico e una struttura **DDPIXELFORMAT** che descrive il formato pixel delle superfici da allocare.</span><span class="sxs-lookup"><span data-stu-id="8480a-132">The decoder fills in and returns the structure, which contains the minimum and maximum number of surfaces to be allocated of the particular type, and a **DDPIXELFORMAT** structure describing the pixel format of the surfaces to be allocated.</span></span>
    -   [!Note]  
        > <span data-ttu-id="8480a-133">Nessun elemento viene effettivamente passato al decodificatore nella chiamata a [**IAMVideoAcceleratorNotify:: GetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getuncompsurfacesinfo) diverso dal GUID del tasto di scelta rapida del video.</span><span class="sxs-lookup"><span data-stu-id="8480a-133">Nothing is actually passed in to the decoder in the call to [**IAMVideoAcceleratorNotify::GetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getuncompsurfacesinfo) other than the video accelerator GUID.</span></span>

         

6.  <span data-ttu-id="8480a-134">Il renderer chiama il [**IAMVideoAcceleratorNotify:: SetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-setuncompsurfacesinfo)del decodificatore, passando al decodificatore il numero effettivo di superfici non compresse allocate.</span><span class="sxs-lookup"><span data-stu-id="8480a-134">The renderer calls the decoder's [**IAMVideoAcceleratorNotify::SetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-setuncompsurfacesinfo), passing to the decoder the actual number of uncompressed surfaces that were allocated.</span></span>
7.  <span data-ttu-id="8480a-135">Il renderer chiama il [**IAMVideoAcceleratorNotify:: GetCreateVideoAcceleratorData**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getcreatevideoacceleratordata) del decodificatore per ottenere tutti i dati necessari per inizializzare il video Accelerator.</span><span class="sxs-lookup"><span data-stu-id="8480a-135">The renderer calls the decoder's [**IAMVideoAcceleratorNotify::GetCreateVideoAcceleratorData**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getcreatevideoacceleratordata) to get any data needed to initialize the video accelerator.</span></span>
8.  <span data-ttu-id="8480a-136">Il decodificatore chiama [**IAMVideoAccelerator:: GetCompBufferInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getcompbufferinfo), passandogli un GUID dell'acceleratore video, una struttura [**AMVAUncompDataInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvauncompdatainfo) e il numero di tipi di buffer compressi, da ottenere in restituire un set di strutture di dati [**AMVACompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvacompbufferinfo) , una corrispondente a ogni tipo di buffer di dati compresso usato dal GUID del tasto di scelta rapida del video.</span><span class="sxs-lookup"><span data-stu-id="8480a-136">The decoder calls [**IAMVideoAccelerator::GetCompBufferInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getcompbufferinfo), passing it a video accelerator GUID, an [**AMVAUncompDataInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvauncompdatainfo) structure, and the number of compressed buffer types, to get in return a set of [**AMVACompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvacompbufferinfo) data structures, one corresponding to each type of compressed data buffer used by the video accelerator GUID.</span></span>
    -   <span data-ttu-id="8480a-137">La struttura [**AMVAUncompDataInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvauncompdatainfo) contiene la larghezza e l'altezza dei dati non compressi decodificati (in pixel) e il DDPIXELFORMAT dell'immagine non compressa.</span><span class="sxs-lookup"><span data-stu-id="8480a-137">The [**AMVAUncompDataInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvauncompdatainfo) structure contains the width and height of the decoded uncompressed data (in pixels) and the DDPIXELFORMAT of the uncompressed picture.</span></span>
    -   <span data-ttu-id="8480a-138">Le strutture di dati [**AMVACompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvacompbufferinfo) restituite ogni contengono:</span><span class="sxs-lookup"><span data-stu-id="8480a-138">The [**AMVACompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvacompbufferinfo) data structures returned each contain:</span></span>
        -   <span data-ttu-id="8480a-139">Numero di buffer compressi necessari per il tipo specifico.</span><span class="sxs-lookup"><span data-stu-id="8480a-139">The number of compressed buffers needed of the specific type.</span></span>
        -   <span data-ttu-id="8480a-140">Larghezza e altezza della superficie da creare, ovvero campi che possono o meno avere un significato effettivo.</span><span class="sxs-lookup"><span data-stu-id="8480a-140">The width and height of the surface to create (fields which may or may not have any actual meaning).</span></span>
            > [!Note]  
            > <span data-ttu-id="8480a-141">L'operazione di allocazione della superficie di DirectDraw per i buffer compressi attualmente non prevede che la larghezza o l'altezza di queste superfici sia maggiore o uguale a 2 ^ 15, sebbene la chiamata di allocazione della superficie non abbia esito positivo se questo limite viene violato.</span><span class="sxs-lookup"><span data-stu-id="8480a-141">The DirectDraw surface allocation operation for the compressed buffers does not currently provide for the width or height of these surfaces to be greater than or equal to 2^15, although the surface allocation call may not overtly fail if this limit is violated.</span></span> <span data-ttu-id="8480a-142">Il driver potrebbe pertanto strutturare le richieste di memoria buffer compresso per evitare tali dimensioni estreme.</span><span class="sxs-lookup"><span data-stu-id="8480a-142">Therefore, the driver could structure its requests for compressed buffer memory to avoid such extreme sizes.</span></span> <span data-ttu-id="8480a-143">Ad esempio, anziché richiedere un buffer con Width = "1" e Height = "65536", il driver deve richiedere un buffer di Width = "1024" e Height = "64".</span><span class="sxs-lookup"><span data-stu-id="8480a-143">For example, rather than requesting a buffer with width="1" and height="65536", the driver should request a buffer of width="1024" and height="64".</span></span>

             

        -   <span data-ttu-id="8480a-144">Numero totale di byte che devono essere utilizzati dalla superficie.</span><span class="sxs-lookup"><span data-stu-id="8480a-144">The total number of bytes to be used by the surface.</span></span>
        -   <span data-ttu-id="8480a-145">Struttura di tipo **DDSCAPS2** che definisce un oggetto DirectDrawSurface, che descrive le funzionalità per creare superfici per archiviare i dati compressi.</span><span class="sxs-lookup"><span data-stu-id="8480a-145">A structure of type **DDSCAPS2** defining a DirectDrawSurface object, describing the capabilities to create surfaces to store compressed data.</span></span>
        -   <span data-ttu-id="8480a-146">DDPIXELFORMAT, che descrive il formato pixel usato per creare le superfici per archiviare i dati compressi (un campo che può avere o meno un significato effettivo).</span><span class="sxs-lookup"><span data-stu-id="8480a-146">A DDPIXELFORMAT, describing the pixel format used to create surfaces to store compressed data (a field which may or may not have any actual meaning).</span></span>

> [!Note]  
> <span data-ttu-id="8480a-147">Le chiamate del renderer ad alcuni dei metodi dell'interfaccia [**IAMVideoAcceleratorNotify**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoacceleratornotify) del decodificatore possono (e normalmente) essere eseguite all'interno della chiamata del decodificatore al [**Ipin:: ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection)del renderer.</span><span class="sxs-lookup"><span data-stu-id="8480a-147">The renderer's calls to some of the decoder's [**IAMVideoAcceleratorNotify**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoacceleratornotify) interface methods may (and normally would) occur inside of the decoder's call to the renderer's [**IPin::ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection).</span></span> <span data-ttu-id="8480a-148">In particolare, si applica a quanto segue:</span><span class="sxs-lookup"><span data-stu-id="8480a-148">Specifically, this applies to the following:</span></span>
>
> -   <span data-ttu-id="8480a-149">[**IAMVideoAcceleratorNotify:: GetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getuncompsurfacesinfo),</span><span class="sxs-lookup"><span data-stu-id="8480a-149">[**IAMVideoAcceleratorNotify::GetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getuncompsurfacesinfo),</span></span>
> -   <span data-ttu-id="8480a-150">[**IAMVideoAcceleratorNotify:: SetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-setuncompsurfacesinfo)e</span><span class="sxs-lookup"><span data-stu-id="8480a-150">[**IAMVideoAcceleratorNotify::SetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-setuncompsurfacesinfo), and</span></span>
> -   <span data-ttu-id="8480a-151">[**IAMVideoAcceleratorNotify:: GetCreateVideoAcceleratorData**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getcreatevideoacceleratordata).</span><span class="sxs-lookup"><span data-stu-id="8480a-151">[**IAMVideoAcceleratorNotify::GetCreateVideoAcceleratorData**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getcreatevideoacceleratordata).</span></span>

 

> [!Note]  
> <span data-ttu-id="8480a-152">Per supportare le modifiche del formato dinamico, il decodificatore può anche chiamare [**Ipin:: ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) e altri metodi per le versioni precedenti, mentre i filtri sono connessi e in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="8480a-152">To support dynamic format changes, the decoder may also call [**IPin::ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) and other methods per above while the filters are connected and running.</span></span> <span data-ttu-id="8480a-153">Questa funzionalità viene fornita per supportare le modifiche del formato dinamico (anche se non è presente nel file H. 263, allegato P, Sense, perché tutti i set di dati vengono riavviati da zero e le informazioni sull'immagine di riferimento vengono pertanto perse).</span><span class="sxs-lookup"><span data-stu-id="8480a-153">This capability is provided in order to support dynamic format changes (although not in the H.263, Annex P, sense - as all data sets are started up again from scratch and any reference picture information is therefore lost).</span></span>

 

<span data-ttu-id="8480a-154">Di seguito è riportata una descrizione dell'uso di [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) durante l'operazione dopo l'inizializzazione:</span><span class="sxs-lookup"><span data-stu-id="8480a-154">The following is a description of [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) use during operation after initialization:</span></span>

1.  <span data-ttu-id="8480a-155">Per ogni superficie non compressa, il decodificatore chiama [**IAMVideoAccelerator:: BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) per iniziare l'elaborazione per creare l'immagine di output.</span><span class="sxs-lookup"><span data-stu-id="8480a-155">For each uncompressed surface, the decoder calls [**IAMVideoAccelerator::BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) to begin the processing to create the output picture.</span></span> <span data-ttu-id="8480a-156">Quando esegue questa operazione, il decodificatore invia una struttura [**AMVABeginFrameInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvabeginframeinfo) .</span><span class="sxs-lookup"><span data-stu-id="8480a-156">When it does this, the decoder sends an [**AMVABeginFrameInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvabeginframeinfo) structure.</span></span>
    -   <span data-ttu-id="8480a-157">La struttura [**AMVABeginFrameInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvabeginframeinfo) contiene un indice per un buffer di destinazione, un puntatore a alcuni dati da inviare a valle e un puntatore a una posizione in cui l'acceleratore può inserire alcuni dati per la lettura del decodificatore.</span><span class="sxs-lookup"><span data-stu-id="8480a-157">The [**AMVABeginFrameInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvabeginframeinfo) structure contains an index for a destination buffer, a pointer to some data to send downstream, and a pointer to a place where the accelerator can put some data for the decoder to read.</span></span>
    -   <span data-ttu-id="8480a-158">Nota 1: il tasto di scelta rapida non riceve effettivamente l'indice del buffer di destinazione perché viene convertito dal renderer prima di andare a valle.</span><span class="sxs-lookup"><span data-stu-id="8480a-158">NOTE 1: The accelerator does not actually receive the destination buffer index, as it is translated by the renderer before going downstream.</span></span>
    -   <span data-ttu-id="8480a-159">Nota 2: [**IAMVideoAccelerator:: BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) può essere chiamato più di una volta tra le chiamate a [**IAMVideoAccelerator:: EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe).</span><span class="sxs-lookup"><span data-stu-id="8480a-159">NOTE 2: [**IAMVideoAccelerator::BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) can be called more than once between calls to [**IAMVideoAccelerator::EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe).</span></span>
    -   <span data-ttu-id="8480a-160">Nota 3: non esiste alcun presupposto nell'operazione di interfaccia che [**IAMVideoAccelerator:: BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) e [**IAMVideoAccelerator:: EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) devono essere chiamati per l'elaborazione di ogni singola immagine nel bitstream.</span><span class="sxs-lookup"><span data-stu-id="8480a-160">NOTE 3: There is no assumption within the interface operation that [**IAMVideoAccelerator::BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) and [**IAMVideoAccelerator::EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) need to be called for the processing of every individual picture in the bitstream.</span></span>

        <span data-ttu-id="8480a-161">Il risultato di [**IAMVideoAccelerator:: BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) , per quanto riguarda l'interfaccia, consiste nel creare un'associazione all'interno del renderer tra un indice e una superficie non compressa.</span><span class="sxs-lookup"><span data-stu-id="8480a-161">What [**IAMVideoAccelerator::BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) does, as far as the interface is concerned, is create an association within the renderer between an index and an uncompressed surface.</span></span> <span data-ttu-id="8480a-162">Fornisce inoltre un metodo per chiamare una funzione specifica in un driver di dispositivo (con supporto di un mezzo per passare dati arbitrari tra il decodificatore e il driver di dispositivo).</span><span class="sxs-lookup"><span data-stu-id="8480a-162">It also provides a means to call a specific function in a device driver (with support of a means of passing arbitrary data back and forth between the decoder and the device driver).</span></span>

        <span data-ttu-id="8480a-163">(Tuttavia, nell'operazione DirectX VA viene descritto il requisito seguente che [**IAMVideoAccelerator:: BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) e [**IAMVideoAccelerator:: EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) devono essere chiamati per l'elaborazione di ogni singola immagine nel bitstream).</span><span class="sxs-lookup"><span data-stu-id="8480a-163">(However, in DirectX VA operation there is a requirement described below that [**IAMVideoAccelerator::BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) and [**IAMVideoAccelerator::EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) do need to be called for the processing of every individual picture in the bitstream.)</span></span>

2.  <span data-ttu-id="8480a-164">Per l'invio di dati non compressi al tasto di scelta rapida, il decodificatore chiama:</span><span class="sxs-lookup"><span data-stu-id="8480a-164">For sending uncompressed data to the accelerator, the decoder calls:</span></span>
    -   <span data-ttu-id="8480a-165">[**IAMVideoAccelerator:: QueryRenderStatus**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-queryrenderstatus) per determinare se un buffer è sicuro per la lettura o la scrittura in.</span><span class="sxs-lookup"><span data-stu-id="8480a-165">[**IAMVideoAccelerator::QueryRenderStatus**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-queryrenderstatus) to determine whether a buffer is safe for reading from or writing to.</span></span>
    -   <span data-ttu-id="8480a-166">[**IAMVideoAccelerator:: GetBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getbuffer) per bloccare e ottenere l'accesso a un buffer specificato (se non è stato precedentemente chiamato per ottenere tale accesso).</span><span class="sxs-lookup"><span data-stu-id="8480a-166">[**IAMVideoAccelerator::GetBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getbuffer) to lock and obtain access to a specified buffer (if it has not previously called this to get that access).</span></span> <span data-ttu-id="8480a-167">**GetBuffer** può essere utilizzato anche per ottenere una copia del contenuto dell'ultima immagine di output non compressa per cui è stato chiamato [**IAMVideoAccelerator:: BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) , fornendo [**IAMVideoAccelerator:: EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) non è stato chiamato per l'indice del buffer di destinazione.</span><span class="sxs-lookup"><span data-stu-id="8480a-167">**GetBuffer** can also be used to get a copy of the contents of the last uncompressed output picture for which [**IAMVideoAccelerator::BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) was called, providing [**IAMVideoAccelerator::EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) has not been called for that destination buffer index.</span></span> <span data-ttu-id="8480a-168">Se l'interfaccia DDI restituisce uno stato di rendering di DDERR \_ WASSTILLDRAWING per il buffer richiesto, un ciclo di sospensione verrà gestito all'interno di **GetBuffer** finché questa condizione non verrà cancellata.</span><span class="sxs-lookup"><span data-stu-id="8480a-168">If the DDI returns a render status of DDERR\_WASSTILLDRAWING for the requested buffer, a sleep loop will be operated within **GetBuffer** until this condition is cleared.</span></span> <span data-ttu-id="8480a-169">Per chiamare **GetBuffer**, il decodificatore richiederà alcune informazioni da una struttura di dati [**AMVACompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvacompbufferinfo) ottenuta chiamando [**IAMVideoAccelerator:: GetCompBufferInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getcompbufferinfo).</span><span class="sxs-lookup"><span data-stu-id="8480a-169">In order to call **GetBuffer**, the decoder will need some information from an [**AMVACompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvacompbufferinfo) data structure which is obtained by calling [**IAMVideoAccelerator::GetCompBufferInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getcompbufferinfo).</span></span>
    -   <span data-ttu-id="8480a-170">[**IAMVideoAccelerator:: Execute**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-execute) per indicare che devono essere elaborati i dati in un set di buffer compressi come indicato in una matrice di strutture di dati [**AMVABUFFERINFO**](/previous-versions/windows/desktop/api/amva/ns-amva-amvabufferinfo) .</span><span class="sxs-lookup"><span data-stu-id="8480a-170">[**IAMVideoAccelerator::Execute**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-execute) to indicate that the data in a set of compressed buffers as indicated in an array of [**AMVABUFFERINFO**](/previous-versions/windows/desktop/api/amva/ns-amva-amvabufferinfo) data structures should be processed.</span></span> <span data-ttu-id="8480a-171">Un codice di funzione dwFunction viene passato al driver in questa chiamata.</span><span class="sxs-lookup"><span data-stu-id="8480a-171">A function code dwFunction is passed to the driver in this call.</span></span> <span data-ttu-id="8480a-172">Un puntatore lpPrivateInputData viene inoltre passato ad alcuni dati per l'invio a valle e un puntatore lpPrivateOutputData viene passato a una posizione in cui il processo downstream può inserire alcuni dati per la lettura del decodificatore.</span><span class="sxs-lookup"><span data-stu-id="8480a-172">A lpPrivateInputData pointer is also passed to some data to send downstream, and a lpPrivateOutputData pointer is passed to a place where the downstream process can put some data for the decoder to read.</span></span>
    -   <span data-ttu-id="8480a-173">[**IAMVideoAccelerator:: ReleaseBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-releasebuffer) per indicare che il decodificatore ha completato l'uso di un buffer specificato per il momento e non è più necessario bloccare l'accesso al buffer.</span><span class="sxs-lookup"><span data-stu-id="8480a-173">[**IAMVideoAccelerator::ReleaseBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-releasebuffer) to indicate that the decoder has completed use of a specified buffer for the moment and no longer needs locked access to the buffer.</span></span> <span data-ttu-id="8480a-174">Se il decodificatore vuole continuare a usare il buffer, può semplicemente non chiamare **IAMVideoAccelerator:: ReleaseBuffer** per il momento, evitando di dover chiamare [**IAMVideoAccelerator:: GetBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getbuffer) fino a quando non si intende effettivamente utilizzare il buffer. Il decodificatore non deve scrivere nel buffer dopo la chiamata di [**Execute**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-execute) fino a quando [**QueryRenderStatus**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-queryrenderstatus) non indica che il buffer è sicuro per la scrittura.</span><span class="sxs-lookup"><span data-stu-id="8480a-174">(If the decoder wishes to continue to use the buffer, it can simply not call **IAMVideoAccelerator::ReleaseBuffer** for the moment, thus avoiding the need to call [**IAMVideoAccelerator::GetBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getbuffer) until it really intends to not use the buffer anymore.) The decoder should not write into the buffer after [**Execute**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-execute) is called until [**QueryRenderStatus**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-queryrenderstatus) indicates that the buffer is safe for writing.</span></span>
3.  <span data-ttu-id="8480a-175">Per completare l'elaborazione dell'output per un buffer di destinazione, il decodificatore chiama [**IAMVideoAccelerator:: EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe).</span><span class="sxs-lookup"><span data-stu-id="8480a-175">To complete output processing for a destination buffer, the decoder calls [**IAMVideoAccelerator::EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe).</span></span> <span data-ttu-id="8480a-176">Può passare dati arbitrari a valle con questa chiamata e questo è essenzialmente tutto ciò che accade in seguito a questa chiamata.</span><span class="sxs-lookup"><span data-stu-id="8480a-176">It can pass some arbitrary data downstream with this call, and that's essentially all that happens as a result of this call.</span></span> <span data-ttu-id="8480a-177">Non invia un indice del buffer di destinazione in questa chiamata, pertanto non può indicare all'acceleratore esattamente quale buffer di destinazione viene completato a meno che questa indicazione non sia contenuta nei dati arbitrari passati.</span><span class="sxs-lookup"><span data-stu-id="8480a-177">It doesn't send a destination buffer index in this call, so it can't indicate to the accelerator precisely what destination buffer is completed unless this indication is contained in the arbitrary data that is passed.</span></span>
4.  <span data-ttu-id="8480a-178">Per visualizzare un frame, il decodificatore chiama [**IAMVideoAccelerator::D isplayframe**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-displayframe) con l'indice del frame da visualizzare e una struttura [**IMediaSample**](/windows/desktop/api/Strmif/nn-strmif-imediasample) che contiene i timestamp di inizio e di fine e i flag pertinenti, ad esempio **dwTypeSpecificFlags** , nella struttura delle [**\_ \_ Proprietà am SAMPLE2**](/windows/win32/api/strmif/ns-strmif-am_sample2_properties) e **dwInterlaceFlags** nella struttura [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) .</span><span class="sxs-lookup"><span data-stu-id="8480a-178">To display a frame, the decoder calls [**IAMVideoAccelerator::DisplayFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-displayframe) with the index of the frame to display and a [**IMediaSample**](/windows/desktop/api/Strmif/nn-strmif-imediasample) structure containing start and stop time stamps and relevant flags such as **dwTypeSpecificFlags** in the [**AM\_SAMPLE2\_PROPERTIES**](/windows/win32/api/strmif/ns-strmif-am_sample2_properties) structure, and **dwInterlaceFlags** in the [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) structure.</span></span> <span data-ttu-id="8480a-179">Il decodificatore deve verificare che tutte le operazioni di decompressione che influiscono sul contenuto del frame siano state completate prima di chiamare **DisplayFrame**.</span><span class="sxs-lookup"><span data-stu-id="8480a-179">The decoder must verify that all decompression operations that affect the content of the frame have completed before calling **DisplayFrame**.</span></span>
5.  <span data-ttu-id="8480a-180">Infine, il decodificatore deve, al completamento di tutte le operazioni di elaborazione, indicare il completamento di tutti i frame di output restanti avviati chiamando [**IAMVideoAccelerator:: EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) e rilasciare tutti i buffer bloccati chiamando [**IAMVideoAccelerator:: ReleaseBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-releasebuffer) per ogni buffer non rilasciato.</span><span class="sxs-lookup"><span data-stu-id="8480a-180">Finally, the decoder should, upon completion of all processing, indicate completion of all remaining begun output frames by calling [**IAMVideoAccelerator::EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) and release all of its locked buffers by calling [**IAMVideoAccelerator::ReleaseBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-releasebuffer) for each unreleased buffer.</span></span>

## <a name="related-topics"></a><span data-ttu-id="8480a-181">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="8480a-181">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8480a-182">Specifiche e interfacce del decodificatore</span><span class="sxs-lookup"><span data-stu-id="8480a-182">Decoder Interfaces and Specifications</span></span>](decoder-interfaces-and-specifications.md)
</dt> </dl>

 

 



