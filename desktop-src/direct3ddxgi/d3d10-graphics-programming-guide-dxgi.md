---
description: In questo argomento sono contenute le sezioni seguenti.
ms.assetid: 0522ccbf-e754-470a-8199-004fcbaa927d
title: Panoramica di DXGI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 324a5be26aade17385a6ab0b7d347015497a2a3f
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "104481085"
---
# <a name="dxgi-overview"></a><span data-ttu-id="91fb4-103">Panoramica di DXGI</span><span class="sxs-lookup"><span data-stu-id="91fb4-103">DXGI overview</span></span>

<span data-ttu-id="91fb4-104">Microsoft DirectX Graphics Infrastructure (DXGI) riconosce che alcune parti della grafica si evolvono più lentamente di altre.</span><span class="sxs-lookup"><span data-stu-id="91fb4-104">Microsoft DirectX Graphics Infrastructure (DXGI) recognizes that some parts of graphics evolve more slowly than others.</span></span> <span data-ttu-id="91fb4-105">L'obiettivo principale di DXGI è quello di gestire attività di basso livello che possono essere indipendenti dal runtime di grafica DirectX.</span><span class="sxs-lookup"><span data-stu-id="91fb4-105">The primary goal of DXGI is to manage low-level tasks that can be independent of the DirectX graphics runtime.</span></span> <span data-ttu-id="91fb4-106">DXGI fornisce un Framework comune per i componenti grafici futuri. il primo componente che sfrutta i vantaggi di DXGI è Microsoft Direct3D 10.</span><span class="sxs-lookup"><span data-stu-id="91fb4-106">DXGI provides a common framework for future graphics components; the first component that takes advantage of DXGI is Microsoft Direct3D 10.</span></span>

<span data-ttu-id="91fb4-107">Nelle versioni precedenti di Direct3D, le attività di basso livello, ad esempio l'enumerazione dei dispositivi hardware, la presentazione di frame di cui è stato eseguito il rendering in un output, il controllo di gamma e la gestione di una transizione a schermo intero erano incluse nel runtime Direct3D.</span><span class="sxs-lookup"><span data-stu-id="91fb4-107">In previous versions of Direct3D, low-level tasks like enumeration of hardware devices, presenting rendered frames to an output, controlling gamma, and managing a full-screen transition were included in the Direct3D runtime.</span></span> <span data-ttu-id="91fb4-108">Queste attività sono ora implementate in DXGI.</span><span class="sxs-lookup"><span data-stu-id="91fb4-108">These tasks are now implemented in DXGI.</span></span>

<span data-ttu-id="91fb4-109">Lo scopo di DXGI è comunicare con il driver in modalità kernel e l'hardware di sistema, come illustrato nel diagramma seguente.</span><span class="sxs-lookup"><span data-stu-id="91fb4-109">DXGI's purpose is to communicate with the kernel mode driver and the system hardware, as shown in the following diagram.</span></span>

![diagramma della comunicazione tra applicazioni, DXGI, driver e hardware](images/dxgi-dll.png)

<span data-ttu-id="91fb4-111">Un'applicazione può accedere direttamente a DXGI o chiamare le API Direct3D in D3D11 \_ 1. h, d3d11. h, D3D10 \_ 1. h o d3d10. h, che gestisce le comunicazioni con dxgi.</span><span class="sxs-lookup"><span data-stu-id="91fb4-111">An application can access DXGI directly, or call the Direct3D APIs in D3D11\_1.h, D3D11.h, D3D10\_1.h, or D3D10.h, which handles the communications with DXGI for you.</span></span> <span data-ttu-id="91fb4-112">Si consiglia di usare direttamente DXGI se l'applicazione deve enumerare i dispositivi o controllare la modalità di presentazione dei dati a un output.</span><span class="sxs-lookup"><span data-stu-id="91fb4-112">You may want to work with DXGI directly if your application needs to enumerate devices or control how data is presented to an output.</span></span>

<span data-ttu-id="91fb4-113">In questo argomento sono contenute le sezioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="91fb4-113">This topic contains the following sections.</span></span>

-   [<span data-ttu-id="91fb4-114">Enumerazione degli adapter</span><span class="sxs-lookup"><span data-stu-id="91fb4-114">Enumerating Adapters</span></span>](#enumerating-adapters)
    -   [<span data-ttu-id="91fb4-115">Nuove informazioni sull'enumerazione degli adapter per Windows 8</span><span class="sxs-lookup"><span data-stu-id="91fb4-115">New info about enumerating adapters for Windows 8</span></span>](#new-info-about-enumerating-adapters-for-windows-8)
-   [<span data-ttu-id="91fb4-116">Presentazione</span><span class="sxs-lookup"><span data-stu-id="91fb4-116">Presentation</span></span>](#presentation)
    -   [<span data-ttu-id="91fb4-117">Creare una catena di scambio</span><span class="sxs-lookup"><span data-stu-id="91fb4-117">Create a Swap Chain</span></span>](#create-a-swap-chain)
    -   [<span data-ttu-id="91fb4-118">Cura e alimentazione della catena di scambio</span><span class="sxs-lookup"><span data-stu-id="91fb4-118">Care and Feeding of the Swap Chain</span></span>](#care-and-feeding-of-the-swap-chain)
    -   [<span data-ttu-id="91fb4-119">Gestione del ridimensionamento della finestra</span><span class="sxs-lookup"><span data-stu-id="91fb4-119">Handling Window Resizing</span></span>](#handling-window-resizing)
    -   [<span data-ttu-id="91fb4-120">Scelta dell'output e delle dimensioni di DXGI</span><span class="sxs-lookup"><span data-stu-id="91fb4-120">Choosing the DXGI Output and Size</span></span>](#choosing-the-dxgi-output-and-size)
    -   [<span data-ttu-id="91fb4-121">Debug in modalità Full-Screen</span><span class="sxs-lookup"><span data-stu-id="91fb4-121">Debugging in Full-Screen Mode</span></span>](#debugging-in-full-screen-mode)
    -   [<span data-ttu-id="91fb4-122">Eliminazione di una catena di scambio</span><span class="sxs-lookup"><span data-stu-id="91fb4-122">Destroying a Swap Chain</span></span>](#destroying-a-swap-chain)
    -   [<span data-ttu-id="91fb4-123">Uso di un monitoraggio ruotato</span><span class="sxs-lookup"><span data-stu-id="91fb4-123">Using a Rotated Monitor</span></span>](#using-a-rotated-monitor)
    -   [<span data-ttu-id="91fb4-124">Modalità di cambio</span><span class="sxs-lookup"><span data-stu-id="91fb4-124">Switching Modes</span></span>](#switching-modes)
    -   [<span data-ttu-id="91fb4-125">Suggerimento per le prestazioni a schermo intero</span><span class="sxs-lookup"><span data-stu-id="91fb4-125">Full-Screen Performance Tip</span></span>](#full-screen-performance-tip)
    -   [<span data-ttu-id="91fb4-126">Considerazioni su multithread</span><span class="sxs-lookup"><span data-stu-id="91fb4-126">Multithread Considerations</span></span>](#multithread-considerations)
-   [<span data-ttu-id="91fb4-127">Risposte DXGI da DLLMain</span><span class="sxs-lookup"><span data-stu-id="91fb4-127">DXGI Responses from DLLMain</span></span>](#dxgi-responses-from-dllmain)
-   [<span data-ttu-id="91fb4-128">DXGI 1,1 modifiche</span><span class="sxs-lookup"><span data-stu-id="91fb4-128">DXGI 1.1 Changes</span></span>](#dxgi-11-changes)
-   [<span data-ttu-id="91fb4-129">DXGI 1,2 modifiche</span><span class="sxs-lookup"><span data-stu-id="91fb4-129">DXGI 1.2 Changes</span></span>](#dxgi-12-changes)
-   [<span data-ttu-id="91fb4-130">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="91fb4-130">Related topics</span></span>](#related-topics)

<span data-ttu-id="91fb4-131">Per vedere quali formati sono supportati dall'hardware di Direct3D 11:</span><span class="sxs-lookup"><span data-stu-id="91fb4-131">To see which formats are supported by Direct3D 11 hardware:</span></span>

-   [<span data-ttu-id="91fb4-132">Supporto del formato DXGI per l'hardware a livello di funzionalità Direct3D 12,1</span><span class="sxs-lookup"><span data-stu-id="91fb4-132">DXGI Format Support for Direct3D Feature Level 12.1 Hardware</span></span>](hardware-support-for-direct3d-12-1-formats.md)
-   [<span data-ttu-id="91fb4-133">Supporto del formato DXGI per l'hardware a livello di funzionalità Direct3D 12,0</span><span class="sxs-lookup"><span data-stu-id="91fb4-133">DXGI Format Support for Direct3D Feature Level 12.0 Hardware</span></span>](hardware-support-for-direct3d-12-0-formats.md)
-   [<span data-ttu-id="91fb4-134">Supporto del formato DXGI per l'hardware a livello di funzionalità Direct3D 11,1</span><span class="sxs-lookup"><span data-stu-id="91fb4-134">DXGI Format Support for Direct3D Feature Level 11.1 Hardware</span></span>](format-support-for-direct3d-11-1-feature-level-hardware.md)
-   [<span data-ttu-id="91fb4-135">Supporto del formato DXGI per l'hardware a livello di funzionalità Direct3D 11,0</span><span class="sxs-lookup"><span data-stu-id="91fb4-135">DXGI Format Support for Direct3D Feature Level 11.0 Hardware</span></span>](format-support-for-direct3d-11-0-feature-level-hardware.md)
-   <span data-ttu-id="91fb4-136">[Supporto hardware per i formati 10Level9 Direct3D](/previous-versions//ff471324(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="91fb4-136">[Hardware Support for Direct3D 10Level9 Formats](/previous-versions//ff471324(v=vs.85))</span></span>
-   <span data-ttu-id="91fb4-137">[Supporto hardware per formati Direct3D 10,1](/previous-versions//cc627091(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="91fb4-137">[Hardware Support for Direct3D 10.1 Formats](/previous-versions//cc627091(v=vs.85))</span></span>
-   <span data-ttu-id="91fb4-138">[Supporto hardware per i formati Direct3D 10](/previous-versions//cc627090(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="91fb4-138">[Hardware Support for Direct3D 10 Formats](/previous-versions//cc627090(v=vs.85))</span></span>

## <a name="enumerating-adapters"></a><span data-ttu-id="91fb4-139">Enumerazione degli adapter</span><span class="sxs-lookup"><span data-stu-id="91fb4-139">Enumerating adapters</span></span>

<span data-ttu-id="91fb4-140">Un adapter è un'astrazione dell'hardware e della funzionalità software del computer.</span><span class="sxs-lookup"><span data-stu-id="91fb4-140">An adapter is an abstraction of the hardware and the software capability of your computer.</span></span> <span data-ttu-id="91fb4-141">Nel computer sono in genere presenti molti adapter.</span><span class="sxs-lookup"><span data-stu-id="91fb4-141">There are generally many adapters on your machine.</span></span> <span data-ttu-id="91fb4-142">Alcuni dispositivi sono implementati nell'hardware (ad esempio la scheda video) e altri sono implementati nel software, ad esempio l'unità di rasterizzazione dei riferimenti Direct3D.</span><span class="sxs-lookup"><span data-stu-id="91fb4-142">Some devices are implemented in hardware (like your video card) and some are implemented in software (like the Direct3D reference rasterizer).</span></span> <span data-ttu-id="91fb4-143">Gli adapter implementano la funzionalità utilizzata da un'applicazione grafica.</span><span class="sxs-lookup"><span data-stu-id="91fb4-143">Adapters implement functionality used by a graphic application.</span></span> <span data-ttu-id="91fb4-144">Il diagramma seguente mostra un sistema con un singolo computer, due schede (schede video) e tre monitor di output.</span><span class="sxs-lookup"><span data-stu-id="91fb4-144">The following diagram shows a system with a single computer, two adapters (video cards), and three output monitors.</span></span>

![diagramma di un computer con due schede video e tre monitor](images/dxgi-terms.png)

<span data-ttu-id="91fb4-146">Quando si enumerano questi componenti hardware, DXGI crea un'interfaccia [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) per ciascun output (o monitoraggio) e un'interfaccia [**IDXGIAdapter2**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgiadapter2) per ogni scheda video (anche se si tratta di una scheda video incorporata in una scheda madre).</span><span class="sxs-lookup"><span data-stu-id="91fb4-146">When enumerating these pieces of hardware, DXGI creates an [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) interface for each output (or monitor) and an [**IDXGIAdapter2**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgiadapter2) interface for each video card (even if it is a video card built into a motherboard).</span></span> <span data-ttu-id="91fb4-147">L'enumerazione viene eseguita utilizzando una chiamata di interfaccia [**IDXGIFactory**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgifactory2) , [**IDXGIFactory:: EnumAdapters**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-enumadapters), per restituire un set di interfacce [**IDXGIAdapter**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter) che rappresentano l'hardware del video.</span><span class="sxs-lookup"><span data-stu-id="91fb4-147">Enumeration is done by using an [**IDXGIFactory**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgifactory2) interface call, [**IDXGIFactory::EnumAdapters**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-enumadapters), to return a set of [**IDXGIAdapter**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter) interfaces that represent the video hardware.</span></span>

<span data-ttu-id="91fb4-148">DXGI 1,1 ha aggiunto l'interfaccia [**IDXGIFactory1**](/windows/win32/api/DXGI/nn-dxgi-idxgifactory1) .</span><span class="sxs-lookup"><span data-stu-id="91fb4-148">DXGI 1.1 added the [**IDXGIFactory1**](/windows/win32/api/DXGI/nn-dxgi-idxgifactory1) interface.</span></span> <span data-ttu-id="91fb4-149">[**IDXGIFactory1:: EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) restituisce un set di interfacce [**IDXGIAdapter1**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter1) che rappresenta l'hardware del video.</span><span class="sxs-lookup"><span data-stu-id="91fb4-149">[**IDXGIFactory1::EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) returns a set of [**IDXGIAdapter1**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter1) interfaces that represents the video hardware.</span></span>

<span data-ttu-id="91fb4-150">Se si desidera selezionare funzionalità hardware video specifiche quando si utilizzano le API Direct3D, è consigliabile chiamare in modo iterativo la funzione [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) o [**D3D11CreateDeviceAndSwapChain**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdeviceandswapchain) con ogni handle di adapter e il possibile [livello di funzionalità](../direct3d11/overviews-direct3d-11-devices-downlevel-intro.md)dell'hardware.</span><span class="sxs-lookup"><span data-stu-id="91fb4-150">If you want to select specific video hardware capabilities when you use Direct3D APIs, we recommend that you iteratively call the [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) or [**D3D11CreateDeviceAndSwapChain**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdeviceandswapchain) function with each adapter handle and possible hardware [feature level](../direct3d11/overviews-direct3d-11-devices-downlevel-intro.md).</span></span> <span data-ttu-id="91fb4-151">Questa funzione ha esito positivo se il livello di funzionalità è supportato dall'adapter specificato.</span><span class="sxs-lookup"><span data-stu-id="91fb4-151">This function succeeds if the feature level is supported by the specified adapter.</span></span>

### <a name="new-info-about-enumerating-adapters-for-windows-8"></a><span data-ttu-id="91fb4-152">Nuove informazioni sull'enumerazione degli adapter per Windows 8</span><span class="sxs-lookup"><span data-stu-id="91fb4-152">New info about enumerating adapters for Windows 8</span></span>

<span data-ttu-id="91fb4-153">A partire da Windows 8, un adapter denominato "Microsoft Basic render driver" è sempre presente.</span><span class="sxs-lookup"><span data-stu-id="91fb4-153">Starting with Windows 8, an adapter called the "Microsoft Basic Render Driver" is always present.</span></span> <span data-ttu-id="91fb4-154">Questa scheda ha un VendorId di **0x1414** e un DeviceID di **0x8c**.</span><span class="sxs-lookup"><span data-stu-id="91fb4-154">This adapter has a VendorId of **0x1414** and a DeviceID of **0x8c**.</span></span> <span data-ttu-id="91fb4-155">Questa scheda dispone anche del [**valore \_ \_ \_ software del flag dell'adattatore DXGI**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) impostato nel membro **Flags** della relativa struttura [**\_ \_ DESC2 dell'adapter DXGI**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_adapter_desc2) .</span><span class="sxs-lookup"><span data-stu-id="91fb4-155">This adapter also has the [**DXGI\_ADAPTER\_FLAG\_SOFTWARE**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) value set in the **Flags** member of its [**DXGI\_ADAPTER\_DESC2**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_adapter_desc2) structure.</span></span> <span data-ttu-id="91fb4-156">Questo adapter è un dispositivo solo di rendering senza output di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="91fb4-156">This adapter is a render-only device that has no display outputs.</span></span> <span data-ttu-id="91fb4-157">DXGI non restituisce mai il [**\_ dispositivo DXGI Error \_ \_ rimosso**](dxgi-error.md) per questo adapter.</span><span class="sxs-lookup"><span data-stu-id="91fb4-157">DXGI never returns [**DXGI\_ERROR\_DEVICE\_REMOVED**](dxgi-error.md) for this adapter.</span></span>

<span data-ttu-id="91fb4-158">Se il driver di visualizzazione di un computer non funziona o è disabilitato, è possibile chevenga chiamato anche il "driver di rendering di base Microsoft".</span><span class="sxs-lookup"><span data-stu-id="91fb4-158">If a computer's display driver is not functioning or is disabled, the computer's primary (**NULL**) adapter might also be called "Microsoft Basic Render Driver."</span></span> <span data-ttu-id="91fb4-159">Tuttavia, per questo adapter sono presenti output e non è stato impostato il valore di DXGI per l' [**\_ adapter \_ \_**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) .</span><span class="sxs-lookup"><span data-stu-id="91fb4-159">But this adapter has outputs and doesn't have the [**DXGI\_ADAPTER\_FLAG\_SOFTWARE**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) value set.</span></span> <span data-ttu-id="91fb4-160">Per impostazione predefinita, il sistema operativo e le app utilizzano questa scheda.</span><span class="sxs-lookup"><span data-stu-id="91fb4-160">The operating system and apps use this adapter by default.</span></span> <span data-ttu-id="91fb4-161">Se è installato o abilitato un driver di visualizzazione, le app possono ricevere il [**\_ dispositivo di errore DXGI \_ \_ rimosso**](dxgi-error.md) per questa scheda e quindi rienumerare nuovamente gli adapter.</span><span class="sxs-lookup"><span data-stu-id="91fb4-161">If a display driver is installed or enabled, apps can receive [**DXGI\_ERROR\_DEVICE\_REMOVED**](dxgi-error.md) for this adapter and then must re-enumerate adapters again.</span></span>

<span data-ttu-id="91fb4-162">Quando la scheda di visualizzazione principale di un computer è "Microsoft Basic Display Adapter" (scheda[Warp](../direct3d11/overviews-direct3d-11-devices-create-warp.md) ), il computer dispone anche di un secondo adapter.</span><span class="sxs-lookup"><span data-stu-id="91fb4-162">When a computer's primary display adapter is the "Microsoft Basic Display Adapter" ([WARP](../direct3d11/overviews-direct3d-11-devices-create-warp.md) adapter), that computer also has a second adapter.</span></span> <span data-ttu-id="91fb4-163">Questa seconda scheda è il dispositivo solo di rendering senza output di visualizzazione e per il quale DXGI non restituisce mai il [**\_ dispositivo DXGI Error \_ \_ rimosso**](dxgi-error.md).</span><span class="sxs-lookup"><span data-stu-id="91fb4-163">This second adapter is the render-only device that has no display outputs and for which DXGI never returns [**DXGI\_ERROR\_DEVICE\_REMOVED**](dxgi-error.md).</span></span>

<span data-ttu-id="91fb4-164">Se si vuole usare WARP per il rendering, il calcolo o altre attività a esecuzione prolungata, si consiglia di usare il dispositivo solo di rendering.</span><span class="sxs-lookup"><span data-stu-id="91fb4-164">If you want to use WARP for rendering, compute, or other long running tasks, we recommend to use the render-only device.</span></span> <span data-ttu-id="91fb4-165">È possibile ottenere un puntatore al dispositivo di sola rendering chiamando il metodo [**IDXGIFactory1:: EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) .</span><span class="sxs-lookup"><span data-stu-id="91fb4-165">You can obtain a pointer to the render-only device by calling the [**IDXGIFactory1::EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) method.</span></span> <span data-ttu-id="91fb4-166">Si crea anche il dispositivo di sola rendering quando si specifica [**il \_ \_ tipo di \_ driver D3D**](/windows/win32/api/d3dcommon/ne-d3dcommon-d3d_driver_type) nel parametro *DRIVERTYPE* di [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) perché il dispositivo Warp usa anche l'adattatore di distorsione di sola rendering.</span><span class="sxs-lookup"><span data-stu-id="91fb4-166">You also create the render-only device when you specify [**D3D\_DRIVER\_TYPE\_WARP**](/windows/win32/api/d3dcommon/ne-d3dcommon-d3d_driver_type) in the *DriverType* parameter of [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) because the WARP device also uses the render-only WARP adapter.</span></span>

## <a name="presentation"></a><span data-ttu-id="91fb4-167">Presentazione</span><span class="sxs-lookup"><span data-stu-id="91fb4-167">Presentation</span></span>

<span data-ttu-id="91fb4-168">Il processo dell'applicazione consiste nel eseguire il rendering dei frame e richiedere a DXGI di presentare tali frame all'output.</span><span class="sxs-lookup"><span data-stu-id="91fb4-168">Your application's job is to render frames and ask DXGI to present those frames to the output.</span></span> <span data-ttu-id="91fb4-169">Se l'applicazione dispone di due buffer disponibili, è possibile eseguire il rendering di un buffer e presentarne un altro.</span><span class="sxs-lookup"><span data-stu-id="91fb4-169">If the application has two buffers available, it can render one buffer while presenting another one.</span></span> <span data-ttu-id="91fb4-170">L'applicazione potrebbe richiedere più di due buffer a seconda del tempo necessario per eseguire il rendering di un frame o della frequenza dei fotogrammi desiderata per la presentazione.</span><span class="sxs-lookup"><span data-stu-id="91fb4-170">The application might require more than two buffers depending on the time it takes to render a frame or the desired frame rate for presentation.</span></span> <span data-ttu-id="91fb4-171">Il set di buffer creati è denominato catena di scambio, come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="91fb4-171">The set of buffers created is called a swap chain, as shown here.</span></span>

![illustrazione di una catena di scambio](images/dxgi-swap-chain.png)

-   [<span data-ttu-id="91fb4-173">Creare una catena di scambio</span><span class="sxs-lookup"><span data-stu-id="91fb4-173">Create a Swap Chain</span></span>](#create-a-swap-chain)
-   [<span data-ttu-id="91fb4-174">Cura e alimentazione della catena di scambio</span><span class="sxs-lookup"><span data-stu-id="91fb4-174">Care and Feeding of the Swap Chain</span></span>](#care-and-feeding-of-the-swap-chain)
-   [<span data-ttu-id="91fb4-175">Gestione del ridimensionamento della finestra</span><span class="sxs-lookup"><span data-stu-id="91fb4-175">Handling Window Resizing</span></span>](#handling-window-resizing)
-   [<span data-ttu-id="91fb4-176">Scelta dell'output e delle dimensioni di DXGI</span><span class="sxs-lookup"><span data-stu-id="91fb4-176">Choosing the DXGI Output and Size</span></span>](#choosing-the-dxgi-output-and-size)
-   [<span data-ttu-id="91fb4-177">Debug in modalità Full-Screen</span><span class="sxs-lookup"><span data-stu-id="91fb4-177">Debugging in Full-Screen Mode</span></span>](#debugging-in-full-screen-mode)
-   [<span data-ttu-id="91fb4-178">Eliminazione di una catena di scambio</span><span class="sxs-lookup"><span data-stu-id="91fb4-178">Destroying a Swap Chain</span></span>](#destroying-a-swap-chain)
-   [<span data-ttu-id="91fb4-179">Uso di un monitoraggio ruotato</span><span class="sxs-lookup"><span data-stu-id="91fb4-179">Using a Rotated Monitor</span></span>](#using-a-rotated-monitor)
-   [<span data-ttu-id="91fb4-180">Modalità di cambio</span><span class="sxs-lookup"><span data-stu-id="91fb4-180">Switching Modes</span></span>](#switching-modes)
-   [<span data-ttu-id="91fb4-181">Suggerimento per le prestazioni a schermo intero</span><span class="sxs-lookup"><span data-stu-id="91fb4-181">Full-Screen Performance Tip</span></span>](#full-screen-performance-tip)
-   [<span data-ttu-id="91fb4-182">Considerazioni su multithread</span><span class="sxs-lookup"><span data-stu-id="91fb4-182">Multithread Considerations</span></span>](#multithread-considerations)

<span data-ttu-id="91fb4-183">Una catena di scambio ha un buffer anteriore e uno o più buffer back.</span><span class="sxs-lookup"><span data-stu-id="91fb4-183">A swap chain has one front buffer and one or more back buffers.</span></span> <span data-ttu-id="91fb4-184">Ogni applicazione crea la propria catena di scambio.</span><span class="sxs-lookup"><span data-stu-id="91fb4-184">Each application creates its own swap chain.</span></span> <span data-ttu-id="91fb4-185">Per massimizzare la velocità della presentazione dei dati a un output, viene quasi sempre creata una catena di scambio nella memoria di un sottosistema di visualizzazione, come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="91fb4-185">To maximize the speed of the presentation of the data to an output, a swap chain is almost always created in the memory of a display sub-system, which is shown in the following illustration.</span></span>

![illustrazione di un sottosistema di visualizzazione](images/dxgi-adapter.png)

<span data-ttu-id="91fb4-187">Il sottosistema di visualizzazione (che è spesso una scheda video ma potrebbe essere implementato in una scheda madre) contiene una GPU, un convertitore da digitale a analogico (DAC) e memoria.</span><span class="sxs-lookup"><span data-stu-id="91fb4-187">The display sub-system (which is often a video card but could be implemented on a motherboard) contains a GPU, a digital to analog converter (DAC), and memory.</span></span> <span data-ttu-id="91fb4-188">La catena di scambio viene allocata in questa memoria per rendere la presentazione molto rapida.</span><span class="sxs-lookup"><span data-stu-id="91fb4-188">The swap chain is allocated within this memory to make presentation very fast.</span></span> <span data-ttu-id="91fb4-189">Il sottosistema di visualizzazione presenta i dati nel buffer anteriore all'output.</span><span class="sxs-lookup"><span data-stu-id="91fb4-189">The display sub-system presents the data in the front buffer to the output.</span></span>

<span data-ttu-id="91fb4-190">Una catena di scambio è configurata per essere tracciata in modalità a schermo intero o a finestra. in questo modo si elimina la necessità di sapere se un output è a finestra o a schermo intero.</span><span class="sxs-lookup"><span data-stu-id="91fb4-190">A swap chain is set up to draw in full-screen or windowed mode, this eliminates the need to know whether an output is windowed or full screen.</span></span> <span data-ttu-id="91fb4-191">Una catena di scambio in modalità a schermo intero può ottimizzare le prestazioni cambiando la risoluzione dello schermo.</span><span class="sxs-lookup"><span data-stu-id="91fb4-191">A full-screen mode swap chain can optimize performance by switching the display resolution.</span></span>

### <a name="create-a-swap-chain"></a><span data-ttu-id="91fb4-192">Creare la catena di scambio</span><span class="sxs-lookup"><span data-stu-id="91fb4-192">Create a swap chain</span></span>

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="odd">
<td><span data-ttu-id="91fb4-193">Differenze tra Direct3D 9 e Direct3D 10: Direct3D 10 è il primo componente grafico per l'uso di DXGI.</span><span class="sxs-lookup"><span data-stu-id="91fb4-193">Differences between Direct3D 9 and Direct3D 10: Direct3D 10 is the first graphics component to use DXGI.</span></span> <span data-ttu-id="91fb4-194">DXGI presenta diversi comportamenti della catena di scambio.</span><span class="sxs-lookup"><span data-stu-id="91fb4-194">DXGI has some different swap chain behaviors.</span></span><br/>
<ul>
<li><span data-ttu-id="91fb4-195">In DXGI una catena di scambio è associata a una finestra al momento della creazione della catena di scambio.</span><span class="sxs-lookup"><span data-stu-id="91fb4-195">In DXGI, a swap chain is tied to a window when the swap chain is created.</span></span> <span data-ttu-id="91fb4-196">Questa modifica consente di migliorare le prestazioni e di risparmiare memoria.</span><span class="sxs-lookup"><span data-stu-id="91fb4-196">This change improves performance and saves memory.</span></span> <span data-ttu-id="91fb4-197">Le versioni precedenti di Direct3D consentivano alla catena di scambio di modificare la finestra a cui è associata la catena di scambio.</span><span class="sxs-lookup"><span data-stu-id="91fb4-197">Previous versions of Direct3D allowed the swap chain to change the window that the swap chain is tied to.</span></span></li>
<li><span data-ttu-id="91fb4-198">In DXGI una catena di scambio è associata a un dispositivo di rendering al momento della creazione.</span><span class="sxs-lookup"><span data-stu-id="91fb4-198">In DXGI, a swap chain is tied to a rendering device on creation.</span></span> <span data-ttu-id="91fb4-199">L'oggetto dispositivo che la funzione di creazione di un dispositivo Direct3D restituisce implementa l'interfaccia <a href="/windows/win32/api/unknwn/nn-unknwn-iunknown"><strong>IUnknown</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="91fb4-199">The device object that the Direct3D create device functions return implements the <a href="/windows/win32/api/unknwn/nn-unknwn-iunknown"><strong>IUnknown</strong></a> interface.</span></span> <span data-ttu-id="91fb4-200">È possibile chiamare <a href="/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)"><strong>QueryInterface</strong></a> per eseguire una query per l'interfaccia <a href="/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgidevice2"><strong>IDXGIDevice2</strong></a> corrispondente del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="91fb4-200">You can call <a href="/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)"><strong>QueryInterface</strong></a> to query for the device's corresponding <a href="/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgidevice2"><strong>IDXGIDevice2</strong></a> interface.</span></span> <span data-ttu-id="91fb4-201">Una modifica al dispositivo di rendering richiede la ricreazione della catena di scambio.</span><span class="sxs-lookup"><span data-stu-id="91fb4-201">A change to the rendering device requires the swap chain to be recreated.</span></span></li>
<li><p><span data-ttu-id="91fb4-202">In DXGI, gli effetti di scambio disponibili sono DXGI_SWAP_EFFECT_DISCARD e DXGI_SWAP_EFFECT_SEQUENTIAL.</span><span class="sxs-lookup"><span data-stu-id="91fb4-202">In DXGI, the swap effects available are DXGI_SWAP_EFFECT_DISCARD and DXGI_SWAP_EFFECT_SEQUENTIAL.</span></span> <span data-ttu-id="91fb4-203">A partire da Windows 8, è disponibile anche l'effetto di scambio DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL.</span><span class="sxs-lookup"><span data-stu-id="91fb4-203">Starting with Windows 8 the DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL swap effect is also available.</span></span> <span data-ttu-id="91fb4-204">Nella tabella seguente viene illustrato un mapping di Direct3D 9 a DXGI.</span><span class="sxs-lookup"><span data-stu-id="91fb4-204">The following table shows a mapping of Direct3D 9 to DXGI swap effect defines.</span></span> </p>
<table>
<thead>
<tr class="header">
<th><span data-ttu-id="91fb4-205">Effetto di scambio D3D9</span><span class="sxs-lookup"><span data-stu-id="91fb4-205">D3D9 Swap Effect</span></span></th>
<th><span data-ttu-id="91fb4-206">Effetto di scambio DXGI</span><span class="sxs-lookup"><span data-stu-id="91fb4-206">DXGI Swap Effect</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="91fb4-207">D3DSWAPEFFECT_DISCARD</span><span class="sxs-lookup"><span data-stu-id="91fb4-207">D3DSWAPEFFECT_DISCARD</span></span></td>
<td><span data-ttu-id="91fb4-208">DXGI_SWAP_EFFECT_DISCARD</span><span class="sxs-lookup"><span data-stu-id="91fb4-208">DXGI_SWAP_EFFECT_DISCARD</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="91fb4-209">D3DSWAPEFFECT_COPY</span><span class="sxs-lookup"><span data-stu-id="91fb4-209">D3DSWAPEFFECT_COPY</span></span></td>
<td><span data-ttu-id="91fb4-210">DXGI_SWAP_EFFECT_SEQUENTIAL con 1 buffer</span><span class="sxs-lookup"><span data-stu-id="91fb4-210">DXGI_SWAP_EFFECT_SEQUENTIAL with 1 buffer</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="91fb4-211">D3DSWAPEFFECT_FLIP</span><span class="sxs-lookup"><span data-stu-id="91fb4-211">D3DSWAPEFFECT_FLIP</span></span></td>
<td><span data-ttu-id="91fb4-212">DXGI_SWAP_EFFECT_SEQUENTIAL con 2 o più buffer</span><span class="sxs-lookup"><span data-stu-id="91fb4-212">DXGI_SWAP_EFFECT_SEQUENTIAL with 2 or more buffers</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="91fb4-213">D3DSWAPEFFECT_FLIPEX</span><span class="sxs-lookup"><span data-stu-id="91fb4-213">D3DSWAPEFFECT_FLIPEX</span></span></td>
<td><span data-ttu-id="91fb4-214">DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL con 2 o più buffer</span><span class="sxs-lookup"><span data-stu-id="91fb4-214">DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL with 2 or more buffers</span></span></td>
</tr>
</tbody>
</table>
<p></p>
<p> </p></li>
</ul></td>
</tr>
</tbody>
</table>



 

<span data-ttu-id="91fb4-215">I buffer di una catena di scambio vengono creati in una determinata dimensione e in un particolare formato.</span><span class="sxs-lookup"><span data-stu-id="91fb4-215">A swap chain's buffers are created at a particular size and in a particular format.</span></span> <span data-ttu-id="91fb4-216">L'applicazione specifica questi valori (oppure è possibile ereditare le dimensioni dalla finestra di destinazione) all'avvio e può quindi modificarli eventualmente quando le dimensioni della finestra cambiano in risposta a eventi di input o programma dell'utente.</span><span class="sxs-lookup"><span data-stu-id="91fb4-216">The application specifies these values (or you can inherit the size from the target window) at startup, and can then optionally modify them as the window size changes in response to user input or program events.</span></span>

<span data-ttu-id="91fb4-217">Dopo aver creato la catena di scambio, in genere si desidera eseguire il rendering delle immagini.</span><span class="sxs-lookup"><span data-stu-id="91fb4-217">After you create the swap chain, you will typically want to render images into it.</span></span> <span data-ttu-id="91fb4-218">Ecco un frammento di codice che configura un contesto Direct3D per il rendering in una catena di scambio.</span><span class="sxs-lookup"><span data-stu-id="91fb4-218">Here's a code fragment that sets up a Direct3D context to render into a swap chain.</span></span> <span data-ttu-id="91fb4-219">Questo codice estrae un buffer dalla catena di scambio, crea una visualizzazione della destinazione di rendering da tale buffer, quindi la imposta sul dispositivo:</span><span class="sxs-lookup"><span data-stu-id="91fb4-219">This code extracts a buffer from the swap chain, creates a render-target-view from that buffer, then sets it on the device:</span></span>


```
ID3D11Resource * pBB;
ThrowFailure( pSwapChain->GetBuffer(0, __uuidof(pBB),    
  reinterpret_cast<void**>(&pBB)), "Couldn't get back buffer");
ID3D11RenderTargetView * pView;
ThrowFailure( pD3D11Device->CreateRenderTargetView(pBB, NULL, &pView), 
  "Couldn't create view" );
pD3D11DeviceContext->OMSetRenderTargets(1, &pView, 0);
        
```



<span data-ttu-id="91fb4-220">Quando l'applicazione esegue il rendering di un frame in un buffer a catena di scambio, chiamare [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1).</span><span class="sxs-lookup"><span data-stu-id="91fb4-220">After your application renders a frame into a swap-chain buffer, call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1).</span></span> <span data-ttu-id="91fb4-221">L'applicazione può quindi eseguire il rendering dell'immagine successiva.</span><span class="sxs-lookup"><span data-stu-id="91fb4-221">The application can then go render the next image.</span></span>

### <a name="care-and-feeding-of-the-swap-chain"></a><span data-ttu-id="91fb4-222">Cura e alimentazione della catena di scambio</span><span class="sxs-lookup"><span data-stu-id="91fb4-222">Care and feeding of the swap chain</span></span>

<span data-ttu-id="91fb4-223">Dopo aver eseguito il rendering dell'immagine, chiamare [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) e passare il rendering dell'immagine successiva.</span><span class="sxs-lookup"><span data-stu-id="91fb4-223">After you render your image, call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) and go render the next image.</span></span> <span data-ttu-id="91fb4-224">Questo è l'ambito della responsabilità dell'utente.</span><span class="sxs-lookup"><span data-stu-id="91fb4-224">That is the extent of your responsibility.</span></span>

<span data-ttu-id="91fb4-225">Se in precedenza è stato chiamato [**IDXGIFactory:: MakeWindowAssociation**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-makewindowassociation), l'utente può premere la combinazione di tasti Alt-Enter e DXGI eseguirà la transizione dell'applicazione tra la modalità a schermo intero e a finestra.</span><span class="sxs-lookup"><span data-stu-id="91fb4-225">If you previously called [**IDXGIFactory::MakeWindowAssociation**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-makewindowassociation), the user can press the Alt-Enter key combination and DXGI will transition your application between windowed and full-screen mode.</span></span> <span data-ttu-id="91fb4-226">È consigliabile utilizzare **IDXGIFactory:: MakeWindowAssociation** , perché un meccanismo di controllo standard per l'utente è fortemente auspicabile.</span><span class="sxs-lookup"><span data-stu-id="91fb4-226">**IDXGIFactory::MakeWindowAssociation** is recommended, because a standard control mechanism for the user is strongly desired.</span></span>

<span data-ttu-id="91fb4-227">Sebbene non sia necessario scrivere altro codice rispetto a quanto descritto, pochi semplici passaggi possono rendere l'applicazione più reattiva.</span><span class="sxs-lookup"><span data-stu-id="91fb4-227">While you don't have to write any more code than has been described, a few simple steps can make your application more responsive.</span></span> <span data-ttu-id="91fb4-228">La considerazione più importante è il ridimensionamento dei buffer della catena di scambio in risposta al ridimensionamento della finestra di output.</span><span class="sxs-lookup"><span data-stu-id="91fb4-228">The most important consideration is the resizing of the swap chain's buffers in response to the resizing of the output window.</span></span> <span data-ttu-id="91fb4-229">Naturalmente, la migliore route dell'applicazione consiste nel rispondere alle dimensioni di WM \_ e chiamare [**IDXGISwapChain:: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers), passando le dimensioni contenute nei parametri del messaggio.</span><span class="sxs-lookup"><span data-stu-id="91fb4-229">Naturally, the application's best route is to respond to WM\_SIZE, and call [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers), passing the size contained in the message's parameters.</span></span> <span data-ttu-id="91fb4-230">Questo comportamento rende ovviamente la risposta dell'applicazione all'utente quando trascina i bordi della finestra, ma è anche ciò che consente una transizione senza problemi a schermo intero.</span><span class="sxs-lookup"><span data-stu-id="91fb4-230">This behavior obviously makes your application respond well to the user when he or she drags the window's borders, but it is also exactly what enables a smooth full-screen transition.</span></span> <span data-ttu-id="91fb4-231">La finestra riceverà un \_ messaggio di dimensioni WM ogni volta che si verifica tale transizione e la chiamata a **IDXGISwapChain:: ResizeBuffers** è la possibilità della catena di scambio di riallocare l'archiviazione dei buffer per una presentazione ottimale.</span><span class="sxs-lookup"><span data-stu-id="91fb4-231">Your window will receive a WM\_SIZE message whenever such a transition happens, and calling **IDXGISwapChain::ResizeBuffers** is the swap chain's chance to re-allocate the buffers' storage for optimal presentation.</span></span> <span data-ttu-id="91fb4-232">Questo è il motivo per cui l'applicazione è necessaria per rilasciare tutti i riferimenti presenti nei buffer esistenti prima di chiamare **IDXGISwapChain:: ResizeBuffers**.</span><span class="sxs-lookup"><span data-stu-id="91fb4-232">This is why the application is required to release any references it has on the existing buffers before it calls **IDXGISwapChain::ResizeBuffers**.</span></span>

<span data-ttu-id="91fb4-233">Non è possibile chiamare [**IDXGISwapChain:: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) in risposta al passare alla modalità a schermo intero (la maggior parte dei casi, in risposta a \_ dimensioni WM), può impedire l'ottimizzazione del capovolgimento, in cui DXGI può semplicemente scambiare il buffer visualizzato, anziché copiare i dati di un intero schermo.</span><span class="sxs-lookup"><span data-stu-id="91fb4-233">Failure to call [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) in response to switching to full-screen mode (most naturally, in response to WM\_SIZE), can preclude the optimization of flipping, wherein DXGI can simply swap which buffer is being displayed, rather than copying a full screen's worth of data around.</span></span>

<span data-ttu-id="91fb4-234">[**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) indicherà se la finestra di output è completamente nascosto tramite **\_ lo stato \_ DXGI**.</span><span class="sxs-lookup"><span data-stu-id="91fb4-234">[**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) will inform you if your output window is entirely occluded via **DXGI\_STATUS\_OCCLUDED**.</span></span> <span data-ttu-id="91fb4-235">Quando si verifica questo problema, si consiglia di passare alla modalità standby (chiamando **IDXGISwapChain1::P resent1** con **DXGI \_ present \_ test**) poiché le risorse usate per eseguire il rendering del frame vengono sprecate.</span><span class="sxs-lookup"><span data-stu-id="91fb4-235">When this occurs, we recommended that your application go into standby mode (by calling **IDXGISwapChain1::Present1** with **DXGI\_PRESENT\_TEST**) since resources used to render the frame are wasted.</span></span> <span data-ttu-id="91fb4-236">Se si usa DXGI, il **\_ \_ test presente** impedirà la presentazione di tutti i dati durante l'esecuzione del controllo dell'occlusione.</span><span class="sxs-lookup"><span data-stu-id="91fb4-236">Using **DXGI\_PRESENT\_TEST** will prevent any data from being presented while still performing the occlusion check.</span></span> <span data-ttu-id="91fb4-237">Quando **IDXGISwapChain1::P resent1** restituisce S \_ OK, è necessario uscire dalla modalità standby. non usare il codice restituito per passare alla modalità standby. in questo modo, è possibile lasciare che la catena di scambio non possa rinunciare alla modalità a schermo intero.</span><span class="sxs-lookup"><span data-stu-id="91fb4-237">Once **IDXGISwapChain1::Present1** returns S\_OK, you should exit standby mode; do not use the return code to switch to standby mode as doing so can leave the swap chain unable to relinquish full-screen mode.</span></span>

<span data-ttu-id="91fb4-238">Il runtime Direct3D 11,1, disponibile a partire da Windows 8, fornisce una catena di scambio Flip-Model, ovvero una catena di scambio con il valore [**\_ \_ \_ \_ sequenziale DXGI swap effect Flip**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) impostato nel membro **SwapEffect** di [**DXGI \_ swap \_ Chain \_ desc**](/windows/win32/api/DXGI/ns-dxgi-dxgi_swap_chain_desc) o [**DXGI \_ swap \_ Chain \_ DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span><span class="sxs-lookup"><span data-stu-id="91fb4-238">The Direct3D 11.1 runtime, which is available starting with Windows 8, provides a flip-model swap chain (that is, a swap chain that has the [**DXGI\_SWAP\_EFFECT\_FLIP\_SEQUENTIAL**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) value set in the **SwapEffect** member of [**DXGI\_SWAP\_CHAIN\_DESC**](/windows/win32/api/DXGI/ns-dxgi-dxgi_swap_chain_desc) or [**DXGI\_SWAP\_CHAIN\_DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span></span> <span data-ttu-id="91fb4-239">Quando si visualizzano i frame in un output con una catena di scambio Flip-Model, DXGI Annulla il binding del buffer nascosto da tutte le posizioni dello stato della pipeline, ad esempio una destinazione di rendering dell'Unione di output, che scrivono nel buffer di back 0.</span><span class="sxs-lookup"><span data-stu-id="91fb4-239">When you present frames to an output with a flip-model swap chain, DXGI unbinds the back buffer from all pipeline state locations, like an output-merger render target, that write to back buffer 0.</span></span> <span data-ttu-id="91fb4-240">Pertanto, si consiglia di chiamare [**sul ID3D11DeviceContext:: OMSetRenderTargets**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-omsetrendertargets) immediatamente prima di eseguire il rendering nel buffer nascosto.</span><span class="sxs-lookup"><span data-stu-id="91fb4-240">Therefore, we recommend that you call [**ID3D11DeviceContext::OMSetRenderTargets**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-omsetrendertargets) immediately before you render to the back buffer.</span></span> <span data-ttu-id="91fb4-241">Ad esempio, non chiamare **OMSetRenderTargets** e quindi eseguire il lavoro compute shader che non termina il rendering nella risorsa.</span><span class="sxs-lookup"><span data-stu-id="91fb4-241">For example, don't call **OMSetRenderTargets** and then perform compute shader work that doesn't end up rendering to the resource.</span></span> <span data-ttu-id="91fb4-242">Per altre informazioni sulle catene di scambio flip-model e sui relativi vantaggi, vedere [DXGI flip model](dxgi-flip-model.md).</span><span class="sxs-lookup"><span data-stu-id="91fb4-242">For more info about flip-model swap chains and their benefits, see [DXGI Flip Model](dxgi-flip-model.md).</span></span>

> [!NOTE]  
> <span data-ttu-id="91fb4-243">In Direct3D 10 e Direct3D 11 non è necessario chiamare [**IDXGISwapChain:: GetBuffer**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-getbuffer) per recuperare il buffer di back 0 dopo aver chiamato [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) perché per praticità le identità dei buffer indietro cambiano.</span><span class="sxs-lookup"><span data-stu-id="91fb4-243">In Direct3D 10 and Direct3D 11, you don't have to call [**IDXGISwapChain::GetBuffer**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-getbuffer) to retrieve back buffer 0 after you call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) because for convenience the identities of back buffers change.</span></span> <span data-ttu-id="91fb4-244">Questa operazione non si verifica in Direct3D 12 e l'applicazione deve invece tenere traccia manualmente degli indici del buffer.</span><span class="sxs-lookup"><span data-stu-id="91fb4-244">This doesn't happen in Direct3D 12, and your application must instead manually track back buffer indices.</span></span>

### <a name="handling-window-resizing"></a><span data-ttu-id="91fb4-245">Gestione del ridimensionamento della finestra</span><span class="sxs-lookup"><span data-stu-id="91fb4-245">Handling window resizing</span></span>

<span data-ttu-id="91fb4-246">Per gestire il ridimensionamento delle finestre, è possibile usare il metodo [**IDXGISwapChain:: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) .</span><span class="sxs-lookup"><span data-stu-id="91fb4-246">You can use the [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) method to handle window resizing.</span></span> <span data-ttu-id="91fb4-247">Prima di chiamare **ResizeBuffers**, è necessario rilasciare tutti i riferimenti in attesa ai buffer della catena di scambio.</span><span class="sxs-lookup"><span data-stu-id="91fb4-247">Before you call **ResizeBuffers**, you must release all outstanding references to the swap chain's buffers.</span></span> <span data-ttu-id="91fb4-248">L'oggetto che in genere include un riferimento a un buffer della catena di scambio è una visualizzazione di destinazione di rendering.</span><span class="sxs-lookup"><span data-stu-id="91fb4-248">The object that typically holds a reference to a swap chain's buffer is a render-target-view.</span></span>

<span data-ttu-id="91fb4-249">Il codice di esempio seguente mostra come chiamare [**ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) dall'interno del gestore WindowProc per \_ i messaggi di dimensioni WM:</span><span class="sxs-lookup"><span data-stu-id="91fb4-249">The following example code shows how to call [**ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) from within the WindowProc handler for WM\_SIZE messages:</span></span>


```
    case WM_SIZE:
        if (g_pSwapChain)
        {
            g_pd3dDeviceContext->OMSetRenderTargets(0, 0, 0);

            // Release all outstanding references to the swap chain's buffers.
            g_pRenderTargetView->Release();

            HRESULT hr;
            // Preserve the existing buffer count and format.
            // Automatically choose the width and height to match the client rect for HWNDs.
            hr = g_pSwapChain->ResizeBuffers(0, 0, 0, DXGI_FORMAT_UNKNOWN, 0);
                                            
            // Perform error handling here!

            // Get buffer and create a render-target-view.
            ID3D11Texture2D* pBuffer;
            hr = g_pSwapChain->GetBuffer(0, __uuidof( ID3D11Texture2D),
                                         (void**) &pBuffer );
            // Perform error handling here!

            hr = g_pd3dDevice->CreateRenderTargetView(pBuffer, NULL,
                                                     &g_pRenderTargetView);
            // Perform error handling here!
            pBuffer->Release();

            g_pd3dDeviceContext->OMSetRenderTargets(1, &g_pRenderTargetView, NULL );

            // Set up the viewport.
            D3D11_VIEWPORT vp;
            vp.Width = width;
            vp.Height = height;
            vp.MinDepth = 0.0f;
            vp.MaxDepth = 1.0f;
            vp.TopLeftX = 0;
            vp.TopLeftY = 0;
            g_pd3dDeviceContext->RSSetViewports( 1, &vp );
        }
        return 1;
```



### <a name="choosing-the-dxgi-output-and-size"></a><span data-ttu-id="91fb4-250">Scelta dell'output e delle dimensioni di DXGI</span><span class="sxs-lookup"><span data-stu-id="91fb4-250">Choosing the DXGI output and size</span></span>

<span data-ttu-id="91fb4-251">Per impostazione predefinita, DXGI sceglie l'output che contiene la maggior parte dell'area client della finestra.</span><span class="sxs-lookup"><span data-stu-id="91fb4-251">By default, DXGI chooses the output that contains most of the client area of the window.</span></span> <span data-ttu-id="91fb4-252">Questa è l'unica opzione disponibile per DXGI quando viene visualizzata a schermo intero in risposta a ALT-INVIO.</span><span class="sxs-lookup"><span data-stu-id="91fb4-252">This is the only option available to DXGI when it goes full-screen itself in response to alt-enter.</span></span> <span data-ttu-id="91fb4-253">Se l'applicazione sceglie di passare alla modalità a schermo intero da solo, può chiamare [**IDXGISwapChain:: SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate) e passare un [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) esplicito (o **null**, se l'applicazione è lieta di consentire a DXGI di decidere).</span><span class="sxs-lookup"><span data-stu-id="91fb4-253">If the application chooses to go to full-screen mode by itself, then it can call [**IDXGISwapChain::SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate) and pass an explicit [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) (or **NULL**, if the application is happy to let DXGI decide).</span></span>

<span data-ttu-id="91fb4-254">Per ridimensionare l'output a schermo intero o a finestra, si consiglia di chiamare [**IDXGISwapChain:: ResizeTarget**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizetarget), poiché questo metodo ridimensiona anche la finestra di destinazione.</span><span class="sxs-lookup"><span data-stu-id="91fb4-254">To resize the output while either full screen or windowed, we recommend to call [**IDXGISwapChain::ResizeTarget**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizetarget), since this method resizes the target window also.</span></span> <span data-ttu-id="91fb4-255">Poiché la finestra di destinazione viene ridimensionata, il sistema operativo invia **le \_ dimensioni di WM** e il codice chiamerà naturalmente [**IDXGISwapChain:: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) in risposta.</span><span class="sxs-lookup"><span data-stu-id="91fb4-255">Since the target window is resized, the operating system sends **WM\_SIZE**, and your code will naturally call [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) in response.</span></span> <span data-ttu-id="91fb4-256">Si tratta pertanto di uno spreco di sforzo per ridimensionare i buffer e successivamente ridimensionare la destinazione.</span><span class="sxs-lookup"><span data-stu-id="91fb4-256">It's thus a waste of effort to resize your buffers, and then subsequently resize the target.</span></span>

### <a name="debugging-in-full-screen-mode"></a><span data-ttu-id="91fb4-257">Debug in modalità schermo intero</span><span class="sxs-lookup"><span data-stu-id="91fb4-257">Debugging in full-screen mode</span></span>

<span data-ttu-id="91fb4-258">Una catena di scambio DXGI abbandona la modalità schermo intero solo quando è strettamente necessario.</span><span class="sxs-lookup"><span data-stu-id="91fb4-258">A DXGI swap chain relinquishes full-screen mode only when absolutely necessary.</span></span> <span data-ttu-id="91fb4-259">Ciò significa che è possibile eseguire il debug di un'applicazione a schermo intero utilizzando più monitoraggi, purché la finestra di debug non si sovrappongano alla finestra di destinazione della catena di scambio.</span><span class="sxs-lookup"><span data-stu-id="91fb4-259">This means that you can debug a full-screen application using multiple monitors, as long as the debug window doesn't overlap the swap chain's target window.</span></span> <span data-ttu-id="91fb4-260">In alternativa, è possibile evitare completamente il cambio di modalità, non impostando il flag di opzione per la **modalità di scambio DXGI del \_ flag della \_ catena \_ \_ \_ \_ di scambio** .</span><span class="sxs-lookup"><span data-stu-id="91fb4-260">Alternatively, you can prevent mode switching altogether by not setting the **DXGI\_SWAP\_CHAIN\_FLAG\_ALLOW\_MODE\_SWITCH** flag.</span></span>

<span data-ttu-id="91fb4-261">Se il cambio di modalità è consentito, una catena di scambio abbandonerà la modalità a schermo intero ogni volta che la finestra di output è bloccato da un'altra finestra.</span><span class="sxs-lookup"><span data-stu-id="91fb4-261">If mode switching is allowed, a swap chain will relinquish full-screen mode whenever its output window is occluded by another window.</span></span> <span data-ttu-id="91fb4-262">Il controllo dell'occlusione viene eseguito durante [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1)oppure da un thread separato il cui scopo è quello di controllare se l'applicazione non risponde e non chiama più **IDXGISwapChain1::P resent1**.</span><span class="sxs-lookup"><span data-stu-id="91fb4-262">The occlusion check is performed during [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1), or by a separate thread whose purpose is to watch to see if the application has becomes unresponsive (and no longer calls **IDXGISwapChain1::Present1**).</span></span> <span data-ttu-id="91fb4-263">Per disabilitare la possibilità che il thread separato provochi un'opzione, impostare la seguente chiave del registro di sistema su un valore diverso da zero.</span><span class="sxs-lookup"><span data-stu-id="91fb4-263">To disable the ability of the separate thread to cause a switch, set the following registry key to any non-zero value.</span></span>

<span data-ttu-id="91fb4-264">**HKCU \\ software \\ Microsoft \\ DXGI \\ DisableFullscreenWatchdog**</span><span class="sxs-lookup"><span data-stu-id="91fb4-264">**HKCU\\Software\\Microsoft\\DXGI\\DisableFullscreenWatchdog**</span></span>

### <a name="destroying-a-swap-chain"></a><span data-ttu-id="91fb4-265">Eliminazione di una catena di scambio</span><span class="sxs-lookup"><span data-stu-id="91fb4-265">Destroying a swap chain</span></span>

<span data-ttu-id="91fb4-266">Non è possibile rilasciare una catena di scambio in modalità schermo intero perché questa operazione può creare una contesa di thread, che causerà la generazione di un'eccezione non continuabile da DXGI.</span><span class="sxs-lookup"><span data-stu-id="91fb4-266">You may not release a swap chain in full-screen mode because doing so may create thread contention (which will cause DXGI to raise a non-continuable exception).</span></span> <span data-ttu-id="91fb4-267">Prima di rilasciare una catena di scambio, passare prima alla modalità finestra (usando [**IDXGISwapChain:: SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate)( **false**, **null** )) e quindi chiamare [**IUnknown:: Release**](/windows/win32/api/unknwn/nf-unknwn-iunknown-release).</span><span class="sxs-lookup"><span data-stu-id="91fb4-267">Before releasing a swap chain, first switch to windowed mode (using [**IDXGISwapChain::SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate)( **FALSE**, **NULL** )) and then call [**IUnknown::Release**](/windows/win32/api/unknwn/nf-unknwn-iunknown-release).</span></span>

### <a name="using-a-rotated-monitor"></a><span data-ttu-id="91fb4-268">Uso di un monitoraggio ruotato</span><span class="sxs-lookup"><span data-stu-id="91fb4-268">Using a rotated monitor</span></span>

<span data-ttu-id="91fb4-269">Non è necessario che un'applicazione si preoccupi dell'orientamento del monitoraggio, DXGI ruoterà un buffer a catena di scambio durante la presentazione, se necessario.</span><span class="sxs-lookup"><span data-stu-id="91fb4-269">An application does not need to worry about monitor orientation, DXGI will rotate a swap-chain buffer during presentation, if necessary.</span></span> <span data-ttu-id="91fb4-270">Naturalmente, questa rotazione aggiuntiva può avere un effetto sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="91fb4-270">Of course, this additional rotation can impact performance.</span></span> <span data-ttu-id="91fb4-271">Per ottenere prestazioni ottimali, si prenda in considerazione la rotazione nell'applicazione eseguendo le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="91fb4-271">For best performance, take care of the rotation in your application by doing the following:</span></span>

-   <span data-ttu-id="91fb4-272">Usare il **\_ \_ flag Chain DXGI \_ swap \_ NONPREROTATED**.</span><span class="sxs-lookup"><span data-stu-id="91fb4-272">Use the **DXGI\_SWAP\_CHAIN\_FLAG\_NONPREROTATED**.</span></span> <span data-ttu-id="91fb4-273">Questo notifica a DXGI che l'applicazione produrrà un'immagine ruotata, ad esempio modificando la matrice di proiezione.</span><span class="sxs-lookup"><span data-stu-id="91fb4-273">This notifies DXGI that the application will produce a rotated image (for example, by altering its projection matrix).</span></span> <span data-ttu-id="91fb4-274">Un aspetto da notare è che questo flag è valido solo in modalità schermo intero.</span><span class="sxs-lookup"><span data-stu-id="91fb4-274">One thing to note, this flag is only valid while in full-screen mode.</span></span>
-   <span data-ttu-id="91fb4-275">Allocare ogni buffer della catena di scambio nelle dimensioni ruotate.</span><span class="sxs-lookup"><span data-stu-id="91fb4-275">Allocate each swap-chain buffer in its rotated size.</span></span> <span data-ttu-id="91fb4-276">Usare [**IDXGIOutput:: getdesc**](/windows/win32/api/DXGI/nf-dxgi-idxgioutput-getdesc) per ottenere questi valori, se necessario.</span><span class="sxs-lookup"><span data-stu-id="91fb4-276">Use [**IDXGIOutput::GetDesc**](/windows/win32/api/DXGI/nf-dxgi-idxgioutput-getdesc) to get these values, if necessary.</span></span>

<span data-ttu-id="91fb4-277">Eseguendo la rotazione nell'applicazione, DXGI eseguirà semplicemente una copia anziché una copia e una rotazione.</span><span class="sxs-lookup"><span data-stu-id="91fb4-277">By performing the rotation in your application, DXGI will simply do a copy instead of a copy and a rotate.</span></span>

<span data-ttu-id="91fb4-278">Il runtime Direct3D 11,1, disponibile a partire da Windows 8, fornisce una catena di scambio Flip-Model, ovvero una catena di scambio con il valore [**\_ \_ \_ \_ sequenziale DXGI swap effect Flip**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) impostato nel membro **SwapEffect** di [**DXGI \_ swap \_ Chain \_ DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span><span class="sxs-lookup"><span data-stu-id="91fb4-278">The Direct3D 11.1 runtime, which is available starting with Windows 8, provides a flip-model swap chain (that is, a swap chain that has the [**DXGI\_SWAP\_EFFECT\_FLIP\_SEQUENTIAL**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) value set in the **SwapEffect** member of [**DXGI\_SWAP\_CHAIN\_DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span></span> <span data-ttu-id="91fb4-279">Per ottimizzare le ottimizzazioni della presentazione disponibili con una catena di scambio Flip-Model, è consigliabile fare in modo che le applicazioni orientino il contenuto in modo che corrisponda all'output specifico in cui si trova il contenuto quando il contenuto occupa completamente l'output.</span><span class="sxs-lookup"><span data-stu-id="91fb4-279">To maximize the presentation optimizations available with a flip-model swap chain, we recommend that you make your applications orient content to match the particular output on which the content resides when that content fully occupies the output.</span></span> <span data-ttu-id="91fb4-280">Per altre informazioni sulle catene di scambio flip-model e sui relativi vantaggi, vedere [DXGI flip model](dxgi-flip-model.md).</span><span class="sxs-lookup"><span data-stu-id="91fb4-280">For more info about flip-model swap chains and their benefits, see [DXGI Flip Model](dxgi-flip-model.md).</span></span>

### <a name="switching-modes"></a><span data-ttu-id="91fb4-281">Modalità di cambio</span><span class="sxs-lookup"><span data-stu-id="91fb4-281">Switching modes</span></span>

<span data-ttu-id="91fb4-282">La catena di scambio DXGI potrebbe modificare la modalità di visualizzazione di un output quando si esegue una transizione a schermo intero.</span><span class="sxs-lookup"><span data-stu-id="91fb4-282">The DXGI swap chain might change the display mode of an output when making a full-screen transition.</span></span> <span data-ttu-id="91fb4-283">Per abilitare la modifica della modalità di visualizzazione automatica, è necessario specificare l' **\_ \_ \_ \_ \_ \_ opzione di modalità Consenti flag catena di scambio DXGI** nella descrizione della catena di scambio.</span><span class="sxs-lookup"><span data-stu-id="91fb4-283">To enable the automatic display mode change, you must specify **DXGI\_SWAP\_CHAIN\_FLAG\_ALLOW\_MODE\_SWITCH** in the swap-chain description.</span></span> <span data-ttu-id="91fb4-284">Se la modalità di visualizzazione cambia automaticamente, DXGI sceglierà la modalità più modesta (le dimensioni e la risoluzione non verranno modificate, ma la profondità del colore potrebbe essere).</span><span class="sxs-lookup"><span data-stu-id="91fb4-284">If the display mode automatically changes, DXGI will choose the most modest mode (size and resolution will not change, but the color depth may).</span></span> <span data-ttu-id="91fb4-285">Il ridimensionamento dei buffer della catena di scambio non comporta l'attivazione di un commutatore di modalità.</span><span class="sxs-lookup"><span data-stu-id="91fb4-285">Resizing swap chain buffers will not cause a mode switch.</span></span> <span data-ttu-id="91fb4-286">La catena di scambio crea una promessa implicita che se si sceglie un buffer nascosto che corrisponde esattamente a una modalità di visualizzazione supportata dall'output di destinazione, si passerà a tale modalità di visualizzazione quando si entra in modalità schermo intero su tale output.</span><span class="sxs-lookup"><span data-stu-id="91fb4-286">The swap chain makes an implicit promise that if you choose a back buffer that exactly matches a display mode supported by the target output, then it will switch to that display mode when entering full-screen mode on that output.</span></span> <span data-ttu-id="91fb4-287">Di conseguenza, è possibile scegliere una modalità di visualizzazione scegliendo il formato e le dimensioni del buffer.</span><span class="sxs-lookup"><span data-stu-id="91fb4-287">Consequently, you choose a display mode by choosing your back buffer size and format.</span></span>

### <a name="full-screen-performance-tip"></a><span data-ttu-id="91fb4-288">Suggerimento per le prestazioni a schermo intero</span><span class="sxs-lookup"><span data-stu-id="91fb4-288">Full-screen performance tip</span></span>

<span data-ttu-id="91fb4-289">Quando si chiama [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) su un'applicazione a schermo intero, la catena di scambio capovolge (in contrapposizione a Blits) il contenuto del buffer nascosto al buffer anteriore.</span><span class="sxs-lookup"><span data-stu-id="91fb4-289">When you call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) on a full-screen application, the swap chain flips (as opposed to blits) the contents of the back buffer to the front buffer.</span></span> <span data-ttu-id="91fb4-290">A questo scopo, è necessario che la catena di scambio sia stata creata usando una modalità di visualizzazione enumerata (specificata in [**DXGI \_ swap \_ Chain \_ DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span><span class="sxs-lookup"><span data-stu-id="91fb4-290">This requires that the swap chain was created by using an enumerated display mode (specified in [**DXGI\_SWAP\_CHAIN\_DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span></span> <span data-ttu-id="91fb4-291">Se non si riesce a enumerare le modalità di visualizzazione o si specifica erroneamente la modalità di visualizzazione nella descrizione, la catena di scambio può invece eseguire un trasferimento a blocchi di bit (BitBlt).</span><span class="sxs-lookup"><span data-stu-id="91fb4-291">If you fail to enumerate display modes, or incorrectly specify the display mode in the description, the swap chain may perform a bit-block transfer (bitblt) instead.</span></span> <span data-ttu-id="91fb4-292">Il BitBlt causa una copia di estensione aggiuntiva, oltre ad aumentare l'utilizzo della memoria video ed è difficile da rilevare.</span><span class="sxs-lookup"><span data-stu-id="91fb4-292">The bitblt causes an extra stretching copy as well as some increased video memory usage, and is difficult to detect.</span></span> <span data-ttu-id="91fb4-293">Per evitare questo problema, enumerare le modalità di visualizzazione e inizializzare correttamente la descrizione della catena di scambio prima di creare la catena di scambio.</span><span class="sxs-lookup"><span data-stu-id="91fb4-293">To avoid this problem, enumerate display modes, and initialize the swap chain description correctly before you create the swap chain.</span></span> <span data-ttu-id="91fb4-294">Questo garantisce prestazioni massime quando si esegue il capovolgimento in modalità schermo intero ed evita l'overhead aggiuntivo della memoria.</span><span class="sxs-lookup"><span data-stu-id="91fb4-294">This will ensure maximum performance when flipping in full-screen mode and avoid the extra memory overhead.</span></span>

### <a name="multithread-considerations"></a><span data-ttu-id="91fb4-295">Considerazioni su multithread</span><span class="sxs-lookup"><span data-stu-id="91fb4-295">Multithread considerations</span></span>

<span data-ttu-id="91fb4-296">Quando si usa DXGI in un'applicazione con più thread, è necessario prestare attenzione a evitare la creazione di un deadlock, in cui due thread diversi sono in attesa di essere completati.</span><span class="sxs-lookup"><span data-stu-id="91fb4-296">When you use DXGI in an application with multiple threads, you need to be careful to avoid creating a deadlock, where two different threads are waiting on each other to complete.</span></span> <span data-ttu-id="91fb4-297">Questo problema può verificarsi in due situazioni.</span><span class="sxs-lookup"><span data-stu-id="91fb4-297">There are two situations where this can occur.</span></span>

-   <span data-ttu-id="91fb4-298">Il thread di rendering non è il thread della pompa di messaggi.</span><span class="sxs-lookup"><span data-stu-id="91fb4-298">The rendering thread is not the message-pump thread.</span></span>
-   <span data-ttu-id="91fb4-299">Il thread che esegue un'API DXGI non è lo stesso thread che ha creato la finestra.</span><span class="sxs-lookup"><span data-stu-id="91fb4-299">The thread executing a DXGI API is not the same thread that created the window.</span></span>

<span data-ttu-id="91fb4-300">Quando si usano le catene di scambio a schermo intero, prestare attenzione a non avere mai un thread di message-pump in attesa sul thread di rendering.</span><span class="sxs-lookup"><span data-stu-id="91fb4-300">Be careful that you never have the message-pump thread wait on the render thread when you use full-screen swap chains.</span></span> <span data-ttu-id="91fb4-301">Ad esempio, la chiamata a [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) (dal thread di rendering) può provocare l'attesa del thread di rendering sul thread della pompa di messaggi.</span><span class="sxs-lookup"><span data-stu-id="91fb4-301">For instance, calling [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) (from the render thread) may cause the render thread to wait on the message-pump thread.</span></span> <span data-ttu-id="91fb4-302">Quando si verifica una modifica della modalità, questo scenario è possibile se **Present1** chiama:: SetWindowPos () o:: SetWindowStyle () e uno di questi metodi chiama:: SendMessage ().</span><span class="sxs-lookup"><span data-stu-id="91fb4-302">When a mode change occurs, this scenario is possible if **Present1** calls ::SetWindowPos() or ::SetWindowStyle() and either of these methods call ::SendMessage().</span></span> <span data-ttu-id="91fb4-303">In questo scenario, se il thread della pompa di messaggi presenta una sezione critica che lo sorveglia o se il thread di rendering è bloccato, i due thread risulteranno deadlock.</span><span class="sxs-lookup"><span data-stu-id="91fb4-303">In this scenario, if the message-pump thread has a critical section guarding it or if the render thread is blocked, then the two threads will deadlock.</span></span>

<span data-ttu-id="91fb4-304">Per altre informazioni sull'uso di DXGI con più thread, vedere [multithreading e DXGI](../direct3d11/overviews-direct3d-11-render-multi-thread-intro.md).</span><span class="sxs-lookup"><span data-stu-id="91fb4-304">For more info about using DXGI with multiple threads, see [Multithreading and DXGI](../direct3d11/overviews-direct3d-11-render-multi-thread-intro.md).</span></span>

## <a name="dxgi-responses-from-dllmain"></a><span data-ttu-id="91fb4-305">Risposte DXGI da DLLMain</span><span class="sxs-lookup"><span data-stu-id="91fb4-305">DXGI responses from DLLMain</span></span>

<span data-ttu-id="91fb4-306">Poiché una funzione [**DllMain**](../dlls/dllmain.md) non può garantire l'ordine in cui carica e Scarica le dll, è consigliabile che la funzione **DllMain** dell'app non chiami le funzioni o i metodi Direct3D o DXGI, incluse le funzioni o i metodi che creano o rilasciano oggetti.</span><span class="sxs-lookup"><span data-stu-id="91fb4-306">Because a [**DllMain**](../dlls/dllmain.md) function can't guarantee the order in which it loads and unloads DLLs, we recommend that your app's **DllMain** function not call Direct3D or DXGI functions or methods, including functions or methods that create or release objects.</span></span> <span data-ttu-id="91fb4-307">Se la funzione **DllMain** dell'app chiama un particolare componente, il componente potrebbe chiamare un'altra dll non presente nel sistema operativo, causando l'arresto anomalo del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="91fb4-307">If your app's **DllMain** function calls into a particular component, that component might call another DLL that isn't present on the operating system, which causes the operating system to crash.</span></span> <span data-ttu-id="91fb4-308">Direct3D e DXGI possono caricare un set di dll, in genere un set di driver, che differisce da computer a computer.</span><span class="sxs-lookup"><span data-stu-id="91fb4-308">Direct3D and DXGI might load a set of DLLs, typically a set of drivers, that differs from computer to computer.</span></span> <span data-ttu-id="91fb4-309">Pertanto, anche se l'app non si arresta in modo anomalo nei computer di sviluppo e di test quando la funzione **DllMain** chiama funzioni o metodi Direct3D o DXGI, è possibile che si verifichi un arresto anomalo quando viene eseguito in un altro computer.</span><span class="sxs-lookup"><span data-stu-id="91fb4-309">Therefore, even if your app doesn t crash on your development and test computers when its **DllMain** function calls Direct3D or DXGI functions or methods, it might crash when it runs on another computer.</span></span>

<span data-ttu-id="91fb4-310">Per evitare di creare un'app che potrebbe causare l'arresto anomalo del sistema operativo, DXGI fornisce le risposte seguenti nelle situazioni specificate:</span><span class="sxs-lookup"><span data-stu-id="91fb4-310">To prevent you from creating an app that might cause the operating system to crash, DXGI provides the following responses in the specified situations:</span></span>

-   <span data-ttu-id="91fb4-311">Se la funzione [**DllMain**](../dlls/dllmain.md) dell'app rilascia l'ultimo riferimento a una factory DXGI, DXGI genera un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="91fb4-311">If your app's [**DllMain**](../dlls/dllmain.md) function releases its last reference to a DXGI factory, DXGI raises an exception.</span></span>
-   <span data-ttu-id="91fb4-312">Se la funzione [**DllMain**](../dlls/dllmain.md) dell'app crea una factory DXGI, DXGI restituisce un codice di errore.</span><span class="sxs-lookup"><span data-stu-id="91fb4-312">If your app's [**DllMain**](../dlls/dllmain.md) function creates a DXGI factory, DXGI returns an error code.</span></span>

## <a name="dxgi-11-changes"></a><span data-ttu-id="91fb4-313">DXGI 1,1 modifiche</span><span class="sxs-lookup"><span data-stu-id="91fb4-313">DXGI 1.1 changes</span></span>

<span data-ttu-id="91fb4-314">Sono state aggiunte le funzionalità seguenti in DXGI 1,1.</span><span class="sxs-lookup"><span data-stu-id="91fb4-314">We added the following functionality in DXGI 1.1.</span></span>

-   <span data-ttu-id="91fb4-315">Supporto delle superfici condivise sincronizzate</span><span class="sxs-lookup"><span data-stu-id="91fb4-315">Synchronized Shared Surfaces Support</span></span>

    <span data-ttu-id="91fb4-316">Le aree condivise sincronizzate per Direct3D 10,1 e Direct3D 11 consentono una condivisione efficace della superficie di lettura e scrittura tra più dispositivi Direct3D (la condivisione tra i dispositivi Direct3D 10 e Direct3D 11 è possibile).</span><span class="sxs-lookup"><span data-stu-id="91fb4-316">Synchronized shared surfaces for Direct3D 10.1 and Direct3D 11 enables efficient read and write surface sharing between multiple Direct3D devices (sharing between Direct3D 10 and Direct3D 11 devices is possible).</span></span> <span data-ttu-id="91fb4-317">Vedere [**IDXGIKeyedMutex:: AcquireSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-acquiresync) e [**IDXGIKeyedMutex:: ReleaseSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-releasesync).</span><span class="sxs-lookup"><span data-stu-id="91fb4-317">See [**IDXGIKeyedMutex::AcquireSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-acquiresync) and [**IDXGIKeyedMutex::ReleaseSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-releasesync).</span></span>

-   <span data-ttu-id="91fb4-318">Supporto per colori elevati</span><span class="sxs-lookup"><span data-stu-id="91fb4-318">High Color Support</span></span>

    <span data-ttu-id="91fb4-319">Supporta il formato \_ DXGI \_ R10G10B10 \_ XR \_ Bias \_ a2 \_ UNORM.</span><span class="sxs-lookup"><span data-stu-id="91fb4-319">Supports the DXGI\_FORMAT\_R10G10B10\_XR\_BIAS\_A2\_UNORM format.</span></span>

-   <span data-ttu-id="91fb4-320">[**IDXGIDevice1:: SetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-setmaximumframelatency) e [ **IDXGIDevice1:: GetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-getmaximumframelatency)</span><span class="sxs-lookup"><span data-stu-id="91fb4-320">[**IDXGIDevice1::SetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-setmaximumframelatency) and [**IDXGIDevice1::GetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-getmaximumframelatency)</span></span>
-   <span data-ttu-id="91fb4-321">[**IDXGIFactory1:: EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) enumera gli adapter locali senza i monitoraggi o gli output collegati, nonché gli adapter con gli output collegati.</span><span class="sxs-lookup"><span data-stu-id="91fb4-321">[**IDXGIFactory1::EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) enumerates local adapter(s) without any monitors or outputs attached, as well as adapters(s) with outputs attached.</span></span> <span data-ttu-id="91fb4-322">Il primo Adapter restituito sarà l'adapter locale in cui viene visualizzato il desktop primario.</span><span class="sxs-lookup"><span data-stu-id="91fb4-322">The first adapter returned will be the local adapter on which the Desktop primary is displayed.</span></span>
-   <span data-ttu-id="91fb4-323">Supporto del formato BGRA</span><span class="sxs-lookup"><span data-stu-id="91fb4-323">BGRA format support</span></span>

    <span data-ttu-id="91fb4-324">DXGI \_ Format \_ B8G8R8A8 \_ UNORM e DXGI \_ Format \_ B8G8R8A8 \_ UNORM \_ sRGB, vedere [**IDXGISurface1:: GetDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-getdc) e [**IDXGISurface1:: ReleaseDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-releasedc).</span><span class="sxs-lookup"><span data-stu-id="91fb4-324">DXGI\_FORMAT\_B8G8R8A8\_UNORM and DXGI\_FORMAT\_B8G8R8A8\_UNORM\_SRGB, see [**IDXGISurface1::GetDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-getdc) and [**IDXGISurface1::ReleaseDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-releasedc).</span></span>

## <a name="dxgi-12-changes"></a><span data-ttu-id="91fb4-325">DXGI 1,2 modifiche</span><span class="sxs-lookup"><span data-stu-id="91fb4-325">DXGI 1.2 changes</span></span>

<span data-ttu-id="91fb4-326">Sono state aggiunte le funzionalità seguenti in DXGI 1,2.</span><span class="sxs-lookup"><span data-stu-id="91fb4-326">We added the following functionality in DXGI 1.2.</span></span>

-   <span data-ttu-id="91fb4-327">Catena di scambio stereo</span><span class="sxs-lookup"><span data-stu-id="91fb4-327">Stereo swap chain</span></span>
-   [<span data-ttu-id="91fb4-328">Inverti catena di scambio del modello</span><span class="sxs-lookup"><span data-stu-id="91fb4-328">Flip-model swap chain</span></span>](dxgi-flip-model.md)
-   <span data-ttu-id="91fb4-329">Presentazione ottimizzata (scorrimento, rettangoli Dirty e rotazione)</span><span class="sxs-lookup"><span data-stu-id="91fb4-329">Optimized presentation (scrolling, dirty rectangles, and rotation)</span></span>
-   <span data-ttu-id="91fb4-330">Miglioramento delle risorse condivise e della sincronizzazione</span><span class="sxs-lookup"><span data-stu-id="91fb4-330">Improved shared resources and synchronization</span></span>
-   [<span data-ttu-id="91fb4-331">Duplicazione del desktop</span><span class="sxs-lookup"><span data-stu-id="91fb4-331">Desktop Duplication</span></span>](desktop-dup-api.md)
-   <span data-ttu-id="91fb4-332">Utilizzo ottimizzato della memoria video</span><span class="sxs-lookup"><span data-stu-id="91fb4-332">Optimized use of video memory</span></span>
-   <span data-ttu-id="91fb4-333">Supporto per formati a 16 bit per pixel (BPP) ( \_ formato DXGI \_ B5G6R5 \_ UNORM, \_ formato DXGI B5G5R5A1 UNORM \_ \_ , \_ formato \_ DXGI \_ B4G4R4A4 UNORM)</span><span class="sxs-lookup"><span data-stu-id="91fb4-333">Support for 16 bits per pixel (bpp) formats (DXGI\_FORMAT\_B5G6R5\_UNORM, DXGI\_FORMAT\_B5G5R5A1\_UNORM, DXGI\_FORMAT\_B4G4R4A4\_UNORM)</span></span>
-   <span data-ttu-id="91fb4-334">API di debug</span><span class="sxs-lookup"><span data-stu-id="91fb4-334">Debugging APIs</span></span>

<span data-ttu-id="91fb4-335">Per altre informazioni su DXGI 1,2, vedere [miglioramenti di DXGI 1,2](dxgi-1-2-improvements.md).</span><span class="sxs-lookup"><span data-stu-id="91fb4-335">For more info about DXGI 1.2, see [DXGI 1.2 Improvements](dxgi-1-2-improvements.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="91fb4-336">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="91fb4-336">Related topics</span></span>

[<span data-ttu-id="91fb4-337">Guida per programmatori per DXGI</span><span class="sxs-lookup"><span data-stu-id="91fb4-337">Programming Guide for DXGI</span></span>](dx-graphics-dxgi-overviews.md)
