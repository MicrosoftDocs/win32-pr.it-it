---
description: La correzione gamma o la gamma Short è il nome di un'operazione non lineare utilizzata dai sistemi per codificare e decodificare i valori dei pixel nelle immagini.
ms.assetid: 97ACDAE3-514E-4AAF-A27D-E5FFC162DB2A
title: Uso della correzione gamma
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1c940db1a94fb41e9babecbeb3075aa9e01b3732
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "104557644"
---
# <a name="using-gamma-correction"></a><span data-ttu-id="7a68c-103">Uso della correzione gamma</span><span class="sxs-lookup"><span data-stu-id="7a68c-103">Using gamma correction</span></span>

<span data-ttu-id="7a68c-104">La correzione gamma o la gamma Short è il nome di un'operazione non lineare utilizzata dai sistemi per codificare e decodificare i valori dei pixel nelle immagini.</span><span class="sxs-lookup"><span data-stu-id="7a68c-104">Gamma correction, or gamma for short, is the name of a nonlinear operation that systems use to code and decode pixel values in images.</span></span>

-   [<span data-ttu-id="7a68c-105">Che cos'è gamma e a cosa serve?</span><span class="sxs-lookup"><span data-stu-id="7a68c-105">What is gamma and what is it for?</span></span>](#what-is-gamma-and-what-is-it-for)
-   [<span data-ttu-id="7a68c-106">Sfondo di gamma per Windows</span><span class="sxs-lookup"><span data-stu-id="7a68c-106">Background of gamma on Windows</span></span>](#background-of-gamma-on-windows)
-   [<span data-ttu-id="7a68c-107">Evoluzione dell'hardware di visualizzazione</span><span class="sxs-lookup"><span data-stu-id="7a68c-107">Evolution of display hardware</span></span>](#evolution-of-display-hardware)
-   [<span data-ttu-id="7a68c-108">Funzionalità di controllo gamma in DXGI</span><span class="sxs-lookup"><span data-stu-id="7a68c-108">Gamma control capabilities in DXGI</span></span>](#gamma-control-capabilities-in-dxgi)
-   [<span data-ttu-id="7a68c-109">Impostazione del controllo gamma con DXGI</span><span class="sxs-lookup"><span data-stu-id="7a68c-109">Setting gamma control with DXGI</span></span>](#setting-gamma-control-with-dxgi)
-   [<span data-ttu-id="7a68c-110">Praticità del controllo gamma</span><span class="sxs-lookup"><span data-stu-id="7a68c-110">Gamma control practicalities</span></span>](#gamma-control-practicalities)
-   [<span data-ttu-id="7a68c-111">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="7a68c-111">Related topics</span></span>](#related-topics)

## <a name="what-is-gamma-and-what-is-it-for"></a><span data-ttu-id="7a68c-112">Che cos'è gamma e a cosa serve?</span><span class="sxs-lookup"><span data-stu-id="7a68c-112">What is gamma and what is it for?</span></span>

<span data-ttu-id="7a68c-113">Alla fine della pipeline grafica, nel punto in cui l'immagine lascia il computer per eseguire il suo viaggio lungo il cavo di monitoraggio, c'è un piccolo componente hardware che può trasformare i valori dei pixel in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="7a68c-113">At the end of the graphics pipeline, just where the image leaves the computer to make its journey along the monitor cable, there is a small piece of hardware that can transform pixel values on the fly.</span></span> <span data-ttu-id="7a68c-114">Questo hardware usa in genere una tabella di ricerca per trasformare i pixel.</span><span class="sxs-lookup"><span data-stu-id="7a68c-114">This hardware typically uses a lookup table to transform the pixels.</span></span> <span data-ttu-id="7a68c-115">Questo hardware usa i valori rosso, verde e blu che provengono dalla superficie da visualizzare per cercare valori con correzione gamma nella tabella e quindi invia i valori corretti al monitor anziché ai valori effettivi della superficie.</span><span class="sxs-lookup"><span data-stu-id="7a68c-115">This hardware uses the red, green and blue values that come from the surface to be displayed to look up gamma-corrected values in the table and then sends the corrected values to the monitor instead of the actual surface values.</span></span> <span data-ttu-id="7a68c-116">Questa tabella di ricerca è quindi un'opportunità per sostituire qualsiasi colore con qualsiasi altro colore.</span><span class="sxs-lookup"><span data-stu-id="7a68c-116">So, this lookup table is an opportunity to replace any color with any other color.</span></span> <span data-ttu-id="7a68c-117">Sebbene la tabella disponga di tale livello di potenza, l'utilizzo tipico consiste nel modificare le immagini in modo leggermente per compensare le differenze nella risposta del monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="7a68c-117">While the table has that level of power, the typical usage is to tweak images subtly to compensate for differences in the monitor’s response.</span></span> <span data-ttu-id="7a68c-118">La risposta del monitoraggio è la funzione che mette in correlazione il valore numerico dei componenti rosso, verde e blu di un pixel con la luminosità visualizzata di tale pixel.</span><span class="sxs-lookup"><span data-stu-id="7a68c-118">The monitor’s response is the function that relates the numerical value of the red, green and blue components of a pixel with that pixel’s displayed brightness.</span></span>

<span data-ttu-id="7a68c-119">Questo è il modo in cui questa tabella era destinata a, ma gli sviluppatori di giochi trovavano degli usi creativi, ad esempio l'intero schermo rosso per effetto psicologico.</span><span class="sxs-lookup"><span data-stu-id="7a68c-119">That’s what this table was intended for, but game developers found creative uses for it, such as flashing the whole screen red for psychological effect.</span></span> <span data-ttu-id="7a68c-120">Nelle app di gioco moderne, come parte della post-elaborazione di ogni frame, in genere vengono forniti altri modi per eseguire queste operazioni.</span><span class="sxs-lookup"><span data-stu-id="7a68c-120">In modern game apps, as part of the post-processing of each frame, we typically provide other ways to do such things.</span></span> <span data-ttu-id="7a68c-121">In realtà, è consigliabile lasciare solo la tabella gamma perché potrebbe essere utilizzata per calibrare la risposta del monitoraggio e le modifiche all'ingrosso per la rampa gamma elimineranno questa accurata taratura.</span><span class="sxs-lookup"><span data-stu-id="7a68c-121">In fact, we recommend that you leave the gamma table alone because it might be in use to calibrate the monitor’s response, and wholesale changes to the gamma ramp will destroy this careful calibration.</span></span>

<span data-ttu-id="7a68c-122">La scienza della determinazione della correzione gamma è complessa e non viene presentata in questo argomento, tranne che per illuminare il nome "gamma".</span><span class="sxs-lookup"><span data-stu-id="7a68c-122">The science of determining gamma correction is complex, and is not presented here, other than to illuminate where the name “gamma” came from.</span></span> <span data-ttu-id="7a68c-123">La risposta di un monitor CRT (ovvero una vecchia vetrata) è una funzione complessa, ma la fisica di questi monitoraggi significa che presentano una risposta che può essere rappresentata in modo rozzo da questa funzione di risparmio energia:</span><span class="sxs-lookup"><span data-stu-id="7a68c-123">A CRT (that is, an old-fashioned glass) monitor’s response is a complex function, but the physics of these monitors mean that they exhibit a response that can be crudely represented by this power function:</span></span>

<span data-ttu-id="7a68c-124">luminosità (input) =<sup>gamma</sup> di input</span><span class="sxs-lookup"><span data-stu-id="7a68c-124">brightness( input ) = input<sup>gamma</sup></span></span>

<span data-ttu-id="7a68c-125">Il valore gamma è in genere vicino a un valore di 2,0.</span><span class="sxs-lookup"><span data-stu-id="7a68c-125">The gamma value is typically close to a value of 2.0.</span></span> <span data-ttu-id="7a68c-126">I monitoraggi LCD e tutte le altre tecnologie più recenti sono progettati in modo specifico per presentare una risposta simile, quindi non è necessario ricalibrare tutto il software e le immagini per le nuove tecnologie.</span><span class="sxs-lookup"><span data-stu-id="7a68c-126">LCD monitors and all other newer technologies are specifically engineered to exhibit a similar response so all our software and images don’t have to be recalibrated for those new technologies.</span></span> <span data-ttu-id="7a68c-127">Lo standard sRGB dichiara che questo valore gamma è esattamente 2,2 e questo valore è diventato uno standard ampiamente implementato.</span><span class="sxs-lookup"><span data-stu-id="7a68c-127">The sRGB standard declares that this gamma value is exactly 2.2, and this value has become a widely implemented standard.</span></span>

<span data-ttu-id="7a68c-128">L'occhio umano dispone anche di una funzione di risposta che inverte approssimativamente la funzione di alimentazione CRT.</span><span class="sxs-lookup"><span data-stu-id="7a68c-128">The human eye also has a response function which approximately inverts the CRT power function.</span></span> <span data-ttu-id="7a68c-129">Ciò significa che la luminosità percepita di un pixel aumenta approssimativamente in modo lineare con i valori RGB in quel pixel.</span><span class="sxs-lookup"><span data-stu-id="7a68c-129">This means that the perceived brightness of a pixel goes up very roughly linearly with the RGB values in that pixel.</span></span>

<span data-ttu-id="7a68c-130">Poiché un valore gamma di 2,2 è diventato uno standard de facto, in genere non è necessario preoccuparsi troppo della curva gamma codificata in questa tabella e può lasciarla come mapping lineare e uno-a-uno.</span><span class="sxs-lookup"><span data-stu-id="7a68c-130">Because a gamma value of 2.2 has become a de-facto standard, we typically don’t need to worry too much about the gamma curve encoded in this table, and can leave it as a linear, one-to-one mapping.</span></span> <span data-ttu-id="7a68c-131">La corrispondenza dei colori appropriata naturalmente richiede una particolare attenzione a questa funzione, ma tale discussione esula dall'ambito di questo argomento.</span><span class="sxs-lookup"><span data-stu-id="7a68c-131">Proper color matching does of course require exquisite care with this function, but that discussion is beyond the scope of this topic.</span></span> <span data-ttu-id="7a68c-132">Windows include uno strumento che consente agli utenti di calibrare le proprie visualizzazioni per la gamma 2,2 e questo strumento usa l'hardware della tabella di ricerca per derivare una modifica sottile scelta con attenzione per i propri computer.</span><span class="sxs-lookup"><span data-stu-id="7a68c-132">Windows includes a tool that lets users calibrate their displays to gamma 2.2, and this tool uses the lookup table hardware to derive a carefully-chosen subtle tweak for their computers.</span></span> <span data-ttu-id="7a68c-133">Gli utenti possono eseguire questo strumento cercando "Calibra colore".</span><span class="sxs-lookup"><span data-stu-id="7a68c-133">Users can run this tool by searching for "calibrate color".</span></span> <span data-ttu-id="7a68c-134">Sono inoltre disponibili profili colori ben definiti per determinati monitoraggi che automatizzano il processo.</span><span class="sxs-lookup"><span data-stu-id="7a68c-134">There are also well-defined color profiles for particular monitors that automate this process.</span></span> <span data-ttu-id="7a68c-135">Lo strumento "Calibra colore" può rilevare questi monitoraggi più recenti e informare gli utenti che la taratura è già in atto.</span><span class="sxs-lookup"><span data-stu-id="7a68c-135">The "calibrate color" tool can detect these newer monitors, and inform users that calibration is already in place.</span></span>

<span data-ttu-id="7a68c-136">Questa nozione di codifica di una legge di risparmio energia in valori di colore è utile anche in altri punti della pipeline grafica, soprattutto nelle trame.</span><span class="sxs-lookup"><span data-stu-id="7a68c-136">This notion of encoding a power law into color values is useful elsewhere in the graphics pipeline too, especially in textures.</span></span> <span data-ttu-id="7a68c-137">Per le trame, si desidera maggiore precisione sui colori più scuri a causa della risposta logaritmica degli occhi umani di cui si è appena parlato.</span><span class="sxs-lookup"><span data-stu-id="7a68c-137">For textures, you want more precision on darker colors because of the logarithmic human eye response we just talked about.</span></span> <span data-ttu-id="7a68c-138">Una gestione attenta di gamma in questa parte della pipeline è importante.</span><span class="sxs-lookup"><span data-stu-id="7a68c-138">Careful handling of gamma in this part of the pipeline is important.</span></span> <span data-ttu-id="7a68c-139">Per altre informazioni, vedere [conversione dei dati per lo spazio colore](converting-data-color-space.md).</span><span class="sxs-lookup"><span data-stu-id="7a68c-139">For more info, see [Converting data for the color space](converting-data-color-space.md).</span></span>

<span data-ttu-id="7a68c-140">Il resto di questo argomento è incentrato solo sulla correzione gamma nell'ultima parte della pipeline, tra i dati del buffer del frame e il monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="7a68c-140">The remainder of this topic focuses only on gamma correction in this last part of the pipeline, between the frame buffer data and the monitor.</span></span> <span data-ttu-id="7a68c-141">Se si vuole scrivere una procedura guidata di calibrazione o creare effetti speciali in un'app a schermo intero in cui un passaggio di post-elaborazione non è pratico, di seguito sono riportate le informazioni necessarie.</span><span class="sxs-lookup"><span data-stu-id="7a68c-141">If you want to write a calibration wizard or to create special effects in a full-screen app where a post-processing step is not practical, here is the info you need.</span></span>

## <a name="background-of-gamma-on-windows"></a><span data-ttu-id="7a68c-142">Sfondo di gamma per Windows</span><span class="sxs-lookup"><span data-stu-id="7a68c-142">Background of gamma on Windows</span></span>

<span data-ttu-id="7a68c-143">Nei computer Windows è in genere presente una tabella gamma che è una tabella di ricerca che accetta una tripletta di byte e restituisce una tripletta di byte.</span><span class="sxs-lookup"><span data-stu-id="7a68c-143">Windows computers typically have a gamma table that is a lookup table that takes a triplet of bytes and outputs a triplet of bytes.</span></span> <span data-ttu-id="7a68c-144">Questi tripletti sono 768 (256 x 3) byte di RAM.</span><span class="sxs-lookup"><span data-stu-id="7a68c-144">These triplets are 768 (256 x 3) bytes of RAM.</span></span> <span data-ttu-id="7a68c-145">Questo è corretto quando il formato di visualizzazione contiene una tripletta di valori di BYTE RGB ma non è sufficientemente espressivo per descrivere le trasformazioni che è possibile desiderare quando il formato di visualizzazione ha un intervallo maggiore di \[ 0, 1 \] , ad esempio i valori a virgola mobile.</span><span class="sxs-lookup"><span data-stu-id="7a68c-145">This is fine when your display format contains a triplet of RGB BYTE values but isn't expressive enough to describe the transformations that you might want when the display format has a greater range than \[0,1\], such as floating point values.</span></span> <span data-ttu-id="7a68c-146">Le API di Windows che controllano gamma hanno seguito un'evoluzione perché i formati di visualizzazione sono diventati più complessi.</span><span class="sxs-lookup"><span data-stu-id="7a68c-146">The APIs in Windows that control gamma have followed an evolution as display formats have become more complex.</span></span>

<span data-ttu-id="7a68c-147">Le prime API Windows per offrire il controllo gamma sono [**SetDeviceGammaRamp**](/windows/win32/api/wingdi/nf-wingdi-setdevicegammaramp) e [**GetDeviceGammaRamp**](/windows/win32/api/wingdi/nf-wingdi-getdevicegammaramp)di Windows Graphics Device Interface (GDI).</span><span class="sxs-lookup"><span data-stu-id="7a68c-147">The first Windows APIs to offer gamma control are Windows Graphics Device Interface (GDI)’s [**SetDeviceGammaRamp**](/windows/win32/api/wingdi/nf-wingdi-setdevicegammaramp) and [**GetDeviceGammaRamp**](/windows/win32/api/wingdi/nf-wingdi-getdevicegammaramp).</span></span> <span data-ttu-id="7a68c-148">Queste API funzionano con matrici di parole di 3 256, con ogni parola che codifica zero fino a una, rappresentata da valori di WORD 0 e 65535.</span><span class="sxs-lookup"><span data-stu-id="7a68c-148">These APIs work with three 256-entry arrays of WORDs, with each WORD encoding zero up to one, represented by WORD values 0 and 65535.</span></span> <span data-ttu-id="7a68c-149">La precisione aggiuntiva di una parola non è in genere disponibile nelle tabelle di ricerca hardware effettive, ma queste API erano progettate per essere flessibili.</span><span class="sxs-lookup"><span data-stu-id="7a68c-149">The extra precision of a WORD typically isn’t available in actual hardware lookup tables, but these APIs were intended to be flexible.</span></span> <span data-ttu-id="7a68c-150">Queste API, a differenza delle altre descritte più avanti in questa sezione, consentono solo una piccola deviazione da una funzione di identità.</span><span class="sxs-lookup"><span data-stu-id="7a68c-150">These APIs, in contrast to the others described later in this section, allow only a small deviation from an identity function.</span></span> <span data-ttu-id="7a68c-151">In realtà, qualsiasi voce nella rampa deve essere compresa tra 32768 del valore Identity.</span><span class="sxs-lookup"><span data-stu-id="7a68c-151">In fact, any entry in the ramp must be within 32768 of the identity value.</span></span> <span data-ttu-id="7a68c-152">Questa restrizione significa che nessuna app può attivare la visualizzazione completamente nera o altri colori illeggibili.</span><span class="sxs-lookup"><span data-stu-id="7a68c-152">This restriction means that no app can turn the display completely black or to some other unreadable color.</span></span>

<span data-ttu-id="7a68c-153">L'API successiva è il [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp)di Microsoft Direct3D 9, che segue lo stesso modello e lo stesso formato di dati di [**SetDeviceGammaRamp**](/windows/win32/api/wingdi/nf-wingdi-setdevicegammaramp).</span><span class="sxs-lookup"><span data-stu-id="7a68c-153">The next API is Microsoft Direct3D 9’s [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp), which follows the same pattern and data format as [**SetDeviceGammaRamp**](/windows/win32/api/wingdi/nf-wingdi-setdevicegammaramp).</span></span> <span data-ttu-id="7a68c-154">Il valore predefinito della rampa gamma Direct3D 9 non è particolarmente utile; si tratta di una rampa di parole inizializzata su 0-255, non 0-65535, anche se l'API è definita in termini di 0-65535.</span><span class="sxs-lookup"><span data-stu-id="7a68c-154">The default value of the Direct3D 9 gamma ramp is not particularly useful; it is a ramp of WORDs initialized to 0-255, not 0-65535, even though the API is defined in terms of 0-65535.</span></span>

<span data-ttu-id="7a68c-155">L'API più recente è [**IDXGIOutput:: SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol).</span><span class="sxs-lookup"><span data-stu-id="7a68c-155">The latest API is [**IDXGIOutput::SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol).</span></span> <span data-ttu-id="7a68c-156">Questa API ha uno schema più flessibile per esprimere il controllo gamma, in quanto si adatta al set di formati di visualizzazione più ampio di DXGI, tra cui dieci bit integer per canale, formati float a 16 bit e il \_ formato di intervallo esteso per la distorsione XR.</span><span class="sxs-lookup"><span data-stu-id="7a68c-156">This API has a more flexible scheme to express gamma control, as befits DXGI’s increased set of display formats, including ten integer bits-per-channel, 16-bit float formats and the XR\_BIAS extended range format.</span></span>

<span data-ttu-id="7a68c-157">Tutte queste API operano sullo stesso hardware e modificano gli stessi valori.</span><span class="sxs-lookup"><span data-stu-id="7a68c-157">All of these APIs operate on the same hardware, and change the same values.</span></span> <span data-ttu-id="7a68c-158">Le API Direct3D 9 e DXGI sono "solo scrittura".</span><span class="sxs-lookup"><span data-stu-id="7a68c-158">The Direct3D 9 and DXGI APIs are “write only”.</span></span> <span data-ttu-id="7a68c-159">Non è possibile leggere il valore dell'hardware, modificarlo e quindi impostarlo.</span><span class="sxs-lookup"><span data-stu-id="7a68c-159">You can't read the value of the hardware, modify it, and then set it.</span></span> <span data-ttu-id="7a68c-160">È possibile impostare solo la rampa.</span><span class="sxs-lookup"><span data-stu-id="7a68c-160">You can only set the ramp.</span></span> <span data-ttu-id="7a68c-161">Inoltre, è possibile impostare gamma solo quando l'app è a schermo intero.</span><span class="sxs-lookup"><span data-stu-id="7a68c-161">Furthermore, you can only set gamma when the app is full screen.</span></span> <span data-ttu-id="7a68c-162">Questa restrizione è un altro modo per garantire che il desktop sia sempre leggibile.</span><span class="sxs-lookup"><span data-stu-id="7a68c-162">This restriction is another way to guarantee that the desktop is always readable.</span></span> <span data-ttu-id="7a68c-163">Ovvero, l'app può infastidire il proprio schermo, ma Windows ripristinerà la rampa gamma precedente quando l'app perderà schermo intero (ad esempio, tramite ALT-TAB o CTRL + ALT + CANC).</span><span class="sxs-lookup"><span data-stu-id="7a68c-163">That is, the app can disturb its own display, but Windows will restore the previous gamma ramp when the app loses full screen (for example, via alt-tab or ctrl-alt-del).</span></span>

## <a name="evolution-of-display-hardware"></a><span data-ttu-id="7a68c-164">Evoluzione dell'hardware di visualizzazione</span><span class="sxs-lookup"><span data-stu-id="7a68c-164">Evolution of display hardware</span></span>

<span data-ttu-id="7a68c-165">Alcuni monitoraggi più recenti possono visualizzare un'ampia gamma di intensità.</span><span class="sxs-lookup"><span data-stu-id="7a68c-165">Some newer monitors can display a wide range of intensities.</span></span> <span data-ttu-id="7a68c-166">Tuttavia, quando il formato di visualizzazione può rappresentare solo valori compresi tra zero e uno, la visualizzazione deve eseguire il mapping di zero al relativo valore più scuro e uno al suo valore più chiaro.</span><span class="sxs-lookup"><span data-stu-id="7a68c-166">But, when the display format can represent only values between zero and one, the display must map zero to its darkest value and one to its brightest value.</span></span> <span data-ttu-id="7a68c-167">Questo valore più chiaro potrebbe essere troppo chiaro per la visualizzazione di pagine Web con testo nero su sfondo bianco, ma è ideale per effetti speciali eccessivamente luminosi, ad esempio la visualizzazione della luce solare luccicante di un lago o un fulmine.</span><span class="sxs-lookup"><span data-stu-id="7a68c-167">This brightest value might be far too bright for comfortable viewing of Web pages with black text on a white background but is wonderful for over-bright special effects, such as viewing sunlight glittering off of a lake or lightning forking the sky.</span></span> <span data-ttu-id="7a68c-168">Quindi, è necessario un modo per esprimere questi intervalli più ampi.</span><span class="sxs-lookup"><span data-stu-id="7a68c-168">So, we need a way to express these wider ranges.</span></span> <span data-ttu-id="7a68c-169">DXGI 1,1 e versioni successive contengono valori di formato di visualizzazione che consentono a 1,0 di rappresentare un valore bianco comodo e riservano valori di formato di visualizzazione più ampi per effetti speciali eccessivamente luminosi.</span><span class="sxs-lookup"><span data-stu-id="7a68c-169">DXGI 1.1 and later contains display format values that let 1.0 represent a comfortable white value and reserves wider display format values for over-bright special effects.</span></span> <span data-ttu-id="7a68c-170">DXGI 1,1 supporta due formati di visualizzazione che consentono di esprimere i valori più estesi: DXGI \_ Format \_ R10G10B10 \_ XR \_ Bias \_ a2 \_ UNORM e a virgola mobile a 16 bit.</span><span class="sxs-lookup"><span data-stu-id="7a68c-170">DXGI 1.1 supports two display formats that can express these wider values: DXGI\_FORMAT\_R10G10B10\_XR\_BIAS\_A2\_UNORM and 16-bit floating point.</span></span> <span data-ttu-id="7a68c-171">Per una descrizione completa di questi formati, vedere [Dettagli del formato esteso](/windows-hardware/drivers/display/details-of-the-extended-format).</span><span class="sxs-lookup"><span data-stu-id="7a68c-171">For a full discussion of these formats, see [Details of the Extended Format](/windows-hardware/drivers/display/details-of-the-extended-format).</span></span> <span data-ttu-id="7a68c-172">A questo punto, si esamina il motivo per cui l'API DXGI di [**IDXGIOutput:: SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) gamma richiede valori pixel maggiori di 1,0.</span><span class="sxs-lookup"><span data-stu-id="7a68c-172">Next, we look at why DXGI’s [**IDXGIOutput::SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) gamma API needs pixel values greater than 1.0.</span></span>

## <a name="gamma-control-capabilities-in-dxgi"></a><span data-ttu-id="7a68c-173">Funzionalità di controllo gamma in DXGI</span><span class="sxs-lookup"><span data-stu-id="7a68c-173">Gamma control capabilities in DXGI</span></span>

<span data-ttu-id="7a68c-174">DXGI consente al driver di visualizzazione di esprimere i propri controlli gamma come funzione lineare step-wise.</span><span class="sxs-lookup"><span data-stu-id="7a68c-174">DXGI lets the display driver express its gamma controls as a step-wise linear function.</span></span> <span data-ttu-id="7a68c-175">Questa funzione lineare Step-Wise è definita dai punti di controllo di questa funzione, dall'intervallo di valori in cui la funzione può essere convertita e da un'operazione facoltativa di ridimensionamento e offset aggiuntiva che può essere applicata dopo la conversione.</span><span class="sxs-lookup"><span data-stu-id="7a68c-175">This step-wise linear function is defined by the control points of this function, the range of values the function can convert to, and an additional optional scale-and-offset operation that can be applied after conversion.</span></span> <span data-ttu-id="7a68c-176">Un'app può chiamare il metodo [**IDXGIOutput:: GetGammaControlCapabilities**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-getgammacontrolcapabilities) per recuperare tutte le funzionalità di controllo nella struttura [**delle \_ \_ \_ funzionalità di controllo gamma di DXGI**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="7a68c-176">An app can call the [**IDXGIOutput::GetGammaControlCapabilities**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-getgammacontrolcapabilities) method to retrieve all of these control capabilities in the [**DXGI\_GAMMA\_CONTROL\_CAPABILITIES**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) structure.</span></span>

<span data-ttu-id="7a68c-177">Questo grafico mostra una funzione lineare con solo quattro punti di controllo.</span><span class="sxs-lookup"><span data-stu-id="7a68c-177">This graph shows a linear function with just four control points.</span></span>

![funzione lineare di correzione gamma](images/gamma-linear-function.png)

<span data-ttu-id="7a68c-179">DXGI definisce i punti di controllo in base alla relativa posizione lungo l'asse dei colori della superficie.</span><span class="sxs-lookup"><span data-stu-id="7a68c-179">DXGI defines control points by their location along the surface color axis.</span></span> <span data-ttu-id="7a68c-180">Nel grafico precedente, le posizioni dei punti di controllo sono 0, 0,5, 0,75 e 1,0.</span><span class="sxs-lookup"><span data-stu-id="7a68c-180">In the preceding graph, the locations of the control points are 0, 0.5, 0.75 and 1.0.</span></span> <span data-ttu-id="7a68c-181">Questi punti di controllo indicano che l'hardware può convertire i valori nell'intervallo compreso tra 0 e 1,0.</span><span class="sxs-lookup"><span data-stu-id="7a68c-181">These control points indicate that the hardware can convert values in the range 0 through 1.0.</span></span> <span data-ttu-id="7a68c-182">DXGI elenca questi punti di controllo nel  membro della matrice ControlPointPositions [**delle \_ \_ \_ funzionalità di controllo gamma di DXGI**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) e li dichiara sempre in ordine crescente.</span><span class="sxs-lookup"><span data-stu-id="7a68c-182">DXGI lists these control points in the **ControlPointPositions** array member of [**DXGI\_GAMMA\_CONTROL\_CAPABILITIES**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) and always declares them in increasing order.</span></span> <span data-ttu-id="7a68c-183">DXGI riempie solo i primi elementi della matrice **ControlPointPositions** e indica il numero di elementi con il membro **NumGammaControlPoints** delle **funzionalità di \_ \_ controllo \_ gamma DXGI**.</span><span class="sxs-lookup"><span data-stu-id="7a68c-183">DXGI fills only the first elements of the **ControlPointPositions** array and indicates the number of elements with the **NumGammaControlPoints** member of **DXGI\_GAMMA\_CONTROL\_CAPABILITIES**.</span></span> <span data-ttu-id="7a68c-184">Se **NumGammaControlPoints** è minore di 1025, DXGI lascia invariato il resto degli elementi **ControlPointPositions** .</span><span class="sxs-lookup"><span data-stu-id="7a68c-184">If **NumGammaControlPoints** is less than 1025, DXGI leaves the rest of the **ControlPointPositions** elements undefined.</span></span>

<span data-ttu-id="7a68c-185">L'hardware rappresentato da questo grafico può convertire i valori in un intervallo compreso tra 0 e 1,25.</span><span class="sxs-lookup"><span data-stu-id="7a68c-185">The hardware represented by this graph can convert values to a range of 0 through 1.25.</span></span> <span data-ttu-id="7a68c-186">Quindi, DXGI imposta rispettivamente i membri **MinConvertedValue** e **MaxConvertedValue** su 0,0 f e 1.25 f.</span><span class="sxs-lookup"><span data-stu-id="7a68c-186">So, DXGI sets the **MinConvertedValue** and **MaxConvertedValue** members to 0.0f and 1.25f respectively.</span></span>

<span data-ttu-id="7a68c-187">DXGI imposta il membro **ScaleAndOffsetSupported** delle [**\_ \_ \_ funzionalità di controllo gamma DXGI**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) per indicare se l'hardware supporta la funzionalità di scalabilità e offset.</span><span class="sxs-lookup"><span data-stu-id="7a68c-187">DXGI sets the **ScaleAndOffsetSupported** member of [**DXGI\_GAMMA\_CONTROL\_CAPABILITIES**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) to indicate whether the hardware supports the scale-and-offset capability.</span></span> <span data-ttu-id="7a68c-188">Se l'hardware supporta la scalabilità e l'offset, mantiene una semplice tabella di ricerca uno-a-uno, ma quindi modifica l'output della tabella per estendere l'output a un intervallo maggiore di \[ 0, 1 \] .</span><span class="sxs-lookup"><span data-stu-id="7a68c-188">If hardware supports scale-and-offset, it keeps a simple one-to-one lookup table but then adjusts the output of the table to stretch the output to a range greater than \[0,1\].</span></span> <span data-ttu-id="7a68c-189">L'hardware ridimensiona innanzitutto i valori che provengono dalla tabella di ricerca e li compensa.</span><span class="sxs-lookup"><span data-stu-id="7a68c-189">The hardware first scales the values that come out of the lookup table and then offsets them.</span></span>

> [!Note]  
> <span data-ttu-id="7a68c-190">Diversi monitoraggi connessi allo stesso computer potrebbero avere funzionalità di controllo gamma diverse.</span><span class="sxs-lookup"><span data-stu-id="7a68c-190">Different monitors connected to the same computer might have different gamma control capabilities.</span></span> <span data-ttu-id="7a68c-191">Inoltre, le funzionalità di controllo gamma possono cambiare in base alla modalità di visualizzazione dell'output.</span><span class="sxs-lookup"><span data-stu-id="7a68c-191">Moreover, the gamma control capabilities can in fact change depending on the display mode of the output.</span></span> <span data-ttu-id="7a68c-192">Di conseguenza, è consigliabile chiamare sempre [**IDXGIOutput:: GetGammaControlCapabilities**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-getgammacontrolcapabilities) per eseguire query sulle funzionalità di controllo gamma dopo che l'app entra in modalità schermo intero.</span><span class="sxs-lookup"><span data-stu-id="7a68c-192">Consequently, we recommend that you always call [**IDXGIOutput::GetGammaControlCapabilities**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-getgammacontrolcapabilities) to query gamma control capabilities after your app enters full-screen mode.</span></span>

 

<span data-ttu-id="7a68c-193">È possibile usare questi valori di funzionalità di controllo gamma per derivare i valori di controllo che è possibile impostare usando l'API [**IDXGIOutput:: SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) .</span><span class="sxs-lookup"><span data-stu-id="7a68c-193">You can use these gamma control capability values to derive control values that you can then set by using the [**IDXGIOutput::SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) API.</span></span>

## <a name="setting-gamma-control-with-dxgi"></a><span data-ttu-id="7a68c-194">Impostazione del controllo gamma con DXGI</span><span class="sxs-lookup"><span data-stu-id="7a68c-194">Setting gamma control with DXGI</span></span>

<span data-ttu-id="7a68c-195">Per impostare i controlli gamma, passare un puntatore a una struttura di [**\_ \_ controllo gamma DXGI**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) quando si chiama l'API [**IDXGIOutput:: SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) .</span><span class="sxs-lookup"><span data-stu-id="7a68c-195">To set gamma controls, you pass a pointer to a [**DXGI\_GAMMA\_CONTROL**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) structure when you call the [**IDXGIOutput::SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) API.</span></span>

<span data-ttu-id="7a68c-196">È possibile impostare i membri di **ridimensionamento** e **offset** del [**\_ \_ controllo gamma DXGI**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) per specificare i valori di scala e offset che si desidera applicare all'hardware ai valori che si ottengono dalla tabella di ricerca.</span><span class="sxs-lookup"><span data-stu-id="7a68c-196">You set the **Scale** and **Offset** members of [**DXGI\_GAMMA\_CONTROL**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) to specify the scale and offset values that you want the hardware to apply to the values that you get from the lookup table.</span></span> <span data-ttu-id="7a68c-197">È possibile impostare in modo sicuro la **scala** su 1 e l' **offset** su zero (ovvero, una scala di uno non ha alcun effetto e un offset pari a zero non ha alcun effetto) se non si vuole usare la funzionalità di scalabilità e offset o se l'hardware non dispone di questa funzionalità.</span><span class="sxs-lookup"><span data-stu-id="7a68c-197">You can safely set **Scale** to 1 and **Offset** to zero (that is, a scale by one has no effect and an offset of zero has no effect) if you don't want to use the scale-and-offset capability or if the hardware doesn't have that capability.</span></span>

<span data-ttu-id="7a68c-198">Impostare il membro della matrice **GammaCurve** del [**\_ \_ controllo gamma DXGI**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) su un elenco di [**strutture \_ RGB DXGI**](/previous-versions/windows/desktop/legacy/bb173071(v=vs.85)) per i punti sulla curva gamma.</span><span class="sxs-lookup"><span data-stu-id="7a68c-198">You set the **GammaCurve** array member of [**DXGI\_GAMMA\_CONTROL**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) to a list of [**DXGI\_RGB**](/previous-versions/windows/desktop/legacy/bb173071(v=vs.85)) structures for the points on the gamma curve.</span></span> <span data-ttu-id="7a68c-199">Ogni **elemento \_ RGB DXGI** specifica i valori float che rappresentano i componenti rosso, verde e blu per quel punto.</span><span class="sxs-lookup"><span data-stu-id="7a68c-199">Each **DXGI\_RGB** element specifies the float values that represent the red, green, and blue components for that point.</span></span> <span data-ttu-id="7a68c-200">La curva gamma non usa valori alfa.</span><span class="sxs-lookup"><span data-stu-id="7a68c-200">The gamma curve doesn't use alpha values.</span></span> <span data-ttu-id="7a68c-201">Si usa il numero ottenuto da **NumGammaControlPoints** delle funzionalità di [**\_ \_ controllo \_ gamma DXGI**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) per riempire tale numero di elementi nella matrice **GammaCurve** .</span><span class="sxs-lookup"><span data-stu-id="7a68c-201">You use the number that you obtained from **NumGammaControlPoints** of [**DXGI\_GAMMA\_CONTROL\_CAPABILITIES**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) to fill that number of elements in the **GammaCurve** array.</span></span> <span data-ttu-id="7a68c-202">Ogni elemento inserito nella matrice **GammaCurve** è l'altezza di ogni punto di controllo.</span><span class="sxs-lookup"><span data-stu-id="7a68c-202">Each element that you place in the **GammaCurve** array is the height for each control point.</span></span>

<span data-ttu-id="7a68c-203">Si noti che nel grafico precedente è ora possibile controllare la posizione verticale di ogni punto di controllo ed è disponibile un controllo separato per rosso, verde e blu.</span><span class="sxs-lookup"><span data-stu-id="7a68c-203">Notice in the preceding graph that you now have control over the vertical placement of each control point, and you have separate control for red, green and blue.</span></span> <span data-ttu-id="7a68c-204">Ad esempio, è possibile impostare tutti i valori verde e blu su zero e impostare i valori rossi su una scala crescente da zero a uno.</span><span class="sxs-lookup"><span data-stu-id="7a68c-204">For example, you can set all of the green and blue values to zero and set the red values to an ascending staircase from zero to one.</span></span> <span data-ttu-id="7a68c-205">In questo scenario, l'immagine visualizzata Mostra solo le parti rosse, con blu e verde visualizzate come nero.</span><span class="sxs-lookup"><span data-stu-id="7a68c-205">In this scenario, the displayed image shows only its red parts, with the blue and green appearing as black.</span></span> <span data-ttu-id="7a68c-206">È anche possibile impostare una scala discendente per tutti i colori, che comporta una visualizzazione invertita.</span><span class="sxs-lookup"><span data-stu-id="7a68c-206">You can also set a descending staircase for all colors, which results in an inverted display.</span></span> <span data-ttu-id="7a68c-207">Qualsiasi valore inserito nella matrice **GammaCurve** deve essere compreso tra i valori ottenuti dai membri **MinConvertedValue** e **MaxConvertedValue** delle [**\_ \_ \_ funzionalità di controllo gamma DXGI**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="7a68c-207">Any value you place in the **GammaCurve** array must be inclusively within the values you obtained from the **MinConvertedValue** and **MaxConvertedValue** members of [**DXGI\_GAMMA\_CONTROL\_CAPABILITIES**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)).</span></span>

## <a name="gamma-control-practicalities"></a><span data-ttu-id="7a68c-208">Praticità del controllo gamma</span><span class="sxs-lookup"><span data-stu-id="7a68c-208">Gamma control practicalities</span></span>

<span data-ttu-id="7a68c-209">I controlli gamma di DXGI si applicano solo finché l'app è a schermo intero.</span><span class="sxs-lookup"><span data-stu-id="7a68c-209">DXGI’s gamma controls apply only as long as the app is full screen.</span></span> <span data-ttu-id="7a68c-210">Windows ripristina lo stato precedente dello schermo quando l'app viene chiusa o torna alla modalità finestra.</span><span class="sxs-lookup"><span data-stu-id="7a68c-210">Windows restores the previous state of the display when the app exits or returns to windowed mode.</span></span> <span data-ttu-id="7a68c-211">Tuttavia, Windows non ripristina lo stato gamma dell'app se l'app entra nuovamente in modalità schermo intero.</span><span class="sxs-lookup"><span data-stu-id="7a68c-211">But Windows doesn’t restore your app’s gamma state if the app re-enters full-screen mode.</span></span> <span data-ttu-id="7a68c-212">L'app deve ripristinare in modo esplicito lo stato gamma quando viene nuovamente attivata la modalità schermo intero.</span><span class="sxs-lookup"><span data-stu-id="7a68c-212">Your app must explicitly restore its gamma state when it re-enters full-screen mode.</span></span>

<span data-ttu-id="7a68c-213">Non tutti gli adapter supportano il controllo gamma.</span><span class="sxs-lookup"><span data-stu-id="7a68c-213">Not all adapters support gamma control.</span></span> <span data-ttu-id="7a68c-214">Se un adapter non supporta il controllo gamma, ignora le chiamate per impostare una rampa gamma.</span><span class="sxs-lookup"><span data-stu-id="7a68c-214">If an adapter doesn't support gamma control, it ignores calls to set a gamma ramp.</span></span>

<span data-ttu-id="7a68c-215">Le app eseguite in Desktop remoto non possono controllare la gamma.</span><span class="sxs-lookup"><span data-stu-id="7a68c-215">Apps that run under remote desktop can't control gamma at all.</span></span>

<span data-ttu-id="7a68c-216">Il cursore del mouse, se implementato nell'hardware (come la maggior parte di essi), in genere non risponde all'impostazione gamma.</span><span class="sxs-lookup"><span data-stu-id="7a68c-216">The mouse cursor, if it is implemented in hardware (as most are), typically doesn't respond to the gamma setting.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7a68c-217">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="7a68c-217">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7a68c-218">Guida per programmatori per DXGI</span><span class="sxs-lookup"><span data-stu-id="7a68c-218">Programming Guide for DXGI</span></span>](dx-graphics-dxgi-overviews.md)
</dt> </dl>

 

 
