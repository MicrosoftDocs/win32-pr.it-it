---
description: Sebbene i provider siano invitati a usare nomi di istanza univoci, non tutti i provider lo eseguono.
ms.assetid: 3c8fcb8d-2ea4-4b24-b649-7bd375c1133d
title: Gestione dei nomi di istanza duplicati
ms.topic: article
ms.date: 08/17/2020
ms.openlocfilehash: 220e5d7d0181a79c1d1415486cc946d484e11952
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106312164"
---
# <a name="handling-duplicate-instance-names"></a><span data-ttu-id="995c3-103">Gestione dei nomi di istanza duplicati</span><span class="sxs-lookup"><span data-stu-id="995c3-103">Handling Duplicate Instance Names</span></span>

<span data-ttu-id="995c3-104">Sebbene i provider siano fortemente invitati a usare nomi di istanza univoci, non tutti i provider lo eseguono.</span><span class="sxs-lookup"><span data-stu-id="995c3-104">Although providers are strongly encouraged to use unique instance names, not all providers do.</span></span> <span data-ttu-id="995c3-105">La convenzione per la visualizzazione di nomi di istanza duplicati consiste nell'accodare un `#` carattere e un numero di serie al nome dell'istanza, ad eccezione della prima occorrenza del nome.</span><span class="sxs-lookup"><span data-stu-id="995c3-105">The convention for displaying duplicate instance names is to append a `#` character and a serial number to the instance name, except for the first occurrence of the name.</span></span> <span data-ttu-id="995c3-106">Se, ad esempio, sono presenti tre istanze di `svchost` in un campione, i tre nomi vengono visualizzati come `svchost` , `svchost#1` e `svchost#2` .</span><span class="sxs-lookup"><span data-stu-id="995c3-106">For example, if there are three instances of `svchost` in a sample, the three names are displayed as `svchost`, `svchost#1`, and `svchost#2`.</span></span>

<span data-ttu-id="995c3-107">Sfortunatamente, questa convenzione non risolve completamente il problema.</span><span class="sxs-lookup"><span data-stu-id="995c3-107">Unfortunately, this convention does not completely resolve the issue.</span></span> <span data-ttu-id="995c3-108">I numeri di serie vengono assegnati in base all'ordine in cui un determinato nome di istanza viene visualizzato in un campione e questo ordine potrebbe non essere coerente da esempio a campione.</span><span class="sxs-lookup"><span data-stu-id="995c3-108">Serial numbers are assigned based on the order in which a particular instance name appears in a sample, and this order may be inconsistent from sample to sample.</span></span> <span data-ttu-id="995c3-109">Ad esempio, l'esempio A può vedere `svchost` (pid 100), `svchost#1` (PID 200) e `svchost#2` (PID 300).</span><span class="sxs-lookup"><span data-stu-id="995c3-109">For example, sample A might see `svchost` (PID 100), `svchost#1` (PID 200), and `svchost#2` (PID 300).</span></span> <span data-ttu-id="995c3-110">Se quindi il svchost con PID 100 si arresta, l'esempio seguente visualizzerà `svchost` (pid 200) e `svchost#1` (PID 300).</span><span class="sxs-lookup"><span data-stu-id="995c3-110">Then if the svchost with PID 100 shuts down, the next sample would see `svchost` (PID 200) and `svchost#1` (PID 300).</span></span> <span data-ttu-id="995c3-111">La logica di corrispondenza di base tenterà di trovare una corrispondenza tra le statistiche di esempio `svchost#1` (da pid 200) e le statistiche di esempio b `svchost#1` (dal PID 300), ottenendo risultati non validi per l'esempio B. gli errori si verificano quando una nuova istanza non univoca viene visualizzata in un campione o quando un'istanza non univoca smette di essere visualizzata in un campione (a meno che l'istanza aggiunta</span><span class="sxs-lookup"><span data-stu-id="995c3-111">Basic matching logic would try to match sample A's `svchost#1` statistics (from PID 200) against sample B's `svchost#1` statistics (from PID 300), resulting in invalid results for sample B. Errors occur when a new non-unique instance shows up in a sample or when a non-unique instance stops showing up in a sample (unless the added/removed instance was the last one).</span></span>

## <a name="process-counterset"></a><span data-ttu-id="995c3-112">Contatore processi</span><span class="sxs-lookup"><span data-stu-id="995c3-112">Process counterset</span></span>

<span data-ttu-id="995c3-113">Questo problema è particolarmente problematico per il `Process` contatore perché usa solo il nome dell'exe del processo come nome dell'istanza anche se il nome dell'exe non è univoco.</span><span class="sxs-lookup"><span data-stu-id="995c3-113">This issue is especially problematic for the `Process` counterset because it uses only the process's EXE name as the instance name even though the EXE name is not unique.</span></span> <span data-ttu-id="995c3-114">`Process`Non è possibile modificare il comportamento predefinito del contatore in Windows a causa di problemi di compatibilità.</span><span class="sxs-lookup"><span data-stu-id="995c3-114">The default behavior of the `Process` counterset on Windows cannot be changed due to compatibility issues.</span></span>

<span data-ttu-id="995c3-115">È possibile modificare il comportamento di `Process` e `Thread` CounterSet in modo da utilizzare nomi di istanza univoci impostando i valori del registro di sistema `ProcessNameFormat` o `ThreadNameFormat` nella chiave del registro di `HKLM\System\CurrentControlSet\Services\Perfproc\Performance` sistema.</span><span class="sxs-lookup"><span data-stu-id="995c3-115">You can alter the behavior of the `Process` and `Thread` countersets to use unique instance names by setting the `ProcessNameFormat` or `ThreadNameFormat` registry values under the `HKLM\System\CurrentControlSet\Services\Perfproc\Performance` registry key.</span></span>

> [!CAUTION]
> <span data-ttu-id="995c3-116">L'abilitazione di nomi di istanza univoci per il `Process` contatore può causare un comportamento non corretto di alcuni programmi, poiché molti programmi prevedono il modello di denominazione non univoco.</span><span class="sxs-lookup"><span data-stu-id="995c3-116">Enabling unique instance names for the `Process` counterset may cause some programs to behave incorrectly, since many programs expect the non-unique naming pattern.</span></span> <span data-ttu-id="995c3-117">Ad esempio, un programma che cerca un'istanza con un nome di EXE noto specifico non sarà più in grado di trovare tale istanza dopo aver abilitato i nomi di istanza univoci.</span><span class="sxs-lookup"><span data-stu-id="995c3-117">For example, a program that is looking for an instance with a specific well-known EXE name will no longer be able to find that instance after enabling unique instance names.</span></span>

<span data-ttu-id="995c3-118">Il tipo di registro per questi valori è `REG_DWORD` .</span><span class="sxs-lookup"><span data-stu-id="995c3-118">The registry type for these values is `REG_DWORD`.</span></span> <span data-ttu-id="995c3-119">Impostando il valore su `2` , l'identificatore di processo (PID) viene aggiunto al nome dell'istanza del processo e all'identificatore del thread (TID) al nome dell'istanza del thread.</span><span class="sxs-lookup"><span data-stu-id="995c3-119">Setting the value to `2` appends the process identifier (PID) to the process instance name and the thread identifier (TID) to the thread instance name.</span></span> <span data-ttu-id="995c3-120">Per disabilitare questa funzionalità, impostare il valore su 1 o eliminare il valore.</span><span class="sxs-lookup"><span data-stu-id="995c3-120">To disable this feature, set the value to 1 or delete the value.</span></span>
