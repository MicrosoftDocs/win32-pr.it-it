---
description: Il formato dei dati recuperati dalla funzione RegQueryValueEx inizia con una struttura di intestazione a lunghezza fissa, un \_ blocco di dati Perf \_ .
ms.assetid: a68fa617-834c-4ad9-b922-fac3a648ad75
title: Formato dati prestazioni
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 88029634594843a50fd6010993eb6517dce831f7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104551462"
---
# <a name="performance-data-format"></a><span data-ttu-id="27c24-103">Formato dati prestazioni</span><span class="sxs-lookup"><span data-stu-id="27c24-103">Performance Data Format</span></span>

<span data-ttu-id="27c24-104">Il formato dei dati recuperati dalla funzione [**RegQueryValueEx**](/windows/desktop/api/winreg/nf-winreg-regqueryvalueexa) inizia con una struttura di intestazione a lunghezza fissa, [**un \_ \_ blocco di dati Perf**](/windows/desktop/api/Winperf/ns-winperf-perf_data_block).</span><span class="sxs-lookup"><span data-stu-id="27c24-104">The format of the data retrieved by the [**RegQueryValueEx**](/windows/desktop/api/winreg/nf-winreg-regqueryvalueexa) function begins with a fixed-length header structure, [**PERF\_DATA\_BLOCK**](/windows/desktop/api/Winperf/ns-winperf-perf_data_block).</span></span> <span data-ttu-id="27c24-105">La struttura del **\_ \_ blocco di dati Perf** descrive il sistema e i dati sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="27c24-105">The **PERF\_DATA\_BLOCK** structure describes the system and the performance data.</span></span> <span data-ttu-id="27c24-106">La struttura del **\_ \_ blocco di dati Perf** è seguita da un numero variabile di elementi di dati oggetto a lunghezza variabile.</span><span class="sxs-lookup"><span data-stu-id="27c24-106">The **PERF\_DATA\_BLOCK** structure is followed by variable number of variable-length object data items.</span></span> <span data-ttu-id="27c24-107">L'intestazione di ogni elemento oggetto contiene l'offset dell'elemento oggetto successivo nell'elenco.</span><span class="sxs-lookup"><span data-stu-id="27c24-107">The header of each object item contains the offset of the next object item in the list.</span></span> <span data-ttu-id="27c24-108">Nel diagramma seguente viene illustrata la struttura dei dati sulle prestazioni di base.</span><span class="sxs-lookup"><span data-stu-id="27c24-108">The following diagram shows the basic performance data structure.</span></span>

![struttura dei dati sulle prestazioni](images/perfdata.png)

<span data-ttu-id="27c24-110">Esistono due formati per gli elementi di dati oggetto: uno che supporta più istanze e l'altro che non supporta più istanze.</span><span class="sxs-lookup"><span data-stu-id="27c24-110">There are two formats for the object data items: one that supports multiple instances, and the other that does not support multiple instances.</span></span>

<span data-ttu-id="27c24-111">Ogni blocco di elementi di dati oggetto contiene una struttura del [**\_ \_ tipo di oggetto Perf**](/windows/desktop/api/Winperf/ns-winperf-perf_object_type) , che descrive i dati sulle prestazioni per l'oggetto.</span><span class="sxs-lookup"><span data-stu-id="27c24-111">Each object data item block contains a [**PERF\_OBJECT\_TYPE**](/windows/desktop/api/Winperf/ns-winperf-perf_object_type) structure, which describes the performance data for the object.</span></span> <span data-ttu-id="27c24-112">La struttura del **\_ \_ tipo di oggetto Perf** è seguita da un elenco di strutture di [**definizione dei \_ contatori \_ delle prestazioni**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition) , una per ogni contatore definito per l'oggetto.</span><span class="sxs-lookup"><span data-stu-id="27c24-112">The **PERF\_OBJECT\_TYPE** structure is followed by a list of [**PERF\_COUNTER\_DEFINITION**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition) structures, one for each counter defined for the object.</span></span> <span data-ttu-id="27c24-113">Per un oggetto con una sola istanza, l'elenco delle strutture delle **\_ \_ definizioni dei contatori delle prestazioni** è seguito da una singola struttura del [**\_ \_ blocco del contatore delle prestazioni**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_block) , seguita dai dati del contatore.</span><span class="sxs-lookup"><span data-stu-id="27c24-113">For an object with only one instance, the list of **PERF\_COUNTER\_DEFINITION** structures is followed by a single [**PERF\_COUNTER\_BLOCK**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_block) structure, followed by the counter data.</span></span> <span data-ttu-id="27c24-114">Ogni struttura di **\_ \_ definizione dei contatori delle prestazioni** contiene l'offset dall'inizio della struttura del **\_ \_ blocco del contatore delle prestazioni** ai dati del contatore corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="27c24-114">Each **PERF\_COUNTER\_DEFINITION** structure contains the offset from the start of the **PERF\_COUNTER\_BLOCK** structure to the corresponding counter data.</span></span> <span data-ttu-id="27c24-115">Nel diagramma seguente viene illustrata la struttura di un oggetto prestazione che non supporta più istanze.</span><span class="sxs-lookup"><span data-stu-id="27c24-115">The following diagram shows the structure of a performance object that does not support multiple instances.</span></span>

![struttura dell'oggetto prestazione che non supporta più istanze](images/perfnoinst.png)

<span data-ttu-id="27c24-117">Per un tipo di oggetto che supporta più istanze, l'elenco di strutture di [**\_ \_ definizione dei contatori delle prestazioni**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition) è seguito da un elenco di blocchi di informazioni sull'istanza (uno per ogni istanza).</span><span class="sxs-lookup"><span data-stu-id="27c24-117">For an object type that supports multiple instances, the list of [**PERF\_COUNTER\_DEFINITION**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_definition) structures is followed by a list of instance information blocks (one for each instance).</span></span> <span data-ttu-id="27c24-118">Ogni blocco di informazioni sull'istanza contiene una struttura di [**\_ \_ definizione dell'istanza Perf**](/windows/desktop/api/Winperf/ns-winperf-perf_instance_definition) , il nome dell'istanza e una struttura del [**blocco del \_ contatore \_ delle prestazioni**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_block) .</span><span class="sxs-lookup"><span data-stu-id="27c24-118">Each instance information block contains a [**PERF\_INSTANCE\_DEFINITION**](/windows/desktop/api/Winperf/ns-winperf-perf_instance_definition) structure, the name of the instance, and a [**PERF\_COUNTER\_BLOCK**](/windows/desktop/api/Winperf/ns-winperf-perf_counter_block) structure.</span></span> <span data-ttu-id="27c24-119">Nel diagramma seguente viene illustrata la struttura di un oggetto prestazioni che supporta due istanze.</span><span class="sxs-lookup"><span data-stu-id="27c24-119">The following diagram shows the structure of a performance object that supports two instances.</span></span>

![struttura di un oggetto prestazioni che supporta due istanze](images/perfinst.png)

<span data-ttu-id="27c24-121">Per un esempio in cui vengono usati gli offset, vedere [visualizzazione di nomi di oggetti, istanze e contatori](displaying-object-instance-and-counter-names.md).</span><span class="sxs-lookup"><span data-stu-id="27c24-121">For an example that uses the offsets, see [Displaying Object, Instance, and Counter Names](displaying-object-instance-and-counter-names.md).</span></span>

 

 
