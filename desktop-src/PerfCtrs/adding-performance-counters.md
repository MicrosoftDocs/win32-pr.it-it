---
description: I contatori delle prestazioni specifici dell'applicazione consentono di ottimizzare le prestazioni durante lo sviluppo e il debug dell'applicazione.
ms.assetid: 016386f6-4675-409e-8446-599e4ff96109
title: Aggiunta di contatori delle prestazioni
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8660af9406de4dedec3ecbd76169a23b342aa7d2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106312190"
---
# <a name="adding-performance-counters"></a><span data-ttu-id="1cc83-103">Aggiunta di contatori delle prestazioni</span><span class="sxs-lookup"><span data-stu-id="1cc83-103">Adding Performance Counters</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1cc83-104">A causa di limitazioni significative in merito a prestazioni e affidabilità, il metodo per fornire i dati dei contatori delle prestazioni descritti in questo argomento può essere modificato o non disponibile in futuro.</span><span class="sxs-lookup"><span data-stu-id="1cc83-104">Due to significant performance and reliability limitations, the method for providing performance counter data that this topic describes may be altered or unavailable in the future.</span></span> <span data-ttu-id="1cc83-105">Microsoft consiglia invece di usare il metodo descritto in [fornire i dati del contatore usando la versione 2,0](providing-counter-data-using-version-2-0.md) per la creazione di nuovi contatori delle prestazioni e di migrare i contatori delle prestazioni esistenti per usare anche tale metodo.</span><span class="sxs-lookup"><span data-stu-id="1cc83-105">Instead, Microsoft recommends that you use the method described in [Providing Counter Data Using Version 2.0](providing-counter-data-using-version-2-0.md) for creating new performance counters, and that you migrate existing performance counters to use that method as well.</span></span>

<span data-ttu-id="1cc83-106">I contatori delle prestazioni specifici dell'applicazione consentono di ottimizzare le prestazioni durante lo sviluppo e il debug dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="1cc83-106">Performance counters specific to your application can help you tune performance while you develop and debug the application.</span></span> <span data-ttu-id="1cc83-107">Dopo che l'applicazione è stata completata e installata nei sistemi di destinazione, i contatori possono aiutare gli amministratori di sistema a modificare le impostazioni configurabili per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="1cc83-107">After your application is complete and installed on target systems, the counters can help system administrators adjust configurable settings for your application.</span></span>

## <a name="adding-a-performance-object-and-its-counters"></a><span data-ttu-id="1cc83-108">Aggiunta di un oggetto prestazione e dei relativi contatori</span><span class="sxs-lookup"><span data-stu-id="1cc83-108">Adding a performance object and its counters</span></span>

1. <span data-ttu-id="1cc83-109">Progettare i tipi di oggetto e i contatori per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="1cc83-109">Design the object types and counters for the application.</span></span> <span data-ttu-id="1cc83-110">Per informazioni dettagliate, vedere [progettazione di oggetti e contatori](object-and-counter-design.md).</span><span class="sxs-lookup"><span data-stu-id="1cc83-110">For details, see [Object and Counter Design](object-and-counter-design.md).</span></span>
2. <span data-ttu-id="1cc83-111">Creare un file di inizializzazione (INI) contenente i nomi e le descrizioni degli oggetti e dei contatori delle prestazioni forniti.</span><span class="sxs-lookup"><span data-stu-id="1cc83-111">Create an initialization (.ini) file containing the names and descriptions of the performance objects and counters that you provide.</span></span> <span data-ttu-id="1cc83-112">Per informazioni dettagliate, vedere [aggiunta di nomi di contatori e descrizioni al registro di sistema](adding-counter-names-and-descriptions-to-the-registry.md).</span><span class="sxs-lookup"><span data-stu-id="1cc83-112">For details, see [Adding Counter Names and Descriptions to the Registry](adding-counter-names-and-descriptions-to-the-registry.md).</span></span>
3. <span data-ttu-id="1cc83-113">Creare un file di intestazione (. h) contenente gli offset relativi in corrispondenza dei quali verranno installati gli oggetti contatore e i contatori nel registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="1cc83-113">Create a header (.h) file containing the relative offsets at which the counter objects and counters will be installed in the registry.</span></span> <span data-ttu-id="1cc83-114">Per informazioni dettagliate, vedere [aggiunta di nomi di contatori e descrizioni al registro di sistema](adding-counter-names-and-descriptions-to-the-registry.md).</span><span class="sxs-lookup"><span data-stu-id="1cc83-114">For details, see [Adding Counter Names and Descriptions to the Registry](adding-counter-names-and-descriptions-to-the-registry.md).</span></span>
4. <span data-ttu-id="1cc83-115">Configurare le voci di monitoraggio delle prestazioni necessarie nel registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="1cc83-115">Set up the necessary performance monitoring entries in the registry.</span></span> <span data-ttu-id="1cc83-116">Sono inclusi i passaggi seguenti.</span><span class="sxs-lookup"><span data-stu-id="1cc83-116">This includes the following steps.</span></span>
    1. <span data-ttu-id="1cc83-117">Creare una chiave del registro di sistema nella chiave **dei servizi** per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="1cc83-117">Create a registry key in the **Services** key for the application.</span></span> <span data-ttu-id="1cc83-118">Se non si dispone di un nodo di questo tipo, crearlo con la seguente chiave del registro di sistema: `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services` .</span><span class="sxs-lookup"><span data-stu-id="1cc83-118">If you do not have such a node, create it under the following registry key: `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services`.</span></span> <span data-ttu-id="1cc83-119">Per informazioni dettagliate, vedere [creazione della chiave delle prestazioni dell'applicazione](creating-the-applications-performance-key.md).</span><span class="sxs-lookup"><span data-stu-id="1cc83-119">For details, see [Creating the Application's Performance Key](creating-the-applications-performance-key.md).</span></span>
    2. <span data-ttu-id="1cc83-120">Usare l'utilità **lodctr** con i file. ini e. h per installare le informazioni nel registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="1cc83-120">Use the **lodctr** utility with the .ini and .h files to install the information in the registry.</span></span> <span data-ttu-id="1cc83-121">Questa utilità ha esito positivo solo se nella chiave dei **Servizi** per l'applicazione è presente una chiave delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="1cc83-121">This utility succeeds only if a performance key exists in the **Services** key for the application.</span></span> <span data-ttu-id="1cc83-122">Per informazioni dettagliate, vedere [aggiunta di nomi di contatori e descrizioni al registro di sistema](adding-counter-names-and-descriptions-to-the-registry.md).</span><span class="sxs-lookup"><span data-stu-id="1cc83-122">For details, see [Adding Counter Names and Descriptions to the Registry](adding-counter-names-and-descriptions-to-the-registry.md).</span></span>
5. <span data-ttu-id="1cc83-123">Creare una DLL di prestazioni contenente un set di funzioni esportate che forniscono al consumer i dati del contatore sottoposti a query.</span><span class="sxs-lookup"><span data-stu-id="1cc83-123">Create a performance DLL containing a set of exported functions that provide the queried counter data to the consumer.</span></span> <span data-ttu-id="1cc83-124">Per informazioni dettagliate, vedere [creazione di una DLL dell'estensione](creating-a-performance-extension-dll.md)per le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="1cc83-124">For details, see [Creating a Performance Extension DLL](creating-a-performance-extension-dll.md).</span></span>
6. <span data-ttu-id="1cc83-125">Modificare il file di installazione dell'applicazione per automatizzare l'aggiunta di informazioni al registro di sistema, come descritto nel passaggio 4, e copiare la DLL di prestazioni nella directory dell'applicazione in fase di installazione.</span><span class="sxs-lookup"><span data-stu-id="1cc83-125">Modify the application's setup file to automate adding information to the registry (as described in step 4) and copy your performance DLL to your application's directory at setup.</span></span>

<span data-ttu-id="1cc83-126">Per informazioni sulle voci aggiuntive del registro di sistema, vedere [creazione di altre voci del registro di sistema](creating-other-registry-entries.md).</span><span class="sxs-lookup"><span data-stu-id="1cc83-126">For information about additional registry entries, see [Creating Other Registry Entries](creating-other-registry-entries.md).</span></span>
