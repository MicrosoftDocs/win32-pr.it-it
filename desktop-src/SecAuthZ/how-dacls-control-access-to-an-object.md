---
description: Quando un thread tenta di accedere a un oggetto a protezione diretta, il sistema concede o nega l'accesso.
ms.assetid: dc98b23e-ce42-4d4a-a285-c0b7b5e2a478
title: Funzionamento di AccessCheck
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 730cc8f63e7d69bf4cb38344f5eda60861d08a9f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "104563796"
---
# <a name="how-accesscheck-works"></a><span data-ttu-id="f536e-103">Funzionamento di AccessCheck</span><span class="sxs-lookup"><span data-stu-id="f536e-103">How AccessCheck Works</span></span>

<span data-ttu-id="f536e-104">Quando un thread tenta di accedere a un oggetto a protezione diretta, il sistema concede o nega l'accesso.</span><span class="sxs-lookup"><span data-stu-id="f536e-104">When a thread tries to access a securable object, the system either grants or denies access.</span></span> <span data-ttu-id="f536e-105">Se l'oggetto non dispone di un [*elenco di controllo di accesso discrezionale*](/windows/desktop/SecGloss/d-gly) (DACL), il sistema concede l'accesso; in caso contrario, il sistema cerca le [voci di controllo di accesso](access-control-entries.md) (ACE) nell'elenco DACL dell'oggetto che si applicano al thread.</span><span class="sxs-lookup"><span data-stu-id="f536e-105">If the object does not have a [*discretionary access control list*](/windows/desktop/SecGloss/d-gly) (DACL), the system grants access; otherwise, the system looks for [Access Control Entries](access-control-entries.md) (ACEs) in the object's DACL that apply to the thread.</span></span> <span data-ttu-id="f536e-106">Ogni voce ACE nel DACL dell'oggetto specifica i diritti di accesso consentiti o negati per un [trustee](trustees.md), che può essere un account utente, un account di gruppo o una [*sessione di accesso*](/windows/desktop/SecGloss/l-gly).</span><span class="sxs-lookup"><span data-stu-id="f536e-106">Each ACE in the object's DACL specifies the access rights allowed or denied for a [trustee](trustees.md), which can be a user account, a group account, or a [*logon session*](/windows/desktop/SecGloss/l-gly).</span></span>

## <a name="dacls"></a><span data-ttu-id="f536e-107">DACL</span><span class="sxs-lookup"><span data-stu-id="f536e-107">DACLs</span></span>

<span data-ttu-id="f536e-108">Il sistema confronta il trustee in ogni voce ACE con i trustee identificati nel token di [accesso](access-tokens.md)del thread.</span><span class="sxs-lookup"><span data-stu-id="f536e-108">The system compares the trustee in each ACE to the trustees identified in the thread's [access token](access-tokens.md).</span></span> <span data-ttu-id="f536e-109">Un token di accesso contiene gli [*identificatori di sicurezza*](/windows/desktop/SecGloss/s-gly) (SID) che identificano l'utente e gli account di gruppo a cui appartiene l'utente.</span><span class="sxs-lookup"><span data-stu-id="f536e-109">An access token contains [*security identifiers*](/windows/desktop/SecGloss/s-gly) (SIDs) that identify the user and the group accounts to which the user belongs.</span></span> <span data-ttu-id="f536e-110">Un token contiene anche un [*SID di accesso*](/windows/desktop/SecGloss/l-gly) che identifica la sessione di accesso corrente.</span><span class="sxs-lookup"><span data-stu-id="f536e-110">A token also contains a [*logon SID*](/windows/desktop/SecGloss/l-gly) that identifies the current logon session.</span></span> <span data-ttu-id="f536e-111">Durante un controllo di accesso, il sistema ignora i SID di gruppo che non sono abilitati.</span><span class="sxs-lookup"><span data-stu-id="f536e-111">During an access check, the system ignores group SIDs that are not enabled.</span></span> <span data-ttu-id="f536e-112">Per ulteriori informazioni sui SID abilitati, disabilitati e di sola negazione, vedere [attributi SID in un token di accesso](sid-attributes-in-an-access-token.md).</span><span class="sxs-lookup"><span data-stu-id="f536e-112">For more information on enabled, disabled, and deny-only SIDs, see [SID Attributes in an Access Token](sid-attributes-in-an-access-token.md).</span></span>

<span data-ttu-id="f536e-113">In genere, il sistema usa il [*token di accesso primario*](/windows/desktop/SecGloss/p-gly) del thread che richiede l'accesso.</span><span class="sxs-lookup"><span data-stu-id="f536e-113">Typically, the system uses the [*primary access token*](/windows/desktop/SecGloss/p-gly) of the thread that is requesting access.</span></span> <span data-ttu-id="f536e-114">Tuttavia, se il thread rappresenta un altro utente, il sistema usa il [*token di rappresentazione*](/windows/desktop/SecGloss/i-gly)del thread.</span><span class="sxs-lookup"><span data-stu-id="f536e-114">However, if the thread is impersonating another user, the system uses the thread's [*impersonation token*](/windows/desktop/SecGloss/i-gly).</span></span>

<span data-ttu-id="f536e-115">Il sistema esamina ogni voce ACE in sequenza fino a quando non si verifica uno degli eventi seguenti:</span><span class="sxs-lookup"><span data-stu-id="f536e-115">The system examines each ACE in sequence until one of the following events occurs:</span></span>

-   <span data-ttu-id="f536e-116">Una voce ACE con accesso negato nega in modo esplicito i [diritti di accesso](access-rights-and-access-masks.md) richiesti a uno dei trustee elencati nel token di accesso del thread.</span><span class="sxs-lookup"><span data-stu-id="f536e-116">An access-denied ACE explicitly denies any of the requested [access rights](access-rights-and-access-masks.md) to one of the trustees listed in the thread's access token.</span></span>
-   <span data-ttu-id="f536e-117">Una o più voci ACE consentite per l'accesso per i trustee elencate nel token di accesso del thread concedono in modo esplicito tutti i diritti di accesso richiesti.</span><span class="sxs-lookup"><span data-stu-id="f536e-117">One or more access-allowed ACEs for trustees listed in the thread's access token explicitly grant all the requested access rights.</span></span>
-   <span data-ttu-id="f536e-118">Tutte le voci ACE sono state controllate ed è ancora presente almeno un diritto di accesso richiesto che non è stato esplicitamente consentito. in questo caso, l'accesso viene negato in modo implicito.</span><span class="sxs-lookup"><span data-stu-id="f536e-118">All ACEs have been checked and there is still at least one requested access right that has not been explicitly allowed, in which case, access is implicitly denied.</span></span>

<span data-ttu-id="f536e-119">Nella figura seguente viene illustrato il modo in cui un DACL dell'oggetto può consentire l'accesso a un thread negando l'accesso a un altro thread.</span><span class="sxs-lookup"><span data-stu-id="f536e-119">The following illustration shows how an object's DACL can allow access to one thread while denying access to another.</span></span>

![DACL che concede diritti di accesso diversi a thread diversi](images/accctrl1.png)

<span data-ttu-id="f536e-121">Per il thread A, il sistema legge ACE 1 e nega immediatamente l'accesso perché la voce ACE di accesso negato si applica all'utente nel token di accesso del thread.</span><span class="sxs-lookup"><span data-stu-id="f536e-121">For Thread A, the system reads ACE 1 and immediately denies access because the access-denied ACE applies to the user in the thread's access token.</span></span> <span data-ttu-id="f536e-122">In questo caso, il sistema non controlla le voci ACE 2 e 3.</span><span class="sxs-lookup"><span data-stu-id="f536e-122">In this case, the system does not check ACEs 2 and 3.</span></span> <span data-ttu-id="f536e-123">Per il thread B, ACE 1 non è applicabile, quindi il sistema passa a ACE 2, che consente l'accesso in scrittura e ACE 3, che consente l'accesso in lettura ed esecuzione.</span><span class="sxs-lookup"><span data-stu-id="f536e-123">For Thread B, ACE 1 does not apply, so the system proceeds to ACE 2, which allows write access, and ACE 3 which allows read and execute access.</span></span>

<span data-ttu-id="f536e-124">Poiché il sistema interrompe il controllo degli ACE quando l'accesso richiesto viene concesso o negato in modo esplicito, l'ordine delle voci ACE in un DACL è importante.</span><span class="sxs-lookup"><span data-stu-id="f536e-124">Because the system stops checking ACEs when the requested access is explicitly granted or denied, the order of ACEs in a DACL is important.</span></span> <span data-ttu-id="f536e-125">Si noti che se l'ordine ACE è diverso nell'esempio, il sistema potrebbe avere concesso l'accesso al thread A. Per gli oggetti di sistema, il sistema operativo definisce un ordine preferenziale [di voci ACE in un DACL](order-of-aces-in-a-dacl.md).</span><span class="sxs-lookup"><span data-stu-id="f536e-125">Note that if the ACE order were different in the example, the system might have granted access to Thread A. For system objects, the operating system defines a preferred [order of ACEs in a DACL](order-of-aces-in-a-dacl.md).</span></span>

 

 
