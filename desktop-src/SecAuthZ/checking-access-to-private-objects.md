---
description: Un'applicazione server protetta deve verificare i diritti di accesso dei client prima di consentire al client di accedere a un oggetto privato protetto.
ms.assetid: dce4dd10-1d5f-40a3-8a7e-ec708d3123c7
title: Controllo dell'accesso agli oggetti privati
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c6b7b3d8b2cd933b00be0be9f1f2b077f5c7a2d2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103966762"
---
# <a name="checking-access-to-private-objects"></a><span data-ttu-id="26e9e-103">Controllo dell'accesso agli oggetti privati</span><span class="sxs-lookup"><span data-stu-id="26e9e-103">Checking Access to Private Objects</span></span>

<span data-ttu-id="26e9e-104">Un'applicazione server protetta deve verificare i diritti di accesso di un client prima di consentire al client di accedere a un oggetto privato protetto.</span><span class="sxs-lookup"><span data-stu-id="26e9e-104">A protected server application must check a client's access rights before allowing the client to access a protected private object.</span></span> <span data-ttu-id="26e9e-105">A tale scopo, il server passa un [*token di rappresentazione*](/windows/desktop/SecGloss/i-gly), un descrittore di sicurezza e un set di diritti di accesso richiesti a [**AccessCheck**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck).</span><span class="sxs-lookup"><span data-stu-id="26e9e-105">To do this, the server passes an [*impersonation token*](/windows/desktop/SecGloss/i-gly), a security descriptor, and a set of requested access rights to [**AccessCheck**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck).</span></span> <span data-ttu-id="26e9e-106">Le [*voci di controllo di accesso*](/windows/desktop/SecGloss/a-gly) (ACE) nel DACL del [*descrittore di sicurezza*](/windows/desktop/SecGloss/s-gly) specificano i diritti di accesso consentiti o negati a diversi trustee.</span><span class="sxs-lookup"><span data-stu-id="26e9e-106">The [*access control entries*](/windows/desktop/SecGloss/a-gly) (ACEs) in the [*security descriptor's*](/windows/desktop/SecGloss/s-gly) DACL specify the access rights allowed or denied to various trustees.</span></span> <span data-ttu-id="26e9e-107">La funzione **AccessCheck** confronta il trustee in ogni voce ACE con i trustee identificati nel token di rappresentazione.</span><span class="sxs-lookup"><span data-stu-id="26e9e-107">The **AccessCheck** function compares the trustee in each ACE to the trustees identified in the impersonation token.</span></span> <span data-ttu-id="26e9e-108">Per una descrizione dell'algoritmo utilizzato per concedere o negare l'accesso, vedere [come gli elenchi DACL controllano l'accesso a un oggetto](how-dacls-control-access-to-an-object.md).</span><span class="sxs-lookup"><span data-stu-id="26e9e-108">For a description of the algorithm used to grant or deny access, see [How DACLs Control Access to an Object](how-dacls-control-access-to-an-object.md).</span></span>

<span data-ttu-id="26e9e-109">La funzione [**AccessCheckAndAuditAlarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckandauditalarma) esegue un controllo di accesso simile.</span><span class="sxs-lookup"><span data-stu-id="26e9e-109">The [**AccessCheckAndAuditAlarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckandauditalarma) function performs a similar access check.</span></span> <span data-ttu-id="26e9e-110">Inoltre, genera i record di controllo nel registro eventi di sicurezza a seconda del SACL nel descrittore di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="26e9e-110">In addition, it generates audit records in the security event log depending on the SACL in the security descriptor.</span></span>

<span data-ttu-id="26e9e-111">Le funzioni [**AccessCheckByType**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheckbytype) e [**AccessCheckByTypeAndAuditAlarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckbytypeandauditalarma) sono simili a [**AccessCheck**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck) e [**AccessCheckAndAuditAlarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckandauditalarma) , tranne per il fatto che consentono di controllare l'accesso agli oggetti sottooggetti di un oggetto, ad esempio set di proprietà o proprietà.</span><span class="sxs-lookup"><span data-stu-id="26e9e-111">The [**AccessCheckByType**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheckbytype) and [**AccessCheckByTypeAndAuditAlarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckbytypeandauditalarma) functions are similar to [**AccessCheck**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck) and [**AccessCheckAndAuditAlarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckandauditalarma) except that they allow you to check access to the subobjects of an object, such as property sets or properties.</span></span> <span data-ttu-id="26e9e-112">Le funzioni [**AccessCheckByTypeResultList**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheckbytyperesultlist) e [**AccessCheckByTypeResultListAndAuditAlarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckbytyperesultlistandauditalarma) sono simili anche a **AccessCheck** , ad eccezione del fatto che forniscono i risultati del controllo dell'accesso per ogni sottooggetto in una gerarchia delle proprietà e dei set di proprietà dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="26e9e-112">The [**AccessCheckByTypeResultList**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheckbytyperesultlist) and [**AccessCheckByTypeResultListAndAuditAlarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckbytyperesultlistandauditalarma) functions are also similar to **AccessCheck** except that they provide the access check results for each subobject in a hierarchy of the object's properties and property sets.</span></span> <span data-ttu-id="26e9e-113">Queste funzioni usano la struttura dell' [**\_ \_ elenco dei tipi di oggetto**](/windows/desktop/api/Winnt/ns-winnt-object_type_list) per descrivere la gerarchia di oggetti per cui viene controllato l'accesso.</span><span class="sxs-lookup"><span data-stu-id="26e9e-113">These functions use the [**OBJECT\_TYPE\_LIST**](/windows/desktop/api/Winnt/ns-winnt-object_type_list) structure to describe the hierarchy of objects for which access is checked.</span></span> <span data-ttu-id="26e9e-114">Le funzioni che generano un messaggio di controllo usano il tipo di enumerazione [**Audit \_ Event \_ Type**](/windows/desktop/api/Winnt/ne-winnt-audit_event_type) per indicare se l'oggetto sottoposto a verifica è un oggetto del servizio directory.</span><span class="sxs-lookup"><span data-stu-id="26e9e-114">The functions that generate an audit message use the [**AUDIT\_EVENT\_TYPE**](/windows/desktop/api/Winnt/ne-winnt-audit_event_type) enumeration type to indicate whether the object being checked is a directory service object.</span></span> <span data-ttu-id="26e9e-115">Per ulteriori informazioni sulla gerarchia di un oggetto e dei relativi oggetti SubObject, vedere [ACE per controllare l'accesso alle proprietà di un oggetto](aces-to-control-access-to-an-object-s-properties.md).</span><span class="sxs-lookup"><span data-stu-id="26e9e-115">For more information about the hierarchy of an object and its subobjects, see [ACEs to Control Access to an Object's Properties](aces-to-control-access-to-an-object-s-properties.md).</span></span>

<span data-ttu-id="26e9e-116">I diritti di accesso richiesti passati alle funzioni [**AccessCheck**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck) e [**AccessCheckAndAuditAlarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckandauditalarma) non devono includere [diritti di accesso generici](generic-access-rights.md).</span><span class="sxs-lookup"><span data-stu-id="26e9e-116">The requested access rights passed to the [**AccessCheck**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck) and [**AccessCheckAndAuditAlarm**](/windows/desktop/api/Winbase/nf-winbase-accesscheckandauditalarma) functions must not include any [generic access rights](generic-access-rights.md).</span></span> <span data-ttu-id="26e9e-117">Il server può utilizzare la funzione [**MapGenericMask**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-mapgenericmask) per convertire i diritti di accesso generici nei diritti specifici e standard corrispondenti in base al mapping specificato nella struttura di [**\_ mapping generica**](/windows/desktop/api/Winnt/ns-winnt-generic_mapping) .</span><span class="sxs-lookup"><span data-stu-id="26e9e-117">The server can use the [**MapGenericMask**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-mapgenericmask) function to convert any generic access rights to the corresponding specific and standard rights according to the mapping specified in the [**GENERIC\_MAPPING**](/windows/desktop/api/Winnt/ns-winnt-generic_mapping) structure.</span></span>

<span data-ttu-id="26e9e-118">Le funzioni [**AreAllAccessesGranted**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-areallaccessesgranted) e [**AreAnyAccessesGranted**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-areanyaccessesgranted) confrontano una [*maschera di accesso*](/windows/desktop/SecGloss/a-gly) richiesta con una maschera di accesso concessa.</span><span class="sxs-lookup"><span data-stu-id="26e9e-118">The [**AreAllAccessesGranted**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-areallaccessesgranted) and [**AreAnyAccessesGranted**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-areanyaccessesgranted) functions compare a requested [*access mask*](/windows/desktop/SecGloss/a-gly) with a granted access mask.</span></span>

<span data-ttu-id="26e9e-119">Per il codice di esempio che usa la funzione [**AccessCheck**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck) , vedere [Verifica dell'accesso client con ACL in C++](verifying-client-access-with-acls-in-c--.md).</span><span class="sxs-lookup"><span data-stu-id="26e9e-119">For sample code that uses the [**AccessCheck**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-accesscheck) function, see [Verifying Client Access with ACLs in C++](verifying-client-access-with-acls-in-c--.md).</span></span>

<span data-ttu-id="26e9e-120">La funzione [**ConvertToAutoInheritPrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-converttoautoinheritprivateobjectsecurity) crea e restituisce un descrittore di sicurezza in un formato che consente la propagazione automatica di ACE ereditabili.</span><span class="sxs-lookup"><span data-stu-id="26e9e-120">The [**ConvertToAutoInheritPrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-converttoautoinheritprivateobjectsecurity) function creates and returns a security descriptor in a format that allows the automatic propagation of inheritable ACEs.</span></span> <span data-ttu-id="26e9e-121">Questo descrittore di sicurezza contiene tutte le voci ACE, ereditate e non ereditate, nel descrittore di sicurezza corrente ed è in formato [*relativo*](/windows/desktop/SecGloss/s-gly) .</span><span class="sxs-lookup"><span data-stu-id="26e9e-121">This security descriptor contains all of the ACEs, inherited and noninherited, in the current security descriptor and is in [*self-relative*](/windows/desktop/SecGloss/s-gly) format.</span></span> <span data-ttu-id="26e9e-122">La funzione **ConvertToAutoInheritPrivateObjectSecurity** determina se le voci ACE vengono ereditate o non ereditate confrontando tutte le voci ACE nel descrittore di sicurezza corrente con tutte le voci ACE nel descrittore di sicurezza padre.</span><span class="sxs-lookup"><span data-stu-id="26e9e-122">The **ConvertToAutoInheritPrivateObjectSecurity** function determines whether the ACEs are inherited or noninherited by comparing all of the ACEs in the current security descriptor with all of the ACEs in its parent security descriptor.</span></span> <span data-ttu-id="26e9e-123">Potrebbe non essere presente una corrispondenza uno-a-uno tra i due gruppi di voci ACE.</span><span class="sxs-lookup"><span data-stu-id="26e9e-123">There may not be a one-to-one correspondence between the two groups of ACEs.</span></span> <span data-ttu-id="26e9e-124">Ad esempio, una voce ACE che consente l'autorizzazione di lettura/scrittura può essere equivalente a due ACE: una voce ACE che consente l'autorizzazione di lettura e una voce ACE che consente l'autorizzazione di scrittura.</span><span class="sxs-lookup"><span data-stu-id="26e9e-124">For instance, an ACE that allows read/write permission can be equivalent to two ACEs: an ACE that allows read permission and an ACE that allows write permission.</span></span> <span data-ttu-id="26e9e-125">Non è possibile specificare un descrittore di sicurezza padre quando il descrittore di sicurezza corrente è l'elemento padre.</span><span class="sxs-lookup"><span data-stu-id="26e9e-125">A parent security descriptor may not be supplied when the current security descriptor is the parent.</span></span>

 

 
