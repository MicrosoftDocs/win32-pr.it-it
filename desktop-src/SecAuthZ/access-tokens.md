---
description: Un token di accesso è un oggetto che descrive il contesto di sicurezza di un processo o di un thread.
ms.assetid: 350159c9-2399-427a-ba44-c897a9664299
title: Token di accesso
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0993c1f5aebab797ab28e61b36f59507e4d2f1ab
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103882646"
---
# <a name="access-tokens"></a><span data-ttu-id="1a51e-103">Token di accesso</span><span class="sxs-lookup"><span data-stu-id="1a51e-103">Access Tokens</span></span>

<span data-ttu-id="1a51e-104">Un [*token di accesso*](/windows/desktop/SecGloss/a-gly) è un oggetto che descrive il [*contesto di sicurezza*](/windows/desktop/SecGloss/s-gly) di un [*processo*](/windows/desktop/SecGloss/p-gly) o di un thread.</span><span class="sxs-lookup"><span data-stu-id="1a51e-104">An [*access token*](/windows/desktop/SecGloss/a-gly) is an object that describes the [*security context*](/windows/desktop/SecGloss/s-gly) of a [*process*](/windows/desktop/SecGloss/p-gly) or thread.</span></span> <span data-ttu-id="1a51e-105">Le informazioni contenute in un token includono l'identità e i privilegi dell'account utente associato al processo o al thread.</span><span class="sxs-lookup"><span data-stu-id="1a51e-105">The information in a token includes the identity and privileges of the user account associated with the process or thread.</span></span> <span data-ttu-id="1a51e-106">Quando un utente esegue l'accesso, il sistema verifica la password dell'utente confrontandolo con le informazioni archiviate in un database di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="1a51e-106">When a user logs on, the system verifies the user's password by comparing it with information stored in a security database.</span></span> <span data-ttu-id="1a51e-107">Se la password viene [*autenticata*](/windows/desktop/SecGloss/a-gly), il sistema produce un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="1a51e-107">If the password is [*authenticated*](/windows/desktop/SecGloss/a-gly), the system produces an access token.</span></span> <span data-ttu-id="1a51e-108">Ogni processo eseguito per conto di questo utente ha una copia di questo token di accesso.</span><span class="sxs-lookup"><span data-stu-id="1a51e-108">Every process executed on behalf of this user has a copy of this access token.</span></span>

<span data-ttu-id="1a51e-109">Il sistema utilizza un token di accesso per identificare l'utente quando un thread interagisce con un [oggetto a protezione diretta](securable-objects.md) o tenta di eseguire un'attività di sistema che richiede privilegi.</span><span class="sxs-lookup"><span data-stu-id="1a51e-109">The system uses an access token to identify the user when a thread interacts with a [securable object](securable-objects.md) or tries to perform a system task that requires privileges.</span></span> <span data-ttu-id="1a51e-110">I token di accesso contengono le informazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="1a51e-110">Access tokens contain the following information:</span></span>

-   <span data-ttu-id="1a51e-111">[ID di sicurezza](security-identifiers.md) (SID) per l'account dell'utente</span><span class="sxs-lookup"><span data-stu-id="1a51e-111">The [security identifier](security-identifiers.md) (SID) for the user's account</span></span>
-   <span data-ttu-id="1a51e-112">SID per i gruppi di cui l'utente è membro</span><span class="sxs-lookup"><span data-stu-id="1a51e-112">SIDs for the groups of which the user is a member</span></span>
-   <span data-ttu-id="1a51e-113">[*SID di accesso*](/windows/desktop/SecGloss/l-gly) che identifica la [*sessione di accesso*](/windows/desktop/SecGloss/l-gly) corrente</span><span class="sxs-lookup"><span data-stu-id="1a51e-113">A [*logon SID*](/windows/desktop/SecGloss/l-gly) that identifies the current [*logon session*](/windows/desktop/SecGloss/l-gly)</span></span>
-   <span data-ttu-id="1a51e-114">Elenco dei [privilegi](privileges.md) utilizzati dall'utente o dai gruppi dell'utente</span><span class="sxs-lookup"><span data-stu-id="1a51e-114">A list of the [privileges](privileges.md) held by either the user or the user's groups</span></span>
-   <span data-ttu-id="1a51e-115">SID proprietario</span><span class="sxs-lookup"><span data-stu-id="1a51e-115">An owner SID</span></span>
-   <span data-ttu-id="1a51e-116">SID del gruppo primario</span><span class="sxs-lookup"><span data-stu-id="1a51e-116">The SID for the primary group</span></span>
-   <span data-ttu-id="1a51e-117">[DACL](access-control-lists.md) predefinito utilizzato dal sistema quando l'utente crea un oggetto a protezione diretta senza specificare un [*descrittore di sicurezza*](/windows/desktop/SecGloss/s-gly) .</span><span class="sxs-lookup"><span data-stu-id="1a51e-117">The default [DACL](access-control-lists.md) that the system uses when the user creates a securable object without specifying a [*security descriptor*](/windows/desktop/SecGloss/s-gly)</span></span>
-   <span data-ttu-id="1a51e-118">Origine del token di accesso</span><span class="sxs-lookup"><span data-stu-id="1a51e-118">The source of the access token</span></span>
-   <span data-ttu-id="1a51e-119">Indica se il token è un token [*primario*](/windows/desktop/SecGloss/p-gly) o di [rappresentazione](client-impersonation.md)</span><span class="sxs-lookup"><span data-stu-id="1a51e-119">Whether the token is a [*primary*](/windows/desktop/SecGloss/p-gly) or [impersonation](client-impersonation.md) token</span></span>
-   <span data-ttu-id="1a51e-120">Elenco facoltativo dei [SID di restrizione](restricted-tokens.md)</span><span class="sxs-lookup"><span data-stu-id="1a51e-120">An optional list of [restricting SIDs](restricted-tokens.md)</span></span>
-   <span data-ttu-id="1a51e-121">Livelli di rappresentazione correnti</span><span class="sxs-lookup"><span data-stu-id="1a51e-121">Current impersonation levels</span></span>
-   <span data-ttu-id="1a51e-122">Altre statistiche</span><span class="sxs-lookup"><span data-stu-id="1a51e-122">Other statistics</span></span>

<span data-ttu-id="1a51e-123">Ogni processo dispone di un [*token primario*](/windows/desktop/SecGloss/p-gly) che descrive il [*contesto di sicurezza*](/windows/desktop/SecGloss/s-gly) dell'account utente associato al processo.</span><span class="sxs-lookup"><span data-stu-id="1a51e-123">Every process has a [*primary token*](/windows/desktop/SecGloss/p-gly) that describes the [*security context*](/windows/desktop/SecGloss/s-gly) of the user account associated with the process.</span></span> <span data-ttu-id="1a51e-124">Per impostazione predefinita, il sistema usa il token primario quando un thread del processo interagisce con un oggetto a protezione diretta.</span><span class="sxs-lookup"><span data-stu-id="1a51e-124">By default, the system uses the primary token when a thread of the process interacts with a securable object.</span></span> <span data-ttu-id="1a51e-125">Un thread può inoltre rappresentare un account client.</span><span class="sxs-lookup"><span data-stu-id="1a51e-125">Moreover, a thread can impersonate a client account.</span></span> <span data-ttu-id="1a51e-126">La rappresentazione consente al thread di interagire con gli oggetti a protezione diretta usando il contesto di sicurezza del client.</span><span class="sxs-lookup"><span data-stu-id="1a51e-126">Impersonation allows the thread to interact with securable objects using the client's security context.</span></span> <span data-ttu-id="1a51e-127">Un thread che rappresenta un client dispone di un token primario e di un [*token di rappresentazione*](/windows/desktop/SecGloss/i-gly).</span><span class="sxs-lookup"><span data-stu-id="1a51e-127">A thread that is impersonating a client has both a primary token and an [*impersonation token*](/windows/desktop/SecGloss/i-gly).</span></span>

<span data-ttu-id="1a51e-128">Usare la funzione [**OpenProcessToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocesstoken) per recuperare un handle per il token primario di un processo.</span><span class="sxs-lookup"><span data-stu-id="1a51e-128">Use the [**OpenProcessToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocesstoken) function to retrieve a handle to the primary token of a process.</span></span> <span data-ttu-id="1a51e-129">Utilizzare la funzione [**OpenThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openthreadtoken) per recuperare un handle per il token di rappresentazione di un thread.</span><span class="sxs-lookup"><span data-stu-id="1a51e-129">Use the [**OpenThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openthreadtoken) function to retrieve a handle to the impersonation token of a thread.</span></span> <span data-ttu-id="1a51e-130">Per ulteriori informazioni, vedere [rappresentazione](client-impersonation.md).</span><span class="sxs-lookup"><span data-stu-id="1a51e-130">For more information, see [Impersonation](client-impersonation.md).</span></span>

<span data-ttu-id="1a51e-131">Per modificare i token di accesso, è possibile usare le funzioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="1a51e-131">You can use the following functions to manipulate access tokens.</span></span>



| <span data-ttu-id="1a51e-132">Funzione</span><span class="sxs-lookup"><span data-stu-id="1a51e-132">Function</span></span>                                               | <span data-ttu-id="1a51e-133">Descrizione</span><span class="sxs-lookup"><span data-stu-id="1a51e-133">Description</span></span>                                                                                                                                                            |
|--------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="1a51e-134">**AdjustTokenGroups**</span><span class="sxs-lookup"><span data-stu-id="1a51e-134">**AdjustTokenGroups**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokengroups)         | <span data-ttu-id="1a51e-135">Modifica le informazioni sul gruppo in un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="1a51e-135">Changes the group information in an access token.</span></span>                                                                                                                      |
| [<span data-ttu-id="1a51e-136">**AdjustTokenPrivileges**</span><span class="sxs-lookup"><span data-stu-id="1a51e-136">**AdjustTokenPrivileges**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokenprivileges) | <span data-ttu-id="1a51e-137">Abilita o Disabilita i privilegi in un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="1a51e-137">Enables or disables the privileges in an access token.</span></span> <span data-ttu-id="1a51e-138">Non concede nuovi privilegi o revoca quelli esistenti.</span><span class="sxs-lookup"><span data-stu-id="1a51e-138">It does not grant new privileges or revoke existing ones.</span></span>                                                       |
| [<span data-ttu-id="1a51e-139">**CheckTokenMembership**</span><span class="sxs-lookup"><span data-stu-id="1a51e-139">**CheckTokenMembership**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-checktokenmembership)   | <span data-ttu-id="1a51e-140">Determina se un SID specificato è abilitato in un token di accesso specificato.</span><span class="sxs-lookup"><span data-stu-id="1a51e-140">Determines whether a specified SID is enabled in a specified access token.</span></span>                                                                                             |
| [<span data-ttu-id="1a51e-141">**CreateRestrictedToken**</span><span class="sxs-lookup"><span data-stu-id="1a51e-141">**CreateRestrictedToken**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-createrestrictedtoken) | <span data-ttu-id="1a51e-142">Crea un nuovo token che è una versione con restrizioni di un token esistente.</span><span class="sxs-lookup"><span data-stu-id="1a51e-142">Creates a new token that is a restricted version of an existing token.</span></span> <span data-ttu-id="1a51e-143">Il token con restrizioni può avere SID disabilitati, privilegi eliminati e un elenco di SID con restrizioni.</span><span class="sxs-lookup"><span data-stu-id="1a51e-143">The restricted token can have disabled SIDs, deleted privileges, and a list of restricted SIDs.</span></span> |
| [<span data-ttu-id="1a51e-144">**DuplicateToken**</span><span class="sxs-lookup"><span data-stu-id="1a51e-144">**DuplicateToken**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-duplicatetoken)               | <span data-ttu-id="1a51e-145">Crea un nuovo token di rappresentazione che duplica un token esistente.</span><span class="sxs-lookup"><span data-stu-id="1a51e-145">Creates a new impersonation token that duplicates an existing token.</span></span>                                                                                                   |
| [<span data-ttu-id="1a51e-146">**DuplicateTokenEx**</span><span class="sxs-lookup"><span data-stu-id="1a51e-146">**DuplicateTokenEx**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-duplicatetokenex)           | <span data-ttu-id="1a51e-147">Crea un nuovo token primario o un token di rappresentazione che duplica un token esistente.</span><span class="sxs-lookup"><span data-stu-id="1a51e-147">Creates a new primary token or impersonation token that duplicates an existing token.</span></span>                                                                                  |
| [<span data-ttu-id="1a51e-148">**GetTokenInformation**</span><span class="sxs-lookup"><span data-stu-id="1a51e-148">**GetTokenInformation**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-gettokeninformation)     | <span data-ttu-id="1a51e-149">Recupera le informazioni su un token.</span><span class="sxs-lookup"><span data-stu-id="1a51e-149">Retrieves information about a token.</span></span>                                                                                                                                   |
| [<span data-ttu-id="1a51e-150">**IsTokenRestricted**</span><span class="sxs-lookup"><span data-stu-id="1a51e-150">**IsTokenRestricted**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-istokenrestricted)         | <span data-ttu-id="1a51e-151">Determina se un token ha un elenco di SID di restrizione.</span><span class="sxs-lookup"><span data-stu-id="1a51e-151">Determines whether a token has a list of restricting SIDs.</span></span>                                                                                                             |
| [<span data-ttu-id="1a51e-152">**OpenProcessToken**</span><span class="sxs-lookup"><span data-stu-id="1a51e-152">**OpenProcessToken**</span></span>](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocesstoken)           | <span data-ttu-id="1a51e-153">Recupera un handle per il token di accesso primario per un processo.</span><span class="sxs-lookup"><span data-stu-id="1a51e-153">Retrieves a handle to the primary access token for a process.</span></span>                                                                                                          |
| [<span data-ttu-id="1a51e-154">**OpenThreadToken**</span><span class="sxs-lookup"><span data-stu-id="1a51e-154">**OpenThreadToken**</span></span>](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openthreadtoken)             | <span data-ttu-id="1a51e-155">Recupera un handle per il token di accesso di rappresentazione per un thread.</span><span class="sxs-lookup"><span data-stu-id="1a51e-155">Retrieves a handle to the impersonation access token for a thread.</span></span>                                                                                                     |
| [<span data-ttu-id="1a51e-156">**SetThreadToken**</span><span class="sxs-lookup"><span data-stu-id="1a51e-156">**SetThreadToken**</span></span>](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadtoken)               | <span data-ttu-id="1a51e-157">Assegna o rimuove un token di rappresentazione per un thread.</span><span class="sxs-lookup"><span data-stu-id="1a51e-157">Assigns or removes an impersonation token for a thread.</span></span>                                                                                                                |
| [<span data-ttu-id="1a51e-158">**SetTokenInformation**</span><span class="sxs-lookup"><span data-stu-id="1a51e-158">**SetTokenInformation**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-settokeninformation)     | <span data-ttu-id="1a51e-159">Modifica il proprietario, il gruppo primario o l'elenco DACL predefinito di un token.</span><span class="sxs-lookup"><span data-stu-id="1a51e-159">Changes a token's owner, primary group, or default DACL.</span></span>                                                                                                               |



 

<span data-ttu-id="1a51e-160">Le funzioni del token di accesso utilizzano le strutture seguenti per descrivere le parti di un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="1a51e-160">The access token functions use the following structures to describe the parts of an access token.</span></span>



| <span data-ttu-id="1a51e-161">Struttura</span><span class="sxs-lookup"><span data-stu-id="1a51e-161">Structure</span></span>                                            | <span data-ttu-id="1a51e-162">Descrizione</span><span class="sxs-lookup"><span data-stu-id="1a51e-162">Description</span></span>                                                                                           |
|------------------------------------------------------|-------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="1a51e-163">**\_controllo token**</span><span class="sxs-lookup"><span data-stu-id="1a51e-163">**TOKEN\_CONTROL**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_control)              | <span data-ttu-id="1a51e-164">Informazioni che identificano un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="1a51e-164">Information that identifies an access token.</span></span>                                                          |
| [<span data-ttu-id="1a51e-165">**\_DACL predefinito del token \_**</span><span class="sxs-lookup"><span data-stu-id="1a51e-165">**TOKEN\_DEFAULT\_DACL**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_default_dacl)   | <span data-ttu-id="1a51e-166">DACL predefinito utilizzato dal sistema nei descrittori di sicurezza dei nuovi oggetti creati da un thread.</span><span class="sxs-lookup"><span data-stu-id="1a51e-166">The default DACL that the system uses in the security descriptors of new objects created by a thread.</span></span> |
| [<span data-ttu-id="1a51e-167">**gruppi di TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="1a51e-167">**TOKEN\_GROUPS**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_groups)                | <span data-ttu-id="1a51e-168">Specifica i SID e gli attributi dei SID di gruppo in un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="1a51e-168">Specifies the SIDs and attributes of the group SIDs in an access token.</span></span>                               |
| [<span data-ttu-id="1a51e-169">**proprietario del TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="1a51e-169">**TOKEN\_OWNER**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_owner)                  | <span data-ttu-id="1a51e-170">SID predefinito del proprietario per i descrittori di sicurezza dei nuovi oggetti.</span><span class="sxs-lookup"><span data-stu-id="1a51e-170">The default owner SID for the security descriptors of new objects.</span></span>                                    |
| [<span data-ttu-id="1a51e-171">**\_gruppo primario \_ token**</span><span class="sxs-lookup"><span data-stu-id="1a51e-171">**TOKEN\_PRIMARY\_GROUP**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_primary_group) | <span data-ttu-id="1a51e-172">SID del gruppo primario predefinito per i descrittori di sicurezza dei nuovi oggetti.</span><span class="sxs-lookup"><span data-stu-id="1a51e-172">The default primary group SID for the security descriptors of new objects.</span></span>                            |
| [<span data-ttu-id="1a51e-173">**privilegi di TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="1a51e-173">**TOKEN\_PRIVILEGES**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_privileges)        | <span data-ttu-id="1a51e-174">Privilegi associati a un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="1a51e-174">The privileges associated with an access token.</span></span> <span data-ttu-id="1a51e-175">Determina inoltre se i privilegi sono abilitati.</span><span class="sxs-lookup"><span data-stu-id="1a51e-175">Also determines whether the privileges are enabled.</span></span>   |
| [<span data-ttu-id="1a51e-176">**\_origine token**</span><span class="sxs-lookup"><span data-stu-id="1a51e-176">**TOKEN\_SOURCE**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_source)                | <span data-ttu-id="1a51e-177">Origine di un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="1a51e-177">The source of an access token.</span></span>                                                                        |
| [<span data-ttu-id="1a51e-178">**\_statistiche token**</span><span class="sxs-lookup"><span data-stu-id="1a51e-178">**TOKEN\_STATISTICS**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_statistics)        | <span data-ttu-id="1a51e-179">Statistiche associate a un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="1a51e-179">Statistics associated with an access token.</span></span>                                                           |
| [<span data-ttu-id="1a51e-180">**\_utente token**</span><span class="sxs-lookup"><span data-stu-id="1a51e-180">**TOKEN\_USER**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_user)                    | <span data-ttu-id="1a51e-181">SID dell'utente associato a un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="1a51e-181">The SID of the user associated with an access token.</span></span>                                                  |



 

<span data-ttu-id="1a51e-182">Le funzioni del token di accesso usano i seguenti tipi di enumerazione.</span><span class="sxs-lookup"><span data-stu-id="1a51e-182">The access token functions use the following enumeration types.</span></span>



| <span data-ttu-id="1a51e-183">Tipo di enumerazione</span><span class="sxs-lookup"><span data-stu-id="1a51e-183">Enumeration type</span></span>                                             | <span data-ttu-id="1a51e-184">Specifica</span><span class="sxs-lookup"><span data-stu-id="1a51e-184">Specifies</span></span>                                                                       |
|--------------------------------------------------------------|---------------------------------------------------------------------------------|
| [<span data-ttu-id="1a51e-185">**\_classe di informazioni sui token \_**</span><span class="sxs-lookup"><span data-stu-id="1a51e-185">**TOKEN\_INFORMATION\_CLASS**</span></span>](/windows/desktop/api/Winnt/ne-winnt-token_information_class) | <span data-ttu-id="1a51e-186">Identifica il tipo di informazioni da impostare o recuperare da un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="1a51e-186">Identifies the type of information being set or retrieved from an access token.</span></span> |
| [<span data-ttu-id="1a51e-187">**tipo di TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="1a51e-187">**TOKEN\_TYPE**</span></span>](/windows/desktop/api/Winnt/ne-winnt-token_type)                            | <span data-ttu-id="1a51e-188">Identifica un token di accesso come token primario o di rappresentazione.</span><span class="sxs-lookup"><span data-stu-id="1a51e-188">Identifies an access token as a primary or impersonation token.</span></span>                 |



 

 

 
