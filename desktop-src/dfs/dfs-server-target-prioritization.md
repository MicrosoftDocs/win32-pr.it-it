---
title: Assegnazione di priorità di destinazione server DFS
description: La definizione delle priorità di destinazione server DFS è una funzionalità disponibile in Microsoft Windows Server 2003 con Service Pack 1 (SP1) e sistemi operativi successivi.
ms.assetid: 0aacebf7-49cc-4287-a5c4-0d25a416d227
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3e784a540a67f624ca5b8075009cd862c6063427
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104225772"
---
# <a name="dfs-server-target-prioritization"></a><span data-ttu-id="d2969-103">Assegnazione di priorità di destinazione server DFS</span><span class="sxs-lookup"><span data-stu-id="d2969-103">DFS Server Target Prioritization</span></span>

<span data-ttu-id="d2969-104">La definizione delle priorità di destinazione server DFS è una funzionalità disponibile in Microsoft Windows Server 2003 con Service Pack 1 (SP1) e sistemi operativi successivi.</span><span class="sxs-lookup"><span data-stu-id="d2969-104">DFS Server Target Prioritization is a feature available in Microsoft Windows Server 2003 with Service Pack 1 (SP1) and later operating systems.</span></span> <span data-ttu-id="d2969-105">Questa funzionalità consente ai server DFS di sfruttare i vantaggi offerti da Active Directory informazioni sui costi del sito per assegnare la priorità alle destinazioni nei riferimenti client.</span><span class="sxs-lookup"><span data-stu-id="d2969-105">This feature enables DFS servers to take advantage of available Active Directory site-cost information to prioritize the targets in client referrals.</span></span>

<span data-ttu-id="d2969-106">Prima di Windows Server 2003 con SP1, le destinazioni venivano raggruppate in due set: un gruppo per contenere tutte le destinazioni nello stesso sito del client. e un altro gruppo per tutte le altre destinazioni.</span><span class="sxs-lookup"><span data-stu-id="d2969-106">Before Windows Server 2003 with SP1, targets were grouped into two sets: one group for containing all targets in the same site as the client; and another group for all other targets.</span></span> <span data-ttu-id="d2969-107">Le destinazioni che condividono lo stesso sito del client sono denominate "in-site" e se il costo del sito è abilitato, viene assegnato un valore di costo specifico rispetto al sito globale, con costi di sito inferiori preferiti rispetto a quelli più alti.</span><span class="sxs-lookup"><span data-stu-id="d2969-107">Those targets sharing the same site as the client are called "in-site", and if site-costing is enabled, they are assigned a specific cost value relative to the site overall, with lower site costs preferred over higher ones.</span></span>

<span data-ttu-id="d2969-108">Con la disponibilità di questi dati di costo del sito, le destinazioni server possono essere classificate in ordine di priorità per strategie di failover del server DFS più efficaci.</span><span class="sxs-lookup"><span data-stu-id="d2969-108">With the availability of this site-costing data, server targets can be prioritized for more effective DFS server failover strategies.</span></span> <span data-ttu-id="d2969-109">In passato, questo livello di dettaglio granulare non era disponibile e gli amministratori dovevano ricorrere a mezzi artificiali (come i siti fittizi in AD) per supportare requisiti ancora semplici, come la designazione di server specifici come server "backup" o "secondario" nel caso in cui un server DFS "primario" abbia esito negativo.</span><span class="sxs-lookup"><span data-stu-id="d2969-109">In the past, this granular level of detail was not available, and administrators had to resort to artificial means (such as dummy sites in AD) to support even simple requirements like the designation of specific servers as a "backup" or "secondary" server in the case where a "primary" DFS server fails.</span></span> <span data-ttu-id="d2969-110">Ora, con i dettagli aggiuntivi forniti dal costo del sito, sono possibili strategie di failover a più livelli.</span><span class="sxs-lookup"><span data-stu-id="d2969-110">Now, with the additional detail provided by site-costing, multi-level failover strategies are possible.</span></span>

<span data-ttu-id="d2969-111">Nella discussione seguente si presuppone che i costi del sito siano abilitati.</span><span class="sxs-lookup"><span data-stu-id="d2969-111">The following discussion assumes that site-costing is enabled.</span></span>

## <a name="target-prioritization"></a><span data-ttu-id="d2969-112">Priorità di destinazione</span><span class="sxs-lookup"><span data-stu-id="d2969-112">Target Prioritization</span></span>

<span data-ttu-id="d2969-113">La priorità di destinazione è un ordinamento specifico da una prospettiva amministrativa, classificazione e classificazione dei server nel sito in termini di preferenza esplicita in base al costo del sito da parte di un client DFS.</span><span class="sxs-lookup"><span data-stu-id="d2969-113">Target priority is a specific ordering from an administrative perspective, classifying and ranking in-site servers in terms of explicit preference based on their site cost from a DFS client.</span></span> <span data-ttu-id="d2969-114">La priorità globale è indipendente dal costo del sito.</span><span class="sxs-lookup"><span data-stu-id="d2969-114">Global priority is independent of the site-cost.</span></span> <span data-ttu-id="d2969-115">Si noti che le classi di priorità globali non indicano necessariamente gli obiettivi più ottimali dal punto di vista di un client DFS, ma riflettono invece l'importanza o la mancanza di importanza di destinazioni specifiche dal punto di vista dell'amministratore del sito.</span><span class="sxs-lookup"><span data-stu-id="d2969-115">Note that global priority classes do not necessarily indicate the most optimal targets from a DFS client's perspective, but instead reflect the importance, or lack of importance, of specific targets from a site administrator's perspective.</span></span>

<span data-ttu-id="d2969-116">La priorità di destinazione server è divisa in due categorie di valori: classe di priorità e rango di priorità.</span><span class="sxs-lookup"><span data-stu-id="d2969-116">Server target priority is divided into two value categories: priority class and priority rank.</span></span> <span data-ttu-id="d2969-117">Le classi di priorità sono divise in due livelli: locale e globale.</span><span class="sxs-lookup"><span data-stu-id="d2969-117">Priority classes are divided into two levels: local and global.</span></span> <span data-ttu-id="d2969-118">All'interno di queste classi si verifica un ordinamento approssimativo delle destinazioni in base ai costi del sito, raggruppati come alta, normale e bassa priorità.</span><span class="sxs-lookup"><span data-stu-id="d2969-118">Within these classes there is a rough ordering of targets based on site cost, grouped as high, normal, and low priority.</span></span> <span data-ttu-id="d2969-119">Il risultato è cinque classi di priorità, in ordine dalla priorità più alta a quella più bassa, come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="d2969-119">The result is five priority classes, in order from highest to lowest priority as follows:</span></span>

- <span data-ttu-id="d2969-120">Priorità alta globale</span><span class="sxs-lookup"><span data-stu-id="d2969-120">Global high priority</span></span>
- <span data-ttu-id="d2969-121">Priorità elevata ai costi del sito</span><span class="sxs-lookup"><span data-stu-id="d2969-121">Site-cost high priority</span></span>
- <span data-ttu-id="d2969-122">Priorità normale dei costi del sito</span><span class="sxs-lookup"><span data-stu-id="d2969-122">Site-cost normal priority</span></span>
- <span data-ttu-id="d2969-123">Costo-priorità bassa del sito</span><span class="sxs-lookup"><span data-stu-id="d2969-123">Site-cost low priority</span></span>
- <span data-ttu-id="d2969-124">Priorità bassa globale</span><span class="sxs-lookup"><span data-stu-id="d2969-124">Global low priority</span></span>

<span data-ttu-id="d2969-125">Le classi costo sito possono essere considerate come suddivisioni di "priorità normale globale".</span><span class="sxs-lookup"><span data-stu-id="d2969-125">The site-cost classes can be considered as subdivisions of "global normal priority".</span></span> <span data-ttu-id="d2969-126">Priority Rank è una semplice classificazione di interi basata sui valori ordinali: 0, 1, 2 e successive, con 0 come valore più alto e tutti i valori successivi che indicano un rango decrescente.</span><span class="sxs-lookup"><span data-stu-id="d2969-126">Priority rank is a simple integer ranking based on ordinal values: 0, 1, 2, and onward, with 0 being the highest value and all subsequent values indicating decreasing rank.</span></span>

<span data-ttu-id="d2969-127">Le priorità globali alta e bassa non considerano i valori di costo del sito.</span><span class="sxs-lookup"><span data-stu-id="d2969-127">The global high and low priorities do not consider site-cost values.</span></span> <span data-ttu-id="d2969-128">Le destinazioni con una preferenza di ricezione a priorità alta globale su tutte le altre destinazioni e le destinazioni con priorità bassa globale ricevono la preferenza minima.</span><span class="sxs-lookup"><span data-stu-id="d2969-128">Targets with a global high priority receive preference over all other targets, and targets with a global low priority receive the least preference.</span></span>

<span data-ttu-id="d2969-129">Per ordinare un riferimento, il processo completo prevede i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="d2969-129">In ordering a referral, the complete process has the following steps:</span></span>

1. <span data-ttu-id="d2969-130">Vengono identificati i set di destinazioni globali alta e bassa, insieme alle altre destinazioni "globali normali".</span><span class="sxs-lookup"><span data-stu-id="d2969-130">The sets of global high and low targets are identified, along with the remaining "global normal" targets.</span></span>
2. <span data-ttu-id="d2969-131">Se l'opzione "insite" è impostata, tutte le destinazioni esterne al sito del client vengono rimosse.</span><span class="sxs-lookup"><span data-stu-id="d2969-131">If the "INSITE" option is set, all targets outside of the client's site are removed.</span></span> <span data-ttu-id="d2969-132">L'opzione "insite" non viene applicata ai set globali massimi e con priorità bassa.</span><span class="sxs-lookup"><span data-stu-id="d2969-132">The "INSITE" option is not applied to the global high and low priority sets.</span></span>
3. <span data-ttu-id="d2969-133">All'interno di ognuno di questi tre set, le destinazioni vengono ordinate usando il meccanismo di costo del sito Active Directory, usando il costo locale o completo del sito.</span><span class="sxs-lookup"><span data-stu-id="d2969-133">Within each of these three sets, the targets are ordered using the AD site-cost mechanism, using either local or full site costing.</span></span> <span data-ttu-id="d2969-134">Il risultato è costituito da set di destinazioni di uguale costo del sito.</span><span class="sxs-lookup"><span data-stu-id="d2969-134">The result is sets of targets of equal site cost.</span></span>
4. <span data-ttu-id="d2969-135">All'interno dei set di destinazioni "normali globali" di uguale costo del sito, alle destinazioni viene assegnata una classe di priorità dalle classificazioni con priorità alta, normale e a basso costo del sito.</span><span class="sxs-lookup"><span data-stu-id="d2969-135">Within the sets of "global normal" targets of equal site cost, targets are assigned a priority class from the site-cost high, normal, and low priority rankings.</span></span>
5. <span data-ttu-id="d2969-136">All'interno dei set di destinazioni di EQUAL site cost e Priority Class, le destinazioni sono ora ordinate in base alla priorità, con 0 come rango più alto.</span><span class="sxs-lookup"><span data-stu-id="d2969-136">Within the sets of targets of equal site cost and priority class, targets are now ordered by priority rank, with 0 being the highest rank.</span></span>
6. <span data-ttu-id="d2969-137">All'interno dei set di destinazioni di EQUAL site cost, Priority Class e Priority Rank, le destinazioni vengono mescolate in modo casuale per il bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="d2969-137">Within the sets of targets of equal site cost, priority class, and priority rank, targets are randomly shuffled for load balancing.</span></span>

<span data-ttu-id="d2969-138">Graficamente, un set di destinazioni viene ordinato come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="d2969-138">Graphically, a set of targets are ordered as seen below:</span></span>

- <span data-ttu-id="d2969-139">destinazioni della classe con priorità alta globale</span><span class="sxs-lookup"><span data-stu-id="d2969-139">global high priority class targets</span></span> 
- <span data-ttu-id="d2969-140">destinazioni della classe con priorità alta dei costi del sito con costo del sito = 0</span><span class="sxs-lookup"><span data-stu-id="d2969-140">site-cost high priority class targets with site cost = 0</span></span>
- <span data-ttu-id="d2969-141">normale con costo del sito = 0</span><span class="sxs-lookup"><span data-stu-id="d2969-141">normal with site cost = 0</span></span>
- <span data-ttu-id="d2969-142">basso con costo del sito = 0</span><span class="sxs-lookup"><span data-stu-id="d2969-142">low with site cost = 0</span></span>
- <span data-ttu-id="d2969-143">destinazioni della classe con priorità alta dei costi del sito con costo del sito = 1</span><span class="sxs-lookup"><span data-stu-id="d2969-143">site-cost high priority class targets with site cost = 1</span></span>
- <span data-ttu-id="d2969-144">normale con costo del sito = 1</span><span class="sxs-lookup"><span data-stu-id="d2969-144">normal with site cost = 1</span></span>
- <span data-ttu-id="d2969-145">basso con costo del sito = 1</span><span class="sxs-lookup"><span data-stu-id="d2969-145">low with site cost = 1</span></span>
- <span data-ttu-id="d2969-146">E così via</span><span class="sxs-lookup"><span data-stu-id="d2969-146">and so on</span></span>
- <span data-ttu-id="d2969-147">destinazioni di classi con priorità bassa globali</span><span class="sxs-lookup"><span data-stu-id="d2969-147">global low priority class targets</span></span>

<span data-ttu-id="d2969-148">All'interno di ognuno di questi set, le destinazioni vengono ordinate in base alla priorità.</span><span class="sxs-lookup"><span data-stu-id="d2969-148">Within each of these sets, targets are sorted according to priority rank.</span></span> <span data-ttu-id="d2969-149">Il rango più alto è zero, con ogni valore integer successivo (1, 2 e così via) che indica un rango sempre più basso.</span><span class="sxs-lookup"><span data-stu-id="d2969-149">The highest rank is zero, with each subsequent integer value (1, 2, and so on) indicating an increasingly lower rank.</span></span>

<span data-ttu-id="d2969-150">La priorità di destinazione è impostata su una destinazione specifica di un collegamento (o radice) in uno spazio dei nomi DFS.</span><span class="sxs-lookup"><span data-stu-id="d2969-150">Target priority is set on a specific target of a link (or root) in a DFS namespace.</span></span> <span data-ttu-id="d2969-151">La priorità di una destinazione per un collegamento non influisce sull'ordinamento di altri collegamenti se lo stesso percorso di destinazione viene usato più volte.</span><span class="sxs-lookup"><span data-stu-id="d2969-151">A target's priority for one link does not influence the ordering of other links if that same target path is used multiple times.</span></span> <span data-ttu-id="d2969-152">Se, ad esempio, due collegamenti hanno \\ \\ \\ Share1 server come destinazione, la priorità del \\ \\ server \\ Share1 viene impostata separatamente per entrambi i collegamenti.</span><span class="sxs-lookup"><span data-stu-id="d2969-152">For example, if two links have \\\\server\\share1 as a target, the priority of \\\\server\\share1 is set separately for both links.</span></span>

<span data-ttu-id="d2969-153">La priorità predefinita per tutti i collegamenti è la priorità normale del costo del sito con un rango pari a 0.</span><span class="sxs-lookup"><span data-stu-id="d2969-153">The default priority for all links is the site-cost normal priority with a rank of 0.</span></span> <span data-ttu-id="d2969-154">La priorità di destinazione non influisce sull'ordinamento dei riferimenti, a meno che non venga utilizzato e tutti i collegamenti esistenti vengano ordinati al momento della ricezione.</span><span class="sxs-lookup"><span data-stu-id="d2969-154">Target priority does not affect the ordering of referrals unless it is used, and all existing links are ordered as they are received.</span></span>

<span data-ttu-id="d2969-155">La risposta di riferimento da un server DFS è costituita da set di destinazione ordinati come indicato in precedenza, con ogni set di destinazioni non globali contenente le destinazioni dello stesso costo del sito, classe di priorità e rango di priorità.</span><span class="sxs-lookup"><span data-stu-id="d2969-155">The referral response from a DFS server consists of target sets ordered as indicated above, with each non-global target set containing targets of the same site cost, priority class, and priority rank.</span></span> <span data-ttu-id="d2969-156">Le destinazioni all'interno di ogni set vengono ordinate in modo casuale.</span><span class="sxs-lookup"><span data-stu-id="d2969-156">Targets within each set are ordered randomly.</span></span> <span data-ttu-id="d2969-157">I client DFS che ricevono il riferimento iniziano con la prima destinazione del primo set e continuano l'elenco fino a quando non viene trovata una destinazione disponibile per un determinato collegamento o radice DFS.</span><span class="sxs-lookup"><span data-stu-id="d2969-157">DFS clients that receive the referral start with the first target of the first set, and continue through the list until an available target for a given DFS root or link is found.</span></span>

<span data-ttu-id="d2969-158">Per l'implementazione dell'API specifica di questa funzionalità, vedere gli argomenti di riferimento seguenti:</span><span class="sxs-lookup"><span data-stu-id="d2969-158">For the specific API implementation of this feature, please see the following reference topics:</span></span>

<span data-ttu-id="d2969-159">[**DFS_INFO_6**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_info_6) 
 [**DFS_INFO_104**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_info_104) 
 [**DFS_INFO_106**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_info_106) 
 [**DFS_TARGET_PRIORITY**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_target_priority) 
 [**DFS_TARGET_PRIORITY_CLASS**](/windows/win32/api/lmdfs/ne-lmdfs-dfs_target_priority_class~r1)</span><span class="sxs-lookup"><span data-stu-id="d2969-159">[**DFS_INFO_6**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_info_6)
[**DFS_INFO_104**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_info_104)
[**DFS_INFO_106**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_info_106)
[**DFS_TARGET_PRIORITY**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_target_priority)
[**DFS_TARGET_PRIORITY_CLASS**](/windows/win32/api/lmdfs/ne-lmdfs-dfs_target_priority_class~r1)</span></span>
