---
title: Panoramica della modalità UILess
description: Panoramica della modalità UILess
ms.assetid: cc0e4936-eab1-452d-9ba1-188401918e99
keywords:
- Framework servizi di testo (TSF), UILessMode
- TSF (Framework dei servizi di testo), UILessMode
- Applicazioni abilitate per TSF, UILessMode
- UILessMode
- Framework servizi di testo (TSF), UIElement elenco candidati
- TSF (Framework dei servizi di testo), UIElement dell'elenco dei candidati
- Applicazioni abilitate per TSF, UIElement elenco candidati
- UIElement elenco candidati
- Framework servizi di testo (TSF), suggerimento UIElement
- TSF (Text Services Framework), suggerimento UIElement
- Applicazioni abilitate per TSF, suggerimento UIElement
- Suggerimento UIElement
- Framework di servizi di testo (TSF), elementi dell'interfaccia utente predefiniti
- TSF (Text Services Framework), elementi dell'interfaccia utente predefiniti
- Applicazioni abilitate per TSF, elementi dell'interfaccia utente predefiniti
- elementi dell'interfaccia utente predefiniti
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b7354a88fb28fd0d6bf5f4180ac23359a2117fe7
ms.sourcegitcommit: ee06501cc29132927ade9813e0888aaa4decc487
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/28/2021
ms.locfileid: "104561846"
---
# <a name="uiless-mode-overview"></a><span data-ttu-id="37325-119">Panoramica della modalità UILess</span><span class="sxs-lookup"><span data-stu-id="37325-119">UILess Mode Overview</span></span>

## <a name="how-to-create-uilessmode"></a><span data-ttu-id="37325-120">Come creare UILessMode</span><span class="sxs-lookup"><span data-stu-id="37325-120">How to create UILessMode</span></span>

<span data-ttu-id="37325-121">**Creazione di un thread senza interfaccia utente:** L'applicazione può rendere un'interfaccia utente meno thread di [**ITfThreadMgrEx:: ActivateEx**](/windows/desktop/api/Msctf/nf-msctf-itfthreadmgrex-activateex) con ITF \_ AE \_ UIELEMENTENABLEDONLY.</span><span class="sxs-lookup"><span data-stu-id="37325-121">**Making UI-less Thread:** The application can make a UI Less Thread by [**ITfThreadMgrEx::ActivateEx**](/windows/desktop/api/Msctf/nf-msctf-itfthreadmgrex-activateex) with ITF\_AE\_UIELEMENTENABLEDONLY.</span></span> <span data-ttu-id="37325-122">Quando ThreadMgr viene attivato con questo flag, solo i suggerimenti che possono controllare l'elemento dell'interfaccia utente vengono attivati sul thread.</span><span class="sxs-lookup"><span data-stu-id="37325-122">When ThreadMgr is activated with this flag, only TIPs that can control its UI element are activated on the thread.</span></span> <span data-ttu-id="37325-123">L'applicazione deve implementare l'interfaccia [**ITfUIElementSink**](/windows/desktop/api/Msctf/nn-msctf-itfuielementsink) e consigliare l'interfaccia in gestione thread.</span><span class="sxs-lookup"><span data-stu-id="37325-123">The application needs to implement [**ITfUIElementSink**](/windows/desktop/api/Msctf/nn-msctf-itfuielementsink) interface and advise the interface into thread manager.</span></span> <span data-ttu-id="37325-124">[**ITfUIElementSink:: BeginUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementsink-beginuielement) viene chiamato quando Tip Mostra la relativa interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="37325-124">[**ITfUIElementSink::BeginUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementsink-beginuielement) is called when TIP shows its UI.</span></span> <span data-ttu-id="37325-125">L'applicazione può restituire **true** in pbShow param per consentire a tip di visualizzare l'interfaccia utente originale del suggerimento quando l'applicazione non vuole creare un oggetto.</span><span class="sxs-lookup"><span data-stu-id="37325-125">The application can return **TRUE** in pbShow param to allow TIP to show TIP's original UI when the application does not want to draw.</span></span> <span data-ttu-id="37325-126">Se l'applicazione non consente l'interfaccia utente di TIP, può restituire **false** in pbShow (vedere i diagrammi seguenti).</span><span class="sxs-lookup"><span data-stu-id="37325-126">If the application does not allow TIP's UI, it can return **FALSE** in pbShow (see diagrams below).</span></span> <span data-ttu-id="37325-127">L'applicazione può creare l'interfaccia utente autonomamente ottenendo alcune informazioni dal parametro di *pelement* .</span><span class="sxs-lookup"><span data-stu-id="37325-127">The application can draw the UI by itself by getting some information from the *pElement* param.</span></span> <span data-ttu-id="37325-128">Potrebbe trattarsi dell'elenco dei candidati, dell'elemento della barra della lingua o dell'interfaccia utente personalizzata del suggerimento.</span><span class="sxs-lookup"><span data-stu-id="37325-128">It could be the candidate list, the language bar item, or the custom UI of TIP.</span></span> <span data-ttu-id="37325-129">L'applicazione può essere in grado di comprendere il tipo di interfaccia utente dell'interfaccia [**ITfUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfuielement) di QIing.</span><span class="sxs-lookup"><span data-stu-id="37325-129">The application can know the kind of UI by QIing [**ITfUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfuielement) interface.</span></span> <span data-ttu-id="37325-130">Quando l'interfaccia utente viene modificata, viene chiamato [**ITfUIElementSink:: UpdateUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementsink-updateuielement) .</span><span class="sxs-lookup"><span data-stu-id="37325-130">When the UI is changed, [**ITfUIElementSink::UpdateUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementsink-updateuielement) is called.</span></span> <span data-ttu-id="37325-131">L'applicazione può confrontare il GUID di pElement->GetGuid () per verificare se l'elemento è attualmente disegnato dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="37325-131">The application can compare the GUID from pElement->GetGUID() to know if the element is currently drawn by the application.</span></span>

<span data-ttu-id="37325-132">**Creazione di un suggerimento meno compatibile con l'interfaccia utente:** Il suggerimento deve supportare la modalità meno interfaccia utente se vuole eseguire nell'applicazione che non vuole consentire l'interfaccia utente di TIP, ad esempio applicazioni di gioco o applicazioni a schermo intero.</span><span class="sxs-lookup"><span data-stu-id="37325-132">**Making UI-less Aware TIP:** TIP should support UI less mode if it wants to run under the application that does not want to allow TIP's UI such as game application or full screen applications.</span></span> <span data-ttu-id="37325-133">Per essere meno compatibile con l'interfaccia utente, TIP deve implementare l'interfaccia [**ITfTextInputProcessorEx**](/windows/desktop/api/Msctf/nn-msctf-itftextinputprocessorex) .</span><span class="sxs-lookup"><span data-stu-id="37325-133">To be UI less aware, TIP needs to implement [**ITfTextInputProcessorEx**](/windows/desktop/api/Msctf/nn-msctf-itftextinputprocessorex) interface.</span></span> <span data-ttu-id="37325-134">Se questa interfaccia non viene implementata, TIP non verrà attivato nel thread della modalità less UI.</span><span class="sxs-lookup"><span data-stu-id="37325-134">If this interface is not implemented, TIP will not be activated under the UI less mode thread.</span></span> <span data-ttu-id="37325-135">Inoltre, TIP deve chiamare [**ITFUIElementMgr:: BeginUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementmgr-beginuielement) prima di visualizzare un'interfaccia utente visibile sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="37325-135">In addition, TIP must call [**ITFUIElementMgr::BeginUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementmgr-beginuielement) before it shows a visible UI to the screen.</span></span> <span data-ttu-id="37325-136">Questo metodo effettua una chiamata a [**ITfUIElementSink**](/windows/desktop/api/Msctf/nn-msctf-itfuielementsink) per notificare l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="37325-136">This method makes a call to [**ITfUIElementSink**](/windows/desktop/api/Msctf/nn-msctf-itfuielementsink) to notify the application.</span></span> <span data-ttu-id="37325-137">E l'applicazione deciderà se è possibile visualizzarla o meno.</span><span class="sxs-lookup"><span data-stu-id="37325-137">And the application will decide if it can be shown or not.</span></span> <span data-ttu-id="37325-138">Quando TIP chiama BeginUIElement (), TIP deve avere l'interfaccia [**ITfUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfuielement) per l'interfaccia utente corrispondente.</span><span class="sxs-lookup"><span data-stu-id="37325-138">When TIP calls BeginUIElement(), TIP needs to have the [**ITfUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfuielement) interface for the corresponding UI.</span></span> <span data-ttu-id="37325-139">L'applicazione condurrà a QI l'interfaccia per ottenere un'altra interfaccia specifica dell'interfaccia utente per recuperare altre informazioni per creare l'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="37325-139">The application will QI the interface to get another UI specific interface to retrieve more information to draw the UI.</span></span> <span data-ttu-id="37325-140">Il sistema predefinisce [**ITfCandidateListUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfcandidatelistuielement) e [**ITfReadingInformationUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfreadinginformationuielement) per tip.</span><span class="sxs-lookup"><span data-stu-id="37325-140">System predefines [**ITfCandidateListUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfcandidatelistuielement) and [**ITfReadingInformationUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfreadinginformationuielement) for TIP.</span></span> <span data-ttu-id="37325-141">Quando il suggerimento desidera visualizzare l'elenco dei candidati nel thread della modalità UI less, TIP deve creare un'istanza dell'interfaccia **ITfCandidateListUIElement** e chiamare **ITFUIElementMgr:: BeginUIElement**.</span><span class="sxs-lookup"><span data-stu-id="37325-141">When TIP wants to show the candidate list under UI less mode thread, TIP must create an instance of the **ITfCandidateListUIElement** interface and call **ITFUIElementMgr::BeginUIElement**.</span></span> <span data-ttu-id="37325-142">Quando viene chiamato [**ITfTextInputProcessorEx:: ActivateEx**](/windows/desktop/api/Msctf/nf-msctf-itftextinputprocessorex-activateex) , tip è già noto che il thread è l'interfaccia utente, in modo da poter eliminare l'interfaccia utente personalizzata aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="37325-142">When [**ITfTextInputProcessorEx::ActivateEx**](/windows/desktop/api/Msctf/nf-msctf-itftextinputprocessorex-activateex) is called, TIP already know the thread is UI less more so it can eliminate the extra custom UI.</span></span> <span data-ttu-id="37325-143">Tuttavia, ovviamente, può implementare una propria interfaccia che può essere QIed da e provare a effettuare una notifica.</span><span class="sxs-lookup"><span data-stu-id="37325-143">However, of course, it can implement its own interface that can be QIed from and try to make a notification.</span></span> <span data-ttu-id="37325-144">In questo modo, suggerimento e **ITfUIElement** di applicazione possono avere una negoziazione per l'interfaccia utente personalizzata del suggerimento.</span><span class="sxs-lookup"><span data-stu-id="37325-144">Thus TIP and the appli **ITfUIElement** cation can have a negotiation for the TIP custom UI.</span></span>

## <a name="uielement-supporting-tip"></a><span data-ttu-id="37325-145">Suggerimento di supporto UIElement</span><span class="sxs-lookup"><span data-stu-id="37325-145">UIElement Supporting TIP</span></span>

<span data-ttu-id="37325-146">Il suggerimento che supporta UIElement deve essere categorizzato in base al GUID \_ TFCAT \_ TIPCAP \_ UIELEMENTENABLED.</span><span class="sxs-lookup"><span data-stu-id="37325-146">The TIP that supports the UIElement must be categorized by GUID\_TFCAT\_TIPCAP\_UIELEMENTENABLED.</span></span> <span data-ttu-id="37325-147">Il suggerimento in GUID \_ TFCAT \_ TIPCAP \_ UIELEMENTENABLED deve usare [**ITfUIElementMgr**](/windows/desktop/api/Msctf/nn-msctf-itfuielementmgr) per visualizzare qualsiasi interfaccia utente, in modo che l'applicazione possa controllare la visibilità dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="37325-147">The TIP in GUID\_TFCAT\_TIPCAP\_UIELEMENTENABLED must use [**ITfUIElementMgr**](/windows/desktop/api/Msctf/nn-msctf-itfuielementmgr) to show any UI so the application can control the visibility of the UI.</span></span>

<span data-ttu-id="37325-148">**Mostra/Nascondi stato di UIElement:** Mostra/Nascondi lo stato indicato dal metodo [**ITfUIElement:: Show**](/windows/desktop/api/Msctf/nf-msctf-itfuielement-show) o [**ITfUIElement::**](/windows/desktop/api/Msctf/nf-msctf-itfuielement-isshown) IsVisible è lo stato visibile effettivo.</span><span class="sxs-lookup"><span data-stu-id="37325-148">**Show/Hide status of UIElement:** Show/Hide status that is indicated by [**ITfUIElement::Show**](/windows/desktop/api/Msctf/nf-msctf-itfuielement-show) or [**ITfUIElement::IsShown**](/windows/desktop/api/Msctf/nf-msctf-itfuielement-isshown) method is the actual visible status.</span></span> <span data-ttu-id="37325-149">Non è correlato alla disponibilità di UIElement.</span><span class="sxs-lookup"><span data-stu-id="37325-149">It is not related to the availability of UIElement.</span></span> <span data-ttu-id="37325-150">UIElement deve essere sempre disponibile quando lo stato di visualizzazione è esistente.</span><span class="sxs-lookup"><span data-stu-id="37325-150">UIElement should be always available when the show status exists.</span></span> <span data-ttu-id="37325-151">Lo stato di visualizzazione è controllabile dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="37325-151">The show status is controllable from the application.</span></span> <span data-ttu-id="37325-152">L'applicazione può passare improvvisamente alla modalità UILess e iniziare a disegnare un'interfaccia utente autonomamente, chiamando **ITfUIElement:: Show** con **false** per nascondere tutta l'interfaccia utente del suggerimento.</span><span class="sxs-lookup"><span data-stu-id="37325-152">The application may suddenly move into UILess mode and start drawing some UI by itself, by calling **ITfUIElement::Show** with **FALSE** to hide all the UI of TIP.</span></span> <span data-ttu-id="37325-153">Quindi, suggerimento può assumere una di alcune opzioni.</span><span class="sxs-lookup"><span data-stu-id="37325-153">Then TIP can take one of some options.</span></span> <span data-ttu-id="37325-154">1) suggerimento può spostare l'elemento UIElement nello stato Hide e avviare la generazione di UpdateUIElement.</span><span class="sxs-lookup"><span data-stu-id="37325-154">1) TIP can move the UIElement to the Hide status and start generating UpdateUIElement.</span></span> <span data-ttu-id="37325-155">2) il suggerimento può completare UIElement poiché l'elemento dell'interfaccia utente non supporta lo stato Hide e Tip chiama EndUIElement () per terminarlo.</span><span class="sxs-lookup"><span data-stu-id="37325-155">2) TIP can finish UIElement since the UI element does not support Hide status and Tip calls EndUIElement() to finish it.</span></span>

## <a name="predefined-ui-elements"></a><span data-ttu-id="37325-156">Elementi dell'interfaccia utente predefiniti</span><span class="sxs-lookup"><span data-stu-id="37325-156">Predefined UI Elements</span></span>

<span data-ttu-id="37325-157">**Elenco candidati:** L'elenco dei candidati è uno degli elementi principali dell'interfaccia utente per l'input EA.</span><span class="sxs-lookup"><span data-stu-id="37325-157">**The candidate list:** The candidate list is one of the major UI elements for EA input.</span></span> <span data-ttu-id="37325-158">Questo elemento dell'interfaccia utente fornisce l'elenco dei candidati e il numero corrispondente di stringhe candidate per il disegno.</span><span class="sxs-lookup"><span data-stu-id="37325-158">This UI Element provides the candidate list and corresponding number of the candidate strings for drawing.</span></span>

<span data-ttu-id="37325-159">**Finestra informazioni di lettura** La finestra informazioni di lettura è comune per gli input da tastiera cinesi.</span><span class="sxs-lookup"><span data-stu-id="37325-159">**The reading information window** The reading information window is common for Chinese Keyboard Input.</span></span> <span data-ttu-id="37325-160">Contiene la fase che non può essere inserita nel documento come stringa di composizione.</span><span class="sxs-lookup"><span data-stu-id="37325-160">It has the stage that cannot be inserted into the document as the composition string.</span></span> <span data-ttu-id="37325-161">Un processore di input cinese apre una piccola finestra di informazioni di lettura che mostra le informazioni di lettura, fonetica o di tipizzazione.</span><span class="sxs-lookup"><span data-stu-id="37325-161">Some Chinese Input Processor opens a small reading information window that shows the reading, phonetic or typing information.</span></span>

## <a name="the-flow-chart-of-uilessmode"></a><span data-ttu-id="37325-162">Il diagramma di flusso di UILessMode</span><span class="sxs-lookup"><span data-stu-id="37325-162">The flow chart of UILessMode</span></span>

![Diagramma che mostra il diagramma di flusso di U I LessMode.](images/tsf-uilessmode-ovw1.gif)

<span data-ttu-id="37325-164">Quando il suggerimento riceve **true** in \* pbShown by [**ITfUIElementMgr:: BeginUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementmgr-beginuielement), il suggerimento non deve chiamare UpdateUIElement per l'oggetto UIElement.</span><span class="sxs-lookup"><span data-stu-id="37325-164">After the TIP receives **TRUE** in \*pbShown by [**ITfUIElementMgr::BeginUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementmgr-beginuielement), the TIP does not have to call UpdateUIElement for the UIElement.</span></span> <span data-ttu-id="37325-165">È tuttavia necessario che TIP chiami EndUIElement () in modo che [**ITfUIElementMgr**](/windows/desktop/api/Msctf/nn-msctf-itfuielementmgr) e l'applicazione possano tenere traccia dello stato di UIElement.</span><span class="sxs-lookup"><span data-stu-id="37325-165">But TIP needs to call EndUIElement() so the [**ITfUIElementMgr**](/windows/desktop/api/Msctf/nn-msctf-itfuielementmgr) and the application can track the status of UIElement.</span></span> <span data-ttu-id="37325-166">TIP deve chiamare UpdateUIElement () dopo che BeginUIElement () restituisce **false** in \* pbShow.</span><span class="sxs-lookup"><span data-stu-id="37325-166">TIP must calls UpdateUIElement() after BeginUIElement() returns **FALSE** in \*pbShow.</span></span> <span data-ttu-id="37325-167">L'applicazione che vuole creare l'interfaccia utente non controlla il contenuto in BeginUIElement (), restituisce semplicemente lo stato di visualizzazione in BeginUIElement () e inizia a controllare il contenuto in UpdateUIElement ().</span><span class="sxs-lookup"><span data-stu-id="37325-167">The application that wants to draw the UI does not check the contents in BeginUIElement(), it just returns the show status at BeginUIElement() and starts checking the contents at UpdateUIElement().</span></span> <span data-ttu-id="37325-168">Ad esempio, il flag di aggiornamento dell'UIElement dell'elenco dei candidati presenta tutti i bit al primo UpdateUIElement ().</span><span class="sxs-lookup"><span data-stu-id="37325-168">For example, the update flag of the candidate list UIElement has all bits at the first UpdateUIElement().</span></span> <span data-ttu-id="37325-169">Ciò significa che non è necessario che il contenuto di UIElement sia pronto in BeginUIElement ().</span><span class="sxs-lookup"><span data-stu-id="37325-169">This means that the contents of UIElement does not have to be ready at BeginUIElement().</span></span>

![Diagramma che mostra la chiamata a T I P chiamate a' ITUIElementMgr:: BeginUIElement ()' è BeginUIElement dell'applicazione UIElementSink '.](images/tsf-uilessmode-ovw2.gif)![Il diagramma che mostra l'applicazione restituisce FALSE in \* pbShow.](images/tsf-uilessmode-ovw3.gif)![diagramma di flusso uilessmode](images/tsf-uilessmode-ovw4.gif)

## <a name="the-candidate-list-uielement"></a><span data-ttu-id="37325-173">UIElement dell'elenco dei candidati</span><span class="sxs-lookup"><span data-stu-id="37325-173">The candidate list UIElement</span></span>

<span data-ttu-id="37325-174">**Informazioni su pageIndex:** Nell'applicazione che disegna l'elenco dei candidati verrà calcolato il numero di stringhe per ogni pagina quando viene modificato il contenuto dell'elenco ( \_ è stata impostata la stringa TF CLUIE \_ ).</span><span class="sxs-lookup"><span data-stu-id="37325-174">**About PageIndex:** The application that draws the candidate list will calculate the number of strings per page when the contents of the list is changed (TF\_CLUIE\_STRING is set).</span></span> <span data-ttu-id="37325-175">Non è opportuno modificare l'indice della pagina mentre l'elenco dei candidati è disponibile per la modalità UILess.</span><span class="sxs-lookup"><span data-stu-id="37325-175">It is not good to change the page index while the candidate list is available for UILess mode.</span></span> <span data-ttu-id="37325-176">Ciò significa che l'elenco dei candidati del suggerimento deve comportarsi nel paging anziché scorrere quando la selezione viene spostata nella pagina successiva.</span><span class="sxs-lookup"><span data-stu-id="37325-176">This means that TIP's candidate list should behave the paging rather than scrolling when the selection is moved to the next page.</span></span> <span data-ttu-id="37325-177">Se lo scorrimento si verifica in corrispondenza dello spostamento della selezione, l'indice di pagina viene modificato e l'applicazione deve ricalcolare l'indice della pagina.</span><span class="sxs-lookup"><span data-stu-id="37325-177">If the scroll happens at the selection moves, the page index is changed and the application needs to recalculate the page index.</span></span> <span data-ttu-id="37325-178">Il risultato potrebbe non essere previsto da TIP.</span><span class="sxs-lookup"><span data-stu-id="37325-178">The result may not be expected by TIP.</span></span>

<span data-ttu-id="37325-179">**Nessuna selezione:** [**ITfCandidateListUIElement:: GetSelection**](/windows/desktop/api/Msctf/nf-msctf-itfcandidatelistuielement-getselection) restituisce \_ false se l'elenco dei candidati non ha una selezione.</span><span class="sxs-lookup"><span data-stu-id="37325-179">**No Selection:** [**ITfCandidateListUIElement::GetSelection**](/windows/desktop/api/Msctf/nf-msctf-itfcandidatelistuielement-getselection) returns S\_FALSE, if the candidate list does not have a selection.</span></span> <span data-ttu-id="37325-180">Il valore restituito del primo parametro non è valido.</span><span class="sxs-lookup"><span data-stu-id="37325-180">The return value of the first param is invalid.</span></span>

 

 




