---
description: I buffer di indice, rappresentati dall'interfaccia IDirect3DIndexBuffer9, sono buffer di memoria contenenti dati di indice.
ms.assetid: baa60cd1-a1f0-4dbe-b934-aeb1a5c6b784
title: Buffer di indice (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7151fae6deb72a0c569d269c80e5b13bf946f9d0
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "103876193"
---
# <a name="index-buffers-direct3d-9"></a><span data-ttu-id="ddd00-103">Buffer di indice (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="ddd00-103">Index Buffers (Direct3D 9)</span></span>

<span data-ttu-id="ddd00-104">I buffer di indice, rappresentati dall'interfaccia [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) , sono buffer di memoria contenenti dati di indice.</span><span class="sxs-lookup"><span data-stu-id="ddd00-104">Index buffers, represented by the [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) interface, are memory buffers that contain index data.</span></span> <span data-ttu-id="ddd00-105">I dati di indice, o indici, sono offset di tipo integer nei buffer dei vertici e vengono usati per eseguire il rendering delle primitive usando il metodo [**IDirect3DDevice9::D rawindexedprimitive**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawindexedprimitive) .</span><span class="sxs-lookup"><span data-stu-id="ddd00-105">Index data, or indices, are integer offsets into vertex buffers and are used to render primitives using the [**IDirect3DDevice9::DrawIndexedPrimitive**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawindexedprimitive) method.</span></span>

<span data-ttu-id="ddd00-106">Un buffer di vertici contiene vertici; Pertanto, è possibile creare un buffer vertex con o senza primitive indicizzate.</span><span class="sxs-lookup"><span data-stu-id="ddd00-106">A vertex buffer contains vertices; therefore, you can draw a vertex buffer either with or without indexed primitives.</span></span> <span data-ttu-id="ddd00-107">Tuttavia, poiché in un buffer di indice sono contenuti indici, non è possibile utilizzare un buffer di indice senza un buffer vertex corrispondente.</span><span class="sxs-lookup"><span data-stu-id="ddd00-107">However, because an index buffer contains indices, you cannot use an index buffer without a corresponding vertex buffer.</span></span> <span data-ttu-id="ddd00-108">(Come nota collaterale, [**IDirect3DDevice9::D rawindexedprimitiveup**](/windows/desktop/api) e [**IDirect3DDevice9::D rawprimitiveup**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawprimitiveup) sono gli unici metodi di estrazione che vengono disegnato senza un indice o un vertex buffer).</span><span class="sxs-lookup"><span data-stu-id="ddd00-108">(As a side note, [**IDirect3DDevice9::DrawIndexedPrimitiveUP**](/windows/desktop/api) and [**IDirect3DDevice9::DrawPrimitiveUP**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawprimitiveup) are the only draw methods that draw without an index or a vertex buffer.)</span></span>

## <a name="index-buffer-description"></a><span data-ttu-id="ddd00-109">Descrizione buffer di indice</span><span class="sxs-lookup"><span data-stu-id="ddd00-109">Index Buffer Description</span></span>

<span data-ttu-id="ddd00-110">Un buffer di indice viene descritto in termini di capacità, ad esempio dove è presente in memoria, se supporta la lettura e la scrittura, nonché il tipo e il numero di indici che può contenere.</span><span class="sxs-lookup"><span data-stu-id="ddd00-110">An index buffer is described in terms of its capabilities, such as where it exists in memory, whether it supports reading and writing, and the type and number of indices it can contain.</span></span> <span data-ttu-id="ddd00-111">Questi tratti sono contenuti in una struttura [**D3DINDEXBUFFER \_ desc**](d3dindexbuffer-desc.md) .</span><span class="sxs-lookup"><span data-stu-id="ddd00-111">These traits are held in a [**D3DINDEXBUFFER\_DESC**](d3dindexbuffer-desc.md) structure.</span></span>

<span data-ttu-id="ddd00-112">Le descrizioni dei buffer di indice indicano all'applicazione il modo in cui è stato creato un buffer esistente.</span><span class="sxs-lookup"><span data-stu-id="ddd00-112">Index buffer descriptions tell your application how an existing buffer was created.</span></span> <span data-ttu-id="ddd00-113">Si fornisce una struttura di descrizione vuota per il sistema in modo da riempire le funzionalità di un buffer di indice creato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="ddd00-113">You provide an empty description structure for the system to fill with the capabilities of a previously created index buffer.</span></span>

-   <span data-ttu-id="ddd00-114">Il membro Format descrive il formato di superficie dei dati del buffer dell'indice.</span><span class="sxs-lookup"><span data-stu-id="ddd00-114">The Format member describes the surface format of the index buffer data.</span></span>
-   <span data-ttu-id="ddd00-115">Il tipo identifica il tipo di risorsa del buffer dell'indice.</span><span class="sxs-lookup"><span data-stu-id="ddd00-115">The Type identifies the resource type of the index buffer.</span></span>
-   <span data-ttu-id="ddd00-116">Il membro della struttura Usage contiene flag di funzionalità generali.</span><span class="sxs-lookup"><span data-stu-id="ddd00-116">The Usage structure member contains general capability flags.</span></span> <span data-ttu-id="ddd00-117">Il \_ flag SOFTWAREPROCESSING di D3DUSAGE indica che il buffer dell'indice deve essere usato con l'elaborazione dei vertici software.</span><span class="sxs-lookup"><span data-stu-id="ddd00-117">The D3DUSAGE\_SOFTWAREPROCESSING flag indicates that the index buffer is to be used with software vertex processing.</span></span> <span data-ttu-id="ddd00-118">La presenza del \_ flag WRITEONLY di D3DUSAGE nell'utilizzo indica che la memoria buffer dell'indice viene utilizzata solo per le operazioni di scrittura.</span><span class="sxs-lookup"><span data-stu-id="ddd00-118">The presence of the D3DUSAGE\_WRITEONLY flag in Usage indicates that the index buffer memory is used only for write operations.</span></span> <span data-ttu-id="ddd00-119">Questo consente di liberare il driver per inserire i dati dell'indice nella migliore posizione di memoria per consentire l'elaborazione e il rendering rapidi.</span><span class="sxs-lookup"><span data-stu-id="ddd00-119">This frees the driver to place the index data in the best memory location to enable fast processing and rendering.</span></span> <span data-ttu-id="ddd00-120">Se il \_ flag WRITEONLY di D3DUSAGE non viene utilizzato, è meno probabile che i dati vengano inseriti in un percorso non efficiente per le operazioni di lettura.</span><span class="sxs-lookup"><span data-stu-id="ddd00-120">If the D3DUSAGE\_WRITEONLY flag is not used, the driver is less likely to put the data in a location that is inefficient for read operations.</span></span> <span data-ttu-id="ddd00-121">Questo comporta una certa velocità di elaborazione e di rendering.</span><span class="sxs-lookup"><span data-stu-id="ddd00-121">This sacrifices some processing and rendering speed.</span></span> <span data-ttu-id="ddd00-122">Se questo flag non è specificato, si presuppone che le applicazioni eseguano operazioni di lettura e scrittura sui dati nel buffer dell'indice.</span><span class="sxs-lookup"><span data-stu-id="ddd00-122">If this flag is not specified, it is assumed that applications perform read and write operations on the data in the index buffer.</span></span>
-   <span data-ttu-id="ddd00-123">Pool specifica la classe di memoria allocata per il buffer dell'indice.</span><span class="sxs-lookup"><span data-stu-id="ddd00-123">Pool specifies the memory class allocated for the index buffer.</span></span> <span data-ttu-id="ddd00-124">Il \_ flag SYSTEMMEM di D3DPOOL indica che il sistema ha creato il buffer di indice nella memoria di sistema.</span><span class="sxs-lookup"><span data-stu-id="ddd00-124">The D3DPOOL\_SYSTEMMEM flag indicates that the system created the index buffer in system memory.</span></span>
-   <span data-ttu-id="ddd00-125">Il membro size archivia le dimensioni, in byte, dei dati del buffer dei vertici.</span><span class="sxs-lookup"><span data-stu-id="ddd00-125">The Size member stores the size, in bytes, of the vertex buffer data.</span></span>
-   <span data-ttu-id="ddd00-126">L'ultimo parametro pSharedHandle non viene utilizzato.</span><span class="sxs-lookup"><span data-stu-id="ddd00-126">The last parameter pSharedHandle is not used.</span></span> <span data-ttu-id="ddd00-127">Impostarla su **null**.</span><span class="sxs-lookup"><span data-stu-id="ddd00-127">Set it to **NULL**.</span></span>

## <a name="index-processing-requirements"></a><span data-ttu-id="ddd00-128">Requisiti di elaborazione degli indici</span><span class="sxs-lookup"><span data-stu-id="ddd00-128">Index Processing Requirements</span></span>

<span data-ttu-id="ddd00-129">Le prestazioni delle operazioni di elaborazione degli indici dipendono in larga misura dal punto in cui è presente il buffer dell'indice in memoria e dal tipo di dispositivo di rendering utilizzato.</span><span class="sxs-lookup"><span data-stu-id="ddd00-129">The performance of index processing operations depends heavily on where the index buffer exists in memory and what type of rendering device is being used.</span></span> <span data-ttu-id="ddd00-130">Le applicazioni controllano l'allocazione di memoria per i buffer di indice al momento della creazione.</span><span class="sxs-lookup"><span data-stu-id="ddd00-130">Applications control the memory allocation for index buffers when they are created.</span></span> <span data-ttu-id="ddd00-131">Quando \_ viene impostato il flag di Memoria D3DPOOL SYSTEMMEM, il buffer dell'indice viene creato nella memoria di sistema.</span><span class="sxs-lookup"><span data-stu-id="ddd00-131">When the D3DPOOL\_SYSTEMMEM memory flag is set, the index buffer is created in system memory.</span></span> <span data-ttu-id="ddd00-132">Quando \_ viene utilizzato il flag di memoria predefinito D3DPOOL, il driver di dispositivo determina la posizione in cui viene allocata la memoria per il buffer di indice, spesso definita memoria ottimale del driver.</span><span class="sxs-lookup"><span data-stu-id="ddd00-132">When the D3DPOOL\_DEFAULT memory flag is used, the device driver determines where the memory for the index buffer is best allocated, often referred to as driver-optimal memory.</span></span> <span data-ttu-id="ddd00-133">Driver: la memoria ottimale può essere memoria video locale, memoria video non locale o memoria di sistema.</span><span class="sxs-lookup"><span data-stu-id="ddd00-133">Driver-optimal memory can be local video memory, non-local video memory, or system memory.</span></span>

<span data-ttu-id="ddd00-134">\_Se si imposta il flag di comportamento SOFTWAREPROCESSING di D3DUSAGE quando si chiama il metodo [**IDirect3DDevice9:: CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) , viene specificato che il buffer dell'indice deve essere utilizzato con l'elaborazione dei vertici software.</span><span class="sxs-lookup"><span data-stu-id="ddd00-134">Setting the D3DUSAGE\_SOFTWAREPROCESSING behavior flag when calling the [**IDirect3DDevice9::CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) method specifies that the index buffer is to be used with software vertex processing.</span></span> <span data-ttu-id="ddd00-135">Questo flag è obbligatorio in modalità mista (D3DCREATE \_ mixed \_ VERTEXPROCESSING) quando si usa l'elaborazione dei vertici software.</span><span class="sxs-lookup"><span data-stu-id="ddd00-135">This flag is required in mixed mode vertex processing (D3DCREATE\_MIXED\_VERTEXPROCESSING) when software vertex processing is used.</span></span>

<span data-ttu-id="ddd00-136">L'applicazione può scrivere direttamente gli indici in un buffer di indice allocato nella memoria ottimale del driver.</span><span class="sxs-lookup"><span data-stu-id="ddd00-136">The application can directly write indices to a index buffer allocated in driver-optimal memory.</span></span> <span data-ttu-id="ddd00-137">Questa tecnica impedisce un'operazione di copia ridondante in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="ddd00-137">This technique prevents a redundant copy operation later.</span></span> <span data-ttu-id="ddd00-138">Questa tecnica non funziona bene se l'applicazione legge i dati da un buffer di indice, perché le operazioni di lettura eseguite dall'host dalla memoria ottimale del driver possono essere molto lente.</span><span class="sxs-lookup"><span data-stu-id="ddd00-138">This technique does not work well if your application reads data back from an index buffer, because read operations done by the host from driver-optimal memory can be very slow.</span></span> <span data-ttu-id="ddd00-139">Pertanto, se l'applicazione deve leggere durante l'elaborazione o scrive i dati nel buffer in modo anomalo, è preferibile scegliere un buffer di indice della memoria di sistema.</span><span class="sxs-lookup"><span data-stu-id="ddd00-139">Therefore, if your application needs to read during processing or writes data to the buffer erratically, a system-memory index buffer is a better choice.</span></span>

> [!Note]  
> <span data-ttu-id="ddd00-140">Usare sempre D3DPOOL \_ default, tranne quando non si vuole usare la memoria video o usare grandi quantità di RAM con blocco di pagina quando il driver inserisce i buffer dei vertici o degli indici nella memoria AGP.</span><span class="sxs-lookup"><span data-stu-id="ddd00-140">Always use D3DPOOL\_DEFAULT, except when you don't want to use video memory or use large amounts of page-locked RAM when the driver is putting vertex or index buffers into AGP memory.</span></span>

 

## <a name="create-an-index-buffer"></a><span data-ttu-id="ddd00-141">Creazione di un buffer di indice</span><span class="sxs-lookup"><span data-stu-id="ddd00-141">Create an Index Buffer</span></span>

<span data-ttu-id="ddd00-142">Creare un oggetto buffer di indice chiamando il metodo [**IDirect3DDevice9:: CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) , che accetta sei parametri.</span><span class="sxs-lookup"><span data-stu-id="ddd00-142">Create an index buffer object by calling the [**IDirect3DDevice9::CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) method, which accepts six parameters.</span></span>

-   <span data-ttu-id="ddd00-143">Il primo parametro specifica la lunghezza in byte del buffer di indice.</span><span class="sxs-lookup"><span data-stu-id="ddd00-143">The first parameter specifies the index buffer length, in bytes.</span></span>
-   <span data-ttu-id="ddd00-144">Il secondo parametro è un set di controlli di utilizzo.</span><span class="sxs-lookup"><span data-stu-id="ddd00-144">The second parameter is a set of usage controls.</span></span> <span data-ttu-id="ddd00-145">Tra le altre cose, il valore determina se i vertici a cui fanno riferimento gli indici sono in grado di contenere informazioni di ritaglio.</span><span class="sxs-lookup"><span data-stu-id="ddd00-145">Among other things, its value determines whether the vertices being referred to by the indices are capable of containing clipping information.</span></span> <span data-ttu-id="ddd00-146">Per migliorare le prestazioni, specificare D3DUSAGE \_ DONOTCLIP quando il ritaglio non è necessario.</span><span class="sxs-lookup"><span data-stu-id="ddd00-146">To improve performance, specify D3DUSAGE\_DONOTCLIP when clipping is not required.</span></span>

    <span data-ttu-id="ddd00-147">Il \_ flag D3DUSAGE SOFTWAREPROCESSING può essere impostato quando è abilitata l'elaborazione di vertici in modalità mista o software (D3DCREATE \_ mixed \_ VERTEXPROCESSING/D3DCREATE \_ software \_ VERTEXPROCESSING) per tale dispositivo.</span><span class="sxs-lookup"><span data-stu-id="ddd00-147">The D3DUSAGE\_SOFTWAREPROCESSING flag can be set when mixed-mode or software vertex processing (D3DCREATE\_MIXED\_VERTEXPROCESSING / D3DCREATE\_SOFTWARE\_VERTEXPROCESSING) is enabled for that device.</span></span> <span data-ttu-id="ddd00-148">\_È necessario impostare D3DUSAGE SOFTWAREPROCESSING per i buffer da usare con l'elaborazione dei vertici software in modalità mista, ma non deve essere impostata per ottenere le migliori prestazioni possibili quando si usa l'elaborazione degli indici hardware in modalità mista ( \_ hardware D3DCREATE \_ VERTEXPROCESSING).</span><span class="sxs-lookup"><span data-stu-id="ddd00-148">D3DUSAGE\_SOFTWAREPROCESSING must be set for buffers to be used with software vertex processing in mixed mode, but it should not be set for the best possible performance when using hardware index processing in mixed mode (D3DCREATE\_HARDWARE\_VERTEXPROCESSING).</span></span> <span data-ttu-id="ddd00-149">Tuttavia, l'impostazione di D3DUSAGE \_ SOFTWAREPROCESSING è l'unica opzione quando si usa un singolo buffer con l'elaborazione dei vertici hardware e software.</span><span class="sxs-lookup"><span data-stu-id="ddd00-149">However, setting D3DUSAGE\_SOFTWAREPROCESSING is the only option when a single buffer is used with both hardware and software vertex processing.</span></span> <span data-ttu-id="ddd00-150">D3DUSAGE \_ SOFTWAREPROCESSING è consentito per i dispositivi misti e software.</span><span class="sxs-lookup"><span data-stu-id="ddd00-150">D3DUSAGE\_SOFTWAREPROCESSING is allowed for mixed and software devices.</span></span>

    <span data-ttu-id="ddd00-151">È possibile forzare i buffer dei vertici e degli indici nella memoria di sistema specificando D3DPOOL \_ SYSTEMMEM, anche quando l'elaborazione dell'indice viene eseguita in hardware.</span><span class="sxs-lookup"><span data-stu-id="ddd00-151">It is possible to force vertex and index buffers into system memory by specifying D3DPOOL\_SYSTEMMEM, even when the index processing is being done in hardware.</span></span> <span data-ttu-id="ddd00-152">Questo è un modo per evitare quantità eccessivamente elevate di memoria con blocco di pagina quando un driver inserisce questi buffer nella memoria AGP.</span><span class="sxs-lookup"><span data-stu-id="ddd00-152">This is a way to avoid overly large amounts of page-locked memory when a driver is putting these buffers into AGP memory.</span></span>

-   <span data-ttu-id="ddd00-153">Il terzo parametro è il membro D3DFMT \_ INDEX16 o D3DFMT \_ INDEX32 del tipo enumerato [D3DFORMAT](d3dformat.md) che specifica la dimensione di ogni indice.</span><span class="sxs-lookup"><span data-stu-id="ddd00-153">The third parameter is either the D3DFMT\_INDEX16 or D3DFMT\_INDEX32 member of the [D3DFORMAT](d3dformat.md) enumerated type that specifies the size of each index.</span></span>

-   <span data-ttu-id="ddd00-154">Il quarto parametro è un membro del tipo enumerato [**D3DPOOL**](./d3dpool.md) che indica al sistema in cui inserire il nuovo buffer di indice in memoria.</span><span class="sxs-lookup"><span data-stu-id="ddd00-154">The fourth parameter is a member of the [**D3DPOOL**](./d3dpool.md) enumerated type that tells the system where in memory to place the new index buffer.</span></span>

-   <span data-ttu-id="ddd00-155">Il parametro finale che [**IDirect3DDevice9:: CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) accetta è l'indirizzo di una variabile che viene riempito con un puntatore alla nuova interfaccia [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) dell'oggetto vertex buffer, se la chiamata ha esito positivo.</span><span class="sxs-lookup"><span data-stu-id="ddd00-155">The final parameter that [**IDirect3DDevice9::CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) accepts is the address of a variable that is filled with a pointer to the new [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) interface of the vertex buffer object, if the call succeeds.</span></span>

<span data-ttu-id="ddd00-156">Nell'esempio di codice C++ riportato di seguito viene illustrato l'aspetto della creazione di un buffer di indice nel codice.</span><span class="sxs-lookup"><span data-stu-id="ddd00-156">The following C++ code example shows what creating an index buffer might look like in code.</span></span>


```
/*
 * For the purposes of this example, the d3dDevice variable is the 
 * address of an IDirect3DDevice9 interface exposed by a 
 * Direct3DDevice object, g_IB is a variable of type 
 * LPDIRECT3DINDEXBUFFER9.
 */

if( FAILED( d3dDevice->CreateIndexBuffer( 16384 *sizeof(WORD),
           D3DUSAGE_WRITEONLY, D3DFMT_INDEX16, D3DPOOL_DEFAULT, 
           &g_IB, NULL ) ) )
    return E_FAIL;
```



## <a name="access-an-index-buffer"></a><span data-ttu-id="ddd00-157">Accedere a un buffer di indice</span><span class="sxs-lookup"><span data-stu-id="ddd00-157">Access an Index Buffer</span></span>

<span data-ttu-id="ddd00-158">Gli oggetti buffer di indice consentono alle applicazioni di accedere direttamente alla memoria allocata per i dati dell'indice.</span><span class="sxs-lookup"><span data-stu-id="ddd00-158">Index buffer objects enable applications to directly access the memory allocated for index data.</span></span> <span data-ttu-id="ddd00-159">È possibile recuperare un puntatore alla memoria del buffer di indicizzazione chiamando il metodo [**IDirect3DIndexBuffer9:: Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) e quindi accedendo alla memoria in base alle esigenze per riempire il buffer con i nuovi dati di indice o per leggere i dati in esso contenuti.</span><span class="sxs-lookup"><span data-stu-id="ddd00-159">You can retrieve a pointer to index buffer memory by calling the [**IDirect3DIndexBuffer9::Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) method, and then accessing the memory as needed to fill the buffer with new index data or to read any data it contains.</span></span> <span data-ttu-id="ddd00-160">Il metodo Lock accetta quattro parametri.</span><span class="sxs-lookup"><span data-stu-id="ddd00-160">The Lock method accepts four parameters.</span></span> <span data-ttu-id="ddd00-161">Il primo, *OffsetToLock*, è l'offset nei dati dell'indice.</span><span class="sxs-lookup"><span data-stu-id="ddd00-161">The first, *OffsetToLock*, is the offset into the index data.</span></span> <span data-ttu-id="ddd00-162">Il secondo parametro corrisponde alla dimensione, espressa in byte, dei dati dell'indice.</span><span class="sxs-lookup"><span data-stu-id="ddd00-162">The second parameter is the size, measured in bytes, of the index data.</span></span> <span data-ttu-id="ddd00-163">Il terzo parametro accettato dal metodo **IDirect3DIndexBuffer9:: Lock** , *ppbData*, è l'indirizzo di un puntatore di byte riempito con un puntatore ai dati di indice, se la chiamata ha esito positivo.</span><span class="sxs-lookup"><span data-stu-id="ddd00-163">The third parameter accepted by the **IDirect3DIndexBuffer9::Lock** method, *ppbData*, is the address of a BYTE pointer filled with a pointer to the index data, if the call succeeds.</span></span>

<span data-ttu-id="ddd00-164">L'ultimo parametro, *Flags*, indica al sistema la modalità di blocco della memoria.</span><span class="sxs-lookup"><span data-stu-id="ddd00-164">The last parameter, *Flags*, tells the system how the memory should be locked.</span></span> <span data-ttu-id="ddd00-165">È possibile usarlo per indicare il modo in cui l'applicazione accede ai dati nel buffer.</span><span class="sxs-lookup"><span data-stu-id="ddd00-165">You can use it to indicate how the application accesses the data in the buffer.</span></span> <span data-ttu-id="ddd00-166">Specificare le costanti per il parametro *Flags* in base alla modalità di accesso ai dati dell'indice da parte dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ddd00-166">Specify constants for the *Flags* parameter according to the way the index data will be accessed by your application.</span></span> <span data-ttu-id="ddd00-167">Ciò consente al driver di bloccare la memoria e fornire le migliori prestazioni in base al tipo di accesso richiesto.</span><span class="sxs-lookup"><span data-stu-id="ddd00-167">This allows the driver to lock the memory and provide the best performance given the requested access type.</span></span> <span data-ttu-id="ddd00-168">Usare \_ il flag di sola lettura D3DLOCK se l'applicazione viene letta solo dalla memoria buffer dell'indice.</span><span class="sxs-lookup"><span data-stu-id="ddd00-168">Use D3DLOCK\_READONLY flag if your application will read only from the index buffer memory.</span></span> <span data-ttu-id="ddd00-169">L'inclusione di questo flag consente a Direct3D di ottimizzare le procedure interne per migliorare l'efficienza, dato che l'accesso alla memoria sarà di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="ddd00-169">Including this flag enables Direct3D to optimize its internal procedures to improve efficiency, given that access to the memory will be read-only.</span></span>

<span data-ttu-id="ddd00-170">Dopo aver compilato o letto i dati dell'indice, chiamare il metodo [**IDirect3DIndexBuffer9:: Unlock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-unlock) , come illustrato nell'esempio di codice seguente.</span><span class="sxs-lookup"><span data-stu-id="ddd00-170">After you fill or read the index data, call the [**IDirect3DIndexBuffer9::Unlock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-unlock) method, as shown in the following code example.</span></span>


```
// This code example assumes the m_pIndexBuffer is a variable of type 
// LPDIRECT3DINDEXBUFFER9 and that g_Indices has been properly 
// initialized with indices.

// To fill the index buffer, you must lock the buffer to gain 
// access to the indices. This mechanism is required because index
// buffers may be in device memory.

VOID* pIndices;

if( FAILED( m_pIndexBuffer->Lock( 
      0,                 // Fill from start of the buffer
      sizeof(g_Indices), // Size of the data to load
      BYTE**)&pIndices,  // Returned index data
      0 ) ) )            // Send default flags to the lock
{
    SAFE_RELEASE(m_pIndexBuffer);
    return E_FAIL;
}

memcpy( pIndices, g_Indices, sizeof(g_Indices) );
m_pIndexBuffer->Unlock();
```



> [!Note]
>
> <span data-ttu-id="ddd00-171">Se si crea un buffer di indice con il \_ flag D3DUSAGE WRITEONLY, non usare il flag di blocco di sola \_ lettura D3DLOCK.</span><span class="sxs-lookup"><span data-stu-id="ddd00-171">If you create an index buffer with the D3DUSAGE\_WRITEONLY flag, do not use the D3DLOCK\_READONLY locking flag.</span></span> <span data-ttu-id="ddd00-172">Usare il \_ flag di sola lettura D3DLOCK se l'applicazione viene letta solo dalla memoria buffer dell'indice.</span><span class="sxs-lookup"><span data-stu-id="ddd00-172">Use the D3DLOCK\_READONLY flag if your application will read only from the index buffer memory.</span></span> <span data-ttu-id="ddd00-173">L'inclusione di questo flag consente a Direct3D di ottimizzare le procedure interne per migliorare l'efficienza, dato che l'accesso alla memoria sarà di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="ddd00-173">Including this flag enables Direct3D to optimize its internal procedures to improve efficiency, given that access to the memory will be read-only.</span></span>
>
> <span data-ttu-id="ddd00-174">Per informazioni sull'uso di D3DLOCK \_ scarto o D3DLOCK \_ nowrite per il parametro *Flags* del metodo [**IDirect3DIndexBuffer9:: Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) , vedere [ottimizzazioni delle prestazioni (Direct3D 9)](performance-optimizations.md).</span><span class="sxs-lookup"><span data-stu-id="ddd00-174">For information about using D3DLOCK\_DISCARD or D3DLOCK\_NOOVERWRITE for the *Flags* parameter of the [**IDirect3DIndexBuffer9::Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) method, see [Performance Optimizations (Direct3D 9)](performance-optimizations.md).</span></span>

 

<span data-ttu-id="ddd00-175">In C++, poiché si accede direttamente alla memoria allocata per il buffer di indice, assicurarsi che l'applicazione acceda correttamente alla memoria allocata.</span><span class="sxs-lookup"><span data-stu-id="ddd00-175">In C++, because you directly access the memory allocated for the index buffer, make sure your application properly accesses the allocated memory.</span></span> <span data-ttu-id="ddd00-176">In caso contrario, si rischia il rendering della memoria non valida.</span><span class="sxs-lookup"><span data-stu-id="ddd00-176">Otherwise, you risk rendering that memory invalid.</span></span> <span data-ttu-id="ddd00-177">Usare lo stride del formato di indice usato dall'applicazione per passare da un indice nel buffer allocato a un altro.</span><span class="sxs-lookup"><span data-stu-id="ddd00-177">Use the stride of the index format your application uses to move from one index in the allocated buffer to another.</span></span>

<span data-ttu-id="ddd00-178">Recuperare informazioni su un buffer dell'indice chiamando il metodo [**IDirect3DIndexBuffer9:: getdesc**](/windows/desktop/api) .</span><span class="sxs-lookup"><span data-stu-id="ddd00-178">Retrieve information about an index buffer by calling the [**IDirect3DIndexBuffer9::GetDesc**](/windows/desktop/api) method.</span></span> <span data-ttu-id="ddd00-179">Questo metodo compila i membri della struttura [**D3DINDEXBUFFER \_ desc**](d3dindexbuffer-desc.md) con le informazioni sul buffer dell'indice.</span><span class="sxs-lookup"><span data-stu-id="ddd00-179">This method fills the members of the [**D3DINDEXBUFFER\_DESC**](d3dindexbuffer-desc.md) structure with information about the index buffer.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ddd00-180">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="ddd00-180">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ddd00-181">Risorse Direct3D</span><span class="sxs-lookup"><span data-stu-id="ddd00-181">Direct3D Resources</span></span>](direct3d-resources.md)
</dt> <dt>

[<span data-ttu-id="ddd00-182">Rendering dai buffer di Vertex e index (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="ddd00-182">Rendering from Vertex and Index Buffers (Direct3D 9)</span></span>](rendering-from-vertex-and-index-buffers.md)
</dt> <dt>

[<span data-ttu-id="ddd00-183">Buffer vertex (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="ddd00-183">Vertex Buffers (Direct3D 9)</span></span>](vertex-buffers.md)
</dt> </dl>

 

 
