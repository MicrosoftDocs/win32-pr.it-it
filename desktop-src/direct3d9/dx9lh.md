---
description: Questa documentazione si riferisce specificamente alle estensioni di Windows Vista per la grafica DirectX.
ms.assetid: 3cc0b08c-e126-4f1b-b5d1-0d6c1ebeb0c5
title: Riepilogo delle funzionalità (Direct3D 9 per Windows Vista)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3d5cf2447297b7f24edf7d0200e640d5aef90bff
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "106304076"
---
# <a name="feature-summary-direct3d-9-for-windows-vista"></a><span data-ttu-id="689f5-103">Riepilogo delle funzionalità (Direct3D 9 per Windows Vista)</span><span class="sxs-lookup"><span data-stu-id="689f5-103">Feature Summary (Direct3D 9 for Windows Vista)</span></span>

<span data-ttu-id="689f5-104">Questa documentazione si riferisce specificamente alle estensioni di Windows Vista per la grafica DirectX.</span><span class="sxs-lookup"><span data-stu-id="689f5-104">This documentation specifically refers to the Windows Vista extensions for DirectX graphics.</span></span> <span data-ttu-id="689f5-105">Per sviluppare la potenza di DirectX per Windows Vista, è necessario installare Windows Vista SDK e DirectX SDK.</span><span class="sxs-lookup"><span data-stu-id="689f5-105">To develop the power of DirectX for Windows Vista, you must install the Windows Vista SDK as well as the DirectX SDK.</span></span> <span data-ttu-id="689f5-106">Le applicazioni che usano DirectX per Windows Vista devono usare hardware che usa il driver WDDM (modello di driver di dispositivo Windows) invece di XPDM (modello di driver XP); i driver che non implementano WDDM non possono creare un'istanza delle interfacce grafiche DirectX di Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="689f5-106">Applications using DirectX for Windows Vista must be using hardware that uses the WDDM driver (Windows Device Driver Model) as opposed to the XPDM (XP Driver Model); drivers that do not implement the WDDM cannot instantiate Windows Vista DirectX graphics interfaces.</span></span>

<span data-ttu-id="689f5-107">Scopri le nuove funzionalità grafiche DirectX in Windows Vista in una delle seguenti sezioni:</span><span class="sxs-lookup"><span data-stu-id="689f5-107">Discover the new DirectX graphics features in Windows Vista in one of these sections:</span></span>

-   [<span data-ttu-id="689f5-108">Modifiche del comportamento del dispositivo</span><span class="sxs-lookup"><span data-stu-id="689f5-108">Device Behavior Changes</span></span>](#device-behavior-changes)
-   [<span data-ttu-id="689f5-109">Disabilitazione dell'elaborazione dei vertici software multithread</span><span class="sxs-lookup"><span data-stu-id="689f5-109">Disabling Multithreaded Software Vertex Processing</span></span>](#disabling-multithreaded-software-vertex-processing)
-   [<span data-ttu-id="689f5-110">Superfici a un bit</span><span class="sxs-lookup"><span data-stu-id="689f5-110">One Bit Surfaces</span></span>](#one-bit-surfaces)
-   [<span data-ttu-id="689f5-111">Lettura dei buffer di profondità/stencil</span><span class="sxs-lookup"><span data-stu-id="689f5-111">Reading Depth/Stencil Buffers</span></span>](#reading-depthstencil-buffers)
-   [<span data-ttu-id="689f5-112">Condivisione di risorse</span><span class="sxs-lookup"><span data-stu-id="689f5-112">Sharing Resources</span></span>](#sharing-resources)
-   [<span data-ttu-id="689f5-113">Conversione sRGB prima della fusione</span><span class="sxs-lookup"><span data-stu-id="689f5-113">sRGB Conversion Before Blending</span></span>](#srgb-conversion-before-blending)
-   [<span data-ttu-id="689f5-114">Miglioramenti di StretchRect</span><span class="sxs-lookup"><span data-stu-id="689f5-114">StretchRect Improvements</span></span>](#stretchrect-improvements)
-   [<span data-ttu-id="689f5-115">Creazione di trame nella memoria di sistema</span><span class="sxs-lookup"><span data-stu-id="689f5-115">Texture Creation in System Memory</span></span>](#texture-creation-in-system-memory)

## <a name="device-behavior-changes"></a><span data-ttu-id="689f5-116">Modifiche del comportamento del dispositivo</span><span class="sxs-lookup"><span data-stu-id="689f5-116">Device Behavior Changes</span></span>

<span data-ttu-id="689f5-117">I dispositivi vengono ora persi solo in due circostanze; Quando l'hardware viene reimpostato perché è sospeso e quando il driver di dispositivo viene arrestato.</span><span class="sxs-lookup"><span data-stu-id="689f5-117">Devices are now only lost under two circumstances; when the hardware is reset because it is hanging, and when the device driver is stopped.</span></span> <span data-ttu-id="689f5-118">Quando l'hardware si blocca, il dispositivo può essere reimpostato chiamando [**ResetEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-resetex).</span><span class="sxs-lookup"><span data-stu-id="689f5-118">When hardware hangs, the device can be reset by calling [**ResetEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-resetex).</span></span> <span data-ttu-id="689f5-119">Se si blocca l'hardware, la memoria della trama viene persa.</span><span class="sxs-lookup"><span data-stu-id="689f5-119">If hardware hangs, texture memory is lost.</span></span>

<span data-ttu-id="689f5-120">Dopo l'arresto di un driver, è necessario ricreare l'oggetto IDirect9Ex per riprendere il rendering.</span><span class="sxs-lookup"><span data-stu-id="689f5-120">After a driver is stopped, the IDirect9Ex object must be recreated to resume rendering.</span></span>

<span data-ttu-id="689f5-121">Quando l'area di presentazione è nascosta da un'altra finestra in modalità finestra o quando un'applicazione a schermo intero è ridotta a icona, [**PresentEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-presentex) restituirà S \_ D3DPRESENTATIONOCCLUDED.</span><span class="sxs-lookup"><span data-stu-id="689f5-121">When the presentation area is obscured by another window in windowed mode, or when a fullscreen application is minimized, [**PresentEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-presentex) will return S\_D3DPRESENTATIONOCCLUDED.</span></span> <span data-ttu-id="689f5-122">Le applicazioni a schermo intero possono riprendere il rendering quando ricevono un messaggio di callback [**WM \_ ACTIVATEAPP**](../winmsg/wm-activateapp.md) .</span><span class="sxs-lookup"><span data-stu-id="689f5-122">Full screen applications can resume rendering when they receive a [**WM\_ACTIVATEAPP**](../winmsg/wm-activateapp.md) callback message.</span></span>

<span data-ttu-id="689f5-123">Nelle versioni precedenti di DirectX, quando un'applicazione ha riscontrato una modifica della modalità, l'unico modo per eseguire il ripristino era ripristinare il dispositivo e ricreare tutte le risorse di memoria video e le catene di scambio.</span><span class="sxs-lookup"><span data-stu-id="689f5-123">In previous versions of DirectX, when an application experienced a mode change, the only way to recover was to reset the device and re-create all video memory resources and swap chains.</span></span> <span data-ttu-id="689f5-124">Con DirectX per Windows Vista, la chiamata di reset dopo una modifica della modalità non provoca la perdita di superfici di memoria di trama, le trame e le informazioni sullo stato e non è necessario ricreare tali risorse.</span><span class="sxs-lookup"><span data-stu-id="689f5-124">Now with DirectX for Windows Vista, calling Reset after a mode change does not cause texture memory surfaces, textures and state information to be lost and these resources do not need to be recreated.</span></span>

## <a name="disabling-multithreaded-software-vertex-processing"></a><span data-ttu-id="689f5-125">Disabilitazione dell'elaborazione dei vertici software multithread</span><span class="sxs-lookup"><span data-stu-id="689f5-125">Disabling Multithreaded Software Vertex Processing</span></span>

<span data-ttu-id="689f5-126">È stato aggiunto un nuovo bit di Caps (D3DCREATE \_ Disable \_ PSGP \_ Threading) che disabilita il multithreading per l'elaborazione dei vertici software (SWVP).</span><span class="sxs-lookup"><span data-stu-id="689f5-126">A new caps bit (D3DCREATE\_DISABLE\_PSGP\_THREADING) has been added that will disable multithreading for software vertex processing (swvp).</span></span> <span data-ttu-id="689f5-127">Usare questa macro per generare un flag di comportamento per IDirect3D9:: CreateDevice.</span><span class="sxs-lookup"><span data-stu-id="689f5-127">Use this macro to generate a behavior flag for IDirect3D9::CreateDevice.</span></span>


```
#define D3DCREATE_DISABLE_PSGP_THREADING
```



## <a name="one-bit-surfaces"></a><span data-ttu-id="689f5-128">Superfici a un bit</span><span class="sxs-lookup"><span data-stu-id="689f5-128">One Bit Surfaces</span></span>

<span data-ttu-id="689f5-129">È disponibile un nuovo tipo di formato di superficie di un bit che può essere particolarmente utile per l'elaborazione di glifi di testo.</span><span class="sxs-lookup"><span data-stu-id="689f5-129">There is a new one bit surface format type which can be especially useful for processing text glyphs.</span></span> <span data-ttu-id="689f5-130">Il nuovo formato è denominato D3DFMT \_ a1.</span><span class="sxs-lookup"><span data-stu-id="689f5-130">The new format is called D3DFMT\_A1.</span></span> <span data-ttu-id="689f5-131">Una superficie a un bit è progettata per essere usata come trama per pixel o per l'output della destinazione di rendering generato da ComposeRects o ColorFill.</span><span class="sxs-lookup"><span data-stu-id="689f5-131">A one-bit surface is designed to be either used as a per-pixel texture, or the render target output generated by ComposeRects or ColorFill.</span></span> <span data-ttu-id="689f5-132">Non sono presenti estremità separate per la larghezza e l'altezza della superficie; un'implementazione di deve supportare una superficie di dimensioni singole che è 2K Texels x 8 Texel.</span><span class="sxs-lookup"><span data-stu-id="689f5-132">There are no separate caps for the surface width and height; an implementation must support a single size surface that is 2K texels x 8K texels.</span></span>

<span data-ttu-id="689f5-133">Una superficie a un bit ha un bit per Texel; Pertanto, un valore significherebbe che tutti i componenti (r, g, b, a) di un pixel sono pari a 1 e zero significherebbe che tutti i componenti sono uguali a 0.</span><span class="sxs-lookup"><span data-stu-id="689f5-133">A one-bit surface has one bit per texel; therefore, a one would mean that all components (r,g,b,a) of a pixel are 1, and zero would mean that all components are equal to 0.</span></span> <span data-ttu-id="689f5-134">È possibile usare le superfici a un bit con le API seguenti: ColorFill, UpdateSurface e UpdateTexture.</span><span class="sxs-lookup"><span data-stu-id="689f5-134">You may use one-bit surfaces with the following APIs: ColorFill, UpdateSurface and UpdateTexture.</span></span>

<span data-ttu-id="689f5-135">Quando viene letta una superficie a un bit, il runtime può eseguire l'esempio di punto o il filtro convoluzione.</span><span class="sxs-lookup"><span data-stu-id="689f5-135">When a one-bit surface is read, the runtime can perform either point sample or convolution filtering.</span></span> <span data-ttu-id="689f5-136">Il filtro di convoluzione è regolabile (vedere [**SetConvolutionMonoKernel**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-setconvolutionmonokernel)).</span><span class="sxs-lookup"><span data-stu-id="689f5-136">The convolution filter is adjustable (see [**SetConvolutionMonoKernel**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-setconvolutionmonokernel)).</span></span>

<span data-ttu-id="689f5-137">Esistono alcune restrizioni per le superfici a un bit:</span><span class="sxs-lookup"><span data-stu-id="689f5-137">There are some restrictions for one-bit surfaces:</span></span>

-   <span data-ttu-id="689f5-138">Il mapping MIP non è supportato</span><span class="sxs-lookup"><span data-stu-id="689f5-138">Mip-mapping is not supported</span></span>
-   <span data-ttu-id="689f5-139">non è possibile leggere o scrivere dati sRGB in una superficie a un bit.</span><span class="sxs-lookup"><span data-stu-id="689f5-139">sRGB data cannot be read or written to a one-bit surface.</span></span>
-   <span data-ttu-id="689f5-140">Non è possibile usare una superficie a un bit come trama del vertice o per il campionamento multiplo.</span><span class="sxs-lookup"><span data-stu-id="689f5-140">A one-bit surface cannot be used as a vertex texture or for multisampling.</span></span>

## <a name="reading-depthstencil-buffers"></a><span data-ttu-id="689f5-141">Lettura dei buffer di profondità/stencil</span><span class="sxs-lookup"><span data-stu-id="689f5-141">Reading Depth/Stencil Buffers</span></span>

<span data-ttu-id="689f5-142">Usare IDirect3DDevice9:: UpdateSurface per leggere o scrivere dati depth/stencil dalle superfici ottenute da IDirect3DDevice9:: CreateDepthStencilSurface o IDirect3DDevice9:: GetDepthStencilSurface.</span><span class="sxs-lookup"><span data-stu-id="689f5-142">Use IDirect3DDevice9::UpdateSurface to read or write depth/stencil data from surfaces obtained from IDirect3DDevice9::CreateDepthStencilSurface or IDirect3DDevice9::GetDepthStencilSurface.</span></span>

<span data-ttu-id="689f5-143">Per prima cosa, creare una superficie bloccabile, solo Depth o stencil solo usando IDirect3DDevice9:: CreateOffscreenPlainSurface.</span><span class="sxs-lookup"><span data-stu-id="689f5-143">First, create a lockable, depth only or stencil only surface using IDirect3DDevice9::CreateOffscreenPlainSurface.</span></span> <span data-ttu-id="689f5-144">Utilizzare uno dei seguenti formati:</span><span class="sxs-lookup"><span data-stu-id="689f5-144">Use one of the following formats:</span></span>

-   <span data-ttu-id="689f5-145">D3DFMT \_ D16 \_ lockable</span><span class="sxs-lookup"><span data-stu-id="689f5-145">D3DFMT\_D16\_LOCKABLE</span></span>
-   <span data-ttu-id="689f5-146">D3DFMT \_ D32F \_ lockable</span><span class="sxs-lookup"><span data-stu-id="689f5-146">D3DFMT\_D32F\_LOCKABLE</span></span>
-   <span data-ttu-id="689f5-147">D3DFMT \_ D32 \_ lockable</span><span class="sxs-lookup"><span data-stu-id="689f5-147">D3DFMT\_D32\_LOCKABLE</span></span>
-   <span data-ttu-id="689f5-148">D3DFMT \_ S8 \_ bloccabile</span><span class="sxs-lookup"><span data-stu-id="689f5-148">D3DFMT\_S8\_LOCKABLE</span></span>

<span data-ttu-id="689f5-149">In secondo luogo, trasferire i dati tra il buffer di profondità/stencil e la superficie di stencil o di profondità bloccabile appena creata.</span><span class="sxs-lookup"><span data-stu-id="689f5-149">Second, transfer data between the depth/stencil buffer and the newly-created lockable depth or stencil surface.</span></span> <span data-ttu-id="689f5-150">Il trasferimento viene eseguito utilizzando IDirect3DDevice9:: UpdateSurface.</span><span class="sxs-lookup"><span data-stu-id="689f5-150">The transfer is performed using IDirect3DDevice9::UpdateSurface.</span></span>

<span data-ttu-id="689f5-151">UpdateSurface avrà esito negativo quando entrambe le superfici sono un formato BLOCCAbile o non sono bloccabili.</span><span class="sxs-lookup"><span data-stu-id="689f5-151">UpdateSurface will fail when both surfaces are a LOCKABLE format or both are non-lockable.</span></span>

<span data-ttu-id="689f5-152">Il trasferimento di dati inesistenti provocherà un errore (ad esempio, il trasferimento da una superficie non bloccabile di sola profondità a una \_ \_ superficie bloccabile D3DFMT S8).</span><span class="sxs-lookup"><span data-stu-id="689f5-152">Transferring non-existent data will result in an error (for example, transferring from a non-lockable depth-only surface to a D3DFMT\_S8\_LOCKABLE surface).</span></span>

<span data-ttu-id="689f5-153">Il resto delle restrizioni per IDirect3DDevice9:: UpdateSurface è ancora applicabile.</span><span class="sxs-lookup"><span data-stu-id="689f5-153">The rest of the restrictions for IDirect3DDevice9::UpdateSurface still apply.</span></span>

## <a name="sharing-resources"></a><span data-ttu-id="689f5-154">Condivisione di risorse</span><span class="sxs-lookup"><span data-stu-id="689f5-154">Sharing Resources</span></span>

<span data-ttu-id="689f5-155">Le risorse Direct3D possono ora essere condivise tra dispositivi o processi.</span><span class="sxs-lookup"><span data-stu-id="689f5-155">Direct3D resources can now be shared between devices or processes.</span></span> <span data-ttu-id="689f5-156">Questo vale per qualsiasi risorsa Direct3D, incluse trame, buffer di vertici, buffer di indice o superfici, ad esempio destinazioni di rendering, buffer depth stencil o superfici non semplici dello schermo.</span><span class="sxs-lookup"><span data-stu-id="689f5-156">This applies to any Direct3D resource including textures, vertex buffers, index buffers, or surfaces (such as render targets, depth stencil buffers or off-screen plain surfaces).</span></span> <span data-ttu-id="689f5-157">Per essere condivisi, è necessario designare una risorsa per la condivisione al momento della creazione, quindi individuare la risorsa nel pool predefinito (D3DPOOL \_ default).</span><span class="sxs-lookup"><span data-stu-id="689f5-157">To be shared, you need to designate a resource for sharing at the time of creation, and locate the resource in the default pool (D3DPOOL\_DEFAULT).</span></span> <span data-ttu-id="689f5-158">Una volta creata una risorsa per la condivisione, può essere condivisa tra i dispositivi all'interno di un processo o condivisa tra più processi.</span><span class="sxs-lookup"><span data-stu-id="689f5-158">Once a resource is created for sharing, it can be shared across devices within a process, or shared across processes.</span></span>

<span data-ttu-id="689f5-159">Per abilitare le risorse condivise, le API per la creazione di risorse hanno un parametro handle aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="689f5-159">To enable shared resources, the resource creation APIs have an additional handle parameter.</span></span> <span data-ttu-id="689f5-160">Si tratta di un HANDLE che punta alla risorsa condivisa.</span><span class="sxs-lookup"><span data-stu-id="689f5-160">This is a HANDLE that points to the shared resource.</span></span> <span data-ttu-id="689f5-161">Nelle revisioni precedenti di DirectX, questo argomento fa parte della firma dell'API, ma è stato inutilizzato e deve essere impostato su **null**.</span><span class="sxs-lookup"><span data-stu-id="689f5-161">In previous revisions of DirectX, this argument has been part of the API signature, but has been unused and must be set to **NULL**.</span></span> <span data-ttu-id="689f5-162">A partire da Windows Vista, usare pSharedHandle nei modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="689f5-162">Starting with Windows Vista, use pSharedHandle in the following ways:</span></span>

-   <span data-ttu-id="689f5-163">Impostare il puntatore (pSharedHandle) su **null** per non condividere una risorsa.</span><span class="sxs-lookup"><span data-stu-id="689f5-163">Set the pointer (pSharedHandle) to **NULL** to not share a resource.</span></span> <span data-ttu-id="689f5-164">Questo comportamento è analogo a quello di DirectX prima di Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="689f5-164">This is just like the behavior of DirectX prior to Windows Vista.</span></span>
-   <span data-ttu-id="689f5-165">Per creare una risorsa condivisa, chiamare qualsiasi API per la creazione di risorse (vedere di seguito) con un handle non inizializzato (il puntatore non è **null** (pSharedHandle! = **null**), ma il puntatore punta a un valore **null** ( \* pSharedHandle = = **null**)).</span><span class="sxs-lookup"><span data-stu-id="689f5-165">To create a shared resource, call any resource creation API (see below) with an uninitialized handle (the pointer itself is not **NULL** (pSharedHandle != **NULL**), but the pointer points to a **NULL** value (\*pSharedHandle == **NULL**)).</span></span> <span data-ttu-id="689f5-166">L'API genererà una risorsa condivisa e restituirà un handle valido.</span><span class="sxs-lookup"><span data-stu-id="689f5-166">The API will generate a shared resource and return a valid handle.</span></span>
-   <span data-ttu-id="689f5-167">Per aprire e accedere a una risorsa condivisa creata in precedenza usando un handle di risorsa condiviso non NULL, impostare pSharedHandle sull'indirizzo di tale handle.</span><span class="sxs-lookup"><span data-stu-id="689f5-167">To open and access a previously created shared resource by using a nonNULL shared resource handle, set pSharedHandle to the address of that handle.</span></span> <span data-ttu-id="689f5-168">Dopo aver aperto la risorsa condivisa precedentemente creata in questo modo, è possibile usare l'interfaccia restituita nell'API Direct3D 9 o Direct3D 9Ex come se l'interfaccia fosse una risorsa tipica di quel tipo.</span><span class="sxs-lookup"><span data-stu-id="689f5-168">After you open the previously created shared resource in this manner, you can use the returned interface in the Direct3D 9 or Direct3D 9Ex API as if the interface were a typical resource of that type.</span></span>

<span data-ttu-id="689f5-169">Le API per la creazione di risorse includono- [**createTexture**](/windows/desktop/api), [**CreateVolumeTexture**](/windows/desktop/api), [**CreateCubeTexture**](/windows/desktop/api), [**CreateRenderTarget**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createrendertarget), [**CreateVertexBuffer**](/windows/desktop/api) [**, CreateIndexBuffer**](/windows/desktop/api) [**, CreateDepthStencilSurface,**](/windows/desktop/api) [**CreateOffscreenPlainSurface,**](/windows/desktop/api) [**CreateDepthStencilSurfaceEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createdepthstencilsurfaceex), [**CreateOffscreenPlainSurfaceEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createoffscreenplainsurfaceex)e [**CreateRenderTargetEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createrendertargetex).</span><span class="sxs-lookup"><span data-stu-id="689f5-169">Resource creation APIs include - [**CreateTexture**](/windows/desktop/api), [**CreateVolumeTexture**](/windows/desktop/api), [**CreateCubeTexture**](/windows/desktop/api), [**CreateRenderTarget**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createrendertarget), [**CreateVertexBuffer**](/windows/desktop/api), [**CreateIndexBuffer**](/windows/desktop/api), [**CreateDepthStencilSurface**](/windows/desktop/api), [**CreateOffscreenPlainSurface**](/windows/desktop/api), [**CreateDepthStencilSurfaceEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createdepthstencilsurfaceex), [**CreateOffscreenPlainSurfaceEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createoffscreenplainsurfaceex), and [**CreateRenderTargetEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createrendertargetex).</span></span>

<span data-ttu-id="689f5-170">Esistono alcune restrizioni per l'uso di risorse condivise.</span><span class="sxs-lookup"><span data-stu-id="689f5-170">There are some restrictions for using shared resources.</span></span> <span data-ttu-id="689f5-171">Tra queste sono incluse:</span><span class="sxs-lookup"><span data-stu-id="689f5-171">These include:</span></span>

-   <span data-ttu-id="689f5-172">L'API che si usa per aprire una risorsa condivisa deve corrispondere all'API usata per creare la risorsa condivisa.</span><span class="sxs-lookup"><span data-stu-id="689f5-172">The API that you use to open a shared resource must match the API that you used to create the shared resource.</span></span> <span data-ttu-id="689f5-173">Se ad esempio è stato usato [**createTexture**](/windows/desktop/api) per creare una risorsa condivisa, è necessario usare **createTexture** per aprire la risorsa condivisa. Se è stato usato [**CreateRenderTarget**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createrendertarget) per creare una risorsa condivisa, è necessario usare **CreateRenderTarget** per aprire la risorsa condivisa e così via.</span><span class="sxs-lookup"><span data-stu-id="689f5-173">For example, if you used [**CreateTexture**](/windows/desktop/api) to create a shared resource, you must use **CreateTexture** to open that shared resource; if you used [**CreateRenderTarget**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createrendertarget) to create a shared resource, you must use **CreateRenderTarget** to open that shared resource;and so on.</span></span>
-   <span data-ttu-id="689f5-174">Quando si apre una risorsa condivisa, è necessario specificare il \_ valore predefinito di D3DPOOL.</span><span class="sxs-lookup"><span data-stu-id="689f5-174">When you open a shared resource, you must specify D3DPOOL\_DEFAULT.</span></span>
-   <span data-ttu-id="689f5-175">Le risorse bloccabili, ad esempio le trame con D3DUSAGE \_ dinamici, i buffer di vertici e gli indici, possono comportare una riduzione delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="689f5-175">Lockable resources (textures with D3DUSAGE\_DYNAMIC, vertex buffers and index buffers, for instance) can experience poor performance when shared.</span></span> <span data-ttu-id="689f5-176">Il Rendertargets bloccabile non verrà condiviso in alcuni componenti hardware.</span><span class="sxs-lookup"><span data-stu-id="689f5-176">Lockable rendertargets will fail to be shared on some hardware.</span></span>
-   <span data-ttu-id="689f5-177">I riferimenti a una risorsa condivisa tra processi devono avere le stesse dimensioni della risorsa originale.</span><span class="sxs-lookup"><span data-stu-id="689f5-177">References to a cross-process shared resource must have the same dimensions as the original resource.</span></span> <span data-ttu-id="689f5-178">Quando si passa un handle tra più processi, includere le informazioni sulla dimensione in modo che sia possibile creare il riferimento in modo identico.</span><span class="sxs-lookup"><span data-stu-id="689f5-178">When passing a handle across process, include the dimension information so that the reference can be created identically.</span></span>
-   <span data-ttu-id="689f5-179">Le aree condivise tra processi non forniscono alcun meccanismo di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="689f5-179">Shared cross-process surfaces provide no synchronization mechanism.</span></span> <span data-ttu-id="689f5-180">Le modifiche di lettura/scrittura in una superficie condivisa potrebbero non riflettere la vista di un processo di riferimento della superficie quando previsto.</span><span class="sxs-lookup"><span data-stu-id="689f5-180">Read/write changes to a shared surface may not reflect a referencing process's view of the surface when expected.</span></span> <span data-ttu-id="689f5-181">Per fornire la sincronizzazione, utilizzare le query di evento o bloccare la trama.</span><span class="sxs-lookup"><span data-stu-id="689f5-181">To provide synchronization, use event queries or lock the texture.</span></span>
-   <span data-ttu-id="689f5-182">Solo il processo che inizialmente crea una risorsa condivisa può bloccarlo, ovvero qualsiasi processo che apre un riferimento a tale risorsa condivisa non può bloccarlo.</span><span class="sxs-lookup"><span data-stu-id="689f5-182">Only the process that initially creates a shared resource can lock it (any process that opens a reference to that shared resource cannot lock it).</span></span>
-   <span data-ttu-id="689f5-183">Se una risorsa condivisa è bloccata, non viene convalidata da altri processi per verificare se la risorsa è disponibile.</span><span class="sxs-lookup"><span data-stu-id="689f5-183">If a shared resource is locked, there is no validation for other processes to know if the resource is available.</span></span>

## <a name="srgb-conversion-before-blending"></a><span data-ttu-id="689f5-184">Conversione sRGB prima della fusione</span><span class="sxs-lookup"><span data-stu-id="689f5-184">sRGB Conversion Before Blending</span></span>

<span data-ttu-id="689f5-185">È ora possibile verificare se il dispositivo è in grado di convertire i dati della pipeline in sRGB prima della fusione del buffer di frame.</span><span class="sxs-lookup"><span data-stu-id="689f5-185">You can now check to see if the device can convert pipeline data to sRGB before frame-buffer blending.</span></span> <span data-ttu-id="689f5-186">Ciò implica che il dispositivo converte i valori della destinazione di rendering da sRGB.</span><span class="sxs-lookup"><span data-stu-id="689f5-186">This implies that the device converts the render-target values from sRGB.</span></span> <span data-ttu-id="689f5-187">Per verificare se la conversione è supportata dall'hardware, verificare la presenza di questo limite:</span><span class="sxs-lookup"><span data-stu-id="689f5-187">To see if conversion is supported by the hardware, check for this cap:</span></span>


```
D3DPMISCCAPS_POSTBLENDSRGBCONVERT
```



<span data-ttu-id="689f5-188">Questo limite identifica l'hardware che supporta la conversione a sRGB prima della fusione.</span><span class="sxs-lookup"><span data-stu-id="689f5-188">This cap identifies hardware that supports conversion to sRGB before blending.</span></span> <span data-ttu-id="689f5-189">Questa funzionalità è importante per il rendering di alta qualità da FP16 Frame Buffers in Gestione finestre desktop (DWM).</span><span class="sxs-lookup"><span data-stu-id="689f5-189">This capability is important for the high quality rendering from fp16 frame buffers in the desktop window manager (DWM).</span></span>

## <a name="stretchrect-improvements"></a><span data-ttu-id="689f5-190">Miglioramenti di StretchRect</span><span class="sxs-lookup"><span data-stu-id="689f5-190">StretchRect Improvements</span></span>

<span data-ttu-id="689f5-191">Nelle versioni precedenti di DirectX, StretchRect presenta diverse restrizioni per gestire driver diversi (vedere IDirect3DDevice9:: StretchRect).</span><span class="sxs-lookup"><span data-stu-id="689f5-191">In previous versions of DirectX, StretchRect has many restrictions to accommodate different drivers (see IDirect3DDevice9::StretchRect).</span></span> <span data-ttu-id="689f5-192">Windows Vista è basato sul modello di driver di dispositivo Windows (WDDM).</span><span class="sxs-lookup"><span data-stu-id="689f5-192">Windows Vista is built on the Windows Device Driver Model (WDDM).</span></span> <span data-ttu-id="689f5-193">Questo nuovo modello di driver è molto più solido e consente ai driver di gestire i casi speciali nell'hardware.</span><span class="sxs-lookup"><span data-stu-id="689f5-193">This new driver model is much more robust, and allows drivers to handle special cases in the hardware.</span></span>

<span data-ttu-id="689f5-194">In generale, l'unica restrizione rimanente è che la destinazione di rendering deve essere stata creata con l'utilizzo della destinazione di rendering (D3DUSAGE \_ RENDERTARGET).</span><span class="sxs-lookup"><span data-stu-id="689f5-194">In general, the only remaining restriction is that the render target must have been created with render-target usage (D3DUSAGE\_RENDERTARGET).</span></span> <span data-ttu-id="689f5-195">Questa restrizione viene sollevata se si esegue una copia semplice, in cui l'origine e la destinazione hanno lo stesso formato, le stesse dimensioni e non sono presenti sottorettangoli.</span><span class="sxs-lookup"><span data-stu-id="689f5-195">This restriction is lifted if you are doing a simple copy (where the source and dest are the same format, same size and there are no sub-rectangles).</span></span>

## <a name="texture-creation-in-system-memory"></a><span data-ttu-id="689f5-196">Creazione di trame nella memoria di sistema</span><span class="sxs-lookup"><span data-stu-id="689f5-196">Texture Creation in System Memory</span></span>

<span data-ttu-id="689f5-197">Le applicazioni che richiedono maggiore flessibilità sull'utilizzo, l'allocazione e l'eliminazione della memoria di sistema possono ora creare trame da un puntatore di memoria di sistema.</span><span class="sxs-lookup"><span data-stu-id="689f5-197">Applications that need more flexibility over the use, allocation and deletion of the system memory can now create textures from a system memory pointer.</span></span> <span data-ttu-id="689f5-198">Ad esempio, un'applicazione potrebbe creare una trama Direct3D da un puntatore bitmap di memoria di sistema GDI.</span><span class="sxs-lookup"><span data-stu-id="689f5-198">For example, an application could create a Direct3D texture from a GDI system-memory bitmap pointer.</span></span>

<span data-ttu-id="689f5-199">Per creare una trama di questo tipo, è necessario eseguire due operazioni:</span><span class="sxs-lookup"><span data-stu-id="689f5-199">You need to do two things to create such a texture:</span></span>

-   <span data-ttu-id="689f5-200">Allocare memoria di sistema sufficiente per mantenere la superficie della trama.</span><span class="sxs-lookup"><span data-stu-id="689f5-200">Allocate enough system memory to hold the texture surface.</span></span> <span data-ttu-id="689f5-201">Il numero minimo di byte è larghezza x altezza x byte per pixel.</span><span class="sxs-lookup"><span data-stu-id="689f5-201">The minimum number of bytes is width x height x bytes per pixel.</span></span>
-   <span data-ttu-id="689f5-202">Passare l'indirizzo di un puntatore alla superficie di memoria di sistema per il \* parametro handle a IDirect3DDevice9:: createTexture.</span><span class="sxs-lookup"><span data-stu-id="689f5-202">Pass the address of a pointer to your system memory surface for the HANDLE\* parameter to IDirect3DDevice9::CreateTexture.</span></span>

<span data-ttu-id="689f5-203">Ecco il prototipo di funzione per IDirect3DDevice9:: CreateTexture:</span><span class="sxs-lookup"><span data-stu-id="689f5-203">Here is the function prototype for IDirect3DDevice9::CreateTexture:</span></span>


```
STDMETHOD(CreateTexture)(THIS_ UINT Width, UINT Height, UINT Levels, 
    DWORD Usage, D3DFORMAT Format, D3DPOOL Pool, IDirect3DTexture9** ppTexture, 
    HANDLE* pSharedHandle)
```



<span data-ttu-id="689f5-204">Una trama con memoria di sistema presenta le restrizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="689f5-204">A system-memory texture has the following restrictions:</span></span>

-   <span data-ttu-id="689f5-205">Il pitch della trama deve essere uguale alla larghezza della trama per il numero di byte per pixel.</span><span class="sxs-lookup"><span data-stu-id="689f5-205">The texture pitch must equal texture width times the number of bytes per pixel.</span></span>
-   <span data-ttu-id="689f5-206">Quando si usano formati compressi (formati DXT), l'applicazione è responsabile dell'allocazione delle dimensioni corrette.</span><span class="sxs-lookup"><span data-stu-id="689f5-206">When using compressed formats (DXT formats), the application is responsible for allocating the correct size.</span></span>
-   <span data-ttu-id="689f5-207">Sono supportate solo le trame con un solo livello di mipmap.</span><span class="sxs-lookup"><span data-stu-id="689f5-207">Only textures with a single mipmap level are supported.</span></span>
-   <span data-ttu-id="689f5-208">Il valore passato a CreateTexture per l'argomento del pool deve essere D3DPOOL \_ SYSTEMMEM.</span><span class="sxs-lookup"><span data-stu-id="689f5-208">The value passed to CreateTexture for the Pool argument must be D3DPOOL\_SYSTEMMEM.</span></span>
-   <span data-ttu-id="689f5-209">Questa API esegue il wrapping della memoria fornita in una trama.</span><span class="sxs-lookup"><span data-stu-id="689f5-209">This API wraps the supplied memory in a texture.</span></span> <span data-ttu-id="689f5-210">Non deallocare la memoria fino a quando non viene eseguita.</span><span class="sxs-lookup"><span data-stu-id="689f5-210">Do not deallocate this memory until you are done with it.</span></span>

 

 
