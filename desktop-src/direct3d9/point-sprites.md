---
description: Il supporto per gli sprite di punti in Direct3D 9 Abilita il rendering a prestazioni elevate di punti (sistemi particellari). Gli sprite punto sono generalizzazioni di punti generici che consentono di eseguire il rendering di forme arbitrarie come definito dalle trame.
ms.assetid: a9046c7e-779c-4f33-b8ff-f189da3dcfc5
title: Sprite punto (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c988a104eb65b5e2d7e56ff2444e8d422c422df2
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "104521706"
---
# <a name="point-sprites-direct3d-9"></a><span data-ttu-id="3f0da-104">Sprite punto (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="3f0da-104">Point Sprites (Direct3D 9)</span></span>

<span data-ttu-id="3f0da-105">Il supporto per gli sprite di punti in Direct3D 9 Abilita il rendering a prestazioni elevate di punti (sistemi particellari).</span><span class="sxs-lookup"><span data-stu-id="3f0da-105">Support for point sprites in Direct3D 9 enables the high-performance rendering of points (particle systems).</span></span> <span data-ttu-id="3f0da-106">Gli sprite punto sono generalizzazioni di punti generici che consentono di eseguire il rendering di forme arbitrarie come definito dalle trame.</span><span class="sxs-lookup"><span data-stu-id="3f0da-106">Point sprites are generalizations of generic points that enable arbitrary shapes to be rendered as defined by textures.</span></span>

-   [<span data-ttu-id="3f0da-107">Controlli di rendering primitivi Point</span><span class="sxs-lookup"><span data-stu-id="3f0da-107">Point Primitive Rendering Controls</span></span>](#point-primitive-rendering-controls)
-   [<span data-ttu-id="3f0da-108">Calcoli delle dimensioni del punto</span><span class="sxs-lookup"><span data-stu-id="3f0da-108">Point Size Computations</span></span>](#point-size-computations)
-   [<span data-ttu-id="3f0da-109">Rendering di punti</span><span class="sxs-lookup"><span data-stu-id="3f0da-109">Point Rendering</span></span>](#point-rendering)

## <a name="point-primitive-rendering-controls"></a><span data-ttu-id="3f0da-110">Controlli di rendering primitivi Point</span><span class="sxs-lookup"><span data-stu-id="3f0da-110">Point Primitive Rendering Controls</span></span>

<span data-ttu-id="3f0da-111">Direct3D 9 supporta parametri aggiuntivi per controllare il rendering degli sprite punto (primitive di punti).</span><span class="sxs-lookup"><span data-stu-id="3f0da-111">Direct3D 9 supports additional parameters to control the rendering of point sprites (point primitives).</span></span> <span data-ttu-id="3f0da-112">Questi parametri consentono che i punti siano di dimensioni variabili e che venga applicata una mappa di trama completa.</span><span class="sxs-lookup"><span data-stu-id="3f0da-112">These parameters enable points to be of variable size and have a full texture map applied.</span></span> <span data-ttu-id="3f0da-113">La dimensione di ogni punto è determinata dalle dimensioni specificate dall'applicazione combinate con una funzione basata sulla distanza calcolata da Direct3D.</span><span class="sxs-lookup"><span data-stu-id="3f0da-113">The size of each point is determined by an application-specified size combined with a distance-based function computed by Direct3D.</span></span> <span data-ttu-id="3f0da-114">L'applicazione può specificare le dimensioni dei punti in base al vertice o impostando D3DRS \_ POINTSIZE, che si applica ai punti senza una dimensione per ogni vertice.</span><span class="sxs-lookup"><span data-stu-id="3f0da-114">The application can specify point size either as per-vertex or by setting D3DRS\_POINTSIZE, which applies to points without a per-vertex size.</span></span> <span data-ttu-id="3f0da-115">Le dimensioni del punto sono espresse in unità di spazio della fotocamera, ad eccezione del caso in cui l'applicazione superi i vertici FVF (Flexible Vertex Format) post-trasformazione.</span><span class="sxs-lookup"><span data-stu-id="3f0da-115">The point size is expressed in camera space units, with the exception of when the application is passing post-transformed flexible vertex format (FVF) vertices.</span></span> <span data-ttu-id="3f0da-116">In questo caso, la funzione basata sulla distanza non viene applicata e le dimensioni del punto sono espresse in unità di pixel sulla destinazione di rendering.</span><span class="sxs-lookup"><span data-stu-id="3f0da-116">In this case, the distance-based function is not applied and the point size is expressed in units of pixels on the render target.</span></span>

<span data-ttu-id="3f0da-117">Le coordinate di trama calcolate e usate quando i punti di rendering dipendono dall'impostazione di D3DRS \_ POINTSPRITEENABLE.</span><span class="sxs-lookup"><span data-stu-id="3f0da-117">The texture coordinates computed and used when rendering points depends on the setting of D3DRS\_POINTSPRITEENABLE.</span></span> <span data-ttu-id="3f0da-118">Quando questo valore è impostato su **true**, le coordinate di trama sono impostate in modo che ogni punto visualizzi la trama completa.</span><span class="sxs-lookup"><span data-stu-id="3f0da-118">When this value is set to **TRUE**, the texture coordinates are set so that each point displays the full texture.</span></span> <span data-ttu-id="3f0da-119">In generale, questo è utile solo quando i punti sono significativamente più grandi di un pixel.</span><span class="sxs-lookup"><span data-stu-id="3f0da-119">In general, this is only useful when points are significantly larger than one pixel.</span></span> <span data-ttu-id="3f0da-120">Quando D3DRS \_ POINTSPRITEENABLE è impostato su **false**, per l'intero punto viene utilizzata la coordinata di trama del vertice di ogni punto.</span><span class="sxs-lookup"><span data-stu-id="3f0da-120">When D3DRS\_POINTSPRITEENABLE is set to **FALSE**, each point's vertex texture coordinate is used for the entire point.</span></span>

## <a name="point-size-computations"></a><span data-ttu-id="3f0da-121">Calcoli delle dimensioni del punto</span><span class="sxs-lookup"><span data-stu-id="3f0da-121">Point Size Computations</span></span>

<span data-ttu-id="3f0da-122">La dimensione del punto è determinata da D3DRS \_ POINTSCALEENABLE.</span><span class="sxs-lookup"><span data-stu-id="3f0da-122">Point size is determined by D3DRS\_POINTSCALEENABLE.</span></span> <span data-ttu-id="3f0da-123">Se questo valore è impostato su **false**, le dimensioni del punto specificate dall'applicazione vengono utilizzate come dimensioni dello spazio dello schermo (post-trasformazione).</span><span class="sxs-lookup"><span data-stu-id="3f0da-123">If this value is set to **FALSE**, the application-specified point size is used as the screen-space (post-transformed) size.</span></span> <span data-ttu-id="3f0da-124">I vertici passati a Direct3D nello spazio dello schermo non hanno dimensioni dei punti calcolate. le dimensioni del punto specificate vengono interpretate come dimensioni dello spazio dello schermo.</span><span class="sxs-lookup"><span data-stu-id="3f0da-124">Vertices that are passed to Direct3D in screen space do not have point sizes computed; the specified point size is interpreted as screen-space size.</span></span>

<span data-ttu-id="3f0da-125">Se D3DRS \_ POINTSCALEENABLE è **true**, Direct3D calcola le dimensioni dei punti dello spazio dello schermo in base alla formula seguente.</span><span class="sxs-lookup"><span data-stu-id="3f0da-125">If D3DRS\_POINTSCALEENABLE is **TRUE**, Direct3D computes the screen-space point size according to the following formula.</span></span> <span data-ttu-id="3f0da-126">Le dimensioni del punto specificate dall'applicazione sono espresse in unità di spazio fotocamera.</span><span class="sxs-lookup"><span data-stu-id="3f0da-126">The application-specified point size is expressed in camera space units.</span></span>

<span data-ttu-id="3f0da-127">S = VH \* s <sub>i</sub> \* sqrt (1/(A + B \* D ₑ + C \* (D ₑ ²)))</span><span class="sxs-lookup"><span data-stu-id="3f0da-127">S ₛ = Vₕ \* S <sub>i</sub> \* sqrt(1/(A + B \* D ₑ + C \*( D ₑ² )))</span></span>

<span data-ttu-id="3f0da-128">In questa formula, le dimensioni del punto di input, S <sub>i</sub>, sono per vertice o il valore dello stato di \_ rendering POINTSIZE di D3DRS.</span><span class="sxs-lookup"><span data-stu-id="3f0da-128">In this formula, the input point size, S <sub>i</sub>, is either per-vertex or the value of the D3DRS\_POINTSIZE render state.</span></span> <span data-ttu-id="3f0da-129">I fattori di scala punto, D3DRS \_ POINTSCALE \_ A, D3DRS \_ POINTSCALE \_ B e D3DRS \_ POINTSCALE \_ c, sono rappresentati dai punti A, B e c. L'altezza del viewport, V h, è il membro di altezza della struttura [**D3DVIEWPORT9**](d3dviewport9.md) che rappresenta il viewport.</span><span class="sxs-lookup"><span data-stu-id="3f0da-129">The point scale factors, D3DRS\_POINTSCALE\_A, D3DRS\_POINTSCALE\_B, and D3DRS\_POINTSCALE\_C, are represented by the points A, B, and C. The height of the viewport, V ₕ, is the [**D3DVIEWPORT9**](d3dviewport9.md) structure's Height member representing the viewport.</span></span> <span data-ttu-id="3f0da-130">D ₑ, la distanza dall'occhio alla posizione (occhio all'origine) viene calcolata prendendo la posizione dello spazio degli occhi del punto (X ₑ, Y ₑ, Z ₑ) ed eseguendo l'operazione seguente.</span><span class="sxs-lookup"><span data-stu-id="3f0da-130">D ₑ, the distance from the eye to the position (the eye at the origin), is computed by taking the eye space position of the point (Xₑ, Yₑ, Zₑ) and performing the following operation.</span></span>

<span data-ttu-id="3f0da-131">D ₑ = sqrt (X ₑ ² + Y ₑ ² + Z ₑ ²)</span><span class="sxs-lookup"><span data-stu-id="3f0da-131">D ₑ = sqrt (Xₑ² + Y ₑ² + Z ₑ²)</span></span>

<span data-ttu-id="3f0da-132">Le dimensioni massime del punto, PM ₐ ₓ, vengono determinate prendendo il minore del membro MaxPointSize della struttura [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) o lo stato di \_ rendering D3DRS POINTSIZE \_ max.</span><span class="sxs-lookup"><span data-stu-id="3f0da-132">The maximum point size, Pₘₐₓ, is determined by taking the smaller of either the [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's MaxPointSize member or the D3DRS\_POINTSIZE\_MAX render state.</span></span> <span data-ttu-id="3f0da-133">La dimensione minima del punto, P<sub>min</sub>, è determinata dall'esecuzione di una query sul valore di D3DRS \_ POINTSIZE \_ min.</span><span class="sxs-lookup"><span data-stu-id="3f0da-133">The minimum point size, P<sub>min</sub>, is determined by querying the value of D3DRS\_POINTSIZE\_MIN.</span></span> <span data-ttu-id="3f0da-134">Pertanto, le dimensioni finali del punto dello spazio dello schermo, S, vengono determinate nel modo seguente.</span><span class="sxs-lookup"><span data-stu-id="3f0da-134">Thus the final screen-space point size, S, is determined in the following manner.</span></span>

-   <span data-ttu-id="3f0da-135">Se SS > PM ₐ ₓ, S = P m ₐ ₓ</span><span class="sxs-lookup"><span data-stu-id="3f0da-135">If Sₛ > Pₘₐₓ, then S = P ₘₐₓ</span></span>
-   <span data-ttu-id="3f0da-136">Se S < P<sub>min</sub>, s = p <sub>min</sub></span><span class="sxs-lookup"><span data-stu-id="3f0da-136">if S < P<sub>min</sub>, then S = P <sub>min</sub></span></span>
-   <span data-ttu-id="3f0da-137">In caso contrario, S = S</span><span class="sxs-lookup"><span data-stu-id="3f0da-137">Otherwise, S = S ₛ</span></span>

## <a name="point-rendering"></a><span data-ttu-id="3f0da-138">Rendering di punti</span><span class="sxs-lookup"><span data-stu-id="3f0da-138">Point Rendering</span></span>

<span data-ttu-id="3f0da-139">Un punto dello spazio dello schermo, P = (X, Y, Z, W), della dimensione dello spazio dello schermo S viene rasterizzato come un quadrilatero dei quattro vertici seguenti.</span><span class="sxs-lookup"><span data-stu-id="3f0da-139">A screen-space point, P = ( X, Y, Z, W), of screen-space size S is rasterized as a quadrilateral of the following four vertices.</span></span>

<span data-ttu-id="3f0da-140">((X + S/2, Y + S/2, Z, W), (X + S/2, Y-S/2, Z, W), (X-S/2, Y-S/2, Z, W), (X-S/2, Y + S/2, Z, W))</span><span class="sxs-lookup"><span data-stu-id="3f0da-140">(( X + S/2, Y + S/2, Z, W), ( X + S/2, Y - S/2, Z, W), ( X - S/2, Y- S/2, Z, W), ( X - S/2, Y + S/2, Z, W))</span></span>

<span data-ttu-id="3f0da-141">Gli attributi di colore dei vertici vengono duplicati in ogni vertice. Pertanto, ogni punto viene sempre sottoposto a rendering con colori costanti.</span><span class="sxs-lookup"><span data-stu-id="3f0da-141">The vertex color attributes are duplicated at each vertex; thus each point is always rendered with constant colors.</span></span>

<span data-ttu-id="3f0da-142">L'assegnazione degli indici di trama è controllata dall' \_ impostazione dello stato di rendering POINTSPRITEENABLE di D3DRS.</span><span class="sxs-lookup"><span data-stu-id="3f0da-142">The assignment of texture indices is controlled by the D3DRS\_POINTSPRITEENABLE render state setting.</span></span> <span data-ttu-id="3f0da-143">Se D3DRS \_ POINTSPRITEENABLE è impostato su **false**, le coordinate di trama dei vertici vengono duplicate in corrispondenza di ogni vertice.</span><span class="sxs-lookup"><span data-stu-id="3f0da-143">If D3DRS\_POINTSPRITEENABLE is set to **FALSE**, then the vertex texture coordinates are duplicated at each vertex.</span></span> <span data-ttu-id="3f0da-144">Se D3DRS \_ POINTSPRITEENABLE è impostato su **true**, le coordinate di trama in corrispondenza dei quattro vertici vengono impostate sui valori seguenti.</span><span class="sxs-lookup"><span data-stu-id="3f0da-144">If D3DRS\_POINTSPRITEENABLE is set to **TRUE**, then the texture coordinates at the four vertices are set to the following values.</span></span>

<span data-ttu-id="3f0da-145">(0. F, 0. F), (0. F, 1. F), (1. F, 0. F), (1. F, 1. F)</span><span class="sxs-lookup"><span data-stu-id="3f0da-145">(0.F, 0.F), (0.F, 1.F), (1.F, 0.F), (1.F, 1.F)</span></span>

<span data-ttu-id="3f0da-146">Vedere il diagramma seguente.</span><span class="sxs-lookup"><span data-stu-id="3f0da-146">This is shown in the following diagram.</span></span>

![diagramma di un quadrato con vertici con etichetta per i valori delle coordinate (u, v) e (x, y)](images/spritepoint.png)

<span data-ttu-id="3f0da-148">Quando il ritaglio è abilitato, i punti vengono ritagliati nel modo seguente.</span><span class="sxs-lookup"><span data-stu-id="3f0da-148">When clipping is enabled, points are clipped in the following manner.</span></span> <span data-ttu-id="3f0da-149">Se il vertice supera l'intervallo di valori di profondità, MinZ e MaxZ della struttura [**D3DVIEWPORT9**](d3dviewport9.md) , in cui deve essere eseguito il rendering di una scena, il punto esiste al di fuori della vista tronco e non viene sottoposto a rendering.</span><span class="sxs-lookup"><span data-stu-id="3f0da-149">If the vertex exceeds the range of depth values - MinZ and MaxZ of the [**D3DVIEWPORT9**](d3dviewport9.md) structure - into which a scene is to be rendered, the point exists outside of the view frustum and is not rendered.</span></span> <span data-ttu-id="3f0da-150">Se il punto, prendendo in considerazione le dimensioni del punto, è completamente esterno al viewport in X e Y, il punto non viene sottoposto a rendering; viene eseguito il rendering dei punti rimanenti.</span><span class="sxs-lookup"><span data-stu-id="3f0da-150">If the point, taking into account the point size, is completely outside the viewport in X and Y, then the point is not rendered; the remaining points are rendered.</span></span> <span data-ttu-id="3f0da-151">È possibile che la posizione del punto si trovi all'esterno del viewport in X o Y e sia ancora parzialmente visibile.</span><span class="sxs-lookup"><span data-stu-id="3f0da-151">It is possible for the point position to be outside the viewport in X or Y and still be partially visible.</span></span>

<span data-ttu-id="3f0da-152">I punti possono essere ritagliati o meno correttamente nei piani di ritaglio definiti dall'utente.</span><span class="sxs-lookup"><span data-stu-id="3f0da-152">Points may or may not be correctly clipped to user-defined clip planes.</span></span> <span data-ttu-id="3f0da-153">Se D3DPMISCCAPS \_ CLIPPLANESCALEDPOINTS non è impostato nel membro PrimitiveMiscCaps della struttura [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) , i punti vengono ritagliati a piani di ritaglio definiti dall'utente basati solo sulla posizione del vertice, ignorando le dimensioni del punto.</span><span class="sxs-lookup"><span data-stu-id="3f0da-153">If D3DPMISCCAPS\_CLIPPLANESCALEDPOINTS is not set in the [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's PrimitiveMiscCaps member, points are clipped to user-defined clip planes based only on the vertex position, ignoring the point size.</span></span> <span data-ttu-id="3f0da-154">In questo caso, viene eseguito il rendering completo dei punti ridimensionati quando la posizione del vertice si trova all'interno dei piani di ritaglio ed eliminati quando la posizione del vertice si trova all'esterno di un piano di ritaglio.</span><span class="sxs-lookup"><span data-stu-id="3f0da-154">In this case, scaled points are fully rendered when the vertex position is inside the clip planes, and discarded when the vertex position is outside a clip plane.</span></span> <span data-ttu-id="3f0da-155">Le applicazioni possono impedire potenziali artefatti aggiungendo una geometria del bordo per ritagliare i piani di dimensioni massime delle dimensioni massime del punto.</span><span class="sxs-lookup"><span data-stu-id="3f0da-155">Applications can prevent potential artifacts by adding a border geometry to clip planes that is as large as the maximum point size.</span></span>

<span data-ttu-id="3f0da-156">Se \_ viene impostato il bit D3DPMISCCAPS CLIPPLANESCALEDPOINTS, i punti ridimensionati vengono ritagliati correttamente in piani di ritaglio definiti dall'utente.</span><span class="sxs-lookup"><span data-stu-id="3f0da-156">If the D3DPMISCCAPS\_CLIPPLANESCALEDPOINTS bit is set, then the scaled points are correctly clipped to user-defined clip planes.</span></span>

<span data-ttu-id="3f0da-157">L'elaborazione dei vertici hardware può supportare o meno le dimensioni dei punti.</span><span class="sxs-lookup"><span data-stu-id="3f0da-157">Hardware vertex processing may or may not support point size.</span></span> <span data-ttu-id="3f0da-158">Se, ad esempio, viene creato un dispositivo con D3DCREATE \_ hardware \_ VERTEXPROCESSING in un dispositivo HAL (Hardware Abstraction Layer) \_ , D3DDEVTYPE Hal, che ha il membro MaxPointSize della struttura [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) impostato su 1,0 o 0,0, tutti i punti sono un singolo pixel.</span><span class="sxs-lookup"><span data-stu-id="3f0da-158">For example, if a device is created with D3DCREATE\_HARDWARE\_VERTEXPROCESSING on a hardware abstraction layer (HAL) device (D3DDEVTYPE\_HAL) that has the [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's MaxPointSize member set to 1.0 or 0.0, then all points are a single pixel.</span></span> <span data-ttu-id="3f0da-159">Per eseguire il rendering degli sprite del punto pixel minori di 1,0, è necessario usare i vertici FVF TL (trasformati e illuminati) o l'elaborazione dei vertici software (D3DCREATE \_ software \_ VERTEXPROCESSING), nel qual caso il runtime di Direct3D emula il rendering Point sprite.</span><span class="sxs-lookup"><span data-stu-id="3f0da-159">To render pixel point sprites less than 1.0, you must use either FVF TL (transformed and lit) vertices or software vertex processing (D3DCREATE\_SOFTWARE\_VERTEXPROCESSING), in which case the Direct3D run time emulates the point sprite rendering.</span></span>

<span data-ttu-id="3f0da-160">Un dispositivo hardware che esegue l'elaborazione dei vertici e supporta punti sprite-MaxPointSize impostato su un valore superiore a 1,0 f-è necessario per eseguire il calcolo delle dimensioni per gli sprite non trasformati ed è necessario per impostare correttamente il POINTSIZE POINTSIZED3DRS per vertice o D3DRS \_ \_ per i vertici TL.</span><span class="sxs-lookup"><span data-stu-id="3f0da-160">A hardware device that does vertex processing and supports point sprites - MaxPointSize set to greater than 1.0f - is required to perform the size computation for nontransformed sprites and is required to properly set the per-vertex or D3DRS\_POINTSIZED3DRS\_POINTSIZE for TL vertices.</span></span>

<span data-ttu-id="3f0da-161">Per informazioni sulle regole di rendering per punti, linee e triangoli, vedere [regole di rasterizzazione (Direct3D 9)](rasterization-rules.md).</span><span class="sxs-lookup"><span data-stu-id="3f0da-161">For information about rendering rules for points, lines, and triangles, see [Rasterization Rules (Direct3D 9)](rasterization-rules.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="3f0da-162">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="3f0da-162">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3f0da-163">Pipeline Vertex</span><span class="sxs-lookup"><span data-stu-id="3f0da-163">Vertex Pipeline</span></span>](vertex-pipeline.md)
</dt> </dl>

 

 



