---
description: Gestione delle risorse è il processo in cui le risorse vengono promosse dall'archiviazione di memoria di sistema ad archiviazione accessibile dal dispositivo ed eliminate dall'archiviazione accessibile dal dispositivo.
ms.assetid: 4aa55313-b86c-48e7-829a-a0917c2ebae7
title: Gestione delle risorse (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 30ef7a8be0e71c652b6e3f2ed467e866fd922791
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "104225374"
---
# <a name="managing-resources-direct3d-9"></a><span data-ttu-id="ece0d-103">Gestione delle risorse (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="ece0d-103">Managing Resources (Direct3D 9)</span></span>

<span data-ttu-id="ece0d-104">Gestione delle risorse è il processo in cui le risorse vengono promosse dall'archiviazione di memoria di sistema ad archiviazione accessibile dal dispositivo ed eliminate dall'archiviazione accessibile dal dispositivo.</span><span class="sxs-lookup"><span data-stu-id="ece0d-104">Resource management is the process where resources are promoted from system-memory storage to device-accessible storage and discarded from device-accessible storage.</span></span> <span data-ttu-id="ece0d-105">Il tempo di esecuzione Direct3D dispone di un proprio algoritmo di gestione basato su una tecnica di priorità meno recente.</span><span class="sxs-lookup"><span data-stu-id="ece0d-105">The Direct3D run time has its own management algorithm based on a least-recently-used priority technique.</span></span> <span data-ttu-id="ece0d-106">Direct3D passa a una tecnica di priorità usata più di recente quando rileva che un maggior numero di risorse rispetto a quelle che possono coesistere nella memoria accessibile dal dispositivo viene usato in un singolo frame, tra [**IDirect3DDevice9:: BeginScene**](/windows/desktop/api) e [**IDirect3DDevice9:: EndScene**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-endscene) chiamate.</span><span class="sxs-lookup"><span data-stu-id="ece0d-106">Direct3D switches to a most-recently-used priority technique when it detects that more resources than can coexist in device-accessible memory are used in a single frame - between [**IDirect3DDevice9::BeginScene**](/windows/desktop/api) and [**IDirect3DDevice9::EndScene**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-endscene) calls.</span></span>

<span data-ttu-id="ece0d-107">Usare il [**flag \_ predefinito D3DPOOL**](./d3dpool.md) al momento della creazione per specificare che una risorsa è posizionata nel pool di memoria più appropriato per il set di utilizzi richiesti per la risorsa specificata.</span><span class="sxs-lookup"><span data-stu-id="ece0d-107">Use the [**D3DPOOL\_DEFAULT**](./d3dpool.md) flag at creation time to specify that a resource are placed in the memory pool most appropriate for the set of usages requested for the given resource.</span></span> <span data-ttu-id="ece0d-108">Si tratta in genere di memoria video, che include sia la memoria video locale che la memoria Accelerated Graphics Port (AGP).</span><span class="sxs-lookup"><span data-stu-id="ece0d-108">This is usually video memory, including both local video memory and accelerated graphics port (AGP) memory.</span></span> <span data-ttu-id="ece0d-109">Le risorse nel pool predefinito non vengono mantenute attraverso le transizioni tra gli stati persi e operativi del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="ece0d-109">Resources in the default pool do not persist through transitions between the lost and operational states of the device.</span></span> <span data-ttu-id="ece0d-110">Queste risorse devono essere rilasciate prima di chiamare Reset e devono quindi essere ricreate.</span><span class="sxs-lookup"><span data-stu-id="ece0d-110">These resources must be released before calling reset and must then be re-created.</span></span>

<span data-ttu-id="ece0d-111">Usare il [**flag \_ gestito D3DPOOL**](./d3dpool.md) al momento della creazione per specificare una risorsa gestita.</span><span class="sxs-lookup"><span data-stu-id="ece0d-111">Use the [**D3DPOOL\_MANAGED**](./d3dpool.md) flag at creation time to specify a managed resource.</span></span> <span data-ttu-id="ece0d-112">Le risorse gestite vengono mantenute attraverso le transizioni tra gli stati persi e operativi del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="ece0d-112">Managed resources persist through transitions between the lost and operational states of the device.</span></span> <span data-ttu-id="ece0d-113">Queste risorse sono disponibili sia nella memoria video che nella memoria di sistema.</span><span class="sxs-lookup"><span data-stu-id="ece0d-113">These resources exist both in video and system memory.</span></span> <span data-ttu-id="ece0d-114">Una risorsa gestita verrà copiata nella memoria video quando necessario durante il rendering.</span><span class="sxs-lookup"><span data-stu-id="ece0d-114">A managed resource will be copied into video memory when it is needed during rendering.</span></span> <span data-ttu-id="ece0d-115">Il dispositivo può essere ripristinato con una chiamata a [**IDirect3DDevice9:: Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset)e tali risorse continuano a funzionare normalmente senza essere ricaricate con i dati.</span><span class="sxs-lookup"><span data-stu-id="ece0d-115">The device can be restored with a call to [**IDirect3DDevice9::Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset), and such resources continue to function normally without being reloaded with data.</span></span> <span data-ttu-id="ece0d-116">Tuttavia, se il dispositivo deve essere eliminato e ricreato, è necessario ricreare tutte le risorse.</span><span class="sxs-lookup"><span data-stu-id="ece0d-116">However, if the device must be destroyed and re-created, all resources must be re-created.</span></span>

<span data-ttu-id="ece0d-117">La gestione delle risorse non è consigliata per le risorse che cambiano con frequenza elevata.</span><span class="sxs-lookup"><span data-stu-id="ece0d-117">Resource management is not recommended for resources which change with high frequency.</span></span> <span data-ttu-id="ece0d-118">Ad esempio, i buffer vertex e index usati per attraversare un grafico della scena ogni frame che esegue il rendering della geometria visibile all'utente cambia ogni frame.</span><span class="sxs-lookup"><span data-stu-id="ece0d-118">For example, vertex and index buffers which are used to traverse a scene graph every frame rendering only geometry visible to the user changes every frame.</span></span> <span data-ttu-id="ece0d-119">Poiché le risorse gestite sono supportate dalla memoria di sistema, le modifiche costanti devono essere aggiornate nella memoria di sistema, il che può causare un peggioramento delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="ece0d-119">Since managed resources are backed by system memory, the constant changes must be updated in system memory, which can cause a severe degradation in performance.</span></span> <span data-ttu-id="ece0d-120">Per questo scenario specifico, è necessario usare [**D3DPOOL \_ default**](./d3dpool.md) insieme a [**D3DUSAGE \_ Dynamic**](d3dusage.md) .</span><span class="sxs-lookup"><span data-stu-id="ece0d-120">For this particular scenario, [**D3DPOOL\_DEFAULT**](./d3dpool.md) along with [**D3DUSAGE\_DYNAMIC**](d3dusage.md) should be used.</span></span>

<span data-ttu-id="ece0d-121">Un altro esempio per cui la gestione delle risorse non è consigliata e non è consentita in modo esplicito dal runtime è la gestione di una trama creata con [**D3DUSAGE \_ RENDERTARGET**](d3dusage.md).</span><span class="sxs-lookup"><span data-stu-id="ece0d-121">Another example for which resource management is not recommended (and explicitly not allowed by the runtime) is management of a texture created with [**D3DUSAGE\_RENDERTARGET**](d3dusage.md).</span></span> <span data-ttu-id="ece0d-122">Se la memoria utilizzata dalle destinazioni di rendering è stata gestita dal runtime, è necessario che il relativo contenuto venga costantemente copiato nella memoria di sistema durante il rendering, causando un notevole calo delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="ece0d-122">If the memory used by render targets were managed by the runtime, it's contents would have to constantly be copied to system memory during rendering, causing large performance penalties.</span></span> <span data-ttu-id="ece0d-123">Per questo motivo, è necessario creare le destinazioni di rendering nel pool predefinito.</span><span class="sxs-lookup"><span data-stu-id="ece0d-123">For this reason, render targets must be created in the default pool.</span></span> <span data-ttu-id="ece0d-124">Se è necessario l'accesso alla CPU dei dati contenuti in una destinazione di rendering, i dati devono essere copiati in una risorsa creata in [**D3DPOOL \_ SYSTEMMEM**](./d3dpool.md) con [**IDirect3DDevice9:: UpdateTexture**](/windows/desktop/api)o [**IDirect3DDevice9:: UpdateSurface**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatesurface)</span><span class="sxs-lookup"><span data-stu-id="ece0d-124">If CPU access of the data contained in a render target is needed, the data must be copied to a resource created in [**D3DPOOL\_SYSTEMMEM**](./d3dpool.md) using [**IDirect3DDevice9::UpdateTexture**](/windows/desktop/api), or [**IDirect3DDevice9::UpdateSurface**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatesurface)</span></span>

<span data-ttu-id="ece0d-125">Per altre informazioni sullo stato di smarrimento di un dispositivo, vedere [dispositivi persi (Direct3D 9)](lost-devices.md).</span><span class="sxs-lookup"><span data-stu-id="ece0d-125">For more information about the lost state of a device, see [Lost Devices (Direct3D 9)](lost-devices.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="ece0d-126">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="ece0d-126">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ece0d-127">Risorse Direct3D</span><span class="sxs-lookup"><span data-stu-id="ece0d-127">Direct3D Resources</span></span>](direct3d-resources.md)
</dt> </dl>

 

 
