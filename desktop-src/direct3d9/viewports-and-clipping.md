---
description: Concettualmente, un viewport è un rettangolo bidimensionale (2D) in cui viene proiettata una scena 3D.
ms.assetid: eddadaa1-9181-47fa-8530-44aa46fea286
title: Viewport e ritaglio (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d57f64d17f7abf4e370406f984fa50037be6d44e
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "104123342"
---
# <a name="viewports-and-clipping-direct3d-9"></a><span data-ttu-id="3a8e1-103">Viewport e ritaglio (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="3a8e1-103">Viewports and Clipping (Direct3D 9)</span></span>

<span data-ttu-id="3a8e1-104">Concettualmente, un viewport è un rettangolo bidimensionale (2D) in cui viene proiettata una scena 3D.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-104">Conceptually, a viewport is a two-dimensional (2D) rectangle into which a 3D scene is projected.</span></span> <span data-ttu-id="3a8e1-105">In Direct3D il rettangolo esiste come coordinate all'interno di una superficie Direct3D utilizzata dal sistema come destinazione di rendering.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-105">In Direct3D, the rectangle exists as coordinates within a Direct3D surface that the system uses as a rendering target.</span></span> <span data-ttu-id="3a8e1-106">La trasformazione proiezione converte i vertici nel sistema di coordinate usato per il viewport.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-106">The projection transformation converts vertices into the coordinate system used for the viewport.</span></span> <span data-ttu-id="3a8e1-107">Un viewport viene usato anche per specificare l'intervallo di valori di profondità in una superficie di destinazione di rendering in cui verrà eseguito il rendering di una scena (in genere da 0,0 a 1,0).</span><span class="sxs-lookup"><span data-stu-id="3a8e1-107">A viewport is also used to specify the range of depth values on a render-target surface into which a scene will be rendered (usually 0.0 to 1.0).</span></span>

## <a name="the-viewing-frustum"></a><span data-ttu-id="3a8e1-108">Tronco di visualizzazione</span><span class="sxs-lookup"><span data-stu-id="3a8e1-108">The Viewing Frustum</span></span>

<span data-ttu-id="3a8e1-109">Un tronco di visualizzazione è un volume 3D in una scena posizionata rispetto alla fotocamera del viewport.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-109">A viewing frustum is 3D volume in a scene positioned relative to the viewport's camera.</span></span> <span data-ttu-id="3a8e1-110">La forma del volume influiscono sulla modalità di proiezione dei modelli dallo spazio della fotocamera sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-110">The shape of the volume affects how models are projected from camera space onto the screen.</span></span> <span data-ttu-id="3a8e1-111">Il tipo di proiezione più comune, una proiezione prospettica, è responsabile di rendere gli oggetti vicini alla fotocamera più grandi degli oggetti a distanza.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-111">The most common type of projection, a perspective projection, is responsible for making objects near the camera appear bigger than objects in the distance.</span></span> <span data-ttu-id="3a8e1-112">Per la visualizzazione della prospettiva, la visualizzazione tronco può essere visualizzata come una piramide, con la fotocamera posizionata in corrispondenza del suggerimento, come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-112">For perspective viewing, the viewing frustum can be visualized as a pyramid, with the camera positioned at the tip as shown in the following illustration.</span></span> <span data-ttu-id="3a8e1-113">Questa piramide è intersecata da un piano di ritaglio anteriore e posteriore.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-113">This pyramid is intersected by a front and back clipping plane.</span></span> <span data-ttu-id="3a8e1-114">Il volume all'interno della piramide tra i piani di ritaglio anteriore e posteriore è il tronco di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-114">The volume within the pyramid between the front and back clipping planes is the viewing frustum.</span></span> <span data-ttu-id="3a8e1-115">Gli oggetti sono visibili solo quando si trovano in questo volume.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-115">Objects are visible only when they are in this volume.</span></span>

![illustrazione di un frustrum di visualizzazione con un piano di ritaglio anteriore e posteriore](images/frustum.png)

<span data-ttu-id="3a8e1-117">Se si immagina che ci si trova in una stanza scura e si esamina una finestra quadrata, si visualizza un tronco di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-117">If you imagine that you are standing in a dark room and looking through a square window, you are visualizing a viewing frustum.</span></span> <span data-ttu-id="3a8e1-118">In questa analogia, il piano di ritaglio vicino è la finestra e il piano di ritaglio indietro è quello che interrompe la visualizzazione, ovvero il grattacielo lungo la strada, le montagne della distanza o niente.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-118">In this analogy, the near clipping plane is the window, and the back clipping plane is whatever finally interrupts your view - the skyscraper across the street, the mountains in the distance, or nothing at all.</span></span> <span data-ttu-id="3a8e1-119">È possibile visualizzare tutti gli elementi all'interno della piramide troncata che inizia dalla finestra e termina con qualsiasi altra operazione che interrompa la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-119">You can see everything inside the truncated pyramid that starts at the window and ends with whatever interrupts your view, and you can see nothing else.</span></span>

<span data-ttu-id="3a8e1-120">Il tronco di visualizzazione è definito da FOV (campo di visualizzazione) e dalle distanze dei piani di ritaglio anteriore e posteriore, specificato nelle coordinate z, come illustrato nel diagramma seguente.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-120">The viewing frustum is defined by fov (field of view) and by the distances of the front and back clipping planes, specified in z-coordinates, as shown in the following diagram.</span></span>

![diagramma della tronco di visualizzazione](images/fovdiag.png)

<span data-ttu-id="3a8e1-122">In questo diagramma la variabile D è la distanza tra la camera e l'origine dello spazio definito nell'ultima parte della pipeline Geometry, ovvero la trasformazione visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-122">In this diagram, the variable D is the distance from the camera to the origin of the space that was defined in the last part of the geometry pipeline - the viewing transformation.</span></span> <span data-ttu-id="3a8e1-123">Si tratta dello spazio intorno al quale si organizzano i limiti di visualizzazione tronco.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-123">This is the space around which you arrange the limits of your viewing frustum.</span></span> <span data-ttu-id="3a8e1-124">Per informazioni sull'uso di questa variabile D per compilare la matrice di proiezione, vedere la [trasformazione proiezione (Direct3D 9)](projection-transform.md) .</span><span class="sxs-lookup"><span data-stu-id="3a8e1-124">For information about how this D variable is used to build the projection matrix, see the [Projection Transform (Direct3D 9)](projection-transform.md)</span></span>

## <a name="viewport-rectangle"></a><span data-ttu-id="3a8e1-125">Rettangolo viewport</span><span class="sxs-lookup"><span data-stu-id="3a8e1-125">Viewport Rectangle</span></span>

<span data-ttu-id="3a8e1-126">Il rettangolo del viewport viene definito in C++ usando la struttura [**D3DVIEWPORT9**](d3dviewport9.md) .</span><span class="sxs-lookup"><span data-stu-id="3a8e1-126">You define the viewport rectangle in C++ by using the [**D3DVIEWPORT9**](d3dviewport9.md) structure.</span></span> <span data-ttu-id="3a8e1-127">La struttura D3DVIEWPORT9 viene utilizzata con i metodi di manipolazione del viewport seguenti esposti dall'interfaccia IDirect3DDevice9.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-127">The D3DVIEWPORT9 structure is used with the following viewport manipulation methods exposed by the IDirect3DDevice9 interface.</span></span>

-   [<span data-ttu-id="3a8e1-128">**IDirect3DDevice9:: getViewport**</span><span class="sxs-lookup"><span data-stu-id="3a8e1-128">**IDirect3DDevice9::GetViewport**</span></span>](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getviewport)
-   [<span data-ttu-id="3a8e1-129">**IDirect3DDevice9:: seviewport**</span><span class="sxs-lookup"><span data-stu-id="3a8e1-129">**IDirect3DDevice9::SetViewport**</span></span>](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport)

<span data-ttu-id="3a8e1-130">La struttura D3DVIEWPORT9 contiene quattro membri, X, Y, Width e Height, che definiscono l'area della superficie di destinazione di rendering in cui verrà eseguito il rendering di una scena.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-130">The D3DVIEWPORT9 structure contains four members - X, Y, Width, Height - that define the area of the render-target surface into which a scene will be rendered.</span></span> <span data-ttu-id="3a8e1-131">Questi valori corrispondono al rettangolo di destinazione o al rettangolo del viewport, come illustrato nel diagramma seguente.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-131">These values correspond to the destination rectangle, or viewport rectangle, as shown in the following diagram.</span></span>

![diagramma del rettangolo del viewport](images/destrect.png)

<span data-ttu-id="3a8e1-133">I valori specificati per i membri X, Y, larghezza e altezza sono coordinate dello schermo rispetto all'angolo superiore sinistro della superficie di destinazione di rendering.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-133">The values you specify for the X, Y, Width, Height members are screen coordinates relative to the upper-left corner of the render-target surface.</span></span> <span data-ttu-id="3a8e1-134">La struttura definisce due membri aggiuntivi (MinZ e MaxZ) che indicano gli intervalli di profondità in cui verrà eseguito il rendering della scena.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-134">The structure defines two additional members (MinZ and MaxZ) that indicate the depth-ranges into which the scene will be rendered.</span></span>

<span data-ttu-id="3a8e1-135">Direct3D presuppone che il volume di ritaglio del viewport sia compreso tra-1,0 e 1,0 in X e da 1,0 a-1,0 in Y. Queste sono le impostazioni utilizzate più spesso dalle applicazioni in passato.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-135">Direct3D assumes that the viewport clipping volume ranges from -1.0 to 1.0 in X, and from 1.0 to -1.0 in Y. These were the settings used most often by applications in the past.</span></span> <span data-ttu-id="3a8e1-136">È possibile modificare le proporzioni del viewport prima del ritaglio utilizzando la [trasformazione proiezione](projection-transform.md).</span><span class="sxs-lookup"><span data-stu-id="3a8e1-136">You can adjust the viewport aspect ratio before clipping using the [projection transform](projection-transform.md).</span></span>

> [!Note]  
> <span data-ttu-id="3a8e1-137">MinZ e MaxZ indicano gli intervalli di profondità in cui verrà eseguito il rendering della scena e non vengono usati per il ritaglio.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-137">MinZ and MaxZ indicate the depth-ranges into which the scene will be rendered and are not used for clipping.</span></span> <span data-ttu-id="3a8e1-138">Per la maggior parte delle applicazioni i membri vengono impostati su 0,0 e 1,0 per consentire al sistema di eseguire il rendering nell'intero intervallo di valori di profondità nel buffer di profondità.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-138">Most applications will set these members to 0.0 and 1.0 to enable the system to render to the entire range of depth values in the depth buffer.</span></span> <span data-ttu-id="3a8e1-139">In alcuni casi, è possibile ottenere effetti speciali utilizzando altri intervalli di profondità.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-139">In some cases, you can achieve special effects by using other depth ranges.</span></span> <span data-ttu-id="3a8e1-140">Ad esempio, per eseguire il rendering di una visualizzazione Heads-up in un gioco, è possibile impostare entrambi i valori su 0,0 per forzare il rendering degli oggetti in una scena in primo piano da parte del sistema. in alternativa, è possibile impostare entrambi su 1,0 per eseguire il rendering di un oggetto che deve essere sempre in background.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-140">For instance, to render a heads-up display in a game, you can set both values to 0.0 to force the system to render objects in a scene in the foreground, or you might set them both to 1.0 to render an object that should always be in the background.</span></span>

 

<span data-ttu-id="3a8e1-141">Le dimensioni utilizzate nei membri X, Y, larghezza e altezza della struttura [**D3DVIEWPORT9**](d3dviewport9.md) per un viewport definiscono la posizione e le dimensioni del viewport sulla superficie di destinazione di rendering.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-141">The dimensions used in the X, Y, Width, Height members of the [**D3DVIEWPORT9**](d3dviewport9.md) structure for a viewport define the location and dimensions of the viewport on the render-target surface.</span></span> <span data-ttu-id="3a8e1-142">Questi valori sono nelle coordinate dello schermo, in relazione all'angolo superiore sinistro della superficie.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-142">These values are in screen coordinates, relative to the upper-left corner of the surface.</span></span>

<span data-ttu-id="3a8e1-143">Direct3D usa il percorso e le dimensioni del viewport per ridimensionare i vertici in modo da adattarli a una scena sottoposta a rendering nella posizione appropriata sulla superficie di destinazione.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-143">Direct3D uses the viewport location and dimensions to scale the vertices to fit a rendered scene into the appropriate location on the target surface.</span></span> <span data-ttu-id="3a8e1-144">Internamente, Direct3D inserisce questi valori nella matrice seguente applicata a ogni vertice.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-144">Internally, Direct3D inserts these values into the following matrix that is applied to each vertex.</span></span>

![equazione della matrice applicata a ogni vertice](images/vpscale.png)

<span data-ttu-id="3a8e1-146">Questa matrice consente di ridimensionare i vertici in base alle dimensioni del viewport e all'intervallo di profondità desiderato e di convertirli nella posizione appropriata sulla superficie di destinazione di rendering.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-146">This matrix scales vertices according to the viewport dimensions and desired depth range and translates them to the appropriate location on the render-target surface.</span></span> <span data-ttu-id="3a8e1-147">La matrice capovolge anche la coordinata y in modo da riflettere un'origine dello schermo nell'angolo superiore sinistro con y crescente verso il basso.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-147">The matrix also flips the y-coordinate to reflect a screen origin at the top-left corner with y increasing downward.</span></span> <span data-ttu-id="3a8e1-148">Dopo l'applicazione di questa matrice, i vertici sono ancora omogenei, ovvero sono ancora presenti come \[ vertici x, y, z e w, che \] devono essere convertiti in coordinate non omogenee prima di essere inviati al rasterizzatore.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-148">After this matrix is applied, vertices are still homogeneous - that is, they still exist as \[x,y,z,w\] vertices - and they must be converted to non-homogeneous coordinates before being sent to the rasterizer.</span></span>

> [!Note]  
> <span data-ttu-id="3a8e1-149">La matrice di ridimensionamento del viewport incorpora i membri MinZ e MaxZ della struttura [**D3DVIEWPORT9**](d3dviewport9.md) per ridimensionare i vertici in modo da adattarsi all'intervallo di profondità \[ Minz, MaxZ \] .</span><span class="sxs-lookup"><span data-stu-id="3a8e1-149">The viewport scaling matrix incorporates the MinZ and MaxZ members of the [**D3DVIEWPORT9**](d3dviewport9.md) structure to scale vertices to fit the depth range \[MinZ, MaxZ\].</span></span> <span data-ttu-id="3a8e1-150">Rappresenta una semantica diversa rispetto alle versioni precedenti di DirectX, in cui tali membri sono stati utilizzati per il ritaglio.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-150">This represents different semantics from previous releases of DirectX, in which these members were used for clipping.</span></span>

 

> [!Note]  
> <span data-ttu-id="3a8e1-151">Le applicazioni in genere impostano rispettivamente MinZ e MaxZ su 0,0 e 1,0 per provocare il rendering del sistema nell'intero intervallo di profondità.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-151">Applications typically set MinZ and MaxZ to 0.0 and 1.0 respectively to cause the system to render to the entire depth range.</span></span> <span data-ttu-id="3a8e1-152">Tuttavia, è possibile usare altri valori per ottenere determinati effetti.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-152">However, you can use other values to achieve certain affects.</span></span> <span data-ttu-id="3a8e1-153">Ad esempio, è possibile impostare entrambi i valori su 0,0 per forzare tutti gli oggetti in primo piano o impostare entrambi su 1,0 per eseguire il rendering di tutti gli oggetti in background.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-153">For example, you might set both values to 0.0 to force all objects into the foreground, or set both to 1.0 to render all objects into the background.</span></span>

 

## <a name="clearing-a-viewport"></a><span data-ttu-id="3a8e1-154">Cancellazione di un viewport</span><span class="sxs-lookup"><span data-stu-id="3a8e1-154">Clearing a Viewport</span></span>

<span data-ttu-id="3a8e1-155">La cancellazione del viewport Reimposta il contenuto del rettangolo viewport sulla superficie di destinazione di rendering.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-155">Clearing the viewport resets the contents of the viewport rectangle on the render-target surface.</span></span> <span data-ttu-id="3a8e1-156">Può inoltre cancellare il rettangolo nelle superfici del buffer di profondità e dello stencil.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-156">It can also clear the rectangle in the depth and stencil buffer surfaces.</span></span>

<span data-ttu-id="3a8e1-157">Usare [**IDirect3DDevice9:: Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) per cancellare il viewport.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-157">Use [**IDirect3DDevice9::Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) to clear the viewport.</span></span> <span data-ttu-id="3a8e1-158">Il metodo accetta uno o più rettangoli che definiscono le aree sull'area da cancellare.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-158">The method accepts one or more rectangles that define the areas on the surface being cleared.</span></span> <span data-ttu-id="3a8e1-159">Impostando il parametro count su 1 e il parametro pRects sull'indirizzo di un singolo rettangolo che copre l'intera area del viewport, l'intero viewport viene cancellato.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-159">Setting the Count parameter to 1, and the pRects parameter to the address of a single rectangle that covers the entire viewport area will clear the entire viewport.</span></span> <span data-ttu-id="3a8e1-160">Un altro modo per cancellare l'intero viewport consiste nell'impostare il parametro pRects su **null** e il parametro count su 0.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-160">Another way to clear the entire viewport is to set the pRects parameter to **NULL** and the Count parameter to 0.</span></span>

<span data-ttu-id="3a8e1-161">È possibile utilizzare [**IDirect3DDevice9:: Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) per cancellare i bit dello stencil all'interno di un buffer di profondità.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-161">The [**IDirect3DDevice9::Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) can be used for clearing stencil bits within a depth buffer.</span></span> <span data-ttu-id="3a8e1-162">È sufficiente impostare il parametro Flags per determinare il funzionamento di **IDirect3DDevice9:: Clear** con la destinazione di rendering e i buffer di profondità o stencil associati.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-162">Simply set the Flags parameter to determine how **IDirect3DDevice9::Clear** works with the render target and any associated depth or stencil buffers.</span></span> <span data-ttu-id="3a8e1-163">Il \_ flag di destinazione D3DCLEAR cancellerà il viewport usando un colore RGBA arbitrario fornito nell'argomento Color (questo non è il colore del materiale).</span><span class="sxs-lookup"><span data-stu-id="3a8e1-163">The D3DCLEAR\_TARGET flag will clear the viewport using an arbitrary RGBA color that you provide in the Color argument (this is not the material color).</span></span> <span data-ttu-id="3a8e1-164">Il flag D3DCLEAR ZBUFFER cancellerà \_ il buffer di profondità a una profondità arbitraria specificata in Z: 0,0 è la distanza più vicina e 1,0 è il più lontano.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-164">The D3DCLEAR\_ZBUFFER flag will clear the depth buffer to an arbitrary depth you specify in Z: 0.0 is the closest distance, and 1.0 is the farthest.</span></span> <span data-ttu-id="3a8e1-165">Il \_ flag dello stencil D3DCLEAR Reimposta i bit dello stencil sul valore fornito nell'argomento dello stencil.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-165">The D3DCLEAR\_STENCIL flag will reset the stencil bits to the value you provide in the Stencil argument.</span></span> <span data-ttu-id="3a8e1-166">È possibile utilizzare numeri interi compresi tra 0 e 2n-1, dove n è la profondità di bit del buffer dello stencil.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-166">You can use integers that range from 0 to 2n-1, where n is the stencil buffer bit depth.</span></span>

<span data-ttu-id="3a8e1-167">In alcune situazioni, è possibile che venga eseguito il rendering solo in piccole parti della destinazione di rendering e delle superfici del buffer di profondità.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-167">In some situations, you might be rendering only to small portions of the render target and depth buffer surfaces.</span></span> <span data-ttu-id="3a8e1-168">I metodi Clear consentono inoltre di cancellare più aree delle superfici in un'unica chiamata.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-168">The clear methods also enable you to clear multiple areas of your surfaces in a single call.</span></span> <span data-ttu-id="3a8e1-169">A tale scopo, impostare il parametro count sul numero di rettangoli che si desidera cancellare e specificare l'indirizzo del primo rettangolo in una matrice di rettangoli nel parametro pRects.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-169">Do this by setting the Count parameter to the number of rectangles you want cleared, and specify the address of the first rectangle in an array of rectangles in the pRects parameter.</span></span>

## <a name="set-up-the-viewport-for-clipping"></a><span data-ttu-id="3a8e1-170">Configurare il viewport per il ritaglio</span><span class="sxs-lookup"><span data-stu-id="3a8e1-170">Set Up the Viewport for Clipping</span></span>

<span data-ttu-id="3a8e1-171">I risultati della matrice di proiezione determinano il volume di ritaglio nello spazio di proiezione come:</span><span class="sxs-lookup"><span data-stu-id="3a8e1-171">The results of the projection matrix determine the clipping volume in projection space as:</span></span>

<span data-ttu-id="3a8e1-172">-w<sub>c</sub><= x<sub>c</sub><= w<sub>c</sub></span><span class="sxs-lookup"><span data-stu-id="3a8e1-172">-w<sub>c</sub><= x<sub>c</sub><= w<sub>c</sub></span></span>

<span data-ttu-id="3a8e1-173">-w<sub>c</sub><= y<sub>c</sub><= w<sub>c</sub></span><span class="sxs-lookup"><span data-stu-id="3a8e1-173">-w<sub>c</sub><= y<sub>c</sub><= w<sub>c</sub></span></span>

<span data-ttu-id="3a8e1-174">0 <= z<sub>c</sub><= w<sub>c</sub></span><span class="sxs-lookup"><span data-stu-id="3a8e1-174">0 <= z<sub>c</sub><= w<sub>c</sub></span></span>

<span data-ttu-id="3a8e1-175">Dove: x, y, z e w rappresentano le coordinate dei vertici dopo l'applicazione della trasformazione di proiezione.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-175">Where: x, y, z, and w represent the vertex coordinates after the projection transformation is applied.</span></span> <span data-ttu-id="3a8e1-176">Eventuali vertici che includono un componente x, y o z al di fuori di questi intervalli vengono ritagliati, se il ritaglio è abilitato (comportamento predefinito).</span><span class="sxs-lookup"><span data-stu-id="3a8e1-176">Any vertices that have an x-, y-, or z-component outside these ranges are clipped, if clipping is enabled (the default behavior).</span></span>

<span data-ttu-id="3a8e1-177">Fatta eccezione per i buffer dei vertici, le applicazioni abilitano o disabilitano il ritaglio tramite lo stato di rendering del [**\_ ritaglio D3DRS**](./d3drenderstatetype.md) .</span><span class="sxs-lookup"><span data-stu-id="3a8e1-177">With the exception of vertex buffers, applications enable or disable clipping by way of the [**D3DRS\_CLIPPING**](./d3drenderstatetype.md) render state.</span></span> <span data-ttu-id="3a8e1-178">Le informazioni di ritaglio per i buffer dei vertici vengono generate durante l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-178">Clipping information for vertex buffers is generated during processing.</span></span> <span data-ttu-id="3a8e1-179">Per altre informazioni, vedere [elaborazione dei vertici delle funzioni (Direct3D 9)](fixed-function-vertex-processing.md) e [elaborazione di vertici programmabili (Direct3D 9)](programmable-vertex-processing.md).</span><span class="sxs-lookup"><span data-stu-id="3a8e1-179">For more information, see [Fixed Function Vertex Processing (Direct3D 9)](fixed-function-vertex-processing.md) and [Programmable Vertex Processing (Direct3D 9)](programmable-vertex-processing.md).</span></span>

<span data-ttu-id="3a8e1-180">Direct3D non ritaglia i vertici trasformati di una primitiva da un buffer dei vertici a meno che non provenga da [**IDirect3DDevice9::P rocessvertices**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-processvertices).</span><span class="sxs-lookup"><span data-stu-id="3a8e1-180">Direct3D does not clip transformed vertices of a primitive from a vertex buffer unless it comes from [**IDirect3DDevice9::ProcessVertices**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-processvertices).</span></span> <span data-ttu-id="3a8e1-181">Se si eseguono trasformazioni personalizzate e si ha bisogno di Direct3D per eseguire il ritaglio, è consigliabile non usare i buffer dei vertici.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-181">If you are doing your own transforms and need Direct3D to do the clipping, you should not use vertex buffers.</span></span> <span data-ttu-id="3a8e1-182">In questo caso, l'applicazione attraversa i dati per trasformarli.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-182">In this case, the application traverses the data to transform it.</span></span> <span data-ttu-id="3a8e1-183">Direct3D attraversa i dati una seconda volta per ritagliarli, quindi il driver esegue il rendering dei dati, il che non è efficiente.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-183">Direct3D traverses the data a second time to clip it, and then the driver renders the data, which is inefficient.</span></span> <span data-ttu-id="3a8e1-184">Quindi, se l'applicazione trasforma i dati, deve anche ritagliare i dati.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-184">So, if the application transforms the data, is should also clip the data.</span></span>

<span data-ttu-id="3a8e1-185">Quando il dispositivo riceve i vertici pre-trasformati e illuminati (T&L vertici) che devono essere ritagliati, per eseguire l'operazione di ritaglio i vertici vengono trasformati in uno spazio di ridimensionamento usando le informazioni di RHW e le informazioni del viewport del vertice.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-185">When the device receives pre-transformed and lit vertices (T&L vertices) that need to be clipped, in order to perform the clipping operation the vertices are back-transformed to the clipping space using the vertex's reciprocal homogeneous w (RHW) and the viewport information.</span></span> <span data-ttu-id="3a8e1-186">Il ritaglio viene quindi eseguito.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-186">Clipping is then performed.</span></span> <span data-ttu-id="3a8e1-187">Non tutti i dispositivi sono in grado di eseguire questo back-Transform per ritagliare i vertici a T&L.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-187">Not all devices are capable of performing this back-transform in order to clip T&L vertices.</span></span>

<span data-ttu-id="3a8e1-188">La \_ funzionalità del dispositivo CLIPTLVERTS D3DPMISCCAPS indica se il dispositivo è in grado di ritagliare i vertici T&L.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-188">The D3DPMISCCAPS\_CLIPTLVERTS device capability indicates whether the device is capable of clipping T&L vertices.</span></span> <span data-ttu-id="3a8e1-189">Se questa funzionalità non è impostata, l'applicazione è responsabile del ritaglio dei vertici T&L che intende inviare al dispositivo per il rendering.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-189">If this capability is not set, the application is responsible for clipping the T&L vertices that it intends to send down to the device to be rendered.</span></span> <span data-ttu-id="3a8e1-190">Il dispositivo è sempre in grado di ritagliare i vertici di T&L nella modalità di elaborazione dei vertici software (indipendentemente dal fatto che il dispositivo sia stato creato in modalità di elaborazione dei vertici software o passato alla modalità di elaborazione dei vertici software).</span><span class="sxs-lookup"><span data-stu-id="3a8e1-190">The device is always capable of clipping T&L vertices in the software vertex processing mode (regardless of whether the device is created in the software vertex processing mode, or switched to the software vertex processing mode).</span></span>

<span data-ttu-id="3a8e1-191">L'unico requisito per la configurazione dei parametri del viewport per un dispositivo di rendering consiste nell'impostare il volume di ritaglio del viewport.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-191">The only requirement for configuring the viewport parameters for a rendering device is to set the viewport's clipping volume.</span></span> <span data-ttu-id="3a8e1-192">A tale scopo, inizializzare e impostare i valori di ritaglio per il volume di ritaglio e per la superficie di destinazione di rendering.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-192">To do this, you initialize and set clipping values for the clipping volume and for the render-target surface.</span></span> <span data-ttu-id="3a8e1-193">I viewport vengono in genere impostati per eseguire il rendering nell'area completa della superficie di destinazione di rendering, ma questo non è un requisito.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-193">Viewports are commonly set up to render to the full area of the render-target surface, but this isn't a requirement.</span></span>

<span data-ttu-id="3a8e1-194">Per ottenere questo risultato in C++, è possibile usare le impostazioni seguenti per i membri della struttura [**D3DVIEWPORT9**](d3dviewport9.md) .</span><span class="sxs-lookup"><span data-stu-id="3a8e1-194">You can use the following settings for the members of the [**D3DVIEWPORT9**](d3dviewport9.md) structure to achieve this in C++.</span></span>


```
D3DVIEWPORT9 viewData = { 0, 0, width, height, 0.0f, 1.0f };
```



<span data-ttu-id="3a8e1-195">Dopo aver impostato i valori nella struttura [**D3DVIEWPORT9**](d3dviewport9.md) , applicare i parametri del viewport al dispositivo chiamando il relativo metodo [**IDirect3DDevice9:: seviewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) .</span><span class="sxs-lookup"><span data-stu-id="3a8e1-195">After setting values in the [**D3DVIEWPORT9**](d3dviewport9.md) structure, apply the viewport parameters to the device by calling its [**IDirect3DDevice9::SetViewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) method.</span></span> <span data-ttu-id="3a8e1-196">L'esempio di codice seguente illustra l'aspetto di questa chiamata.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-196">The following code example shows what this call might look like.</span></span>


```
HRESULT hr;

hr = pd3dDevice->SetViewport(&viewData);
if(FAILED(hr))
    return hr;
```



<span data-ttu-id="3a8e1-197">Se la chiamata ha esito positivo, i parametri del viewport vengono impostati e diverranno effettivi la volta successiva che viene chiamato un metodo di rendering.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-197">If the call succeeds, the viewport parameters are set and will take effect the next time a rendering method is called.</span></span> <span data-ttu-id="3a8e1-198">Per apportare modifiche ai parametri del viewport, è sufficiente aggiornare i valori nella struttura [**D3DVIEWPORT9**](d3dviewport9.md) e chiamare di nuovo [**IDirect3DDevice9:: seviewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) .</span><span class="sxs-lookup"><span data-stu-id="3a8e1-198">To make changes to the viewport parameters, just update the values in the [**D3DVIEWPORT9**](d3dviewport9.md) structure and call [**IDirect3DDevice9::SetViewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) again.</span></span>

> [!Note]  
> <span data-ttu-id="3a8e1-199">I membri della struttura [**D3DVIEWPORT9**](d3dviewport9.md) MinZ e MaxZ indicano gli intervalli di profondità in cui verrà eseguito il rendering della scena e non vengono usati per il ritaglio.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-199">The [**D3DVIEWPORT9**](d3dviewport9.md) structure members MinZ and MaxZ indicate the depth-ranges into which the scene will be rendered and are not used for clipping.</span></span> <span data-ttu-id="3a8e1-200">La maggior parte delle applicazioni imposta questi membri su 0,0 e 1,0 per consentire al sistema di eseguire il rendering nell'intero intervallo di valori di profondità nel buffer di profondità.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-200">Most applications set these members to 0.0 and 1.0 to enable the system to render to the entire range of depth values in the depth buffer.</span></span> <span data-ttu-id="3a8e1-201">In alcuni casi, è possibile ottenere effetti speciali utilizzando altri intervalli di profondità.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-201">In some cases, you can achieve special effects by using other depth ranges.</span></span> <span data-ttu-id="3a8e1-202">Ad esempio, per eseguire il rendering di una visualizzazione Heads-up in un gioco, è possibile impostare entrambi i valori su 0,0 per forzare il rendering degli oggetti in una scena in primo piano da parte del sistema. in alternativa, è possibile impostare entrambi su 1,0 per eseguire il rendering di un oggetto che deve essere sempre in background.</span><span class="sxs-lookup"><span data-stu-id="3a8e1-202">For instance, to render a heads-up display in a game, you can set both values to 0.0 to force the system to render objects in a scene in the foreground, or you might set them both to 1.0 to render an object that should always be in the background.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="3a8e1-203">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="3a8e1-203">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3a8e1-204">Per iniziare</span><span class="sxs-lookup"><span data-stu-id="3a8e1-204">Getting Started</span></span>](getting-started.md)
</dt> </dl>

 

 
