---
description: Questa sezione illustra come usare le primitive di ordine superiore nell'applicazione.
ms.assetid: 7aa4f3ab-cfce-4f8f-a538-384f038fd324
title: Uso di Higher-Order primitive (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7e8d1447635c38e5e5df3d16ebca5ee3ee142020
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "104551420"
---
# <a name="using-higher-order-primitives-direct3d-9"></a><span data-ttu-id="6d3d1-103">Uso di Higher-Order primitive (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="6d3d1-103">Using Higher-Order Primitives (Direct3D 9)</span></span>

<span data-ttu-id="6d3d1-104">Questa sezione illustra come usare le primitive di ordine superiore nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-104">This section shows you how to use higher-order primitives in your application.</span></span>

-   [<span data-ttu-id="6d3d1-105">Determinazione del supporto di Higher-Order primitive</span><span class="sxs-lookup"><span data-stu-id="6d3d1-105">Determining Higher-Order Primitive Support</span></span>](#determining-higher-order-primitive-support)
-   [<span data-ttu-id="6d3d1-106">Disegno di patch</span><span class="sxs-lookup"><span data-stu-id="6d3d1-106">Drawing Patches</span></span>](#drawing-patches)
-   [<span data-ttu-id="6d3d1-107">Generazione di normali e coordinate di trama</span><span class="sxs-lookup"><span data-stu-id="6d3d1-107">Generating Normals and Texture Coordinates</span></span>](#generating-normals-and-texture-coordinates)

## <a name="determining-higher-order-primitive-support"></a><span data-ttu-id="6d3d1-108">Determinazione del supporto di Higher-Order primitive</span><span class="sxs-lookup"><span data-stu-id="6d3d1-108">Determining Higher-Order Primitive Support</span></span>

<span data-ttu-id="6d3d1-109">È possibile eseguire una query sul membro DevCaps della struttura [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) per determinare il livello di supporto per le operazioni che coinvolgono primitive di ordine superiore.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-109">The [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's DevCaps member can be queried to determine the level of support for operations involving higher-order primitives.</span></span> <span data-ttu-id="6d3d1-110">La tabella seguente elenca le funzionalità del dispositivo correlate alle primitive di ordine superiore in Direct3D 9.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-110">The following table lists the device capabilities related to higher-order primitives in Direct3D 9.</span></span>



| <span data-ttu-id="6d3d1-111">Funzionalità di dispositivo</span><span class="sxs-lookup"><span data-stu-id="6d3d1-111">Device capability</span></span>             | <span data-ttu-id="6d3d1-112">Descrizione</span><span class="sxs-lookup"><span data-stu-id="6d3d1-112">Description</span></span>                                                                                                                                                  |
|-------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="6d3d1-113">\_NPATCHES D3DDEVCAPS</span><span class="sxs-lookup"><span data-stu-id="6d3d1-113">D3DDEVCAPS\_NPATCHES</span></span>          | <span data-ttu-id="6d3d1-114">Il dispositivo supporta N-patch ed è basato su [triangoli PN curvi](https://alex.vlachos.com/graphics/CurvedPNTriangles.pdf) (un tipo speciale di triangoli di Bézier cubici).</span><span class="sxs-lookup"><span data-stu-id="6d3d1-114">Device supports N-patches and is based on [Curved PN Triangles](https://alex.vlachos.com/graphics/CurvedPNTriangles.pdf) (a special kind of cubic Bézier triangles).</span></span> |
| <span data-ttu-id="6d3d1-115">\_QUINTICRTPATCHES D3DDEVCAPS</span><span class="sxs-lookup"><span data-stu-id="6d3d1-115">D3DDEVCAPS\_QUINTICRTPATCHES</span></span>  | <span data-ttu-id="6d3d1-116">Il dispositivo supporta le curve di Bézier quinte e le spline B-spline.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-116">Device supports quintic Bezier curves and B-splines.</span></span>                                                                                                         |
| <span data-ttu-id="6d3d1-117">\_RTPATCHES D3DDEVCAPS</span><span class="sxs-lookup"><span data-stu-id="6d3d1-117">D3DDEVCAPS\_RTPATCHES</span></span>         | <span data-ttu-id="6d3d1-118">Il dispositivo supporta le patch rettangolari e triangolari (RT-patches).</span><span class="sxs-lookup"><span data-stu-id="6d3d1-118">Device supports rectangular and triangular patches (RT-patches).</span></span>                                                                                             |
| <span data-ttu-id="6d3d1-119">\_RTPATCHHANDLEZERO D3DDEVCAPS</span><span class="sxs-lookup"><span data-stu-id="6d3d1-119">D3DDEVCAPS\_RTPATCHHANDLEZERO</span></span> | <span data-ttu-id="6d3d1-120">RT: le patch possono essere disegnate in modo efficiente usando l'handle zero.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-120">RT-patches might be drawn efficiently using handle zero.</span></span>                                                                                                     |



 

<span data-ttu-id="6d3d1-121">Si noti che D3DDEVCAPS \_ RTPATCHHANDLEZERO non significa che è possibile disegnare una patch con handle zero.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-121">Note that D3DDEVCAPS\_RTPATCHHANDLEZERO does not mean that a patch with handle zero can be drawn.</span></span> <span data-ttu-id="6d3d1-122">Una patch con handle zero può essere sempre disegnata, indipendentemente dal fatto che questa funzionalità del dispositivo sia impostata o meno.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-122">A handle zero patch can always be drawn, whether this device capability is set or not.</span></span> <span data-ttu-id="6d3d1-123">Quando questa funzionalità è impostata, l'architettura hardware non richiede la memorizzazione nella cache di tutte le informazioni e le patch non memorizzate nella cache (handle zero) devono essere disegnate in modo efficiente come quelle memorizzate nella cache.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-123">When this capability is set, the hardware architecture does not require caching of any information and that uncached patches (handle zero) be drawn as efficiently as cached ones.</span></span>

## <a name="drawing-patches"></a><span data-ttu-id="6d3d1-124">Disegno di patch</span><span class="sxs-lookup"><span data-stu-id="6d3d1-124">Drawing Patches</span></span>

<span data-ttu-id="6d3d1-125">Direct3D 9 supporta due tipi di primitive o patch di ordine superiore.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-125">Direct3D 9 supports two types of higher-order primitives, or patches.</span></span> <span data-ttu-id="6d3d1-126">Queste sono denominate N-patch e patch Rect/Tri.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-126">These are referred to as N-Patches and Rect/Tri patches.</span></span> <span data-ttu-id="6d3d1-127">È possibile eseguire il rendering di n-patch usando qualsiasi chiamata di rendering del triangolo abilitando N-patch tramite la chiamata a [**IDirect3DDevice9:: SetNPatchMode**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setnpatchmode)(nSegments) con un valore nSegments maggiore di 1,0.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-127">N-patches can be rendered using any triangle rendering call by enabling N-patches through the call to [**IDirect3DDevice9::SetNPatchMode**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setnpatchmode)( nSegments ) with nSegments value greater than 1.0.</span></span> <span data-ttu-id="6d3d1-128">È necessario eseguire il rendering delle patch Rect/Tri usando i punti di ingresso espliciti seguenti.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-128">Rect/Tri patches must be rendered using the following explicit entry points.</span></span>

<span data-ttu-id="6d3d1-129">È possibile utilizzare i metodi seguenti per creare le patch.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-129">You can use the following methods to draw patches.</span></span>

-   <span data-ttu-id="6d3d1-130">[**IDirect3DDevice9::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch).</span><span class="sxs-lookup"><span data-stu-id="6d3d1-130">[**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch).</span></span> <span data-ttu-id="6d3d1-131">Per comprendere meglio il modo in cui viene fatto riferimento ai dati della patch nel buffer dei vertici, vedere [**D3DRECTPATCH \_ info**](d3drectpatch-info.md).</span><span class="sxs-lookup"><span data-stu-id="6d3d1-131">To better understand how the patch data is referenced in the vertex buffer, see [**D3DRECTPATCH\_INFO**](d3drectpatch-info.md).</span></span>
-   <span data-ttu-id="6d3d1-132">[**IDirect3DDevice9::D rawtripatch**](/windows/desktop/api).</span><span class="sxs-lookup"><span data-stu-id="6d3d1-132">[**IDirect3DDevice9::DrawTriPatch**](/windows/desktop/api).</span></span> <span data-ttu-id="6d3d1-133">Per comprendere meglio il modo in cui viene fatto riferimento ai dati della patch nel buffer dei vertici, vedere [**D3DTRIPATCH \_ info**](d3dtripatch-info.md).</span><span class="sxs-lookup"><span data-stu-id="6d3d1-133">To better understand how the patch data is referenced in the vertex buffer, see [**D3DTRIPATCH\_INFO**](d3dtripatch-info.md).</span></span>

<span data-ttu-id="6d3d1-134">[**IDirect3DDevice9::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) disegna una patch di ordine superiore rettangolare specificata dal parametro pRectPatchInfo usando i flussi attualmente impostati.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-134">[**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) draws a rectangular high-order patch specified by the pRectPatchInfo parameter using the currently set streams.</span></span> <span data-ttu-id="6d3d1-135">Il parametro handle viene usato per associare la patch a un handle, in modo che la volta successiva che viene disegnata la patch non sia necessario specificare nuovamente pRectPatchInfo.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-135">The Handle parameter is used to associate the patch with a handle, so that the next time the patch is drawn, there is no need to respecify pRectPatchInfo.</span></span> <span data-ttu-id="6d3d1-136">In questo modo è possibile pre-calcolare e memorizzare nella cache i coefficienti di differenza in avanti o altre informazioni, che a loro volta Abilita le chiamate successive a **IDirect3DDevice9::D rawrectpatch** usando lo stesso handle per un'esecuzione efficiente.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-136">This makes it possible to precompute and cache forward difference coefficients or other information, which in turn enables subsequent calls to **IDirect3DDevice9::DrawRectPatch** using the same handle to run efficiently.</span></span>

<span data-ttu-id="6d3d1-137">Per le patch statiche, un'applicazione deve impostare il vertex shader e i flussi appropriati, fornire le informazioni sulle patch nel parametro pRectPatchInfo e specificare un handle in modo che Direct3D possa acquisire e memorizzare nella cache le informazioni.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-137">It is intended that for static patches, an application would set the vertex shader and appropriate streams, supply patch information in the pRectPatchInfo parameter, and specify a handle so that Direct3D can capture and cache information.</span></span> <span data-ttu-id="6d3d1-138">L'applicazione può quindi chiamare [**IDirect3DDevice9::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) successivamente con pRectPatchInfo impostato su **null** per creare in modo efficiente la patch.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-138">The application can then call [**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) subsequently with pRectPatchInfo set to **NULL** to efficiently draw the patch.</span></span> <span data-ttu-id="6d3d1-139">Quando si disegna una patch memorizzata nella cache, i flussi attualmente impostati vengono ignorati.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-139">When drawing a cached patch, the currently set streams are ignored.</span></span> <span data-ttu-id="6d3d1-140">Tuttavia, è possibile eseguire l'override del pNumSegs memorizzato nella cache specificando i nuovi valori per pNumSegs.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-140">However, it is possible to override the cached pNumSegs by specifying new values for pNumSegs.</span></span> <span data-ttu-id="6d3d1-141">Inoltre, è necessario impostare lo stesso vertex shader quando viene eseguito il rendering di una patch memorizzata nella cache come è stato impostato al momento dell'acquisizione.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-141">Also, it is required to set the same vertex shader when rendering a cached patch as was set when it was captured.</span></span>

<span data-ttu-id="6d3d1-142">Per le patch dinamiche, i dati della patch cambiano per ogni rendering della patch, quindi non è efficiente memorizzare nella cache le informazioni.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-142">For dynamic patches, the patch data changes for every rendering of the patch, so it is not efficient to cache information.</span></span> <span data-ttu-id="6d3d1-143">L'applicazione può comunicarla a Direct3D impostando handle su 0.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-143">The application can convey this to Direct3D by setting Handle to 0.</span></span> <span data-ttu-id="6d3d1-144">In questo caso, Direct3D disegna la patch usando i flussi attualmente impostati e i valori di pNumSegs e non memorizza nella cache le informazioni.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-144">In this case, Direct3D draws the patch using the currently set streams and the pNumSegs values and does not cache any information.</span></span> <span data-ttu-id="6d3d1-145">Non è possibile impostare contemporaneamente handle su 0 e pPatch su **null**.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-145">It is not valid to simultaneously set Handle to 0 and pPatch to **NULL**.</span></span>

<span data-ttu-id="6d3d1-146">Con la rispecificazione di pRectPatchInfo per lo stesso handle, l'applicazione può sovrascrivere le informazioni memorizzate nella cache in precedenza.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-146">By respecifying pRectPatchInfo for the same handle, the application can overwrite the previously cached information.</span></span>

<span data-ttu-id="6d3d1-147">[**IDirect3DDevice9::D rawtripatch**](/windows/desktop/api) è simile a [**IDirect3DDevice9::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) , ad eccezione del fatto che disegna una patch di ordine superiore triangolare.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-147">[**IDirect3DDevice9::DrawTriPatch**](/windows/desktop/api) is similar to [**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) except that it draws a triangular high-order patch.</span></span>

## <a name="generating-normals-and-texture-coordinates"></a><span data-ttu-id="6d3d1-148">Generazione di normali e coordinate di trama</span><span class="sxs-lookup"><span data-stu-id="6d3d1-148">Generating Normals and Texture Coordinates</span></span>

<span data-ttu-id="6d3d1-149">Se si usa uno shader FVF (Flexible Vertex Format), non è possibile generare automaticamente le normali e le coordinate di trama.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-149">If you are using a flexible vertex format (FVF) shader, automatic generation of normals and texture coordinates is not possible.</span></span>

<span data-ttu-id="6d3d1-150">Per le normali, è possibile specificarle direttamente o fare in modo che Direct3D le calcoli automaticamente.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-150">For normals, you can either directly supply them or have Direct3D calculate them for you.</span></span>

<span data-ttu-id="6d3d1-151">Le coordinate generate per le patch rettangolari sono coordinate basate su spline, come illustrato nelle illustrazioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-151">The coordinates generated for rectangular patches are spline-based coordinates, as shown in the following illustrations.</span></span>

![illustrazione di una trama originale e della trama con coordinate basate su spline](images/texturespline.png)

<span data-ttu-id="6d3d1-153">Le coordinate generate per le patch triangolari sono coordinate basate su spline baricentrica, come illustrato nelle illustrazioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-153">The coordinates generated for triangular patches are barycentric spline-based coordinates, as shown in the following illustrations.</span></span>

![illustrazione di una trama originale e della trama con coordinate basate su spline baricentrica](images/texturebarycentricspline.png)

<span data-ttu-id="6d3d1-155">Se un'applicazione deve modificare l'intervallo delle coordinate di trama generate, è possibile eseguire questa operazione usando le trasformazioni di trama.</span><span class="sxs-lookup"><span data-stu-id="6d3d1-155">If an application must change the range of the generated texture coordinates, this can be done using texture transforms.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6d3d1-156">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="6d3d1-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6d3d1-157">Primitive di ordine superiore</span><span class="sxs-lookup"><span data-stu-id="6d3d1-157">Higher-Order Primitives</span></span>](higher-order-primitives.md)
</dt> </dl>

 

 
