---
description: In un'applicazione Direct3D viene in genere visualizzata una sequenza animata generando i frame dell'animazione nei buffer indietro e mostrandoli in sequenza.
ms.assetid: 4ca9a845-f433-4d4a-939e-4b9ab2983927
title: Capovolgimento di superfici (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1dafd263de0f907b33ff6f20ffcbb2cce69943da
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "103746866"
---
# <a name="flipping-surfaces-direct3d-9"></a><span data-ttu-id="74055-103">Capovolgimento di superfici (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="74055-103">Flipping Surfaces (Direct3D 9)</span></span>

<span data-ttu-id="74055-104">In un'applicazione Direct3D viene in genere visualizzata una sequenza animata generando i frame dell'animazione nei buffer indietro e mostrandoli in sequenza.</span><span class="sxs-lookup"><span data-stu-id="74055-104">A Direct3D application typically displays an animated sequence by generating the frames of the animation in back buffers and presenting them in sequence.</span></span> <span data-ttu-id="74055-105">I buffer indietro sono organizzati in catene di scambio.</span><span class="sxs-lookup"><span data-stu-id="74055-105">Back buffers are organized into swap chains.</span></span> <span data-ttu-id="74055-106">Una catena di scambio è una serie di buffer che "Capovolgere" sullo schermo uno dopo l'altro.</span><span class="sxs-lookup"><span data-stu-id="74055-106">A swap chain is a series of buffers that "flip" to the screen one after another.</span></span> <span data-ttu-id="74055-107">Questa operazione può essere utilizzata per eseguire il rendering di una scena in memoria e quindi capovolgerla sullo schermo quando il rendering viene completato.</span><span class="sxs-lookup"><span data-stu-id="74055-107">This can be used to render one scene in memory and then flip the scene to the screen when rendering is complete.</span></span> <span data-ttu-id="74055-108">In questo modo si evita il fenomeno noto come strappo e si consente un'animazione più uniforme.</span><span class="sxs-lookup"><span data-stu-id="74055-108">This avoids the phenomenon known as tearing and allows for smoother animation.</span></span>

<span data-ttu-id="74055-109">Ogni dispositivo creato in Direct3D ha almeno una catena di scambio.</span><span class="sxs-lookup"><span data-stu-id="74055-109">Each device created in Direct3D has at least one swap chain.</span></span> <span data-ttu-id="74055-110">Quando si inizializza il primo dispositivo Direct3D, si imposta il membro BackBufferCount di [**D3DPRESENT \_ parametri**](d3dpresent-parameters.md), che indica a Direct3D il numero di buffer back che saranno presenti nella catena di scambio.</span><span class="sxs-lookup"><span data-stu-id="74055-110">When you initialize the first Direct3D device, you set the BackBufferCount member of [**D3DPRESENT\_PARAMETERS**](d3dpresent-parameters.md), which tells Direct3D the number of back buffers that will be in the swap chain.</span></span> <span data-ttu-id="74055-111">La chiamata a [**IDirect3D9:: CreateDevice**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-createdevice) crea quindi il dispositivo Direct3D e la catena di scambio corrispondente.</span><span class="sxs-lookup"><span data-stu-id="74055-111">The call to [**IDirect3D9::CreateDevice**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-createdevice) then creates the Direct3D device and corresponding swap chain.</span></span>

<span data-ttu-id="74055-112">Quando si usa [**IDirect3DDevice9::P inviato nuovamente**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-present) per richiedere un'operazione di apertura della superficie, i puntatori alla memoria di superficie per il buffer anteriore e i buffer indietro vengono scambiati.</span><span class="sxs-lookup"><span data-stu-id="74055-112">When you use [**IDirect3DDevice9::Present**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-present) to request a surface flip operation, the pointers to surface memory for the front buffer and back buffers are swapped.</span></span> <span data-ttu-id="74055-113">Il capovolgimento viene eseguito cambiando i puntatori usati dal dispositivo di visualizzazione per fare riferimento alla memoria, non copiando la memoria della superficie.</span><span class="sxs-lookup"><span data-stu-id="74055-113">Flipping is performed by switching pointers that the display device uses for referencing memory, not by copying surface memory.</span></span> <span data-ttu-id="74055-114">Quando una catena di capovolgimento contiene un buffer anteriore e più di un buffer nascosto, i puntatori vengono scambiati in un modello circolare, come illustrato nel diagramma seguente.</span><span class="sxs-lookup"><span data-stu-id="74055-114">When a flipping chain contains a front buffer and more than one back buffer, the pointers are switched in a circular pattern, as shown in the following diagram.</span></span>

![diagramma di una catena di capovolgimento con un buffer anteriore e due buffer indietro](images/trplflip.png)

<span data-ttu-id="74055-116">È possibile creare catene di scambio aggiuntive per un dispositivo chiamando [**IDirect3DDevice9:: CreateAdditionalSwapChain**](/windows/desktop/api).</span><span class="sxs-lookup"><span data-stu-id="74055-116">You can create addition swap chains for a device by calling [**IDirect3DDevice9::CreateAdditionalSwapChain**](/windows/desktop/api).</span></span> <span data-ttu-id="74055-117">Un'applicazione può creare una catena di scambio per ogni visualizzazione e associare ogni catena di scambio a una particolare finestra.</span><span class="sxs-lookup"><span data-stu-id="74055-117">An application can create one swap chain per view and associate each swap chain with a particular window.</span></span> <span data-ttu-id="74055-118">L'applicazione esegue il rendering delle immagini nei buffer indietro di ogni catena di scambio e quindi le presenta singolarmente.</span><span class="sxs-lookup"><span data-stu-id="74055-118">The application renders images in the back buffers of each swap chain, and then presents them individually.</span></span> <span data-ttu-id="74055-119">I due parametri accettati da **IDirect3DDevice9:: CreateAdditionalSwapChain** sono un puntatore a una struttura di [**\_ parametri D3DPRESENT**](d3dpresent-parameters.md) e l'indirizzo di un puntatore a un'interfaccia [**IDirect3DSwapChain9**](/windows/desktop/api) .</span><span class="sxs-lookup"><span data-stu-id="74055-119">The two parameters that **IDirect3DDevice9::CreateAdditionalSwapChain** takes are a pointer to a [**D3DPRESENT\_PARAMETERS**](d3dpresent-parameters.md) structure and the address of a pointer to an [**IDirect3DSwapChain9**](/windows/desktop/api) interface.</span></span> <span data-ttu-id="74055-120">È quindi possibile usare [**IDirect3DSwapChain9::P inviato nuovamente**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dswapchain9-present) per visualizzare il contenuto del buffer nascosto successivo nel buffer anteriore.</span><span class="sxs-lookup"><span data-stu-id="74055-120">You can then use [**IDirect3DSwapChain9::Present**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dswapchain9-present) to display the contents of the next back buffer to the front buffer.</span></span> <span data-ttu-id="74055-121">Si noti che un dispositivo può avere una sola catena di scambio a schermo intero.</span><span class="sxs-lookup"><span data-stu-id="74055-121">Note that a device can only have one full-screen swap chain.</span></span>

<span data-ttu-id="74055-122">È possibile ottenere l'accesso a un buffer nascosto specifico chiamando i metodi [**IDirect3DDevice9:: GetBackBuffer**](/windows/desktop/api) o [**IDirect3DSwapChain9:: GetBackBuffer**](/windows/desktop/api) , che restituiscono un puntatore a un'interfaccia [**IDirect3DSurface9**](/windows/desktop/api) che rappresenta la superficie del buffer indietro restituita.</span><span class="sxs-lookup"><span data-stu-id="74055-122">You can gain access to a specific back buffer by calling the [**IDirect3DDevice9::GetBackBuffer**](/windows/desktop/api) or [**IDirect3DSwapChain9::GetBackBuffer**](/windows/desktop/api) methods, which return a pointer to an [**IDirect3DSurface9**](/windows/desktop/api) interface that represents the returned back buffer surface.</span></span> <span data-ttu-id="74055-123">Si noti che la chiamata a questo metodo aumenta il conteggio dei riferimenti interni nell'interfaccia [**IDirect3DDevice9**](/windows/desktop/api) , quindi assicurarsi di chiamare [**IUnknown**](/windows/win32/api/unknwn/nn-unknwn-iunknown) al termine dell'operazione oppure si disporrà di una perdita di memoria.</span><span class="sxs-lookup"><span data-stu-id="74055-123">Note that calling this method increases the internal reference count on the [**IDirect3DDevice9**](/windows/desktop/api) interface so be sure to call [**IUnknown**](/windows/win32/api/unknwn/nn-unknwn-iunknown) when you are done using this surface or you will have a memory leak.</span></span>

<span data-ttu-id="74055-124">Tenere presente che Direct3D capovolge le superfici scambiando i puntatori della memoria di superficie all'interno della catena di scambio, non scambiando le superfici stesse.</span><span class="sxs-lookup"><span data-stu-id="74055-124">Remember, Direct3D flips surfaces by swapping surface memory pointers within the swap chain, not by swapping the surfaces themselves.</span></span> <span data-ttu-id="74055-125">Ciò significa che verrà sempre eseguito il rendering nel buffer nascosto che verrà visualizzato successivamente.</span><span class="sxs-lookup"><span data-stu-id="74055-125">This means that you will always render to the back buffer that will be displayed next.</span></span>

<span data-ttu-id="74055-126">È importante notare la distinzione tra una "operazione di capovolgimento", come eseguita da un driver della scheda video e un'operazione "presente" applicata a una catena di scambio creata con D3DSWAPEFFECT \_ flip.</span><span class="sxs-lookup"><span data-stu-id="74055-126">It is important to note the distinction between a "flipping operation," as performed by a display adapter driver, and a "Present" operation applied to a swap chain created with D3DSWAPEFFECT\_FLIP.</span></span>

<span data-ttu-id="74055-127">Il termine "Capovolgi" indica convenzionalmente un'operazione che modifica l'intervallo di indirizzi di memoria video utilizzati da un adattatore di visualizzazione per generare il segnale di output, causando in tal modo la visualizzazione del contenuto di un buffer nascosto precedentemente nascosto.</span><span class="sxs-lookup"><span data-stu-id="74055-127">The term "flip" conventionally denotes an operation that alters the range of video memory addresses that a display adapter uses to generate its output signal, thus causing the contents of a previously hidden back buffer to be displayed.</span></span> <span data-ttu-id="74055-128">In Direct3D 9 il termine viene spesso usato più in generale per descrivere la presentazione di un buffer nascosto in qualsiasi catena di scambio creata con l' \_ effetto di D3DSWAPEFFECT Flip swap.</span><span class="sxs-lookup"><span data-stu-id="74055-128">In Direct3D 9, the term is often used more generally to describe the presentation of a back buffer in any swap chain created with the D3DSWAPEFFECT\_FLIP swap effect.</span></span>

<span data-ttu-id="74055-129">Sebbene le operazioni "presenti" siano quasi invariabilmente implementate dalle operazioni di capovolgimento quando la catena di scambio è a schermo intero, vengono necessariamente implementate dalle operazioni di copia quando la catena di scambio è a finestra.</span><span class="sxs-lookup"><span data-stu-id="74055-129">While such "Present" operations are almost invariably implemented by flip operations when the swap chain is a full-screen one, they are necessarily implemented by copy operations when the swap chain is windowed.</span></span> <span data-ttu-id="74055-130">Inoltre, è possibile che un driver della scheda di visualizzazione usi il capovolgimento per implementare le operazioni presenti sulle catene di scambio a schermo intero in base alla copia D3DSWAPEFFECT di \_ scarto e D3DSWAPEFFECT \_ .</span><span class="sxs-lookup"><span data-stu-id="74055-130">Furthermore, a display adapter driver may use flipping to implement Present operations against full-screen swap chains based on the D3DSWAPEFFECT\_DISCARD and D3DSWAPEFFECT\_COPY.</span></span>

<span data-ttu-id="74055-131">La discussione precedente si applica al caso di uso comune di una catena di scambio a schermo intero creata con D3DSWAPEFFECT \_ flip.</span><span class="sxs-lookup"><span data-stu-id="74055-131">The discussion above applies to the commonly used case of a full-screen swap chain created with D3DSWAPEFFECT\_FLIP.</span></span>

<span data-ttu-id="74055-132">Per una descrizione più generale dei diversi effetti di swapping per le catene di scambio a schermo intero e a schermo intero, vedere [**D3DSWAPEFFECT**](./d3dswapeffect.md).</span><span class="sxs-lookup"><span data-stu-id="74055-132">For a more general discussion of the different swap effects for both windowed and full-screen swap chains, see [**D3DSWAPEFFECT**](./d3dswapeffect.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="74055-133">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="74055-133">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="74055-134">Superfici Direct3D</span><span class="sxs-lookup"><span data-stu-id="74055-134">Direct3D Surfaces</span></span>](direct3d-surfaces.md)
</dt> </dl>

 

 
