---
description: La gestione delle trame è il processo che consente di determinare quali trame sono necessarie per il rendering in un determinato momento e di garantire che tali trame vengano caricate nella memoria video.
ms.assetid: ea6d64ee-f570-49eb-b5fd-67fcde3f8ddc
title: Gestione automatica delle trame (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d0eb14eede197661bc127a062229ebed31274ae8
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103878186"
---
# <a name="automatic-texture-management-direct3d-9"></a><span data-ttu-id="bee98-103">Gestione automatica delle trame (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="bee98-103">Automatic Texture Management (Direct3D 9)</span></span>

<span data-ttu-id="bee98-104">La gestione delle trame è il processo che consente di determinare quali trame sono necessarie per il rendering in un determinato momento e di garantire che tali trame vengano caricate nella memoria video.</span><span class="sxs-lookup"><span data-stu-id="bee98-104">Texture management is the process of determining which textures are needed for rendering at a given time and ensuring that those textures are loaded into video memory.</span></span> <span data-ttu-id="bee98-105">Come per qualsiasi algoritmo, gli schemi di gestione delle trame variano in complessità, ma qualsiasi approccio alla gestione delle trame comporta le seguenti attività principali.</span><span class="sxs-lookup"><span data-stu-id="bee98-105">As with any algorithm, texture management schemes vary in complexity, but any approach to texture management involves the following key tasks.</span></span>

-   <span data-ttu-id="bee98-106">Rilevamento della quantità di memoria di trama disponibile.</span><span class="sxs-lookup"><span data-stu-id="bee98-106">Tracking the amount of available texture memory.</span></span>
-   <span data-ttu-id="bee98-107">Calcolo di quali trame sono necessarie per il rendering e quali non lo sono.</span><span class="sxs-lookup"><span data-stu-id="bee98-107">Calculating which textures are needed for rendering, and which are not.</span></span>
-   <span data-ttu-id="bee98-108">Determinare le risorse di trama esistenti che è possibile ricaricare con un'altra immagine di trama e quali superfici devono essere distrutte e sostituite con nuove risorse di trama.</span><span class="sxs-lookup"><span data-stu-id="bee98-108">Determining which existing texture resources can be reloaded with another texture image, and which surfaces should be destroyed and replaced with new texture resources.</span></span>

<span data-ttu-id="bee98-109">Direct3D implementa la gestione delle trame supportata dal sistema per garantire il caricamento delle trame per prestazioni ottimali.</span><span class="sxs-lookup"><span data-stu-id="bee98-109">Direct3D implements system-supported texture management to ensure that textures are loaded for optimal performance.</span></span> <span data-ttu-id="bee98-110">Le risorse di trama gestite da Direct3D sono denominate trame gestite.</span><span class="sxs-lookup"><span data-stu-id="bee98-110">Texture resources that Direct3D manages are referred to as managed textures.</span></span>

<span data-ttu-id="bee98-111">Il gestore di trame tiene traccia delle trame con un timestamp che identifica la data e l'ora dell'ultimo utilizzo della trama.</span><span class="sxs-lookup"><span data-stu-id="bee98-111">The texture manager tracks textures with a time-stamp that identifies when the texture was last used.</span></span> <span data-ttu-id="bee98-112">USA quindi un algoritmo usato meno di recente per determinare quali trame rimuovere.</span><span class="sxs-lookup"><span data-stu-id="bee98-112">It then uses a least-recently-used algorithm to determine which textures should be removed.</span></span> <span data-ttu-id="bee98-113">Le priorità di trama vengono usate come interruttori di associazione quando due trame sono destinate alla rimozione dalla memoria.</span><span class="sxs-lookup"><span data-stu-id="bee98-113">Texture priorities are used as tie breakers when two textures are targeted for removal from memory.</span></span> <span data-ttu-id="bee98-114">Se due trame hanno lo stesso valore di priorità, la trama usata meno di recente viene rimossa.</span><span class="sxs-lookup"><span data-stu-id="bee98-114">If two textures have the same priority value, the least-recently-used texture is removed.</span></span> <span data-ttu-id="bee98-115">Tuttavia, se due trame hanno lo stesso timestamp, viene rimossa per prima la trama con una priorità più bassa.</span><span class="sxs-lookup"><span data-stu-id="bee98-115">However, if two textures have the same time-stamp, the texture that has a lower priority is removed first.</span></span>

<span data-ttu-id="bee98-116">Si richiede la gestione automatica delle trame per le superfici di trama durante la creazione.</span><span class="sxs-lookup"><span data-stu-id="bee98-116">You request automatic texture management for texture surfaces when you create them.</span></span> <span data-ttu-id="bee98-117">Per recuperare una trama gestita in un'applicazione C++, creare una risorsa di trama chiamando [**IDirect3DDevice9:: createTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture) e specificando la D3DPOOL \_ gestita per il parametro del pool.</span><span class="sxs-lookup"><span data-stu-id="bee98-117">To retrieve a managed texture in a C++ application, create a texture resource by calling [**IDirect3DDevice9::CreateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture) and specifying the D3DPOOL\_MANAGED for the Pool parameter.</span></span> <span data-ttu-id="bee98-118">Non è consentito specificare il percorso in cui si vuole creare la trama.</span><span class="sxs-lookup"><span data-stu-id="bee98-118">You are not allowed to specify where you want the texture created.</span></span> <span data-ttu-id="bee98-119">\_ \_ Quando si crea una trama gestita, non è possibile usare i flag D3DPOOL default o D3DPOOL SYSTEMMEM.</span><span class="sxs-lookup"><span data-stu-id="bee98-119">You cannot use the D3DPOOL\_DEFAULT or D3DPOOL\_SYSTEMMEM flags when creating a managed texture.</span></span> <span data-ttu-id="bee98-120">Dopo aver creato la trama gestita, è possibile chiamare il metodo [**IDirect3DDevice9:: setexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture) per impostarlo su una fase nella trama a cascata del dispositivo di rendering.</span><span class="sxs-lookup"><span data-stu-id="bee98-120">After creating the managed texture, you can call the [**IDirect3DDevice9::SetTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture) method to set it to a stage in the rendering device's texture cascade.</span></span>

<span data-ttu-id="bee98-121">È possibile assegnare una priorità alle trame gestite chiamando il metodo [**IDirect3DResource9:: sepriority**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dresource9-setpriority) per la superficie della trama.</span><span class="sxs-lookup"><span data-stu-id="bee98-121">You can assign a priority to managed textures by calling the [**IDirect3DResource9::SetPriority**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dresource9-setpriority) method for the texture surface.</span></span>

<span data-ttu-id="bee98-122">Direct3D Scarica automaticamente le trame nella memoria video, in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="bee98-122">Direct3D automatically downloads textures into video memory as needed.</span></span> <span data-ttu-id="bee98-123">Il sistema può memorizzare nella cache le trame gestite nella memoria video locale o non locale, a seconda della disponibilità di memoria video non locale o di altri fattori.</span><span class="sxs-lookup"><span data-stu-id="bee98-123">The system might cache managed textures in local or nonlocal video memory, depending on the availability of nonlocal video memory or other factors.</span></span> <span data-ttu-id="bee98-124">Il percorso della cache delle trame gestite non viene comunicato all'applicazione, né queste informazioni sono necessarie per usare la gestione automatica delle trame.</span><span class="sxs-lookup"><span data-stu-id="bee98-124">The cache location of your managed textures is not communicated to your application, nor is this information required to use automatic texture management.</span></span> <span data-ttu-id="bee98-125">Se l'applicazione usa più trame di quanto possa adattarsi alla memoria video, Direct3D rimuove le trame precedenti dalla memoria video per fare spazio alle nuove trame.</span><span class="sxs-lookup"><span data-stu-id="bee98-125">If your application uses more textures than can fit in video memory, Direct3D removes older textures from video memory to make room for the new textures.</span></span> <span data-ttu-id="bee98-126">Se si usa nuovamente una trama rimossa, il sistema usa la superficie di trama della memoria di sistema originale per ricaricare la trama nella cache video-memory.</span><span class="sxs-lookup"><span data-stu-id="bee98-126">If you use a removed texture again, the system uses the original system-memory texture surface to reload the texture in the video-memory cache.</span></span> <span data-ttu-id="bee98-127">Sebbene il ricaricamento della trama sia necessario, diminuisce anche le prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bee98-127">Although reloading the texture is necessary, it also decreases the application's performance.</span></span>

<span data-ttu-id="bee98-128">È possibile modificare dinamicamente la copia di memoria di sistema originale della trama aggiornando o bloccando la risorsa di trama.</span><span class="sxs-lookup"><span data-stu-id="bee98-128">You can dynamically modify the original system-memory copy of the texture by updating or locking the texture resource.</span></span> <span data-ttu-id="bee98-129">Quando il sistema rileva una superficie sporca, dopo il completamento di un aggiornamento o quando la superficie è sbloccata, il gestore di trame aggiorna automaticamente la copia della memoria video della trama.</span><span class="sxs-lookup"><span data-stu-id="bee98-129">When the system detects a dirty surface - after an update is completed, or when the surface is unlocked - the texture manager automatically updates the video-memory copy of the texture.</span></span> <span data-ttu-id="bee98-130">L'impatto sulle prestazioni è simile al ricaricamento di una trama rimossa.</span><span class="sxs-lookup"><span data-stu-id="bee98-130">The performance hit incurred is similar to reloading a removed texture.</span></span>

<span data-ttu-id="bee98-131">Quando si immette un nuovo livello in un gioco, è possibile che l'applicazione debba scaricare tutte le trame gestite dalla memoria video (chiamando [**IDirect3DDevice9:: EvictManagedResources**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-evictmanagedresources)).</span><span class="sxs-lookup"><span data-stu-id="bee98-131">When entering a new level in a game, your application might need to flush all managed textures from video memory (by calling [**IDirect3DDevice9::EvictManagedResources**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-evictmanagedresources)).</span></span>

<span data-ttu-id="bee98-132">Per ulteriori informazioni sulla gestione delle risorse, vedere [gestione delle risorse (Direct3D 9)](managing-resources.md).</span><span class="sxs-lookup"><span data-stu-id="bee98-132">For more information about resource management, see [Managing Resources (Direct3D 9)](managing-resources.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="bee98-133">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="bee98-133">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bee98-134">Trame Direct3D</span><span class="sxs-lookup"><span data-stu-id="bee98-134">Direct3D Textures</span></span>](direct3d-textures.md)
</dt> </dl>

 

 
