---
description: I controlli gamma consentono di modificare il modo in cui il sistema Visualizza il contenuto della superficie, senza influire sul contenuto della superficie stessa.
ms.assetid: 74f106be-8f47-4875-9908-32ff35912968
title: Controlli gamma (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6484bcf7e8fa5e07a3bf4bb718cd361330560f8c
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "104568740"
---
# <a name="gamma-controls-direct3d-9"></a><span data-ttu-id="caf3d-103">Controlli gamma (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="caf3d-103">Gamma Controls (Direct3D 9)</span></span>

<span data-ttu-id="caf3d-104">I controlli gamma consentono di modificare il modo in cui il sistema Visualizza il contenuto della superficie, senza influire sul contenuto della superficie stessa.</span><span class="sxs-lookup"><span data-stu-id="caf3d-104">Gamma controls allow you to change how the system displays the contents of the surface, without affecting the contents of the surface itself.</span></span> <span data-ttu-id="caf3d-105">Si pensi a questi controlli come filtri molto semplici che Direct3D applica ai dati quando lascia una superficie e prima che venga eseguito il rendering sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="caf3d-105">Think of these controls as very simple filters that Direct3D applies to data as it leaves a surface and before it is rendered on the screen.</span></span>

<span data-ttu-id="caf3d-106">I controlli gamma sono una proprietà di una catena di scambio.</span><span class="sxs-lookup"><span data-stu-id="caf3d-106">Gamma controls are a property of a swap chain.</span></span> <span data-ttu-id="caf3d-107">I controlli gamma consentono di modificare dinamicamente il mapping dei livelli rosso, verde e blu di una superficie ai livelli effettivi visualizzati dal sistema.</span><span class="sxs-lookup"><span data-stu-id="caf3d-107">Gamma controls make it possible to dynamically change how a surface's red, green, and blue levels map to the actual levels that the system displays.</span></span> <span data-ttu-id="caf3d-108">Impostando i livelli gamma, è possibile fare in modo che lo schermo dell'utente lampeggi i colori rossi quando il carattere dell'utente viene colpito, verde quando il carattere preleva un nuovo elemento e così via, senza copiare nuove immagini nel buffer del frame per ottenere l'effetto.</span><span class="sxs-lookup"><span data-stu-id="caf3d-108">By setting gamma levels, you can cause the user's screen to flash colors - red when the user's character is shot, green when the character picks up a new item, and so on - without copying new images to the frame buffer to achieve the effect.</span></span> <span data-ttu-id="caf3d-109">In alternativa, è possibile modificare i livelli di colore per applicare una distorsione dei colori alle immagini nel buffer nascosto.</span><span class="sxs-lookup"><span data-stu-id="caf3d-109">Or, you might adjust color levels to apply a color bias to the images in the back buffer.</span></span>

<span data-ttu-id="caf3d-110">È sempre presente almeno una catena di scambio (la catena di scambio implicita) per ogni dispositivo, perché Direct3D 9 ha una catena di scambio come proprietà del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="caf3d-110">There is always at least one swap chain (the implicit swap chain) for each device because Direct3D 9 has one swap chain as a property of the device.</span></span> <span data-ttu-id="caf3d-111">Poiché la rampa gamma è una proprietà della catena di scambio, la rampa gamma può essere applicata quando la catena di scambio è a finestra.</span><span class="sxs-lookup"><span data-stu-id="caf3d-111">Because the gamma ramp is a property of the swap chain, the gamma ramp can be applied when the swap chain is windowed.</span></span> <span data-ttu-id="caf3d-112">La rampa gamma ha effetto immediato.</span><span class="sxs-lookup"><span data-stu-id="caf3d-112">The gamma ramp takes effect immediately.</span></span> <span data-ttu-id="caf3d-113">Non è in attesa di un'operazione di sincronizzazione verticale.</span><span class="sxs-lookup"><span data-stu-id="caf3d-113">There is no waiting for a vertical sync operation.</span></span>

<span data-ttu-id="caf3d-114">I metodi [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) e [**GetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getgammaramp) consentono di modificare i livelli di rampa che interessano i componenti di colore rosso, verde e blu dei pixel della superficie prima di essere inviati al convertitore da digitale a analogico (DAC) per la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="caf3d-114">The [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) and [**GetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getgammaramp) methods allow you to manipulate ramp levels that affect the red, green, and blue color components of pixels from the surface before they are sent to the digital-to-analog converter (DAC) for display.</span></span>

## <a name="gamma-ramp-levels"></a><span data-ttu-id="caf3d-115">Livelli di rampa gamma</span><span class="sxs-lookup"><span data-stu-id="caf3d-115">Gamma Ramp Levels</span></span>

<span data-ttu-id="caf3d-116">In Direct3D il termine gamma gamma descrive un set di valori che eseguono il mapping del livello di un particolare componente colore, rosso, verde, blu, per tutti i pixel nel buffer del frame, ai nuovi livelli ricevuti dall'applicazione livello dati per la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="caf3d-116">In Direct3D, the term gamma ramp describes a set of values that map the level of a particular color component - red, green, blue - for all pixels in the frame buffer to new levels that are received by the DAC for display.</span></span> <span data-ttu-id="caf3d-117">Il mapping viene eseguito tramite tre tabelle di ricerca, una per ogni componente del colore.</span><span class="sxs-lookup"><span data-stu-id="caf3d-117">The remapping is performed by way of three look-up tables, one for each color component.</span></span>

<span data-ttu-id="caf3d-118">Ecco come funziona: Direct3D accetta un pixel dal buffer dei frame e valuta i singoli componenti di colore rosso, verde e blu.</span><span class="sxs-lookup"><span data-stu-id="caf3d-118">Here's how it works: Direct3D takes a pixel from the frame buffer and evaluates its individual red, green, and blue color components.</span></span> <span data-ttu-id="caf3d-119">Ogni componente è rappresentato da un valore compreso tra 0 e 65535.</span><span class="sxs-lookup"><span data-stu-id="caf3d-119">Each component is represented by a value from 0 to 65535.</span></span> <span data-ttu-id="caf3d-120">Direct3D acquisisce il valore originale e lo usa per indicizzare una matrice di 256 elementi (la rampa), in cui ogni elemento contiene un valore che sostituisce quello originale.</span><span class="sxs-lookup"><span data-stu-id="caf3d-120">Direct3D takes the original value and uses it to index a 256-element array (the ramp), where each element contains a value that replaces the original one.</span></span> <span data-ttu-id="caf3d-121">Direct3D esegue questo processo di ricerca e sostituzione per ogni componente colore di ogni pixel nel buffer dei frame, modificando quindi i colori finali per tutti i pixel sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="caf3d-121">Direct3D performs this look-up and replace process for each color component of each pixel in the frame buffer, thereby changing the final colors for all the on-screen pixels.</span></span>

<span data-ttu-id="caf3d-122">È utile visualizzare i valori della rampa creando un grafico, come illustrato nei due grafici seguenti.</span><span class="sxs-lookup"><span data-stu-id="caf3d-122">It's handy to visualize the ramp values by graphing them, as shown in the following two graphs.</span></span> <span data-ttu-id="caf3d-123">Il grafico a sinistra mostra una rampa che non modifica i colori.</span><span class="sxs-lookup"><span data-stu-id="caf3d-123">The left graph shows a ramp that doesn't modify colors at all.</span></span> <span data-ttu-id="caf3d-124">Il grafico a destra mostra una rampa che impone una distorsione negativa al componente colore a cui viene applicato.</span><span class="sxs-lookup"><span data-stu-id="caf3d-124">The right graph shows a ramp that imposes a negative bias to the color component to which it is applied.</span></span>

![grafici dei valori delle rampe gamma](images/gammalv.png)

<span data-ttu-id="caf3d-126">Gli elementi della matrice per il grafico a sinistra contengono valori identici all'indice 0 nell'elemento in corrispondenza dell'indice 0 e 65535 in corrispondenza dell'indice 255.</span><span class="sxs-lookup"><span data-stu-id="caf3d-126">The array elements for the graph on the left contain values identical to their index - 0 in the element at index 0, and 65535 at index 255.</span></span> <span data-ttu-id="caf3d-127">Questo tipo di rampa è l'impostazione predefinita, in quanto non modifica i valori di input prima che vengano visualizzati.</span><span class="sxs-lookup"><span data-stu-id="caf3d-127">This type of ramp is the default, as it doesn't change the input values before they're displayed.</span></span> <span data-ttu-id="caf3d-128">Il grafico a destra offre maggiore variazione; la relativa rampa contiene valori che variano da 0 nel primo elemento a 32768 nell'ultimo elemento, con valori uniformi tra.</span><span class="sxs-lookup"><span data-stu-id="caf3d-128">The right graph provides more variation; its ramp contains values that range from 0 in the first element to 32768 in the last element, with values ranging uniformly in between.</span></span> <span data-ttu-id="caf3d-129">L'effetto è che il componente colore che usa questa rampa viene disattivato sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="caf3d-129">The effect is that the color component that uses this ramp appears muted on the display.</span></span> <span data-ttu-id="caf3d-130">Non si è limitati all'uso di grafici lineari; Se l'applicazione può assegnare un mapping arbitrario, se necessario.</span><span class="sxs-lookup"><span data-stu-id="caf3d-130">You are not limited to using linear graphs; if your application can assign arbitrary mapping if needed.</span></span> <span data-ttu-id="caf3d-131">È anche possibile impostare le voci su tutti zeri per rimuovere completamente un componente colore dalla visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="caf3d-131">You can even set the entries to all zeroes to remove a color component completely from the display.</span></span>

## <a name="setting-and-retrieving-gamma-ramp-levels"></a><span data-ttu-id="caf3d-132">Impostazione e recupero di livelli di rampa gamma</span><span class="sxs-lookup"><span data-stu-id="caf3d-132">Setting and Retrieving Gamma Ramp Levels</span></span>

<span data-ttu-id="caf3d-133">I livelli di rampa gamma sono le tabelle di ricerca che Direct3D usa per eseguire il mapping dei componenti del colore del buffer del frame ai nuovi livelli che verranno visualizzati.</span><span class="sxs-lookup"><span data-stu-id="caf3d-133">Gamma ramp levels are effectively look-up tables that Direct3D uses to map the frame buffer color components to new levels that will be displayed.</span></span> <span data-ttu-id="caf3d-134">È possibile impostare e recuperare i livelli di rampa per la superficie primaria chiamando i metodi [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) e [**GetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getgammaramp) .</span><span class="sxs-lookup"><span data-stu-id="caf3d-134">You can set and retrieve ramp levels for the primary surface by calling the [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) and [**GetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getgammaramp) methods.</span></span> <span data-ttu-id="caf3d-135">**SetGammaRamp** accetta due parametri e **GetGammaRamp** accetta un solo parametro.</span><span class="sxs-lookup"><span data-stu-id="caf3d-135">**SetGammaRamp** accepts two parameters and **GetGammaRamp** accepts one parameter.</span></span> <span data-ttu-id="caf3d-136">Per **SetGammaRamp**, il primo parametro è D3DSGR \_ calibrate o D3DSGR \_ No \_ Calibration.</span><span class="sxs-lookup"><span data-stu-id="caf3d-136">For **SetGammaRamp**, the first parameter is either D3DSGR\_CALIBRATE or D3DSGR\_NO\_CALIBRATION.</span></span> <span data-ttu-id="caf3d-137">Il secondo parametro, pRamp, è un puntatore a una struttura [**D3DGAMMARAMP**](d3dgammaramp.md) .</span><span class="sxs-lookup"><span data-stu-id="caf3d-137">The second parameter, pRamp, is a pointer to a [**D3DGAMMARAMP**](d3dgammaramp.md) structure.</span></span> <span data-ttu-id="caf3d-138">La struttura **D3DGAMMARAMP** contiene matrici di parole di 3 256 elementi, una matrice che contiene le rampe di colore rosso, verde e blu.</span><span class="sxs-lookup"><span data-stu-id="caf3d-138">The **D3DGAMMARAMP** structure contains three 256-element arrays of WORDs, one array each to contain the red, green, and blue gamma ramps.</span></span> <span data-ttu-id="caf3d-139">**GetGammaRamp** dispone di un parametro che accetta un puntatore a un tipo **D3DGAMMARAMP** che verrà riempito con la rampa gamma corrente.</span><span class="sxs-lookup"><span data-stu-id="caf3d-139">**GetGammaRamp** has one parameter that takes a pointer to a **D3DGAMMARAMP** type that will be filled with the current gamma ramp.</span></span>

<span data-ttu-id="caf3d-140">È possibile includere il \_ valore D3DSGR calibrate per il primo parametro di [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) per richiamare il calibratore quando si impostano nuovi livelli gamma.</span><span class="sxs-lookup"><span data-stu-id="caf3d-140">You can include the D3DSGR\_CALIBRATE value for the first parameter of [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp) to invoke the calibrator when setting new gamma levels.</span></span> <span data-ttu-id="caf3d-141">La calibratura delle rampe gamma comporta un sovraccarico di elaborazione e non deve essere usata di frequente.</span><span class="sxs-lookup"><span data-stu-id="caf3d-141">Calibrating gamma ramps incurs some processing overhead, and should not be used frequently.</span></span> <span data-ttu-id="caf3d-142">L'impostazione di una rampa gamma calibrata fornisce un valore gamma coerente e assoluto per l'utente, indipendentemente dalla scheda di visualizzazione e dal monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="caf3d-142">Setting a calibrated gamma ramp provides a consistent and absolute gamma value for the user, regardless of the display adapter and monitor.</span></span>

<span data-ttu-id="caf3d-143">Non tutti i sistemi supportano la calibrazione gamma.</span><span class="sxs-lookup"><span data-stu-id="caf3d-143">Not all systems support gamma calibration.</span></span> <span data-ttu-id="caf3d-144">Per determinare se la calibrazione gamma è supportata, chiamare [**GetDeviceCaps**](/windows/desktop/api)ed esaminare il membro Caps2 della struttura [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) associata dopo che il metodo restituisce un risultato.</span><span class="sxs-lookup"><span data-stu-id="caf3d-144">To determine if gamma calibration is supported, call [**GetDeviceCaps**](/windows/desktop/api), and examine the Caps2 member of the associated [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure after the method returns.</span></span> <span data-ttu-id="caf3d-145">Se \_ è presente il flag D3DCAPS2 CANCALIBRATEGAMMA Capability, la calibrazione gamma è supportata.</span><span class="sxs-lookup"><span data-stu-id="caf3d-145">If the D3DCAPS2\_CANCALIBRATEGAMMA capability flag is present, then gamma calibration is supported.</span></span>

<span data-ttu-id="caf3d-146">Quando si impostano nuovi livelli di rampa, tenere presente che i livelli impostati nelle matrici vengono usati solo quando l'applicazione è in modalità esclusiva a schermo intero.</span><span class="sxs-lookup"><span data-stu-id="caf3d-146">When setting new ramp levels, keep in mind that the levels you set in the arrays are only used when your application is in full-screen, exclusive mode.</span></span> <span data-ttu-id="caf3d-147">Ogni volta che l'applicazione passa alla modalità normale, i livelli di rampa vengono accantonati, che diventano effettivi quando l'applicazione ripristina la modalità a schermo intero.</span><span class="sxs-lookup"><span data-stu-id="caf3d-147">Whenever your application changes to normal mode, the ramp levels are set aside, taking effect again when the application reinstates full-screen mode.</span></span>

<span data-ttu-id="caf3d-148">Se il dispositivo non supporta le rampe gamma nella modalità di presentazione corrente della catena di scambio (a schermo intero o a finestra), non viene restituito alcun valore di errore.</span><span class="sxs-lookup"><span data-stu-id="caf3d-148">If the device does not support gamma ramps in the swap chain's current presentation mode (full-screen or windowed), no error value is returned.</span></span> <span data-ttu-id="caf3d-149">Le applicazioni possono controllare i \_ bit della funzionalità D3DCAPS2 FULLSCREENGAMMA e D3DCAPS2 \_ CANCALIBRATEGAMMA nel membro Caps2 del tipo D3DCAPS9 per determinare le funzionalità del dispositivo e se è installato un calibratore.</span><span class="sxs-lookup"><span data-stu-id="caf3d-149">Applications can check the D3DCAPS2\_FULLSCREENGAMMA and D3DCAPS2\_CANCALIBRATEGAMMA capability bits in the Caps2 member of the D3DCAPS9 type to determine the capabilities of the device and whether a calibrator is installed.</span></span>

## <a name="related-topics"></a><span data-ttu-id="caf3d-150">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="caf3d-150">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="caf3d-151">Superfici Direct3D</span><span class="sxs-lookup"><span data-stu-id="caf3d-151">Direct3D Surfaces</span></span>](direct3d-surfaces.md)
</dt> </dl>

 

 
