---
description: Le mappe dell'ambiente sferico, o mappe Sphere, sono trame speciali che contengono un'immagine della scena che circonda un oggetto o gli effetti di illuminazione intorno all'oggetto.
ms.assetid: b4a8defc-876f-4a23-a12e-e7423a1e8f89
title: Mapping di ambienti sferici (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e9b0e7aaa123478ecc7cc327dca0b13a8aae3d0c
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/06/2021
ms.locfileid: "106304062"
---
# <a name="spherical-environment-mapping-direct3d-9"></a><span data-ttu-id="1e6aa-103">Mapping di ambienti sferici (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="1e6aa-103">Spherical Environment Mapping (Direct3D 9)</span></span>

<span data-ttu-id="1e6aa-104">Le mappe dell'ambiente sferico, o mappe Sphere, sono trame speciali che contengono un'immagine della scena che circonda un oggetto o gli effetti di illuminazione intorno all'oggetto.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-104">Spherical environment maps, or sphere maps, are special textures that contain an image of the scene surrounding an object, or the lighting effects around the object.</span></span> <span data-ttu-id="1e6aa-105">Diversamente dalle mappe di ambiente cubi, le mappe Sphere non rappresentano direttamente i dintorni di un oggetto.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-105">Unlike cubic environment maps, sphere maps don't directly represent an object's surroundings.</span></span> <span data-ttu-id="1e6aa-106">L'immagine della teiera nell'argomento [mapping dell'ambiente (Direct3D 9)](environment-mapping.md) Mostra gli effetti della reflection che è possibile ottenere con il mapping di Sphere.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-106">The teapot image in [Environment Mapping (Direct3D 9)](environment-mapping.md) topic shows the reflection effects you can achieve with sphere mapping.</span></span> <span data-ttu-id="1e6aa-107">Una mappa Sphere è una rappresentazione 2D della visualizzazione completa di 360 gradi della scena che circonda un oggetto, come se venisse eseguita tramite una lente di pesce, come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-107">A sphere map is a 2D representation of the full 360-degree view of the scene surrounding of an object, as if taken through a fish-eye lens, as shown in the following illustration.</span></span>

![illustrazione di una mappa Sphere della parte interna di una compilazione](images/spheremap.png)

## <a name="texture-coordinates-for-spherical-environment-maps"></a><span data-ttu-id="1e6aa-109">Coordinate di trama per le mappe di ambienti sferici</span><span class="sxs-lookup"><span data-stu-id="1e6aa-109">Texture Coordinates for Spherical Environment Maps</span></span>

<span data-ttu-id="1e6aa-110">Le coordinate di trama specificate per ogni vertice che riceve un mapping dell'ambiente devono indirizzare la trama come funzione della distorsione riflessiva creata dalla curvatura della superficie.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-110">The texture coordinates that you specify for each vertex receiving an environment mapping should address the texture as a function of the reflective distortion created by the curvature of the surface.</span></span> <span data-ttu-id="1e6aa-111">Le applicazioni devono calcolare queste coordinate di trama per ogni vertice per ottenere l'effetto desiderato.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-111">Applications must compute these texture coordinates for each vertex to achieve the desired effect.</span></span> <span data-ttu-id="1e6aa-112">Un modo semplice ed efficace per generare le coordinate di trama usa il vertice normale come input.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-112">One simple and effective way to generate texture coordinates uses the vertex normal as input.</span></span> <span data-ttu-id="1e6aa-113">Sebbene esistano diversi metodi, l'equazione seguente è comune tra le applicazioni che eseguono il mapping dell'ambiente con le mappe Sphere.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-113">Although several methods exist, the following equation is common among applications that perform environment mapping with sphere maps.</span></span>

![equazione di calcolo delle coordinate di trama per una mappa Sphere](images/spheremap-formula.png)

<span data-ttu-id="1e6aa-115">In queste formule, l'utente e la v sono le coordinate di trama calcolate e N<sub>x</sub> e n<sub>Y</sub> sono i componenti x e Y della normale vertice spazio fotocamera.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-115">In these formulas, u and v are the texture coordinates being computed, and N<sub>X</sub> and N<sub>Y</sub> are the x and y components of the camera-space vertex normal.</span></span> <span data-ttu-id="1e6aa-116">La formula è semplice ma efficace.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-116">The formula is simple but effective.</span></span> <span data-ttu-id="1e6aa-117">Se il normale ha un componente x positivo, il normale punta a destra e la coordinata u viene regolata in modo da indirizzare la trama in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-117">If the normal has a positive x component, the normal points to the right, and the u coordinate is adjusted to address the texture appropriately.</span></span> <span data-ttu-id="1e6aa-118">Analogamente, per la coordinata v: y positivo indica che il normale punta verso l'alto.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-118">Likewise for the v coordinate: positive y indicates that the normal points up.</span></span> <span data-ttu-id="1e6aa-119">Il contrario è true per i valori negativi in ogni componente.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-119">The opposite is true for negative values in each component.</span></span>

<span data-ttu-id="1e6aa-120">Se il normale punta direttamente alla fotocamera, le coordinate risultanti non devono ricevere alcuna distorsione.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-120">If the normal points directly at the camera, the resulting coordinates should receive no distortion.</span></span> <span data-ttu-id="1e6aa-121">La distorsione + 0,5 a entrambe le coordinate posiziona il punto di distorsione zero al centro della mappa della sfera e una normale del vertice di (0, 0, z) si rivolge a questo punto.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-121">The +0.5 bias to both coordinates places the point of zero-distortion at the center of the sphere map, and a vertex normal of (0, 0, z) addresses this point.</span></span> <span data-ttu-id="1e6aa-122">Questa formula non tiene conto del componente z del normale, ma le applicazioni che usano la formula possono ottimizzare i calcoli ignorando i vertici con una normale con un elemento z positivo.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-122">This formula doesn't account for the z component of the normal, but applications that use the formula can optimize computations by skipping vertices with a normal that has a positive z element.</span></span> <span data-ttu-id="1e6aa-123">Questa operazione può essere eseguita per gli oggetti con ombreggiatura piatta perché, nello spazio della fotocamera, se il normale fa riferimento alla fotocamera (positivo z), il vertice viene raccolto quando viene eseguito il rendering dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-123">This works for flat-shaded objects because, in camera space, if the normal points away from the camera (positive z), the vertex is culled when the object is rendered.</span></span> <span data-ttu-id="1e6aa-124">Per gli oggetti ombreggiati con Gouraud, un normale può puntare fuori dalla fotocamera (x positivo) e il triangolo che contiene il vertice può essere ancora visibile.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-124">For Gouraud-shaded objects, a normal can point away from the camera (positive x), and the triangle containing the vertex can still be visible.</span></span> <span data-ttu-id="1e6aa-125">Se non si calcolano l'utente e il v per questo vertice, è possibile che venga ancora usato il volto, causando un comportamento imprevisto.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-125">If you don't compute u and v for this vertex, the face might still be used, resulting in unexpected behavior.</span></span>

## <a name="applying-spherical-environment-maps"></a><span data-ttu-id="1e6aa-126">Applicazione di mappe di ambienti sferici</span><span class="sxs-lookup"><span data-stu-id="1e6aa-126">Applying Spherical Environment Maps</span></span>

<span data-ttu-id="1e6aa-127">Applicare un mapping dell'ambiente agli oggetti in modo analogo a qualsiasi altra trama, impostando la trama sulla fase di trama appropriata con il metodo [**IDirect3DDevice9:: setexture**](/windows/desktop/api) .</span><span class="sxs-lookup"><span data-stu-id="1e6aa-127">You apply an environment map to objects in the same manner as for any other texture, by setting the texture to the appropriate texture stage with the [**IDirect3DDevice9::SetTexture**](/windows/desktop/api) method.</span></span> <span data-ttu-id="1e6aa-128">Impostare il primo parametro sull'indice per la fase di trama desiderata e impostare il secondo parametro sull'indirizzo dell'interfaccia [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) restituita quando è stata creata la trama per la mappa dell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-128">Set the first parameter to the index for the desired texture stage, and set the second parameter to the address of the [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) interface returned when you created the texture for the environment map.</span></span> <span data-ttu-id="1e6aa-129">È possibile impostare le operazioni e gli argomenti del colore e della fusione alfa in base alle esigenze per ottenere gli effetti desiderati per la fusione della trama.</span><span class="sxs-lookup"><span data-stu-id="1e6aa-129">You can set the color and alpha blending operations and arguments as needed to achieve the desired texture blending effects.</span></span>

## <a name="related-topics"></a><span data-ttu-id="1e6aa-130">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="1e6aa-130">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="1e6aa-131">Mapping dell'ambiente</span><span class="sxs-lookup"><span data-stu-id="1e6aa-131">Environment Mapping</span></span>](environment-mapping.md)
</dt> </dl>

 

 
