---
title: Bluetooth e WSAQUERYSET per il servizio set
description: Uso della struttura WSAQUERYSET con la funzione WSASetService per registrare o rimuovere le istanze del servizio nello spazio dei nomi Bluetooth (NS \_ BTH).
ms.assetid: e582156d-a298-4d9b-8ed1-4c558fa4f203
keywords:
- Bluetooth e WSAQUERYSET per set service Bluetooth
- WSAQUERYSET Bluetooth, per set service
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 64a632cad2c813856367d4565bc69e0d4baf2eba
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "103963167"
---
# <a name="bluetooth-and-wsaqueryset-for-set-service"></a>Bluetooth e WSAQUERYSET per il servizio set

Bluetooth usa la struttura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) per facilitare l'individuazione di dispositivi e servizi nello spazio dei nomi Bluetooth, NS \_ BTH.

La funzione [**WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea) usa la struttura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) per registrare o rimuovere le istanze del servizio nello spazio dei nomi Bluetooth. Nella tabella seguente sono elencati i valori dei membri nella struttura **WSAQUERYSET** .

| Membro                      | Valore obbligatorio (input)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Output                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **dwSize**                  | Deve essere impostato su **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)). Utilizzato come meccanismo di controllo delle versioni.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Nessuna.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwOutputFlags**           | Non usato.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Nessuna.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszServiceInstanceName** | Facoltativo, ma consigliato. Usato per costruire l'attributo ServiceName di Bluetooth.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Nessuna.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpServiceClassId**        | Obbligatorio. GUID corrispondente alla classe del servizio. Questo valore deve corrispondere a un GUID del documento relativo ai numeri assegnati Bluetooth per i profili noti o a un UUID univoco generato dall'applicazione per le applicazioni che non sono basate su profili. Usato per costruire una sequenza di attributi ServiceClassIdList con questo come unico membro.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Nessuna.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpVersion**               | Non usato.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Nessuna.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszComment**             | facoltativo. Usato per costruire l'attributo di ServiceDescription Bluetooth.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Nessuna.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwNameSpace**             | Spazio dei nomi in cui vincolare il servizio. Deve essere NS \_ BTH.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Nessuna.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpNSProviderId**          | Non obbligatorio.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Nessuna.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszContext**             | Non usato.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Nessuna.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwNumberOfProtocols**     | Non usato.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Nessuna.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpafpProtocols**          | Non usato.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Nessuna.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszQueryString**         | Non usato.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Nessuna.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwNumberOfCsAddrs**       | Numero di indirizzi da registrare. Deve essere 1.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Nessuna.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpcsaBuffer**             | Obbligatorio se **lpBlob** non è stato popolato con un flusso SDP non elaborato. Puntatore a una struttura di [**\_ informazioni CSADDR**](/windows/desktop/api/nspapi/ns-nspapi-csaddr_info) con il membro **LocalAddr. LpSockaddr** che punta al [**sockaddr \_ BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) in cui il server è in ascolto delle connessioni. La funzione [**getsockname**](/windows/desktop/api/winsock/nf-winsock-getsockname) può essere usata per restituire la **struttura \_ sockaddr BTH** per un socket associato. Le informazioni nel membro **lpcsaBuffer** vengono usate dal sistema per costruire l'attributo di ProtocolDescriptorList SDP Bluetooth. Il protocollo e la porta specificati in **lpcsaBuffer** devono essere univoci (non registrati in precedenza) e vengono usati per indicizzare il record per le chiamate successive da eliminare. Usato per costruire l'attributo ProtocolDescriptorList Bluetooth del record SDP. | Nessuna.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpBlob**                  | facoltativo. Puntatore a una struttura [**BLOB**](/windows/desktop/api/nspapi/ns-nspapi-blob) che punta a una struttura del [**\_ \_ servizio set BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service) , consentendo al client di fornire una struttura specifica del Bluetooth contenente un record SDP binario creato dall'applicazione. Se viene specificato **lpBlob** per la funzione [**WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea) , tutti gli altri membri della struttura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) ad eccezione di **dwSize** e **dwNameSpace** verranno ignorati. Per altre informazioni, vedere [Bluetooth e BLOB](bluetooth-and-blob.md) . L'invio di un record SDP binario è necessario in molti casi, perché un numero limitato di attributi SDP può essere convertito dalla struttura **WSAQUERYSET** e le stringhe vengono convertite solo nella codifica UTF-8 della lingua predefinita.           | Se per l'input sono state fornite le strutture di [**\_ \_ servizio set**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service) di [**BLOB**](/windows/desktop/api/nspapi/ns-nspapi-blob) e BTH facoltative, insieme alla versione ULONG e ai valori di handle a cui punta il **\_ \_ servizio set BTH**, la versione viene aggiornata in modo da contenere il valore della versione di BTH \_ SDP \_ per il provider Bluetooth Windows Sockets e viene fornito l'handle, che è necessario per eliminare successivamente il record. |



 

> [!Note]  
> Per rimuovere un servizio, gli unici membri obbligatori nella struttura del [**\_ \_ servizio set BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service) sono i membri **pSdpVersion** e **pRecordHandle** .

 

## <a name="related-topics"></a>Argomenti correlati

<dl> <dt>

[Bluetooth e WSAQUERYSET per la richiesta del dispositivo](bluetooth-and-wsaqueryset-for-device-inquiry.md)
</dt> <dt>

[Bluetooth e WSAQUERYSET per la richiesta di assistenza](bluetooth-and-wsaqueryset-for-service-inquiry.md)
</dt> <dt>

[Bluetooth e BLOB](bluetooth-and-blob.md)
</dt> <dt>

[Bluetooth e WSASetService](bluetooth-and-wsasetservice.md)
</dt> <dt>

[**BLOB**](/windows/desktop/api/nspapi/ns-nspapi-blob)
</dt> <dt>

[**\_servizio set \_ BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service)
</dt> <dt>

[**\_informazioni CSADDR**](/windows/desktop/api/nspapi/ns-nspapi-csaddr_info)
</dt> <dt>

[**getsockname**](/windows/desktop/api/winsock/nf-winsock-getsockname)
</dt> <dt>

[**\_BTH sockaddr**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth)
</dt> <dt>

[**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)
</dt> <dt>

[Windows Sockets](/windows/desktop/WinSock/windows-sockets-start-page-2)
</dt> </dl>

 

 