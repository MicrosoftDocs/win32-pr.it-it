---
title: Bluetooth e WSALookupServiceBegin per l'individuazione del servizio
description: Per individuare l'esistenza di un servizio specifico su un server Bluetooth, i client utilizzano le funzioni WSALookupServiceBegin, WSALookupServiceNext e WSALookupServiceEnd.
ms.assetid: d9961600-cdca-42ec-92eb-118b8186ed2e
keywords:
- Bluetooth e WSALookupServiceBegin per l'individuazione del servizio Bluetooth
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 274b3beb3de7683bd43a0f99350db6e1a347f51e
ms.sourcegitcommit: ae73f4dd3cf5a3c6a1ea7d191ca32a5b01f6686b
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/08/2020
ms.locfileid: "103873062"
---
# <a name="bluetooth-and-wsalookupservicebegin-for-service-discovery"></a><span data-ttu-id="967ff-104">Bluetooth e WSALookupServiceBegin per l'individuazione del servizio</span><span class="sxs-lookup"><span data-stu-id="967ff-104">Bluetooth and WSALookupServiceBegin for Service Discovery</span></span>

<span data-ttu-id="967ff-105">Per individuare l'esistenza di un servizio specifico su un server Bluetooth, i client utilizzano le funzioni [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina), [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta)e [**WSALookupServiceEnd**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupserviceend) .</span><span class="sxs-lookup"><span data-stu-id="967ff-105">To discover the existence of a particular service on a Bluetooth server, clients use the [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina), [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta), and [**WSALookupServiceEnd**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupserviceend) functions.</span></span> <span data-ttu-id="967ff-106">È possibile eseguire query per indirizzi locali e remoti, ma le connessioni possono essere stabilite solo con indirizzi remoti.</span><span class="sxs-lookup"><span data-stu-id="967ff-106">Queries can be performed for local and remote addresses, but connections can only be established with remote addresses.</span></span> <span data-ttu-id="967ff-107">Gli handle del servizio individuati durante questa operazione non possono essere utilizzati per eliminare il servizio tramite [**WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea).</span><span class="sxs-lookup"><span data-stu-id="967ff-107">Service handles discovered during this operation cannot be used to delete the service via [**WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea).</span></span> <span data-ttu-id="967ff-108">Il loopback non è supportato da RFCOMM.</span><span class="sxs-lookup"><span data-stu-id="967ff-108">Loopback is not supported by RFCOMM.</span></span>

<span data-ttu-id="967ff-109">È possibile eseguire due tipi di query di individuazione dei servizi:</span><span class="sxs-lookup"><span data-stu-id="967ff-109">Two basic types of service discovery queries can be performed:</span></span>

-   <span data-ttu-id="967ff-110">Query per uno o più servizi nel dispositivo locale</span><span class="sxs-lookup"><span data-stu-id="967ff-110">Queries for one or more services on the local device</span></span>
-   <span data-ttu-id="967ff-111">Esegue una query per uno o più servizi in un dispositivo peer specificato</span><span class="sxs-lookup"><span data-stu-id="967ff-111">Queries for one or more services on a specified peer device</span></span>

<span data-ttu-id="967ff-112">La funzione [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) riceve una struttura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) nel parametro *lpqsRestrictions* .</span><span class="sxs-lookup"><span data-stu-id="967ff-112">The [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) function receives a [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure in its *lpqsRestrictions* parameter.</span></span> <span data-ttu-id="967ff-113">**WSALookupServiceBegin** esegue una query client basata sul set di restrizioni di ricerca contenute in **WSAQUERYSET** .</span><span class="sxs-lookup"><span data-stu-id="967ff-113">**WSALookupServiceBegin** performs a client query based on the set of search restrictions that the **WSAQUERYSET** contains.</span></span> <span data-ttu-id="967ff-114">I client Bluetooth devono specificare le restrizioni, elencate nella tabella seguente, nella struttura **WSAQUERYSET** quando si usa la funzione **WSALookupServiceBegin** per eseguire una query per i servizi.</span><span class="sxs-lookup"><span data-stu-id="967ff-114">Bluetooth clients must specify the restrictions, listed in the following table, in the **WSAQUERYSET** structure when using the **WSALookupServiceBegin** function to query for services.</span></span>



| <span data-ttu-id="967ff-115">Membro WSAQUERYSET</span><span class="sxs-lookup"><span data-stu-id="967ff-115">WSAQUERYSET member</span></span>    | <span data-ttu-id="967ff-116">Restrizione</span><span class="sxs-lookup"><span data-stu-id="967ff-116">Restriction</span></span>                                                                                                                                                                                                                                                                                                                                                                     |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="967ff-117">**dwSize**</span><span class="sxs-lookup"><span data-stu-id="967ff-117">**dwSize**</span></span>            | <span data-ttu-id="967ff-118">Impostare su **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span><span class="sxs-lookup"><span data-stu-id="967ff-118">Set to **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span></span>                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="967ff-119">**lpServiceClassId**</span><span class="sxs-lookup"><span data-stu-id="967ff-119">**lpServiceClassId**</span></span>  | <span data-ttu-id="967ff-120">Impostare sull'UUID Bluetooth più specifico che può essere utilizzato per determinare l'ambito della query.</span><span class="sxs-lookup"><span data-stu-id="967ff-120">Set to the most specific Bluetooth UUID that can be used to determine the scope of the query.</span></span> <span data-ttu-id="967ff-121">Se, ad esempio, si imposta **lpServiceClassId** sull'UUID del protocollo L2CAP, vengono restituiti tutti i servizi L2CAP, in sostanza l'enumerazione di tutti i record SD nella destinazione.</span><span class="sxs-lookup"><span data-stu-id="967ff-121">For example, setting **lpServiceClassId** to the UUID of the L2CAP protocol results in all L2CAP services returned, essentially enumerating all SD records on the target.</span></span> <span data-ttu-id="967ff-122">Se si imposta l'UUID su un servizio specifico, tuttavia, vengono restituite solo le istanze di tale servizio.</span><span class="sxs-lookup"><span data-stu-id="967ff-122">Setting the UUID to a specific service, however, returns only the instances of that service.</span></span><br/> |
| <span data-ttu-id="967ff-123">**dwNameSpace**</span><span class="sxs-lookup"><span data-stu-id="967ff-123">**dwNameSpace**</span></span>       | <span data-ttu-id="967ff-124">Impostare su **NS \_ BTH**.</span><span class="sxs-lookup"><span data-stu-id="967ff-124">Set to **NS\_BTH**.</span></span>                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="967ff-125">**dwNumberOfCsAddrs**</span><span class="sxs-lookup"><span data-stu-id="967ff-125">**dwNumberOfCsAddrs**</span></span> | <span data-ttu-id="967ff-126">Impostare su 0.</span><span class="sxs-lookup"><span data-stu-id="967ff-126">Set to 0.</span></span>                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="967ff-127">**lpszContext**</span><span class="sxs-lookup"><span data-stu-id="967ff-127">**lpszContext**</span></span>       | <span data-ttu-id="967ff-128">Impostare sull'indirizzo del dispositivo Bluetooth con cui stabilire una connessione SDP per eseguire la query dei servizi.</span><span class="sxs-lookup"><span data-stu-id="967ff-128">Set to the Bluetooth Device Address with which to establish an SDP connection to perform the query of services.</span></span> <span data-ttu-id="967ff-129">Questo membro deve essere una stringa convertita mediante la funzione [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) .</span><span class="sxs-lookup"><span data-stu-id="967ff-129">This member must be a string that is converted by using the [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) function.</span></span> <span data-ttu-id="967ff-130">Se viene specificato l'indirizzo di radio locale, viene eseguita la ricerca dei record SDP locali.</span><span class="sxs-lookup"><span data-stu-id="967ff-130">If the local radio address is supplied, the local SDP records are searched.</span></span><br/>                                             |
| <span data-ttu-id="967ff-131">Altri membri</span><span class="sxs-lookup"><span data-stu-id="967ff-131">Other members</span></span>         | <span data-ttu-id="967ff-132">Tutti gli altri membri della struttura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) vengono ignorati.</span><span class="sxs-lookup"><span data-stu-id="967ff-132">All other members of the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure are ignored.</span></span>                                                                                                                                                                                                                                                                                        |



 

<span data-ttu-id="967ff-133">La connessione SDP al dispositivo remoto non rimane attiva dopo che la funzione [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) ha completato una query del servizio. la connessione viene terminata prima della restituzione di **WSALookupServiceBegin** .</span><span class="sxs-lookup"><span data-stu-id="967ff-133">The SDP connection to the remote device does not remain active after the [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) function completes a service query; the connection is terminated before **WSALookupServiceBegin** returns.</span></span> <span data-ttu-id="967ff-134">Le applicazioni che richiedono la connessione SDP rimangano attive dopo il completamento di una query del servizio devono specificare l'UUID della classe del servizio a cui connettersi usando il membro **serviceClassId** della struttura [**\_ BTH di SOCKADDR**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) durante l'emissione della chiamata di funzione Windows Sockets [**Connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) .</span><span class="sxs-lookup"><span data-stu-id="967ff-134">Applications that require the SDP connection to remain active after a service query completes should specify the service class UUID to which to connect by using the **serviceClassId** member of the [**SOCKADDR\_BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) structure when issuing the Windows Sockets [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) function call.</span></span>

<span data-ttu-id="967ff-135">I flag, elencati nella tabella seguente, vengono usati nel parametro *dwControlFlags* delle funzioni [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) e [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) per controllare i risultati della query.</span><span class="sxs-lookup"><span data-stu-id="967ff-135">The flags, listed in the following table, are used in the *dwControlFlags* parameter of the [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) and [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) functions to control the query results.</span></span> <span data-ttu-id="967ff-136">I **flag \_ LUP** e **LUP \_ FlushCache** vengono usati dalla funzione **WSALookupServiceBegin** ; i restanti flag vengono usati nelle chiamate alla funzione **WSALookupServiceNext** .</span><span class="sxs-lookup"><span data-stu-id="967ff-136">The **LUP\_CONTAINERS** and **LUP\_FLUSHCACHE** flags are used by the **WSALookupServiceBegin** function; the rest of the flags are used in calls to the **WSALookupServiceNext** function.</span></span>

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="967ff-137">Contrassegno</span><span class="sxs-lookup"><span data-stu-id="967ff-137">Flag</span></span></th>
<th><span data-ttu-id="967ff-138">Risultato</span><span class="sxs-lookup"><span data-stu-id="967ff-138">Result</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="967ff-139"><strong>LUP_CONTAINERS</strong></span><span class="sxs-lookup"><span data-stu-id="967ff-139"><strong>LUP_CONTAINERS</strong></span></span></td>
<td><span data-ttu-id="967ff-140">Non deve essere impostato.</span><span class="sxs-lookup"><span data-stu-id="967ff-140">Must not be set.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="967ff-141"><strong>LUP_FLUSHCACHE</strong></span><span class="sxs-lookup"><span data-stu-id="967ff-141"><strong>LUP_FLUSHCACHE</strong></span></span></td>
<td><span data-ttu-id="967ff-142">In genere, le applicazioni devono specificare <strong>LUP_FLUSHCACHE</strong>.</span><span class="sxs-lookup"><span data-stu-id="967ff-142">Applications should generally specify <strong>LUP_FLUSHCACHE</strong>.</span></span> <span data-ttu-id="967ff-143">Questo flag indica al sistema di ignorare le informazioni memorizzate nella cache e di stabilire una connessione SDP in aria al dispositivo specificato per eseguire la ricerca SDP.</span><span class="sxs-lookup"><span data-stu-id="967ff-143">This flag instructs the system to ignore any cached information and establish an over-the-air SDP connection to the specified device to perform the SDP search.</span></span> <span data-ttu-id="967ff-144">Questa operazione non memorizzata nella cache può richiedere alcuni secondi (mentre una ricerca memorizzata nella cache restituisce rapidamente).</span><span class="sxs-lookup"><span data-stu-id="967ff-144">This non-cached operation may take several seconds (whereas a cached search returns quickly).</span></span> <span data-ttu-id="967ff-145">Attualmente Bluetooth non memorizza nella cache in modo proattivo i record SDP dai dispositivi nelle vicinanze, né attualmente memorizza nella cache in modo aggressivo le query precedenti.</span><span class="sxs-lookup"><span data-stu-id="967ff-145">Bluetooth currently does not proactively cache SDP records from nearby devices, nor does it currently aggressively cache previous queries.</span></span> <span data-ttu-id="967ff-146">Pertanto, le applicazioni devono prevedere che le query non restituiscono alcun risultato (con un codice di errore <strong>WSASERVICE_NOT_FOUND</strong>) se non è specificato <strong>LUP_FLUSHCACHE</strong> .</span><span class="sxs-lookup"><span data-stu-id="967ff-146">Therefore, applications should anticipate that queries may return no results (with an error code of <strong>WSASERVICE_NOT_FOUND</strong>) if <strong>LUP_FLUSHCACHE</strong> is not specified.</span></span> <span data-ttu-id="967ff-147">I dati memorizzati nella cache disponibili tramite l'interfaccia Windows Sockets possono essere migliorati in futuro.</span><span class="sxs-lookup"><span data-stu-id="967ff-147">The cached data that is available by using the Windows Sockets interface may be enhanced in the future.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="967ff-148"><strong>LUP_RES_SERVICE</strong></span><span class="sxs-lookup"><span data-stu-id="967ff-148"><strong>LUP_RES_SERVICE</strong></span></span></td>
<td><span data-ttu-id="967ff-149">Restituisce informazioni sull'indirizzo Bluetooth locale.</span><span class="sxs-lookup"><span data-stu-id="967ff-149">Return information about the local Bluetooth address.</span></span> <span data-ttu-id="967ff-150">Questo flag ha effetto solo se viene specificato anche <strong>LUP_RETURN_ADDR</strong> .</span><span class="sxs-lookup"><span data-stu-id="967ff-150">This flag has an effect only if <strong>LUP_RETURN_ADDR</strong> is also specified.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="967ff-151"><strong>LUP_RETURN_NAME</strong></span><span class="sxs-lookup"><span data-stu-id="967ff-151"><strong>LUP_RETURN_NAME</strong></span></span></td>
<td><span data-ttu-id="967ff-152">Restituisce il nome visualizzato del servizio nel membro <strong>lpszServiceInstanceName</strong> della struttura <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> per ogni chiamata alla funzione <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="967ff-152">Return the display name of the service in the <strong>lpszServiceInstanceName</strong> member of the <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> structure for each call to the <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> function.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="967ff-153"><strong>LUP_RETURN_TYPE</strong></span><span class="sxs-lookup"><span data-stu-id="967ff-153"><strong>LUP_RETURN_TYPE</strong></span></span></td>
<td><span data-ttu-id="967ff-154">Restituisce l'ID della classe del servizio nel membro <strong>lpServiceClassId</strong> della struttura <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="967ff-154">Return the service class ID in the <strong>lpServiceClassId</strong> member of the <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> structure.</span></span>
<blockquote>
[!Note]<br />
<span data-ttu-id="967ff-155">L'uso di questo flag è applicabile solo alla funzione <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina"><strong>WSALookupServiceBegin</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="967ff-155">Use of this flag is only applicable to the <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina"><strong>WSALookupServiceBegin</strong></a> function.</span></span> <span data-ttu-id="967ff-156">Questo valore è sempre zero per <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a>.</span><span class="sxs-lookup"><span data-stu-id="967ff-156">This value is always zero for <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a>.</span></span>
</blockquote>
<br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="967ff-157"><strong>LUP_RETURN_ADDR</strong></span><span class="sxs-lookup"><span data-stu-id="967ff-157"><strong>LUP_RETURN_ADDR</strong></span></span></td>
<td><span data-ttu-id="967ff-158">Restituisce un indirizzo nel membro <strong>lpcsaBuffer</strong> da utilizzare con le chiamate di funzione <a href="/windows/desktop/api/winsock2/nf-winsock2-connect"><strong>Connect</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="967ff-158">Return an address in the <strong>lpcsaBuffer</strong> member to be used with <a href="/windows/desktop/api/winsock2/nf-winsock2-connect"><strong>connect</strong></a> function calls.</span></span> <span data-ttu-id="967ff-159">L'indirizzo restituito contiene il numero di porta.</span><span class="sxs-lookup"><span data-stu-id="967ff-159">The returned address contains the port number.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="967ff-160"><strong>LUP_RETURN_BLOB</strong></span><span class="sxs-lookup"><span data-stu-id="967ff-160"><strong>LUP_RETURN_BLOB</strong></span></span></td>
<td><span data-ttu-id="967ff-161">Restituisce i record SD corrispondenti nel membro <strong>lpBlob</strong> , formattati in base alla specifica del record Bluetooth SDP.</span><span class="sxs-lookup"><span data-stu-id="967ff-161">Return the matching SD records in the <strong>lpBlob</strong> member, formatted according to the Bluetooth SDP record specification.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="967ff-162"><strong>LUP_RETURN_ALL</strong></span><span class="sxs-lookup"><span data-stu-id="967ff-162"><strong>LUP_RETURN_ALL</strong></span></span></td>
<td><span data-ttu-id="967ff-163">Restituisce tutte le informazioni sui flag precedenti.</span><span class="sxs-lookup"><span data-stu-id="967ff-163">Return all of the above flags' information.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="967ff-164"><strong>LUP_RETURN_COMMENT</strong></span><span class="sxs-lookup"><span data-stu-id="967ff-164"><strong>LUP_RETURN_COMMENT</strong></span></span></td>
<td><span data-ttu-id="967ff-165">Restituisce la descrizione del servizio nel membro <strong>lpszComment</strong> della struttura <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> per ogni chiamata alla funzione <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="967ff-165">Return the service description in the <strong>lpszComment</strong> member of the <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> structure for each call to the <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> function.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="967ff-166"><strong>LUP_FLUSHPREVIOUS</strong></span><span class="sxs-lookup"><span data-stu-id="967ff-166"><strong>LUP_FLUSHPREVIOUS</strong></span></span></td>
<td><span data-ttu-id="967ff-167">Ignorare il record successivo disponibile e restituire il record che lo segue.</span><span class="sxs-lookup"><span data-stu-id="967ff-167">Skip the next available record, and return the record that follows it.</span></span></td>
</tr>
</tbody>
</table>



 

## <a name="advanced-service-queries"></a><span data-ttu-id="967ff-168">Query di servizio avanzate</span><span class="sxs-lookup"><span data-stu-id="967ff-168">Advanced Service Queries</span></span>

<span data-ttu-id="967ff-169">Le operazioni di query descritte nella sezione precedente possono essere utilizzate per restituire tutti i risultati da un singolo GUID, che dovrebbe essere sufficiente per la maggior parte delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="967ff-169">The query operations that are described in the previous section can be used to return all results from a single GUID, which should be sufficient for most applications.</span></span> <span data-ttu-id="967ff-170">Una query avanzata consente a un'applicazione di creare una query più specifica; offre la possibilità di associare UUID e attributi alle informazioni restituite.</span><span class="sxs-lookup"><span data-stu-id="967ff-170">An advanced query enables an application to create a more specific query; it provides the capability to match UUIDs and attributes in returned information.</span></span>

<span data-ttu-id="967ff-171">Per eseguire una query avanzata per i servizi, i client Bluetooth devono specificare le restrizioni seguenti nella struttura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) che viene passata al parametro *lpqsRestrictions* .</span><span class="sxs-lookup"><span data-stu-id="967ff-171">To perform an advanced query for services, Bluetooth clients must specify the following restrictions in the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure that is passed into the *lpqsRestrictions* parameter.</span></span>



| <span data-ttu-id="967ff-172">Membro WSAQUERYSET</span><span class="sxs-lookup"><span data-stu-id="967ff-172">WSAQUERYSET member</span></span>   | <span data-ttu-id="967ff-173">Restrizione</span><span class="sxs-lookup"><span data-stu-id="967ff-173">Restriction</span></span>                                                                                                                                                                                                                                                                                                                         |
|----------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="967ff-174">**dwSize**</span><span class="sxs-lookup"><span data-stu-id="967ff-174">**dwSize**</span></span>           | <span data-ttu-id="967ff-175">Impostare su **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span><span class="sxs-lookup"><span data-stu-id="967ff-175">Set to **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span></span>                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="967ff-176">**lpszContext**</span><span class="sxs-lookup"><span data-stu-id="967ff-176">**lpszContext**</span></span>      | <span data-ttu-id="967ff-177">Impostare sull'indirizzo del dispositivo Bluetooth con cui stabilire una connessione SDP per eseguire la query dei servizi.</span><span class="sxs-lookup"><span data-stu-id="967ff-177">Set to the Bluetooth Device Address with which to establish an SDP connection to perform the query of services.</span></span> <span data-ttu-id="967ff-178">Questo membro deve essere una stringa convertita mediante la funzione [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) .</span><span class="sxs-lookup"><span data-stu-id="967ff-178">This member must be a string that is converted by using the [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) function.</span></span> <span data-ttu-id="967ff-179">Se viene specificato l'indirizzo di radio locale, viene eseguita la ricerca dei record SDP locali.</span><span class="sxs-lookup"><span data-stu-id="967ff-179">If the local radio address is supplied, the local SDP records are searched.</span></span><br/> |
| <span data-ttu-id="967ff-180">**lpBlob. pBlobData**</span><span class="sxs-lookup"><span data-stu-id="967ff-180">**lpBlob.pBlobData**</span></span> | <span data-ttu-id="967ff-181">Puntatore a una struttura del [**\_ \_ servizio query BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) che contiene tutti i parametri che limitano i risultati della query.</span><span class="sxs-lookup"><span data-stu-id="967ff-181">Pointer to a [**BTH\_QUERY\_SERVICE**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) structure that contains all parameters that limit the results of the query.</span></span>                                                                                                                                                                                           |
| <span data-ttu-id="967ff-182">**dwNameSpace**</span><span class="sxs-lookup"><span data-stu-id="967ff-182">**dwNameSpace**</span></span>      | <span data-ttu-id="967ff-183">Impostare su **NS \_ BTH**.</span><span class="sxs-lookup"><span data-stu-id="967ff-183">Set to **NS\_BTH**.</span></span>                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="967ff-184">Altri membri</span><span class="sxs-lookup"><span data-stu-id="967ff-184">Other members</span></span>        | <span data-ttu-id="967ff-185">Tutti gli altri membri della struttura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) vengono ignorati.</span><span class="sxs-lookup"><span data-stu-id="967ff-185">All other members of the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure are ignored.</span></span>                                                                                                                                                                                                                                            |



 

<span data-ttu-id="967ff-186">I flag seguenti vengono passati nel parametro *dwControlFlags* di [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) per controllare i risultati di una query avanzata.</span><span class="sxs-lookup"><span data-stu-id="967ff-186">The following flags are passed in the *dwControlFlags* parameter of [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) to control the results of an advanced query.</span></span>

| <span data-ttu-id="967ff-187">Contrassegno</span><span class="sxs-lookup"><span data-stu-id="967ff-187">Flag</span></span>                     | <span data-ttu-id="967ff-188">Risultato</span><span class="sxs-lookup"><span data-stu-id="967ff-188">Result</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|--------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="967ff-189">**\_contenitori LUP**</span><span class="sxs-lookup"><span data-stu-id="967ff-189">**LUP\_CONTAINERS**</span></span>      | <span data-ttu-id="967ff-190">Non deve essere impostato.</span><span class="sxs-lookup"><span data-stu-id="967ff-190">Must not be set.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="967ff-191">**\_FlushCache LUP**</span><span class="sxs-lookup"><span data-stu-id="967ff-191">**LUP\_FLUSHCACHE**</span></span>      | <span data-ttu-id="967ff-192">Le applicazioni in genere devono specificare **LUP \_ FlushCache**.</span><span class="sxs-lookup"><span data-stu-id="967ff-192">Applications should generally specify **LUP\_FLUSHCACHE**.</span></span> <span data-ttu-id="967ff-193">Questo flag indica al sistema di ignorare le informazioni memorizzate nella cache e di stabilire una connessione SDP in aria al dispositivo specificato per eseguire la ricerca SDP.</span><span class="sxs-lookup"><span data-stu-id="967ff-193">This flag instructs the system to ignore any cached information and establish an over-the-air SDP connection to the specified device to perform the SDP search.</span></span> <span data-ttu-id="967ff-194">Questa operazione non memorizzata nella cache può richiedere alcuni secondi (mentre una ricerca memorizzata nella cache restituisce rapidamente).</span><span class="sxs-lookup"><span data-stu-id="967ff-194">This non-cached operation may take several seconds (whereas a cached search returns quickly).</span></span> <span data-ttu-id="967ff-195">Bluetooth non memorizza nella cache in modo proattivo i record SDP dai dispositivi nelle vicinanze, né memorizza nella cache aggressiva le query precedenti.</span><span class="sxs-lookup"><span data-stu-id="967ff-195">Bluetooth does not proactively cache SDP records from nearby devices, nor does it aggressively cache previous queries.</span></span> <span data-ttu-id="967ff-196">Pertanto, le applicazioni devono prevedere che le query non restituiscano spesso risultati (**WSASERVICE \_ non \_ trovato**) se **LUP \_ FlushCache** non è specificato.</span><span class="sxs-lookup"><span data-stu-id="967ff-196">Therefore applications should expect that queries may frequently return no results (**WSASERVICE\_NOT\_FOUND**) if **LUP\_FLUSHCACHE** is not specified.</span></span> <span data-ttu-id="967ff-197">I dati memorizzati nella cache disponibili tramite l'interfaccia Windows Sockets possono essere migliorati in futuro.</span><span class="sxs-lookup"><span data-stu-id="967ff-197">The cached data that is available by using the Windows Sockets interface may be enhanced in the future.</span></span> |
| <span data-ttu-id="967ff-198">**\_servizio LUP res \_**</span><span class="sxs-lookup"><span data-stu-id="967ff-198">**LUP\_RES\_SERVICE**</span></span>    | <span data-ttu-id="967ff-199">Restituisce informazioni per l'indirizzo Bluetooth locale.</span><span class="sxs-lookup"><span data-stu-id="967ff-199">Return information for the local Bluetooth Address.</span></span> <span data-ttu-id="967ff-200">L'impostazione di questo flag ha effetto solo se viene specificato anche **LUP \_ return \_ addrer** .</span><span class="sxs-lookup"><span data-stu-id="967ff-200">Setting this flag has an effect only if **LUP\_RETURN\_ADDRR** is also specified.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="967ff-201">**\_nome restituito \_ LUP**</span><span class="sxs-lookup"><span data-stu-id="967ff-201">**LUP\_RETURN\_NAME**</span></span>    | <span data-ttu-id="967ff-202">Restituisce il nome visualizzato del servizio.</span><span class="sxs-lookup"><span data-stu-id="967ff-202">Return the display name of the service.</span></span> <span data-ttu-id="967ff-203">Questo flag viene ignorato per **la \_ \_ \_ richiesta di ricerca del servizio SDP**.</span><span class="sxs-lookup"><span data-stu-id="967ff-203">This flag is ignored for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="967ff-204">**\_tipo restituito \_ LUP**</span><span class="sxs-lookup"><span data-stu-id="967ff-204">**LUP\_RETURN\_TYPE**</span></span>    | <span data-ttu-id="967ff-205">Restituisce l'ID della classe del servizio.</span><span class="sxs-lookup"><span data-stu-id="967ff-205">Return the service class ID.</span></span> <span data-ttu-id="967ff-206">Questo flag viene ignorato per **la \_ \_ \_ richiesta di ricerca del servizio SDP**.</span><span class="sxs-lookup"><span data-stu-id="967ff-206">This flag is ignored for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="967ff-207">**LUP \_ restituire \_ addr**</span><span class="sxs-lookup"><span data-stu-id="967ff-207">**LUP\_RETURN\_ADDR**</span></span>    | <span data-ttu-id="967ff-208">Restituisce un indirizzo nel membro **lpcsaBuffer** da utilizzare con le chiamate di funzione [**Connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) .</span><span class="sxs-lookup"><span data-stu-id="967ff-208">Return an address in the **lpcsaBuffer** member to be used with [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) function calls.</span></span> <span data-ttu-id="967ff-209">L'indirizzo restituito contiene il numero di porta.</span><span class="sxs-lookup"><span data-stu-id="967ff-209">The returned address contains the port number.</span></span> <span data-ttu-id="967ff-210">Questo flag viene ignorato per **la \_ \_ \_ richiesta di ricerca del servizio SDP**.</span><span class="sxs-lookup"><span data-stu-id="967ff-210">This flag is ignored for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="967ff-211">**\_BLOB restituito \_ LUP**</span><span class="sxs-lookup"><span data-stu-id="967ff-211">**LUP\_RETURN\_BLOB**</span></span>    | <span data-ttu-id="967ff-212">Restituire i record SD corrispondenti in un formato conforme alla specifica del record Bluetooth SDP.</span><span class="sxs-lookup"><span data-stu-id="967ff-212">Return the matching SD records in a format that conforms to the Bluetooth SDP record specification.</span></span> <span data-ttu-id="967ff-213">Per **la \_ \_ \_ richiesta di ricerca del servizio SDP**, il risultato in **LpBlob** per la chiamata successiva a [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) è una matrice di handle di SDP Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="967ff-213">For **SDP\_SERVICE\_SEARCH\_REQUEST**, the result in **lpBlob** for the subsequent call to [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) is an array of Bluetooth SDP handles.</span></span> <span data-ttu-id="967ff-214">Per la richiesta di attributi del **\_ servizio \_ \_ SDP** e la **richiesta di attributo di \_ ricerca del servizio \_ \_ \_ SDP**, il risultato per ogni chiamata successiva a **WSALookupServiceNext** è un record di tipo SDP binario Bluetooth i cui attributi sono limitati a quelli specificati dal membro **Prange** della query.</span><span class="sxs-lookup"><span data-stu-id="967ff-214">For **SDP\_SERVICE\_ATTRIBUTE\_REQUEST** and **SDP\_SERVICE\_SEARCH\_ATTRIBUTE\_REQUEST**, the result for each subsequent call to **WSALookupServiceNext** is a binary Bluetooth SDP record whose attributes are restricted to those specified by the **pRange** member of the query.</span></span> <span data-ttu-id="967ff-215">Questo flag è obbligatorio per **la \_ \_ \_ richiesta di ricerca del servizio SDP**.</span><span class="sxs-lookup"><span data-stu-id="967ff-215">This flag is required for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                               |
| <span data-ttu-id="967ff-216">**LUP \_ \_ Commento restituito**</span><span class="sxs-lookup"><span data-stu-id="967ff-216">**LUP\_RETURN\_COMMENT**</span></span> | <span data-ttu-id="967ff-217">Restituisce la descrizione del servizio nel membro **lpszComment** della struttura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) per ogni chiamata alla funzione [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="967ff-217">Return the service description in the **lpszComment** member of the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure for each call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="967ff-218">**\_FLUSHPREVIOUS LUP**</span><span class="sxs-lookup"><span data-stu-id="967ff-218">**LUP\_FLUSHPREVIOUS**</span></span>   | <span data-ttu-id="967ff-219">Ignorare il record successivo disponibile e restituire il record che lo segue.</span><span class="sxs-lookup"><span data-stu-id="967ff-219">Skip the next available record, and return the record that follows it.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |



 

<span data-ttu-id="967ff-220">In input **lpBlob** -> **pBlobData** punta a una struttura [**del \_ \_ servizio query BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) che contiene i valori elencati nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="967ff-220">On input, **lpBlob**->**pBlobData** points to a [**BTH\_QUERY\_SERVICE**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) structure that contains the values listed in the following table.</span></span>

> [!Note]  
> <span data-ttu-id="967ff-221">La richiesta di ricerca iniziale deve essere in grado di rientrare in un pacchetto L2CAP.</span><span class="sxs-lookup"><span data-stu-id="967ff-221">The initial search request must be able to fit into one L2CAP packet.</span></span> <span data-ttu-id="967ff-222">La risposta, tuttavia, può essere suddivisa in molti pacchetti L2CAP.</span><span class="sxs-lookup"><span data-stu-id="967ff-222">The response, however, may be broken into many L2CAP packets.</span></span>

 



| <span data-ttu-id="967ff-223">Membro</span><span class="sxs-lookup"><span data-stu-id="967ff-223">Member</span></span>            | <span data-ttu-id="967ff-224">Valore</span><span class="sxs-lookup"><span data-stu-id="967ff-224">Value</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="967ff-225">**type**</span><span class="sxs-lookup"><span data-stu-id="967ff-225">**type**</span></span>          | <span data-ttu-id="967ff-226">Tipo di ricerca da eseguire.</span><span class="sxs-lookup"><span data-stu-id="967ff-226">Type of search to perform.</span></span> <span data-ttu-id="967ff-227">Questo valore può essere una richiesta **di \_ \_ ricerca del \_ servizio SDP**, una richiesta di **\_ attributo del servizio \_ \_ SDP** o una richiesta di **\_ \_ \_ attributo \_ di ricerca** del servizio SDP.</span><span class="sxs-lookup"><span data-stu-id="967ff-227">This value can be one of **SDP\_SERVICE\_SEARCH\_REQUEST**, **SDP\_SERVICE\_ATTRIBUTE\_REQUEST**, or **SDP\_SERVICE\_SEARCH\_ATTRIBUTE\_REQUEST**.</span></span> <span data-ttu-id="967ff-228">Ogni tipo di ricerca è associato a un meccanismo di ricerca sottostante definito dalla specifica Bluetooth SDP.</span><span class="sxs-lookup"><span data-stu-id="967ff-228">Each search type is associated with an underlying search mechanism that is defined by the Bluetooth SDP specification.</span></span> <span data-ttu-id="967ff-229">Ogni risultato restituisce il formato descritto dalla struttura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) definita in precedenza in questa sezione (Advanced Service queries).</span><span class="sxs-lookup"><span data-stu-id="967ff-229">Each return results in the form described by the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure that is defined earlier in this (Advanced Service Queries) section.</span></span> |
| <span data-ttu-id="967ff-230">**serviceHandle**</span><span class="sxs-lookup"><span data-stu-id="967ff-230">**serviceHandle**</span></span> | <span data-ttu-id="967ff-231">Utilizzato per le ricerche di attributi.</span><span class="sxs-lookup"><span data-stu-id="967ff-231">Used for attribute searches.</span></span> <span data-ttu-id="967ff-232">Questo valore specifica l'handle del servizio con il quale eseguire una query sugli attributi del membro **Prange** .</span><span class="sxs-lookup"><span data-stu-id="967ff-232">This value specifies the service handle with which to query the attributes in the **pRange** member.</span></span>                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="967ff-233">**UUID**</span><span class="sxs-lookup"><span data-stu-id="967ff-233">**uuids**</span></span>         | <span data-ttu-id="967ff-234">Usato per le ricerche di servizio e **serviceAttribute** .</span><span class="sxs-lookup"><span data-stu-id="967ff-234">Used for service and **serviceAttribute** searches.</span></span> <span data-ttu-id="967ff-235">Questo valore specifica gli UUID che un record deve contenere per corrispondere alla ricerca.</span><span class="sxs-lookup"><span data-stu-id="967ff-235">This value specifies the UUIDs that a record must contain to match the search.</span></span> <span data-ttu-id="967ff-236">Se è necessario eseguire query su più UUID per gli UUID **\_ \_ della \_ query** , questo valore imposta l'elemento SdpQueryUuid che segue immediatamente l'ultimo UUID valido a tutti gli zeri.</span><span class="sxs-lookup"><span data-stu-id="967ff-236">If less than **MAX\_UUIDS\_IN\_QUERY** UUIDs are to be queried, this value sets the SdpQueryUuid element that immediately follows the last valid UUID to all zeros.</span></span>                                                                                                                                                                       |
| <span data-ttu-id="967ff-237">**numRange**</span><span class="sxs-lookup"><span data-stu-id="967ff-237">**numRange**</span></span>      | <span data-ttu-id="967ff-238">Utilizzato per le ricerche Attribute e **serviceAttribute** .</span><span class="sxs-lookup"><span data-stu-id="967ff-238">Used for attribute and **serviceAttribute** searches.</span></span> <span data-ttu-id="967ff-239">Questo valore specifica il numero di elementi in **Prange**.</span><span class="sxs-lookup"><span data-stu-id="967ff-239">This value specifies the number of elements in **pRange**.</span></span>                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="967ff-240">**pRange**</span><span class="sxs-lookup"><span data-stu-id="967ff-240">**pRange**</span></span>        | <span data-ttu-id="967ff-241">Utilizzato per le ricerche Attribute e **serviceAttribute** .</span><span class="sxs-lookup"><span data-stu-id="967ff-241">Used for attribute and **serviceAttribute** searches.</span></span> <span data-ttu-id="967ff-242">Questo valore specifica i valori di attributo da recuperare per i record corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="967ff-242">This value specifies the attribute values to retrieve for any matching records.</span></span>                                                                                                                                                                                                                                                                                                                                        |



 

<span data-ttu-id="967ff-243">Dopo ogni chiamata riuscita alla funzione [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) , **lpBlob** -> **pBlobData** punta a un blocco di dati che contiene i valori elencati nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="967ff-243">After each successful call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function, **lpBlob**->**pBlobData** points to a block of data that contains the values listed in the following table.</span></span>

| <span data-ttu-id="967ff-244">Valore</span><span class="sxs-lookup"><span data-stu-id="967ff-244">Value</span></span>                                                                                | <span data-ttu-id="967ff-245">Descrizione</span><span class="sxs-lookup"><span data-stu-id="967ff-245">Description</span></span>                                                                                                                                                                                                                                                                                                                                          |
|--------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="967ff-246">**\_richiesta di \_ ricerca del servizio SDP \_**</span><span class="sxs-lookup"><span data-stu-id="967ff-246">**SDP\_SERVICE\_SEARCH\_REQUEST**</span></span>                                                    | <span data-ttu-id="967ff-247">Una matrice di handle di record SDP identici a **ServiceRecordHandleList** definiti da Bluetooth 1,1 SDP 4.5.2.</span><span class="sxs-lookup"><span data-stu-id="967ff-247">An array of SDP record handles that is identical to the **ServiceRecordHandleList** defined by Bluetooth 1.1 SDP 4.5.2.</span></span> <span data-ttu-id="967ff-248">Il numero di handle SDP restituiti viene calcolato da (**lpBlob**->cbSize)/**sizeof**(ulong).</span><span class="sxs-lookup"><span data-stu-id="967ff-248">The number of SDP handles that is returned is calculated by (**lpBlob**->cbSize)/**sizeof**(ULONG).</span></span> <span data-ttu-id="967ff-249">Tutti i risultati vengono restituiti in una singola chiamata alla funzione [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="967ff-249">All results are returned in a single call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span> |
| <span data-ttu-id="967ff-250">**SDP \_ Richiesta \_ attributo \_ servizio** o **\_ richiesta di \_ \_ attributo di \_ ricerca del servizio SDP**</span><span class="sxs-lookup"><span data-stu-id="967ff-250">**SDP\_SERVICE\_ATTRIBUTE\_REQUEST** or **SDP\_SERVICE\_SEARCH\_ATTRIBUTE\_REQUEST**</span></span> | <span data-ttu-id="967ff-251">Un record di SDP Bluetooth binario.</span><span class="sxs-lookup"><span data-stu-id="967ff-251">A binary Bluetooth SDP record.</span></span> <span data-ttu-id="967ff-252">Per **la \_ \_ \_ richiesta di attributo del servizio SDP**, tutti i risultati vengono restituiti in una singola chiamata alla funzione [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="967ff-252">For **SDP\_SERVICE\_ATTRIBUTE\_REQUEST**, all results are returned in a single call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span>                                                                                                                                                       |



 

> [!Note]  
> <span data-ttu-id="967ff-253">Se il membro **lpBlob** non viene specificato durante l'input per una query del servizio, viene eseguita una ricerca di un servizio e di un attributo per il servizio specificato nel membro **lpServiceClassId** sugli attributi da 0 a 0xFFFF.</span><span class="sxs-lookup"><span data-stu-id="967ff-253">If the **lpBlob** member is not specified during input for a service query, a service and attribute search is performed for the service specified in the **lpServiceClassId** member on attributes from 0 through 0xFFFF.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="967ff-254">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="967ff-254">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="967ff-255">Bluetooth e WSAQUERYSET per la richiesta di assistenza</span><span class="sxs-lookup"><span data-stu-id="967ff-255">Bluetooth and WSAQUERYSET for Service Inquiry</span></span>](bluetooth-and-wsaqueryset-for-service-inquiry.md)
</dt> <dt>

[<span data-ttu-id="967ff-256">Individuazione di dispositivi e servizi Bluetooth</span><span class="sxs-lookup"><span data-stu-id="967ff-256">Discovering Bluetooth Devices and Services</span></span>](discovering-bluetooth-devices-and-services.md)
</dt> <dt>

[<span data-ttu-id="967ff-257">Bluetooth e WSALookupServiceNext</span><span class="sxs-lookup"><span data-stu-id="967ff-257">Bluetooth and WSALookupServiceNext</span></span>](bluetooth-and-wsalookupservicenext.md)
</dt> <dt>

[<span data-ttu-id="967ff-258">Bluetooth e WSALookupServiceBegin per la richiesta del dispositivo</span><span class="sxs-lookup"><span data-stu-id="967ff-258">Bluetooth and WSALookupServiceBegin for Device Inquiry</span></span>](bluetooth-and-wsalookupservicebegin-for-device-inquiry.md)
</dt> <dt>

[<span data-ttu-id="967ff-259">**\_servizio query \_ BTH**</span><span class="sxs-lookup"><span data-stu-id="967ff-259">**BTH\_QUERY\_SERVICE**</span></span>](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service)
</dt> <dt>

[<span data-ttu-id="967ff-260">**connessione**</span><span class="sxs-lookup"><span data-stu-id="967ff-260">**connect**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-connect)
</dt> <dt>

[<span data-ttu-id="967ff-261">**\_BTH sockaddr**</span><span class="sxs-lookup"><span data-stu-id="967ff-261">**SOCKADDR\_BTH**</span></span>](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth)
</dt> <dt>

[<span data-ttu-id="967ff-262">**WSAAddressToString**</span><span class="sxs-lookup"><span data-stu-id="967ff-262">**WSAAddressToString**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa)
</dt> <dt>

[<span data-ttu-id="967ff-263">**WSALookupServiceBegin**</span><span class="sxs-lookup"><span data-stu-id="967ff-263">**WSALookupServiceBegin**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina)
</dt> <dt>

[<span data-ttu-id="967ff-264">**WSALookupServiceEnd**</span><span class="sxs-lookup"><span data-stu-id="967ff-264">**WSALookupServiceEnd**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsalookupserviceend)
</dt> <dt>

[<span data-ttu-id="967ff-265">**WSALookupServiceNext**</span><span class="sxs-lookup"><span data-stu-id="967ff-265">**WSALookupServiceNext**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta)
</dt> <dt>

[<span data-ttu-id="967ff-266">**WSAQUERYSET**</span><span class="sxs-lookup"><span data-stu-id="967ff-266">**WSAQUERYSET**</span></span>](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)
</dt> <dt>

[<span data-ttu-id="967ff-267">Windows Sockets</span><span class="sxs-lookup"><span data-stu-id="967ff-267">Windows Sockets</span></span>](/windows/desktop/WinSock/windows-sockets-start-page-2)
</dt> </dl>

