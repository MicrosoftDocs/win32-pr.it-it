---
description: Un'ora di file è un valore a 64 bit che rappresenta il numero di intervalli di 100-nanosecondi trascorsi da 12:00 A.M. 1 gennaio 1601 Coordinated Universal Time (UTC). Il sistema registra i tempi di creazione, accesso e scrittura nei file delle applicazioni.
ms.assetid: 52d80b82-9ab0-4631-9e70-85df21da4946
title: Orari file
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5919a2378e08798e4cd64d8f8357cb55692bd22e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103885838"
---
# <a name="file-times"></a><span data-ttu-id="2b1a6-105">Orari file</span><span class="sxs-lookup"><span data-stu-id="2b1a6-105">File Times</span></span>

<span data-ttu-id="2b1a6-106">Un' *ora di file* è un valore a 64 bit che rappresenta il numero di intervalli di 100-nanosecondi trascorsi da 12:00 A.M.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-106">A *file time* is a 64-bit value that represents the number of 100-nanosecond intervals that have elapsed since 12:00 A.M.</span></span> <span data-ttu-id="2b1a6-107">1 gennaio 1601 Coordinated Universal Time (UTC).</span><span class="sxs-lookup"><span data-stu-id="2b1a6-107">January 1, 1601 Coordinated Universal Time (UTC).</span></span> <span data-ttu-id="2b1a6-108">Il sistema registra i tempi di creazione, accesso e scrittura nei file delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-108">The system records file times when applications create, access, and write to files.</span></span>

<span data-ttu-id="2b1a6-109">Il file system NTFS archivia i valori di ora in formato UTC, quindi non sono interessati da modifiche nel fuso orario o nell'ora legale.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-109">The NTFS file system stores time values in UTC format, so they are not affected by changes in time zone or daylight saving time.</span></span> <span data-ttu-id="2b1a6-110">Il file system FAT archivia i valori temporali in base all'ora locale del computer.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-110">The FAT file system stores time values based on the local time of the computer.</span></span> <span data-ttu-id="2b1a6-111">Ad esempio, un file salvato alle 15:00 PST a Washington viene considerato come le 18.00 EST di New York in un volume NTFS, ma viene considerato come 3:00 EST di New York in un volume FAT.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-111">For example, a file that is saved at 3:00pm PST in Washington is seen as 6:00pm EST in New York on an NTFS volume, but it is seen as 3:00pm EST in New York on a FAT volume.</span></span>

<span data-ttu-id="2b1a6-112">I timestamp vengono aggiornati in diversi momenti e per vari motivi.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-112">Time stamps are updated at various times and for various reasons.</span></span> <span data-ttu-id="2b1a6-113">L'unica garanzia relativa a un timestamp del file è che l'ora del file viene riflessa correttamente quando l'handle che apporta la modifica viene chiuso.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-113">The only guarantee about a file time stamp is that the file time is correctly reflected when the handle that makes the change is closed.</span></span>

<span data-ttu-id="2b1a6-114">Non tutti i file System possono registrare i tempi di creazione e di ultimo accesso e non tutti i file System li registrano nello stesso modo.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-114">Not all file systems can record creation and last access times, and not all file systems record them in the same manner.</span></span> <span data-ttu-id="2b1a6-115">Ad esempio, la risoluzione del tempo di creazione in GRASSetto è di 10 millisecondi, mentre l'ora di scrittura ha una risoluzione di 2 secondi e l'ora di accesso ha una risoluzione di 1 giorno, quindi è effettivamente la data di accesso.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-115">For example, the resolution of create time on FAT is 10 milliseconds, while write time has a resolution of 2 seconds and access time has a resolution of 1 day, so it is really the access date.</span></span> <span data-ttu-id="2b1a6-116">Il file system NTFS ritarda gli aggiornamenti all'ora dell'ultimo accesso per un file fino a 1 ora dopo l'ultimo accesso.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-116">The NTFS file system delays updates to the last access time for a file by up to 1 hour after the last access.</span></span>

<span data-ttu-id="2b1a6-117">Per recuperare le ore dei file per un file specificato, utilizzare la funzione [**GetFileTime ha provocato**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) .</span><span class="sxs-lookup"><span data-stu-id="2b1a6-117">To retrieve the file times for a specified file, use the [**GetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) function.</span></span> <span data-ttu-id="2b1a6-118">**GetFileTime ha provocato** copia le ore di creazione, dell'ultimo accesso e dell'ultima scrittura in singole strutture [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) .</span><span class="sxs-lookup"><span data-stu-id="2b1a6-118">**GetFileTime** copies the creation, last access, and last write times to individual [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) structures.</span></span> <span data-ttu-id="2b1a6-119">È anche possibile recuperare gli orari dei file usando le funzioni [**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) e [**FindNextFile**](/windows/desktop/api/fileapi/nf-fileapi-findnextfilea) .</span><span class="sxs-lookup"><span data-stu-id="2b1a6-119">You can also retrieve file times using the [**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) and [**FindNextFile**](/windows/desktop/api/fileapi/nf-fileapi-findnextfilea) functions.</span></span> <span data-ttu-id="2b1a6-120">Queste funzioni copiano le ore dei file nelle strutture **FILETIME** in una struttura di [**\_ \_ dati Find Win32**](/windows/desktop/api/minwinbase/ns-minwinbase-win32_find_dataa) .</span><span class="sxs-lookup"><span data-stu-id="2b1a6-120">These functions copy the file times to **FILETIME** structures in a [**WIN32\_FIND\_DATA**](/windows/desktop/api/minwinbase/ns-minwinbase-win32_find_dataa) structure.</span></span> <span data-ttu-id="2b1a6-121">Quando si scrive in un file, l'ora dell'ultima scrittura non viene aggiornata completamente fino a quando non vengono chiusi tutti gli handle utilizzati per la scrittura.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-121">When writing to a file, the last write time is not fully updated until all handles that are used for writing are closed.</span></span>

<span data-ttu-id="2b1a6-122">Per impostare le ore dei file per un file, usare la funzione [**SetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-setfiletime) .</span><span class="sxs-lookup"><span data-stu-id="2b1a6-122">To set the file times for a file, use the [**SetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-setfiletime) function.</span></span> <span data-ttu-id="2b1a6-123">Questa funzione consente di modificare la creazione, l'ultimo accesso e l'ora dell'ultima scrittura senza modificare il contenuto del file.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-123">This function lets you modify creation, last access, and last write times without changing the content of the file.</span></span> <span data-ttu-id="2b1a6-124">È possibile confrontare gli orari dei diversi file usando la funzione [**CompareFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-comparefiletime) .</span><span class="sxs-lookup"><span data-stu-id="2b1a6-124">You can compare the times of different files by using the [**CompareFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-comparefiletime) function.</span></span> <span data-ttu-id="2b1a6-125">La funzione Confronta due ore di file e restituisce un valore che indica quale ora è successiva o restituisce 0 (zero) se gli orari sono uguali.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-125">The function compares two file times and returns a value that indicates which time is later or returns 0 (zero) if the times are equal.</span></span>

<span data-ttu-id="2b1a6-126">Se si prevede di modificare gli orari dei file per i file specificati, è possibile convertire una data e un'ora del giorno in un'ora del file usando la funzione [**SystemTimeToFileTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetofiletime) .</span><span class="sxs-lookup"><span data-stu-id="2b1a6-126">If you plan to modify file times for specified files, you can convert a date and time of day to a file time by using the [**SystemTimeToFileTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetofiletime) function.</span></span> <span data-ttu-id="2b1a6-127">È anche possibile ottenere l'ora di sistema in una struttura [**FILEtime**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) chiamando la funzione [**GetSystemTimeAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimeasfiletime) .</span><span class="sxs-lookup"><span data-stu-id="2b1a6-127">You can also obtain the system time in a [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) structure by calling the [**GetSystemTimeAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimeasfiletime) function.</span></span>

<span data-ttu-id="2b1a6-128">Per semplificare la visualizzazione di un file in un utente, utilizzare la funzione [**FileTimeToSystemTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-filetimetosystemtime) .</span><span class="sxs-lookup"><span data-stu-id="2b1a6-128">To make a file time easy to display to a user, use the [**FileTimeToSystemTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-filetimetosystemtime) function.</span></span> <span data-ttu-id="2b1a6-129">**FileTimeToSystemTime** converte l'ora del file e copia il mese, il giorno, l'anno e l'ora del giorno dall'ora del file in una struttura [**SYSTEMTIME**](/windows/win32/api/minwinbase/ns-minwinbase-systemtime) .</span><span class="sxs-lookup"><span data-stu-id="2b1a6-129">**FileTimeToSystemTime** converts the file time and copies the month, day, year, and time of day from the file time to a [**SYSTEMTIME**](/windows/win32/api/minwinbase/ns-minwinbase-systemtime) structure.</span></span>

## <a name="file-times-and-daylight-saving-time"></a><span data-ttu-id="2b1a6-130">Orari file e ora legale</span><span class="sxs-lookup"><span data-stu-id="2b1a6-130">File Times and Daylight Saving Time</span></span>

<span data-ttu-id="2b1a6-131">È necessario prestare attenzione quando si usano i file quando l'utente ha impostato il sistema in modo da adattarsi automaticamente all'ora legale.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-131">You must take care when using file times if the user has set the system to automatically adjust for daylight saving time.</span></span>

<span data-ttu-id="2b1a6-132">Per convertire un'ora del file nell'ora locale, usare la funzione [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime) .</span><span class="sxs-lookup"><span data-stu-id="2b1a6-132">To convert a file time to local time, use the [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime) function.</span></span> <span data-ttu-id="2b1a6-133">Tuttavia, **FileTimeToLocalFileTime** usa le impostazioni correnti per il fuso orario e l'ora legale.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-133">However, **FileTimeToLocalFileTime** uses the current settings for the time zone and daylight saving time.</span></span> <span data-ttu-id="2b1a6-134">Se, pertanto, si tratta dell'ora legale, l'ora dell'ora legale viene rilasciata in considerazione, anche se il file che si sta convertendo è nell'ora solare.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-134">Therefore, if it is daylight saving time, it takes daylight saving time into account, even if the file time you are converting is in standard time.</span></span>

<span data-ttu-id="2b1a6-135">Il file system FAT registra le ore sul disco nell'ora locale.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-135">The FAT file system records times on disk in local time.</span></span> <span data-ttu-id="2b1a6-136">[**GetFileTime ha provocato**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) recupera i tempi UTC memorizzati nella cache dal file system FAT.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-136">[**GetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) retrieves cached UTC times from the FAT file system.</span></span> <span data-ttu-id="2b1a6-137">Quando diventa ora legale, l'ora recuperata da **GetFileTime ha provocato** è disattivata un'ora, perché la cache non viene aggiornata.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-137">When it becomes daylight saving time, the time retrieved by **GetFileTime** is off an hour, because the cache is not updated.</span></span> <span data-ttu-id="2b1a6-138">Quando si riavvia il computer, l'ora memorizzata nella cache che **GetFileTime ha provocato** recupera è corretta.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-138">When you restart the computer, the cached time that **GetFileTime** retrieves is correct.</span></span> <span data-ttu-id="2b1a6-139">[**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) recupera l'ora locale dal file system FAT e la converte in UTC usando le impostazioni correnti per il fuso orario e l'ora legale.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-139">[**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) retrieves the local time from the FAT file system and converts it to UTC by using the current settings for the time zone and daylight saving time.</span></span> <span data-ttu-id="2b1a6-140">Di conseguenza, se è l'ora legale, **FindFirstFile** prende in considerazione l'ora legale, anche se il file che si sta convertendo è nell'ora solare.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-140">Therefore, if it is daylight saving time, **FindFirstFile** takes daylight saving time into account, even if the file time you are converting is in standard time.</span></span>

<span data-ttu-id="2b1a6-141">Il file system NTFS registra le ore su disco in formato UTC.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-141">The NTFS file system records times on disk in UTC.</span></span> <span data-ttu-id="2b1a6-142">Per tenere conto dell'ora legale durante la conversione di un'ora di file in un'ora locale, usare la sequenza di funzioni seguente invece di usare [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime):</span><span class="sxs-lookup"><span data-stu-id="2b1a6-142">To account for daylight saving time when converting a file time to a local time, use the following sequence of functions instead of using [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime):</span></span>

-   [<span data-ttu-id="2b1a6-143">**FileTimeToSystemTime**</span><span class="sxs-lookup"><span data-stu-id="2b1a6-143">**FileTimeToSystemTime**</span></span>](/windows/win32/api/timezoneapi/nf-timezoneapi-filetimetosystemtime)
-   [<span data-ttu-id="2b1a6-144">**SystemTimeToTzSpecificLocalTime**</span><span class="sxs-lookup"><span data-stu-id="2b1a6-144">**SystemTimeToTzSpecificLocalTime**</span></span>](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetotzspecificlocaltime)
-   [<span data-ttu-id="2b1a6-145">**SystemTimeToFileTime**</span><span class="sxs-lookup"><span data-stu-id="2b1a6-145">**SystemTimeToFileTime**</span></span>](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetofiletime)

## <a name="file-times-and-cdfs"></a><span data-ttu-id="2b1a6-146">Orari file e CDFS</span><span class="sxs-lookup"><span data-stu-id="2b1a6-146">File Times and CDFS</span></span>

<span data-ttu-id="2b1a6-147">Gli indicatori di data e ora dei file che si trovano in o originano da supporti utilizzando Compact Disk File System (CDFS) vengono regolati per il fuso orario locale.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-147">The date and time stamps of files that are located on or originate from media using Compact Disc File System (CDFS) are adjusted for the local time zone.</span></span> <span data-ttu-id="2b1a6-148">ISO 9660 indica che CDFS è in grado di visualizzare correttamente le informazioni sulla data per il fuso orario locale.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-148">ISO 9660 states that CDFS is to display the date information correctly for the local time zone.</span></span> <span data-ttu-id="2b1a6-149">Questa operazione viene eseguita in modo che le date per i file in CDFS vengano visualizzate come quelle del formato UDF (Universal Disk Format).</span><span class="sxs-lookup"><span data-stu-id="2b1a6-149">This is done so that dates for files on CDFS are displayed the same as those on Universal Disk Format (UDF).</span></span> <span data-ttu-id="2b1a6-150">UDF è lo standard più recente per i supporti di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-150">UDF is the newer standard for distribution media.</span></span> <span data-ttu-id="2b1a6-151">Se il codice dipende dalle informazioni sulla data non modificate per un file che risiede o ha origine da supporti con CDFS, potrebbe non funzionare correttamente.</span><span class="sxs-lookup"><span data-stu-id="2b1a6-151">If your code depends on the unmodified date information for a file that resides on or originates from media using CDFS, it may not function correctly.</span></span>

 

 
