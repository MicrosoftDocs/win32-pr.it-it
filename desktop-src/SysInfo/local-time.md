---
description: Mentre il sistema usa l'ora basata su UTC internamente, le applicazioni visualizzeranno in genere l'ora locale, ovvero la data e l'ora del fuso orario.
ms.assetid: a6570ec5-ac77-427a-86d9-32cbecc62e37
title: Ora locale
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c60eb9ca53245a12eba1bc0096b522eae97de75a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103879638"
---
# <a name="local-time"></a><span data-ttu-id="a4f5e-103">Ora locale</span><span class="sxs-lookup"><span data-stu-id="a4f5e-103">Local Time</span></span>

<span data-ttu-id="a4f5e-104">Mentre il sistema usa l'ora basata su UTC internamente, le applicazioni visualizzeranno in genere l' **ora locale**, ovvero la data e l'ora del fuso orario.</span><span class="sxs-lookup"><span data-stu-id="a4f5e-104">While the system uses UTC-based time internally, your applications will generally display the **local time**, which is the date and time of day for your time zone.</span></span> <span data-ttu-id="a4f5e-105">Pertanto, per garantire la correttezza dei risultati, è necessario tenere presente se una funzione prevede di ricevere un'ora basata su UTC o un'ora locale e se la funzione restituisce un'ora basata su UTC o un'ora locale.</span><span class="sxs-lookup"><span data-stu-id="a4f5e-105">Therefore, to ensure correct results, you must be aware of whether a function expects to receive a UTC-based time or a local time, and whether the function returns a UTC-based time or a local time.</span></span>

<span data-ttu-id="a4f5e-106">Le impostazioni correnti del fuso orario controllano il modo in cui il sistema esegue la conversione tra l'ora UTC e l'ora locale.</span><span class="sxs-lookup"><span data-stu-id="a4f5e-106">The current time-zone settings control how the system converts between UTC and local time.</span></span> <span data-ttu-id="a4f5e-107">È possibile recuperare le impostazioni correnti del fuso orario utilizzando la funzione [**GetTimeZoneInformation**](/windows/win32/api/timezoneapi/nf-timezoneapi-gettimezoneinformation) .</span><span class="sxs-lookup"><span data-stu-id="a4f5e-107">You can retrieve the current time-zone settings by using the [**GetTimeZoneInformation**](/windows/win32/api/timezoneapi/nf-timezoneapi-gettimezoneinformation) function.</span></span> <span data-ttu-id="a4f5e-108">La funzione copia il risultato in una struttura di [**\_ \_ informazioni sul fuso orario**](/windows/win32/api/timezoneapi/ns-timezoneapi-time_zone_information) e restituisce un valore che indica se l'ora locale è attualmente in ora solare o ora legale (DST).</span><span class="sxs-lookup"><span data-stu-id="a4f5e-108">The function copies the result to a [**TIME\_ZONE\_INFORMATION**](/windows/win32/api/timezoneapi/ns-timezoneapi-time_zone_information) structure and returns a value indicating whether local time is currently in standard time or daylight saving time (DST).</span></span> <span data-ttu-id="a4f5e-109">È possibile impostare le impostazioni di fuso orario tramite la funzione [**SetTimeZoneInformation**](/windows/win32/api/timezoneapi/nf-timezoneapi-settimezoneinformation) .</span><span class="sxs-lookup"><span data-stu-id="a4f5e-109">You can set the time-zone settings by using the [**SetTimeZoneInformation**](/windows/win32/api/timezoneapi/nf-timezoneapi-settimezoneinformation) function.</span></span> <span data-ttu-id="a4f5e-110">Per supportare i limiti per l'ora legale che cambiano da anno a anno, usare le funzioni [**GetTimeZoneInformationForYear**](/windows/win32/api/timezoneapi/nf-timezoneapi-gettimezoneinformationforyear), [**GetDynamicTimeZoneInformation**](/windows/win32/api/timezoneapi/nf-timezoneapi-getdynamictimezoneinformation) e [**SetDynamicTimeZoneInformation**](/windows/win32/api/timezoneapi/nf-timezoneapi-setdynamictimezoneinformation) .</span><span class="sxs-lookup"><span data-stu-id="a4f5e-110">To support boundaries for daylight saving time that change from year to year, use the [**GetTimeZoneInformationForYear**](/windows/win32/api/timezoneapi/nf-timezoneapi-gettimezoneinformationforyear), [**GetDynamicTimeZoneInformation**](/windows/win32/api/timezoneapi/nf-timezoneapi-getdynamictimezoneinformation) and [**SetDynamicTimeZoneInformation**](/windows/win32/api/timezoneapi/nf-timezoneapi-setdynamictimezoneinformation) functions.</span></span>

<span data-ttu-id="a4f5e-111">Per recuperare l'ora locale, utilizzare la funzione [**GetLocalTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getlocaltime) .</span><span class="sxs-lookup"><span data-stu-id="a4f5e-111">To retrieve the local time, use the [**GetLocalTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getlocaltime) function.</span></span> <span data-ttu-id="a4f5e-112">**GetLocalTime** converte l'ora di sistema in un'ora locale in base alle impostazioni correnti del fuso orario e copia il risultato in una struttura [**SYSTEMTIME**](/windows/win32/api/minwinbase/ns-minwinbase-systemtime) .</span><span class="sxs-lookup"><span data-stu-id="a4f5e-112">**GetLocalTime** converts the system time to a local time based on the current time-zone settings and copies the result to a [**SYSTEMTIME**](/windows/win32/api/minwinbase/ns-minwinbase-systemtime) structure.</span></span> <span data-ttu-id="a4f5e-113">È possibile impostare l'ora di sistema utilizzando la funzione [**SetLocalTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-setlocaltime) .</span><span class="sxs-lookup"><span data-stu-id="a4f5e-113">You can set the system time by using the [**SetLocalTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-setlocaltime) function.</span></span> <span data-ttu-id="a4f5e-114">**SetLocalTime** presuppone che sia stata specificata un'ora locale e che sia stata convertita in UTC prima di impostare l'ora di sistema.</span><span class="sxs-lookup"><span data-stu-id="a4f5e-114">**SetLocalTime** assumes you have specified a local time and converts to UTC before setting the system time.</span></span>

<span data-ttu-id="a4f5e-115">Quando si chiama [**SetLocalTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-setlocaltime), il sistema usa le informazioni sul fuso orario correnti, inclusa l'impostazione dell'ora legale, per eseguire la conversione.</span><span class="sxs-lookup"><span data-stu-id="a4f5e-115">When you call [**SetLocalTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-setlocaltime), the system uses the current time zone information, including the daylight saving time setting, to perform the conversion.</span></span> <span data-ttu-id="a4f5e-116">Si noti che il sistema usa l'impostazione dell'ora legale dell'ora corrente, non la nuova ora di impostazione.</span><span class="sxs-lookup"><span data-stu-id="a4f5e-116">Note that the system uses the daylight saving time setting of the current time, not the new time you are setting.</span></span> <span data-ttu-id="a4f5e-117">Pertanto, per garantire il risultato corretto, chiamare **SetLocalTime** una seconda volta, ora che la prima chiamata ha aggiornato l'impostazione dell'ora legale.</span><span class="sxs-lookup"><span data-stu-id="a4f5e-117">Therefore, to ensure the correct result, call **SetLocalTime** a second time, now that the first call has updated the daylight saving time setting.</span></span>

<span data-ttu-id="a4f5e-118">Per convertire un'ora basata su UTC in un'ora locale, utilizzare la funzione [**SystemTimeToTzSpecificLocalTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetotzspecificlocaltime) .</span><span class="sxs-lookup"><span data-stu-id="a4f5e-118">To convert a UTC-based time to a local time, use the [**SystemTimeToTzSpecificLocalTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetotzspecificlocaltime) function.</span></span> <span data-ttu-id="a4f5e-119">Per convertire un'ora locale in un'ora basata su UTC, utilizzare la funzione [**TzSpecificLocalTimeToSystemTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-tzspecificlocaltimetosystemtime) .</span><span class="sxs-lookup"><span data-stu-id="a4f5e-119">To convert a local time to a UTC-based time, use the [**TzSpecificLocalTimeToSystemTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-tzspecificlocaltimetosystemtime) function.</span></span>

 

 
