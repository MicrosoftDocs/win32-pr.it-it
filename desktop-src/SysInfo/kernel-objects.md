---
description: Gli handle di oggetti kernel sono specifici del processo.
ms.assetid: 3e3288dd-155a-41d0-9d43-5f49ed4c4a9d
title: Oggetti kernel
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6a7cf8c46e4754c46e81cfd959f62de052332594
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "104569928"
---
# <a name="kernel-objects"></a>Oggetti kernel

Gli handle di oggetti kernel sono specifici del processo. Ovvero, un processo deve creare l'oggetto o aprire un oggetto esistente per ottenere un handle di oggetto kernel. Il limite per processo sugli handle del kernel è 2 ^ 24. Tuttavia, gli handle vengono archiviati nel pool di paging, quindi il numero effettivo di handle che è possibile creare è basato sulla memoria disponibile. Il numero di handle che è possibile creare in Windows a 32 bit è significativamente inferiore a 2 ^ 24.

Qualsiasi processo può creare un nuovo handle per un oggetto kernel esistente (anche uno creato da un altro processo), purché il processo conosca il nome dell'oggetto e disponga dell'accesso di sicurezza all'oggetto. Gli handle di oggetto kernel includono i diritti di accesso che indicano le azioni che possono essere concesse o negate a un processo. Un'applicazione specifica i diritti di accesso quando crea un oggetto o ottiene un handle di oggetto esistente. Ogni tipo di oggetto kernel supporta il proprio set di diritti di accesso. Ad esempio, gli handle di evento possono avere accesso impostato o Wait (o entrambi), gli handle di file possono avere accesso in lettura o scrittura (o entrambi) e così via. Per ulteriori informazioni, vedere [oggetti a protezione diretta](/windows/desktop/SecAuthZ/securable-objects).

Nell'illustrazione seguente, un'applicazione crea un oggetto evento. La funzione [**CreateEvent**](/windows/desktop/api/synchapi/nf-synchapi-createeventa) crea l'oggetto evento e restituisce un handle dell'oggetto.

![applicazione creazione di un oggetto evento](images/cshob-03.png)

Dopo la creazione dell'oggetto evento, l'applicazione può usare l'handle dell'evento per impostare o attendere l'evento. L'handle rimane valido fino a quando l'applicazione non chiude l'handle o termina.

La maggior parte degli oggetti kernel supporta più handle per un singolo oggetto. Ad esempio, l'applicazione nell'illustrazione precedente potrebbe ottenere handle di oggetti evento aggiuntivi tramite la funzione [**OpenEvent**](/windows/desktop/api/synchapi/nf-synchapi-openeventa) , come illustrato nella figura seguente.

![applicazione creazione di un oggetto evento con più handle](images/cshob-04.png)

Questo metodo consente a un'applicazione di avere handle con diritti di accesso diversi. Ad esempio, handle 1 potrebbe avere l'accesso impostato e Wait all'evento e l'handle 2 potrebbe avere solo l'accesso in attesa.

Se un altro processo conosce il nome dell'evento e dispone dell'accesso di sicurezza all'oggetto, può creare il proprio handle di oggetto evento usando [**OpenEvent**](/windows/desktop/api/synchapi/nf-synchapi-openeventa). L'applicazione di creazione potrebbe anche duplicare uno degli handle nello stesso processo o in un altro processo tramite la funzione [**DuplicateHandle**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle) .

Un oggetto rimane in memoria fino a quando almeno un handle di oggetto esiste. Nella figura seguente, le applicazioni usano la funzione [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle) per chiudere gli handle degli oggetti evento. Quando non sono presenti handle di evento, il sistema rimuove l'oggetto dalla memoria, come illustrato nella figura seguente.

![gestione degli oggetti evento di chiusura dell'applicazione per rimuovere l'oggetto dalla memoria](images/cshob-08.png)

Il sistema gestisce gli oggetti file in modo diverso rispetto ad altri oggetti del kernel. Gli oggetti file contengono il puntatore del file, ovvero il puntatore al byte successivo da leggere o scrivere in un file. Ogni volta che un'applicazione crea un nuovo handle di file, il sistema crea un nuovo oggetto file. Per questo motivo, più di un oggetto file può fare riferimento a un singolo file su disco, come illustrato nella figura seguente.

![più oggetti file che fanno riferimento a un file su disco](images/cshob-09.png)

Solo tramite la duplicazione o l'ereditarietà possono essere presenti più handle di file che fanno riferimento allo stesso oggetto file, come illustrato nella figura seguente.

![due handle di file fanno riferimento allo stesso oggetto file](images/cshob-10.png)

Nella tabella seguente sono elencati tutti gli oggetti kernel, insieme alle funzioni di autore e distruttore di ogni oggetto. Le funzioni Creator creano l'oggetto e un handle di oggetto o creano un nuovo handle di oggetto esistente. Le funzioni di distruttore chiudono l'handle dell'oggetto. Quando un'applicazione chiude l'ultimo handle a un oggetto kernel, il sistema rimuove l'oggetto dalla memoria.



| Oggetto kernel                | Funzione Creator                                                                                                                                                                                                                                                  | Funzione Destroyer                                                                      |
|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------|
| Token di accesso                 | [**CreateRestrictedToken**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-createrestrictedtoken), [**DuplicateToken**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-duplicatetoken), [**DuplicateTokenEx**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-duplicatetokenex), [**OpenProcessToken**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-openprocesstoken), [**OpenThreadToken**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-openthreadtoken) | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle)                                                      |
| Notifica di modifica          | [**FindFirstChangeNotification**](/windows/desktop/api/fileapi/nf-fileapi-findfirstchangenotificationa)                                                                                                                                                                                                 | [**FindCloseChangeNotification**](/windows/desktop/api/fileapi/nf-fileapi-findclosechangenotification)                       |
| Dispositivo di comunicazione        | [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea)                                                                                                                                                                                                                                   | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle)                                                      |
| Input console                | [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea), con CONIN $                                                                                                                                                                                                                      | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle)                                                      |
| Buffer dello schermo della console        | [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea)con CONOUT $                                                                                                                                                                                                                     | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle)                                                      |
| Desktop                      | [**GetThreadDesktop**](/windows/desktop/api/winuser/nf-winuser-getthreaddesktop)                                                                                                                                                                                                                     | Le applicazioni non possono eliminare questo oggetto.                                                 |
| Evento                        | [**CreateEvent**](/windows/desktop/api/synchapi/nf-synchapi-createeventa), [**CreateEventEx**](/windows/desktop/api/synchapi/nf-synchapi-createeventexa), [**OpenEvent**](/windows/desktop/api/synchapi/nf-synchapi-openeventa)                                                                                                                                                     | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle)                                                      |
| Registro eventi                    | [**OpenEventLog**](/windows/desktop/api/winbase/nf-winbase-openeventloga), [**RegisterEventSource**](/windows/desktop/api/winbase/nf-winbase-registereventsourcea), [**OpenBackupEventLog**](/windows/desktop/api/winbase/nf-winbase-openbackupeventloga)                                                                                                                     | [**CloseEventLog**](/windows/desktop/api/winbase/nf-winbase-closeeventlog)                                                 |
| File                         | [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea)                                                                                                                                                                                                                                 | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle), [ **DeleteFile**](/windows/desktop/api/fileapi/nf-fileapi-deletefilea)                     |
| Mapping dei file                 | [**CreateFileMapping**](/windows/desktop/api/winbase/nf-winbase-createfilemappinga), [ **OpenFileMapping**](/windows/desktop/api/winbase/nf-winbase-openfilemappinga)                                                                                                                                                                          | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle)                                                      |
| Trova file                    | [**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea)                                                                                                                                                                                                                             | [**FindClose**](/windows/desktop/api/fileapi/nf-fileapi-findclose)                                                           |
| Heap                         | [**HeapCreate**](/windows/desktop/api/heapapi/nf-heapapi-heapcreate)                                                                                                                                                                                                                                 | [**HeapDestroy**](/windows/desktop/api/heapapi/nf-heapapi-heapdestroy)                                                     |
| Porta di completamento I/O          | [**CreateIoCompletionPort**](/windows/desktop/FileIO/createiocompletionport)                                                                                                                                                                                                           | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle)                                                      |
| Processo                          | [**CreateJobObject**](/windows/desktop/api/winbase/nf-winbase-createjobobjecta)                                                                                                                                                                                                                       | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle)                                                      |
| Inserimento/espulsione                     | [**CreateMailslot**](/windows/desktop/api/winbase/nf-winbase-createmailslota)                                                                                                                                                                                                                         | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle)                                                      |
| Notifica risorse di memoria | [**CreateMemoryResourceNotification**](/windows/desktop/api/memoryapi/nf-memoryapi-creatememoryresourcenotification)                                                                                                                                                                                     | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle)                                                      |
| Modulo                       | [**LoadLibrary**](/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibrarya), [ **GetModuleHandle**](/windows/desktop/api/libloaderapi/nf-libloaderapi-getmodulehandlea)                                                                                                                                                                                  | [**FreeLibrary**](/windows/desktop/api/libloaderapi/nf-libloaderapi-freelibrary)                                                     |
| Mutex                        | [**CreateMutex**](/windows/desktop/api/synchapi/nf-synchapi-createmutexa), [**CreateMutexEx**](/windows/desktop/api/synchapi/nf-synchapi-createmutexexa), [**errore in OpenMutex**](/windows/win32/api/synchapi/nf-synchapi-openmutexw)                                                                                                                                                     | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle)                                                      |
| Pipe                         | [**CreateNamedPipe**](/windows/desktop/api/winbase/nf-winbase-createnamedpipea), [ **non**](/windows/desktop/api/namedpipeapi/nf-namedpipeapi-createpipe)                                                                                                                                                                                    | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle), [ **DisconnectNamedPipe**](/windows/desktop/api/namedpipeapi/nf-namedpipeapi-disconnectnamedpipe) |
| Processo                      | [**CreateProcess**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createprocessa), [**OpenProcess**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-openprocess), [**GetCurrentProcess**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-getcurrentprocess)                                                                                                                                     | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle), [ **TerminateProcess**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-terminateprocess)       |
| Semaphore                    | [**CreateSemaphore**](/windows/desktop/api/winbase/nf-winbase-createsemaphorea), [**CreateSemaphoreEx**](/windows/desktop/api/winbase/nf-winbase-createsemaphoreexa), [**OpenSemaphore**](/windows/win32/api/synchapi/nf-synchapi-opensemaphorew)                                                                                                                             | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle)                                                      |
| Presa elettrica                       | [**socket**](/windows/desktop/api/winsock2/nf-winsock2-socket), [ **accetta**](/windows/desktop/api/winsock2/nf-winsock2-accept)                                                                                                                                                                                                    | [**chiamata closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket)                                                |
| Thread                       | [**CreateThread**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createthread), [**CreateRemoteThread**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createremotethread), [**GetCurrentThread**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-getcurrentthread)                                                                                                                           | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle), [ **TerminateThread**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-terminatethread)         |
| Timer                        | [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw), [**CreateWaitableTimerEx**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerexw), [**OpenWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-openwaitabletimerw)                                                                                                     | [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle)                                                      |
| Aggiornare una risorsa              | [**BeginUpdateResource**](/windows/win32/api/winbase/nf-winbase-beginupdateresourcea)                                                                                                                                                                                                         | [**EndUpdateResource**](/windows/win32/api/winbase/nf-winbase-endupdateresourcea)                                   |
| Stazione finestra               | [**GetProcessWindowStation**](/windows/desktop/api/winuser/nf-winuser-getprocesswindowstation)                                                                                                                                                                                                       | Le applicazioni non possono eliminare questo oggetto.                                                 |



 

## <a name="related-topics"></a>Argomenti correlati

<dl> <dt>

[Spazi dei nomi dell'oggetto kernel](/windows/desktop/TermServ/kernel-object-namespaces)
</dt> </dl>

 

 
