---
title: Informazioni sull'input da tastiera
description: In questo argomento viene illustrato l'input da tastiera.
ms.assetid: de34727e-e8c7-481d-982d-0e42a02704db
keywords:
- input utente, input da tastiera
- acquisizione dell'input dell'utente, input da tastiera
- input da tastiera
- stato attivo della tastiera
- messaggi di sequenza di tasti
- messaggi di tipo carattere
- sequenze di tasti di sistema
- sequenze di tasti non di sistema
- messaggi di caratteri non di sistema
- chiavi in dead
- messaggi di caratteri non inviati
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0de85794901be3fef37156bde29520039f85702b
ms.sourcegitcommit: b3839bea8d55c981d53cb8802d666bf49093b428
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/16/2021
ms.locfileid: "114373197"
---
# <a name="about-keyboard-input"></a><span data-ttu-id="39678-114">Informazioni sull'input da tastiera</span><span class="sxs-lookup"><span data-stu-id="39678-114">About Keyboard Input</span></span>

<span data-ttu-id="39678-115">Le applicazioni devono accettare l'input dell'utente dalla tastiera e dal mouse.</span><span class="sxs-lookup"><span data-stu-id="39678-115">Applications should accept user input from the keyboard as well as from the mouse.</span></span> <span data-ttu-id="39678-116">Un'applicazione riceve l'input da tastiera sotto forma di messaggi inviati alle relative finestre.</span><span class="sxs-lookup"><span data-stu-id="39678-116">An application receives keyboard input in the form of messages posted to its windows.</span></span>

<span data-ttu-id="39678-117">Questa sezione contiene gli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="39678-117">This section covers the following topics:</span></span>

-   [<span data-ttu-id="39678-118">Modello di input da tastiera</span><span class="sxs-lookup"><span data-stu-id="39678-118">Keyboard Input Model</span></span>](#keyboard-input-model)
-   [<span data-ttu-id="39678-119">Stato attivo e attivazione della tastiera</span><span class="sxs-lookup"><span data-stu-id="39678-119">Keyboard Focus and Activation</span></span>](#keyboard-focus-and-activation)
-   [<span data-ttu-id="39678-120">Messaggi di pressione dei tasti</span><span class="sxs-lookup"><span data-stu-id="39678-120">Keystroke Messages</span></span>](#keystroke-messages)
    -   [<span data-ttu-id="39678-121">Sequenze di tasti di sistema e non di sistema</span><span class="sxs-lookup"><span data-stu-id="39678-121">System and Nonsystem Keystrokes</span></span>](#system-and-nonsystem-keystrokes)
    -   [<span data-ttu-id="39678-122">Descrizione dei codici chiave virtuale</span><span class="sxs-lookup"><span data-stu-id="39678-122">Virtual-Key Codes Described</span></span>](#virtual-key-codes-described)
    -   [<span data-ttu-id="39678-123">Flag di messaggi con sequenza di tasti</span><span class="sxs-lookup"><span data-stu-id="39678-123">Keystroke Message Flags</span></span>](#keystroke-message-flags)
-   [<span data-ttu-id="39678-124">Messaggi di tipo carattere</span><span class="sxs-lookup"><span data-stu-id="39678-124">Character Messages</span></span>](#character-messages)
    -   [<span data-ttu-id="39678-125">Messaggi di tipo carattere non di sistema</span><span class="sxs-lookup"><span data-stu-id="39678-125">Nonsystem Character Messages</span></span>](#nonsystem-character-messages)
    -   [<span data-ttu-id="39678-126">Messaggi di caratteri non inviati</span><span class="sxs-lookup"><span data-stu-id="39678-126">Dead-Character Messages</span></span>](#dead-character-messages)
-   [<span data-ttu-id="39678-127">Stato chiave</span><span class="sxs-lookup"><span data-stu-id="39678-127">Key Status</span></span>](#key-status)
-   [<span data-ttu-id="39678-128">Sequenze di tasti e traduzioni di caratteri</span><span class="sxs-lookup"><span data-stu-id="39678-128">Keystroke and Character Translations</span></span>](#keystroke-and-character-translations)
-   [<span data-ttu-id="39678-129">Supporto dei tasti di scelta rapida</span><span class="sxs-lookup"><span data-stu-id="39678-129">Hot-Key Support</span></span>](#hot-key-support)
-   [<span data-ttu-id="39678-130">Tasti da tastiera per l'esplorazione e altre funzioni</span><span class="sxs-lookup"><span data-stu-id="39678-130">Keyboard Keys for Browsing and Other Functions</span></span>](#keyboard-keys-for-browsing-and-other-functions)
-   [<span data-ttu-id="39678-131">Simulazione dell'input</span><span class="sxs-lookup"><span data-stu-id="39678-131">Simulating Input</span></span>](#simulating-input)
-   [<span data-ttu-id="39678-132">Lingue, impostazioni locali e layout di tastiera</span><span class="sxs-lookup"><span data-stu-id="39678-132">Languages, Locales, and Keyboard Layouts</span></span>](#languages-locales-and-keyboard-layouts)

## <a name="keyboard-input-model"></a><span data-ttu-id="39678-133">Modello di input da tastiera</span><span class="sxs-lookup"><span data-stu-id="39678-133">Keyboard Input Model</span></span>

<span data-ttu-id="39678-134">Il sistema fornisce il supporto della tastiera indipendente dal dispositivo per le applicazioni installando un driver di dispositivo da tastiera appropriato per la tastiera corrente.</span><span class="sxs-lookup"><span data-stu-id="39678-134">The system provides device-independent keyboard support for applications by installing a keyboard device driver appropriate for the current keyboard.</span></span> <span data-ttu-id="39678-135">Il sistema fornisce il supporto della tastiera indipendente dalla lingua usando il layout di tastiera specifico della lingua attualmente selezionato dall'utente o dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="39678-135">The system provides language-independent keyboard support by using the language-specific keyboard layout currently selected by the user or the application.</span></span> <span data-ttu-id="39678-136">Il driver di dispositivo della tastiera riceve i codici di scansione dalla tastiera, che vengono inviati al layout di tastiera in cui vengono convertiti in messaggi e inseriti nelle finestre appropriate dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="39678-136">The keyboard device driver receives scan codes from the keyboard, which are sent to the keyboard layout where they are translated into messages and posted to the appropriate windows in your application.</span></span>

<span data-ttu-id="39678-137">A ogni tasto di una tastiera viene assegnato un valore univoco denominato codice di digitalizzazione, un identificatore dipendente dal dispositivo per il tasto della tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-137">Assigned to each key on a keyboard is a unique value called a *scan code*, a device-dependent identifier for the key on the keyboard.</span></span> <span data-ttu-id="39678-138">Una tastiera genera due codici di digitalizzazione quando l'utente preme un tasto, uno quando preme il tasto e un altro quando l'utente rilascia il tasto.</span><span class="sxs-lookup"><span data-stu-id="39678-138">A keyboard generates two scan codes when the user types a key—one when the user presses the key and another when the user releases the key.</span></span>

<span data-ttu-id="39678-139">Il driver di dispositivo da tastiera interpreta un codice di scansione e lo converte (ne esegue il mapping) in un codice di tasto virtuale *,* un valore indipendente dal dispositivo definito dal sistema che identifica lo scopo di un tasto.</span><span class="sxs-lookup"><span data-stu-id="39678-139">The keyboard device driver interprets a scan code and translates (maps) it to a *virtual-key code*, a device-independent value defined by the system that identifies the purpose of a key.</span></span> <span data-ttu-id="39678-140">Dopo aver traslato un codice di analisi, il layout di tastiera crea un messaggio che include il codice di analisi, il codice del tasto virtuale e altre informazioni sulla sequenza di tasti, quindi inserisce il messaggio nella coda di messaggi di sistema.</span><span class="sxs-lookup"><span data-stu-id="39678-140">After translating a scan code, the keyboard layout creates a message that includes the scan code, the virtual-key code, and other information about the keystroke, and then places the message in the system message queue.</span></span> <span data-ttu-id="39678-141">Il sistema rimuove il messaggio dalla coda di messaggi di sistema e lo invia alla coda di messaggi del thread appropriato.</span><span class="sxs-lookup"><span data-stu-id="39678-141">The system removes the message from the system message queue and posts it to the message queue of the appropriate thread.</span></span> <span data-ttu-id="39678-142">Infine, il ciclo di messaggi del thread rimuove il messaggio e lo passa alla routine della finestra appropriata per l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="39678-142">Eventually, the thread's message loop removes the message and passes it to the appropriate window procedure for processing.</span></span> <span data-ttu-id="39678-143">La figura seguente illustra il modello di input da tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-143">The following figure illustrates the keyboard input model.</span></span>

![modello di elaborazione dell'input da tastiera](images/csinp-01.png)

## <a name="keyboard-focus-and-activation"></a><span data-ttu-id="39678-145">Stato attivo e attivazione della tastiera</span><span class="sxs-lookup"><span data-stu-id="39678-145">Keyboard Focus and Activation</span></span>

<span data-ttu-id="39678-146">Il sistema invia i messaggi della tastiera alla coda di messaggi del thread in primo piano che ha creato la finestra con lo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="39678-146">The system posts keyboard messages to the message queue of the foreground thread that created the window with the keyboard focus.</span></span> <span data-ttu-id="39678-147">Lo *stato attivo della* tastiera è una proprietà temporanea di una finestra.</span><span class="sxs-lookup"><span data-stu-id="39678-147">The *keyboard focus* is a temporary property of a window.</span></span> <span data-ttu-id="39678-148">Il sistema condivide la tastiera tra tutte le finestre sullo schermo spostando lo stato attivo della tastiera, in direzione dell'utente, da una finestra a un'altra.</span><span class="sxs-lookup"><span data-stu-id="39678-148">The system shares the keyboard among all windows on the display by shifting the keyboard focus, at the user's direction, from one window to another.</span></span> <span data-ttu-id="39678-149">La finestra con lo stato attivo riceve (dalla coda di messaggi del thread che lo ha creato) tutti i messaggi della tastiera fino a quando lo stato attivo non viene modificato in un'altra finestra.</span><span class="sxs-lookup"><span data-stu-id="39678-149">The window that has the keyboard focus receives (from the message queue of the thread that created it) all keyboard messages until the focus changes to a different window.</span></span>

<span data-ttu-id="39678-150">Un thread può chiamare la [**funzione GetFocus**](/windows/win32/api/winuser/nf-winuser-getfocus) per determinare quale delle finestre (se presenti) ha attualmente lo stato attivo della tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-150">A thread can call the [**GetFocus**](/windows/win32/api/winuser/nf-winuser-getfocus) function to determine which of its windows (if any) currently has the keyboard focus.</span></span> <span data-ttu-id="39678-151">Un thread può assegnare lo stato attivo della tastiera a una delle relative finestre chiamando la [**funzione SetFocus.**](/windows/win32/api/winuser/nf-winuser-setfocus)</span><span class="sxs-lookup"><span data-stu-id="39678-151">A thread can give the keyboard focus to one of its windows by calling the [**SetFocus**](/windows/win32/api/winuser/nf-winuser-setfocus) function.</span></span> <span data-ttu-id="39678-152">Quando lo stato attivo della tastiera cambia da una finestra a un'altra, il sistema invia un messaggio [**\_ KILLFOCUS WM**](wm-killfocus.md) alla finestra che ha perso lo stato attivo e quindi invia un messaggio [**WM \_ SETFOCUS**](wm-setfocus.md) alla finestra che ha raggiunto lo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="39678-152">When the keyboard focus changes from one window to another, the system sends a [**WM\_KILLFOCUS**](wm-killfocus.md) message to the window that has lost the focus, and then sends a [**WM\_SETFOCUS**](wm-setfocus.md) message to the window that has gained the focus.</span></span>

<span data-ttu-id="39678-153">Il concetto di stato attivo della tastiera è correlato a quello della finestra attiva.</span><span class="sxs-lookup"><span data-stu-id="39678-153">The concept of keyboard focus is related to that of the active window.</span></span> <span data-ttu-id="39678-154">La *finestra attiva* è la finestra di primo livello con cui l'utente sta attualmente lavorando.</span><span class="sxs-lookup"><span data-stu-id="39678-154">The *active window* is the top-level window the user is currently working with.</span></span> <span data-ttu-id="39678-155">La finestra con lo stato attivo della tastiera è la finestra attiva o una finestra figlio della finestra attiva.</span><span class="sxs-lookup"><span data-stu-id="39678-155">The window with the keyboard focus is either the active window, or a child window of the active window.</span></span> <span data-ttu-id="39678-156">Per consentire all'utente di identificare la finestra attiva, il sistema la posiziona nella parte superiore dell'ordine Z ed evidenzia la barra del titolo (se ne ha una) e il bordo.</span><span class="sxs-lookup"><span data-stu-id="39678-156">To help the user identify the active window, the system places it at the top of the Z order and highlights its title bar (if it has one) and border.</span></span>

<span data-ttu-id="39678-157">L'utente può attivare una finestra di primo livello facendo clic su di essa, selezionandola usando la combinazione di tasti ALT+TAB o ALT+ESC o selezionandola dal Elenco attività.</span><span class="sxs-lookup"><span data-stu-id="39678-157">The user can activate a top-level window by clicking it, selecting it using the ALT+TAB or ALT+ESC key combination, or selecting it from the Task List.</span></span> <span data-ttu-id="39678-158">Un thread può attivare una finestra di primo livello usando la [**funzione SetActiveWindow.**](/windows/win32/api/winuser/nf-winuser-setactivewindow)</span><span class="sxs-lookup"><span data-stu-id="39678-158">A thread can activate a top-level window by using the [**SetActiveWindow**](/windows/win32/api/winuser/nf-winuser-setactivewindow) function.</span></span> <span data-ttu-id="39678-159">Può determinare se una finestra di primo livello creata è attiva usando la [**funzione GetActiveWindow.**](/windows/win32/api/winuser/nf-winuser-getactivewindow)</span><span class="sxs-lookup"><span data-stu-id="39678-159">It can determine whether a top-level window it created is active by using the [**GetActiveWindow**](/windows/win32/api/winuser/nf-winuser-getactivewindow) function.</span></span>

<span data-ttu-id="39678-160">Quando una finestra viene disattivata e un'altra attivata, il sistema invia il [**messaggio WM \_ ACTIVATE.**](wm-activate.md)</span><span class="sxs-lookup"><span data-stu-id="39678-160">When one window is deactivated and another activated, the system sends the [**WM\_ACTIVATE**](wm-activate.md) message.</span></span> <span data-ttu-id="39678-161">La parola più bassa del *parametro wParam* è zero se la finestra viene disattivata e diversa da zero se viene attivata.</span><span class="sxs-lookup"><span data-stu-id="39678-161">The low-order word of the *wParam* parameter is zero if the window is being deactivated and nonzero if it is being activated.</span></span> <span data-ttu-id="39678-162">Quando la routine della finestra predefinita riceve il **messaggio WM \_ ACTIVATE,** imposta lo stato attivo della tastiera sulla finestra attiva.</span><span class="sxs-lookup"><span data-stu-id="39678-162">When the default window procedure receives the **WM\_ACTIVATE** message, it sets the keyboard focus to the active window.</span></span>

<span data-ttu-id="39678-163">Per impedire agli eventi di input della tastiera e del mouse di raggiungere le applicazioni, [**usare BlockInput**](/windows/win32/api/winuser/nf-winuser-blockinput).</span><span class="sxs-lookup"><span data-stu-id="39678-163">To block keyboard and mouse input events from reaching applications, use [**BlockInput**](/windows/win32/api/winuser/nf-winuser-blockinput).</span></span> <span data-ttu-id="39678-164">Si noti che la **funzione BlockInput** non interferisce con la tabella asincrona dello stato di input della tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-164">Note, the **BlockInput** function will not interfere with the asynchronous keyboard input-state table.</span></span> <span data-ttu-id="39678-165">Ciò significa che la chiamata alla [**funzione SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) mentre l'input è bloccato modificherà la tabella asincrona dello stato di input della tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-165">This means that calling the [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function while input is blocked will change the asynchronous keyboard input-state table.</span></span>

## <a name="keystroke-messages"></a><span data-ttu-id="39678-166">Messaggi di pressione dei tasti</span><span class="sxs-lookup"><span data-stu-id="39678-166">Keystroke Messages</span></span>

<span data-ttu-id="39678-167">Premendo un tasto, un messaggio [**WM \_ KEYDOWN**](wm-keydown.md) o [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) viene inserito nella coda di messaggi del thread collegata alla finestra con lo stato attivo della tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-167">Pressing a key causes a [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message to be placed in the thread message queue attached to the window that has the keyboard focus.</span></span> <span data-ttu-id="39678-168">Il rilascio di una chiave fa [**sì che un messaggio WM \_ KEYUP**](wm-keyup.md) o [**WM \_ SYSKEYUP**](wm-syskeyup.md) sia inserito nella coda.</span><span class="sxs-lookup"><span data-stu-id="39678-168">Releasing a key causes a [**WM\_KEYUP**](wm-keyup.md) or [**WM\_SYSKEYUP**](wm-syskeyup.md) message to be placed in the queue.</span></span>

<span data-ttu-id="39678-169">I messaggi di tasti up e key-down in genere si verificano a coppie, ma se l'utente tiene premuto un tasto per un tempo sufficiente per avviare la funzionalità di ripetizione automatica della tastiera, il sistema genera una serie di messaggi [**WM \_ KEYDOWN**](wm-keydown.md) o [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) in una riga.</span><span class="sxs-lookup"><span data-stu-id="39678-169">Key-up and key-down messages typically occur in pairs, but if the user holds down a key long enough to start the keyboard's automatic repeat feature, the system generates a number of [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) messages in a row.</span></span> <span data-ttu-id="39678-170">Genera quindi un singolo messaggio [**WM \_ KEYUP**](wm-keyup.md) o [**WM \_ SYSKEYUP**](wm-syskeyup.md) quando l'utente rilascia la chiave.</span><span class="sxs-lookup"><span data-stu-id="39678-170">It then generates a single [**WM\_KEYUP**](wm-keyup.md) or [**WM\_SYSKEYUP**](wm-syskeyup.md) message when the user releases the key.</span></span>

<span data-ttu-id="39678-171">Questa sezione contiene gli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="39678-171">This section covers the following topics:</span></span>

-   [<span data-ttu-id="39678-172">Sequenze di tasti di sistema e non di sistema</span><span class="sxs-lookup"><span data-stu-id="39678-172">System and Nonsystem Keystrokes</span></span>](#system-and-nonsystem-keystrokes)
-   [<span data-ttu-id="39678-173">Descrizione dei codici chiave virtuale</span><span class="sxs-lookup"><span data-stu-id="39678-173">Virtual-Key Codes Described</span></span>](#virtual-key-codes-described)
-   [<span data-ttu-id="39678-174">Flag di messaggi con sequenza di tasti</span><span class="sxs-lookup"><span data-stu-id="39678-174">Keystroke Message Flags</span></span>](#keystroke-message-flags)

### <a name="system-and-nonsystem-keystrokes"></a><span data-ttu-id="39678-175">Sequenze di tasti di sistema e non di sistema</span><span class="sxs-lookup"><span data-stu-id="39678-175">System and Nonsystem Keystrokes</span></span>

<span data-ttu-id="39678-176">Il sistema distingue tra le sequenze di tasti di sistema e le sequenze di tasti non di sistema.</span><span class="sxs-lookup"><span data-stu-id="39678-176">The system makes a distinction between system keystrokes and nonsystem keystrokes.</span></span> <span data-ttu-id="39678-177">Le sequenze di tasti di sistema producono messaggi di pressione dei tasti di sistema, [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) e [**WM \_ SYSKEYUP.**](wm-syskeyup.md)</span><span class="sxs-lookup"><span data-stu-id="39678-177">System keystrokes produce system keystroke messages, [**WM\_SYSKEYDOWN**](wm-syskeydown.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md).</span></span> <span data-ttu-id="39678-178">Le sequenze di tasti non di sistema producono messaggi di sequenza di tasti non di sistema, [**WM \_ KEYDOWN**](wm-keydown.md) e [**WM \_ KEYUP.**](wm-keyup.md)</span><span class="sxs-lookup"><span data-stu-id="39678-178">Nonsystem keystrokes produce nonsystem keystroke messages, [**WM\_KEYDOWN**](wm-keydown.md) and [**WM\_KEYUP**](wm-keyup.md).</span></span>

<span data-ttu-id="39678-179">Se la routine della finestra deve elaborare un messaggio di pressione dei tasti di sistema, assicurarsi che dopo l'elaborazione del messaggio la procedura lo passi alla [**funzione DefWindowProc.**](/windows/desktop/api/winuser/nf-winuser-defwindowproca)</span><span class="sxs-lookup"><span data-stu-id="39678-179">If your window procedure must process a system keystroke message, make sure that after processing the message the procedure passes it to the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function.</span></span> <span data-ttu-id="39678-180">In caso contrario, tutte le operazioni di sistema che coinvolgono il tasto ALT verranno disabilitate ogni volta che la finestra ha lo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="39678-180">Otherwise, all system operations involving the ALT key will be disabled whenever the window has the keyboard focus.</span></span> <span data-ttu-id="39678-181">Ciò significa che l'utente non potrà accedere ai menu della finestra o al menu di sistema oppure usare la combinazione di tasti ALT+ESC o ALT+TAB per attivare un'altra finestra.</span><span class="sxs-lookup"><span data-stu-id="39678-181">That is, the user won't be able to access the window's menus or System menu, or use the ALT+ESC or ALT+TAB key combination to activate a different window.</span></span>

<span data-ttu-id="39678-182">I messaggi di pressione dei tasti di sistema vengono utilizzati principalmente dal sistema anziché da un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="39678-182">System keystroke messages are primarily for use by the system rather than by an application.</span></span> <span data-ttu-id="39678-183">Il sistema li usa per fornire l'interfaccia della tastiera predefinita ai menu e per consentire all'utente di controllare quale finestra è attiva.</span><span class="sxs-lookup"><span data-stu-id="39678-183">The system uses them to provide its built-in keyboard interface to menus and to allow the user to control which window is active.</span></span> <span data-ttu-id="39678-184">I messaggi di pressione dei tasti di sistema vengono generati quando l'utente digita un tasto in combinazione con ALT o quando l'utente digita e nessuna finestra ha lo stato attivo della tastiera (ad esempio, quando l'applicazione attiva è ridotta a icona).</span><span class="sxs-lookup"><span data-stu-id="39678-184">System keystroke messages are generated when the user types a key in combination with the ALT key, or when the user types and no window has the keyboard focus (for example, when the active application is minimized).</span></span> <span data-ttu-id="39678-185">In questo caso, i messaggi vengono inviati alla coda di messaggi associata alla finestra attiva.</span><span class="sxs-lookup"><span data-stu-id="39678-185">In this case, the messages are posted to the message queue attached to the active window.</span></span>

<span data-ttu-id="39678-186">I messaggi di pressione dei tasti non di sistema vengono utilizzati dalle finestre dell'applicazione; La [**funzione DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) non esegue alcuna operazione.</span><span class="sxs-lookup"><span data-stu-id="39678-186">Nonsystem keystroke messages are for use by application windows; the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function does nothing with them.</span></span> <span data-ttu-id="39678-187">Una routine di finestra può eliminare tutti i messaggi di sequenza di tasti non di sistema che non sono necessari.</span><span class="sxs-lookup"><span data-stu-id="39678-187">A window procedure can discard any nonsystem keystroke messages that it does not need.</span></span>

### <a name="virtual-key-codes-described"></a><span data-ttu-id="39678-188">Virtual-Key descrizione dei codici</span><span class="sxs-lookup"><span data-stu-id="39678-188">Virtual-Key Codes Described</span></span>

<span data-ttu-id="39678-189">Il **parametro wParam** di un messaggio di sequenza di tasti contiene il codice del tasto virtuale del tasto premuto o rilasciato.</span><span class="sxs-lookup"><span data-stu-id="39678-189">The **wParam** parameter of a keystroke message contains the virtual-key code of the key that was pressed or released.</span></span> <span data-ttu-id="39678-190">Una routine della finestra elabora o ignora un messaggio di sequenza di tasti, a seconda del valore del codice del tasto virtuale.</span><span class="sxs-lookup"><span data-stu-id="39678-190">A window procedure processes or ignores a keystroke message, depending on the value of the virtual-key code.</span></span>

<span data-ttu-id="39678-191">Una routine di finestra tipica elabora solo un piccolo subset dei messaggi di pressione dei tasti ricevuti e ignora il resto.</span><span class="sxs-lookup"><span data-stu-id="39678-191">A typical window procedure processes only a small subset of the keystroke messages that it receives and ignores the rest.</span></span> <span data-ttu-id="39678-192">Ad esempio, una routine della finestra potrebbe elaborare solo i messaggi di pressione dei tasti [**WM \_ KEYDOWN**](wm-keydown.md) e solo quelli che contengono codici di tasto virtuale per i tasti di spostamento del cursore, i tasti di direzione (detti anche tasti di controllo) e i tasti funzione.</span><span class="sxs-lookup"><span data-stu-id="39678-192">For example, a window procedure might process only [**WM\_KEYDOWN**](wm-keydown.md) keystroke messages, and only those that contain virtual-key codes for the cursor movement keys, shift keys (also called control keys), and function keys.</span></span> <span data-ttu-id="39678-193">Una routine di finestra tipica non elabora i messaggi relativi alla sequenza di tasti dai tasti di scelta rapida.</span><span class="sxs-lookup"><span data-stu-id="39678-193">A typical window procedure does not process keystroke messages from character keys.</span></span> <span data-ttu-id="39678-194">Usa invece la funzione [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) per convertire il messaggio in messaggi di tipo carattere.</span><span class="sxs-lookup"><span data-stu-id="39678-194">Instead, it uses the [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function to convert the message into character messages.</span></span> <span data-ttu-id="39678-195">Per altre informazioni su **TranslateMessage e** sui messaggi di tipo carattere, vedere [Messaggi di tipo carattere.](#character-messages)</span><span class="sxs-lookup"><span data-stu-id="39678-195">For more information about **TranslateMessage** and character messages, see [Character Messages](#character-messages).</span></span>

### <a name="keystroke-message-flags"></a><span data-ttu-id="39678-196">Flag di messaggi con sequenza di tasti</span><span class="sxs-lookup"><span data-stu-id="39678-196">Keystroke Message Flags</span></span>

<span data-ttu-id="39678-197">Il **parametro lParam** di un messaggio di sequenza di tasti contiene informazioni aggiuntive sulla sequenza di tasti che ha generato il messaggio.</span><span class="sxs-lookup"><span data-stu-id="39678-197">The **lParam** parameter of a keystroke message contains additional information about the keystroke that generated the message.</span></span> <span data-ttu-id="39678-198">Queste informazioni includono il conteggio delle ripetizioni, il codice di analisi, il flag di chiave estesa, il codice di contesto, il flag di stato della chiave precedente e il flag dello stato di transizione.</span><span class="sxs-lookup"><span data-stu-id="39678-198">This information includes the repeat count, the scan code, the extended-key flag, the context code, the previous key-state flag, and the transition-state flag.</span></span> <span data-ttu-id="39678-199">La figura seguente mostra le posizioni di questi flag e valori nel **parametro lParam.**</span><span class="sxs-lookup"><span data-stu-id="39678-199">The following illustration shows the locations of these flags and values in the **lParam** parameter.</span></span>

![percorsi dei flag e dei valori nel parametro lparam di un messaggio di sequenza di tasti](images/csinp-02.png)

<span data-ttu-id="39678-201">Un'applicazione può usare i valori seguenti per modificare i flag di pressione dei tasti.</span><span class="sxs-lookup"><span data-stu-id="39678-201">An application can use the following values to manipulate the keystroke flags.</span></span>



| <span data-ttu-id="39678-202">Valore</span><span class="sxs-lookup"><span data-stu-id="39678-202">Value</span></span>            | <span data-ttu-id="39678-203">Descrizione</span><span class="sxs-lookup"><span data-stu-id="39678-203">Description</span></span>                                                                       |
|------------------|-----------------------------------------------------------------------------------|
| <span data-ttu-id="39678-204">**KF \_ ALTDOWN**</span><span class="sxs-lookup"><span data-stu-id="39678-204">**KF\_ALTDOWN**</span></span>  | <span data-ttu-id="39678-205">Modifica il flag del tasto ALT, che indica se il tasto ALT è premuto.</span><span class="sxs-lookup"><span data-stu-id="39678-205">Manipulates the ALT key flag, which indicates whether the ALT key is pressed.</span></span>     |
| <span data-ttu-id="39678-206">**KF \_ DLGMODE**</span><span class="sxs-lookup"><span data-stu-id="39678-206">**KF\_DLGMODE**</span></span>  | <span data-ttu-id="39678-207">Modifica il flag della modalità finestra di dialogo, che indica se una finestra di dialogo è attiva.</span><span class="sxs-lookup"><span data-stu-id="39678-207">Manipulates the dialog mode flag, which indicates whether a dialog box is active.</span></span> |
| <span data-ttu-id="39678-208">**KF \_ EXTENDED**</span><span class="sxs-lookup"><span data-stu-id="39678-208">**KF\_EXTENDED**</span></span> | <span data-ttu-id="39678-209">Modifica il flag della chiave estesa.</span><span class="sxs-lookup"><span data-stu-id="39678-209">Manipulates the extended key flag.</span></span>                                                |
| <span data-ttu-id="39678-210">**KF \_ MENUMODE**</span><span class="sxs-lookup"><span data-stu-id="39678-210">**KF\_MENUMODE**</span></span> | <span data-ttu-id="39678-211">Modifica il flag della modalità menu, che indica se un menu è attivo.</span><span class="sxs-lookup"><span data-stu-id="39678-211">Manipulates the menu mode flag, which indicates whether a menu is active.</span></span>         |
| <span data-ttu-id="39678-212">**KF \_ REPEAT**</span><span class="sxs-lookup"><span data-stu-id="39678-212">**KF\_REPEAT**</span></span>   | <span data-ttu-id="39678-213">Modifica il flag di stato della chiave precedente.</span><span class="sxs-lookup"><span data-stu-id="39678-213">Manipulates the previous key state flag.</span></span>                                          |
| <span data-ttu-id="39678-214">**KF \_ UP**</span><span class="sxs-lookup"><span data-stu-id="39678-214">**KF\_UP**</span></span>       | <span data-ttu-id="39678-215">Modifica il flag dello stato di transizione.</span><span class="sxs-lookup"><span data-stu-id="39678-215">Manipulates the transition state flag.</span></span>                                            |

<span data-ttu-id="39678-216">Codice di esempio:</span><span class="sxs-lookup"><span data-stu-id="39678-216">Example code:</span></span>

```cpp
case WM_KEYDOWN:
case WM_KEYUP:
case WM_SYSKEYDOWN:
case WM_SYSKEYUP:
{
    WORD vkCode = LOWORD(wParam);                                       // virtual-key code

    BYTE scanCode = LOBYTE(HIWORD(lParam));                             // scan code
    BOOL scanCodeE0 = (HIWORD(lParam) & KF_EXTENDED) == KF_EXTENDED;    // extended-key flag, 1 if scancode has 0xE0 prefix

    BOOL upFlag = (HIWORD(lParam) & KF_UP) == KF_UP;                    // transition-state flag, 1 on keyup
    BOOL repeatFlag = (HIWORD(lParam) & KF_REPEAT) == KF_REPEAT;        // previous key-state flag, 1 on autorepeat
    WORD repeatCount = LOWORD(lParam);                                  // repeat count, > 0 if several keydown messages was combined into one message

    BOOL altDownFlag = (HIWORD(lParam) & KF_ALTDOWN) == KF_ALTDOWN;     // ALT key was pressed

    BOOL dlgModeFlag = (HIWORD(lParam) & KF_DLGMODE) == KF_DLGMODE;     // dialog box is active
    BOOL menuModeFlag = (HIWORD(lParam) & KF_MENUMODE) == KF_MENUMODE;  // menu is active
    
    // ...
}
break;
```

### <a name="repeat-count"></a><span data-ttu-id="39678-217">Ripeti conteggio</span><span class="sxs-lookup"><span data-stu-id="39678-217">Repeat Count</span></span>

<span data-ttu-id="39678-218">È possibile controllare il numero di ripetizioni per determinare se un messaggio di sequenza di tasti rappresenta più di una sequenza di tasti.</span><span class="sxs-lookup"><span data-stu-id="39678-218">You can check the repeat count to determine whether a keystroke message represents more than one keystroke.</span></span> <span data-ttu-id="39678-219">Il sistema incrementa il conteggio quando la tastiera genera messaggi [**WM \_ KEYDOWN**](wm-keydown.md) o [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) più velocemente di quanto un'applicazione possa elaborarli.</span><span class="sxs-lookup"><span data-stu-id="39678-219">The system increments the count when the keyboard generates [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) messages faster than an application can process them.</span></span> <span data-ttu-id="39678-220">Questo errore si verifica spesso quando l'utente tiene premuto un tasto per un tempo sufficiente per avviare la funzionalità di ripetizione automatica della tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-220">This often occurs when the user holds down a key long enough to start the keyboard's automatic repeat feature.</span></span> <span data-ttu-id="39678-221">Invece di riempire la coda di messaggi di sistema con i messaggi key-down risultanti, il sistema combina i messaggi in un singolo messaggio key down e incrementa il numero di ripetizioni.</span><span class="sxs-lookup"><span data-stu-id="39678-221">Instead of filling the system message queue with the resulting key-down messages, the system combines the messages into a single key down message and increments the repeat count.</span></span> <span data-ttu-id="39678-222">Il rilascio di una chiave non può avviare la funzionalità di ripetizione automatica, pertanto il numero di ripetizioni per i messaggi [**WM \_ KEYUP**](wm-keyup.md) e [**WM \_ SYSKEYUP**](wm-syskeyup.md) è sempre impostato su 1.</span><span class="sxs-lookup"><span data-stu-id="39678-222">Releasing a key cannot start the automatic repeat feature, so the repeat count for [**WM\_KEYUP**](wm-keyup.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md) messages is always set to 1.</span></span>

### <a name="scan-code"></a><span data-ttu-id="39678-223">Codice di analisi</span><span class="sxs-lookup"><span data-stu-id="39678-223">Scan Code</span></span>

<span data-ttu-id="39678-224">Il codice di analisi è il valore generato dall'hardware della tastiera quando l'utente preme un tasto.</span><span class="sxs-lookup"><span data-stu-id="39678-224">The scan code is the value that the keyboard hardware generates when the user presses a key.</span></span> <span data-ttu-id="39678-225">Si tratta di un valore dipendente dal dispositivo che identifica il tasto premuto, anziché il carattere rappresentato dal tasto.</span><span class="sxs-lookup"><span data-stu-id="39678-225">It is a device-dependent value that identifies the key pressed, as opposed to the character represented by the key.</span></span> <span data-ttu-id="39678-226">Un'applicazione in genere ignora i codici di analisi.</span><span class="sxs-lookup"><span data-stu-id="39678-226">An application typically ignores scan codes.</span></span> <span data-ttu-id="39678-227">Usa invece i codici dei tasti virtuali indipendenti dal dispositivo per interpretare i messaggi relativi alle sequenze di tasti.</span><span class="sxs-lookup"><span data-stu-id="39678-227">Instead, it uses the device-independent virtual-key codes to interpret keystroke messages.</span></span>

### <a name="extended-key-flag"></a><span data-ttu-id="39678-228">Extended-Key flag</span><span class="sxs-lookup"><span data-stu-id="39678-228">Extended-Key Flag</span></span>

<span data-ttu-id="39678-229">Il flag di tasti estesi indica se il messaggio di pressione dei tasti ha avuto origine da uno dei tasti aggiuntivi della tastiera avanzata.</span><span class="sxs-lookup"><span data-stu-id="39678-229">The extended-key flag indicates whether the keystroke message originated from one of the additional keys on the enhanced keyboard.</span></span> <span data-ttu-id="39678-230">I tasti estesi sono costituiti da ALT e CTRL sul lato destro della tastiera; i tasti INS, DEL, HOME, END, PGGIS, PGGIUTO e i tasti di direzione nei cluster a sinistra del tastierino numerico; tasto BLOC NUM; il tasto INTERR (CTRL+PAUSE). il tasto PRINT SCRN; e i tasti di divisione (/) e INVIO nel tastierino numerico.</span><span class="sxs-lookup"><span data-stu-id="39678-230">The extended keys consist of the ALT and CTRL keys on the right-hand side of the keyboard; the INS, DEL, HOME, END, PAGE UP, PAGE DOWN, and arrow keys in the clusters to the left of the numeric keypad; the NUM LOCK key; the BREAK (CTRL+PAUSE) key; the PRINT SCRN key; and the divide (/) and ENTER keys in the numeric keypad.</span></span> <span data-ttu-id="39678-231">Il flag della chiave estesa viene impostato se la chiave è una chiave estesa.</span><span class="sxs-lookup"><span data-stu-id="39678-231">The extended-key flag is set if the key is an extended key.</span></span>

<span data-ttu-id="39678-232">Se specificato, il codice di analisi è stato preceduto da un byte di prefisso con 0xE0 (224).</span><span class="sxs-lookup"><span data-stu-id="39678-232">If specified, the scan code was preceded by a prefix byte having the value 0xE0 (224).</span></span>

### <a name="context-code"></a><span data-ttu-id="39678-233">Codice di contesto</span><span class="sxs-lookup"><span data-stu-id="39678-233">Context Code</span></span>

<span data-ttu-id="39678-234">Il codice di contesto indica se il tasto ALT era premuto quando è stato generato il messaggio di pressione del tasto.</span><span class="sxs-lookup"><span data-stu-id="39678-234">The context code indicates whether the ALT key was down when the keystroke message was generated.</span></span> <span data-ttu-id="39678-235">Il codice è 1 se il tasto ALT era premuto e 0 se era in alto.</span><span class="sxs-lookup"><span data-stu-id="39678-235">The code is 1 if the ALT key was down and 0 if it was up.</span></span>

### <a name="previous-key-state-flag"></a><span data-ttu-id="39678-236">Flag Key-State precedente</span><span class="sxs-lookup"><span data-stu-id="39678-236">Previous Key-State Flag</span></span>

<span data-ttu-id="39678-237">Il flag di stato chiave precedente indica se il tasto che ha generato il messaggio di sequenza di tasti era in precedenza verso l'alto o verso il basso.</span><span class="sxs-lookup"><span data-stu-id="39678-237">The previous key-state flag indicates whether the key that generated the keystroke message was previously up or down.</span></span> <span data-ttu-id="39678-238">È 1 se in precedenza la chiave era in stato in basso e 0 se la chiave era in precedenza in alto.</span><span class="sxs-lookup"><span data-stu-id="39678-238">It is 1 if the key was previously down and 0 if the key was previously up.</span></span> <span data-ttu-id="39678-239">È possibile usare questo flag per identificare i messaggi di sequenza di tasti generati dalla funzionalità di ripetizione automatica della tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-239">You can use this flag to identify keystroke messages generated by the keyboard's automatic repeat feature.</span></span> <span data-ttu-id="39678-240">Questo flag è impostato su 1 per i messaggi di sequenza di tasti [**WM \_ KEYDOWN**](wm-keydown.md) e [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) generati dalla funzionalità di ripetizione automatica.</span><span class="sxs-lookup"><span data-stu-id="39678-240">This flag is set to 1 for [**WM\_KEYDOWN**](wm-keydown.md) and [**WM\_SYSKEYDOWN**](wm-syskeydown.md) keystroke messages generated by the automatic repeat feature.</span></span> <span data-ttu-id="39678-241">È sempre impostato su 1 per i [**messaggi WM \_ KEYUP**](wm-keyup.md) [**e WM \_ SYSKEYUP.**](wm-syskeyup.md)</span><span class="sxs-lookup"><span data-stu-id="39678-241">It is always set to 1 for [**WM\_KEYUP**](wm-keyup.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md) messages.</span></span>

### <a name="transition-state-flag"></a><span data-ttu-id="39678-242">Transition-State flag</span><span class="sxs-lookup"><span data-stu-id="39678-242">Transition-State Flag</span></span>

<span data-ttu-id="39678-243">Il flag transition-state indica se la pressione di un tasto o il rilascio di un tasto ha generato il messaggio di sequenza di tasti.</span><span class="sxs-lookup"><span data-stu-id="39678-243">The transition-state flag indicates whether pressing a key or releasing a key generated the keystroke message.</span></span> <span data-ttu-id="39678-244">Questo flag è sempre impostato su 0 per i messaggi [**WM \_ KEYDOWN**](wm-keydown.md) e [**WM \_ SYSKEYDOWN.**](wm-syskeydown.md) È sempre impostato su 1 per i messaggi [**WM \_ KEYUP**](wm-keyup.md) e [**WM \_ SYSKEYUP.**](wm-syskeyup.md)</span><span class="sxs-lookup"><span data-stu-id="39678-244">This flag is always set to 0 for [**WM\_KEYDOWN**](wm-keydown.md) and [**WM\_SYSKEYDOWN**](wm-syskeydown.md) messages; it is always set to 1 for [**WM\_KEYUP**](wm-keyup.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md) messages.</span></span>

## <a name="character-messages"></a><span data-ttu-id="39678-245">Messaggi di tipo carattere</span><span class="sxs-lookup"><span data-stu-id="39678-245">Character Messages</span></span>

<span data-ttu-id="39678-246">I messaggi relativi alle sequenze di tasti forniscono molte informazioni sulle sequenze di tasti, ma non forniscono codici carattere per le sequenze di caratteri.</span><span class="sxs-lookup"><span data-stu-id="39678-246">Keystroke messages provide a lot of information about keystrokes, but they do not provide character codes for character keystrokes.</span></span> <span data-ttu-id="39678-247">Per recuperare i codici carattere, un'applicazione deve includere la [**funzione TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) nel ciclo di messaggi del thread.</span><span class="sxs-lookup"><span data-stu-id="39678-247">To retrieve character codes, an application must include the [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function in its thread message loop.</span></span> <span data-ttu-id="39678-248">**TranslateMessage** passa un [**messaggio WM \_ KEYDOWN**](wm-keydown.md) o [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) al layout di tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-248">**TranslateMessage** passes a [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message to the keyboard layout.</span></span> <span data-ttu-id="39678-249">Il layout esamina il codice del tasto virtuale del messaggio e, se corrisponde a un tasto carattere, fornisce l'equivalente del codice carattere (tenendo conto dello stato dei tasti MAIUSC e BLOC MAIUSC).</span><span class="sxs-lookup"><span data-stu-id="39678-249">The layout examines the message's virtual-key code and, if it corresponds to a character key, provides the character code equivalent (taking into account the state of the SHIFT and CAPS LOCK keys).</span></span> <span data-ttu-id="39678-250">Genera quindi un messaggio di tipo carattere che include il codice carattere e inserisce il messaggio nella parte superiore della coda di messaggi.</span><span class="sxs-lookup"><span data-stu-id="39678-250">It then generates a character message that includes the character code and places the message at the top of the message queue.</span></span> <span data-ttu-id="39678-251">L'iterazione successiva del ciclo di messaggi rimuove il messaggio di tipo carattere dalla coda e invia il messaggio alla routine della finestra appropriata.</span><span class="sxs-lookup"><span data-stu-id="39678-251">The next iteration of the message loop removes the character message from the queue and dispatches the message to the appropriate window procedure.</span></span>

<span data-ttu-id="39678-252">Questa sezione contiene gli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="39678-252">This section covers the following topics:</span></span>

-   [<span data-ttu-id="39678-253">Messaggi di caratteri non di sistema</span><span class="sxs-lookup"><span data-stu-id="39678-253">Nonsystem Character Messages</span></span>](#nonsystem-character-messages)
-   [<span data-ttu-id="39678-254">Messaggi con caratteri non inviati</span><span class="sxs-lookup"><span data-stu-id="39678-254">Dead-Character Messages</span></span>](#dead-character-messages)

### <a name="nonsystem-character-messages"></a><span data-ttu-id="39678-255">Messaggi di caratteri non di sistema</span><span class="sxs-lookup"><span data-stu-id="39678-255">Nonsystem Character Messages</span></span>

<span data-ttu-id="39678-256">Una routine finestra può ricevere i seguenti messaggi di carattere: [**WM \_ CHAR,**](wm-char.md) [**WM \_ DEADCHAR,**](wm-deadchar.md) [**WM \_ SYSCHAR,**](/windows/desktop/menurc/wm-syschar) [**WM \_ SYSDEADCHAR**](wm-sysdeadchar.md)e [**WM \_ UNICHAR.**](wm-unichar.md)</span><span class="sxs-lookup"><span data-stu-id="39678-256">A window procedure can receive the following character messages: [**WM\_CHAR**](wm-char.md), [**WM\_DEADCHAR**](wm-deadchar.md), [**WM\_SYSCHAR**](/windows/desktop/menurc/wm-syschar), [**WM\_SYSDEADCHAR**](wm-sysdeadchar.md), and [**WM\_UNICHAR**](wm-unichar.md).</span></span> <span data-ttu-id="39678-257">La [**funzione TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) genera un **messaggio WM \_ CHAR** o **WM \_ DEADCHAR** quando elabora un [**messaggio WM \_ KEYDOWN.**](wm-keydown.md)</span><span class="sxs-lookup"><span data-stu-id="39678-257">The [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function generates a **WM\_CHAR** or **WM\_DEADCHAR** message when it processes a [**WM\_KEYDOWN**](wm-keydown.md) message.</span></span> <span data-ttu-id="39678-258">Analogamente, genera un messaggio **\_ SYSCHAR o** **\_ SYSDEADCHAR WM** quando elabora un [**messaggio \_ SYSKEYDOWN WM.**](wm-syskeydown.md)</span><span class="sxs-lookup"><span data-stu-id="39678-258">Similarly, it generates a **WM\_SYSCHAR** or **WM\_SYSDEADCHAR** message when it processes a [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message.</span></span>

<span data-ttu-id="39678-259">Un'applicazione che elabora l'input da tastiera ignora in genere tutti i messaggi, ad esempio [**WM \_ CHAR**](wm-char.md) e [**WM \_ UNICHAR,**](wm-unichar.md) passando tutti gli altri messaggi alla [**funzione DefWindowProc.**](/windows/desktop/api/winuser/nf-winuser-defwindowproca)</span><span class="sxs-lookup"><span data-stu-id="39678-259">An application that processes keyboard input typically ignores all but the [**WM\_CHAR**](wm-char.md) and [**WM\_UNICHAR**](wm-unichar.md) messages, passing any other messages to the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function.</span></span> <span data-ttu-id="39678-260">Si noti **che WM \_ CHAR** usa il formato di trasformazione Unicode (UTF) a 16 bit, mentre **WM \_ UNICHAR** usa UTF-32.</span><span class="sxs-lookup"><span data-stu-id="39678-260">Note that **WM\_CHAR** uses 16-bit Unicode Transformation Format (UTF) while **WM\_UNICHAR** uses UTF-32.</span></span> <span data-ttu-id="39678-261">Il sistema usa i [**messaggi WM \_ SYSCHAR**](/windows/desktop/menurc/wm-syschar) e [**WM \_ SYSDEADCHAR**](wm-sysdeadchar.md) per implementare i comandi di menu.</span><span class="sxs-lookup"><span data-stu-id="39678-261">The system uses the [**WM\_SYSCHAR**](/windows/desktop/menurc/wm-syschar) and [**WM\_SYSDEADCHAR**](wm-sysdeadchar.md) messages to implement menu mnemonics.</span></span>

<span data-ttu-id="39678-262">Il **parametro wParam** di tutti i messaggi di tipo carattere contiene il codice carattere del tasto carattere premuto.</span><span class="sxs-lookup"><span data-stu-id="39678-262">The **wParam** parameter of all character messages contains the character code of the character key that was pressed.</span></span> <span data-ttu-id="39678-263">Il valore del codice carattere dipende dalla classe finestra della finestra che riceve il messaggio.</span><span class="sxs-lookup"><span data-stu-id="39678-263">The value of the character code depends on the window class of the window receiving the message.</span></span> <span data-ttu-id="39678-264">Se la versione Unicode della [**funzione RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) è stata usata per registrare la classe della finestra, il sistema fornisce caratteri Unicode a tutte le finestre di tale classe.</span><span class="sxs-lookup"><span data-stu-id="39678-264">If the Unicode version of the [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) function was used to register the window class, the system provides Unicode characters to all windows of that class.</span></span> <span data-ttu-id="39678-265">In caso contrario, il sistema fornisce codici di caratteri ASCII.</span><span class="sxs-lookup"><span data-stu-id="39678-265">Otherwise, the system provides ASCII character codes.</span></span> <span data-ttu-id="39678-266">Per altre informazioni, vedere [Unicode e set di caratteri](/windows/desktop/Intl/unicode-and-character-sets).</span><span class="sxs-lookup"><span data-stu-id="39678-266">For more information, see [Unicode and Character Sets](/windows/desktop/Intl/unicode-and-character-sets).</span></span>

<span data-ttu-id="39678-267">Il contenuto del **parametro lParam** di un messaggio di tipo carattere è identico al contenuto del **parametro lParam** del messaggio key-down convertito per produrre il messaggio di tipo carattere.</span><span class="sxs-lookup"><span data-stu-id="39678-267">The contents of the **lParam** parameter of a character message are identical to the contents of the **lParam** parameter of the key-down message that was translated to produce the character message.</span></span> <span data-ttu-id="39678-268">Per informazioni, vedere [Flag dei messaggi di sequenza di tasti](#keystroke-message-flags).</span><span class="sxs-lookup"><span data-stu-id="39678-268">For information, see [Keystroke Message Flags](#keystroke-message-flags).</span></span>

### <a name="dead-character-messages"></a><span data-ttu-id="39678-269">Dead-Character messaggi</span><span class="sxs-lookup"><span data-stu-id="39678-269">Dead-Character Messages</span></span>

<span data-ttu-id="39678-270">Alcune tastiere non in lingua inglese contengono tasti di carattere che non dovrebbero produrre caratteri da soli.</span><span class="sxs-lookup"><span data-stu-id="39678-270">Some non-English keyboards contain character keys that are not expected to produce characters by themselves.</span></span> <span data-ttu-id="39678-271">Vengono invece usati per aggiungere un diacritico al carattere prodotto dalla sequenza di tasti successiva.</span><span class="sxs-lookup"><span data-stu-id="39678-271">Instead, they are used to add a diacritic to the character produced by the subsequent keystroke.</span></span> <span data-ttu-id="39678-272">Queste chiavi sono denominate *chiavi non disponibili.*</span><span class="sxs-lookup"><span data-stu-id="39678-272">These keys are called *dead keys*.</span></span> <span data-ttu-id="39678-273">Il tasto circonflesso su una tastiera tedesca è un esempio di tasto non attivo.</span><span class="sxs-lookup"><span data-stu-id="39678-273">The circumflex key on a German keyboard is an example of a dead key.</span></span> <span data-ttu-id="39678-274">Per immettere il carattere costituito da una "o" con un circonflesso, un utente tedesco digita la chiave circumflex seguita dal tasto "o".</span><span class="sxs-lookup"><span data-stu-id="39678-274">To enter the character consisting of an "o" with a circumflex, a German user would type the circumflex key followed by the "o" key.</span></span> <span data-ttu-id="39678-275">La finestra con lo stato attivo della tastiera riceverà la sequenza di messaggi seguente:</span><span class="sxs-lookup"><span data-stu-id="39678-275">The window with the keyboard focus would receive the following sequence of messages:</span></span>

1.  [<span data-ttu-id="39678-276">**WM \_ KEYDOWN**</span><span class="sxs-lookup"><span data-stu-id="39678-276">**WM\_KEYDOWN**</span></span>](wm-keydown.md)
2.  [<span data-ttu-id="39678-277">**WM \_ DEADCHAR**</span><span class="sxs-lookup"><span data-stu-id="39678-277">**WM\_DEADCHAR**</span></span>](wm-deadchar.md)
3.  [<span data-ttu-id="39678-278">**WM \_ KEYUP**</span><span class="sxs-lookup"><span data-stu-id="39678-278">**WM\_KEYUP**</span></span>](wm-keyup.md)
4.  [<span data-ttu-id="39678-279">**WM \_ KEYDOWN**</span><span class="sxs-lookup"><span data-stu-id="39678-279">**WM\_KEYDOWN**</span></span>](wm-keydown.md)
5.  [<span data-ttu-id="39678-280">**WM \_ CHAR**</span><span class="sxs-lookup"><span data-stu-id="39678-280">**WM\_CHAR**</span></span>](wm-char.md)
6.  [<span data-ttu-id="39678-281">**WM \_ KEYUP**</span><span class="sxs-lookup"><span data-stu-id="39678-281">**WM\_KEYUP**</span></span>](wm-keyup.md)

<span data-ttu-id="39678-282">[**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) genera il [**messaggio \_ WM DEADCHAR**](wm-deadchar.md) quando elabora il [**messaggio WM \_ KEYDOWN**](wm-keydown.md) da una chiave non elaborata.</span><span class="sxs-lookup"><span data-stu-id="39678-282">[**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) generates the [**WM\_DEADCHAR**](wm-deadchar.md) message when it processes the [**WM\_KEYDOWN**](wm-keydown.md) message from a dead key.</span></span> <span data-ttu-id="39678-283">Anche se il *parametro wParam* del messaggio **WM \_ DEADCHAR** contiene il codice carattere del diacritico per la chiave non trovata, un'applicazione in genere ignora il messaggio.</span><span class="sxs-lookup"><span data-stu-id="39678-283">Although the *wParam* parameter of the **WM\_DEADCHAR** message contains the character code of the diacritic for the dead key, an application typically ignores the message.</span></span> <span data-ttu-id="39678-284">Elabora invece il messaggio [**WM \_ CHAR**](wm-char.md) generato dalla sequenza di tasti successiva.</span><span class="sxs-lookup"><span data-stu-id="39678-284">Instead, it processes the [**WM\_CHAR**](wm-char.md) message generated by the subsequent keystroke.</span></span> <span data-ttu-id="39678-285">Il *parametro wParam* del **messaggio WM \_ CHAR** contiene il codice carattere della lettera con il diacritico.</span><span class="sxs-lookup"><span data-stu-id="39678-285">The *wParam* parameter of the **WM\_CHAR** message contains the character code of the letter with the diacritic.</span></span> <span data-ttu-id="39678-286">Se la sequenza di tasti successiva genera un carattere che non può essere combinato con un diacritico, il sistema genera due **messaggi WM \_ CHAR.**</span><span class="sxs-lookup"><span data-stu-id="39678-286">If the subsequent keystroke generates a character that cannot be combined with a diacritic, the system generates two **WM\_CHAR** messages.</span></span> <span data-ttu-id="39678-287">Il *parametro wParam* del primo contiene il codice carattere del diacritico. il *parametro wParam* del secondo contiene il codice carattere del tasto carattere successivo.</span><span class="sxs-lookup"><span data-stu-id="39678-287">The *wParam* parameter of the first contains the character code of the diacritic; the *wParam* parameter of the second contains the character code of the subsequent character key.</span></span>

<span data-ttu-id="39678-288">La [**funzione TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) genera il messaggio [**WM \_ SYSDEADCHAR**](wm-sysdeadchar.md) quando elabora il messaggio [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) da un tasto non funzionante di sistema (un tasto non funzionante premuto in combinazione con alt).</span><span class="sxs-lookup"><span data-stu-id="39678-288">The [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function generates the [**WM\_SYSDEADCHAR**](wm-sysdeadchar.md) message when it processes the [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message from a system dead key (a dead key that is pressed in combination with the ALT key).</span></span> <span data-ttu-id="39678-289">Un'applicazione in genere ignora **il messaggio \_ WM SYSDEADCHAR.**</span><span class="sxs-lookup"><span data-stu-id="39678-289">An application typically ignores the **WM\_SYSDEADCHAR** message.</span></span>

## <a name="key-status"></a><span data-ttu-id="39678-290">Stato chiave</span><span class="sxs-lookup"><span data-stu-id="39678-290">Key Status</span></span>

<span data-ttu-id="39678-291">Durante l'elaborazione di un messaggio da tastiera, un'applicazione potrebbe dover determinare lo stato di un altro tasto oltre a quello che ha generato il messaggio corrente.</span><span class="sxs-lookup"><span data-stu-id="39678-291">While processing a keyboard message, an application may need to determine the status of another key besides the one that generated the current message.</span></span> <span data-ttu-id="39678-292">Ad esempio, un'applicazione di elaborazione di testo che consente all'utente di premere MAIUSC+FINE per selezionare un blocco di testo deve controllare lo stato del tasto MAIUSC ogni volta che riceve un messaggio di pressione del tasto FINE.</span><span class="sxs-lookup"><span data-stu-id="39678-292">For example, a word-processing application that allows the user to press SHIFT+END to select a block of text must check the status of the SHIFT key whenever it receives a keystroke message from the END key.</span></span> <span data-ttu-id="39678-293">L'applicazione può usare [**la funzione GetKeyState**](/windows/win32/api/winuser/nf-winuser-getkeystate) per determinare lo stato di una chiave virtuale al momento della generazione del messaggio corrente. può usare la [**funzione GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) per recuperare lo stato corrente di una chiave virtuale.</span><span class="sxs-lookup"><span data-stu-id="39678-293">The application can use the [**GetKeyState**](/windows/win32/api/winuser/nf-winuser-getkeystate) function to determine the status of a virtual key at the time the current message was generated; it can use the [**GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) function to retrieve the current status of a virtual key.</span></span>

<span data-ttu-id="39678-294">Il layout di tastiera mantiene un elenco di nomi.</span><span class="sxs-lookup"><span data-stu-id="39678-294">The keyboard layout maintains a list of names.</span></span> <span data-ttu-id="39678-295">Il nome di una chiave che produce un singolo carattere è lo stesso del carattere prodotto dalla chiave.</span><span class="sxs-lookup"><span data-stu-id="39678-295">The name of a key that produces a single character is the same as the character produced by the key.</span></span> <span data-ttu-id="39678-296">Il nome di un tasto non carattere, ad esempio TAB e INVIO, viene archiviato come stringa di caratteri.</span><span class="sxs-lookup"><span data-stu-id="39678-296">The name of a noncharacter key such as TAB and ENTER is stored as a character string.</span></span> <span data-ttu-id="39678-297">Un'applicazione può recuperare il nome di qualsiasi chiave dal driver di dispositivo chiamando la [**funzione GetKeyNameText.**](/windows/win32/api/winuser/nf-winuser-getkeynametexta)</span><span class="sxs-lookup"><span data-stu-id="39678-297">An application can retrieve the name of any key from the device driver by calling the [**GetKeyNameText**](/windows/win32/api/winuser/nf-winuser-getkeynametexta) function.</span></span>

## <a name="keystroke-and-character-translations"></a><span data-ttu-id="39678-298">Combinazione di tasti e conversioni di caratteri</span><span class="sxs-lookup"><span data-stu-id="39678-298">Keystroke and Character Translations</span></span>

<span data-ttu-id="39678-299">Il sistema include diverse funzioni per scopi speciali che traslano codici di analisi, codici carattere e codici chiave virtuale forniti da vari messaggi di sequenza di tasti.</span><span class="sxs-lookup"><span data-stu-id="39678-299">The system includes several special purpose functions that translate scan codes, character codes, and virtual-key codes provided by various keystroke messages.</span></span> <span data-ttu-id="39678-300">Queste funzioni includono [**MapVirtualKey,**](/windows/win32/api/winuser/nf-winuser-mapvirtualkeya) [**ToAscii,**](/windows/win32/api/winuser/nf-winuser-toascii) [**ToUnicode**](/windows/win32/api/winuser/nf-winuser-tounicode)e [**VkKeyScan.**](/windows/win32/api/winuser/nf-winuser-vkkeyscana)</span><span class="sxs-lookup"><span data-stu-id="39678-300">These functions include [**MapVirtualKey**](/windows/win32/api/winuser/nf-winuser-mapvirtualkeya), [**ToAscii**](/windows/win32/api/winuser/nf-winuser-toascii), [**ToUnicode**](/windows/win32/api/winuser/nf-winuser-tounicode), and [**VkKeyScan**](/windows/win32/api/winuser/nf-winuser-vkkeyscana).</span></span>

<span data-ttu-id="39678-301">Microsoft Rich Edit 3.0 supporta anche [l'IME HexToUnicode,](/windows/desktop/Intl/hextounicode-ime)che consente a un utente di eseguire la conversione tra caratteri esadecimali e Unicode usando i tasti di scelta rapida.</span><span class="sxs-lookup"><span data-stu-id="39678-301">In addition, Microsoft Rich Edit 3.0 supports the [HexToUnicode IME](/windows/desktop/Intl/hextounicode-ime), which allows a user to convert between hexadecimal and Unicode characters by using hot keys.</span></span> <span data-ttu-id="39678-302">Ciò significa che quando Microsoft Rich Edit 3.0 viene incorporato in un'applicazione, l'applicazione erediterà le funzionalità dell'IME HexToUnicode.</span><span class="sxs-lookup"><span data-stu-id="39678-302">This means that when Microsoft Rich Edit 3.0 is incorporated into an application, the application will inherit the features of the HexToUnicode IME.</span></span>

## <a name="hot-key-support"></a><span data-ttu-id="39678-303">Hot-Key supporto tecnico</span><span class="sxs-lookup"><span data-stu-id="39678-303">Hot-Key Support</span></span>

<span data-ttu-id="39678-304">Un *tasto di* scelta rapida è una combinazione di tasti che genera un messaggio WM [**\_ HOTKEY,**](wm-hotkey.md) un messaggio che il sistema inserisce nella parte superiore della coda di messaggi di un thread, ignorando tutti i messaggi esistenti nella coda.</span><span class="sxs-lookup"><span data-stu-id="39678-304">A *hot key* is a key combination that generates a [**WM\_HOTKEY**](wm-hotkey.md) message, a message the system places at the top of a thread's message queue, bypassing any existing messages in the queue.</span></span> <span data-ttu-id="39678-305">Le applicazioni usano i tasti di scelta rapida per ottenere l'input della tastiera ad alta priorità dall'utente.</span><span class="sxs-lookup"><span data-stu-id="39678-305">Applications use hot keys to obtain high-priority keyboard input from the user.</span></span> <span data-ttu-id="39678-306">Ad esempio, definendo un tasto di scelta rapida costituito dalla combinazione di tasti CTRL+C, un'applicazione può consentire all'utente di annullare un'operazione di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="39678-306">For example, by defining a hot key consisting of the CTRL+C key combination, an application can allow the user to cancel a lengthy operation.</span></span>

<span data-ttu-id="39678-307">Per definire un tasto di scelta rapida, un'applicazione chiama la funzione [**RegisterHotKey,**](/windows/win32/api/winuser/nf-winuser-registerhotkey) specificando la combinazione di tasti che genera il messaggio [**WM \_ HOTKEY,**](wm-hotkey.md) l'handle alla finestra per ricevere il messaggio e l'identificatore del tasto di scelta rapida.</span><span class="sxs-lookup"><span data-stu-id="39678-307">To define a hot key, an application calls the [**RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey) function, specifying the combination of keys that generates the [**WM\_HOTKEY**](wm-hotkey.md) message, the handle to the window to receive the message, and the identifier of the hot key.</span></span> <span data-ttu-id="39678-308">Quando l'utente preme il tasto di scelta rapida, viene inserito un messaggio **WM \_ HOTKEY** nella coda di messaggi del thread che ha creato la finestra.</span><span class="sxs-lookup"><span data-stu-id="39678-308">When the user presses the hot key, a **WM\_HOTKEY** message is placed in the message queue of the thread that created the window.</span></span> <span data-ttu-id="39678-309">Il *parametro wParam* del messaggio contiene l'identificatore del tasto di scelta rapida.</span><span class="sxs-lookup"><span data-stu-id="39678-309">The *wParam* parameter of the message contains the identifier of the hot key.</span></span> <span data-ttu-id="39678-310">L'applicazione può definire più tasti di scelta rapida per un thread, ma ogni tasto di scelta nel thread deve avere un identificatore univoco.</span><span class="sxs-lookup"><span data-stu-id="39678-310">The application can define multiple hot keys for a thread, but each hot key in the thread must have a unique identifier.</span></span> <span data-ttu-id="39678-311">Prima che l'applicazione termini, deve usare la [**funzione UnregisterHotKey**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey) per eliminare il tasto di scelta rapida.</span><span class="sxs-lookup"><span data-stu-id="39678-311">Before the application terminates, it should use the [**UnregisterHotKey**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey) function to destroy the hot key.</span></span>

<span data-ttu-id="39678-312">Le applicazioni possono usare un controllo tasto di scelta rapida per semplificare la scelta di un tasto di scelta rapida da parte dell'utente.</span><span class="sxs-lookup"><span data-stu-id="39678-312">Applications can use a hot key control to make it easy for the user to choose a hot key.</span></span> <span data-ttu-id="39678-313">I controlli tasto di scelta vengono in genere usati per definire un tasto di scelta rapida che attiva una finestra. non usano le [**funzioni RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey) [**e UnregisterHotKey.**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey)</span><span class="sxs-lookup"><span data-stu-id="39678-313">Hot key controls are typically used to define a hot key that activates a window; they do not use the [**RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey) and [**UnregisterHotKey**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey) functions.</span></span> <span data-ttu-id="39678-314">Al contrario, un'applicazione che usa un controllo tasto di scelta in genere invia il [**messaggio WM \_ SETHOTKEY**](wm-sethotkey.md) per impostare il tasto di scelta rapida.</span><span class="sxs-lookup"><span data-stu-id="39678-314">Instead, an application that uses a hot key control typically sends the [**WM\_SETHOTKEY**](wm-sethotkey.md) message to set the hot key.</span></span> <span data-ttu-id="39678-315">Ogni volta che l'utente preme il tasto di scelta rapida, il sistema invia un [**messaggio \_ SYSCOMMAND WM**](/windows/desktop/menurc/wm-syscommand) specificando SC \_ HOTKEY.</span><span class="sxs-lookup"><span data-stu-id="39678-315">Whenever the user presses the hot key, the system sends a [**WM\_SYSCOMMAND**](/windows/desktop/menurc/wm-syscommand) message specifying SC\_HOTKEY.</span></span> <span data-ttu-id="39678-316">Per altre informazioni sui controlli tasto di scelta rapida, vedere "Uso dei controlli tasto di scelta rapida" in [Controlli tasto di scelta rapida](../controls/hot-key-controls.md).</span><span class="sxs-lookup"><span data-stu-id="39678-316">For more information about hot key controls, see "Using Hot Key Controls" in [Hot Key Controls](../controls/hot-key-controls.md).</span></span>

## <a name="keyboard-keys-for-browsing-and-other-functions"></a><span data-ttu-id="39678-317">Tasti da tastiera per l'esplorazione e altre funzioni</span><span class="sxs-lookup"><span data-stu-id="39678-317">Keyboard Keys for Browsing and Other Functions</span></span>

<span data-ttu-id="39678-318">Windows supporto per tastiere con tasti speciali per funzioni del browser, funzioni multimediali, avvio di applicazioni e risparmio energia.</span><span class="sxs-lookup"><span data-stu-id="39678-318">Windows provides support for keyboards with special keys for browser functions, media functions, application launching, and power management.</span></span> <span data-ttu-id="39678-319">[**WM \_ APPCOMMAND**](wm-appcommand.md) supporta i tasti della tastiera aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="39678-319">The [**WM\_APPCOMMAND**](wm-appcommand.md) supports the extra keyboard keys.</span></span> <span data-ttu-id="39678-320">Inoltre, la [**funzione ShellProc**](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) viene modificata per supportare i tasti aggiuntivi della tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-320">In addition, the [**ShellProc**](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) function is modified to support the extra keyboard keys.</span></span>

<span data-ttu-id="39678-321">È improbabile che una finestra figlio in un'applicazione componente sia in grado di implementare direttamente i comandi per questi tasti aggiuntivi della tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-321">It is unlikely that a child window in a component application will be able to directly implement commands for these extra keyboard keys.</span></span> <span data-ttu-id="39678-322">Pertanto, quando viene premuto uno di questi tasti, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) invierà un [**messaggio WM \_ APPCOMMAND**](wm-appcommand.md) a una finestra.</span><span class="sxs-lookup"><span data-stu-id="39678-322">So when one of these keys is pressed, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) will send a [**WM\_APPCOMMAND**](wm-appcommand.md) message to a window.</span></span> <span data-ttu-id="39678-323">**DefWindowProc inserirà** anche il **messaggio WM \_ APPCOMMAND** nella relativa finestra padre.</span><span class="sxs-lookup"><span data-stu-id="39678-323">**DefWindowProc** will also bubble the **WM\_APPCOMMAND** message to its parent window.</span></span> <span data-ttu-id="39678-324">Questo è simile al modo in cui i menu di scelta rapida vengono richiamati con il pulsante destro del mouse, ovvero **DefWindowProc** invia un messaggio [**WM \_ CONTEXTMENU**](/windows/desktop/menurc/wm-contextmenu) al clic con il pulsante destro del mouse e lo bolla al relativo elemento padre.</span><span class="sxs-lookup"><span data-stu-id="39678-324">This is similar to the way context menus are invoked with the right mouse button, which is that **DefWindowProc** sends a [**WM\_CONTEXTMENU**](/windows/desktop/menurc/wm-contextmenu) message on a right button click, and bubbles it to its parent.</span></span> <span data-ttu-id="39678-325">Inoltre, se **DefWindowProc** riceve un messaggio **WM \_ APPCOMMAND** per una finestra di primo livello, chiamerà un hook della shell con codice **HSHELL \_ APPCOMMAND**.</span><span class="sxs-lookup"><span data-stu-id="39678-325">Additionally, if **DefWindowProc** receives a **WM\_APPCOMMAND** message for a top-level window, it will call a shell hook with code **HSHELL\_APPCOMMAND**.</span></span>

<span data-ttu-id="39678-326">Windows supporta anche Microsoft IntelliMouse Explorer, ovvero un mouse con cinque pulsanti.</span><span class="sxs-lookup"><span data-stu-id="39678-326">Windows also supports the Microsoft IntelliMouse Explorer, which is a mouse with five buttons.</span></span> <span data-ttu-id="39678-327">I due pulsanti aggiuntivi supportano lo spostamento avanti e indietro nel browser.</span><span class="sxs-lookup"><span data-stu-id="39678-327">The two extra buttons support forward and backward browser navigation.</span></span> <span data-ttu-id="39678-328">Per altre informazioni, vedere [XBUTTONs](about-mouse-input.md).</span><span class="sxs-lookup"><span data-stu-id="39678-328">For more information, see [XBUTTONs](about-mouse-input.md).</span></span>

## <a name="simulating-input"></a><span data-ttu-id="39678-329">Simulazione dell'input</span><span class="sxs-lookup"><span data-stu-id="39678-329">Simulating Input</span></span>

<span data-ttu-id="39678-330">Per simulare una serie ininterrotta di eventi di input utente, usare la [**funzione SendInput.**](/windows/win32/api/winuser/nf-winuser-sendinput)</span><span class="sxs-lookup"><span data-stu-id="39678-330">To simulate an uninterrupted series of user input events, use the [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function.</span></span> <span data-ttu-id="39678-331">La funzione accetta tre parametri.</span><span class="sxs-lookup"><span data-stu-id="39678-331">The function accepts three parameters.</span></span> <span data-ttu-id="39678-332">Il primo parametro, *cInputs*, indica il numero di eventi di input che verranno simulati.</span><span class="sxs-lookup"><span data-stu-id="39678-332">The first parameter, *cInputs*, indicates the number of input events that will be simulated.</span></span> <span data-ttu-id="39678-333">Il secondo parametro, *rgInputs*, è una matrice di strutture [**INPUT,**](/windows/win32/api/winuser/ns-winuser-input) ognuna delle quali descrive un tipo di evento di input e informazioni aggiuntive su tale evento.</span><span class="sxs-lookup"><span data-stu-id="39678-333">The second parameter, *rgInputs*, is an array of [**INPUT**](/windows/win32/api/winuser/ns-winuser-input) structures, each describing a type of input event and additional information about that event.</span></span> <span data-ttu-id="39678-334">L'ultimo parametro, *cbSize*, accetta le dimensioni della struttura **INPUT,** in byte.</span><span class="sxs-lookup"><span data-stu-id="39678-334">The last parameter, *cbSize*, accepts the size of the **INPUT** structure, in bytes.</span></span>

<span data-ttu-id="39678-335">La [**funzione SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) funziona inseriscendo una serie di eventi di input simulati nel flusso di input di un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="39678-335">The [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function works by injecting a series of simulated input events into a device's input stream.</span></span> <span data-ttu-id="39678-336">L'effetto è simile alla chiamata ripetuta dell'evento [**keybd \_**](/windows/win32/api/winuser/nf-winuser-keybd_event) o della funzione dell'evento [**mouse, \_**](/windows/win32/api/winuser/nf-winuser-mouse_event) ad eccezione del fatto che il sistema garantisce che nessun altro evento di input si mesci con gli eventi simulati.</span><span class="sxs-lookup"><span data-stu-id="39678-336">The effect is similar to calling the [**keybd\_event**](/windows/win32/api/winuser/nf-winuser-keybd_event) or [**mouse\_event**](/windows/win32/api/winuser/nf-winuser-mouse_event) function repeatedly, except that the system ensures that no other input events intermingle with the simulated events.</span></span> <span data-ttu-id="39678-337">Al termine della chiamata, il valore restituito indica il numero di eventi di input riprodotti correttamente.</span><span class="sxs-lookup"><span data-stu-id="39678-337">When the call completes, the return value indicates the number of input events successfully played.</span></span> <span data-ttu-id="39678-338">Se questo valore è zero, l'input è stato bloccato.</span><span class="sxs-lookup"><span data-stu-id="39678-338">If this value is zero, then input was blocked.</span></span>

<span data-ttu-id="39678-339">La [**funzione SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) non reimposta lo stato corrente della tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-339">The [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function does not reset the keyboard's current state.</span></span> <span data-ttu-id="39678-340">Pertanto, se l'utente ha tasti premuti quando si chiama questa funzione, potrebbe interferire con gli eventi generati da questa funzione.</span><span class="sxs-lookup"><span data-stu-id="39678-340">Therefore, if the user has any keys pressed when you call this function, they might interfere with the events that this function generates.</span></span> <span data-ttu-id="39678-341">Se si è interessati a possibili interferenze, controllare lo stato della tastiera con la [**funzione GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) e correggere in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="39678-341">If you are concerned about possible interference, check the keyboard's state with the [**GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) function and correct as necessary.</span></span>

## <a name="languages-locales-and-keyboard-layouts"></a><span data-ttu-id="39678-342">Lingue, impostazioni locali e layout di tastiera</span><span class="sxs-lookup"><span data-stu-id="39678-342">Languages, Locales, and Keyboard Layouts</span></span>

<span data-ttu-id="39678-343">Una *lingua* è un linguaggio naturale, ad esempio inglese, francese e giapponese.</span><span class="sxs-lookup"><span data-stu-id="39678-343">A *language* is a natural language, such as English, French, and Japanese.</span></span> <span data-ttu-id="39678-344">Un *sottolinguaggio* è una variante di un linguaggio naturale parlato in un'area geografica specifica, ad esempio le sottolinguaggi inglesi parlati nel Regno Unito e nel Stati Uniti.</span><span class="sxs-lookup"><span data-stu-id="39678-344">A *sublanguage* is a variant of a natural language that is spoken in a specific geographical region, such as the English sublanguages spoken in the United Kingdom and the United States.</span></span> <span data-ttu-id="39678-345">Le applicazioni usano valori, [detti identificatori di lingua,](/windows/desktop/Intl/language-identifiers)per identificare in modo univoco lingue e sottolinguaggi.</span><span class="sxs-lookup"><span data-stu-id="39678-345">Applications use values, called [language identifiers](/windows/desktop/Intl/language-identifiers), to uniquely identify languages and sublanguages.</span></span>

<span data-ttu-id="39678-346">Le applicazioni usano in *genere le impostazioni* locali per impostare la lingua in cui vengono elaborati l'input e l'output.</span><span class="sxs-lookup"><span data-stu-id="39678-346">Applications typically use *locales* to set the language in which input and output is processed.</span></span> <span data-ttu-id="39678-347">L'impostazione delle impostazioni locali per la tastiera, ad esempio, influisce sui valori dei caratteri generati dalla tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-347">Setting the locale for the keyboard, for example, affects the character values generated by the keyboard.</span></span> <span data-ttu-id="39678-348">L'impostazione delle impostazioni locali per lo schermo o la stampante influisce sui glifi visualizzati o stampati.</span><span class="sxs-lookup"><span data-stu-id="39678-348">Setting the locale for the display or printer affects the glyphs displayed or printed.</span></span> <span data-ttu-id="39678-349">Le applicazioni impostano le impostazioni locali per una tastiera caricando e usando i layout di tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-349">Applications set the locale for a keyboard by loading and using keyboard layouts.</span></span> <span data-ttu-id="39678-350">Impostano le impostazioni locali per uno schermo o una stampante selezionando un tipo di carattere che supporti le impostazioni locali specificate.</span><span class="sxs-lookup"><span data-stu-id="39678-350">They set the locale for a display or printer by selecting a font that supports the specified locale.</span></span>

<span data-ttu-id="39678-351">Un layout di tastiera non solo specifica la posizione fisica dei tasti sulla tastiera, ma determina anche i valori dei caratteri generati premendo tali tasti.</span><span class="sxs-lookup"><span data-stu-id="39678-351">A keyboard layout not only specifies the physical position of the keys on the keyboard but also determines the character values generated by pressing those keys.</span></span> <span data-ttu-id="39678-352">Ogni layout identifica la lingua di input corrente e determina i valori dei caratteri generati da quali tasti e combinazioni di tasti.</span><span class="sxs-lookup"><span data-stu-id="39678-352">Each layout identifies the current input language and determines which character values are generated by which keys and key combinations.</span></span>

<span data-ttu-id="39678-353">Ogni layout di tastiera ha un handle corrispondente che identifica il layout e la lingua.</span><span class="sxs-lookup"><span data-stu-id="39678-353">Every keyboard layout has a corresponding handle that identifies the layout and language.</span></span> <span data-ttu-id="39678-354">La parola bassa dell'handle è un identificatore di lingua.</span><span class="sxs-lookup"><span data-stu-id="39678-354">The low word of the handle is a language identifier.</span></span> <span data-ttu-id="39678-355">La parola alta è un handle del dispositivo, che specifica il layout fisico, o è zero, che indica un layout fisico predefinito.</span><span class="sxs-lookup"><span data-stu-id="39678-355">The high word is a device handle, specifying the physical layout, or is zero, indicating a default physical layout.</span></span> <span data-ttu-id="39678-356">L'utente può associare qualsiasi lingua di input a un layout fisico.</span><span class="sxs-lookup"><span data-stu-id="39678-356">The user can associate any input language with a physical layout.</span></span> <span data-ttu-id="39678-357">Ad esempio, un utente di lingua inglese che lavora molto occasionalmente in francese può impostare la lingua di input della tastiera sul francese senza modificare il layout fisico della tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-357">For example, an English-speaking user who very occasionally works in French can set the input language of the keyboard to French without changing the physical layout of the keyboard.</span></span> <span data-ttu-id="39678-358">Ciò significa che l'utente può immettere testo in francese usando il noto layout inglese.</span><span class="sxs-lookup"><span data-stu-id="39678-358">This means the user can enter text in French using the familiar English layout.</span></span>

<span data-ttu-id="39678-359">Le applicazioni in genere non devono modificare direttamente le lingue di input.</span><span class="sxs-lookup"><span data-stu-id="39678-359">Applications are generally not expected to manipulate input languages directly.</span></span> <span data-ttu-id="39678-360">Al contrario, l'utente configura combinazioni di lingua e layout, quindi passa da una all'altra.</span><span class="sxs-lookup"><span data-stu-id="39678-360">Instead, the user sets up language and layout combinations, then switches among them.</span></span> <span data-ttu-id="39678-361">Quando l'utente fa clic su un testo contrassegnato con una lingua diversa, l'applicazione chiama la [**funzione ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) per attivare il layout predefinito dell'utente per tale lingua.</span><span class="sxs-lookup"><span data-stu-id="39678-361">When the user clicks into text marked with a different language, the application calls the [**ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) function to activate the user's default layout for that language.</span></span> <span data-ttu-id="39678-362">Se l'utente modifica il testo in una lingua non presente nell'elenco attivo, l'applicazione può chiamare la funzione [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) con la lingua per ottenere un layout basato su tale lingua.</span><span class="sxs-lookup"><span data-stu-id="39678-362">If the user edits text in a language which is not in the active list, the application can call the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function with the language to get a layout based on that language.</span></span>

<span data-ttu-id="39678-363">La [**funzione ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) imposta la lingua di input per l'attività corrente.</span><span class="sxs-lookup"><span data-stu-id="39678-363">The [**ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) function sets the input language for the current task.</span></span> <span data-ttu-id="39678-364">Il *parametro hkl* può essere l'handle per il layout di tastiera o un identificatore di lingua con estensione zero.</span><span class="sxs-lookup"><span data-stu-id="39678-364">The *hkl* parameter can be either the handle to the keyboard layout or a zero-extended language identifier.</span></span> <span data-ttu-id="39678-365">Gli handle di layout di tastiera possono essere ottenuti [**dalla funzione LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) [**o GetKeyboardLayoutList.**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutlist)</span><span class="sxs-lookup"><span data-stu-id="39678-365">Keyboard layout handles can be obtained from the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) or [**GetKeyboardLayoutList**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutlist) function.</span></span> <span data-ttu-id="39678-366">I **valori HKL \_ NEXT** e **HKL \_ PREV** possono essere usati anche per selezionare la tastiera successiva o precedente.</span><span class="sxs-lookup"><span data-stu-id="39678-366">The **HKL\_NEXT** and **HKL\_PREV** values can also be used to select the next or previous keyboard.</span></span>

<span data-ttu-id="39678-367">La [**funzione GetKeyboardLayoutName**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutnamea) recupera il nome del layout di tastiera attivo per il thread chiamante.</span><span class="sxs-lookup"><span data-stu-id="39678-367">The [**GetKeyboardLayoutName**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutnamea) function retrieves the name of the active keyboard layout for the calling thread.</span></span> <span data-ttu-id="39678-368">Se un'applicazione crea il layout attivo usando la [**funzione LoadKeyboardLayout,**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) **GetKeyboardLayoutName** recupera la stessa stringa usata per creare il layout.</span><span class="sxs-lookup"><span data-stu-id="39678-368">If an application creates the active layout using the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function, **GetKeyboardLayoutName** retrieves the same string used to create the layout.</span></span> <span data-ttu-id="39678-369">In caso contrario, la stringa è l'identificatore di lingua principale corrispondente alle impostazioni locali del layout attivo.</span><span class="sxs-lookup"><span data-stu-id="39678-369">Otherwise, the string is the primary language identifier corresponding to the locale of the active layout.</span></span> <span data-ttu-id="39678-370">Ciò significa che la funzione non può necessariamente distinguere tra layout diversi con la stessa lingua primaria, pertanto non può restituire informazioni specifiche sulla lingua di input.</span><span class="sxs-lookup"><span data-stu-id="39678-370">This means the function may not necessarily differentiate among different layouts with the same primary language, so cannot return specific information about the input language.</span></span> <span data-ttu-id="39678-371">La [**funzione GetKeyboardLayout,**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayout) tuttavia, può essere usata per determinare la lingua di input.</span><span class="sxs-lookup"><span data-stu-id="39678-371">The [**GetKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayout) function, however, can be used to determine the input language.</span></span>

<span data-ttu-id="39678-372">La [**funzione LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) carica un layout di tastiera e lo rende disponibile all'utente.</span><span class="sxs-lookup"><span data-stu-id="39678-372">The [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function loads a keyboard layout and makes the layout available to the user.</span></span> <span data-ttu-id="39678-373">Le applicazioni possono rendere il layout immediatamente attivo per il thread corrente usando il **valore KLF \_ ACTIVATE.**</span><span class="sxs-lookup"><span data-stu-id="39678-373">Applications can make the layout immediately active for the current thread by using the **KLF\_ACTIVATE** value.</span></span> <span data-ttu-id="39678-374">Un'applicazione può usare **il valore KLF \_ REORDER** per riordinare i layout senza specificare anche il **valore KLF \_ ACTIVATE.**</span><span class="sxs-lookup"><span data-stu-id="39678-374">An application can use the **KLF\_REORDER** value to reorder the layouts without also specifying the **KLF\_ACTIVATE** value.</span></span> <span data-ttu-id="39678-375">Le applicazioni devono sempre usare il **valore KLF \_ SUBSTITUTE \_ OK** durante il caricamento dei layout di tastiera per assicurarsi che sia selezionata la preferenza dell'utente, se presente.</span><span class="sxs-lookup"><span data-stu-id="39678-375">Applications should always use the **KLF\_SUBSTITUTE\_OK** value when loading keyboard layouts to ensure that the user's preference, if any, is selected.</span></span>

<span data-ttu-id="39678-376">Per il supporto multilingue, la [**funzione LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) fornisce i flag **KLF \_ REPLACELANG** e **KLF \_ NOTELLSHELL.**</span><span class="sxs-lookup"><span data-stu-id="39678-376">For multilingual support, the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function provides the **KLF\_REPLACELANG** and **KLF\_NOTELLSHELL** flags.</span></span> <span data-ttu-id="39678-377">Il flag **KLF \_ REPLACELANG** indica alla funzione di sostituire un layout di tastiera esistente senza modificare la lingua.</span><span class="sxs-lookup"><span data-stu-id="39678-377">The **KLF\_REPLACELANG** flag directs the function to replace an existing keyboard layout without changing the language.</span></span> <span data-ttu-id="39678-378">Il tentativo di sostituire un layout esistente usando lo stesso identificatore di lingua, ma senza specificare **KLF \_ REPLACELANG,** è un errore.</span><span class="sxs-lookup"><span data-stu-id="39678-378">Attempting to replace an existing layout using the same language identifier but without specifying **KLF\_REPLACELANG** is an error.</span></span> <span data-ttu-id="39678-379">Il flag **\_ NOTELLSHELL di KLF** impedisce alla funzione di notificare alla shell quando viene aggiunto o sostituito un layout di tastiera.</span><span class="sxs-lookup"><span data-stu-id="39678-379">The **KLF\_NOTELLSHELL** flag prevents the function from notifying the shell when a keyboard layout is added or replaced.</span></span> <span data-ttu-id="39678-380">Ciò è utile per le applicazioni che aggiungono più layout in una serie consecutiva di chiamate.</span><span class="sxs-lookup"><span data-stu-id="39678-380">This is useful for applications that add multiple layouts in a consecutive series of calls.</span></span> <span data-ttu-id="39678-381">Questo flag deve essere usato in tutte le chiamate, ad esempio l'ultima.</span><span class="sxs-lookup"><span data-stu-id="39678-381">This flag should be used in all but the last call.</span></span>

<span data-ttu-id="39678-382">La [**funzione UnloadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-unloadkeyboardlayout) è limitata in quanto non può scaricare la lingua di input predefinita del sistema.</span><span class="sxs-lookup"><span data-stu-id="39678-382">The [**UnloadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-unloadkeyboardlayout) function is restricted in that it cannot unload the system default input language.</span></span> <span data-ttu-id="39678-383">In questo modo si garantisce che l'utente abbia sempre un layout disponibile per l'immissione di testo usando lo stesso set di caratteri usato dalla shell e file system.</span><span class="sxs-lookup"><span data-stu-id="39678-383">This ensures that the user always has one layout available for enter text using the same character set as used by the shell and file system.</span></span>

 

 
