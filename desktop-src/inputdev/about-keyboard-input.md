---
title: Informazioni sull'input da tastiera
description: In questo argomento viene illustrato l'input da tastiera.
ms.assetid: de34727e-e8c7-481d-982d-0e42a02704db
keywords:
- input dell'utente, input da tastiera
- acquisizione dell'input dell'utente, input da tastiera
- input da tastiera
- stato attivo della tastiera
- messaggi di tasti
- messaggi di tipo carattere
- sequenze di tasti di sistema
- sequenze di tasti non di sistema
- messaggi di tipo carattere non di sistema
- chiavi inutilizzate
- messaggi di tipo carattere non recapitabili
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 65ad481bad6756bb374b98a5510bdc26f1cded6a
ms.sourcegitcommit: ac62be2f60f757f61ea647a95c168c9841ffabac
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/10/2021
ms.locfileid: "104560045"
---
# <a name="about-keyboard-input"></a><span data-ttu-id="24da5-114">Informazioni sull'input da tastiera</span><span class="sxs-lookup"><span data-stu-id="24da5-114">About Keyboard Input</span></span>

<span data-ttu-id="24da5-115">Le applicazioni devono accettare l'input dell'utente dalla tastiera e dal mouse.</span><span class="sxs-lookup"><span data-stu-id="24da5-115">Applications should accept user input from the keyboard as well as from the mouse.</span></span> <span data-ttu-id="24da5-116">Un'applicazione riceve l'input da tastiera sotto forma di messaggi inviati alle relative finestre.</span><span class="sxs-lookup"><span data-stu-id="24da5-116">An application receives keyboard input in the form of messages posted to its windows.</span></span>

<span data-ttu-id="24da5-117">Questa sezione contiene gli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="24da5-117">This section covers the following topics:</span></span>

-   [<span data-ttu-id="24da5-118">Modello di input da tastiera</span><span class="sxs-lookup"><span data-stu-id="24da5-118">Keyboard Input Model</span></span>](#keyboard-input-model)
-   [<span data-ttu-id="24da5-119">Messa a fuoco e attivazione della tastiera</span><span class="sxs-lookup"><span data-stu-id="24da5-119">Keyboard Focus and Activation</span></span>](#keyboard-focus-and-activation)
-   [<span data-ttu-id="24da5-120">Messaggi di tasti</span><span class="sxs-lookup"><span data-stu-id="24da5-120">Keystroke Messages</span></span>](#keystroke-messages)
    -   [<span data-ttu-id="24da5-121">Sequenze di tasti di sistema e non di sistema</span><span class="sxs-lookup"><span data-stu-id="24da5-121">System and Nonsystem Keystrokes</span></span>](#system-and-nonsystem-keystrokes)
    -   [<span data-ttu-id="24da5-122">Codici di chiave virtuale descritti</span><span class="sxs-lookup"><span data-stu-id="24da5-122">Virtual-Key Codes Described</span></span>](#virtual-key-codes-described)
    -   [<span data-ttu-id="24da5-123">Flag messaggi di sequenza di tasti</span><span class="sxs-lookup"><span data-stu-id="24da5-123">Keystroke Message Flags</span></span>](#keystroke-message-flags)
-   [<span data-ttu-id="24da5-124">Messaggi di tipo carattere</span><span class="sxs-lookup"><span data-stu-id="24da5-124">Character Messages</span></span>](#character-messages)
    -   [<span data-ttu-id="24da5-125">Messaggi di tipo carattere non di sistema</span><span class="sxs-lookup"><span data-stu-id="24da5-125">Nonsystem Character Messages</span></span>](#nonsystem-character-messages)
    -   [<span data-ttu-id="24da5-126">Messaggi di tipo carattere non recapitabili</span><span class="sxs-lookup"><span data-stu-id="24da5-126">Dead-Character Messages</span></span>](#dead-character-messages)
-   [<span data-ttu-id="24da5-127">Stato chiave</span><span class="sxs-lookup"><span data-stu-id="24da5-127">Key Status</span></span>](#key-status)
-   [<span data-ttu-id="24da5-128">Traslazione di tasti e caratteri</span><span class="sxs-lookup"><span data-stu-id="24da5-128">Keystroke and Character Translations</span></span>](#keystroke-and-character-translations)
-   [<span data-ttu-id="24da5-129">Supporto per i tasti di scelta rapida</span><span class="sxs-lookup"><span data-stu-id="24da5-129">Hot-Key Support</span></span>](#hot-key-support)
-   [<span data-ttu-id="24da5-130">Tasti di scelta rapida per l'esplorazione e altre funzioni</span><span class="sxs-lookup"><span data-stu-id="24da5-130">Keyboard Keys for Browsing and Other Functions</span></span>](#keyboard-keys-for-browsing-and-other-functions)
-   [<span data-ttu-id="24da5-131">Simulazione dell'input</span><span class="sxs-lookup"><span data-stu-id="24da5-131">Simulating Input</span></span>](#simulating-input)
-   [<span data-ttu-id="24da5-132">Lingue, impostazioni locali e layout di tastiera</span><span class="sxs-lookup"><span data-stu-id="24da5-132">Languages, Locales, and Keyboard Layouts</span></span>](#languages-locales-and-keyboard-layouts)

## <a name="keyboard-input-model"></a><span data-ttu-id="24da5-133">Modello di input da tastiera</span><span class="sxs-lookup"><span data-stu-id="24da5-133">Keyboard Input Model</span></span>

<span data-ttu-id="24da5-134">Il sistema fornisce il supporto della tastiera indipendente dal dispositivo per le applicazioni installando un driver di dispositivo da tastiera appropriato per la tastiera corrente.</span><span class="sxs-lookup"><span data-stu-id="24da5-134">The system provides device-independent keyboard support for applications by installing a keyboard device driver appropriate for the current keyboard.</span></span> <span data-ttu-id="24da5-135">Il sistema fornisce supporto della tastiera indipendente dal linguaggio utilizzando il layout di tastiera specifico del linguaggio attualmente selezionato dall'utente o dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="24da5-135">The system provides language-independent keyboard support by using the language-specific keyboard layout currently selected by the user or the application.</span></span> <span data-ttu-id="24da5-136">Il driver del dispositivo da tastiera riceve i codici di analisi dalla tastiera, che vengono inviati al layout della tastiera in cui vengono tradotti in messaggi e inviati alle finestre appropriate nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="24da5-136">The keyboard device driver receives scan codes from the keyboard, which are sent to the keyboard layout where they are translated into messages and posted to the appropriate windows in your application.</span></span>

<span data-ttu-id="24da5-137">Assegnato a ogni chiave su una tastiera è un valore univoco denominato *codice di analisi*, un identificatore dipendente dal dispositivo per la chiave sulla tastiera.</span><span class="sxs-lookup"><span data-stu-id="24da5-137">Assigned to each key on a keyboard is a unique value called a *scan code*, a device-dependent identifier for the key on the keyboard.</span></span> <span data-ttu-id="24da5-138">Una tastiera genera due codici di analisi quando l'utente digita una chiave, una quando l'utente preme il tasto e l'altra quando l'utente rilascia il tasto.</span><span class="sxs-lookup"><span data-stu-id="24da5-138">A keyboard generates two scan codes when the user types a key—one when the user presses the key and another when the user releases the key.</span></span>

<span data-ttu-id="24da5-139">Il driver di dispositivo della tastiera interpreta un codice di analisi e lo converte (ne esegue il mapping) a un *codice di chiave virtuale*, un valore indipendente dal dispositivo definito dal sistema che identifica lo scopo di una chiave.</span><span class="sxs-lookup"><span data-stu-id="24da5-139">The keyboard device driver interprets a scan code and translates (maps) it to a *virtual-key code*, a device-independent value defined by the system that identifies the purpose of a key.</span></span> <span data-ttu-id="24da5-140">Dopo la conversione di un codice di analisi, il layout di tastiera crea un messaggio che include il codice di analisi, il codice della chiave virtuale e altre informazioni sulla sequenza di tasti, quindi inserisce il messaggio nella coda di messaggi di sistema.</span><span class="sxs-lookup"><span data-stu-id="24da5-140">After translating a scan code, the keyboard layout creates a message that includes the scan code, the virtual-key code, and other information about the keystroke, and then places the message in the system message queue.</span></span> <span data-ttu-id="24da5-141">Il sistema rimuove il messaggio dalla coda di messaggi di sistema e lo inserisce nella coda di messaggi del thread appropriato.</span><span class="sxs-lookup"><span data-stu-id="24da5-141">The system removes the message from the system message queue and posts it to the message queue of the appropriate thread.</span></span> <span data-ttu-id="24da5-142">Infine, il ciclo di messaggi del thread rimuove il messaggio e lo passa alla routine della finestra appropriata per l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="24da5-142">Eventually, the thread's message loop removes the message and passes it to the appropriate window procedure for processing.</span></span> <span data-ttu-id="24da5-143">Nella figura seguente viene illustrato il modello di input da tastiera.</span><span class="sxs-lookup"><span data-stu-id="24da5-143">The following figure illustrates the keyboard input model.</span></span>

![modello di elaborazione input da tastiera](images/csinp-01.png)

## <a name="keyboard-focus-and-activation"></a><span data-ttu-id="24da5-145">Messa a fuoco e attivazione della tastiera</span><span class="sxs-lookup"><span data-stu-id="24da5-145">Keyboard Focus and Activation</span></span>

<span data-ttu-id="24da5-146">Il sistema invia i messaggi della tastiera alla coda di messaggi del thread in primo piano che ha creato la finestra con lo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="24da5-146">The system posts keyboard messages to the message queue of the foreground thread that created the window with the keyboard focus.</span></span> <span data-ttu-id="24da5-147">Lo *stato attivo della tastiera* è una proprietà temporanea di una finestra.</span><span class="sxs-lookup"><span data-stu-id="24da5-147">The *keyboard focus* is a temporary property of a window.</span></span> <span data-ttu-id="24da5-148">Il sistema condivide la tastiera tra tutte le finestre sullo schermo spostando lo stato attivo della tastiera, alla direzione dell'utente, da una finestra all'altra.</span><span class="sxs-lookup"><span data-stu-id="24da5-148">The system shares the keyboard among all windows on the display by shifting the keyboard focus, at the user's direction, from one window to another.</span></span> <span data-ttu-id="24da5-149">La finestra con lo stato attivo della tastiera riceve (dalla coda di messaggi del thread che lo ha creato) tutti i messaggi della tastiera fino a quando lo stato attivo non cambia in un'altra finestra.</span><span class="sxs-lookup"><span data-stu-id="24da5-149">The window that has the keyboard focus receives (from the message queue of the thread that created it) all keyboard messages until the focus changes to a different window.</span></span>

<span data-ttu-id="24da5-150">Un thread può chiamare la funzione [**GetFocus**](/windows/win32/api/winuser/nf-winuser-getfocus) per determinare quale delle sue finestre, se presente, dispone attualmente dello stato attivo della tastiera.</span><span class="sxs-lookup"><span data-stu-id="24da5-150">A thread can call the [**GetFocus**](/windows/win32/api/winuser/nf-winuser-getfocus) function to determine which of its windows (if any) currently has the keyboard focus.</span></span> <span data-ttu-id="24da5-151">Un thread può assegnare lo stato attivo alla tastiera a una delle finestre chiamando la funzione [**SetFocus**](/windows/win32/api/winuser/nf-winuser-setfocus) .</span><span class="sxs-lookup"><span data-stu-id="24da5-151">A thread can give the keyboard focus to one of its windows by calling the [**SetFocus**](/windows/win32/api/winuser/nf-winuser-setfocus) function.</span></span> <span data-ttu-id="24da5-152">Quando lo stato attivo passa da una finestra a un'altra, il sistema invia un messaggio [**WM \_ KILLFOCUS**](wm-killfocus.md) alla finestra che ha perso lo stato attivo e quindi Invia un messaggio di [**\_ SetFocus di WM**](wm-setfocus.md) alla finestra che ha ottenuto lo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="24da5-152">When the keyboard focus changes from one window to another, the system sends a [**WM\_KILLFOCUS**](wm-killfocus.md) message to the window that has lost the focus, and then sends a [**WM\_SETFOCUS**](wm-setfocus.md) message to the window that has gained the focus.</span></span>

<span data-ttu-id="24da5-153">Il concetto di stato attivo della tastiera è correlato a quello della finestra attiva.</span><span class="sxs-lookup"><span data-stu-id="24da5-153">The concept of keyboard focus is related to that of the active window.</span></span> <span data-ttu-id="24da5-154">La *finestra attiva* è la finestra di primo livello attualmente utilizzata dall'utente.</span><span class="sxs-lookup"><span data-stu-id="24da5-154">The *active window* is the top-level window the user is currently working with.</span></span> <span data-ttu-id="24da5-155">La finestra con lo stato attivo della tastiera è la finestra attiva o una finestra figlio della finestra attiva.</span><span class="sxs-lookup"><span data-stu-id="24da5-155">The window with the keyboard focus is either the active window, or a child window of the active window.</span></span> <span data-ttu-id="24da5-156">Per consentire all'utente di identificare la finestra attiva, il sistema la inserisce nella parte superiore del z order e ne evidenzia la barra del titolo, se ne è presente uno, e il bordo.</span><span class="sxs-lookup"><span data-stu-id="24da5-156">To help the user identify the active window, the system places it at the top of the Z order and highlights its title bar (if it has one) and border.</span></span>

<span data-ttu-id="24da5-157">Per attivare una finestra di primo livello, è possibile fare clic su di essa, selezionarla utilizzando la combinazione di tasti ALT + TAB o ALT + ESC oppure selezionarla dall'Elenco attività.</span><span class="sxs-lookup"><span data-stu-id="24da5-157">The user can activate a top-level window by clicking it, selecting it using the ALT+TAB or ALT+ESC key combination, or selecting it from the Task List.</span></span> <span data-ttu-id="24da5-158">Un thread può attivare una finestra di primo livello tramite la funzione [**SetActiveWindow**](/windows/win32/api/winuser/nf-winuser-setactivewindow) .</span><span class="sxs-lookup"><span data-stu-id="24da5-158">A thread can activate a top-level window by using the [**SetActiveWindow**](/windows/win32/api/winuser/nf-winuser-setactivewindow) function.</span></span> <span data-ttu-id="24da5-159">Può determinare se una finestra di primo livello creata è attiva tramite la funzione [**GetActiveWindow**](/windows/win32/api/winuser/nf-winuser-getactivewindow) .</span><span class="sxs-lookup"><span data-stu-id="24da5-159">It can determine whether a top-level window it created is active by using the [**GetActiveWindow**](/windows/win32/api/winuser/nf-winuser-getactivewindow) function.</span></span>

<span data-ttu-id="24da5-160">Quando una finestra viene disattivata e un'altra attivata, il sistema invia il messaggio di [**\_ attivazione WM**](wm-activate.md) .</span><span class="sxs-lookup"><span data-stu-id="24da5-160">When one window is deactivated and another activated, the system sends the [**WM\_ACTIVATE**](wm-activate.md) message.</span></span> <span data-ttu-id="24da5-161">La parola più bassa del parametro *wParam* è zero se la finestra viene disattivata e diversa da zero se viene attivata.</span><span class="sxs-lookup"><span data-stu-id="24da5-161">The low-order word of the *wParam* parameter is zero if the window is being deactivated and nonzero if it is being activated.</span></span> <span data-ttu-id="24da5-162">Quando la routine della finestra predefinita riceve il messaggio di **\_ attivazione di WM** , imposta lo stato attivo della tastiera sulla finestra attiva.</span><span class="sxs-lookup"><span data-stu-id="24da5-162">When the default window procedure receives the **WM\_ACTIVATE** message, it sets the keyboard focus to the active window.</span></span>

<span data-ttu-id="24da5-163">Per impedire che gli eventi di input della tastiera e del mouse raggiungano le applicazioni, usare [**BlockInput**](/windows/win32/api/winuser/nf-winuser-blockinput).</span><span class="sxs-lookup"><span data-stu-id="24da5-163">To block keyboard and mouse input events from reaching applications, use [**BlockInput**](/windows/win32/api/winuser/nf-winuser-blockinput).</span></span> <span data-ttu-id="24da5-164">Si noti che la funzione **BlockInput** non interferisce con la tabella di stato di input della tastiera asincrona.</span><span class="sxs-lookup"><span data-stu-id="24da5-164">Note, the **BlockInput** function will not interfere with the asynchronous keyboard input-state table.</span></span> <span data-ttu-id="24da5-165">Ciò significa che la chiamata della funzione [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) mentre l'input è bloccato modificherà la tabella di stato di input della tastiera asincrona.</span><span class="sxs-lookup"><span data-stu-id="24da5-165">This means that calling the [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function while input is blocked will change the asynchronous keyboard input-state table.</span></span>

## <a name="keystroke-messages"></a><span data-ttu-id="24da5-166">Messaggi di tasti</span><span class="sxs-lookup"><span data-stu-id="24da5-166">Keystroke Messages</span></span>

<span data-ttu-id="24da5-167">Premendo un tasto, viene inserito un messaggio [**WM \_ KeyDown**](wm-keydown.md) o [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) nella coda dei messaggi del thread collegata alla finestra con lo stato attivo della tastiera.</span><span class="sxs-lookup"><span data-stu-id="24da5-167">Pressing a key causes a [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message to be placed in the thread message queue attached to the window that has the keyboard focus.</span></span> <span data-ttu-id="24da5-168">Se si rilascia una chiave, un messaggio [**WM \_ KEYUP**](wm-keyup.md) o [**WM \_ SYSKEYUP**](wm-syskeyup.md) verrà inserito nella coda.</span><span class="sxs-lookup"><span data-stu-id="24da5-168">Releasing a key causes a [**WM\_KEYUP**](wm-keyup.md) or [**WM\_SYSKEYUP**](wm-syskeyup.md) message to be placed in the queue.</span></span>

<span data-ttu-id="24da5-169">I messaggi Key-up e Key-Down si verificano in genere nelle coppie, ma se l'utente dispone di una chiave abbastanza lunga per avviare la funzionalità di ripetizione automatica della tastiera, il sistema genera un numero di messaggi [**WM \_ KeyDown**](wm-keydown.md) o [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) in una riga.</span><span class="sxs-lookup"><span data-stu-id="24da5-169">Key-up and key-down messages typically occur in pairs, but if the user holds down a key long enough to start the keyboard's automatic repeat feature, the system generates a number of [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) messages in a row.</span></span> <span data-ttu-id="24da5-170">Genera quindi un singolo messaggio [**WM \_ KEYUP**](wm-keyup.md) o [**WM \_ SYSKEYUP**](wm-syskeyup.md) quando l'utente rilascia la chiave.</span><span class="sxs-lookup"><span data-stu-id="24da5-170">It then generates a single [**WM\_KEYUP**](wm-keyup.md) or [**WM\_SYSKEYUP**](wm-syskeyup.md) message when the user releases the key.</span></span>

<span data-ttu-id="24da5-171">Questa sezione contiene gli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="24da5-171">This section covers the following topics:</span></span>

-   [<span data-ttu-id="24da5-172">Sequenze di tasti di sistema e non di sistema</span><span class="sxs-lookup"><span data-stu-id="24da5-172">System and Nonsystem Keystrokes</span></span>](#system-and-nonsystem-keystrokes)
-   [<span data-ttu-id="24da5-173">Codici di chiave virtuale descritti</span><span class="sxs-lookup"><span data-stu-id="24da5-173">Virtual-Key Codes Described</span></span>](#virtual-key-codes-described)
-   [<span data-ttu-id="24da5-174">Flag messaggi di sequenza di tasti</span><span class="sxs-lookup"><span data-stu-id="24da5-174">Keystroke Message Flags</span></span>](#keystroke-message-flags)

### <a name="system-and-nonsystem-keystrokes"></a><span data-ttu-id="24da5-175">Sequenze di tasti di sistema e non di sistema</span><span class="sxs-lookup"><span data-stu-id="24da5-175">System and Nonsystem Keystrokes</span></span>

<span data-ttu-id="24da5-176">Il sistema distingue tra le sequenze di tasti di sistema e le sequenze di tasti non di sistema.</span><span class="sxs-lookup"><span data-stu-id="24da5-176">The system makes a distinction between system keystrokes and nonsystem keystrokes.</span></span> <span data-ttu-id="24da5-177">Le sequenze di tasti di sistema producono messaggi di tasti di sistema, [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) e [**WM \_ SYSKEYUP**](wm-syskeyup.md).</span><span class="sxs-lookup"><span data-stu-id="24da5-177">System keystrokes produce system keystroke messages, [**WM\_SYSKEYDOWN**](wm-syskeydown.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md).</span></span> <span data-ttu-id="24da5-178">Le sequenze di tasti non di sistema producono messaggi di sequenza di tasti non di sistema, [**WM \_ KeyDown**](wm-keydown.md) e [**WM \_ KEYUP**](wm-keyup.md).</span><span class="sxs-lookup"><span data-stu-id="24da5-178">Nonsystem keystrokes produce nonsystem keystroke messages, [**WM\_KEYDOWN**](wm-keydown.md) and [**WM\_KEYUP**](wm-keyup.md).</span></span>

<span data-ttu-id="24da5-179">Se la routine della finestra deve elaborare un messaggio di sequenza di tasti di sistema, assicurarsi che dopo l'elaborazione del messaggio la routine la passi alla funzione [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) .</span><span class="sxs-lookup"><span data-stu-id="24da5-179">If your window procedure must process a system keystroke message, make sure that after processing the message the procedure passes it to the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function.</span></span> <span data-ttu-id="24da5-180">In caso contrario, tutte le operazioni di sistema che coinvolgono il tasto ALT verranno disabilitate ogni volta che la finestra ha lo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="24da5-180">Otherwise, all system operations involving the ALT key will be disabled whenever the window has the keyboard focus.</span></span> <span data-ttu-id="24da5-181">Ovvero, l'utente non sarà in grado di accedere al menu di sistema o ai menu della finestra oppure utilizzare la combinazione di tasti ALT + ESC o ALT + TAB per attivare un'altra finestra.</span><span class="sxs-lookup"><span data-stu-id="24da5-181">That is, the user won't be able to access the window's menus or System menu, or use the ALT+ESC or ALT+TAB key combination to activate a different window.</span></span>

<span data-ttu-id="24da5-182">I messaggi di tasti di sistema vengono utilizzati principalmente dal sistema anziché da un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="24da5-182">System keystroke messages are primarily for use by the system rather than by an application.</span></span> <span data-ttu-id="24da5-183">Il sistema li usa per fornire l'interfaccia della tastiera predefinita ai menu e per consentire all'utente di controllare quale finestra è attiva.</span><span class="sxs-lookup"><span data-stu-id="24da5-183">The system uses them to provide its built-in keyboard interface to menus and to allow the user to control which window is active.</span></span> <span data-ttu-id="24da5-184">I messaggi di sequenza di tasti di sistema vengono generati quando l'utente digita una chiave in combinazione con il tasto ALT oppure quando l'utente digita e nessuna finestra ha lo stato attivo, ad esempio quando l'applicazione attiva è ridotta a icona.</span><span class="sxs-lookup"><span data-stu-id="24da5-184">System keystroke messages are generated when the user types a key in combination with the ALT key, or when the user types and no window has the keyboard focus (for example, when the active application is minimized).</span></span> <span data-ttu-id="24da5-185">In questo caso, i messaggi vengono inseriti nella coda di messaggi collegata alla finestra attiva.</span><span class="sxs-lookup"><span data-stu-id="24da5-185">In this case, the messages are posted to the message queue attached to the active window.</span></span>

<span data-ttu-id="24da5-186">I messaggi di tasti non di sistema sono utilizzabili dalle finestre delle applicazioni; la funzione [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) non esegue alcuna operazione.</span><span class="sxs-lookup"><span data-stu-id="24da5-186">Nonsystem keystroke messages are for use by application windows; the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function does nothing with them.</span></span> <span data-ttu-id="24da5-187">Una routine della finestra può rimuovere tutti i messaggi di tasto non di sistema che non sono necessari.</span><span class="sxs-lookup"><span data-stu-id="24da5-187">A window procedure can discard any nonsystem keystroke messages that it does not need.</span></span>

### <a name="virtual-key-codes-described"></a><span data-ttu-id="24da5-188">Virtual-Key codici descritti</span><span class="sxs-lookup"><span data-stu-id="24da5-188">Virtual-Key Codes Described</span></span>

<span data-ttu-id="24da5-189">Il parametro **wParam** di un messaggio di sequenza di tasti contiene il codice della chiave virtuale della chiave che è stata premuta o rilasciata.</span><span class="sxs-lookup"><span data-stu-id="24da5-189">The **wParam** parameter of a keystroke message contains the virtual-key code of the key that was pressed or released.</span></span> <span data-ttu-id="24da5-190">Una routine della finestra elabora o Ignora un messaggio di sequenza di tasti, a seconda del valore del codice della chiave virtuale.</span><span class="sxs-lookup"><span data-stu-id="24da5-190">A window procedure processes or ignores a keystroke message, depending on the value of the virtual-key code.</span></span>

<span data-ttu-id="24da5-191">Una routine di finestra tipica elabora solo un piccolo subset dei messaggi di tasti che riceve e ignora il resto.</span><span class="sxs-lookup"><span data-stu-id="24da5-191">A typical window procedure processes only a small subset of the keystroke messages that it receives and ignores the rest.</span></span> <span data-ttu-id="24da5-192">Una routine della finestra, ad esempio, potrebbe elaborare solo i messaggi della sequenza di tasti di [**WM \_ KeyDown**](wm-keydown.md) e solo quelli che contengono codici di chiave virtuale per le chiavi di spostamento del cursore, i tasti MAIUSC (detti anche chiavi di controllo) e i tasti funzione.</span><span class="sxs-lookup"><span data-stu-id="24da5-192">For example, a window procedure might process only [**WM\_KEYDOWN**](wm-keydown.md) keystroke messages, and only those that contain virtual-key codes for the cursor movement keys, shift keys (also called control keys), and function keys.</span></span> <span data-ttu-id="24da5-193">Una normale routine della finestra non elabora i messaggi di sequenza di tasti da chiavi di caratteri.</span><span class="sxs-lookup"><span data-stu-id="24da5-193">A typical window procedure does not process keystroke messages from character keys.</span></span> <span data-ttu-id="24da5-194">USA invece la funzione [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) per convertire il messaggio in messaggi di tipo carattere.</span><span class="sxs-lookup"><span data-stu-id="24da5-194">Instead, it uses the [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function to convert the message into character messages.</span></span> <span data-ttu-id="24da5-195">Per ulteriori informazioni sui messaggi **TranslateMessage** e character, vedere [messaggi](#character-messages)di tipo carattere.</span><span class="sxs-lookup"><span data-stu-id="24da5-195">For more information about **TranslateMessage** and character messages, see [Character Messages](#character-messages).</span></span>

### <a name="keystroke-message-flags"></a><span data-ttu-id="24da5-196">Flag messaggi di sequenza di tasti</span><span class="sxs-lookup"><span data-stu-id="24da5-196">Keystroke Message Flags</span></span>

<span data-ttu-id="24da5-197">Il parametro **lParam** di un messaggio di sequenza di tasti contiene informazioni aggiuntive sulla sequenza di tasti che ha generato il messaggio.</span><span class="sxs-lookup"><span data-stu-id="24da5-197">The **lParam** parameter of a keystroke message contains additional information about the keystroke that generated the message.</span></span> <span data-ttu-id="24da5-198">Queste informazioni includono il numero di ripetizioni, il codice di analisi, il flag di chiave estesa, il codice del contesto, il flag di stato della chiave precedente e il flag di stato di transizione.</span><span class="sxs-lookup"><span data-stu-id="24da5-198">This information includes the repeat count, the scan code, the extended-key flag, the context code, the previous key-state flag, and the transition-state flag.</span></span> <span data-ttu-id="24da5-199">Nella figura seguente vengono illustrati i percorsi di questi flag e valori nel parametro **lParam** .</span><span class="sxs-lookup"><span data-stu-id="24da5-199">The following illustration shows the locations of these flags and values in the **lParam** parameter.</span></span>

![percorsi dei flag e dei valori nel parametro lParam di un messaggio di sequenza di tasti](images/csinp-02.png)

<span data-ttu-id="24da5-201">Un'applicazione può usare i valori seguenti per modificare i flag di sequenza di tasti.</span><span class="sxs-lookup"><span data-stu-id="24da5-201">An application can use the following values to manipulate the keystroke flags.</span></span>



| <span data-ttu-id="24da5-202">Valore</span><span class="sxs-lookup"><span data-stu-id="24da5-202">Value</span></span>            | <span data-ttu-id="24da5-203">Descrizione</span><span class="sxs-lookup"><span data-stu-id="24da5-203">Description</span></span>                                                                       |
|------------------|-----------------------------------------------------------------------------------|
| <span data-ttu-id="24da5-204">**\_ALTDOWN KF**</span><span class="sxs-lookup"><span data-stu-id="24da5-204">**KF\_ALTDOWN**</span></span>  | <span data-ttu-id="24da5-205">Modifica il flag del tasto ALT, che indica se il tasto ALT è premuto.</span><span class="sxs-lookup"><span data-stu-id="24da5-205">Manipulates the ALT key flag, which indicates whether the ALT key is pressed.</span></span>     |
| <span data-ttu-id="24da5-206">**\_DLGMODE KF**</span><span class="sxs-lookup"><span data-stu-id="24da5-206">**KF\_DLGMODE**</span></span>  | <span data-ttu-id="24da5-207">Modifica il flag della modalità della finestra di dialogo, che indica se una finestra di dialogo è attiva.</span><span class="sxs-lookup"><span data-stu-id="24da5-207">Manipulates the dialog mode flag, which indicates whether a dialog box is active.</span></span> |
| <span data-ttu-id="24da5-208">**KF \_ esteso**</span><span class="sxs-lookup"><span data-stu-id="24da5-208">**KF\_EXTENDED**</span></span> | <span data-ttu-id="24da5-209">Modifica il flag di chiave estesa.</span><span class="sxs-lookup"><span data-stu-id="24da5-209">Manipulates the extended key flag.</span></span>                                                |
| <span data-ttu-id="24da5-210">**\_MENUMODE KF**</span><span class="sxs-lookup"><span data-stu-id="24da5-210">**KF\_MENUMODE**</span></span> | <span data-ttu-id="24da5-211">Modifica il flag della modalità menu, che indica se un menu è attivo.</span><span class="sxs-lookup"><span data-stu-id="24da5-211">Manipulates the menu mode flag, which indicates whether a menu is active.</span></span>         |
| <span data-ttu-id="24da5-212">**\_ripetizione KF**</span><span class="sxs-lookup"><span data-stu-id="24da5-212">**KF\_REPEAT**</span></span>   | <span data-ttu-id="24da5-213">Modifica il flag di stato della chiave precedente.</span><span class="sxs-lookup"><span data-stu-id="24da5-213">Manipulates the previous key state flag.</span></span>                                          |
| <span data-ttu-id="24da5-214">**KF \_ attivo**</span><span class="sxs-lookup"><span data-stu-id="24da5-214">**KF\_UP**</span></span>       | <span data-ttu-id="24da5-215">Modifica il flag di stato della transizione.</span><span class="sxs-lookup"><span data-stu-id="24da5-215">Manipulates the transition state flag.</span></span>                                            |



 

### <a name="repeat-count"></a><span data-ttu-id="24da5-216">Ripeti conteggio</span><span class="sxs-lookup"><span data-stu-id="24da5-216">Repeat Count</span></span>

<span data-ttu-id="24da5-217">È possibile controllare il numero di ripetizioni per determinare se un messaggio di sequenza di tasti rappresenta più di una sequenza di tasti.</span><span class="sxs-lookup"><span data-stu-id="24da5-217">You can check the repeat count to determine whether a keystroke message represents more than one keystroke.</span></span> <span data-ttu-id="24da5-218">Il numero viene incrementato quando la tastiera genera messaggi [**WM \_ KeyDown**](wm-keydown.md) o [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) più velocemente di quanto possa essere elaborata da un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="24da5-218">The system increments the count when the keyboard generates [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) messages faster than an application can process them.</span></span> <span data-ttu-id="24da5-219">Questo problema si verifica spesso quando l'utente dispone di una chiave abbastanza lungo per avviare la funzionalità di ripetizione automatica della tastiera.</span><span class="sxs-lookup"><span data-stu-id="24da5-219">This often occurs when the user holds down a key long enough to start the keyboard's automatic repeat feature.</span></span> <span data-ttu-id="24da5-220">Anziché riempire la coda di messaggi di sistema con i messaggi di chiave inattivi risultanti, il sistema combina i messaggi in un singolo messaggio di chiave e incrementa il numero di ripetizioni.</span><span class="sxs-lookup"><span data-stu-id="24da5-220">Instead of filling the system message queue with the resulting key-down messages, the system combines the messages into a single key down message and increments the repeat count.</span></span> <span data-ttu-id="24da5-221">Il rilascio di una chiave non può avviare la funzionalità di ripetizione automatica, quindi il numero di ripetizioni per i messaggi [**WM \_ KEYUP**](wm-keyup.md) e [**WM \_ SYSKEYUP**](wm-syskeyup.md) è sempre impostato su 1.</span><span class="sxs-lookup"><span data-stu-id="24da5-221">Releasing a key cannot start the automatic repeat feature, so the repeat count for [**WM\_KEYUP**](wm-keyup.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md) messages is always set to 1.</span></span>

### <a name="scan-code"></a><span data-ttu-id="24da5-222">Analizza codice</span><span class="sxs-lookup"><span data-stu-id="24da5-222">Scan Code</span></span>

<span data-ttu-id="24da5-223">Il codice di analisi è il valore che l'hardware della tastiera genera quando l'utente preme un tasto.</span><span class="sxs-lookup"><span data-stu-id="24da5-223">The scan code is the value that the keyboard hardware generates when the user presses a key.</span></span> <span data-ttu-id="24da5-224">Si tratta di un valore dipendente dal dispositivo che identifica il tasto premuto anziché il carattere rappresentato dalla chiave.</span><span class="sxs-lookup"><span data-stu-id="24da5-224">It is a device-dependent value that identifies the key pressed, as opposed to the character represented by the key.</span></span> <span data-ttu-id="24da5-225">Un'applicazione ignora in genere i codici di analisi.</span><span class="sxs-lookup"><span data-stu-id="24da5-225">An application typically ignores scan codes.</span></span> <span data-ttu-id="24da5-226">USA invece i codici a chiave virtuale indipendenti dal dispositivo per interpretare i messaggi di sequenza di tasti.</span><span class="sxs-lookup"><span data-stu-id="24da5-226">Instead, it uses the device-independent virtual-key codes to interpret keystroke messages.</span></span>

### <a name="extended-key-flag"></a><span data-ttu-id="24da5-227">Flag di Extended-Key</span><span class="sxs-lookup"><span data-stu-id="24da5-227">Extended-Key Flag</span></span>

<span data-ttu-id="24da5-228">Il flag Extended-Key indica se il messaggio di sequenza di tasti ha avuto origine da uno dei tasti aggiuntivi della tastiera avanzata.</span><span class="sxs-lookup"><span data-stu-id="24da5-228">The extended-key flag indicates whether the keystroke message originated from one of the additional keys on the enhanced keyboard.</span></span> <span data-ttu-id="24da5-229">Le chiavi estese sono costituite dai tasti ALT e CTRL sul lato destro della tastiera; i tasti INS, CANC, HOME, END, PGSU, PGGIÙ e frecce nei cluster a sinistra del tastierino numerico; tasto BLOC NUM; tasto di interruzione (CTRL + pausa); chiave Stamp di stampa. e la divisione (/) e immettere le chiavi nel tastierino numerico.</span><span class="sxs-lookup"><span data-stu-id="24da5-229">The extended keys consist of the ALT and CTRL keys on the right-hand side of the keyboard; the INS, DEL, HOME, END, PAGE UP, PAGE DOWN, and arrow keys in the clusters to the left of the numeric keypad; the NUM LOCK key; the BREAK (CTRL+PAUSE) key; the PRINT SCRN key; and the divide (/) and ENTER keys in the numeric keypad.</span></span> <span data-ttu-id="24da5-230">Il flag di chiave estesa viene impostato se la chiave è una chiave estesa.</span><span class="sxs-lookup"><span data-stu-id="24da5-230">The extended-key flag is set if the key is an extended key.</span></span>

### <a name="context-code"></a><span data-ttu-id="24da5-231">Codice contesto</span><span class="sxs-lookup"><span data-stu-id="24da5-231">Context Code</span></span>

<span data-ttu-id="24da5-232">Il codice di contesto indica se il tasto ALT è inattivo quando è stato generato il messaggio di sequenza di tasti.</span><span class="sxs-lookup"><span data-stu-id="24da5-232">The context code indicates whether the ALT key was down when the keystroke message was generated.</span></span> <span data-ttu-id="24da5-233">Il codice è 1 se il tasto ALT è premuto e 0 se è stato attivo.</span><span class="sxs-lookup"><span data-stu-id="24da5-233">The code is 1 if the ALT key was down and 0 if it was up.</span></span>

### <a name="previous-key-state-flag"></a><span data-ttu-id="24da5-234">Flag di Key-State precedente</span><span class="sxs-lookup"><span data-stu-id="24da5-234">Previous Key-State Flag</span></span>

<span data-ttu-id="24da5-235">Il flag di stato di chiave precedente indica se la chiave che ha generato il messaggio di sequenza di tasti era in precedenza in alto o in basso.</span><span class="sxs-lookup"><span data-stu-id="24da5-235">The previous key-state flag indicates whether the key that generated the keystroke message was previously up or down.</span></span> <span data-ttu-id="24da5-236">È 1 se la chiave si trovava in precedenza e 0 se la chiave era in precedenza attiva.</span><span class="sxs-lookup"><span data-stu-id="24da5-236">It is 1 if the key was previously down and 0 if the key was previously up.</span></span> <span data-ttu-id="24da5-237">È possibile utilizzare questo flag per identificare i messaggi di sequenza di tasti generati dalla funzionalità di ripetizione automatica della tastiera.</span><span class="sxs-lookup"><span data-stu-id="24da5-237">You can use this flag to identify keystroke messages generated by the keyboard's automatic repeat feature.</span></span> <span data-ttu-id="24da5-238">Questo flag è impostato su 1 per i messaggi di sequenza di tasti [**WM \_ KeyDown**](wm-keydown.md) e [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) generati dalla funzionalità di ripetizione automatica.</span><span class="sxs-lookup"><span data-stu-id="24da5-238">This flag is set to 1 for [**WM\_KEYDOWN**](wm-keydown.md) and [**WM\_SYSKEYDOWN**](wm-syskeydown.md) keystroke messages generated by the automatic repeat feature.</span></span> <span data-ttu-id="24da5-239">È sempre impostato su 1 per i messaggi [**WM \_ KEYUP**](wm-keyup.md) e [**WM \_ SYSKEYUP**](wm-syskeyup.md) .</span><span class="sxs-lookup"><span data-stu-id="24da5-239">It is always set to 1 for [**WM\_KEYUP**](wm-keyup.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md) messages.</span></span>

### <a name="transition-state-flag"></a><span data-ttu-id="24da5-240">Flag di Transition-State</span><span class="sxs-lookup"><span data-stu-id="24da5-240">Transition-State Flag</span></span>

<span data-ttu-id="24da5-241">Il flag di stato di transizione indica se la pressione di un tasto o il rilascio di una chiave ha generato il messaggio di sequenza di tasti.</span><span class="sxs-lookup"><span data-stu-id="24da5-241">The transition-state flag indicates whether pressing a key or releasing a key generated the keystroke message.</span></span> <span data-ttu-id="24da5-242">Questo flag è sempre impostato su 0 per i messaggi [**WM \_ KeyDown**](wm-keydown.md) e [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) . è sempre impostato su 1 per i messaggi [**WM \_ KEYUP**](wm-keyup.md) e [**WM \_ SYSKEYUP**](wm-syskeyup.md) .</span><span class="sxs-lookup"><span data-stu-id="24da5-242">This flag is always set to 0 for [**WM\_KEYDOWN**](wm-keydown.md) and [**WM\_SYSKEYDOWN**](wm-syskeydown.md) messages; it is always set to 1 for [**WM\_KEYUP**](wm-keyup.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md) messages.</span></span>

## <a name="character-messages"></a><span data-ttu-id="24da5-243">Messaggi di tipo carattere</span><span class="sxs-lookup"><span data-stu-id="24da5-243">Character Messages</span></span>

<span data-ttu-id="24da5-244">I messaggi di tastiera forniscono numerose informazioni sulle sequenze di tasti, ma non forniscono codici carattere per le sequenze di tasti carattere.</span><span class="sxs-lookup"><span data-stu-id="24da5-244">Keystroke messages provide a lot of information about keystrokes, but they do not provide character codes for character keystrokes.</span></span> <span data-ttu-id="24da5-245">Per recuperare i codici carattere, un'applicazione deve includere la funzione [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) nel ciclo di messaggi del thread.</span><span class="sxs-lookup"><span data-stu-id="24da5-245">To retrieve character codes, an application must include the [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function in its thread message loop.</span></span> <span data-ttu-id="24da5-246">**TranslateMessage** passa un messaggio [**WM \_ KeyDown**](wm-keydown.md) o [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) al layout della tastiera.</span><span class="sxs-lookup"><span data-stu-id="24da5-246">**TranslateMessage** passes a [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message to the keyboard layout.</span></span> <span data-ttu-id="24da5-247">Il layout esamina il codice della chiave virtuale del messaggio e, se corrisponde a un tasto carattere, fornisce il codice carattere equivalente (tenendo conto dello stato dei tasti MAIUSC e CAPS LOCK).</span><span class="sxs-lookup"><span data-stu-id="24da5-247">The layout examines the message's virtual-key code and, if it corresponds to a character key, provides the character code equivalent (taking into account the state of the SHIFT and CAPS LOCK keys).</span></span> <span data-ttu-id="24da5-248">Genera quindi un messaggio di tipo carattere che include il codice carattere e inserisce il messaggio nella parte superiore della coda di messaggi.</span><span class="sxs-lookup"><span data-stu-id="24da5-248">It then generates a character message that includes the character code and places the message at the top of the message queue.</span></span> <span data-ttu-id="24da5-249">L'iterazione successiva del ciclo di messaggi rimuove il messaggio di carattere dalla coda e invia il messaggio alla routine della finestra appropriata.</span><span class="sxs-lookup"><span data-stu-id="24da5-249">The next iteration of the message loop removes the character message from the queue and dispatches the message to the appropriate window procedure.</span></span>

<span data-ttu-id="24da5-250">Questa sezione contiene gli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="24da5-250">This section covers the following topics:</span></span>

-   [<span data-ttu-id="24da5-251">Messaggi di tipo carattere non di sistema</span><span class="sxs-lookup"><span data-stu-id="24da5-251">Nonsystem Character Messages</span></span>](#nonsystem-character-messages)
-   [<span data-ttu-id="24da5-252">Messaggi di tipo carattere non recapitabili</span><span class="sxs-lookup"><span data-stu-id="24da5-252">Dead-Character Messages</span></span>](#dead-character-messages)

### <a name="nonsystem-character-messages"></a><span data-ttu-id="24da5-253">Messaggi di tipo carattere non di sistema</span><span class="sxs-lookup"><span data-stu-id="24da5-253">Nonsystem Character Messages</span></span>

<span data-ttu-id="24da5-254">Una procedura finestra può ricevere i seguenti messaggi di tipo carattere: [**WM \_ char**](wm-char.md), [**WM \_ DEADCHAR**](wm-deadchar.md), [**WM \_ SYSCHAR**](/windows/desktop/menurc/wm-syschar), [**WM \_ SYSDEADCHAR**](wm-sysdeadchar.md)e [**WM \_ UNICHAR**](wm-unichar.md).</span><span class="sxs-lookup"><span data-stu-id="24da5-254">A window procedure can receive the following character messages: [**WM\_CHAR**](wm-char.md), [**WM\_DEADCHAR**](wm-deadchar.md), [**WM\_SYSCHAR**](/windows/desktop/menurc/wm-syschar), [**WM\_SYSDEADCHAR**](wm-sysdeadchar.md), and [**WM\_UNICHAR**](wm-unichar.md).</span></span> <span data-ttu-id="24da5-255">La funzione [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) genera un messaggio **WM \_ char** o **WM \_ DEADCHAR** quando elabora un messaggio di [**WM \_ KeyDown**](wm-keydown.md) .</span><span class="sxs-lookup"><span data-stu-id="24da5-255">The [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function generates a **WM\_CHAR** or **WM\_DEADCHAR** message when it processes a [**WM\_KEYDOWN**](wm-keydown.md) message.</span></span> <span data-ttu-id="24da5-256">Analogamente, genera un messaggio **WM \_ SYSCHAR** o **WM \_ SYSDEADCHAR** quando elabora un messaggio [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) .</span><span class="sxs-lookup"><span data-stu-id="24da5-256">Similarly, it generates a **WM\_SYSCHAR** or **WM\_SYSDEADCHAR** message when it processes a [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message.</span></span>

<span data-ttu-id="24da5-257">Un'applicazione che elabora l'input da tastiera Ignora in genere tutti i messaggi a eccezione di [**WM \_ char**](wm-char.md) e [**WM \_ UNICHAR**](wm-unichar.md) , passando altri messaggi alla funzione [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) .</span><span class="sxs-lookup"><span data-stu-id="24da5-257">An application that processes keyboard input typically ignores all but the [**WM\_CHAR**](wm-char.md) and [**WM\_UNICHAR**](wm-unichar.md) messages, passing any other messages to the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function.</span></span> <span data-ttu-id="24da5-258">Si noti che **WM \_ char** usa UTF (Unicode Transformation Format) a 16 bit mentre **WM \_ unichar** usa UTF-32.</span><span class="sxs-lookup"><span data-stu-id="24da5-258">Note that **WM\_CHAR** uses 16-bit Unicode Transformation Format (UTF) while **WM\_UNICHAR** uses UTF-32.</span></span> <span data-ttu-id="24da5-259">Il sistema usa i messaggi [**WM \_ SYSCHAR**](/windows/desktop/menurc/wm-syschar) e [**WM \_ SYSDEADCHAR**](wm-sysdeadchar.md) per implementare i tasti di scelta del menu.</span><span class="sxs-lookup"><span data-stu-id="24da5-259">The system uses the [**WM\_SYSCHAR**](/windows/desktop/menurc/wm-syschar) and [**WM\_SYSDEADCHAR**](wm-sysdeadchar.md) messages to implement menu mnemonics.</span></span>

<span data-ttu-id="24da5-260">Il parametro **wParam** di tutti i messaggi di tipo carattere contiene il codice carattere del tasto carattere premuto.</span><span class="sxs-lookup"><span data-stu-id="24da5-260">The **wParam** parameter of all character messages contains the character code of the character key that was pressed.</span></span> <span data-ttu-id="24da5-261">Il valore del codice carattere dipende dalla classe della finestra della finestra che riceve il messaggio.</span><span class="sxs-lookup"><span data-stu-id="24da5-261">The value of the character code depends on the window class of the window receiving the message.</span></span> <span data-ttu-id="24da5-262">Se la versione Unicode della funzione [**registerClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) è stata usata per registrare la classe della finestra, il sistema fornisce caratteri Unicode a tutte le finestre di tale classe.</span><span class="sxs-lookup"><span data-stu-id="24da5-262">If the Unicode version of the [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) function was used to register the window class, the system provides Unicode characters to all windows of that class.</span></span> <span data-ttu-id="24da5-263">In caso contrario, il sistema fornisce codici carattere ASCII.</span><span class="sxs-lookup"><span data-stu-id="24da5-263">Otherwise, the system provides ASCII character codes.</span></span> <span data-ttu-id="24da5-264">Per ulteriori informazioni, vedere [Unicode e set di caratteri](/windows/desktop/Intl/unicode-and-character-sets).</span><span class="sxs-lookup"><span data-stu-id="24da5-264">For more information, see [Unicode and Character Sets](/windows/desktop/Intl/unicode-and-character-sets).</span></span>

<span data-ttu-id="24da5-265">Il contenuto del parametro **lParam** di un messaggio di tipo carattere è identico al contenuto del parametro **lParam** del messaggio di chiave inattivo tradotto per produrre il messaggio del carattere.</span><span class="sxs-lookup"><span data-stu-id="24da5-265">The contents of the **lParam** parameter of a character message are identical to the contents of the **lParam** parameter of the key-down message that was translated to produce the character message.</span></span> <span data-ttu-id="24da5-266">Per informazioni, vedere [flag dei messaggi di sequenza di tasti](#keystroke-message-flags).</span><span class="sxs-lookup"><span data-stu-id="24da5-266">For information, see [Keystroke Message Flags](#keystroke-message-flags).</span></span>

### <a name="dead-character-messages"></a><span data-ttu-id="24da5-267">Messaggi di Dead-Character</span><span class="sxs-lookup"><span data-stu-id="24da5-267">Dead-Character Messages</span></span>

<span data-ttu-id="24da5-268">Alcune tastiere non in lingua inglese contengono tasti di tipo carattere che non dovrebbero produrre caratteri da soli.</span><span class="sxs-lookup"><span data-stu-id="24da5-268">Some non-English keyboards contain character keys that are not expected to produce characters by themselves.</span></span> <span data-ttu-id="24da5-269">Vengono invece utilizzati per aggiungere segni diacritici al carattere prodotto dalla sequenza di tasti successiva.</span><span class="sxs-lookup"><span data-stu-id="24da5-269">Instead, they are used to add a diacritic to the character produced by the subsequent keystroke.</span></span> <span data-ttu-id="24da5-270">Queste chiavi sono denominate *chiavi* inutilizzate.</span><span class="sxs-lookup"><span data-stu-id="24da5-270">These keys are called *dead keys*.</span></span> <span data-ttu-id="24da5-271">Il tasto circonflesso in una tastiera tedesca è un esempio di chiave non attiva.</span><span class="sxs-lookup"><span data-stu-id="24da5-271">The circumflex key on a German keyboard is an example of a dead key.</span></span> <span data-ttu-id="24da5-272">Per immettere il carattere costituito da una "o" con un accento circonflesso, un utente tedesco digita la chiave circonflesso seguita dalla chiave "o".</span><span class="sxs-lookup"><span data-stu-id="24da5-272">To enter the character consisting of an "o" with a circumflex, a German user would type the circumflex key followed by the "o" key.</span></span> <span data-ttu-id="24da5-273">La finestra con lo stato attivo della tastiera riceve la seguente sequenza di messaggi:</span><span class="sxs-lookup"><span data-stu-id="24da5-273">The window with the keyboard focus would receive the following sequence of messages:</span></span>

1.  [<span data-ttu-id="24da5-274">**KeyDown di WM \_**</span><span class="sxs-lookup"><span data-stu-id="24da5-274">**WM\_KEYDOWN**</span></span>](wm-keydown.md)
2.  [<span data-ttu-id="24da5-275">**\_DEADCHAR WM**</span><span class="sxs-lookup"><span data-stu-id="24da5-275">**WM\_DEADCHAR**</span></span>](wm-deadchar.md)
3.  [<span data-ttu-id="24da5-276">**KEYUP di WM \_**</span><span class="sxs-lookup"><span data-stu-id="24da5-276">**WM\_KEYUP**</span></span>](wm-keyup.md)
4.  [<span data-ttu-id="24da5-277">**KeyDown di WM \_**</span><span class="sxs-lookup"><span data-stu-id="24da5-277">**WM\_KEYDOWN**</span></span>](wm-keydown.md)
5.  [<span data-ttu-id="24da5-278">**\_carattere WM**</span><span class="sxs-lookup"><span data-stu-id="24da5-278">**WM\_CHAR**</span></span>](wm-char.md)
6.  [<span data-ttu-id="24da5-279">**KEYUP di WM \_**</span><span class="sxs-lookup"><span data-stu-id="24da5-279">**WM\_KEYUP**</span></span>](wm-keyup.md)

<span data-ttu-id="24da5-280">[**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) genera il messaggio [**WM \_ DEADCHAR**](wm-deadchar.md) quando elabora il messaggio di [**WM \_ KeyDown**](wm-keydown.md) da una chiave non recapitabile.</span><span class="sxs-lookup"><span data-stu-id="24da5-280">[**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) generates the [**WM\_DEADCHAR**](wm-deadchar.md) message when it processes the [**WM\_KEYDOWN**](wm-keydown.md) message from a dead key.</span></span> <span data-ttu-id="24da5-281">Anche se il parametro *wParam* del messaggio **WM \_ DEADCHAR** contiene il codice carattere dei segni diacritici per la chiave non recapitabile, un'applicazione in genere ignora il messaggio.</span><span class="sxs-lookup"><span data-stu-id="24da5-281">Although the *wParam* parameter of the **WM\_DEADCHAR** message contains the character code of the diacritic for the dead key, an application typically ignores the message.</span></span> <span data-ttu-id="24da5-282">Al contrario, elabora il messaggio [**WM \_ char**](wm-char.md) generato dalla sequenza di tasti successiva.</span><span class="sxs-lookup"><span data-stu-id="24da5-282">Instead, it processes the [**WM\_CHAR**](wm-char.md) message generated by the subsequent keystroke.</span></span> <span data-ttu-id="24da5-283">Il parametro *wParam* del messaggio **WM \_ char** contiene il codice carattere della lettera con i segni diacritici.</span><span class="sxs-lookup"><span data-stu-id="24da5-283">The *wParam* parameter of the **WM\_CHAR** message contains the character code of the letter with the diacritic.</span></span> <span data-ttu-id="24da5-284">Se la sequenza di tasti successiva genera un carattere che non può essere combinato con un segno diacritici, il sistema genera due messaggi **WM \_ char** .</span><span class="sxs-lookup"><span data-stu-id="24da5-284">If the subsequent keystroke generates a character that cannot be combined with a diacritic, the system generates two **WM\_CHAR** messages.</span></span> <span data-ttu-id="24da5-285">Il parametro *wParam* del primo contiene il codice carattere dei segni diacritici; il parametro *wParam* della seconda contiene il codice carattere della chiave del carattere successiva.</span><span class="sxs-lookup"><span data-stu-id="24da5-285">The *wParam* parameter of the first contains the character code of the diacritic; the *wParam* parameter of the second contains the character code of the subsequent character key.</span></span>

<span data-ttu-id="24da5-286">La funzione [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) genera il messaggio [**WM \_ SYSDEADCHAR**](wm-sysdeadchar.md) quando elabora il messaggio [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) da una chiave non elaborata del sistema, ovvero una chiave inattiva che viene premuta in combinazione con il tasto ALT.</span><span class="sxs-lookup"><span data-stu-id="24da5-286">The [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function generates the [**WM\_SYSDEADCHAR**](wm-sysdeadchar.md) message when it processes the [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message from a system dead key (a dead key that is pressed in combination with the ALT key).</span></span> <span data-ttu-id="24da5-287">Un'applicazione in genere ignora il messaggio **WM \_ SYSDEADCHAR** .</span><span class="sxs-lookup"><span data-stu-id="24da5-287">An application typically ignores the **WM\_SYSDEADCHAR** message.</span></span>

## <a name="key-status"></a><span data-ttu-id="24da5-288">Stato chiave</span><span class="sxs-lookup"><span data-stu-id="24da5-288">Key Status</span></span>

<span data-ttu-id="24da5-289">Durante l'elaborazione di un messaggio della tastiera, è possibile che un'applicazione debba determinare lo stato di un'altra chiave oltre a quella che ha generato il messaggio corrente.</span><span class="sxs-lookup"><span data-stu-id="24da5-289">While processing a keyboard message, an application may need to determine the status of another key besides the one that generated the current message.</span></span> <span data-ttu-id="24da5-290">Ad esempio, un'applicazione di elaborazione di testo che consente all'utente di premere MAIUSC + fine per selezionare un blocco di testo deve controllare lo stato del tasto MAIUSC ogni volta che viene ricevuto un messaggio di sequenza di tasti dal tasto fine.</span><span class="sxs-lookup"><span data-stu-id="24da5-290">For example, a word-processing application that allows the user to press SHIFT+END to select a block of text must check the status of the SHIFT key whenever it receives a keystroke message from the END key.</span></span> <span data-ttu-id="24da5-291">L'applicazione può utilizzare la funzione [**GetKeyState**](/windows/win32/api/winuser/nf-winuser-getkeystate) per determinare lo stato di una chiave virtuale nel momento in cui è stato generato il messaggio corrente. può usare la funzione [**GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) per recuperare lo stato corrente di una chiave virtuale.</span><span class="sxs-lookup"><span data-stu-id="24da5-291">The application can use the [**GetKeyState**](/windows/win32/api/winuser/nf-winuser-getkeystate) function to determine the status of a virtual key at the time the current message was generated; it can use the [**GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) function to retrieve the current status of a virtual key.</span></span>

<span data-ttu-id="24da5-292">Il layout della tastiera mantiene un elenco di nomi.</span><span class="sxs-lookup"><span data-stu-id="24da5-292">The keyboard layout maintains a list of names.</span></span> <span data-ttu-id="24da5-293">Il nome di una chiave che produce un singolo carattere corrisponde al carattere prodotto dalla chiave.</span><span class="sxs-lookup"><span data-stu-id="24da5-293">The name of a key that produces a single character is the same as the character produced by the key.</span></span> <span data-ttu-id="24da5-294">Il nome di un tasto non carattere, ad esempio TAB e invio, viene archiviato come stringa di caratteri.</span><span class="sxs-lookup"><span data-stu-id="24da5-294">The name of a noncharacter key such as TAB and ENTER is stored as a character string.</span></span> <span data-ttu-id="24da5-295">Un'applicazione può recuperare il nome di qualsiasi chiave dal driver di dispositivo chiamando la funzione [**GetKeyNameText**](/windows/win32/api/winuser/nf-winuser-getkeynametexta) .</span><span class="sxs-lookup"><span data-stu-id="24da5-295">An application can retrieve the name of any key from the device driver by calling the [**GetKeyNameText**](/windows/win32/api/winuser/nf-winuser-getkeynametexta) function.</span></span>

## <a name="keystroke-and-character-translations"></a><span data-ttu-id="24da5-296">Traslazione di tasti e caratteri</span><span class="sxs-lookup"><span data-stu-id="24da5-296">Keystroke and Character Translations</span></span>

<span data-ttu-id="24da5-297">Il sistema include diverse funzioni per scopi specifici che convertono i codici di analisi, i codici di caratteri e i codici chiave virtuale forniti da vari messaggi di tasti.</span><span class="sxs-lookup"><span data-stu-id="24da5-297">The system includes several special purpose functions that translate scan codes, character codes, and virtual-key codes provided by various keystroke messages.</span></span> <span data-ttu-id="24da5-298">Queste funzioni includono [**MapVirtualKey**](/windows/win32/api/winuser/nf-winuser-mapvirtualkeya), [**toascii**](/windows/win32/api/winuser/nf-winuser-toascii), [**tounicode**](/windows/win32/api/winuser/nf-winuser-tounicode)e [**VkKeyScan**](/windows/win32/api/winuser/nf-winuser-vkkeyscana).</span><span class="sxs-lookup"><span data-stu-id="24da5-298">These functions include [**MapVirtualKey**](/windows/win32/api/winuser/nf-winuser-mapvirtualkeya), [**ToAscii**](/windows/win32/api/winuser/nf-winuser-toascii), [**ToUnicode**](/windows/win32/api/winuser/nf-winuser-tounicode), and [**VkKeyScan**](/windows/win32/api/winuser/nf-winuser-vkkeyscana).</span></span>

<span data-ttu-id="24da5-299">Microsoft Rich Edit 3,0 supporta inoltre l' [IME HexToUnicode](/windows/desktop/Intl/hextounicode-ime), che consente a un utente di eseguire la conversione tra caratteri esadecimali e Unicode usando i tasti di scelta rapida.</span><span class="sxs-lookup"><span data-stu-id="24da5-299">In addition, Microsoft Rich Edit 3.0 supports the [HexToUnicode IME](/windows/desktop/Intl/hextounicode-ime), which allows a user to convert between hexadecimal and Unicode characters by using hot keys.</span></span> <span data-ttu-id="24da5-300">Ciò significa che quando Microsoft Rich Edit 3,0 viene incorporato in un'applicazione, l'applicazione erediterà le funzionalità di HexToUnicode IME.</span><span class="sxs-lookup"><span data-stu-id="24da5-300">This means that when Microsoft Rich Edit 3.0 is incorporated into an application, the application will inherit the features of the HexToUnicode IME.</span></span>

## <a name="hot-key-support"></a><span data-ttu-id="24da5-301">Supporto Hot-Key</span><span class="sxs-lookup"><span data-stu-id="24da5-301">Hot-Key Support</span></span>

<span data-ttu-id="24da5-302">Un *tasto di scelta* è una combinazione di tasti che genera un messaggio di [**\_ scelta rapida WM**](wm-hotkey.md) , un messaggio che il sistema posiziona nella parte superiore della coda di messaggi di un thread, ignorando tutti i messaggi esistenti nella coda.</span><span class="sxs-lookup"><span data-stu-id="24da5-302">A *hot key* is a key combination that generates a [**WM\_HOTKEY**](wm-hotkey.md) message, a message the system places at the top of a thread's message queue, bypassing any existing messages in the queue.</span></span> <span data-ttu-id="24da5-303">Le applicazioni utilizzano tasti di scelta rapida per ottenere input da tastiera ad alta priorità da parte dell'utente.</span><span class="sxs-lookup"><span data-stu-id="24da5-303">Applications use hot keys to obtain high-priority keyboard input from the user.</span></span> <span data-ttu-id="24da5-304">Ad esempio, definendo un tasto di scelta costituito dalla combinazione di tasti CTRL + C, un'applicazione può consentire all'utente di annullare un'operazione di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="24da5-304">For example, by defining a hot key consisting of the CTRL+C key combination, an application can allow the user to cancel a lengthy operation.</span></span>

<span data-ttu-id="24da5-305">Per definire un tasto di scelta, un'applicazione chiama la funzione [**RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey) , specificando la combinazione di chiavi che genera il messaggio di [**\_ scelta rapida WM**](wm-hotkey.md) , l'handle della finestra per ricevere il messaggio e l'identificatore del tasto di scelta.</span><span class="sxs-lookup"><span data-stu-id="24da5-305">To define a hot key, an application calls the [**RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey) function, specifying the combination of keys that generates the [**WM\_HOTKEY**](wm-hotkey.md) message, the handle to the window to receive the message, and the identifier of the hot key.</span></span> <span data-ttu-id="24da5-306">Quando l'utente preme il tasto di scelta, un messaggio di **\_ scelta rapida WM** viene inserito nella coda di messaggi del thread che ha creato la finestra.</span><span class="sxs-lookup"><span data-stu-id="24da5-306">When the user presses the hot key, a **WM\_HOTKEY** message is placed in the message queue of the thread that created the window.</span></span> <span data-ttu-id="24da5-307">Il parametro *wParam* del messaggio contiene l'identificatore del tasto di scelta.</span><span class="sxs-lookup"><span data-stu-id="24da5-307">The *wParam* parameter of the message contains the identifier of the hot key.</span></span> <span data-ttu-id="24da5-308">L'applicazione può definire più tasti di scelta rapida per un thread, ma ogni tasto di scelta nel thread deve avere un identificatore univoco.</span><span class="sxs-lookup"><span data-stu-id="24da5-308">The application can define multiple hot keys for a thread, but each hot key in the thread must have a unique identifier.</span></span> <span data-ttu-id="24da5-309">Prima di terminare l'applicazione, è necessario utilizzare la funzione [**UnregisterHotKey**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey) per eliminare il tasto di scelta.</span><span class="sxs-lookup"><span data-stu-id="24da5-309">Before the application terminates, it should use the [**UnregisterHotKey**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey) function to destroy the hot key.</span></span>

<span data-ttu-id="24da5-310">Le applicazioni possono utilizzare un controllo tasto di scelta rapida per facilitare la scelta di un tasto di scelta rapida da parte dell'utente.</span><span class="sxs-lookup"><span data-stu-id="24da5-310">Applications can use a hot key control to make it easy for the user to choose a hot key.</span></span> <span data-ttu-id="24da5-311">I controlli tasto di scelta vengono in genere utilizzati per definire un tasto di scelta rapida che attiva una finestra; non usano le funzioni [**RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey) e [**UnregisterHotKey**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey) .</span><span class="sxs-lookup"><span data-stu-id="24da5-311">Hot key controls are typically used to define a hot key that activates a window; they do not use the [**RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey) and [**UnregisterHotKey**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey) functions.</span></span> <span data-ttu-id="24da5-312">Al contrario, un'applicazione che utilizza un controllo tasto di scelta in genere invia il messaggio di errore WM per impostare il tasto di scelta. [**\_**](wm-sethotkey.md)</span><span class="sxs-lookup"><span data-stu-id="24da5-312">Instead, an application that uses a hot key control typically sends the [**WM\_SETHOTKEY**](wm-sethotkey.md) message to set the hot key.</span></span> <span data-ttu-id="24da5-313">Ogni volta che l'utente preme il tasto di scelta, il sistema invia un messaggio [**WM \_ SYSCOMMAND**](/windows/desktop/menurc/wm-syscommand) che specifica il tasto di \_ scelta rapida SC.</span><span class="sxs-lookup"><span data-stu-id="24da5-313">Whenever the user presses the hot key, the system sends a [**WM\_SYSCOMMAND**](/windows/desktop/menurc/wm-syscommand) message specifying SC\_HOTKEY.</span></span> <span data-ttu-id="24da5-314">Per ulteriori informazioni sui controlli tasto di scelta, vedere l'argomento relativo all'utilizzo dei controlli chiave attiva in [controlli chiave](../controls/hot-key-controls.md)attiva.</span><span class="sxs-lookup"><span data-stu-id="24da5-314">For more information about hot key controls, see "Using Hot Key Controls" in [Hot Key Controls](../controls/hot-key-controls.md).</span></span>

## <a name="keyboard-keys-for-browsing-and-other-functions"></a><span data-ttu-id="24da5-315">Tasti di scelta rapida per l'esplorazione e altre funzioni</span><span class="sxs-lookup"><span data-stu-id="24da5-315">Keyboard Keys for Browsing and Other Functions</span></span>

<span data-ttu-id="24da5-316">Windows fornisce il supporto per le tastiere con chiavi speciali per funzioni del browser, funzioni multimediali, avvio delle applicazioni e risparmio energia.</span><span class="sxs-lookup"><span data-stu-id="24da5-316">Windows provides support for keyboards with special keys for browser functions, media functions, application launching, and power management.</span></span> <span data-ttu-id="24da5-317">Il [**\_ APPCOMMAND di WM**](wm-appcommand.md) supporta i tasti di scelta rapida aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="24da5-317">The [**WM\_APPCOMMAND**](wm-appcommand.md) supports the extra keyboard keys.</span></span> <span data-ttu-id="24da5-318">Inoltre, la funzione [**ShellProc**](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) viene modificata per supportare i tasti di scelta rapida aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="24da5-318">In addition, the [**ShellProc**](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) function is modified to support the extra keyboard keys.</span></span>

<span data-ttu-id="24da5-319">È improbabile che una finestra figlio in un'applicazione componente possa implementare direttamente i comandi per questi tasti di tastiera aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="24da5-319">It is unlikely that a child window in a component application will be able to directly implement commands for these extra keyboard keys.</span></span> <span data-ttu-id="24da5-320">Quindi, quando viene premuto uno di questi tasti, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) invierà un messaggio [**WM \_ APPCOMMAND**](wm-appcommand.md) a una finestra.</span><span class="sxs-lookup"><span data-stu-id="24da5-320">So when one of these keys is pressed, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) will send a [**WM\_APPCOMMAND**](wm-appcommand.md) message to a window.</span></span> <span data-ttu-id="24da5-321">**DefWindowProc** creerà anche il messaggio **WM \_ APPCOMMAND** nella finestra padre.</span><span class="sxs-lookup"><span data-stu-id="24da5-321">**DefWindowProc** will also bubble the **WM\_APPCOMMAND** message to its parent window.</span></span> <span data-ttu-id="24da5-322">Questa operazione è simile al modo in cui i menu di scelta rapida vengono richiamati con il pulsante destro del mouse, ovvero **DefWindowProc** Invia un messaggio [**WM \_ ContextMenu**](/windows/desktop/menurc/wm-contextmenu) al pulsante destro del mouse e lo bolle nell'elemento padre.</span><span class="sxs-lookup"><span data-stu-id="24da5-322">This is similar to the way context menus are invoked with the right mouse button, which is that **DefWindowProc** sends a [**WM\_CONTEXTMENU**](/windows/desktop/menurc/wm-contextmenu) message on a right button click, and bubbles it to its parent.</span></span> <span data-ttu-id="24da5-323">Inoltre, se **DefWindowProc** riceve un messaggio **WM \_ APPCOMMAND** per una finestra di primo livello, chiamerà un hook della shell con il codice **HSHELL \_ APPCOMMAND**.</span><span class="sxs-lookup"><span data-stu-id="24da5-323">Additionally, if **DefWindowProc** receives a **WM\_APPCOMMAND** message for a top-level window, it will call a shell hook with code **HSHELL\_APPCOMMAND**.</span></span>

<span data-ttu-id="24da5-324">Windows supporta inoltre Microsoft IntelliMouse Explorer, che è un mouse con cinque pulsanti.</span><span class="sxs-lookup"><span data-stu-id="24da5-324">Windows also supports the Microsoft IntelliMouse Explorer, which is a mouse with five buttons.</span></span> <span data-ttu-id="24da5-325">I due pulsanti aggiuntivi supportano la navigazione del browser avanti e indietro.</span><span class="sxs-lookup"><span data-stu-id="24da5-325">The two extra buttons support forward and backward browser navigation.</span></span> <span data-ttu-id="24da5-326">Per ulteriori informazioni, vedere [XBUTTONs](about-mouse-input.md).</span><span class="sxs-lookup"><span data-stu-id="24da5-326">For more information, see [XBUTTONs](about-mouse-input.md).</span></span>

## <a name="simulating-input"></a><span data-ttu-id="24da5-327">Simulazione dell'input</span><span class="sxs-lookup"><span data-stu-id="24da5-327">Simulating Input</span></span>

<span data-ttu-id="24da5-328">Per simulare una serie ininterrotta di eventi di input utente, usare la funzione [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) .</span><span class="sxs-lookup"><span data-stu-id="24da5-328">To simulate an uninterrupted series of user input events, use the [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function.</span></span> <span data-ttu-id="24da5-329">La funzione accetta tre parametri.</span><span class="sxs-lookup"><span data-stu-id="24da5-329">The function accepts three parameters.</span></span> <span data-ttu-id="24da5-330">Il primo parametro, *cInputs*, indica il numero di eventi di input che verranno simulati.</span><span class="sxs-lookup"><span data-stu-id="24da5-330">The first parameter, *cInputs*, indicates the number of input events that will be simulated.</span></span> <span data-ttu-id="24da5-331">Il secondo parametro, *rgInputs*, è una matrice di strutture di [**input**](/windows/win32/api/winuser/ns-winuser-input) , ognuna delle quali descrive un tipo di evento di input e informazioni aggiuntive su tale evento.</span><span class="sxs-lookup"><span data-stu-id="24da5-331">The second parameter, *rgInputs*, is an array of [**INPUT**](/windows/win32/api/winuser/ns-winuser-input) structures, each describing a type of input event and additional information about that event.</span></span> <span data-ttu-id="24da5-332">L'ultimo parametro, *cbSize*, accetta la dimensione, in byte, della struttura di **input** .</span><span class="sxs-lookup"><span data-stu-id="24da5-332">The last parameter, *cbSize*, accepts the size of the **INPUT** structure, in bytes.</span></span>

<span data-ttu-id="24da5-333">La funzione [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) funziona inserendo una serie di eventi di input simulati nel flusso di input di un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="24da5-333">The [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function works by injecting a series of simulated input events into a device's input stream.</span></span> <span data-ttu-id="24da5-334">L'effetto è simile alla chiamata ripetuta dell' [**\_ evento keybd**](/windows/win32/api/winuser/nf-winuser-keybd_event) o della funzione di [**\_ evento del mouse**](/windows/win32/api/winuser/nf-winuser-mouse_event) , ad eccezione del fatto che il sistema garantisce che non si intermingno altri eventi di input con gli eventi simulati.</span><span class="sxs-lookup"><span data-stu-id="24da5-334">The effect is similar to calling the [**keybd\_event**](/windows/win32/api/winuser/nf-winuser-keybd_event) or [**mouse\_event**](/windows/win32/api/winuser/nf-winuser-mouse_event) function repeatedly, except that the system ensures that no other input events intermingle with the simulated events.</span></span> <span data-ttu-id="24da5-335">Al termine della chiamata, il valore restituito indica il numero di eventi di input riprodotti correttamente.</span><span class="sxs-lookup"><span data-stu-id="24da5-335">When the call completes, the return value indicates the number of input events successfully played.</span></span> <span data-ttu-id="24da5-336">Se questo valore è zero, l'input è stato bloccato.</span><span class="sxs-lookup"><span data-stu-id="24da5-336">If this value is zero, then input was blocked.</span></span>

<span data-ttu-id="24da5-337">La funzione [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) non reimposta lo stato corrente della tastiera.</span><span class="sxs-lookup"><span data-stu-id="24da5-337">The [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function does not reset the keyboard's current state.</span></span> <span data-ttu-id="24da5-338">Pertanto, se l'utente dispone di tasti premuti quando si chiama questa funzione, potrebbero interferire con gli eventi generati da questa funzione.</span><span class="sxs-lookup"><span data-stu-id="24da5-338">Therefore, if the user has any keys pressed when you call this function, they might interfere with the events that this function generates.</span></span> <span data-ttu-id="24da5-339">Se si è interessati a possibili interferenze, controllare lo stato della tastiera con la funzione [**GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) e correggerlo in caso di necessità.</span><span class="sxs-lookup"><span data-stu-id="24da5-339">If you are concerned about possible interference, check the keyboard's state with the [**GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) function and correct as necessary.</span></span>

## <a name="languages-locales-and-keyboard-layouts"></a><span data-ttu-id="24da5-340">Lingue, impostazioni locali e layout di tastiera</span><span class="sxs-lookup"><span data-stu-id="24da5-340">Languages, Locales, and Keyboard Layouts</span></span>

<span data-ttu-id="24da5-341">Un *linguaggio* è un linguaggio naturale, ad esempio inglese, francese e giapponese.</span><span class="sxs-lookup"><span data-stu-id="24da5-341">A *language* is a natural language, such as English, French, and Japanese.</span></span> <span data-ttu-id="24da5-342">Una *lingua* secondaria è una variante di un linguaggio naturale che viene pronunciata in un'area geografica specifica, ad esempio le sottolingue inglesi pronunciate nel Regno Unito e il Stati Uniti.</span><span class="sxs-lookup"><span data-stu-id="24da5-342">A *sublanguage* is a variant of a natural language that is spoken in a specific geographical region, such as the English sublanguages spoken in the United Kingdom and the United States.</span></span> <span data-ttu-id="24da5-343">Le applicazioni utilizzano valori, denominati [identificatori di lingua](/windows/desktop/Intl/language-identifiers), per identificare in modo univoco lingue e sottolingue.</span><span class="sxs-lookup"><span data-stu-id="24da5-343">Applications use values, called [language identifiers](/windows/desktop/Intl/language-identifiers), to uniquely identify languages and sublanguages.</span></span>

<span data-ttu-id="24da5-344">Le applicazioni utilizzano in genere *impostazioni locali* per impostare la lingua in cui vengono elaborati l'input e l'output.</span><span class="sxs-lookup"><span data-stu-id="24da5-344">Applications typically use *locales* to set the language in which input and output is processed.</span></span> <span data-ttu-id="24da5-345">L'impostazione delle impostazioni locali per la tastiera, ad esempio, influiscono sui valori di carattere generati dalla tastiera.</span><span class="sxs-lookup"><span data-stu-id="24da5-345">Setting the locale for the keyboard, for example, affects the character values generated by the keyboard.</span></span> <span data-ttu-id="24da5-346">L'impostazione delle impostazioni locali per la visualizzazione o la stampante influiscono sui glifi visualizzati o stampati.</span><span class="sxs-lookup"><span data-stu-id="24da5-346">Setting the locale for the display or printer affects the glyphs displayed or printed.</span></span> <span data-ttu-id="24da5-347">Le applicazioni impostano le impostazioni locali per una tastiera caricando e utilizzando i layout di tastiera.</span><span class="sxs-lookup"><span data-stu-id="24da5-347">Applications set the locale for a keyboard by loading and using keyboard layouts.</span></span> <span data-ttu-id="24da5-348">Le impostazioni locali per una visualizzazione o una stampante vengono impostate selezionando un tipo di carattere che supporta le impostazioni locali specificate.</span><span class="sxs-lookup"><span data-stu-id="24da5-348">They set the locale for a display or printer by selecting a font that supports the specified locale.</span></span>

<span data-ttu-id="24da5-349">Un layout di tastiera non solo specifica la posizione fisica delle chiavi sulla tastiera, ma determina anche i valori di carattere generati premendo tali tasti.</span><span class="sxs-lookup"><span data-stu-id="24da5-349">A keyboard layout not only specifies the physical position of the keys on the keyboard but also determines the character values generated by pressing those keys.</span></span> <span data-ttu-id="24da5-350">Ogni layout identifica la lingua di input corrente e determina i valori di carattere generati da quali chiavi e combinazioni di chiavi.</span><span class="sxs-lookup"><span data-stu-id="24da5-350">Each layout identifies the current input language and determines which character values are generated by which keys and key combinations.</span></span>

<span data-ttu-id="24da5-351">Ogni layout della tastiera ha un handle corrispondente che identifica il layout e la lingua.</span><span class="sxs-lookup"><span data-stu-id="24da5-351">Every keyboard layout has a corresponding handle that identifies the layout and language.</span></span> <span data-ttu-id="24da5-352">La parola bassa dell'handle è un identificatore di lingua.</span><span class="sxs-lookup"><span data-stu-id="24da5-352">The low word of the handle is a language identifier.</span></span> <span data-ttu-id="24da5-353">La parola alta è un handle di dispositivo, che specifica il layout fisico o è zero, che indica un layout fisico predefinito.</span><span class="sxs-lookup"><span data-stu-id="24da5-353">The high word is a device handle, specifying the physical layout, or is zero, indicating a default physical layout.</span></span> <span data-ttu-id="24da5-354">L'utente può associare qualsiasi lingua di input a un layout fisico.</span><span class="sxs-lookup"><span data-stu-id="24da5-354">The user can associate any input language with a physical layout.</span></span> <span data-ttu-id="24da5-355">Ad esempio, un utente di lingua inglese che lavora molto occasionalmente in francese può impostare la lingua di input della tastiera su francese senza modificare il layout fisico della tastiera.</span><span class="sxs-lookup"><span data-stu-id="24da5-355">For example, an English-speaking user who very occasionally works in French can set the input language of the keyboard to French without changing the physical layout of the keyboard.</span></span> <span data-ttu-id="24da5-356">Ciò significa che l'utente può immettere il testo in francese usando il layout inglese noto.</span><span class="sxs-lookup"><span data-stu-id="24da5-356">This means the user can enter text in French using the familiar English layout.</span></span>

<span data-ttu-id="24da5-357">Generalmente, non è previsto che le applicazioni modifichino direttamente le lingue di input.</span><span class="sxs-lookup"><span data-stu-id="24da5-357">Applications are generally not expected to manipulate input languages directly.</span></span> <span data-ttu-id="24da5-358">Al contrario, l'utente configura le combinazioni di lingua e layout, quindi passa tra loro.</span><span class="sxs-lookup"><span data-stu-id="24da5-358">Instead, the user sets up language and layout combinations, then switches among them.</span></span> <span data-ttu-id="24da5-359">Quando l'utente fa clic su testo contrassegnato con una lingua diversa, l'applicazione chiama la funzione [**ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) per attivare il layout predefinito dell'utente per tale lingua.</span><span class="sxs-lookup"><span data-stu-id="24da5-359">When the user clicks into text marked with a different language, the application calls the [**ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) function to activate the user's default layout for that language.</span></span> <span data-ttu-id="24da5-360">Se l'utente modifica il testo in una lingua non presente nell'elenco attivo, l'applicazione può chiamare la funzione [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) con la lingua per ottenere un layout basato su tale lingua.</span><span class="sxs-lookup"><span data-stu-id="24da5-360">If the user edits text in a language which is not in the active list, the application can call the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function with the language to get a layout based on that language.</span></span>

<span data-ttu-id="24da5-361">La funzione [**ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) imposta la lingua di input per l'attività corrente.</span><span class="sxs-lookup"><span data-stu-id="24da5-361">The [**ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) function sets the input language for the current task.</span></span> <span data-ttu-id="24da5-362">Il parametro *HKL* può essere l'handle per il layout di tastiera o un identificatore di lingua con estensione zero.</span><span class="sxs-lookup"><span data-stu-id="24da5-362">The *hkl* parameter can be either the handle to the keyboard layout or a zero-extended language identifier.</span></span> <span data-ttu-id="24da5-363">È possibile ottenere gli handle di layout della tastiera dalla funzione [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) o [**GetKeyboardLayoutList**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutlist) .</span><span class="sxs-lookup"><span data-stu-id="24da5-363">Keyboard layout handles can be obtained from the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) or [**GetKeyboardLayoutList**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutlist) function.</span></span> <span data-ttu-id="24da5-364">Per selezionare la tastiera successiva o precedente, è anche possibile usare i valori **HKL \_ Next** e **HKL \_ Prev** .</span><span class="sxs-lookup"><span data-stu-id="24da5-364">The **HKL\_NEXT** and **HKL\_PREV** values can also be used to select the next or previous keyboard.</span></span>

<span data-ttu-id="24da5-365">La funzione [**GetKeyboardLayoutName**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutnamea) Recupera il nome del layout di tastiera attivo per il thread chiamante.</span><span class="sxs-lookup"><span data-stu-id="24da5-365">The [**GetKeyboardLayoutName**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutnamea) function retrieves the name of the active keyboard layout for the calling thread.</span></span> <span data-ttu-id="24da5-366">Se un'applicazione crea il layout attivo mediante la funzione [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) , **GetKeyboardLayoutName** recupera la stessa stringa utilizzata per creare il layout.</span><span class="sxs-lookup"><span data-stu-id="24da5-366">If an application creates the active layout using the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function, **GetKeyboardLayoutName** retrieves the same string used to create the layout.</span></span> <span data-ttu-id="24da5-367">In caso contrario, la stringa corrisponde all'identificatore di lingua principale corrispondente alle impostazioni locali del layout attivo.</span><span class="sxs-lookup"><span data-stu-id="24da5-367">Otherwise, the string is the primary language identifier corresponding to the locale of the active layout.</span></span> <span data-ttu-id="24da5-368">Ciò significa che la funzione potrebbe non necessariamente distinguere tra layout diversi con lo stesso linguaggio primario, pertanto non può restituire informazioni specifiche sulla lingua di input.</span><span class="sxs-lookup"><span data-stu-id="24da5-368">This means the function may not necessarily differentiate among different layouts with the same primary language, so cannot return specific information about the input language.</span></span> <span data-ttu-id="24da5-369">La funzione [**GetKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayout) , tuttavia, può essere utilizzata per determinare la lingua di input.</span><span class="sxs-lookup"><span data-stu-id="24da5-369">The [**GetKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayout) function, however, can be used to determine the input language.</span></span>

<span data-ttu-id="24da5-370">La funzione [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) carica un layout di tastiera e rende disponibile il layout per l'utente.</span><span class="sxs-lookup"><span data-stu-id="24da5-370">The [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function loads a keyboard layout and makes the layout available to the user.</span></span> <span data-ttu-id="24da5-371">Le applicazioni possono rendere il layout immediatamente attivo per il thread corrente usando il valore di **\_ attivazione di KLF** .</span><span class="sxs-lookup"><span data-stu-id="24da5-371">Applications can make the layout immediately active for the current thread by using the **KLF\_ACTIVATE** value.</span></span> <span data-ttu-id="24da5-372">Un'applicazione può usare il valore di **\_ riordino KLF** per riordinare i layout senza specificare anche il valore di **\_ attivazione di KLF** .</span><span class="sxs-lookup"><span data-stu-id="24da5-372">An application can use the **KLF\_REORDER** value to reorder the layouts without also specifying the **KLF\_ACTIVATE** value.</span></span> <span data-ttu-id="24da5-373">Quando si caricano i layout di tastiera, le applicazioni devono sempre usare il valore **KLF \_ Sostituisci \_ OK** per assicurarsi che sia selezionata la preferenza dell'utente.</span><span class="sxs-lookup"><span data-stu-id="24da5-373">Applications should always use the **KLF\_SUBSTITUTE\_OK** value when loading keyboard layouts to ensure that the user's preference, if any, is selected.</span></span>

<span data-ttu-id="24da5-374">Per il supporto multilingue, la funzione [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) fornisce i flag **KLF \_ REPLACELANG** e **KLF \_ NOTELLSHELL** .</span><span class="sxs-lookup"><span data-stu-id="24da5-374">For multilingual support, the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function provides the **KLF\_REPLACELANG** and **KLF\_NOTELLSHELL** flags.</span></span> <span data-ttu-id="24da5-375">Il flag **KLF \_ REPLACELANG** indirizza la funzione per sostituire un layout di tastiera esistente senza modificare la lingua.</span><span class="sxs-lookup"><span data-stu-id="24da5-375">The **KLF\_REPLACELANG** flag directs the function to replace an existing keyboard layout without changing the language.</span></span> <span data-ttu-id="24da5-376">Il tentativo di sostituire un layout esistente con lo stesso identificatore di lingua ma senza specificare **KLF \_ REPLACELANG** è un errore.</span><span class="sxs-lookup"><span data-stu-id="24da5-376">Attempting to replace an existing layout using the same language identifier but without specifying **KLF\_REPLACELANG** is an error.</span></span> <span data-ttu-id="24da5-377">Il flag **KLF \_ NOTELLSHELL** impedisce alla funzione di notificare la shell quando viene aggiunto o sostituito un layout di tastiera.</span><span class="sxs-lookup"><span data-stu-id="24da5-377">The **KLF\_NOTELLSHELL** flag prevents the function from notifying the shell when a keyboard layout is added or replaced.</span></span> <span data-ttu-id="24da5-378">Questa operazione è utile per le applicazioni che aggiungono più layout in una serie di chiamate consecutive.</span><span class="sxs-lookup"><span data-stu-id="24da5-378">This is useful for applications that add multiple layouts in a consecutive series of calls.</span></span> <span data-ttu-id="24da5-379">Questo flag deve essere usato in tutte le chiamate tranne l'ultima.</span><span class="sxs-lookup"><span data-stu-id="24da5-379">This flag should be used in all but the last call.</span></span>

<span data-ttu-id="24da5-380">La funzione [**UnloadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-unloadkeyboardlayout) è limitata perché non è in grado di scaricare la lingua di input predefinita del sistema.</span><span class="sxs-lookup"><span data-stu-id="24da5-380">The [**UnloadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-unloadkeyboardlayout) function is restricted in that it cannot unload the system default input language.</span></span> <span data-ttu-id="24da5-381">Ciò garantisce che l'utente abbia sempre un layout disponibile per immettere il testo usando lo stesso set di caratteri usato dalla shell e file system.</span><span class="sxs-lookup"><span data-stu-id="24da5-381">This ensures that the user always has one layout available for enter text using the same character set as used by the shell and file system.</span></span>

 

 
