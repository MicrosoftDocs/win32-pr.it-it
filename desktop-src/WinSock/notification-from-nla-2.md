---
description: NLA è in grado di fornire ai propri client la notifica delle modifiche del percorso di rete. Il meccanismo usato per richiedere la notifica degli eventi di modifica è una combinazione delle funzioni WSALookupServiceBegin, WSANSPIoctl e WSALookupServiceNext.
ms.assetid: fed5a90d-0bc5-46e7-b3d3-edc4b303d305
title: Notifica da NLA
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 13ee0ad0530725db27c8f5df39b6fc573f7e97c4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104526125"
---
# <a name="notification-from-nla"></a><span data-ttu-id="b7b65-104">Notifica da NLA</span><span class="sxs-lookup"><span data-stu-id="b7b65-104">Notification from NLA</span></span>

<span data-ttu-id="b7b65-105">NLA è in grado di fornire ai propri client la notifica delle modifiche del percorso di rete.</span><span class="sxs-lookup"><span data-stu-id="b7b65-105">NLA is capable of providing its clients with notification of network location changes.</span></span> <span data-ttu-id="b7b65-106">Il meccanismo usato per richiedere la notifica degli eventi di modifica è una combinazione delle funzioni [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl)e [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="b7b65-106">The mechanism used to request notification of change events is a combination of the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl), and [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) functions.</span></span>

<span data-ttu-id="b7b65-107">Per ricevere una notifica di modifica da NLA, un client deve prima chiamare il [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) per ottenere un handle di ricerca NLA SP valido.</span><span class="sxs-lookup"><span data-stu-id="b7b65-107">In order to receive change notification from NLA, a client must first call the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) to obtain a valid NLA SP lookup handle.</span></span> <span data-ttu-id="b7b65-108">Il client può quindi chiamare [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) o [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) in qualsiasi ordine. per eseguire la registrazione per la notifica, chiamare la funzione **WSANSPIoctl** con il \_ codice di controllo delle modifiche di NSP \_ Notify di sio \_ impostato nel parametro *dwControlCode* .</span><span class="sxs-lookup"><span data-stu-id="b7b65-108">Next, the client can call [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) or [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) in any order; to register for notification, call the **WSANSPIoctl** function with the SIO\_NSP\_NOTIFY\_CHANGE control code set in the *dwControlCode* parameter.</span></span>

<span data-ttu-id="b7b65-109">La funzione [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) restituisce WSA \_ E \_ non \_ più come delimitatore di set.</span><span class="sxs-lookup"><span data-stu-id="b7b65-109">The [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function returns WSA\_E\_NO\_MORE as a set delimiter.</span></span> <span data-ttu-id="b7b65-110">Quando un client si è registrato per la notifica tramite la funzione [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) e **WSALookupServiceNext** restituisce WSA \_ e \_ non \_ più, la chiamata di **WSALookupServiceNext** indica di nuovo se si è verificata una modifica:</span><span class="sxs-lookup"><span data-stu-id="b7b65-110">When a client has registered for notification using the [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function and **WSALookupServiceNext** returns WSA\_E\_NO\_MORE, calling **WSALookupServiceNext** again reveals whether a change has occurred:</span></span>

-   <span data-ttu-id="b7b65-111">Se non sono state apportate modifiche rispetto alla precedente WSA \_ e \_ , non viene più \_ \_ restituito WSA e \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="b7b65-111">If no changes have occurred since the previous WSA\_E\_NO\_MORE, WSA\_E\_NO\_MORE is returned.</span></span>
-   <span data-ttu-id="b7b65-112">Se si è verificata una modifica o se si è verificata una modifica e viene effettuata una chiamata di polling, la chiamata della funzione [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) restituisce le reti come strutture [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) , con uno dei flag seguenti impostati nel membro **dwOutputFlags** :</span><span class="sxs-lookup"><span data-stu-id="b7b65-112">If a change has occurred, or if a change has occurred and a polling call is made, the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function call returns networks as [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) structures, with one of the following flags set in its **dwOutputFlags** member:</span></span>

    <dl> <span data-ttu-id="b7b65-113">RISULTATO \_ \_ aggiunto</span><span class="sxs-lookup"><span data-stu-id="b7b65-113">RESULT\_IS\_ADDED</span></span>  
    <span data-ttu-id="b7b65-114">RISULTATO \_ \_ modificato</span><span class="sxs-lookup"><span data-stu-id="b7b65-114">RESULT\_IS\_CHANGED</span></span>  
    <span data-ttu-id="b7b65-115">RISULTATO \_ \_ eliminato</span><span class="sxs-lookup"><span data-stu-id="b7b65-115">RESULT\_IS\_DELETED</span></span>  
    </dl>

<span data-ttu-id="b7b65-116">Viene fornita una notifica di modifica per tutti i campi modificati dall'handle di ricerca NLA ottenuti con la chiamata di funzione [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) o dall'ultima enumerazione che ha generato l' \_ errore WSA \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="b7b65-116">Change notification is provided for any fields that changed since the NLA lookup handle was obtained with the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function call, or since the last enumeration that resulted in the WSA\_E\_NO\_MORE error.</span></span> <span data-ttu-id="b7b65-117">Quando vengono specificate tutte le informazioni sul percorso di rete modificate, WSA \_ E \_ non \_ viene più restituito.</span><span class="sxs-lookup"><span data-stu-id="b7b65-117">When all changed network location information is provided, WSA\_E\_NO\_MORE is returned.</span></span> <span data-ttu-id="b7b65-118">I client possono riemettere una chiamata di funzione [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) sullo stesso handle di query in qualsiasi momento, uno alla volta, con il \_ flag sio NSP \_ Notify \_ Change set.</span><span class="sxs-lookup"><span data-stu-id="b7b65-118">Clients can reissue a [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function call on the same query handle at any time, one at a time, with the SIO\_NSP\_NOTIFY\_CHANGE flag set.</span></span> <span data-ttu-id="b7b65-119">Questa funzionalità consente a un client di riciclare l'handle di query su base continuativa, evitando in tal modo al client di dover mantenere le informazioni sullo stato di modifica autonomamente.</span><span class="sxs-lookup"><span data-stu-id="b7b65-119">This capability enables a client to recycle the query handle on an ongoing basis, thereby relieving the client from having to maintain change-state information on its own.</span></span> <span data-ttu-id="b7b65-120">Quando un client non necessita più delle notifiche di modifica, deve chiudere l'handle di query usando la funzione [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) .</span><span class="sxs-lookup"><span data-stu-id="b7b65-120">Once a client no longer needs change notifications, it should close the query handle using the [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) function.</span></span>

 

 



