---
description: Come indicato in precedenza, la funzione WSAJoinLeaf viene usata per aggiungere un nodo foglia a una sessione multipoint.
ms.assetid: eaa1593a-36eb-4d92-a3d9-91566fc0216b
title: Uso di WSAJoinLeaf
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 027262a117edc5541a4809481aa4607837343b4f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103882325"
---
# <a name="using-wsajoinleaf"></a><span data-ttu-id="9b21c-103">Uso di WSAJoinLeaf</span><span class="sxs-lookup"><span data-stu-id="9b21c-103">Using WSAJoinLeaf</span></span>

<span data-ttu-id="9b21c-104">Come indicato in precedenza, la funzione [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) viene usata per aggiungere un nodo foglia a una sessione multipoint.</span><span class="sxs-lookup"><span data-stu-id="9b21c-104">As mentioned previously, the function [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) is used to join a leaf node into a multipoint session.</span></span> <span data-ttu-id="9b21c-105">**WSAJoinLeaf** presenta gli stessi parametri e la stessa semantica di [**WSAConnect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaconnect) , ad eccezione del fatto che restituisce un descrittore di socket (come in [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept)) ed è dotato di un parametro *dwFlags* aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="9b21c-105">**WSAJoinLeaf** has the same parameters and semantics as [**WSAConnect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaconnect) except that it returns a socket descriptor (as in [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept)), and it has an additional *dwFlags* parameter.</span></span>

<span data-ttu-id="9b21c-106">Il parametro *dwFlags* viene utilizzato per indicare se il socket fungerà solo da mittente, solo come ricevitore o entrambi.</span><span class="sxs-lookup"><span data-stu-id="9b21c-106">The *dwFlags* parameter is used to indicate whether the socket will be acting only as a sender, only as a receiver, or both.</span></span> <span data-ttu-id="9b21c-107">Solo i socket multipoint possono essere utilizzati per *i* parametri di input in questa funzione.</span><span class="sxs-lookup"><span data-stu-id="9b21c-107">Only multipoint sockets may be used for input parameter *s* in this function.</span></span> <span data-ttu-id="9b21c-108">Se il socket multipoint è in modalità non di blocco, il descrittore di socket restituito non è utilizzabile fino a quando non \_ viene ricevuta un'indicazione di connessione FD corrispondente.</span><span class="sxs-lookup"><span data-stu-id="9b21c-108">If the multipoint socket is in nonblocking mode, the returned socket descriptor is not usable until after a corresponding FD\_CONNECT indication is received.</span></span> <span data-ttu-id="9b21c-109">Un'applicazione radice in una sessione MultiPoint può chiamare [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) una o più volte per aggiungere un numero di nodi foglia, ma al massimo una richiesta di connessione multipoint potrebbe essere in attesa alla volta.</span><span class="sxs-lookup"><span data-stu-id="9b21c-109">A root application in a multipoint session may call [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) one or more times in order to add a number of leaf nodes, however at most one multipoint connection request may be outstanding at a time.</span></span>

<span data-ttu-id="9b21c-110">Il descrittore di socket restituito da [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) differisce a seconda che il descrittore di socket di input, *s*, sia una \_ radice c o una \_ foglia c.</span><span class="sxs-lookup"><span data-stu-id="9b21c-110">The socket descriptor returned by [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) differs depending on whether the input socket descriptor, *s*, is a c\_root or a c\_leaf.</span></span> <span data-ttu-id="9b21c-111">Quando viene usato con un \_ socket radice c, il parametro *Name* designa un particolare nodo foglia da aggiungere e il descrittore di socket restituito è un \_ socket foglia c corrispondente al nodo foglia appena aggiunto.</span><span class="sxs-lookup"><span data-stu-id="9b21c-111">When used with a c\_root socket, the *name* parameter designates a particular leaf node to be added and the returned socket descriptor is a c\_leaf socket corresponding to the newly added leaf node.</span></span> <span data-ttu-id="9b21c-112">Non è destinato a essere utilizzato per lo scambio di dati MultiPoint, ma viene invece utilizzato per ricevere \_ indicazioni FD xxx, ad esempio FD \_ Close, per la connessione esistente a una particolare foglia c \_ .</span><span class="sxs-lookup"><span data-stu-id="9b21c-112">It is not intended to be used for the exchange of multipoint data, but rather it is used to receive FD\_XXX indications (for example, FD\_CLOSE) for the connection that exists to the particular c\_leaf.</span></span> <span data-ttu-id="9b21c-113">Alcune implementazioni multipoint possono anche consentire l'uso di questo socket per le chat laterali tra la radice e un singolo nodo foglia.</span><span class="sxs-lookup"><span data-stu-id="9b21c-113">Some multipoint implementations may also allow this socket to be used for side chats between the root and an individual leaf node.</span></span> <span data-ttu-id="9b21c-114">\_Per questo socket viene ricevuta un'indicazione di chiusura FD se il nodo foglia corrispondente chiama [**chiamata closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) per uscire dalla sessione multipoint.</span><span class="sxs-lookup"><span data-stu-id="9b21c-114">An FD\_CLOSE indication is received for this socket if the corresponding leaf node calls [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) to drop out of the multipoint session.</span></span> <span data-ttu-id="9b21c-115">In modo simmetrico, la chiamata di **chiamata closesocket** sul \_ socket foglia c restituito da **WSAJoinLeaf** fa sì che il socket nel nodo foglia corrispondente ottenga una notifica di \_ chiusura FD.</span><span class="sxs-lookup"><span data-stu-id="9b21c-115">Symmetrically, invoking **closesocket** on the c\_leaf socket returned from **WSAJoinLeaf** causes the socket in the corresponding leaf node to get an FD\_CLOSE notification.</span></span>

<span data-ttu-id="9b21c-116">Quando [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) viene richiamato con un \_ socket foglia c, il parametro *Name* contiene l'indirizzo dell'applicazione radice (per uno schema di controllo radice) o una sessione multipoint esistente (schema di controllo non radice) e il descrittore di socket restituito è uguale al descrittore di socket di input.</span><span class="sxs-lookup"><span data-stu-id="9b21c-116">When [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) is invoked with a c\_leaf socket, the *name* parameter contains the address of the root application (for a rooted control scheme) or an existing multipoint session (nonrooted control scheme), and the returned socket descriptor is the same as the input socket descriptor.</span></span> <span data-ttu-id="9b21c-117">In uno schema di controllo rooted, l'applicazione radice inserisce il \_ socket radice c in modalità di ascolto chiamando [**Listen**](/windows/desktop/api/Winsock2/nf-winsock2-listen).</span><span class="sxs-lookup"><span data-stu-id="9b21c-117">In a rooted control scheme, the root application puts its c\_root socket in listening mode by calling [**listen**](/windows/desktop/api/Winsock2/nf-winsock2-listen).</span></span> <span data-ttu-id="9b21c-118">La notifica di \_ accettazione standard FD viene inviata quando il nodo foglia richiede di aggiungersi alla sessione multipoint.</span><span class="sxs-lookup"><span data-stu-id="9b21c-118">The standard FD\_ACCEPT notification is delivered when the leaf node requests to join itself to the multipoint session.</span></span> <span data-ttu-id="9b21c-119">L'applicazione radice usa le normali funzioni [**Accept**](/windows/desktop/api/Winsock2/nf-winsock2-accept) / [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept) per ammettere il nuovo nodo foglia.</span><span class="sxs-lookup"><span data-stu-id="9b21c-119">The root application uses the usual [**accept**](/windows/desktop/api/Winsock2/nf-winsock2-accept)/[**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept) functions to admit the new leaf node.</span></span> <span data-ttu-id="9b21c-120">Il valore restituito da **Accept** o **WSAAccept** è anche un \_ descrittore di socket foglia c analogo a quello restituito da **WSAJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="9b21c-120">The value returned from either **accept** or **WSAAccept** is also a c\_leaf socket descriptor just like those returned from **WSAJoinLeaf**.</span></span> <span data-ttu-id="9b21c-121">Per supportare gli schemi multipoint che consentono sia i join avviati dalla radice che quelli avviati da foglia, è accettabile che un \_ socket radice c già in modalità di ascolto venga usato come input per **WSAJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="9b21c-121">To accommodate multipoint schemes that allow both root-initiated and leaf-initiated joins, it is acceptable for a c\_root socket that is already in listening mode to be used as input to **WSAJoinLeaf**.</span></span>

<span data-ttu-id="9b21c-122">Un'applicazione MultiPoint radice è in genere responsabile dello smantellamento ordinato di una sessione multipoint.</span><span class="sxs-lookup"><span data-stu-id="9b21c-122">A multipoint root application is generally responsible for the orderly dismantling of a multipoint session.</span></span> <span data-ttu-id="9b21c-123">Un'applicazione di questo tipo può usare [**Shutdown**](/windows/desktop/api/winsock/nf-winsock-shutdown) o [**chiamata closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) in un socket radice c per fare in modo che \_ tutti i \_ socket foglia c associati, inclusi quelli restituiti da [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) e i socket foglia c corrispondenti \_ nei nodi foglia remoti, per ottenere la \_ notifica di chiusura FD.</span><span class="sxs-lookup"><span data-stu-id="9b21c-123">Such an application may use [**shutdown**](/windows/desktop/api/winsock/nf-winsock-shutdown) or [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) on a c\_root socket to cause all of the associated c\_leaf sockets, including those returned from [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) and their corresponding c\_leaf sockets in the remote leaf nodes, to get FD\_CLOSE notification.</span></span>

 

 



