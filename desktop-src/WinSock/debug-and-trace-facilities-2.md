---
description: Funzionalità di debug e di traccia e Windows Sockets 2.
ms.assetid: eb29fc21-92d6-4471-860a-fd1c531686f6
title: Funzionalità di debug e di traccia
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7288c6b4d72a7a375ee16da23a25b0a04a46df91
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106307001"
---
# <a name="debug-and-trace-facilities"></a><span data-ttu-id="8db37-103">Funzionalità di debug e di traccia</span><span class="sxs-lookup"><span data-stu-id="8db37-103">Debug and Trace Facilities</span></span>

<span data-ttu-id="8db37-104">Gli sviluppatori di applicazioni Windows Sockets 2 devono isolare i bug in:</span><span class="sxs-lookup"><span data-stu-id="8db37-104">Windows Sockets 2 application developers need to isolate bugs in:</span></span>

-   <span data-ttu-id="8db37-105">Applicazione.</span><span class="sxs-lookup"><span data-stu-id="8db37-105">The application.</span></span>
-   <span data-ttu-id="8db37-106">*Ws2 \_32.dll* o una delle DLL dello shim di compatibilità.</span><span class="sxs-lookup"><span data-stu-id="8db37-106">The *Ws2\_32.dll* or one of the compatibility shim DLLs.</span></span>
-   <span data-ttu-id="8db37-107">Provider del servizio.</span><span class="sxs-lookup"><span data-stu-id="8db37-107">The service provider.</span></span>

<span data-ttu-id="8db37-108">Windows Sockets 2 risolve questa esigenza attraverso diversi componenti e funzionalità:</span><span class="sxs-lookup"><span data-stu-id="8db37-108">Windows Sockets 2 addresses this need through several components and features:</span></span>

-   <span data-ttu-id="8db37-109">Supporto integrato per la traccia Winsock in Windows Vista e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="8db37-109">Integrated support for Winsock tracing on Windows Vista and later.</span></span>
-   <span data-ttu-id="8db37-110">Una versione di debug appositamente concepita di *Ws2 \_32.dll* in Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="8db37-110">A specially devised debug version of the *Ws2\_32.dll* on Windows Vista.</span></span>
-   <span data-ttu-id="8db37-111">Una funzionalità di debug e traccia di primitiva separata per l'uso in Windows Server 2003 e Windows XP.</span><span class="sxs-lookup"><span data-stu-id="8db37-111">A separate primitive debug and trace facility for use on Windows Server 2003 and Windows XP.</span></span>

## <a name="winsock-tracing-using-event-tracing-for-windows"></a><span data-ttu-id="8db37-112">Traccia Winsock con Event Tracing for Windows</span><span class="sxs-lookup"><span data-stu-id="8db37-112">Winsock Tracing using Event Tracing for Windows</span></span>

<span data-ttu-id="8db37-113">Il supporto integrato per la traccia Winsock mediante Event Tracing for Windows (ETW) è incluso in Windows Vista e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="8db37-113">Integrated support for Winsock tracing using Event Tracing for Windows (ETW) is included on Windows Vista and later.</span></span> <span data-ttu-id="8db37-114">Si tratta del metodo preferito per la traccia delle chiamate Winsock in Windows Vista e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="8db37-114">This is the preferred method for tracing Winsock calls on Windows Vista and later.</span></span> <span data-ttu-id="8db37-115">La traccia Winsock con ETW è leggera e funziona con le versioni finali di Windows.</span><span class="sxs-lookup"><span data-stu-id="8db37-115">Winsock tracing using ETW is lightweight and works on retail versions of Windows.</span></span> <span data-ttu-id="8db37-116">Non sono richiesti software o componenti aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="8db37-116">No additional software or components are required.</span></span> <span data-ttu-id="8db37-117">Questa funzionalità deve essere abilitata solo in Windows Vista e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="8db37-117">This feature just needs to be enabled on Windows Vista and later.</span></span> <span data-ttu-id="8db37-118">Per informazioni più dettagliate, vedere gli argomenti relativi alla [traccia Winsock](winsock-tracing.md) .</span><span class="sxs-lookup"><span data-stu-id="8db37-118">For more detailed information, see the [Winsock Tracing](winsock-tracing.md) topics.</span></span>

## <a name="using-a-debug-version-of-ws2_32dll"></a><span data-ttu-id="8db37-119">Uso di una versione di debug di WS2 \_32.dll</span><span class="sxs-lookup"><span data-stu-id="8db37-119">Using a Debug Version of Ws2\_32.dll</span></span>

<span data-ttu-id="8db37-120">La combinazione di una versione di debug di *Ws2 \_32.dll* in Windows Vista e della traccia Winsock consente il monitoraggio di tutte le chiamate di procedura tra l'API di Windows Sockets 2 o SPI e, a un certo punto, il controllo.</span><span class="sxs-lookup"><span data-stu-id="8db37-120">The combination of a debug version of the *Ws2\_32.dll* on Windows Vista and Winsock tracing allows all procedure calls across the Windows Sockets 2 API or SPI to be monitored and, to some extent, controlled.</span></span>

<span data-ttu-id="8db37-121">Se una versione di Microsoft Windows Software Development Kit (SDK) per Windows Vista è installata nel percorso predefinito, le versioni di debug di *Ws2 \_32.dll* per le varie architetture si trovano nella cartella seguente:</span><span class="sxs-lookup"><span data-stu-id="8db37-121">If a version of the Microsoft Windows Software Development Kit (SDK) for Windows Vista is installed to the default location, debug versions of the *Ws2\_32.dll* for various architectures are located under the following folder:</span></span>

<span data-ttu-id="8db37-122">**C: \\ programmi \\ Microsoft SDK \\ Windows \\ v 6.0 \\ noredist**</span><span class="sxs-lookup"><span data-stu-id="8db37-122">**C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0\\NoRedist**</span></span>

<span data-ttu-id="8db37-123">Deve essere usata una versione controllata del *\_32.dllWS2* che corrisponde alla versione di Windows e al Service Pack su cui si sta eseguendo il test.</span><span class="sxs-lookup"><span data-stu-id="8db37-123">A checked version of the *Ws2\_32.dll* that matches the version of Windows and the Service Pack you are testing on should be used.</span></span> <span data-ttu-id="8db37-124">Tenere presente che è possibile che siano state applicate patch di sicurezza che hanno aggiornato il *\_32.dllWS2* nel sistema di test.</span><span class="sxs-lookup"><span data-stu-id="8db37-124">Be aware that security patches may have been applied that updated the *Ws2\_32.dll* on your test system.</span></span> <span data-ttu-id="8db37-125">Il Windows SDK per Windows Vista e le sottoscrizioni DVD/CD (SDK) della piattaforma precedente includono compilazioni controllate per le varie versioni di Windows.</span><span class="sxs-lookup"><span data-stu-id="8db37-125">The Windows SDK for Windows Vista and the earlier Platform Software Development Kit (SDK) DVD/CD subscriptions include checked builds for the various versions of Windows.</span></span> <span data-ttu-id="8db37-126">È consigliabile usare la stessa versione controllata di *Ws2 \_32.dll* come versione definitiva usata nel sistema sottoposto a test.</span><span class="sxs-lookup"><span data-stu-id="8db37-126">You should use the same checked version of the *Ws2\_32.dll* as the retail version that was used on the system being tested.</span></span> <span data-ttu-id="8db37-127">Si noti anche che il comportamento in esecuzione in una compilazione controllata non sarà uguale a quello dell'esecuzione con una build finale.</span><span class="sxs-lookup"><span data-stu-id="8db37-127">Note also that behavior running under a checked build will not be the same as running with a retail build.</span></span>

<span data-ttu-id="8db37-128">**Nota**  Il Windows SDK per Windows Server 2008 e versioni successive non include più versioni di debug speciali *della \_32.dllWS2*.</span><span class="sxs-lookup"><span data-stu-id="8db37-128">**Note**  The Windows SDK for Windows Server 2008 and later no longer includes special debug versions of the *Ws2\_32.dll*.</span></span> <span data-ttu-id="8db37-129">Gli sviluppatori devono invece utilizzare la traccia Winsock utilizzando ETW, dal momento che questa funzionalità non richiede le build di debug.</span><span class="sxs-lookup"><span data-stu-id="8db37-129">Developers should use Winsock tracing using ETW instead, since this feature does not require debug builds.</span></span>

## <a name="winsock-debug-and-trace-facility-on-windows-server-2003-and-windows-xp"></a><span data-ttu-id="8db37-130">Funzionalità di debug e traccia Winsock in Windows Server 2003 e Windows XP</span><span class="sxs-lookup"><span data-stu-id="8db37-130">Winsock Debug and Trace Facility on Windows Server 2003 and Windows XP</span></span>

<span data-ttu-id="8db37-131">Le versioni precedenti di Windows precedenti a Windows 8 e Windows Server 2012 supportano una funzionalità di debug e traccia della primitiva separata, inclusa come esempio con il Windows SDK e l'SDK della piattaforma precedente.</span><span class="sxs-lookup"><span data-stu-id="8db37-131">Older versions of Windows prior to Windows 8 and Windows Server 2012 support a separate primitive debug and trace facility that is included as a sample with the Windows SDK and the older Platform SDK.</span></span> <span data-ttu-id="8db37-132">La funzionalità debug/trace deve essere utilizzata solo in Windows Server 2003 e Windows XP, in cui la traccia Winsock non è supportata.</span><span class="sxs-lookup"><span data-stu-id="8db37-132">The debug/trace facility should only be used on Windows Server 2003 and Windows XP where Winsock tracing is not supported.</span></span>

<span data-ttu-id="8db37-133">Se il Windows SDK per Windows 7 viene installato nel percorso predefinito, questa funzionalità di traccia di Winsock primitiva viene installata nella cartella seguente:</span><span class="sxs-lookup"><span data-stu-id="8db37-133">If the Windows SDK for Windows 7 is installed to the default location, this primitive Winsock tracing feature is installed in the following folder:</span></span>

<span data-ttu-id="8db37-134">**C: \\ programmi \\ Microsoft SDK \\ Windows \\ v 7.0 \\ esempi \\ NetDs \\ \\ dll Winsock DT \_**</span><span class="sxs-lookup"><span data-stu-id="8db37-134">**C:\\Program Files\\Microsoft SDKs\\Windows\\v7.0\\Samples\\NetDs\\winsock\\dt\_dll**</span></span>

<span data-ttu-id="8db37-135">Il file *DbgSpec.doc* in questa cartella fornisce la documentazione su questa funzionalità di traccia primitiva.</span><span class="sxs-lookup"><span data-stu-id="8db37-135">The *DbgSpec.doc* file in this folder provides documentation on this primitive trace facility.</span></span> <span data-ttu-id="8db37-136">\_Per usare questa funzionalità, è necessario compilare il codice di esempio nella cartella dll DT.</span><span class="sxs-lookup"><span data-stu-id="8db37-136">The sample code in the dt\_dll folder needs to be compiled to use this facility.</span></span> <span data-ttu-id="8db37-137">Gli sviluppatori sono liberi di utilizzare il codice sorgente per sviluppare versioni della DLL di debug/traccia che soddisfano le proprie esigenze specifiche.</span><span class="sxs-lookup"><span data-stu-id="8db37-137">Developers are free to use the source code to develop versions of the debug/trace DLL that meet their specific needs.</span></span>

<span data-ttu-id="8db37-138">Si noti che questa funzionalità di traccia Winsock primitive funziona solo con la versione di debug di *Ws2 \_32.dll* installata.</span><span class="sxs-lookup"><span data-stu-id="8db37-138">Note that this primitive Winsock trace feature will only work with the debug version of *Ws2\_32.dll* installed.</span></span> <span data-ttu-id="8db37-139">Sarà quindi necessario ottenere una versione controllata del *\_32.dllWS2* che corrisponda alla versione di Windows e al Service Pack su cui si sta eseguendo il test.</span><span class="sxs-lookup"><span data-stu-id="8db37-139">So you will need to get a checked version of the *Ws2\_32.dll* that matches the version of Windows and the Service Pack you are testing on.</span></span>

<span data-ttu-id="8db37-140">Una limitazione della funzionalità di traccia della DLL di DT primitiva \_ è che il codice di esempio usa un blocco globale (sezione critica) per ogni chiamata di funzione Winsock.</span><span class="sxs-lookup"><span data-stu-id="8db37-140">A limitation of this primitive dt\_dll trace facility is that the sample code uses a global lock (critical section) for each Winsock function call.</span></span> <span data-ttu-id="8db37-141">Questa funzionalità non è quindi utile per la gestione delle race condition.</span><span class="sxs-lookup"><span data-stu-id="8db37-141">So this facility is not useful in dealing with race conditions.</span></span> <span data-ttu-id="8db37-142">Il codice di esempio deve essere riscritto in modo sostanziale per rendere questa funzionalità di traccia utile per gestire la maggior parte dei problemi reali di Winsock (sostituendo i blocchi globali).</span><span class="sxs-lookup"><span data-stu-id="8db37-142">The sample code would need to be substantially rewritten to make this trace facility useful for dealing with most real Winsock problems (replacing the global locks).</span></span> <span data-ttu-id="8db37-143">Questo codice di esempio consente agli sviluppatori di tracciare le chiamate di routine, le restituzioni delle procedure, i valori dei parametri e i valori restituiti.</span><span class="sxs-lookup"><span data-stu-id="8db37-143">This sample code does allow developers to trace the procedure calls, procedure returns, parameter values, and return values.</span></span>

<span data-ttu-id="8db37-144">Gli sviluppatori possono utilizzare questo meccanismo primitivo per tracciare le chiamate di routine, le restituzioni delle procedure, i valori dei parametri e i valori restituiti.</span><span class="sxs-lookup"><span data-stu-id="8db37-144">Developers can use this primitive mechanism to trace procedure calls, procedure returns, parameter values, and return values.</span></span> <span data-ttu-id="8db37-145">I valori dei parametri e i valori restituiti possono essere modificati alla chiamata di routine o alla procedura restituita.</span><span class="sxs-lookup"><span data-stu-id="8db37-145">Parameter values and return values can be altered on procedure call or procedure return.</span></span> <span data-ttu-id="8db37-146">Se lo si desidera, è possibile impedire o reindirizzare una chiamata di routine.</span><span class="sxs-lookup"><span data-stu-id="8db37-146">If desired, a procedure call can be prevented or redirected.</span></span> <span data-ttu-id="8db37-147">Grazie all'accesso a questo livello di informazioni e controllo, uno sviluppatore è in grado di isolare in modo più efficace un problema nell'applicazione, *Ws2 \_32.dll* o provider di servizi.</span><span class="sxs-lookup"><span data-stu-id="8db37-147">With access to this level of information and control, a developer is better able to isolate a problem in the application, *Ws2\_32.dll*, or service provider.</span></span>

## <a name="related-topics"></a><span data-ttu-id="8db37-148">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="8db37-148">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8db37-149">Traccia Winsock</span><span class="sxs-lookup"><span data-stu-id="8db37-149">Winsock Tracing</span></span>](winsock-tracing.md)
</dt> </dl>

 

 



