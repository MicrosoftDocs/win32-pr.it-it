---
description: L'astrazione del socket di flusso include il concetto di dati fuori banda (OOB).
ms.assetid: 1a517885-2688-421f-9389-2d329e5c3d56
title: Protocol-Independent dati fuori banda
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a929f4273d9cc9f268a296b711649406622ca9b4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104343471"
---
# <a name="protocol-independent-out-of-band-data"></a><span data-ttu-id="056c2-103">Protocol-Independent dati fuori banda</span><span class="sxs-lookup"><span data-stu-id="056c2-103">Protocol-Independent Out-of-Band Data</span></span>

<span data-ttu-id="056c2-104">L'astrazione del socket di flusso include il concetto di dati fuori banda (OOB).</span><span class="sxs-lookup"><span data-stu-id="056c2-104">The stream socket abstraction includes the notion of out of band (OOB) data.</span></span> <span data-ttu-id="056c2-105">Molti protocolli consentono di contrassegnare le parti dei dati in arrivo come speciali e possono essere recapitati all'utente fuori dalla sequenza normale.</span><span class="sxs-lookup"><span data-stu-id="056c2-105">Many protocols allow portions of incoming data to be marked as special in some way, and these special data blocks can be delivered to the user out of the normal sequence.</span></span> <span data-ttu-id="056c2-106">Gli esempi includono i dati accelerati in X. 25 e altri protocolli OSI e i dati urgenti nell'uso di TCP in BSD UNIX.</span><span class="sxs-lookup"><span data-stu-id="056c2-106">Examples include expedited data in X.25 and other OSI protocols, and urgent data in BSD UNIX's use of TCP.</span></span> <span data-ttu-id="056c2-107">Nella sezione seguente viene descritta la gestione dei dati di OOB in modo indipendente dal protocollo.</span><span class="sxs-lookup"><span data-stu-id="056c2-107">The following section describes OOB data handling in a protocol-independent manner.</span></span> <span data-ttu-id="056c2-108">Una descrizione dei dati di OOB implementati con i dati urgenti TCP segue la spiegazione indipendente dal protocollo.</span><span class="sxs-lookup"><span data-stu-id="056c2-108">A discussion of OOB data implemented using TCP urgent data follows the protocol-independent explanation.</span></span> <span data-ttu-id="056c2-109">In ogni discussione, l'uso di [**ricezione**](/windows/desktop/api/winsock/nf-winsock-recv) implica anche [**recvfrom**](/windows/desktop/api/winsock/nf-winsock-recvfrom), [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv)e [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom)e i riferimenti a [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) si applicano anche a [**WSAEventSelect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaeventselect).</span><span class="sxs-lookup"><span data-stu-id="056c2-109">In each discussion, the use of [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) also implies [**recvfrom**](/windows/desktop/api/winsock/nf-winsock-recvfrom), [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), and [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom), and references to [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) also apply to [**WSAEventSelect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaeventselect).</span></span>

## <a name="protocol-independent-oob-data"></a><span data-ttu-id="056c2-110">Dati OOB indipendenti dal protocollo</span><span class="sxs-lookup"><span data-stu-id="056c2-110">Protocol Independent OOB Data</span></span>

<span data-ttu-id="056c2-111">I dati OOB sono un canale di trasmissione logicamente indipendente associato a ogni coppia di socket di flusso connessi.</span><span class="sxs-lookup"><span data-stu-id="056c2-111">OOB data is a logically independent transmission channel associated with each pair of connected stream sockets.</span></span> <span data-ttu-id="056c2-112">I dati di OOB possono essere recapitati all'utente indipendentemente dai dati normali.</span><span class="sxs-lookup"><span data-stu-id="056c2-112">OOB data may be delivered to the user independently of normal data.</span></span> <span data-ttu-id="056c2-113">L'astrazione definisce che le funzionalità dei dati OOB devono supportare il recapito affidabile di almeno un blocco di dati OOB alla volta.</span><span class="sxs-lookup"><span data-stu-id="056c2-113">The abstraction defines that the OOB data facilities must support the reliable delivery of at least one OOB data block at a time.</span></span> <span data-ttu-id="056c2-114">Questo blocco di dati può contenere almeno un byte di dati e almeno un blocco di dati OOB può essere recapitato all'utente in un qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="056c2-114">This data block can contain at least one byte of data, and at least one OOB data block can be pending delivery to the user at any one time.</span></span> <span data-ttu-id="056c2-115">Per i protocolli di comunicazione che supportano la segnalazione in banda (ad esempio TCP, in cui i dati urgenti vengono recapitati in sequenza con i dati normali), il sistema estrae in genere i dati OOB dal flusso di dati normale e li archivia separatamente (lasciando un gap nel flusso di dati normale).</span><span class="sxs-lookup"><span data-stu-id="056c2-115">For communications protocols that support in-band signaling (such as TCP, where the urgent data is delivered in sequence with the normal data), the system normally extracts the OOB data from the normal data stream and stores it separately (leaving a gap in the normal data stream).</span></span> <span data-ttu-id="056c2-116">Ciò consente agli utenti di scegliere tra la ricezione dei dati di OOB nell'ordine e la ricezione fuori sequenza senza dover memorizzare nel buffer tutti i dati interessati.</span><span class="sxs-lookup"><span data-stu-id="056c2-116">This allows users to choose between receiving the OOB data in order and receiving it out of sequence without having to buffer all the intervening data.</span></span> <span data-ttu-id="056c2-117">È possibile leggere i dati fuori banda (OOB).</span><span class="sxs-lookup"><span data-stu-id="056c2-117">It is possible to peek at out-of-band (OOB) data.</span></span>

<span data-ttu-id="056c2-118">Un utente può determinare se i dati di OOB sono in attesa di essere letti tramite la funzione [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket) o [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) con il comando IOCTL **SIOCATMARK** .</span><span class="sxs-lookup"><span data-stu-id="056c2-118">A user can determine if any OOB data is waiting to be read using the [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket) or [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) function with the **SIOCATMARK** IOCTL.</span></span> <span data-ttu-id="056c2-119">Per i protocolli in cui il concetto di posizione del blocco di dati OOB all'interno del flusso di dati normale è significativo, ad esempio TCP, un provider di servizi Windows Sockets mantiene un marcatore concettuale che indica la posizione dell'ultimo byte dei dati OOB all'interno del flusso di dati normale.</span><span class="sxs-lookup"><span data-stu-id="056c2-119">For protocols where the concept of the position of the OOB data block within the normal data stream is meaningful, such as TCP, a Windows Sockets service provider maintains a conceptual marker indicating the position of the last byte of OOB data within the normal data stream.</span></span> <span data-ttu-id="056c2-120">Questa operazione non è necessaria per l'implementazione delle funzioni **ioctlsocket** o **WSAIoctl** che supportano **SIOCATMARK**.</span><span class="sxs-lookup"><span data-stu-id="056c2-120">This is not necessary for the implementation of the **ioctlsocket** or **WSAIoctl** functions that support **SIOCATMARK**.</span></span> <span data-ttu-id="056c2-121">La presenza o l'assenza di dati OOB è obbligatoria.</span><span class="sxs-lookup"><span data-stu-id="056c2-121">The presence or absence of OOB data is all is required.</span></span>

<span data-ttu-id="056c2-122">Per i protocolli in cui il concetto di posizione del blocco di dati OOB all'interno del flusso di dati normale è significativo, un'applicazione potrebbe elaborare dati fuori banda inline, come parte del normale flusso di dati.</span><span class="sxs-lookup"><span data-stu-id="056c2-122">For protocols where the concept of the position of the OOB data block within the normal data stream is meaningful, an application might process out-of-band data inline, as part of the normal data stream.</span></span> <span data-ttu-id="056c2-123">Questa operazione viene eseguita impostando l'opzione socket in modo che \_ OOBINLINE con la funzione [**setsockopt**](/windows/desktop/api/winsock/nf-winsock-setsockopt) .</span><span class="sxs-lookup"><span data-stu-id="056c2-123">This is achieved by setting the socket option SO\_OOBINLINE with the [**setsockopt**](/windows/desktop/api/winsock/nf-winsock-setsockopt) function.</span></span> <span data-ttu-id="056c2-124">Per altri protocolli in cui i blocchi di dati OOB sono realmente indipendenti dal flusso di dati normale, il tentativo di impostare questo \_ OOBINLINE genera un errore.</span><span class="sxs-lookup"><span data-stu-id="056c2-124">For other protocols where the OOB data blocks are truly independent of the normal data stream, attempting to set SO\_OOBINLINE results in an error.</span></span> <span data-ttu-id="056c2-125">Un'applicazione può usare la funzione [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket) o [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) con l'IOCTL **SIOCATMARK** per determinare se sono presenti dati OOB non letti che precedono il contrassegno.</span><span class="sxs-lookup"><span data-stu-id="056c2-125">An application can use the [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket) or [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) function with the **SIOCATMARK** IOCTL to determine whether there is any unread OOB data preceding the mark.</span></span> <span data-ttu-id="056c2-126">Ad esempio, può utilizzare queste informazioni per risincronizzare con il relativo peer garantendo che tutti i dati fino al contrassegno nel flusso di dati vengano eliminati quando appropriato.</span><span class="sxs-lookup"><span data-stu-id="056c2-126">For example, it can use this information to resynchronize with its peer by ensuring that all data up to the mark in the data stream is discarded when appropriate.</span></span>

<span data-ttu-id="056c2-127">Con \_ OOBINLINE disabilitato (impostazione predefinita):</span><span class="sxs-lookup"><span data-stu-id="056c2-127">With SO\_OOBINLINE disabled (the default setting):</span></span>

-   <span data-ttu-id="056c2-128">Windows Sockets Invia una notifica all'applicazione di un \_ evento FD OOB, se l'applicazione registrata per la notifica con [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect), nello stesso modo in \_ cui FD Read viene utilizzata per notificare la presenza di dati normali.</span><span class="sxs-lookup"><span data-stu-id="056c2-128">Windows Sockets notifies an application of an FD\_OOB event, if the application registered for notification with [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect), in exactly the same way FD\_READ is used to notify of the presence of normal data.</span></span> <span data-ttu-id="056c2-129">Ovvero, l' \_ OOB FD viene pubblicato quando i dati di OOB arrivano senza dati OOB accodati in precedenza.</span><span class="sxs-lookup"><span data-stu-id="056c2-129">That is, FD\_OOB is posted when OOB data arrives with no OOB data previously queued.</span></span> <span data-ttu-id="056c2-130">Il \_ OOB FD viene pubblicato anche quando i dati vengono letti usando il \_ flag msg OOB mentre alcuni dati OOB rimangono in coda dopo che è stata restituita l'operazione di lettura.</span><span class="sxs-lookup"><span data-stu-id="056c2-130">The FD\_OOB is also posted when data is read using the MSG\_OOB flag while some OOB data remains queued after the read operation has returned.</span></span> <span data-ttu-id="056c2-131">\_I messaggi di lettura FD non vengono inviati per i dati OOB.</span><span class="sxs-lookup"><span data-stu-id="056c2-131">FD\_READ messages are not posted for OOB data.</span></span>
-   <span data-ttu-id="056c2-132">Windows Sockets restituisce da [**Select**](/windows/desktop/api/Winsock2/nf-winsock2-select) con il set di socket *exceptfds* appropriato se i dati OOB sono accodati nel socket.</span><span class="sxs-lookup"><span data-stu-id="056c2-132">Windows Sockets returns from [**select**](/windows/desktop/api/Winsock2/nf-winsock2-select) with the appropriate *exceptfds* socket set if OOB data is queued on the socket.</span></span>
-   <span data-ttu-id="056c2-133">L'applicazione può chiamare [**ricezione**](/windows/desktop/api/winsock/nf-winsock-recv) con msg \_ OOB per leggere il blocco di dati urgente in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="056c2-133">The application can call [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) with MSG\_OOB to read the urgent data block at any time.</span></span> <span data-ttu-id="056c2-134">Il blocco dei dati di OOB salta la coda.</span><span class="sxs-lookup"><span data-stu-id="056c2-134">The block of OOB data jumps the queue.</span></span>
-   <span data-ttu-id="056c2-135">L'applicazione può chiamare [**ricezione**](/windows/desktop/api/winsock/nf-winsock-recv) senza MSG \_ OOB per leggere il flusso di dati normale.</span><span class="sxs-lookup"><span data-stu-id="056c2-135">The application can call [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) without MSG\_OOB to read the normal data stream.</span></span> <span data-ttu-id="056c2-136">Il blocco di dati OOB non viene visualizzato nel flusso di dati con dati normali.</span><span class="sxs-lookup"><span data-stu-id="056c2-136">The OOB data block does not appear in the data stream with normal data.</span></span> <span data-ttu-id="056c2-137">Se i dati OOB rimangono dopo qualsiasi chiamata a **ricezione**, Windows Sockets Invia una notifica all'applicazione con FD \_ OOB o con *exceptfds* quando si usa [**Select**](/windows/desktop/api/Winsock2/nf-winsock2-select).</span><span class="sxs-lookup"><span data-stu-id="056c2-137">If OOB data remains after any call to **recv**, Windows Sockets notifies the application with FD\_OOB or with *exceptfds* when using [**select**](/windows/desktop/api/Winsock2/nf-winsock2-select).</span></span>
-   <span data-ttu-id="056c2-138">Per i protocolli in cui i dati di OOB hanno una posizione all'interno del flusso di dati normale, una singola operazione [**ricezione**](/windows/desktop/api/winsock/nf-winsock-recv) non si estende in tale posizione.</span><span class="sxs-lookup"><span data-stu-id="056c2-138">For protocols where the OOB data has a position within the normal data stream, a single [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) operation does not span that position.</span></span> <span data-ttu-id="056c2-139">Un **ricezione** restituisce i dati normali prima del contrassegno e un secondo **ricezione** è necessario per iniziare a leggere i dati dopo il contrassegno.</span><span class="sxs-lookup"><span data-stu-id="056c2-139">One **recv** returns the normal data before the mark, and a second **recv** is required to begin reading data after the mark.</span></span>

<span data-ttu-id="056c2-140">Con \_ OOBINLINE abilitato:</span><span class="sxs-lookup"><span data-stu-id="056c2-140">With SO\_OOBINLINE enabled:</span></span>

-   <span data-ttu-id="056c2-141">\_I messaggi FD OOB non vengono inviati per i dati OOB.</span><span class="sxs-lookup"><span data-stu-id="056c2-141">FD\_OOB messages are not posted for OOB data.</span></span> <span data-ttu-id="056c2-142">I dati OOB vengono considerati normali allo scopo delle funzioni [**Select**](/windows/desktop/api/Winsock2/nf-winsock2-select) e [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) e indicati impostando il socket in *readfds* o inviando rispettivamente un messaggio di \_ lettura FD.</span><span class="sxs-lookup"><span data-stu-id="056c2-142">OOB data is treated as normal for the purpose of the [**select**](/windows/desktop/api/Winsock2/nf-winsock2-select) and [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) functions, and indicated by setting the socket in *readfds* or by sending an FD\_READ message respectively.</span></span>
-   <span data-ttu-id="056c2-143">L'applicazione non può chiamare [**ricezione**](/windows/desktop/api/winsock/nf-winsock-recv) con il \_ flag msg OOB impostato per leggere il blocco di dati OOB.</span><span class="sxs-lookup"><span data-stu-id="056c2-143">The application cannot call [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) with the MSG\_OOB flag set to read the OOB data block.</span></span> <span data-ttu-id="056c2-144">Viene restituito il codice di errore WSAEINVAL.</span><span class="sxs-lookup"><span data-stu-id="056c2-144">The error code WSAEINVAL is returned.</span></span>
-   <span data-ttu-id="056c2-145">L'applicazione può chiamare [**ricezione**](/windows/desktop/api/winsock/nf-winsock-recv) senza il \_ set di flag OOB msg.</span><span class="sxs-lookup"><span data-stu-id="056c2-145">The application can call [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) without the MSG\_OOB flag set.</span></span> <span data-ttu-id="056c2-146">Tutti i dati di OOB vengono recapitati nell'ordine corretto nel flusso di dati normale.</span><span class="sxs-lookup"><span data-stu-id="056c2-146">Any OOB data is delivered in its correct order within the normal data stream.</span></span> <span data-ttu-id="056c2-147">I dati di OOB non vengono mai combinati con i dati normali.</span><span class="sxs-lookup"><span data-stu-id="056c2-147">OOB data is never mixed with normal data.</span></span> <span data-ttu-id="056c2-148">Devono essere presenti tre richieste di lettura per superare i dati OOB.</span><span class="sxs-lookup"><span data-stu-id="056c2-148">There must be three read requests to get past the OOB data.</span></span> <span data-ttu-id="056c2-149">Il primo restituisce i dati normali prima del blocco di dati OOB, il secondo restituisce i dati OOB, il terzo restituisce i dati normali che seguono i dati OOB.</span><span class="sxs-lookup"><span data-stu-id="056c2-149">The first returns the normal data prior to the OOB data block, the second returns the OOB data, the third returns the normal data following the OOB data.</span></span> <span data-ttu-id="056c2-150">In altre parole, vengono conservati i limiti dei blocchi di dati OOB.</span><span class="sxs-lookup"><span data-stu-id="056c2-150">In other words, the OOB data block boundaries are preserved.</span></span>

<span data-ttu-id="056c2-151">La routine [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) è particolarmente adatta per la gestione della notifica della presenza di dati fuori banda quando \_ OOBINLINE è disattivato.</span><span class="sxs-lookup"><span data-stu-id="056c2-151">The [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) routine is particularly well suited to handling notification of the presence of out-of-band-data when SO\_OOBINLINE is off.</span></span>

## <a name="oob-data-in-tcp"></a><span data-ttu-id="056c2-152">OOB dati in TCP</span><span class="sxs-lookup"><span data-stu-id="056c2-152">OOB Data in TCP</span></span>

> [!IMPORTANT]
> <span data-ttu-id="056c2-153">La seguente discussione sui dati fuori banda (OOB), implementati con i dati urgenti TCP, segue il modello usato nella distribuzione del software Berkeley.</span><span class="sxs-lookup"><span data-stu-id="056c2-153">The following discussion of out-of-band data (OOB), implemented using TCP urgent data, follows the model used in the Berkeley software distribution.</span></span> <span data-ttu-id="056c2-154">Gli utenti e gli implementatori devono tenere presente quanto segue:</span><span class="sxs-lookup"><span data-stu-id="056c2-154">Users and implementers should be aware that:</span></span>

 

-   <span data-ttu-id="056c2-155">Attualmente sono presenti due interpretazioni in conflitto di [RFC 793](https://www.ietf.org/rfc/rfc793.txt) (in cui è stato introdotto il concetto).</span><span class="sxs-lookup"><span data-stu-id="056c2-155">There are, at present, two conflicting interpretations of [RFC 793](https://www.ietf.org/rfc/rfc793.txt) (where the concept is introduced).</span></span>
-   <span data-ttu-id="056c2-156">L'implementazione dei dati di OOB in Berkeley Software Distribution (BSD) non è conforme ai requisiti dell'host specificati nella [specifica RFC 1122](https://www.ietf.org/rfc/rfc1122.txt).</span><span class="sxs-lookup"><span data-stu-id="056c2-156">The implementation of OOB data in the Berkeley Software Distribution (BSD) does not conform to the Host Requirements specified in [RFC 1122](https://www.ietf.org/rfc/rfc1122.txt).</span></span>

    <span data-ttu-id="056c2-157">In particolare, il puntatore urgente TCP in BSD punta al byte dopo il byte di dati urgente e un puntatore di urgenza TCP conforme a RFC punta al byte di dati urgente.</span><span class="sxs-lookup"><span data-stu-id="056c2-157">Specifically, the TCP urgent pointer in BSD points to the byte after the urgent data byte, and an RFC-compliant TCP urgent pointer points to the urgent data byte.</span></span> <span data-ttu-id="056c2-158">Di conseguenza, se un'applicazione invia dati urgenti da un'implementazione compatibile con BSD a un'implementazione compatibile con RFC 1122, il ricevitore legge il byte di dati urgente errato (legge il byte posizionato dopo il byte corretto nel flusso di dati come byte di dati urgente).</span><span class="sxs-lookup"><span data-stu-id="056c2-158">As a result, if an application sends urgent data from a BSD-compatible implementation to an implementation compatible with RFC 1122, the receiver reads the wrong urgent data byte (it reads the byte located after the correct byte in the data stream as the urgent data byte).</span></span>

    <span data-ttu-id="056c2-159">Per ridurre al minimo i problemi di interoperabilità, è consigliabile che i writer di applicazioni non usino i dati OOB a meno che non sia necessario per interagire con un servizio esistente.</span><span class="sxs-lookup"><span data-stu-id="056c2-159">To minimize interoperability problems, applications writers are advised not to use OOB data unless this is required to interoperate with an existing service.</span></span> <span data-ttu-id="056c2-160">I fornitori di Windows Sockets vengono invitati a documentare la semantica di OOB (BSD o RFC 1122) implementata dal prodotto.</span><span class="sxs-lookup"><span data-stu-id="056c2-160">Windows Sockets suppliers are urged to document the OOB semantics (BSD or RFC 1122) that their product implements.</span></span>

<span data-ttu-id="056c2-161">L'arrivo di un segmento TCP con il flag URG (per urgente) impostato indica l'esistenza di un singolo byte di dati OOB all'interno del flusso di dati TCP.</span><span class="sxs-lookup"><span data-stu-id="056c2-161">The arrival of a TCP segment with the URG (for urgent) flag set indicates the existence of a single byte of OOB data within the TCP data stream.</span></span> <span data-ttu-id="056c2-162">Le dimensioni del blocco di dati OOB sono pari a un byte.</span><span class="sxs-lookup"><span data-stu-id="056c2-162">The OOB data block is one byte in size.</span></span> <span data-ttu-id="056c2-163">Il puntatore urgente è un offset positivo rispetto al numero di sequenza corrente nell'intestazione TCP che indica la posizione del blocco di dati OOB (in modo ambiguo, come indicato nel precedente).</span><span class="sxs-lookup"><span data-stu-id="056c2-163">The urgent pointer is a positive offset from the current sequence number in the TCP header that indicates the location of the OOB data block (ambiguously, as noted in the preceding).</span></span> <span data-ttu-id="056c2-164">Potrebbe, quindi, puntare a dati che non sono ancora stati ricevuti.</span><span class="sxs-lookup"><span data-stu-id="056c2-164">It might, therefore, point to data that has not yet been received.</span></span>

<span data-ttu-id="056c2-165">Se quindi \_ OOBINLINE è disabilitato (impostazione predefinita) quando arriva il segmento TCP contenente il byte a cui punta il puntatore urgente, il blocco di dati OOB (un byte) viene rimosso dal flusso di dati e memorizzato nel buffer.</span><span class="sxs-lookup"><span data-stu-id="056c2-165">If SO\_OOBINLINE is disabled (the default) when the TCP segment containing the byte pointed to by the urgent pointer arrives, the OOB data block (one byte) is removed from the data stream and buffered.</span></span> <span data-ttu-id="056c2-166">Se viene ricevuto un segmento TCP successivo con il flag urgente impostato (e un nuovo puntatore urgente), il byte OOB attualmente in coda può andare perduto perché viene sostituito dal nuovo blocco di dati OOB (come si verifica in Berkeley Software Distribution).</span><span class="sxs-lookup"><span data-stu-id="056c2-166">If a subsequent TCP segment arrives with the urgent flag set (and a new urgent pointer), the OOB byte currently queued can be lost as it is replaced by the new OOB data block (as occurs in Berkeley Software Distribution).</span></span> <span data-ttu-id="056c2-167">Tuttavia, non viene mai sostituito nel flusso di dati.</span><span class="sxs-lookup"><span data-stu-id="056c2-167">It is never replaced in the data stream, however.</span></span>

<span data-ttu-id="056c2-168">Con \_ l'abilitazione di OOBINLINE, i dati urgenti rimangono nel flusso di dati.</span><span class="sxs-lookup"><span data-stu-id="056c2-168">With SO\_OOBINLINE enabled, the urgent data remains in the data stream.</span></span> <span data-ttu-id="056c2-169">Di conseguenza, il blocco di dati OOB non viene mai perso quando arriva un nuovo segmento TCP contenente dati urgenti.</span><span class="sxs-lookup"><span data-stu-id="056c2-169">As a result, the OOB data block is never lost when a new TCP segment arrives containing urgent data.</span></span> <span data-ttu-id="056c2-170">Il contrassegno di dati OOB esistente viene aggiornato alla nuova posizione.</span><span class="sxs-lookup"><span data-stu-id="056c2-170">The existing OOB data mark is updated to the new position.</span></span>

> [!Note]  
> <span data-ttu-id="056c2-171">Quando \_ è impostata l'opzione di socket OOBINLINE, il IOCTL SIOCATMARK restituisce sempre **true** e i dati OOB vengono restituiti all'utente come dati normali.</span><span class="sxs-lookup"><span data-stu-id="056c2-171">When the SO\_OOBINLINE socket option is set, the SIOCATMARK IOCTL always returns **TRUE**, and OOB data is returned to the user as normal data.</span></span>

 

 

 



