---
description: Quando viene installata una nuova classe di servizio, è necessario preparare e fornire una struttura WSASERVICECLASSINFO. Questa struttura è costituita anche da sottostrutture che contengono una serie di parametri che si applicano a spazi dei nomi specifici.
ms.assetid: fb225e0c-a0c7-44e1-80fb-7b924b371afa
title: Strutture di dati della classe di servizio in SPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b5bf249c7437751e7c6d08b2fdf3830e92921ce7
ms.sourcegitcommit: 5b98bf8c68922f8f03c14f793fbe17504900559c
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/12/2021
ms.locfileid: "104570658"
---
# <a name="service-class-data-structures-in-the-spi"></a><span data-ttu-id="e1d3e-104">Strutture di dati della classe di servizio in SPI</span><span class="sxs-lookup"><span data-stu-id="e1d3e-104">Service Class Data Structures in the SPI</span></span>

<span data-ttu-id="e1d3e-105">Quando viene installata una nuova classe di servizio, è necessario preparare e fornire una struttura [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) .</span><span class="sxs-lookup"><span data-stu-id="e1d3e-105">When a new service class is installed, a [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) structure must be prepared and supplied.</span></span> <span data-ttu-id="e1d3e-106">Questa struttura è costituita anche da sottostrutture che contengono una serie di parametri che si applicano a spazi dei nomi specifici.</span><span class="sxs-lookup"><span data-stu-id="e1d3e-106">This structure also consists of substructures that contain a series of parameters that apply to specific namespaces.</span></span>

![Diagramma che illustra la struttura, le sottostrutture e i parametri WSASERVICECLASSINFO che si applicano a spazi dei nomi specifici.](images/ovrvw3-3.png)

<span data-ttu-id="e1d3e-108">Per ogni classe di servizio è presente una sola struttura [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) .</span><span class="sxs-lookup"><span data-stu-id="e1d3e-108">For each service class, there is a single [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) structure.</span></span> <span data-ttu-id="e1d3e-109">All'interno della struttura **WSASERVICECLASSINFO** , l'identificatore univoco della classe del servizio è contenuto in **lpServiceClassId** e a una stringa di visualizzazione associata viene fatto riferimento da **lpServiceClassName**.</span><span class="sxs-lookup"><span data-stu-id="e1d3e-109">Within the **WSASERVICECLASSINFO** structure, the service class's unique identifier is contained in **lpServiceClassId**, and an associated display string is referenced by **lpServiceClassName**.</span></span>

<span data-ttu-id="e1d3e-110">Il membro **lpClassInfos** nella struttura [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) fa riferimento a una matrice di strutture [**WSANSCLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsansclassinfow) , ciascuna delle quali fornisce un parametro denominato e tipizzato che si applica a uno spazio dei nomi specificato.</span><span class="sxs-lookup"><span data-stu-id="e1d3e-110">The **lpClassInfos** member in the [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) structure references an array of [**WSANSCLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsansclassinfow) structures, each of which supplies a named and typed parameter that applies to a specified namespace.</span></span> <span data-ttu-id="e1d3e-111">Esempi di valori per il membro **lpszName** includono: SAPID, TCPPort, portaUDP e così via. Queste stringhe sono in genere specifiche dello spazio dei nomi identificato in **dwNameSpace**.</span><span class="sxs-lookup"><span data-stu-id="e1d3e-111">Examples of values for the **lpszName** member include: SAPID, TCPPORT, UDPPORT, etc. These strings are generally specific to the namespace identified in **dwNameSpace**.</span></span> <span data-ttu-id="e1d3e-112">I valori tipici per **dwValueType** potrebbero essere reg \_ DWORD, reg \_ SZ e così via. Il membro **dwValueSize** indica la lunghezza dell'elemento dati a cui punta **lpValue**.</span><span class="sxs-lookup"><span data-stu-id="e1d3e-112">Typical values for **dwValueType** might be REG\_DWORD, REG\_SZ, etc. The **dwValueSize** member indicates the length of the data item pointed to by **lpValue**.</span></span>

<span data-ttu-id="e1d3e-113">L'intera raccolta di dati rappresentati in una struttura [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) viene fornita a ogni provider dello spazio dei nomi tramite [**NSPInstallServiceClass**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspinstallserviceclass).</span><span class="sxs-lookup"><span data-stu-id="e1d3e-113">The entire collection of data represented in a [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) structure is provided to each namespace provider via [**NSPInstallServiceClass**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspinstallserviceclass).</span></span> <span data-ttu-id="e1d3e-114">Ogni singolo provider dello spazio dei nomi quindi setaccia l'elenco di strutture [**WSANSCLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsansclassinfow) e mantiene le informazioni applicabili.</span><span class="sxs-lookup"><span data-stu-id="e1d3e-114">Each individual namespace provider then sifts through the list of [**WSANSCLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsansclassinfow) structures and retain the information applicable to it.</span></span> <span data-ttu-id="e1d3e-115">Questa architettura prevede anche l'esistenza futura di un provider speciale per lo spazio dei nomi che conserva tutte le informazioni dello schema della classe di servizio per tutti gli spazi dei nomi.</span><span class="sxs-lookup"><span data-stu-id="e1d3e-115">This architecture also envisions the future existence of a special namespace provider that would retain all of the service class schema information for all of the namespaces.</span></span> <span data-ttu-id="e1d3e-116">Il \_32.dll WS2 esegue una query su questo provider per ottenere i dati **WSASERVICECLASSINFO** necessari per fornire ai provider dello spazio dei nomi quando viene richiamato [**NSPLookupServiceBegin**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnsplookupservicebegin) per avviare una query e quando [**NSPSetService**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspsetservice) viene richiamato per registrare un servizio.</span><span class="sxs-lookup"><span data-stu-id="e1d3e-116">The Ws2\_32.dll would query this provider to obtain the **WSASERVICECLASSINFO** data needed to supply to namespace providers when [**NSPLookupServiceBegin**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnsplookupservicebegin) is invoked to initiate a query, and when [**NSPSetService**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspsetservice) is invoked to register a service.</span></span> <span data-ttu-id="e1d3e-117">Il provider dello spazio dei nomi non deve basarsi su questa funzionalità per il tempo e deve disporre di un metodo specifico del provider per ottenere le informazioni necessarie sullo schema della classe di servizio.</span><span class="sxs-lookup"><span data-stu-id="e1d3e-117">Namespace provider should not rely on this capability for the time being, and should instead have a provider-specific means to obtain any needed service class schema information.</span></span> <span data-ttu-id="e1d3e-118">In assenza di un provider che archivia tutti gli schemi della classe di servizio per tutti gli spazi dei nomi, il \_32.dll WS2 utilizzerà [**NSPGetServiceClassInfo**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspgetserviceclassinfo) per ottenere tali informazioni da ogni singolo provider dello spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="e1d3e-118">In the absence of a provider that stores all service class schema for all namespaces, the Ws2\_32.dll will use [**NSPGetServiceClassInfo**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspgetserviceclassinfo) to obtain such information from each individual namespace provider.</span></span>

 

 



