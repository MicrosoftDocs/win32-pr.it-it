---
description: Windows Sockets 2 offre un set di operazioni espanse che possono essere eseguite in modo coincidente con la creazione di una connessione socket. I requisiti del provider di servizi per l'implementazione di queste funzionalità sono descritti di seguito.
ms.assetid: fbc7055e-ea25-4d17-8039-f0fef300353c
title: Funzionalità avanzate al momento della connessione
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d33c6d7ee928fe7e97f535363e9e842285eef7fe
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104129199"
---
# <a name="enhanced-functionality-at-connect-time"></a><span data-ttu-id="553c6-104">Funzionalità avanzate al momento della connessione</span><span class="sxs-lookup"><span data-stu-id="553c6-104">Enhanced Functionality at Connect Time</span></span>

<span data-ttu-id="553c6-105">Windows Sockets 2 offre un set di operazioni espanse che possono essere eseguite in modo coincidente con la creazione di una connessione socket.</span><span class="sxs-lookup"><span data-stu-id="553c6-105">Windows Sockets 2 offers an expanded set of operations that can occur coincident to establishing a socket connection.</span></span> <span data-ttu-id="553c6-106">I requisiti del provider di servizi per l'implementazione di queste funzionalità sono descritti di seguito.</span><span class="sxs-lookup"><span data-stu-id="553c6-106">The service provider requirements for implementing these features are described below.</span></span>

## <a name="conditional-acceptance"></a><span data-ttu-id="553c6-107">Accettazione condizionale</span><span class="sxs-lookup"><span data-stu-id="553c6-107">Conditional Acceptance</span></span>

<span data-ttu-id="553c6-108">Come descritto in precedenza, [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) richiama una funzione di condizione fornita dal client che usa parametri di input per fornire informazioni sulla richiesta di connessione in sospeso.</span><span class="sxs-lookup"><span data-stu-id="553c6-108">As described previously, [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) invokes a client-supplied condition function that uses input parameters to supply information about the pending connection request.</span></span> <span data-ttu-id="553c6-109">Queste informazioni possono essere usate dal client per accettare o rifiutare una richiesta di connessione in base a informazioni sul chiamante, ad esempio identificatore del chiamante, QoS e così via. Se la funzione Condition restituisce CF \_ Accept, viene creato un nuovo socket con le stesse proprietà del socket in ascolto e viene restituito un handle per il nuovo socket.</span><span class="sxs-lookup"><span data-stu-id="553c6-109">This information can be used by the client to accept or reject a connection request based on caller information such as caller identifier, QoS, etc. If the condition function returns CF\_ACCEPT, a new socket is created with the same properties as the listening socket, and a handle to the new socket is returned.</span></span> <span data-ttu-id="553c6-110">Se la funzione Condition restituisce il \_ rifiuto CF, la richiesta di connessione deve essere rifiutata.</span><span class="sxs-lookup"><span data-stu-id="553c6-110">If the condition function returns CF\_REJECT, the connection request should be rejected.</span></span> <span data-ttu-id="553c6-111">Se la funzione Condition restituisce CF \_ rinvia, la decisione Accept/Reject non può essere eseguita immediatamente e il provider di servizi deve lasciare la richiesta di connessione nella coda di backlog.</span><span class="sxs-lookup"><span data-stu-id="553c6-111">If the condition function returns CF\_DEFER, the accept/reject decision cannot be made immediately, and the service provider must leave the connection request on the backlog queue.</span></span> <span data-ttu-id="553c6-112">Il client deve chiamare di nuovo **WSPAccept** , quando è pronto per prendere una decisione e disporre che la funzione Condition restituisca il valore CF \_ Accept o CF \_ Reject.</span><span class="sxs-lookup"><span data-stu-id="553c6-112">The client must call **WSPAccept** again, when it is ready to make a decision, and arrange for the condition function to return either CF\_ACCEPT or CF\_REJECT.</span></span> <span data-ttu-id="553c6-113">Mentre una richiesta di connessione posticipata si trova nella parte superiore della coda di backlog, il provider di servizi non rilascia altre indicazioni per le richieste di connessione in sospeso.</span><span class="sxs-lookup"><span data-stu-id="553c6-113">While a deferred connection request is at the top of the backlog queue, the service provider does not issue any further indications for pending connection requests.</span></span>

## <a name="exchanging-user-data-at-connect-time"></a><span data-ttu-id="553c6-114">Scambio di dati utente al momento della connessione</span><span class="sxs-lookup"><span data-stu-id="553c6-114">Exchanging User Data at Connect Time</span></span>

<span data-ttu-id="553c6-115">Alcuni protocolli consentono lo scambio di una piccola quantità di dati utente al momento della connessione.</span><span class="sxs-lookup"><span data-stu-id="553c6-115">Some protocols allow a small amount of user data to be exchanged at connect time.</span></span> <span data-ttu-id="553c6-116">Se tali dati sono stati ricevuti dall'host che esegue la connessione, vengono inseriti in un buffer del provider di servizi e un puntatore a questo buffer insieme a un valore length viene fornito al client Winsock SPI attraverso parametri di input per la funzione di condizione [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) .</span><span class="sxs-lookup"><span data-stu-id="553c6-116">If such data has been received from the connecting host, it is placed in a service provider buffer, and a pointer to this buffer along with a length value are supplied to the Winsock SPI client through input parameters to the [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) condition function.</span></span> <span data-ttu-id="553c6-117">Se il client Winsock SPI dispone di dati di risposta da restituire all'host che esegue la connessione, può copiarlo in un buffer fornito dal provider di servizi.</span><span class="sxs-lookup"><span data-stu-id="553c6-117">If the Winsock SPI client has response data to return to the connecting host, it may copy this into a buffer that is supplied by the service provider.</span></span> <span data-ttu-id="553c6-118">Un puntatore a questo buffer e un intero che indica le dimensioni del buffer vengono forniti anche come parametri di input della funzione della condizione (se supportati dal protocollo).</span><span class="sxs-lookup"><span data-stu-id="553c6-118">A pointer to this buffer and an integer indicating buffer size are also supplied as condition function input parameters (if supported by the protocol).</span></span>

## <a name="establishing-socket-groups"></a><span data-ttu-id="553c6-119">Creazione di gruppi di socket</span><span class="sxs-lookup"><span data-stu-id="553c6-119">Establishing Socket Groups</span></span>

<span data-ttu-id="553c6-120">Tutti gli utilizzi dei gruppi di socket sono riservati.</span><span class="sxs-lookup"><span data-stu-id="553c6-120">All use of socket groups is reserved.</span></span>

 

 



