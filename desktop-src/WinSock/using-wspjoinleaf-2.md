---
description: Come indicato in precedenza, WSPJoinLeaf viene usato per aggiungere un nodo foglia a una sessione multipoint.
ms.assetid: 03325f5e-4d4a-405b-b644-3d8c03435e17
title: Uso di WSPJoinLeaf
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ef4426c0d22657b26dcc2217d856865d9ebe98db
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104226077"
---
# <a name="using-wspjoinleaf"></a><span data-ttu-id="857fb-103">Uso di WSPJoinLeaf</span><span class="sxs-lookup"><span data-stu-id="857fb-103">Using WSPJoinLeaf</span></span>

<span data-ttu-id="857fb-104">Come indicato in precedenza, [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) viene usato per aggiungere un nodo foglia a una sessione multipoint.</span><span class="sxs-lookup"><span data-stu-id="857fb-104">As mentioned previously, [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) is used to join a leaf node into a multipoint session.</span></span> <span data-ttu-id="857fb-105">**WSPJoinLeaf** presenta gli stessi parametri e la stessa semantica di [**WSPConnect**](/previous-versions/windows/hardware/network/ff566275(v=vs.85)) , ad eccezione del fatto che restituisce un descrittore di socket (come in [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept)) ed è dotato di un parametro *dwFlags* aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="857fb-105">**WSPJoinLeaf** has the same parameters and semantics as [**WSPConnect**](/previous-versions/windows/hardware/network/ff566275(v=vs.85)) except that it returns a socket descriptor (as in [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept)), and it has an additional *dwFlags* parameter.</span></span> <span data-ttu-id="857fb-106">Il parametro *dwFlags* viene utilizzato per indicare se il socket fungerà solo da mittente, solo come ricevitore o entrambi.</span><span class="sxs-lookup"><span data-stu-id="857fb-106">The *dwFlags* parameter is used to indicate whether the socket will be acting only as a sender, only as a receiver, or both.</span></span> <span data-ttu-id="857fb-107">Solo i socket multipoint possono essere utilizzati per *i* parametri di input in questa funzione.</span><span class="sxs-lookup"><span data-stu-id="857fb-107">Only multipoint sockets may be used for input parameter *s* in this function.</span></span> <span data-ttu-id="857fb-108">Se il socket multipoint è in modalità non di blocco, il descrittore di socket restituito non sarà utilizzabile fino a quando non viene ricevuta un'indicazione di connessione FD corrispondente \_ .</span><span class="sxs-lookup"><span data-stu-id="857fb-108">If the multipoint socket is in the nonblocking mode, the returned socket descriptor will not be usable until after a corresponding FD\_CONNECT indication has been received.</span></span> <span data-ttu-id="857fb-109">Un'applicazione radice in una sessione MultiPoint può chiamare **WSPJoinLeaf** una o più volte per aggiungere un numero di nodi foglia, ma al massimo una richiesta di connessione multipoint potrebbe essere in attesa alla volta.</span><span class="sxs-lookup"><span data-stu-id="857fb-109">A root application in a multipoint session may call **WSPJoinLeaf** one or more times in order to add a number of leaf nodes, however at most one multipoint connection request may be outstanding at a time.</span></span>

<span data-ttu-id="857fb-110">Il descrittore di socket restituito da [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) è diverso a seconda che il descrittore di socket di input, *s*, sia una \_ radice c o una \_ foglia c.</span><span class="sxs-lookup"><span data-stu-id="857fb-110">The socket descriptor returned by [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) is different depending on whether the input socket descriptor, *s*, is a c\_root or a c\_leaf.</span></span> <span data-ttu-id="857fb-111">Quando viene usato con un \_ socket radice c, il parametro *Name* designa un particolare nodo foglia da aggiungere e il descrittore di socket restituito è un \_ socket foglia c corrispondente al nodo foglia appena aggiunto.</span><span class="sxs-lookup"><span data-stu-id="857fb-111">When used with a c\_root socket, the *name* parameter designates a particular leaf node to be added and the returned socket descriptor is a c\_leaf socket corresponding to the newly added leaf node.</span></span> <span data-ttu-id="857fb-112">Non è destinato a essere utilizzato per lo scambio di dati MultiPoint, ma viene invece utilizzato per ricevere le indicazioni relative agli eventi di rete (ad esempio, FD \_ Close) per la connessione esistente alla foglia c particolare \_ .</span><span class="sxs-lookup"><span data-stu-id="857fb-112">It is not intended to be used for exchange of multipoint data, but rather is used to receive network event indications (for example FD\_CLOSE) for the connection that exists to the particular c\_leaf.</span></span> <span data-ttu-id="857fb-113">Alcune implementazioni multipoint possono anche consentire l'uso di questo socket per le chat laterali tra la radice e un singolo nodo foglia.</span><span class="sxs-lookup"><span data-stu-id="857fb-113">Some multipoint implementations may also allow this socket to be used for side chats between the root and an individual leaf node.</span></span> <span data-ttu-id="857fb-114">\_È necessario assegnare un'indicazione di chiusura FD per questo socket se il nodo foglia corrispondente chiama [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) per eliminare la sessione multipoint.</span><span class="sxs-lookup"><span data-stu-id="857fb-114">An FD\_CLOSE indication should be given for this socket if the corresponding leaf node calls [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) to drop out of the multipoint session.</span></span> <span data-ttu-id="857fb-115">In modo simmetrico, richiamando **WSPCloseSocket** sul \_ socket foglia c restituito da [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) , il socket nel nodo foglia corrispondente otterrà la notifica di \_ chiusura FD.</span><span class="sxs-lookup"><span data-stu-id="857fb-115">Symmetrically, invoking **WSPCloseSocket** on the c\_leaf socket returned from [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) will cause the socket in the corresponding leaf node to get FD\_CLOSE notification.</span></span>

<span data-ttu-id="857fb-116">Quando [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) viene richiamato con un \_ socket foglia c, il parametro *Name* contiene l'indirizzo dell'applicazione radice (per uno schema di controllo radice) o una sessione multipoint esistente (schema di controllo non radice) e il descrittore di socket restituito è uguale al descrittore di socket di input.</span><span class="sxs-lookup"><span data-stu-id="857fb-116">When [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) is invoked with a c\_leaf socket, the *name* parameter contains the address of the root application (for a rooted control scheme) or an existing multipoint session (nonrooted control scheme), and the returned socket descriptor is the same as the input socket descriptor.</span></span> <span data-ttu-id="857fb-117">In uno schema di controllo con radice, il client radice inserisce il relativo \_ socket radice c in modalità di ascolto chiamando [**WSPListen**](/previous-versions/windows/hardware/network/ff566297(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="857fb-117">In a rooted control scheme, the root client would put its c\_root socket in the listening mode by calling [**WSPListen**](/previous-versions/windows/hardware/network/ff566297(v=vs.85)).</span></span> <span data-ttu-id="857fb-118">La notifica di \_ accettazione FD standard verrà recapitata quando il nodo foglia richiede di aggiungersi alla sessione multipoint.</span><span class="sxs-lookup"><span data-stu-id="857fb-118">The standard FD\_ACCEPT notification will be delivered when the leaf node requests to join itself to the multipoint session.</span></span> <span data-ttu-id="857fb-119">Il client radice usa la consueta funzione [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) per ammettere il nuovo nodo foglia.</span><span class="sxs-lookup"><span data-stu-id="857fb-119">The root client uses the usual [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) function to admit the new leaf node.</span></span> <span data-ttu-id="857fb-120">Il valore restituito da **WSPAccept** è anche un \_ descrittore di socket foglia c analogo a quello restituito da **WSPJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="857fb-120">The value returned from **WSPAccept** is also a c\_leaf socket descriptor just like those returned from **WSPJoinLeaf**.</span></span> <span data-ttu-id="857fb-121">Per supportare gli schemi multipoint che consentono sia i join avviati dalla radice che quelli avviati da foglia, è accettabile che un \_ socket radice c sia già in modalità di ascolto da usare come input per **WSPJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="857fb-121">To accommodate multipoint schemes that allow both root-initiated and leaf-initiated joins, it is acceptable for a c\_root socket that is already in listening mode to be used as in input to **WSPJoinLeaf**.</span></span>

<span data-ttu-id="857fb-122">Un client radice multipoint è in genere responsabile della rimozione ordinata di una sessione multipoint.</span><span class="sxs-lookup"><span data-stu-id="857fb-122">A multipoint root client is generally responsible for the orderly dismantling of a multipoint session.</span></span> <span data-ttu-id="857fb-123">Un'applicazione di questo tipo può usare [**WSPShutdown**](/previous-versions/windows/desktop/legacy/ms742294(v=vs.85)) o [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) in un socket radice c per fare in modo che \_ tutti i \_ socket foglia c associati, inclusi quelli restituiti da [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) e i socket foglia c corrispondenti \_ nei nodi foglia remoti, per ottenere la \_ notifica di chiusura FD.</span><span class="sxs-lookup"><span data-stu-id="857fb-123">Such an application may use [**WSPShutdown**](/previous-versions/windows/desktop/legacy/ms742294(v=vs.85)) or [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) on a c\_root socket to cause all of the associated c\_leaf sockets, including those returned from [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) and their corresponding c\_leaf sockets in the remote leaf nodes, to get FD\_CLOSE notification.</span></span>

 

 
