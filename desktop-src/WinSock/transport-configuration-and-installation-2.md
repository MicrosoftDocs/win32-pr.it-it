---
description: Affinché un protocollo di trasporto sia accessibile tramite Windows Sockets, è necessario che sia installato correttamente nel sistema e registrato con Windows Sockets.
ms.assetid: 0f0b22e4-81b7-43a7-bc2f-7124fa32d925
title: Configurazione e installazione del trasporto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ea980740f727e39338c7568f4cc30a961b5484df
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106306892"
---
# <a name="transport-configuration-and-installation"></a><span data-ttu-id="527b1-103">Configurazione e installazione del trasporto</span><span class="sxs-lookup"><span data-stu-id="527b1-103">Transport Configuration and Installation</span></span>

<span data-ttu-id="527b1-104">Affinché un protocollo di trasporto sia accessibile tramite Windows Sockets, è necessario che sia installato correttamente nel sistema e registrato con Windows Sockets.</span><span class="sxs-lookup"><span data-stu-id="527b1-104">In order for a transport protocol to be accessible through Windows Sockets it must be properly installed on the system and registered with Windows Sockets.</span></span> <span data-ttu-id="527b1-105">Quando un provider di servizi di trasporto viene installato richiamando il programma di installazione di un fornitore, le informazioni di configurazione devono essere aggiunte a un database di configurazione per fornire al WS2 \_32.dll le informazioni necessarie relative al provider di servizi.</span><span class="sxs-lookup"><span data-stu-id="527b1-105">When a transport service provider is installed by invoking a vendor's installation program, configuration information must be added to a configuration database to give the Ws2\_32.dll required information regarding the service provider.</span></span> <span data-ttu-id="527b1-106">Il \_32.dll WS2 Esporta diverse funzioni di installazione, [**WSCInstallProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider) e [**WSCInstallProviderAndChains**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains), affinché il programma di installazione del fornitore fornisca le informazioni rilevanti sul provider di servizi da installare.</span><span class="sxs-lookup"><span data-stu-id="527b1-106">The Ws2\_32.dll exports several installation functions, [**WSCInstallProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider) and [**WSCInstallProviderAndChains**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains), for the vendor's installation program to supply the relevant information about the service provider to be installed.</span></span> <span data-ttu-id="527b1-107">Queste informazioni includono, ad esempio, il nome e il percorso della DLL del provider di servizi e un elenco di strutture di [**\_ informazioni WSAPROTOCOL**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) che questo provider è in grado di supportare.</span><span class="sxs-lookup"><span data-stu-id="527b1-107">This information includes, for example, the name and path to the service provider DLL and a list of [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structures that this provider can support.</span></span> <span data-ttu-id="527b1-108">Il \_32.dll WS2 fornisce anche una funzione, [**WSCDeinstallProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider), per il programma di disinstallazione di un fornitore per rimuovere tutte le informazioni rilevanti dal database di configurazione gestito dall' \_32.dll WS2.</span><span class="sxs-lookup"><span data-stu-id="527b1-108">The Ws2\_32.dll also provides a function, [**WSCDeinstallProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider), for a vendor's deinstallation program to remove all the relevant information from the configuration database maintained by the Ws2\_32.dll.</span></span> <span data-ttu-id="527b1-109">Il percorso esatto e il formato di queste informazioni di configurazione sono privati per la \_32.dll WS2 e possono essere modificati solo dalle funzioni sopra indicate.</span><span class="sxs-lookup"><span data-stu-id="527b1-109">The exact location and format of this configuration information is private to the Ws2\_32.dll, and can only be manipulated by the above-mentioned functions.</span></span>

<span data-ttu-id="527b1-110">Sulle piattaforme a 64 bit sono disponibili funzioni simili che operano su cataloghi a 32 bit e 64 bit.</span><span class="sxs-lookup"><span data-stu-id="527b1-110">On 64-bit platforms, there are similar functions that operate on a 32-bit and 64-bit catalogs.</span></span> <span data-ttu-id="527b1-111">Queste funzioni includono [**WSCInstallProvider64 \_ 32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider64_32), [**WSCInstallProviderAndChains64 \_ 32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains64_32)e [**WSCDeinstallProvider32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider32).</span><span class="sxs-lookup"><span data-stu-id="527b1-111">These functions include [**WSCInstallProvider64\_32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider64_32), [**WSCInstallProviderAndChains64\_32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains64_32), and [**WSCDeinstallProvider32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider32).</span></span>

<span data-ttu-id="527b1-112">L'ordine di installazione iniziale dei provider di servizi di trasporto determina l'ordine in cui vengono enumerate tramite [**WSCEnumProtocols**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols) e [**WSCEnumProtocols32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols32) nell'interfaccia del provider di servizi o tramite [**WSAEnumProtocols**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumprotocolsa) nell'interfaccia dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="527b1-112">The order in which transport service providers are initially installed governs the order in which they are enumerated through [**WSCEnumProtocols**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols) and [**WSCEnumProtocols32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols32) at the service provider interface, or through [**WSAEnumProtocols**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumprotocolsa) at the application interface.</span></span> <span data-ttu-id="527b1-113">In particolare, questo ordine regola anche l'ordine in cui i protocolli e i provider di servizi vengono considerati quando un client richiede la creazione di un socket in base alla famiglia di indirizzi, al tipo e all'identificatore del protocollo.</span><span class="sxs-lookup"><span data-stu-id="527b1-113">More importantly, this order also governs the order in which protocols and service providers are considered when a client requests creation of a socket based on its address family, type, and protocol identifier.</span></span> <span data-ttu-id="527b1-114">Windows Sockets 2 include un'applet denominata Sporder.exe che consente di riordinare i protocolli installati in modo interattivo dopo che i protocolli sono già stati installati.</span><span class="sxs-lookup"><span data-stu-id="527b1-114">Windows Sockets 2 includes an applet called Sporder.exe that allows the catalog of installed protocols to be reordered interactively after protocols have already been installed.</span></span> <span data-ttu-id="527b1-115">Windows Sockets 2 include anche una DLL ausiliaria, Sporder.dll, che esporta un'interfaccia procedurale per i protocolli di riordinamento.</span><span class="sxs-lookup"><span data-stu-id="527b1-115">Windows Sockets 2 also includes an auxiliary DLL, Sporder.dll, that exports a procedural interface for reordering protocols.</span></span> <span data-ttu-id="527b1-116">Questa interfaccia procedurale è costituita da una singola procedura denominata [**WSCWriteProviderOrder**](/windows/desktop/api/Sporder/nf-sporder-wscwriteproviderorder).</span><span class="sxs-lookup"><span data-stu-id="527b1-116">This procedural interface consists of a single procedure called [**WSCWriteProviderOrder**](/windows/desktop/api/Sporder/nf-sporder-wscwriteproviderorder).</span></span>

## <a name="installing-layered-protocols-and-protocol-chains"></a><span data-ttu-id="527b1-117">Installazione di protocolli e catene di protocolli a più livelli</span><span class="sxs-lookup"><span data-stu-id="527b1-117">Installing Layered Protocols and Protocol Chains</span></span>

<span data-ttu-id="527b1-118">La struttura di [**\_ informazioni WSAPROTOCOL**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) fornita con ogni protocollo da installare indica se il protocollo è un protocollo di base, un protocollo sovrapposto o una catena di protocolli.</span><span class="sxs-lookup"><span data-stu-id="527b1-118">The [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure supplied with each protocol to be installed indicates whether the protocol is a base protocol, layered protocol, or protocol chain.</span></span> <span data-ttu-id="527b1-119">Il valore del parametro *ProtocolChain. ChainLen* viene interpretato come illustrato nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="527b1-119">The value of the *ProtocolChain.ChainLen* parameter is interpreted as shown in the following table.</span></span>

| <span data-ttu-id="527b1-120">Valore</span><span class="sxs-lookup"><span data-stu-id="527b1-120">Value</span></span> | <span data-ttu-id="527b1-121">Significato</span><span class="sxs-lookup"><span data-stu-id="527b1-121">Meaning</span></span>                                           |
|-------|---------------------------------------------------|
| <span data-ttu-id="527b1-122">0</span><span class="sxs-lookup"><span data-stu-id="527b1-122">0</span></span>     | <span data-ttu-id="527b1-123">Protocollo sovrapposto.</span><span class="sxs-lookup"><span data-stu-id="527b1-123">Layered protocol.</span></span>                                 |
| <span data-ttu-id="527b1-124">1</span><span class="sxs-lookup"><span data-stu-id="527b1-124">1</span></span>     | <span data-ttu-id="527b1-125">Protocollo di base (o catena con un solo componente).</span><span class="sxs-lookup"><span data-stu-id="527b1-125">Base protocol (or chain with only one component).</span></span> |
| <span data-ttu-id="527b1-126">>1</span><span class="sxs-lookup"><span data-stu-id="527b1-126">>1</span></span> | <span data-ttu-id="527b1-127">Catena di protocolli.</span><span class="sxs-lookup"><span data-stu-id="527b1-127">Protocol chain.</span></span>                                   |



 

<span data-ttu-id="527b1-128">L'installazione delle catene di protocollo può verificarsi solo dopo l'installazione corretta di tutti i componenti costitutivi (protocolli di base e protocolli a livelli).</span><span class="sxs-lookup"><span data-stu-id="527b1-128">Installation of protocol chains can only occur after successful installation of all of the constituent components (base protocols and layered protocols).</span></span> <span data-ttu-id="527b1-129">La struttura di [**\_ informazioni WSAPROTOCOL**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) per una catena di protocolli usa il parametro *ProtocolChain* per descrivere la lunghezza della catena e l'identità di ogni componente.</span><span class="sxs-lookup"><span data-stu-id="527b1-129">The [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure for a protocol chain uses the *ProtocolChain* parameter to describe the length of the chain and the identity of each component.</span></span> <span data-ttu-id="527b1-130">I singoli protocolli che costituiscono una catena vengono elencati in ordine nella matrice ProtocolChain. ChainEntries, con l'elemento zero della matrice corrispondente al primo provider a livelli.</span><span class="sxs-lookup"><span data-stu-id="527b1-130">The individual protocols that make up a chain are listed in order in the ProtocolChain.ChainEntries array, with the zeroth element of the array corresponding to the first layered provider.</span></span> <span data-ttu-id="527b1-131">I protocolli sono identificati dai relativi valori *CatalogEntryID* , che vengono assegnati da WS2 \_32.dll al momento dell'installazione del protocollo e sono disponibili nella struttura di **\_ informazioni WSAPROTOCOL** per ogni protocollo.</span><span class="sxs-lookup"><span data-stu-id="527b1-131">Protocols are identified by their *CatalogEntryID* values, which are assigned by the Ws2\_32.dll at protocol installation time, and can be found in the **WSAPROTOCOL\_INFO** structure for each protocol.</span></span>

<span data-ttu-id="527b1-132">I valori per i parametri rimanenti nella struttura di [**\_ informazioni WSAPROTOCOL**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) della catena di protocolli devono essere scelti per riflettere gli attributi e gli identificatori che meglio caratterizzano la catena di protocolli nel suo complesso.</span><span class="sxs-lookup"><span data-stu-id="527b1-132">The values for the remaining parameters in the protocol chain's [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure should be chosen to reflect the attributes and identifiers that best characterize the protocol chain as a whole.</span></span> <span data-ttu-id="527b1-133">Quando si selezionano questi valori, gli sviluppatori devono tenere presente che le comunicazioni sulle catene di protocollo possono verificarsi solo quando entrambi gli endpoint dispongono di catene di protocolli compatibili installate e che le applicazioni devono essere in grado di riconoscere la struttura di **\_ informazioni WSAPROTOCOL** corrispondente.</span><span class="sxs-lookup"><span data-stu-id="527b1-133">When selecting these values, developers should bear in mind that communications over protocol chains can only occur when both endpoints have compatible protocol chains installed, and that applications must be able to recognize the corresponding **WSAPROTOCOL\_INFO** structure.</span></span>

<span data-ttu-id="527b1-134">Quando viene installato un protocollo di base, non è necessario eseguire alcuna voce nella matrice *ProtocolChain. ChainEntries* .</span><span class="sxs-lookup"><span data-stu-id="527b1-134">When a base protocol is installed, it is not necessary to make any entries in the *ProtocolChain.ChainEntries* array.</span></span> <span data-ttu-id="527b1-135">Viene implicitamente compreso che l'unico componente di questa catena è già identificato nel parametro *CatalogEntryID* della stessa struttura di [**\_ informazioni di WSAPROTOCOL**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) .</span><span class="sxs-lookup"><span data-stu-id="527b1-135">It is implicitly understood that the sole component of this chain is already identified in the *CatalogEntryID* parameter of the same [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure.</span></span> <span data-ttu-id="527b1-136">Si noti inoltre che le catene di protocollo non possono includere più istanze dello stesso protocollo a più livelli.</span><span class="sxs-lookup"><span data-stu-id="527b1-136">Also note that protocol chains may not include multiple instances of the same layered protocol.</span></span>

 

 
