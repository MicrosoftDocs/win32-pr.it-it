---
description: Sono disponibili diverse opzioni per ricevere le indicazioni di completamento, fornendo così applicazioni con livelli di flessibilità appropriati. Sono inclusi l'attesa (o il blocco) sugli oggetti evento, il polling degli oggetti evento e le routine di completamento I/O del socket.
ms.assetid: 071cf198-6b4c-445e-9bd9-044f57f994a3
title: Ricezione delle indicazioni di completamento
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cd05d8297af17c26393b5db113fac283b39fcbb3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106317003"
---
# <a name="receiving-completion-indications"></a><span data-ttu-id="29a13-104">Ricezione delle indicazioni di completamento</span><span class="sxs-lookup"><span data-stu-id="29a13-104">Receiving Completion Indications</span></span>

<span data-ttu-id="29a13-105">Sono disponibili diverse opzioni per ricevere le indicazioni di completamento, fornendo così applicazioni con livelli di flessibilità appropriati.</span><span class="sxs-lookup"><span data-stu-id="29a13-105">Several options are available for receiving completion indications, thus providing applications with appropriate levels of flexibility.</span></span> <span data-ttu-id="29a13-106">Sono inclusi l'attesa (o il blocco) sugli oggetti evento, il polling degli oggetti evento e le routine di completamento I/O del socket.</span><span class="sxs-lookup"><span data-stu-id="29a13-106">These include: waiting (or blocking) on event objects, polling event objects, and socket I/O completion routines.</span></span>

## <a name="blocking-and-waiting-for-completion-indication"></a><span data-ttu-id="29a13-107">Blocco e attesa dell'indicazione di completamento</span><span class="sxs-lookup"><span data-stu-id="29a13-107">Blocking and Waiting for Completion Indication</span></span>

<span data-ttu-id="29a13-108">Le applicazioni possono bloccarsi in attesa che uno o più oggetti evento vengano impostati utilizzando la funzione [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) .</span><span class="sxs-lookup"><span data-stu-id="29a13-108">Applications can block while waiting for one or more event objects to become set using the [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) function.</span></span> <span data-ttu-id="29a13-109">Nelle implementazioni di Windows, il processo o il thread si blocca effettivamente.</span><span class="sxs-lookup"><span data-stu-id="29a13-109">In Windows implementations, the process or thread truly blocks.</span></span> <span data-ttu-id="29a13-110">Poiché gli oggetti evento Windows Sockets 2 sono implementati come eventi di Windows, per questo scopo è possibile utilizzare anche la funzione nativa di Windows, [**WaitForMultipleObjects**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjects) .</span><span class="sxs-lookup"><span data-stu-id="29a13-110">Since Windows Sockets 2 event objects are implemented as Windows events, the native Windows function, [**WaitForMultipleObjects**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjects) can also be used for this purpose.</span></span> <span data-ttu-id="29a13-111">Questa operazione è particolarmente utile se il thread deve attendere sia gli eventi socket che quelli non socket.</span><span class="sxs-lookup"><span data-stu-id="29a13-111">This is especially useful if the thread needs to wait on both socket and nonsocket events.</span></span>

## <a name="polling-for-completion-indication"></a><span data-ttu-id="29a13-112">Polling per l'indicazione di completamento</span><span class="sxs-lookup"><span data-stu-id="29a13-112">Polling for Completion Indication</span></span>

<span data-ttu-id="29a13-113">Le applicazioni che preferiscono non bloccare possono utilizzare la funzione [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) per eseguire il polling dello stato di completamento associato a un particolare oggetto evento.</span><span class="sxs-lookup"><span data-stu-id="29a13-113">Applications that prefer not to block can use the [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) function to poll for the completion status associated with any particular event object.</span></span> <span data-ttu-id="29a13-114">Questa funzione indica se l'operazione sovrapposta è stata completata e, se completata, dispone la funzione [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) per recuperare lo stato di errore dell'operazione sovrapposta.</span><span class="sxs-lookup"><span data-stu-id="29a13-114">This function indicates whether or not the overlapped operation has completed, and if completed, arranges for the [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) function to retrieve the error status of the overlapped operation.</span></span>

## <a name="using-socket-io-completion-routines"></a><span data-ttu-id="29a13-115">Uso delle routine di completamento I/O socket</span><span class="sxs-lookup"><span data-stu-id="29a13-115">Using Socket I/O Completion Routines</span></span>

<span data-ttu-id="29a13-116">Le funzioni utilizzate per avviare I/O sovrapposti ( [**WSASend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend), [**WSASendTo**](/windows/desktop/api/Winsock2/nf-winsock2-wsasendto), [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom)) accettano tutti *il lpCompletionRoutine* come parametro di input facoltativo.</span><span class="sxs-lookup"><span data-stu-id="29a13-116">The functions used to initiate overlapped I/O ( [**WSASend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend), [**WSASendTo**](/windows/desktop/api/Winsock2/nf-winsock2-wsasendto), [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom)) all take *lpCompletionRoutine* as an optional input parameter.</span></span> <span data-ttu-id="29a13-117">Si tratta di un puntatore a una funzione specifica dell'applicazione che viene chiamata dopo che un'operazione di I/O sovrapposta avviata correttamente viene completata (correttamente o in caso contrario).</span><span class="sxs-lookup"><span data-stu-id="29a13-117">This is a pointer to an application-specific function that is called after a successfully initiated overlapped I/O operation completes (successfully or otherwise).</span></span> <span data-ttu-id="29a13-118">La routine di completamento segue le stesse regole previste per le routine di completamento I/O dei file di Windows.</span><span class="sxs-lookup"><span data-stu-id="29a13-118">The completion routine follows the same rules as stipulated for Windows file I/O completion routines.</span></span> <span data-ttu-id="29a13-119">Ovvero, la routine di completamento non viene richiamata finché il thread non è in uno stato di attesa di avviso, ad esempio quando viene richiamata la funzione [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) con il `fAlertable` flag impostato.</span><span class="sxs-lookup"><span data-stu-id="29a13-119">That is, the completion routine is not invoked until the thread is in an alertable wait state, such as when the function [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) is invoked with the `fAlertable` flag set.</span></span> <span data-ttu-id="29a13-120">Un'applicazione che usa l'opzione della routine di completamento per una particolare richiesta di I/O sovrapposta potrebbe non usare l'opzione wait di [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) per la stessa richiesta di i/o sovrapposta.</span><span class="sxs-lookup"><span data-stu-id="29a13-120">An application that uses the completion routine option for a particular overlapped I/O request may not use the wait option of [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) for that same overlapped I/O request.</span></span>

<span data-ttu-id="29a13-121">I trasporti consentono a un'applicazione di richiamare le operazioni di invio e ricezione dall'interno del contesto della routine di completamento I/O del socket e garantiscono che, per un determinato Socket, le routine di completamento I/O non saranno nidificate.</span><span class="sxs-lookup"><span data-stu-id="29a13-121">The transports allow an application to invoke send and receive operations from within the context of the socket I/O completion routine and guarantee that, for a given socket, I/O completion routines will not be nested.</span></span> <span data-ttu-id="29a13-122">In questo modo, le trasmissioni dei dati sensibili al tempo vengono eseguite interamente in un contesto preemptive.</span><span class="sxs-lookup"><span data-stu-id="29a13-122">This permits time-sensitive data transmissions to occur entirely within a preemptive context.</span></span>

## <a name="summary-of-overlapped-completion-indication-mechanisms"></a><span data-ttu-id="29a13-123">Riepilogo dei meccanismi di indicazione di completamento sovrapposti</span><span class="sxs-lookup"><span data-stu-id="29a13-123">Summary of Overlapped Completion Indication Mechanisms</span></span>

<span data-ttu-id="29a13-124">La particolare indicazione di completamento I/O sovrapposta da usare per una determinata operazione sovrapposta è determinata dal fatto che l'applicazione fornisca un puntatore a una funzione di completamento, se viene fatto riferimento a una struttura [**WSAOVERLAPPED**](/windows/desktop/api/Winsock2/ns-winsock2-wsaoverlapped) e al valore del membro **hEvent** all'interno della struttura **WSAOVERLAPPED** (se fornito).</span><span class="sxs-lookup"><span data-stu-id="29a13-124">The particular overlapped I/O completion indication to be used for a given overlapped operation is determined by whether the application supplies a pointer to a completion function, whether a [**WSAOVERLAPPED**](/windows/desktop/api/Winsock2/ns-winsock2-wsaoverlapped) structure is referenced, and by the value of the **hEvent** member within the **WSAOVERLAPPED** structure (if supplied).</span></span> <span data-ttu-id="29a13-125">La tabella seguente riepiloga la semantica di completamento per un socket sovrapposto e Mostra le varie combinazioni di *lpOverlapped*, **hEvent** e *il lpCompletionRoutine*:</span><span class="sxs-lookup"><span data-stu-id="29a13-125">The following table summarizes the completion semantics for an overlapped socket and shows the various combinations of *lpOverlapped*, **hEvent**, and *lpCompletionRoutine*:</span></span>

| <span data-ttu-id="29a13-126">*lpOverlapped*</span><span class="sxs-lookup"><span data-stu-id="29a13-126">*lpOverlapped*</span></span> | <span data-ttu-id="29a13-127">hEvent</span><span class="sxs-lookup"><span data-stu-id="29a13-127">hEvent</span></span>         | <span data-ttu-id="29a13-128">*Il lpCompletionRoutine*</span><span class="sxs-lookup"><span data-stu-id="29a13-128">*lpCompletionRoutine*</span></span> | <span data-ttu-id="29a13-129">Indicazione di completamento</span><span class="sxs-lookup"><span data-stu-id="29a13-129">Completion indication</span></span>                                                                                                                                                                                                    |
|----------------|----------------|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="29a13-130">NULL</span><span class="sxs-lookup"><span data-stu-id="29a13-130">NULL</span></span>           | <span data-ttu-id="29a13-131">Non applicabile</span><span class="sxs-lookup"><span data-stu-id="29a13-131">Not applicable</span></span> | <span data-ttu-id="29a13-132">Ignorato</span><span class="sxs-lookup"><span data-stu-id="29a13-132">Ignored</span></span>               | <span data-ttu-id="29a13-133">L'operazione viene completata in modo sincrono.</span><span class="sxs-lookup"><span data-stu-id="29a13-133">Operation completes synchronously.</span></span> <span data-ttu-id="29a13-134">Si comporta come se fosse un socket non sovrapposto.</span><span class="sxs-lookup"><span data-stu-id="29a13-134">It behaves as if it were a nonoverlapped socket.</span></span>                                                                                                                                      |
| <span data-ttu-id="29a13-135">! NULL</span><span class="sxs-lookup"><span data-stu-id="29a13-135">!NULL</span></span>          | <span data-ttu-id="29a13-136">NULL</span><span class="sxs-lookup"><span data-stu-id="29a13-136">NULL</span></span>           | <span data-ttu-id="29a13-137">NULL</span><span class="sxs-lookup"><span data-stu-id="29a13-137">NULL</span></span>                  | <span data-ttu-id="29a13-138">L'operazione è stata completata, ma non è disponibile alcun meccanismo di completamento supportato da Windows Sockets 2.</span><span class="sxs-lookup"><span data-stu-id="29a13-138">Operation completes overlapped, but there is no Windows Sockets 2-supported completion mechanism.</span></span> <span data-ttu-id="29a13-139">In questo caso, è possibile usare il meccanismo della porta di completamento (se supportato).</span><span class="sxs-lookup"><span data-stu-id="29a13-139">The completion port mechanism (if supported) can be used in this case.</span></span> <span data-ttu-id="29a13-140">In caso contrario, non esiste alcuna notifica di completamento.</span><span class="sxs-lookup"><span data-stu-id="29a13-140">Otherwise, there is no completion notification.</span></span> |
| <span data-ttu-id="29a13-141">! NULL</span><span class="sxs-lookup"><span data-stu-id="29a13-141">!NULL</span></span>          | <span data-ttu-id="29a13-142">! NULL</span><span class="sxs-lookup"><span data-stu-id="29a13-142">!NULL</span></span>          | <span data-ttu-id="29a13-143">NULL</span><span class="sxs-lookup"><span data-stu-id="29a13-143">NULL</span></span>                  | <span data-ttu-id="29a13-144">L'operazione è stata completata e viene eseguita la notifica tramite un oggetto evento di segnalazione.</span><span class="sxs-lookup"><span data-stu-id="29a13-144">Operation completes overlapped, notification by signaling event object.</span></span>                                                                                                                                                  |
| <span data-ttu-id="29a13-145">! NULL</span><span class="sxs-lookup"><span data-stu-id="29a13-145">!NULL</span></span>          | <span data-ttu-id="29a13-146">Ignorato</span><span class="sxs-lookup"><span data-stu-id="29a13-146">Ignored</span></span>        | <span data-ttu-id="29a13-147">! NULL</span><span class="sxs-lookup"><span data-stu-id="29a13-147">!NULL</span></span>                 | <span data-ttu-id="29a13-148">Il completamento dell'operazione è sovrapposto, notifica pianificando la routine di completamento.</span><span class="sxs-lookup"><span data-stu-id="29a13-148">Operation completes overlapped, notification by scheduling completion routine.</span></span>                                                                                                                                           |



 

 

 
