---
title: Utilizzo di gestione riavvio
description: Le sezioni seguenti descrivono l'uso dell'API di gestione riavvio.
ms.assetid: 78448d5e-20f6-45b6-b833-7d7791e5e4c6
keywords:
- Riavviare Gestione riavvio, usando
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6e4ac72edb9f2395bbd67236806c3ab3029372cc
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "103872838"
---
# <a name="using-restart-manager"></a><span data-ttu-id="c58f4-104">Utilizzo di gestione riavvio</span><span class="sxs-lookup"><span data-stu-id="c58f4-104">Using Restart Manager</span></span>

<span data-ttu-id="c58f4-105">Le sezioni seguenti descrivono l'uso dell'API di gestione riavvio.</span><span class="sxs-lookup"><span data-stu-id="c58f4-105">The following sections describe using the Restart Manager API.</span></span> <span data-ttu-id="c58f4-106">Le applicazioni e i servizi devono seguire anche le [linee guida per le applicazioni e i servizi](guidelines-for-applications-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="c58f4-106">Your applications and services should also follow the [Guidelines for Applications and Services](guidelines-for-applications-and-services.md).</span></span>

## <a name="using-the-microsoft-windows-installer"></a><span data-ttu-id="c58f4-107">Uso della Microsoft Windows Installer</span><span class="sxs-lookup"><span data-stu-id="c58f4-107">Using the Microsoft Windows Installer</span></span>

<span data-ttu-id="c58f4-108">Il [Microsoft Windows Installer](/windows/desktop/Msi/windows-installer-portal) versione 4,0 è il servizio di installazione dell'applicazione di Windows Vista o windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="c58f4-108">The [Microsoft Windows Installer](/windows/desktop/Msi/windows-installer-portal) Version 4.0 is the application installation service of Windows Vista or Windows Server 2008.</span></span> <span data-ttu-id="c58f4-109">Le applicazioni che usano la versione di Windows Installer 4,0 per l'installazione e la manutenzione utilizzano automaticamente Gestione riavvio per ridurre i riavvii del sistema.</span><span class="sxs-lookup"><span data-stu-id="c58f4-109">Applications that use the Windows Installer version 4.0 for installation and servicing automatically use the Restart Manager to reduce system restarts.</span></span> <span data-ttu-id="c58f4-110">I programmi di installazione personalizzati possono anche essere progettati per chiamare l'API di gestione riavvio per arrestare e riavviare direttamente le applicazioni e i servizi per evitare di richiedere un riavvio del sistema.</span><span class="sxs-lookup"><span data-stu-id="c58f4-110">Custom installers can also be designed to call the Restart Manager API to shut down and restart applications and services directly to avoid requiring a system restart.</span></span> <span data-ttu-id="c58f4-111">Nei casi in cui un riavvio del sistema è inevitabile, i programmi di installazione possono usare la funzione [**InitiateShutdown**](/windows/desktop/api/winreg/nf-winreg-initiateshutdowna) o [**ExitWindowsEx**](/windows/desktop/api/winuser/nf-winuser-exitwindowsex) per pianificarla in modo da ridurre al minimo l'interferenza dell'utente.</span><span class="sxs-lookup"><span data-stu-id="c58f4-111">In cases where a system restart is unavoidable, installers can use the [**InitiateShutdown**](/windows/desktop/api/winreg/nf-winreg-initiateshutdowna) or [**ExitWindowsEx**](/windows/desktop/api/winuser/nf-winuser-exitwindowsex) function to schedule it in such a way that it minimizes the disruption to the user.</span></span> <span data-ttu-id="c58f4-112">I pacchetti Windows Installer interattivi devono implementare un'interfaccia utente che include una finestra di dialogo [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) .</span><span class="sxs-lookup"><span data-stu-id="c58f4-112">Interactive Windows Installer packages should implement a user interface that includes a [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) dialog box.</span></span> <span data-ttu-id="c58f4-113">Per ulteriori informazioni, vedere [utilizzo di Windows Installer con Gestione riavvio](/windows/desktop/Msi/using-windows-installer-with-restart-manager) nella documentazione di Windows Installer SDK.</span><span class="sxs-lookup"><span data-stu-id="c58f4-113">For more information, see [Using Windows Installer with Restart Manager](/windows/desktop/Msi/using-windows-installer-with-restart-manager) in the Windows Installer SDK documentation.</span></span>

## <a name="using-the-restart-manager-api-with-custom-installers"></a><span data-ttu-id="c58f4-114">Uso dell'API di gestione riavvio con i programmi di installazione personalizzati</span><span class="sxs-lookup"><span data-stu-id="c58f4-114">Using the Restart Manager API with Custom Installers</span></span>

<span data-ttu-id="c58f4-115">I programmi di installazione personalizzati o un pacchetto di Windows Installer contenente azioni personalizzate che determinano un riavvio del sistema possono utilizzare l'API di gestione riavvio per arrestare e riavviare le applicazioni e i servizi.</span><span class="sxs-lookup"><span data-stu-id="c58f4-115">Custom installers, or a Windows Installer package that contains custom actions that cause a system restart, can use the Restart Manager API to shut down and restart applications and services.</span></span>

-   <span data-ttu-id="c58f4-116">Tutte le operazioni eseguite tramite l'API di gestione riavvio devono essere associate a una sessione.</span><span class="sxs-lookup"><span data-stu-id="c58f4-116">All operations that are performed using the Restart Manager API must be associated with a session.</span></span> <span data-ttu-id="c58f4-117">Un massimo di 64 sessioni di gestione riavvio per ogni sessione utente può essere aperto contemporaneamente nel sistema.</span><span class="sxs-lookup"><span data-stu-id="c58f4-117">A maximum of 64 Restart Manager sessions per user session can be open on the system at the same time.</span></span> <span data-ttu-id="c58f4-118">Il programma di installazione principale viene avviato e termina la sessione di gestione riavvio.</span><span class="sxs-lookup"><span data-stu-id="c58f4-118">The primary installer starts and ends the Restart Manager session.</span></span> <span data-ttu-id="c58f4-119">Per ulteriori informazioni sull'utilizzo di gestione riavvio con un singolo programma di installazione, vedere [utilizzo di gestione riavvio con un programma di installazione primario](using-restart-manager-with-a-primary-installer.md).</span><span class="sxs-lookup"><span data-stu-id="c58f4-119">For more information about using Restart Manager with a single installer, see [Using Restart Manager with a Primary Installer](using-restart-manager-with-a-primary-installer.md).</span></span>
-   <span data-ttu-id="c58f4-120">Se necessario per l'installazione, uno o più programmi di installazione secondari possono essere aggiunti alla sessione di gestione riavvio e possono essere eseguiti in-process o out-of-process del programma di installazione primario.</span><span class="sxs-lookup"><span data-stu-id="c58f4-120">If necessary for the installation, one or more secondary installers can be joined to the Restart Manager session and can run either in-process or out-of-process of the primary installer.</span></span> <span data-ttu-id="c58f4-121">Per i programmi di installazione secondari è necessario che la chiave della sessione venga fornita dal programma di installazione primario per partecipare a una sessione.</span><span class="sxs-lookup"><span data-stu-id="c58f4-121">Secondary installers require that the session key be provided by the primary installer to join a session.</span></span> <span data-ttu-id="c58f4-122">Per ulteriori informazioni e un esempio di utilizzo di programmi di installazione secondari, vedere [utilizzo di gestione riavvio con un programma di installazione secondario](using-restart-manager-with-a-secondary-installer.md).</span><span class="sxs-lookup"><span data-stu-id="c58f4-122">For more information and an example of using secondary installers, see [Using Restart Manager with a Secondary Installer](using-restart-manager-with-a-secondary-installer.md).</span></span>
-   <span data-ttu-id="c58f4-123">I programmi di installazione interattiva devono implementare un'interfaccia utente che include una finestra di dialogo [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) che può richiedere agli utenti di chiudere le applicazioni e i servizi.</span><span class="sxs-lookup"><span data-stu-id="c58f4-123">Interactive installers should implement a user interface that includes an [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) dialog box that can ask users to close applications and services.</span></span> <span data-ttu-id="c58f4-124">Per ulteriori informazioni, vedere [utilizzo di Windows Installer con Gestione riavvio](/windows/desktop/Msi/using-windows-installer-with-restart-manager) nella documentazione di Windows Installer SDK.</span><span class="sxs-lookup"><span data-stu-id="c58f4-124">For more information, see [Using Windows Installer with Restart Manager](/windows/desktop/Msi/using-windows-installer-with-restart-manager) in the Windows Installer SDK documentation.</span></span>
-   <span data-ttu-id="c58f4-125">I programmi di installazione possono chiamare l'API di gestione riavvio per modificare, annullare e ottenere lo stato dell'operazione corrente di gestione riavvio.</span><span class="sxs-lookup"><span data-stu-id="c58f4-125">Installers can call the Restart Manager API to change, cancel, and get the status of the current Restart Manager operation.</span></span> <span data-ttu-id="c58f4-126">Per ulteriori informazioni, vedere gli argomenti seguenti: [recupero dello stato di un'operazione di gestione riavvio](getting-the-status-of-a-restart-manager-operation.md) e [annullamento dell'operazione corrente di gestione riavvio](canceling-the-current-restart-manager-operation.md).</span><span class="sxs-lookup"><span data-stu-id="c58f4-126">For more information, see the following topics: [Getting the Status of a Restart Manager Operation](getting-the-status-of-a-restart-manager-operation.md) and [Canceling the Current Restart Manager Operation](canceling-the-current-restart-manager-operation.md).</span></span>
-   <span data-ttu-id="c58f4-127">I programmi di installazione non devono disabilitare il reindirizzamento file system prima di chiamare l'API di gestione riavvio.</span><span class="sxs-lookup"><span data-stu-id="c58f4-127">Installers should not disable file system redirection before calling the Restart Manager API.</span></span> <span data-ttu-id="c58f4-128">Alcuni programmi di installazione a 32 bit vengono eseguiti in Windows a 64 bit potrebbe non essere in grado di registrare un file nella directory% windir% \\ system32.</span><span class="sxs-lookup"><span data-stu-id="c58f4-128">Some 32-bit installers run on 64-bit Windows may be unable to register a file in the %windir%\\system32 directory.</span></span>

 

 