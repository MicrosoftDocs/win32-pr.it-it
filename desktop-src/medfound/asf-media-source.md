---
description: Media Foundation fornisce l'origine dei supporti ASF che può essere utilizzata da un'applicazione per rappresentare un file ASF nel livello pipeline dell'architettura.
ms.assetid: a2d2b382-d666-4a37-a6a9-0b839fbfbec3
title: Origine supporto ASF
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 75dc682d48339ce4ff707e7859a6962b9f5cfd92
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/03/2021
ms.locfileid: "106320816"
---
# <a name="asf-media-source"></a><span data-ttu-id="ebf57-103">Origine supporto ASF</span><span class="sxs-lookup"><span data-stu-id="ebf57-103">ASF Media Source</span></span>

<span data-ttu-id="ebf57-104">Media Foundation fornisce l'origine dei supporti ASF che può essere utilizzata da un'applicazione per rappresentare un file ASF nel livello pipeline dell'architettura.</span><span class="sxs-lookup"><span data-stu-id="ebf57-104">Media Foundation provides the ASF media source that an application can use to represent an ASF file in the pipeline layer of the architecture.</span></span>

<span data-ttu-id="ebf57-105">Per riprodurre un file ASF, un'applicazione può usare l'origine dei supporti ASF per inserire i dati in una pipeline di riproduzione.</span><span class="sxs-lookup"><span data-stu-id="ebf57-105">In order to play an ASF file, an application can use the ASF media source to feed data into a playback pipeline.</span></span> <span data-ttu-id="ebf57-106">In uno scenario di codifica, l'applicazione può usare l'origine dei supporti ASF come origine per la conversione in un altro formato o per la conversione di un file con velocità in bit superiore in un file con velocità in bit inferiore senza modificare i formati.</span><span class="sxs-lookup"><span data-stu-id="ebf57-106">In an encoding scenario, application can use the ASF media source as the source to convert into another format or for converting a higher bit-rate file to a lower bit-rate file without changing formats.</span></span> <span data-ttu-id="ebf57-107">L'origine dei supporti ASF deve essere usata nel livello della pipeline, ovvero un'applicazione deve usare la sessione multimediale per controllare l'operazione.</span><span class="sxs-lookup"><span data-stu-id="ebf57-107">The ASF media source must be used in the pipeline layer, that is, an application must use the Media Session to control the operation.</span></span> <span data-ttu-id="ebf57-108">Questo livello di accesso consente alle applicazioni di ottenere gli eventi mentre è in corso la sessione multimediale.</span><span class="sxs-lookup"><span data-stu-id="ebf57-108">This level of access allows the applications to get events while the Media Session is in progress.</span></span> <span data-ttu-id="ebf57-109">Per ottenere un accesso di livello inferiore al contenuto ASF, un'applicazione deve usare i componenti ASF di livello WMContainer.</span><span class="sxs-lookup"><span data-stu-id="ebf57-109">To get lower-level access to the ASF content, an application must use the WMContainer Layer ASF components.</span></span>

<span data-ttu-id="ebf57-110">L'origine dei supporti ASF implementa l'interfaccia [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) , che è l'interfaccia generica per le origini multimediali in Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="ebf57-110">The ASF media source implements the [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) interface, which is the generic interface for media sources in Media Foundation.</span></span> <span data-ttu-id="ebf57-111">Analogamente a qualsiasi altra origine multimediale, l'origine dei supporti ASF fornisce un descrittore di presentazione che descrive principalmente l'oggetto intestazione ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-111">Like any other media source, the ASF media source provides a presentation descriptor that primarily describes the ASF Header Object.</span></span> <span data-ttu-id="ebf57-112">Inoltre, l'origine dei supporti ASF fornisce descrittori di flusso che rappresentano ogni flusso nel contenuto multimediale.</span><span class="sxs-lookup"><span data-stu-id="ebf57-112">In addition, the ASF media source provides stream descriptors that represent each stream in the media content.</span></span> <span data-ttu-id="ebf57-113">Per ulteriori informazioni, vedere la pagina relativa alla [struttura dei file ASF](asf-file-structure.md).</span><span class="sxs-lookup"><span data-stu-id="ebf57-113">For more information, see [ASF File Structure](asf-file-structure.md).</span></span>

-   [<span data-ttu-id="ebf57-114">Creazione dell'origine dei supporti ASF</span><span class="sxs-lookup"><span data-stu-id="ebf57-114">Creating the ASF Media Source</span></span>](#creating-the-asf-media-source)
-   [<span data-ttu-id="ebf57-115">Impostazioni di configurazione per l'origine dei supporti ASF</span><span class="sxs-lookup"><span data-stu-id="ebf57-115">Configuration Settings for the ASF Media Source</span></span>](#configuration-settings-for-the-asf-media-source)
-   [<span data-ttu-id="ebf57-116">Modello a oggetti di origine multimediale ASF</span><span class="sxs-lookup"><span data-stu-id="ebf57-116">ASF Media Source Object Model</span></span>](#asf-media-source-object-model)
-   [<span data-ttu-id="ebf57-117">Servizi di origine multimediale ASF</span><span class="sxs-lookup"><span data-stu-id="ebf57-117">ASF Media Source Services</span></span>](#asf-media-source-services)
    -   [<span data-ttu-id="ebf57-118">Conversione timecode</span><span class="sxs-lookup"><span data-stu-id="ebf57-118">Timecode Translation</span></span>](#timecode-translation)
-   [<span data-ttu-id="ebf57-119">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="ebf57-119">Related topics</span></span>](#related-topics)

## <a name="creating-the-asf-media-source"></a><span data-ttu-id="ebf57-120">Creazione dell'origine dei supporti ASF</span><span class="sxs-lookup"><span data-stu-id="ebf57-120">Creating the ASF Media Source</span></span>

<span data-ttu-id="ebf57-121">Per creare l'origine del supporto ASF, l'applicazione deve usare il [resolver di origine](source-resolver.md).</span><span class="sxs-lookup"><span data-stu-id="ebf57-121">To create the ASF media source, the application must use the [Source Resolver](source-resolver.md).</span></span> <span data-ttu-id="ebf57-122">Per creare l'origine dei supporti ASF, l'applicazione deve fornire l'origine per la quale il resolver di origine crea l'origine del supporto ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-122">In order to create the ASF media source, the application must provide the source for which the source resolver creates the ASF media source.</span></span> <span data-ttu-id="ebf57-123">È necessario fornire le informazioni sull'origine specificando l'URL del file di origine o il flusso di byte che contiene il supporto.</span><span class="sxs-lookup"><span data-stu-id="ebf57-123">The source information must be provided by either specifying the URL of the source file or the byte stream that contains the media.</span></span> <span data-ttu-id="ebf57-124">Se l'applicazione sceglie di creare l'origine del supporto ASF specificando l'URL, è necessario chiamare [**IMFSourceResolver:: CreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfromurl) per l'operazione sincrona o **IMFSourceResolver:: Begin... EndCreateObjectFromURL** per l'operazione asincrona.</span><span class="sxs-lookup"><span data-stu-id="ebf57-124">If the application chooses to create the ASF media source by specifying the URL, it must call either [**IMFSourceResolver::CreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfromurl) for synchronous operation or **IMFSourceResolver::Begin…EndCreateObjectFromURL** for asynchronous operation.</span></span> <span data-ttu-id="ebf57-125">Il processo per la creazione dell'origine multimediale da un flusso di byte è simile.</span><span class="sxs-lookup"><span data-stu-id="ebf57-125">The process for creating the media source from a byte stream is similar.</span></span> <span data-ttu-id="ebf57-126">L'applicazione deve chiamare [**IMFSourceResolver:: CreateObjectFromByteStream**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfrombytestream) per l'operazione sincrona o **IMFSourceResolver:: Begin... EndCreateObjectFromBytestream** per l'operazione asincrona.</span><span class="sxs-lookup"><span data-stu-id="ebf57-126">The application must call either [**IMFSourceResolver::CreateObjectFromByteStream**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfrombytestream) for synchronous operation or **IMFSourceResolver::Begin…EndCreateObjectFromBytestream** for asynchronous operation.</span></span> <span data-ttu-id="ebf57-127">Queste chiamate devono specificare MF \_ risoluzione \_ MEDIASOURCE nel parametro *dwFlags* .</span><span class="sxs-lookup"><span data-stu-id="ebf57-127">These calls must specify MF\_RESOLUTION\_MEDIASOURCE in *dwFlags* parameter.</span></span> <span data-ttu-id="ebf57-128">Per ulteriori informazioni sull'utilizzo di questo flag, vedere Using the source resolver.</span><span class="sxs-lookup"><span data-stu-id="ebf57-128">For more information about using this flag, see Using the Source Resolver.</span></span>

<span data-ttu-id="ebf57-129">Se l'applicazione specifica un URL, per un file locale, la stringa URL può contenere il percorso del file multimediale o può essere preceduta dallo schema "file:".</span><span class="sxs-lookup"><span data-stu-id="ebf57-129">If the application specifies a URL, for a local file, the URL string can contain the path of the media file or can be prefixed with the “file: “scheme.</span></span> <span data-ttu-id="ebf57-130">L'estensione del nome file deve essere ". asf", ". WM", L ". WMA" o ". wmv".</span><span class="sxs-lookup"><span data-stu-id="ebf57-130">The file name extension must be ".asf", ".wm", L".wma", or ".wmv".</span></span> <span data-ttu-id="ebf57-131">Per un file ASF in rete, il resolver di origine crea l' [origine di rete](network-source-features.md), che usa l'origine del supporto ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-131">For an ASF file on the network, the source resolver creates the [Network Source](network-source-features.md), which uses the ASF media source.</span></span>

<span data-ttu-id="ebf57-132">Durante il processo di creazione dell'oggetto, il resolver di origine cerca l'elenco dei gestori dello schema e dei gestori del flusso di byte nel registro di sistema e carica il gestore corrispondente più vicino in grado di analizzare il contenuto multimediale e creare anche l'oggetto di origine multimediale sottostante.</span><span class="sxs-lookup"><span data-stu-id="ebf57-132">During the object creation process, the source resolver looks up the list of scheme handlers and the byte stream handlers in the system registry and loads the closest matching handler that can parse the media content and also create the media source object underneath.</span></span> <span data-ttu-id="ebf57-133">Indipendentemente dal metodo utilizzato per creare l'origine multimediale (URL e flusso di byte), il resolver di origine crea un flusso di byte e legge il contenuto dei supporti di origine nel flusso di byte.</span><span class="sxs-lookup"><span data-stu-id="ebf57-133">Irrespective of the method used to create the media source (URL and byte stream), the source resolver creates a byte stream and reads the contents of source media into the byte stream.</span></span> <span data-ttu-id="ebf57-134">Per altre informazioni, vedere [gestori di schemi e gestori di Byte-Stream](scheme-handlers-and-byte-stream-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="ebf57-134">For more information, see [Scheme Handlers and Byte-Stream Handlers](scheme-handlers-and-byte-stream-handlers.md).</span></span>

<span data-ttu-id="ebf57-135">Per un esempio di codice su come creare un'origine multimediale, vedere [using the source resolver](using-the-source-resolver.md).</span><span class="sxs-lookup"><span data-stu-id="ebf57-135">For code example about how to create a media source, see [Using the Source Resolver](using-the-source-resolver.md).</span></span>

## <a name="configuration-settings-for-the-asf-media-source"></a><span data-ttu-id="ebf57-136">Impostazioni di configurazione per l'origine dei supporti ASF</span><span class="sxs-lookup"><span data-stu-id="ebf57-136">Configuration Settings for the ASF Media Source</span></span>

<span data-ttu-id="ebf57-137">Il resolver di origine esegue una query per le funzionalità del flusso di byte sottostante e determina che le operazioni sono consentite sull'origine dei supporti appena creata.</span><span class="sxs-lookup"><span data-stu-id="ebf57-137">The source resolver queries for the capabilities of the underlying byte stream and determines the operations are allowed on the newly created media source.</span></span> <span data-ttu-id="ebf57-138">Una di queste funzionalità è la ricerca.</span><span class="sxs-lookup"><span data-stu-id="ebf57-138">One of such capabilities is seeking.</span></span> <span data-ttu-id="ebf57-139">Se è consentita un'operazione di ricerca, l'applicazione può specificare la modalità di ricerca utilizzata dall'origine multimediale durante la ricerca in un punto specifico della presentazione.</span><span class="sxs-lookup"><span data-stu-id="ebf57-139">If a seek operation is allowed, the application can specify the seeking mode that the media source uses while seeking to a particular point in the presentation.</span></span>

<span data-ttu-id="ebf57-140">Un'applicazione può impostare la modalità di ricerca, che deve essere utilizzata dall'origine multimediale, durante la creazione dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="ebf57-140">An application can set the seek mode, for the media source to use, during object creation.</span></span> <span data-ttu-id="ebf57-141">Una volta creata l'origine del supporto ASF con la modalità di ricerca specificata, non è possibile modificarla nell'origine supporto o modificarla dinamicamente durante una presentazione.</span><span class="sxs-lookup"><span data-stu-id="ebf57-141">After the ASF media source is created with the specified seek mode, it cannot be modified on the media source or dynamically changed during a presentation.</span></span> <span data-ttu-id="ebf57-142">Le preferenze di ricerca vengono specificate come proprietà nella chiamata dell'applicazione ai metodi del resolver di origine pertinenti usati per creare l'origine multimediale.</span><span class="sxs-lookup"><span data-stu-id="ebf57-142">Seeking preferences are specified as properties in the application’s call to the relevant source resolver methods that are used to create the media source.</span></span> <span data-ttu-id="ebf57-143">Questi set di proprietà vengono impostati in un archivio di proprietà e passati al parametro *pProps* .</span><span class="sxs-lookup"><span data-stu-id="ebf57-143">These set of properties are set in a property store and passed to the *pProps* parameter.</span></span> <span data-ttu-id="ebf57-144">Se queste proprietà non vengono passate, l'origine supporto funziona con le impostazioni predefinite.</span><span class="sxs-lookup"><span data-stu-id="ebf57-144">If these properties are not passed, the media source functions with the default settings.</span></span> <span data-ttu-id="ebf57-145">Per ulteriori informazioni sull'impostazione di queste proprietà, vedere [configurazione di un'origine multimediale](configuring-a-media-source.md).</span><span class="sxs-lookup"><span data-stu-id="ebf57-145">For more information about setting these properties, see [Configuring a Media Source](configuring-a-media-source.md).</span></span>

<span data-ttu-id="ebf57-146">Se la ricerca è consentita, l'origine dei supporti ASF supporta le modalità di ricerca seguenti:</span><span class="sxs-lookup"><span data-stu-id="ebf57-146">If seeking is allowed, the ASF media source supports the following seek modes:</span></span>

-   <span data-ttu-id="ebf57-147">Ricerca esatta: in questa modalità, l'origine dei supporti ASF si basa sull'oggetto indice ASF del file ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-147">Exact seeking: In this mode, the ASF media source relies on the ASF Index Object of the ASF file.</span></span> <span data-ttu-id="ebf57-148">Se il file non contiene l'oggetto indice, la ricerca esatta è disabilitata e viene utilizzata una delle altre modalità a seconda delle proprietà specificate dall'applicazione impostate nell'origine supporto.</span><span class="sxs-lookup"><span data-stu-id="ebf57-148">If the file does not have the Index Object, exact seeking is disabled and one of the other modes are used depending on the application-specified properties that are set on the media source.</span></span>
-   <span data-ttu-id="ebf57-149">Ricerca approssimativa: questa modalità viene richiesta dall'applicazione passando [**MFPKEY \_ ASFMediaSource \_ ApproxSeek**](mfpkey-asfmediasource-approxseek-property.md) nell'archivio delle proprietà ai metodi del resolver di origine pertinenti.</span><span class="sxs-lookup"><span data-stu-id="ebf57-149">Approximate seeking: This mode is requested by the application by passing [**MFPKEY\_ASFMediaSource\_ApproxSeek**](mfpkey-asfmediasource-approxseek-property.md) in the property store to the relevant source resolver methods.</span></span> <span data-ttu-id="ebf57-150">Tuttavia, la ricerca approssimativa viene utilizzata solo se il flusso di byte non supporta la ricerca basata sul tempo.</span><span class="sxs-lookup"><span data-stu-id="ebf57-150">However, approximate seeking is only used if the byte stream does not support time-based seeking.</span></span> <span data-ttu-id="ebf57-151">In questa modalità, l'origine multimediale determina un'ora di inizio relativamente più vicina al tempo di ricerca.</span><span class="sxs-lookup"><span data-stu-id="ebf57-151">In this mode, the media source determine a start time that is relatively closer to the seek time.</span></span> <span data-ttu-id="ebf57-152">Se il file ASF contiene un oggetto indice ASF, viene utilizzato per calcolare l'ora di inizio.</span><span class="sxs-lookup"><span data-stu-id="ebf57-152">If the ASF file contains an ASF Index Object, it is used to calculate the start time.</span></span> <span data-ttu-id="ebf57-153">La ricerca approssimativa è meno accurata ma più veloce rispetto alla ricerca esatta perché il tempo impiegato per il rendering del primo campione all'ora di inizio predeterminata è più veloce.</span><span class="sxs-lookup"><span data-stu-id="ebf57-153">Approximate seeking is less accurate but faster than exact seeking because the time taken render the first sample at the predetermined start time is faster.</span></span>
-   <span data-ttu-id="ebf57-154">Ricerca iterativa: per impostare questa modalità, l'applicazione deve impostare la proprietà [MFPKEY \_ ASFMediaSource \_ IterativeSeekIfNoIndex](mfpkey-asfmediasource-iterativeseekifnoindex.md) .</span><span class="sxs-lookup"><span data-stu-id="ebf57-154">Iterative seeking: To set this mode, the application must set the [MFPKEY\_ASFMediaSource\_IterativeSeekIfNoIndex](mfpkey-asfmediasource-iterativeseekifnoindex.md) property.</span></span> <span data-ttu-id="ebf57-155">La ricerca iterativa è un algoritmo per trovare una posizione in un file ASF che non contiene alcun oggetto indice ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-155">Iterative seeking is an algorithm to find a position in an ASF file that contains no ASF Index Object.</span></span> <span data-ttu-id="ebf57-156">In questa modalità, l'origine multimediale determina una stima approssimativa del punto di ricerca leggendo l'offset del flusso di byte.</span><span class="sxs-lookup"><span data-stu-id="ebf57-156">In this mode, the media source determins a rough estimate of the seek point by reading the byte stream offset.</span></span> <span data-ttu-id="ebf57-157">Usa una serie di approssimazioni, in base alla velocità in bit media, per avvicinarsi progressivamente al tempo di ricerca di destinazione.</span><span class="sxs-lookup"><span data-stu-id="ebf57-157">It uses a series of approximations, based on the average bit rate, to get progressively closer to the target seek time.</span></span> <span data-ttu-id="ebf57-158">L'algoritmo è simile a una ricerca binaria. La ricerca iterativa può richiedere più tempo rispetto alla ricerca tramite l'oggetto index, quindi è disabilitato per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="ebf57-158">(The algorithm is similar to a binary search.) Iterative seeking can take longer than seeking by using the Index Object, so it is disabled by default.</span></span> <span data-ttu-id="ebf57-159">Se si imposta questa proprietà, utilizzare le proprietà seguenti per impostare i parametri di ricerca: [MFPKEY \_ ASFMediaSource \_ IterativeSeek \_ Max \_ count](mfpkey-asfmediasource-iterativeseek-max-count.md)[MFPKEY \_ ASFMediaSource \_ IterativeSeek \_ tolleranza \_ in \_ millisecondi](mfpkey-asfmediasource-iterativeseek-tolerance-in-millisecond.md).</span><span class="sxs-lookup"><span data-stu-id="ebf57-159">If you set this property, use the following properties to set the search parameters: [MFPKEY\_ASFMediaSource\_IterativeSeek\_Max\_Count](mfpkey-asfmediasource-iterativeseek-max-count.md)[MFPKEY\_ASFMediaSource\_IterativeSeek\_Tolerance\_In\_MilliSecond](mfpkey-asfmediasource-iterativeseek-tolerance-in-millisecond.md).</span></span> <span data-ttu-id="ebf57-160">Queste proprietà impostano rispettivamente il numero massimo di iterazioni e la tolleranza.</span><span class="sxs-lookup"><span data-stu-id="ebf57-160">These properties set the maximum number of iterations and the tolerance, respectively.</span></span> <span data-ttu-id="ebf57-161">L'algoritmo si interrompe quando raggiunge il numero massimo di iterazioni oppure quando trova un pacchetto la cui distanza dal tempo di ricerca rientra nella tolleranza specificata.</span><span class="sxs-lookup"><span data-stu-id="ebf57-161">The algorithm halts when it reaches the maximum number of iterations, or when it finds a packet whose distance from the seek time is within the specified tolerance.</span></span>

<span data-ttu-id="ebf57-162">In breve, l'applicazione ha la possibilità di scegliere la ricerca approssimativa o iterativa quando il file ASF non contiene un oggetto indice ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-162">In a nutshell, the application has the option of choosing approximate or iterative seeking when the ASF file does not contain an ASF Index Object.</span></span>

## <a name="asf-media-source-object-model"></a><span data-ttu-id="ebf57-163">Modello a oggetti di origine multimediale ASF</span><span class="sxs-lookup"><span data-stu-id="ebf57-163">ASF Media Source Object Model</span></span>

<span data-ttu-id="ebf57-164">L'origine dei supporti ASF implementa l'interfaccia [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) ed espone le interfacce seguenti.</span><span class="sxs-lookup"><span data-stu-id="ebf57-164">The ASF media source implements the [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) interface and exposes the following interfaces.</span></span> <span data-ttu-id="ebf57-165">Un'applicazione può ottenere un riferimento a queste interfacce chiamando **IMFMediaSource:: QueryInterface** sull'origine dei supporti ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-165">An application can get a reference to these interfaces by calling **IMFMediaSource::QueryInterface** on the ASF media source.</span></span>



| <span data-ttu-id="ebf57-166">Interfaccia</span><span class="sxs-lookup"><span data-stu-id="ebf57-166">Interface</span></span>                                                | <span data-ttu-id="ebf57-167">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ebf57-167">Description</span></span>                                                                                                                                        |
|----------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="ebf57-168">**IMFMediaSource**</span><span class="sxs-lookup"><span data-stu-id="ebf57-168">**IMFMediaSource**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource)                 | <span data-ttu-id="ebf57-169">Obbligatorio per tutte le origini supporti.</span><span class="sxs-lookup"><span data-stu-id="ebf57-169">Required for all media sources.</span></span>                                                                                                                    |
| [<span data-ttu-id="ebf57-170">**IMFMediaEventGenerator**</span><span class="sxs-lookup"><span data-stu-id="ebf57-170">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator) | <span data-ttu-id="ebf57-171">Obbligatorio per tutte le origini supporti.</span><span class="sxs-lookup"><span data-stu-id="ebf57-171">Required for all media sources.</span></span> <span data-ttu-id="ebf57-172">Consente alle applicazioni di ottenere gli eventi dall'origine multimediale attraverso la sessione multimediale.</span><span class="sxs-lookup"><span data-stu-id="ebf57-172">Allows applications to get events from the media source through the Media Session.</span></span>                                 |
| [<span data-ttu-id="ebf57-173">**IMFGetService**</span><span class="sxs-lookup"><span data-stu-id="ebf57-173">**IMFGetService**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)                   | <span data-ttu-id="ebf57-174">Esegue una query sull'origine multimediale per l'interfaccia del servizio specificata.</span><span class="sxs-lookup"><span data-stu-id="ebf57-174">Queries the media source for the specified service interface.</span></span>                                                                                      |
| [<span data-ttu-id="ebf57-175">**IPropertyStore**</span><span class="sxs-lookup"><span data-stu-id="ebf57-175">**IPropertyStore**</span></span>](/windows/win32/api/propsys/nn-propsys-ipropertystore)               | <span data-ttu-id="ebf57-176">Imposta e ottiene le proprietà nell'origine supporto.</span><span class="sxs-lookup"><span data-stu-id="ebf57-176">Sets and gets properties on the media source.</span></span> <span data-ttu-id="ebf57-177">Ogni proprietà contiene un nome descrittivo e un valore.</span><span class="sxs-lookup"><span data-stu-id="ebf57-177">Each property contains a descriptive name and a value.</span></span>                                               |
| [<span data-ttu-id="ebf57-178">**IMFMetadata**</span><span class="sxs-lookup"><span data-stu-id="ebf57-178">**IMFMetadata**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmetadata)                       | <span data-ttu-id="ebf57-179">Descrive i metadati per il file ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-179">Describes the metadata for the ASF file.</span></span>                                                                                                           |
| [<span data-ttu-id="ebf57-180">**IMFMetadataProvider**</span><span class="sxs-lookup"><span data-stu-id="ebf57-180">**IMFMetadataProvider**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmetadataprovider)       | <span data-ttu-id="ebf57-181">Recupera una raccolta di metadati per un'intera presentazione o per un flusso nella presentazione.</span><span class="sxs-lookup"><span data-stu-id="ebf57-181">Retrieves a collection of metadata, either for an entire presentation, or for one stream in the presentation.</span></span>                                      |
| [<span data-ttu-id="ebf57-182">**IMFRateSupport**</span><span class="sxs-lookup"><span data-stu-id="ebf57-182">**IMFRateSupport**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport)                 | <span data-ttu-id="ebf57-183">Esegue una query sull'intervallo di frequenze di riproduzione supportate, inclusa la riproduzione inversa.</span><span class="sxs-lookup"><span data-stu-id="ebf57-183">Queries the range of playback rates that are supported, including reverse playback.</span></span>                                                                |
| [<span data-ttu-id="ebf57-184">**IMFRateControl**</span><span class="sxs-lookup"><span data-stu-id="ebf57-184">**IMFRateControl**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol)                 | <span data-ttu-id="ebf57-185">Ottiene o imposta la velocità di riproduzione.</span><span class="sxs-lookup"><span data-stu-id="ebf57-185">Gets or sets the playback rate.</span></span>                                                                                                                    |
| [<span data-ttu-id="ebf57-186">**IMFTrustedInput**</span><span class="sxs-lookup"><span data-stu-id="ebf57-186">**IMFTrustedInput**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imftrustedinput)               | <span data-ttu-id="ebf57-187">Ottiene l'ITA per ogni flusso ASF contenuto nell'origine.</span><span class="sxs-lookup"><span data-stu-id="ebf57-187">Gets the ITA for each of the ASF streams contained in the source.</span></span>                                                                                  |
| [<span data-ttu-id="ebf57-188">**IMFPMPClient**</span><span class="sxs-lookup"><span data-stu-id="ebf57-188">**IMFPMPClient**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfpmpclient)                     | <span data-ttu-id="ebf57-189">Consente a un'origine multimediale di ricevere un puntatore all'interfaccia [**IMFPMPHost**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) , che viene usata per creare oggetti nel processo PMP.</span><span class="sxs-lookup"><span data-stu-id="ebf57-189">Enables a media source to receive a pointer to the [**IMFPMPHost**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) interface, which is used to create objects in the PMP process.</span></span> |
| [<span data-ttu-id="ebf57-190">**IMFTimecodeTranslate**</span><span class="sxs-lookup"><span data-stu-id="ebf57-190">**IMFTimecodeTranslate**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate)     | <span data-ttu-id="ebf57-191">Esegue la conversione tra i codici temporali SMPTE (Society of Motion Picture e Television Engineers) e le unità di tempo di 100 nanosecondi.</span><span class="sxs-lookup"><span data-stu-id="ebf57-191">Converts between Society of Motion Picture and Television Engineers (SMPTE) time codes and 100-nanosecond time units.</span></span>                              |



 

## <a name="asf-media-source-services"></a><span data-ttu-id="ebf57-192">Servizi di origine multimediale ASF</span><span class="sxs-lookup"><span data-stu-id="ebf57-192">ASF Media Source Services</span></span>

<span data-ttu-id="ebf57-193">L'origine dei supporti ASF fornisce vari servizi con ambito per il file ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-193">The ASF media source provides various services that are scoped for ASF file.</span></span> <span data-ttu-id="ebf57-194">Per ottenere un puntatore a un determinato servizio, l'applicazione deve usare uno dei seguenti identificatori di servizio nella chiamata a [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice).</span><span class="sxs-lookup"><span data-stu-id="ebf57-194">To get a pointer to a particular service, the application must use one of the following service identifiers in its call to [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice).</span></span> <span data-ttu-id="ebf57-195">Per informazioni, vedere [interfacce del servizio](service-interfaces.md).</span><span class="sxs-lookup"><span data-stu-id="ebf57-195">For information, see [Service Interfaces](service-interfaces.md).</span></span>



| <span data-ttu-id="ebf57-196">Identificatore servizio</span><span class="sxs-lookup"><span data-stu-id="ebf57-196">Service Identifier</span></span>               | <span data-ttu-id="ebf57-197">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ebf57-197">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ebf57-198">\_servizio di \_ controllo della velocità MF \_</span><span class="sxs-lookup"><span data-stu-id="ebf57-198">MF\_RATE\_CONTROL\_SERVICE</span></span>       | <span data-ttu-id="ebf57-199">Utilizzando questo identificatore, un'applicazione può ottenere un puntatore a interfacce [**IMFRateSupport**](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport) o [**IMFRateControl**](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol) .</span><span class="sxs-lookup"><span data-stu-id="ebf57-199">By using this identifier, an application can get a pointer to either [**IMFRateSupport**](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport) or [**IMFRateControl**](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol) interfaces.</span></span> <span data-ttu-id="ebf57-200">Usando l'oggetto frequenza di supporto implementato dall'origine multimediale, l'applicazione può verificare se una determinata frequenza è supportata dal file multimediale ASF sottostante, anche per ottenere la tariffa più veloce e più lenta.</span><span class="sxs-lookup"><span data-stu-id="ebf57-200">By using the rate support object implemented by the media source, the application can check if a particular rate is supported by the underlying ASF media file also get the fastest and the slowest rate.</span></span> <span data-ttu-id="ebf57-201">Utilizzando l'oggetto di controllo della velocità, l'applicazione può ottenere e impostare la velocità di riproduzione.</span><span class="sxs-lookup"><span data-stu-id="ebf57-201">By using the rate control object the application can get and set the playback rate.</span></span> <span data-ttu-id="ebf57-202">Se l'applicazione specifica una determinata frequenza per la riproduzione, l'origine dei supporti ASF verifica innanzitutto se la frequenza richiesta è entro i limiti di frequenza (determinati dalle tariffe veloci e più lente) e quindi imposta la frequenza.</span><span class="sxs-lookup"><span data-stu-id="ebf57-202">If the application specifies a particular rate for playback, the ASF media source first checks if the requested rate is within the rate limits (determined by fasted and slowest rates) and then sets the rate.</span></span> <span data-ttu-id="ebf57-203">Questo non controlla le condizioni variabili perché la velocità in bit potrebbe cambiare in qualsiasi momento a seconda della larghezza di banda di rete.</span><span class="sxs-lookup"><span data-stu-id="ebf57-203">This does not check for variable conditions as the bitrate might change any moment depending on the network bandwidth.</span></span> <span data-ttu-id="ebf57-204">Per ulteriori informazioni, [controllare la frequenza](rate-control.md).</span><span class="sxs-lookup"><span data-stu-id="ebf57-204">For more information, [Rate Control](rate-control.md).</span></span> |
| <span data-ttu-id="ebf57-205">\_ \_ servizio provider di metadati MF \_</span><span class="sxs-lookup"><span data-stu-id="ebf57-205">MF\_METADATA\_PROVIDER\_SERVICE</span></span>  | <span data-ttu-id="ebf57-206">Utilizzando questo identificatore, l'applicazione può ottenere un puntatore all'interfaccia [**IMFMetadataProvider**](/windows/desktop/api/mfidl/nn-mfidl-imfmetadataprovider) dell'origine dei supporti ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-206">By using this identifier, the application can get a pointer to the [**IMFMetadataProvider**](/windows/desktop/api/mfidl/nn-mfidl-imfmetadataprovider) interface of the ASF media source.</span></span> <span data-ttu-id="ebf57-207">Questa interfaccia fornisce l'accesso alle informazioni sul file ASF in particolare gli oggetti intestazione ASF e i flussi contenuti nel contenuto multimediale.</span><span class="sxs-lookup"><span data-stu-id="ebf57-207">This interface provides access to information about ASF file specifically the ASF Header Objects and the streams contained within the media content.</span></span> <span data-ttu-id="ebf57-208">Le informazioni di intestazione sono esposte tramite gli attributi del descrittore di presentazione e le informazioni sul flusso vengono fornite tramite gli attributi</span><span class="sxs-lookup"><span data-stu-id="ebf57-208">Header information is exposes through presentation descriptor attributes and stream information is provided through stream descriptor attributes.</span></span> <span data-ttu-id="ebf57-209">Per ulteriori informazioni su questi attributi, vedere [Media Foundation attributi per gli oggetti intestazione ASF](media-foundation-attributes-for-asf-header-objects.md).</span><span class="sxs-lookup"><span data-stu-id="ebf57-209">For more information about these attributes, see [Media Foundation Attributes for ASF Header Objects](media-foundation-attributes-for-asf-header-objects.md).</span></span> <span data-ttu-id="ebf57-210">Oltre alle informazioni esposte tramite attributi, esistono anche metadati descrittivi, impostati come proprietà.</span><span class="sxs-lookup"><span data-stu-id="ebf57-210">In addition to information that is exposed through attributes, there also exists descriptive metadata, which are set as properties.</span></span>                                                                                                 |
| <span data-ttu-id="ebf57-211">\_ \_ servizio Gestione proprietà \_ MF</span><span class="sxs-lookup"><span data-stu-id="ebf57-211">MF\_PROPERTY\_HANDLER\_SERVICE</span></span>   | <span data-ttu-id="ebf57-212">Utilizzando questo identificatore, l'applicazione può ottenere un puntatore all'interfaccia [**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore) dell'origine multimediale ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-212">By using this identifier, the application can get a pointer to the [**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore) interface of the ASF media source.</span></span> <span data-ttu-id="ebf57-213">Nell'archivio delle proprietà sono contenuti tutti i metadati relativi al file ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-213">The property store contains all the metadata related to the ASF file.</span></span> <span data-ttu-id="ebf57-214">Questo identificatore è una novità di Windows 7 e sostituisce \_ il \_ servizio del provider di metadati MF \_ per ottenere le proprietà dei metadati.</span><span class="sxs-lookup"><span data-stu-id="ebf57-214">This identifier is new in Windows 7 and replaces MF\_METADATA\_PROVIDER\_SERVICE for getting metadata properties.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="ebf57-215">\_servizio statistiche \_ MFNETSOURCE</span><span class="sxs-lookup"><span data-stu-id="ebf57-215">MFNETSOURCE\_STATISTICS\_SERVICE</span></span> | <span data-ttu-id="ebf57-216">Per ulteriori informazioni, vedere Recupero delle statistiche di rete nella [registrazione client](client-logging.md).</span><span class="sxs-lookup"><span data-stu-id="ebf57-216">For more information, see Retrieving Network Statistics in [Client Logging](client-logging.md).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="ebf57-217">\_servizio timecode \_ MF</span><span class="sxs-lookup"><span data-stu-id="ebf57-217">MF\_TIMECODE\_SERVICE</span></span>            | <span data-ttu-id="ebf57-218">Utilizzando questo identificatore, l'applicazione può ottenere un puntatore all'interfaccia [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) dell'origine multimediale.</span><span class="sxs-lookup"><span data-stu-id="ebf57-218">By using this identifier, the application can get a pointer to the media source’s [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) interface.</span></span> <span data-ttu-id="ebf57-219">Questa implementazione può essere usata per eseguire traduzioni di codice temporale, ad esempio la conversione del codice di ora SMPTE in unità di 100-nano secondo e viceversa.</span><span class="sxs-lookup"><span data-stu-id="ebf57-219">This implementation can be used to perform time code translations such as converting SMPTE time code to 100-nano second units and back.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

### <a name="timecode-translation"></a><span data-ttu-id="ebf57-220">Conversione timecode</span><span class="sxs-lookup"><span data-stu-id="ebf57-220">Timecode Translation</span></span>

<span data-ttu-id="ebf57-221">L'origine dei supporti ASF fornisce un servizio di conversione del codice temporale che consente all'applicazione di convertire il codice di ora SMPTE nel tempo di presentazione più vicino (in unità 100-nanosecondi).</span><span class="sxs-lookup"><span data-stu-id="ebf57-221">The ASF media source provides a time code translation service that allows your application to convert SMPTE time code to the closest presentation time (in 100-nanosecond unit).</span></span> <span data-ttu-id="ebf57-222">Viceversa, l'applicazione può ottenere anche il codice temporale per un'ora di presentazione richiesta.</span><span class="sxs-lookup"><span data-stu-id="ebf57-222">Conversely, the application can also get the time code for a requested presentation time.</span></span> <span data-ttu-id="ebf57-223">Il servizio è disponibile tramite l'interfaccia [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) , implementata dall'origine dei supporti ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-223">The service is available through the [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) interface, which the ASF media source implements.</span></span> <span data-ttu-id="ebf57-224">Le chiamate al metodo su questo puntatore di interfaccia sono asincrone che possono essere eseguite dal thread dell'applicazione principale senza bloccare l'interfaccia utente dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ebf57-224">The method calls on this interface pointer are asynchronous that can run from your main application thread without blocking the user interface of your application.</span></span>

<span data-ttu-id="ebf57-225">Nei passaggi seguenti viene riepilogata la procedura per la conversione del codice temporale:</span><span class="sxs-lookup"><span data-stu-id="ebf57-225">The following steps summarize the procedure for time code translation:</span></span>

1.  <span data-ttu-id="ebf57-226">Ottenere un puntatore all'interfaccia [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) dell'origine multimediale ASF chiamando [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice) e specificando l'identificatore **del \_ \_ servizio del timecode MF** .</span><span class="sxs-lookup"><span data-stu-id="ebf57-226">Get pointer to the [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) interface of the ASF media source by calling [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice) and specifying the **MF\_TIMECODE\_SERVICE** identifier.</span></span>
2.  <span data-ttu-id="ebf57-227">Chiamare [**IMFTimecodeTranslate:: BeginConvertTimecodeToHNS**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverttimecodetohns) o [**IMFTimecodeTranslate:: BeginConvertHNSToTimecode**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverthnstotimecode) e specificare l'ora da tradurre.</span><span class="sxs-lookup"><span data-stu-id="ebf57-227">Call [**IMFTimecodeTranslate::BeginConvertTimecodeToHNS**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverttimecodetohns) or [**IMFTimecodeTranslate::BeginConvertHNSToTimecode**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverthnstotimecode) and specify the time that is to be translated..</span></span> <span data-ttu-id="ebf57-228">Per **BeginConvertTimecodeToHNS** è necessario specificare il codice temporale come variabile [**PROPVARIANT**](/windows/win32/api/propidl/ns-propidl-propvariant) con tipo di dati **VT \_ i8** .</span><span class="sxs-lookup"><span data-stu-id="ebf57-228">For **BeginConvertTimecodeToHNS** the time code must be specified as a [**PROPVARIANT**](/windows/win32/api/propidl/ns-propidl-propvariant) variable with **VT\_I8** data type.</span></span> <span data-ttu-id="ebf57-229">Il metodo **BeginConvertHNSToTimecode** richiede l'ora in unità 100-nanosecondi come tipo [**MFTIME**](mftime.md) .</span><span class="sxs-lookup"><span data-stu-id="ebf57-229">The **BeginConvertHNSToTimecode** method requires the time in 100-nanosecond units as the [**MFTIME**](mftime.md) type.</span></span>
3.  <span data-ttu-id="ebf57-230">Completare l'operazione asincrona chiamando [**IMFTimecodeTranslate:: EndConvertTimecodeToHNS**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-endconverttimecodetohns) o **IMFTimecodeTranslate:: EndConvertTimecodeToHNS** in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="ebf57-230">Complete the asynchronous operation by calling [**IMFTimecodeTranslate::EndConvertTimecodeToHNS**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-endconverttimecodetohns) or **IMFTimecodeTranslate::EndConvertTimecodeToHNS** appropriately.</span></span>

<span data-ttu-id="ebf57-231">Durante la creazione dell'origine multimediale, il resolver di origine crea un flusso di byte per il file da cui l'origine multimediale legge il contenuto ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-231">During the creation of the media source, the source resolver creates a byte stream for the file from which the media source reads the ASF content.</span></span> <span data-ttu-id="ebf57-232">Affinché le conversioni temporali abbiano esito positivo, il flusso di byte associato al file ASF deve avere funzionalità di ricerca; in caso contrario, l'applicazione ottiene \_ l' \_ errore MF E BYTESTREAM \_ non \_ ricercabile dalla chiamata **Begin...** .</span><span class="sxs-lookup"><span data-stu-id="ebf57-232">In order for the time conversions to be successful, the byte stream associated with the ASF file must have seeking capabilities; otherwise, the application gets the MF\_E\_BYTESTREAM\_NOT\_SEEKABLE error from the **Begin...** call.</span></span> <span data-ttu-id="ebf57-233">Un altro requisito per le conversioni temporali è che il file ASF, rappresentato dall'origine multimediale ASF, deve avere oggetti indice ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-233">Another requirement for time conversions is that the ASF file, represented by the ASF media source, must have ASF Index Objects.</span></span> <span data-ttu-id="ebf57-234">I tempi di presentazione e i codici temporali vengono estratti dagli oggetti indice ASF che gestiscono tutti gli indici e dai corrispondenti punti di ricerca per il file ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-234">The presentation times and the time codes are extracted from the ASF Index Objects that maintain all the indexes and the corresponding seek- points for the ASF file.</span></span> <span data-ttu-id="ebf57-235">Per la conversione del codice time-to-time della presentazione, il file ASF deve contenere un oggetto indice semplice; per la conversione dell'ora da codice a presentazione, è necessario che il file ASF disponga di un oggetto index.</span><span class="sxs-lookup"><span data-stu-id="ebf57-235">For presentation time-to-time code translation, the ASF file must contain a Simple Index Object; for time code-to-presentation time translation, the ASF file must have an Index Object.</span></span> <span data-ttu-id="ebf57-236">Le operazioni di conversione si basano sull' *indicizzatore* sottostante (componente WMContainer) per analizzare e leggere l'oggetto index associato al file ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-236">The conversion operations rely on the underlying *indexer* (WMContainer component) to parse and read the Index Object associated with the ASF file.</span></span> <span data-ttu-id="ebf57-237">Se il file non contiene un oggetto index, l'applicazione riceve in modo asincrono il \_ codice di errore MF E \_ No \_ index.</span><span class="sxs-lookup"><span data-stu-id="ebf57-237">If the file does not contain an Index Object, the application asynchronously receives the MF\_E\_NO\_INDEX error code.</span></span>

<span data-ttu-id="ebf57-238">Per tradurre il tempo richiesto dall'applicazione, l'origine multimediale enumera i flussi all'interno del file e trova il flusso che contiene l'oggetto indice ASF appropriato.</span><span class="sxs-lookup"><span data-stu-id="ebf57-238">To translate the time requested by the application, the media source enumerates the streams within the file and finds the stream that contains the appropriate ASF Index Object.</span></span> <span data-ttu-id="ebf57-239">Se viene trovato un flusso di questo tipo, l'origine multimediale analizza i pacchetti ASF del flusso viene analizzata fino a quando non viene raggiunto il codice di ora corretto.</span><span class="sxs-lookup"><span data-stu-id="ebf57-239">If such a stream is found, the media source parses the stream’s ASF packets are parsed until the correct time code is reached.</span></span> <span data-ttu-id="ebf57-240">Dopo aver trovato l'esempio corretto, recupera l'ora di presentazione corrispondente o il codice temporale dall'esempio e lo restituisce al chiamante.</span><span class="sxs-lookup"><span data-stu-id="ebf57-240">After it finds the correct sample it retrieves the corresponding presentation time or the time code from the sample, and returns it to the caller.</span></span>

### <a name="script-command-support"></a><span data-ttu-id="ebf57-241">Supporto del comando script</span><span class="sxs-lookup"><span data-stu-id="ebf57-241">Script Command Support</span></span>

<span data-ttu-id="ebf57-242">Quando si compila una topologia ASF che contiene un flusso di script, viene aggiunto un nodo del flusso di script alla topologia.</span><span class="sxs-lookup"><span data-stu-id="ebf57-242">When you build an ASF topology that contains a script stream a Script Stream node is added to the topology.</span></span> <span data-ttu-id="ebf57-243">Questo nodo invierà IMFSamples al momento appropriato.</span><span class="sxs-lookup"><span data-stu-id="ebf57-243">This node will send IMFSamples at the appropriate time.</span></span> <span data-ttu-id="ebf57-244">Il IMFSample fornito dal nodo di origine dello script archivia i dati nel IMFMediaBuffer associato all'esempio.</span><span class="sxs-lookup"><span data-stu-id="ebf57-244">The IMFSample provided by the script source node stores the data in the IMFMediaBuffer associated with the sample.</span></span> <span data-ttu-id="ebf57-245">È possibile chiamare CopyToBuffer nell'esempio per ottenere un IMFMediaBuffer e quindi chiamare Lock sul buffer per ottenere i dati.</span><span class="sxs-lookup"><span data-stu-id="ebf57-245">You can call CopyToBuffer on the sample to get an IMFMediaBuffer and then call Lock on the buffer to get the data.</span></span> 

<span data-ttu-id="ebf57-246">I payload del flusso di script vengono compressi nel buffer come stringa di tipo, seguito da NULL, seguito dalla stringa di comando, seguito da NULL.</span><span class="sxs-lookup"><span data-stu-id="ebf57-246">Script stream payloads are packed into the buffer as a type string, followed by NULL, followed by the command string, followed by NULL.</span></span> <span data-ttu-id="ebf57-247">Le stringhe sono Unicode nel formato ASF.</span><span class="sxs-lookup"><span data-stu-id="ebf57-247">Strings are Unicode in the ASF format.</span></span>

<span data-ttu-id="ebf57-248">Un payload, ad esempio, potrebbe essere simile al seguente (dove \ 0 indica un carattere NULL):</span><span class="sxs-lookup"><span data-stu-id="ebf57-248">For example, a payload might look like the following (where \0 indicates a NULL character):</span></span>

<span data-ttu-id="ebf57-249">*URL\0http://contoso.com\0*</span><span class="sxs-lookup"><span data-stu-id="ebf57-249">*URL\0http://contoso.com\0*</span></span>

<span data-ttu-id="ebf57-250">*Text\0This è un caption\0*</span><span class="sxs-lookup"><span data-stu-id="ebf57-250">*Text\0This is a caption\0*</span></span>



## <a name="related-topics"></a><span data-ttu-id="ebf57-251">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="ebf57-251">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ebf57-252">Componenti ASF a livello pipeline</span><span class="sxs-lookup"><span data-stu-id="ebf57-252">Pipeline Layer ASF Components</span></span>](pipeline-layer-asf-components.md)
</dt> <dt>

[<span data-ttu-id="ebf57-253">Supporto ASF in Media Foundation</span><span class="sxs-lookup"><span data-stu-id="ebf57-253">ASF Support in Media Foundation</span></span>](asf-support-in-media-foundation.md)
</dt> </dl>

 

 
