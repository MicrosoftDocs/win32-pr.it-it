---
description: Uso dei controlli mixer video
ms.assetid: 475996c6-a205-4133-8882-f55beaf9f8fd
title: Uso dei controlli mixer video
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0a8a062c6f984e0eac0128bd67c72bf691c95af6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104049795"
---
# <a name="using-the-video-mixer-controls"></a><span data-ttu-id="05a3e-103">Uso dei controlli mixer video</span><span class="sxs-lookup"><span data-stu-id="05a3e-103">Using the Video Mixer Controls</span></span>

<span data-ttu-id="05a3e-104">Il mixer EVR offre diverse interfacce che un'applicazione può usare per controllare il modo in cui il mixer elabora il video.</span><span class="sxs-lookup"><span data-stu-id="05a3e-104">The EVR mixer provides several interfaces that an application can use to control how the mixer processes video.</span></span> <span data-ttu-id="05a3e-105">Queste interfacce possono essere utilizzate sia in DirectShow che in Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="05a3e-105">These interfaces can be used in either DirectShow or Media Foundation.</span></span>



| <span data-ttu-id="05a3e-106">Interfaccia</span><span class="sxs-lookup"><span data-stu-id="05a3e-106">Interface</span></span>                                                      | <span data-ttu-id="05a3e-107">Descrizione</span><span class="sxs-lookup"><span data-stu-id="05a3e-107">Description</span></span>                                                                                                                                                                                                                                 |
|----------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="05a3e-108">Interfaccia [**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap)</span><span class="sxs-lookup"><span data-stu-id="05a3e-108">[**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) interface</span></span>   | <span data-ttu-id="05a3e-109">Alfa-fonde un'immagine bitmap statica nel video.</span><span class="sxs-lookup"><span data-stu-id="05a3e-109">Alpha-blends a static bitmap image onto the video.</span></span>                                                                                                                                                                                          |
| <span data-ttu-id="05a3e-110">Interfaccia [**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol)</span><span class="sxs-lookup"><span data-stu-id="05a3e-110">[**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol) interface</span></span> | <span data-ttu-id="05a3e-111">Controlla il modo in cui EVR combina i flussi sottoflussi video.</span><span class="sxs-lookup"><span data-stu-id="05a3e-111">Controls how the EVR mixes video substreams.</span></span>                                                                                                                                                                                                |
| <span data-ttu-id="05a3e-112">Interfaccia [**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor)</span><span class="sxs-lookup"><span data-stu-id="05a3e-112">[**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) interface</span></span>       | <span data-ttu-id="05a3e-113">Controlla la regolazione del colore, i filtri immagini e altre funzionalità di elaborazione video.</span><span class="sxs-lookup"><span data-stu-id="05a3e-113">Controls color adjustment, image filters, and other video processing capabilities.</span></span> <span data-ttu-id="05a3e-114">Questa interfaccia consente di accedere alle funzionalità implementate dal driver di grafica, pertanto le funzionalità esatte dipendono dal driver grafico dell'utente.</span><span class="sxs-lookup"><span data-stu-id="05a3e-114">This interface provides access to functionality implemented by the graphics driver, so the exact capabilities will depend on the user's graphics driver.</span></span> |



 

<span data-ttu-id="05a3e-115">Il modo corretto per ottenere i puntatori a queste interfacce varia a seconda che si usi la versione DirectShow di EVR o la versione Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="05a3e-115">The correct way to get pointers to these interfaces depends on whether you are using the DirectShow version of the EVR or the Media Foundation version.</span></span> <span data-ttu-id="05a3e-116">Per il Media Foundation EVR, dipende anche dal fatto che il EVR venga usato direttamente o tramite la [sessione multimediale](media-session.md).</span><span class="sxs-lookup"><span data-stu-id="05a3e-116">For the Media Foundation EVR, it also depends on whether you are using the EVR directly or using it through the [Media Session](media-session.md).</span></span> <span data-ttu-id="05a3e-117">In genere, un'applicazione userà EVR tramite la sessione multimediale, non direttamente.</span><span class="sxs-lookup"><span data-stu-id="05a3e-117">(Typically an application will use the EVR through the Media Session, not directly).</span></span>

<span data-ttu-id="05a3e-118">Per ottenere un puntatore a una di queste interfacce, procedere come segue:</span><span class="sxs-lookup"><span data-stu-id="05a3e-118">To get a pointer to any of these interfaces, do the following:</span></span>

1.  <span data-ttu-id="05a3e-119">Ottenere un puntatore all'interfaccia [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice) in EVR.</span><span class="sxs-lookup"><span data-stu-id="05a3e-119">Get a pointer to the [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice) interface on the EVR.</span></span>

    -   <span data-ttu-id="05a3e-120">Se si usa il filtro EVR DirectShow, chiamare **QueryInterface** sul filtro.</span><span class="sxs-lookup"><span data-stu-id="05a3e-120">If you are using the DirectShow EVR filter, call **QueryInterface** on the filter.</span></span>

    -   <span data-ttu-id="05a3e-121">Se si usa direttamente il sink di supporto EVR, chiamare **QueryInterface** sul sink multimediale.</span><span class="sxs-lookup"><span data-stu-id="05a3e-121">If you are using the EVR media sink directly, call **QueryInterface** on the media sink.</span></span>

    -   <span data-ttu-id="05a3e-122">Se si usa la sessione multimediale, chiamare **QueryInterface** nella sessione multimediale.</span><span class="sxs-lookup"><span data-stu-id="05a3e-122">If you are using the Media Session, call **QueryInterface** on the Media Session.</span></span>

2.  <span data-ttu-id="05a3e-123">Se si usa la sessione multimediale, attendere che la sessione multimediale invii l'evento [MESessionTopologyStatus](mesessiontopologystatus.md) con un valore di stato MF \_ TOPOSTATUS \_ Ready.</span><span class="sxs-lookup"><span data-stu-id="05a3e-123">If you are using the Media Session, wait for the Media Session to send the [MESessionTopologyStatus](mesessiontopologystatus.md) event with a status value of MF\_TOPOSTATUS\_READY.</span></span> <span data-ttu-id="05a3e-124">Ignorare questo passaggio se non si usa la sessione multimediale.</span><span class="sxs-lookup"><span data-stu-id="05a3e-124">(Skip this step if you are not using the Media Session.)</span></span>

3.  <span data-ttu-id="05a3e-125">Chiamare [**IMFGetService:: GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) per ottenere l'interfaccia del mixer.</span><span class="sxs-lookup"><span data-stu-id="05a3e-125">Call [**IMFGetService::GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) to get the mixer interface.</span></span> <span data-ttu-id="05a3e-126">Usare il servizio di mixer video dell'identificatore del servizio \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="05a3e-126">Use the service identifier MR\_VIDEO\_MIXER\_SERVICE.</span></span>

## <a name="alpha-blending-a-bitmap-onto-the-video"></a><span data-ttu-id="05a3e-127">Fusione alfa di una bitmap nel video</span><span class="sxs-lookup"><span data-stu-id="05a3e-127">Alpha Blending a Bitmap onto the Video</span></span>

<span data-ttu-id="05a3e-128">È possibile usare l'interfaccia [**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) per la fusione alfa di una bitmap statica nel video durante la riproduzione.</span><span class="sxs-lookup"><span data-stu-id="05a3e-128">You can use the [**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) interface to alpha blend a static bitmap onto the video during playback.</span></span> <span data-ttu-id="05a3e-129">È possibile archiviare la bitmap in una superficie Direct3D, specificata come puntatore **IDirect3DSurface9** , oppure utilizzare una bitmap GDI.</span><span class="sxs-lookup"><span data-stu-id="05a3e-129">You can store the bitmap in a Direct3D surface, specified as an **IDirect3DSurface9** pointer, or use a GDI bitmap.</span></span>

<span data-ttu-id="05a3e-130">Se si usa una superficie Direct3D per la bitmap, la superficie può contenere dati alfa per pixel, che verranno usati quando il mixer Alfa-fonde l'immagine.</span><span class="sxs-lookup"><span data-stu-id="05a3e-130">If you use a Direct3D surface for the bitmap, the surface can contain per-pixel alpha data, which will be used when the mixer alpha-blends the image.</span></span> <span data-ttu-id="05a3e-131">In alternativa, è possibile definire una chiave di colore, ovvero un singolo colore che sarà trasparente ovunque venga visualizzato nella bitmap.</span><span class="sxs-lookup"><span data-stu-id="05a3e-131">Alternatively, you can define a color key—that is, a single color that will be transparent wherever it appears in the bitmap.</span></span> <span data-ttu-id="05a3e-132">Inoltre, è possibile specificare un valore alfa che verrà applicato all'intera immagine.</span><span class="sxs-lookup"><span data-stu-id="05a3e-132">Also, you can specify an alpha value that will be applied to the entire image.</span></span> <span data-ttu-id="05a3e-133">È anche possibile impostare un rettangolo di origine per ritagliare la bitmap e un rettangolo di destinazione per posizionare la bitmap all'interno del fotogramma video.</span><span class="sxs-lookup"><span data-stu-id="05a3e-133">You can also set a source rectangle to crop the bitmap, and a destination rectangle to position the bitmap within the video frame.</span></span>

<span data-ttu-id="05a3e-134">Per impostare la bitmap, chiamare [**IMFVideoMixerBitmap:: SetAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-setalphabitmap).</span><span class="sxs-lookup"><span data-stu-id="05a3e-134">To set the bitmap, call [**IMFVideoMixerBitmap::SetAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-setalphabitmap).</span></span> <span data-ttu-id="05a3e-135">Questo metodo accetta un puntatore a una struttura [**MFVideoAlphaBitmap**](/windows/desktop/api/evr9/ns-evr9-mfvideoalphabitmap) che specifica la bitmap e i parametri di fusione alfa.</span><span class="sxs-lookup"><span data-stu-id="05a3e-135">This method takes a pointer to an [**MFVideoAlphaBitmap**](/windows/desktop/api/evr9/ns-evr9-mfvideoalphabitmap) structure that specifies the bitmap and the alpha-blending parameters.</span></span> <span data-ttu-id="05a3e-136">Per un esempio di codice, vedere l'argomento di riferimento per il metodo **SetAlphaBitmap** .</span><span class="sxs-lookup"><span data-stu-id="05a3e-136">For example code, see the reference topic for the **SetAlphaBitmap** method.</span></span>

<span data-ttu-id="05a3e-137">Dopo aver impostato la bitmap, è possibile aggiornare i parametri di fusione, inclusi i recangles di origine e di destinazione, chiamando [**IMFVideoMixerBitmap:: UpdateAlphaBitmapParameters**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-updatealphabitmapparameters).</span><span class="sxs-lookup"><span data-stu-id="05a3e-137">After you set the bitmap, you can update the blending parameters, including the source and destination recangles, by calling [**IMFVideoMixerBitmap::UpdateAlphaBitmapParameters**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-updatealphabitmapparameters).</span></span> <span data-ttu-id="05a3e-138">L'aggiornamento viene applicato al frame video successivo.</span><span class="sxs-lookup"><span data-stu-id="05a3e-138">The update takes effect on the next video frame.</span></span> <span data-ttu-id="05a3e-139">Per eseguire l'aggiornamento, è necessario che il video sia in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="05a3e-139">The video must be playing for the update to occur.</span></span> <span data-ttu-id="05a3e-140">È possibile utilizzare questo metodo per eseguire animazioni semplici sulla bitmap.</span><span class="sxs-lookup"><span data-stu-id="05a3e-140">You can use this method to perform simple animations on the bitmap.</span></span> <span data-ttu-id="05a3e-141">Se sono necessari effetti più sofisticati, provare a scrivere un mixer EVR personalizzato.</span><span class="sxs-lookup"><span data-stu-id="05a3e-141">(If you need more sophisticated effects, consider writing a custom EVR mixer.)</span></span>

<span data-ttu-id="05a3e-142">Per cancellare la bitmap, chiamare [**IMFVideoMixerBitmap:: ClearAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-clearalphabitmap).</span><span class="sxs-lookup"><span data-stu-id="05a3e-142">To clear the bitmap, call [**IMFVideoMixerBitmap::ClearAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-clearalphabitmap).</span></span>

## <a name="controlling-substreams"></a><span data-ttu-id="05a3e-143">Controllo di sottoflussi</span><span class="sxs-lookup"><span data-stu-id="05a3e-143">Controlling Substreams</span></span>

<span data-ttu-id="05a3e-144">EVR è in grado di combinare uno o più flussi video nel flusso video primario.</span><span class="sxs-lookup"><span data-stu-id="05a3e-144">The EVR can mix one or more video substreams onto the primary video stream.</span></span> <span data-ttu-id="05a3e-145">Per controllare la combinazione di sottoflussi, utilizzare l'interfaccia [**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol) .</span><span class="sxs-lookup"><span data-stu-id="05a3e-145">To control substream mixing, use the [**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol) interface.</span></span>

-   <span data-ttu-id="05a3e-146">Chiamare [**IMFVideoMixerControl:: SetStreamOutputRect**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamoutputrect) per impostare la posizione di un sottoflusso all'interno del frame video composito.</span><span class="sxs-lookup"><span data-stu-id="05a3e-146">Call [**IMFVideoMixerControl::SetStreamOutputRect**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamoutputrect) to set the position of a substream within the composited video frame.</span></span>

-   <span data-ttu-id="05a3e-147">Chiamare [**IMFVideoMixerControl:: SetStreamZOrder**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamzorder) per impostare l'ordine z per i flussi sottoflussi.</span><span class="sxs-lookup"><span data-stu-id="05a3e-147">Call [**IMFVideoMixerControl::SetStreamZOrder**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamzorder) to set the z-order for the substreams.</span></span> <span data-ttu-id="05a3e-148">Il EVR disegna i flussi video nell'ordine dei valori dell'ordine z, a partire da zero.</span><span class="sxs-lookup"><span data-stu-id="05a3e-148">The EVR draws the video streams in the order of their z-order values, starting with zero.</span></span> <span data-ttu-id="05a3e-149">Il flusso video primario è sempre primo nell'ordine z.</span><span class="sxs-lookup"><span data-stu-id="05a3e-149">The primary video stream is always first in the z-order.</span></span>

## <a name="video-processor-settings"></a><span data-ttu-id="05a3e-150">Impostazioni del processore video</span><span class="sxs-lookup"><span data-stu-id="05a3e-150">Video Processor Settings</span></span>

<span data-ttu-id="05a3e-151">Il mixer EVR usa l'accelerazione video DirectX (DXVA) per eseguire l'elaborazione video sui flussi di input.</span><span class="sxs-lookup"><span data-stu-id="05a3e-151">The EVR mixer uses DirectX Video Acceleration (DXVA) to perform video processing on the input streams.</span></span> <span data-ttu-id="05a3e-152">Le funzionalità di elaborazione esatte dipendono dal driver Graphics.</span><span class="sxs-lookup"><span data-stu-id="05a3e-152">The exact processing capabilities depend on the graphics driver.</span></span> <span data-ttu-id="05a3e-153">Le funzionalità di elaborazione video sono descritte usando la struttura [**\_ VideoProcessorCaps di DXVA2**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) .</span><span class="sxs-lookup"><span data-stu-id="05a3e-153">Video processing capabilities are described by using the [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure.</span></span> <span data-ttu-id="05a3e-154">Un particolare set di funzionalità viene definito *modalità di elaborazione video*, ogni modalità identificata da un GUID.</span><span class="sxs-lookup"><span data-stu-id="05a3e-154">A particular set of capabilities is called a *video processing mode*, each mode being identified by a GUID.</span></span> <span data-ttu-id="05a3e-155">Per un elenco di GUID predefiniti, vedere [**IDirectXVideoProcessorService:: GetVideoProcessorDeviceGuids**](/windows/desktop/api/dxva2api/nf-dxva2api-idirectxvideoprocessorservice-getvideoprocessordeviceguids).</span><span class="sxs-lookup"><span data-stu-id="05a3e-155">For a list of predefined GUIDs, see [**IDirectXVideoProcessorService::GetVideoProcessorDeviceGuids**](/windows/desktop/api/dxva2api/nf-dxva2api-idirectxvideoprocessorservice-getvideoprocessordeviceguids).</span></span> <span data-ttu-id="05a3e-156">Il driver può definire GUID aggiuntivi specifici del fornitore, che rappresentano diverse combinazioni di funzionalità.</span><span class="sxs-lookup"><span data-stu-id="05a3e-156">The driver might define additional vendor-specific GUIDs, representing different combinations of capabilities.</span></span>

<span data-ttu-id="05a3e-157">Per trovare le modalità supportate e le funzionalità di ogni modalità, eseguire le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="05a3e-157">To find the supported modes and the capabilities of each mode, do the following:</span></span>

1.  <span data-ttu-id="05a3e-158">Chiamare [**IMFGetService:: GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) per ottenere un puntatore all'interfaccia [**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) del mixer.</span><span class="sxs-lookup"><span data-stu-id="05a3e-158">Call [**IMFGetService::GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) to get a pointer to the mixer's [**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) interface.</span></span>

2.  <span data-ttu-id="05a3e-159">Chiamare [**IMFVideoProcessor:: GetAvailableVideoProcessorModes**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getavailablevideoprocessormodes).</span><span class="sxs-lookup"><span data-stu-id="05a3e-159">Call [**IMFVideoProcessor::GetAvailableVideoProcessorModes**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getavailablevideoprocessormodes).</span></span> <span data-ttu-id="05a3e-160">Questo metodo restituisce una matrice di GUID che identificano le modalità di elaborazione video disponibili.</span><span class="sxs-lookup"><span data-stu-id="05a3e-160">This method returns an array of GUIDs, which identify the available video processor modes.</span></span> <span data-ttu-id="05a3e-161">L'elenco viene restituito in ordine di qualità decrescente, ovvero la modalità con la qualità più elevata visualizzata per prima nell'elenco.</span><span class="sxs-lookup"><span data-stu-id="05a3e-161">The list is returned in descending quality order, the mode with the highest quality appearing first in the list.</span></span> <span data-ttu-id="05a3e-162">L'elenco può variare a seconda del formato del video.</span><span class="sxs-lookup"><span data-stu-id="05a3e-162">The list can change depending on the format of the video.</span></span>

3.  <span data-ttu-id="05a3e-163">Per ogni GUID nell'elenco, chiamare [**IMFVideoProcessor:: GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) per trovare le funzionalità della modalità di elaborazione video corrispondente.</span><span class="sxs-lookup"><span data-stu-id="05a3e-163">For each GUID in the list, call [**IMFVideoProcessor::GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) to find the capabilities of the corresponding video processor mode.</span></span> <span data-ttu-id="05a3e-164">Il metodo compila una struttura [**\_ VideoProcessorCaps di DXVA2**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) con una descrizione delle funzionalità.</span><span class="sxs-lookup"><span data-stu-id="05a3e-164">The method fills a [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure with a description of the capabilities.</span></span>

4.  <span data-ttu-id="05a3e-165">Per selezionare una modalità, chiamare [**IMFVideoProcessor:: SetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setvideoprocessormode).</span><span class="sxs-lookup"><span data-stu-id="05a3e-165">To select a mode, call [**IMFVideoProcessor::SetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setvideoprocessormode).</span></span> <span data-ttu-id="05a3e-166">In caso contrario, EVR seleziona automaticamente una modalità di inizio del flusso.</span><span class="sxs-lookup"><span data-stu-id="05a3e-166">Otherwise, the EVR automatically selects a mode when streaming begins.</span></span> <span data-ttu-id="05a3e-167">In tal caso, è possibile chiamare [**IMFVideoProcessor:: GetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessormode) per individuare la modalità selezionata.</span><span class="sxs-lookup"><span data-stu-id="05a3e-167">In that case, you can call [**IMFVideoProcessor::GetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessormode) to find which mode was selected.</span></span>

<span data-ttu-id="05a3e-168">La maggior parte dei campi nella [**struttura \_ VideoProcessorCaps di DXVA2**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) descrive il comportamento dei driver di basso livello e non è rilevante in un'applicazione tipica.</span><span class="sxs-lookup"><span data-stu-id="05a3e-168">Most of the fields in the [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure describe low-level driver behavior and are not of interest in a typical application.</span></span> <span data-ttu-id="05a3e-169">È più probabile che i campi seguenti siano di interesse:</span><span class="sxs-lookup"><span data-stu-id="05a3e-169">The following fields are most likely to be of interest:</span></span>

-   <span data-ttu-id="05a3e-170">**DeviceCaps**.</span><span class="sxs-lookup"><span data-stu-id="05a3e-170">**DeviceCaps**.</span></span> <span data-ttu-id="05a3e-171">Questo campo indica se l'elaborazione video viene eseguita in hardware o software e se il driver di grafica è un driver DXVA 1,0 precedente.</span><span class="sxs-lookup"><span data-stu-id="05a3e-171">This field indicates whether video processing is performed in hardware or software, and whether the graphics driver is an older DXVA 1.0 driver.</span></span>

-   <span data-ttu-id="05a3e-172">**DeinterlaceTechnology**.</span><span class="sxs-lookup"><span data-stu-id="05a3e-172">**DeinterlaceTechnology**.</span></span> <span data-ttu-id="05a3e-173">Questo campo fornisce un'indicazione del livello di qualità di deinterlacciamento che è possibile prevedere se il video di origine è interlacciato.</span><span class="sxs-lookup"><span data-stu-id="05a3e-173">This field provides some indication of what level of deinterlacing quality you can expect if the source video is interlaced.</span></span>

-   <span data-ttu-id="05a3e-174">**ProcAmpControlCaps**.</span><span class="sxs-lookup"><span data-stu-id="05a3e-174">**ProcAmpControlCaps**.</span></span> <span data-ttu-id="05a3e-175">Questo campo specifica i controlli di regolazione del colore disponibili.</span><span class="sxs-lookup"><span data-stu-id="05a3e-175">This field specifies which color adjustment controls are available.</span></span> <span data-ttu-id="05a3e-176">Per un elenco delle possibili regolazioni dei colori, vedere [impostazioni del Procampo](procamp-settings.md).</span><span class="sxs-lookup"><span data-stu-id="05a3e-176">For a list of possible color adjustments, see [ProcAmp Settings](procamp-settings.md).</span></span> <span data-ttu-id="05a3e-177">Se il driver non è in grado di eseguire la regolazione del colore, questo campo è zero.</span><span class="sxs-lookup"><span data-stu-id="05a3e-177">If the driver cannot perform color adjustment, this field is zero.</span></span>

-   <span data-ttu-id="05a3e-178">**VideoProcessorOperations**.</span><span class="sxs-lookup"><span data-stu-id="05a3e-178">**VideoProcessorOperations**.</span></span> <span data-ttu-id="05a3e-179">Questo campo contiene i flag che descrivono le varie funzionalità di elaborazione video.</span><span class="sxs-lookup"><span data-stu-id="05a3e-179">This field contains flags that describe miscellaneous video processing capabilities.</span></span> <span data-ttu-id="05a3e-180">Due flag di particolare importanza sono il \_ flag dei \_ sottoflussi VIDEOPROCESS di DXVA2 e il \_ flag dei \_ sottoflussi DXVA2 VideoProcess.</span><span class="sxs-lookup"><span data-stu-id="05a3e-180">Two flags of particular importance are the DXVA2\_VideoProcess\_SubStreams flag and the DXVA2\_VideoProcess\_SubStreams flag.</span></span> <span data-ttu-id="05a3e-181">È necessario che sia presente almeno uno di questi flag per EVR per combinare i flussi sottoflussi nel flusso video di riferimento.</span><span class="sxs-lookup"><span data-stu-id="05a3e-181">At least one of these flags must be present for the EVR to mix substreams onto the reference video stream.</span></span> <span data-ttu-id="05a3e-182">Se non è presente alcun flag, il EVR è limitato a un flusso video.</span><span class="sxs-lookup"><span data-stu-id="05a3e-182">If neither flag is present, the EVR is limited to one video stream.</span></span>

-   <span data-ttu-id="05a3e-183">**NoiseFilterTechnology**.</span><span class="sxs-lookup"><span data-stu-id="05a3e-183">**NoiseFilterTechnology**.</span></span> <span data-ttu-id="05a3e-184">Questo campo indica quali filtri acustici sono supportati dal driver di grafica.</span><span class="sxs-lookup"><span data-stu-id="05a3e-184">This field indicates which noise filters are supported by the graphics driver.</span></span> <span data-ttu-id="05a3e-185">Se il driver non supporta il filtro acustico, il valore è DXVA2 \_ NoiseFilterTech non \_ supportato.</span><span class="sxs-lookup"><span data-stu-id="05a3e-185">If the driver does not support noise filtering, the value is DXVA2\_NoiseFilterTech\_Unsupported.</span></span>

-   <span data-ttu-id="05a3e-186">**DetailFilterTechnology**.</span><span class="sxs-lookup"><span data-stu-id="05a3e-186">**DetailFilterTechnology**.</span></span> <span data-ttu-id="05a3e-187">Questo campo indica quali filtri dei dettagli sono supportati dal driver di grafica.</span><span class="sxs-lookup"><span data-stu-id="05a3e-187">This field indicates which detail filters are supported by the graphics driver.</span></span> <span data-ttu-id="05a3e-188">Se il driver non supporta il filtro acustico, il valore è DXVA2 \_ DetailFilterTech non \_ supportato.</span><span class="sxs-lookup"><span data-stu-id="05a3e-188">If the driver does not support noise filtering, the value is DXVA2\_DetailFilterTech\_Unsupported.</span></span>

## <a name="color-adjustment-and-image-filtering"></a><span data-ttu-id="05a3e-189">Regolazione del colore e filtro delle immagini</span><span class="sxs-lookup"><span data-stu-id="05a3e-189">Color Adjustment and Image Filtering</span></span>

<span data-ttu-id="05a3e-190">Il driver di grafica potrebbe supportare la regolazione del colore (detta anche *amplificazione dei processi* o *ProcAmp*) e il filtro delle immagini.</span><span class="sxs-lookup"><span data-stu-id="05a3e-190">The graphics driver might support color adjustment (also called *process amplification* or simply *ProcAmp*) and image filtering.</span></span> <span data-ttu-id="05a3e-191">Quando vengono eseguite dalla GPU, la regolazione del colore e il filtro delle immagini possono essere eseguiti in tempo reale senza overhead della CPU.</span><span class="sxs-lookup"><span data-stu-id="05a3e-191">When performed by the GPU, color adjustment and image filtering can be done in real time with no CPU overhead.</span></span>

<span data-ttu-id="05a3e-192">Per usare queste funzionalità, seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="05a3e-192">To use these features, perform the following steps:</span></span>

1.  <span data-ttu-id="05a3e-193">Selezionare una modalità di elaborazione video come descritto nella sezione precedente.</span><span class="sxs-lookup"><span data-stu-id="05a3e-193">Select a video processing mode as described in the previous section.</span></span>

2.  <span data-ttu-id="05a3e-194">Chiamare [**IMFVideoProcessor:: GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) per trovare le funzionalità di elaborazione video, come descritto nella sezione precedente.</span><span class="sxs-lookup"><span data-stu-id="05a3e-194">Call [**IMFVideoProcessor::GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) to find the video processing capabilities as described in the previous section.</span></span> <span data-ttu-id="05a3e-195">Il metodo compila una struttura [**\_ VideoProcessorCaps DXVA2**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) che descrive le funzionalità, ad esempio se il driver supporta la regolazione del colore e il filtro delle immagini.</span><span class="sxs-lookup"><span data-stu-id="05a3e-195">The method fills in a [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure which describes the capabilities, including whether the driver supports color adjustment and image filter.</span></span>

3.  <span data-ttu-id="05a3e-196">Per ogni regolazione del colore supportata dal driver, chiamare [**IMFVideoProcessor:: GetProcAmpRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocamprange) per trovare il possibile intervallo di valori per tale impostazione.</span><span class="sxs-lookup"><span data-stu-id="05a3e-196">For each color adjustment that is supported by driver, call [**IMFVideoProcessor::GetProcAmpRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocamprange) to find the possible range of value for that setting.</span></span> <span data-ttu-id="05a3e-197">Questo metodo restituisce anche il valore predefinito per l'impostazione.</span><span class="sxs-lookup"><span data-stu-id="05a3e-197">This method also returns the default value for the setting.</span></span> <span data-ttu-id="05a3e-198">Chiamare [**IMFVideoProcessor:: GetProcAmpValues**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocampvalues) per trovare il valore corrente delle impostazioni.</span><span class="sxs-lookup"><span data-stu-id="05a3e-198">Call [**IMFVideoProcessor::GetProcAmpValues**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocampvalues) to find the current value of the settings.</span></span> <span data-ttu-id="05a3e-199">I valori non hanno unità specificate.</span><span class="sxs-lookup"><span data-stu-id="05a3e-199">The values do not have specified units.</span></span> <span data-ttu-id="05a3e-200">Spetta al driver definire l'intervallo di valori.</span><span class="sxs-lookup"><span data-stu-id="05a3e-200">It is up to the driver to define the range of values.</span></span>

4.  <span data-ttu-id="05a3e-201">Chiamare [**IMFVideoProcessor:: SetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue) per impostare un valore di regolazione del colore.</span><span class="sxs-lookup"><span data-stu-id="05a3e-201">Call [**IMFVideoProcessor::SetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue) to set a color adjustment value.</span></span>

5.  <span data-ttu-id="05a3e-202">Se il driver supporta il filtro delle immagini, ogni tipo di filtro (rumore e dettagli) supporta tre impostazioni, ovvero livello, raggio e soglia, sia in crominanza che in luminanza.</span><span class="sxs-lookup"><span data-stu-id="05a3e-202">If the driver supports image filtering, then each filter type (noise and detail) supports three settings—level, radius, and threshold—in both chroma and luma.</span></span> <span data-ttu-id="05a3e-203">Vedere [impostazioni del filtro immagine DXVA](dxva-image-filter-settings.md). Per ogni impostazione, chiamare [**IMFVideoProcessor:: GetFilteringRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringrange) per ottenere l'intervallo dei valori possibili e chiamare [**IMFVideoProcessor:: GetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringvalue) per ottenere il valore corrente.</span><span class="sxs-lookup"><span data-stu-id="05a3e-203">(See [DXVA Image Filter Settings](dxva-image-filter-settings.md).) For each setting, call [**IMFVideoProcessor::GetFilteringRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringrange) to get the range of possible values and call [**IMFVideoProcessor::GetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringvalue) to get the current value.</span></span>

6.  <span data-ttu-id="05a3e-204">Per modificare un'impostazione del filtro immagine, chiamare [**IMFVideoProcessor:: SetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue).</span><span class="sxs-lookup"><span data-stu-id="05a3e-204">To change an image filter setting, call [**IMFVideoProcessor::SetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue).</span></span>

## <a name="related-topics"></a><span data-ttu-id="05a3e-205">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="05a3e-205">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="05a3e-206">Renderer video migliorato</span><span class="sxs-lookup"><span data-stu-id="05a3e-206">Enhanced Video Renderer</span></span>](enhanced-video-renderer.md)
</dt> </dl>

 

 



