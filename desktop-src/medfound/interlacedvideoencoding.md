---
description: Codifica video interlacciata
ms.assetid: 7695d4e3-4a75-4972-ab02-bc532d6a4dce
title: Codifica video interlacciata (Microsoft Media Foundation)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fafacb56f29964e81b040c59cdb75d8ebb35830b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103968342"
---
# <a name="interlaced-video-encoding-microsoft-media-foundation"></a><span data-ttu-id="6c342-103">Codifica video interlacciata (Microsoft Media Foundation)</span><span class="sxs-lookup"><span data-stu-id="6c342-103">Interlaced Video Encoding (Microsoft Media Foundation)</span></span>

<span data-ttu-id="6c342-104">I dati video destinati all'uso con i computer sono in genere *progressivi*, vale a dire che ogni frame è codificato come una singola immagine.</span><span class="sxs-lookup"><span data-stu-id="6c342-104">Video data intended for use with computers is typically *progressive*, meaning that each frame is encoded as a single image.</span></span> <span data-ttu-id="6c342-105">Alcuni dispositivi, come le televisioni, non visualizzano un frame in una sola volta, ma come due immagini.</span><span class="sxs-lookup"><span data-stu-id="6c342-105">Some devices, like televisions, do not display a frame all at once, but as two images.</span></span> <span data-ttu-id="6c342-106">Una delle immagini, o campi, contiene tutte le righe numerate pari.</span><span class="sxs-lookup"><span data-stu-id="6c342-106">One of the images, or fields, contains all of the even numbered rows.</span></span> <span data-ttu-id="6c342-107">L'altro campo contiene i dati per tutte le righe dispari.</span><span class="sxs-lookup"><span data-stu-id="6c342-107">The other field contains the data for all of the odd numbered rows.</span></span> <span data-ttu-id="6c342-108">Il video codificato con più di un campo per frame viene chiamato interlacciato, perché viene sottoposto a rendering passando tra il campo even e il campo dispari.</span><span class="sxs-lookup"><span data-stu-id="6c342-108">Video encoded with more than one field per frame is called interlaced, because it is rendered by switching between the even field and the odd field.</span></span>

<span data-ttu-id="6c342-109">In passato, il contenuto video interlacciato veniva sempre deinterlacciato prima della codifica con il codec Windows Media Video.</span><span class="sxs-lookup"><span data-stu-id="6c342-109">In the past, interlaced video content was always de-interlaced before encoding with the Windows Media Video codec.</span></span> <span data-ttu-id="6c342-110">A partire da Windows Media 9 Series, tuttavia, il codificatore video supporta la compressione di contenuto interlacciato senza prima convertirlo in progressivo.</span><span class="sxs-lookup"><span data-stu-id="6c342-110">Beginning with Windows Media 9 Series, however, the video encoder supports compression of interlaced content without first converting it to progressive.</span></span> <span data-ttu-id="6c342-111">La gestione dell'interlacciamento in un file codificato è importante se il rendering del contenuto viene eseguito su una visualizzazione interlacciata, ad esempio un televisore.</span><span class="sxs-lookup"><span data-stu-id="6c342-111">Maintaining interlacing in an encoded file is important if the content is ever rendered on an interlaced display, such as a television.</span></span> <span data-ttu-id="6c342-112">Questa funzionalità è sempre più importante, in quanto il supporto per le distribuzioni di contenuto basato su Windows Media in lettori DVD, set-top box e altri componenti elettronici domestici.</span><span class="sxs-lookup"><span data-stu-id="6c342-112">This feature is of increasing importance, as support for Windows Media-based content spreads to DVD players, set-top boxes, and other home electronics.</span></span>

<span data-ttu-id="6c342-113">Il modo più semplice per codificare e distribuire video interlacciato consiste nello sviluppare l'applicazione usando Windows Media Format SDK e archiviando il contenuto nei file ASF.</span><span class="sxs-lookup"><span data-stu-id="6c342-113">The easiest way to encode and deliver interlaced video is to develop your application using the Windows Media Format SDK and storing the content in ASF files.</span></span> <span data-ttu-id="6c342-114">Le informazioni interlacciate sui frame vengono passate al codec usando le estensioni dell'unità dati, che funzionano bene per il contenuto ASF, ma sono leggermente più complicate per il supporto in altri contenitori.</span><span class="sxs-lookup"><span data-stu-id="6c342-114">The interlaced information about frames is passed to the codec using data unit extensions, which work well for ASF content, but are a little trickier to support in other containers.</span></span> <span data-ttu-id="6c342-115">Per ulteriori informazioni sulle estensioni dell'unità dati, vedere [Using Data Unit Extensions](usingdataunitextensions.md).</span><span class="sxs-lookup"><span data-stu-id="6c342-115">For more information about data unit extensions, see [Using Data Unit Extensions](usingdataunitextensions.md).</span></span>

<span data-ttu-id="6c342-116">Per supportare la codifica interlacciata è necessario eseguire due passaggi principali: ottenere le informazioni sul frame nel codificatore e recapitano le informazioni all'applicazione di rendering.</span><span class="sxs-lookup"><span data-stu-id="6c342-116">To support interlaced encoding involves two major steps: getting the frame information to the encoder, and delivering the information to the rendering application.</span></span> <span data-ttu-id="6c342-117">Questi passaggi sono descritti nei paragrafi seguenti.</span><span class="sxs-lookup"><span data-stu-id="6c342-117">These steps are described in the following paragraphs.</span></span>

## <a name="interlaced-video-and-the-encoder"></a><span data-ttu-id="6c342-118">Video interlacciato e codificatore</span><span class="sxs-lookup"><span data-stu-id="6c342-118">Interlaced Video and the Encoder</span></span>

<span data-ttu-id="6c342-119">Il primo passaggio nella codifica del video con l'interlacciamento mantenuto consiste nel configurare il codificatore per codificare i campi interlacciati.</span><span class="sxs-lookup"><span data-stu-id="6c342-119">The first step in encoding video with maintained interlacing is to configure the encoder to encode interlaced fields.</span></span> <span data-ttu-id="6c342-120">A tale scopo, impostare la proprietà [MFPKEY \_ INTERLACEDCODINGENABLED](mfpkey-interlacedcodingenabledproperty.md) su **true**.</span><span class="sxs-lookup"><span data-stu-id="6c342-120">To do this, set the [MFPKEY\_INTERLACEDCODINGENABLED](mfpkey-interlacedcodingenabledproperty.md) property to **TRUE**.</span></span> <span data-ttu-id="6c342-121">In questo modo si prepara il codificatore a ricevere esempi interlacciati.</span><span class="sxs-lookup"><span data-stu-id="6c342-121">This prepares the encoder to receive interlaced samples.</span></span> <span data-ttu-id="6c342-122">Ogni esempio di input deve contenere entrambi i campi.</span><span class="sxs-lookup"><span data-stu-id="6c342-122">Each input sample must contain both fields.</span></span>

<span data-ttu-id="6c342-123">Ogni esempio elaborato con il codificatore dopo l'attivazione della codifica interlacciata deve avere un'estensione di unità dati collegata.</span><span class="sxs-lookup"><span data-stu-id="6c342-123">Each sample that you process with the encoder after activating interlaced encoding should have a data unit extension attached.</span></span> <span data-ttu-id="6c342-124">Si presuppone che gli esempi senza l'estensione dell'unità dati prevista siano progressivi.</span><span class="sxs-lookup"><span data-stu-id="6c342-124">Samples without the expected data unit extension are assumed to be progressive.</span></span> <span data-ttu-id="6c342-125">Il GUID che identifica l'estensione è D590DC20-07BC-436C-9CF7-F3BBFBF1A4DC.</span><span class="sxs-lookup"><span data-stu-id="6c342-125">The GUID identifying the extension is D590DC20-07BC-436C-9CF7-F3BBFBF1A4DC.</span></span> <span data-ttu-id="6c342-126">I valori passati dagli oggetti di Windows Media Format SDK sono definiti nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="6c342-126">The values passed by the objects of the Windows Media Format SDK are defined in the following table.</span></span>



| <span data-ttu-id="6c342-127">Valore</span><span class="sxs-lookup"><span data-stu-id="6c342-127">Value</span></span>      | <span data-ttu-id="6c342-128">Descrizione</span><span class="sxs-lookup"><span data-stu-id="6c342-128">Description</span></span>                                                                                                                              |
|------------|------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="6c342-129">0x00000020</span><span class="sxs-lookup"><span data-stu-id="6c342-129">0x00000020</span></span> | <span data-ttu-id="6c342-130">Specifica che l'esempio è codificato prima con il campo inferiore.</span><span class="sxs-lookup"><span data-stu-id="6c342-130">Specifies that the sample is encoded with the bottom field first.</span></span> <span data-ttu-id="6c342-131">Questo valore è significativo solo se combinato con il valore interlacciato.</span><span class="sxs-lookup"><span data-stu-id="6c342-131">This value is only meaningful when combined with the interlaced value.</span></span> |
| <span data-ttu-id="6c342-132">0x00000040</span><span class="sxs-lookup"><span data-stu-id="6c342-132">0x00000040</span></span> | <span data-ttu-id="6c342-133">Specifica che l'esempio è codificato prima con il campo superiore.</span><span class="sxs-lookup"><span data-stu-id="6c342-133">Specifies that the sample is encoded with the top field first.</span></span> <span data-ttu-id="6c342-134">Questo valore è significativo solo se combinato con il valore interlacciato.</span><span class="sxs-lookup"><span data-stu-id="6c342-134">This value is only meaningful when combined with the interlaced value.</span></span>    |
| <span data-ttu-id="6c342-135">0x00000080</span><span class="sxs-lookup"><span data-stu-id="6c342-135">0x00000080</span></span> | <span data-ttu-id="6c342-136">Specifica che l'esempio è interlacciato.</span><span class="sxs-lookup"><span data-stu-id="6c342-136">Specifies that the sample is interlaced.</span></span> <span data-ttu-id="6c342-137">Si tratta dell'unico valore significativo per il codec DMOs.</span><span class="sxs-lookup"><span data-stu-id="6c342-137">This is the only value that is meaningful to the codec DMOs.</span></span>                                    |



 

<span data-ttu-id="6c342-138">Uno dei primi due valori viene sempre combinato con 0x80 utilizzando **un operatore OR** bit per bit prima di essere impostato nell'esempio.</span><span class="sxs-lookup"><span data-stu-id="6c342-138">One of the first two values is always combined with 0x80 using a bitwise **OR** before being set on the sample.</span></span> <span data-ttu-id="6c342-139">Tuttavia, il codificatore controlla solo 0x80 e ignora il resto dell'estensione.</span><span class="sxs-lookup"><span data-stu-id="6c342-139">However, the encoder only checks for 0x80 and disregards the rest of the extension.</span></span> <span data-ttu-id="6c342-140">Se l'estensione identifica l'esempio come interlacciato, il codificatore gestisce l'interlacciamento di esempio nel flusso compresso e incorpora un flag di indicazione nel flusso, in modo che il decodificatore possa identificare i frame interlacciati.</span><span class="sxs-lookup"><span data-stu-id="6c342-140">If the extension identifies the sample as interlaced, the encoder maintains the sample interlacing in the compressed stream, and embeds an indication flag in the stream so that the decoder can identify interlaced frames.</span></span> <span data-ttu-id="6c342-141">Ogni campione interlacciato è contrassegnato, in modo che il contenuto di origine costituito da una combinazione di progressivo e interlacciato possa essere codificato in un flusso insieme.</span><span class="sxs-lookup"><span data-stu-id="6c342-141">Each interlaced sample is marked, so that source content that is a mix of progressive and interlaced can be encoded into a stream together.</span></span>

<span data-ttu-id="6c342-142">L'oggetto writer di Windows Media Format SDK include le estensioni dell'unità dati del tipo di contenuto negli esempi che scrive nella sezione dati del contenitore ASF da usare al momento del rendering.</span><span class="sxs-lookup"><span data-stu-id="6c342-142">The Windows Media Format SDK writer object includes the content type data unit extensions in the samples that it writes to the data section of the ASF container for use at the time of rendering.</span></span>

## <a name="reading-and-rendering-interlaced-video"></a><span data-ttu-id="6c342-143">Lettura e rendering di video interlacciati</span><span class="sxs-lookup"><span data-stu-id="6c342-143">Reading and Rendering Interlaced Video</span></span>

<span data-ttu-id="6c342-144">Il decodificatore identifica gli esempi interlacciati in base al flag impostato nel flusso dal codificatore.</span><span class="sxs-lookup"><span data-stu-id="6c342-144">The decoder identifies interlaced samples based on the flag set in the stream by the encoder.</span></span> <span data-ttu-id="6c342-145">Come impostazione predefinita, il decodificatore Deinterlaccia gli esempi e recapita output progressivi.</span><span class="sxs-lookup"><span data-stu-id="6c342-145">As a default, the decoder deinterlaces the samples and delivers progressive outputs.</span></span> <span data-ttu-id="6c342-146">L'applicazione Player può configurare il decodificatore per elaborare gli output con interlacciamento gestito impostando la proprietà [ \_ \_ deinterlacciamento del decodificatore MFPKEY](mfpkey-decoder-deinterlacingproperty.md) .</span><span class="sxs-lookup"><span data-stu-id="6c342-146">The player application can configure the decoder to process outputs with interlacing maintained by setting the [MFPKEY\_DECODER\_DEINTERLACING](mfpkey-decoder-deinterlacingproperty.md) property.</span></span>

<span data-ttu-id="6c342-147">La difficoltà nella riproduzione video interlacciata si verifica dopo che il decodificatore fornisce gli esempi.</span><span class="sxs-lookup"><span data-stu-id="6c342-147">The difficulty in interlaced video playback arises after the decoder delivers the samples.</span></span> <span data-ttu-id="6c342-148">Il renderer (scheda video o chip in un dispositivo) non è in grado di visualizzare correttamente il contenuto del video senza conoscere il campo.</span><span class="sxs-lookup"><span data-stu-id="6c342-148">The renderer (video card or chip in a device) cannot properly display the video content without knowing which field is which.</span></span> <span data-ttu-id="6c342-149">Nelle applicazioni che usano Windows Media Format SDK, l'estensione dell'unità dati del tipo di contenuto viene recuperata dagli esempi non compressi e può essere passata al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="6c342-149">In applications using the Windows Media Format SDK, the content type data unit extension is retrieved from the uncompressed samples, and can be passed to the device.</span></span>

<span data-ttu-id="6c342-150">Quando si usano direttamente gli oggetti codec, nessuno di questi trasferimenti di dati è automatico.</span><span class="sxs-lookup"><span data-stu-id="6c342-150">When using the codec objects directly, none of this data transfer is automatic.</span></span> <span data-ttu-id="6c342-151">È necessario implementare il supporto dell'estensione dell'unità dati, sia negli oggetti buffer che nel contenitore usato per il contenuto codificato.</span><span class="sxs-lookup"><span data-stu-id="6c342-151">You must implement data-unit-extension support, both in your buffer objects and in the container that you use for your encoded content.</span></span> <span data-ttu-id="6c342-152">I tipi più comuni di contenitori multimediali (ad esempio AVI) non supportano i metadati a livello di esempio.</span><span class="sxs-lookup"><span data-stu-id="6c342-152">Most common types of media containers (like AVI) do not support sample-level metadata.</span></span> <span data-ttu-id="6c342-153">È possibile implementare il proprio sistema per archiviare i dati nel file e associarli a singoli esempi, ma solo un lettore personalizzato può recuperarlo.</span><span class="sxs-lookup"><span data-stu-id="6c342-153">You can implement your own system to store the data in the file and associate it with individual samples, but only a customized reader would be able to retrieve it.</span></span>

> [!Note]  
> <span data-ttu-id="6c342-154">Impostando la proprietà [MFPKEY \_ INTERLACEDCODINGENABLED](mfpkey-interlacedcodingenabledproperty.md) su **true** e non inviando alcun campione con l'estensione dell'unità dati Content-Type collegata, il codificatore potrebbe arrestarsi in modo anomalo.</span><span class="sxs-lookup"><span data-stu-id="6c342-154">Setting the [MFPKEY\_INTERLACEDCODINGENABLED](mfpkey-interlacedcodingenabledproperty.md) property to **TRUE**, and then not sending any samples with the content-type data-unit extension attached can cause the encoder to crash.</span></span> <span data-ttu-id="6c342-155">Impostare il codificatore per la codifica interlacciata solo se sono presenti esempi interlacciati per il recapito.</span><span class="sxs-lookup"><span data-stu-id="6c342-155">Set the encoder for interlaced encoding only if you have interlaced samples to deliver.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="6c342-156">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="6c342-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6c342-157">Uso dei video</span><span class="sxs-lookup"><span data-stu-id="6c342-157">Working with Video</span></span>](workingwithvideo.md)
</dt> </dl>

 

 



