---
description: Inizializzazione dell'oggetto ContentInfo di un nuovo file ASF
ms.assetid: a4f6c90e-1b38-4c70-8bc5-e2e16af3d87a
title: Inizializzazione dell'oggetto ContentInfo di un nuovo file ASF
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 74826942700f4be8028075fcd9466414834eb8e2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104343331"
---
# <a name="initializing-the-contentinfo-object-of-a-new-asf-file"></a><span data-ttu-id="3716c-103">Inizializzazione dell'oggetto ContentInfo di un nuovo file ASF</span><span class="sxs-lookup"><span data-stu-id="3716c-103">Initializing the ContentInfo Object of a New ASF File</span></span>

<span data-ttu-id="3716c-104">Dopo aver creato un oggetto ContentInfo vuoto chiamando la funzione [**MFCreateASFContentInfo**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfcontentinfo) , l'applicazione deve chiamare [**IMFASFContentInfo:: seprofile**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile) per fornire il profilo di codifica.</span><span class="sxs-lookup"><span data-stu-id="3716c-104">After creating an empty ContentInfo object by calling the [**MFCreateASFContentInfo**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfcontentinfo) function, the application must call [**IMFASFContentInfo::SetProfile**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile) to provide the encoding profile.</span></span> <span data-ttu-id="3716c-105">Per informazioni sulla creazione di un profilo, vedere Creazione di un [profilo ASF](creating-an-asf-profile.md).</span><span class="sxs-lookup"><span data-stu-id="3716c-105">For information about creating a profile, see [Creating an ASF Profile](creating-an-asf-profile.md).</span></span>

<span data-ttu-id="3716c-106">Prima di poter leggere le informazioni dal profilo, il metodo **seprofile** deve convalidare l'oggetto profilo specificato controllando gli identificatori di flusso o i tipi di supporto.</span><span class="sxs-lookup"><span data-stu-id="3716c-106">Before information can be read from the profile, the **SetProfile** method must validate the specified profile object by checking the stream identifiers or media types.</span></span> <span data-ttu-id="3716c-107">Se il profilo supera la convalida, vengono generati vari oggetti intestazione, ad esempio l'oggetto proprietà del file, l'oggetto proprietà del flusso di velocità in bit, l'oggetto proprietà del flusso e l'oggetto di esclusione reciproca.</span><span class="sxs-lookup"><span data-stu-id="3716c-107">If the profile passes the validation, various header objects are generated, such as the File Properties Object, the Stream Bitrate Properties Object, the Stream Properties Object, and the Mutual Exclusion Object.</span></span>

<span data-ttu-id="3716c-108">**Seprofile** calcola e imposta i valori consigliati per determinate proprietà, ad esempio il valore di preroll.</span><span class="sxs-lookup"><span data-stu-id="3716c-108">**SetProfile** computes and sets recommended values for certain properties, such as the preroll value.</span></span> <span data-ttu-id="3716c-109">Se non è già stato impostato, il valore di preroll consigliato in millisecondi dipende dalla finestra massima del buffer del bucket di perdita specificata per i flussi nel profilo.</span><span class="sxs-lookup"><span data-stu-id="3716c-109">If this is not already set, the recommended preroll value in milliseconds depends on the maximum buffer window of the leaky bucket specified for the streams in the profile.</span></span> <span data-ttu-id="3716c-110">Analogamente, vengono impostate anche le dimensioni dei pacchetti di dati Minimum e Maximum.</span><span class="sxs-lookup"><span data-stu-id="3716c-110">Similarly, the minimum and maximum data packet sizes are also set.</span></span> <span data-ttu-id="3716c-111">I valori consigliati potrebbero eseguire l'override delle dimensioni dei pacchetti impostate nel profilo tramite gli attributi.</span><span class="sxs-lookup"><span data-stu-id="3716c-111">The recommended values might override the packet sizes that are set on the profile through attributes.</span></span>

<span data-ttu-id="3716c-112">Poiché è in corso la creazione del file, il file viene categorizzato come tipo di trasmissione, che è indicato dal campo Flags dell'oggetto proprietà file.</span><span class="sxs-lookup"><span data-stu-id="3716c-112">Because the file is in the process of being created, the file is categorized as a broadcast type, which is denoted by the Flags field of the File Properties Object.</span></span> <span data-ttu-id="3716c-113">Alcuni valori sconosciuti, ad esempio il numero di pacchetti di dati, la durata della riproduzione e la durata della trasmissione, sono impostati su zero.</span><span class="sxs-lookup"><span data-stu-id="3716c-113">Certain unknown values such as the number of data packets, play duration, and send duration are set to zero.</span></span> <span data-ttu-id="3716c-114">Questi valori sono rappresentati dagli attributi **MF \_ PD \_ ASF \_ xxx** e devono essere aggiornati dall'applicazione al termine della creazione del file.</span><span class="sxs-lookup"><span data-stu-id="3716c-114">These values are represented by **MF\_PD\_ASF\_xxx** attributes and must be updated by the application after file creation is complete.</span></span>

<span data-ttu-id="3716c-115">L'oggetto profilo specificato sostituisce qualsiasi profilo esistente associato all'oggetto ContentInfo, rimuove gli oggetti intestazione a cui viene fatto riferimento e reimposta le proprietà globali del file, ad esempio la preroll e la dimensione del pacchetto di dati.</span><span class="sxs-lookup"><span data-stu-id="3716c-115">The specified profile object replaces any existing profile associated with the ContentInfo object, removes the referenced header objects, and resets global file properties such as preroll and data packet size.</span></span>

<span data-ttu-id="3716c-116">Il metodo **seprofile** crea anche l'oggetto dati che rappresenta l'oggetto dati ASF.</span><span class="sxs-lookup"><span data-stu-id="3716c-116">The **SetProfile** method also creates the data object that represents the ASF Data Object.</span></span> <span data-ttu-id="3716c-117">Se si riutilizza un oggetto ContentInfo che include informazioni su tutti i pacchetti di dati, il **profilo** non riesce e restituisce l'errore di MF \_ e \_ già \_ inizializzato che indica che è già associato a un oggetto dati ASF esistente.</span><span class="sxs-lookup"><span data-stu-id="3716c-117">If you reuse a ContentInfo object that includes information about any data packets, **SetProfile** fails and returns the MF\_E\_ALREADY\_INITIALIZED error indicating that it is already associated with an existing ASF Data Object.</span></span> <span data-ttu-id="3716c-118">Per impostazione predefinita, per un nuovo oggetto ContentInfo, il numero di pacchetti di dati è impostato su zero e le dimensioni dell'oggetto dati sono impostate su 50 byte.</span><span class="sxs-lookup"><span data-stu-id="3716c-118">By default, for a new ContentInfo object, the data packet count is set to zero and the data object size is set to 50 bytes.</span></span> <span data-ttu-id="3716c-119">Se si usa il multiplexer per generare pacchetti di dati, il multiplexer aggiorna l'oggetto ContentInfo in modo da riflettere i nuovi valori, ad esempio il numero di pacchetti di dati.</span><span class="sxs-lookup"><span data-stu-id="3716c-119">If you use the multiplexer to generate data packets, the multiplexer updates the ContentInfo object to reflect new values such as the data packet count.</span></span> <span data-ttu-id="3716c-120">Per ulteriori informazioni sulla generazione di pacchetti di dati, vedere [generazione di nuovi pacchetti di dati ASF](generating-new-asf-data-packets.md).</span><span class="sxs-lookup"><span data-stu-id="3716c-120">For more information about data packet generation, see [Generating New ASF Data Packets](generating-new-asf-data-packets.md).</span></span>

<span data-ttu-id="3716c-121">Dopo che tutti gli oggetti Header sono stati aggiunti all'oggetto intestazione ASF finale, è possibile recuperare la dimensione totale dell'intestazione chiamando [**IMFASFContentInfo:: GetHeaderSize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getheadersize).</span><span class="sxs-lookup"><span data-stu-id="3716c-121">After all the Header Objects are added to the final ASF Header Object, the total header size can be retrieved by calling [**IMFASFContentInfo::GetHeaderSize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getheadersize).</span></span> <span data-ttu-id="3716c-122">Questa dimensione include le dimensioni iniziali dell'oggetto dati.</span><span class="sxs-lookup"><span data-stu-id="3716c-122">This size includes the initial data object size.</span></span>

## <a name="related-topics"></a><span data-ttu-id="3716c-123">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="3716c-123">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3716c-124">Impostazione delle proprietà nell'oggetto ContentInfo</span><span class="sxs-lookup"><span data-stu-id="3716c-124">Setting Properties in the ContentInfo Object</span></span>](setting-properties-in-the-contentinfo-object.md)
</dt> <dt>

[<span data-ttu-id="3716c-125">Scrittura di un oggetto intestazione ASF per un nuovo file</span><span class="sxs-lookup"><span data-stu-id="3716c-125">Writing an ASF Header Object for a New File</span></span>](writing-an-asf-header-object-for-a-new-file.md)
</dt> </dl>

 

 



