---
description: Per convertire i file multimediali in formato ASF, è possibile usare i codificatori Windows Media. Informazioni sull'uso degli oggetti di attivazione di un codificatore.
ms.assetid: 18c26619-6047-4f7f-bb65-ca418f02e5b1
title: Uso di oggetti di attivazione dei codificatori
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9c4111d116c8864cc0a500fa3a0c2f612d1d6345
ms.sourcegitcommit: 51ef825fb48f15e1aa30e8795988f10dc2b2155c
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/14/2021
ms.locfileid: "112067980"
---
# <a name="using-an-encoders-activation-objects"></a><span data-ttu-id="3c579-104">Uso degli oggetti di attivazione di un codificatore</span><span class="sxs-lookup"><span data-stu-id="3c579-104">Using an Encoder's Activation Objects</span></span>

<span data-ttu-id="3c579-105">Per convertire i file multimediali in formato ASF, è possibile usare i codificatori Windows Media.</span><span class="sxs-lookup"><span data-stu-id="3c579-105">For converting media files into ASF format, you can use Windows Media encoders.</span></span> <span data-ttu-id="3c579-106">Per usare questi codificatori, è necessario registrarli con il sistema.</span><span class="sxs-lookup"><span data-stu-id="3c579-106">To use these encoders, they must be registered with the system.</span></span>

<span data-ttu-id="3c579-107">Per informazioni sulla registrazione del codificatore, vedere [Creazione di un'istanza di un codificatore MFT.](instantiating-the-encoder-mft.md)</span><span class="sxs-lookup"><span data-stu-id="3c579-107">For information about encoder registration, see [Instantiating an Encoder MFT](instantiating-the-encoder-mft.md).</span></span>

-   [<span data-ttu-id="3c579-108">Uso degli oggetti di attivazione di un codificatore</span><span class="sxs-lookup"><span data-stu-id="3c579-108">Using an Encoder's Activation Objects</span></span>](#using-an-encoders-activation-objects)
-   [<span data-ttu-id="3c579-109">Enumerazione del codificatore in Windows 7 e versioni successive</span><span class="sxs-lookup"><span data-stu-id="3c579-109">Encoder Enumeration in Windows 7 and Later</span></span>](#encoder-enumeration-in-windows-7-and-later)
-   [<span data-ttu-id="3c579-110">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="3c579-110">Related topics</span></span>](#related-topics)

## <a name="using-an-encoders-activation-objects"></a><span data-ttu-id="3c579-111">Uso degli oggetti di attivazione di un codificatore</span><span class="sxs-lookup"><span data-stu-id="3c579-111">Using an Encoder's Activation Objects</span></span>

<span data-ttu-id="3c579-112">In alternativa all'uso [**dell'interfaccia IMFTransform**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) di un codificatore (descritta in Creazione di un codificatore tramite [CoCreateInstance),](using-an-encoder-s-imftransform--interface.md)è possibile creare un'istanza dell'oggetto attivazione per il codificatore.</span><span class="sxs-lookup"><span data-stu-id="3c579-112">As an alternative to using an encoder's [**IMFTransform**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) interface (described in [Creating an Encoder by Using CoCreateInstance](using-an-encoder-s-imftransform--interface.md)), you can create an instance of the activation object for the encoder.</span></span> <span data-ttu-id="3c579-113">Gli oggetti attivazione facilitano la creazione del codificatore Media Foundation fornisce le due funzioni seguenti per questo approccio:</span><span class="sxs-lookup"><span data-stu-id="3c579-113">Activation objects facilitates encoder creation and Media Foundation provides the following two functions for this approach:</span></span>

-   <span data-ttu-id="3c579-114">[**MFCreateWMAEncoderActivate per**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) creare un'istanza del codificatore audio Windows Media.</span><span class="sxs-lookup"><span data-stu-id="3c579-114">[**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) for instantiating the Windows Media audio encoder.</span></span>
-   <span data-ttu-id="3c579-115">[**MFCreateWMVEncoderActivate per**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) creare un'istanza del codificatore video Windows Media.</span><span class="sxs-lookup"><span data-stu-id="3c579-115">[**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) for instantiating the Windows Media video encoder.</span></span>

<span data-ttu-id="3c579-116">Entrambe queste funzioni richiedono la creazione del tipo di supporto di destinazione e l'impostazione delle proprietà di codifica prima di chiamare queste funzioni.</span><span class="sxs-lookup"><span data-stu-id="3c579-116">Both these functions require that you create the target media type and set the encoding properties before calling these functions.</span></span> <span data-ttu-id="3c579-117">Se l'applicazione usa componenti [ASF](pipeline-layer-asf-components.md) del livello pipeline per codificare un file in formato ASF e ha già creato e configurato i sink multimediali di [ASF,](asf-media-sinks.md)è possibile ottenere questo set di informazioni dal sink multimediale di ASF.</span><span class="sxs-lookup"><span data-stu-id="3c579-117">If your application is using [Pipeline Layer ASF Components](pipeline-layer-asf-components.md) to encode a file to ASF format, and have already created and configured the [ASF Media Sinks](asf-media-sinks.md), you can get this set of information from the ASF media sink.</span></span>

<span data-ttu-id="3c579-118">[**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) e [**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) impostano il tipo di output del codificatore sul tipo di supporto specificato dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3c579-118">[**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) and [**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) set the output type of the encoder to the media type specified by the application.</span></span>

<span data-ttu-id="3c579-119">**Nota**  Se si usano [**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) e [**MFCreateWMVEncoderActivate,**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) è possibile attivare il codificatore chiamando [**IMFActivate::ActivateObject,**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) ma non è possibile modificare i tipi di input e supporti di output del codificatore né modificare le proprietà di codifica.</span><span class="sxs-lookup"><span data-stu-id="3c579-119">**Note**  If you are using [**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) and [**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) you can activate the encoder by calling [**IMFActivate::ActivateObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) but you cannot change the input and the output media types of the encoder nor can you change any of the encoding properties.</span></span>

<span data-ttu-id="3c579-120">Per altre informazioni sulla creazione di Media Foundation di attivazione tramite oggetti di attivazione, vedere [Oggetti di attivazione.](activation-objects.md)</span><span class="sxs-lookup"><span data-stu-id="3c579-120">For more information about creating Media Foundation objects by using activation objects, see [Activation Objects](activation-objects.md).</span></span>

<span data-ttu-id="3c579-121">**Per ottenere il tipo di supporto di destinazione dal sink del supporto ASF**</span><span class="sxs-lookup"><span data-stu-id="3c579-121">**To get the target media type from the ASF media sink**</span></span>

1.  <span data-ttu-id="3c579-122">Ottenere un puntatore al puntatore [**IMFASFContentInfo**](/windows/desktop/api/wmcontainer/nn-wmcontainer-imfasfcontentinfo) del sink multimediale asf chiamando **IMFMediaSink::QueryInterface** nel sink multimediale ASF e passando **IID \_ IMFASFContentInfo** come identificatore di interfaccia.</span><span class="sxs-lookup"><span data-stu-id="3c579-122">Get a pointer to the [**IMFASFContentInfo**](/windows/desktop/api/wmcontainer/nn-wmcontainer-imfasfcontentinfo) pointer of the ASF media sink by calling **IMFMediaSink::QueryInterface** on the ASF media sink and passing **IID\_IMFASFContentInfo** as the interface identifier.</span></span>
2.  <span data-ttu-id="3c579-123">Ottiene l'oggetto profilo ASF associato all'oggetto ContentInfo.</span><span class="sxs-lookup"><span data-stu-id="3c579-123">Get the ASF profile object associated with the ContentInfo object.</span></span>
3.  <span data-ttu-id="3c579-124">Enumerare i flussi nel profilo per ottenere il tipo di supporto del flusso.</span><span class="sxs-lookup"><span data-stu-id="3c579-124">Enumerate the streams in the profile to get the stream's media type.</span></span>

<span data-ttu-id="3c579-125">**Per ottenere le proprietà di codifica dal sink multimediale di ASF**</span><span class="sxs-lookup"><span data-stu-id="3c579-125">**To get the encoding properties from the ASF media sink**</span></span>

1.  <span data-ttu-id="3c579-126">Se sono state [](configuring-the-encoder.md) configurate le proprietà di codifica nel sink multimediale (descritto in Impostazione delle proprietà nel [sink file](setting-properties-in-the-file-sink.md)), è possibile fare riferimento all'archivio delle proprietà del sink chiamando **IMFMediaSink::QueryInterface** nel sink multimediale ASF e passando **IID \_ IPropertyStore** come identificatore di interfaccia.</span><span class="sxs-lookup"><span data-stu-id="3c579-126">If you have configured the [Encoding Properties](configuring-the-encoder.md) in the media sink (described in [Setting Properties in the File Sink](setting-properties-in-the-file-sink.md)), you can a reference to the sink's property store by calling **IMFMediaSink::QueryInterface** on the ASF media sink and passing **IID\_IPropertyStore** as the interface identifier.</span></span>
2.  <span data-ttu-id="3c579-127">Se si dispone di un puntatore all'oggetto ContentInfo del sink, è possibile chiamare [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) per ottenere un riferimento all'archivio delle proprietà del sink multimediale.</span><span class="sxs-lookup"><span data-stu-id="3c579-127">If you have a pointer to the sink's ContentInfo object, you can call [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) to get a reference to the media sink's property store.</span></span>

    <span data-ttu-id="3c579-128">Assicurarsi che tutte le proprietà di codifica impostate nel sink multimediale di ASF si riflettano nell'archivio delle proprietà passato a [**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) e [**MFCreateWMVEncoderActivate.**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate)</span><span class="sxs-lookup"><span data-stu-id="3c579-128">Make sure that all of encoding properties that are set on the ASF media sink are reflected in the property store passed to [**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) and [**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate).</span></span> <span data-ttu-id="3c579-129">Il codificatore viene configurato automaticamente in base alle impostazioni specificate dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3c579-129">The encoder is configured automatically based on the settings specified by the application.</span></span>

<span data-ttu-id="3c579-130">Durante la creazione del nodo di trasformazione nella topologia di codifica, è possibile impostare il tipo di oggetto come [**puntatore IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) ricevuto in queste due chiamate.</span><span class="sxs-lookup"><span data-stu-id="3c579-130">While creating the transform node in the encoding topology, you can set the object type as an [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) pointer received in these two calls.</span></span> <span data-ttu-id="3c579-131">Quando la topologia viene risolta, la sessione multimediale usa l'oggetto attivazione per creare un'istanza del codificatore MFT.</span><span class="sxs-lookup"><span data-stu-id="3c579-131">When the topology is resolved, the Media Session uses the activation object to create an instance of the encoder MFT.</span></span>

## <a name="encoder-enumeration-in-windows-7-and-later"></a><span data-ttu-id="3c579-132">Enumerazione del codificatore in Windows 7 e versioni successive</span><span class="sxs-lookup"><span data-stu-id="3c579-132">Encoder Enumeration in Windows 7 and Later</span></span>

<span data-ttu-id="3c579-133">Per le applicazioni in esecuzione in Windows 7, oltre a [**MFTEnum**](/windows/desktop/api/mfapi/nf-mfapi-mftenum) è possibile enumerare i MFT del codificatore chiamando [**MFTEnumEx.**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex)</span><span class="sxs-lookup"><span data-stu-id="3c579-133">For applications that are running on Windows 7, in addition to [**MFTEnum**](/windows/desktop/api/mfapi/nf-mfapi-mftenum) you can enumerate the encoder MFTs by calling [**MFTEnumEx**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex).</span></span> <span data-ttu-id="3c579-134">Questa funzione restituisce un puntatore all'oggetto attivazione del codificatore MFT.</span><span class="sxs-lookup"><span data-stu-id="3c579-134">This function returns a pointer to the activation object of the encoder MFT.</span></span> <span data-ttu-id="3c579-135">La struttura della funzione è molto simile a **MFTEnum** descritta in precedenza, ad eccezione del fatto che **MFTEnumEx** restituisce una matrice di puntatori [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) per i MFT del codificatore che corrispondono ai criteri di ricerca.</span><span class="sxs-lookup"><span data-stu-id="3c579-135">The structure of the function is very similar to **MFTEnum** described above except **MFTEnumEx** returns an array of [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) pointers for the encoder MFTs that match the search criteria.</span></span>

## <a name="related-topics"></a><span data-ttu-id="3c579-136">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="3c579-136">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3c579-137">Creazione di un'istanza di un codificatore MFT</span><span class="sxs-lookup"><span data-stu-id="3c579-137">Instantiating an Encoder MFT</span></span>](instantiating-the-encoder-mft.md)
</dt> <dt>

[<span data-ttu-id="3c579-138">Codificatori Windows Media</span><span class="sxs-lookup"><span data-stu-id="3c579-138">Windows Media Encoders</span></span>](windows-media-encoders.md)
</dt> <dt>

[<span data-ttu-id="3c579-139">Oggetti di attivazione</span><span class="sxs-lookup"><span data-stu-id="3c579-139">Activation Objects</span></span>](activation-objects.md)
</dt> </dl>

 

 



