---
description: I sink di supporto sono gli oggetti pipeline che ricevono dati multimediali.
ms.assetid: a0fbce1b-0a16-4449-9eca-906fd9056a1c
title: Sink di supporti
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e9394cbfd49a631d59b9296202a2b6ca7a868869
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/03/2021
ms.locfileid: "104351246"
---
# <a name="media-sinks"></a><span data-ttu-id="8be55-103">Sink di supporti</span><span class="sxs-lookup"><span data-stu-id="8be55-103">Media Sinks</span></span>

<span data-ttu-id="8be55-104">I *sink di supporto* sono gli oggetti pipeline che ricevono dati multimediali.</span><span class="sxs-lookup"><span data-stu-id="8be55-104">*Media sinks* are the pipeline objects that receive media data.</span></span> <span data-ttu-id="8be55-105">Un sink multimediale è la destinazione di uno o più flussi multimediali.</span><span class="sxs-lookup"><span data-stu-id="8be55-105">A media sink is the destination for one or more media streams.</span></span> <span data-ttu-id="8be55-106">I sink di supporto rientrano in due categorie generali:</span><span class="sxs-lookup"><span data-stu-id="8be55-106">Media sinks fall into two general categories:</span></span>

-   <span data-ttu-id="8be55-107">Un *renderer* è un sink multimediale che presenta i dati per la riproduzione.</span><span class="sxs-lookup"><span data-stu-id="8be55-107">A *renderer* is a media sink that presents data for playback.</span></span> <span data-ttu-id="8be55-108">Il renderer video avanzato (EVR) consente di visualizzare i fotogrammi video e il renderer audio riproduce i flussi audio attraverso la scheda audio o altro dispositivo audio.</span><span class="sxs-lookup"><span data-stu-id="8be55-108">The enhanced video renderer (EVR) displays video frames, and the audio renderer plays audio streams through the sound card or other audio device.</span></span>

-   <span data-ttu-id="8be55-109">Un *sink di archivio* è un sink multimediale che scrive i dati in un file o in un'altra risorsa di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="8be55-109">An *archive sink* is a media sink that writes data to a file or other storage.</span></span>

<span data-ttu-id="8be55-110">La differenza principale tra di essi è che un sink di archivio non utilizza i dati a una frequenza di riproduzione fissa.</span><span class="sxs-lookup"><span data-stu-id="8be55-110">The main difference between them is that an archive sink does not consume the data at a fixed playback rate.</span></span> <span data-ttu-id="8be55-111">Scrive invece i dati ricevuti nel minor tempo possibile.</span><span class="sxs-lookup"><span data-stu-id="8be55-111">Instead, it writes the data that it receives as quickly as possible.</span></span>

<span data-ttu-id="8be55-112">I sink di supporto espongono l'interfaccia [**IMFMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) .</span><span class="sxs-lookup"><span data-stu-id="8be55-112">Media sinks expose the [**IMFMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) interface.</span></span> <span data-ttu-id="8be55-113">Ogni sink multimediale contiene uno o più *sink di flusso*.</span><span class="sxs-lookup"><span data-stu-id="8be55-113">Each media sink contains one or more *stream sinks*.</span></span> <span data-ttu-id="8be55-114">Ogni sink di flusso riceve i dati da un flusso.</span><span class="sxs-lookup"><span data-stu-id="8be55-114">Each stream sink receives the data from one stream.</span></span> <span data-ttu-id="8be55-115">I sink di flusso espongono l'interfaccia [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) .</span><span class="sxs-lookup"><span data-stu-id="8be55-115">Stream sinks expose the [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) interface.</span></span> <span data-ttu-id="8be55-116">In genere, un'applicazione non crea direttamente i sink di supporto.</span><span class="sxs-lookup"><span data-stu-id="8be55-116">Typically an application does not create media sinks directly.</span></span> <span data-ttu-id="8be55-117">Al contrario, l'applicazione crea uno o più oggetti attivazione, che la sessione multimediale USA per creare il sink.</span><span class="sxs-lookup"><span data-stu-id="8be55-117">Instead, the application creates one or more activation objects, which the Media Session uses to create the sink.</span></span> <span data-ttu-id="8be55-118">Tutte le altre operazioni sul sink vengono gestite dalla sessione multimediale e l'applicazione non chiama alcun metodo sul sink multimediale o su uno dei sink di flusso.</span><span class="sxs-lookup"><span data-stu-id="8be55-118">All other operations on the sink are handled by the Media Session, and the application does not call any methods on the media sink or any of the stream sinks.</span></span> <span data-ttu-id="8be55-119">Per ulteriori informazioni sugli oggetti attivazione, vedere [oggetti Activation](activation-objects.md).</span><span class="sxs-lookup"><span data-stu-id="8be55-119">For more information about activation objects, see [Activation Objects](activation-objects.md).</span></span>

<span data-ttu-id="8be55-120">È necessario leggere la parte restante di questo argomento se si sta scrivendo un sink multimediale personalizzato o se si vuole usare direttamente un sink multimediale senza la sessione multimediale.</span><span class="sxs-lookup"><span data-stu-id="8be55-120">You should read the remainder of this topic if you are writing a custom media sink, or if you want to use a media sink directly without the Media Session.</span></span>

-   [<span data-ttu-id="8be55-121">Sink di flusso</span><span class="sxs-lookup"><span data-stu-id="8be55-121">Stream Sinks</span></span>](#stream-sinks)
-   [<span data-ttu-id="8be55-122">Orologio di presentazione</span><span class="sxs-lookup"><span data-stu-id="8be55-122">Presentation Clock</span></span>](#presentation-clock)
-   [<span data-ttu-id="8be55-123">Formati di flusso</span><span class="sxs-lookup"><span data-stu-id="8be55-123">Stream Formats</span></span>](#stream-formats)
-   [<span data-ttu-id="8be55-124">Flusso di dati</span><span class="sxs-lookup"><span data-stu-id="8be55-124">Data Flow</span></span>](#data-flow)
-   [<span data-ttu-id="8be55-125">Indicatori</span><span class="sxs-lookup"><span data-stu-id="8be55-125">Markers</span></span>](#markers)
-   [<span data-ttu-id="8be55-126">Modifiche di stato</span><span class="sxs-lookup"><span data-stu-id="8be55-126">State Changes</span></span>](#state-changes)
-   [<span data-ttu-id="8be55-127">Finalizzazione</span><span class="sxs-lookup"><span data-stu-id="8be55-127">Finalizing</span></span>](#finalizing)
-   [<span data-ttu-id="8be55-128">Chiusura in corso</span><span class="sxs-lookup"><span data-stu-id="8be55-128">Shutting Down</span></span>](#shutting-down)
-   [<span data-ttu-id="8be55-129">Interfacce del sink multimediale</span><span class="sxs-lookup"><span data-stu-id="8be55-129">Media Sink Interfaces</span></span>](#media-sink-interfaces)
-   [<span data-ttu-id="8be55-130">Interfacce di sink di flusso</span><span class="sxs-lookup"><span data-stu-id="8be55-130">Stream Sink Interfaces</span></span>](#stream-sink-interfaces)
-   [<span data-ttu-id="8be55-131">Eventi sink di flusso</span><span class="sxs-lookup"><span data-stu-id="8be55-131">Stream Sink Events</span></span>](#stream-sink-events)
-   [<span data-ttu-id="8be55-132">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="8be55-132">Related topics</span></span>](#related-topics)

## <a name="stream-sinks"></a><span data-ttu-id="8be55-133">Sink di flusso</span><span class="sxs-lookup"><span data-stu-id="8be55-133">Stream Sinks</span></span>

<span data-ttu-id="8be55-134">Un sink multimediale può avere un numero fisso di sink di flusso oppure può supportare l'aggiunta e la rimozione di sink di flusso.</span><span class="sxs-lookup"><span data-stu-id="8be55-134">A media sink can have a fixed number of stream sinks, or it can support adding and removing stream sinks.</span></span> <span data-ttu-id="8be55-135">Se dispone di un numero fisso di sink di flusso, il metodo [**IMFMediaSink:: getcaratteristiche**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) restituisce il \_ flag dei \_ flussi fissi MEDIASINK.</span><span class="sxs-lookup"><span data-stu-id="8be55-135">If it has a fixed number of stream sinks, the [**IMFMediaSink::GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method returns the MEDIASINK\_FIXED\_STREAMS flag.</span></span> <span data-ttu-id="8be55-136">In caso contrario, è possibile aggiungere e rimuovere i sink di flusso.</span><span class="sxs-lookup"><span data-stu-id="8be55-136">Otherwise, you can add and remove stream sinks.</span></span> <span data-ttu-id="8be55-137">Per aggiungere un nuovo sink di flusso, chiamare [**IMFMediaSink:: AddStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-addstreamsink).</span><span class="sxs-lookup"><span data-stu-id="8be55-137">To add a new stream sink, call [**IMFMediaSink::AddStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-addstreamsink).</span></span> <span data-ttu-id="8be55-138">Per rimuovere un sink di flusso, chiamare [**IMFMediaSink:: RemoveStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-removestreamsink).</span><span class="sxs-lookup"><span data-stu-id="8be55-138">To remove a stream sink, call [**IMFMediaSink::RemoveStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-removestreamsink).</span></span> <span data-ttu-id="8be55-139">Il \_ flag dei \_ flussi fissi MEDIASINK indica che il sink multimediale non supporta questi due metodi.</span><span class="sxs-lookup"><span data-stu-id="8be55-139">The MEDIASINK\_FIXED\_STREAMS flag indicates that the media sink does not support these two methods.</span></span> <span data-ttu-id="8be55-140">(Potrebbe supportare un altro modo per configurare il numero di flussi, ad esempio impostando i parametri di inizializzazione quando viene creato il sink). L'elenco dei sink di flusso viene ordinato.</span><span class="sxs-lookup"><span data-stu-id="8be55-140">(It might support some other way to configure the number of streams, for example by setting initialization parameters when the sink is created.) The list of stream sinks is ordered.</span></span> <span data-ttu-id="8be55-141">Per enumerarli in base al valore di indice, chiamare il metodo [**IMFMediaSink:: GetStreamSinkByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyindex) .</span><span class="sxs-lookup"><span data-stu-id="8be55-141">To enumerate them by index value, call the [**IMFMediaSink::GetStreamSinkByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyindex) method.</span></span>

<span data-ttu-id="8be55-142">I sink di flusso hanno anche identificatori.</span><span class="sxs-lookup"><span data-stu-id="8be55-142">Stream sinks also have identifiers.</span></span> <span data-ttu-id="8be55-143">Gli identificatori di flusso sono univoci all'interno del sink multimediale, ma non devono essere consecutivi.</span><span class="sxs-lookup"><span data-stu-id="8be55-143">Stream identifiers are unique within the media sink, but do not have to be consecutive.</span></span> <span data-ttu-id="8be55-144">A seconda del sink multimediale, gli identificatori di flusso possono avere un significato correlato al contenuto.</span><span class="sxs-lookup"><span data-stu-id="8be55-144">Depending on the media sink, the stream identifiers might have some meaning that is related to the content.</span></span> <span data-ttu-id="8be55-145">Ad esempio, un sink di archivio potrebbe scrivere gli identificatori di flusso nell'intestazione del file.</span><span class="sxs-lookup"><span data-stu-id="8be55-145">For example, an archive sink might write the stream identifiers into the file header.</span></span> <span data-ttu-id="8be55-146">In caso contrario, sono arbitrari.</span><span class="sxs-lookup"><span data-stu-id="8be55-146">Otherwise, they are arbitrary.</span></span> <span data-ttu-id="8be55-147">Per ottenere un sink del flusso in base al relativo identificatore, chiamare [**IMFMediaSink:: GetStreamSinkById**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyid).</span><span class="sxs-lookup"><span data-stu-id="8be55-147">To get a stream sink by its identifier, call [**IMFMediaSink::GetStreamSinkById**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyid).</span></span>

## <a name="presentation-clock"></a><span data-ttu-id="8be55-148">Orologio di presentazione</span><span class="sxs-lookup"><span data-stu-id="8be55-148">Presentation Clock</span></span>

<span data-ttu-id="8be55-149">La velocità con cui un sink multimediale utilizza gli esempi è controllata dal [clock di presentazione](presentation-clock.md).</span><span class="sxs-lookup"><span data-stu-id="8be55-149">The rate at which a media sink consumes samples is controlled by the [Presentation Clock](presentation-clock.md).</span></span> <span data-ttu-id="8be55-150">La sessione multimediale seleziona il clock di presentazione e lo imposta sul sink multimediale chiamando il metodo [**IMFMediaSink:: SetPresentationClock**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-setpresentationclock) del sink multimediale.</span><span class="sxs-lookup"><span data-stu-id="8be55-150">The Media Session selects the presentation clock and sets it on the media sink by calling the media sink's [**IMFMediaSink::SetPresentationClock**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-setpresentationclock) method.</span></span> <span data-ttu-id="8be55-151">Per poter iniziare lo streaming, è necessario impostare il clock di presentazione sul sink multimediale.</span><span class="sxs-lookup"><span data-stu-id="8be55-151">The presentation clock must be set on the media sink before streaming can begin.</span></span> <span data-ttu-id="8be55-152">Ogni sink multimediale richiede l'esecuzione di un clock di presentazione.</span><span class="sxs-lookup"><span data-stu-id="8be55-152">Every media sink requires a presentation clock to run.</span></span> <span data-ttu-id="8be55-153">Il sink multimediale usa il clock di presentazione per due scopi:</span><span class="sxs-lookup"><span data-stu-id="8be55-153">The media sink uses the presentation clock for two purposes:</span></span>

-   <span data-ttu-id="8be55-154">Per ricevere notifiche quando lo streaming viene avviato o interrotto.</span><span class="sxs-lookup"><span data-stu-id="8be55-154">To receive notifications when streaming starts or stops.</span></span> <span data-ttu-id="8be55-155">Il sink multimediale riceve queste notifiche tramite l'interfaccia [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) , che deve essere implementata da tutti i sink di supporto.</span><span class="sxs-lookup"><span data-stu-id="8be55-155">The media sink receives these notifications through the [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) interface, which all media sinks must implement.</span></span>

-   <span data-ttu-id="8be55-156">Per determinare quando eseguire il rendering degli esempi.</span><span class="sxs-lookup"><span data-stu-id="8be55-156">To determine when it should render samples.</span></span> <span data-ttu-id="8be55-157">Quando il sink multimediale riceve un nuovo esempio, ottiene il timestamp dall'esempio e tenta di eseguire il rendering dell'esempio in corrispondenza di tale ora di presentazione.</span><span class="sxs-lookup"><span data-stu-id="8be55-157">When the media sink receives a new sample, it gets the time stamp from the sample and tries to render the sample at that presentation time.</span></span>

<span data-ttu-id="8be55-158">Il clock di presentazione deriva i tempi di clock da un altro oggetto chiamato *origine dell'ora di presentazione*.</span><span class="sxs-lookup"><span data-stu-id="8be55-158">The presentation clock derives its clock times from another object called the *presentation time source*.</span></span> <span data-ttu-id="8be55-159">Le origini dell'ora di presentazione espongono l'interfaccia [**IMFPresentationTimeSource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) .</span><span class="sxs-lookup"><span data-stu-id="8be55-159">Presentation time sources expose the [**IMFPresentationTimeSource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) interface.</span></span> <span data-ttu-id="8be55-160">Alcuni sink di supporto hanno accesso a un clock accurato, quindi espongono questa interfaccia.</span><span class="sxs-lookup"><span data-stu-id="8be55-160">Some media sinks have access to an accurate clock, so they expose this interface.</span></span> <span data-ttu-id="8be55-161">Ciò significa che un sink multimediale può pianificare campioni rispetto a un'ora fornita dal proprio clock.</span><span class="sxs-lookup"><span data-stu-id="8be55-161">This means that a media sink might schedule samples against a time provided by its own clock.</span></span> <span data-ttu-id="8be55-162">Tuttavia, il sink multimediale non può presupporre che questo sia il caso.</span><span class="sxs-lookup"><span data-stu-id="8be55-162">However, the media sink cannot assume this to be the case.</span></span> <span data-ttu-id="8be55-163">Deve sempre usare l'ora dal clock di presentazione, indipendentemente dal fatto che il clock di presentazione sia determinato dal sink multimediale stesso o da un altro Clock.</span><span class="sxs-lookup"><span data-stu-id="8be55-163">It must always use the time from the presentation clock, regardless of whether the presentation clock is driven by the media sink itself, or by some other clock.</span></span>

<span data-ttu-id="8be55-164">Se un sink multimediale non è in grado di trovare corrispondenze con un clock diverso da se stesso, [**il metodo**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) GetProperties restituisce MEDIASINK \_ non può \_ corrispondere al \_ flag Clock.</span><span class="sxs-lookup"><span data-stu-id="8be55-164">If a media sink cannot match rates with a clock other than its own, the [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method returns the MEDIASINK\_CANNOT\_MATCH\_CLOCK flag.</span></span> <span data-ttu-id="8be55-165">Se questo flag è presente e il clock di presentazione usa un'origine dell'ora di presentazione diversa, è probabile che il sink multimediale non venga eseguito correttamente.</span><span class="sxs-lookup"><span data-stu-id="8be55-165">If this flag is present and the presentation clock uses a different presentation time source, the media sink is likely to perform poorly.</span></span> <span data-ttu-id="8be55-166">È possibile, ad esempio, che si sia verificato un problema durante la riproduzione.</span><span class="sxs-lookup"><span data-stu-id="8be55-166">For example, it might glitch during playback.</span></span>

<span data-ttu-id="8be55-167">Un sink *senza frequenza* è un sink multimediale che ignora i timestamp degli esempi e utilizza i dati non appena arrivano ogni campione.</span><span class="sxs-lookup"><span data-stu-id="8be55-167">A *rateless* sink is a media sink that ignores the time stamps on samples and consumes data as soon as each sample arrives.</span></span> <span data-ttu-id="8be55-168">Un sink di supporto senza frequenza restituisce il \_ flag MEDIASINK senza frequenza dal metodo [**getcaratteristiche**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) .</span><span class="sxs-lookup"><span data-stu-id="8be55-168">A rateless media sink returns the MEDIASINK\_RATELESS flag from the [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method.</span></span> <span data-ttu-id="8be55-169">In genere questo flag si applica ai sink di archivio.</span><span class="sxs-lookup"><span data-stu-id="8be55-169">Typically this flag applies to archive sinks.</span></span> <span data-ttu-id="8be55-170">Se ogni sink multimediale nella pipeline è senza frequenza, la sessione multimediale usa un clock speciale di presentazione senza frequenza.</span><span class="sxs-lookup"><span data-stu-id="8be55-170">If every media sink in the pipeline is rateless, the Media Session uses a special rateless presentation clock.</span></span> <span data-ttu-id="8be55-171">Questo clock viene eseguito con la stessa velocità con cui i sink utilizzano esempi.</span><span class="sxs-lookup"><span data-stu-id="8be55-171">This clock runs as quickly as the sinks consume samples.</span></span>

## <a name="stream-formats"></a><span data-ttu-id="8be55-172">Formati di flusso</span><span class="sxs-lookup"><span data-stu-id="8be55-172">Stream Formats</span></span>

<span data-ttu-id="8be55-173">Prima che il sink multimediale possa ricevere esempi, il client deve impostare il tipo di supporto nei sink di flusso.</span><span class="sxs-lookup"><span data-stu-id="8be55-173">Before the media sink can receive samples, the client must set the media type on the stream sinks.</span></span> <span data-ttu-id="8be55-174">Per impostare il tipo di supporto, chiamare il metodo [**IMFStreamSink:: GetMediaTypeHandler**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-getmediatypehandler) del sink di flusso.</span><span class="sxs-lookup"><span data-stu-id="8be55-174">To set the media type, call the stream sink's [**IMFStreamSink::GetMediaTypeHandler**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-getmediatypehandler) method.</span></span> <span data-ttu-id="8be55-175">Questo metodo restituisce un puntatore all'interfaccia [**IMFMediaTypeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) .</span><span class="sxs-lookup"><span data-stu-id="8be55-175">This method returns a pointer to the [**IMFMediaTypeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) interface.</span></span> <span data-ttu-id="8be55-176">Usare questa interfaccia per ottenere l'elenco dei tipi di supporto preferiti, ottenere il tipo di supporto corrente e impostare il tipo di supporto.</span><span class="sxs-lookup"><span data-stu-id="8be55-176">Use this interface to get the list of preferred media types, get the current media type, and set the media type.</span></span>

<span data-ttu-id="8be55-177">Per ottenere l'elenco dei tipi di supporto preferiti, chiamare [**IMFMediaTypeHandler:: GetMediaTypeByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getmediatypebyindex).</span><span class="sxs-lookup"><span data-stu-id="8be55-177">To get the list of preferred media types, call [**IMFMediaTypeHandler::GetMediaTypeByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getmediatypebyindex).</span></span> <span data-ttu-id="8be55-178">I tipi preferiti devono essere presi come hint per il client.</span><span class="sxs-lookup"><span data-stu-id="8be55-178">The preferred types should be taken as a hint to the client.</span></span> <span data-ttu-id="8be55-179">L'elenco potrebbe essere incompleto o includere tipi di supporti parziali.</span><span class="sxs-lookup"><span data-stu-id="8be55-179">The list might be incomplete or include partial media types.</span></span> <span data-ttu-id="8be55-180">Un tipo di supporto parziale è uno che non include tutti gli attributi necessari per descrivere un formato valido.</span><span class="sxs-lookup"><span data-stu-id="8be55-180">A partial media type is one that does not have all of the attributes needed to describe a valid format.</span></span> <span data-ttu-id="8be55-181">Ad esempio, un tipo di video parziale potrebbe specificare lo spazio di colore e la profondità del bit, ma non la larghezza o l'altezza dell'immagine.</span><span class="sxs-lookup"><span data-stu-id="8be55-181">For example, a partial video type might specify the color space and bit depth but not the image width or height.</span></span> <span data-ttu-id="8be55-182">Un tipo audio parziale può specificare il formato di compressione e la frequenza di campionamento, ma non il numero di canali audio.</span><span class="sxs-lookup"><span data-stu-id="8be55-182">A partial audio type might specify the compression format and the sample rate but not the number of audio channels.</span></span>

<span data-ttu-id="8be55-183">Per ottenere il tipo di supporto corrente del sink di flusso, chiamare [**IMFMediaTypeHandler:: GetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getcurrentmediatype).</span><span class="sxs-lookup"><span data-stu-id="8be55-183">To get the stream sink's current media type, call [**IMFMediaTypeHandler::GetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getcurrentmediatype).</span></span> <span data-ttu-id="8be55-184">Quando viene creato per la prima volta un sink del flusso, è possibile che sia già impostato un tipo di supporto predefinito oppure che non siano presenti tipi di supporti fino a quando il client non ne imposta uno.</span><span class="sxs-lookup"><span data-stu-id="8be55-184">When a stream sink is first created, it might have a default media type already set, or it might have no media type until the client sets one.</span></span>

<span data-ttu-id="8be55-185">Per impostare il tipo di supporto, chiamare [**IMFMediaTypeHandler:: SetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-setcurrentmediatype).</span><span class="sxs-lookup"><span data-stu-id="8be55-185">To set the media type, call [**IMFMediaTypeHandler::SetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-setcurrentmediatype).</span></span> <span data-ttu-id="8be55-186">Alcuni sink di flusso potrebbero non supportare la modifica del tipo dopo che è stato impostato.</span><span class="sxs-lookup"><span data-stu-id="8be55-186">Some stream sinks might not support changing the type after is has been set.</span></span> <span data-ttu-id="8be55-187">Pertanto, è utile testare i tipi di supporto prima di impostarli.</span><span class="sxs-lookup"><span data-stu-id="8be55-187">Therefore, it useful to test media types before setting them.</span></span> <span data-ttu-id="8be55-188">Per verificare se il sink multimediale accetterà un tipo di supporto, ovvero senza impostare il tipo, chiamare [**IMFMediaTypeHandler:: IsMediaTypeSupported**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-ismediatypesupported).</span><span class="sxs-lookup"><span data-stu-id="8be55-188">To test whether the media sink will accept a media type, (without setting the type), call [**IMFMediaTypeHandler::IsMediaTypeSupported**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-ismediatypesupported).</span></span>

## <a name="data-flow"></a><span data-ttu-id="8be55-189">Flusso di dati</span><span class="sxs-lookup"><span data-stu-id="8be55-189">Data Flow</span></span>

<span data-ttu-id="8be55-190">I sink di supporto usano un *modello pull*, il che significa che il flusso sink richiede i dati necessari.</span><span class="sxs-lookup"><span data-stu-id="8be55-190">Media sinks use a *pull model*, which means that the stream sinks request data as they need it.</span></span> <span data-ttu-id="8be55-191">Il client deve rispondere in modo tempestivo per evitare eventuali problemi.</span><span class="sxs-lookup"><span data-stu-id="8be55-191">The client should respond in a timely manner to avoid any glitching.</span></span>

<span data-ttu-id="8be55-192">Alcuni sink multimediali supportano la *preregistrazione*.</span><span class="sxs-lookup"><span data-stu-id="8be55-192">Some media sinks support *prerolling*.</span></span> <span data-ttu-id="8be55-193">La preregistrazione è il processo di assegnazione dei dati al sink multimediale prima dell'avvio del clock di presentazione.</span><span class="sxs-lookup"><span data-stu-id="8be55-193">Prerolling is the process of giving data to the media sink before the presentation clock starts.</span></span> <span data-ttu-id="8be55-194">Se un sink multimediale supporta la preregistrazione, il sink del supporto espone l'interfaccia [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll) e il metodo [**getcaratteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) restituisce il \_ flag di \_ preroll MEDIASINK può.</span><span class="sxs-lookup"><span data-stu-id="8be55-194">If a media sink supports prerolling, the media sink exposes the [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll) interface, and the [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method returns the MEDIASINK\_CAN\_PREROLL flag.</span></span> <span data-ttu-id="8be55-195">La preregistrazione garantisce che il sink multimediale sia pronto a presentare il primo campione all'avvio del clock di presentazione.</span><span class="sxs-lookup"><span data-stu-id="8be55-195">Prerolling ensures that the media sink is ready to present the first sample when the presentation clock starts.</span></span> <span data-ttu-id="8be55-196">Si consiglia di preregistrare sempre il client se il sink multimediale lo supporta, perché può impedire problemi o interruzioni durante la riproduzione.</span><span class="sxs-lookup"><span data-stu-id="8be55-196">It is recommended that the client always preroll if the media sink supports it, because it can prevent glitching or gaps during playback.</span></span>

<span data-ttu-id="8be55-197">Il flusso di dati in un sink multimediale funziona nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="8be55-197">Data flow to a media sink works as follows:</span></span>

1.  <span data-ttu-id="8be55-198">Il client imposta i tipi di supporto e il clock di presentazione.</span><span class="sxs-lookup"><span data-stu-id="8be55-198">The client sets the media types and the presentation clock.</span></span> <span data-ttu-id="8be55-199">Il sink multimediale si registra con il clock di presentazione per ricevere notifiche sulle modifiche dello stato dell'orologio.</span><span class="sxs-lookup"><span data-stu-id="8be55-199">The media sink registers itself with the presentation clock to receive notifications about clock state changes.</span></span>
2.  <span data-ttu-id="8be55-200">Facoltativamente, il client esegue una query per [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll).</span><span class="sxs-lookup"><span data-stu-id="8be55-200">Optionally, the client queries for [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll).</span></span> <span data-ttu-id="8be55-201">Se il sink multimediale espone questa interfaccia, il client chiama [**IMFMediaSinkPreroll:: NotifyPreroll**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasinkpreroll-notifypreroll).</span><span class="sxs-lookup"><span data-stu-id="8be55-201">If the media sink exposes this interface, the client calls [**IMFMediaSinkPreroll::NotifyPreroll**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasinkpreroll-notifypreroll).</span></span> <span data-ttu-id="8be55-202">In caso contrario, il client passerà al passaggio 5.</span><span class="sxs-lookup"><span data-stu-id="8be55-202">Otherwise, the client skips to step 5.</span></span>
3.  <span data-ttu-id="8be55-203">Ogni sink di flusso invia uno o più eventi [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) .</span><span class="sxs-lookup"><span data-stu-id="8be55-203">Each stream sink sends one or more [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) events.</span></span> <span data-ttu-id="8be55-204">In risposta a ognuno di questi eventi, il client ottiene il campione di dati successivo per tale flusso e chiama [**IMFStreamSink::P rocesssample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span><span class="sxs-lookup"><span data-stu-id="8be55-204">In response to each of these events, the client gets the next sample of data for that stream and calls [**IMFStreamSink::ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span></span>
4.  <span data-ttu-id="8be55-205">Quando ogni sink di flusso riceve un numero sufficiente di dati di preroll, invia un evento [MEStreamSinkPrerolled](mestreamsinkprerolled.md) .</span><span class="sxs-lookup"><span data-stu-id="8be55-205">When each stream sink receives enough preroll data, it sends an [MEStreamSinkPrerolled](mestreamsinkprerolled.md) event.</span></span>
5.  <span data-ttu-id="8be55-206">Il client chiama [**IMFPresentationClock:: Start**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-start) per avviare il clock di presentazione.</span><span class="sxs-lookup"><span data-stu-id="8be55-206">The client calls [**IMFPresentationClock::Start**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-start) to start the presentation clock.</span></span>
6.  <span data-ttu-id="8be55-207">Il clock di presentazione notifica al sink multimediale che l'orologio viene avviato, chiamando [**IMFClockStateSink:: OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span><span class="sxs-lookup"><span data-stu-id="8be55-207">The presentation clock notifies the media sink that the clock is starting, by calling [**IMFClockStateSink::OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span></span>
7.  <span data-ttu-id="8be55-208">Per ottenere più dati, ogni sink di flusso invia eventi [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) .</span><span class="sxs-lookup"><span data-stu-id="8be55-208">To get more data, each stream sink sends [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) events.</span></span> <span data-ttu-id="8be55-209">In risposta a ognuno di questi eventi, il client ottiene l'esempio successivo e chiama [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span><span class="sxs-lookup"><span data-stu-id="8be55-209">In response to each of these events, the client gets the next sample and calls [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span></span> <span data-ttu-id="8be55-210">Questo passaggio viene ripetuto fino alla fine della presentazione.</span><span class="sxs-lookup"><span data-stu-id="8be55-210">This step is repeated until the presentation ends.</span></span>

<span data-ttu-id="8be55-211">La maggior parte dei sink di supporto elabora gli esempi in modo asincrono, quindi i sink di flusso possono inviare più di una richiesta di esempio alla volta.</span><span class="sxs-lookup"><span data-stu-id="8be55-211">Most media sinks process samples asynchronously, so the stream sinks can send out more than one sample request at a time.</span></span>

<span data-ttu-id="8be55-212">Durante lo streaming, il client può chiamare [**IMFStreamSink::P lacemarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) e [**IMFStreamSink:: Flush**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-flush) in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="8be55-212">During streaming, the client can call [**IMFStreamSink::PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) and [**IMFStreamSink::Flush**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-flush) at any time.</span></span> <span data-ttu-id="8be55-213">I marcatori sono descritti nella sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="8be55-213">Markers are described in the next section.</span></span> <span data-ttu-id="8be55-214">Lo svuotamento causa il sink del flusso per eliminare tutti gli esempi in coda ma non ancora sottoposti a rendering.</span><span class="sxs-lookup"><span data-stu-id="8be55-214">Flushing causes the stream sink to drop any samples that it has queued but not rendered yet.</span></span>

## <a name="markers"></a><span data-ttu-id="8be55-215">Indicatori</span><span class="sxs-lookup"><span data-stu-id="8be55-215">Markers</span></span>

<span data-ttu-id="8be55-216">I marcatori consentono al client di indicare punti specifici nel flusso.</span><span class="sxs-lookup"><span data-stu-id="8be55-216">Markers provide a way for the client to indicate specific points in the stream.</span></span> <span data-ttu-id="8be55-217">Un marcatore è costituito dalle seguenti informazioni:</span><span class="sxs-lookup"><span data-stu-id="8be55-217">A marker consists of the following information:</span></span>

-   <span data-ttu-id="8be55-218">Tipo di marcatore, definito come membro dell'enumerazione [**del \_ \_ tipo di marcatore MFSTREAMSINK**](/windows/desktop/api/mfidl/ne-mfidl-mfstreamsink_marker_type) .</span><span class="sxs-lookup"><span data-stu-id="8be55-218">The marker type, defined as a member of the [**MFSTREAMSINK\_MARKER\_TYPE**](/windows/desktop/api/mfidl/ne-mfidl-mfstreamsink_marker_type) enumeration.</span></span>
-   <span data-ttu-id="8be55-219">Dati associati al marcatore.</span><span class="sxs-lookup"><span data-stu-id="8be55-219">Data associated with the marker.</span></span> <span data-ttu-id="8be55-220">Il significato dei dati dipende dal tipo di marcatore.</span><span class="sxs-lookup"><span data-stu-id="8be55-220">The meaning of the data depends on the marker type.</span></span> <span data-ttu-id="8be55-221">Alcuni tipi di marcatore non contengono dati.</span><span class="sxs-lookup"><span data-stu-id="8be55-221">Some marker types do not have data.</span></span>
-   <span data-ttu-id="8be55-222">Dati facoltativi per l'uso da parte del client.</span><span class="sxs-lookup"><span data-stu-id="8be55-222">Optional data for the client's own use.</span></span>

<span data-ttu-id="8be55-223">Per inserire un marcatore, il client chiama [**IMFStreamSink::P lacemarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker).</span><span class="sxs-lookup"><span data-stu-id="8be55-223">To place a marker, the client calls [**IMFStreamSink::PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker).</span></span> <span data-ttu-id="8be55-224">Il sink di flusso completa l'elaborazione di tutti gli esempi ricevuti prima della chiamata del **segnaposto** e quindi Invia un evento [MEStreamSinkMarker](mestreamsinkmarker.md) .</span><span class="sxs-lookup"><span data-stu-id="8be55-224">The stream sink finishes processing any samples that it received before the **PlaceMarker** call, and then sends an [MEStreamSinkMarker](mestreamsinkmarker.md) event.</span></span>

<span data-ttu-id="8be55-225">La maggior parte dei sink multimediali mantiene una coda di esempi in sospeso, elaborati in modo asincrono.</span><span class="sxs-lookup"><span data-stu-id="8be55-225">Most media sinks keep a queue of pending samples, which they process asynchronously.</span></span> <span data-ttu-id="8be55-226">Gli eventi del marcatore devono essere serializzati con l'elaborazione di esempio, in modo che il sink multimediale debba inserire i marcatori nella stessa coda.</span><span class="sxs-lookup"><span data-stu-id="8be55-226">Marker events must be serialized with sample processing, so the media sink should place the markers in the same queue.</span></span> <span data-ttu-id="8be55-227">Si supponga, ad esempio, che il client effettua le chiamate al metodo seguenti:</span><span class="sxs-lookup"><span data-stu-id="8be55-227">For example, suppose the client makes the following method calls:</span></span>

1.  <span data-ttu-id="8be55-228">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (esempio \# 1)</span><span class="sxs-lookup"><span data-stu-id="8be55-228">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (Sample \#1)</span></span>
2.  <span data-ttu-id="8be55-229">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (esempio \# 2)</span><span class="sxs-lookup"><span data-stu-id="8be55-229">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (Sample \#2)</span></span>
3.  <span data-ttu-id="8be55-230">[**Segnaposto**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (marcatore \# 1)</span><span class="sxs-lookup"><span data-stu-id="8be55-230">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (Marker \#1)</span></span>
4.  <span data-ttu-id="8be55-231">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (esempio \# 3)</span><span class="sxs-lookup"><span data-stu-id="8be55-231">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (Sample \#3)</span></span>
5.  <span data-ttu-id="8be55-232">[**Segnaposto**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (marcatore \# 2)</span><span class="sxs-lookup"><span data-stu-id="8be55-232">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (Marker \#2)</span></span>

<span data-ttu-id="8be55-233">In questo esempio, il sink di flusso deve inviare l'evento [MEStreamSinkMarker](mestreamsinkmarker.md) per il marcatore \# 1 dopo l'elaborazione del campione \# 2 e l'evento per il marcatore \# 2 dopo l'elaborazione del campione \# 3.</span><span class="sxs-lookup"><span data-stu-id="8be55-233">In this example, the stream sink must send the [MEStreamSinkMarker](mestreamsinkmarker.md) event for marker \#1 after it processes sample \#2, and the event for marker \#2 after it processes sample \#3.</span></span>

<span data-ttu-id="8be55-234">Se il client Scarica un sink di flusso, il sink di flusso elabora immediatamente tutti i marcatori presenti nella coda.</span><span class="sxs-lookup"><span data-stu-id="8be55-234">If the client flushes a stream sink, the stream sink immediately processes any markers that were in the queue.</span></span> <span data-ttu-id="8be55-235">Imposta il codice di stato su E \_ Interrompi per questi eventi.</span><span class="sxs-lookup"><span data-stu-id="8be55-235">It sets the status code to E\_ABORT on these events.</span></span>

<span data-ttu-id="8be55-236">Alcuni marcatori contengono informazioni rilevanti per il sink multimediale:</span><span class="sxs-lookup"><span data-stu-id="8be55-236">Some markers contain information that is relevant to the media sink:</span></span>

-   <span data-ttu-id="8be55-237">**MFSTREAMSINK \_ INDICATORE \_** di selezione: indica la presenza di un gap nel flusso.</span><span class="sxs-lookup"><span data-stu-id="8be55-237">**MFSTREAMSINK\_MARKER\_TICK**: Indicates there is a gap in the stream.</span></span> <span data-ttu-id="8be55-238">L'esempio successivo sarà una discontinuità.</span><span class="sxs-lookup"><span data-stu-id="8be55-238">The next sample will be a discontinuity.</span></span>
-   <span data-ttu-id="8be55-239">**MFSTREAMSINK \_ MARKER \_ ENDOFSEGMENT**: indica la fine di un segmento o la fine di un flusso.</span><span class="sxs-lookup"><span data-stu-id="8be55-239">**MFSTREAMSINK\_MARKER\_ENDOFSEGMENT**: Indicates the end of a segment or the end of a stream.</span></span> <span data-ttu-id="8be55-240">L'esempio successivo (se presente) potrebbe essere una discontinuità.</span><span class="sxs-lookup"><span data-stu-id="8be55-240">The next sample (if any) might be a discontinuity.</span></span>
-   <span data-ttu-id="8be55-241">**MFSTREAMSINK \_ \_Evento marcatore**: contiene un evento.</span><span class="sxs-lookup"><span data-stu-id="8be55-241">**MFSTREAMSINK\_MARKER\_EVENT**: Contains an event.</span></span> <span data-ttu-id="8be55-242">A seconda del tipo di evento e dell'implementazione del sink multimediale, il sink multimediale può gestire l'evento o ignorarlo.</span><span class="sxs-lookup"><span data-stu-id="8be55-242">Depending on the event type and the implementation of the media sink, the media sink might handle the event or ignore it.</span></span>

## <a name="state-changes"></a><span data-ttu-id="8be55-243">Modifiche di stato</span><span class="sxs-lookup"><span data-stu-id="8be55-243">State Changes</span></span>

<span data-ttu-id="8be55-244">Un sink multimediale riceve una notifica delle modifiche di stato nel clock di presentazione tramite l'interfaccia [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) del sink multimediale.</span><span class="sxs-lookup"><span data-stu-id="8be55-244">A media sink is notified of state changes in the presentation clock through the media sink's [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) interface.</span></span> <span data-ttu-id="8be55-245">Quando il client imposta il clock di presentazione, il sink multimediale chiama [**IMFPresentationClock:: AddClockStateSink**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-addclockstatesink) per registrarsi per le notifiche dall'orologio.</span><span class="sxs-lookup"><span data-stu-id="8be55-245">When the client sets the presentation clock, the media sink calls [**IMFPresentationClock::AddClockStateSink**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-addclockstatesink) to register itself for notifications from the clock.</span></span> <span data-ttu-id="8be55-246">Nella tabella seguente viene riepilogato il comportamento di un sink multimediale in risposta alle modifiche dello stato del clock.</span><span class="sxs-lookup"><span data-stu-id="8be55-246">The following table summarizes how a media sink behaves in response to clock state changes.</span></span>



| <span data-ttu-id="8be55-247">Modifica stato orologio</span><span class="sxs-lookup"><span data-stu-id="8be55-247">Clock state change</span></span>                                         | <span data-ttu-id="8be55-248">Elaborazione di esempio</span><span class="sxs-lookup"><span data-stu-id="8be55-248">Sample processing</span></span>                                                                                                                                                                                                                                             | <span data-ttu-id="8be55-249">Elaborazione indicatore</span><span class="sxs-lookup"><span data-stu-id="8be55-249">Marker processing</span></span>                                                                                                                                                                                   |
|------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="8be55-250">**OnClockStart**</span><span class="sxs-lookup"><span data-stu-id="8be55-250">**OnClockStart**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart)     | <span data-ttu-id="8be55-251">Elabora esempi il cui timestamp è uguale o successivo all'ora di inizio dell'orologio.</span><span class="sxs-lookup"><span data-stu-id="8be55-251">Process samples whose time stamp is equal to or later than the clock start time.</span></span>                                                                                                                                                                              | <span data-ttu-id="8be55-252">Invia l'evento [MEStreamSinkMarker](mestreamsinkmarker.md) quando tutti gli esempi ricevuti prima del marcatore sono stati elaborati.</span><span class="sxs-lookup"><span data-stu-id="8be55-252">Send the [MEStreamSinkMarker](mestreamsinkmarker.md) event when all of the samples received before the marker have been processed.</span></span>                                                                 |
| [<span data-ttu-id="8be55-253">**OnClockPause**</span><span class="sxs-lookup"><span data-stu-id="8be55-253">**OnClockPause**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockpause)     | <span data-ttu-id="8be55-254">Il sink multimediale può non riuscire [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) mentre è sospeso.</span><span class="sxs-lookup"><span data-stu-id="8be55-254">The media sink can fail [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) while paused.</span></span><br/> <span data-ttu-id="8be55-255">Se il sink multimediale accetta esempi durante la pausa, deve accodarli fino al riavvio del clock.</span><span class="sxs-lookup"><span data-stu-id="8be55-255">If the media sink accepts samples while paused, it must queue them until the clock restarts.</span></span> <span data-ttu-id="8be55-256">Non elaborare alcun campione in coda mentre è in pausa.</span><span class="sxs-lookup"><span data-stu-id="8be55-256">Do not process any queued samples while paused.</span></span><br/> | <span data-ttu-id="8be55-257">Se sono presenti esempi in coda, inserire i marcatori nella stessa coda.</span><span class="sxs-lookup"><span data-stu-id="8be55-257">If there are queued samples, put markers onto the same queue.</span></span> <span data-ttu-id="8be55-258">Invia l'evento marcatore quando il clock viene riavviato.</span><span class="sxs-lookup"><span data-stu-id="8be55-258">Send the marker event when the clock restarts.</span></span><br/> <span data-ttu-id="8be55-259">In caso contrario, inviare immediatamente l'evento marcatore.</span><span class="sxs-lookup"><span data-stu-id="8be55-259">Otherwise, send the marker event immediately.</span></span><br/>                    |
| [<span data-ttu-id="8be55-260">**OnClockRestart**</span><span class="sxs-lookup"><span data-stu-id="8be55-260">**OnClockRestart**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockrestart) | <span data-ttu-id="8be55-261">Elaborare tutti gli esempi in coda durante la pausa, quindi considerare lo stesso [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span><span class="sxs-lookup"><span data-stu-id="8be55-261">Process any samples that were queued while paused, and then treat the same as [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span></span>                                                                                                                         | <span data-ttu-id="8be55-262">Inviare gli eventi [MEStreamSinkMarker](mestreamsinkmarker.md) per i marcatori in coda (serializzati con elaborazione di esempio), quindi considerare lo stesso [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span><span class="sxs-lookup"><span data-stu-id="8be55-262">Send [MEStreamSinkMarker](mestreamsinkmarker.md) events for queued markers (serialized with sample processing), and then treat the same as [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span></span> |
| [<span data-ttu-id="8be55-263">**OnClockStop**</span><span class="sxs-lookup"><span data-stu-id="8be55-263">**OnClockStop**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstop)       | <span data-ttu-id="8be55-264">Elimina tutti gli esempi in coda.</span><span class="sxs-lookup"><span data-stu-id="8be55-264">Drop all queued samples.</span></span> <span data-ttu-id="8be55-265">Altre chiamate a [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) possono avere esito negativo.</span><span class="sxs-lookup"><span data-stu-id="8be55-265">Further calls to [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) can fail.</span></span>                                                                                                                                                      | <span data-ttu-id="8be55-266">Invia gli eventi del marcatore in coda.</span><span class="sxs-lookup"><span data-stu-id="8be55-266">Send queued marker events.</span></span> <span data-ttu-id="8be55-267">Nelle chiamate successive a [**segnaposto**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker), inviare immediatamente l'evento marcatore.</span><span class="sxs-lookup"><span data-stu-id="8be55-267">On subsequent calls to [**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker), send the marker event immediately.</span></span>                                                              |



 

<span data-ttu-id="8be55-268">Inoltre, i sink di flusso devono inviare gli eventi seguenti quando hanno completato le transizioni di stato:</span><span class="sxs-lookup"><span data-stu-id="8be55-268">In addition, stream sinks must send the following events when they have completed the state transitions:</span></span>

-   <span data-ttu-id="8be55-269">[**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart), [**OnClockRestart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockrestart): evento [MEStreamSinkStarted](mestreamsinkstarted.md)</span><span class="sxs-lookup"><span data-stu-id="8be55-269">[**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart), [**OnClockRestart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockrestart): [MEStreamSinkStarted](mestreamsinkstarted.md) event</span></span>
-   <span data-ttu-id="8be55-270">[**OnClockPause**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockpause): evento [MEStreamSinkPaused](mestreamsinkpaused.md)</span><span class="sxs-lookup"><span data-stu-id="8be55-270">[**OnClockPause**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockpause): [MEStreamSinkPaused](mestreamsinkpaused.md) event</span></span>
-   <span data-ttu-id="8be55-271">[**OnClockStop**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstop): evento [MEStreamSinkStopped](mestreamsinkstopped.md)</span><span class="sxs-lookup"><span data-stu-id="8be55-271">[**OnClockStop**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstop): [MEStreamSinkStopped](mestreamsinkstopped.md) event</span></span>

## <a name="finalizing"></a><span data-ttu-id="8be55-272">Finalizzazione</span><span class="sxs-lookup"><span data-stu-id="8be55-272">Finalizing</span></span>

<span data-ttu-id="8be55-273">Alcuni sink di supporto richiedono un passaggio di elaborazione aggiuntivo dopo che l'ultimo campione è stato recapitato.</span><span class="sxs-lookup"><span data-stu-id="8be55-273">Some media sinks require an extra processing step after the last sample is delivered.</span></span> <span data-ttu-id="8be55-274">In genere questo requisito si applica ai sink di archivio, che devono scrivere intestazioni o indici nel file.</span><span class="sxs-lookup"><span data-stu-id="8be55-274">Typically this requirement applies to archive sinks, which must write headers or indexes into the file.</span></span> <span data-ttu-id="8be55-275">Se un sink multimediale richiede un'elaborazione finale, espone l'interfaccia [**IMFFinalizableMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink) .</span><span class="sxs-lookup"><span data-stu-id="8be55-275">If a media sink requires any final processing, it exposes the [**IMFFinalizableMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink) interface.</span></span>

<span data-ttu-id="8be55-276">Quando il client recapita l'ultimo esempio, il client esegue una query per questa interfaccia.</span><span class="sxs-lookup"><span data-stu-id="8be55-276">After the client delivers the last sample, the client queries for this interface.</span></span> <span data-ttu-id="8be55-277">Se il sink multimediale supporta l'interfaccia, il client chiama [**IMFFinalizableMediaSink:: BeginFinalize**](/windows/desktop/api/mfidl/nf-mfidl-imffinalizablemediasink-beginfinalize) per eseguire l'elaborazione finale in modo asincrono.</span><span class="sxs-lookup"><span data-stu-id="8be55-277">If the media sink supports the interface, the client calls [**IMFFinalizableMediaSink::BeginFinalize**](/windows/desktop/api/mfidl/nf-mfidl-imffinalizablemediasink-beginfinalize) to perform the final processing asynchronously.</span></span> <span data-ttu-id="8be55-278">Questo metodo segue il modello di Media Foundation asincrono standard, descritto in [metodi di callback asincroni](asynchronous-callback-methods.md).</span><span class="sxs-lookup"><span data-stu-id="8be55-278">This method follows the standard Media Foundation asynchronous model, described in [Asynchronous Callback Methods](asynchronous-callback-methods.md).</span></span> <span data-ttu-id="8be55-279">Il sink multimediale può presupporre che il client chiamerà **BeginFinalize**.</span><span class="sxs-lookup"><span data-stu-id="8be55-279">The media sink can assume that the client will call **BeginFinalize**.</span></span> <span data-ttu-id="8be55-280">La mancata chiamata di **BeginFinalize** può causare un file creato in modo non corretto.</span><span class="sxs-lookup"><span data-stu-id="8be55-280">Failure to call **BeginFinalize** can result in an incorrectly authored file.</span></span>

## <a name="shutting-down"></a><span data-ttu-id="8be55-281">Chiusura in corso</span><span class="sxs-lookup"><span data-stu-id="8be55-281">Shutting Down</span></span>

<span data-ttu-id="8be55-282">Quando il client viene eseguito tramite il sink multimediale, il client chiama [**IMFMediaSink:: Shutdown**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-shutdown).</span><span class="sxs-lookup"><span data-stu-id="8be55-282">When the client is done using the media sink, the client calls [**IMFMediaSink::Shutdown**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-shutdown).</span></span> <span data-ttu-id="8be55-283">All'interno di questo metodo, il sink multimediale dovrebbe interrompere i conteggi circolari dei riferimenti.</span><span class="sxs-lookup"><span data-stu-id="8be55-283">Inside this method, the media sink should break any circular reference counts.</span></span> <span data-ttu-id="8be55-284">In genere, vi saranno riferimenti circolari tra il sink multimediale e i sink del flusso.</span><span class="sxs-lookup"><span data-stu-id="8be55-284">Typically, there will be circular references between the media sink and the stream sinks.</span></span>

<span data-ttu-id="8be55-285">Se si utilizza l'oggetto helper della coda di eventi per implementare [**IMFMediaEventGenerator**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator), chiamare [**IMFMediaEventQueue:: Shutdown**](/windows/desktop/api/mfobjects/nf-mfobjects-imfmediaeventqueue-shutdown) nella coda degli eventi.</span><span class="sxs-lookup"><span data-stu-id="8be55-285">If you are using the event queue helper object to implement [**IMFMediaEventGenerator**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator), call [**IMFMediaEventQueue::Shutdown**](/windows/desktop/api/mfobjects/nf-mfobjects-imfmediaeventqueue-shutdown) on the event queue.</span></span> <span data-ttu-id="8be55-286">Questo metodo arresta la coda degli eventi e segnala a qualsiasi chiamante che è attualmente in attesa di un evento.</span><span class="sxs-lookup"><span data-stu-id="8be55-286">This method shuts down the event queue and signals any caller that is currently waiting for an event.</span></span>

<span data-ttu-id="8be55-287">Dopo l'arresto, tutti i metodi sul sink multimediale restituiscono MF \_ E \_ Shutdown, ad eccezione dei metodi **IUnknown** .</span><span class="sxs-lookup"><span data-stu-id="8be55-287">After shutdown, all methods on the media sink return MF\_E\_SHUTDOWN, with the exception of **IUnknown** methods.</span></span>

## <a name="media-sink-interfaces"></a><span data-ttu-id="8be55-288">Interfacce del sink multimediale</span><span class="sxs-lookup"><span data-stu-id="8be55-288">Media Sink Interfaces</span></span>

<span data-ttu-id="8be55-289">La tabella seguente elenca le interfacce standard che i sink di supporto possono esporre tramite **QueryInterface**.</span><span class="sxs-lookup"><span data-stu-id="8be55-289">The following table lists the standard interfaces that media sinks can expose through **QueryInterface**.</span></span> <span data-ttu-id="8be55-290">I sink di supporto possono anche esporre interfacce personalizzate.</span><span class="sxs-lookup"><span data-stu-id="8be55-290">Media sinks can also expose custom interfaces.</span></span>



| <span data-ttu-id="8be55-291">Interfaccia</span><span class="sxs-lookup"><span data-stu-id="8be55-291">Interface</span></span>                                                      | <span data-ttu-id="8be55-292">Descrizione</span><span class="sxs-lookup"><span data-stu-id="8be55-292">Description</span></span>                                                                                   |
|----------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
| [<span data-ttu-id="8be55-293">**IMFMediaSink**</span><span class="sxs-lookup"><span data-stu-id="8be55-293">**IMFMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink)                           | <span data-ttu-id="8be55-294">Interfaccia principale per i sink di supporto.</span><span class="sxs-lookup"><span data-stu-id="8be55-294">The primary interface for media sinks.</span></span> <span data-ttu-id="8be55-295">Obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="8be55-295">(Required.)</span></span>                                            |
| [<span data-ttu-id="8be55-296">**IMFClockStateSink**</span><span class="sxs-lookup"><span data-stu-id="8be55-296">**IMFClockStateSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink)                 | <span data-ttu-id="8be55-297">Utilizzato per notificare al sink multimediale quando lo stato dell'orologio di presentazione cambia.</span><span class="sxs-lookup"><span data-stu-id="8be55-297">Used to notify the media sink when presentation clock changes state.</span></span> <span data-ttu-id="8be55-298">Obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="8be55-298">(Required.)</span></span>              |
| [<span data-ttu-id="8be55-299">**IMFFinalizableMediaSink**</span><span class="sxs-lookup"><span data-stu-id="8be55-299">**IMFFinalizableMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink)     | <span data-ttu-id="8be55-300">Implementare se il sink multimediale deve eseguire un passaggio di elaborazione finale.</span><span class="sxs-lookup"><span data-stu-id="8be55-300">Implement if the media sink must perform a final processing step.</span></span> <span data-ttu-id="8be55-301">Facoltativo.</span><span class="sxs-lookup"><span data-stu-id="8be55-301">(Optional.)</span></span>                 |
| [<span data-ttu-id="8be55-302">**IMFGetService**</span><span class="sxs-lookup"><span data-stu-id="8be55-302">**IMFGetService**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)                         | <span data-ttu-id="8be55-303">Implementare se il sink multimediale espone le interfacce del servizio.</span><span class="sxs-lookup"><span data-stu-id="8be55-303">Implement if the media sink exposes any service interfaces.</span></span> <span data-ttu-id="8be55-304">Facoltativo.</span><span class="sxs-lookup"><span data-stu-id="8be55-304">(Optional.)</span></span>                       |
| [<span data-ttu-id="8be55-305">**IMFMediaEventGenerator**</span><span class="sxs-lookup"><span data-stu-id="8be55-305">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator)       | <span data-ttu-id="8be55-306">Implementare se il sink multimediale invia eventi.</span><span class="sxs-lookup"><span data-stu-id="8be55-306">Implement if the media sink sends any events.</span></span> <span data-ttu-id="8be55-307">Facoltativo.</span><span class="sxs-lookup"><span data-stu-id="8be55-307">(Optional.)</span></span>                                     |
| [<span data-ttu-id="8be55-308">**IMFMediaSinkPreroll**</span><span class="sxs-lookup"><span data-stu-id="8be55-308">**IMFMediaSinkPreroll**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll)             | <span data-ttu-id="8be55-309">Implementare se il sink multimediale supporta la preroll.</span><span class="sxs-lookup"><span data-stu-id="8be55-309">Implement if the media sink supports preroll.</span></span> <span data-ttu-id="8be55-310">Facoltativo.</span><span class="sxs-lookup"><span data-stu-id="8be55-310">(Optional.)</span></span>                                     |
| [<span data-ttu-id="8be55-311">**IMFPresentationTimeSource**</span><span class="sxs-lookup"><span data-stu-id="8be55-311">**IMFPresentationTimeSource**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) | <span data-ttu-id="8be55-312">Implementare se il sink multimediale può fornire un'origine dell'ora per il clock di presentazione.</span><span class="sxs-lookup"><span data-stu-id="8be55-312">Implement if the media sink can provide a time source for the presentation clock.</span></span> <span data-ttu-id="8be55-313">Facoltativo.</span><span class="sxs-lookup"><span data-stu-id="8be55-313">(Optional.)</span></span> |
| [<span data-ttu-id="8be55-314">**IMFQualityAdvise**</span><span class="sxs-lookup"><span data-stu-id="8be55-314">**IMFQualityAdvise**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfqualityadvise)                   | <span data-ttu-id="8be55-315">Implementare se il sink multimediale può regolare la qualità della riproduzione.</span><span class="sxs-lookup"><span data-stu-id="8be55-315">Implement if the media sink can adjust playback quality.</span></span> <span data-ttu-id="8be55-316">Facoltativo.</span><span class="sxs-lookup"><span data-stu-id="8be55-316">(Optional.)</span></span>                          |



 

<span data-ttu-id="8be55-317">Facoltativamente, un sink multimediale può implementare l'interfaccia seguente come servizio.</span><span class="sxs-lookup"><span data-stu-id="8be55-317">Optionally, a media sink can implement the following interface as a service.</span></span>



| <span data-ttu-id="8be55-318">Interfaccia del servizio</span><span class="sxs-lookup"><span data-stu-id="8be55-318">Service interface</span></span>                        | <span data-ttu-id="8be55-319">Descrizione</span><span class="sxs-lookup"><span data-stu-id="8be55-319">Description</span></span>                                    |
|------------------------------------------|------------------------------------------------|
| [<span data-ttu-id="8be55-320">**IMFRateSupport**</span><span class="sxs-lookup"><span data-stu-id="8be55-320">**IMFRateSupport**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport) | <span data-ttu-id="8be55-321">Segnala l'intervallo di frequenze di riproduzione supportate.</span><span class="sxs-lookup"><span data-stu-id="8be55-321">Reports the range of supported playback rates.</span></span> |



 

<span data-ttu-id="8be55-322">Per ulteriori informazioni sulle interfacce del servizio e [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice), vedere [interfacce di servizio](service-interfaces.md).</span><span class="sxs-lookup"><span data-stu-id="8be55-322">For more information about service interfaces and [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice), see [Service Interfaces](service-interfaces.md).</span></span>

## <a name="stream-sink-interfaces"></a><span data-ttu-id="8be55-323">Interfacce di sink di flusso</span><span class="sxs-lookup"><span data-stu-id="8be55-323">Stream Sink Interfaces</span></span>

<span data-ttu-id="8be55-324">I sink di flusso devono esporre le interfacce seguenti tramite **QueryInterface**.</span><span class="sxs-lookup"><span data-stu-id="8be55-324">Stream sinks must expose the following interfaces through **QueryInterface**.</span></span>



| <span data-ttu-id="8be55-325">Interfaccia</span><span class="sxs-lookup"><span data-stu-id="8be55-325">Interface</span></span>                                                | <span data-ttu-id="8be55-326">Descrizione</span><span class="sxs-lookup"><span data-stu-id="8be55-326">Description</span></span>                                                                                              |
|----------------------------------------------------------|----------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="8be55-327">**IMFStreamSink**</span><span class="sxs-lookup"><span data-stu-id="8be55-327">**IMFStreamSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink)                   | <span data-ttu-id="8be55-328">Interfaccia principale per i sink di flusso.</span><span class="sxs-lookup"><span data-stu-id="8be55-328">The primary interface for stream sinks.</span></span> <span data-ttu-id="8be55-329">Obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="8be55-329">(Required.)</span></span>                                                      |
| [<span data-ttu-id="8be55-330">**IMFMediaEventGenerator**</span><span class="sxs-lookup"><span data-stu-id="8be55-330">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator) | <span data-ttu-id="8be55-331">Accoda gli eventi.</span><span class="sxs-lookup"><span data-stu-id="8be55-331">Queues events.</span></span> <span data-ttu-id="8be55-332">L'interfaccia [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) eredita questa interfaccia.</span><span class="sxs-lookup"><span data-stu-id="8be55-332">The [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) interface inherits this interface.</span></span> <span data-ttu-id="8be55-333">Obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="8be55-333">(Required.)</span></span> |



 

<span data-ttu-id="8be55-334">Attualmente non sono definite interfacce del servizio per i sink di flusso.</span><span class="sxs-lookup"><span data-stu-id="8be55-334">Currently no service interfaces are defined for stream sinks.</span></span>

## <a name="stream-sink-events"></a><span data-ttu-id="8be55-335">Eventi sink di flusso</span><span class="sxs-lookup"><span data-stu-id="8be55-335">Stream Sink Events</span></span>

<span data-ttu-id="8be55-336">La tabella seguente elenca gli eventi definiti per i sink di flusso generici.</span><span class="sxs-lookup"><span data-stu-id="8be55-336">The following table lists the events that are defined for generic stream sinks.</span></span> <span data-ttu-id="8be55-337">I sink di flusso possono anche inviare eventi personalizzati non elencati qui.</span><span class="sxs-lookup"><span data-stu-id="8be55-337">Stream sinks can also send custom events not listed here.</span></span>



| <span data-ttu-id="8be55-338">Event</span><span class="sxs-lookup"><span data-stu-id="8be55-338">Event</span></span>                                                                  | <span data-ttu-id="8be55-339">Descrizione</span><span class="sxs-lookup"><span data-stu-id="8be55-339">Description</span></span>                                                  |
|------------------------------------------------------------------------|--------------------------------------------------------------|
| [<span data-ttu-id="8be55-340">MEStreamSinkFormatChanged</span><span class="sxs-lookup"><span data-stu-id="8be55-340">MEStreamSinkFormatChanged</span></span>](mestreamsinkformatchanged.md)             | <span data-ttu-id="8be55-341">Il tipo di supporto del sink di flusso non è più valido.</span><span class="sxs-lookup"><span data-stu-id="8be55-341">The stream sink's media type is no longer valid.</span></span> <span data-ttu-id="8be55-342">Facoltativo.</span><span class="sxs-lookup"><span data-stu-id="8be55-342">(Optional.)</span></span> |
| [<span data-ttu-id="8be55-343">MEStreamSinkMarker</span><span class="sxs-lookup"><span data-stu-id="8be55-343">MEStreamSinkMarker</span></span>](mestreamsinkmarker.md)                           | <span data-ttu-id="8be55-344">Un marcatore è stato elaborato.</span><span class="sxs-lookup"><span data-stu-id="8be55-344">A marker was processed.</span></span> <span data-ttu-id="8be55-345">Obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="8be55-345">(Required.)</span></span>                          |
| [<span data-ttu-id="8be55-346">MEStreamSinkPaused</span><span class="sxs-lookup"><span data-stu-id="8be55-346">MEStreamSinkPaused</span></span>](mestreamsinkpaused.md)                           | <span data-ttu-id="8be55-347">Il sink del flusso è stato sospeso.</span><span class="sxs-lookup"><span data-stu-id="8be55-347">The stream sink has paused.</span></span> <span data-ttu-id="8be55-348">Obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="8be55-348">(Required.)</span></span>                      |
| [<span data-ttu-id="8be55-349">MEStreamSinkPrerolled</span><span class="sxs-lookup"><span data-stu-id="8be55-349">MEStreamSinkPrerolled</span></span>](mestreamsinkprerolled.md)                     | <span data-ttu-id="8be55-350">Il preroll è stato completato.</span><span class="sxs-lookup"><span data-stu-id="8be55-350">Preroll is complete.</span></span> <span data-ttu-id="8be55-351">Facoltativo.</span><span class="sxs-lookup"><span data-stu-id="8be55-351">(Optional.)</span></span>                             |
| [<span data-ttu-id="8be55-352">MEStreamSinkRateChanged</span><span class="sxs-lookup"><span data-stu-id="8be55-352">MEStreamSinkRateChanged</span></span>](mestreamsinkratechanged.md)                 | <span data-ttu-id="8be55-353">La velocità di riproduzione del sink del flusso è cambiata.</span><span class="sxs-lookup"><span data-stu-id="8be55-353">The stream sink has changed playback rate.</span></span> <span data-ttu-id="8be55-354">Facoltativo.</span><span class="sxs-lookup"><span data-stu-id="8be55-354">(Optional.)</span></span>       |
| [<span data-ttu-id="8be55-355">MEStreamSinkRequestSample</span><span class="sxs-lookup"><span data-stu-id="8be55-355">MEStreamSinkRequestSample</span></span>](mestreamsinkrequestsample.md)             | <span data-ttu-id="8be55-356">Viene richiesto un nuovo esempio.</span><span class="sxs-lookup"><span data-stu-id="8be55-356">A new sample is requested.</span></span> <span data-ttu-id="8be55-357">Obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="8be55-357">(Required.)</span></span>                       |
| [<span data-ttu-id="8be55-358">MEStreamSinkScrubSampleComplete</span><span class="sxs-lookup"><span data-stu-id="8be55-358">MEStreamSinkScrubSampleComplete</span></span>](mestreamsinkscrubsamplecomplete.md) | <span data-ttu-id="8be55-359">Una richiesta di scrub è stata completata.</span><span class="sxs-lookup"><span data-stu-id="8be55-359">A scrub request was completed.</span></span> <span data-ttu-id="8be55-360">Facoltativo.</span><span class="sxs-lookup"><span data-stu-id="8be55-360">(Optional.)</span></span>                   |
| [<span data-ttu-id="8be55-361">MEStreamSinkStarted</span><span class="sxs-lookup"><span data-stu-id="8be55-361">MEStreamSinkStarted</span></span>](mestreamsinkstarted.md)                         | <span data-ttu-id="8be55-362">Sink di flusso avviato.</span><span class="sxs-lookup"><span data-stu-id="8be55-362">The stream sink has started.</span></span> <span data-ttu-id="8be55-363">Obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="8be55-363">(Required.)</span></span>                     |
| [<span data-ttu-id="8be55-364">MEStreamSinkStopped</span><span class="sxs-lookup"><span data-stu-id="8be55-364">MEStreamSinkStopped</span></span>](mestreamsinkstopped.md)                         | <span data-ttu-id="8be55-365">Il sink del flusso è stato arrestato.</span><span class="sxs-lookup"><span data-stu-id="8be55-365">The stream sink has stopped.</span></span> <span data-ttu-id="8be55-366">Obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="8be55-366">(Required.)</span></span>                     |



 

<span data-ttu-id="8be55-367">Attualmente non sono definiti eventi generici per i sink di supporto.</span><span class="sxs-lookup"><span data-stu-id="8be55-367">Currently no general-purpose events are defined for media sinks.</span></span> <span data-ttu-id="8be55-368">Alcuni sink di supporto potrebbero inviare eventi personalizzati.</span><span class="sxs-lookup"><span data-stu-id="8be55-368">Some media sinks might send custom events.</span></span>

## <a name="related-topics"></a><span data-ttu-id="8be55-369">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="8be55-369">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8be55-370">Pipeline Media Foundation</span><span class="sxs-lookup"><span data-stu-id="8be55-370">Media Foundation Pipeline</span></span>](media-foundation-pipeline.md)
</dt> <dt>

[<span data-ttu-id="8be55-371">Architettura di Media Foundation</span><span class="sxs-lookup"><span data-stu-id="8be55-371">Media Foundation Architecture</span></span>](media-foundation-architecture.md)
</dt> </dl>

 

 




