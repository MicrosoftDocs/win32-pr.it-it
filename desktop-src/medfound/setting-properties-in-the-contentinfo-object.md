---
description: Durante la creazione di un file ASF, è necessario che l'oggetto ContentInfo conosca le caratteristiche del contenuto multimediale, in modo che i vari oggetti Header vengano popolati con i valori corretti.
ms.assetid: 30e3c10b-1310-4194-8b83-221dfe73b03c
title: Impostazione delle proprietà nell'oggetto ContentInfo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e386d5eb33dd1893b195a870425b2336ab9c316f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104130474"
---
# <a name="setting-properties-in-the-contentinfo-object"></a><span data-ttu-id="842b3-103">Impostazione delle proprietà nell'oggetto ContentInfo</span><span class="sxs-lookup"><span data-stu-id="842b3-103">Setting Properties in the ContentInfo Object</span></span>

<span data-ttu-id="842b3-104">Durante la creazione di un file ASF, è necessario che l'oggetto ContentInfo conosca le caratteristiche del contenuto multimediale, in modo che i vari oggetti Header vengano popolati con i valori corretti.</span><span class="sxs-lookup"><span data-stu-id="842b3-104">While creating an ASF file, the ContentInfo object needs to know the characteristics of the media content so that the various header objects are populated with the correct values.</span></span>

-   [<span data-ttu-id="842b3-105">Impostazioni correlate al contenuto nell'oggetto ContentInfo</span><span class="sxs-lookup"><span data-stu-id="842b3-105">Content-Related Settings in the ContentInfo Object</span></span>](#content-related-settings-in-the-contentinfo-object)
-   [<span data-ttu-id="842b3-106">Configurazione dell'oggetto ContentInfo con le impostazioni del codificatore</span><span class="sxs-lookup"><span data-stu-id="842b3-106">Configuring the ContentInfo Object with Encoder Settings</span></span>](#configuring-the-contentinfo-object-with-encoder-settings)
-   [<span data-ttu-id="842b3-107">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="842b3-107">Related topics</span></span>](#related-topics)

## <a name="content-related-settings-in-the-contentinfo-object"></a><span data-ttu-id="842b3-108">Impostazioni correlate al contenuto nell'oggetto ContentInfo</span><span class="sxs-lookup"><span data-stu-id="842b3-108">Content-Related Settings in the ContentInfo Object</span></span>

<span data-ttu-id="842b3-109">Le impostazioni di configurazione del contenuto sono impostazioni di flusso, che sono contenute all'interno del profilo e specificano l'identificatore del flusso, il tipo di supporto e i parametri di bucket a perdita per il sink multimediale.</span><span class="sxs-lookup"><span data-stu-id="842b3-109">Content configuration settings are stream settings, which are contained within the profile and specify the stream identifier, the media type, and the leaky bucket parameters for the media sink.</span></span> <span data-ttu-id="842b3-110">Dopo che il profilo è stato impostato sull'oggetto ContentInfo chiamando [**IMFASFContentInfo:: seprofile**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile), questi valori vengono riflessi nell'oggetto intestazione ASF che è stato generato.</span><span class="sxs-lookup"><span data-stu-id="842b3-110">After the profile is set on the ContentInfo object by calling [**IMFASFContentInfo::SetProfile**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile), these values are reflected in the ASF Header Object that was generated.</span></span> <span data-ttu-id="842b3-111">Per informazioni su queste impostazioni, vedere [creazione e configurazione di flussi ASF](creating-and-configuring-asf-streams.md).</span><span class="sxs-lookup"><span data-stu-id="842b3-111">For information about these settings, see [Creating and Configuring ASF Streams](creating-and-configuring-asf-streams.md).</span></span>

## <a name="configuring-the-contentinfo-object-with-encoder-settings"></a><span data-ttu-id="842b3-112">Configurazione dell'oggetto ContentInfo con le impostazioni del codificatore</span><span class="sxs-lookup"><span data-stu-id="842b3-112">Configuring the ContentInfo Object with Encoder Settings</span></span>

<span data-ttu-id="842b3-113">I dati audio o video multimediali digitali sono complessi e occupano grandi quantità di memoria.</span><span class="sxs-lookup"><span data-stu-id="842b3-113">Digital media audio or video data is complex and takes up large amounts of memory.</span></span> <span data-ttu-id="842b3-114">Nella maggior parte dei casi, audio e video vengono compressi tramite codificatori prima di essere aggiunti a un file ASF.</span><span class="sxs-lookup"><span data-stu-id="842b3-114">Under most circumstances, both audio and video are compressed by using encoders before being added to an ASF file.</span></span> <span data-ttu-id="842b3-115">In Media Foundation i codificatori vengono implementati come [trasformazioni di Media Foundation](media-foundation-transforms.md) (MFTS) con un input e un output.</span><span class="sxs-lookup"><span data-stu-id="842b3-115">In Media Foundation, encoders are implemented as [Media Foundation Transforms](media-foundation-transforms.md) (MFTs) with one input and one output.</span></span> <span data-ttu-id="842b3-116">È necessario selezionare il tipo di supporto di output in base al tipo di supporto del flusso di input e al tipo di codifica scelto per comprimere il flusso.</span><span class="sxs-lookup"><span data-stu-id="842b3-116">You must select the output media type depending on the media type of the input stream and the encoding type you choose for compressing the stream.</span></span>

<span data-ttu-id="842b3-117">Prima della sessione di codifica, il codificatore deve essere configurato impostando le proprietà rilevanti a seconda del tipo di codifica.</span><span class="sxs-lookup"><span data-stu-id="842b3-117">Before the encoding session, the encoder must be configured by setting the relevant properties depending on the type of encoding.</span></span>

<span data-ttu-id="842b3-118">Dopo aver configurato il codificatore, è necessario configurare l'oggetto ContentInfo con i valori del codificatore, perché il [multiplexing ASF](asf-multiplexer.md) e il sink multimediale ASF, che vengono inizializzati con l'oggetto ContentInfo popolato, usano impostazioni quali i valori dei bucket persi per generare pacchetti di dati ASF.</span><span class="sxs-lookup"><span data-stu-id="842b3-118">After configuring the encoder, you must configure the ContentInfo object with the encoder values because the [ASF Multiplexer](asf-multiplexer.md) and the ASF Media Sink, which are initialized with the populated ContentInfo object, use settings such as the leaky bucket values, to generate ASF data packets.</span></span> <span data-ttu-id="842b3-119">I valori non vengono salvati nell'oggetto intestazione ASF finale.</span><span class="sxs-lookup"><span data-stu-id="842b3-119">The values are not saved in the final ASF Header Object.</span></span> <span data-ttu-id="842b3-120">Le impostazioni di codifica sono esposte come proprietà.</span><span class="sxs-lookup"><span data-stu-id="842b3-120">The encoding settings are exposed as properties.</span></span> <span data-ttu-id="842b3-121">Per configurare l'oggetto ContentInfo con le proprietà del codificatore, eseguire le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="842b3-121">To configure the ContentInfo object with the encoder properties, do the following:</span></span>

1.  <span data-ttu-id="842b3-122">Ottenere un puntatore all'archivio delle proprietà del codificatore eseguendo una query del codificatore (interfaccia [**IMFTransform**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) ) direttamente per l'interfaccia **IPropertyStore** .</span><span class="sxs-lookup"><span data-stu-id="842b3-122">Get a pointer to the encoder's property store by querying the encoder ([**IMFTransform**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) interface) directly for the **IPropertyStore** interface.</span></span>
2.  <span data-ttu-id="842b3-123">Chiamare [**IMFASFContentInfo:: GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore).</span><span class="sxs-lookup"><span data-stu-id="842b3-123">Call [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore).</span></span> <span data-ttu-id="842b3-124">Per impostare le proprietà specifiche del flusso, specificare l'identificatore del flusso nel parametro *wStreamNumber* . per le proprietà a livello di file, passare 0.</span><span class="sxs-lookup"><span data-stu-id="842b3-124">To set stream-specific properties, specify the stream identifier in the *wStreamNumber* parameter; for file-level properties, pass 0.</span></span> <span data-ttu-id="842b3-125">Il parametro *ppIStore* riceve un puntatore all'interfaccia **IPropertyStore** .</span><span class="sxs-lookup"><span data-stu-id="842b3-125">The *ppIStore* parameter receives a pointer to the **IPropertyStore** interface.</span></span> <span data-ttu-id="842b3-126">L'archivio delle proprietà ricevuto è vuoto.</span><span class="sxs-lookup"><span data-stu-id="842b3-126">The received property store is empty.</span></span>
3.  <span data-ttu-id="842b3-127">Chiamare **IPropertyStore:: GetValue** sul codificatore e ottenere il valore della proprietà specificando le costanti della chiave della proprietà.</span><span class="sxs-lookup"><span data-stu-id="842b3-127">Call **IPropertyStore::GetValue** on the encoder and get the property value by specifying the property key constants.</span></span> <span data-ttu-id="842b3-128">Per un elenco completo delle proprietà di codifica, vedere la Guida di [riferimento alla programmazione di codec](/previous-versions//aa384554(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="842b3-128">For a complete list of encoding properties, see the [Codec Programming Reference](/previous-versions//aa384554(v=vs.85)).</span></span>
4.  <span data-ttu-id="842b3-129">Chiamare **IPropertyStore:: SetValue** nell'oggetto ContentInfo per impostare la proprietà obbligatoria nell'archivio delle proprietà.</span><span class="sxs-lookup"><span data-stu-id="842b3-129">Call **IPropertyStore::SetValue** on the ContentInfo object to set the required property in the property store.</span></span>
5.  <span data-ttu-id="842b3-130">Ripetere i passaggi 3 e 4 per ogni proprietà che si desidera impostare.</span><span class="sxs-lookup"><span data-stu-id="842b3-130">Repeat steps 3 and 4 for each property that you want to set.</span></span>

<span data-ttu-id="842b3-131">Il sink multimediale ASF può essere creato usando un oggetto Activation chiamando [**MFCreateASFMediaSinkActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate).</span><span class="sxs-lookup"><span data-stu-id="842b3-131">The ASF media sink can be created by using an activation object by calling [**MFCreateASFMediaSinkActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate).</span></span> <span data-ttu-id="842b3-132">Il nuovo oggetto sink multimediale viene configurato in base alle impostazioni specifiche del sink multimediale che possono essere impostate nell'archivio delle proprietà dell'oggetto ContentInfo.</span><span class="sxs-lookup"><span data-stu-id="842b3-132">The new media sink object is configured based on media sink-specific settings that can be set in the ContentInfo object's property store.</span></span> <span data-ttu-id="842b3-133">Nella tabella seguente vengono illustrate le costanti della proprietà del sink multimediale ASF.</span><span class="sxs-lookup"><span data-stu-id="842b3-133">The following table shows the ASF media sink property constants.</span></span>



| <span data-ttu-id="842b3-134">Proprietà</span><span class="sxs-lookup"><span data-stu-id="842b3-134">Property</span></span>                                                                                                     | <span data-ttu-id="842b3-135">Descrizione</span><span class="sxs-lookup"><span data-stu-id="842b3-135">Description</span></span>                                                                                                                                                                                                                                                                                           |
|--------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="842b3-136">**MFPKEY \_ ASFMEDIASINK \_ base \_ SENDTIME**</span><span class="sxs-lookup"><span data-stu-id="842b3-136">**MFPKEY\_ASFMEDIASINK\_BASE\_SENDTIME**</span></span>](mfpkey-asfmediasink-base-sendtime-property.md)                   | <span data-ttu-id="842b3-137">Il tempo di invio indica quando verrà rilasciato il payload all'interno del bucket.</span><span class="sxs-lookup"><span data-stu-id="842b3-137">The send time indicates when the payload inside the leaky bucket will be released.</span></span> <span data-ttu-id="842b3-138">Il valore di questa proprietà indica il primo tempo di invio.</span><span class="sxs-lookup"><span data-stu-id="842b3-138">This property value indicates the first send time.</span></span> <span data-ttu-id="842b3-139">Il multiplexer utilizza questo valore per calcolare i tempi di invio successivi per i pacchetti generati e garantisce che i dati scorrano costantemente attraverso il bucket.</span><span class="sxs-lookup"><span data-stu-id="842b3-139">The multiplexer uses this value to calculate the subsequent send times for the generated packets and ensures that data flows steadily through the leaky bucket.</span></span> |
| [<span data-ttu-id="842b3-140">**velocità in bit di MFPKEY \_ ASFMEDIASINK \_ AutoAdjust \_**</span><span class="sxs-lookup"><span data-stu-id="842b3-140">**MFPKEY\_ASFMEDIASINK\_AUTOADJUST\_BITRATE**</span></span>](mfpkey-asfmediasink-autoadjust-bitrate-property.md)         | <span data-ttu-id="842b3-141">Questo valore **bool** indica se il multiplexer deve modificare automaticamente la velocità in bit per assicurarsi che i dati non vengano sottoposto a overflow nel bucket.</span><span class="sxs-lookup"><span data-stu-id="842b3-141">This **BOOL** value indicates whether the multiplexer needs to adjust the bit rate automatically to ensure that data does not overflow the leaky bucket.</span></span>                                                                                                                                              |
| [<span data-ttu-id="842b3-142">**MFPKEY \_ ASFMEDIASINK \_ DRMACTION**</span><span class="sxs-lookup"><span data-stu-id="842b3-142">**MFPKEY\_ASFMEDIASINK\_DRMACTION**</span></span>](mfpkey-asfmediasink-drmaction-property.md)                            | <span data-ttu-id="842b3-143">Ciò indica l'azione DRM del sink multimediale ASF per la generazione di file.</span><span class="sxs-lookup"><span data-stu-id="842b3-143">This indicates the ASF media sink DRM action for file generation.</span></span> <span data-ttu-id="842b3-144">In questa versione è supportata solo la transcodifica DRM.</span><span class="sxs-lookup"><span data-stu-id="842b3-144">In this release, only DRM transcode is supported.</span></span>                                                                                                                                                                                   |
| [<span data-ttu-id="842b3-145">**MFPKEY \_ ASFSTREAMSINK con \_ correzione \_ LEAKYBUCKET**</span><span class="sxs-lookup"><span data-stu-id="842b3-145">**MFPKEY\_ASFSTREAMSINK\_CORRECTED\_LEAKYBUCKET**</span></span>](mfpkey-asfstreamsink-corrected-leakybucket-property.md) | <span data-ttu-id="842b3-146">Questa proprietà deve essere impostata quando il codificatore stabilisce la finestra del buffer e la velocità in bit da usare.</span><span class="sxs-lookup"><span data-stu-id="842b3-146">This property must be set when the encoder decides which buffer window and bit rate to use.</span></span> <span data-ttu-id="842b3-147">Per impostare questi valori, usare l'interfaccia [**IWMCodecLeakyBucket**](/windows/desktop/api/wmcodecdsp/nn-wmcodecdsp-iwmcodecleakybucket) .</span><span class="sxs-lookup"><span data-stu-id="842b3-147">To set these values, use the [**IWMCodecLeakyBucket**](/windows/desktop/api/wmcodecdsp/nn-wmcodecdsp-iwmcodecleakybucket) interface.</span></span> <span data-ttu-id="842b3-148">Questa impostazione deve essere impostata per ogni flusso del file ASF.</span><span class="sxs-lookup"><span data-stu-id="842b3-148">This must be set for each stream in the ASF file.</span></span>                                                     |



 

## <a name="related-topics"></a><span data-ttu-id="842b3-149">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="842b3-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="842b3-150">Scrittura di un oggetto intestazione ASF per un nuovo file</span><span class="sxs-lookup"><span data-stu-id="842b3-150">Writing an ASF Header Object for a New File</span></span>](writing-an-asf-header-object-for-a-new-file.md)
</dt> </dl>

 

 
