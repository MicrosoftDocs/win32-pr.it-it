---
description: Funzionalità di origine della rete
ms.assetid: a4e20ecb-c145-4823-ae59-f6fc88593d86
title: Funzionalità di origine della rete
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8e937a97cf743740d9cebf84ad477c52cdee5083
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104549952"
---
# <a name="network-source-features"></a><span data-ttu-id="89366-103">Funzionalità di origine della rete</span><span class="sxs-lookup"><span data-stu-id="89366-103">Network Source Features</span></span>

<span data-ttu-id="89366-104">L'origine di rete fornisce l'implementazione di base per lo streaming dei file multimediali ed espone l'interfaccia [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) .</span><span class="sxs-lookup"><span data-stu-id="89366-104">The network source provides the base implementation for streaming media files and exposes the [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) interface.</span></span> <span data-ttu-id="89366-105">L'implementazione dell'origine di rete specifica dipende dal protocollo usato per aprire l'origine, ad esempio RTSP o HTTP.</span><span class="sxs-lookup"><span data-stu-id="89366-105">The specific network source implementation depends on the protocol used to open the source such as RTSP or HTTP.</span></span> <span data-ttu-id="89366-106">Le origini di rete specifiche del protocollo estendono le funzionalità di rete di base.</span><span class="sxs-lookup"><span data-stu-id="89366-106">The protocol-specific network sources extend the basic network functionality.</span></span> <span data-ttu-id="89366-107">Per informazioni sugli schemi e sui protocolli supportati, vedere [protocolli supportati](supported-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="89366-107">For information about the supported schemes and protocols, see [Supported Protocols](supported-protocols.md).</span></span>

<span data-ttu-id="89366-108">Origine rete:</span><span class="sxs-lookup"><span data-stu-id="89366-108">The network source:</span></span>

-   <span data-ttu-id="89366-109">Implementa funzionalità come la memorizzazione nella cache, il rilevamento del proxy e la riconnessione automatica.</span><span class="sxs-lookup"><span data-stu-id="89366-109">Implements features such as caching, proxy detection, and auto-reconnection.</span></span>
-   <span data-ttu-id="89366-110">Converte le chiamate indipendenti dal protocollo dal resolver di origine a chiamate specifiche del protocollo.</span><span class="sxs-lookup"><span data-stu-id="89366-110">Converts protocol-independent calls from the source resolver to protocol-specific calls.</span></span>
-   <span data-ttu-id="89366-111">Interagisce con il livello socket e il sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="89366-111">Interacts with the socket layer and the operating system.</span></span> <span data-ttu-id="89366-112">Analizza la descrizione SDP e la usa come dati di configurazione e legge i dati del flusso dal livello di socket sottostante.</span><span class="sxs-lookup"><span data-stu-id="89366-112">Parses the SDP description and uses it as configuration data, and reads stream data from the underlying sockets layer.</span></span> <span data-ttu-id="89366-113">Quando viene ricevuta, l'origine di rete è responsabile del riordinamento e della richiesta di ritrasmissione dei pacchetti.</span><span class="sxs-lookup"><span data-stu-id="89366-113">When receiving, the network source is responsible for reordering and requesting retransmissions of packets.</span></span>

## <a name="network-source-creation"></a><span data-ttu-id="89366-114">Creazione dell'origine di rete</span><span class="sxs-lookup"><span data-stu-id="89366-114">Network Source Creation</span></span>

<span data-ttu-id="89366-115">La creazione di un'origine multimediale per un'origine dalla rete non è diversa da un'origine multimediale per un file locale.</span><span class="sxs-lookup"><span data-stu-id="89366-115">Creating a media source for a source from the network is not different from a media source for a local file.</span></span> <span data-ttu-id="89366-116">L'applicazione passa l'URL per i metodi del [resolver](source-resolver.md) di origine a quello di origine, ad esempio [**IMFSourceResolver:: CreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfromurl) o [**IMFSourceResolver:: BeginCreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-begincreateobjectfromurl) e specifica il flag di risoluzione di MF per la \_ risoluzione \_ .</span><span class="sxs-lookup"><span data-stu-id="89366-116">The application passes the URL for the source to [Source Resolver](source-resolver.md) methods such as [**IMFSourceResolver::CreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfromurl) or [**IMFSourceResolver::BeginCreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-begincreateobjectfromurl) and specifies the MF\_RESOLUTION\_MEDIASOURCE flag.</span></span> <span data-ttu-id="89366-117">Per ulteriori informazioni sull'utilizzo di questo flag, vedere [using the source resolver](using-the-source-resolver.md).</span><span class="sxs-lookup"><span data-stu-id="89366-117">For more information about using this flag, see [Using the Source Resolver](using-the-source-resolver.md).</span></span>

<span data-ttu-id="89366-118">A seconda dello schema fornito dall'applicazione, il resolver di origine carica l'oggetto gestore dello schema appropriato che espone l'interfaccia [**IMFSchemeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfschemehandler) .</span><span class="sxs-lookup"><span data-stu-id="89366-118">Depending on the scheme provided by the application, the source resolver loads the appropriate the scheme handler object, which exposes the [**IMFSchemeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfschemehandler) interface.</span></span> <span data-ttu-id="89366-119">L'applicazione può anche usare direttamente il gestore dello schema per creare l'origine di rete chiamando [**IMFSchemeHandler:: BeginCreateObject**](/windows/desktop/api/mfidl/nf-mfidl-imfschemehandler-begincreateobject).</span><span class="sxs-lookup"><span data-stu-id="89366-119">The application can also use the scheme handler directly to create the network source by calling [**IMFSchemeHandler::BeginCreateObject**](/windows/desktop/api/mfidl/nf-mfidl-imfschemehandler-begincreateobject).</span></span>

<span data-ttu-id="89366-120">Per altre informazioni, vedere [gestori di schemi e gestori di Byte-Stream](scheme-handlers-and-byte-stream-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="89366-120">For more information, see [Scheme Handlers and Byte-Stream Handlers](scheme-handlers-and-byte-stream-handlers.md).</span></span>

<span data-ttu-id="89366-121">Media Foundation non supporta flussi di byte per le origini di rete.</span><span class="sxs-lookup"><span data-stu-id="89366-121">Media Foundation does not support byte streams for network sources.</span></span> <span data-ttu-id="89366-122">L'oggetto flusso di byte è supportato solo nello scenario di contenuto scaricato.</span><span class="sxs-lookup"><span data-stu-id="89366-122">The byte stream object is only supported in the downloaded content scenario.</span></span> <span data-ttu-id="89366-123">Tutti i dati vengono trasmessi il più rapidamente possibile in modo che possano essere salvati come file nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="89366-123">All the data is transmitted as quickly as possible so that it can be saved as a file on the local machine.</span></span> <span data-ttu-id="89366-124">i server Web forniscono i dati scaricati.</span><span class="sxs-lookup"><span data-stu-id="89366-124">web servers provide downloaded data.</span></span> <span data-ttu-id="89366-125">Non esiste alcuna comunicazione dal client al server dopo l'inizio del download.</span><span class="sxs-lookup"><span data-stu-id="89366-125">There is no communication from the client to the server after the download begins.</span></span> <span data-ttu-id="89366-126">In questo caso viene usato il protocollo di download HTTP.</span><span class="sxs-lookup"><span data-stu-id="89366-126">In this case the HTTP download protocol is used.</span></span>

<span data-ttu-id="89366-127">Se l'applicazione richiede al resolver di origine di creare un oggetto flusso di byte per gli schemi "http:", "MMS:" o "RTSP:", la chiamata ha esito negativo con l' \_ errore di schema MF E non \_ supportato \_ .</span><span class="sxs-lookup"><span data-stu-id="89366-127">If the application requests the source resolver to create a byte stream object for "http:", "mms:", or "rtsp:" schemes, then the call fails with the MF\_E\_UNSUPPORTED\_SCHEME error.</span></span>

> [!Note]  
> <span data-ttu-id="89366-128">In Windows 7, l'origine di rete supporta i file di Windows Media Station (. NSC).</span><span class="sxs-lookup"><span data-stu-id="89366-128">In Windows 7, the network source supports Windows Media Station files (.NSC).</span></span> <span data-ttu-id="89366-129">Questi file vengono usati nello streaming multicast del contenuto multimediale in una rete.</span><span class="sxs-lookup"><span data-stu-id="89366-129">These files are used in multicast streaming of media content over a network.</span></span> <span data-ttu-id="89366-130">Per creare l'origine di rete per un oggetto specificato. File NSC, l'applicazione deve usare il resolver di origine.</span><span class="sxs-lookup"><span data-stu-id="89366-130">To create the network source for a specified .NSC file, the application must use the source resolver.</span></span>

 

<span data-ttu-id="89366-131">Se l'applicazione usa il gestore dello schema, la chiamata asincrona ignora il parametro *dwFlags* e restituisce un puntatore all'origine di rete al termine del completamento.</span><span class="sxs-lookup"><span data-stu-id="89366-131">If the application is using the scheme handler, then the asynchronous call ignores the *dwFlags* parameter and returns a pointer to the network source on completion.</span></span>

<span data-ttu-id="89366-132">La figura seguente mostra il flusso di dati per lo streaming multimediale usando l'origine di rete.</span><span class="sxs-lookup"><span data-stu-id="89366-132">The following illustration shows the data flow for media streaming using the network source.</span></span>

![diagramma di flusso che mostra i percorsi dall'applicazione al server di streaming, con un ciclo tra l'origine di rete e la sessione multimediale](images/3f9186ea-53ed-4a31-a097-92f39fa08624.gif)

## <a name="network-source-configuration"></a><span data-ttu-id="89366-134">Configurazione dell'origine di rete</span><span class="sxs-lookup"><span data-stu-id="89366-134">Network Source Configuration</span></span>

<span data-ttu-id="89366-135">In questo argomento vengono descritte le funzionalità supportate dall'origine di rete e le opzioni di configurazione associate.</span><span class="sxs-lookup"><span data-stu-id="89366-135">This topic describes the features supported by the network source and the associated configuration options.</span></span> <span data-ttu-id="89366-136">Un'applicazione può configurare l'origine di rete durante la creazione dell'oggetto di origine di rete.</span><span class="sxs-lookup"><span data-stu-id="89366-136">An application can configure the network source when creating the network source object.</span></span> <span data-ttu-id="89366-137">Queste opzioni vengono archiviate in un oggetto **IPropertyStore** , che deve essere passato dall'applicazione nel parametro *pProps* dei metodi del resolver di origine o [**IMFSchemeHandler:: BeginCreateObject**](/windows/desktop/api/mfidl/nf-mfidl-imfschemehandler-begincreateobject).</span><span class="sxs-lookup"><span data-stu-id="89366-137">These options are stored in an **IPropertyStore** object, which the application must pass in the *pProps* parameter of the source resolver methods or [**IMFSchemeHandler::BeginCreateObject**](/windows/desktop/api/mfidl/nf-mfidl-imfschemehandler-begincreateobject).</span></span>

### <a name="auto-reconnect"></a><span data-ttu-id="89366-138">Riconnessione automatica</span><span class="sxs-lookup"><span data-stu-id="89366-138">Auto-Reconnect</span></span>

<span data-ttu-id="89366-139">La funzionalità di riconnessione automatica dell'origine di rete consente a un client di riconnettersi automaticamente al server multimediale quando la connessione TCP al server ha esito negativo o il client non riesce a ricevere i pacchetti.</span><span class="sxs-lookup"><span data-stu-id="89366-139">The auto-reconnect feature of the network source enables a client to reconnect to the media server automatically when the TCP connection to the server fails or the client fails to receive packets.</span></span> <span data-ttu-id="89366-140">Quando la connessione non riesce, l'origine di rete tenta di riconnettersi al server multimediale utilizzando la stessa configurazione utilizzata nella connessione precedente.</span><span class="sxs-lookup"><span data-stu-id="89366-140">When connection fails, the network source attempts to reconnect to the media server using the same configuration that was used in the previous connection.</span></span> <span data-ttu-id="89366-141">Il processo di riconnessione è asincrono.</span><span class="sxs-lookup"><span data-stu-id="89366-141">The reconnection process is asynchronous.</span></span> <span data-ttu-id="89366-142">L'origine di rete genera l'evento [MEReconnectStart](mereconnectstart.md) quando inizia la riconnessione e l'evento [MEReconnectEnd](mereconnectend.md) quando la riconnessione ha esito positivo o negativo.</span><span class="sxs-lookup"><span data-stu-id="89366-142">The network source raises the [MEReconnectStart](mereconnectstart.md) event when it begins reconnection and the [MEReconnectEnd](mereconnectend.md) event when the reconnection succeeds or fails.</span></span>

<span data-ttu-id="89366-143">Se il numero di tentativi di riconnessione supera il valore massimo specificato dalla proprietà [**MFNETSOURCE \_ AUTORECONNECTLIMIT**](mfnetsource-autoreconnectlimit-property.md) , l'operazione di riconnessione viene annullata.</span><span class="sxs-lookup"><span data-stu-id="89366-143">If the number of reconnection attempts exceeds the maximum value specified by the [**MFNETSOURCE\_AUTORECONNECTLIMIT**](mfnetsource-autoreconnectlimit-property.md) property, the reconnection operation is canceled.</span></span> <span data-ttu-id="89366-144">Il numero di tentativi di riconnessione è archiviato nella [**proprietà \_ AUTORECONNECTPROGRESS di MFNETSOURCE**](mfnetsource-autoreconnectprogress-property.md) .</span><span class="sxs-lookup"><span data-stu-id="89366-144">The number of reconnection attempts is stored in the [**MFNETSOURCE\_AUTORECONNECTPROGRESS**](mfnetsource-autoreconnectprogress-property.md) property.</span></span>

<span data-ttu-id="89366-145">La riconnessione automatica consente la riproduzione uniforme del contenuto multimediale anche quando la connessione TCP al server multimediale ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="89366-145">Auto-reconnect enables smooth playback of media content even when the TCP connection to the media server fails.</span></span> <span data-ttu-id="89366-146">Per un'esperienza di riproduzione uniforme, il client deve disporre di dati sufficienti, da almeno 1 a 2 minuti, nella cache per continuare la riproduzione fino alla riconnessione.</span><span class="sxs-lookup"><span data-stu-id="89366-146">For a smooth playback experience, the client must have sufficient data, at least 1 to 2 minutes, in its cache to continue playback until reconnection.</span></span> <span data-ttu-id="89366-147">La quantità massima di dati che l'origine di rete è in grado di memorizzare nel buffer può essere impostata nella proprietà [**\_ MAXBUFFERTIMEMS di MFNETSOURCE**](mfnetsource-maxbuffertimems-property.md) .</span><span class="sxs-lookup"><span data-stu-id="89366-147">The maximum amount of data that the network source can buffer can be set in the [**MFNETSOURCE\_MAXBUFFERTIMEMS**](mfnetsource-maxbuffertimems-property.md) property.</span></span>

### <a name="fast-streaming"></a><span data-ttu-id="89366-148">Streaming veloce</span><span class="sxs-lookup"><span data-stu-id="89366-148">Fast Streaming</span></span>

<span data-ttu-id="89366-149">Il client di origine della rete richiede al server di trasmettere alcuni dati all'inizio del contenuto a una velocità più elevata rispetto a quella specificata dalla velocità in bit del contenuto.</span><span class="sxs-lookup"><span data-stu-id="89366-149">The network source client requests the server to stream some of the data at the beginning of the content at a faster rate than that specified by the bit rate of the content.</span></span> <span data-ttu-id="89366-150">Se nel server è abilitato l' *avvio rapido* , il server invia un flusso accelerato a velocità in bit, in modo che il client possa memorizzare nel buffer una quantità di dati sufficiente più velocemente che in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="89366-150">If *Fast Startup* is enabled on the server, the server sends an accelerated bit-rate stream so that the client can buffer a sufficient amount of data faster than in real time.</span></span> <span data-ttu-id="89366-151">Ciò consente di migliorare l'esperienza utente riducendo al minimo i ritardi di buffer iniziali, che possono essere causati da diversi fattori, ad esempio la velocità ridotta del computer client o della rete e la larghezza di banda disponibile.</span><span class="sxs-lookup"><span data-stu-id="89366-151">This improves user experience by minimizing initial buffering delays, which can be caused by various factors such as low speed of the client computer or the network, and available bandwidth.</span></span>

<span data-ttu-id="89366-152">Per specificare la quantità di dati di streaming veloce che il client può richiedere, impostare la proprietà [**MFNETSOURCE \_ ACCELERATEDSTREAMINGDURATION**](mfnetsource-acceleratedstreamingduration-property.md) .</span><span class="sxs-lookup"><span data-stu-id="89366-152">To specify the amount of fast-streaming data that the client can request, set the [**MFNETSOURCE\_ACCELERATEDSTREAMINGDURATION**](mfnetsource-acceleratedstreamingduration-property.md) property.</span></span> <span data-ttu-id="89366-153">Se l'origine di rete usa UDP come protocollo di trasporto, specificare la quantità massima di dati di streaming veloce impostando la [**proprietà \_ MAXUDPACCELERATEDSTREAMINGDURATION di MFNETSOURCE**](mfnetsource-maxudpacceleratedstreamingduration-property.md) .</span><span class="sxs-lookup"><span data-stu-id="89366-153">If the network source is using UDP as the transport protocol, specify the maximum amount of fast-streaming data by setting the [**MFNETSOURCE\_MAXUDPACCELERATEDSTREAMINGDURATION**](mfnetsource-maxudpacceleratedstreamingduration-property.md) property instead.</span></span>

<span data-ttu-id="89366-154">È anche possibile eseguire lo streaming veloce sul client tramite la funzionalità *fast cache* , ovvero trasmettere il contenuto su richiesta più velocemente del tempo reale e memorizzare nella cache i dati nella cache locale del client.</span><span class="sxs-lookup"><span data-stu-id="89366-154">Fast streaming on the client is also possible through the *Fast Cache* feature—streaming on-demand content faster than real time and caching data on the client's local cache.</span></span> <span data-ttu-id="89366-155">Per usare questo tipo di streaming veloce, è necessario abilitare la cache veloce nell'origine di rete e il server deve supportarla.</span><span class="sxs-lookup"><span data-stu-id="89366-155">To use this type of fast streaming, Fast Cache must be enabled on the network source, and the server must support it.</span></span> <span data-ttu-id="89366-156">Quando il client richiede il contenuto dal server, l'origine di rete verifica prima di tutto se il contenuto è già presente nella cache del client.</span><span class="sxs-lookup"><span data-stu-id="89366-156">When the client requests content from the server, the network source first checks to see whether the content is already in the client's cache.</span></span> <span data-ttu-id="89366-157">Se il contenuto si trova nella cache locale del client e non è scaduto, ne viene eseguito il rendering.</span><span class="sxs-lookup"><span data-stu-id="89366-157">If the content is in the client's local cache and has not expired, it is rendered.</span></span> <span data-ttu-id="89366-158">Se il contenuto non si trova nella cache locale o è già scaduto, il contenuto viene trasmesso e memorizzato nella cache e l'origine di rete la riproduce dalla cache locale.</span><span class="sxs-lookup"><span data-stu-id="89366-158">If the content is not in the local cache or has already expired, the content is streamed and cached, and the network source plays it from the local cache.</span></span> <span data-ttu-id="89366-159">Nelle richieste successive, per le playlist, solo le voci mancanti vengono memorizzate nella cache e quindi riprodotte.</span><span class="sxs-lookup"><span data-stu-id="89366-159">In subsequent requests, for playlists, only missing entries are cached and then played.</span></span> <span data-ttu-id="89366-160">Se una voce della playlist è già presente nella cache locale del client, viene riprodotta da questa posizione e non viene memorizzata di nuovo nella cache.</span><span class="sxs-lookup"><span data-stu-id="89366-160">If a playlist entry is already in the client's local cache, it is played from there and not cached again.</span></span>

<span data-ttu-id="89366-161">Per impostazione predefinita, la cache veloce è abilitata nel client di origine di rete.</span><span class="sxs-lookup"><span data-stu-id="89366-161">By default, Fast Cache is enabled on the network source client.</span></span> <span data-ttu-id="89366-162">Tuttavia, i fattori seguenti determinano anche se la funzionalità viene utilizzata:</span><span class="sxs-lookup"><span data-stu-id="89366-162">However, the following factors also determine whether the feature is used:</span></span>

-   <span data-ttu-id="89366-163">Il client deve avere una larghezza di banda aggiuntiva disponibile per scaricare e memorizzare nella cache il contenuto più velocemente della velocità normale.</span><span class="sxs-lookup"><span data-stu-id="89366-163">The client must have extra bandwidth available to download and cache the content faster than the normal speed.</span></span>
-   <span data-ttu-id="89366-164">Il client deve disporre di spazio su disco sufficiente.</span><span class="sxs-lookup"><span data-stu-id="89366-164">The client must have sufficient disk space.</span></span> <span data-ttu-id="89366-165">Se il client dispone di meno di 100 MB di spazio disponibile su disco dopo la memorizzazione nella cache del contenuto su richiesta richiesto, non viene memorizzato nella cache, ma viene trasmesso e sottoposto a rendering simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="89366-165">If the client has less than 100 MB of free disk space after caching the requested on-demand content, it is not cached, but is streamed and rendered simultaneously.</span></span>

<span data-ttu-id="89366-166">La funzionalità cache veloce è controllata dalla proprietà [**\_ CACHEENABLED di MFNETSOURCE**](mfnetsource-cacheenabled-property.md) .</span><span class="sxs-lookup"><span data-stu-id="89366-166">The Fast Cache feature is controlled by the [**MFNETSOURCE\_CACHEENABLED**](mfnetsource-cacheenabled-property.md) property.</span></span>

### <a name="buffer-management"></a><span data-ttu-id="89366-167">Gestione del buffer</span><span class="sxs-lookup"><span data-stu-id="89366-167">Buffer Management</span></span>

<span data-ttu-id="89366-168">L'origine di rete offre una gestione efficiente del buffer che monitora lo stato del buffer nel client.</span><span class="sxs-lookup"><span data-stu-id="89366-168">The network source provides efficient buffer management that monitors the buffer state on the client.</span></span> <span data-ttu-id="89366-169">Per impostazione predefinita, l'origine di rete memorizza nel buffer 5 secondi di dati all'avvio.</span><span class="sxs-lookup"><span data-stu-id="89366-169">By default, the network source buffers 5 seconds of data at startup.</span></span> <span data-ttu-id="89366-170">Questo valore può essere configurato impostando la proprietà [**MFNETSOURCE \_ BUFFERINGTIME**](mfnetsource-bufferingtime-property.md) .</span><span class="sxs-lookup"><span data-stu-id="89366-170">This value can be configured by setting the [**MFNETSOURCE\_BUFFERINGTIME**](mfnetsource-bufferingtime-property.md) property.</span></span> <span data-ttu-id="89366-171">In base a questo valore della proprietà, l'origine di rete calcola la dimensione del buffer sufficiente per garantire la riproduzione uniforme e senza interruzioni del contenuto multimediale.</span><span class="sxs-lookup"><span data-stu-id="89366-171">Based on this property value, the network source computes the buffer size that is sufficient to ensure smooth and uninterrupted playback of the media content.</span></span> <span data-ttu-id="89366-172">Se questa proprietà è impostata su 0, la gestione del buffer è disabilitata.</span><span class="sxs-lookup"><span data-stu-id="89366-172">If this property is set to 0, buffer management is disabled.</span></span> <span data-ttu-id="89366-173">Quando la quantità di contenuto nel buffer è bassa, l'origine di rete avvia il buffering e genera l'evento [MEBufferingStarted](mebufferingstarted.md) per indicare che è iniziata la memorizzazione nel buffer.</span><span class="sxs-lookup"><span data-stu-id="89366-173">When the amount of content in the buffer is low, the network source starts buffering and raises the [MEBufferingStarted](mebufferingstarted.md) event to indicate that buffering has begun.</span></span> <span data-ttu-id="89366-174">Al momento della ricezione di questo evento, la pipeline interrompe il rendering.</span><span class="sxs-lookup"><span data-stu-id="89366-174">Upon receiving this event, the pipeline stops rendering.</span></span> <span data-ttu-id="89366-175">Quando il buffering è completo, l'origine di rete genera l'evento [MEBufferingStopped](mebufferingstopped.md) e il client può avviare di nuovo il rendering.</span><span class="sxs-lookup"><span data-stu-id="89366-175">When buffering is complete, the network source raises the [MEBufferingStopped](mebufferingstopped.md) event, and the client can start rendering again.</span></span>

<span data-ttu-id="89366-176">Il client avvia il rendering del contenuto dopo l'accumulo della quantità di dati indicata dalla dimensione del buffer del primo campione.</span><span class="sxs-lookup"><span data-stu-id="89366-176">The client starts rendering the content after it has accumulated the amount of data indicated by the buffer size of the first sample.</span></span> <span data-ttu-id="89366-177">Se questo valore è inferiore alla dimensione del buffer calcolata, la riproduzione viene avviata immediatamente.</span><span class="sxs-lookup"><span data-stu-id="89366-177">If this value is lower than the calculated buffer size, then the playback starts immediately.</span></span> <span data-ttu-id="89366-178">Questo comportamento è molto simile alla funzionalità di avvio rapido.</span><span class="sxs-lookup"><span data-stu-id="89366-178">This behavior is very similar to the Fast Startup feature.</span></span>

<span data-ttu-id="89366-179">La [**proprietà \_ MAXBUFFERTIMEMS di MFNETSOURCE**](mfnetsource-maxbuffertimems-property.md) archivia la quantità massima di dati che possono essere memorizzati nel buffer.</span><span class="sxs-lookup"><span data-stu-id="89366-179">The [**MFNETSOURCE\_MAXBUFFERTIMEMS**](mfnetsource-maxbuffertimems-property.md) property stores the maximum amount of data that can be buffered.</span></span>

### <a name="bandwidth-selection"></a><span data-ttu-id="89366-180">Selezione della larghezza di banda</span><span class="sxs-lookup"><span data-stu-id="89366-180">Bandwidth Selection</span></span>

<span data-ttu-id="89366-181">Quando un client si connette al server multimediale, come parte della configurazione della connessione, l'origine di rete esegue una misurazione *statica di coppie di pacchetti* per stimare la larghezza di banda dei collegamenti iniziale tra client e server.</span><span class="sxs-lookup"><span data-stu-id="89366-181">When a client connects to the media server, as part of the connection setup, the network source performs *static packet-pair* measurement to estimate the initial link bandwidth between client and server.</span></span> <span data-ttu-id="89366-182">In base al risultato di questa misurazione, il client può selezionare flussi audio e video che rientrano nella larghezza di banda stimata.</span><span class="sxs-lookup"><span data-stu-id="89366-182">Based on the result of this measurement, the client can select audio and video streams that fit within the estimated bandwidth.</span></span> <span data-ttu-id="89366-183">In questo modo si garantisce la riproduzione uniforme del contenuto dei flussi multimediali.</span><span class="sxs-lookup"><span data-stu-id="89366-183">This ensures smooth playback of the streaming media content.</span></span>

<span data-ttu-id="89366-184">Durante la fase di avvio rapido viene eseguita la misurazione *dinamica delle coppie di pacchetti* .</span><span class="sxs-lookup"><span data-stu-id="89366-184">During the Fast Startup stage, *dynamic packet-pair* measurement is performed.</span></span> <span data-ttu-id="89366-185">In questo processo il client riceve grandi quantità di dati, che possono essere più pacchetti o esempi.</span><span class="sxs-lookup"><span data-stu-id="89366-185">In this process, the client receives large amounts of data, which can be multiple packets or samples.</span></span>

<span data-ttu-id="89366-186">Il risultato della misurazione dinamica delle coppie di pacchetti è più accurato rispetto alla stima della larghezza di banda dei collegamenti restituita dalla misurazione statica delle coppie di pacchetti, perché il processo statico della coppia di pacchetti Invia un singolo pacchetto di dimensioni fisse, che potrebbe non restituire risultati accurati per le reti a larghezza di banda elevata.</span><span class="sxs-lookup"><span data-stu-id="89366-186">The result of dynamic packet-pair measurement is more accurate than the link bandwidth estimate returned by static packet-pair measurement because the static packet-pair process sends a single packet of fixed size, which may not yield accurate results for high bandwidth networks.</span></span>

<span data-ttu-id="89366-187">L'applicazione può ottenere la larghezza di banda stimata usando la proprietà [**\_ PPBANDWIDTH di MFNETSOURCE**](mfnetsource-ppbandwidth-property.md) .</span><span class="sxs-lookup"><span data-stu-id="89366-187">The application can get the estimated bandwidth by using the [**MFNETSOURCE\_PPBANDWIDTH**](mfnetsource-ppbandwidth-property.md) property.</span></span>

<span data-ttu-id="89366-188">Le condizioni della rete possono variare in modo dinamico, causando problemi di riproduzione dell'origine di rete.</span><span class="sxs-lookup"><span data-stu-id="89366-188">Network conditions may change dynamically, causing glitches in playback of the network source.</span></span> <span data-ttu-id="89366-189">L'origine di rete può modificare la selezione del flusso iniziale del client in base alla frequenza di ricezione e allo stato del buffer.</span><span class="sxs-lookup"><span data-stu-id="89366-189">The network source can change the client's initial stream selection based on the receiving rate and the buffer state.</span></span> <span data-ttu-id="89366-190">Ad esempio, il client può passare a una velocità in bit inferiore durante la congestione della rete e tornare a una velocità in bit superiore quando il traffico di rete è migliorato e il client ha accumulato una quantità sufficiente di contenuto memorizzato nel buffer.</span><span class="sxs-lookup"><span data-stu-id="89366-190">For example, the client might switch to a lower bit rate during network congestion and switch back to a higher bit rate when network traffic has improved and the client has accumulated a sufficient amount of buffered content.</span></span>

## <a name="related-topics"></a><span data-ttu-id="89366-191">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="89366-191">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="89366-192">Rete in Media Foundation</span><span class="sxs-lookup"><span data-stu-id="89366-192">Networking in Media Foundation</span></span>](networking-in-media-foundation.md)
</dt> </dl>

 

 



