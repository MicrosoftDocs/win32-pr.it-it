---
description: Limitazioni per l'utilizzo dei campi
ms.assetid: 36f28e4c-2baf-4618-9935-5d4615f6bc77
title: Limitazioni per l'utilizzo dei campi
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b16f57de7642fa789a08c886a32bf906faffb72b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104342471"
---
# <a name="field-of-use-restrictions"></a><span data-ttu-id="36ca8-103">Limitazioni per l'utilizzo dei campi</span><span class="sxs-lookup"><span data-stu-id="36ca8-103">Field of Use Restrictions</span></span>

> [!Note]  
> <span data-ttu-id="36ca8-104">Questo argomento si applica a Windows 7 o versione successiva.</span><span class="sxs-lookup"><span data-stu-id="36ca8-104">This topic applies to Windows 7 or later.</span></span>

 

<span data-ttu-id="36ca8-105">Una restrizione *del campo di utilizzo* è un provisioning che limita il modo in cui è possibile utilizzare una licenza per una determinata tecnologia.</span><span class="sxs-lookup"><span data-stu-id="36ca8-105">A *field-of-use* restriction is a provision that limits how a license for a particular technology can be used.</span></span>

<span data-ttu-id="36ca8-106">Media Foundation fornisce un meccanismo per l'applicazione di restrizioni sul campo di utilizzo per le trasformazioni di Media Foundation (MFTs), in particolare per i codec.</span><span class="sxs-lookup"><span data-stu-id="36ca8-106">Media Foundation provides a mechanism for enforcing field-of-use restrictions on Media Foundation transforms (MFTs), particularly codecs.</span></span> <span data-ttu-id="36ca8-107">Questo meccanismo richiede a MFT di bloccare il proprio uso da parte delle applicazioni fino a quando l'applicazione non ha eseguito un handshake con MFT.</span><span class="sxs-lookup"><span data-stu-id="36ca8-107">This mechanism requires the MFT to block its own use by applications until the application has performed a handshake with the MFT.</span></span> <span data-ttu-id="36ca8-108">Media Foundation non definisce l'handshake, in genere comporta una sorta di scambio crittografico.</span><span class="sxs-lookup"><span data-stu-id="36ca8-108">Media Foundation does not define the handshake—typically, it would involve some sort of cryptographic exchange.</span></span>

### <a name="registration-and-enumeration"></a><span data-ttu-id="36ca8-109">Registrazione ed enumerazione</span><span class="sxs-lookup"><span data-stu-id="36ca8-109">Registration and Enumeration</span></span>

<span data-ttu-id="36ca8-110">Se una MFT presenta restrizioni per il campo di utilizzo, impostare il flag di **\_ enumerazione MFT \_ flag \_ FIELDOFUSE** quando si registra il MFT.</span><span class="sxs-lookup"><span data-stu-id="36ca8-110">If an MFT has field-of-use restrictions, set the **MFT\_ENUM\_FLAG\_FIELDOFUSE** flag when you register the MFT.</span></span> <span data-ttu-id="36ca8-111">Questo flag si applica alle API di registrazione MFT seguenti:</span><span class="sxs-lookup"><span data-stu-id="36ca8-111">This flag applies to the following MFT registration APIs:</span></span>

-   [<span data-ttu-id="36ca8-112">**MFTRegister**</span><span class="sxs-lookup"><span data-stu-id="36ca8-112">**MFTRegister**</span></span>](/windows/desktop/api/mfapi/nf-mfapi-mftregister)
-   [<span data-ttu-id="36ca8-113">**MFTRegisterLocal**</span><span class="sxs-lookup"><span data-stu-id="36ca8-113">**MFTRegisterLocal**</span></span>](/windows/desktop/api/mfapi/nf-mfapi-mftregisterlocal)
-   [<span data-ttu-id="36ca8-114">**MFTRegisterLocalByCLSID**</span><span class="sxs-lookup"><span data-stu-id="36ca8-114">**MFTRegisterLocalByCLSID**</span></span>](/windows/desktop/api/mfapi/nf-mfapi-mftregisterlocalbyclsid)
-   [<span data-ttu-id="36ca8-115">**IMFLocalMFTRegistration::RegisterMFTs**</span><span class="sxs-lookup"><span data-stu-id="36ca8-115">**IMFLocalMFTRegistration::RegisterMFTs**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imflocalmftregistration-registermfts)

<span data-ttu-id="36ca8-116">Per impostazione predefinita, MFTs registrati con questo flag sono esclusi dai risultati dell'enumerazione.</span><span class="sxs-lookup"><span data-stu-id="36ca8-116">By default, MFTs registered with this flag are excluded from enumeration results.</span></span> <span data-ttu-id="36ca8-117">Per enumerare MFTs con restrizioni per il campo di utilizzo, chiamare [**MFTEnumEx**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex) e specificare il flag di **\_ enumerazione MFT \_ \_ FIELDOFUSE** nel parametro *Flags* .</span><span class="sxs-lookup"><span data-stu-id="36ca8-117">To enumerate MFTs with field-of-use restrictions, call [**MFTEnumEx**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex) and specify the **MFT\_ENUM\_FLAG\_FIELDOFUSE** flag in the *Flags* parameter.</span></span> <span data-ttu-id="36ca8-118">La figura seguente illustra questo processo.</span><span class="sxs-lookup"><span data-stu-id="36ca8-118">The following diagram illustrates this process.</span></span>

![diagramma che mostra MFT e un'applicazione che invia dati al registro di sistema](images/mft-fou01.gif)

<span data-ttu-id="36ca8-120">La funzione [**MFTEnum**](/windows/desktop/api/mfapi/nf-mfapi-mftenum) esclude sempre eventuali MFTS con restrizioni di campo per l'utilizzo.</span><span class="sxs-lookup"><span data-stu-id="36ca8-120">The [**MFTEnum**](/windows/desktop/api/mfapi/nf-mfapi-mftenum) function always excludes any MFTs that have field-of-use restrictions.</span></span>

### <a name="unlocking-the-mft"></a><span data-ttu-id="36ca8-121">Sblocco di MFT</span><span class="sxs-lookup"><span data-stu-id="36ca8-121">Unlocking the MFT</span></span>

<span data-ttu-id="36ca8-122">Per usare un MFT con restrizioni per il campo di utilizzo, seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="36ca8-122">To use an MFT with field-of-use restrictions, perform the following steps:</span></span>

1.  <span data-ttu-id="36ca8-123">L'applicazione implementa l'interfaccia [**IMFFieldOfUseMFTUnlock**](/windows/desktop/api/mfidl/nn-mfidl-imffieldofusemftunlock) .</span><span class="sxs-lookup"><span data-stu-id="36ca8-123">The application implements the [**IMFFieldOfUseMFTUnlock**](/windows/desktop/api/mfidl/nn-mfidl-imffieldofusemftunlock) interface.</span></span>
2.  <span data-ttu-id="36ca8-124">Il metodo [**IMFFieldOfUseMFTUnlock:: Unlock**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) accetta un puntatore all'interfaccia **IUnknown** di MFT.</span><span class="sxs-lookup"><span data-stu-id="36ca8-124">The [**IMFFieldOfUseMFTUnlock::Unlock**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) method takes a pointer to the **IUnknown** interface of the MFT.</span></span>
3.  <span data-ttu-id="36ca8-125">Nel metodo [**Unlock**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) , l'applicazione esegue l'handshake richiesto, usando qualsiasi meccanismo definito da MFT.</span><span class="sxs-lookup"><span data-stu-id="36ca8-125">In the [**Unlock**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) method, the application performs the required handshake, using whatever mechanism is defined by the MFT.</span></span> <span data-ttu-id="36ca8-126">Questo passaggio non è definito dall'API Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="36ca8-126">This step is not defined by Media Foundation API.</span></span>
4.  <span data-ttu-id="36ca8-127">Se il metodo di [**sblocco**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) riesce, il MFT si sblocca automaticamente.</span><span class="sxs-lookup"><span data-stu-id="36ca8-127">If the [**Unlock**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) method succeeds, the MFT unlocks itself.</span></span>

<span data-ttu-id="36ca8-128">L'applicazione specifica il puntatore [**IMFFieldOfUseMFTUnlock**](/windows/desktop/api/mfidl/nn-mfidl-imffieldofusemftunlock) impostando l'attributo dell' [ \_ \_ \_ attributo di sblocco FIELDOFUSE di MFT](mft-fieldofuse-unlock-attribute.md) .</span><span class="sxs-lookup"><span data-stu-id="36ca8-128">The application specifies the [**IMFFieldOfUseMFTUnlock**](/windows/desktop/api/mfidl/nn-mfidl-imffieldofusemftunlock) pointer by setting the [MFT\_FIELDOFUSE\_UNLOCK\_Attribute](mft-fieldofuse-unlock-attribute.md) attribute.</span></span> <span data-ttu-id="36ca8-129">È possibile impostare questo attributo in diversi modi, a seconda del modo in cui l'applicazione crea la pipeline di codifica o decodificatore:</span><span class="sxs-lookup"><span data-stu-id="36ca8-129">There are several different ways to set this attribute, depending on how your application creates the decoder or encoding pipeline:</span></span>



| <span data-ttu-id="36ca8-130">API</span><span class="sxs-lookup"><span data-stu-id="36ca8-130">API</span></span>                   | <span data-ttu-id="36ca8-131">Come sbloccare il campo di utilizzo</span><span class="sxs-lookup"><span data-stu-id="36ca8-131">How to Unlock Field-Of-Use</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|-----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="36ca8-132">Lettore di origine</span><span class="sxs-lookup"><span data-stu-id="36ca8-132">Source Reader</span></span>         | <span data-ttu-id="36ca8-133">Se l'applicazione usa il [lettore di origine](source-reader.md) per decodificare un file multimediale, impostare l'attributo di [sblocco dell' \_ \_ \_ attributo MFT FIELDOFUSE](mft-fieldofuse-unlock-attribute.md) nei parametri di configurazione.</span><span class="sxs-lookup"><span data-stu-id="36ca8-133">If your application uses the [Source Reader](source-reader.md) to decode a media file, set the [MFT\_FIELDOFUSE\_UNLOCK\_Attribute](mft-fieldofuse-unlock-attribute.md) attribute in the configuration parameters.</span></span> <span data-ttu-id="36ca8-134">Vedere [attributi del lettore di origine](source-reader-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="36ca8-134">See [Source Reader Attributes](source-reader-attributes.md).</span></span>                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="36ca8-135">Writer sink</span><span class="sxs-lookup"><span data-stu-id="36ca8-135">Sink Writer</span></span>           | <span data-ttu-id="36ca8-136">Se l'applicazione usa il writer di sink per codificare un file multimediale, impostare l'attributo di [ \_ sblocco dell' \_ \_ attributo MFT FIELDOFUSE](mft-fieldofuse-unlock-attribute.md) nei parametri di configurazione.</span><span class="sxs-lookup"><span data-stu-id="36ca8-136">If your application uses the sink writer to encode a media file, set the [MFT\_FIELDOFUSE\_UNLOCK\_Attribute](mft-fieldofuse-unlock-attribute.md) attribute in the configuration parameters.</span></span> <span data-ttu-id="36ca8-137">Vedere [attributi di sink writer](sink-writer-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="36ca8-137">See [Sink Writer Attributes](sink-writer-attributes.md).</span></span>                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="36ca8-138">Transcodifica veloce</span><span class="sxs-lookup"><span data-stu-id="36ca8-138">Fast Transcode</span></span>        | <span data-ttu-id="36ca8-139">Se l'applicazione usa la funzionalità di transcodifica rapida per creare una topologia di codifica, impostare l' [ \_ attributo di \_ sblocco \_ MFT FIELDOFUSE](mft-fieldofuse-unlock-attribute.md) quando si chiama [**IMFTranscodeProfile:: SetContainerAttributes**](/windows/desktop/api/mfidl/nf-mfidl-imftranscodeprofile-setcontainerattributes).</span><span class="sxs-lookup"><span data-stu-id="36ca8-139">If your application uses the Fast Transcode feature to create an encoding topology, set the [MFT\_FIELDOFUSE\_UNLOCK\_Attribute](mft-fieldofuse-unlock-attribute.md) when you call [**IMFTranscodeProfile::SetContainerAttributes**](/windows/desktop/api/mfidl/nf-mfidl-imftranscodeprofile-setcontainerattributes).</span></span> <span data-ttu-id="36ca8-140">Per ulteriori informazioni sulla funzionalità di transcodifica rapida, vedere [transcode API](transcode-api.md).</span><span class="sxs-lookup"><span data-stu-id="36ca8-140">For more information about the Fast Transcode feature, see [Transcode API](transcode-api.md).</span></span>                                                                                                                                                                      |
| <span data-ttu-id="36ca8-141">Topologia</span><span class="sxs-lookup"><span data-stu-id="36ca8-141">Topology</span></span>              | <span data-ttu-id="36ca8-142">Se si crea una topologia direttamente, impostare [l' \_ \_ \_ attributo di sblocco MFT FIELDOFUSE](mft-fieldofuse-unlock-attribute.md) come attributo nella topologia.</span><span class="sxs-lookup"><span data-stu-id="36ca8-142">If you create a topology directly, set the [MFT\_FIELDOFUSE\_UNLOCK\_Attribute](mft-fieldofuse-unlock-attribute.md) as an attribute on the topology.</span></span> <span data-ttu-id="36ca8-143">Vedere [attributi della topologia](topology-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="36ca8-143">See [Topology Attributes](topology-attributes.md).</span></span>                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="36ca8-144">Oggetto attivazione MFT</span><span class="sxs-lookup"><span data-stu-id="36ca8-144">MFT Activation Object</span></span> | <span data-ttu-id="36ca8-145">Se l'applicazione enumera direttamente i decodificatori o i codificatori che utilizzerà, impostare l'attributo di [ \_ sblocco MFT \_ \_ FIELDOFUSE](mft-fieldofuse-unlock-attribute.md) nei puntatori [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) restituiti dalla funzione [**MFTEnumEx**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex) .</span><span class="sxs-lookup"><span data-stu-id="36ca8-145">If your application directly enumerates the decoders or encoders that it will use, set the [MFT\_FIELDOFUSE\_UNLOCK\_Attribute](mft-fieldofuse-unlock-attribute.md) on the [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) pointers returned by the [**MFTEnumEx**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex) function.</span></span> <br/> <span data-ttu-id="36ca8-146">Impostare l'attributo prima di chiamare [**IMFActivate:: ActivateObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) per creare il MFT.</span><span class="sxs-lookup"><span data-stu-id="36ca8-146">Set the attribute before calling [**IMFActivate::ActivateObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) to create the MFT.</span></span> <span data-ttu-id="36ca8-147">L'oggetto Activation chiama [**IMFFieldOfUseMFTUnlock:: Unlock**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) quando crea il MFT.</span><span class="sxs-lookup"><span data-stu-id="36ca8-147">The activation object calls [**IMFFieldOfUseMFTUnlock::Unlock**](/windows/desktop/api/mfidl/nf-mfidl-imffieldofusemftunlock-unlock) when it creates the MFT.</span></span><br/> |



 

<span data-ttu-id="36ca8-148">Il diagramma seguente illustra la relazione tra gli oggetti di attivazione MFT e l'interfaccia [**IMFFieldOfUseMFTUnlock**](/windows/desktop/api/mfidl/nn-mfidl-imffieldofusemftunlock) .</span><span class="sxs-lookup"><span data-stu-id="36ca8-148">The following diagram shows the relation between MFT activation objects and the [**IMFFieldOfUseMFTUnlock**](/windows/desktop/api/mfidl/nn-mfidl-imffieldofusemftunlock) interface.</span></span>

![diagramma che mostra un'applicazione, un oggetto di attivazione e un MFT con frecce a un oggetto Fou, che ha una freccia verso il MFT](images/mft-fou02.gif)

## <a name="related-topics"></a><span data-ttu-id="36ca8-150">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="36ca8-150">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="36ca8-151">Trasformazioni Media Foundation</span><span class="sxs-lookup"><span data-stu-id="36ca8-151">Media Foundation Transforms</span></span>](media-foundation-transforms.md)
</dt> </dl>

 

 




