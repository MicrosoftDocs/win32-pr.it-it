---
description: Questo articolo contiene indicazioni generali per l'uso delle API video Direct3D 12.
ms.assetid: ''
title: Panoramica di Direct3D 12 video
ms.topic: article
ms.date: 06/03/2019
ms.openlocfilehash: b21587f2784b34131da9c050655b6f3fbe43582d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104524562"
---
# <a name="direct3d-12-video-overview"></a><span data-ttu-id="6bd52-103">Panoramica di Direct3D 12 video</span><span class="sxs-lookup"><span data-stu-id="6bd52-103">Direct3D 12 Video Overview</span></span>

<span data-ttu-id="6bd52-104">Questo articolo contiene indicazioni generali per l'uso delle API video Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="6bd52-104">This article contains general guidance for using the Direct3D 12 video APIs.</span></span>

## <a name="about-direct3d-12-video"></a><span data-ttu-id="6bd52-105">Informazioni sul video di Direct3D 12</span><span class="sxs-lookup"><span data-stu-id="6bd52-105">About Direct3D 12 Video</span></span>

<span data-ttu-id="6bd52-106">L'interfaccia video Direct3D 12 fornisce un nuovo modo per le app per implementare la decodifica video e il processo.</span><span class="sxs-lookup"><span data-stu-id="6bd52-106">The Direct3D 12 video interface provides a new way for apps to implement video decoding and process.</span></span> <span data-ttu-id="6bd52-107">L'interfaccia Direct3D 12 è diversa dall'interfaccia Direct3D 11 precedente perché è stata progettata per essere coerente con i principi e lo stile di Direct3D 12, che include quanto segue:</span><span class="sxs-lookup"><span data-stu-id="6bd52-107">The Direct3D 12 interface is different from the previous Direct3D 11 interface because it was designed to be consistent with the Direct3D 12 principles and style, which includes the following:</span></span>

- <span data-ttu-id="6bd52-108">Fornire agli sviluppatori maggiore controllo</span><span class="sxs-lookup"><span data-stu-id="6bd52-108">Give developers more control</span></span>
 - <span data-ttu-id="6bd52-109">Allocazione della memoria accessibile dall'hardware</span><span class="sxs-lookup"><span data-stu-id="6bd52-109">Allocation of hardware-accessible memory</span></span>
 - <span data-ttu-id="6bd52-110">Thread CPU usati per generare comandi di invio &</span><span class="sxs-lookup"><span data-stu-id="6bd52-110">CPU threads used to generate & submit commands</span></span>
   - <span data-ttu-id="6bd52-111">Generazione e invio indipendenti</span><span class="sxs-lookup"><span data-stu-id="6bd52-111">Independent generation and submission</span></span>
   - <span data-ttu-id="6bd52-112">Senza blocco</span><span class="sxs-lookup"><span data-stu-id="6bd52-112">Non-blocking</span></span>
 - <span data-ttu-id="6bd52-113">Pianificazione del lavoro hardware</span><span class="sxs-lookup"><span data-stu-id="6bd52-113">Scheduling of hardware work</span></span>
- <span data-ttu-id="6bd52-114">Viene illustrata la funzionalità esistente, inclusa la maggior parte delle funzionalità video Direct3D 11, ma allo stesso tempo mantiene la semplicità e la facilità d'uso</span><span class="sxs-lookup"><span data-stu-id="6bd52-114">Covers existing functionality, including most Direct3D 11 video functionality, but at the same time, keeps simplicity and ease of use in mind</span></span>
- <span data-ttu-id="6bd52-115">Potenza e prestazioni delle applicazioni Direct3D 12 principali uguali o migliori di Direct3D 11</span><span class="sxs-lookup"><span data-stu-id="6bd52-115">Power and performance of main Direct3D 12 applications equal to or better than Direct3D 11</span></span>
- <span data-ttu-id="6bd52-116">Coerenza con altre API Direct3D 12</span><span class="sxs-lookup"><span data-stu-id="6bd52-116">Consistency with other Direct3D 12 APIs</span></span>
- <span data-ttu-id="6bd52-117">Interoperabilità con le API grafiche esistenti</span><span class="sxs-lookup"><span data-stu-id="6bd52-117">Interoperability with existing graphics APIs</span></span>


## <a name="video-decoding"></a><span data-ttu-id="6bd52-118">Decodifica video</span><span class="sxs-lookup"><span data-stu-id="6bd52-118">Video decoding</span></span>

<span data-ttu-id="6bd52-119">Le sezioni seguenti descrivono alcune delle attività necessarie per implementare la decodifica video di Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="6bd52-119">The following sections describe some of the tasks involved in implementing Direct3D 12 video decoding.</span></span>

### <a name="query-for-decoding-capabilities"></a><span data-ttu-id="6bd52-120">Query per la decodifica delle funzionalità</span><span class="sxs-lookup"><span data-stu-id="6bd52-120">Query for decoding capabilities</span></span>

<span data-ttu-id="6bd52-121">Chiamare [ID3D12VideoDevice:: CheckFeatureSupport](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-checkfeaturesupport) per verificare i dettagli del supporto per le operazioni di decodifica video di Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="6bd52-121">Call [ID3D12VideoDevice::CheckFeatureSupport](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-checkfeaturesupport) to check for the support details for Direct3D 12 video decoding operations.</span></span> <span data-ttu-id="6bd52-122">Passare un valore dall'enumerazione [D3D12_FEATURE_VIDEO](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_feature_video) per specificare la funzionalità per cui si richiedono le informazioni di supporto.</span><span class="sxs-lookup"><span data-stu-id="6bd52-122">Pass a value from the [D3D12_FEATURE_VIDEO](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_feature_video) enumeration to specify the feature for which you are requesting support information.</span></span>

### <a name="create-the-video-decoder"></a><span data-ttu-id="6bd52-123">Creare il decodificatore video</span><span class="sxs-lookup"><span data-stu-id="6bd52-123">Create the video decoder</span></span>

<span data-ttu-id="6bd52-124">Chiamare [ID3D12VideoDevice:: CreateVideoDecoder](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-createvideodecoder) per creare un'istanza dell'interfaccia [ID3D12VideoDecoder](/windows/desktop/api/d3d12video/nn-d3d12video-id3d12videodecoder) .</span><span class="sxs-lookup"><span data-stu-id="6bd52-124">Call [ID3D12VideoDevice::CreateVideoDecoder](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-createvideodecoder) to create an instance of the [ID3D12VideoDecoder](/windows/desktop/api/d3d12video/nn-d3d12video-id3d12videodecoder) interface.</span></span> <span data-ttu-id="6bd52-125">Il decodificatore include lo stato di una sessione di decodifica, inclusi i dati correlati al riferimento, ad esempio i vettori di movimento.</span><span class="sxs-lookup"><span data-stu-id="6bd52-125">The decoder holds state for a decode session, including reference-related data such as motion vectors.</span></span>  <span data-ttu-id="6bd52-126">In caso di modifica della risoluzione o di una modifica [MaxDecodePictureBufferCount](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decoder_heap_desc) , l'oggetto decoder viene ricreato.</span><span class="sxs-lookup"><span data-stu-id="6bd52-126">In the event of a resolution change or a [MaxDecodePictureBufferCount](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decoder_heap_desc) change, the decoder object is recreated.</span></span> <span data-ttu-id="6bd52-127">La larghezza e l'altezza della decodifica specificano la risoluzione del flusso nativa prima di qualsiasi scala.</span><span class="sxs-lookup"><span data-stu-id="6bd52-127">The decode width and height specify the native stream resolution before any scale.</span></span>  <span data-ttu-id="6bd52-128">Il numero massimo di DPB (Decode Picture buffer) specifica il numero di DPB più grande che può essere utilizzato senza ricreare il decodificatore video.</span><span class="sxs-lookup"><span data-stu-id="6bd52-128">The maximum Decode Picture Buffer (DPB) count specifies the largest DPB count that can be used without recreating the video decoder.</span></span>

<span data-ttu-id="6bd52-129">Il decodificatore può essere usato per registrare i comandi da più elenchi di comandi, ma può essere associato solo a un elenco di comandi alla volta.</span><span class="sxs-lookup"><span data-stu-id="6bd52-129">The decoder may be used to record commands from multiple command lists, but may only be associated with one command list at a time.</span></span>  <span data-ttu-id="6bd52-130">L'applicazione è responsabile della sincronizzazione dell'accesso al decodificatore.</span><span class="sxs-lookup"><span data-stu-id="6bd52-130">The application is responsible for synchronizing access to the decoder.</span></span>

### <a name="create-the-video-decoder-heap"></a><span data-ttu-id="6bd52-131">Creare l'heap del decodificatore video</span><span class="sxs-lookup"><span data-stu-id="6bd52-131">Create the video decoder heap</span></span> 

<span data-ttu-id="6bd52-132">Chiamare [ID3D12VideoDevice:: CreateVideoDecoderHeap](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-createvideodecoderheap) per creare un'istanza dell'interfaccia [ID3D12VideoDecoderHeap](/windows/desktop/api/d3d12video/nn-d3d12video-id3d12videodecoderheap) .</span><span class="sxs-lookup"><span data-stu-id="6bd52-132">Call [ID3D12VideoDevice::CreateVideoDecoderHeap](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-createvideodecoderheap) to create an instance of the [ID3D12VideoDecoderHeap](/windows/desktop/api/d3d12video/nn-d3d12video-id3d12videodecoderheap) interface.</span></span> <span data-ttu-id="6bd52-133">Questo oggetto contiene le risorse e lo stato dei driver dipendenti dalla risoluzione.</span><span class="sxs-lookup"><span data-stu-id="6bd52-133">This object contains the resolution-dependent driver resources and state.</span></span>

### <a name="decoding-a-frame"></a><span data-ttu-id="6bd52-134">Decodifica di un frame</span><span class="sxs-lookup"><span data-stu-id="6bd52-134">Decoding a frame</span></span>

<span data-ttu-id="6bd52-135">Tutti i parametri di input e di output per le operazioni di elaborazione video sono organizzati in una struttura di parametri di input, [D3D12_VIDEO_DECODE_INPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decode_input_stream_arguments)e una struttura di parametri di output, [D3D12_VIDEO_DECODE_OUTPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decode_output_stream_arguments).</span><span class="sxs-lookup"><span data-stu-id="6bd52-135">All input and output parameters for the video processing operations are organized into an input parameter structure, [D3D12_VIDEO_DECODE_INPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decode_input_stream_arguments), and an output parameter structure, [D3D12_VIDEO_DECODE_OUTPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decode_output_stream_arguments).</span></span>
<span data-ttu-id="6bd52-136">L'applicazione gestisce i frame di riferimento e, di conseguenza, deve impostare i frame di riferimento per ogni operazione di decodifica.</span><span class="sxs-lookup"><span data-stu-id="6bd52-136">The application manages the reference frames, and as such, needs to set the reference frames for every decoding operation.</span></span>
<span data-ttu-id="6bd52-137">Quando l'elenco dei comandi viene registrato correttamente, chiamare [ID3D12CommandQueue:: oggetti executecommandlist](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists) nella coda dei comandi video per inviare la decodifica del frame alla GPU.</span><span class="sxs-lookup"><span data-stu-id="6bd52-137">When the command list is properly recorded, call [ID3D12CommandQueue::ExecuteCommandLists](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists) on the video command queue to submit the frame decoding to the GPU.</span></span>


### <a name="enabling-decoder-output-conversions"></a><span data-ttu-id="6bd52-138">Abilitazione delle conversioni di output del decodificatore</span><span class="sxs-lookup"><span data-stu-id="6bd52-138">Enabling decoder output conversions</span></span>
<span data-ttu-id="6bd52-139">Se il decodificatore supporta la conversione, abilitare le conversioni desiderate compilando correttamente la struttura [D3D12_VIDEO_DECODE_CONVERSION_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decode_conversion_arguments) .</span><span class="sxs-lookup"><span data-stu-id="6bd52-139">If the decoder supports conversion, then enable the desired conversions by properly filling the [D3D12_VIDEO_DECODE_CONVERSION_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_decode_conversion_arguments) structure.</span></span> <span data-ttu-id="6bd52-140">Il formato e le risoluzioni dell'output desiderato rispetto all'output nativo del decodificatore vengono comunicati tramite la differenza nello spazio dei colori e nelle risoluzioni specificate nei parametri di conversione.</span><span class="sxs-lookup"><span data-stu-id="6bd52-140">The format and resolutions of the desired output versus the native output of the decoder are communicated via the difference in color space and resolutions specified in the conversion parameters.</span></span>

##  <a name="querying-decoding-status"></a><span data-ttu-id="6bd52-141">Esecuzione di query sullo stato di decodifica</span><span class="sxs-lookup"><span data-stu-id="6bd52-141">Querying decoding status</span></span> 
<span data-ttu-id="6bd52-142">Usare i metodi [ID3D12VideoDecodeCommandList:: BeginQuery](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-beginquery) e [ID3D12VideoDecodeCommandList:: EndQuery](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-endquery) per eseguire una query sullo stato dell'operazione di decodifica.</span><span class="sxs-lookup"><span data-stu-id="6bd52-142">Use the methods [ID3D12VideoDecodeCommandList::BeginQuery](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-beginquery) and [ID3D12VideoDecodeCommandList::EndQuery](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-endquery) to query the status of the decoding operation.</span></span>

<span data-ttu-id="6bd52-143">La struttura [D3D12_QUERY_DATA_VIDEO_DECODE_STATISTICS](/windows/win32/api/d3d12video/ns-d3d12video-d3d12_query_data_video_decode_statistics) viene utilizzata per descrivere le statistiche di decodifica dei video.</span><span class="sxs-lookup"><span data-stu-id="6bd52-143">The [D3D12_QUERY_DATA_VIDEO_DECODE_STATISTICS](/windows/win32/api/d3d12video/ns-d3d12video-d3d12_query_data_video_decode_statistics) structure is used to describe video decode statistics.</span></span> <span data-ttu-id="6bd52-144">Per ottenere un'istanza di questa struttura, chiamare [ID3D12VideoDecodeCommandList:: EndQuery](/windows/win32/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-endquery), passando il valore del tipo di query dell'heap di [D3D12_QUERY_TYPE_VIDEO_DECODE_STATISTIC](/windows/win32/api/d3d12/ne-d3d12-d3d12_query_type).</span><span class="sxs-lookup"><span data-stu-id="6bd52-144">To get an instance of this structure call [ID3D12VideoDecodeCommandList::EndQuery](/windows/win32/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-endquery), passing in the heap query type value of [D3D12_QUERY_TYPE_VIDEO_DECODE_STATISTIC](/windows/win32/api/d3d12/ne-d3d12-d3d12_query_type).</span></span> <span data-ttu-id="6bd52-145">Si noti che questa query non usa [ID3D12VideoDecodeCommandList:: BeginQuery](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-beginquery).</span><span class="sxs-lookup"><span data-stu-id="6bd52-145">Note that this query does not use [ID3D12VideoDecodeCommandList::BeginQuery](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodecodecommandlist-beginquery).</span></span>

## <a name="video-processing"></a><span data-ttu-id="6bd52-146">Elaborazione video</span><span class="sxs-lookup"><span data-stu-id="6bd52-146">Video processing</span></span>

<span data-ttu-id="6bd52-147">Le API di Direct3D 12 video adottano un approccio semplificato all'elaborazione video, eliminando funzionalità di Direct3D 11 che non sono state ampiamente utilizzate e rimuovendo i controlli delle funzionalità che sono obbligatori tra i dispositivi.</span><span class="sxs-lookup"><span data-stu-id="6bd52-147">Direct3D 12 video APIs take a streamlined approach to video processing, eliminating features of Direct3D 11 that weren't widely used and removing capability checks for features that are mandatory across devices.</span></span> <span data-ttu-id="6bd52-148">Il processo di enumerazione per l'elaborazione video viene eliminato.</span><span class="sxs-lookup"><span data-stu-id="6bd52-148">The enumeration process for video processing is eliminated.</span></span> <span data-ttu-id="6bd52-149">In alternativa, chiamare [ID3D12VideoDevice:: CheckFeatureSupport](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-checkfeaturesupport) che consente a un'app di identificare le funzionalità del processore video.</span><span class="sxs-lookup"><span data-stu-id="6bd52-149">Instead, call [ID3D12VideoDevice::CheckFeatureSupport](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-checkfeaturesupport) which allows an app to identify the capabilities of the video processor.</span></span> <span data-ttu-id="6bd52-150">I formati video, interlacci, stereo e i prezzi desiderati vengono forniti come input per **CheckFeatureSupport**.</span><span class="sxs-lookup"><span data-stu-id="6bd52-150">The desired video, interlace, stereo formats and rates are provided as as input to **CheckFeatureSupport**.</span></span>

### <a name="removed-capabilities"></a><span data-ttu-id="6bd52-151">Funzionalità rimosse</span><span class="sxs-lookup"><span data-stu-id="6bd52-151">Removed capabilities</span></span>

<span data-ttu-id="6bd52-152">Le funzionalità seguenti di Direct3D 11 non sono supportate nell'elaborazione video Direct3D 12:</span><span class="sxs-lookup"><span data-stu-id="6bd52-152">The following capabilities from Direct3D 11 are not supported in Direct3D 12 video processing:</span></span>
- <span data-ttu-id="6bd52-153">Tariffe personalizzate.</span><span class="sxs-lookup"><span data-stu-id="6bd52-153">Custom rates.</span></span>  <span data-ttu-id="6bd52-154">È invece prevista una frequenza di input e di output durante la registrazione del comando [ID3D12VideoProcessCommandList::P rocessframes](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videoprocesscommandlist-processframes) .</span><span class="sxs-lookup"><span data-stu-id="6bd52-154">Instead, there is an input and output rate given during the [ID3D12VideoProcessCommandList::ProcessFrames](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videoprocesscommandlist-processframes) command recording.</span></span>
- <span data-ttu-id="6bd52-155">Sono ora disponibili solo due modalità di deinterlacciamento: [Bob](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_process_deinterlace_flags) e [Custom](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_process_deinterlace_flags).</span><span class="sxs-lookup"><span data-stu-id="6bd52-155">There are just two deinterlacing modes available now: [BOB](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_process_deinterlace_flags) and [CUSTOM](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_process_deinterlace_flags).</span></span> <span data-ttu-id="6bd52-156">Sono state eliminate altre modalità.</span><span class="sxs-lookup"><span data-stu-id="6bd52-156">Other modes have been eliminated.</span></span> <span data-ttu-id="6bd52-157">CUSTOM è una modalità di deinterlacciamento di alta qualità fornita dal fornitore dell'hardware.</span><span class="sxs-lookup"><span data-stu-id="6bd52-157">CUSTOM is a high-quality deinterlacing mode provided by the hardware vendor.</span></span>
- <span data-ttu-id="6bd52-158">Tutti i formati stereo facoltativi in [D3D11_VIDEO_PROCESSOR_STEREO_CAPS](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_stereo_caps) non sono più supportati.</span><span class="sxs-lookup"><span data-stu-id="6bd52-158">All of the optional stereo formats in [D3D11_VIDEO_PROCESSOR_STEREO_CAPS](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_stereo_caps) are no longer supported.</span></span> <span data-ttu-id="6bd52-159">In alternativa, [nono](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format), [orizzontale](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format), [verticale](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format)e [separato](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format) sono obbligatori per tutti i dispositivi hardware se lo stereo è supportato.</span><span class="sxs-lookup"><span data-stu-id="6bd52-159">Instead, [nono](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format), [horizontal](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format), [vertical](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format), and [separate](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_frame_stereo_format) are mandatory for all hardware devices if stereo is supported.</span></span>
- <span data-ttu-id="6bd52-160">Non esiste alcun equivalente per [D3D11_VIDEO_PROCESSOR_FORMAT_CAPS](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_format_caps) o [D3D11_VIDEO_PROCESSOR_AUTO_STREAM_CAPS](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_auto_stream_caps).</span><span class="sxs-lookup"><span data-stu-id="6bd52-160">There is no equivalent for [D3D11_VIDEO_PROCESSOR_FORMAT_CAPS](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_format_caps) or [D3D11_VIDEO_PROCESSOR_AUTO_STREAM_CAPS](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_auto_stream_caps).</span></span> <span data-ttu-id="6bd52-161">I formati di input e di output sono invece argomenti per la creazione del processore video e, in quel momento, dovrebbero essere noti se il processore video può o non può eseguire l'operazione con il formato specificato.</span><span class="sxs-lookup"><span data-stu-id="6bd52-161">Instead, input and output formats are arguments to the creation of the video processor, and at that time, it should be known if the video processor can or cannot perform the operation with the given format.</span></span> <span data-ttu-id="6bd52-162">Il [D3D12_VIDEO_PROCESS_AUTO_PROCESSING_FLAGS](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_process_auto_processing_flags) viene utilizzato per indicare se le funzionalità di elaborazione automatica sono disponibili.</span><span class="sxs-lookup"><span data-stu-id="6bd52-162">The [D3D12_VIDEO_PROCESS_AUTO_PROCESSING_FLAGS](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_process_auto_processing_flags) is used to indicate if auto processing features are available.</span></span>
- <span data-ttu-id="6bd52-163">Non esiste alcun equivalente per [D3D11_VIDEO_PROCESSOR_CAPS_LEGACY](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_feature_caps).</span><span class="sxs-lookup"><span data-stu-id="6bd52-163">There is no equivalent for [D3D11_VIDEO_PROCESSOR_CAPS_LEGACY](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_feature_caps).</span></span>
- <span data-ttu-id="6bd52-164">Non esiste alcun equivalente per [D3D11_VIDEO_PROCESSOR_CAPS_CONSTRICTION](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_feature_caps).</span><span class="sxs-lookup"><span data-stu-id="6bd52-164">There is no equivalent for [D3D11_VIDEO_PROCESSOR_CAPS_CONSTRICTION](/windows/desktop/api/d3d11/ne-d3d11-d3d11_video_processor_feature_caps).</span></span>
- <span data-ttu-id="6bd52-165">Quando si esegue la conversione da stereo a mono, si presuppone che la visualizzazione Baseline sia 0.</span><span class="sxs-lookup"><span data-stu-id="6bd52-165">When converting from stereo to mono, we assume the baseline view is 0.</span></span>
- <span data-ttu-id="6bd52-166">L'elaborazione video Direct3D 12 non supporta la conversione da mono a stereo e non è disponibile alcun supporto per l'offset mono.</span><span class="sxs-lookup"><span data-stu-id="6bd52-166">Direct3D 12 video processing does not support converting mono to stereo and there is no support for mono offset.</span></span> 


### <a name="creating-a-video-processor"></a><span data-ttu-id="6bd52-167">Creazione di un processore video</span><span class="sxs-lookup"><span data-stu-id="6bd52-167">Creating a video processor</span></span>

<span data-ttu-id="6bd52-168">Chiamare [ID3D12VideoDevice:: CreateVideoProcessor](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-createvideoprocessor) per creare un'istanza di [ID3D12VideoProcessor](/windows/desktop/api/d3d12video/nn-d3d12video-id3d12videoprocessor).</span><span class="sxs-lookup"><span data-stu-id="6bd52-168">Call [ID3D12VideoDevice::CreateVideoProcessor](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videodevice-createvideoprocessor) to create an instance of the [ID3D12VideoProcessor](/windows/desktop/api/d3d12video/nn-d3d12video-id3d12videoprocessor).</span></span> <span data-ttu-id="6bd52-169">Il processore video include lo stato di una sessione di elaborazione video, tra cui memoria intermedia richiesta, dati di elaborazione memorizzati nella cache o altro spazio di lavoro temporaneo.</span><span class="sxs-lookup"><span data-stu-id="6bd52-169">The video processor holds state for a video processing session, including required intermediate memory, cached processing data, or other temporary working space.</span></span> <span data-ttu-id="6bd52-170">Gli argomenti di creazione del processore video specificano le operazioni eseguite o disponibili in [ID3D12VideoProcessCommandList1::P rocessframes1](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videoprocesscommandlist1-processframes1) tempo.</span><span class="sxs-lookup"><span data-stu-id="6bd52-170">The video processor creation arguments specify which operations are performed or are available at [ID3D12VideoProcessCommandList1::ProcessFrames1](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videoprocesscommandlist1-processframes1) time.</span></span>  <span data-ttu-id="6bd52-171">Le allocazioni di driver per eseguire l'operazione di elaborazione video (ad esempio intermedi) vengono allocate in fase di creazione del processore video.</span><span class="sxs-lookup"><span data-stu-id="6bd52-171">Driver allocations to perform the video process operation (e.g. intermediates) are allocated at video processor creation time.</span></span>  <span data-ttu-id="6bd52-172">Utilizzare [D3D12_FEATURE_VIDEO_PROCESSOR_SIZE](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_feature_video) per determinare in anticipo le dimensioni di allocazione del processore video.</span><span class="sxs-lookup"><span data-stu-id="6bd52-172">Use [D3D12_FEATURE_VIDEO_PROCESSOR_SIZE](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_feature_video) to determine the allocation size of the video processor in advance.</span></span>

<span data-ttu-id="6bd52-173">Il processore video può essere usato solo per registrare i comandi da più elenchi di comandi, ma può essere associato solo a un elenco di comandi alla volta.</span><span class="sxs-lookup"><span data-stu-id="6bd52-173">The video processor may only be used to record commands from multiple command lists, but may only be associated with one command list at a time.</span></span>  <span data-ttu-id="6bd52-174">L'applicazione è responsabile della sincronizzazione dell'accesso al processore video.</span><span class="sxs-lookup"><span data-stu-id="6bd52-174">The application is responsible for synchronizing access to the video processor.</span></span>  <span data-ttu-id="6bd52-175">L'applicazione deve anche registrare i comandi di elaborazione video nel video procoessor nell'ordine in cui vengono eseguiti sulla GPU.</span><span class="sxs-lookup"><span data-stu-id="6bd52-175">The application must also record video processing commands against the video procoessor in the order that they are executed on the GPU.</span></span>

<span data-ttu-id="6bd52-176">Tutti gli argomenti di input e di output per le operazioni di elaborazione video sono organizzati in una struttura di argomenti di input, in [D3D12_VIDEO_PROCESS_INPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_process_input_stream_arguments)e in una struttura di argomenti di output, [D3D12_VIDEO_PROCESS_OUTPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_process_output_stream_arguments).</span><span class="sxs-lookup"><span data-stu-id="6bd52-176">All input and output arguments for the video processing operations are organized into an input argument structure, [D3D12_VIDEO_PROCESS_INPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_process_input_stream_arguments), and an output argument structure, [D3D12_VIDEO_PROCESS_OUTPUT_STREAM_ARGUMENTS](/windows/desktop/api/d3d12video/ns-d3d12video-d3d12_video_process_output_stream_arguments).</span></span> <span data-ttu-id="6bd52-177">L'applicazione deve chiamare [ID3D12VideoProcessCommandList::P rocessframes](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videoprocesscommandlist-processframes) per registrare l'operazione di elaborazione video che vuole eseguire.</span><span class="sxs-lookup"><span data-stu-id="6bd52-177">The application must call [ID3D12VideoProcessCommandList::ProcessFrames](/windows/desktop/api/d3d12video/nf-d3d12video-id3d12videoprocesscommandlist-processframes) to record the video processing operation it wants to execute.</span></span> 

<span data-ttu-id="6bd52-178">Quando viene registrato l'elenco di comandi, chiamare [ID3D12CommandQueue:: oggetti executecommandlist](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists) nella coda dei comandi video per inviare l'elaborazione del frame alla GPU.</span><span class="sxs-lookup"><span data-stu-id="6bd52-178">When the command list is recorded, call [ID3D12CommandQueue::ExecuteCommandLists](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists) on the video command queue to submit the frame processing to the GPU.</span></span>


## <a name="tiers"></a><span data-ttu-id="6bd52-179">Livelli</span><span class="sxs-lookup"><span data-stu-id="6bd52-179">Tiers</span></span>

<span data-ttu-id="6bd52-180">Il video Direct3D 12 definisce i livelli che raggruppano le funzionalità dei dispositivi hardware, in modo che l'app possa avere un minor numero di percorsi di codice per soddisfare l'ampia gamma di hardware.</span><span class="sxs-lookup"><span data-stu-id="6bd52-180">Direct3D 12 video defines tiers that group the capabilities of hardware devices, so that the app can have fewer code paths to cater to the variety of hardware.</span></span> <span data-ttu-id="6bd52-181">I livelli vengono specificati con l'enumerazione [D3D12_VIDEO_DECODE_TIER](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_decode_tier) .</span><span class="sxs-lookup"><span data-stu-id="6bd52-181">The tiers are specified with the [D3D12_VIDEO_DECODE_TIER](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_decode_tier) enumeration.</span></span>

<span data-ttu-id="6bd52-182">In tutti i livelli, saranno disponibili gli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="6bd52-182">In all the tiers, the following will be available:</span></span>

- <span data-ttu-id="6bd52-183">Non è necessaria la ricreazione del decodificatore per le modifiche della risoluzione.</span><span class="sxs-lookup"><span data-stu-id="6bd52-183">No need for decoder recreation on resolution changes.</span></span> <span data-ttu-id="6bd52-184">Per la modifica della risoluzione è necessario ricreare solo l'heap del decodificatore.</span><span class="sxs-lookup"><span data-stu-id="6bd52-184">Only the decoder heap needs to be recreated on resolution change.</span></span>
- <span data-ttu-id="6bd52-185">Tutti i frame di riferimento verranno gestiti dall'app.</span><span class="sxs-lookup"><span data-stu-id="6bd52-185">All reference frames will be managed by the app.</span></span> <span data-ttu-id="6bd52-186">Ciò consente al sistema di risparmiare memoria, in quanto non è necessario allocare il numero massimo di DPBs al momento della creazione del decodificatore in alcuni livelli e offre la flessibilità delle app negli scenari di modifica della risoluzione.</span><span class="sxs-lookup"><span data-stu-id="6bd52-186">This allows the system to save memory since we do not need to allocate the maximum number of DPBs at decoder creation time in some tiers, and gives apps flexibility in resolution changing scenarios.</span></span>

<span data-ttu-id="6bd52-187">Si noti che i livelli sono i superset.</span><span class="sxs-lookup"><span data-stu-id="6bd52-187">Note that the tiers are supersets.</span></span> <span data-ttu-id="6bd52-188">Un'app può decidere di eseguire il livello 1 e non usare le funzionalità di livello superiore, che è consentita, ma potrebbe non offrire prestazioni ottimali.</span><span class="sxs-lookup"><span data-stu-id="6bd52-188">An app may decide to do tier 1, and not use the higher level features, which is allowed but may not provide optimal performace.</span></span> <span data-ttu-id="6bd52-189">Per ulteriori informazioni sulle funzionalità associate a diversi livelli di livello, vedere [D3D12_VIDEO_DECODE_TIER](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_decode_tier).</span><span class="sxs-lookup"><span data-stu-id="6bd52-189">For more information on the capabilities associated with different tier levels, see [D3D12_VIDEO_DECODE_TIER](/windows/desktop/api/d3d12video/ne-d3d12video-d3d12_video_decode_tier).</span></span>

## <a name="reference-frames"></a><span data-ttu-id="6bd52-190">Frame di riferimento</span><span class="sxs-lookup"><span data-stu-id="6bd52-190">Reference frames</span></span>

<span data-ttu-id="6bd52-191">Con il video Direct3D 12, i frame di riferimento vengono passati in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="6bd52-191">With Direct3D 12 video, reference frames are passed explicitly.</span></span> <span data-ttu-id="6bd52-192">Questo consente di utilizzare in modo chiaro una matrice di trame o matrici di trama durante la decodifica dei frame.</span><span class="sxs-lookup"><span data-stu-id="6bd52-192">This allows for clear usage of array of textures or texture arrays when we are decoding frames.</span></span> <span data-ttu-id="6bd52-193">Non è necessario che l'app passi esattamente lo stesso handle di risorsa quando viene usato come riferimento; potrebbe, ad esempio, decidere di copiare una risorsa in un'altra e quindi passare la copia invece di quella originale.</span><span class="sxs-lookup"><span data-stu-id="6bd52-193">The app is not required to pass the exact same resource handle when using it as a reference; it may, for instance, decide to copy one resource to another and then pass the copy instead of the original one.</span></span> <span data-ttu-id="6bd52-194">Gli indici DXVA *RefFrameList* e *CurrPic* vengono comunque usati dal driver per archiviare i dati rilevanti per ogni frame decodificato.</span><span class="sxs-lookup"><span data-stu-id="6bd52-194">The DXVA *RefFrameList* and *CurrPic* indices are still used by the driver to store relevant data for each decoded frame.</span></span>


## <a name="directx-12-fences"></a><span data-ttu-id="6bd52-195">Recinzioni DirectX 12</span><span class="sxs-lookup"><span data-stu-id="6bd52-195">DirectX 12 fences</span></span>

<span data-ttu-id="6bd52-196">In DirectX 12, l'app è responsabile della sincronizzazione dell'accesso ai propri buffer.</span><span class="sxs-lookup"><span data-stu-id="6bd52-196">In DirectX 12, the app is responsible for synchronizing the access to their buffers.</span></span> <span data-ttu-id="6bd52-197">Per il caso di decodifica, sarà necessario aggiungere i limiti ai buffer di input e ai buffer di output.</span><span class="sxs-lookup"><span data-stu-id="6bd52-197">For the decoding case, there will be the need for adding fences to the input buffers and to the output buffers.</span></span> <span data-ttu-id="6bd52-198">A ogni limite è associato un valore e vengono usati per la sincronizzazione dei motori della CPU e dell'hardware.</span><span class="sxs-lookup"><span data-stu-id="6bd52-198">Each fence has a value associated with it, and are used for synchronization of the CPU and the hardware engines.</span></span> <span data-ttu-id="6bd52-199">Per altre informazioni, vedere [uso delle barriere delle risorse per sincronizzare gli Stati delle risorse in Direct3D 12](/windows/desktop/direct3d12/using-resource-barriers-to-synchronize-resource-states-in-direct3d-12).</span><span class="sxs-lookup"><span data-stu-id="6bd52-199">For more information, see [Using Resource Barriers to Synchronize Resource States in Direct3D 12](/windows/desktop/direct3d12/using-resource-barriers-to-synchronize-resource-states-in-direct3d-12).</span></span>

<span data-ttu-id="6bd52-200">Un'implementazione tipica avrà una recinzione per ogni buffer di input.</span><span class="sxs-lookup"><span data-stu-id="6bd52-200">A typical implementation will have a fence for each input buffer.</span></span> <span data-ttu-id="6bd52-201">Nel caso dei buffer di input, è possibile che il buffer sia disponibile prima di eseguire l'intero processo di decodifica.</span><span class="sxs-lookup"><span data-stu-id="6bd52-201">In the case of input buffers, it is possible that the buffer may be available before the whole decoding process is done.</span></span> <span data-ttu-id="6bd52-202">Il sistema ignorerà questo caso e presuppone che il buffer di input sia disponibile al termine della decodifica.</span><span class="sxs-lookup"><span data-stu-id="6bd52-202">The system will ignore this case and assume that the input buffer is available when decoding is done.</span></span>
<span data-ttu-id="6bd52-203">Un'implementazione di in genere include anche una recinzione per ogni buffer di output.</span><span class="sxs-lookup"><span data-stu-id="6bd52-203">An implementation will also usually have a fence for each output buffer.</span></span> <span data-ttu-id="6bd52-204">Nel caso di invio dell'output al compositor, ad esempio, è necessario un limite che viene segnalato al termine della presentazione del frame, a indicare che l'output è nuovamente disponibile per il decodificatore.</span><span class="sxs-lookup"><span data-stu-id="6bd52-204">In the case of sending the output to the compositor, for instance, a fence is needed that is signaled when that presentation of that frame is finally done, indicating that the output is again available for the decoder.</span></span>


## <a name="related-topics"></a><span data-ttu-id="6bd52-205">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="6bd52-205">Related topics</span></span>

<dl> <span data-ttu-id="6bd52-206"><dt>API video Direct3D 
[12](direct3d-12-video-apis.md) 
 [Guida alla programmazione di Media Foundation](media-foundation-programming-guide.md)
</dt> </span><span class="sxs-lookup"><span data-stu-id="6bd52-206"><dt>
[Direct3D 12 Video APIs](direct3d-12-video-apis.md)
[Media Foundation Programming Guide](media-foundation-programming-guide.md)
</dt> </span></span></dl>

 

 
