---
description: Questo argomento descrive il modo in cui l'origine del sequencer gestisce i tempi di presentazione durante la riproduzione.
ms.assetid: 0d095e25-5ccf-4319-8767-07b417ed7ee8
title: Tempi di presentazione sequenza
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d17f5b0ff4bd6f0cfee2b1b461d6fbd11bdbf0fb
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104527835"
---
# <a name="sequence-presentation-times"></a><span data-ttu-id="6e7d7-103">Tempi di presentazione sequenza</span><span class="sxs-lookup"><span data-stu-id="6e7d7-103">Sequence Presentation Times</span></span>

<span data-ttu-id="6e7d7-104">Questo argomento descrive il modo in cui l' [origine del sequencer](sequencer-source.md) gestisce i tempi di presentazione durante la riproduzione.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-104">This topic describes how the [Sequencer Source](sequencer-source.md) handles presentation times during playback.</span></span>

## <a name="overview"></a><span data-ttu-id="6e7d7-105">Panoramica</span><span class="sxs-lookup"><span data-stu-id="6e7d7-105">Overview</span></span>

<span data-ttu-id="6e7d7-106">L'origine di Sequencer supporta due modalità diverse: sequenze di playlist e sequenze di modifica.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-106">The sequencer source supports two different modes: playlist sequences and editing sequences.</span></span>

<span data-ttu-id="6e7d7-107">In una sequenza di modifica, l'applicazione specifica la durata di ogni segmento in anticipo, prima di avviare la riproduzione.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-107">In an editing sequence, the application specifies the duration of each segment in advance, before starting playback.</span></span> <span data-ttu-id="6e7d7-108">In una sequenza di playlist, l'applicazione non specifica la durata in anticipo.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-108">In a playlist sequence, the application does not specify the duration in advance.</span></span> <span data-ttu-id="6e7d7-109">(Infatti, la durata potrebbe non essere nota).</span><span class="sxs-lookup"><span data-stu-id="6e7d7-109">(In fact, the duration might not be known.)</span></span>

<span data-ttu-id="6e7d7-110">In entrambi i casi, è possibile specificare l'ora di inizio e di fine del supporto del segmento.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-110">In both cases, you can specify a segment's media start and media stop time.</span></span> <span data-ttu-id="6e7d7-111">Queste volte specificano la posizione nel file di origine in cui inizia e termina il segmento.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-111">These times specify the position in the source file where the segment begins and ends.</span></span> <span data-ttu-id="6e7d7-112">Si supponga, ad esempio, che il file di origine sia lungo 90 secondi.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-112">For example, suppose that the source file is 90 seconds long.</span></span> <span data-ttu-id="6e7d7-113">Se si desidera tagliare i primi 10 secondi e gli ultimi 10 secondi, è necessario specificare i valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="6e7d7-113">If you wanted to trim the first 10 seconds and the last 10 seconds, you would specify the following values:</span></span>

-   <span data-ttu-id="6e7d7-114">Inizio del supporto: 10 secondi</span><span class="sxs-lookup"><span data-stu-id="6e7d7-114">Media start: 10 seconds</span></span>
-   <span data-ttu-id="6e7d7-115">Arresto supporto: 80 secondi</span><span class="sxs-lookup"><span data-stu-id="6e7d7-115">Media stop: 80 seconds</span></span>

<span data-ttu-id="6e7d7-116">Per specificare l'ora di inizio del supporto, impostare l'attributo [MF \_ TOPONODE \_ MEDIASTART](mf-toponode-mediastart-attribute.md) nel nodo di origine.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-116">To specify the media start time, set the [MF\_TOPONODE\_MEDIASTART](mf-toponode-mediastart-attribute.md) attribute on the source node.</span></span> <span data-ttu-id="6e7d7-117">Per specificare l'ora di arresto del supporto, impostare l'attributo [MF \_ TOPONODE \_ MEDIASTOP](mf-toponode-mediastop-attribute.md) nel nodo di origine.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-117">To specify the media stop time, set the [MF\_TOPONODE\_MEDIASTOP](mf-toponode-mediastop-attribute.md) attribute on the source node.</span></span>

<span data-ttu-id="6e7d7-118">Per creare una sequenza di modifica, impostare l'attributo dell' [ \_ \_ \_ ora globale della sessione MF](mf-session-global-time-attribute.md) quando si crea la sessione multimediale.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-118">To create an editing sequence, set the [MF\_SESSION\_GLOBAL\_TIME](mf-session-global-time-attribute.md) attribute when you create the Media Session.</span></span> <span data-ttu-id="6e7d7-119">In caso contrario, la sessione multimediale prevede sequenze di playlist.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-119">Otherwise, the Media Session expects playlist sequences.</span></span> <span data-ttu-id="6e7d7-120">In una sequenza di modifica, ogni topologia del segmento deve avere l'attributo [ \_ \_ PROJECTSTART della topologia MF](mf-topology-projectstart-attribute.md) e l'attributo [ \_ \_ PROJECTSTOP della topologia MF](mf-topology-projectstop-attribute.md) .</span><span class="sxs-lookup"><span data-stu-id="6e7d7-120">In an editing sequence, every segment topology must have the [MF\_TOPOLOGY\_PROJECTSTART](mf-topology-projectstart-attribute.md) attribute and the [MF\_TOPOLOGY\_PROJECTSTOP](mf-topology-projectstop-attribute.md) attribute.</span></span>

## <a name="playlist-sequences"></a><span data-ttu-id="6e7d7-121">Sequenze di playlist</span><span class="sxs-lookup"><span data-stu-id="6e7d7-121">Playlist Sequences</span></span>

<span data-ttu-id="6e7d7-122">In una sequenza di playlist, il clock di presentazione inizia da zero e continua tra i limiti del segmento.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-122">In a playlist sequence, the presentation clock starts at zero and continues across segment boundaries.</span></span> <span data-ttu-id="6e7d7-123">Le origini native forniscono campioni con timestamp uguali al tempo dei supporti.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-123">The native sources deliver samples with time stamps equal to the media time.</span></span> <span data-ttu-id="6e7d7-124">La pipeline converte i timestamp nell'ora di presentazione corretta, come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="6e7d7-124">The pipeline converts the time stamps to the correct presentation time as follows:</span></span>

-   <span data-ttu-id="6e7d7-125">Nuovo timestamp = tempo supporto + offset-avvio supporti</span><span class="sxs-lookup"><span data-stu-id="6e7d7-125">New time stamp = media time + offset − media start</span></span>

<span data-ttu-id="6e7d7-126">Il valore di *offset* è l'ora di presentazione in cui è terminato il segmento precedente.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-126">The value of *offset* is the presentation time at which the previous segment ended.</span></span> <span data-ttu-id="6e7d7-127">Per il primo segmento, l'offset è zero.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-127">For the first segment, the offset is zero.</span></span> <span data-ttu-id="6e7d7-128">Ecco due esempi di come vengono calcolate le conversioni dei timestamp:</span><span class="sxs-lookup"><span data-stu-id="6e7d7-128">Here are two examples of how these time-stamp conversions are calculated:</span></span>

-   <span data-ttu-id="6e7d7-129">Esempio 1: si supponga che il primo segmento (S1) sia lungo 10 secondi e che il secondo segmento (S2) abbia un'ora di inizio del supporto pari a zero.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-129">Example 1: Suppose the first segment (S1) is 10 seconds long, and the second segment (S2) has a media start time of zero.</span></span> <span data-ttu-id="6e7d7-130">L'origine nativa usa il tempo dei supporti per i timestamp, quindi il primo campione da S2 ha un timestamp pari a zero.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-130">The native source uses the media time for its time stamps, so the first sample from S2 has a time stamp of zero.</span></span> <span data-ttu-id="6e7d7-131">L'offset è 10 secondi (la durata di S1), quindi l'indicatore di tempo modificato è: 0 + 10 − 0 = 10 secondi.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-131">The offset is 10 seconds (the duration of S1), so the adjusted time stamp is:0 + 10 − 0 = 10 seconds.</span></span>
-   <span data-ttu-id="6e7d7-132">Esempio 2: supporre che il segmento S1 abbia una lunghezza di 10 secondi e che S2 abbia un'ora di inizio media di 5 secondi.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-132">Example 2: Suppose segment S1 is 10 seconds long, and S2 has a media start time of 5 seconds.</span></span> <span data-ttu-id="6e7d7-133">Il primo esempio da S2 ha un timestamp di 5 secondi (tempo medio).</span><span class="sxs-lookup"><span data-stu-id="6e7d7-133">The first sample from S2 has a time stamp of 5 seconds (media time).</span></span> <span data-ttu-id="6e7d7-134">L'offset è di 10 secondi, quindi l'indicatore di ora modificato è: 5 + 10 − 5 = 10 secondi.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-134">The offset is 10 seconds, so the adjusted time stamp is:5 + 10 − 5 = 10 seconds.</span></span>

<span data-ttu-id="6e7d7-135">Tutti i componenti della pipeline a valle dei nodi di origine ricevono esempi con i timestamp regolati.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-135">All pipeline components downstream from the source nodes receive samples with the adjusted time stamps.</span></span> <span data-ttu-id="6e7d7-136">I nodi di origine in una topologia possono avere orari di avvio multimediali diversi, quindi le rettifiche vengono calcolate separatamente per ogni ramo della topologia.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-136">The source nodes in a topology can have different media start times, so the adjustments are calculated separately for each branch of the topology.</span></span>

<span data-ttu-id="6e7d7-137">Quando la presentazione passa al segmento successivo, il clock di presentazione non viene arrestato o reimpostato e il tempo di presentazione aumenta in modo progressivo.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-137">When the presentation switches to the next segment, the presentation clock does not stop or reset, and the presentation time increases monotonically.</span></span> <span data-ttu-id="6e7d7-138">Prima dell'avvio di un nuovo segmento, la sessione multimediale invia all'applicazione un evento [MESessionNotifyPresentationTime](mesessionnotifypresentationtime.md) .</span><span class="sxs-lookup"><span data-stu-id="6e7d7-138">Before a new segment starts, the Media Session sends the application an [MESessionNotifyPresentationTime](mesessionnotifypresentationtime.md) event.</span></span> <span data-ttu-id="6e7d7-139">L'evento specifica l'ora di inizio del segmento, relativa al clock di presentazione e il valore dell'offset.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-139">The event specifies the starting time of the segment, relative to the presentation clock, and the value of the offset.</span></span> <span data-ttu-id="6e7d7-140">Quando viene avviato un nuovo segmento, la pipeline chiama [**Start**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasource-start) sull'origine del sequencer con il valore VT \_ Empty.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-140">When a new segment starts, the pipeline calls [**Start**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasource-start) on the sequencer source with the value VT\_EMPTY.</span></span> <span data-ttu-id="6e7d7-141">L'origine di Sequencer Invia un evento [MESourceStarted](mesourcestarted.md) senza ora di inizio.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-141">The sequencer source sends an [MESourceStarted](mesourcestarted.md) event with no start time.</span></span>

<span data-ttu-id="6e7d7-142">Per la ricerca, l'applicazione specifica un identificatore di segmento più un offset temporale all'interno del segmento.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-142">To seek, the application specifies a segment identifier plus a time offset within the segment.</span></span> <span data-ttu-id="6e7d7-143">Dopo la ricerca, il clock di presentazione inizia in corrispondenza dell'offset del *segmento* .</span><span class="sxs-lookup"><span data-stu-id="6e7d7-143">After the seek, the presentation clock starts at the *segment* offset.</span></span> <span data-ttu-id="6e7d7-144">Di seguito è riportato un esempio del funzionamento del processo:</span><span class="sxs-lookup"><span data-stu-id="6e7d7-144">Here is an example of how that process works:</span></span>

-   <span data-ttu-id="6e7d7-145">Esempio 3: l'applicazione cerca il segmento S3, con un offset del segmento di 10 secondi.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-145">Example 3: The application seeks to segment S3, with a segment offset of 10 seconds.</span></span> <span data-ttu-id="6e7d7-146">Il clock di presentazione inizia a 10 secondi (offset del segmento).</span><span class="sxs-lookup"><span data-stu-id="6e7d7-146">The presentation clock starts at 10 seconds (the segment offset).</span></span> <span data-ttu-id="6e7d7-147">L'offset non include la durata dei segmenti S1 e S2.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-147">The offset does not include the duration of segments S1 and S2.</span></span> <span data-ttu-id="6e7d7-148">L'origine del sequencer Invia un evento [MESourceStarted](mesourcestarted.md) con un'ora di inizio uguale all'offset del segmento, 10 secondi.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-148">The sequencer source sends an [MESourceStarted](mesourcestarted.md) event with a start time equal to the segment offset, 10 seconds.</span></span>

<span data-ttu-id="6e7d7-149">Dopo una ricerca, se la riproduzione continua fino al segmento successivo, la transizione funziona esattamente come gli esempi precedenti, ad eccezione del fatto che l'offset non include i segmenti ignorati.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-149">After a seek, if playback continues to the next segment, the transition works just like the previous examples, except that the offset does not include the skipped segments.</span></span>

<span data-ttu-id="6e7d7-150">Di seguito sono riportati alcuni altri dettagli che influiscono sul timestamp degli esempi:</span><span class="sxs-lookup"><span data-stu-id="6e7d7-150">Here are some further details that affect how samples are time stamped:</span></span>

-   <span data-ttu-id="6e7d7-151">I decodificatori potrebbero richiedere dati oltre l'ora di arresto del supporto.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-151">Decoders may need data beyond the media stop time.</span></span> <span data-ttu-id="6e7d7-152">La pipeline estrae il maggior quantità di dati dall'origine come richiesto dal decodificatore e quindi taglia gli esempi di output del decodificatore.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-152">The pipeline pulls as much data from the source as the decoder requires, and then trims the decoder's output samples.</span></span>
-   <span data-ttu-id="6e7d7-153">Le trasformazioni potrebbero memorizzare dati nel buffer.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-153">Transforms might buffer data.</span></span> <span data-ttu-id="6e7d7-154">Ad esempio, potrebbe essere necessario un effetto audio.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-154">For example, an audio effect might need to do this.</span></span> <span data-ttu-id="6e7d7-155">Quando un segmento termina, il timestamp dell'ultimo campione dalla trasformazione è precedente alla fine del segmento, perché la trasformazione trattiene alcuni dati.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-155">When a segment ends, the time stamp on the last sample from the transform is earlier than the end of the segment, because the transform is holding back some data.</span></span> <span data-ttu-id="6e7d7-156">Quando viene avviato il segmento successivo, il timestamp del primo campione è leggermente precedente all'inizio del segmento.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-156">When the next segment starts, the time stamp on the first sample is slightly earlier than the start of the segment.</span></span> <span data-ttu-id="6e7d7-157">Non vi è alcun gap negli indicatori temporali, quindi i dati che raggiungono il sink multimediale sono continui.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-157">There is no gap in the time stamps, so the data that reaches the media sink is continuous.</span></span> <span data-ttu-id="6e7d7-158">Al termine del segmento finale, la pipeline svuota la trasformazione, quindi non viene perso alcun dato.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-158">When the final segment ends, the pipeline drains the transform, so no data is lost.</span></span>
-   <span data-ttu-id="6e7d7-159">Potrebbe essere necessario avviare l'origine leggermente prima dell'ora di inizio del supporto, per prelevare il fotogramma chiave precedente.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-159">The source may need to start slightly earlier than the media start time, to pick up the previous key frame.</span></span> <span data-ttu-id="6e7d7-160">Quindi, dopo la regolazione, il primo campione potrebbe avere un tempo di presentazione negativo.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-160">Therefore, after the adjustment, the first sample might have a negative presentation time.</span></span>

## <a name="editing-sequences"></a><span data-ttu-id="6e7d7-161">Modifica di sequenze</span><span class="sxs-lookup"><span data-stu-id="6e7d7-161">Editing Sequences</span></span>

<span data-ttu-id="6e7d7-162">In una sequenza di modifica, l'applicazione specifica i limiti del segmento in anticipo, impostando la topologia [**MF \_ \_ PROJECTSTART**](mf-topology-projectstart-attribute.md) e [**MF \_ topologia \_ PROJECTSTOP**](mf-topology-projectstop-attribute.md) attributi.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-162">In an editing sequence, the application specifies the segment boundaries in advance, by setting the [**MF\_TOPOLOGY\_PROJECTSTART**](mf-topology-projectstart-attribute.md) and [**MF\_TOPOLOGY\_PROJECTSTOP**](mf-topology-projectstop-attribute.md) attributes.</span></span> <span data-ttu-id="6e7d7-163">La pipeline calcola le regolazioni per gli indicatori temporali nello stesso modo di una sequenza di playlist:</span><span class="sxs-lookup"><span data-stu-id="6e7d7-163">The pipeline calculates adjustments for the time stamps in almost the same way as for a playlist sequence:</span></span>

-   <span data-ttu-id="6e7d7-164">Per l'offset, viene usato il valore della [**\_ topologia MF \_ PROJECTSTART**](mf-topology-projectstart-attribute.md), invece di usare l'estremità osservata del segmento.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-164">For the offset, it uses the value of [**MF\_TOPOLOGY\_PROJECTSTART**](mf-topology-projectstart-attribute.md), instead of using the observed end of the segment.</span></span>

-   <span data-ttu-id="6e7d7-165">Per la ricerca, l'offset usa un valore uguale al valore [**\_ \_ PROJECTSTART della topologia MF**](mf-topology-projectstart-attribute.md) del segmento più l'offset del segmento.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-165">For seeking, the offset uses a value equal to the segment's [**MF\_TOPOLOGY\_PROJECTSTART**](mf-topology-projectstart-attribute.md) value plus the segment offset.</span></span>

<span data-ttu-id="6e7d7-166">Pertanto, l'ora di presentazione in una sequenza di modifica è sempre relativa all'inizio della presentazione, anche se l'applicazione cerca un altro segmento.</span><span class="sxs-lookup"><span data-stu-id="6e7d7-166">Therefore, the presentation time in an editing sequence is always relative to the start of the presentation, even if the application seeks to another segment.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6e7d7-167">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="6e7d7-167">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6e7d7-168">Sessione multimediale</span><span class="sxs-lookup"><span data-stu-id="6e7d7-168">Media Session</span></span>](media-session.md)
</dt> <dt>

[<span data-ttu-id="6e7d7-169">Origine sequencer</span><span class="sxs-lookup"><span data-stu-id="6e7d7-169">Sequencer Source</span></span>](sequencer-source.md)
</dt> </dl>

 

 



