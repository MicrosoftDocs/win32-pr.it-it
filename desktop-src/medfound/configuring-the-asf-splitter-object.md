---
description: Configurazione dell'oggetto Splitter ASF
ms.assetid: 8e2ba659-e1f6-42be-afd6-21fc841dc8d3
title: Configurazione dell'oggetto Splitter ASF
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 14f27885e602dd52012808d330d997f9b7a7e983
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104127958"
---
# <a name="configuring-the-asf-splitter-object"></a><span data-ttu-id="0cbb7-103">Configurazione dell'oggetto Splitter ASF</span><span class="sxs-lookup"><span data-stu-id="0cbb7-103">Configuring the ASF Splitter Object</span></span>

<span data-ttu-id="0cbb7-104">L'oggetto *splitter* ASF è un oggetto livello WMContainer che analizza l'oggetto dati ASF di un file di formato Advanced Systems (ASF).</span><span class="sxs-lookup"><span data-stu-id="0cbb7-104">The ASF *splitter* object is a WMContainer layer object that parses the ASF Data Object of an Advanced Systems Format (ASF) file.</span></span> <span data-ttu-id="0cbb7-105">Dopo la creazione e l'inizializzazione della barra di divisione per analizzare l'oggetto dati ASF di un file multimediale, è necessario configurare la barra di divisione in modo da generare esempi per flussi specifici.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-105">After the splitter is created and initialized to parse the ASF Data Object of a media file, the splitter must be configured to generate samples for specific streams.</span></span> <span data-ttu-id="0cbb7-106">Chiamare [**IMFASFSplitter:: SelectStreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-selectstreams) per selezionare i flussi richiesti.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-106">Call [**IMFASFSplitter::SelectStreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-selectstreams) to select the required streams.</span></span>

<span data-ttu-id="0cbb7-107">Facoltativamente, un'applicazione può anche configurarla per generare esempi in ordine inverso o generare esempi per il contenuto protetto.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-107">Optionally, an application can also configure it to generate samples in reverse order or generate samples for protected content.</span></span> <span data-ttu-id="0cbb7-108">Per impostare queste opzioni, chiamare [**IMFASFSplitter:: Seflags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-setflags) e passare la combinazione bit per bit obbligatoria dei flag supportati.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-108">To set these options, call [**IMFASFSplitter::SetFlags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-setflags) and pass the required bitwise combination of the supported flags.</span></span> <span data-ttu-id="0cbb7-109">Prima di chiamare questo metodo, il client deve completare correttamente la chiamata [**IMFASFSplitter:: Initialize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-initialize) ; in caso contrario, i **flag** non riusciranno con il codice di errore **MF \_ E \_ non \_ inizializzato** .</span><span class="sxs-lookup"><span data-stu-id="0cbb7-109">Before calling this method, the client must complete the [**IMFASFSplitter::Initialize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-initialize) call successfully; otherwise, **SetFlags** fails with **MF\_E\_NOT\_INITIALIZED** error code.</span></span> <span data-ttu-id="0cbb7-110">Per informazioni sull'inizializzazione della barra di divisione, vedere [Creating the ASF Splitter Object](creating-the-asf-splitter-object.md).</span><span class="sxs-lookup"><span data-stu-id="0cbb7-110">For information about initializing the splitter, see [Creating the ASF Splitter Object](creating-the-asf-splitter-object.md).</span></span>

<span data-ttu-id="0cbb7-111">Per verificare se questo flag è attualmente impostato sulla barra di divisione, chiamare [**IMFASFSplitter:: GetFlags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-getflags).</span><span class="sxs-lookup"><span data-stu-id="0cbb7-111">To check whether this flag is currently set on the splitter, call [**IMFASFSplitter::GetFlags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-getflags).</span></span>

## <a name="selecting-streams-for-parsing"></a><span data-ttu-id="0cbb7-112">Selezione dei flussi per l'analisi</span><span class="sxs-lookup"><span data-stu-id="0cbb7-112">Selecting Streams for Parsing</span></span>

<span data-ttu-id="0cbb7-113">Durante il processo di inizializzazione tramite la chiamata a [**IMFASFSplitter:: Initialize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-initialize) , la barra di divisione rileva il numero di flussi e gli identificatori di flusso nel file ASF.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-113">During the initialization process through [**IMFASFSplitter::Initialize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-initialize) call, the splitter detects the number of streams and the stream identifiers in the ASF file.</span></span> <span data-ttu-id="0cbb7-114">Per impostazione predefinita, nessun flusso viene selezionato dalla barra di divisione.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-114">By default, no streams are selected by the splitter.</span></span> <span data-ttu-id="0cbb7-115">L'applicazione deve selezionare i flussi chiamando [**IMFASFSplitter:: SelectStreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-selectstreams).</span><span class="sxs-lookup"><span data-stu-id="0cbb7-115">The application must select the streams by calling [**IMFASFSplitter::SelectStreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-selectstreams).</span></span> <span data-ttu-id="0cbb7-116">Questo metodo accetta una matrice di numeri di flusso.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-116">This method takes an array of stream numbers.</span></span> <span data-ttu-id="0cbb7-117">Per ottenere il numero di flusso per un flusso, chiamare [**IMFASFProfile:: GetStream**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfprofile-getstream) nel profilo ASF o chiamare [**IMFStreamDescriptor:: GetStreamIdentifier**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamdescriptor-getstreamidentifier) sul descrittore del flusso.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-117">To get the stream number for a stream, call [**IMFASFProfile::GetStream**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfprofile-getstream) on the ASF profile or call [**IMFStreamDescriptor::GetStreamIdentifier**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamdescriptor-getstreamidentifier) on the stream descriptor.</span></span> <span data-ttu-id="0cbb7-118">È possibile ottenere sia il profilo ASF che il descrittore di flusso dall'oggetto ContentInfo. Se il client passa un numero di flusso non riconosciuto dalla barra di divisione, l'operazione ha esito negativo con un errore **MF \_ E \_ INVALIDSTREAMNUMBER** .</span><span class="sxs-lookup"><span data-stu-id="0cbb7-118">(You can obtain both the ASF profile and the stream descriptor from the ContentInfo object.) If the client passes a stream number that is not recognized by the splitter, it fails with a **MF\_E\_INVALIDSTREAMNUMBER** error.</span></span>

<span data-ttu-id="0cbb7-119">La chiamata di [**SelectStreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-selectstreams) Cancella le selezioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-119">Calling [**SelectStreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-selectstreams) clears the previous selections.</span></span> <span data-ttu-id="0cbb7-120">Qualsiasi flusso non specificato nella matrice non è selezionato.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-120">Any stream that is not specified in the array is not selected.</span></span> <span data-ttu-id="0cbb7-121">Per ottenere un elenco dei flussi attualmente selezionati, chiamare [**IMFASFSplitter:: GetSelectedStreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-getselectedstreams).</span><span class="sxs-lookup"><span data-stu-id="0cbb7-121">To get a list of streams that are currently selected, call [**IMFASFSplitter::GetSelectedStreams**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-getselectedstreams).</span></span> <span data-ttu-id="0cbb7-122">Questo metodo accetta un puntatore a una matrice, che il metodo compila con i numeri dei flussi.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-122">This method takes a pointer to an array, which the method fills with the stream numbers.</span></span> <span data-ttu-id="0cbb7-123">Se la dimensione della matrice è inferiore al numero di flussi selezionati, il metodo ha esito negativo con l'errore **MF \_ E \_ BUFFERTOOSMALL** .</span><span class="sxs-lookup"><span data-stu-id="0cbb7-123">If the array size is less than the number of selected streams, the method fails with the **MF\_E\_BUFFERTOOSMALL** error.</span></span> <span data-ttu-id="0cbb7-124">In questo caso, il metodo restituisce il numero di flussi selezionati nel parametro *pwNumStreams* .</span><span class="sxs-lookup"><span data-stu-id="0cbb7-124">In this case, the method returns the number of selected streams in the *pwNumStreams* parameter.</span></span> <span data-ttu-id="0cbb7-125">È quindi possibile usare questo numero per allocare una matrice delle dimensioni corrette e chiamare nuovamente il metodo.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-125">You can then use this number to allocate an array of the correct size and call the method again.</span></span>

<span data-ttu-id="0cbb7-126">Per un esempio di codice, vedere "selezionare un flusso per l'analisi" in [esercitazione: lettura di un file ASF](tutorial--reading-an-asf-file.md).</span><span class="sxs-lookup"><span data-stu-id="0cbb7-126">For example code, see "Select a Stream for Parsing" in [Tutorial: Reading an ASF File](tutorial--reading-an-asf-file.md).</span></span>

## <a name="reverse-playback-setting"></a><span data-ttu-id="0cbb7-127">Impostazione della riproduzione inversa</span><span class="sxs-lookup"><span data-stu-id="0cbb7-127">Reverse Playback Setting</span></span>

<span data-ttu-id="0cbb7-128">Durante il processo di inizializzazione della barra di divisione, determina se il contenuto ASF supporta la riproduzione inversa.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-128">During the initialization process of the splitter, it determines if the ASF content supports reverse playback.</span></span> <span data-ttu-id="0cbb7-129">In caso contrario, la barra di divisione può essere configurata in modo da generare esempi in ordine inverso impostando il flag **MFASF \_ splitter \_ inverso** .</span><span class="sxs-lookup"><span data-stu-id="0cbb7-129">If it does, the splitter can be configured to generate samples in reverse order by setting the **MFASF\_SPLITTER\_REVERSE** flag.</span></span> <span data-ttu-id="0cbb7-130">Se il contenuto non supporta la riproduzione inversa, [**IMFASFSplitter:: Seflags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-setflags) restituisce **MF \_ E \_ INVALIDREQUEST**, ma il flag viene impostato sulla barra di divisione.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-130">If the content does not support reverse playback, the [**IMFASFSplitter::SetFlags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-setflags) returns **MF\_E\_INVALIDREQUEST**, but the flag is set on the splitter.</span></span>

<span data-ttu-id="0cbb7-131">Se la barra di divisione è configurata in modo da essere analizzata nella direzione inversa, la barra di divisione inizia sempre l'analisi alla fine del buffer che contiene l'oggetto dati ASF.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-131">If the splitter is configured to parse in the reverse direction, then the splitter always starts parsing at the end of the buffer that contains the ASF Data Object.</span></span> <span data-ttu-id="0cbb7-132">Pertanto, per l'analisi inversa dell'offset dei dati e la lunghezza dei dati da analizzare, è necessario impostare in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-132">Therefore, for reverse parsing the data offset and the length of the data to parse must be set appropriately.</span></span> <span data-ttu-id="0cbb7-133">Per informazioni sull'impostazione dei valori corretti, vedere [generazione di esempi di flusso da un oggetto dati ASF esistente](generating-stream-samples-from-an-existing-asf-data-object.md).</span><span class="sxs-lookup"><span data-stu-id="0cbb7-133">For information about setting the correct values, see [Generating Stream Samples from an Existing ASF Data Object](generating-stream-samples-from-an-existing-asf-data-object.md).</span></span>

## <a name="protected-content-setting"></a><span data-ttu-id="0cbb7-134">Impostazione del contenuto protetto</span><span class="sxs-lookup"><span data-stu-id="0cbb7-134">Protected Content Setting</span></span>

<span data-ttu-id="0cbb7-135">La barra di divisione può essere configurata per funzionare con il contenuto di crittografia a livello di pacchetto impostando la **\_ barra di divisione MFASF \_ WMDRM** tramite [**IMFASFSplitter:: Flags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-setflags).</span><span class="sxs-lookup"><span data-stu-id="0cbb7-135">The splitter can be configured to work with packet-level encryption content by setting the **MFASF\_SPLITTER\_WMDRM** through [**IMFASFSplitter::SetFlags**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfsplitter-setflags).</span></span> <span data-ttu-id="0cbb7-136">In questo modo viene indicato alla barra di divisione di fornire esempi per il contenuto protetto da Windows Media Digital Rights Management (DRM).</span><span class="sxs-lookup"><span data-stu-id="0cbb7-136">This instructs the splitter to deliver samples for content that is protected by Windows Media Digital Rights Management (DRM).</span></span> <span data-ttu-id="0cbb7-137">Quando questo flag è impostato, gli esempi generati dal separatore contengono informazioni necessarie per decrittografare i dati multimediali e ricostruire i frame, ad esempio l'attributo [**\_ PacketCrossOffsets di MFSampleExtension**](mfsampleextension-packetcrossoffsets-attribute.md) .</span><span class="sxs-lookup"><span data-stu-id="0cbb7-137">When this flag is set, the samples generated by the splitter contain information required to decrypt media data and reconstruct the frames, such as the [**MFSampleExtension\_PacketCrossOffsets**](mfsampleextension-packetcrossoffsets-attribute.md) attribute.</span></span> <span data-ttu-id="0cbb7-138">Questo attributo è un BLOB che contiene una matrice di **DWORD** s.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-138">This attribute is a blob that contains an array of **DWORD** s.</span></span> <span data-ttu-id="0cbb7-139">Ogni **DWORD** fornisce i limiti del payload per il frame rispetto all'inizio del frame.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-139">Each **DWORD** provides you the payload boundaries for the frame relative to the beginning of the frame.</span></span> <span data-ttu-id="0cbb7-140">Se questo attributo non è presente, il frame è contenuto in un singolo payload.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-140">If this attribute is not present, the frame is contained in a single payload.</span></span> <span data-ttu-id="0cbb7-141">In genere, gli esempi generati dal separatore contengono più buffer multimediali, l'applicazione può copiare tutti i buffer in un buffer contiguo chiamando [**IMFSample:: ConvertToContiguousBuffer**](/windows/desktop/api/mfobjects/nf-mfobjects-imfsample-converttocontiguousbuffer).</span><span class="sxs-lookup"><span data-stu-id="0cbb7-141">Typically, the samples generated by the splitter contain multiple media buffers, the application can copy all the buffers into one contiguous buffer by calling [**IMFSample::ConvertToContiguousBuffer**](/windows/desktop/api/mfobjects/nf-mfobjects-imfsample-converttocontiguousbuffer).</span></span> <span data-ttu-id="0cbb7-142">Il buffer risultante contiene il frame e il valore dell'attributo contiene gli offset in questo buffer.</span><span class="sxs-lookup"><span data-stu-id="0cbb7-142">The resulting buffer contains the frame and the attribute value contains offsets into this buffer.</span></span>

## <a name="related-topics"></a><span data-ttu-id="0cbb7-143">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="0cbb7-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0cbb7-144">Barra di divisione ASF</span><span class="sxs-lookup"><span data-stu-id="0cbb7-144">ASF Splitter</span></span>](asf-splitter.md)
</dt> </dl>

 

 



