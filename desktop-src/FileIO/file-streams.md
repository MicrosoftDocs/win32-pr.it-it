---
description: Nel file system NTFS i flussi contengono i dati scritti in un file e che forniscono altre informazioni su un file rispetto agli attributi e alle proprietà.
ms.assetid: 41dda6f1-a6d1-4e76-94f3-a72f9e491bee
title: Flussi di file (file system locali)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4a934a51225a886e3d5a7de4d9e1e91900fab460
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103755162"
---
# <a name="file-streams-local-file-systems"></a><span data-ttu-id="3eca6-103">Flussi di file (file system locali)</span><span class="sxs-lookup"><span data-stu-id="3eca6-103">File Streams (Local File Systems)</span></span>

<span data-ttu-id="3eca6-104">Un flusso è una sequenza di byte.</span><span class="sxs-lookup"><span data-stu-id="3eca6-104">A stream is a sequence of bytes.</span></span> <span data-ttu-id="3eca6-105">Nel file system NTFS i flussi contengono i dati scritti in un file e che forniscono altre informazioni su un file rispetto agli attributi e alle proprietà.</span><span class="sxs-lookup"><span data-stu-id="3eca6-105">In the NTFS file system, streams contain the data that is written to a file, and that gives more information about a file than attributes and properties.</span></span> <span data-ttu-id="3eca6-106">Ad esempio, è possibile creare un flusso che contiene parole chiave di ricerca o l'identità dell'account utente che crea un file.</span><span class="sxs-lookup"><span data-stu-id="3eca6-106">For example, you can create a stream that contains search keywords, or the identity of the user account that creates a file.</span></span>

<span data-ttu-id="3eca6-107">Ogni flusso associato a un file ha dimensioni di allocazione, dimensioni effettive e lunghezza dei dati valide:</span><span class="sxs-lookup"><span data-stu-id="3eca6-107">Each stream that is associated with a file has its own allocation size, actual size, and valid data length:</span></span>

-   <span data-ttu-id="3eca6-108">La dimensione di allocazione è la quantità di spazio su disco riservata per un flusso.</span><span class="sxs-lookup"><span data-stu-id="3eca6-108">The allocation size is the amount of disk space that is reserved for a stream.</span></span>
-   <span data-ttu-id="3eca6-109">Le dimensioni effettive corrispondono al numero di byte utilizzati da un chiamante.</span><span class="sxs-lookup"><span data-stu-id="3eca6-109">The actual size is the number of bytes that are being used by a caller.</span></span>
-   <span data-ttu-id="3eca6-110">La lunghezza dei dati valida (VDL) è il numero di byte inizializzati dalla dimensione di allocazione per il flusso.</span><span class="sxs-lookup"><span data-stu-id="3eca6-110">The valid data length (VDL) is the number of bytes that are initialized from the allocation size for the stream.</span></span>

<span data-ttu-id="3eca6-111">Ogni flusso mantiene anche il proprio stato per la compressione, la crittografia e la sparsità.</span><span class="sxs-lookup"><span data-stu-id="3eca6-111">Each stream also maintains its own state for compression, encryption, and sparseness.</span></span> <span data-ttu-id="3eca6-112">L' **attributo \_ file \_ \_ sparse** file attributo nel file è impostato nel membro **DwFileAttributes** della struttura di [**\_ \_ dati Find Win32**](/windows/desktop/api/MinWinBase/ns-minwinbase-win32_find_dataa) restituita dalle funzioni [**FindFirstFile**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstfilea), [**FindFirstFileEx**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstfileexa)e [**FindNextFile**](/windows/desktop/api/FileAPI/nf-fileapi-findnextfilea) se uno dei flussi è mai stato sparse.</span><span class="sxs-lookup"><span data-stu-id="3eca6-112">The **FILE\_ATTRIBUTE\_SPARSE\_FILE** attribute on the file is set in the **dwFileAttributes** member of the [**WIN32\_FIND\_DATA**](/windows/desktop/api/MinWinBase/ns-minwinbase-win32_find_dataa) structure returned from the [**FindFirstFile**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstfilea), [**FindFirstFileEx**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstfileexa), and [**FindNextFile**](/windows/desktop/api/FileAPI/nf-fileapi-findnextfilea) functions if any of the streams have ever been sparse.</span></span> <span data-ttu-id="3eca6-113">[**GetFileAttributes**](/windows/desktop/api/FileAPI/nf-fileapi-getfileattributesa), [**GetFileAttributesEx**](/windows/desktop/api/FileAPI/nf-fileapi-getfileattributesexa), [**GetFileAttributesTransacted**](/windows/desktop/api/WinBase/nf-winbase-getfileattributestransacteda), [**GetFileInformationByHandle**](/windows/desktop/api/FileAPI/nf-fileapi-getfileinformationbyhandle)e [**GetFileInformationByHandleEx**](/windows/desktop/api/WinBase/nf-winbase-getfileinformationbyhandleex) restituiscono lo stato di tipo sparse del flusso di dati predefinito se non è specificato alcun flusso.</span><span class="sxs-lookup"><span data-stu-id="3eca6-113">[**GetFileAttributes**](/windows/desktop/api/FileAPI/nf-fileapi-getfileattributesa), [**GetFileAttributesEx**](/windows/desktop/api/FileAPI/nf-fileapi-getfileattributesexa), [**GetFileAttributesTransacted**](/windows/desktop/api/WinBase/nf-winbase-getfileattributestransacteda), [**GetFileInformationByHandle**](/windows/desktop/api/FileAPI/nf-fileapi-getfileinformationbyhandle), and [**GetFileInformationByHandleEx**](/windows/desktop/api/WinBase/nf-winbase-getfileinformationbyhandleex) return the sparse state of the default data stream if no stream is specified.</span></span>

<span data-ttu-id="3eca6-114">Non sono disponibili orari dei file associati a un flusso.</span><span class="sxs-lookup"><span data-stu-id="3eca6-114">There are no file times associated with a stream.</span></span> <span data-ttu-id="3eca6-115">Le ore dei file per un file vengono aggiornate quando viene aggiornato un flusso in un file.</span><span class="sxs-lookup"><span data-stu-id="3eca6-115">The file times for a file are updated when any stream in a file is updated.</span></span>

<span data-ttu-id="3eca6-116">I blocchi opportunistici vengono mantenuti per ogni flusso.</span><span class="sxs-lookup"><span data-stu-id="3eca6-116">Opportunistic locks are maintained per stream.</span></span> <span data-ttu-id="3eca6-117">Anche le modalità di condivisione vengono mantenute per ogni flusso.</span><span class="sxs-lookup"><span data-stu-id="3eca6-117">Sharing modes are also maintained per stream.</span></span> <span data-ttu-id="3eca6-118">Quando si richiede l'accesso DELETE per un file, il sistema operativo verifica l'accesso DELETE per tutti i flussi aperti in un file.</span><span class="sxs-lookup"><span data-stu-id="3eca6-118">When delete access is requested on a file, the operating system checks for delete access on all open streams in a file.</span></span> <span data-ttu-id="3eca6-119">Se un altro processo ha aperto un flusso senza l'autorizzazione di **\_ \_ eliminazione della condivisione file** , non è possibile aprire il file per l'accesso DELETE.</span><span class="sxs-lookup"><span data-stu-id="3eca6-119">If another process has opened a stream without the **FILE\_SHARE\_DELETE** permission, you cannot open the file for delete access.</span></span>

<span data-ttu-id="3eca6-120">Se un file copiato ha un flusso di dati e viene usato il redirector di rete, il file può essere copiato solo se il client dispone sia dell'autorizzazione lettura che dell'autorizzazione lettura attributi.</span><span class="sxs-lookup"><span data-stu-id="3eca6-120">If a file being copied has a data stream and the network redirector is used, the file can only be copied if the client has both the read permission and the read attributes permission.</span></span>

## <a name="naming-conventions-for-streams"></a><span data-ttu-id="3eca6-121">Convenzioni di denominazione per i flussi</span><span class="sxs-lookup"><span data-stu-id="3eca6-121">Naming Conventions for Streams</span></span>

<span data-ttu-id="3eca6-122">Quando viene specificato dalla riga di comando della shell di Windows, il nome completo di un flusso è "*filename*:*Stream name*:*Stream Type*", come nell'esempio seguente: "myfile. dat: stream1: $data".</span><span class="sxs-lookup"><span data-stu-id="3eca6-122">When specified from the Windows shell command line, the full name of a stream is "*filename*:*stream name*:*stream type*", as in the following example: "myfile.dat:stream1:$DATA".</span></span>

<span data-ttu-id="3eca6-123">I caratteri validi per un nome file sono validi anche per il nome del flusso, inclusi gli spazi.</span><span class="sxs-lookup"><span data-stu-id="3eca6-123">Any characters that are legal for a file name are also legal for the stream name, including spaces.</span></span> <span data-ttu-id="3eca6-124">Per ulteriori informazioni, vedere [denominazione di un file](naming-a-file.md).</span><span class="sxs-lookup"><span data-stu-id="3eca6-124">For more information, see [Naming a File](naming-a-file.md).</span></span> <span data-ttu-id="3eca6-125">Il tipo di flusso, detto anche codice di tipo di attributo, è interno al file system NTFS.</span><span class="sxs-lookup"><span data-stu-id="3eca6-125">The stream type (also called an attribute type code) is internal to the NTFS file system.</span></span> <span data-ttu-id="3eca6-126">Pertanto, gli utenti non possono creare nuovi tipi di flusso, ma possono aprire i tipi di file system NTFS esistenti.</span><span class="sxs-lookup"><span data-stu-id="3eca6-126">Users therefore can't create new stream types, but they can open existing NTFS file system types.</span></span> <span data-ttu-id="3eca6-127">I valori dell'identificatore del tipo di flusso iniziano sempre con il simbolo del dollaro ($).</span><span class="sxs-lookup"><span data-stu-id="3eca6-127">Stream type specifier values always start with the dollar sign ($) symbol.</span></span> <span data-ttu-id="3eca6-128">Per un elenco dei tipi di flusso, vedere di seguito.</span><span class="sxs-lookup"><span data-stu-id="3eca6-128">See below for a list of stream types.</span></span>

<span data-ttu-id="3eca6-129">Per impostazione predefinita, il flusso di dati predefinito è senza nome.</span><span class="sxs-lookup"><span data-stu-id="3eca6-129">By default, the default data stream is unnamed.</span></span> <span data-ttu-id="3eca6-130">Per specificare completamente il flusso di dati predefinito, usare "*filename*:: $data", dove $data è il tipo di flusso.</span><span class="sxs-lookup"><span data-stu-id="3eca6-130">To fully specify the default data stream, use "*filename*::$DATA", where $DATA is the stream type.</span></span> <span data-ttu-id="3eca6-131">Equivale a "*filename*".</span><span class="sxs-lookup"><span data-stu-id="3eca6-131">This is the equivalent of "*filename*".</span></span> <span data-ttu-id="3eca6-132">È possibile creare un flusso denominato nel file usando le [convenzioni di denominazione dei file](naming-a-file.md).</span><span class="sxs-lookup"><span data-stu-id="3eca6-132">You can create a named stream in the file using the [file naming conventions](naming-a-file.md).</span></span> <span data-ttu-id="3eca6-133">Si noti che "$DATA" è un nome di flusso valido.</span><span class="sxs-lookup"><span data-stu-id="3eca6-133">Note that "$DATA" is a legal stream name.</span></span> <span data-ttu-id="3eca6-134">Ad esempio, il nome completo di un flusso denominato "$DATA" in un file denominato "*Sample*" sarà "*Sample*: $data: $data".</span><span class="sxs-lookup"><span data-stu-id="3eca6-134">For example, the full name of a stream named "$DATA" on a file named "*sample*" would be "*sample*:$DATA:$DATA".</span></span> <span data-ttu-id="3eca6-135">Se è stato creato un flusso denominato "barra" nello stesso file, il nome completo sarà "*Sample*: bar: $data".</span><span class="sxs-lookup"><span data-stu-id="3eca6-135">If you created a stream named "bar" on the same file its full name would be "*sample*:bar:$DATA".</span></span>

<span data-ttu-id="3eca6-136">Quando si creano e si utilizzano file con nomi di un carattere, anteporre al nome del file il periodo seguito da una barra rovesciata (. in \) alternativa, utilizzare un nome di percorso completo.</span><span class="sxs-lookup"><span data-stu-id="3eca6-136">When creating and working with files that have one-character names, prefix the file name with period followed by a backslash (.\) or use a fully qualified path name.</span></span> <span data-ttu-id="3eca6-137">Il motivo è che Windows considera i nomi di file di un solo carattere come lettere di unità.</span><span class="sxs-lookup"><span data-stu-id="3eca6-137">The reason to do this is that Windows treats one-character file names as drive letters.</span></span> <span data-ttu-id="3eca6-138">Quando si specifica una lettera di unità con un percorso relativo, i due punti separano la lettera di unità dal percorso.</span><span class="sxs-lookup"><span data-stu-id="3eca6-138">When a drive letter is specified with a relative path, a colon separates the drive letter from the path.</span></span> <span data-ttu-id="3eca6-139">Quando si verifica un'ambiguità sul fatto che il nome di un solo carattere sia una lettera di unità o un nome di file, Windows presuppone che si tratti di una lettera di unità se la stringa che segue i due punti è un percorso valido, anche se la lettera di unità non è valida.</span><span class="sxs-lookup"><span data-stu-id="3eca6-139">When there is an ambiguity about whether a one-character name is a drive letter or a file name, Windows assumes it is a a drive letter if the string following the colon is a valid path, even if the drive letter is invalid.</span></span>

## <a name="stream-types"></a><span data-ttu-id="3eca6-140">Tipi di flusso</span><span class="sxs-lookup"><span data-stu-id="3eca6-140">Stream Types</span></span>

<span data-ttu-id="3eca6-141">Di seguito è riportato l'elenco dei tipi di flusso NTFS, denominati anche codici di tipo di attributo.</span><span class="sxs-lookup"><span data-stu-id="3eca6-141">Following is the list of NTFS stream types, also called attribute type codes.</span></span> <span data-ttu-id="3eca6-142">Alcuni tipi di flusso sono interni a NTFS e il formato non è documentato.</span><span class="sxs-lookup"><span data-stu-id="3eca6-142">Some of the stream types are internal to NTFS and their format is undocumented.</span></span>



| <span data-ttu-id="3eca6-143">Tipo di flusso</span><span class="sxs-lookup"><span data-stu-id="3eca6-143">Stream Type</span></span>                | <span data-ttu-id="3eca6-144">Descrizione</span><span class="sxs-lookup"><span data-stu-id="3eca6-144">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|----------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3eca6-145">elenco:: $ATTRIBUTE \_</span><span class="sxs-lookup"><span data-stu-id="3eca6-145">::$ATTRIBUTE\_LIST</span></span>         | <span data-ttu-id="3eca6-146">Contiene un elenco di tutti gli attributi che compongono il file e identifica la posizione in cui si trova ogni attributo.</span><span class="sxs-lookup"><span data-stu-id="3eca6-146">Contains a list of all attributes that make up the file and identifies where each attribute is located.</span></span>                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="3eca6-147">:: $BITMAP</span><span class="sxs-lookup"><span data-stu-id="3eca6-147">::$BITMAP</span></span>                  | <span data-ttu-id="3eca6-148">Bitmap utilizzata dagli indici per gestire lo spazio disponibile nell'albero b per una directory.</span><span class="sxs-lookup"><span data-stu-id="3eca6-148">A bitmap used by indexes to manage the b-tree free space for a directory.</span></span> <span data-ttu-id="3eca6-149">L'albero b è gestito in blocchi da 4 KB (indipendentemente dalle dimensioni del cluster) e viene usato per gestire l'allocazione di questi blocchi.</span><span class="sxs-lookup"><span data-stu-id="3eca6-149">The b-tree is managed in 4 KB chunks (regardless of cluster size) and this is used to manage the allocation of these chunks.</span></span> <span data-ttu-id="3eca6-150">Questo tipo di flusso è presente in ogni directory.</span><span class="sxs-lookup"><span data-stu-id="3eca6-150">This stream type is present on every directory.</span></span>                                                                                                                                                                                           |
| <span data-ttu-id="3eca6-151">:: $DATA</span><span class="sxs-lookup"><span data-stu-id="3eca6-151">::$DATA</span></span>                    | <span data-ttu-id="3eca6-152">Flusso di dati.</span><span class="sxs-lookup"><span data-stu-id="3eca6-152">Data stream.</span></span> <span data-ttu-id="3eca6-153">Il flusso di dati predefinito non ha un nome.</span><span class="sxs-lookup"><span data-stu-id="3eca6-153">The default data stream has no name.</span></span> <span data-ttu-id="3eca6-154">I flussi di dati possono essere enumerati usando le funzioni [**FindFirstStreamW**](/windows/desktop/api/fileapi/nf-fileapi-findfirststreamw) e [**FindNextStreamW**](/windows/desktop/api/fileapi/nf-fileapi-findnextstreamw) .</span><span class="sxs-lookup"><span data-stu-id="3eca6-154">Data streams can be enumerated using the [**FindFirstStreamW**](/windows/desktop/api/fileapi/nf-fileapi-findfirststreamw) and [**FindNextStreamW**](/windows/desktop/api/fileapi/nf-fileapi-findnextstreamw) functions.</span></span>                                                                                                                                                                                                                                                |
| <span data-ttu-id="3eca6-155">:: $EA</span><span class="sxs-lookup"><span data-stu-id="3eca6-155">::$EA</span></span>                      | <span data-ttu-id="3eca6-156">Contiene i dati degli attributi estesi.</span><span class="sxs-lookup"><span data-stu-id="3eca6-156">Contains Extended Attributes data.</span></span>|
| <span data-ttu-id="3eca6-157">:: $EA \_ informazioni</span><span class="sxs-lookup"><span data-stu-id="3eca6-157">::$EA\_INFORMATION</span></span>         | <span data-ttu-id="3eca6-158">Contiene informazioni di supporto sugli attributi estesi.</span><span class="sxs-lookup"><span data-stu-id="3eca6-158">Contains support information about the Extended Attributes.</span></span>                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="3eca6-159">:: $FILE \_ nome</span><span class="sxs-lookup"><span data-stu-id="3eca6-159">::$FILE\_NAME</span></span>              | <span data-ttu-id="3eca6-160">Nome del file, in caratteri Unicode.</span><span class="sxs-lookup"><span data-stu-id="3eca6-160">The name of the file, in Unicode characters.</span></span> <span data-ttu-id="3eca6-161">Sono inclusi il nome breve del file e tutti i collegamenti reali.</span><span class="sxs-lookup"><span data-stu-id="3eca6-161">This includes the short name of the file as well as any hard links.</span></span>                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="3eca6-162">allocazione $INDEX:: \_</span><span class="sxs-lookup"><span data-stu-id="3eca6-162">::$INDEX\_ALLOCATION</span></span>       | <span data-ttu-id="3eca6-163">Tipo di flusso di una directory.</span><span class="sxs-lookup"><span data-stu-id="3eca6-163">The stream type of a directory.</span></span> <span data-ttu-id="3eca6-164">Utilizzato per implementare l'allocazione di file per directory di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="3eca6-164">Used to implement filename allocation for large directories.</span></span> <span data-ttu-id="3eca6-165">Questo flusso rappresenta la directory stessa e contiene tutti i dati della directory.</span><span class="sxs-lookup"><span data-stu-id="3eca6-165">This stream represents the directory itself and contains all of the data of the directory.</span></span> <span data-ttu-id="3eca6-166">Le modifiche apportate ai flussi di questo tipo vengono registrate nel journal delle modifiche NTFS.</span><span class="sxs-lookup"><span data-stu-id="3eca6-166">Changes to streams of this type are logged to the NTFS change journal.</span></span> <span data-ttu-id="3eca6-167">Il nome del flusso predefinito di un \_ tipo di flusso di allocazione $index è $I 30, quindi "*dirname*", "*dirname*:: $index \_ allocation" e "*dirname*: $I 30: $index \_ allocation" sono tutti equivalenti.</span><span class="sxs-lookup"><span data-stu-id="3eca6-167">The default stream name of an $INDEX\_ALLOCATION stream type is $I30 so "*DirName*", "*DirName*::$INDEX\_ALLOCATION", and "*DirName*:$I30:$INDEX\_ALLOCATION" are all equivalent.</span></span> |
| <span data-ttu-id="3eca6-168">radice $INDEX:: \_</span><span class="sxs-lookup"><span data-stu-id="3eca6-168">::$INDEX\_ROOT</span></span>             | <span data-ttu-id="3eca6-169">Questo flusso rappresenta la radice dell'albero b di un indice.</span><span class="sxs-lookup"><span data-stu-id="3eca6-169">This stream represents root of the b-tree of an index.</span></span> <span data-ttu-id="3eca6-170">Questo tipo di flusso è presente in ogni directory.</span><span class="sxs-lookup"><span data-stu-id="3eca6-170">This stream type is present on every directory.</span></span>                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="3eca6-171">flusso dell'utilità:: $LOGGED \_ \_</span><span class="sxs-lookup"><span data-stu-id="3eca6-171">::$LOGGED\_UTILITY\_STREAM</span></span> | <span data-ttu-id="3eca6-172">Simile a:: $DATA ma le operazioni vengono registrate nel journal delle modifiche NTFS.</span><span class="sxs-lookup"><span data-stu-id="3eca6-172">Similar to ::$DATA but operations are logged to the NTFS change journal.</span></span> <span data-ttu-id="3eca6-173">Utilizzato da EFS e [transazionale NTFS (TXF)](transactional-ntfs-portal.md).</span><span class="sxs-lookup"><span data-stu-id="3eca6-173">Used by EFS and [Transactional NTFS (TxF)](transactional-ntfs-portal.md).</span></span> <span data-ttu-id="3eca6-174">La coppia ":*streamName*: $*STREAMTYPE*" per EFS è ": $EFS: $Logged \_ \_ flusso di utilità" e per TXF è ": $TXF \_ Data: \_ flusso di utilità $logged \_ ".</span><span class="sxs-lookup"><span data-stu-id="3eca6-174">The ":*StreamName*:$*StreamType*" pair for EFS is ":$EFS:$LOGGED\_UTILITY\_STREAM" and for TxF is ":$TXF\_DATA:$LOGGED\_UTILITY\_STREAM".</span></span>                                                                                                                                                    |
| <span data-ttu-id="3eca6-175">ID:: $OBJECT \_</span><span class="sxs-lookup"><span data-stu-id="3eca6-175">::$OBJECT\_ID</span></span>              | <span data-ttu-id="3eca6-176">ID a 16 byte utilizzato per identificare il file per il servizio di rilevamento dei collegamenti.</span><span class="sxs-lookup"><span data-stu-id="3eca6-176">An 16-byte ID used to identify the file for the link-tracking service.</span></span>                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="3eca6-177">:: \_ punto $REPARSE</span><span class="sxs-lookup"><span data-stu-id="3eca6-177">::$REPARSE\_POINT</span></span>          | <span data-ttu-id="3eca6-178">Dati di [reparse point](reparse-points.md) .</span><span class="sxs-lookup"><span data-stu-id="3eca6-178">The [reparse point](reparse-points.md) data.</span></span>|



 

## <a name="related-topics"></a><span data-ttu-id="3eca6-179">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="3eca6-179">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3eca6-180">Uso di flussi</span><span class="sxs-lookup"><span data-stu-id="3eca6-180">Using Streams</span></span>](using-streams.md)
</dt> </dl>

 

 



