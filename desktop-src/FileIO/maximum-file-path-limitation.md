---
description: Limite massimo di lunghezza del percorso.
title: Limite lunghezza massima percorso
ms.topic: article
ms.custom: contperf-fy21q1
ms.date: 09/15/2020
ms.openlocfilehash: 3d71d87f69aeb224cde256ce78bd29fd0bf5c291
ms.sourcegitcommit: 78b64f3865e64768b5319d4f010032ee68924a98
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/13/2021
ms.locfileid: "107314804"
---
# <a name="maximum-path-length-limitation"></a><span data-ttu-id="d57b2-103">Limite lunghezza massima percorso</span><span class="sxs-lookup"><span data-stu-id="d57b2-103">Maximum Path Length Limitation</span></span>

<span data-ttu-id="d57b2-104">Nell'API Windows (con alcune eccezioni descritte nei paragrafi seguenti), la lunghezza massima di un percorso è il **\_ percorso** massimo, che è definito come 260 caratteri.</span><span class="sxs-lookup"><span data-stu-id="d57b2-104">In the Windows API (with some exceptions discussed in the following paragraphs), the maximum length for a path is **MAX\_PATH**, which is defined as 260 characters.</span></span> <span data-ttu-id="d57b2-105">Un percorso locale è strutturato nell'ordine seguente: lettera di unità, due punti, barra rovesciata, componenti nome separati da barre rovesciate e un carattere null di terminazione.</span><span class="sxs-lookup"><span data-stu-id="d57b2-105">A local path is structured in the following order: drive letter, colon, backslash, name components separated by backslashes, and a terminating null character.</span></span> <span data-ttu-id="d57b2-106">Ad esempio, il percorso massimo sull'unità D è "D: \\ *some stringa di percorso di 256 caratteri* &lt; NUL &gt; ", dove " &lt; NUL &gt; " rappresenta il carattere null di terminazione invisibile per la tabella codici di sistema corrente.</span><span class="sxs-lookup"><span data-stu-id="d57b2-106">For example, the maximum path on drive D is "D:\\*some 256-character path string*&lt;NUL&gt;" where "&lt;NUL&gt;" represents the invisible terminating null character for the current system codepage.</span></span> <span data-ttu-id="d57b2-107">I caratteri < > vengono usati qui per la chiarezza visiva e non possono far parte di una stringa di percorso valida.</span><span class="sxs-lookup"><span data-stu-id="d57b2-107">(The characters < > are used here for visual clarity and cannot be part of a valid path string.)</span></span>

<span data-ttu-id="d57b2-108">È possibile, ad esempio, raggiungere questa limitazione se si clona un repository git con nomi di file lunghi in una cartella a cui è associato un nome lungo.</span><span class="sxs-lookup"><span data-stu-id="d57b2-108">For example, you may hit this limitation if you are cloning a git repo that has long file names into a folder that itself has a long name.</span></span>


> [!Note]  
> <span data-ttu-id="d57b2-109">Le funzioni di i/O dei file nell'API Windows convertono "/" in " \\ " come parte della conversione del nome in un nome di tipo NT, tranne quando si usa il \\ \\ prefisso "? \\ ", come descritto nelle sezioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="d57b2-109">File I/O functions in the Windows API convert "/" to "\\" as part of converting the name to an NT-style name, except when using the "\\\\?\\" prefix as detailed in the following sections.</span></span>

<span data-ttu-id="d57b2-110">L'API Windows dispone di molte funzioni che dispongono anche di versioni Unicode per consentire un percorso di lunghezza estesa per un percorso di lunghezza totale massimo di 32.767 caratteri.</span><span class="sxs-lookup"><span data-stu-id="d57b2-110">The Windows API has many functions that also have Unicode versions to permit an extended-length path for a maximum total path length of 32,767 characters.</span></span> <span data-ttu-id="d57b2-111">Questo tipo di percorso è costituito da componenti separati da barre rovesciate, ciascuno fino al valore restituito nel parametro *lpMaximumComponentLength* della funzione [**GetVolumeInformation**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumeinformationa) (questo valore è in genere di 255 caratteri).</span><span class="sxs-lookup"><span data-stu-id="d57b2-111">This type of path is composed of components separated by backslashes, each up to the value returned in the *lpMaximumComponentLength* parameter of the [**GetVolumeInformation**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumeinformationa) function (this value is commonly 255 characters).</span></span> <span data-ttu-id="d57b2-112">Per specificare un percorso di lunghezza estesa, usare il \\ \\ prefisso "? \\ ".</span><span class="sxs-lookup"><span data-stu-id="d57b2-112">To specify an extended-length path, use the "\\\\?\\" prefix.</span></span> <span data-ttu-id="d57b2-113">Ad esempio, " \\ \\ ? \\ D: \\ *percorso molto lungo*".</span><span class="sxs-lookup"><span data-stu-id="d57b2-113">For example, "\\\\?\\D:\\*very long path*".</span></span>

> [!Note]  
> <span data-ttu-id="d57b2-114">Il percorso massimo di 32.767 caratteri è approssimativo, perché il \\ \\ prefisso "? \\ " può essere espanso a una stringa più lunga dal sistema in fase di esecuzione e questa espansione viene applicata alla lunghezza totale.</span><span class="sxs-lookup"><span data-stu-id="d57b2-114">The maximum path of 32,767 characters is approximate, because the "\\\\?\\" prefix may be expanded to a longer string by the system at run time, and this expansion applies to the total length.</span></span>

<span data-ttu-id="d57b2-115">Il \\ \\ prefisso "? \\ " può essere utilizzato anche con i percorsi costruiti in base alla convenzione UNC (Universal Naming Convention).</span><span class="sxs-lookup"><span data-stu-id="d57b2-115">The "\\\\?\\" prefix can also be used with paths constructed according to the universal naming convention (UNC).</span></span> <span data-ttu-id="d57b2-116">Per specificare tale percorso utilizzando UNC, utilizzare il valore " \\ \\ ? \\ \\Prefisso UNC ".</span><span class="sxs-lookup"><span data-stu-id="d57b2-116">To specify such a path using UNC, use the "\\\\?\\UNC\\" prefix.</span></span> <span data-ttu-id="d57b2-117">Ad esempio, " \\ \\ ? \\ \\Condivisione server UNC \\ ", dove" Server "è il nome del computer e" Share "è il nome della cartella condivisa.</span><span class="sxs-lookup"><span data-stu-id="d57b2-117">For example, "\\\\?\\UNC\\server\\share", where "server" is the name of the computer and "share" is the name of the shared folder.</span></span> <span data-ttu-id="d57b2-118">Questi prefissi non vengono usati come parte del percorso.</span><span class="sxs-lookup"><span data-stu-id="d57b2-118">These prefixes are not used as part of the path itself.</span></span> <span data-ttu-id="d57b2-119">Indica che il percorso deve essere passato al sistema con una modifica minima, il che significa che non è possibile usare le barre per rappresentare i separatori di percorso o un punto per rappresentare la directory corrente o i punti doppi per rappresentare la directory padre.</span><span class="sxs-lookup"><span data-stu-id="d57b2-119">They indicate that the path should be passed to the system with minimal modification, which means that you cannot use forward slashes to represent path separators, or a period to represent the current directory, or double dots to represent the parent directory.</span></span> <span data-ttu-id="d57b2-120">Poiché non è possibile usare il \\ \\ prefisso "? \\ " con un percorso relativo, i percorsi relativi sono sempre limitati a un totale di caratteri di **\_ percorso massimi** .</span><span class="sxs-lookup"><span data-stu-id="d57b2-120">Because you cannot use the "\\\\?\\" prefix with a relative path, relative paths are always limited to a total of **MAX\_PATH** characters.</span></span>

<span data-ttu-id="d57b2-121">Non è necessario eseguire alcuna normalizzazione Unicode per le stringhe di percorso e nome file per l'uso da parte delle funzioni API di I/O dei file di Windows, perché il file system considera i nomi di percorso e file come una sequenza opaca di **WCHAR** s.</span><span class="sxs-lookup"><span data-stu-id="d57b2-121">There is no need to perform any Unicode normalization on path and file name strings for use by the Windows file I/O API functions because the file system treats path and file names as an opaque sequence of **WCHAR** s.</span></span> <span data-ttu-id="d57b2-122">Qualsiasi normalizzazione necessaria per l'applicazione deve essere eseguita tenendo presente questo aspetto, esterno alle chiamate alle funzioni API I/O dei file di Windows correlate.</span><span class="sxs-lookup"><span data-stu-id="d57b2-122">Any normalization that your application requires should be performed with this in mind, external of any calls to related Windows file I/O API functions.</span></span>

<span data-ttu-id="d57b2-123">Quando si usa un'API per creare una directory, il percorso specificato non può essere così lungo che non è possibile aggiungere un nome file 8,3 (ovvero, il nome della directory non può superare il **\_ percorso massimo** meno 12).</span><span class="sxs-lookup"><span data-stu-id="d57b2-123">When using an API to create a directory, the specified path cannot be so long that you cannot append an 8.3 file name (that is, the directory name cannot exceed **MAX\_PATH** minus 12).</span></span>

<span data-ttu-id="d57b2-124">La shell e la file system hanno requisiti diversi.</span><span class="sxs-lookup"><span data-stu-id="d57b2-124">The shell and the file system have different requirements.</span></span> <span data-ttu-id="d57b2-125">È possibile creare un percorso con l'API Windows che l'interfaccia utente della shell non è in grado di interpretare correttamente.</span><span class="sxs-lookup"><span data-stu-id="d57b2-125">It is possible to create a path with the Windows API that the shell user interface is not able to interpret properly.</span></span>

## <a name="enable-long-paths-in-windows-10-version-1607-and-later"></a><span data-ttu-id="d57b2-126">Abilita percorsi lunghi in Windows 10, versione 1607 e successive</span><span class="sxs-lookup"><span data-stu-id="d57b2-126">Enable Long Paths in Windows 10, Version 1607, and Later</span></span>

<span data-ttu-id="d57b2-127">A partire da Windows 10, versione 1607, le limitazioni del **\_ percorso massimo** sono state rimosse dalle funzioni comuni di file e directory Win32.</span><span class="sxs-lookup"><span data-stu-id="d57b2-127">Starting in Windows 10, version 1607, **MAX\_PATH** limitations have been removed from common Win32 file and directory functions.</span></span> <span data-ttu-id="d57b2-128">Tuttavia, è necessario acconsentire esplicitamente al nuovo comportamento.</span><span class="sxs-lookup"><span data-stu-id="d57b2-128">However, you must opt-in to the new behavior.</span></span>

<span data-ttu-id="d57b2-129">Per abilitare il nuovo comportamento del percorso lungo, è necessario che siano soddisfatte entrambe le condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="d57b2-129">To enable the new long path behavior, both of the following conditions must be met:</span></span>

* <span data-ttu-id="d57b2-130">La chiave del registro `Computer\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem\LongPathsEnabled (Type: REG_DWORD)` di sistema deve esistere e deve essere impostata su 1.</span><span class="sxs-lookup"><span data-stu-id="d57b2-130">The registry key `Computer\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem\LongPathsEnabled (Type: REG_DWORD)` must exist and be set to 1.</span></span> <span data-ttu-id="d57b2-131">Il valore della chiave verrà memorizzato nella cache dal sistema (per processo) dopo la prima chiamata a una funzione di directory o a un file Win32 interessato (vedere di seguito per l'elenco di funzioni).</span><span class="sxs-lookup"><span data-stu-id="d57b2-131">The key's value will be cached by the system (per process) after the first call to an affected Win32 file or directory function (see below for the list of functions).</span></span> <span data-ttu-id="d57b2-132">La chiave del registro di sistema non verrà ricaricata durante il ciclo di vita del processo.</span><span class="sxs-lookup"><span data-stu-id="d57b2-132">The registry key will not be reloaded during the lifetime of the process.</span></span> <span data-ttu-id="d57b2-133">Affinché tutte le app del sistema riconoscano il valore della chiave, potrebbe essere necessario riavviare il sistema perché alcuni processi potrebbero essere stati avviati prima dell'impostazione della chiave.</span><span class="sxs-lookup"><span data-stu-id="d57b2-133">In order for all apps on the system to recognize the value of the key, a reboot might be required because some processes may have started before the key was set.</span></span>

<span data-ttu-id="d57b2-134">È anche possibile copiare questo codice in un `.reg` file che può essere impostato per l'utente:</span><span class="sxs-lookup"><span data-stu-id="d57b2-134">You can also copy this code to a `.reg` file which can set this for you:</span></span>
```cmd
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem]
"LongPathsEnabled"=dword:00000001

```

> [!NOTE]  
> <span data-ttu-id="d57b2-135">Questa chiave del registro di sistema può essere controllata anche tramite Criteri di gruppo all'indirizzo `Computer Configuration > Administrative Templates > System > Filesystem > Enable Win32 long paths` .</span><span class="sxs-lookup"><span data-stu-id="d57b2-135">This registry key can also be controlled via Group Policy at `Computer Configuration > Administrative Templates > System > Filesystem > Enable Win32 long paths`.</span></span>

* <span data-ttu-id="d57b2-136">Il [manifesto dell'applicazione](../sbscs/application-manifests.md) deve includere anche l' `longPathAware` elemento.</span><span class="sxs-lookup"><span data-stu-id="d57b2-136">The [application manifest](../sbscs/application-manifests.md) must also include the `longPathAware` element.</span></span>

    ```XML
    <application xmlns="urn:schemas-microsoft-com:asm.v3">
        <windowsSettings xmlns:ws2="http://schemas.microsoft.com/SMI/2016/WindowsSettings">
            <ws2:longPathAware>true</ws2:longPathAware>
        </windowsSettings>
    </application>
    ```

<span data-ttu-id="d57b2-137">Queste sono le funzioni di gestione della directory che non hanno più restrizioni di **\_ percorso massime** se si sceglie il comportamento di percorso lungo: CreateDirectoryW, CreateDirectoryExW GetCurrentDirectoryW RemoveDirectoryW SetCurrentDirectoryW.</span><span class="sxs-lookup"><span data-stu-id="d57b2-137">These are the directory management functions that no longer have **MAX\_PATH** restrictions if you opt-in to long path behavior: CreateDirectoryW, CreateDirectoryExW GetCurrentDirectoryW RemoveDirectoryW SetCurrentDirectoryW.</span></span>

<span data-ttu-id="d57b2-138">Queste sono le funzioni di gestione dei file che non hanno più restrizioni del **\_ percorso massimo** se si sceglie il comportamento del percorso lungo: CopyFileW, CopyFile2, CopyFileExW, CreateFileW, CreateFile2, CreateHardLinkW, CreateSymbolicLinkW, DeleteFileW, FindFirstFileW, FindFirstFileExW, FindNextFileW, GetFileAttributesW, GetFileAttributesExW, SetFileAttributesW, GetFullPathNameW, GetLongPathNameW, MoveFileW, MoveFileExW, MoveFileWithProgressW, ReplaceFileW, SearchPathW, FindFirstFileNameW, FindNextFileNameW, FindFirstStreamW, FindNextStreamW, GetCompressedFileSizeW, GetFinalPathNameByHandleW.</span><span class="sxs-lookup"><span data-stu-id="d57b2-138">These are the file management functions that no longer have **MAX\_PATH** restrictions if you opt-in to long path behavior: CopyFileW, CopyFile2, CopyFileExW, CreateFileW, CreateFile2, CreateHardLinkW, CreateSymbolicLinkW, DeleteFileW, FindFirstFileW, FindFirstFileExW, FindNextFileW, GetFileAttributesW, GetFileAttributesExW, SetFileAttributesW, GetFullPathNameW, GetLongPathNameW, MoveFileW, MoveFileExW, MoveFileWithProgressW, ReplaceFileW, SearchPathW, FindFirstFileNameW, FindNextFileNameW, FindFirstStreamW, FindNextStreamW, GetCompressedFileSizeW, GetFinalPathNameByHandleW.</span></span>
