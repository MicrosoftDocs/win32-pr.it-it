---
description: Le funzioni di crittografia RAW consentono di eseguire il backup dei file crittografati.
ms.assetid: 00f9b00e-305d-4554-8b43-7061228c92c3
title: Backup e ripristino di file crittografati
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4fbc5d1babbbbb92cef9e78f9a0dade702fd63d2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104049651"
---
# <a name="backup-and-restore-of-encrypted-files"></a><span data-ttu-id="cc10d-103">Backup e ripristino di file crittografati</span><span class="sxs-lookup"><span data-stu-id="cc10d-103">Backup and Restore of Encrypted Files</span></span>

<span data-ttu-id="cc10d-104">Il Encrypting File System (EFS) filtra l'apertura di un file crittografato in modo che l'applicazione che ha aperto il file ottenga l'accesso alle informazioni non crittografate, a condizione che disponga delle credenziali appropriate per accedere al file e ottenere la chiave necessaria per decrittografare il file.</span><span class="sxs-lookup"><span data-stu-id="cc10d-104">The Encrypting File System (EFS) filters the opening of an encrypted file in such a way that the application that opened the file gets access to the unencrypted information, provided of course it has the proper credentials to access the file and get the key necessary to decrypt the file.</span></span> <span data-ttu-id="cc10d-105">Le successive operazioni di lettura su questo file produrranno testo non crittografato.</span><span class="sxs-lookup"><span data-stu-id="cc10d-105">Subsequent read operations on this file will yield unencrypted text.</span></span> <span data-ttu-id="cc10d-106">Questa operazione è molto utile per l'accesso tipico ai file crittografati e consente di mantenere trasparente la crittografia e la decrittografia dei file.</span><span class="sxs-lookup"><span data-stu-id="cc10d-106">This is very desirable for typical access to encrypted files, and keeps the encryption and decryption of the files transparent.</span></span> <span data-ttu-id="cc10d-107">Tuttavia, ostacola il backup dei file crittografati, perché se si tenta di eseguire il backup con le chiamate di I/O di file standard come [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea), [**ReadFile**](/windows/desktop/api/FileAPI/nf-fileapi-readfile)e [**WriteFile**](/windows/desktop/api/FileAPI/nf-fileapi-writefile), i file di cui viene eseguito il backup saranno la versione in formato testo normale.</span><span class="sxs-lookup"><span data-stu-id="cc10d-107">However, it hinders backup of encrypted files, because if backup is attempted with the standard file I/O calls like [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea), [**ReadFile**](/windows/desktop/api/FileAPI/nf-fileapi-readfile), and [**WriteFile**](/windows/desktop/api/FileAPI/nf-fileapi-writefile), the files backed up will be the plain text version.</span></span>

<span data-ttu-id="cc10d-108">Per risolvere questo problema, vengono fornite le funzioni di crittografia non elaborate.</span><span class="sxs-lookup"><span data-stu-id="cc10d-108">The raw encryption functions are provided to solve this problem.</span></span> <span data-ttu-id="cc10d-109">Le applicazioni di backup sono un utente principale previsto per queste funzioni.</span><span class="sxs-lookup"><span data-stu-id="cc10d-109">Backup applications are a primary intended user for these functions.</span></span> <span data-ttu-id="cc10d-110">Le funzioni di crittografia non elaborate sono diverse da quelle di altre funzioni file system in quanto le funzioni di apertura, lettura e scrittura consentono l'accesso ai flussi di dati crittografati non elaborati e consentono anche la lettura/scrittura del flusso di $EFS.</span><span class="sxs-lookup"><span data-stu-id="cc10d-110">Raw encryption functions differ from other file system functions in that open, read, and write functions allow access to the raw encrypted data streams and also allow reading/writing of the $EFS stream.</span></span> <span data-ttu-id="cc10d-111">Pertanto, il chiamante delle funzioni di crittografia non elaborate non necessita dell'accesso alle chiavi crittografiche che decrittografano il file.</span><span class="sxs-lookup"><span data-stu-id="cc10d-111">Therefore, the caller of the raw encryption functions does not need access to the cryptographic keys that decrypt the file.</span></span> <span data-ttu-id="cc10d-112">Le API di crittografia raw seguenti sono disponibili per l'uso con le applicazioni di backup e ripristino:</span><span class="sxs-lookup"><span data-stu-id="cc10d-112">The following raw encryption APIs are available for use with backup and restore applications:</span></span> 

| <span data-ttu-id="cc10d-113">API di crittografia non elaborata</span><span class="sxs-lookup"><span data-stu-id="cc10d-113">Raw Encryption API</span></span>                                     | <span data-ttu-id="cc10d-114">Descrizione</span><span class="sxs-lookup"><span data-stu-id="cc10d-114">Description</span></span>                                                                                                                                                                                                                                                                   |
|--------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="cc10d-115">**OpenEncryptedFileRaw**</span><span class="sxs-lookup"><span data-stu-id="cc10d-115">**OpenEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-openencryptedfilerawa)   | <span data-ttu-id="cc10d-116">Aprire un file crittografato con accesso ai dati in formato crittografato.</span><span class="sxs-lookup"><span data-stu-id="cc10d-116">Open an encrypted file with access to data in encrypted format.</span></span> <span data-ttu-id="cc10d-117">Se il chiamante non ha accesso alla chiave per il file, il chiamante deve [SeBackupPrivilege](/windows/desktop/SecAuthZ/authorization-constants) per esportare i file crittografati o SeRestorePrivilege per importare i file crittografati.</span><span class="sxs-lookup"><span data-stu-id="cc10d-117">If the caller does not have access to the key for the file, the caller needs [SeBackupPrivilege](/windows/desktop/SecAuthZ/authorization-constants) to export encrypted files or SeRestorePrivilege to import encrypted files.</span></span> |
| [<span data-ttu-id="cc10d-118">**CloseEncryptedFileRaw**</span><span class="sxs-lookup"><span data-stu-id="cc10d-118">**CloseEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-closeencryptedfileraw) | <span data-ttu-id="cc10d-119">Chiude un file crittografato aperto con [ **OpenEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-openencryptedfilerawa)</span><span class="sxs-lookup"><span data-stu-id="cc10d-119">Close an encrypted file opened with [**OpenEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-openencryptedfilerawa)</span></span>                                                                                                                                                                                      |
| [<span data-ttu-id="cc10d-120">**ReadEncryptedFileRaw**</span><span class="sxs-lookup"><span data-stu-id="cc10d-120">**ReadEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-readencryptedfileraw)   | <span data-ttu-id="cc10d-121">Lettura di un file crittografato lasciando i dati in formato crittografato</span><span class="sxs-lookup"><span data-stu-id="cc10d-121">Read an encrypted file leaving its data in encrypted format</span></span>                                                                                                                                                                                                                   |
| [<span data-ttu-id="cc10d-122">**WriteEncryptedFileRaw**</span><span class="sxs-lookup"><span data-stu-id="cc10d-122">**WriteEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-writeencryptedfileraw) | <span data-ttu-id="cc10d-123">Scrivere un file crittografato lasciando i dati in formato crittografato</span><span class="sxs-lookup"><span data-stu-id="cc10d-123">Write an encrypted file leaving its data in encrypted format</span></span>                                                                                                                                                                                                                  |
| [<span data-ttu-id="cc10d-124">**ImportCallback**</span><span class="sxs-lookup"><span data-stu-id="cc10d-124">**ImportCallback**</span></span>](/windows/desktop/api/WinBase/nc-winbase-pfe_import_func)               | <span data-ttu-id="cc10d-125">Callback definito dall'applicazione per l'uso con [ **WriteEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-writeencryptedfileraw)</span><span class="sxs-lookup"><span data-stu-id="cc10d-125">Application-defined callback for use with [**WriteEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-writeencryptedfileraw)</span></span>                                                                                                                                                                              |
| [<span data-ttu-id="cc10d-126">**ExportCallback**</span><span class="sxs-lookup"><span data-stu-id="cc10d-126">**ExportCallback**</span></span>](/windows/desktop/api/WinBase/nc-winbase-pfe_export_func)               | <span data-ttu-id="cc10d-127">Callback definito dall'applicazione per l'uso con [ **ReadEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-readencryptedfileraw)</span><span class="sxs-lookup"><span data-stu-id="cc10d-127">Application-defined callback for use with [**ReadEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-readencryptedfileraw)</span></span>                                                                                                                                                                                |



 

 

 
