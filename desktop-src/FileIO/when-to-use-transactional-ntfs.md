---
description: Utilizzare Transactional NTFS per mantenere l'integrità dei dati.
ms.assetid: 886d6075-57e8-47db-aec5-77660d0a53f9
title: Quando utilizzare Transactional NTFS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 28c0a134a8cb5824337022fedf14fe3db3c6f76c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106313869"
---
# <a name="when-to-use-transactional-ntfs"></a><span data-ttu-id="1f080-103">Quando utilizzare Transactional NTFS</span><span class="sxs-lookup"><span data-stu-id="1f080-103">When to Use Transactional NTFS</span></span>

<span data-ttu-id="1f080-104">Un'applicazione può utilizzare Transactional NTFS (TxF) per mantenere l'integrità dei dati su disco durante le condizioni di errore impreviste.</span><span class="sxs-lookup"><span data-stu-id="1f080-104">An application can use Transactional NTFS (TxF) to preserve the integrity of data on disk during unexpected error conditions.</span></span> <span data-ttu-id="1f080-105">In generale, un'applicazione deve prendere in considerazione l'uso di TxF se l'applicazione Scarica i file e usa altre tecniche per mantenere l'integrità dei dati.</span><span class="sxs-lookup"><span data-stu-id="1f080-105">In general, an application should consider using TxF if the application is flushing files and using other techniques to maintain data integrity.</span></span> <span data-ttu-id="1f080-106">TxF può migliorare e semplificare il codice di gestione degli errori dell'applicazione, migliorando al tempo stesso il ripristino e l'affidabilità degli errori.</span><span class="sxs-lookup"><span data-stu-id="1f080-106">TxF can perform better and simplify the application's error handling code while improving error recovery and reliability.</span></span> <span data-ttu-id="1f080-107">Nelle sezioni seguenti di questo argomento vengono forniti esempi di scenari per l'utilizzo di TxF.</span><span class="sxs-lookup"><span data-stu-id="1f080-107">The following sections in this topic provide examples of scenarios for you to use TxF.</span></span>

## <a name="updating-a-file"></a><span data-ttu-id="1f080-108">Aggiornamento di un file</span><span class="sxs-lookup"><span data-stu-id="1f080-108">Updating a File</span></span>

<span data-ttu-id="1f080-109">L'aggiornamento di un file è un'operazione comune e in genere semplice.</span><span class="sxs-lookup"><span data-stu-id="1f080-109">The updating of a file is a common and typically simple operation.</span></span> <span data-ttu-id="1f080-110">Tuttavia, se il sistema o l'applicazione ha esito negativo mentre un'applicazione aggiorna le informazioni su un disco, il risultato può essere irreversibile, perché i dati utente possono essere danneggiati da un'operazione di aggiornamento dei file parzialmente completata.</span><span class="sxs-lookup"><span data-stu-id="1f080-110">However, if the system or application fails while an application is updating information on a disk, the result can be catastrophic, because the user data can be corrupted by a file update operation that is partially completed.</span></span> <span data-ttu-id="1f080-111">Le applicazioni affidabili eseguono spesso sequenze complesse di copie di file e rinominazioni di file per garantire che i dati non siano danneggiati in caso di errore di un sistema.</span><span class="sxs-lookup"><span data-stu-id="1f080-111">Robust applications often perform complex sequences of file copies and file renames to ensure that data is not corrupted if a system fails.</span></span>

<span data-ttu-id="1f080-112">TxF rende semplice per un'applicazione proteggere le operazioni di aggiornamento dei file da errori di sistema o di applicazione.</span><span class="sxs-lookup"><span data-stu-id="1f080-112">TxF makes it simple for an application to protect file update operations from system or application failure.</span></span> <span data-ttu-id="1f080-113">Per aggiornare un file in modo sicuro, l'applicazione apre il file in modalità transazionale, esegue gli aggiornamenti necessari e quindi esegue il commit della transazione.</span><span class="sxs-lookup"><span data-stu-id="1f080-113">To update a file safely, the application opens the file in transacted mode, makes the necessary updates, and then commits the transaction.</span></span> <span data-ttu-id="1f080-114">Se il sistema o l'applicazione ha esito negativo durante l'aggiornamento del file, TxF ripristina automaticamente il file nello stato in cui si trovava prima dell'avvio dell'aggiornamento del file, evitando così il danneggiamento del file.</span><span class="sxs-lookup"><span data-stu-id="1f080-114">If the system or application fails during the file update, then TxF automatically restores the file to the state that it had before the file update began, which avoids file corruption.</span></span>

## <a name="multi-file-updates"></a><span data-ttu-id="1f080-115">Aggiornamenti su più file</span><span class="sxs-lookup"><span data-stu-id="1f080-115">Multi-File Updates</span></span>

<span data-ttu-id="1f080-116">TxF è ancora più importante quando una singola operazione logica interessa più file.</span><span class="sxs-lookup"><span data-stu-id="1f080-116">TxF is even more important when a single logical operation affects multiple files.</span></span> <span data-ttu-id="1f080-117">Se ad esempio si vuole usare uno strumento per rinominare una delle pagine HTML o ASP in un sito Web, uno strumento ben progettato correggerà anche tutti i collegamenti per usare il nuovo nome file.</span><span class="sxs-lookup"><span data-stu-id="1f080-117">For example, if you want to use a tool to rename one of the HTML or ASP pages on a website, a well-designed tool would also fix all links to use the new file name.</span></span> <span data-ttu-id="1f080-118">Tuttavia, un errore durante questa operazione lascia il sito Web in uno stato incoerente, con alcuni collegamenti che fanno riferimento al nome del file precedente.</span><span class="sxs-lookup"><span data-stu-id="1f080-118">However, a failure during this operation leaves the website in an inconsistent state, with some of the links still referring to the old file name.</span></span> <span data-ttu-id="1f080-119">Eseguendo l'operazione di ridenominazione dei file e l'operazione di correzione del collegamento di una singola transazione, TxF garantisce che la ridenominazione e il collegamento del file vengano risolti o non superati come un'unica operazione.</span><span class="sxs-lookup"><span data-stu-id="1f080-119">By making the file rename operation and the link fixing operation a single transaction, TxF ensures that the file rename and link fix succeed or fail as a single operation.</span></span>

## <a name="consistent-concurrent-updates"></a><span data-ttu-id="1f080-120">Aggiornamenti simultanei coerenti</span><span class="sxs-lookup"><span data-stu-id="1f080-120">Consistent Concurrent Updates</span></span>

<span data-ttu-id="1f080-121">TxF isola le transazioni simultanee.</span><span class="sxs-lookup"><span data-stu-id="1f080-121">TxF isolates concurrent transactions.</span></span> <span data-ttu-id="1f080-122">Se un'applicazione apre un file per una lettura transazionale mentre un'altra applicazione ha lo stesso file aperto per un aggiornamento transazionale, TxF isola gli effetti delle due transazioni una dall'altra.</span><span class="sxs-lookup"><span data-stu-id="1f080-122">If an application opens a file for a transactional read while another application has the same file open for a transactional update, TxF isolates the effects of the two transactions from one another.</span></span> <span data-ttu-id="1f080-123">In altre parole, il lettore transazionale Visualizza sempre un'unica versione coerente del file, anche quando il file è in fase di aggiornamento da parte di un'altra transazione.</span><span class="sxs-lookup"><span data-stu-id="1f080-123">In other words, the transactional reader always views a single, consistent version of the file, even while that file is in the process of being updated by another transaction.</span></span>

<span data-ttu-id="1f080-124">Un'applicazione può usare questa funzionalità per consentire ai clienti di visualizzare i file mentre altri clienti effettuano aggiornamenti.</span><span class="sxs-lookup"><span data-stu-id="1f080-124">An application can use this functionality to allow customers to view files while other customers make updates.</span></span> <span data-ttu-id="1f080-125">Un server Web transazionale, ad esempio, può fornire un'unica visualizzazione coerente dei file, mentre un altro strumento Aggiorna contemporaneamente tali file.</span><span class="sxs-lookup"><span data-stu-id="1f080-125">For example, a transactional web server can provide a single, consistent view of files while another tool concurrently updates those files.</span></span>

> [!Note]  
> <span data-ttu-id="1f080-126">TxF non supporta gli aggiornamenti simultanei da più writer in transazioni diverse.</span><span class="sxs-lookup"><span data-stu-id="1f080-126">TxF does not support concurrent updates by multiple writers in different transactions.</span></span> <span data-ttu-id="1f080-127">TxF supporta solo un singolo writer con più lettori simultanei e coerenti.</span><span class="sxs-lookup"><span data-stu-id="1f080-127">TxF supports only a single writer with multiple concurrent and consistent readers.</span></span>

 

## <a name="coordinating-with-other-transacted-resource-managers"></a><span data-ttu-id="1f080-128">Coordinamento con altri gestori di risorse transazionali</span><span class="sxs-lookup"><span data-stu-id="1f080-128">Coordinating With Other Transacted Resource Managers</span></span>

<span data-ttu-id="1f080-129">È inoltre possibile utilizzare le transazioni utilizzate con i file system transazionali con il registro di sistema transazionale.</span><span class="sxs-lookup"><span data-stu-id="1f080-129">Transactions used with transacted file systems may also be used with the transacted registry.</span></span> <span data-ttu-id="1f080-130">Gli aggiornamenti al file e al registro di sistema vengono coordinati con una singola transazione.</span><span class="sxs-lookup"><span data-stu-id="1f080-130">Updates to the file and the registry are coordinated with a single transaction.</span></span>

<span data-ttu-id="1f080-131">Utilizzando le transazioni [Distributed Transaction Coordinator](/previous-versions/windows/desktop/mscs/distributed-transaction-coordinator) (DTC) o System. Transactions, gli aggiornamenti apportati a SQL, MSMQ e altre risorse transazionali possono essere coordinati con gli aggiornamenti di file transazionali.</span><span class="sxs-lookup"><span data-stu-id="1f080-131">By using [Distributed Transaction Coordinator](/previous-versions/windows/desktop/mscs/distributed-transaction-coordinator) (DTC) transactions or System.Transactions, updates made to SQL, MSMQ, and other transactional resources can be coordinated with transacted file updates.</span></span> <span data-ttu-id="1f080-132">Per ulteriori informazioni, vedere [IKernelTransaction](/previous-versions/windows/desktop/aa344210(v=vs.85))di DTC.</span><span class="sxs-lookup"><span data-stu-id="1f080-132">For more information, see DTC's [IKernelTransaction](/previous-versions/windows/desktop/aa344210(v=vs.85)).</span></span>

## <a name="unsupported-scenarios"></a><span data-ttu-id="1f080-133">Scenari non supportati</span><span class="sxs-lookup"><span data-stu-id="1f080-133">Unsupported Scenarios</span></span>

<span data-ttu-id="1f080-134">TxF non supporta gli scenari di transazione seguenti:</span><span class="sxs-lookup"><span data-stu-id="1f080-134">TxF does not support the following transaction scenarios:</span></span>

-   <span data-ttu-id="1f080-135">Transazioni sui volumi di rete, ad esempio sulle condivisioni file.</span><span class="sxs-lookup"><span data-stu-id="1f080-135">Transactions on network volumes, for example on file shares.</span></span> <span data-ttu-id="1f080-136">TxF non è supportato dai protocolli CIFS/SMB.</span><span class="sxs-lookup"><span data-stu-id="1f080-136">TxF is not supported by the CIFS/SMB protocols.</span></span>
-   <span data-ttu-id="1f080-137">Transazioni in qualsiasi file system diverso da NTFS.</span><span class="sxs-lookup"><span data-stu-id="1f080-137">Transactions on any file system other than NTFS.</span></span>
-   <span data-ttu-id="1f080-138">Operazioni transazionali sui file memorizzati nella cache dalla memorizzazione nella cache sul lato client.</span><span class="sxs-lookup"><span data-stu-id="1f080-138">Transacted operations against files cached by client-side caching.</span></span>
-   <span data-ttu-id="1f080-139">Accesso ai file tramite ID oggetto.</span><span class="sxs-lookup"><span data-stu-id="1f080-139">File access using object IDs.</span></span>
-   <span data-ttu-id="1f080-140">Qualsiasi scenario di writer condiviso.</span><span class="sxs-lookup"><span data-stu-id="1f080-140">Any shared writer scenario.</span></span>
-   <span data-ttu-id="1f080-141">Qualsiasi situazione in cui un file viene aperto per un lungo periodo di tempo (giorni o settimane).</span><span class="sxs-lookup"><span data-stu-id="1f080-141">Any situation where a file is opened for an extended period of time (days or weeks).</span></span>

 

 
