---
description: Il file system NTFS associa un identificatore a 64 bit senza segno a ogni Journal delle modifiche.
ms.assetid: 5ae79460-b69a-4901-a417-1d5358dcba29
title: Utilizzo dell'identificatore del journal delle modifiche
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 692acf98403e45b6bdafd3cd4791a64dd1beb532
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106309527"
---
# <a name="using-the-change-journal-identifier"></a><span data-ttu-id="71af2-103">Utilizzo dell'identificatore del journal delle modifiche</span><span class="sxs-lookup"><span data-stu-id="71af2-103">Using the Change Journal Identifier</span></span>

<span data-ttu-id="71af2-104">Il file system NTFS associa un identificatore a 64 bit senza segno a ogni Journal delle modifiche.</span><span class="sxs-lookup"><span data-stu-id="71af2-104">The NTFS file system associates an unsigned 64-bit identifier with each change journal.</span></span> <span data-ttu-id="71af2-105">Il journal viene contrassegnato con questo identificatore quando viene creato.</span><span class="sxs-lookup"><span data-stu-id="71af2-105">The journal is stamped with this identifier when it is created.</span></span> <span data-ttu-id="71af2-106">Il file system timbra il Journal con un nuovo identificatore in cui i record del numero di sequenza di aggiornamento (USN) esistenti sono o possono essere inutilizzabili.</span><span class="sxs-lookup"><span data-stu-id="71af2-106">The file system stamps the journal with a new identifier where the existing update sequence number (USN) records either are or may be unusable.</span></span>

<span data-ttu-id="71af2-107">Il file system NTFS, ad esempio, consente di contrassegnare un journal delle modifiche con un nuovo identificatore quando un volume viene spostato da una versione di NTFS a un'altra e quindi viceversa.</span><span class="sxs-lookup"><span data-stu-id="71af2-107">For example, the NTFS file system restamps a change journal with a new identifier when a volume is moved from one version of NTFS to another and then back.</span></span> <span data-ttu-id="71af2-108">Tale spostamento può verificarsi in un ambiente a doppio avvio o quando si utilizza un supporto rimovibile.</span><span class="sxs-lookup"><span data-stu-id="71af2-108">Such a move can happen in a dual-boot environment or when working with removable media.</span></span>

<span data-ttu-id="71af2-109">Per ottenere l'identificatore del journal delle modifiche corrente in un volume specificato, usare il codice di controllo del [**\_ \_ \_ journal USN della query FSCTL**](/windows/win32/api/winioctl/ni-winioctl-fsctl_query_usn_journal) .</span><span class="sxs-lookup"><span data-stu-id="71af2-109">To obtain the identifier of the current change journal on a specified volume, use the [**FSCTL\_QUERY\_USN\_JOURNAL**](/windows/win32/api/winioctl/ni-winioctl-fsctl_query_usn_journal) control code.</span></span> <span data-ttu-id="71af2-110">Per eseguire questa operazione e tutte le altre operazioni Journal delle modifiche, è necessario disporre dei privilegi di amministratore di sistema.</span><span class="sxs-lookup"><span data-stu-id="71af2-110">To perform this and all other change journal operations, you must have system administrator privileges.</span></span> <span data-ttu-id="71af2-111">Ovvero, è necessario essere un membro del gruppo Administrators.</span><span class="sxs-lookup"><span data-stu-id="71af2-111">That is, you must be a member of the Administrators group.</span></span>

<span data-ttu-id="71af2-112">Quando un amministratore Elimina e ricrea il Journal delle modifiche, ad esempio quando il valore USN corrente si avvicina al valore USN massimo possibile, i valori USN iniziano di nuovo da zero.</span><span class="sxs-lookup"><span data-stu-id="71af2-112">When an administrator deletes and re-creates the change journal, for example when the current USN value approaches the maximum possible USN value, the USN values begin again from zero.</span></span> <span data-ttu-id="71af2-113">Quando NTFS file system timbra un journal con un nuovo identificatore anziché ricreare il Journal, non reimposta l'USN su zero, ma continua dall'USN corrente.</span><span class="sxs-lookup"><span data-stu-id="71af2-113">When the NTFS file system stamps a journal with a new identifier rather than re-creating the journal, it does not reset the USN to zero but continues from the current USN.</span></span> <span data-ttu-id="71af2-114">In entrambi i casi, tutti i USNs esistenti sono inferiori a qualsiasi USNs futura.</span><span class="sxs-lookup"><span data-stu-id="71af2-114">In either case, all existing USNs are less than any future USNs.</span></span>

<span data-ttu-id="71af2-115">Quando sono necessarie informazioni su un set specifico di record, usare il codice di controllo del [**\_ \_ \_ journal USN della query FSCTL**](/windows/win32/api/winioctl/ni-winioctl-fsctl_query_usn_journal) per ottenere l'identificatore del journal delle modifiche.</span><span class="sxs-lookup"><span data-stu-id="71af2-115">When you need information on a specific set of records, use the [**FSCTL\_QUERY\_USN\_JOURNAL**](/windows/win32/api/winioctl/ni-winioctl-fsctl_query_usn_journal) control code to obtain the change journal identifier.</span></span> <span data-ttu-id="71af2-116">Usare quindi il codice di controllo [**\_ \_ \_ journal USN FSCTL**](/windows/win32/api/winioctl/ni-winioctl-fsctl_read_usn_journal) per leggere i record del journal di interesse.</span><span class="sxs-lookup"><span data-stu-id="71af2-116">Then use the [**FSCTL\_READ\_USN\_JOURNAL**](/windows/win32/api/winioctl/ni-winioctl-fsctl_read_usn_journal) control code to read the journal records of interest.</span></span> <span data-ttu-id="71af2-117">Il file system NTFS restituisce solo i record validi per il Journal specificato dall'identificatore.</span><span class="sxs-lookup"><span data-stu-id="71af2-117">The NTFS file system only returns records that are valid for the journal specified by the identifier.</span></span>

<span data-ttu-id="71af2-118">Per leggere il Journal, l'applicazione richiede sia il USNs dei record che l'identificatore.</span><span class="sxs-lookup"><span data-stu-id="71af2-118">Your application needs both the records' USNs and the identifier to read the journal.</span></span> <span data-ttu-id="71af2-119">Questo requisito fornisce un controllo di integrità nei casi in cui l'applicazione deve ignorare i record esistenti nel file e in cui i record sono stati scritti nelle istanze precedenti del journal per lo stesso volume.</span><span class="sxs-lookup"><span data-stu-id="71af2-119">This requirement provides an integrity check for cases where your application should ignore the existing records in the file and where records were written in previous instances of the journal for the same volume.</span></span>

<span data-ttu-id="71af2-120">Per ottenere i record a cui si è interessati, è necessario iniziare dal record meno recente, ovvero con l'USN più basso, ed eseguire l'analisi in futuro fino a individuare il primo record di interesse.</span><span class="sxs-lookup"><span data-stu-id="71af2-120">To obtain the records in which you are interested, you must start at the oldest record (that is, with the lowest USN) and scan forward until you locate the first record of interest.</span></span>

 

 
