---
description: Considerazioni per lo spostamento e la sostituzione dei file tramite le funzioni CopyFileEx, CreateFile, ReplaceFile e MoveFileEx.
ms.assetid: 4872af0d-42e8-4576-9aa9-4b8671375f2e
title: Trasferimento e sostituzione di file
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7d7f08d2bd8d07645076620e839d7d12f5969502
ms.sourcegitcommit: 3d9dce1bd6c84e2b51759e940aa95aa9b459cd20
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/04/2021
ms.locfileid: "106320832"
---
# <a name="moving-and-replacing-files"></a><span data-ttu-id="94572-103">Trasferimento e sostituzione di file</span><span class="sxs-lookup"><span data-stu-id="94572-103">Moving and Replacing Files</span></span>

<span data-ttu-id="94572-104">Prima di poter eseguire un'operazione di copia, è necessario chiudere o aprire il file di origine solo per la lettura.</span><span class="sxs-lookup"><span data-stu-id="94572-104">Before a copy operation can be performed, the source file must be closed or opened only for reading.</span></span> <span data-ttu-id="94572-105">Nessun thread può disporre del file di origine aperto per la scrittura.</span><span class="sxs-lookup"><span data-stu-id="94572-105">No thread can have the the source file opened for writing.</span></span> <span data-ttu-id="94572-106">Per copiare un file esistente in un nuovo file, usare la funzione [**CopyFile**](/windows/desktop/api/WinBase/nf-winbase-copyfile) o [**CopyFileEx**](/windows/desktop/api/WinBase/nf-winbase-copyfileexa) .</span><span class="sxs-lookup"><span data-stu-id="94572-106">To copy an existing file to a new one, use the [**CopyFile**](/windows/desktop/api/WinBase/nf-winbase-copyfile) or [**CopyFileEx**](/windows/desktop/api/WinBase/nf-winbase-copyfileexa) function.</span></span> <span data-ttu-id="94572-107">Le applicazioni possono specificare se **CopyFile** e **CopyFileEx** hanno esito negativo se il file di destinazione esiste già.</span><span class="sxs-lookup"><span data-stu-id="94572-107">Applications can specify whether **CopyFile** and **CopyFileEx** fail if the destination file already exists.</span></span> <span data-ttu-id="94572-108">Se il file di destinazione esiste ed è aperto, è necessario che sia stato aperto con le autorizzazioni di condivisione applicabili.</span><span class="sxs-lookup"><span data-stu-id="94572-108">If the destination file does exist and is open, it must have been opened with applicable sharing permissions.</span></span> <span data-ttu-id="94572-109">Per ulteriori informazioni, vedere [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea).</span><span class="sxs-lookup"><span data-stu-id="94572-109">For more information, see [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea).</span></span>

<span data-ttu-id="94572-110">La funzione [**CopyFileEx**](/windows/desktop/api/WinBase/nf-winbase-copyfileexa) consente anche a un'applicazione di specificare l'indirizzo di una funzione di callback (vedere [**CopyProgressRoutine**](/windows/desktop/api/WinBase/nc-winbase-lpprogress_routine)) che viene chiamato ogni volta che è stata copiata un'altra parte del file.</span><span class="sxs-lookup"><span data-stu-id="94572-110">The [**CopyFileEx**](/windows/desktop/api/WinBase/nf-winbase-copyfileexa) function also allows an application to specify the address of a callback function (see [**CopyProgressRoutine**](/windows/desktop/api/WinBase/nc-winbase-lpprogress_routine)) that is called each time another portion of the file has been copied.</span></span> <span data-ttu-id="94572-111">L'applicazione può utilizzare queste informazioni per visualizzare un indicatore che indica il numero totale di byte copiati come percentuale delle dimensioni totali del file.</span><span class="sxs-lookup"><span data-stu-id="94572-111">The application can use this information to display an indicator that shows the total number of bytes copied as a percent of the total file size.</span></span>

<span data-ttu-id="94572-112">La funzione [**ReplaceFile**](/windows/desktop/api/WinBase/nf-winbase-replacefilea) sostituisce un file con un altro file, con l'opzione di creare una copia di backup del file originale.</span><span class="sxs-lookup"><span data-stu-id="94572-112">The [**ReplaceFile**](/windows/desktop/api/WinBase/nf-winbase-replacefilea) function replaces one file with another file, with the option of creating a backup copy of the original file.</span></span> <span data-ttu-id="94572-113">La funzione conserva gli attributi del file originale, ad esempio l'ora di creazione, gli ACL e l'attributo di crittografia.</span><span class="sxs-lookup"><span data-stu-id="94572-113">The function preserves attributes of the original file, such as its creation time, ACLs, and encryption attribute.</span></span>

<span data-ttu-id="94572-114">Prima che un'applicazione possa spostarla, è necessario chiudere anche un file.</span><span class="sxs-lookup"><span data-stu-id="94572-114">A file must also be closed before an application can move it.</span></span> <span data-ttu-id="94572-115">Le funzioni [**MoveFile**](/windows/desktop/api/WinBase/nf-winbase-movefile) e [**MoveFileEx**](/windows/desktop/api/WinBase/nf-winbase-movefileexa) copiano un file esistente in un nuovo percorso ed Elimina l'originale.</span><span class="sxs-lookup"><span data-stu-id="94572-115">The [**MoveFile**](/windows/desktop/api/WinBase/nf-winbase-movefile) and [**MoveFileEx**](/windows/desktop/api/WinBase/nf-winbase-movefileexa) functions copy an existing file to a new location and deletes the original.</span></span>

<span data-ttu-id="94572-116">La funzione [**MoveFileEx**](/windows/desktop/api/WinBase/nf-winbase-movefileexa) consente anche a un'applicazione di specificare come spostare il file.</span><span class="sxs-lookup"><span data-stu-id="94572-116">The [**MoveFileEx**](/windows/desktop/api/WinBase/nf-winbase-movefileexa) function also allows an application to specify how to move the file.</span></span> <span data-ttu-id="94572-117">La funzione può sostituire un file esistente, spostare un file tra volumi e ritardare lo spostamento del file fino al riavvio del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="94572-117">The function can replace an existing file, move a file across volumes, and delay moving the file until the operating system is restarted.</span></span>

 

 



