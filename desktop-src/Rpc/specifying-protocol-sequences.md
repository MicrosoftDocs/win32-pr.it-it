---
title: Specifica di sequenze di protocollo
description: Le applicazioni server devono selezionare una o più sequenze di protocollo da utilizzare durante la comunicazione con il client in rete. La scelta delle sequenze di protocollo dipende dalla rete. Vedere interpretazione delle informazioni di binding e selezione di una sequenza di protocollo.
ms.assetid: bde26a86-dc4f-4d18-ba51-c6536c62bb75
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a700299e3d2bd98fa5fb0aaebea25e907d85afb0
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104338486"
---
# <a name="specifying-protocol-sequences"></a><span data-ttu-id="71370-105">Specifica di sequenze di protocollo</span><span class="sxs-lookup"><span data-stu-id="71370-105">Specifying Protocol Sequences</span></span>

<span data-ttu-id="71370-106">Le applicazioni server devono selezionare una o più sequenze di protocollo da utilizzare durante la comunicazione con il client in rete.</span><span class="sxs-lookup"><span data-stu-id="71370-106">Server applications must select one or more protocol sequences to use when communicating with the client over the network.</span></span> <span data-ttu-id="71370-107">La scelta delle sequenze di protocollo dipende dalla rete.</span><span class="sxs-lookup"><span data-stu-id="71370-107">The choice of protocol sequences is network-dependent.</span></span> <span data-ttu-id="71370-108">Vedere [interpretazione delle informazioni di binding](interpreting-binding-information.md) e [selezione di una sequenza di protocollo](selecting-a-protocol-sequence.md).</span><span class="sxs-lookup"><span data-stu-id="71370-108">See [Interpreting Binding Information](interpreting-binding-information.md) and [Selecting a Protocol Sequence](selecting-a-protocol-sequence.md).</span></span>

<span data-ttu-id="71370-109">Il programma server può consentire ai client di connettersi utilizzando qualsiasi sequenza di protocollo supportata dalla rete.</span><span class="sxs-lookup"><span data-stu-id="71370-109">Your server program may allow clients to connect using any protocol sequence that the network supports.</span></span> <span data-ttu-id="71370-110">A tale scopo, richiamare [**RpcServerUseAllProtSeqs**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqs) e passare RPC \_ C \_ PROTSEQ \_ Max \_ Rich \_ default come primo parametro.</span><span class="sxs-lookup"><span data-stu-id="71370-110">To do this, invoke [**RpcServerUseAllProtseqs**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqs) and pass RPC\_C\_PROTSEQ\_MAX\_REQS\_DEFAULT as the first parameter.</span></span> <span data-ttu-id="71370-111">Tuttavia, questo non è l'approccio consigliato.</span><span class="sxs-lookup"><span data-stu-id="71370-111">However, that is not the recommended approach.</span></span> <span data-ttu-id="71370-112">Piuttosto, l'uso di **ncalrpc** per le chiamate locali e **ncacn \_ \_ TCP** o **ncacn \_ http** per le chiamate remote è in genere sufficiente.</span><span class="sxs-lookup"><span data-stu-id="71370-112">Rather, using **ncalrpc** for local calls and **ncacn\_ip\_tcp** or **ncacn\_http** for remote calls is usually sufficient.</span></span> <span data-ttu-id="71370-113">Le reti eterogeneo non sono comuni e praticamente tutte le reti supportano TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="71370-113">Heterogenous networks are uncommon, and virtually all networks support TCP/IP.</span></span>

<span data-ttu-id="71370-114">Se si desidera che il client limiti l'allocazione delle porte per gli endpoint dinamici a un intervallo di porte specifico, chiamare invece [**RpcServerUseAllProtseqsEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsex) .</span><span class="sxs-lookup"><span data-stu-id="71370-114">If you want your client to restrict port allocation for dynamic endpoints to a specific port range, call [**RpcServerUseAllProtseqsEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsex) instead.</span></span> <span data-ttu-id="71370-115">Questa funzione è specifica di Microsoft RPC ed è estremamente utile per le chiamate a procedure remote che passano attraverso un firewall.</span><span class="sxs-lookup"><span data-stu-id="71370-115">This function is specific to Microsoft RPC, and is extremely useful for remote procedure calls that pass through a firewall.</span></span> <span data-ttu-id="71370-116">Usa un parametro aggiuntivo per passare i flag di controllo dell'allocazione delle porte alla funzione.</span><span class="sxs-lookup"><span data-stu-id="71370-116">It uses an extra parameter to pass port allocation control flags to the function.</span></span> <span data-ttu-id="71370-117">Vedere [configurazione del registro di sistema per le allocazioni delle porte e l'associazione selettiva](configuring-the-windows-xp-2000-nt-registry-for-port-allocations-and-selective-binding.md).</span><span class="sxs-lookup"><span data-stu-id="71370-117">See [Configuring the Registry for Port Allocations and Selective Binding](configuring-the-windows-xp-2000-nt-registry-for-port-allocations-and-selective-binding.md).</span></span>

<span data-ttu-id="71370-118">È possibile specificare le sequenze di protocollo e le informazioni sugli endpoint nel file MIDL quando si sviluppano le interfacce del server.</span><span class="sxs-lookup"><span data-stu-id="71370-118">You can specify protocol sequences and endpoint information in your MIDL file when you develop the server's interfaces.</span></span> <span data-ttu-id="71370-119">In tal caso, il server deve utilizzare [**RpcServerUseAllProtseqsIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsif) per registrare tutte le sequenze di protocollo e le informazioni sull'endpoint associate fornite nel file IDL.</span><span class="sxs-lookup"><span data-stu-id="71370-119">If you do, your server should use [**RpcServerUseAllProtseqsIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsif) to register all the protocol sequences and associated endpoint information provided in the IDL file.</span></span> <span data-ttu-id="71370-120">Inoltre, esiste una funzione [**RpcServerUseAllProtseqsIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsifex) corrispondente che consente anche al server di passare i flag di allocazione delle porte-controllo.</span><span class="sxs-lookup"><span data-stu-id="71370-120">In addition, there is a corresponding [**RpcServerUseAllProtseqsIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsifex) function that also allows the server to pass port allocation–control flags.</span></span>

<span data-ttu-id="71370-121">Se si desidera configurare i programmi client e server per comunicare con una sequenza di protocollo specificata, l'applicazione server deve chiamare [**RpcServerUseProtseq**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseq).</span><span class="sxs-lookup"><span data-stu-id="71370-121">If you want to configure your client and server programs to communicate with a specified protocol sequence, the server application should call [**RpcServerUseProtseq**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseq).</span></span> <span data-ttu-id="71370-122">Per un elenco completo delle sequenze del protocollo RPC Microsoft, vedere [costanti di sequenza del protocollo](protocol-sequence-constants.md).</span><span class="sxs-lookup"><span data-stu-id="71370-122">For a complete list of Microsoft RPC protocol sequences, see [Protocol Sequence Constants](protocol-sequence-constants.md).</span></span>

<span data-ttu-id="71370-123">Microsoft RPC fornisce inoltre [**RpcServerUseProtseqEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqex) per consentire alle applicazioni di selezionare sequenze di protocolli specifiche e di controllare l'allocazione dinamica delle porte.</span><span class="sxs-lookup"><span data-stu-id="71370-123">Microsoft RPC also provides [**RpcServerUseProtseqEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqex) to enable applications to select specific protocol sequences and control dynamic port allocation.</span></span>

<span data-ttu-id="71370-124">Oltre ai protocolli orientati alla connessione, Microsoft RPC supporta anche i protocolli di datagramma (senza connessione).</span><span class="sxs-lookup"><span data-stu-id="71370-124">In addition to connection-oriented protocols, Microsoft RPC supports datagram (connectionless) protocols as well.</span></span> <span data-ttu-id="71370-125">Sono consigliati i protocolli orientati alla connessione. i protocolli di datagramma hanno set di funzionalità diversi rispetto ai protocolli orientati alla connessione e devono essere usati solo se uno sviluppatore di sistemi distribuiti richiede una funzionalità disponibile solo nei protocolli di datagramma.</span><span class="sxs-lookup"><span data-stu-id="71370-125">Connection-oriented protocols are recommended; datagram protocols have different feature sets than connection-oriented protocols, and should only be used if a distributed system developer requires a feature available only in datagram protocols.</span></span> <span data-ttu-id="71370-126">Di seguito sono riportate alcune delle funzionalità disponibili quando si usano protocolli di datagramma:</span><span class="sxs-lookup"><span data-stu-id="71370-126">Some of the features available when using datagram protocols are:</span></span>

-   <span data-ttu-id="71370-127">I datagrammi supportano i protocolli di trasporto senza connessione UDP e IPX.</span><span class="sxs-lookup"><span data-stu-id="71370-127">Datagrams support the UDP and IPX connectionless transport protocols.</span></span>
-   <span data-ttu-id="71370-128">Poiché non è necessario stabilire e mantenere una connessione, il protocollo RPC del datagramma richiede meno overhead delle risorse.</span><span class="sxs-lookup"><span data-stu-id="71370-128">Because it is not necessary to establish and maintain a connection, the datagram RPC protocol requires less resource overhead.</span></span>
-   <span data-ttu-id="71370-129">Datagrammi consente un binding più rapido.</span><span class="sxs-lookup"><span data-stu-id="71370-129">Datagrams enable faster binding.</span></span>
-   <span data-ttu-id="71370-130">Come per la RPC orientata alla connessione, le chiamate RPC di datagramma sono per impostazione predefinita *nonidempotent*.</span><span class="sxs-lookup"><span data-stu-id="71370-130">As with connection-oriented RPC, datagram RPC calls are by default *nonidempotent*.</span></span> <span data-ttu-id="71370-131">Ciò significa che la chiamata non viene eseguita più di una volta.</span><span class="sxs-lookup"><span data-stu-id="71370-131">This means the call is guaranteed not to be executed more than once.</span></span> <span data-ttu-id="71370-132">Tuttavia, una funzione può essere contrassegnata come idempotente nel file IDL indicando a RPC che è innocuo eseguire la funzione più volte in risposta a una singola richiesta client.</span><span class="sxs-lookup"><span data-stu-id="71370-132">However, a function can be marked as idempotent in the IDL file telling RPC that it is harmless to execute the function more than once in response to a single, client request.</span></span> <span data-ttu-id="71370-133">In questo modo, il tempo di esecuzione verrà mantenuto nel server.</span><span class="sxs-lookup"><span data-stu-id="71370-133">This allows the run time to maintain less state on the server.</span></span> <span data-ttu-id="71370-134">Si noti che una chiamata idempotente verrebbe eseguita di nuovo solo in rare circostanze in una rete instabile.</span><span class="sxs-lookup"><span data-stu-id="71370-134">Note that an idempotent call would be re-executed only in rare circumstances on an unstable network.</span></span>
-   <span data-ttu-id="71370-135">Datagramma RPC supporta l'attributo [broadcast](/windows/desktop/Midl/broadcast) IDL.</span><span class="sxs-lookup"><span data-stu-id="71370-135">Datagram RPC supports the [broadcast](/windows/desktop/Midl/broadcast) IDL attribute.</span></span> <span data-ttu-id="71370-136">Broadcast consente a un client di emettere messaggi su più server contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="71370-136">Broadcast enables a client to issue messages to multiple servers at the same time.</span></span> <span data-ttu-id="71370-137">Ciò consente al client di individuare uno dei diversi server disponibili nella rete o di controllare contemporaneamente più server.</span><span class="sxs-lookup"><span data-stu-id="71370-137">This lets the client locate one of several available servers on the network, or control multiple servers simultaneously.</span></span> <span data-ttu-id="71370-138">Si noti che il datagramma broadcast è valido solo all'interno del collegamento locale e in genere non attraversa i router.</span><span class="sxs-lookup"><span data-stu-id="71370-138">Note that the datagram broadcast is valid only within the local link, and usually does not cross routers.</span></span> <span data-ttu-id="71370-139">Le chiamate broadcast sono implicitamente idempotente.</span><span class="sxs-lookup"><span data-stu-id="71370-139">Broadcast calls are implicitly idempotent.</span></span> <span data-ttu-id="71370-140">Se la chiamata contiene \[ parametri **out** \] , viene restituita solo la prima risposta al server.</span><span class="sxs-lookup"><span data-stu-id="71370-140">If the call contains \[**out**\] parameters, only the first server response is returned.</span></span> <span data-ttu-id="71370-141">Una volta che un server risponde, tutte le RPC future sull'handle di associazione verranno inviate solo a tale server, incluse le chiamate con l'attributo broadcast.</span><span class="sxs-lookup"><span data-stu-id="71370-141">Once a server responds, all future RPCs over that binding handle will be sent to that server only, including calls with the broadcast attribute.</span></span> <span data-ttu-id="71370-142">Per inviare un'altra trasmissione, creare un nuovo handle di binding o chiamare [**RpcBindingReset**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingreset) sull'handle esistente.</span><span class="sxs-lookup"><span data-stu-id="71370-142">To send another broadcast, create a new binding handle or call [**RpcBindingReset**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingreset) on the existing handle.</span></span>
-   <span data-ttu-id="71370-143">Datagramma RPC supporta [l'attributo](/windows/desktop/Midl/maybe) IDL.</span><span class="sxs-lookup"><span data-stu-id="71370-143">Datagram RPC supports the [maybe](/windows/desktop/Midl/maybe) IDL attribute.</span></span> <span data-ttu-id="71370-144">Ciò consente al client di inviare una chiamata al server senza attendere una risposta o una conferma.</span><span class="sxs-lookup"><span data-stu-id="71370-144">This lets the client send a call to the server without waiting for a response or confirmation.</span></span> <span data-ttu-id="71370-145">La chiamata non può contenere \[  \] parametri out.</span><span class="sxs-lookup"><span data-stu-id="71370-145">The call cannot contain \[**out**\] parameters.</span></span> <span data-ttu-id="71370-146">Le chiamate che usano le chiamate **\[ probabilmente \]** sono implicitamente idempotente.</span><span class="sxs-lookup"><span data-stu-id="71370-146">Calls using the **\[maybe\]** calls are implicitly idempotent.</span></span>

 

 