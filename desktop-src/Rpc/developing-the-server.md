---
title: Sviluppo del server
description: Quando si crea un programma server per un'applicazione distribuita, è necessario usare il file di intestazione e lo stub del server generati dal compilatore MIDL.
ms.assetid: 2b7b14f5-5692-41b8-bb98-7edd36309d21
keywords:
- RPC (Remote Procedure Call), attività, sviluppo del server
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0fc3405c52c48f531572ab159ad083bad93f95e0
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104338727"
---
# <a name="developing-the-server"></a><span data-ttu-id="a6e85-104">Sviluppo del server</span><span class="sxs-lookup"><span data-stu-id="a6e85-104">Developing the Server</span></span>

<span data-ttu-id="a6e85-105">Quando si crea un programma server per un'applicazione distribuita, è necessario usare il file di intestazione e lo stub del server generati dal compilatore MIDL.</span><span class="sxs-lookup"><span data-stu-id="a6e85-105">When you create a server program for a distributed application, you must use the header file and server stub that the MIDL compiler generates.</span></span> <span data-ttu-id="a6e85-106">Per informazioni dettagliate, vedere [sviluppo dell'interfaccia](developing-the-interface.md).</span><span class="sxs-lookup"><span data-stu-id="a6e85-106">For details, see [Developing the Interface](developing-the-interface.md).</span></span> <span data-ttu-id="a6e85-107">Includere il file di intestazione nel file di programma del server C.</span><span class="sxs-lookup"><span data-stu-id="a6e85-107">Include the header file in your server C program file.</span></span> <span data-ttu-id="a6e85-108">Compilare lo stub del server con i file di origine C che compongono l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a6e85-108">Compile the server stub with the C source files that compose your application.</span></span> <span data-ttu-id="a6e85-109">Collegare i file oggetto risultanti insieme alla libreria di importazione.</span><span class="sxs-lookup"><span data-stu-id="a6e85-109">Link the resulting object files together with the import library.</span></span> <span data-ttu-id="a6e85-110">Questo processo è illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="a6e85-110">This process is illustrated in the following diagram.</span></span>

![processo di creazione di un programma server per un'applicazione distribuita](images/srvrdev.png)

<span data-ttu-id="a6e85-112">Come si può notare dall'esempio nell'illustrazione, per definire l'interfaccia è stato usato un file MIDL denominato MyApp. idl.</span><span class="sxs-lookup"><span data-stu-id="a6e85-112">As you can see from the example in the illustration, a MIDL file called MyApp.idl was used to define the interface.</span></span> <span data-ttu-id="a6e85-113">Il compilatore MIDL ha usato MyApp. idl per produrre MyApp \_ s. c e MyApp. h.</span><span class="sxs-lookup"><span data-stu-id="a6e85-113">The MIDL compiler used MyApp.idl to produce MyApp\_s.c and MyApp.h.</span></span> <span data-ttu-id="a6e85-114">Genera inoltre un file di origine C per lo stub client, ma ciò non è pertinente per questa discussione particolare.</span><span class="sxs-lookup"><span data-stu-id="a6e85-114">It also produces a C source file for the client stub, but that is not relevant to this particular discussion.</span></span> <span data-ttu-id="a6e85-115">Il file di origine C per il programma server (in questo caso, Mysrvr. C) deve includere il file MyApp. h.</span><span class="sxs-lookup"><span data-stu-id="a6e85-115">The C source file for the server program (in this case, Mysrvr.c) must include the file Myapp.h.</span></span> <span data-ttu-id="a6e85-116">Sarà inoltre necessario includere i file RPC. h e Rpcndr. h.</span><span class="sxs-lookup"><span data-stu-id="a6e85-116">It will also need to include the files Rpc.h and Rpcndr.h.</span></span>

<span data-ttu-id="a6e85-117">L'applicazione server è stata sviluppata in due file, Mysrvr. c e Rprocs. c.</span><span class="sxs-lookup"><span data-stu-id="a6e85-117">The server application was developed in two files, Mysrvr.c and Rprocs.c.</span></span> <span data-ttu-id="a6e85-118">Il file Mysrvr. c contiene le funzioni necessarie per rendere operativo il programma server.</span><span class="sxs-lookup"><span data-stu-id="a6e85-118">The file Mysrvr.c contains the functions necessary for getting the server program up and running.</span></span> <span data-ttu-id="a6e85-119">Le procedure remote offerte dal programma server sono contenute nel file Rprocs. c.</span><span class="sxs-lookup"><span data-stu-id="a6e85-119">The remote procedures that the server program offers are contained in the file Rprocs.c.</span></span>

<span data-ttu-id="a6e85-120">I file Mysrvr. c e Rprocs. c sono stati compilati insieme a MyApp \_ s. c per produrre file oggetto.</span><span class="sxs-lookup"><span data-stu-id="a6e85-120">The files Mysrvr.c and Rprocs.c were compiled together with Myapp\_s.c to produce object files.</span></span> <span data-ttu-id="a6e85-121">I file oggetto sono stati quindi collegati con la libreria di runtime RPC e con tutte le altre librerie che potrebbero essere necessarie.</span><span class="sxs-lookup"><span data-stu-id="a6e85-121">The object files were then linked with the RPC run-time library, and any other libraries that they might need.</span></span> <span data-ttu-id="a6e85-122">Il risultato è un programma server eseguibile denominato Mysrvr.exe.</span><span class="sxs-lookup"><span data-stu-id="a6e85-122">The result is an executable server program named Mysrvr.exe.</span></span>

<span data-ttu-id="a6e85-123">Se non si compila il file IDL con la modalità di compatibilità Open Software Foundation (OSF) ([**/OSF**](/windows/desktop/Midl/-osf)), il programma server deve fornire una funzione per l'allocazione della memoria e una funzione per la deallocazione.</span><span class="sxs-lookup"><span data-stu-id="a6e85-123">If you do not compile your IDL file in Open Software Foundation (OSF) compatibility mode ([**/osf**](/windows/desktop/Midl/-osf)), your server program must provide a function for allocating memory and a function for deallocating it.</span></span> <span data-ttu-id="a6e85-124">Per Windows 2000 e versioni successive di Windows, la modalità consigliata è [**/Oicf**](/windows/desktop/Midl/-oi).</span><span class="sxs-lookup"><span data-stu-id="a6e85-124">For Windows 2000 and later versions of Windows, the recommended mode is [**/Oicf**](/windows/desktop/Midl/-oi).</span></span> <span data-ttu-id="a6e85-125">Per informazioni dettagliate, vedere modalità di allocazione [e deallocazione della memoria](how-memory-is-allocated-and-deallocated.md)e [puntatori e allocazione di memoria](pointers-and-memory-allocation.md).</span><span class="sxs-lookup"><span data-stu-id="a6e85-125">For details, see [How Memory Is Allocated and Deallocated](how-memory-is-allocated-and-deallocated.md), and [Pointers and Memory Allocation](pointers-and-memory-allocation.md).</span></span>

 

 