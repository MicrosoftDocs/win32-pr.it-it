---
title: Stringhe di formato di recapito RPC
description: Stringhe di formato NDR RPC (Remote Procedure Call).
ms.assetid: 9c83a039-49d3-491d-8110-29d1548730de
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cf0569a913d6c5a4b19b342cc288d6a8682dfc4a
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "103872890"
---
# <a name="rpc-ndr-format-strings"></a><span data-ttu-id="41735-103">Stringhe di formato di recapito RPC</span><span class="sxs-lookup"><span data-stu-id="41735-103">RPC NDR Format Strings</span></span>

## <a name="ndr-engine-32-bit-interpreter"></a><span data-ttu-id="41735-104">Motore NDR: interprete a 32 bit</span><span class="sxs-lookup"><span data-stu-id="41735-104">NDR Engine: 32-bit Interpreter</span></span>

<span data-ttu-id="41735-105">In questo documento vengono descritti i descrittori di stringhe di formato, detti anche MOPs, per il motore di NDR a 32 bit.</span><span class="sxs-lookup"><span data-stu-id="41735-105">This document describes the format string descriptors, sometimes referred to as MOPs, for the 32-bit NDR engine.</span></span> <span data-ttu-id="41735-106">In questa sezione vengono descritte le modifiche associate all'evoluzione dall'interprete [**-OI**](/windows/desktop/Midl/-oi) al livello dell'interprete **-OIF** , nonché le aggiunte correlate alle pipe e al supporto asincrono.</span><span class="sxs-lookup"><span data-stu-id="41735-106">This section describes changes associated with the evolution from the [**–Oi**](/windows/desktop/Midl/-oi) interpreter to the **–Oif** interpreter layer, as well as additions related to pipes and asynchronous support.</span></span>

<span data-ttu-id="41735-107">In questo documento viene descritta la tecnologia Current Microsoft Interface Definition Language (MIDL) dal punto di vista del motore e il motore NDR corrente.</span><span class="sxs-lookup"><span data-stu-id="41735-107">This document describes current Microsoft Interface Definition Language (MIDL) technology from the engine perspective, and the current NDR engine.</span></span>

## <a name="overview"></a><span data-ttu-id="41735-108">Panoramica</span><span class="sxs-lookup"><span data-stu-id="41735-108">Overview</span></span>

<span data-ttu-id="41735-109">Il motore di mancato recapito è il motore di marshalling dei componenti RPC (Remote Procedure Call) e DCOM.</span><span class="sxs-lookup"><span data-stu-id="41735-109">The NDR engine is the marshaling engine of the Remote Procedure Call (RPC) and DCOM components.</span></span> <span data-ttu-id="41735-110">Gestisce tutti i problemi relativi agli stub di una chiamata remota.</span><span class="sxs-lookup"><span data-stu-id="41735-110">It handles all stub-related issues of a remote call.</span></span> <span data-ttu-id="41735-111">Come processo, il marshalling del rapporto di recapito è determinato dal codice C da stub generati da MIDL, da un generatore di tipi JIT MIDL o da stub generati da altri strumenti o scritti manualmente.</span><span class="sxs-lookup"><span data-stu-id="41735-111">As a process, NDR marshaling is driven by the C code from MIDL-generated stubs, a MIDL JIT-type generator, or by stubs generated by other tools or written manually.</span></span> <span data-ttu-id="41735-112">Il motore di NDR, a sua volta, determina il tempo di esecuzione sottostante (DCOM o RPC) che comunica con trasporti specifici.</span><span class="sxs-lookup"><span data-stu-id="41735-112">In turn, the NDR engine drives the underlying run time (DCOM or RPC) that communicates with specific transports.</span></span>

<span data-ttu-id="41735-113">L'obiettivo originale della progettazione era quello di fornire uno strumento per il marshalling efficace per i dati arbitrari, in base alle informazioni fornite dal compilatore MIDL.</span><span class="sxs-lookup"><span data-stu-id="41735-113">The original goal of the design had been to provide a tool for effective marshaling for arbitrary data, based on information provided by the MIDL compiler.</span></span> <span data-ttu-id="41735-114">Le stringhe di formato descritte in questo documento, ed effettivamente tutte le informazioni generate dal compilatore per l'utilizzo del motore NDR, sono sempre state considerate un'interfaccia interna tra il compilatore e il motore.</span><span class="sxs-lookup"><span data-stu-id="41735-114">The format strings described in this document—and indeed all information generated by the compiler for NDR engine consumption—have always been considered an internal interface between the compiler and the engine.</span></span> <span data-ttu-id="41735-115">Analogamente, le interfacce disponibili per il motore di per gestire i problemi in fase di esecuzione sono principalmente interne (alcune eccezioni sono presenti sul lato run-time RPC e alcune interfacce DCOM utilizzate dal motore sono esterne).</span><span class="sxs-lookup"><span data-stu-id="41735-115">Similarly, interfaces available to the engine to handle run-time issues are also mostly internal (some exceptions exist on the RPC run-time side, and some DCOM interfaces used by the engine are external).</span></span>

<span data-ttu-id="41735-116">Due approcci tipici al marshalling sono sempre stati inline e tecnologia basata sui dati (interpretata).</span><span class="sxs-lookup"><span data-stu-id="41735-116">Two typical approaches to marshaling have always been inline and data-driven (interpreted) technology.</span></span> <span data-ttu-id="41735-117">MIDL supporta entrambi i commutatori [**-OS**](/windows/desktop/Midl/-os) e [**-OI \***](/windows/desktop/Midl/-oi) negli stub generati da C.</span><span class="sxs-lookup"><span data-stu-id="41735-117">MIDL supports both through its [**–Os**](/windows/desktop/Midl/-os) and [**–Oi\***](/windows/desktop/Midl/-oi) switches in its C-generated stubs.</span></span> <span data-ttu-id="41735-118">MIDL può inoltre generare le librerie TLB utilizzate dal pacchetto oleautomation.</span><span class="sxs-lookup"><span data-stu-id="41735-118">In addition, MIDL can generate the TLB libraries used by the oleautomation package.</span></span> <span data-ttu-id="41735-119">Di conseguenza, una prospettiva degli elementi interni del motore è costituita da due parti.</span><span class="sxs-lookup"><span data-stu-id="41735-119">Accordingly, one perspective of the engine's internals is that it consists of two parts.</span></span>

<span data-ttu-id="41735-120">Il primo è un set di routine che gestiscono il ridimensionamento, il marshalling e così via, corrispondenti a oggetti tipici del tipo di dati, ad esempio una struttura o una matrice.</span><span class="sxs-lookup"><span data-stu-id="41735-120">The first is a set of routines that handle sizing, marshaling, and so on, corresponding to typical data type objects like a structure or an array.</span></span> <span data-ttu-id="41735-121">Queste routine sono ottimizzate per migliorare le prestazioni. ad esempio, in genere tentano di bloccare la copia dei dati laddove possibile.</span><span class="sxs-lookup"><span data-stu-id="41735-121">These routines are fine-tuned for performance; for example, they typically attempt to block-copy data wherever possible.</span></span> <span data-ttu-id="41735-122">Questa parte è spesso definita motore di recapito di base.</span><span class="sxs-lookup"><span data-stu-id="41735-122">This part is often referred to as the core NDR engine.</span></span>

<span data-ttu-id="41735-123">La seconda parte è costituita da un interprete e dagli elementi correlati.</span><span class="sxs-lookup"><span data-stu-id="41735-123">The second part consists of an interpreter and its related pieces.</span></span> <span data-ttu-id="41735-124">L'interprete usa le routine del motore di recapito centrale, come se si trattasse di una libreria interna, per eseguire una chiamata remota con tutti i relativi argomenti sottoposti a marshalling e senza marshalling, a seconda dei casi.</span><span class="sxs-lookup"><span data-stu-id="41735-124">The interpreter uses routines from the core NDR engine, as if from an internal library, in order to execute a remote call with all its arguments marshaled and unmarshaled, as appropriate.</span></span>

<span data-ttu-id="41735-125">Il motore di recapito di base viene usato in modo analogo, indipendentemente dal fatto che venga usato dagli Stub inline o dall'interprete.</span><span class="sxs-lookup"><span data-stu-id="41735-125">The core NDR engine is used in a similar manner whether used from inline stubs or from the interpreter.</span></span> <span data-ttu-id="41735-126">Tutte le routine del motore di base dipendono dallo stato passato da una struttura di messaggi stub.</span><span class="sxs-lookup"><span data-stu-id="41735-126">All core engine routines depend on the state passed in by a stub message structure.</span></span> <span data-ttu-id="41735-127">La struttura viene configurata in modo appropriato dallo stub inline o dall'interprete.</span><span class="sxs-lookup"><span data-stu-id="41735-127">The structure is set up appropriately by the inline stub or by the interpreter.</span></span> <span data-ttu-id="41735-128">Nel corso degli anni il motore principale era stato usato in un contesto diverso; Attualmente l'interprete è in realtà un set di diversi cicli di interprete distinti.</span><span class="sxs-lookup"><span data-stu-id="41735-128">Over the years the core engine had been used in a different context; currently the interpreter is actually a set of several distinct interpreter loops.</span></span> <span data-ttu-id="41735-129">Queste sono correlate agli interpreti vecchi e nuovi ([**-OI**](/windows/desktop/Midl/-oi) versus **-OIF**), nonché ai cicli correlati alla serializzazione dei dati (selezione), al supporto asincrono RPC e al supporto asincrono DCOM (RPC e DCOM hanno modelli di programmazione asincroni diversi).</span><span class="sxs-lookup"><span data-stu-id="41735-129">These are related to the old and new ([**–Oi**](/windows/desktop/Midl/-oi) versus **–Oif**) interpreters, as well as to loops related to data serialization (pickling), RPC async support and DCOM async support (RPC and DCOM have different asynchronous programming models).</span></span>

<span data-ttu-id="41735-130">Oltre all'aggiunta di nuove funzionalità, un aspetto importante dell'evoluzione del motore NDR è un cambiamento generale nell'approccio agli interpreti.</span><span class="sxs-lookup"><span data-stu-id="41735-130">Beyond the addition of new features, an important aspect of the NDR engine evolution is a general shift in the approach to interpreters.</span></span> <span data-ttu-id="41735-131">NDR versione 1.1 è iniziata come parte di un nuovo approccio MIDL 2,0 al marshalling, con gli stub inline preferiti per le considerazioni sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="41735-131">NDR version1.1 began as part of a new MIDL 2.0 approach to marshaling, with the inline stubs being preferred for performance considerations.</span></span> <span data-ttu-id="41735-132">Con la versione più recente di NDR, [**– OIF**](/windows/desktop/Midl/-oi) è diventata la modalità più utilizzata del compilatore, quasi all'esclusione degli stub inline.</span><span class="sxs-lookup"><span data-stu-id="41735-132">With the most recent version of NDR, [**–Oif**](/windows/desktop/Midl/-oi) has become the most widely used mode of the compiler, almost to the exclusion of inline stubs.</span></span>

<span data-ttu-id="41735-133">I descrittori di stringa di formato del motore di recapito RPC sono descritti in modo più dettagliato negli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="41735-133">RPC NDR Engine format string descriptors are described in more detail in the following topics:</span></span>

-   [<span data-ttu-id="41735-134">Stringhe di formato</span><span class="sxs-lookup"><span data-stu-id="41735-134">Format Strings</span></span>](format-strings.md)
-   [<span data-ttu-id="41735-135">Stringhe di formato delle procedure</span><span class="sxs-lookup"><span data-stu-id="41735-135">Procedure Format Strings</span></span>](procedure-format-strings.md)
-   [<span data-ttu-id="41735-136">Descrittore di intestazioni di routine</span><span class="sxs-lookup"><span data-stu-id="41735-136">Procedure Header Descriptor</span></span>](procedure-header-descriptor.md)
-   [<span data-ttu-id="41735-137">Selettori</span><span class="sxs-lookup"><span data-stu-id="41735-137">Handles</span></span>](handles.md)
-   [<span data-ttu-id="41735-138">Intestazione</span><span class="sxs-lookup"><span data-stu-id="41735-138">The Header</span></span>](the-header.md)
-   [<span data-ttu-id="41735-139">Descrittori di parametro</span><span class="sxs-lookup"><span data-stu-id="41735-139">Parameter Descriptors</span></span>](parameter-descriptors.md)
-   [<span data-ttu-id="41735-140">Stringhe di formato del tipo</span><span class="sxs-lookup"><span data-stu-id="41735-140">Type Format Strings</span></span>](type-format-strings.md)

 

 