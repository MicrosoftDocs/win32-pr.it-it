---
title: Utilizzo di MSMQ come trasporto RPC
description: Il sottosistema RPC supporta l'utilizzo di MSMQ come trasporto in modalità sincrona e asincrona.
ms.assetid: c3f96a91-b7bb-4c2a-8699-2100324af165
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a647fe4111e3ba4fc2ad0fe05fb7bcb48729a4c2
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "103729298"
---
# <a name="using-msmq-as-an-rpc-transport"></a><span data-ttu-id="9d312-103">Utilizzo di MSMQ come trasporto RPC</span><span class="sxs-lookup"><span data-stu-id="9d312-103">Using MSMQ as an RPC Transport</span></span>

<span data-ttu-id="9d312-104">Il sottosistema RPC supporta l'utilizzo di MSMQ come trasporto in modalità sincrona e asincrona.</span><span class="sxs-lookup"><span data-stu-id="9d312-104">The RPC subsystem supports using MSMQ as a transport in synchronous and asynchronous modes.</span></span>

<span data-ttu-id="9d312-105">La modalità sincrona usa chiamate a procedure remote convenzionali.</span><span class="sxs-lookup"><span data-stu-id="9d312-105">Synchronous mode uses conventional remote procedure calls.</span></span> <span data-ttu-id="9d312-106">Queste chiamate utilizzano endpoint noti e il trasporto della coda di messaggi, [ncadg \_ mq](/windows/desktop/Midl/ncadg-mq), come protocollo di trasporto.</span><span class="sxs-lookup"><span data-stu-id="9d312-106">These calls use well-known endpoints and the message queue transport, [ncadg\_mq](/windows/desktop/Midl/ncadg-mq), as the transport protocol.</span></span> <span data-ttu-id="9d312-107">In modalità sincrona, le procedure remote possono disporre \[ [di parametri in](/windows/desktop/Midl/in) \] e \[ [out](/windows/desktop/Midl/out-idl) \] e possono utilizzare i servizi di sicurezza RPC standard.</span><span class="sxs-lookup"><span data-stu-id="9d312-107">In synchronous mode, your remote procedures can have \[ [in](/windows/desktop/Midl/in)\] and \[ [out](/windows/desktop/Midl/out-idl)\] parameters and can use the standard RPC security services.</span></span> <span data-ttu-id="9d312-108">Il sottosistema RPC crea una coda di risposta per le chiamate remote contenenti parametri **\[ out \]** .</span><span class="sxs-lookup"><span data-stu-id="9d312-108">The RPC subsystem creates a reply queue for remote calls containing **\[out\]** parameters.</span></span> <span data-ttu-id="9d312-109">La modalità sincrona è utile per le applicazioni in cui il client deve ricevere i dati dal server.</span><span class="sxs-lookup"><span data-stu-id="9d312-109">The synchronous mode is useful for applications where the client needs to receive data from the server.</span></span> <span data-ttu-id="9d312-110">La limitazione principale di questa modalità è che, come per le chiamate di procedure remote convenzionali, sia il client che il server devono essere in esecuzione e rimanere in esecuzione per la durata della chiamata.</span><span class="sxs-lookup"><span data-stu-id="9d312-110">The main limitation of this mode is that, as with conventional remote procedure calls, both the client and server must be running and remain running for the duration of the call.</span></span>

<span data-ttu-id="9d312-111">La modalità asincrona consente alle applicazioni client di effettuare chiamate al server e di restituire immediatamente, indipendentemente dallo stato dell'applicazione server o del computer server.</span><span class="sxs-lookup"><span data-stu-id="9d312-111">Asynchronous mode lets client applications make calls to the server and return immediately, regardless of the state of the server application or the server computer.</span></span> <span data-ttu-id="9d312-112">Rende inoltre disponibile un subset di funzionalità MSMQ per la gestione delle code di messaggi e del flusso di informazioni.</span><span class="sxs-lookup"><span data-stu-id="9d312-112">It also makes a subset of MSMQ features available for managing message queues and information flow.</span></span> <span data-ttu-id="9d312-113">La funzione [**RpcBindingSetOption**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetoption) consente di controllare la qualità del servizio, la priorità delle chiamate, il journaling, la sicurezza e la durata della coda del processo server.</span><span class="sxs-lookup"><span data-stu-id="9d312-113">The [**RpcBindingSetOption**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetoption) function lets you control quality of service, call priority, journaling, security, and the lifetime of the server process queue.</span></span> <span data-ttu-id="9d312-114">La funzione [**RpcServerUseProtseqEpEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqepex) consente di specificare gli attributi della coda del processo server, ad esempio la persistenza della coda, l'autenticazione e la crittografia.</span><span class="sxs-lookup"><span data-stu-id="9d312-114">The [**RpcServerUseProtseqEpEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqepex) function lets you specify attributes of the server process queue, such as queue persistence, authentication, and encryption.</span></span>

<span data-ttu-id="9d312-115">Il MSMQ asincrono viene implementato come per l'MSMQ sincrono.</span><span class="sxs-lookup"><span data-stu-id="9d312-115">You implement asynchronous MSMQ as you would synchronous MSMQ.</span></span> <span data-ttu-id="9d312-116">È necessario usare endpoint noti e definire il protocollo di trasporto come [ncadg \_ mq](/windows/desktop/Midl/ncadg-mq).</span><span class="sxs-lookup"><span data-stu-id="9d312-116">You must use well-known endpoints, and define the transport protocol to be [ncadg\_mq](/windows/desktop/Midl/ncadg-mq).</span></span> <span data-ttu-id="9d312-117">Nel file IDL applicare l'attributo [Message](/windows/desktop/Midl/message) alle funzioni che utilizzano l'Accodamento messaggi asincrono.</span><span class="sxs-lookup"><span data-stu-id="9d312-117">In your IDL file, apply the [message](/windows/desktop/Midl/message) attribute to the functions that use asynchronous message queuing.</span></span> <span data-ttu-id="9d312-118">Si noti che le funzioni di messaggio possono avere \[ \] solo parametri in.</span><span class="sxs-lookup"><span data-stu-id="9d312-118">Note that message functions can have \[in\] parameters only.</span></span>

 

 