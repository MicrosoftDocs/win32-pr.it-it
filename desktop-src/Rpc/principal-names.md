---
title: Nomi principali
description: Affinché un client crei una sessione con autenticazione reciproca con un programma server, deve fornire il nome principale previsto del server.
ms.assetid: 4d9977f8-0efb-4559-977e-3eba4e277bc0
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 554ffecff6eb019b4712e6b2d9f5c6319db492e7
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "104471651"
---
# <a name="principal-names"></a><span data-ttu-id="eef77-103">Nomi principali</span><span class="sxs-lookup"><span data-stu-id="eef77-103">Principal Names</span></span>

<span data-ttu-id="eef77-104">Affinché un client crei una sessione con autenticazione reciproca con un programma server, deve fornire il nome principale previsto del server.</span><span class="sxs-lookup"><span data-stu-id="eef77-104">For a client to create a mutually authenticated session with a server program, it must provide the server's expected principal name.</span></span> <span data-ttu-id="eef77-105">Alcuni protocolli, ad esempio Kerberos, richiedono un nome dell'entità server corretto per qualsiasi sessione autenticata.</span><span class="sxs-lookup"><span data-stu-id="eef77-105">Some protocols, such as Kerberos, require a correct server principal name for any authenticated session.</span></span> <span data-ttu-id="eef77-106">Un'entità è un'entità riconosciuta dal sistema di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="eef77-106">A principal is an entity that the security system recognizes.</span></span> <span data-ttu-id="eef77-107">Sono inclusi gli utenti umani e i servizi di sistema.</span><span class="sxs-lookup"><span data-stu-id="eef77-107">This includes human users as well as system services.</span></span> <span data-ttu-id="eef77-108">Tutti i nomi di entità hanno un formato simile per un determinato Security Support Provider (SSP).</span><span class="sxs-lookup"><span data-stu-id="eef77-108">All principal names take similar format for a given security support provider (SSP).</span></span> <span data-ttu-id="eef77-109">Un SSP è un modulo software che esegue la convalida della sicurezza.</span><span class="sxs-lookup"><span data-stu-id="eef77-109">An SSP is a software module that performs security validation.</span></span> <span data-ttu-id="eef77-110">Per ulteriori informazioni, vedere [Cenni preliminari sull'architettura di SSPI](sspi-architectural-overview.md).</span><span class="sxs-lookup"><span data-stu-id="eef77-110">For more information, see [SSPI Architectural Overview](sspi-architectural-overview.md).</span></span> <span data-ttu-id="eef77-111">Per mantenere uniformità, un provider di sicurezza in genere fornisce ai servizi di sistema nomi simili come gli utenti.</span><span class="sxs-lookup"><span data-stu-id="eef77-111">To maintain uniformity, a security provider usually gives system services similar names as users.</span></span> <span data-ttu-id="eef77-112">In alcuni provider di sicurezza, i servizi di sistema potrebbero non avere un nome di entità.</span><span class="sxs-lookup"><span data-stu-id="eef77-112">Under some security providers, system services may not have a principal name.</span></span>

<span data-ttu-id="eef77-113">Il server registra il nome principale per il provider di sicurezza utilizzando la funzione [**RpcServerRegisterAuthInfo**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterauthinfo) .</span><span class="sxs-lookup"><span data-stu-id="eef77-113">The server registers its principal name for the security provider using the [**RpcServerRegisterAuthInfo**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterauthinfo) function.</span></span> <span data-ttu-id="eef77-114">Per ogni provider di sicurezza è possibile utilizzare un solo nome entità server.</span><span class="sxs-lookup"><span data-stu-id="eef77-114">Only one server principal name can be used for each security provider.</span></span> <span data-ttu-id="eef77-115">Se è registrato più di un nome, un nome viene scelto in modo casuale e viene usato.</span><span class="sxs-lookup"><span data-stu-id="eef77-115">If more than one name is registered, one name is randomly chosen and used.</span></span> <span data-ttu-id="eef77-116">Il provider di servizi condivisi determina il formato del nome dell'entità.</span><span class="sxs-lookup"><span data-stu-id="eef77-116">The SSP dictates the format of the principal name.</span></span> <span data-ttu-id="eef77-117">Ad esempio, i SSP Kerberos/Negotiate per un servizio di sistema hanno un aspetto simile al seguente: \_ nome computer $ @childdomain.parentdomain1.parentdomain2.COM .</span><span class="sxs-lookup"><span data-stu-id="eef77-117">For example, the Kerberos/Negotiate SSPs for a system service look approximately like the following: machine\_name$@childdomain.parentdomain1.parentdomain2.COM.</span></span>

<span data-ttu-id="eef77-118">La procedura consigliata per la generazione di nomi principali consiste nell'usare API documentate, ad esempio la funzione **DsMakeSpn** , anziché riunire il nome principale dalle stringhe.</span><span class="sxs-lookup"><span data-stu-id="eef77-118">The recommended procedure for generating principal names is to use documented APIs (such as the **DsMakeSpn** function), rather than piecing together the principal name from strings.</span></span> <span data-ttu-id="eef77-119">L'uso di API documentate consente di aumentare la portabilità tra diversi ambienti di distribuzione ed elimina la possibilità di errori.</span><span class="sxs-lookup"><span data-stu-id="eef77-119">Using documented APIs increases portability between different deployment environments and eliminates the possibility for errors.</span></span>

<span data-ttu-id="eef77-120">La specifica di un nome di entità non corretto potrebbe impedire al client e al server di stabilire una sessione autenticata.</span><span class="sxs-lookup"><span data-stu-id="eef77-120">Specifying an incorrect principal name may prevent the client and server from establishing an authenticated session.</span></span> <span data-ttu-id="eef77-121">SSP SCHANNEL accetta nomi principali in uno dei due formati seguenti:</span><span class="sxs-lookup"><span data-stu-id="eef77-121">The SCHANNEL SSP takes principal names in either of two forms:</span></span>

-   <span data-ttu-id="eef77-122">Il primo form del nome principale SCHANNEL è il modulo [*msstd*](m-glos.md) .</span><span class="sxs-lookup"><span data-stu-id="eef77-122">The first SCHANNEL principal name form is the [*msstd*](m-glos.md) form.</span></span> <span data-ttu-id="eef77-123">I nomi nel form msstd in genere seguono il modello msstd:servername@serverdomain.com .</span><span class="sxs-lookup"><span data-stu-id="eef77-123">Names in msstd form generally follow the pattern msstd:servername@serverdomain.com.</span></span> <span data-ttu-id="eef77-124">Questa proprietà viene definita nome di posta elettronica.</span><span class="sxs-lookup"><span data-stu-id="eef77-124">This is referred to as an email name property.</span></span> <span data-ttu-id="eef77-125">Se il certificato contiene una proprietà del nome di posta elettronica e contiene il simbolo di chiocciola (@), il nome dell'entità è msstd: email name.</span><span class="sxs-lookup"><span data-stu-id="eef77-125">If the certificate contains an email name property, and it contains the at sign (@), the principal name is msstd:email name.</span></span> <span data-ttu-id="eef77-126">In caso contrario, deve contenere la proprietà nome comune.</span><span class="sxs-lookup"><span data-stu-id="eef77-126">Otherwise it must contain the common name property.</span></span> <span data-ttu-id="eef77-127">Le barre rovesciate interne sono doppie, come nelle associazioni di stringa.</span><span class="sxs-lookup"><span data-stu-id="eef77-127">Internal backslashes are doubled, just as in string bindings.</span></span>
-   <span data-ttu-id="eef77-128">Il secondo formato del nome principale SCHANNEL è il modulo [*fullsic*](f-glos.md) .</span><span class="sxs-lookup"><span data-stu-id="eef77-128">The second SCHANNEL principal name form is the [*fullsic*](f-glos.md) form.</span></span> <span data-ttu-id="eef77-129">Si tratta di una serie di nomi conformi a RFC1779 delimitati da parentesi angolari e separati da barre rovesciate.</span><span class="sxs-lookup"><span data-stu-id="eef77-129">This is a series of RFC1779-compliant names bounded by angle brackets and separated by backslashes.</span></span> <span data-ttu-id="eef77-130">In genere segue il modello fullsic: \\ < \\ Authority \\ subauthorization \\ .... \\ . Persona> o fullsic: \\ < \\ \\ sottoautorizzazione autorità \\ .... \\> ServerProgram.</span><span class="sxs-lookup"><span data-stu-id="eef77-130">It typically follows the pattern fullsic:\\<\\Authority\\SubAuthority\\.....\\Person> or fullsic:\\<\\Authority\\SubAuthority\\.....\\ServerProgram>.</span></span>

<span data-ttu-id="eef77-131">Se il nome non corrisponde al certificato, viene restituito l'errore di \_ accesso \_ negato.</span><span class="sxs-lookup"><span data-stu-id="eef77-131">If the name does not match the certificate, ERROR\_ACCESS\_DENIED is returned.</span></span> <span data-ttu-id="eef77-132">Se il formato del nome non è valido, SCHANNEL SSP restituisce il parametro ERROR del codice \_ non valido \_ .</span><span class="sxs-lookup"><span data-stu-id="eef77-132">If the name format is invalid, SCHANNEL SSP returns the code ERROR\_INVALID\_PARAMETER.</span></span>

<span data-ttu-id="eef77-133">Per eseguire una query per il nome dell'entità del server, le applicazioni possono chiamare [**RpcMgmtInqServerPrincName**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtinqserverprincname).</span><span class="sxs-lookup"><span data-stu-id="eef77-133">To query for the server's principal name, applications can call [**RpcMgmtInqServerPrincName**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtinqserverprincname).</span></span> <span data-ttu-id="eef77-134">In questo modo viene allocata una stringa con terminazione null in cui è contenuto il nome dell'entità.</span><span class="sxs-lookup"><span data-stu-id="eef77-134">This allocates a null-terminated string to hold the principal name.</span></span> <span data-ttu-id="eef77-135">Prima di terminare, l'applicazione deve richiamare [**RpcStringFree**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcstringfree) per rilasciare la memoria occupata da questa stringa.</span><span class="sxs-lookup"><span data-stu-id="eef77-135">Before it terminates, your application must invoke [**RpcStringFree**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcstringfree) to release the memory this string occupies.</span></span>

<span data-ttu-id="eef77-136">L'esecuzione di query per il nome del server in questo modo non è sicura e deve essere evitata.</span><span class="sxs-lookup"><span data-stu-id="eef77-136">Querying for the server name in this manner is not secure and should be avoided.</span></span> <span data-ttu-id="eef77-137">Per l'autenticazione server, il programma client deve essere in grado di individuare il server a cui si connette e deve creare il nome dell'entità server da zero.</span><span class="sxs-lookup"><span data-stu-id="eef77-137">For server authentication, the client program should know which server it is connecting to and should create the server principal name from scratch.</span></span>

 

 




