---
title: Callback (RPC)
description: Spesso il modello di programmazione richiede un callback del server a un client tramite una chiamata di procedura remota (RPC) o chiama il client in un server non attendibile. Questo introduce molti potenziali problemi.
ms.assetid: a4f3ea26-ac4b-41e5-abde-96b4baedf2ae
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6260e2cff2cbaff86f210764e89d55859c4d33af
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/10/2020
ms.locfileid: "104047769"
---
# <a name="callbacks-rpc"></a><span data-ttu-id="00b51-104">Callback (RPC)</span><span class="sxs-lookup"><span data-stu-id="00b51-104">Callbacks (RPC)</span></span>

<span data-ttu-id="00b51-105">Spesso il modello di programmazione richiede un callback del server a un client tramite una chiamata di procedura remota (RPC) o chiama il client in un server non attendibile.</span><span class="sxs-lookup"><span data-stu-id="00b51-105">Often the programming model necessitates a server callback to a client through a remote procedure call (RPC), or client calls into an untrusted server.</span></span> <span data-ttu-id="00b51-106">Questo introduce molti potenziali problemi.</span><span class="sxs-lookup"><span data-stu-id="00b51-106">This introduces many potential pitfalls.</span></span>

<span data-ttu-id="00b51-107">Per prima cosa, il callback al client deve essere eseguito con un livello di rappresentazione sufficientemente basso.</span><span class="sxs-lookup"><span data-stu-id="00b51-107">First, callback to the client must be made with a sufficiently low impersonation level.</span></span> <span data-ttu-id="00b51-108">Se il server è un servizio di sistema con privilegi elevati, richiamando un client locale con un livello di rappresentazione di Impersonate o versioni successive è possibile fornire al client privilegi sufficienti per assumere il sistema.</span><span class="sxs-lookup"><span data-stu-id="00b51-108">If the server is a highly privileged system service, calling back a local client with an impersonation level of impersonate or higher can provide the client with privileges sufficient to take over the system.</span></span> <span data-ttu-id="00b51-109">La chiamata di un client remoto con un livello di rappresentazione superiore al necessario può anche causare conseguenze indesiderate.</span><span class="sxs-lookup"><span data-stu-id="00b51-109">Calling back a remote client with higher impersonation level than necessary can also lead to undesirable consequences.</span></span>

<span data-ttu-id="00b51-110">In secondo luogo, se un utente malintenzionato induce il servizio a eseguire un callback, può *avviare un attacco* di tipo Denial of Service.</span><span class="sxs-lookup"><span data-stu-id="00b51-110">Second, if an attacker induces your service to perform a callback, it can launch what is called a *black hole*—denial of service attack.</span></span> <span data-ttu-id="00b51-111">Tali attacchi non sono specifici di RPC; in questi attacchi, un computer induce a inviare il traffico, ma non risponde alle richieste.</span><span class="sxs-lookup"><span data-stu-id="00b51-111">Such attacks are not specific to RPC; in these attacks, a machine induces you to send traffic to it, but it does not respond to your requests.</span></span> <span data-ttu-id="00b51-112">Si affondano sempre più risorse per chiamare il Black Hole, ma non vengono mai riportate.</span><span class="sxs-lookup"><span data-stu-id="00b51-112">You sink more and more resources into calling the black hole, but they never come back.</span></span> <span data-ttu-id="00b51-113">Un esempio generico di questo tipo di attacco è un attacco a livello di TCP denominato attacco di tipo SYN flood TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="00b51-113">One generic example of such an attack is a TCP-level attack called a TCP/IP SYN flood attack.</span></span>

<span data-ttu-id="00b51-114">A livello di RPC, si verifica un semplice attacco di nero-Hole quando un utente malintenzionato chiama un'interfaccia e richiede al server di chiamare l'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="00b51-114">On the RPC level, a simple black-hole attack occurs when an attacker calls an interface, and requests the server to call the interface back.</span></span> <span data-ttu-id="00b51-115">L'interfaccia è conforme, ma l'autore dell'attacco non restituisce mai la chiamata: un thread sul server è vincolato.</span><span class="sxs-lookup"><span data-stu-id="00b51-115">The interface complies, but the attacker never returns the call: one thread on the server is tied up.</span></span> <span data-ttu-id="00b51-116">L'utente malintenzionato esegue questa operazione 100 volte, legando 100 thread sul server.</span><span class="sxs-lookup"><span data-stu-id="00b51-116">The attacker does this 100 times, tying 100 threads on the server.</span></span> <span data-ttu-id="00b51-117">Alla fine, il server esaurisce la memoria.</span><span class="sxs-lookup"><span data-stu-id="00b51-117">Eventually the server runs out of memory.</span></span> <span data-ttu-id="00b51-118">Il debug del server può potenzialmente rivelare l'identità del chiamante nero, ma spesso il server verrà riavviato senza sospettare la riproduzione o potrebbe non essere disponibile un'esperienza sufficiente per determinare l'autore dell'attacco.</span><span class="sxs-lookup"><span data-stu-id="00b51-118">Debugging the server can potentially reveal the identity of the black-hole caller, but often the server will be restarted without suspecting foul play, or there may not be enough expertise available to determine the attacker.</span></span>

<span data-ttu-id="00b51-119">Il terzo trabocchetto si trova nel client.</span><span class="sxs-lookup"><span data-stu-id="00b51-119">The third pitfall is on the client.</span></span> <span data-ttu-id="00b51-120">Spesso un client effettua una chiamata al server per informare il server come richiamarlo (in genere un'associazione di stringa) e quindi attende che venga eseguita una chiamata dal server, accettando in modo cieco qualsiasi chiamata sull'endpoint che dichiara di provenire dal server.</span><span class="sxs-lookup"><span data-stu-id="00b51-120">Often a client makes a call to the server informing the server how to call it back (usually a string binding), and then waits for a call from the server to arrive, blindly accepting any call on that endpoint that claims to come from the server.</span></span> <span data-ttu-id="00b51-121">Il protocollo di callback dal server al client deve includere un meccanismo di verifica per assicurarsi che, quando il callback viene portato al client, sia stato effettivamente originato sul server.</span><span class="sxs-lookup"><span data-stu-id="00b51-121">The callback protocol from the server to the client should include some verification mechanism to ensure that when the callback comes to the client, it actually originated on the server.</span></span>

 

 




