---
title: Handle di contesto
description: In alcuni casi, le applicazioni distribuite richiedono che il programma server mantenga le informazioni sullo stato tra le chiamate del client.
ms.assetid: 91732a75-0a3a-44bd-9db9-c11be6fd2d70
keywords:
- RPC (Remote Procedure Call), descrizione, handle di contesto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a8ff36ff8f1a36843293060e091b7eecee0d8666
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "106298229"
---
# <a name="context-handles"></a><span data-ttu-id="16bff-104">Handle di contesto</span><span class="sxs-lookup"><span data-stu-id="16bff-104">Context Handles</span></span>

<span data-ttu-id="16bff-105">In alcuni casi, le applicazioni distribuite richiedono che il programma server mantenga le informazioni sullo stato tra le chiamate del client.</span><span class="sxs-lookup"><span data-stu-id="16bff-105">It is sometimes the case that distributed applications require the server program to maintain status information between client calls.</span></span> <span data-ttu-id="16bff-106">I programmi server che consentono di gestire più di un client alla volta devono contenere le informazioni sullo stato per ogni client.</span><span class="sxs-lookup"><span data-stu-id="16bff-106">Server programs that service more than one client at a time must keep the state information for each client.</span></span> <span data-ttu-id="16bff-107">Poiché il client e il server utilizzano spazi di indirizzi diversi in computer diversi e non considerano necessariamente attendibili reciprocamente, gli approcci comuni alla condivisione dei dati spesso non funzionano.</span><span class="sxs-lookup"><span data-stu-id="16bff-107">Because the client and the server use different address spaces on different computers, and they do not necessarily trust each other, common approaches to data sharing often do not work.</span></span> <span data-ttu-id="16bff-108">Ad esempio, il client e il server non sono in grado di mantenere le informazioni sullo stato della sessione remota nelle variabili globali perché non condividono lo stesso spazio di indirizzi globale.</span><span class="sxs-lookup"><span data-stu-id="16bff-108">For instance, the client and server are unable to maintain status information on their remote session in global variables because they do not share the same global address space.</span></span> <span data-ttu-id="16bff-109">È difficile salvare le informazioni in un file condiviso perché vengono eseguite in computer diversi.</span><span class="sxs-lookup"><span data-stu-id="16bff-109">It is difficult to keep the information in a shared file because they run on different computers.</span></span> <span data-ttu-id="16bff-110">Un approccio semplicistico potrebbe consistere nel fornire tutto lo stato al client e fare in modo che il client lo restituisca alla chiamata successiva, ma questo approccio presenta difetti: il server non considera necessariamente attendibile il client per restituire lo stato corretto e lo stato può essere associato in modo implicito a un altro stato sul server, ad esempio handle di file o socket aperti.</span><span class="sxs-lookup"><span data-stu-id="16bff-110">A simplistic approach may be to ship all state to the client and have the client return it on the next call, but this approach has flaws: the server does not necessarily trust the client to return the right state, and the state may be implicitly tied to some other state on the server, such as file handles or opened sockets.</span></span>

<span data-ttu-id="16bff-111">Microsoft RPC fornisce un meccanismo potente e sicuro chiamato handle di contesto per mantenere lo stato associato a un determinato client in un server.</span><span class="sxs-lookup"><span data-stu-id="16bff-111">Microsoft RPC provides a powerful and secure mechanism called context handles for keeping state associated with a given client on a server.</span></span> <span data-ttu-id="16bff-112">Le informazioni sullo stato sono denominate contesto del server.</span><span class="sxs-lookup"><span data-stu-id="16bff-112">The state information is called the server's context.</span></span> <span data-ttu-id="16bff-113">I client possono ottenere un handle di contesto per identificare il contesto del server per le singole sessioni RPC.</span><span class="sxs-lookup"><span data-stu-id="16bff-113">Clients can obtain a context handle to identify the server's context for their individual RPC sessions.</span></span>

<span data-ttu-id="16bff-114">Per ogni client in un'applicazione distribuita, ad esempio, il programma server può creare e aggiornare un file di dati per la sessione RPC.</span><span class="sxs-lookup"><span data-stu-id="16bff-114">As an example, each client in a distributed application can have the server program create and update a data file for their RPC session.</span></span> <span data-ttu-id="16bff-115">Il server può utilizzare il relativo handle di file per ogni file di dati del client come handle di contesto.</span><span class="sxs-lookup"><span data-stu-id="16bff-115">The server can use its file handle for each client's data file as the context handle.</span></span> <span data-ttu-id="16bff-116">Ogni volta che un client richiede operazioni sul file di dati creato dal server, il client passa l'handle di contesto al server.</span><span class="sxs-lookup"><span data-stu-id="16bff-116">Each time a client requests operations on the data file that the server creates for it, the client passes the context handle to the server.</span></span> <span data-ttu-id="16bff-117">Il client non ottiene effettivamente l'handle di file. Ottiene un token opaco che il tempo di esecuzione RPC del server può associare in modo univoco all'handle di file.</span><span class="sxs-lookup"><span data-stu-id="16bff-117">The client does not actually get the file handle itself; it gets an opaque token that the server RPC run time can uniquely associate with the file handle.</span></span> <span data-ttu-id="16bff-118">Poiché l'handle del contesto è effettivamente un handle di file, il punto di controllo del contesto ha senso solo nello spazio degli indirizzi del server.</span><span class="sxs-lookup"><span data-stu-id="16bff-118">Since the context handle is really a file handle, the context handle only makes sense in the server's address space.</span></span> <span data-ttu-id="16bff-119">Tuttavia, il programma client può utilizzare l'handle di contesto per indicare al server in quale file eseguire gli aggiornamenti.</span><span class="sxs-lookup"><span data-stu-id="16bff-119">However, the client program can use the context handle to tell the server on which file to perform updates.</span></span>

<span data-ttu-id="16bff-120">Altri dati possono anche essere handle di contesto.</span><span class="sxs-lookup"><span data-stu-id="16bff-120">Other data can also be context handles.</span></span> <span data-ttu-id="16bff-121">Un client e un server possono ad esempio usare un numero di record di un record di database come handle di file.</span><span class="sxs-lookup"><span data-stu-id="16bff-121">For instance, a client and server can use a record number of a database record as a file handle.</span></span> <span data-ttu-id="16bff-122">Se il client deve eseguire una serie di aggiornamenti su un record specifico, può ottenere il numero di record come handle di contesto.</span><span class="sxs-lookup"><span data-stu-id="16bff-122">If the client needed to perform a number of updates on a particular record, it could obtain the record number as a context handle.</span></span> <span data-ttu-id="16bff-123">Passa il numero di record al server ogni volta che viene richiamata una procedura remota per aggiornare il record del database.</span><span class="sxs-lookup"><span data-stu-id="16bff-123">It would pass the record number to the server each time it invoked a remote procedure to update the database record.</span></span>

<span data-ttu-id="16bff-124">Spesso un handle di contesto punta a un blocco di memoria nel server in cui il server mantiene le varie informazioni di gestione.</span><span class="sxs-lookup"><span data-stu-id="16bff-124">Most often a context handle points to a block of memory on the server where the server keeps various management information.</span></span>

<span data-ttu-id="16bff-125">In questa sezione vengono fornite informazioni sulla definizione e sull'utilizzo degli handle di contesto.</span><span class="sxs-lookup"><span data-stu-id="16bff-125">This section presents information on defining and using context handles.</span></span> <span data-ttu-id="16bff-126">La discussione viene presentata negli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="16bff-126">The discussion is presented in the following topics:</span></span>

-   [<span data-ttu-id="16bff-127">Sviluppo di interfacce con handle di contesto</span><span class="sxs-lookup"><span data-stu-id="16bff-127">Interface Development Using Context Handles</span></span>](interface-development-using-context-handles.md)
-   [<span data-ttu-id="16bff-128">Sviluppo di server con handle di contesto</span><span class="sxs-lookup"><span data-stu-id="16bff-128">Server Development Using Context Handles</span></span>](server-development-using-context-handles.md)
-   [<span data-ttu-id="16bff-129">Sviluppo di client con handle di contesto</span><span class="sxs-lookup"><span data-stu-id="16bff-129">Client Development Using Context Handles</span></span>](client-development-using-context-handles.md)
-   [<span data-ttu-id="16bff-130">Routine di esecuzione del contesto del server</span><span class="sxs-lookup"><span data-stu-id="16bff-130">Server Context Run-down Routine</span></span>](server-context-run-down-routine.md)
-   [<span data-ttu-id="16bff-131">Ripristino del contesto client</span><span class="sxs-lookup"><span data-stu-id="16bff-131">Client Context Reset</span></span>](client-context-reset.md)
-   [<span data-ttu-id="16bff-132">Client multithreading e handle di contesto</span><span class="sxs-lookup"><span data-stu-id="16bff-132">Multithreaded Clients and Context Handles</span></span>](multithreaded-clients-and-context-handles.md)

 

 




