---
title: Cosa accade durante una query
description: Questa sezione descrive il modo in cui la rete gestisce la query quando un client a 32 bit cerca un nome nel relativo dominio.
ms.assetid: a8a88743-a245-4258-af05-9261c214ab50
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d6e26fb9aaef0aac2ff66260d51f756725566dee
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "104221487"
---
# <a name="what-happens-during-a-query"></a><span data-ttu-id="521fd-103">Cosa accade durante una query</span><span class="sxs-lookup"><span data-stu-id="521fd-103">What Happens During a Query</span></span>

<span data-ttu-id="521fd-104">Questa sezione descrive il modo in cui la rete gestisce la query quando un client a 32 bit cerca un nome nel relativo dominio.</span><span class="sxs-lookup"><span data-stu-id="521fd-104">This section describes how the network handles the query when a 32-bit client searches for a name in its own domain.</span></span>

<span data-ttu-id="521fd-105">Quando l'applicazione client chiama [**RpcNsBindingImportBegin**](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingimportbegina), il localizzatore che risiede nel computer client tenterà di soddisfare la richiesta.</span><span class="sxs-lookup"><span data-stu-id="521fd-105">When your client application calls [**RpcNsBindingImportBegin**](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingimportbegina), the locator residing on your client computer will try to satisfy this request.</span></span> <span data-ttu-id="521fd-106">Se nella cache non è presente alcun elemento, la richiesta verrà trasmessa da RPC a un localizzatore master.</span><span class="sxs-lookup"><span data-stu-id="521fd-106">If there is nothing in the cache, it will forward the request by RPC to a master locator.</span></span> <span data-ttu-id="521fd-107">Se il localizzatore master non trova alcun elemento nella cache, Invia la richiesta a tutti i computer nel dominio usando una trasmissione dello slot di posta elettronica.</span><span class="sxs-lookup"><span data-stu-id="521fd-107">If the master locator finds nothing in its cache, it sends the request to all the computers in the domain using a mail-slot broadcast.</span></span> <span data-ttu-id="521fd-108">Se esiste una corrispondenza, il localizzatore in ogni computer risponderà da uno slot di posta elettronica diretto.</span><span class="sxs-lookup"><span data-stu-id="521fd-108">If there is a match, the locator on each computer will respond by a directed mail slot.</span></span> <span data-ttu-id="521fd-109">Se, ad esempio, un processo nel computer ha esportato l'interfaccia. Le risposte vengono confrontate e la RPC viene completata dal localizzatore del processo del client, che risponderà al processo client.</span><span class="sxs-lookup"><span data-stu-id="521fd-109">(For example, if a process on that computer has exported the interface.) The responses are collated and the RPC is completed from the client's process locator, which will reply to the client process itself.</span></span>

<span data-ttu-id="521fd-110">In un dominio, il localizzatore client cerca un localizzatore Master nelle posizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="521fd-110">In a domain, the client locator searches for a master locator in the following places:</span></span>

-   <span data-ttu-id="521fd-111">Sul controller di dominio primario</span><span class="sxs-lookup"><span data-stu-id="521fd-111">On the primary domain controller</span></span>
-   <span data-ttu-id="521fd-112">In ogni controller di dominio di backup</span><span class="sxs-lookup"><span data-stu-id="521fd-112">On each backup domain controller</span></span>

<span data-ttu-id="521fd-113">Se non viene trovata alcuna corrispondenza, il localizzatore client dichiara se stesso come localizzatore master.</span><span class="sxs-lookup"><span data-stu-id="521fd-113">If a match is not found, the client locator declares itself to be the master locator.</span></span> <span data-ttu-id="521fd-114">Di conseguenza, le query verranno trasmesse se non possono essere soddisfatte localmente.</span><span class="sxs-lookup"><span data-stu-id="521fd-114">As such, it will broadcast queries if they cannot be satisfied locally.</span></span>

<span data-ttu-id="521fd-115">In un gruppo di lavoro, il localizzatore client gestisce una cache dei computer i cui localizzatori hanno broadcast.</span><span class="sxs-lookup"><span data-stu-id="521fd-115">In a workgroup, the client locator maintains a cache of the computers whose locators have broadcast.</span></span> <span data-ttu-id="521fd-116">USA quello che ha eseguito il più lungo come localizzatore master.</span><span class="sxs-lookup"><span data-stu-id="521fd-116">It uses the one that has been running the longest as the master locator.</span></span> <span data-ttu-id="521fd-117">Se il computer non è disponibile, viene usato il computer successivo, con trasmissione prolungata e così via.</span><span class="sxs-lookup"><span data-stu-id="521fd-117">If that computer is unavailable, the next, longest-broadcasting computer is used, and so on.</span></span> <span data-ttu-id="521fd-118">Se il client necessita di un localizzatore master e la cache è vuota, la cache viene rifornita inviando una trasmissione speciale di slot di posta elettronica che richiede ai localizzatori Master di rispondere.</span><span class="sxs-lookup"><span data-stu-id="521fd-118">If the client needs a master locator and the cache is empty, it replenishes the cache by sending a special mail-slot broadcast that requests master locators to respond.</span></span> <span data-ttu-id="521fd-119">Se non sono presenti risposte, il localizzatore client dichiara se stesso come localizzatore master e trasmette le query se non è possibile soddisfarle localmente.</span><span class="sxs-lookup"><span data-stu-id="521fd-119">If there are no responses, the client locator declares itself to be the master locator and will broadcast queries if they cannot be satisfied locally.</span></span>

<span data-ttu-id="521fd-120">Questa modifica è stata modificata se l'applicazione client è un programma basato su MS-DOS o a 16 bit.</span><span class="sxs-lookup"><span data-stu-id="521fd-120">This changes if your client application is a 16-bit or MS-DOS-based program.</span></span> <span data-ttu-id="521fd-121">In questo caso, nel computer client non è in esecuzione alcun localizzatore e Rpcns1.dll o Rpcnslm. RPC contiene il codice per trovare un localizzatore master.</span><span class="sxs-lookup"><span data-stu-id="521fd-121">In this case, there is no locator running on the client computer, and Rpcns1.dll or Rpcnslm.rpc contains the code to find a master locator.</span></span> <span data-ttu-id="521fd-122">Tutte le richieste vengono inviate direttamente al localizzatore master.</span><span class="sxs-lookup"><span data-stu-id="521fd-122">All requests are forwarded directly to the master locator.</span></span>

<span data-ttu-id="521fd-123">Queste linee guida sono valide per i nomi nel dominio del client, ad esempio i nomi per "/.:/ entryName ".</span><span class="sxs-lookup"><span data-stu-id="521fd-123">These guidelines are valid for names in the client's domain, such as names for "/.:/entryname".</span></span> <span data-ttu-id="521fd-124">Se il client richiede un nome da un altro dominio tramite l'uso di "/.../DOMAIN/entryname;", il localizzatore client invia la richiesta al dominio specificato, che lo trasmette se non ha la risposta.</span><span class="sxs-lookup"><span data-stu-id="521fd-124">If the client requests a name from another domain through the use of "/.../DOMAIN/entryname;" the client locator forwards the request to the specified domain which will broadcast it if it does not have the answer.</span></span> <span data-ttu-id="521fd-125">Se il dominio non è attivo o è in realtà un gruppo di lavoro, la richiesta avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="521fd-125">If the domain is down or is actually a workgroup, the request will fail.</span></span>

> [!Note]  
> <span data-ttu-id="521fd-126">Tenere presente quanto segue quando si utilizzano le voci nel servizio nome:</span><span class="sxs-lookup"><span data-stu-id="521fd-126">Remember the following when working with entries in the name service:</span></span>

 

-   <span data-ttu-id="521fd-127">Un client non può usare la sintassi "/.../DOMAIN/entryname" per trovare una voce nel relativo dominio.</span><span class="sxs-lookup"><span data-stu-id="521fd-127">A client cannot use the "/.../DOMAIN/entryname" syntax to find an entry in its own domain.</span></span> <span data-ttu-id="521fd-128">Utilizzare la sintassi "/.:/ entryName ".</span><span class="sxs-lookup"><span data-stu-id="521fd-128">Use the syntax "/.:/entryname".</span></span> <span data-ttu-id="521fd-129">Tuttavia, è possibile usare "/.../DOMAIN/entryname" per trovare una voce in un altro dominio.</span><span class="sxs-lookup"><span data-stu-id="521fd-129">However, you can use "/.../DOMAIN/entryname" to find an entry in another domain.</span></span>
-   <span data-ttu-id="521fd-130">Il nome di dominio in "/.../DOMAIN/entryname" deve essere in maiuscolo.</span><span class="sxs-lookup"><span data-stu-id="521fd-130">The domain name in "/.../DOMAIN/entryname" must be uppercase.</span></span> <span data-ttu-id="521fd-131">Per la ricerca di una corrispondenza, il localizzatore distingue tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="521fd-131">When looking for a match, the locator is case-sensitive.</span></span>
-   <span data-ttu-id="521fd-132">I nomi di voce del localizzatore fanno distinzione tra maiuscole e minuscole, ma non devono essere in maiuscolo.</span><span class="sxs-lookup"><span data-stu-id="521fd-132">Locator entry names are also case-sensitive, but need not be uppercase.</span></span>
-   <span data-ttu-id="521fd-133">Quando il client usa il "/.:/ entryName "sintassi, il localizzatore non cercherà le voci in altri domini, anche se hanno una relazione di trust con il dominio di accesso.</span><span class="sxs-lookup"><span data-stu-id="521fd-133">When the client uses the "/.:/entryname" syntax, the locator will not search for entries in other domains, even if they have a trust relationship with the logon domain.</span></span>
-   <span data-ttu-id="521fd-134">Le trasmissioni non intervengono tra i segmenti LAN, ad esempio le subnet.</span><span class="sxs-lookup"><span data-stu-id="521fd-134">Broadcasts do not cross LAN segments (for example, subnets).</span></span> <span data-ttu-id="521fd-135">Pertanto, l'utilità del localizzatore è limitata all'interno di un'organizzazione con più subnet.</span><span class="sxs-lookup"><span data-stu-id="521fd-135">Thus, the usefulness of the locator is limited in an organization with multiple subnets.</span></span>

 

 




