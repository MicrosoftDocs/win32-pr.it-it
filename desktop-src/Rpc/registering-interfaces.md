---
title: Registrazione di interfacce
description: Registrazione di un'interfaccia RPC (Remote Procedure Call).
ms.assetid: c22e3fa8-98be-461a-b06d-292d3f655ffc
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 30ea9e851e8c9663c8f66d983d3400b1ee398a9d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "104220906"
---
# <a name="registering-interfaces"></a><span data-ttu-id="c0ad6-103">Registrazione di interfacce</span><span class="sxs-lookup"><span data-stu-id="c0ad6-103">Registering Interfaces</span></span>

<span data-ttu-id="c0ad6-104">In questa sezione viene presentata una descrizione dettagliata del processo di registrazione di un'interfaccia RPC.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-104">This section presents a detailed discussion of the process of registering an RPC interface.</span></span>

<span data-ttu-id="c0ad6-105">Le informazioni contenute in questa sezione sono illustrate negli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="c0ad6-105">The information in this section is presented in the following topics:</span></span>

-   [<span data-ttu-id="c0ad6-106">Funzioni di registrazione dell'interfaccia</span><span class="sxs-lookup"><span data-stu-id="c0ad6-106">Interface Registration Functions</span></span>](#interface-registration-functions)
-   [<span data-ttu-id="c0ad6-107">Vettori di punti di ingresso</span><span class="sxs-lookup"><span data-stu-id="c0ad6-107">Entry-Point Vectors</span></span>](#entry-point-vectors)
-   [<span data-ttu-id="c0ad6-108">EPV Manager</span><span class="sxs-lookup"><span data-stu-id="c0ad6-108">Manager EPVs</span></span>](#manager-epvs)
-   [<span data-ttu-id="c0ad6-109">Registrazione di una singola implementazione di un'interfaccia</span><span class="sxs-lookup"><span data-stu-id="c0ad6-109">Registering a Single Implementation of an Interface</span></span>](#registering-a-single-implementation-of-an-interface)
-   [<span data-ttu-id="c0ad6-110">Registrazione di più implementazioni di un'interfaccia</span><span class="sxs-lookup"><span data-stu-id="c0ad6-110">Registering Multiple Implementations of an Interface</span></span>](#registering-multiple-implementations-of-an-interface)
-   [<span data-ttu-id="c0ad6-111">Regole per la chiamata delle routine di gestione</span><span class="sxs-lookup"><span data-stu-id="c0ad6-111">Rules for Invoking Manager Routines</span></span>](#rules-for-invoking-manager-routines)
-   [<span data-ttu-id="c0ad6-112">Invio di una chiamata di procedura remota a una routine Server-Manager</span><span class="sxs-lookup"><span data-stu-id="c0ad6-112">Dispatching a Remote Procedure Call to a Server-Manager Routine</span></span>](#dispatching-a-remote-procedure-call-to-a-server-manager-routine)
-   [<span data-ttu-id="c0ad6-113">Fornire una funzione di Object-Inquiry personalizzata</span><span class="sxs-lookup"><span data-stu-id="c0ad6-113">Supplying Your Own Object-Inquiry Function</span></span>](#supplying-your-own-object-inquiry-function)

## <a name="interface-registration-functions"></a><span data-ttu-id="c0ad6-114">Funzioni di registrazione dell'interfaccia</span><span class="sxs-lookup"><span data-stu-id="c0ad6-114">Interface Registration Functions</span></span>

<span data-ttu-id="c0ad6-115">I server registrano le interfacce chiamando la funzione [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif) .</span><span class="sxs-lookup"><span data-stu-id="c0ad6-115">Servers register their interfaces by calling the [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif) function.</span></span> <span data-ttu-id="c0ad6-116">I programmi server complessi supportano spesso più di un'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-116">Complex server programs often support more than one interface.</span></span> <span data-ttu-id="c0ad6-117">Le applicazioni server devono chiamare questa funzione una volta per ogni interfaccia supportata.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-117">Server applications must call this function once for each interface they support.</span></span>

<span data-ttu-id="c0ad6-118">Inoltre, i server possono supportare più versioni della stessa interfaccia, ognuna con la propria implementazione delle funzioni dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-118">Also, servers can support multiple versions of the same interface, each with its own implementation of the interface's functions.</span></span> <span data-ttu-id="c0ad6-119">Se il programma server esegue questa operazione, deve fornire un set di punti di ingresso.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-119">If your server program does this, it must provide a set of entry points.</span></span> <span data-ttu-id="c0ad6-120">Un punto di ingresso è una routine di gestione che invia le chiamate per una versione di un'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-120">An entry point is a manager routine that dispatches calls for a version of an interface.</span></span> <span data-ttu-id="c0ad6-121">Deve essere presente un punto di ingresso per ogni versione dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-121">There must be one entry point for each version of the interface.</span></span> <span data-ttu-id="c0ad6-122">Il gruppo di punti di ingresso è denominato vettore del punto di ingresso.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-122">The group of entry points is called an entry point vector.</span></span> <span data-ttu-id="c0ad6-123">Per informazioni dettagliate, vedere [vettori di punti di ingresso](#entry-point-vectors).</span><span class="sxs-lookup"><span data-stu-id="c0ad6-123">For details, see [Entry-Point Vectors](#entry-point-vectors).</span></span>

<span data-ttu-id="c0ad6-124">Oltre alla funzione standard [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), RPC supporta anche altre funzioni di registrazione dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-124">In addition to the standard function [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), RPC also supports other interface registration functions.</span></span> <span data-ttu-id="c0ad6-125">La funzione [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) estende le funzionalità di **RpcServerRegisterIf** consentendo di specificare un set di flag di registrazione (vedere [flag di registrazione delle interfacce](interface-registration-flags.md)), il numero massimo di richieste simultanee di chiamate di procedura remota che il server può accettare e le dimensioni massime in byte dei blocchi di dati in arrivo.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-125">The [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) function extends the capabilities of **RpcServerRegisterIf** by enabling you to specify a set of registration flags (see [Interface Registration Flags](interface-registration-flags.md)), the maximum number of concurrent remote procedure call requests the server can accept, and the maximum size in bytes of incoming data blocks.</span></span>

<span data-ttu-id="c0ad6-126">La libreria RPC contiene anche una funzione denominata [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex).</span><span class="sxs-lookup"><span data-stu-id="c0ad6-126">The RPC library also contains a function called [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex).</span></span> <span data-ttu-id="c0ad6-127">Analogamente alla funzione [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif) , questa funzione registra un'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-127">Like the [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif) function, this function registers an interface.</span></span> <span data-ttu-id="c0ad6-128">Il programma server può usare questa funzione anche per specificare un set di flag di registrazione (vedere [flag di registrazione delle interfacce](interface-registration-flags.md)), il numero massimo di richieste di chiamata di procedura remota simultanee che il server può accettare e una funzione di callback di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-128">Your server program can also use this function to specify a set of registration flags (see [Interface Registration Flags](interface-registration-flags.md)), the maximum number of concurrent remote procedure call requests the server can accept, and a security callback function.</span></span>

<span data-ttu-id="c0ad6-129">Le funzioni [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)e [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) impostano i valori nella tabella del registro di sistema dell'interfaccia interna.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-129">The [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), and [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) functions set values in the internal interface registry table.</span></span> <span data-ttu-id="c0ad6-130">Questa tabella viene usata per eseguire il mapping dell'UUID dell'interfaccia e degli UUID degli oggetti a un EPV di gestione.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-130">This table is used to map the interface UUID and object UUIDs to a manager EPV.</span></span> <span data-ttu-id="c0ad6-131">Il EPV di gestione è una matrice di puntatori a funzione che contiene esattamente un puntatore a funzione per ogni prototipo di funzione nell'interfaccia specificata nel file IDL.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-131">The manager EPV is an array of function pointers that contains exactly one function pointer for each function prototype in the interface specified in the IDL file.</span></span>

<span data-ttu-id="c0ad6-132">Per informazioni su come fornire più EPV per fornire più implementazioni dell'interfaccia, vedere [implementazioni di più interfacce](#registering-multiple-implementations-of-an-interface).</span><span class="sxs-lookup"><span data-stu-id="c0ad6-132">For information on supplying multiple EPVs to provide multiple implementations of the interface, see [Multiple Interface Implementations](#registering-multiple-implementations-of-an-interface).</span></span>

<span data-ttu-id="c0ad6-133">La libreria di runtime usa la tabella del registro di sistema Interface (impostata dalle chiamate alla funzione [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2)) e la tabella del registro di sistema Object (impostata dalle chiamate alla funzione [**RPCOBJECTSETTYPE**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype)) per eseguire il mapping degli UUID dell'interfaccia e dell'oggetto al puntatore a funzione.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-133">The run-time library uses the interface registry table (set by calls to the function [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2)) and the object registry table (set by calls to the function [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype)) to map interface and object UUIDs to the function pointer.</span></span>

<span data-ttu-id="c0ad6-134">Quando si desidera che il programma server rimuova un'interfaccia dal registro di sistema della libreria di runtime RPC, chiamare la funzione [**RpcServerUnregisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterif) .</span><span class="sxs-lookup"><span data-stu-id="c0ad6-134">When you want your server program to remove an interface from the RPC run-time library registry, call the [**RpcServerUnregisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterif) function.</span></span> <span data-ttu-id="c0ad6-135">Una volta rimossa l'interfaccia dal registro di sistema, la libreria di runtime RPC non accetterà più nuove chiamate per tale interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-135">After the interface is removed from the registry, the RPC run-time library will no longer accept new calls for that interface.</span></span>

## <a name="entry-point-vectors"></a><span data-ttu-id="c0ad6-136">Vettori di punti di ingresso</span><span class="sxs-lookup"><span data-stu-id="c0ad6-136">Entry-point Vectors</span></span>

<span data-ttu-id="c0ad6-137">Il vettore del punto di ingresso di gestione (EPV) è una matrice di puntatori a funzione che puntano alle implementazioni delle funzioni specificate nel file IDL.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-137">The manager entry-point vector (EPV) is an array of function pointers that point to implementations of the functions specified in the IDL file.</span></span> <span data-ttu-id="c0ad6-138">Il numero di elementi nella matrice corrisponde al numero di funzioni specificate nel file IDL.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-138">The number of elements in the array corresponds to the number of functions specified in the IDL file.</span></span> <span data-ttu-id="c0ad6-139">RPC supporta più vettori di punti di ingresso che rappresentano più implementazioni delle funzioni specificate nell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-139">RPC supports multiple entry-point vectors representing multiple implementations of the functions specified in the interface.</span></span>

<span data-ttu-id="c0ad6-140">Il compilatore MIDL genera automaticamente un tipo di dati Manager EPV da usare per la costruzione di EPV Manager.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-140">The MIDL compiler automatically generates a manager EPV data type for use in constructing manager EPVs.</span></span> <span data-ttu-id="c0ad6-141">Il tipo di dati è denominato \* if-name \***\_ server \_ EPV**, dove *if-name* specifica l'identificatore di interfaccia nel file IDL.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-141">The data type is named \*if-name\***\_SERVER\_EPV**, where *if-name* specifies the interface identifier in the IDL file.</span></span>

<span data-ttu-id="c0ad6-142">Il compilatore MIDL crea e inizializza automaticamente un manager predefinito EPV sul presupposto che esista una routine di gestione con lo stesso nome per ogni procedura nell'interfaccia e che sia specificata nel file IDL.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-142">The MIDL compiler automatically creates and initializes a default manager EPV on the assumption that a manager routine of the same name exists for each procedure in the interface and is specified in the IDL file.</span></span>

<span data-ttu-id="c0ad6-143">Quando un server offre più implementazioni della stessa interfaccia, il server deve creare un EPV di gestione aggiuntivo per ogni implementazione.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-143">When a server offers multiple implementations of the same interface, the server must create one additional manager EPV for each implementation.</span></span> <span data-ttu-id="c0ad6-144">Ogni EPV deve contenere esattamente un punto di ingresso (indirizzo di una funzione) per ogni procedura definita nel file IDL.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-144">Each EPV must contain exactly one entry point (address of a function) for each procedure defined in the IDL file.</span></span> <span data-ttu-id="c0ad6-145">L'applicazione server dichiara e Inizializza una variabile EPV di gestione di tipo *if-name \* \* \* \_ server \_ EPV*\* per ogni implementazione aggiuntiva dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-145">The server application declares and initializes one manager EPV variable of type *if-name\*\*\*\_SERVER\_EPV*\* for each additional implementation of the interface.</span></span> <span data-ttu-id="c0ad6-146">Per registrare il EPV, chiama [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) una volta per ogni tipo di oggetto supportato.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-146">To register the EPVs it calls [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) once for each object type it supports.</span></span>

<span data-ttu-id="c0ad6-147">Quando il client effettua una chiamata di procedura remota al server, il EPV contenente il puntatore a funzione viene selezionato in base all'UUID dell'interfaccia e al tipo di oggetto.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-147">When the client makes a remote procedure call to the server, the EPV containing the function pointer is selected based on the interface UUID and the object type.</span></span> <span data-ttu-id="c0ad6-148">Il tipo di oggetto deriva dall'UUID dell'oggetto da parte della funzione di richiesta di oggetti o dal mapping basato su tabella controllato da [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype).</span><span class="sxs-lookup"><span data-stu-id="c0ad6-148">The object type is derived from the object UUID by the object-inquiry function or the table-driven mapping controlled by [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype).</span></span>

## <a name="manager-epvs"></a><span data-ttu-id="c0ad6-149">EPV Manager</span><span class="sxs-lookup"><span data-stu-id="c0ad6-149">Manager EPVs</span></span>

<span data-ttu-id="c0ad6-150">Per impostazione predefinita, il compilatore MIDL usa i nomi di stored procedure del file IDL di un'interfaccia per generare un EPV di gestione, che il compilatore inserisce direttamente nello stub del server.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-150">By default, the MIDL compiler uses the procedure names from an interface's IDL file to generate a manager EPV, which the compiler places directly into the server stub.</span></span> <span data-ttu-id="c0ad6-151">Questo EPV predefinito viene inizializzato in modo statico utilizzando i nomi delle procedure dichiarati nella definizione dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-151">This default EPV is statically initialized using the procedure names declared in the interface definition.</span></span>

<span data-ttu-id="c0ad6-152">Per registrare un gestore usando il EPV predefinito, specificare **null** come valore del parametro *MgrEpv* in una chiamata alla funzione [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) .</span><span class="sxs-lookup"><span data-stu-id="c0ad6-152">To register a manager using the default EPV, specify **NULL** as the value of the *MgrEpv* parameter in a call to either the [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) function.</span></span> <span data-ttu-id="c0ad6-153">Se i nomi di routine usati da un responsabile corrispondono a quelli della definizione dell'interfaccia, è possibile registrare questo gestore usando il valore predefinito di EPV dell'interfaccia generata dal compilatore MIDL.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-153">If the routine names used by a manager correspond to those of the interface definition, you can register this manager using the default EPV of the interface generated by the MIDL compiler.</span></span> <span data-ttu-id="c0ad6-154">È anche possibile registrare un responsabile usando una EPV fornita dall'applicazione server.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-154">You can also register a manager using an EPV that the server application supplies.</span></span>

<span data-ttu-id="c0ad6-155">Un server può (e talvolta necessario) creare e registrare un EPV di gestione non **null** per un'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-155">A server can (and sometimes must) create and register a non-**null** manager EPV for an interface.</span></span> <span data-ttu-id="c0ad6-156">Per selezionare un'applicazione server fornita da EPV, passare l'indirizzo di un EPV il cui valore è stato dichiarato dal server come valore di *MgrEpv* a parametro.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-156">To select a server application–supplied EPV, pass the address of an EPV whose value has been declared by the server as the value of the *MgrEpv* a parameter.</span></span> <span data-ttu-id="c0ad6-157">Un valore non **null** per *MgrEpv* un parametro sostituisce sempre un EPV predefinito nello stub del server.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-157">A non-**null** value for the *MgrEpv* a parameter always overrides a default EPV in the server stub.</span></span>

<span data-ttu-id="c0ad6-158">Il compilatore MIDL genera automaticamente un tipo di dati Manager EPV (RPC \_ Mgr \_ EPV) per un'applicazione server da usare per la costruzione di EPV di gestione.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-158">The MIDL compiler automatically generates a manager EPV data type (RPC\_MGR\_EPV) for a server application to use in constructing manager EPVs.</span></span> <span data-ttu-id="c0ad6-159">Un EPV di gestione deve contenere esattamente un punto di ingresso (indirizzo della funzione) per ogni procedura definita nel file IDL.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-159">A manager EPV must contain exactly one entry point (function address) for each procedure defined in the IDL file.</span></span>

<span data-ttu-id="c0ad6-160">Un server deve fornire un EPV non **null** nei casi seguenti:</span><span class="sxs-lookup"><span data-stu-id="c0ad6-160">A server must supply a non-**null** EPV in the following cases:</span></span>

-   <span data-ttu-id="c0ad6-161">Quando i nomi delle routine di gestione sono diversi da quelli dichiarati nella definizione di interfaccia</span><span class="sxs-lookup"><span data-stu-id="c0ad6-161">When the names of manager routines differ from the procedure names declared in the interface definition</span></span>
-   <span data-ttu-id="c0ad6-162">Quando il server utilizza il EPV predefinito per la registrazione di un'altra implementazione dell'interfaccia</span><span class="sxs-lookup"><span data-stu-id="c0ad6-162">When the server uses the default EPV for registering another implementation of the interface</span></span>

<span data-ttu-id="c0ad6-163">Un server dichiara un EPV di gestione inizializzando una variabile di tipo *if-name \* \* \* \_ server \_ EPV*\* per ogni implementazione dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-163">A server declares a manager EPV by initializing a variable of type *if-name\*\*\*\_SERVER\_EPV*\* for each implementation of the interface.</span></span>

## <a name="registering-a-single-implementation-of-an-interface"></a><span data-ttu-id="c0ad6-164">Registrazione di una singola implementazione di un'interfaccia</span><span class="sxs-lookup"><span data-stu-id="c0ad6-164">Registering a Single Implementation of an Interface</span></span>

<span data-ttu-id="c0ad6-165">Quando un server offre solo un'implementazione di un'interfaccia, il server chiama [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) una sola volta.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-165">When a server offers only one implementation of an interface, the server calls [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) only once.</span></span> <span data-ttu-id="c0ad6-166">Nel caso standard, il server utilizza il EPV di gestione predefinito.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-166">In the standard case, the server uses the default manager EPV.</span></span> <span data-ttu-id="c0ad6-167">L'eccezione si verifica quando il gestore utilizza nomi di routine diversi da quelli dichiarati nell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-167">(The exception is when the manager uses routine names that differ from those declared in the interface.)</span></span>

<span data-ttu-id="c0ad6-168">Per il caso standard, è necessario specificare i valori seguenti per le chiamate a [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2):</span><span class="sxs-lookup"><span data-stu-id="c0ad6-168">For the standard case, you supply the following values for calls to [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2):</span></span>

-   <span data-ttu-id="c0ad6-169">EPV Manager</span><span class="sxs-lookup"><span data-stu-id="c0ad6-169">Manager EPVs</span></span>

    <span data-ttu-id="c0ad6-170">Per usare il valore predefinito di EPV, specificare un valore **null** per il parametro *MgrEpv* .</span><span class="sxs-lookup"><span data-stu-id="c0ad6-170">To use the default EPV, specify a **null** value for the *MgrEpv* a parameter.</span></span>

-   <span data-ttu-id="c0ad6-171">UUID di tipo Manager</span><span class="sxs-lookup"><span data-stu-id="c0ad6-171">Manager type UUID</span></span>

    <span data-ttu-id="c0ad6-172">Quando si usa il EPV predefinito, registrare l'interfaccia con un UUID del tipo di gestione Nil specificando un valore **null** o un UUID nil per il *MgrTypeUuid* un parametro.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-172">When using the default EPV, register the interface with a nil manager type UUID by supplying either a **null** value or a nil UUID for the *MgrTypeUuid* a parameter.</span></span> <span data-ttu-id="c0ad6-173">In questo caso, tutte le chiamate a procedure remote, indipendentemente dall'UUID dell'oggetto nel rispettivo handle di associazione, vengono inviate al EPV predefinito, presupponendo che non siano state effettuate chiamate [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) .</span><span class="sxs-lookup"><span data-stu-id="c0ad6-173">In this case, all remote procedure calls, regardless of the object UUID in their binding handle, are dispatched to the default EPV, assuming no [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) calls have been made.</span></span>

    <span data-ttu-id="c0ad6-174">È anche possibile specificare un UUID di tipo Manager non Nil.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-174">You can also provide a non-nil manager type UUID.</span></span> <span data-ttu-id="c0ad6-175">In questo caso, è necessario chiamare anche la routine [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) .</span><span class="sxs-lookup"><span data-stu-id="c0ad6-175">In this case, you must also call the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine.</span></span>

## <a name="registering-multiple-implementations-of-an-interface"></a><span data-ttu-id="c0ad6-176">Registrazione di più implementazioni di un'interfaccia</span><span class="sxs-lookup"><span data-stu-id="c0ad6-176">Registering Multiple Implementations of an Interface</span></span>

<span data-ttu-id="c0ad6-177">È possibile specificare più di un'implementazione delle procedure remote specificate nel file IDL.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-177">You can supply more than one implementation of the remote procedure(s) specified in the IDL file.</span></span> <span data-ttu-id="c0ad6-178">L'applicazione server chiama [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) per eseguire il mapping degli UUID degli oggetti al tipo UUID e chiama [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) per associare il gestore EPV a un UUID di tipo.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-178">The server application calls [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) to map object UUIDs to type UUIDs and calls [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) to associate manager EPVs with a type UUID.</span></span> <span data-ttu-id="c0ad6-179">Quando arriva una chiamata di procedura remota con il relativo UUID dell'oggetto, la libreria di runtime del server RPC esegue il mapping dell'UUID dell'oggetto a un tipo UUID.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-179">When a remote procedure call arrives with its object UUID, the RPC server run-time library maps the object UUID to a type UUID.</span></span> <span data-ttu-id="c0ad6-180">L'applicazione server usa quindi il tipo UUID e l'UUID dell'interfaccia per selezionare il gestore EPV.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-180">The server application then uses the type UUID and the interface UUID to select the manager EPV.</span></span>

<span data-ttu-id="c0ad6-181">È anche possibile specificare una funzione personalizzata per risolvere il mapping dall'UUID dell'oggetto al tipo di gestione UUID.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-181">You can also specify your own function to resolve the mapping from object UUID to manager type UUID.</span></span> <span data-ttu-id="c0ad6-182">La funzione di mapping viene specificata quando si chiama [**RpcObjectSetInqFn**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsetinqfn).</span><span class="sxs-lookup"><span data-stu-id="c0ad6-182">You specify the mapping function when you call [**RpcObjectSetInqFn**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsetinqfn).</span></span>

<span data-ttu-id="c0ad6-183">Per offrire più implementazioni di un'interfaccia, un server deve registrare ogni implementazione chiamando [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) separatamente.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-183">To offer multiple implementations of an interface, a server must register each implementation by calling [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) separately.</span></span> <span data-ttu-id="c0ad6-184">Per ogni implementazione registrata da un server, fornisce lo stesso *IfSpec* a un parametro, ma una coppia diversa di *MgrTypeUuid* e *MgrEpv* di parametri.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-184">For each implementation a server registers, it supplies the same *IfSpec* a parameter, but a different pair of *MgrTypeUuid* and *MgrEpv* a parameters.</span></span>

<span data-ttu-id="c0ad6-185">Nel caso di più responsabili, usare [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="c0ad6-185">In the case of multiple managers, use [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) as follows:</span></span>

-   <span data-ttu-id="c0ad6-186">EPV Manager</span><span class="sxs-lookup"><span data-stu-id="c0ad6-186">Manager EPVs</span></span>

    <span data-ttu-id="c0ad6-187">Per offrire più implementazioni di un'interfaccia, un server deve:</span><span class="sxs-lookup"><span data-stu-id="c0ad6-187">To offer multiple implementations of an interface, a server must:</span></span>

    -   <span data-ttu-id="c0ad6-188">Creare un EPV di gestione non **null** per ogni implementazione aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-188">Create a non-**null** manager EPV for each additional implementation.</span></span>
    -   <span data-ttu-id="c0ad6-189">Specificare un valore non **null** per *MgrEpv* un parametro in [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2).</span><span class="sxs-lookup"><span data-stu-id="c0ad6-189">Specify a non-**null** value for the *MgrEpv* a parameter in [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2).</span></span>

    <span data-ttu-id="c0ad6-190">Si noti che il server può anche eseguire la registrazione con il EPV di gestione predefinito.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-190">Please note that the server can also register with the default manager EPV.</span></span>

-   <span data-ttu-id="c0ad6-191">UUID di tipo Manager</span><span class="sxs-lookup"><span data-stu-id="c0ad6-191">Manager type UUID</span></span>

    <span data-ttu-id="c0ad6-192">Fornire un UUID di tipo Manager per ogni EPV dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-192">Provide a manager type UUID for each EPV of the interface.</span></span> <span data-ttu-id="c0ad6-193">UUID di tipo Nil (o valore **null** ) per *MgrTypeUuid* è possibile specificare un parametro per uno dei EPV di gestione.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-193">The nil type UUID (or **null** value) for the *MgrTypeUuid* a parameter can be specified for one of the manager EPVs.</span></span> <span data-ttu-id="c0ad6-194">Ogni UUID di tipo deve essere diverso.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-194">Each type UUID must be different.</span></span>

## <a name="rules-for-invoking-manager-routines"></a><span data-ttu-id="c0ad6-195">Regole per la chiamata delle routine di gestione</span><span class="sxs-lookup"><span data-stu-id="c0ad6-195">Rules for Invoking Manager Routines</span></span>

<span data-ttu-id="c0ad6-196">La libreria di runtime RPC invia una chiamata di procedura remota in ingresso a un responsabile che offre l'interfaccia RPC richiesta.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-196">The RPC run-time library dispatches an incoming remote procedure call to a manager that offers the requested RPC interface.</span></span> <span data-ttu-id="c0ad6-197">Quando più responsabili sono registrati per un'interfaccia, la libreria di runtime RPC deve selezionarne una.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-197">When multiple managers are registered for an interface, the RPC run-time library must select one of them.</span></span> <span data-ttu-id="c0ad6-198">Per selezionare un Manager, la libreria di runtime RPC usa l'UUID dell'oggetto specificato dall'handle di associazione della chiamata.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-198">To select a manager, the RPC run-time library uses the object UUID specified by the call's binding handle.</span></span>

<span data-ttu-id="c0ad6-199">La libreria di runtime applica le seguenti regole durante l'interpretazione dell'UUID dell'oggetto di una chiamata di procedura remota:</span><span class="sxs-lookup"><span data-stu-id="c0ad6-199">The run-time library applies the following rules when interpreting the object UUID of a remote procedure call:</span></span>

-   <span data-ttu-id="c0ad6-200">UUID oggetto Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-200">Nil object UUIDs</span></span>

    <span data-ttu-id="c0ad6-201">All'UUID di un oggetto nil viene assegnato automaticamente l'UUID di tipo nil. non è consentito specificare un UUID di oggetto nil nella routine [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) .</span><span class="sxs-lookup"><span data-stu-id="c0ad6-201">A nil object UUID is automatically assigned the nil type UUID (it is illegal to specify a nil object UUID in the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine).</span></span> <span data-ttu-id="c0ad6-202">Una chiamata di procedura remota il cui handle di associazione contiene un UUID di oggetto nil viene pertanto inviata automaticamente al gestore registrato con l'UUID di tipo Nil, se presente.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-202">Therefore, a remote procedure call whose binding handle contains a nil object UUID is automatically dispatched to the manager registered with the nil type UUID, if any.</span></span>

-   <span data-ttu-id="c0ad6-203">UUID di oggetti non nIl</span><span class="sxs-lookup"><span data-stu-id="c0ad6-203">Non-nil object UUIDs</span></span>

    <span data-ttu-id="c0ad6-204">In linea di principio, una chiamata di procedura remota il cui handle di associazione contiene un UUID di oggetto diverso da Nil deve essere elaborata da un gestore il cui tipo UUID corrisponde al tipo di UUID dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-204">In principle, a remote procedure call whose binding handle contains a non-nil object UUID should be processed by a manager whose type UUID matches the type of the object UUID.</span></span> <span data-ttu-id="c0ad6-205">Tuttavia, per identificare il gestore corretto, è necessario che il server abbia specificato il tipo di UUID dell'oggetto chiamando la routine [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) .</span><span class="sxs-lookup"><span data-stu-id="c0ad6-205">However, identifying the correct manager requires that the server has specified the type of that object UUID by calling the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine.</span></span>

    <span data-ttu-id="c0ad6-206">Se un server non è in grado di chiamare la routine [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) per un UUID di oggetto diverso da Nil, una chiamata di procedura remota per tale UUID viene indirizzata al EPV Manager che esegue chiamate a procedure remote con un UUID dell'oggetto Nil, ovvero l'UUID di tipo nil.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-206">If a server fails to call the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine for a non-nil object UUID, a remote procedure call for that object UUID goes to the manager EPV that services remote procedure calls with a nil object UUID (that is, the nil type UUID).</span></span>

    <span data-ttu-id="c0ad6-207">Non è possibile eseguire chiamate di procedure remote con un UUID di oggetto non nIl nell'handle di binding se il server ha assegnato all'UUID un oggetto diverso da un UUID di tipo chiamando la routine [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) , ma non ha anche registrato un EPV di gestione per quel tipo UUID chiamando [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2).</span><span class="sxs-lookup"><span data-stu-id="c0ad6-207">Remote procedure calls with a non-nil object UUID in the binding handle cannot be executed if the server assigned that non-nil object UUID a type UUID by calling the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine, but did not also register a manager EPV for that type UUID by calling [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2).</span></span>

<span data-ttu-id="c0ad6-208">Nella tabella seguente sono riepilogate le azioni che la libreria di runtime utilizza per selezionare la routine del Manager.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-208">The following table summarizes the actions that the run-time library uses to select the manager routine.</span></span>



| <span data-ttu-id="c0ad6-209">UUID oggetto della chiamata</span><span class="sxs-lookup"><span data-stu-id="c0ad6-209">Object UUID of call</span></span> | <span data-ttu-id="c0ad6-210">Tipo di set di server per UUID oggetto?</span><span class="sxs-lookup"><span data-stu-id="c0ad6-210">Server set type for object UUID?</span></span> | <span data-ttu-id="c0ad6-211">Tipo di EPV registrato dal server</span><span class="sxs-lookup"><span data-stu-id="c0ad6-211">Server registered EPV type?</span></span> | <span data-ttu-id="c0ad6-212">Azione di invio</span><span class="sxs-lookup"><span data-stu-id="c0ad6-212">Dispatching action</span></span>                                                                                                                                 |
|---------------------|----------------------------------|-----------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="c0ad6-213">Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-213">Nil</span></span>                 | <span data-ttu-id="c0ad6-214">Non applicabile</span><span class="sxs-lookup"><span data-stu-id="c0ad6-214">Not applicable</span></span>                   | <span data-ttu-id="c0ad6-215">Sì</span><span class="sxs-lookup"><span data-stu-id="c0ad6-215">Yes</span></span>                         | <span data-ttu-id="c0ad6-216">Usa il Manager con l'UUID di tipo nil.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-216">Uses the manager with the nil type UUID.</span></span>                                                                                                           |
| <span data-ttu-id="c0ad6-217">Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-217">Nil</span></span>                 | <span data-ttu-id="c0ad6-218">Non applicabile</span><span class="sxs-lookup"><span data-stu-id="c0ad6-218">Not applicable</span></span>                   | <span data-ttu-id="c0ad6-219">No</span><span class="sxs-lookup"><span data-stu-id="c0ad6-219">No</span></span>                          | <span data-ttu-id="c0ad6-220">Errore ( \_ \_ \_ tipo non supportato RPC); rifiuta la chiamata di procedura remota.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-220">Error (RPC\_S\_UNSUPPORTED\_TYPE); rejects the remote procedure call.</span></span>                                                                              |
| <span data-ttu-id="c0ad6-221">Non nIl</span><span class="sxs-lookup"><span data-stu-id="c0ad6-221">Non-nil</span></span>             | <span data-ttu-id="c0ad6-222">Sì</span><span class="sxs-lookup"><span data-stu-id="c0ad6-222">Yes</span></span>                              | <span data-ttu-id="c0ad6-223">Sì</span><span class="sxs-lookup"><span data-stu-id="c0ad6-223">Yes</span></span>                         | <span data-ttu-id="c0ad6-224">Usa il gestore con lo stesso UUID di tipo.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-224">Uses the manager with the same type UUID.</span></span>                                                                                                          |
| <span data-ttu-id="c0ad6-225">Non nIl</span><span class="sxs-lookup"><span data-stu-id="c0ad6-225">Non-nil</span></span>             | <span data-ttu-id="c0ad6-226">No</span><span class="sxs-lookup"><span data-stu-id="c0ad6-226">No</span></span>                               | <span data-ttu-id="c0ad6-227">Ignorato</span><span class="sxs-lookup"><span data-stu-id="c0ad6-227">Ignored</span></span>                     | <span data-ttu-id="c0ad6-228">Usa il Manager con l'UUID di tipo nil.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-228">Uses the manager with the nil type UUID.</span></span> <span data-ttu-id="c0ad6-229">Se nessun responsabile con UUID di tipo Nil, Error (RPC \_ S \_ UNSUPPORTEDTYPE); rifiuta la chiamata di procedura remota.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-229">If no manager with the nil type UUID, error (RPC\_S\_UNSUPPORTEDTYPE); rejects the remote procedure call.</span></span> |
| <span data-ttu-id="c0ad6-230">Non nIl</span><span class="sxs-lookup"><span data-stu-id="c0ad6-230">Non-nil</span></span>             | <span data-ttu-id="c0ad6-231">Sì</span><span class="sxs-lookup"><span data-stu-id="c0ad6-231">Yes</span></span>                              | <span data-ttu-id="c0ad6-232">No</span><span class="sxs-lookup"><span data-stu-id="c0ad6-232">No</span></span>                          | <span data-ttu-id="c0ad6-233">Error (RPC \_ S \_ UNSUPPORTEDTYPE); rifiuta la chiamata di procedura remota.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-233">Error (RPC\_S\_UNSUPPORTEDTYPE); rejects the remote procedure call.</span></span>                                                                                |



 

<span data-ttu-id="c0ad6-234">L'UUID dell'oggetto della chiamata è l'UUID dell'oggetto trovato in un handle di binding per una chiamata di procedura remota.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-234">The object UUID of the call is the object UUID found in a binding handle for a remote procedure call.</span></span>

<span data-ttu-id="c0ad6-235">Il server imposta il tipo di UUID dell'oggetto chiamando [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) per specificare il tipo UUID per un oggetto.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-235">The server sets the type of the object UUID by calling [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) to specify the type UUID for an object.</span></span>

<span data-ttu-id="c0ad6-236">Il server registra il tipo per il EPV di gestione chiamando [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) usando lo stesso UUID di tipo.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-236">The server registers the type for the manager EPV by calling [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) using the same type UUID.</span></span>

> [!Note]  
> <span data-ttu-id="c0ad6-237">All'UUID dell'oggetto nil viene sempre assegnato automaticamente l'UUID di tipo nil.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-237">The nil object UUID is always automatically assigned the nil type UUID.</span></span> <span data-ttu-id="c0ad6-238">Non è consentito specificare un UUID dell'oggetto nil nella routine [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) .</span><span class="sxs-lookup"><span data-stu-id="c0ad6-238">It is illegal to specify a nil object UUID in the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine.</span></span>

 

## <a name="dispatching-a-remote-procedure-call-to-a-server-manager-routine"></a><span data-ttu-id="c0ad6-239">Invio di una chiamata di procedura remota a una routine di gestione server</span><span class="sxs-lookup"><span data-stu-id="c0ad6-239">Dispatching a Remote Procedure Call to a Server-manager Routine</span></span>

<span data-ttu-id="c0ad6-240">Nelle tabelle seguenti vengono illustrati i passaggi necessari per la libreria di runtime RPC per inviare una chiamata di procedura remota a una routine di gestione server.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-240">The following tables show the steps that the RPC run-time library takes to dispatch a remote procedure call to a server-manager routine.</span></span>

<span data-ttu-id="c0ad6-241">Un caso semplice in cui il server registra il EPV di gestione predefinito, è descritto nelle tabelle seguenti.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-241">A simple case where the server registers the default manager EPV, is described in the following tables.</span></span>

<span data-ttu-id="c0ad6-242">**Tabella del registro di sistema Interface**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-242">**Interface Registry Table**</span></span>



| <span data-ttu-id="c0ad6-243">UUID interfaccia</span><span class="sxs-lookup"><span data-stu-id="c0ad6-243">Interface UUID</span></span> | <span data-ttu-id="c0ad6-244">UUID di tipo Manager</span><span class="sxs-lookup"><span data-stu-id="c0ad6-244">Manager type UUID</span></span> | <span data-ttu-id="c0ad6-245">Vettore punto di ingresso</span><span class="sxs-lookup"><span data-stu-id="c0ad6-245">Entry-point vector</span></span> |
|----------------|-------------------|--------------------|
| <span data-ttu-id="c0ad6-246">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-246">*uuid1*</span></span>        | <span data-ttu-id="c0ad6-247">Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-247">Nil</span></span>               | <span data-ttu-id="c0ad6-248">EPV predefinito</span><span class="sxs-lookup"><span data-stu-id="c0ad6-248">Default EPV</span></span>        |



 

<span data-ttu-id="c0ad6-249">**Tabella del registro oggetti**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-249">**Object Registry Table**</span></span>



| <span data-ttu-id="c0ad6-250">UUID oggetto</span><span class="sxs-lookup"><span data-stu-id="c0ad6-250">Object UUID</span></span>             | <span data-ttu-id="c0ad6-251">Tipo di oggetto</span><span class="sxs-lookup"><span data-stu-id="c0ad6-251">Object type</span></span> |
|-------------------------|-------------|
| <span data-ttu-id="c0ad6-252">Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-252">Nil</span></span>                     | <span data-ttu-id="c0ad6-253">Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-253">Nil</span></span>         |
| <span data-ttu-id="c0ad6-254">(Qualsiasi altro UUID di oggetto)</span><span class="sxs-lookup"><span data-stu-id="c0ad6-254">(Any other object UUID)</span></span> | <span data-ttu-id="c0ad6-255">Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-255">Nil</span></span>         |



 

<span data-ttu-id="c0ad6-256">**Mapping dell'handle di associazione a un vettore del punto di ingresso (EPV)**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-256">**Mapping the Binding Handle to an Entry-point Vector (EPV)**</span></span>



| <span data-ttu-id="c0ad6-257">UUID interfaccia (dall'handle di associazione client)</span><span class="sxs-lookup"><span data-stu-id="c0ad6-257">Interface UUID (from client binding handle)</span></span> | <span data-ttu-id="c0ad6-258">UUID oggetto (dall'handle di associazione client)</span><span class="sxs-lookup"><span data-stu-id="c0ad6-258">Object UUID (from client binding handle)</span></span> | <span data-ttu-id="c0ad6-259">Tipo di oggetto (tabella del registro di sistema degli oggetti)</span><span class="sxs-lookup"><span data-stu-id="c0ad6-259">Object type (from object registry table)</span></span> | <span data-ttu-id="c0ad6-260">Manager EPV (dalla tabella del registro di sistema Interface)</span><span class="sxs-lookup"><span data-stu-id="c0ad6-260">Manager EPV (from interface registry table)</span></span> |
|---------------------------------------------|------------------------------------------|------------------------------------------|---------------------------------------------|
| <span data-ttu-id="c0ad6-261">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-261">*uuid1*</span></span>                                     | <span data-ttu-id="c0ad6-262">Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-262">Nil</span></span>                                      | <span data-ttu-id="c0ad6-263">Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-263">Nil</span></span>                                      | <span data-ttu-id="c0ad6-264">EPV predefinito</span><span class="sxs-lookup"><span data-stu-id="c0ad6-264">Default EPV</span></span>                                 |
| <span data-ttu-id="c0ad6-265">Vedere sopra.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-265">Same as above</span></span>                               | <span data-ttu-id="c0ad6-266">*UUID*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-266">*uuidA*</span></span>                                  | <span data-ttu-id="c0ad6-267">Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-267">Nil</span></span>                                      | <span data-ttu-id="c0ad6-268">EPV predefinito</span><span class="sxs-lookup"><span data-stu-id="c0ad6-268">Default EPV</span></span>                                 |



 

<span data-ttu-id="c0ad6-269">Nei passaggi seguenti vengono descritte le azioni accettate dalla libreria di runtime del server RPC, come illustrato nelle tabelle precedenti, quando un client con interfaccia UUID *uuid1* lo chiama.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-269">The following steps describe the actions that the RPC server's run-time library take, as shown in the preceding tables, when a client with interface UUID *uuid1* calls it.</span></span>

1.  <span data-ttu-id="c0ad6-270">Il server chiama [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) per associare un'interfaccia offerta con l'UUID del tipo di gestione nil e con il EPV di gestione predefinito generato da MIDL.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-270">The server calls [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) to associate an interface it offers with the nil manager type UUID and with the MIDL-generated default manager EPV.</span></span> <span data-ttu-id="c0ad6-271">Questa chiamata aggiunge una voce nella tabella del registro di sistema Interface.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-271">This call adds an entry in the interface registry table.</span></span> <span data-ttu-id="c0ad6-272">L'UUID dell'interfaccia è contenuto nel parametro *IfSpec* .</span><span class="sxs-lookup"><span data-stu-id="c0ad6-272">The interface UUID is contained in the *IfSpec* a parameter.</span></span>
2.  <span data-ttu-id="c0ad6-273">Per impostazione predefinita, la tabella del registro di sistema dell'oggetto associa tutti gli UUID degli oggetti con UUID di tipo nil.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-273">By default, the object registry table associates all object UUIDs with the nil type UUID.</span></span> <span data-ttu-id="c0ad6-274">In questo esempio, il server non chiama [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype).</span><span class="sxs-lookup"><span data-stu-id="c0ad6-274">In this example, the server does not call [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype).</span></span>
3.  <span data-ttu-id="c0ad6-275">La libreria di runtime del server riceve un codice di procedura remota contenente l'UUID dell'interfaccia a cui appartiene la chiamata e l'UUID dell'oggetto dall'handle di associazione della chiamata.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-275">The server run-time library receives a remote procedure code containing the interface UUID that the call belongs to and the object UUID from the call's binding handle.</span></span>

    <span data-ttu-id="c0ad6-276">Per informazioni sulle modalità di impostazione dell'UUID di un oggetto in un handle di binding, vedere le seguenti voci di riferimento per le funzioni:</span><span class="sxs-lookup"><span data-stu-id="c0ad6-276">See the following function reference entries for discussions of how an object UUID is set into a binding handle:</span></span>

    -   [<span data-ttu-id="c0ad6-277">**RpcNsBindingImportBegin**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-277">**RpcNsBindingImportBegin**</span></span>](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingimportbegina)
    -   [<span data-ttu-id="c0ad6-278">**RpcNsBindingLookupBegin**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-278">**RpcNsBindingLookupBegin**</span></span>](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindinglookupbegina)
    -   [<span data-ttu-id="c0ad6-279">**Errore in RpcBindingFromStringBinding**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-279">**RpcBindingFromStringBinding**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingfromstringbinding)
    -   [<span data-ttu-id="c0ad6-280">**RpcBindingSetObject**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-280">**RpcBindingSetObject**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetobject)

4.  <span data-ttu-id="c0ad6-281">Utilizzando l'UUID dell'interfaccia dalla chiamata RPC, la libreria di runtime del server individua tale UUID dell'interfaccia nella tabella del registro di sistema Interface.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-281">Using the interface UUID from the remote procedure call, the server's run-time library locates that interface UUID in the interface registry table.</span></span>

    <span data-ttu-id="c0ad6-282">Se il server non ha registrato l'interfaccia usando [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2), la chiamata di procedura remota viene restituita al chiamante con un \_ codice di \_ stato sconosciuto di RPC \_ se.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-282">If the server did not register the interface using [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2), then the remote procedure call returns to the caller with an RPC\_S\_UNKNOWN\_IF status code.</span></span>

5.  <span data-ttu-id="c0ad6-283">Utilizzando l'UUID dell'oggetto dall'handle di binding, la libreria di runtime del server individua l'UUID dell'oggetto nella tabella del registro di sistema dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-283">Using the object UUID from the binding handle, the server's run-time library locates that object UUID in the object registry table.</span></span> <span data-ttu-id="c0ad6-284">In questo esempio, tutti gli UUID degli oggetti vengono mappati al tipo di oggetto Nil.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-284">In this example, all object UUIDs map to the nil object type.</span></span>
6.  <span data-ttu-id="c0ad6-285">La libreria di runtime del server individua il tipo di gestione nil nella tabella del registro di sistema dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-285">The server's run-time library locates the nil manager type in the interface registry table.</span></span>
7.  <span data-ttu-id="c0ad6-286">La combinazione dell'UUID dell'interfaccia e del tipo nil nella tabella del registro di sistema viene risolta nel EPV predefinito, che contiene le routine di gestione server da eseguire per l'UUID dell'interfaccia presente nella chiamata di procedura remota.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-286">Combining the interface UUID and nil type in the interface registry table resolves to the default EPV, which contains the server-manager routines to be executed for the interface UUID found in the remote procedure call.</span></span>

<span data-ttu-id="c0ad6-287">Si supponga che il server offra più interfacce e più implementazioni di ogni interfaccia, come descritto nelle tabelle seguenti.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-287">Assume that the server offers multiple interfaces and multiple implementations of each interface, as described in the following tables.</span></span>

<span data-ttu-id="c0ad6-288">**Tabella del registro di sistema Interface**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-288">**Interface Registry Table**</span></span>



| <span data-ttu-id="c0ad6-289">UUID interfaccia</span><span class="sxs-lookup"><span data-stu-id="c0ad6-289">Interface UUID</span></span> | <span data-ttu-id="c0ad6-290">UUID di tipo Manager</span><span class="sxs-lookup"><span data-stu-id="c0ad6-290">Manager-type UUID</span></span> | <span data-ttu-id="c0ad6-291">Vettore punto di ingresso</span><span class="sxs-lookup"><span data-stu-id="c0ad6-291">Entry-point vector</span></span> |
|----------------|-------------------|--------------------|
| <span data-ttu-id="c0ad6-292">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-292">*uuid1*</span></span>        | <span data-ttu-id="c0ad6-293">Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-293">Nil</span></span>               | <span data-ttu-id="c0ad6-294">*epv1*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-294">*epv1*</span></span>             |
| <span data-ttu-id="c0ad6-295">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-295">*uuid1*</span></span>        | <span data-ttu-id="c0ad6-296">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-296">*uuid3*</span></span>           | <span data-ttu-id="c0ad6-297">*epv4*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-297">*epv4*</span></span>             |
| <span data-ttu-id="c0ad6-298">*uuid2*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-298">*uuid2*</span></span>        | <span data-ttu-id="c0ad6-299">*uuid4*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-299">*uuid4*</span></span>           | <span data-ttu-id="c0ad6-300">*epv2*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-300">*epv2*</span></span>             |
| <span data-ttu-id="c0ad6-301">*uuid2*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-301">*uuid2*</span></span>        | <span data-ttu-id="c0ad6-302">*uuid7*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-302">*uuid7*</span></span>           | <span data-ttu-id="c0ad6-303">*epv3*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-303">*epv3*</span></span>             |



 

<span data-ttu-id="c0ad6-304">**Tabella del registro oggetti**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-304">**Object Registry Table**</span></span>



| <span data-ttu-id="c0ad6-305">UUID oggetto</span><span class="sxs-lookup"><span data-stu-id="c0ad6-305">Object UUID</span></span>      | <span data-ttu-id="c0ad6-306">Tipo di oggetto</span><span class="sxs-lookup"><span data-stu-id="c0ad6-306">Object type</span></span> |
|------------------|-------------|
| <span data-ttu-id="c0ad6-307">*UUID*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-307">*uuidA*</span></span>          | <span data-ttu-id="c0ad6-308">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-308">*uuid3*</span></span>     |
| <span data-ttu-id="c0ad6-309">*uuidB*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-309">*uuidB*</span></span>          | <span data-ttu-id="c0ad6-310">*uuid7*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-310">*uuid7*</span></span>     |
| <span data-ttu-id="c0ad6-311">*uuidC*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-311">*uuidC*</span></span>          | <span data-ttu-id="c0ad6-312">*uuid7*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-312">*uuid7*</span></span>     |
| <span data-ttu-id="c0ad6-313">*UUID*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-313">*uuidD*</span></span>          | <span data-ttu-id="c0ad6-314">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-314">*uuid3*</span></span>     |
| <span data-ttu-id="c0ad6-315">*UUID*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-315">*uuidE*</span></span>          | <span data-ttu-id="c0ad6-316">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-316">*uuid3*</span></span>     |
| <span data-ttu-id="c0ad6-317">*uuidF*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-317">*uuidF*</span></span>          | <span data-ttu-id="c0ad6-318">*uuid8*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-318">*uuid8*</span></span>     |
| <span data-ttu-id="c0ad6-319">Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-319">Nil</span></span>              | <span data-ttu-id="c0ad6-320">Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-320">Nil</span></span>         |
| <span data-ttu-id="c0ad6-321">(Qualsiasi altro UUID)</span><span class="sxs-lookup"><span data-stu-id="c0ad6-321">(Any other UUID)</span></span> | <span data-ttu-id="c0ad6-322">Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-322">Nil</span></span>         |



 

<span data-ttu-id="c0ad6-323">**Mapping dell'handle di associazione a un vettore del punto di ingresso**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-323">**Mapping the Binding Handle to an Entry-point Vector**</span></span>



| <span data-ttu-id="c0ad6-324">UUID interfaccia (dall'handle di associazione client)</span><span class="sxs-lookup"><span data-stu-id="c0ad6-324">Interface UUID (from client binding handle)</span></span> | <span data-ttu-id="c0ad6-325">UUID oggetto (dall'handle di associazione client)</span><span class="sxs-lookup"><span data-stu-id="c0ad6-325">Object UUID (from client binding handle)</span></span> | <span data-ttu-id="c0ad6-326">Tipo di oggetto (tabella del registro di sistema degli oggetti)</span><span class="sxs-lookup"><span data-stu-id="c0ad6-326">Object type (from object registry table)</span></span> | <span data-ttu-id="c0ad6-327">Manager EPV (dalla tabella del registro di sistema Interface)</span><span class="sxs-lookup"><span data-stu-id="c0ad6-327">Manager EPV (from interface registry table)</span></span> |
|---------------------------------------------|------------------------------------------|------------------------------------------|---------------------------------------------|
| <span data-ttu-id="c0ad6-328">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-328">*uuid1*</span></span>                                     | <span data-ttu-id="c0ad6-329">Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-329">Nil</span></span>                                      | <span data-ttu-id="c0ad6-330">Nil</span><span class="sxs-lookup"><span data-stu-id="c0ad6-330">Nil</span></span>                                      | <span data-ttu-id="c0ad6-331">*epv1*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-331">*epv1*</span></span>                                      |
| <span data-ttu-id="c0ad6-332">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-332">*uuid1*</span></span>                                     | <span data-ttu-id="c0ad6-333">*UUID*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-333">*uuidA*</span></span>                                  | <span data-ttu-id="c0ad6-334">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-334">*uuid3*</span></span>                                  | <span data-ttu-id="c0ad6-335">*epv4*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-335">*epv4*</span></span>                                      |
| <span data-ttu-id="c0ad6-336">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-336">*uuid1*</span></span>                                     | <span data-ttu-id="c0ad6-337">*UUID*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-337">*uuidD*</span></span>                                  | <span data-ttu-id="c0ad6-338">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-338">*uuid3*</span></span>                                  | <span data-ttu-id="c0ad6-339">*epv4*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-339">*epv4*</span></span>                                      |
| <span data-ttu-id="c0ad6-340">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-340">*uuid1*</span></span>                                     | <span data-ttu-id="c0ad6-341">*UUID*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-341">*uuidE*</span></span>                                  | <span data-ttu-id="c0ad6-342">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-342">*uuid3*</span></span>                                  | <span data-ttu-id="c0ad6-343">*epv4*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-343">*epv4*</span></span>                                      |
| <span data-ttu-id="c0ad6-344">*uuid2*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-344">*uuid2*</span></span>                                     | <span data-ttu-id="c0ad6-345">*uuidB*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-345">*uuidB*</span></span>                                  | <span data-ttu-id="c0ad6-346">*uuid7*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-346">*uuid7*</span></span>                                  | <span data-ttu-id="c0ad6-347">*epv3*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-347">*epv3*</span></span>                                      |
| <span data-ttu-id="c0ad6-348">*uuid2*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-348">*uuid2*</span></span>                                     | <span data-ttu-id="c0ad6-349">*uuidC*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-349">*uuidC*</span></span>                                  | <span data-ttu-id="c0ad6-350">*uuid7*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-350">*uuid7*</span></span>                                  | <span data-ttu-id="c0ad6-351">*epv3*</span><span class="sxs-lookup"><span data-stu-id="c0ad6-351">*epv3*</span></span>                                      |



 

<span data-ttu-id="c0ad6-352">I passaggi seguenti descrivono le azioni eseguite dalla libreria di runtime del server, come illustrato nelle tabelle precedenti, quando un client con interfaccia UUID *UUID2* e l'UUID dell'oggetto *uuidC* lo chiama.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-352">The following steps describe the actions that the server's run-time library take, as shown in the preceding tables when a client with interface UUID *uuid2* and object UUID *uuidC* calls it.</span></span>

1.  <span data-ttu-id="c0ad6-353">Il server chiama [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) per associare le interfacce offerte con i diversi EPV di gestione.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-353">The server calls [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) to associate the interfaces it offers with the different manager EPVs.</span></span> <span data-ttu-id="c0ad6-354">Le voci nella tabella del registro di sistema Interface riflettono quattro chiamate di [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) per offrire due interfacce, con due implementazioni (EPV) per ogni interfaccia.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-354">The entries in the interface registry table reflect four calls of [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) to offer two interfaces, with two implementations (EPVs) for each interface.</span></span>
2.  <span data-ttu-id="c0ad6-355">Il server chiama [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) per stabilire il tipo di ogni oggetto che offre.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-355">The server calls [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) to establish the type of each object it offers.</span></span> <span data-ttu-id="c0ad6-356">Oltre all'associazione predefinita dell'oggetto Nil a un tipo Nil, tutti gli altri UUID degli oggetti non trovati in modo esplicito nella tabella del registro di sistema dell'oggetto vengono mappati anche all'UUID di tipo nil.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-356">In addition to the default association of the nil object to a nil type, all other object UUIDs not explicitly found in the object registry table also map to the nil type UUID.</span></span>

    <span data-ttu-id="c0ad6-357">In questo esempio, il server chiama la routine [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) sei volte.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-357">In this example, the server calls the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine six times.</span></span>

3.  <span data-ttu-id="c0ad6-358">La libreria di runtime del server riceve una chiamata di procedura remota contenente l'UUID dell'interfaccia a cui appartiene la chiamata e un UUID dell'oggetto dall'handle di associazione della chiamata.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-358">The server run-time library receives a remote procedure call containing the interface UUID that the call belongs to and an object UUID from the call's binding handle.</span></span>
4.  <span data-ttu-id="c0ad6-359">Utilizzando l'UUID dell'interfaccia dalla chiamata RPC, la libreria di runtime del server individua l'UUID dell'interfaccia nella tabella del registro di sistema Interface.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-359">Using the interface UUID from the remote procedure call, the server's run-time library locates the interface UUID in the interface registry table.</span></span>
5.  <span data-ttu-id="c0ad6-360">Utilizzando l'UUID dell'oggetto *uuidC* dall'handle di binding, la libreria di runtime del server individua l'UUID dell'oggetto nella tabella del registro di sistema dell'oggetto e rileva che esegue il mapping al tipo *uuid7*.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-360">Using the *uuidC* object UUID from the binding handle, the server's run-time library locates the object UUID in the object registry table and finds that it maps to type *uuid7*.</span></span>
6.  <span data-ttu-id="c0ad6-361">Per individuare il tipo di gestore, la libreria di runtime del server combina l'UUID dell'interfaccia, *UUID2* e il tipo *uuid7* nella tabella del registro di sistema Interface.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-361">To locate the manager type, the server's run-time library combines the interface UUID, *uuid2*, and type *uuid7* in the interface registry table.</span></span> <span data-ttu-id="c0ad6-362">Questa operazione viene risolta in *epv3*, che contiene la routine di Server Manager da eseguire per la chiamata RPC.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-362">This resolves to *epv3*, which contains the server manager routine to be executed for the remote procedure call.</span></span>

<span data-ttu-id="c0ad6-363">Le routine in *epv2* non verranno mai eseguite perché il server non ha chiamato la routine [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) per aggiungere tutti gli oggetti con un tipo UUID di *uuid4* alla tabella del registro di sistema dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-363">The routines in *epv2* will never be executed because the server has not called the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine to add any objects with a type UUID of *uuid4* to the object registry table.</span></span>

<span data-ttu-id="c0ad6-364">Una chiamata di procedura remota con interfaccia UUID *UUID2* e l'UUID dell'oggetto *uuidF* restituisce al chiamante un \_ codice di stato del tipo di \_ gestione sconosciuto RPC \_ \_ perché il server non ha chiamato [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) per registrare l'interfaccia con un tipo di Manager *uuid8*.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-364">A remote procedure call with interface UUID *uuid2* and object UUID *uuidF* returns to the caller with an RPC\_S\_UNKNOWN\_MGR\_TYPE status code because the server did not call [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) to register the interface with a manager type of *uuid8*.</span></span>

## <a name="return-values"></a><span data-ttu-id="c0ad6-365">Valori restituiti</span><span class="sxs-lookup"><span data-stu-id="c0ad6-365">Return Values</span></span>

<span data-ttu-id="c0ad6-366">Questa funzione restituisce uno dei valori seguenti.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-366">This function returns one of the following values.</span></span>



| <span data-ttu-id="c0ad6-367">Valore</span><span class="sxs-lookup"><span data-stu-id="c0ad6-367">Value</span></span>                             | <span data-ttu-id="c0ad6-368">Significato</span><span class="sxs-lookup"><span data-stu-id="c0ad6-368">Meaning</span></span>                      |
|-----------------------------------|------------------------------|
| <span data-ttu-id="c0ad6-369">RPC \_ S \_ OK</span><span class="sxs-lookup"><span data-stu-id="c0ad6-369">RPC\_S\_OK</span></span>                        | <span data-ttu-id="c0ad6-370">Operazione riuscita</span><span class="sxs-lookup"><span data-stu-id="c0ad6-370">Success</span></span>                      |
| <span data-ttu-id="c0ad6-371">il \_ tipo RPC è \_ \_ già \_ registrato</span><span class="sxs-lookup"><span data-stu-id="c0ad6-371">RPC\_S\_TYPE\_ALREADY\_REGISTERED</span></span> | <span data-ttu-id="c0ad6-372">UUID di tipo già registrato</span><span class="sxs-lookup"><span data-stu-id="c0ad6-372">Type UUID already registered</span></span> |



 

## <a name="supplying-your-own-object-inquiry-function"></a><span data-ttu-id="c0ad6-373">Fornire una funzione di richiesta di oggetti personalizzata</span><span class="sxs-lookup"><span data-stu-id="c0ad6-373">Supplying Your Own Object-inquiry Function</span></span>

<span data-ttu-id="c0ad6-374">Si consideri un server che gestisce migliaia di oggetti di molti tipi diversi.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-374">Consider a server that manages thousands of objects of many different types.</span></span> <span data-ttu-id="c0ad6-375">Ogni volta che il server è stato avviato, l'applicazione server deve chiamare la funzione [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) per ognuno degli oggetti, anche se i client possono fare riferimento solo ad alcuni di essi (o richiedere molto tempo per farvi riferimento).</span><span class="sxs-lookup"><span data-stu-id="c0ad6-375">Whenever the server started, the server application would have to call the function [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) for every one of the objects, even though clients might refer to only a few of them (or take a long time to refer to them).</span></span> <span data-ttu-id="c0ad6-376">È probabile che queste migliaia di oggetti si trovino sul disco, pertanto il recupero dei tipi potrebbe richiedere molto tempo.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-376">These thousands of objects are likely to be on disk, so retrieving their types would be time consuming.</span></span> <span data-ttu-id="c0ad6-377">Inoltre, la tabella interna che sta eseguendo il mapping dell'UUID dell'oggetto all'UUID di tipo Manager dovrebbe essenzialmente duplicare il mapping gestito con gli oggetti stessi.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-377">Also, the internal table that is mapping the object UUID to the manager type UUID would essentially duplicate the mapping maintained with the objects themselves.</span></span>

<span data-ttu-id="c0ad6-378">Per praticità, il set di funzioni RPC include la funzione [**RpcObjectSetInqFn**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsetinqfn).</span><span class="sxs-lookup"><span data-stu-id="c0ad6-378">For convenience, the RPC function set includes the function [**RpcObjectSetInqFn**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsetinqfn).</span></span> <span data-ttu-id="c0ad6-379">Con questa funzione è possibile fornire la propria funzione di richiesta oggetti.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-379">With this function, you provide your own object-inquiry function.</span></span>

<span data-ttu-id="c0ad6-380">Ad esempio, è possibile fornire la propria funzione di richiesta oggetti quando si esegue il mapping di oggetti da 100 a 199 al tipo numero 1, 200 – 299 al tipo numero 2 e così via.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-380">As an example, you can supply your own object-inquiry function when you map objects 100–199 to type number 1, 200–299 to type number 2, and so on.</span></span> <span data-ttu-id="c0ad6-381">La funzione di richiesta di oggetti può essere estesa anche a una file system distribuita, in cui l'applicazione server non dispone di un elenco di tutti i file (UUID degli oggetti) disponibili o quando l'UUID dell'oggetto esegue il nome dei file nel file system e non si desidera precaricare tutti i mapping tra gli UUID degli oggetti e gli UUID di tipo.</span><span class="sxs-lookup"><span data-stu-id="c0ad6-381">The object inquiry function can also be extended to a distributed file system, where the server application does not have a list of all the files (object UUIDs) available, or when object UUIDs name files in the file system and you do not want to preload all of the mappings between object UUIDs and type UUIDs.</span></span>

## <a name="related-topics"></a><span data-ttu-id="c0ad6-382">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="c0ad6-382">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c0ad6-383">**Errore in RpcBindingFromStringBinding**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-383">**RpcBindingFromStringBinding**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingfromstringbinding)
</dt> <dt>

[<span data-ttu-id="c0ad6-384">**RpcBindingSetObject**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-384">**RpcBindingSetObject**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetobject)
</dt> <dt>

[<span data-ttu-id="c0ad6-385">**RpcNsBindingExport**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-385">**RpcNsBindingExport**</span></span>](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingexporta)
</dt> <dt>

[<span data-ttu-id="c0ad6-386">**RpcNsBindingImportBegin**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-386">**RpcNsBindingImportBegin**</span></span>](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingimportbegina)
</dt> <dt>

[<span data-ttu-id="c0ad6-387">**RpcNsBindingLookupBegin**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-387">**RpcNsBindingLookupBegin**</span></span>](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindinglookupbegina)
</dt> <dt>

[<span data-ttu-id="c0ad6-388">**RpcObjectSetType**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-388">**RpcObjectSetType**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype)
</dt> <dt>

[<span data-ttu-id="c0ad6-389">**RpcServerRegisterIf**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-389">**RpcServerRegisterIf**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif)
</dt> <dt>

[<span data-ttu-id="c0ad6-390">**RpcServerRegisterIf2**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-390">**RpcServerRegisterIf2**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2)
</dt> <dt>

[<span data-ttu-id="c0ad6-391">**RpcServerRegisterIfEx**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-391">**RpcServerRegisterIfEx**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)
</dt> <dt>

[<span data-ttu-id="c0ad6-392">**RpcServerUnregisterIf**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-392">**RpcServerUnregisterIf**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterif)
</dt> <dt>

[<span data-ttu-id="c0ad6-393">**RpcServerUnregisterIfEx**</span><span class="sxs-lookup"><span data-stu-id="c0ad6-393">**RpcServerUnregisterIfEx**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterifex)
</dt> </dl>

 

 




