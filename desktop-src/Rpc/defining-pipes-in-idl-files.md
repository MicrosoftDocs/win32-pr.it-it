---
title: Definizione di pipe nei file IDL
description: Quando si definisce una pipe in un file IDL, il compilatore MIDL genera una struttura di controllo pipe i cui membri sono puntatori alle procedure push, pull e Alloc, oltre a una variabile di stato che coordina queste procedure.
ms.assetid: f6c282e4-3056-48c4-bd12-dfcae6d238d7
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 115be7fc5d00458d13df102afebe9ba5b55de070
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104399394"
---
# <a name="defining-pipes-in-idl-files"></a>Definizione di pipe nei file IDL

Quando si definisce una pipe in un file IDL, il compilatore MIDL genera una struttura di controllo pipe i cui membri sono puntatori alle procedure push, pull e Alloc, oltre a una variabile di stato che coordina queste procedure. L'applicazione client Inizializza i campi nella struttura del controllo pipe, gestisce la variabile di stato e gestisce il trasferimento dei dati con le proprie funzioni push, pull e allocazione. Il codice stub client chiama queste funzioni dell'applicazione nei cicli durante il trasferimento dei dati. Per una pipe di input, lo stub client esegue il marshalling dei dati di trasferimento e li trasmette allo stub del server. Per una pipe di output, lo stub client esegue l'unmarshalling dei dati in un buffer e passa un puntatore a tale buffer all'applicazione client.

Il codice stub del server Inizializza i campi della struttura del controllo pipe su una variabile di stato, nonché i puntatori alle routine push e pull. Lo stub del server gestisce lo stato e gestisce la propria archiviazione privata per i dati di trasferimento. L'applicazione server chiama le routine pull e push nei cicli durante la chiamata di procedura remota mentre riceve ed esegue l'unmarshalling dei dati dallo stub client oppure effettua il marshalling e trasmette i dati allo stub client.

Il file IDL di esempio seguente definisce una pipe di tipo LONG \_ pipe, le cui dimensioni degli elementi sono definite come **Long**. Dichiara inoltre i prototipi di funzione per le chiamate di procedura remota inpipe e outpipe, per inviare e ricevere dati, rispettivamente. Quando il compilatore MIDL elabora il file IDL, genera il file di intestazione illustrato nell'esempio.

## <a name="example"></a>Esempio

``` syntax
// File: pipedemo.idl
typedef pipe long LONG_PIPE;
void InPipe( [in] LONG_PIPE pipe_data );
void OutPipe( [out] LONG_PIPE *pipe_data ); 
//end pipedemo.idl
 
// File: pipedemo.h (fragment)
// Generated by the MIDL compiler from pipedemo.idl
typedef struct pipe_LONG_PIPE
{
    void (__RPC_FAR * pull) (
        char __RPC_FAR * state,
        long __RPC_FAR * buf,
        unsigned long esize,
        unsigned long __RPC_FAR * ecount );
    void (__RPC_FAR * push) (
        char __RPC_FAR * state,
        long __RPC_FAR * buf,
        unsigned long ecount );
    void (__RPC_FAR * alloc) (
        char __RPC_FAR * state,
        unsigned long bsize,
        long __RPC_FAR * __RPC_FAR * buf,
        unsigned long __RPC_FAR * bcount );
    char __RPC_FAR * state;
} LONG_PIPE;
 
void InPipe( 
    /* [in] */ LONG_PIPE pipe_data);
void OutPipe( 
    /* [out] */ LONG_PIPE __RPC_FAR *pipe_data);
//end pipedemo.h
```

## <a name="related-topics"></a>Argomenti correlati

<dl> <dt>

[inviare tramite pipe](/windows/desktop/Midl/pipe)
</dt> <dt>

[**/OI**](/windows/desktop/Midl/-oi)
</dt> </dl>

 

 