---
title: Definizione di pipe nei file IDL
description: Quando una pipe viene definita in un file IDL, il compilatore MIDL genera una struttura di controllo della pipe i cui membri sono puntatori a routine push, pull e alloc, nonché una variabile di stato che coordina queste procedure.
ms.assetid: f6c282e4-3056-48c4-bd12-dfcae6d238d7
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bbd237690f45fd6ca73d62f54a5dccf0409f4424e1e96407c116b39ef5d882a7
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/11/2021
ms.locfileid: "120022071"
---
# <a name="defining-pipes-in-idl-files"></a>Definizione di pipe nei file IDL

Quando una pipe viene definita in un file IDL, il compilatore MIDL genera una struttura di controllo della pipe i cui membri sono puntatori a routine push, pull e alloc, nonché una variabile di stato che coordina queste procedure. L'applicazione client inizializza i campi nella struttura di controllo della pipe, mantiene la variabile di stato e gestisce il trasferimento dei dati con le proprie funzioni di push, pull e allocazione. Il codice stub del client chiama queste funzioni dell'applicazione in cicli durante il trasferimento dei dati. Per una pipe di input, lo stub del client effettua il marshalling dei dati di trasferimento e la trasmette al server stub. Per una pipe di output, lo stub del client unmarshals i dati in un buffer e passa un puntatore a tale buffer all'applicazione client.

Il codice stub del server inizializza i campi della struttura di controllo della pipe su una variabile di stato, nonché i puntatori alle routine push e pull. Lo stub del server mantiene lo stato e gestisce l'archiviazione privata per i dati di trasferimento. L'applicazione server chiama le routine pull e push nei cicli durante la chiamata di procedura remota durante la ricezione e l'unmarshaling dei dati dallo stub client oppure effettua il marshalling e la trasmissione di dati al stub client.

Il file IDL di esempio seguente definisce un tipo di pipe LONG PIPE, la cui dimensione \_ dell'elemento è definita come **long**. Dichiara inoltre prototipi di funzione per le chiamate di procedura remota rispettivamente in InPipe e OutPipe, per inviare e ricevere dati. Quando il compilatore MIDL elabora il file IDL, genera il file di intestazione illustrato nell'esempio.

## <a name="example"></a>Esempio

``` syntax
// File: pipedemo.idl
typedef pipe long LONG_PIPE;
void InPipe( [in] LONG_PIPE pipe_data );
void OutPipe( [out] LONG_PIPE *pipe_data ); 
//end pipedemo.idl
 
// File: pipedemo.h (fragment)
// Generated by the MIDL compiler from pipedemo.idl
typedef struct pipe_LONG_PIPE
{
    void (__RPC_FAR * pull) (
        char __RPC_FAR * state,
        long __RPC_FAR * buf,
        unsigned long esize,
        unsigned long __RPC_FAR * ecount );
    void (__RPC_FAR * push) (
        char __RPC_FAR * state,
        long __RPC_FAR * buf,
        unsigned long ecount );
    void (__RPC_FAR * alloc) (
        char __RPC_FAR * state,
        unsigned long bsize,
        long __RPC_FAR * __RPC_FAR * buf,
        unsigned long __RPC_FAR * bcount );
    char __RPC_FAR * state;
} LONG_PIPE;
 
void InPipe( 
    /* [in] */ LONG_PIPE pipe_data);
void OutPipe( 
    /* [out] */ LONG_PIPE __RPC_FAR *pipe_data);
//end pipedemo.h
```

## <a name="related-topics"></a>Argomenti correlati

<dl> <dt>

[inviare tramite pipe](/windows/desktop/Midl/pipe)
</dt> <dt>

[**/oi**](/windows/desktop/Midl/-oi)
</dt> </dl>

 

 