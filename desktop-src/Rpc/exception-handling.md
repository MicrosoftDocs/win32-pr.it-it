---
title: Gestione delle eccezioni (RPC)
description: RPC usa lo stesso approccio alla gestione delle eccezioni come API Windows.
ms.assetid: 7133d3f4-ed84-4cde-bc77-88e73ced9073
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 25de594a648cddb70f26b42e8b0dbf1d6a9dd51d
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/10/2020
ms.locfileid: "104474951"
---
# <a name="exception-handling-rpc"></a><span data-ttu-id="476b0-103">Gestione delle eccezioni (RPC)</span><span class="sxs-lookup"><span data-stu-id="476b0-103">Exception Handling (RPC)</span></span>

<span data-ttu-id="476b0-104">RPC usa lo stesso approccio alla gestione delle eccezioni come API Windows.</span><span class="sxs-lookup"><span data-stu-id="476b0-104">RPC uses the same approach to exception handling as the Windows API.</span></span>

<span data-ttu-id="476b0-105">La struttura [**RpcTryFinally**](rpctryfinally.md)  /  [**RpcFinally**](/previous-versions/aa375699(v=vs.80))  /  [**RpcEndFinally**](/previous-versions/aa375634(v=vs.80)) è equivalente all'istruzione **try-finally** di Windows.</span><span class="sxs-lookup"><span data-stu-id="476b0-105">The [**RpcTryFinally**](rpctryfinally.md) / [**RpcFinally**](/previous-versions/aa375699(v=vs.80)) / [**RpcEndFinally**](/previous-versions/aa375634(v=vs.80)) structure is equivalent to the Windows **try-finally** statement.</span></span> <span data-ttu-id="476b0-106">Il costrutto di eccezione RPC [**RpcTryExcept**](rpctryexcept.md)  /  [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept)  /  [**RpcEndExcept**](/previous-versions/aa375629(v=vs.80)) è equivalente all'istruzione **try-except** di Windows.</span><span class="sxs-lookup"><span data-stu-id="476b0-106">The RPC exception construct [**RpcTryExcept**](rpctryexcept.md) / [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept) / [**RpcEndExcept**](/previous-versions/aa375629(v=vs.80)) is equivalent to the Windows **try-except** statement.</span></span>

<span data-ttu-id="476b0-107">Quando si utilizzano i gestori di eccezioni RPC, il codice sorgente lato client è portabile.</span><span class="sxs-lookup"><span data-stu-id="476b0-107">When you use the RPC exception handlers, your client-side source code is portable.</span></span> <span data-ttu-id="476b0-108">I diversi file di intestazione RPC forniti per ogni piattaforma risolvono le macro **RpcTry** e [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept) per ogni piattaforma.</span><span class="sxs-lookup"><span data-stu-id="476b0-108">The different RPC header files provided for each platform resolve the **RpcTry** and [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept) macros for each platform.</span></span> <span data-ttu-id="476b0-109">Nell'ambiente Windows le macro vengono mappate direttamente alle istruzioni try- **finally** e **try-except** di Windows.</span><span class="sxs-lookup"><span data-stu-id="476b0-109">In the Windows environment, these macros map directly to the Windows **try-finally** and **try-except** statements.</span></span> <span data-ttu-id="476b0-110">In altri ambienti queste macro sono mappate ad altre implementazioni specifiche della piattaforma di gestori di eccezioni.</span><span class="sxs-lookup"><span data-stu-id="476b0-110">In other environments, these macros map to other platform-specific implementations of exception handlers.</span></span>

<span data-ttu-id="476b0-111">Le potenziali eccezioni generate da queste strutture includono il set di codici di errore restituiti dalle funzioni RPC con i prefissi RPC \_ S \_ e RPC \_ X e il set di eccezioni restituite da Windows.</span><span class="sxs-lookup"><span data-stu-id="476b0-111">Potential exceptions raised by these structures include the set of error codes returned by the RPC functions with the prefixes RPC\_S\_ and RPC\_X and the set of exceptions returned by Windows.</span></span> <span data-ttu-id="476b0-112">Per informazioni dettagliate, vedere [valori restituiti RPC](rpc-return-values.md).</span><span class="sxs-lookup"><span data-stu-id="476b0-112">For details, see [RPC Return Values](rpc-return-values.md).</span></span>

<span data-ttu-id="476b0-113">Sebbene le macro **RpcTry** e [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept) forniscano un metodo personalizzabile indipendente dalla piattaforma per gestire le eccezioni, in Windows Vista e nelle versioni successive di Windows, [**RpcExceptionFilter**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcexceptionfilter) è il metodo consigliato per gestire le eccezioni.</span><span class="sxs-lookup"><span data-stu-id="476b0-113">While the **RpcTry** and [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept) macros provide a customizable platform-agnostic way to handle exceptions, in Windows Vista and later versions of Windows, [**RpcExceptionFilter**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcexceptionfilter) is the recommended way of handling exceptions.</span></span> <span data-ttu-id="476b0-114">Non richiede la scrittura di filtri personalizzati per l'acquisizione di molte delle eccezioni strutturate più comuni; Tuttavia, i filtri eccezioni personalizzati richiedono ancora **RpcExcept**.</span><span class="sxs-lookup"><span data-stu-id="476b0-114">It does not require custom filters to be written to capture many of the most common structured exceptions; however, custom exception filters still require **RpcExcept**.</span></span>

<span data-ttu-id="476b0-115">Le eccezioni che si verificano nell'applicazione server, nello stub server e nella libreria di runtime del server (sopra il livello di trasporto) vengono propagate al client.</span><span class="sxs-lookup"><span data-stu-id="476b0-115">Exceptions that occur in the server application, server stub, and server run-time library (above the transport layer) are propagated to the client.</span></span> <span data-ttu-id="476b0-116">Nessuna eccezione viene propagata dal livello di trasporto del server.</span><span class="sxs-lookup"><span data-stu-id="476b0-116">No exceptions are propagated from the server-transport level.</span></span> <span data-ttu-id="476b0-117">Il metodo consigliato per la restituzione di errori al runtime RPC da parte di una routine del server consiste nel generare un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="476b0-117">The recommended method for a server routine to return errors to the RPC run time is to throw an exception.</span></span> <span data-ttu-id="476b0-118">Una routine server può utilizzare qualsiasi metodo appropriato per la comunicazione di errori tra routine del server. Tuttavia, se viene rilevato un errore che impedisce l'esecuzione della procedura remota, deve generare un'eccezione dopo la pulizia e prima di tornare al runtime RPC, anziché restituire un valore a RPC che solo la routine del server riconosca come un errore.</span><span class="sxs-lookup"><span data-stu-id="476b0-118">A server routine can use whatever methods is appropriate for communicating errors between server routines, but if it encounters an error that prevents it from executing the remote procedure, it should raise an exception after cleaning up and before returning to the RPC run time, rather than returning a value to RPC that only the server routine recognizes as an error.</span></span>

<span data-ttu-id="476b0-119">Nella figura seguente viene illustrato il modo in cui le eccezioni vengono restituite dal server al client.</span><span class="sxs-lookup"><span data-stu-id="476b0-119">The following figure shows how exceptions are returned from the server to the client.</span></span>

![le eccezioni vengono restituite dal server al client tramite il rispettivo runtime RPC di ogni componente](images/prog-a20.png)

<span data-ttu-id="476b0-121">I gestori di eccezioni RPC differiscono leggermente dalle macro di gestione delle eccezioni Open Software Foundation-Distributed Computing Environment (OSF-DCE), che **tentano**, **infine**, e **intercettano**.</span><span class="sxs-lookup"><span data-stu-id="476b0-121">The RPC exception handlers differ slightly from the Open Software Foundation-Distributed Computing Environment (OSF-DCE) exception-handling macros **TRY**, **FINALLY**, and **CATCH**.</span></span> <span data-ttu-id="476b0-122">Diversi fornitori forniscono file di inclusione che mappano le funzioni RPC OSF-DCE alle funzioni RPC di Microsoft, tra cui **try**, **catch**, **catch** \_ **All** e **ENDTRY**.</span><span class="sxs-lookup"><span data-stu-id="476b0-122">Various vendors provide include files that map the OSF-DCE RPC functions to the Microsoft RPC functions, including **TRY**, **CATCH**, **CATCH**\_**ALL**, and **ENDTRY**.</span></span> <span data-ttu-id="476b0-123">Questi file di intestazione consentono inoltre di eseguire il mapping dei \_ \_ \* codici di errore RPC nelle controparti di eccezione OSF-DCE, \_ \_ \* in RPC e di mappare i \_ \_ \* codici di errore RPC x a RPC \_ x \_ \* .</span><span class="sxs-lookup"><span data-stu-id="476b0-123">These header files also map the RPC\_S\_\* error codes onto the OSF-DCE exception counterparts, rpc\_s\_\*, and map RPC\_X\_\* error codes to rpc\_x\_\*.</span></span> <span data-ttu-id="476b0-124">Per la portabilità OSF-DCE, usare i file di inclusione.</span><span class="sxs-lookup"><span data-stu-id="476b0-124">For OSF-DCE portability, use these include files.</span></span> <span data-ttu-id="476b0-125">Per ulteriori informazioni sui gestori di eccezioni RPC, vedere [**RpcExceptionFilter**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcexceptionfilter), [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept), [**RpcFinally**](/previous-versions/aa375699(v=vs.80)).</span><span class="sxs-lookup"><span data-stu-id="476b0-125">For more information about the RPC exception handlers, see [**RpcExceptionFilter**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcexceptionfilter), [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept), [**RpcFinally**](/previous-versions/aa375699(v=vs.80)).</span></span> <span data-ttu-id="476b0-126">Per altre informazioni sui gestori di eccezioni di Windows, vedere [gestione delle eccezioni strutturata](/windows/desktop/Debug/structured-exception-handling).</span><span class="sxs-lookup"><span data-stu-id="476b0-126">For more information about the Windows exception handlers, see [Structured Exception Handling](/windows/desktop/Debug/structured-exception-handling).</span></span>

 

 
