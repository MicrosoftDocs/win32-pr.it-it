---
title: Qualità del servizio (RPC)
description: I programmi client possono utilizzare la funzione RpcBindingSetAuthInfoEx anziché la funzione RpcBindingSetAuthInfo per creare un'associazione autenticata.
ms.assetid: bc3d47ba-3c1b-4aba-8fe3-b4501a621931
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ee93b1aa376c9d6f4e2b3eedab73c91471d42498
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/10/2020
ms.locfileid: "103873194"
---
# <a name="quality-of-service-rpc"></a><span data-ttu-id="ab86d-103">Qualità del servizio (RPC)</span><span class="sxs-lookup"><span data-stu-id="ab86d-103">Quality of Service (RPC)</span></span>

<span data-ttu-id="ab86d-104">I programmi client possono utilizzare la funzione [**RpcBindingSetAuthInfoEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfoexa) anziché la funzione [**RpcBindingSetAuthInfo**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfo) per creare un'associazione autenticata.</span><span class="sxs-lookup"><span data-stu-id="ab86d-104">Client programs can use the [**RpcBindingSetAuthInfoEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfoexa) function rather than the [**RpcBindingSetAuthInfo**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfo) function to create an authenticated binding.</span></span> <span data-ttu-id="ab86d-105">In caso affermativo, passano un puntatore a una [**struttura \_ \_ QoS di sicurezza RPC**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) come parametro finale di **RpcBindingSetAuthInfoEx**.</span><span class="sxs-lookup"><span data-stu-id="ab86d-105">If they do, they pass a pointer to an [**RPC\_SECURITY\_QOS**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) structure as the final parameter of **RpcBindingSetAuthInfoEx**.</span></span> <span data-ttu-id="ab86d-106">Questa struttura contiene informazioni sulla qualità del servizio.</span><span class="sxs-lookup"><span data-stu-id="ab86d-106">This structure contains information about the quality of service.</span></span> <span data-ttu-id="ab86d-107">I programmi client possono inoltre specificare il rilevamento delle identità e selezionare il tipo di rappresentazione.</span><span class="sxs-lookup"><span data-stu-id="ab86d-107">Client programs can also specify the identity tracking and select the impersonation type.</span></span>

<span data-ttu-id="ab86d-108">Utilizzare il membro **capabilities** della struttura [**\_ \_ QoS di sicurezza RPC**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) per impostare le parti dell'applicazione client/server autenticate.</span><span class="sxs-lookup"><span data-stu-id="ab86d-108">Use the **Capabilities** member of the [**RPC\_SECURITY\_QOS**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) structure to set which portions of the client/server application are authenticated.</span></span> <span data-ttu-id="ab86d-109">Se \_ \_ \_ \_ è selezionata l'impostazione predefinita funzionalità QoS C RPC, la libreria di runtime RPC autentica il client o il server in base all'impostazione predefinita per il provider di servizi condivisi.</span><span class="sxs-lookup"><span data-stu-id="ab86d-109">If RPC\_C\_QOS\_CAPABILITIES\_DEFAULT is selected, the RPC run-time library authenticates the client or server according to the default for the SSP.</span></span> <span data-ttu-id="ab86d-110">Per impostazione predefinita, il provider SSP del protocollo Kerberos autentica sia il client che il server.</span><span class="sxs-lookup"><span data-stu-id="ab86d-110">By default, the Kerberos protocol SSP authenticates both the client and the server.</span></span> <span data-ttu-id="ab86d-111">Il valore predefinito per tutti gli altri SSP forniti da Microsoft consiste nell'autenticare il client sul server, ma non nell'autenticare il server per il client.</span><span class="sxs-lookup"><span data-stu-id="ab86d-111">The default for all other SSPs that Microsoft provides is to authenticate the client to the server, but not to authenticate the server to the client.</span></span>

<span data-ttu-id="ab86d-112">Se il client e il server devono sempre eseguire l'autenticazione reciproca, impostare il membro delle **funzionalità** della struttura [**\_ \_ QoS di sicurezza RPC**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) sulle \_ funzionalità di \_ \_ \_ autenticazione reciproca di QoS C \_ .</span><span class="sxs-lookup"><span data-stu-id="ab86d-112">If the client and the server should always authenticate to each other, set the **Capabilities** member of the [**RPC\_SECURITY\_QOS**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) structure to RPC\_C\_QOS\_CAPABILITIES\_MUTUAL\_AUTH.</span></span> <span data-ttu-id="ab86d-113">Alcuni provider di sicurezza potrebbero non supportare l'autenticazione reciproca.</span><span class="sxs-lookup"><span data-stu-id="ab86d-113">Some security providers may not support mutual authentication.</span></span> <span data-ttu-id="ab86d-114">Se \_ \_ \_ \_ \_ per tali provider di sicurezza viene specificata l'autenticazione reciproca delle funzionalità QoS C, viene restituito un errore quando viene effettuata una chiamata a una procedura remota.</span><span class="sxs-lookup"><span data-stu-id="ab86d-114">If RPC\_C\_QOS\_CAPABILITIES\_MUTUAL\_AUTH is specified for such security providers, an error is returned when a remote procedure call is made.</span></span> <span data-ttu-id="ab86d-115">Quando si utilizza SSP SCHANNEL, è possibile impostare anche il membro delle **funzionalità** sulle \_ funzionalità QoS C di RPC \_ \_ \_ qualsiasi \_ autorità.</span><span class="sxs-lookup"><span data-stu-id="ab86d-115">When using the SCHANNEL SSP, it is possible to also set the **Capabilities** member to RPC\_C\_QOS\_CAPABILITIES\_ANY\_AUTHORITY.</span></span> <span data-ttu-id="ab86d-116">Questa costante specifica che il provider di servizi condivisi deve convalidare la chiamata di procedura remota anche se l'autorità di certificazione che ha emesso il certificato di autenticazione del client non si trova nell'archivio certificati radice del provider di servizi condivisi.</span><span class="sxs-lookup"><span data-stu-id="ab86d-116">This constant specifies that the SSP shall validate the remote procedure call even if the certificate authority that issued the client's authentication certificate is not in the SSP's root certificate store.</span></span> <span data-ttu-id="ab86d-117">Per impostazione predefinita, il certificato viene rifiutato se il provider di servizi condivisi non riconosce l'autorità di certificazione.</span><span class="sxs-lookup"><span data-stu-id="ab86d-117">The default is to reject the certificate if the SSP does not recognize the certificate authority.</span></span> <span data-ttu-id="ab86d-118">L'autorità di certificazione è una società o un'organizzazione indipendente, ad esempio VeriSign, che rilascia i certificati di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="ab86d-118">The certificate authority is an independent company or organization, such as VeriSign, that issues authentication certificates.</span></span>

<span data-ttu-id="ab86d-119">Le applicazioni possono inoltre impostare il rilevamento delle identità utilizzato dalla libreria di runtime RPC.</span><span class="sxs-lookup"><span data-stu-id="ab86d-119">Applications can also set the identity tracking that the RPC run-time library uses.</span></span> <span data-ttu-id="ab86d-120">I programmi usano in genere il [*Rilevamento statico delle identità*](s-glos.md).</span><span class="sxs-lookup"><span data-stu-id="ab86d-120">Programs generally use [*static identity tracking*](s-glos.md).</span></span> <span data-ttu-id="ab86d-121">Con il rilevamento statico, le credenziali del client vengono impostate quando viene chiamata la funzione [**RpcBindingSetAuthInfo**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfo) .</span><span class="sxs-lookup"><span data-stu-id="ab86d-121">With static tracking, the client's credentials are set when it calls the [**RpcBindingSetAuthInfo**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfo) function.</span></span> <span data-ttu-id="ab86d-122">La libreria di runtime RPC usa quindi tali credenziali per tutte le chiamate RPC sull'associazione, indipendentemente dalle modifiche apportate all'identità del thread chiamante o del processo chiamante.</span><span class="sxs-lookup"><span data-stu-id="ab86d-122">The RPC run-time library then uses those credentials for all RPC calls on the binding, regardless of changes in the identity of the calling thread or the calling process.</span></span> <span data-ttu-id="ab86d-123">Le applicazioni possono anche selezionare [*rilevamento identità dinamica*](d-glos.md).</span><span class="sxs-lookup"><span data-stu-id="ab86d-123">Applications can also select [*dynamic identity tracking*](d-glos.md).</span></span> <span data-ttu-id="ab86d-124">Il rilevamento dinamico delle identità indica alla libreria di runtime RPC di usare le credenziali del thread chiamante al momento di ogni chiamata, anziché l'handle di associazione.</span><span class="sxs-lookup"><span data-stu-id="ab86d-124">Dynamic identity tracking instructs the RPC run-time library to use the credentials of the calling thread at the time of each call, rather than the binding handle.</span></span> <span data-ttu-id="ab86d-125">Il rilevamento delle identità predefinito è statico.</span><span class="sxs-lookup"><span data-stu-id="ab86d-125">The default identity tracking is static.</span></span>

<span data-ttu-id="ab86d-126">Se l'identità del client non verrà modificata, il rilevamento delle identità statiche può avere caratteristiche di prestazioni migliori e può salvare il tempo di esecuzione RPC dal controllo ogni volta che l'identità nel thread chiamante è uguale all'identità assegnata al sistema di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ab86d-126">If the identity of the client is not going to change, static identity tracking can have better performance characteristics, and can save the RPC run time from checking each time whether the identity on the calling thread is the same as the identity given to the security system.</span></span> <span data-ttu-id="ab86d-127">Se l'identità del thread chiamante può variare tra le chiamate e il server deve riconoscere tali modifiche, è preferibile specificare il rilevamento dinamico delle identità, ovvero il tempo di esecuzione RPC in modo silenzioso ed efficiente, che tiene traccia dell'identità e, in caso di modifica dell'identità, gestisce la modifica per conto dell'utente.</span><span class="sxs-lookup"><span data-stu-id="ab86d-127">If the identity of the calling thread may change between calls, and the server needs to recognize those changes, it is best to specify dynamic identity tracking—the RPC run time quietly and efficiently tracks the identity for you, and if the identity changes, manages that change on your behalf.</span></span>

> [!Note]  
> <span data-ttu-id="ab86d-128">Per le chiamate **ncalrpc** , il rilevamento delle identità statica e dinamica hanno caratteristiche di prestazioni diverse e, a seconda delle circostanze, può essere più veloce.</span><span class="sxs-lookup"><span data-stu-id="ab86d-128">For **ncalrpc** calls, static and dynamic identity tracking have different performance characteristics, and depending on the circumstances, either may be faster.</span></span>

 

<span data-ttu-id="ab86d-129">Come parte della specifica QOS, il programma client può anche impostare il tipo di rappresentazione che un programma server può eseguire per suo conto.</span><span class="sxs-lookup"><span data-stu-id="ab86d-129">As part of the QOS specification, the client program can also set the type of impersonation that a server program can perform on its behalf.</span></span> <span data-ttu-id="ab86d-130">Per ulteriori informazioni, vedere [rappresentazione client](client-impersonation.md).</span><span class="sxs-lookup"><span data-stu-id="ab86d-130">For more information, see [Client Impersonation](client-impersonation.md).</span></span>

<span data-ttu-id="ab86d-131">Il campo relativo al numero di versione della struttura [**\_ \_ QoS di sicurezza RPC**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) deve essere sempre impostato sulla \_ \_ versione QoS di sicurezza C \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="ab86d-131">The version number field of the [**RPC\_SECURITY\_QOS**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) structure should always be set to RPC\_C\_SECURITY\_QOS\_VERSION.</span></span>

 

 




