---
title: Usa rete ospitata senza fili, condivisione connessione Internet
description: Uso della rete ospitata wireless e della condivisione della connessione Internet
ms.assetid: 56e86ef8-f759-4e56-a591-74e03430125a
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 972774e921199e32eb70841c74c7478e2178cda9
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103967402"
---
# <a name="use-wireless-hosted-network-internet-connection-sharing"></a><span data-ttu-id="d03f8-103">Usa rete ospitata senza fili, condivisione connessione Internet</span><span class="sxs-lookup"><span data-stu-id="d03f8-103">Use Wireless Hosted Network, Internet Connection Sharing</span></span>

<span data-ttu-id="d03f8-104">La rete wireless ospitata è una nuova funzionalità di WLAN supportata in Windows 7 e Windows 8.</span><span class="sxs-lookup"><span data-stu-id="d03f8-104">The Wireless Hosted Network is a new WLAN feature supported on Windows 7 and Windows 8.</span></span> <span data-ttu-id="d03f8-105">È supportato anche in Windows Server 2012 e Windows Server 2008 R2 con il servizio LAN wireless installato.</span><span class="sxs-lookup"><span data-stu-id="d03f8-105">It is also supported on Windows Server 2012 and Windows Server 2008 R2 with the Wireless LAN Service installed.</span></span> <span data-ttu-id="d03f8-106">Questa funzionalità implementa due funzioni principali:</span><span class="sxs-lookup"><span data-stu-id="d03f8-106">This feature implements two major functions:</span></span>

-   <span data-ttu-id="d03f8-107">La virtualizzazione di una scheda wireless fisica in più schede wireless virtuali a volte definita Wi-Fi virtuale.</span><span class="sxs-lookup"><span data-stu-id="d03f8-107">The virtualization of a physical wireless adapter into more than one virtual wireless adapter sometimes referred to as Virtual Wi-Fi.</span></span>
-   <span data-ttu-id="d03f8-108">Un punto di accesso wireless (AP) basato su software talvolta denominato SoftAP che usa una scheda wireless virtuale designata.</span><span class="sxs-lookup"><span data-stu-id="d03f8-108">A software-based wireless access point (AP) sometimes referred to as a SoftAP that uses a designated virtual wireless adapter.</span></span>

<span data-ttu-id="d03f8-109">Condivisione connessione Internet (ICS) è una funzionalità di Windows fornita tramite il servizio SharedAccess.</span><span class="sxs-lookup"><span data-stu-id="d03f8-109">Internet Connection Sharing (ICS) is a feature in Windows provided through the SharedAccess Service.</span></span> <span data-ttu-id="d03f8-110">In modo esplicito, SharedAccess consente la condivisione di rete tramite un computer in cui l'accesso alla rete condivisa non fornisce necessariamente l'accesso a Internet.</span><span class="sxs-lookup"><span data-stu-id="d03f8-110">Strictly speaking, SharedAccess enables network sharing through a computer where the shared network access does not necessarily provide access to the Internet.</span></span> <span data-ttu-id="d03f8-111">I termini ICS e SharedAccess vengono usati in modo intercambiabile in questa sezione, perché la condivisione della connessione Internet è uno scenario principale per la rete wireless ospitata e il termine ICS è più noto alla community degli utenti.</span><span class="sxs-lookup"><span data-stu-id="d03f8-111">We use the term ICS and SharedAccess interchangeably in this section, since Internet Connection Sharing is a major scenario for the wireless Hosted Network and the ICS term is better known to the user community.</span></span>

<span data-ttu-id="d03f8-112">Rete ospitata senza fili è strettamente legata a ICS per abilitare sia la rete privata wireless (PAN) sia gli scenari di condivisione Internet.</span><span class="sxs-lookup"><span data-stu-id="d03f8-112">Wireless Hosted Network is closely tied to ICS to enable both the wireless personal area network (PAN) and the Internet sharing scenarios.</span></span> <span data-ttu-id="d03f8-113">In questa sezione vengono forniti suggerimenti generali per gli sviluppatori di applicazioni su come integrare reti e ICS ospitate senza fili usando le API di rete e ICS pubbliche.</span><span class="sxs-lookup"><span data-stu-id="d03f8-113">This section provides general recommendations to application developers on how to integrate wireless Hosted Network and ICS using the public wireless Hosted Network and ICS APIs.</span></span>

## <a name="internet-connection-sharing"></a><span data-ttu-id="d03f8-114">Condivisione connessione Internet</span><span class="sxs-lookup"><span data-stu-id="d03f8-114">Internet Connection Sharing</span></span>

<span data-ttu-id="d03f8-115">Il servizio ICS funziona in una delle due modalità possibili:</span><span class="sxs-lookup"><span data-stu-id="d03f8-115">The ICS Service operates in one of the two possible modes:</span></span>

-   <span data-ttu-id="d03f8-116">Modalità autonoma</span><span class="sxs-lookup"><span data-stu-id="d03f8-116">Standalone mode</span></span>

    <span data-ttu-id="d03f8-117">Quando il servizio ICS viene richiamato, solo la funzione del server estensione DHCPv4 funziona.</span><span class="sxs-lookup"><span data-stu-id="d03f8-117">Only the DHCPv4 server function is operating when the ICS service is invoked.</span></span> <span data-ttu-id="d03f8-118">Si tratta di una modalità operativa speciale per ICS e viene resa disponibile solo tramite la rete wireless ospitata.</span><span class="sxs-lookup"><span data-stu-id="d03f8-118">This is a special operation mode for ICS and is only made available through the wireless Hosted Network.</span></span> <span data-ttu-id="d03f8-119">Un utente o un'applicazione non è in grado di avviare e arrestare direttamente ICS autonomo tramite le API di ICS pubblico o i comandi **netsh** .</span><span class="sxs-lookup"><span data-stu-id="d03f8-119">A user or application is not able to directly start and stop standalone ICS through public ICS APIs or **netsh** commands.</span></span> <span data-ttu-id="d03f8-120">L'avvio della rete ospitata senza fili in genere comporta l'avvio di ICS in modalità autonoma per usare la funzione server estensione DHCPv4 per fornire indirizzi IPv4 privati per i dispositivi connessi.</span><span class="sxs-lookup"><span data-stu-id="d03f8-120">Starting the wireless Hosted Network typically involves starting ICS in standalone mode to use the DHCPv4 server function to provide private IPv4 addresses for connected devices.</span></span> <span data-ttu-id="d03f8-121">La comunicazione di rete per i dispositivi connessi è limitata all'invio e alla ricezione di pacchetti di rete tra un dispositivo connesso e il computer locale che ospita la rete wireless ospitata e tra i dispositivi connessi.</span><span class="sxs-lookup"><span data-stu-id="d03f8-121">Network communication for the connected devices is limited to sending and receiving network packets between a connected device and the local computer hosting the wireless Hosted Network and among the connected devices themselves.</span></span> <span data-ttu-id="d03f8-122">In questo modo viene abilitato lo scenario rete personale wireless per la rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-122">This effectively enables the wireless personal area network scenario for the wireless Hosted Network.</span></span>

-   <span data-ttu-id="d03f8-123">Modalità completa</span><span class="sxs-lookup"><span data-stu-id="d03f8-123">Full mode</span></span>

    <span data-ttu-id="d03f8-124">Tutte le funzionalità di ICS funzionano quando viene richiamato il servizio, ad esempio Network Address Translation e le funzioni server DHCP per IPv4 e IPv6.</span><span class="sxs-lookup"><span data-stu-id="d03f8-124">All the features of ICS are operating when the service is invoked, such as network address translation and DHCP server functions for both IPv4 and IPv6.</span></span> <span data-ttu-id="d03f8-125">Si tratta della modalità di funzionamento normale per ICS.</span><span class="sxs-lookup"><span data-stu-id="d03f8-125">This is the normal mode of operation for ICS.</span></span> <span data-ttu-id="d03f8-126">Un utente o un'applicazione può avviare e arrestare la modalità ICS completa attraverso le API pubbliche o i comandi NetShell.</span><span class="sxs-lookup"><span data-stu-id="d03f8-126">A user or application may start and stop full ICS mode through public APIs or netshell commands.</span></span> <span data-ttu-id="d03f8-127">Ad esempio, è possibile arrestare questo servizio usando net stop SharedAccess da un prompt dei comandi con privilegi elevati.</span><span class="sxs-lookup"><span data-stu-id="d03f8-127">For example, this service can be stopped using net stop sharedaccess from an elevated command prompt.</span></span> <span data-ttu-id="d03f8-128">Combinando la rete wireless ospitata con ICS completo, la comunicazione di rete per i dispositivi connessi non è limitata al PAN wireless.</span><span class="sxs-lookup"><span data-stu-id="d03f8-128">Combining wireless Hosted Network with full ICS, Network communication for the connected devices is not limited to the wireless PAN.</span></span> <span data-ttu-id="d03f8-129">Qualsiasi dispositivo connesso può accedere alla rete, ad esempio Internet, tramite la connessione di rete condivisa dal computer in cui è in esecuzione la rete wireless ospitata.</span><span class="sxs-lookup"><span data-stu-id="d03f8-129">Any connected device has access to network (such as the Internet) through the shared network connection from the computer running the wireless Hosted Network.</span></span> <span data-ttu-id="d03f8-130">Questo consente di abilitare lo scenario di condivisione di rete per la rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-130">This effectively enables the Network sharing scenario for the wireless Hosted Network.</span></span>

<span data-ttu-id="d03f8-131">In questa sezione viene usato il termine ICS completo per indicare il caso in cui tutte le funzioni ICS vengono richiamate nel servizio ICS per consentire l'accesso a tutte le funzionalità ICS complete con la rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-131">In this section, we use the term full ICS to mean the case where all the ICS functions are invoked in ICS Service to provide access to all the full ICS features with the wireless Hosted Network.</span></span>

<span data-ttu-id="d03f8-132">Le due modalità operative di ICS si escludono a vicenda con i circuiti integrati completi che assumono precedenza maggiore.</span><span class="sxs-lookup"><span data-stu-id="d03f8-132">The two ICS operation modes are mutually exclusive with full ICS taking higher precedence.</span></span> <span data-ttu-id="d03f8-133">Il servizio ICS può passare dalla modalità autonoma alla modalità completa, ma non dalla modalità completa alla modalità autonoma.</span><span class="sxs-lookup"><span data-stu-id="d03f8-133">The ICS Service may transition from standalone mode to full mode, but not from full mode to standalone mode.</span></span> <span data-ttu-id="d03f8-134">La modalità autonoma ICS è stata introdotta in Windows 7 e in Windows Server 2008 R2 con il servizio LAN wireless installato insieme alla funzionalità rete ospitata wireless.</span><span class="sxs-lookup"><span data-stu-id="d03f8-134">The ICS standalone mode was introduced in Windows 7 and on Windows Server 2008 R2 with the Wireless LAN Service installed in conjunction with the wireless Hosted Network feature.</span></span> <span data-ttu-id="d03f8-135">Non è disponibile nelle versioni precedenti di Windows.</span><span class="sxs-lookup"><span data-stu-id="d03f8-135">It is not available in previous versions of Windows.</span></span>

<span data-ttu-id="d03f8-136">Qualsiasi operazione di ICS completa implica due schede di rete diverse nel sistema:</span><span class="sxs-lookup"><span data-stu-id="d03f8-136">Any full ICS operation involves two different network adapters in the system:</span></span>

-   <span data-ttu-id="d03f8-137">Interfaccia pubblica.</span><span class="sxs-lookup"><span data-stu-id="d03f8-137">The public interface.</span></span> <span data-ttu-id="d03f8-138">Si tratta dell'interfaccia di rete con accesso a Internet.</span><span class="sxs-lookup"><span data-stu-id="d03f8-138">This is the network interface with access to the Internet.</span></span> <span data-ttu-id="d03f8-139">Si tratta di un'interfaccia che il computer locale che esegue ICS USA per condividere Internet con client e dispositivi che si connettono tramite SoftAP.</span><span class="sxs-lookup"><span data-stu-id="d03f8-139">It is this interface that the local computer running ICS uses to share the Internet with clients and devices connecting to it via SoftAP.</span></span>
-   <span data-ttu-id="d03f8-140">Interfaccia privata.</span><span class="sxs-lookup"><span data-stu-id="d03f8-140">The private interface.</span></span> <span data-ttu-id="d03f8-141">Si tratta dell'interfaccia di rete usata da altri dispositivi per connettersi al computer locale che esegue ICS.</span><span class="sxs-lookup"><span data-stu-id="d03f8-141">This is the network interface that other devices use to connect to the local computer that is running ICS.</span></span> <span data-ttu-id="d03f8-142">Un server estensione DHCPv4 è in esecuzione su questa interfaccia privata per fornire indirizzi IP locali privati agli altri computer remoti.</span><span class="sxs-lookup"><span data-stu-id="d03f8-142">A DHCPv4 server is running on this private interface to provide private local IP addresses to the other remote computers.</span></span>

<span data-ttu-id="d03f8-143">Quando l'interfaccia pubblica non ha accesso a Internet, il server DHCP sull'interfaccia privata continua a fornire gli indirizzi IP locali ai dispositivi connessi.</span><span class="sxs-lookup"><span data-stu-id="d03f8-143">When the public interface does not have Internet access, the DHCP server on the private interface continues to provide local IP addresses to the connected devices.</span></span> <span data-ttu-id="d03f8-144">L'ICS autonomo riguarda solo l'interfaccia privata su cui è in esecuzione SoftAP. non implica alcuna interfaccia pubblica.</span><span class="sxs-lookup"><span data-stu-id="d03f8-144">Standalone ICS only involves the private interface on which SoftAP is running; it does not involve any public interface.</span></span>

<span data-ttu-id="d03f8-145">In qualsiasi momento è presente al massimo un'istanza di ICS completo in esecuzione nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="d03f8-145">At any time, there is at most one instance of full ICS running on the local computer.</span></span> <span data-ttu-id="d03f8-146">Se l'ICS completo è già in esecuzione nel computer locale, l'avvio di un'altra ICS completa presenta i comportamenti funzionali seguenti:</span><span class="sxs-lookup"><span data-stu-id="d03f8-146">If full ICS is already running on the local computer, starting another full ICS exhibits the following functional behaviors:</span></span>

-   <span data-ttu-id="d03f8-147">Se le interfacce pubbliche e private del nuovo ICS completo sono identiche a quelle del ICS completo esistente, l'avvio della seconda ICS completa equivale a un no-op.</span><span class="sxs-lookup"><span data-stu-id="d03f8-147">If the public and private interfaces of the new full ICS are the same as the existing full ICS, starting the second full ICS is equivalent to a no-op.</span></span>
-   <span data-ttu-id="d03f8-148">Se la nuova interfaccia pubblica è diversa dall'interfaccia pubblica precedente, ma la nuova interfaccia privata è la stessa dell'interfaccia privata precedente, l'avvio di un secondo ICS completo ha un piccolo effetto sui dispositivi connessi sulla stessa interfaccia privata.</span><span class="sxs-lookup"><span data-stu-id="d03f8-148">If the new public interface is different from the old public interface, but the new private interface is the same as the old private interface, starting a second full ICS has little impact on the connected devices on the same private interface.</span></span> <span data-ttu-id="d03f8-149">La possibilità di accedere a Internet può cambiare con la nuova interfaccia pubblica.</span><span class="sxs-lookup"><span data-stu-id="d03f8-149">The ability to access the Internet may change with the new public interface.</span></span>
-   <span data-ttu-id="d03f8-150">Se la nuova interfaccia privata è diversa dalla vecchia interfaccia privata, le funzioni ICS smetteranno di funzionare sull'interfaccia privata precedente e inizieranno a essere applicate alla nuova interfaccia privata.</span><span class="sxs-lookup"><span data-stu-id="d03f8-150">If the new private interface is different than the old private interface, ICS functions will stop working on the old private interface and start applying to the new private interface.</span></span> <span data-ttu-id="d03f8-151">Tutti i dispositivi remoti che si connettono al computer locale utilizzando l'interfaccia privata precedente perderanno la connettività IP al computer locale.</span><span class="sxs-lookup"><span data-stu-id="d03f8-151">Any remote device connecting to the local computer using the old private interface will lose IP connectivity to the local computer.</span></span>

<span data-ttu-id="d03f8-152">Quando l'ICS completo è già in esecuzione, la chiamata di un secondo ICS completo è un'operazione distruttiva per i dispositivi connessi in modalità remota tramite l'interfaccia privata precedente, purché la seconda integrazione di ICS usi una nuova interfaccia privata diversa.</span><span class="sxs-lookup"><span data-stu-id="d03f8-152">When full ICS is already running, invoking a second full ICS is disruptive to remotely connected devices using the old private interface as long as the second ICS integration uses a different new private interface.</span></span>

<span data-ttu-id="d03f8-153">Per gestire e usare il servizio ICS per supportare l'integrazione di ICS con la rete wireless ospitata, un'applicazione software deve prima ottenere un'interfaccia [**INetSharingManager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) .</span><span class="sxs-lookup"><span data-stu-id="d03f8-153">To manage and use the ICS service to support ICS integration with wireless Hosted Network, a software application must first obtain an [**INetSharingManager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) interface.</span></span> <span data-ttu-id="d03f8-154">L'interfaccia **INetSharingManager** fornisce l'accesso diretto o indiretto a tutte le altre interfacce com nell'API ICS.</span><span class="sxs-lookup"><span data-stu-id="d03f8-154">The **INetSharingManager** interface provides access directly or indirectly to all the other COM interfaces in the ICS API.</span></span> <span data-ttu-id="d03f8-155">Il metodo [**get \_ SharingInstalled**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_sharinginstalled) sull'interfaccia **INetSharingManager** segnala se il computer locale supporta la condivisione della connessione.</span><span class="sxs-lookup"><span data-stu-id="d03f8-155">The [**get\_SharingInstalled**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_sharinginstalled) method on the **INetSharingManager** interface reports whether the local computer supports connection sharing.</span></span> <span data-ttu-id="d03f8-156">Il metodo [**get \_ EnumEveryConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) sull'interfaccia **INetSharingManager** recupera un'interfaccia di enumerazione per tutte le connessioni nella cartella Connections.</span><span class="sxs-lookup"><span data-stu-id="d03f8-156">The [**get\_EnumEveryConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) method on the **INetSharingManager** interface retrieves an enumeration interface for all connections in the connections folder.</span></span> <span data-ttu-id="d03f8-157">Il metodo [**get \_ INetSharingConfigurationForINetConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_inetsharingconfigurationforinetconnection) recupera un'interfaccia [**INetSharingConfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) per la connessione specificata.</span><span class="sxs-lookup"><span data-stu-id="d03f8-157">The [**get\_INetSharingConfigurationForINetConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_inetsharingconfigurationforinetconnection) method retrieves an [**INetSharingConfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) interface for the specified connection.</span></span> <span data-ttu-id="d03f8-158">I metodi dell'interfaccia **INetSharingConfiguration** possono essere usati per eseguire query e modificare le impostazioni di ICS.</span><span class="sxs-lookup"><span data-stu-id="d03f8-158">Methods on the **INetSharingConfiguration** interface can be used to query and change ICS settings.</span></span>

<span data-ttu-id="d03f8-159">È necessario avviare la rete ospitata senza fili prima di chiamare il metodo [**get \_ EnumEveryConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) sull'interfaccia [**INetSharingManager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) per enumerare tutte le connessioni nella cartella Connections.</span><span class="sxs-lookup"><span data-stu-id="d03f8-159">The wireless Hosted Network must be started before calling the [**get\_EnumEveryConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) method on the [**INetSharingManager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) interface to enumerate all connections in the connections folder.</span></span>

<span data-ttu-id="d03f8-160">Per informazioni su ICS e sulle interfacce pubbliche e sui metodi che possono essere usati per eseguire query e modificare le impostazioni di ICS, vedere la documentazione relativa a [informazioni su Condivisione connessione Internet e firewall connessione Internet](/previous-versions/windows/desktop/ics/about-internet-connection-sharing-and-internet-connection-firewall).</span><span class="sxs-lookup"><span data-stu-id="d03f8-160">For information on ICS and the public interfaces and methods that can be used to query and change ICS settings, please see the documentation on [About Internet Connection Sharing and Internet Connection Firewall](/previous-versions/windows/desktop/ics/about-internet-connection-sharing-and-internet-connection-firewall).</span></span>

## <a name="hosted-network-and-ics-integration"></a><span data-ttu-id="d03f8-161">Integrazione di rete e ICS ospitata</span><span class="sxs-lookup"><span data-stu-id="d03f8-161">Hosted Network and ICS Integration</span></span>

<span data-ttu-id="d03f8-162">Quando l'ICS completo non è in esecuzione, l'avvio di una rete wireless ospitata avvia anche internamente il servizio ICS in modalità autonoma con solo la funzione server estensione DHCPv4 per allocare gli indirizzi IP per i dispositivi connessi nell'interfaccia di rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-162">When full ICS is not running, starting a wireless Hosted Network also internally starts the ICS Service in standalone mode with only the DHCPv4 server function to allocate IP addresses for the connected devices on the wireless Hosted Network interface.</span></span> <span data-ttu-id="d03f8-163">L'intervallo di indirizzi della subnet per il server estensione DHCPv4 autonomo è 192.168.173.0/24.</span><span class="sxs-lookup"><span data-stu-id="d03f8-163">The subnet address range for the standalone DHCPv4 server is 192.168.173.0/24.</span></span> <span data-ttu-id="d03f8-164">Questa operazione è diversa dall'intervallo di subnet di 192.168.137.0/24 usato con l'ICS completo.</span><span class="sxs-lookup"><span data-stu-id="d03f8-164">This is different from the subnet range of 192.168.137.0/24 that is used with full ICS.</span></span>

<span data-ttu-id="d03f8-165">L'avvio di una rete ospitata senza fili con ICS completo usa la logica seguente:</span><span class="sxs-lookup"><span data-stu-id="d03f8-165">Starting a wireless Hosted Network with full ICS employs the following logic:</span></span>

-   <span data-ttu-id="d03f8-166">Se il servizio ICS completo non è già in esecuzione, l'avvio di una rete wireless ospitata avvia anche il servizio ICS con il server estensione DHCPv4 autonomo.</span><span class="sxs-lookup"><span data-stu-id="d03f8-166">If full ICS is not already running, starting a wireless Hosted Network also starts the ICS Service with standalone DHCPv4 server.</span></span>
-   <span data-ttu-id="d03f8-167">Se l'ICS completo è già in esecuzione e l'interfaccia privata è l'interfaccia di rete ospitata senza fili, è sufficiente avviare la rete wireless ospitata.</span><span class="sxs-lookup"><span data-stu-id="d03f8-167">If full ICS is already running and the private interface is the wireless Hosted Network interface, just start the wireless Hosted Network.</span></span>
-   <span data-ttu-id="d03f8-168">Se l'ICS completo è già in esecuzione, ma l'interfaccia privata non è l'interfaccia di rete wireless ospitata, la rete wireless ospitata verrà avviata senza la funzione del server estensione DHCPv4 sull'interfaccia di rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-168">If full ICS is already running but the private interface is not the wireless Hosted Network interface, the wireless Hosted Network will be started without the DHCPv4 server function on the wireless Hosted Network interface.</span></span>

<span data-ttu-id="d03f8-169">L'effetto della logica precedente evidenzia i fatti seguenti:</span><span class="sxs-lookup"><span data-stu-id="d03f8-169">The impact of the logic above highlights the following facts:</span></span>

-   <span data-ttu-id="d03f8-170">ICS non esegue la transizione dalla modalità completa alla modalità autonoma.</span><span class="sxs-lookup"><span data-stu-id="d03f8-170">ICS does not transition from full mode to standalone mode.</span></span>
-   <span data-ttu-id="d03f8-171">La modalità autonoma può essere richiamata solo dalla rete ospitata senza fili quando ICS non è in esecuzione in modalità completa.</span><span class="sxs-lookup"><span data-stu-id="d03f8-171">Standalone mode can only be invoked by the wireless Hosted Network when ICS is not running in full mode.</span></span>
-   <span data-ttu-id="d03f8-172">Se ICS viene eseguito in modalità autonoma, verrà interrotto in modalità completa se un utente o un'applicazione avvia ICS in modalità completa.</span><span class="sxs-lookup"><span data-stu-id="d03f8-172">If ICS is running in standalone mode, it will be preempted into full mode if a user or application starts ICS in full mode.</span></span>
-   <span data-ttu-id="d03f8-173">La transizione dalla modalità autonoma alla modalità completa in ICS sarà problematica per i dispositivi connessi nel PAN wireless se l'interfaccia privata di ICS completo non corrisponde a quella di SoftAP.</span><span class="sxs-lookup"><span data-stu-id="d03f8-173">Transitioning from standalone mode to full mode in ICS will be disruptive to connected devices in the wireless PAN if the private interface of full ICS is not the same as the one for SoftAP.</span></span>

<span data-ttu-id="d03f8-174">È necessario tempo per avviare o arrestare il servizio ICS nel computer locale in modalità completa o autonoma.</span><span class="sxs-lookup"><span data-stu-id="d03f8-174">It takes time to start or stop the ICS Service on the local computer in either full or standalone mode.</span></span> <span data-ttu-id="d03f8-175">Un'applicazione deve controllare lo stato del servizio ICS usando la funzione **NotifyServiceStatusChange** per verificare che il servizio ICS non si trovi nello stato di avvio/arresto in sospeso prima di avviare o arrestare la rete ospitata senza fili da usare con l'integrazione con ICS.</span><span class="sxs-lookup"><span data-stu-id="d03f8-175">An application should check the state of ICS Service using the **NotifyServiceStatusChange** function to make sure that the ICS Service is not in the start/stop pending state before starting or stopping the wireless Hosted Network for use with ICS integration.</span></span>

## <a name="starting-and-stopping-the-wireless-hosted-network"></a><span data-ttu-id="d03f8-176">Avvio e arresto della rete ospitata senza fili</span><span class="sxs-lookup"><span data-stu-id="d03f8-176">Starting and Stopping the Wireless Hosted Network</span></span>

<span data-ttu-id="d03f8-177">Windows offre una piattaforma in cui più applicazioni simultanee possono gestire una rete ospitata senza fili nello stesso momento.</span><span class="sxs-lookup"><span data-stu-id="d03f8-177">Windows provides a platform where more than one concurrent application is allowed to manage a wireless Hosted Network at the same time.</span></span> <span data-ttu-id="d03f8-178">In particolare, ogni applicazione può avviare e arrestare la rete wireless ospitata autonomamente, senza conoscere prima le altre applicazioni.</span><span class="sxs-lookup"><span data-stu-id="d03f8-178">Specifically each application can start and stop the wireless Hosted Network on its own, without prior knowledge about other applications.</span></span>

<span data-ttu-id="d03f8-179">Sono disponibili due set di funzioni per avviare e arrestare una rete ospitata.</span><span class="sxs-lookup"><span data-stu-id="d03f8-179">There are two sets of functions to start and stop a Hosted Network.</span></span>

<span data-ttu-id="d03f8-180">Più applicazioni possono richiedere l'uso della rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-180">Multiple applications may require the use of the wireless Hosted Network.</span></span> <span data-ttu-id="d03f8-181">Le funzioni [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) e [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) avviano e arrestano un host wireless rete in ingresso un modo compatibile con altre applicazioni simultanee.</span><span class="sxs-lookup"><span data-stu-id="d03f8-181">The [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) and [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) functions start and stop a wireless Hosted Network in a way that is compatible with other concurrent applications.</span></span> <span data-ttu-id="d03f8-182">Le funzioni **WlanHostedNetworkStartUsing** e **WlanHostedNetworkStopUsing** consentono a un'applicazione di avere un riferimento alla rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-182">The **WlanHostedNetworkStartUsing** and **WlanHostedNetworkStopUsing** functions allow an application to have a reference to the wireless Hosted Network.</span></span> <span data-ttu-id="d03f8-183">Questo meccanismo consente di mantenere in esecuzione la rete wireless ospitata, purché almeno un'altra applicazione disponga di un riferimento corrente alla rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-183">This mechanism keeps the wireless Hosted Network running provided that at least one other application has a current reference to the wireless Hosted Network.</span></span> <span data-ttu-id="d03f8-184">Qualsiasi utente può chiamare queste funzioni.</span><span class="sxs-lookup"><span data-stu-id="d03f8-184">Any user can call these functions.</span></span> <span data-ttu-id="d03f8-185">Le chiamate a **WlanHostedNetworkStartUsing** con esito positivo devono corrispondere alle chiamate alla funzione **WlanHostedNetworkStopUsing** .</span><span class="sxs-lookup"><span data-stu-id="d03f8-185">Successful calls to **WlanHostedNetworkStartUsing** must be matched by calls to the **WlanHostedNetworkStopUsing** function.</span></span> <span data-ttu-id="d03f8-186">Qualsiasi modifica dello stato della rete ospitata causata dalla funzione **WlanHostedNetworkStartUsing** viene annullata automaticamente se l'applicazione chiamante chiude il relativo handle chiamante (chiamando [**WlanCloseHandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) con lo stesso parametro *hClientHandle* passato a **WlanHostedNetworkStartUsing**) o se il processo termina.</span><span class="sxs-lookup"><span data-stu-id="d03f8-186">Any Hosted Network state change caused by the **WlanHostedNetworkStartUsing** function would be automatically undone if the calling application closes its calling handle (by calling [**WlanCloseHandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) with the same *hClientHandle* parameter passed to **WlanHostedNetworkStartUsing**) or if the process ends.</span></span>

<span data-ttu-id="d03f8-187">Le funzioni [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) e [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) forzano l'avvio e l'arresto di una rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-187">The [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) and [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) functions force start and stop a wireless Hosted Network.</span></span> <span data-ttu-id="d03f8-188">Queste funzioni possono essere chiamate solo se l'utente dispone del privilegio con privilegi elevati appropriato.</span><span class="sxs-lookup"><span data-stu-id="d03f8-188">These functions can only be called if the user has the appropriate elevated privilege.</span></span> <span data-ttu-id="d03f8-189">Le chiamate a **WlanHostedNetworkForceStart** con esito positivo possono essere eventualmente corrispondenti a una chiamata alla funzione **WlanHostedNetworkForceStop** , a seconda della progettazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="d03f8-189">Successful calls to **WlanHostedNetworkForceStart** may eventually be matched by a call to the **WlanHostedNetworkForceStop** function, depending on the application design.</span></span> <span data-ttu-id="d03f8-190">Queste funzioni eseguono la transizione dello stato della rete wireless ospitata senza associare la richiesta all'handle chiamante dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="d03f8-190">These functions transition the wireless Hosted Network state without associating the request with the application's calling handle.</span></span> <span data-ttu-id="d03f8-191">Qualsiasi modifica dello stato della rete ospitata causata dalla funzione **WlanHostedNetworkForceStart** non viene annullata automaticamente se l'applicazione chiamante chiude il relativo handle chiamante (chiamando [**WlanCloseHandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) con lo stesso parametro *hClientHandle* passato a [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing)) o se il processo termina.</span><span class="sxs-lookup"><span data-stu-id="d03f8-191">Any Hosted Network state change caused by the **WlanHostedNetworkForceStart** function would not be automatically undone if the calling application closes its calling handle (by calling [**WlanCloseHandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) with the same *hClientHandle* parameter passed to [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing)) or if the process ends.</span></span> <span data-ttu-id="d03f8-192">Se l'applicazione che ha chiamato la funzione **WlanHostedNetworkForceStart** si chiude senza chiamare una delle funzioni per arrestare la rete ospitata senza fili, viene lasciata in esecuzione la rete ospitata.</span><span class="sxs-lookup"><span data-stu-id="d03f8-192">If the application that called the **WlanHostedNetworkForceStart** function closes without calling one of the functions to stop the wireless Hosted Network, then Hosted Network is left running.</span></span> <span data-ttu-id="d03f8-193">Un'applicazione può chiamare la funzione **WlanHostedNetworkForceStart** dopo avere verificato che un utente di sistema con privilegi elevati accetti i maggiori requisiti di alimentazione necessari per l'esecuzione della rete ospitata senza fili per periodi di tempo prolungati.</span><span class="sxs-lookup"><span data-stu-id="d03f8-193">An application might call the **WlanHostedNetworkForceStart** function after ensuring that an elevated system user accepts the increased power requirements involved in running the wireless Hosted Network for extended periods of time.</span></span>

<span data-ttu-id="d03f8-194">Di seguito sono riportate le indicazioni generali sulle funzioni da chiamare per avviare e arrestare una rete ospitata senza fili:</span><span class="sxs-lookup"><span data-stu-id="d03f8-194">The general recommendations on which functions to call to start and stop a wireless Hosted Network are as follows:</span></span>

-   <span data-ttu-id="d03f8-195">Usare le funzioni [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) e [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) all'interno di un'applicazione per avviare e arrestare una rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-195">Use the [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) and [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) functions within an application to start and stop a wireless Hosted Network.</span></span>
-   <span data-ttu-id="d03f8-196">Non usare la funzione [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) per avviare una rete wireless ospitata, a meno che non sia assolutamente richiesta dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="d03f8-196">Do not use the [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) function to start a wireless Hosted Network unless it is absolutely required by the application.</span></span> <span data-ttu-id="d03f8-197">Anche la funzione **WlanHostedNetworkForceStart** richiede privilegi elevati.</span><span class="sxs-lookup"><span data-stu-id="d03f8-197">The **WlanHostedNetworkForceStart** function also requires elevated privileges.</span></span>
-   <span data-ttu-id="d03f8-198">Utilizzare la funzione [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) solo come metodo di ripristino.</span><span class="sxs-lookup"><span data-stu-id="d03f8-198">Only use the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function as a recovery method.</span></span> <span data-ttu-id="d03f8-199">La funzione **WlanHostedNetworkForceStop** causa l'arresto immediato di una rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-199">The **WlanHostedNetworkForceStop** function causes a wireless Hosted Network to stop immediately.</span></span> <span data-ttu-id="d03f8-200">Potrebbe essere necessario eseguire azioni di ripristino per altre applicazioni in ascolto delle notifiche di rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-200">Other applications that listen for wireless Hosted Network notifications may need to take recovery actions.</span></span> <span data-ttu-id="d03f8-201">Per ulteriori informazioni, vedere la discussione seguente sulla sequenza di recupero per la rete wireless ospitata.</span><span class="sxs-lookup"><span data-stu-id="d03f8-201">For more information, see the discussion below on the recovery sequence for wireless Hosted Network.</span></span>

## <a name="start-sequence-for-wireless-hosted-network"></a><span data-ttu-id="d03f8-202">Sequenza di avvio per la rete wireless ospitata</span><span class="sxs-lookup"><span data-stu-id="d03f8-202">Start Sequence for Wireless Hosted Network</span></span>

<span data-ttu-id="d03f8-203">Per un'applicazione che avvia una rete ospitata senza fili con ICS completo, è consigliabile avviare la rete wireless ospitata, quindi avviare l'ICS completo.</span><span class="sxs-lookup"><span data-stu-id="d03f8-203">For an application that starts a wireless Hosted Network with full ICS, the recommendation is to start the wireless Hosted Network, then start full ICS.</span></span> <span data-ttu-id="d03f8-204">Se una rete ospitata senza fili è già in esecuzione, è necessario che un'applicazione usi la funzione [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) per arrestare la rete ospitata senza fili solo se è necessario un ICS completo, ma non è stata abilitata prima dell'avvio della rete ospitata.</span><span class="sxs-lookup"><span data-stu-id="d03f8-204">If a wireless Hosted Network is already running, an application should use the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network only if full ICS is required but has not been enabled before the Hosted Network was started.</span></span> <span data-ttu-id="d03f8-205">Ciò consente ad altre applicazioni di eseguire il ripristino da potenziali rotture causate dall'avvio di un ICS completo.</span><span class="sxs-lookup"><span data-stu-id="d03f8-205">This will allow other applications to recover from potential disruptions caused by the start of full ICS.</span></span> <span data-ttu-id="d03f8-206">Per ulteriori informazioni, vedere la discussione seguente sulla sequenza di recupero per la rete wireless ospitata.</span><span class="sxs-lookup"><span data-stu-id="d03f8-206">For more information, see the discussion below on the recovery sequence for wireless Hosted Network.</span></span> <span data-ttu-id="d03f8-207">L'operazione combinata deve avere esito positivo e negativo nel suo complesso.</span><span class="sxs-lookup"><span data-stu-id="d03f8-207">The combined operation should succeed and fail as a whole.</span></span>

> [!Note]  
> <span data-ttu-id="d03f8-208">È necessario avviare la rete ospitata senza fili prima di provare a enumerare la scheda corrispondente usando l'interfaccia [**IEnumNetSharingEveryConnection**](/windows/win32/api/netcon/nn-netcon-ienumnetsharingeveryconnection) .</span><span class="sxs-lookup"><span data-stu-id="d03f8-208">The wireless Hosted Network must be started before attempting to enumerate the corresponding adapter using the [**IEnumNetSharingEveryConnection**](/windows/win32/api/netcon/nn-netcon-ienumnetsharingeveryconnection) interface.</span></span>

 

<span data-ttu-id="d03f8-209">I passaggi ordinati seguenti rappresentano la sequenza di avvio consigliata in un'applicazione che usa la rete wireless ospitata con l'ICS completo:</span><span class="sxs-lookup"><span data-stu-id="d03f8-209">The following ordered steps are the recommended start sequence in an application using wireless Hosted Network with full ICS:</span></span>

-   <span data-ttu-id="d03f8-210">Chiamare la funzione [**WlanHostedNetworkInitSettings**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings) per assicurarsi che la rete ospitata senza fili sia configurata e pronta per l'utilizzo.</span><span class="sxs-lookup"><span data-stu-id="d03f8-210">Call the [**WlanHostedNetworkInitSettings**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings) function to make sure wireless Hosted Network is configured and ready to be used.</span></span>
-   <span data-ttu-id="d03f8-211">Chiamare le funzioni [**WlanHostedNetworkQueryStatus**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerystatus) e [**WlanHostedNetworkQueryProperty**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkqueryproperty) per determinare se la rete ospitata senza fili è consentita e disponibile.</span><span class="sxs-lookup"><span data-stu-id="d03f8-211">Call the [**WlanHostedNetworkQueryStatus**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerystatus) and [**WlanHostedNetworkQueryProperty**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkqueryproperty) functions to determine if the wireless Hosted Network is allowed and available.</span></span> <span data-ttu-id="d03f8-212">Se la rete ospitata senza fili non è consentita e non è disponibile, viene restituito un errore.</span><span class="sxs-lookup"><span data-stu-id="d03f8-212">If the wireless Hosted Network is not allowed and not available, return an error.</span></span>
-   <span data-ttu-id="d03f8-213">Testare per verificare se il servizio ICS usato per l'ICS completo è consentito.</span><span class="sxs-lookup"><span data-stu-id="d03f8-213">Test to see if the ICS Service used for full ICS is allowed.</span></span> <span data-ttu-id="d03f8-214">Se non è possibile avviare il servizio ICS, viene restituito un errore.</span><span class="sxs-lookup"><span data-stu-id="d03f8-214">If the ICS service cannot be started, return an error.</span></span>
-   <span data-ttu-id="d03f8-215">Chiamare la funzione [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) per forzare l'arresto della rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-215">Call the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to force a stop of the wireless Hosted Network.</span></span>
-   <span data-ttu-id="d03f8-216">Chiamare la funzione [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) per avviare la rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-216">Call the [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) function to start the wireless Hosted Network.</span></span>
-   <span data-ttu-id="d03f8-217">Se la rete ospitata senza fili non viene avviata, viene restituito un errore.</span><span class="sxs-lookup"><span data-stu-id="d03f8-217">If the wireless Hosted Network fails to start, return an error.</span></span>
-   <span data-ttu-id="d03f8-218">Se l'ICS completo è già in esecuzione e l'interfaccia pubblica o privata corrente è diversa dalla nuova interfaccia da usare, memorizzare nella cache le interfacce pubbliche e private correnti.</span><span class="sxs-lookup"><span data-stu-id="d03f8-218">If full ICS is already running and the current public or private interface is different from the new interface to be used, cache the current public and private interfaces.</span></span> <span data-ttu-id="d03f8-219">Un'applicazione può anche scegliere di restituire un errore o richiedere all'utente se l'integrazione con ICS è già in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="d03f8-219">An application may also choose to return an error or prompt the user if ICS integration is already running.</span></span>
-   <span data-ttu-id="d03f8-220">Avviare l'ICS completo con le nuove impostazioni per le interfacce pubbliche e private.</span><span class="sxs-lookup"><span data-stu-id="d03f8-220">Start full ICS with the new settings for the public and private interfaces.</span></span>
-   <span data-ttu-id="d03f8-221">Se il servizio ICS completo non viene avviato con queste impostazioni, provare ad avviare il servizio ICS completo con le interfacce pubbliche e private memorizzate nella cache se prima era in esecuzione l'ICS completa.</span><span class="sxs-lookup"><span data-stu-id="d03f8-221">If full ICS fails to start with these settings, try to start full ICS service with the cached public and private interfaces if full ICS was running before.</span></span> <span data-ttu-id="d03f8-222">Chiamare la funzione [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) per arrestare la rete ospitata senza fili e restituire un errore.</span><span class="sxs-lookup"><span data-stu-id="d03f8-222">Call the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network and return an error.</span></span>
-   <span data-ttu-id="d03f8-223">Restituisce l'esito positivo della riuscita della rete ospitata senza fili e dell'ICS completo.</span><span class="sxs-lookup"><span data-stu-id="d03f8-223">Return success that the wireless Hosted Network and full ICS succeed.</span></span>

## <a name="stop-sequence-for-wireless-hosted-network"></a><span data-ttu-id="d03f8-224">Sequenza di arresto per la rete wireless ospitata</span><span class="sxs-lookup"><span data-stu-id="d03f8-224">Stop Sequence for Wireless Hosted Network</span></span>

<span data-ttu-id="d03f8-225">Quando si usa la rete wireless ospitata con l'ICS completo, un'applicazione che ha terminato il lavoro potrebbe voler arrestare la rete ospitata senza fili e il servizio ICS usato per i circuiti integrati completi.</span><span class="sxs-lookup"><span data-stu-id="d03f8-225">When using wireless Hosted Network with full ICS, an application that has finished its work may want to stop the wireless Hosted Network and the ICS service used for full ICS.</span></span> <span data-ttu-id="d03f8-226">In questo caso, è consigliabile chiamare la funzione [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) per arrestare la rete ospitata anziché chiamare la funzione [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) .</span><span class="sxs-lookup"><span data-stu-id="d03f8-226">In this case, it is recommended that the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function be called to stop the Hosted Network rather than calling the [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) function.</span></span> <span data-ttu-id="d03f8-227">La funzione **WlanHostedNetworkForceStop** arresta la rete ospitata senza fili e serve anche per consentire il ripristino di altre applicazioni.</span><span class="sxs-lookup"><span data-stu-id="d03f8-227">The **WlanHostedNetworkForceStop** function stops the wireless Hosted Network and also serves to allow other applications to recover.</span></span> <span data-ttu-id="d03f8-228">Per ulteriori informazioni, vedere la discussione seguente sulla sequenza di recupero per la rete wireless ospitata.</span><span class="sxs-lookup"><span data-stu-id="d03f8-228">For more information, see the discussion below on the recovery sequence for wireless Hosted Network.</span></span>

<span data-ttu-id="d03f8-229">I passaggi ordinati seguenti rappresentano la sequenza di arresto consigliata in un'applicazione che utilizza la rete wireless ospitata e l'ICS completo:</span><span class="sxs-lookup"><span data-stu-id="d03f8-229">The following ordered steps are the recommended stop sequence in an application using wireless Hosted Network and full ICS:</span></span>

-   <span data-ttu-id="d03f8-230">Arrestare l'intero ICS.</span><span class="sxs-lookup"><span data-stu-id="d03f8-230">Stop full ICS.</span></span>
-   <span data-ttu-id="d03f8-231">Chiamare la funzione [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) per arrestare la rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-231">Call the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network.</span></span>

<span data-ttu-id="d03f8-232">Un'applicazione che usa la rete wireless ospitata senza ICS completo completata con il suo lavoro deve solo chiamare la funzione [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) o [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) per arrestare la rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-232">An application using wireless Hosted Network without full ICS that is finished with its work just needs to call the [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) or [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network.</span></span> <span data-ttu-id="d03f8-233">Se è stata chiamata la funzione [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) per avviare la rete wireless ospitata, l'applicazione deve chiamare la funzione **WlanHostedNetworkStopUsing** per arrestare la rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-233">If the [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) function was called to start the wireless Hosted Network, then the application should call the **WlanHostedNetworkStopUsing** function to stop the wireless Hosted Network.</span></span> <span data-ttu-id="d03f8-234">Se la rete ospitata senza fili era già stata avviata prima che l'applicazione o l'applicazione avesse chiamato la funzione [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) per forzare l'avvio della rete ospitata senza fili, l'applicazione può chiamare la funzione **WlanHostedNetworkForceStop** per arrestare la rete ospitata senza fili oppure non eseguire alcuna operazione (lasciare avviata la rete wireless ospitata) a seconda dello scenario.</span><span class="sxs-lookup"><span data-stu-id="d03f8-234">If the wireless Hosted Network was was already started before the application or the application called the [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) function to force start the wireless Hosted Network, then the application can call the **WlanHostedNetworkForceStop** function to stop the wireless Hosted Network or do nothing (leave wireless Hosted Network started) depending on the scenario.</span></span>

## <a name="recovery-sequence-for-wireless-hosted-network"></a><span data-ttu-id="d03f8-235">Sequenza di recupero per la rete wireless ospitata</span><span class="sxs-lookup"><span data-stu-id="d03f8-235">Recovery Sequence for Wireless Hosted Network</span></span>

<span data-ttu-id="d03f8-236">Un'applicazione che usa la rete wireless ospitata può essere interessata dalle azioni di altre applicazioni.</span><span class="sxs-lookup"><span data-stu-id="d03f8-236">An application using the wireless Hosted Network may be affected by the actions of other applications.</span></span> <span data-ttu-id="d03f8-237">Il servizio ICS e le interfacce per la gestione di ICS non forniscono alcun metodo per la registrazione delle notifiche di modifica ICS da parte di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="d03f8-237">The ICS service and the interfaces for managing ICS provide no method for an application to register for ICS change notifications.</span></span> <span data-ttu-id="d03f8-238">Se un'altra applicazione chiama i metodi [**EnableSharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-enablesharing) o [**DisableSharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-disablesharing) sull'interfaccia [**INetSharingConfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) per abilitare o disabilitare la condivisione in una connessione, viene inviato un messaggio all'interfaccia utente (schermata) nel computer locale e non ad altre applicazioni.</span><span class="sxs-lookup"><span data-stu-id="d03f8-238">If another application calls the [**EnableSharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-enablesharing) or the [**DisableSharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-disablesharing) methods on the [**INetSharingConfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) interface to enable or disable sharing on a connection, a message is sent to the user interface (the screen) on the local computer not to other applications.</span></span> <span data-ttu-id="d03f8-239">Pertanto, un'applicazione deve basarsi sulle notifiche della rete wireless ospitata per eseguire azioni di ripristino quando si verificano modifiche all'ICS o alla rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-239">So an application needs to rely on the wireless Hosted Network notifications to perform recovery actions when ICS or wireless Hosted Network changes occur.</span></span>

<span data-ttu-id="d03f8-240">Un'applicazione che usa la rete wireless ospitata deve registrarsi per le notifiche di rete ospitata senza fili chiamando [**WlanRegisterNotification**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanregisternotification).</span><span class="sxs-lookup"><span data-stu-id="d03f8-240">An application using the wireless Hosted Network should register for wireless Hosted Network notifications by calling the [**WlanRegisterNotification**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanregisternotification).</span></span> <span data-ttu-id="d03f8-241">Se sono necessarie notifiche per solo la rete wireless ospitata, l'applicazione deve passare l' **\_ origine di notifica WLAN \_ \_ HNWK** nel parametro *dwNotifSource* passato a **WlanRegisterNotification**.</span><span class="sxs-lookup"><span data-stu-id="d03f8-241">If notifications for only wireless Hosted Network are needed, then the application should pass **WLAN\_NOTIFICATION\_SOURCE\_HNWK** in the *dwNotifSource* parameter passed to the **WlanRegisterNotification**.</span></span> <span data-ttu-id="d03f8-242">Se sono necessarie anche altre segnalazioni wireless, l' **\_ origine di notifica WLAN \_ \_ HNWK** deve essere combinata con le costanti di origine della notifica per altri tipi di notifiche wireless desiderate e passare questo valore nel parametro *dwNotifSource* .</span><span class="sxs-lookup"><span data-stu-id="d03f8-242">If other wireless notications are also needed, then **WLAN\_NOTIFICATION\_SOURCE\_HNWK** should be combined with the notification source constants for other types of wireless notifications desired and pass this value in the *dwNotifSource* parameter.</span></span>

<span data-ttu-id="d03f8-243">La sequenza di recupero è la stessa per le applicazioni con o senza ICS completo, presupponendo che le applicazioni non riavviino il servizio ICS.</span><span class="sxs-lookup"><span data-stu-id="d03f8-243">The recovery sequence is the same for applications with or without full ICS, assuming that applications don’t want to start ICS service again.</span></span> <span data-ttu-id="d03f8-244">Quando si riceve una notifica di rete ospitata senza fili che la rete ospitata è stata arrestata, effettuare le seguenti operazioni:</span><span class="sxs-lookup"><span data-stu-id="d03f8-244">Upon receiving a wireless Hosted Network notification that the Hosted Network has stopped, do the following:</span></span>

-   <span data-ttu-id="d03f8-245">Se l'applicazione ha chiamato [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) per avviare la rete wireless ospitata, riavviare la rete ospitata chiamando **WlanHostedNetworkForceStart**.</span><span class="sxs-lookup"><span data-stu-id="d03f8-245">If the application called [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) to start the wireless Hosted Network, then restart the Hosted Network by calling **WlanHostedNetworkForceStart**.</span></span> <span data-ttu-id="d03f8-246">In caso contrario, chiamare [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) per riavviare la rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-246">Otherwise, call [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) to restart the wireless Hosted Network.</span></span>

## <a name="recovery-sequence-for-connected-devices"></a><span data-ttu-id="d03f8-247">Sequenza di ripristino per i dispositivi connessi</span><span class="sxs-lookup"><span data-stu-id="d03f8-247">Recovery Sequence for Connected Devices</span></span>

<span data-ttu-id="d03f8-248">È possibile che i dispositivi remoti o i computer connessi alla rete ospitata senza fili siano interessati dalle azioni di altre applicazioni che influiscono su ICS e sulla rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-248">Remote devices or computers connected to the wireless Hosted Network may be affected by the actions of other applications that impact ICS and the wireless Hosted Network.</span></span> <span data-ttu-id="d03f8-249">Fortunatamente, la maggior parte dei dispositivi ha creato la logica di ripetizione dei tentativi nell'applicazione del dispositivo per gestire una perdita temporanea del segnale o del roaming.</span><span class="sxs-lookup"><span data-stu-id="d03f8-249">Fortunately, most devices have built in retry logic in the device application to deal with a temporary loss of signal or roaming.</span></span>

<span data-ttu-id="d03f8-250">Una possibile sequenza di ripristino per i dispositivi o i computer connessi alla rete ospitata senza fili che perde il contatto è la seguente:</span><span class="sxs-lookup"><span data-stu-id="d03f8-250">A possible recovery sequence for devices or computers connected to the wireless Hosted Network that lose contact is the following:</span></span>

-   <span data-ttu-id="d03f8-251">Il driver di dispositivo wireless indica una disconnessione dei supporti ai livelli superiori dello stack di rete nel dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d03f8-251">The wireless device driver indicates a media disconnect to the upper layers of the network stack on the device.</span></span>
-   <span data-ttu-id="d03f8-252">L'applicazione del dispositivo avvia verifiche periodiche per la disponibilità della rete ospitata senza fili.</span><span class="sxs-lookup"><span data-stu-id="d03f8-252">The device application starts periodic checks for the availability of the wireless Hosted Network.</span></span>
-   <span data-ttu-id="d03f8-253">Quando l'applicazione del dispositivo rileva nuovamente la rete ospitata senza fili, il dispositivo avvia una connessione wireless.</span><span class="sxs-lookup"><span data-stu-id="d03f8-253">Once the device application again detects the wireless Hosted Network, the device initiates a wireless connection.</span></span>
-   <span data-ttu-id="d03f8-254">Una volta stabilita la connessione alla rete ospitata senza fili, l'applicazione del dispositivo aggiorna le impostazioni IP di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="d03f8-254">Upon a successful connection with the wireless Hosted Network, the device application updates its IP settings accordingly.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d03f8-255">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="d03f8-255">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d03f8-256">Informazioni sulla rete wireless ospitata</span><span class="sxs-lookup"><span data-stu-id="d03f8-256">About the Wireless Hosted Network</span></span>](about-the-wireless-hosted-network.md)
</dt> <dt>

[<span data-ttu-id="d03f8-257">Esempio di rete wireless ospitata</span><span class="sxs-lookup"><span data-stu-id="d03f8-257">Wireless Hosted Network Sample</span></span>](wireless-hosted-network-sample.md)
</dt> <dt>

[<span data-ttu-id="d03f8-258">**WlanHostedNetworkForceStart**</span><span class="sxs-lookup"><span data-stu-id="d03f8-258">**WlanHostedNetworkForceStart**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart)
</dt> <dt>

[<span data-ttu-id="d03f8-259">**WlanHostedNetworkInitSettings**</span><span class="sxs-lookup"><span data-stu-id="d03f8-259">**WlanHostedNetworkInitSettings**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings)
</dt> <dt>

[<span data-ttu-id="d03f8-260">**WlanHostedNetworkQueryProperty**</span><span class="sxs-lookup"><span data-stu-id="d03f8-260">**WlanHostedNetworkQueryProperty**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkqueryproperty)
</dt> <dt>

[<span data-ttu-id="d03f8-261">**WlanHostedNetworkQuerySecondaryKey**</span><span class="sxs-lookup"><span data-stu-id="d03f8-261">**WlanHostedNetworkQuerySecondaryKey**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerysecondarykey)
</dt> <dt>

[<span data-ttu-id="d03f8-262">**WlanHostedNetworkQueryStatus**</span><span class="sxs-lookup"><span data-stu-id="d03f8-262">**WlanHostedNetworkQueryStatus**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerystatus)
</dt> <dt>

[<span data-ttu-id="d03f8-263">**WlanHostedNetworkRefreshSecuritySettings**</span><span class="sxs-lookup"><span data-stu-id="d03f8-263">**WlanHostedNetworkRefreshSecuritySettings**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkrefreshsecuritysettings)
</dt> <dt>

[<span data-ttu-id="d03f8-264">**WlanHostedNetworkSetProperty**</span><span class="sxs-lookup"><span data-stu-id="d03f8-264">**WlanHostedNetworkSetProperty**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworksetproperty)
</dt> <dt>

[<span data-ttu-id="d03f8-265">**WlanHostedNetworkSetSecondaryKey**</span><span class="sxs-lookup"><span data-stu-id="d03f8-265">**WlanHostedNetworkSetSecondaryKey**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworksetsecondarykey)
</dt> <dt>

[<span data-ttu-id="d03f8-266">**WlanHostedNetworkStartUsing**</span><span class="sxs-lookup"><span data-stu-id="d03f8-266">**WlanHostedNetworkStartUsing**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing)
</dt> <dt>

[<span data-ttu-id="d03f8-267">**WlanHostedNetworkStopUsing**</span><span class="sxs-lookup"><span data-stu-id="d03f8-267">**WlanHostedNetworkStopUsing**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing)
</dt> <dt>

[<span data-ttu-id="d03f8-268">**WlanRegisterVirtualStationNotification**</span><span class="sxs-lookup"><span data-stu-id="d03f8-268">**WlanRegisterVirtualStationNotification**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanregistervirtualstationnotification)
</dt> </dl>

 

 
