---
description: I provider classici usano la funzione TraceEventInstance per tracciare gli eventi che fanno parte di una singola transazione. È anche possibile usare questa funzione per tracciare gli eventi padre/figlio.
ms.assetid: 246e9443-3120-49bf-a6e3-64dddba348fa
title: Scrittura di eventi correlati in un provider classico
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 771b08a66625d5cd6e723fbc2e12eed87bd1d434
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "104350326"
---
# <a name="writing-related-events-in-a-classic-provider"></a><span data-ttu-id="e65b6-104">Scrittura di eventi correlati in un provider classico</span><span class="sxs-lookup"><span data-stu-id="e65b6-104">Writing Related Events in a Classic Provider</span></span>

<span data-ttu-id="e65b6-105">I provider [classici](about-event-tracing.md) usano la funzione [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) per tracciare gli eventi che fanno parte di una singola transazione.</span><span class="sxs-lookup"><span data-stu-id="e65b6-105">[Classic](about-event-tracing.md) providers use the [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) function to trace events that are part of a single transaction.</span></span> <span data-ttu-id="e65b6-106">È anche possibile usare questa funzione per tracciare gli eventi padre/figlio.</span><span class="sxs-lookup"><span data-stu-id="e65b6-106">You can also use this function to trace parent/child events.</span></span>

<span data-ttu-id="e65b6-107">Prima di chiamare la funzione [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) , è necessario chiamare prima la funzione [**CreateTraceInstanceId**](/windows/win32/api/evntrace/nf-evntrace-createtraceinstanceid) per ottenere un identificatore di transazione.</span><span class="sxs-lookup"><span data-stu-id="e65b6-107">Before calling the [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) function, you must first call the [**CreateTraceInstanceId**](/windows/win32/api/evntrace/nf-evntrace-createtraceinstanceid) function to obtain a transaction identifier.</span></span> <span data-ttu-id="e65b6-108">Questa funzione genera un identificatore univoco della transazione e ne esegue il mapping a un handle GUID della classe registrato.</span><span class="sxs-lookup"><span data-stu-id="e65b6-108">This function generates a unique transaction identifier, and maps it to a registered class GUID handle.</span></span> <span data-ttu-id="e65b6-109">Gli handle per i GUID della classe registrati sono disponibili nei membri **RegHandle** delle strutture di [**\_ \_ registrazione del GUID di traccia**](/windows/win32/api/evntrace/ns-evntrace-trace_guid_registration) , dopo la chiamata della funzione [**RegisterTraceGuids**](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) .</span><span class="sxs-lookup"><span data-stu-id="e65b6-109">The handles for registered class GUIDs are available in the **RegHandle** members of [**TRACE\_GUID\_REGISTRATION**](/windows/win32/api/evntrace/ns-evntrace-trace_guid_registration) structures, after calling the [**RegisterTraceGuids**](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) function.</span></span> <span data-ttu-id="e65b6-110">L'identificatore della transazione viene inserito nel membro **InstanceID** di una struttura di [**\_ \_ informazioni sull'istanza dell'evento**](/windows/win32/api/evntrace/ns-evntrace-event_instance_info) passata alla funzione **CreateTraceInstanceId** .</span><span class="sxs-lookup"><span data-stu-id="e65b6-110">The transaction identifier is placed in the **InstanceId** member of an [**EVENT\_INSTANCE\_INFO**](/windows/win32/api/evntrace/ns-evntrace-event_instance_info) structure that you pass to the **CreateTraceInstanceId** function.</span></span>

<span data-ttu-id="e65b6-111">La struttura dell' [**\_ \_ intestazione dell'istanza di evento**](/windows/win32/api/evntrace/ns-evntrace-event_instance_header) passata alla funzione [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) è simile alla struttura [**dell' \_ \_ intestazione della traccia eventi**](/windows/win32/api/evntrace/ns-evntrace-event_trace_header) (vedere [eventi di traccia](tracing-events.md)), ad eccezione del fatto che contiene informazioni aggiuntive relative alle istanze di e non contiene un membro **GUID** .</span><span class="sxs-lookup"><span data-stu-id="e65b6-111">The [**EVENT\_INSTANCE\_HEADER**](/windows/win32/api/evntrace/ns-evntrace-event_instance_header) structure that is passed to the [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) function is similar to the [**EVENT\_TRACE\_HEADER**](/windows/win32/api/evntrace/ns-evntrace-event_trace_header) structure (see [Tracing Events](tracing-events.md)), except that it contains additional information relating to instances, and does not contain a **Guid** member.</span></span>

<span data-ttu-id="e65b6-112">Le istanze di evento possono essere utilizzate per stabilire una relazione gerarchica tra gli eventi.</span><span class="sxs-lookup"><span data-stu-id="e65b6-112">Event instances can be used to establish a hierarchical relationship between events.</span></span> <span data-ttu-id="e65b6-113">La funzione [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) accetta informazioni specifiche dell'istanza da due istanze dell'evento.</span><span class="sxs-lookup"><span data-stu-id="e65b6-113">The [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) function accepts instance-specific information from two event instances.</span></span> <span data-ttu-id="e65b6-114">Il parametro *pInstInfo* punta alla struttura [**di \_ \_ informazioni sull'istanza**](/windows/win32/api/evntrace/ns-evntrace-event_instance_info) dell'evento e il parametro *pParentInstInfo* punta alla struttura di **\_ \_ informazioni sull'istanza dell'evento** di un'istanza dell'evento padre.</span><span class="sxs-lookup"><span data-stu-id="e65b6-114">The *pInstInfo* parameter points to the [**EVENT\_INSTANCE\_INFO**](/windows/win32/api/evntrace/ns-evntrace-event_instance_info) structure of the event instance, and the *pParentInstInfo* parameter points to the **EVENT\_INSTANCE\_INFO** structure of a parent event instance.</span></span> <span data-ttu-id="e65b6-115">La definizione di un'istanza di evento "padre" è definita dall'applicazione; l'elemento padre può essere qualsiasi istanza che è già stata generata.</span><span class="sxs-lookup"><span data-stu-id="e65b6-115">The definition of a "parent" event instance is application-defined; the parent can be any instance that has already been generated.</span></span>

 

 
