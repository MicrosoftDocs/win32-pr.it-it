---
description: Event Tracing for Windows (ETW) è una funzionalità di traccia a livello di kernel efficiente che consente di registrare gli eventi del kernel o definiti dall'applicazione in un file di log.
ms.assetid: 0eaa7bd3-8537-483a-b0d6-db3b790a6f3d
title: Informazioni sulla traccia eventi
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3a2f13284cec1d9300c23241fafe154f277f72a3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103966837"
---
# <a name="about-event-tracing"></a><span data-ttu-id="10e46-103">Informazioni sulla traccia eventi</span><span class="sxs-lookup"><span data-stu-id="10e46-103">About Event Tracing</span></span>

<span data-ttu-id="10e46-104">Event Tracing for Windows (ETW) è una funzionalità di traccia a livello di kernel efficiente che consente di registrare gli eventi del kernel o definiti dall'applicazione in un file di log.</span><span class="sxs-lookup"><span data-stu-id="10e46-104">Event Tracing for Windows (ETW) is an efficient kernel-level tracing facility that lets you log kernel or application-defined events to a log file.</span></span> <span data-ttu-id="10e46-105">È possibile utilizzare gli eventi in tempo reale o da un file di log e utilizzarli per eseguire il debug di un'applicazione o per determinare la posizione in cui si verificano problemi di prestazioni nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="10e46-105">You can consume the events in real time or from a log file and use them to debug an application or to determine where performance issues are occurring in the application.</span></span>

<span data-ttu-id="10e46-106">ETW consente di abilitare o disabilitare la traccia eventi in modo dinamico, consentendo di eseguire analisi dettagliate in un ambiente di produzione senza richiedere il riavvio del computer o dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="10e46-106">ETW lets you enable or disable event tracing dynamically, allowing you to perform detailed tracing in a production environment without requiring computer or application restarts.</span></span>

<span data-ttu-id="10e46-107">L'API di traccia eventi è suddivisa in tre componenti distinti:</span><span class="sxs-lookup"><span data-stu-id="10e46-107">The Event Tracing API is broken into three distinct components:</span></span>

-   <span data-ttu-id="10e46-108">[Controller](#controllers), che avviano e arrestano una sessione di traccia eventi e abilitano i provider</span><span class="sxs-lookup"><span data-stu-id="10e46-108">[Controllers](#controllers), which start and stop an event tracing session and enable providers</span></span>
-   <span data-ttu-id="10e46-109">[Provider](#providers), che forniscono gli eventi</span><span class="sxs-lookup"><span data-stu-id="10e46-109">[Providers](#providers), which provide the events</span></span>
-   <span data-ttu-id="10e46-110">[Consumer](#consumers), che utilizzano gli eventi</span><span class="sxs-lookup"><span data-stu-id="10e46-110">[Consumers](#consumers), which consume the events</span></span>

<span data-ttu-id="10e46-111">Il diagramma seguente illustra il modello di traccia eventi.</span><span class="sxs-lookup"><span data-stu-id="10e46-111">The following diagram shows the event tracing model.</span></span>

![modello di traccia eventi](images/etdiag2.png)

## <a name="controllers"></a><span data-ttu-id="10e46-113">Controllers</span><span class="sxs-lookup"><span data-stu-id="10e46-113">Controllers</span></span>

<span data-ttu-id="10e46-114">I controller sono applicazioni che definiscono le dimensioni e la posizione del file di log, avviano e arrestano le [sessioni di traccia eventi](event-tracing-sessions.md), abilitano i provider in modo che possano registrare gli eventi nella sessione, gestire le dimensioni del pool di buffer e ottenere statistiche di esecuzione per le sessioni.</span><span class="sxs-lookup"><span data-stu-id="10e46-114">Controllers are applications that define the size and location of the log file, start and stop [event tracing sessions](event-tracing-sessions.md), enable providers so they can log events to the session, manage the size of the buffer pool, and obtain execution statistics for sessions.</span></span> <span data-ttu-id="10e46-115">Le statistiche della sessione includono il numero di buffer utilizzati, il numero di buffer recapitati e il numero di eventi e buffer persi.</span><span class="sxs-lookup"><span data-stu-id="10e46-115">Session statistics include the number of buffers used, the number of buffers delivered, and the number of events and buffers lost.</span></span> 

<span data-ttu-id="10e46-116">Per ulteriori informazioni, vedere [controllo delle sessioni di traccia eventi](controlling-event-tracing-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="10e46-116">For more information, see [Controlling Event Tracing Sessions](controlling-event-tracing-sessions.md).</span></span>

## <a name="providers"></a><span data-ttu-id="10e46-117">Provider</span><span class="sxs-lookup"><span data-stu-id="10e46-117">Providers</span></span>

<span data-ttu-id="10e46-118">I provider sono applicazioni che contengono la strumentazione di traccia eventi.</span><span class="sxs-lookup"><span data-stu-id="10e46-118">Providers are applications that contain event tracing instrumentation.</span></span> <span data-ttu-id="10e46-119">Dopo la registrazione di un provider, un controller può quindi abilitare o disabilitare la traccia eventi nel provider.</span><span class="sxs-lookup"><span data-stu-id="10e46-119">After a provider registers itself, a controller can then enable or disable event tracing in the provider.</span></span> <span data-ttu-id="10e46-120">Il provider definisce l'interpretazione dell'abilitazione o disabilitazione.</span><span class="sxs-lookup"><span data-stu-id="10e46-120">The provider defines its interpretation of being enabled or disabled.</span></span> <span data-ttu-id="10e46-121">In genere, un provider abilitato genera eventi, mentre un provider disabilitato non lo consente.</span><span class="sxs-lookup"><span data-stu-id="10e46-121">Generally, an enabled provider generates events, while a disabled provider does not.</span></span> <span data-ttu-id="10e46-122">In questo modo è possibile aggiungere la traccia eventi all'applicazione senza che sia necessario generare eventi sempre.</span><span class="sxs-lookup"><span data-stu-id="10e46-122">This lets you add event tracing to your application without requiring that it generate events all the time.</span></span> 

<span data-ttu-id="10e46-123">Anche se il modello ETW separa il controller e il provider in applicazioni separate, un'applicazione può includere entrambi i componenti.</span><span class="sxs-lookup"><span data-stu-id="10e46-123">Although the ETW model separates the controller and provider into separate applications, an application can include both components.</span></span>

<span data-ttu-id="10e46-124">Per ulteriori informazioni, vedere la pagina relativa alla [fornitura di eventi](providing-events.md).</span><span class="sxs-lookup"><span data-stu-id="10e46-124">For more information, see [Providing Events](providing-events.md).</span></span>

### <a name="types-of-providers"></a><span data-ttu-id="10e46-125">Tipi di provider</span><span class="sxs-lookup"><span data-stu-id="10e46-125">Types of Providers</span></span>

<span data-ttu-id="10e46-126">Sono disponibili quattro tipi principali di provider: i provider MOF (classico), i provider WPP, i provider basati su manifesto e i provider TraceLogging.</span><span class="sxs-lookup"><span data-stu-id="10e46-126">There are four main types of providers: MOF (classic) providers, WPP providers, manifest-based providers, and TraceLogging providers.</span></span> <span data-ttu-id="10e46-127">Se si scrivono applicazioni per Windows Vista o versioni successive, è necessario utilizzare un provider basato su manifesto o un provider TraceLogging per cui non è necessario supportare i sistemi legacy.</span><span class="sxs-lookup"><span data-stu-id="10e46-127">You should use a manifest-based provider or a TraceLogging provider if you are writing applications for Windows Vista or later that do not need to support legacy systems.</span></span>

#### <a name="mof-classic-providers"></a><span data-ttu-id="10e46-128">Provider MOF (classico):</span><span class="sxs-lookup"><span data-stu-id="10e46-128">MOF (classic) providers:</span></span>

-   <span data-ttu-id="10e46-129">Usare le funzioni [RegisterTraceGuids](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) e [TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) per registrare e scrivere gli eventi.</span><span class="sxs-lookup"><span data-stu-id="10e46-129">Use the [RegisterTraceGuids](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) and [TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) functions to register and write events.</span></span>
-   <span data-ttu-id="10e46-130">Utilizzare le classi MOF per definire gli eventi in modo che i consumer sappiano come utilizzarli.</span><span class="sxs-lookup"><span data-stu-id="10e46-130">Use MOF classes to define events so that consumers know how to consume them.</span></span>
-   <span data-ttu-id="10e46-131">Può essere abilitato da una sola sessione di traccia alla volta.</span><span class="sxs-lookup"><span data-stu-id="10e46-131">Can be enabled by only one trace session at a time.</span></span>

#### <a name="wpp-providers"></a><span data-ttu-id="10e46-132">Provider WPP:</span><span class="sxs-lookup"><span data-stu-id="10e46-132">WPP providers:</span></span>

-   <span data-ttu-id="10e46-133">Usare le funzioni [RegisterTraceGuids](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) e [TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) per registrare e scrivere gli eventi.</span><span class="sxs-lookup"><span data-stu-id="10e46-133">Use the [RegisterTraceGuids](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) and [TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) functions to register and write events.</span></span>
-   <span data-ttu-id="10e46-134">Sono stati associati i file MDF (compilati nel file PDB di un file binario) contenenti informazioni di decodifica derivate dall'analisi del preprocessore della strumentazione WPP nel codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="10e46-134">Have associated TMF files (compiled into a binary's .pdb) containing decoding information inferred from the preprocessor's scan of WPP instrumentation in source code.</span></span>
-   <span data-ttu-id="10e46-135">Può essere abilitato da una sola sessione di traccia alla volta.</span><span class="sxs-lookup"><span data-stu-id="10e46-135">Can be enabled by only one trace session at a time.</span></span>

#### <a name="manifest-based-providers"></a><span data-ttu-id="10e46-136">Provider basati su manifesto:</span><span class="sxs-lookup"><span data-stu-id="10e46-136">Manifest-based providers:</span></span>

-   <span data-ttu-id="10e46-137">Usare [EventRegister](/windows/desktop/api/Evntprov/nf-evntprov-eventregister) e [EventWrite](/windows/desktop/api/Evntprov/nf-evntprov-eventwrite) per registrare e scrivere gli eventi.</span><span class="sxs-lookup"><span data-stu-id="10e46-137">Use [EventRegister](/windows/desktop/api/Evntprov/nf-evntprov-eventregister) and [EventWrite](/windows/desktop/api/Evntprov/nf-evntprov-eventwrite) to register and write events.</span></span>
-   <span data-ttu-id="10e46-138">Utilizzare un manifesto per definire gli eventi in modo che i consumer sappiano come utilizzarli.</span><span class="sxs-lookup"><span data-stu-id="10e46-138">Use a manifest to define events so that consumers know how to consume them.</span></span>
-   <span data-ttu-id="10e46-139">Può essere abilitato fino a otto sessioni di traccia simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="10e46-139">Can be enabled by up to eight trace sessions simultaneously.</span></span>

#### <a name="tracelogging-providers"></a><span data-ttu-id="10e46-140">Provider [TraceLogging](/windows/desktop/tracelogging/trace-logging-about) :</span><span class="sxs-lookup"><span data-stu-id="10e46-140">[TraceLogging](/windows/desktop/tracelogging/trace-logging-about) providers:</span></span>

-   <span data-ttu-id="10e46-141">Usare [TraceLoggingRegister](/windows/desktop/api/traceloggingprovider/nf-traceloggingprovider-traceloggingregister) e [TraceLoggingWrite](/windows/desktop/api/traceloggingprovider/nf-traceloggingprovider-traceloggingwrite) per registrare e scrivere gli eventi.</span><span class="sxs-lookup"><span data-stu-id="10e46-141">Use [TraceLoggingRegister](/windows/desktop/api/traceloggingprovider/nf-traceloggingprovider-traceloggingregister) and [TraceLoggingWrite](/windows/desktop/api/traceloggingprovider/nf-traceloggingprovider-traceloggingwrite) to register and write events.</span></span>
-   <span data-ttu-id="10e46-142">Usare gli eventi autodescrittivi in modo che gli eventi stessi contengano tutte le informazioni necessarie per l'utilizzo.</span><span class="sxs-lookup"><span data-stu-id="10e46-142">Use self-describing events so that the events themselves contain all required information for consuming them.</span></span>
-   <span data-ttu-id="10e46-143">Può essere abilitato fino a otto sessioni di traccia simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="10e46-143">Can be enabled by up to eight trace sessions simultaneously.</span></span>

<span data-ttu-id="10e46-144">Tutti i provider di eventi utilizzano fondamentalmente la famiglia di API di analisi degli eventi ([TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) per le tecnologie legacy e [EventWrite](/windows/desktop/api/Evntprov/nf-evntprov-eventwrite) / [EventWriteEx](/windows/desktop/api/Evntprov/nf-evntprov-eventwriteex) per le versioni più recenti).</span><span class="sxs-lookup"><span data-stu-id="10e46-144">All event providers fundamentally use the Event Tracing family of APIs ([TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) for legacy technologies and [EventWrite](/windows/desktop/api/Evntprov/nf-evntprov-eventwrite)/[EventWriteEx](/windows/desktop/api/Evntprov/nf-evntprov-eventwriteex) for newer ones).</span></span> <span data-ttu-id="10e46-145">I provider di eventi differiscono semplicemente per i tipi di campo archiviati nei payload dell'evento e dove archiviano le informazioni di decodifica degli eventi associati.</span><span class="sxs-lookup"><span data-stu-id="10e46-145">Event providers simply differ in what field types they store in event payloads and where they store the associated event decoding information.</span></span>

## <a name="consumers"></a><span data-ttu-id="10e46-146">Consumer</span><span class="sxs-lookup"><span data-stu-id="10e46-146">Consumers</span></span>

<span data-ttu-id="10e46-147">I consumer sono applicazioni che selezionano una o più sessioni di traccia eventi come origine di eventi.</span><span class="sxs-lookup"><span data-stu-id="10e46-147">Consumers are applications that select one or more event tracing sessions as a source of events.</span></span> <span data-ttu-id="10e46-148">Un consumer può richiedere eventi contemporaneamente da più sessioni di traccia eventi; il sistema recapita gli eventi in ordine cronologico.</span><span class="sxs-lookup"><span data-stu-id="10e46-148">A consumer can request events from multiple event tracing sessions simultaneously; the system delivers the events in chronological order.</span></span> <span data-ttu-id="10e46-149">I consumer possono ricevere eventi archiviati nei file di log o da sessioni che inviano eventi in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="10e46-149">Consumers can receive events stored in log files, or from sessions that deliver events in real time.</span></span> <span data-ttu-id="10e46-150">Quando si elaborano gli eventi, un consumer può specificare l'ora di inizio e di fine e verranno recapitati solo gli eventi che si verificano nell'intervallo di tempo specificato.</span><span class="sxs-lookup"><span data-stu-id="10e46-150">When processing events, a consumer can specify start and end times, and only events that occur in the specified time frame will be delivered.</span></span> 

<span data-ttu-id="10e46-151">Per ulteriori informazioni, vedere [utilizzo degli eventi](consuming-events.md).</span><span class="sxs-lookup"><span data-stu-id="10e46-151">For more information, see [Consuming Events](consuming-events.md).</span></span>

## <a name="missing-events"></a><span data-ttu-id="10e46-152">Eventi mancanti</span><span class="sxs-lookup"><span data-stu-id="10e46-152">Missing Events</span></span>

<span data-ttu-id="10e46-153">PerfMon, diagnostica di sistema e altri strumenti di sistema possono segnalare eventi mancanti nel registro eventi e indicare che le impostazioni per Event Tracing for Windows (ETW) potrebbero non essere ottimali.</span><span class="sxs-lookup"><span data-stu-id="10e46-153">Perfmon, System Diagnostics, and other system tools may report on missing events in the Event Log and indicate that the settings for Event Tracing for Windows (ETW) may not be optimal.</span></span> <span data-ttu-id="10e46-154">Gli eventi possono essere persi per diversi motivi:</span><span class="sxs-lookup"><span data-stu-id="10e46-154">Events can be lost for a number of reasons:</span></span>

-   <span data-ttu-id="10e46-155">La dimensione totale dell'evento è maggiore di 64K.</span><span class="sxs-lookup"><span data-stu-id="10e46-155">The total event size is greater than 64K.</span></span> <span data-ttu-id="10e46-156">Sono incluse l'intestazione ETW e i dati o il payload.</span><span class="sxs-lookup"><span data-stu-id="10e46-156">This includes the ETW header plus the data or payload.</span></span> <span data-ttu-id="10e46-157">Un utente non ha alcun controllo sugli eventi mancanti, perché la dimensione dell'evento è configurata dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="10e46-157">A user has no control over these missing events since the event size is configured by the application.</span></span>

-   <span data-ttu-id="10e46-158">Le dimensioni del buffer ETW sono inferiori alle dimensioni totali dell'evento.</span><span class="sxs-lookup"><span data-stu-id="10e46-158">The ETW buffer size is smaller than the total event size.</span></span> <span data-ttu-id="10e46-159">Un utente non ha alcun controllo sugli eventi mancanti poiché le dimensioni dell'evento sono configurate dall'applicazione per la registrazione degli eventi.</span><span class="sxs-lookup"><span data-stu-id="10e46-159">A user has no control over these missing events since the event size is configured by the application logging the events.</span></span>

-   <span data-ttu-id="10e46-160">Per la registrazione in tempo reale, il consumer in tempo reale non utilizza gli eventi in modo sufficientemente rapido o non è presente nel suo complesso e quindi il file di supporto si riempie.</span><span class="sxs-lookup"><span data-stu-id="10e46-160">For real-time logging, the real-time consumer is not consuming events fast enough or is not present altogether and then the backing file is filling up.</span></span> <span data-ttu-id="10e46-161">Questo può verificarsi se il servizio Registro eventi viene arrestato e avviato quando si registrano gli eventi.</span><span class="sxs-lookup"><span data-stu-id="10e46-161">This can result if the Event Log service is stopped and started when events are being logged.</span></span> <span data-ttu-id="10e46-162">Un utente non ha alcun controllo sugli eventi mancanti.</span><span class="sxs-lookup"><span data-stu-id="10e46-162">A user has no control over these missing events.</span></span>

-   <span data-ttu-id="10e46-163">Quando si esegue la registrazione in un file, il disco è troppo lento per restare al passo con la frequenza di registrazione.</span><span class="sxs-lookup"><span data-stu-id="10e46-163">When logging to a file, the disk is too slow to keep up with the logging rate.</span></span>

<span data-ttu-id="10e46-164">Per questi motivi, segnalare questi problemi al provider dell'applicazione o del servizio che genera gli eventi.</span><span class="sxs-lookup"><span data-stu-id="10e46-164">For any of these reasons, please report these problems to the provider of the application or service that is generating the events.</span></span> <span data-ttu-id="10e46-165">Questi problemi possono essere corretti solo dallo sviluppatore dell'applicazione o dal servizio che registra gli eventi.</span><span class="sxs-lookup"><span data-stu-id="10e46-165">These issues can only be fixed by the application developer or the service logging the events.</span></span> <span data-ttu-id="10e46-166">Se gli eventi mancanti vengono segnalati nel servizio Registro eventi, questo potrebbe indicare un problema con la configurazione del servizio Registro eventi.</span><span class="sxs-lookup"><span data-stu-id="10e46-166">If the missing events are being reported in the Event Log Service, this may indicate a problem with the configuration of the Event Log service.</span></span> <span data-ttu-id="10e46-167">L'utente può avere una certa capacità di aumentare lo spazio su disco massimo che può essere utilizzato dal servizio Registro eventi, in modo da ridurre il numero di eventi mancanti.</span><span class="sxs-lookup"><span data-stu-id="10e46-167">The user may have some limited ability to increase the maximum disk space to be used by the Event Log Service which may reduce the number of missing events.</span></span>

 

 
