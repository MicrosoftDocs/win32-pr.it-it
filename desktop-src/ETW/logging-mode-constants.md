---
description: Le costanti seguenti rappresentano le modalità di registrazione possibili per una sessione di traccia eventi.
ms.assetid: d12aaecb-776a-4476-9ba4-16af30fde9c2
title: Costanti della modalità di registrazione
ms.topic: article
ms.date: 06/03/2020
ms.openlocfilehash: dd2a5e004b233637df26455c7eb69f45f4f41883
ms.sourcegitcommit: 9b5faa61c38b2d0c432b7f2dbee8c127b0e28a7e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/19/2021
ms.locfileid: "122482867"
---
# <a name="logging-mode-constants"></a>Costanti della modalità di registrazione

Le costanti seguenti rappresentano le modalità di registrazione possibili per una sessione di traccia eventi.

Le costanti vengono usate nei membri **LogFileMode** delle strutture [**EVENT TRACE \_ \_ LOGFILE**](/windows/win32/api/evntrace/ns-evntrace-event_trace_logfilea), [**EVENT TRACE \_ \_ PROPERTIES**](/windows/win32/api/evntrace/ns-evntrace-event_trace_properties) e [**TRACE \_ LOGFILE \_ HEADER.**](/windows/win32/api/evntrace/ns-evntrace-trace_logfile_header) Queste costanti sono definite nel file di *intestazione Evntrace.h.*




| Mode | Descrizione | 
|------|-------------|
| <strong>EVENT_TRACE_FILE_MODE_NONE</strong> (0x00000000) | Uguale a <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong> senza specificare le dimensioni massime del file. | 
| <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong> (0x00000001) | Scrive gli eventi in un file di log in sequenza. si arresta quando il file raggiunge le dimensioni massime. Non usare <strong>con</strong> EVENT_TRACE_FILE_MODE_CIRCULAR o <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong> (0x00000002) | Scrive gli eventi in un file di log. Quando il file raggiunge la dimensione massima, gli eventi meno recenti vengono sostituiti con gli eventi in ingresso. Si noti che il contenuto del file di log circolare potrebbe non essere in ordine nei computer multiprocessore.<br /> Non usare <strong>con</strong>EVENT_TRACE_FILE_MODE_APPEND , <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>o <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong>.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_APPEND</strong> (0x00000004) | Aggiunge eventi a un file di log sequenziale esistente. Se il file non esiste, viene creato. Usare solo se si specifica <a href="wnode-header.md"><strong>l'ora di sistema</strong></a> per la risoluzione dell'orologio. In caso contrario, <a href="/windows/win32/api/evntrace/nf-evntrace-processtrace"><strong>ProcessTrace</strong></a> restituirà eventi con timestamp non corretti. Quando si usa <strong>EVENT_TRACE_FILE_MODE_APPEND</strong>, i valori per <strong>BufferSize</strong>, <strong>NumberOfProcessors</strong>e <strong>ClockType</strong> devono essere specificati in modo esplicito e devono essere gli stessi sia nel logger che nel file da aggiungere.<br /> Non usare <strong>con</strong>EVENT_TRACE_REAL_TIME_MODE , <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong>, <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>o <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong>.<br /><strong>Windows 2000:</strong> Questo valore non è supportato.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong> (0x00000008) | Passa automaticamente a un nuovo file di log quando il file raggiunge le dimensioni massime. Il <strong>membro MaximumFileSize</strong> di <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES</strong></a> deve essere impostato. Il nome file specificato deve essere una stringa formattata, ad esempio la stringa contiene %d, ad esempio c:\test%d.etl. Ogni volta che viene creato un nuovo file, viene incrementato un contatore e viene usato il relativo valore, la stringa formattata viene aggiornata e la stringa risultante viene usata come nome del file.<br /> Questa opzione non è consentita per le sessioni di traccia eventi private e non deve essere usata per le sessioni del logger del kernel NT.<br /> Non usare <strong>con</strong>EVENT_TRACE_FILE_MODE_CIRCULAR , <strong>EVENT_TRACE_FILE_MODE_APPEND</strong> o <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong>.<br /><strong>Windows 2000:</strong> Questo valore non è supportato.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_PREALLOCATE</strong>(0x00000020) | Riserva <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES. MaximumFileSize byte</strong></a> di spazio su disco per il file di log in anticipo. Il file occupa l'intero spazio durante la registrazione, sia per i file di log circolari che per i file di log sequenziali. Quando si arresta la sessione, il file di log viene ridotto alle dimensioni necessarie. È necessario impostare <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES. MaximumFileSize</strong></a>.<br /> Non è possibile utilizzare la modalità per le sessioni di traccia eventi private.<br /><strong>Windows 2000:</strong> Questo valore non è supportato.<br /> | 
| <strong>EVENT_TRACE_NONSTOPPABLE_MODE</strong>(0x00000040) | La sessione di registrazione non può essere arrestata. Questa modalità è supportata solo da Autologger. Questa opzione è supportata in Windows Vista e versioni successive.<br />. | 
| <strong>EVENT_TRACE_SECURE_MODE</strong> (0X00000080) | Limita gli utenti che possono registrare eventi alla sessione a quelli con <a href="/windows/desktop/api/Evntcons/nf-evntcons-eventaccesscontrol"><strong>TRACELOG_LOG_EVENT</strong></a> autorizzazioni. Questa opzione è supportata in Windows Vista e versioni successive.<br /> | 
| <strong>EVENT_TRACE_REAL_TIME_MODE</strong> (0x00000100) | Recapita gli eventi ai consumer in tempo reale. Gli eventi vengono recapitati quando i buffer vengono scaricati, non nel momento in cui il provider scrive l'evento. È consigliabile non abilitare la modalità in tempo reale se non sono presenti consumer che utilizzano gli eventi, perché le chiamate agli eventi di log avranno esito negativo quando i buffer diventano completi. Prima di Windows Vista, se gli eventi non venivano utilizzati, gli eventi venivano eliminati. Non specificare più consumer in tempo reale in un processo in Windows XP o Windows Server 2003. Fare in modo che un thread consumerà gli eventi e distribuirà gli eventi ad altri.<br /><strong>Prima di Windows Vista:</strong> Non usare la modalità in tempo reale perché la frequenza degli eventi supportata è molto inferiore rispetto alla lettura dal file di log (gli eventi possono essere eliminati). Inoltre, l'ordine degli eventi non è garantito nei computer con più processori. La modalità in tempo reale è più adatta per gli eventi di tipo notifica a traffico ridotto.<br /><br /> È possibile combinare questa modalità con altre modalità di file di log. Tuttavia, non usare questa modalità con EVENT_TRACE_PRIVATE_LOGGER_MODE. Si noti che se si combina questa modalità con altre modalità di file di log, i buffer verranno scaricati una volta al secondo, determinando la scrittura di buffer parzialmente riempiti nel file di log. Ad esempio, se si usano 64.000 buffer e la frequenza di registrazione è 1 evento al secondo, il servizio scriverà 64 KB al secondo nel file di log.<br /> | 
| <strong>EVENT_TRACE_DELAY_OPEN_FILE_MODE</strong>(0x00000200) | Questa modalità viene usata per ritardare l'apertura del file di log fino a quando non si verifica un evento. <br /><blockquote><strong>Nota:</strong><br />In Windows Vista o versioni successive, questa modalità non è applicabile non deve essere usata.</blockquote><br /> | 
| <strong>EVENT_TRACE_BUFFERING_MODE</strong> (0x00000400) | Questa modalità scrive gli eventi in un buffer di memoria circolare. Gli eventi scritti oltre le dimensioni totali del buffer evitino gli eventi meno recenti che restano nel buffer. Le dimensioni di questo buffer di memoria sono il prodotto <strong>di MinimumBuffers</strong> e <strong>BufferSize</strong> (vedere <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES</strong></a>). Di conseguenza, qualsiasi buffer che usa <strong>EVENT_TRACE_BUFFERING_MODE</strong> ignorerà il valore <strong>MaximumBuffers.</strong><br /> Gli eventi non vengono scritti in un file di log o recapitati in tempo reale e ETW non scarica i buffer. Per ottenere uno snapshot del buffer, chiamare la <a href="/windows/win32/api/evntrace/nf-evntrace-flushtracea"><strong>funzione FlushTrace.</strong></a><br /> Questa modalità è particolarmente utile per il debug dei driver di dispositivo insieme alla possibilità di visualizzare il contenuto dei buffer in memoria con l'estensione del debugger del kernel <a href="/windows-hardware/drivers/devtest/trace-session">WMITrace.</a><br /> Non usare con <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong>, <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong>, <strong>EVENT_TRACE_FILE_MODE_APPEND</strong>, <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>o <strong>EVENT_TRACE_REAL_TIME_MODE</strong>.<br /> | 
| <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong> (0x00000800) | Crea una sessione di traccia eventi in modalità utente che viene eseguita nello stesso processo del provider di traccia eventi. La memoria per i buffer proviene dalla memoria del processo. I processi che non richiedono dati dal kernel possono eliminare l'overhead associato alle transizioni in modalità kernel usando una sessione di traccia eventi privata.<br /> Se il provider è registrato da più processi, ETW aggiunge l'identificatore del processo al nome del file di log per creare un nome file di log univoco. Ad esempio, se il controller specifica i nomi dei file di log come c:\mylogs\myprivatelog.etl, ETW crea il file di log come c:\mylogs\myprivatelog.etl_nnnn, dove nnnn è l'identificatore del processo. L'identificatore di processo non viene aggiunto al primo processo che registra il provider, ma solo ai processi successivi che registrano il provider.<br /> Le sessioni di traccia eventi private presentano le limitazioni seguenti:<br /><ul><li>Una sessione privata può registrare eventi solo per i thread del processo in cui è in esecuzione.</li><li>Possono essere presenti fino a otto sessioni private per processo.</li><li>Le sessioni private non possono essere usate con il recapito in tempo reale.</li><li>Gli eventi generati da una sessione privata non includono il tempo di esecuzione per le istruzioni in modalità kernel e in modalità utente o i dettagli a livello di thread del tempo CPU usato.</li></ul>I filtri ID processo e i filtri dei nomi eseguibili possono ora essere passati alle API di controllo della sessione quando vengono avviati logger privati a livello di sistema. Per ottenere risultati ottimali in scenari tra processi, gli stessi filtri devono essere passati a ogni operazione di controllo durante la sessione, incluse le chiamate di abilitazione/diasabilitazione del provider. Si noti che i filtri hanno lo stesso formato di quelli utilizzati da <a href="/windows/win32/api/evntrace/nf-evntrace-enabletraceex2"><strong>EnableTraceEx2.</strong></a> <br /> È possibile usare questa modalità in combinazione con la <strong>EVENT_TRACE_PRIVATE_IN_PROC</strong> predefinita.<br /><strong>Prima di Windows 10, versione 1703:</strong> Solo LocalSystem, l'amministratore e gli utenti del gruppo di amministratori eseguiti in un processo con privilegi elevati possono creare una sessione privata. Se si include il flag <strong>EVENT_TRACE_PRIVATE_IN_PROC,</strong> qualsiasi utente può creare una sessione privata in-process. Inoltre, nelle versioni precedenti di Windows, può essere presente una sola sessione privata per processo (a meno che non venga specificata anche la modalità EVENT_TRACE_PRIVATE_IN_PROC, nel qual caso è possibile creare fino a tre sessioni private in-process). <br /><strong>Prima di Windows Vista:</strong> Gli utenti del gruppo Performance Log Users possono anche creare una sessione privata.<br /><br /> Non usare con EVENT_TRACE_REAL_TIME_MODE.<br /><strong>Prima di Windows 7 e Windows Server 2008 R2:</strong> Non usare con EVENT_TRACE_FILE_MODE_NEWFILE.<br /> | 
| <strong>EVENT_TRACE_ADD_HEADER_MODE</strong>(0x00001000) | Questa opzione aggiunge un'intestazione al file di log.<br /><blockquote><strong>Nota:</strong><br />In Windows Vista o versioni successive, questa modalità non è applicabile non deve essere usata.</blockquote><br /> | 
| <strong>EVENT_TRACE_USE_KBYTES_FOR_SIZE</strong>(0x00002000) | Usare kilobyte come unità di misura per specificare le dimensioni di un file. L'unità di misura predefinita è megabyte. Questa modalità si applica al valore del Registro di sistema <strong>MaxFileSize</strong> per una <a href="configuring-and-starting-an-autologger-session.md">sessione autologger</a> e al membro <strong>MaximumFileSize</strong> <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>di EVENT_TRACE_PROPERTIES</strong></a>. Questa opzione è supportata in Windows Vista e versioni successive.<br /> | 
| <strong>EVENT_TRACE_USE_GLOBAL_SEQUENCE</strong>(0x00004000) | Usa numeri di sequenza univoci tra le sessioni di traccia eventi. Questa modalità si applica solo agli eventi registrati tramite <a href="/windows/win32/api/evntrace/nf-evntrace-tracemessage"><strong>la funzione TraceMessage.</strong></a> Per altre informazioni, vedere <strong>TraceMessage per informazioni</strong> dettagliate sull'utilizzo.<br /><strong>EVENT_TRACE_USE_GLOBAL_SEQUENCE</strong> e <strong>EVENT_TRACE_USE_LOCAL_SEQUENCE</strong> si escludono a vicenda.<br /><strong>Windows 2000:</strong> Questo valore non è supportato.<br /> | 
| <strong>EVENT_TRACE_USE_LOCAL_SEQUENCE</strong> (0x00008000) | Utilizza numeri di sequenza univoci solo per una singola sessione di traccia eventi. Questa modalità si applica solo agli eventi registrati tramite <a href="/windows/win32/api/evntrace/nf-evntrace-tracemessage"><strong>la funzione TraceMessage.</strong></a> Per altre informazioni, vedere <strong>TraceMessage per informazioni</strong> dettagliate sull'utilizzo.<br /><strong>EVENT_TRACE_USE_GLOBAL_SEQUENCE</strong> e <strong>EVENT_TRACE_USE_LOCAL_SEQUENCE</strong> si escludono a vicenda.<br /><strong>Windows 2000:</strong> Questo valore non è supportato.<br /> | 
| <strong>EVENT_TRACE_RELOG_MODE</strong> (0x00010000) | Registra l'evento senza includere <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_header"><strong>EVENT_TRACE_HEADER</strong></a>.<blockquote><strong>Nota:</strong><br />Questa modalità non deve essere utilizzata. È riservato per uso interno.</blockquote><br /><strong>Windows 2000:</strong> Questo valore non è supportato.<br /> | 
| <strong>EVENT_TRACE_PRIVATE_IN_PROC</strong> (0x00020000) | Usare insieme alla modalità <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong> per avviare una sessione privata. Questa modalità impone che solo il processo che ha registrato il GUID del provider possa avviare la sessione del logger con tale GUID.<br /> È possibile creare fino a tre sessioni private in-process per processo.<br /> Questa opzione è supportata in Windows Vista e versioni successive.<br /> | 
| <strong>EVENT_TRACE_MODE_RESERVED</strong>(0x00100000) | Questa opzione viene usata per segnalare l'heap e la traccia delle sezioni critiche. Questa opzione è supportata in Windows Vista e versioni successive.<br /> | 
| <strong>EVENT_TRACE_STOP_ON_HYBRID_SHUTDOWN</strong>(0x00400000) | Questa opzione arresta la registrazione all'arresto ibrido. Se non <strong>EVENT_TRACE_STOP_ON_HYBRID_SHUTDOWN</strong> o <strong>EVENT_TRACE_PERSIST_ON_HYBRID_SHUTDOWN</strong> specificato, ETW sceglierà un valore predefinito a seconda che il chiamante sessione 0 o meno. Questa opzione è supportata in Windows 8 e Windows Server 2012. <br /> | 
| <strong>EVENT_TRACE_PERSIST_ON_HYBRID_SHUTDOWN</strong>(0x00800000) | Questa opzione continua la registrazione all'arresto ibrido. Se non <strong>EVENT_TRACE_STOP_ON_HYBRID_SHUTDOWN</strong> o <strong>EVENT_TRACE_PERSIST_ON_HYBRID_SHUTDOWN</strong> specificato, ETW sceglierà un valore predefinito a seconda che il chiamante sessione 0 o meno. Questa opzione è supportata in Windows 8 e Windows Server 2012. <br /> | 
| <strong>EVENT_TRACE_USE_PAGED_MEMORY</strong> (0x01000000) | Usa la memoria di pagina. Questa impostazione è consigliata in modo che gli eventi non utilizzino la memoria non di pagina. I buffer non di pagina usano memoria non di pagina per lo spazio del buffer. Poiché i buffer non di pagina non vengono mai disapagati, le prestazioni di una sessione di registrazione sono molto prestazioni. L'uso di buffer paginabili richiede meno risorse.<br /> I provider in modalità kernel e i logger di sistema non possono registrare eventi nelle sessioni che specificano questa modalità di registrazione.<br /> Questa modalità viene ignorata <strong>se EVENT_TRACE_PRIVATE_LOGGER_MODE</strong> è impostata.<br /> Non è possibile usare questa modalità con il logger del kernel NT.<br /><strong>Windows 2000:</strong> Questo valore non è supportato.<br /> | 
| <strong>EVENT_TRACE_SYSTEM_LOGGER_MODE</strong>(0x02000000) | Questa opzione riceverà gli eventi da SystemTraceProvider. Se il parametro <strong>LogFileMode</strong> <em>delle</em> proprietà <a href="/windows/win32/api/evntrace/nf-evntrace-starttracea"><strong>StartTrace</strong></a>include questo flag, il logger sarà un logger di sistema. Questa opzione è supportata in Windows 8 e Windows Server 2012. <br /> | 
| <strong>EVENT_TRACE_INDEPENDENT_SESSION_MODE</strong>(0x08000000) | Indica che una sessione di registrazione non deve essere interessata da <a href="/windows/desktop/api/Evntprov/nf-evntprov-eventwrite"><strong>errori EventWrite</strong></a> in altre sessioni. Senza questo flag, se non è possibile pubblicare un evento in una delle sessioni in cui è abilitato un provider, l'evento non verrà pubblicato in nessuna delle sessioni. Quando questo flag è impostato, un errore di scrittura di un evento in una sessione non causerà la restituzione di un codice di errore da parte della funzione <strong>EventWrite</strong> in altre sessioni. <br /> Non usare <strong>con</strong>EVENT_TRACE_PRIVATE_LOGGER_MODE . <br /> Questa opzione è supportata in Windows 8.1, Windows Server 2012 R2 e versioni successive.<br /> | 
| <strong>EVENT_TRACE_NO_PER_PROCESSOR_BUFFERING</strong> (0x10000000) | Scrive gli eventi registrati in processori diversi in un buffer comune. L'uso di questa modalità consente di eliminare il problema degli eventi visualizzati non in ordine quando gli eventi vengono pubblicati su processori diversi usando l'ora di sistema. Questa modalità può anche eliminare il problema con i log circolari visualizzati per eliminare gli eventi in più computer con processore.<br /> Se non si usa questa modalità e si usa l'ora di sistema, gli eventi potrebbero apparire non in ordine in più computer con processore. Ciò è dovuto al fatto che i buffer ETW sono associati a un processore anziché a un thread. Di conseguenza, se un thread viene passato da una CPU a un'altra, il buffer associato alla seconda CPU può essere scaricato su disco prima di quello associato alla CPU precedente.<br /> Se si prevede un volume elevato di eventi(ad esempio, più di 1.000 eventi al secondo), non è consigliabile usare questa modalità.<br /> Si noti che il numero del processore non è incluso nell'evento .<br /> Questa opzione è supportata in Windows 7, Windows Server 2008 R2 e versioni successive.<br /> | 
| <strong>EVENT_TRACE_ADDTO_TRIAGE_DUMP</strong>(0x80000000) | Questa opzione aggiunge buffer ETW ai dump di analisi. Questa opzione è supportata in Windows 8 e Windows Server 2012. <br /> | 

