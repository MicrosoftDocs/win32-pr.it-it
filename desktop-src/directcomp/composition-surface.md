---
title: Superficie di composizione
description: Questo argomento descrive i tipi di superfici supportate da Microsoft DirectComposition.
ms.assetid: E19B4F0E-1CFA-4E93-BB6A-BFB701BC72CA
keywords:
- superficie di composizione
- Superficie logica DirectComposition
- Superficie virtuale DirectComposition
- aggiornamento di una superficie logica
- superficie logica, aggiornamento
- taglio di una superficie virtuale
- superficie virtuale, taglio
- Taglia superficie virtuale
- ridimensionamento di una superficie virtuale
- Surace virtuale, ridimensionamento
- Ridimensiona superficie virtuale
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9f4bd30bfbd1de91444b7076184db597cd7a8c82
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104046921"
---
# <a name="composition-surface"></a><span data-ttu-id="13493-114">Superficie di composizione</span><span class="sxs-lookup"><span data-stu-id="13493-114">Composition surface</span></span>

> [!NOTE]
> <span data-ttu-id="13493-115">Per le app in Windows 10, è consigliabile usare le API Windows. UI. Composition anziché DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="13493-115">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="13493-116">Per altre informazioni, vedere [modernizzare l'app desktop usando il livello visivo](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="13493-116">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="13493-117">Questo argomento descrive i tipi di superfici supportate da Microsoft DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="13493-117">This topic describes the types of types of surfaces that Microsoft DirectComposition supports.</span></span>

-   [<span data-ttu-id="13493-118">Superficie logica DirectComposition</span><span class="sxs-lookup"><span data-stu-id="13493-118">DirectComposition logical surface</span></span>](#directcomposition-logical-surface)
    -   [<span data-ttu-id="13493-119">Aggiornamento di una superficie logica</span><span class="sxs-lookup"><span data-stu-id="13493-119">Updating a logical surface</span></span>](#updating-a-logical-surface)
    -   [<span data-ttu-id="13493-120">Sospensione degli aggiornamenti in una superficie logica</span><span class="sxs-lookup"><span data-stu-id="13493-120">Suspending updates to a logical surface</span></span>](#suspending-updates-to-a-logical-surface)
    -   [<span data-ttu-id="13493-121">Ripresa degli aggiornamenti in una superficie logica</span><span class="sxs-lookup"><span data-stu-id="13493-121">Resuming updates to a logical surface</span></span>](#resuming-updates-to-a-logical-surface)
    -   [<span data-ttu-id="13493-122">Fine degli aggiornamenti a una superficie logica</span><span class="sxs-lookup"><span data-stu-id="13493-122">Ending updates to a logical surface</span></span>](#suspending-updates-to-a-logical-surface)
    -   [<span data-ttu-id="13493-123">Esempio di utilizzo di una superficie logica</span><span class="sxs-lookup"><span data-stu-id="13493-123">Example of using a logical surface</span></span>](#example-of-using-a-logical-surface)
-   [<span data-ttu-id="13493-124">Superficie virtuale DirectComposition</span><span class="sxs-lookup"><span data-stu-id="13493-124">DirectComposition virtual surface</span></span>](#directcomposition-virtual-surface)
    -   [<span data-ttu-id="13493-125">Ridimensionamento di una superficie virtuale</span><span class="sxs-lookup"><span data-stu-id="13493-125">Resizing a virtual surface</span></span>](#resizing-a-virtual-surface)
    -   [<span data-ttu-id="13493-126">Taglio di una superficie virtuale</span><span class="sxs-lookup"><span data-stu-id="13493-126">Trimming a virtual surface</span></span>](#trimming-a-virtual-surface)
-   [<span data-ttu-id="13493-127">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="13493-127">Related topics</span></span>](#related-topics)

## <a name="directcomposition-logical-surface"></a><span data-ttu-id="13493-128">Superficie logica DirectComposition</span><span class="sxs-lookup"><span data-stu-id="13493-128">DirectComposition logical surface</span></span>

<span data-ttu-id="13493-129">DirectComposition espone l'oggetto [**IDCompositionSurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionsurface) per rappresentare una superficie di composizione logica.</span><span class="sxs-lookup"><span data-stu-id="13493-129">DirectComposition exposes the [**IDCompositionSurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionsurface) object to represent a logical composition surface.</span></span> <span data-ttu-id="13493-130">DirectComposition espone le API che è possibile usare per creare, aggiornare ed eliminare queste superfici logiche.</span><span class="sxs-lookup"><span data-stu-id="13493-130">DirectComposition exposes APIs that you can use to create, update, and delete these logical surfaces.</span></span> <span data-ttu-id="13493-131">Ogni superficie può essere associata a uno o più oggetti visivi.</span><span class="sxs-lookup"><span data-stu-id="13493-131">Each surface can be associated with one or more visuals.</span></span> <span data-ttu-id="13493-132">Un'applicazione è responsabile della gestione della durata delle superfici logiche.</span><span class="sxs-lookup"><span data-stu-id="13493-132">An application is responsible for managing the lifetime of logical surfaces.</span></span>

### <a name="updating-a-logical-surface"></a><span data-ttu-id="13493-133">Aggiornamento di una superficie logica</span><span class="sxs-lookup"><span data-stu-id="13493-133">Updating a logical surface</span></span>

<span data-ttu-id="13493-134">Un'applicazione può aggiornare una superficie logica chiamando [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) e specificando la dimensione e l'offset del rettangolo sulla superficie logica che l'app vuole aggiornare.</span><span class="sxs-lookup"><span data-stu-id="13493-134">An application can update a logical surface by calling [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) and specifying the size and offset of the rectangle on the logical surface that the app wants to update.</span></span> <span data-ttu-id="13493-135">DirectComposition alloca un rettangolo con le dimensioni specificate, quindi restituisce la superficie e l'offset corrispondente che l'applicazione deve creare o aggiornare.</span><span class="sxs-lookup"><span data-stu-id="13493-135">DirectComposition allocates a rectangle of the specified size, and then returns the surface and the corresponding offset that the application needs to draw or update.</span></span> <span data-ttu-id="13493-136">I limiti del rettangolo di aggiornamento sono associati alle dimensioni della superficie.</span><span class="sxs-lookup"><span data-stu-id="13493-136">The update rectangle’s limits are bound by the surface size.</span></span> <span data-ttu-id="13493-137">Il rettangolo di aggiornamento per una superficie di pixel 40 per 100, ad esempio, può essere fino a (0, 0, 40100).</span><span class="sxs-lookup"><span data-stu-id="13493-137">For example, the update rectangle for a 40-by-100 pixel surface can be up to (0,0,40,100).</span></span> <span data-ttu-id="13493-138">Inoltre, l'area aggiornabile viene applicata da un rettangolo Guard.</span><span class="sxs-lookup"><span data-stu-id="13493-138">Also, the updatable region is enforced by a guard rectangle.</span></span> <span data-ttu-id="13493-139">Poiché può essere presente un solo rettangolo Guard alla volta, è possibile aggiornare una sola superficie logica alla volta.</span><span class="sxs-lookup"><span data-stu-id="13493-139">Because there can be only one guard rectangle at a time, only one logical surface can be updated at a time.</span></span> <span data-ttu-id="13493-140">**BeginDraw** restituisce un codice di errore se [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) o [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) non è stato chiamato dopo una chiamata precedente a **BeginDraw**.</span><span class="sxs-lookup"><span data-stu-id="13493-140">**BeginDraw** returns an error code if [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) or [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) has not been called after a previous call to **BeginDraw**.</span></span> <span data-ttu-id="13493-141">Un'applicazione può aggiungere una chiamata di cui è stato eseguito il commit a **BeginDraw** a un batch, ma non diventa effettiva fino a quando non viene chiamato e sottoposta a commit **EndDraw** .</span><span class="sxs-lookup"><span data-stu-id="13493-141">An application can add a committed call to **BeginDraw** to a batch, but it does not take effect until **EndDraw** is called and committed.</span></span>

### <a name="suspending-updates-to-a-logical-surface"></a><span data-ttu-id="13493-142">Sospensione degli aggiornamenti in una superficie logica</span><span class="sxs-lookup"><span data-stu-id="13493-142">Suspending updates to a logical surface</span></span>

<span data-ttu-id="13493-143">Un'applicazione che deve aggiornare diverse superfici può chiamare [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) sull'aggiornamento corrente e quindi chiamare [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) per avviare un nuovo aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="13493-143">An application that needs to update different surfaces can call [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) on the current update, and then call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) to begin a new update.</span></span> <span data-ttu-id="13493-144">Microsoft DirectComposition consente più aggiornamenti, ma solo uno può essere attivo alla volta.</span><span class="sxs-lookup"><span data-stu-id="13493-144">Microsoft DirectComposition allows multiple updates, but only one can be active at a time.</span></span> <span data-ttu-id="13493-145">Ciò significa che è necessario chiamare **SuspendDraw** o [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) su una superficie prima di chiamare **BeginDraw** su quello successivo.</span><span class="sxs-lookup"><span data-stu-id="13493-145">This means that you need to call **SuspendDraw** or [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on one surface before calling **BeginDraw** on the next one.</span></span> <span data-ttu-id="13493-146">A differenza di **EndDraw**, un batch di cui è stato eseguito il commit può contenere una superficie che si trova in uno stato **SuspendDraw** , ma tali aggiornamenti non vengono visualizzati sullo schermo finché non viene chiamato **EndDraw** .</span><span class="sxs-lookup"><span data-stu-id="13493-146">Unlike **EndDraw**, a committed batch can contain a surface that is in a **SuspendDraw** state, but such updates won’t be shown on the screen until **EndDraw** is called.</span></span>

### <a name="resuming-updates-to-a-logical-surface"></a><span data-ttu-id="13493-147">Ripresa degli aggiornamenti in una superficie logica</span><span class="sxs-lookup"><span data-stu-id="13493-147">Resuming updates to a logical surface</span></span>

<span data-ttu-id="13493-148">Un'applicazione può riprendere un aggiornamento a una superficie che si trova in uno stato [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) chiamando [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw).</span><span class="sxs-lookup"><span data-stu-id="13493-148">An application can resume an update to a surface that is in a [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) state by calling [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw).</span></span> <span data-ttu-id="13493-149">Questo metodo può essere chiamato solo su una superficie sospesa.</span><span class="sxs-lookup"><span data-stu-id="13493-149">This method can be called only on a suspended surface.</span></span>

### <a name="ending-updates-to-a-logical-surface"></a><span data-ttu-id="13493-150">Fine degli aggiornamenti a una superficie logica</span><span class="sxs-lookup"><span data-stu-id="13493-150">Ending updates to a logical surface</span></span>

<span data-ttu-id="13493-151">La chiamata a [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) e [**commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) è l'unico modo per visualizzare le modifiche dell'aggiornamento bitmap sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="13493-151">Calling [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) and [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) is the only way to see bitmap update changes on the screen.</span></span> <span data-ttu-id="13493-152">Ogni chiamata a **EndDraw** deve avere una chiamata corrispondente a [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) per rimuovere il rettangolo Guard.</span><span class="sxs-lookup"><span data-stu-id="13493-152">Each call to **EndDraw** must have a corresponding call to [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) to remove the guard rectangle.</span></span> <span data-ttu-id="13493-153">La superficie logica mantiene tutti gli aggiornamenti fino a quando non viene chiamato il **commit** .</span><span class="sxs-lookup"><span data-stu-id="13493-153">The logical surface retains all the updates until **Commit** is called.</span></span> <span data-ttu-id="13493-154">È inoltre possibile chiamare **EndDraw** su una superficie che si trova nello stato [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) perché **EndDraw** è un resume/end implicito.</span><span class="sxs-lookup"><span data-stu-id="13493-154">You can also call **EndDraw** on a surface that is in the [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) state because **EndDraw** is an implied resume/end.</span></span> <span data-ttu-id="13493-155">Dopo aver chiamato **EndDraw**, il contenuto aggiornato viene presentato allo schermo e rimosso in modo che la memoria per l'aggiornamento possa essere riutilizzata per un aggiornamento successivo.</span><span class="sxs-lookup"><span data-stu-id="13493-155">After you call **EndDraw**, the updated content is presented to the screen and discarded so that the memory for the update can be reused for a later update.</span></span>

### <a name="example-of-using-a-logical-surface"></a><span data-ttu-id="13493-156">Esempio di utilizzo di una superficie logica</span><span class="sxs-lookup"><span data-stu-id="13493-156">Example of using a logical surface</span></span>

<span data-ttu-id="13493-157">Nell'esempio seguente vengono descritti i passaggi necessari per un'applicazione se è stata creata una struttura ad albero visuale costituita da due oggetti visivi e quindi è necessario aggiornare aree specifiche delle due superfici logiche associate agli oggetti visivi:</span><span class="sxs-lookup"><span data-stu-id="13493-157">The following example describes the steps that an application would take if it created a visual tree consisting of two visuals, and then needed to update specific regions of the two logical surfaces associated with the visuals:</span></span>

1.  <span data-ttu-id="13493-158">Creare un dispositivo DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="13493-158">Create a DirectComposition device.</span></span>
2.  <span data-ttu-id="13493-159">Creare la struttura ad albero visuale costituita da un nodo radice e dagli oggetti visivi 1 e 2.</span><span class="sxs-lookup"><span data-stu-id="13493-159">Create the visual tree consisting of a root node and visuals 1 and 2.</span></span>
3.  <span data-ttu-id="13493-160">Creare le superfici logiche 1 e 2.</span><span class="sxs-lookup"><span data-stu-id="13493-160">Create logical surfaces 1 and 2.</span></span>
4.  <span data-ttu-id="13493-161">Chiamare il [**contenuto**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcontent) per associare una superficie logica agli oggetti visivi 1 e 2.</span><span class="sxs-lookup"><span data-stu-id="13493-161">Call [**SetContent**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcontent) to associate a logical surface with visuals 1 and 2.</span></span>
5.  <span data-ttu-id="13493-162">Chiamare [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) su un rettangolo secondario della superficie logica 1.</span><span class="sxs-lookup"><span data-stu-id="13493-162">Call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) on a sub-rectangle of logical surface 1.</span></span>
6.  <span data-ttu-id="13493-163">Aggiornare la superficie in corrispondenza dell'offset restituito da DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="13493-163">Update the surface at the offset returned by DirectComposition.</span></span>
7.  <span data-ttu-id="13493-164">Passaggi facoltativi:</span><span class="sxs-lookup"><span data-stu-id="13493-164">Optional steps:</span></span>
    1.  <span data-ttu-id="13493-165">Chiamare [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) sulla superficie logica 1.</span><span class="sxs-lookup"><span data-stu-id="13493-165">Call [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) on logical surface 1.</span></span>
    2.  <span data-ttu-id="13493-166">Chiamare [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) su Sub-Rect della superficie logica 2.</span><span class="sxs-lookup"><span data-stu-id="13493-166">Call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) on sub-rect of logical surface 2.</span></span>
    3.  <span data-ttu-id="13493-167">Aggiornare la superficie in corrispondenza dell'offset restituito da DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="13493-167">Update the surface at the offset returned by DirectComposition.</span></span>
    4.  <span data-ttu-id="13493-168">Chiamare [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) sulla superficie logica 2.</span><span class="sxs-lookup"><span data-stu-id="13493-168">Call [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on logical surface 2.</span></span>
    5.  <span data-ttu-id="13493-169">Chiamare [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) sulla superficie logica 1.</span><span class="sxs-lookup"><span data-stu-id="13493-169">Call [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) on logical surface 1.</span></span>
8.  <span data-ttu-id="13493-170">Aggiornare la superficie in corrispondenza dell'offset restituito da DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="13493-170">Update the surface at the offset returned by DirectComposition.</span></span>
9.  <span data-ttu-id="13493-171">Chiamare [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) sulla superficie logica 1.</span><span class="sxs-lookup"><span data-stu-id="13493-171">Call [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on logical surface 1.</span></span>
10. <span data-ttu-id="13493-172">Chiamare [**commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span><span class="sxs-lookup"><span data-stu-id="13493-172">Call [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span></span>

## <a name="directcomposition-virtual-surface"></a><span data-ttu-id="13493-173">Superficie virtuale DirectComposition</span><span class="sxs-lookup"><span data-stu-id="13493-173">DirectComposition virtual surface</span></span>

<span data-ttu-id="13493-174">DirectComposition espone l'interfaccia [**IDCompositionVirtualSurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionvirtualsurface) per rappresentare una superficie virtuale, ovvero una raccolta di superfici logiche (riquadri) disposti in una griglia fissa con riquadri di dimensioni fisse.</span><span class="sxs-lookup"><span data-stu-id="13493-174">DirectComposition exposes the [**IDCompositionVirtualSurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionvirtualsurface) interface to represent a virtual surface, which is a collection of logical surfaces (tiles) arranged in a fixed grid with tiles of a fixed size.</span></span> <span data-ttu-id="13493-175">L'applicazione specifica la dimensione della trama virtuale al momento della creazione.</span><span class="sxs-lookup"><span data-stu-id="13493-175">The application specifies the size of the virtual texture at creation time.</span></span> <span data-ttu-id="13493-176">La dimensione stabilisce i limiti per la superficie virtuale.</span><span class="sxs-lookup"><span data-stu-id="13493-176">The size establishes the boundaries for the virtual surface.</span></span> <span data-ttu-id="13493-177">La superficie può essere associata a uno o più oggetti visivi.</span><span class="sxs-lookup"><span data-stu-id="13493-177">The surface can be associated with one or more visuals.</span></span>

<span data-ttu-id="13493-178">Quando una superficie virtuale viene inizializzata, non è supportata dalle allocazioni effettive.</span><span class="sxs-lookup"><span data-stu-id="13493-178">When a virtual surface is initialized, it is not backed by actual allocations.</span></span> <span data-ttu-id="13493-179">In altre parole, non tiene alcun bit.</span><span class="sxs-lookup"><span data-stu-id="13493-179">In other words, it doesn’t hold any bits.</span></span> <span data-ttu-id="13493-180">DirectComposition alloca i riquadri, ovvero gli oggetti superficie di composizione, dopo che l'applicazione inizia ad aggiornare la superficie.</span><span class="sxs-lookup"><span data-stu-id="13493-180">DirectComposition allocates tiles (that is, composition surface objects) after the application starts updating the surface.</span></span> <span data-ttu-id="13493-181">L'applicazione aggiorna la superficie virtuale chiamando [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) e specificando l'area di interesse rispetto alle coordinate della superficie virtuale.</span><span class="sxs-lookup"><span data-stu-id="13493-181">The application updates the virtual surface by calling [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) and specifying the region of interest with respect to the coordinates of the virtual surface.</span></span> <span data-ttu-id="13493-182">Quindi, DirectComposition alloca i riquadri necessari per conservare l'aggiornamento e restituisce la superficie di composizione e l'offset da aggiornare.</span><span class="sxs-lookup"><span data-stu-id="13493-182">Then, DirectComposition allocates the necessary tiles to hold the update, and returns the composition surface and offset to update.</span></span>

<span data-ttu-id="13493-183">Come per le superfici logiche, è possibile chiamare [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw), [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw), [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) e [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) su una superficie virtuale.</span><span class="sxs-lookup"><span data-stu-id="13493-183">As with logical surfaces, you can call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw), [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw), [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) and [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on a virtual surface.</span></span> <span data-ttu-id="13493-184">DirectComposition espone inoltre i metodi che è possibile usare per ridimensionare e tagliare una superficie virtuale esistente.</span><span class="sxs-lookup"><span data-stu-id="13493-184">In addition, DirectComposition exposes methods that you can use to resize and trim an existing virtual surface.</span></span>

### <a name="resizing-a-virtual-surface"></a><span data-ttu-id="13493-185">Ridimensionamento di una superficie virtuale</span><span class="sxs-lookup"><span data-stu-id="13493-185">Resizing a virtual surface</span></span>

<span data-ttu-id="13493-186">Il metodo [**Resize**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-resize) modifica i limiti della superficie virtuale, ovvero tutti i nuovi aggiornamenti o allocazioni devono rientrare nei limiti impostati dalle nuove dimensioni.</span><span class="sxs-lookup"><span data-stu-id="13493-186">The [**Resize**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-resize) method changes the boundaries of the virtual surface, meaning that any new updates or allocations must fall in the boundaries set by the new size.</span></span> <span data-ttu-id="13493-187">Un'applicazione usa **Resize** per indicare a DirectComposition che una determinata area della superficie virtuale non è più necessaria e può essere recuperata.</span><span class="sxs-lookup"><span data-stu-id="13493-187">An application uses **Resize** to tell DirectComposition that a particular region of the virtual surface is no longer needed and can be reclaimed.</span></span> <span data-ttu-id="13493-188">Se **Resize** compatta la superficie virtuale, l'applicazione non potrà più aggiornare le aree esterne ai nuovi limiti.</span><span class="sxs-lookup"><span data-stu-id="13493-188">If **Resize** shrinks the virtual surface, the application can no longer update the regions outside the new boundaries.</span></span>

<span data-ttu-id="13493-189">Nell'illustrazione seguente viene mostrata una superficie virtuale 3 per 3 ridimensionata a 2 per 2.</span><span class="sxs-lookup"><span data-stu-id="13493-189">The following illustration shows a 3-by-3 virtual surface resized to 2-by-2.</span></span> <span data-ttu-id="13493-190">L'area rossa rappresenta i riquadri eliminati come parte dell'operazione di ridimensionamento e la memoria viene recuperata da DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="13493-190">The red region represents tiles that are discarded as part of the resize operation, and the memory is reclaimed by DirectComposition.</span></span> <span data-ttu-id="13493-191">Dopo il ridimensionamento, l'applicazione non può apportare aggiornamenti all'area rossa senza ridimensionare nuovamente la superficie virtuale.</span><span class="sxs-lookup"><span data-stu-id="13493-191">After the resize, the application can't make updates to the red region without resizing the virtual surface again.</span></span>

![<span data-ttu-id="13493-192">ridimensionamento di una superficie virtuale</span><span class="sxs-lookup"><span data-stu-id="13493-192">resizing a virtual surface</span></span> ](images/resize-virtual-surface.png)

<span data-ttu-id="13493-193">L'operazione di ridimensionamento ha effetto immediato.</span><span class="sxs-lookup"><span data-stu-id="13493-193">The resize operation takes effect immediately.</span></span> <span data-ttu-id="13493-194">DirectComposition non attende che l'applicazione chiami [**commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) per apportare aggiornamenti di ridimensionamento.</span><span class="sxs-lookup"><span data-stu-id="13493-194">DirectComposition doesn't wait for the application to call [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) to make the resize updates.</span></span> <span data-ttu-id="13493-195">Si supponga, ad esempio, che un'applicazione effettua la seguente sequenza di chiamate.</span><span class="sxs-lookup"><span data-stu-id="13493-195">For example, suppose an application makes the following sequence of calls.</span></span>


```
pVirtualSurface->Resize(0, 0);
pVirtualSurface->Resize(INT_MAX, INT_MAX);
pDevice->Commit();
```



<span data-ttu-id="13493-196">In questo esempio, l'applicazione perde tutto il contenuto al primo ridimensionamento.</span><span class="sxs-lookup"><span data-stu-id="13493-196">In this example, the application loses all content on the first resize.</span></span> <span data-ttu-id="13493-197">Il secondo ridimensionamento non ha alcun effetto anche se è stato chiamato prima del [**commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span><span class="sxs-lookup"><span data-stu-id="13493-197">The second resize has no effect even though it was called before [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span></span> <span data-ttu-id="13493-198">In questo caso non viene visualizzato nulla sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="13493-198">In this case nothing shows on the screen.</span></span>

### <a name="trimming-a-virtual-surface"></a><span data-ttu-id="13493-199">Taglio di una superficie virtuale</span><span class="sxs-lookup"><span data-stu-id="13493-199">Trimming a virtual surface</span></span>

<span data-ttu-id="13493-200">Il metodo [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) identifica l'area della superficie virtuale necessaria per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="13493-200">The [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) method identifies the region of the virtual surface that the application needs.</span></span> <span data-ttu-id="13493-201">Non ridimensiona i limiti della superficie virtuale, ma indica a DirectComposition quali superfici logiche è attualmente necessario allocare.</span><span class="sxs-lookup"><span data-stu-id="13493-201">It doesn't resize the boundaries of the virtual surface, but it does tell DirectComposition which logical surfaces currently need to be allocated.</span></span>

<span data-ttu-id="13493-202">Nella figura seguente il quadrato verde è il viewport dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="13493-202">In the following illustration, the green square is the application’s viewport.</span></span> <span data-ttu-id="13493-203">L'applicazione esegue inizialmente il rendering dei primi sei riquadri (blu) della superficie virtuale (grigio chiaro) presenti nel viewport.</span><span class="sxs-lookup"><span data-stu-id="13493-203">The application initially renders to the first six tiles (blue) of the virtual surface (light gray) that are in the viewport.</span></span> <span data-ttu-id="13493-204">Quando la pagina rappresentata dalla superficie virtuale scorre, l'applicazione deve eseguire il rendering degli ultimi sei riquadri.</span><span class="sxs-lookup"><span data-stu-id="13493-204">As the page that is represented by the virtual surface scrolls, the application needs to render the last six tiles.</span></span> <span data-ttu-id="13493-205">L'applicazione chiama [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) per indicare che l'area definita dagli ultimi sei riquadri è la posizione in cui si trova il contenuto e il resto non è necessario al momento.</span><span class="sxs-lookup"><span data-stu-id="13493-205">The application calls [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) to indicate that the region defined by the last six tiles is where the content is, and the rest is not needed at the moment.</span></span> <span data-ttu-id="13493-206">DirectComposition può quindi scegliere di riciclare le superfici logiche che originariamente rappresentavano i primi sei riquadri (grigio scuro).</span><span class="sxs-lookup"><span data-stu-id="13493-206">DirectComposition can then choose to recycle the logical surfaces that originally represented the first six tiles (dark gray).</span></span>

![taglio di una superficie virtuale](images/trim-virtual-surface.png)

## <a name="related-topics"></a><span data-ttu-id="13493-208">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="13493-208">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="13493-209">Concetti di DirectComposition</span><span class="sxs-lookup"><span data-stu-id="13493-209">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 