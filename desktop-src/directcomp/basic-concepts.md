---
title: Concetti di base (DirectComposition)
description: Questo argomento fornisce una panoramica dei concetti di base di Microsoft DirectComposition.
ms.assetid: F442BDCA-C913-4438-BFFA-D3F28B68EE85
keywords:
- Concetti di DirectComposition
- Concetti di base di DirectComposition
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0550dc12cb0dcc5262701658d8e3883ee1ce8d82
ms.sourcegitcommit: 73417d55867c804274a55abe5ca71bcba7006119
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/20/2020
ms.locfileid: "104559680"
---
# <a name="basic-concepts"></a><span data-ttu-id="e6009-105">Concetti fondamentali</span><span class="sxs-lookup"><span data-stu-id="e6009-105">Basic concepts</span></span>

> [!NOTE]
> <span data-ttu-id="e6009-106">Per le app in Windows 10, è consigliabile usare le API Windows. UI. Composition anziché DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="e6009-106">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="e6009-107">Per altre informazioni, vedere [modernizzare l'app desktop usando il livello visivo](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="e6009-107">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="e6009-108">Questo argomento fornisce una panoramica dei concetti di base di Microsoft DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="e6009-108">This topic provides an overview of the basic concepts of Microsoft DirectComposition.</span></span> <span data-ttu-id="e6009-109">Contiene le sezioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="e6009-109">It contains the following sections:</span></span>

-   [<span data-ttu-id="e6009-110">Composizione</span><span class="sxs-lookup"><span data-stu-id="e6009-110">Composition</span></span>](#composition-target-window)
-   [<span data-ttu-id="e6009-111">Oggetti visivi</span><span class="sxs-lookup"><span data-stu-id="e6009-111">Visuals</span></span>](#visuals)
    -   [<span data-ttu-id="e6009-112">Struttura ad albero visuale</span><span class="sxs-lookup"><span data-stu-id="e6009-112">Visual tree</span></span>](#visual-tree)
    -   [<span data-ttu-id="e6009-113">Proprietà di un oggetto visivo</span><span class="sxs-lookup"><span data-stu-id="e6009-113">Properties of a visual object</span></span>](#properties-of-a-visual-object)
-   [<span data-ttu-id="e6009-114">Oggetto dispositivo</span><span class="sxs-lookup"><span data-stu-id="e6009-114">Device object</span></span>](#device-object)
-   [<span data-ttu-id="e6009-115">Finestra di destinazione composizione</span><span class="sxs-lookup"><span data-stu-id="e6009-115">Composition target window</span></span>](#composition-target-window)
-   [<span data-ttu-id="e6009-116">Composizione transazionale</span><span class="sxs-lookup"><span data-stu-id="e6009-116">Transactional composition</span></span>](#transactional-composition)
    -   [<span data-ttu-id="e6009-117">Batch</span><span class="sxs-lookup"><span data-stu-id="e6009-117">Batching</span></span>](#batching)
    -   [<span data-ttu-id="e6009-118">Sincronizzazione</span><span class="sxs-lookup"><span data-stu-id="e6009-118">Synchronization</span></span>](#synchronization)
    -   [<span data-ttu-id="e6009-119">Alberi visivi tra dispositivi</span><span class="sxs-lookup"><span data-stu-id="e6009-119">Cross-device visual trees</span></span>](#cross-device-visual-trees)
-   [<span data-ttu-id="e6009-120">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="e6009-120">Related topics</span></span>](#related-topics)

## <a name="composition"></a><span data-ttu-id="e6009-121">Composizione</span><span class="sxs-lookup"><span data-stu-id="e6009-121">Composition</span></span>

<span data-ttu-id="e6009-122">DirectComposition definisce una *composizione* come raccolta di bitmap combinate e modificate applicando varie trasformazioni, effetti e animazioni per produrre un risultato visivo in un'interfaccia utente dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e6009-122">DirectComposition defines a *composition* as a collection of bitmaps that are combined and manipulated by applying various transforms, effects, and animations to produce a visual result in an application UI.</span></span> <span data-ttu-id="e6009-123">DirectComposition funziona solo con contenuto bitmap. non supporta vettori o testo.</span><span class="sxs-lookup"><span data-stu-id="e6009-123">DirectComposition works with bitmap content only; it does not support vectors or text.</span></span> <span data-ttu-id="e6009-124">DirectComposition non fornisce contenuto bitmap.</span><span class="sxs-lookup"><span data-stu-id="e6009-124">DirectComposition does not provide bitmap content.</span></span> <span data-ttu-id="e6009-125">Fornisce invece interfacce in cui gli utenti possono creare con D2D, DXGI o caricare il proprio contenuto di trama.</span><span class="sxs-lookup"><span data-stu-id="e6009-125">Instead it provides interfaces in which users can draw with D2D, DXGI, or upload their own texture content.</span></span>

<span data-ttu-id="e6009-126">Un'applicazione DirectComposition crea due set di oggetti per comporre una scena: bitmap composte insieme e oggetti visivi che definiscono le relazioni spaziali tra le bitmap.</span><span class="sxs-lookup"><span data-stu-id="e6009-126">A DirectComposition application creates two sets of objects to compose a scene: bitmaps that are composed together, and visuals that define the spatial relationships among the bitmaps.</span></span> <span data-ttu-id="e6009-127">Per ulteriori informazioni sugli oggetti bitmap supportati da DirectComposition, vedere [oggetti bitmap](bitmap-surfaces.md).</span><span class="sxs-lookup"><span data-stu-id="e6009-127">For more information about the bitmap objects supported by DirectComposition, see [Bitmap objects](bitmap-surfaces.md).</span></span>

## <a name="visuals"></a><span data-ttu-id="e6009-128">Oggetti visivi</span><span class="sxs-lookup"><span data-stu-id="e6009-128">Visuals</span></span>

<span data-ttu-id="e6009-129">Gli oggetti *visivi* (o *oggetti visivi*) sono gli elementi fondamentali di DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="e6009-129">*Visuals* (or *visual objects*) are the fundamental elements of DirectComposition.</span></span> <span data-ttu-id="e6009-130">Si tratta dei blocchi predefiniti di base usati per creare composizioni e animazioni nell'interfaccia utente dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e6009-130">They are the basic building blocks that you use to create compositions and animations in your application UI.</span></span>

<span data-ttu-id="e6009-131">In termini di programmazione, un oggetto visivo è un oggetto che dispone di un set di proprietà ed espone un'interfaccia utilizzata per impostare il valore delle proprietà.</span><span class="sxs-lookup"><span data-stu-id="e6009-131">In programming terms, a visual is an object that has a set of properties, and exposes an interface that you use to set the value of the properties.</span></span> <span data-ttu-id="e6009-132">La proprietà Content di un oggetto visivo associa una particolare bitmap all'oggetto visivo, mentre altre proprietà controllano il modo in cui DirectComposition posiziona e modifica l'oggetto visivo mentre viene sottoposto a rendering sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="e6009-132">A visual's Content property associates a particular bitmap with the visual, while other properties control how DirectComposition positions and manipulates the visual as it is rendered to the screen.</span></span>

<span data-ttu-id="e6009-133">Per ulteriori informazioni, vedere [proprietà di un oggetto visivo](#properties-of-a-visual-object).</span><span class="sxs-lookup"><span data-stu-id="e6009-133">For more information, see [Properties of a Visual](#properties-of-a-visual-object).</span></span>

### <a name="visual-tree"></a><span data-ttu-id="e6009-134">Struttura ad albero visuale</span><span class="sxs-lookup"><span data-stu-id="e6009-134">Visual tree</span></span>

<span data-ttu-id="e6009-135">DirectComposition crea una composizione da una raccolta gerarchica di oggetti visivi denominata *struttura ad albero visuale*.</span><span class="sxs-lookup"><span data-stu-id="e6009-135">DirectComposition creates a composition from a hierarchical collection of visual objects called a *visual tree*.</span></span> <span data-ttu-id="e6009-136">L'oggetto visivo alla radice di un albero è denominato oggetto *visivo radice* e può essere associato a uno o più oggetti *visivi figlio* .</span><span class="sxs-lookup"><span data-stu-id="e6009-136">The visual at the root of a tree is called the *root visual* and it can have one or more *child visuals* associated with it.</span></span> <span data-ttu-id="e6009-137">Un oggetto visivo figlio può avere uno o più oggetti visivi figlio.</span><span class="sxs-lookup"><span data-stu-id="e6009-137">A child visual can have one or more child visuals of its own.</span></span> <span data-ttu-id="e6009-138">Tutti gli oggetti visivi associati agli oggetti visivi figlio vengono chiamati oggetti *visivi padre* e tutti gli oggetti visivi figlio che condividono lo stesso elemento padre vengono chiamati oggetti *visivi di pari livello*.</span><span class="sxs-lookup"><span data-stu-id="e6009-138">Any visual that has associated child visuals is called a *parent visual*, and all child visuals that share the same parent are called *sibling visuals*.</span></span> <span data-ttu-id="e6009-139">Un oggetto visivo particolare insieme a tutti gli oggetti visivi figlio e discendente viene definito *sottoalbero visuale*.</span><span class="sxs-lookup"><span data-stu-id="e6009-139">A particular visual along with all its child and descendent visuals is called a *visual subtree*.</span></span>

<span data-ttu-id="e6009-140">La posizione di un oggetto visivo nell'albero consente di determinare la posizione dello schermo e l'ordine z rispetto agli altri oggetti visivi nella composizione.</span><span class="sxs-lookup"><span data-stu-id="e6009-140">A visual's location in the tree helps determine its screen position and z-order relative to the other visuals in the composition.</span></span> <span data-ttu-id="e6009-141">L'oggetto visivo radice è posizionato in relazione all'angolo superiore sinistro dell'area client della finestra di destinazione in cui viene eseguito il rendering della composizione.</span><span class="sxs-lookup"><span data-stu-id="e6009-141">The root visual is positioned relative to the upper-left corner of the client area of the target window where the composition is rendered.</span></span> <span data-ttu-id="e6009-142">Tutti gli oggetti visivi figlio sono posizionati in relazione all'angolo superiore sinistro dell'oggetto visivo padre (o all'oggetto visivo specificato dalla proprietà TransformParent) e vengono sempre visualizzati davanti all'elemento padre nell'ordine z.</span><span class="sxs-lookup"><span data-stu-id="e6009-142">All child visuals are positioned relative to the upper-left corner of their parent visual (or the visual specified by the TransformParent property), and always appear in front of their parent in the z-order.</span></span>

<span data-ttu-id="e6009-143">Nella figura seguente viene illustrata una composizione di oggetti visivi e la struttura della struttura ad albero visuale utilizzata per produrre la composizione.</span><span class="sxs-lookup"><span data-stu-id="e6009-143">The following illustration shows a composition of visuals and the structure of the visual tree used to produce the composition.</span></span> <span data-ttu-id="e6009-144">Visual 1 è l'oggetto visivo radice ed è anche il padre degli oggetti visivi figlio 2 e 3, che sono oggetti visivi di pari livello.</span><span class="sxs-lookup"><span data-stu-id="e6009-144">Visual 1 is the root visual and is also the parent of child Visuals 2 and 3, which are sibling visuals.</span></span> <span data-ttu-id="e6009-145">Visual 3 presenta due oggetti visivi figlio, gli oggetti visivi 4 e 5.</span><span class="sxs-lookup"><span data-stu-id="e6009-145">Visual 3 has two child visuals of its own, Visuals 4 and 5.</span></span> <span data-ttu-id="e6009-146">Insieme, gli oggetti visivi da 3 a 5 costituiscono un sottoalbero visuale.</span><span class="sxs-lookup"><span data-stu-id="e6009-146">Together, Visuals 3 through 5 make up a visual subtree.</span></span>

![composizione di oggetti visivi e della struttura ad albero visuale corrispondente](images/visuals-and-corresponding-tree.png)

<span data-ttu-id="e6009-148">Un oggetto visivo padre gestisce un elenco ordinato di oggetti visivi figlio.</span><span class="sxs-lookup"><span data-stu-id="e6009-148">A parent visual maintains an ordered list of its child visuals.</span></span> <span data-ttu-id="e6009-149">Quando gli oggetti visivi di pari livello vengono posizionati in modo che si sovrappongano tra loro, DirectComposition imposta l'ordine z degli elementi di pari livello in base all'ordine in cui vengono visualizzati nell'elenco elementi figlio dell'oggetto visivo padre.</span><span class="sxs-lookup"><span data-stu-id="e6009-149">When sibling visuals are positioned such that they overlap one another, DirectComposition sets the z-order of the siblings based on the order in which they appear in the parent visual's children list.</span></span> <span data-ttu-id="e6009-150">Un elemento di pari livello visualizzato più avanti nell'elenco viene inserito davanti a tutti gli elementi di pari livello indicati in precedenza nell'elenco.</span><span class="sxs-lookup"><span data-stu-id="e6009-150">A sibling that appears later in the list is placed in front of all siblings that appear earlier in the list.</span></span> <span data-ttu-id="e6009-151">Nella figura seguente viene illustrato l'ordine z degli oggetti visivi figlio sovrapposti.</span><span class="sxs-lookup"><span data-stu-id="e6009-151">The following illustration shows the z-order of overlapping child visuals.</span></span>

![ordine z degli oggetti visivi figlio sovrapposti](images/overlapping-child-visuals.png)

### <a name="properties-of-a-visual-object"></a><span data-ttu-id="e6009-153">Proprietà di un oggetto visivo</span><span class="sxs-lookup"><span data-stu-id="e6009-153">Properties of a visual object</span></span>

<span data-ttu-id="e6009-154">Un oggetto visivo espone un set di proprietà che consentono di impostare il contenuto della bitmap per l'oggetto visivo e di controllare il modo in cui DirectComposition posiziona e manipola il contenuto visivo.</span><span class="sxs-lookup"><span data-stu-id="e6009-154">A visual object exposes a set of properties that enable you to set the bitmap content for the visual, and to control how DirectComposition positions and manipulates the visual content.</span></span> <span data-ttu-id="e6009-155">Nelle sezioni seguenti vengono descritte in dettaglio le singole proprietà.</span><span class="sxs-lookup"><span data-stu-id="e6009-155">The following sections describe each property in detail.</span></span>

-   [<span data-ttu-id="e6009-156">Proprietà di contenuto</span><span class="sxs-lookup"><span data-stu-id="e6009-156">Content property</span></span>](#content-property)
-   [<span data-ttu-id="e6009-157">Clip (proprietà)</span><span class="sxs-lookup"><span data-stu-id="e6009-157">Clip property</span></span>](#clip-property)
-   [<span data-ttu-id="e6009-158">Proprietà BorderMode</span><span class="sxs-lookup"><span data-stu-id="e6009-158">BorderMode property</span></span>](#bordermode-property)
-   [<span data-ttu-id="e6009-159">Proprietà BitmapInterpolationMode</span><span class="sxs-lookup"><span data-stu-id="e6009-159">BitmapInterpolationMode property</span></span>](#bitmapinterpolationmode-property)
-   [<span data-ttu-id="e6009-160">Proprietà CompositeMode</span><span class="sxs-lookup"><span data-stu-id="e6009-160">CompositeMode property</span></span>](#compositemode-property)
-   [<span data-ttu-id="e6009-161">Proprietà OffsetX e OffsetY</span><span class="sxs-lookup"><span data-stu-id="e6009-161">OffsetX and OffsetY properties</span></span>](#offsetx-and-offsety-properties)
-   [<span data-ttu-id="e6009-162">Proprietà Effect</span><span class="sxs-lookup"><span data-stu-id="e6009-162">Effect property</span></span>](#effect-property)
-   [<span data-ttu-id="e6009-163">Transform (proprietà)</span><span class="sxs-lookup"><span data-stu-id="e6009-163">Transform property</span></span>](#transform-property)
-   [<span data-ttu-id="e6009-164">Proprietà TransformParent</span><span class="sxs-lookup"><span data-stu-id="e6009-164">TransformParent property</span></span>](#transformparent-property)

### <a name="content-property"></a><span data-ttu-id="e6009-165">Proprietà di contenuto</span><span class="sxs-lookup"><span data-stu-id="e6009-165">Content property</span></span>

<span data-ttu-id="e6009-166">La proprietà Content di un oggetto visivo specifica il contenuto della bitmap associato all'oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="e6009-166">A visual's Content property specifies the bitmap content that is associated with the visual.</span></span> <span data-ttu-id="e6009-167">Si tratta della bitmap utilizzata da DirectComposition quando si include l'oggetto visivo in una composizione.</span><span class="sxs-lookup"><span data-stu-id="e6009-167">This is the bitmap that DirectComposition uses when you include the visual in a composition.</span></span>

<span data-ttu-id="e6009-168">Per impostare la proprietà Content di un oggetto visivo, chiamare il metodo [**IDCompositionVisual::**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcontent) SetValue.</span><span class="sxs-lookup"><span data-stu-id="e6009-168">You set the Content property of a visual by calling the [**IDCompositionVisual::SetContent**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcontent) method.</span></span>

<span data-ttu-id="e6009-169">Per ulteriori informazioni sui tipi di contenuto bitmap supportati da DirectComposition, vedere [oggetti bitmap](bitmap-surfaces.md).</span><span class="sxs-lookup"><span data-stu-id="e6009-169">For more information about the types of bitmap content supported by DirectComposition, see [Bitmap objects](bitmap-surfaces.md).</span></span>

### <a name="clip-property"></a><span data-ttu-id="e6009-170">Clip (proprietà)</span><span class="sxs-lookup"><span data-stu-id="e6009-170">Clip property</span></span>

<span data-ttu-id="e6009-171">La proprietà clip di un oggetto visivo specifica un'area rettangolare denominata area di *ridimensionamento* (o *rettangolo* di ritaglio).</span><span class="sxs-lookup"><span data-stu-id="e6009-171">The Clip property of a visual specifies a rectangular area called the *clipping region* (or *clip rectangle*).</span></span> <span data-ttu-id="e6009-172">Quando viene eseguito il rendering di un oggetto visivo, viene visualizzata solo la parte dell'oggetto visivo che si trova all'interno dell'area di visualizzazione, mentre qualsiasi contenuto che si estende al di fuori dell'area di visualizzazione viene ritagliato, ovvero non viene visualizzato.</span><span class="sxs-lookup"><span data-stu-id="e6009-172">When a visual is rendered, only the portion of the visual that falls inside the clipping region is displayed, while any content that extends outside the clipping region is clipped (that is, not displayed).</span></span> <span data-ttu-id="e6009-173">DirectComposition supporta le aree di ritaglio con angoli arrotondati o quadrati.</span><span class="sxs-lookup"><span data-stu-id="e6009-173">DirectComposition supports clipping regions that have rounded or squared corners.</span></span>

<span data-ttu-id="e6009-174">Per impostare la proprietà clip di un oggetto visivo, chiamare il metodo [**IDCompositionVisual:: seclip**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(constd2d_rect_f_)) .</span><span class="sxs-lookup"><span data-stu-id="e6009-174">You set the Clip property of a visual by calling the [**IDCompositionVisual::SetClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(constd2d_rect_f_)) method.</span></span>

<span data-ttu-id="e6009-175">Per ulteriori informazioni, vedere [ritaglio](clipping.md).</span><span class="sxs-lookup"><span data-stu-id="e6009-175">For more information, see [Clipping](clipping.md).</span></span>

### <a name="bordermode-property"></a><span data-ttu-id="e6009-176">Proprietà BorderMode</span><span class="sxs-lookup"><span data-stu-id="e6009-176">BorderMode property</span></span>

<span data-ttu-id="e6009-177">La proprietà BorderMode specifica come comporre i bordi delle bitmap e delle clip associate a questo oggetto visivo o con gli oggetti visivi nel sottoalbero radice in questo oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="e6009-177">The BorderMode property specifies how to compose the edges of bitmaps and clips associated with this visual, or with visuals in the subtree rooted at this visual.</span></span>

<span data-ttu-id="e6009-178">La modalità bordo influiscono sul modo in cui vengono composti i bordi di una bitmap quando la bitmap viene trasformata in modo tale che i bordi non siano allineati all'asse con le coordinate di tipo Integer.</span><span class="sxs-lookup"><span data-stu-id="e6009-178">The border mode affects how the edges of a bitmap are composed when the bitmap is transformed such that the edges are not axis-aligned with integer coordinates.</span></span> <span data-ttu-id="e6009-179">Influiscono inoltre sul modo in cui il contenuto viene ritagliato negli angoli di una clip con angoli arrotondati e al bordo di una clip trasformata in modo tale che i bordi non siano allineati all'asse con le coordinate di tipo Integer.</span><span class="sxs-lookup"><span data-stu-id="e6009-179">It also affects how content is clipped at the corners of a clip that has rounded corners, and at the edge of a clip that is transformed such that the edges are not axis-aligned with integer coordinates.</span></span>

<span data-ttu-id="e6009-180">Per ulteriori informazioni, vedere [**IDCompositionVisual:: SetBorderMode**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setbordermode).</span><span class="sxs-lookup"><span data-stu-id="e6009-180">For more information, see [**IDCompositionVisual::SetBorderMode**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setbordermode).</span></span>

### <a name="bitmapinterpolationmode-property"></a><span data-ttu-id="e6009-181">Proprietà BitmapInterpolationMode</span><span class="sxs-lookup"><span data-stu-id="e6009-181">BitmapInterpolationMode property</span></span>

<span data-ttu-id="e6009-182">La proprietà BitmapInterpolationMode indica a DirectComposition come comporre una bitmap quando viene trasformata in modo che non esista una corrispondenza uno-a-uno tra i pixel nella bitmap e i pixel sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="e6009-182">The BitmapInterpolationMode property tells DirectComposition how to compose a bitmap when it is transformed such that there is no one-to-one correspondence between pixels in the bitmap and pixels on the screen.</span></span>

<span data-ttu-id="e6009-183">Per impostare la proprietà BitmapInterpolationMode di un oggetto visivo, chiamare il metodo [**IDCompositionVisual:: SetBitmapInterpolationMode**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setbitmapinterpolationmode) .</span><span class="sxs-lookup"><span data-stu-id="e6009-183">You set the BitmapInterpolationMode property of a visual by calling the [**IDCompositionVisual::SetBitmapInterpolationMode**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setbitmapinterpolationmode) method.</span></span>

### <a name="compositemode-property"></a><span data-ttu-id="e6009-184">Proprietà CompositeMode</span><span class="sxs-lookup"><span data-stu-id="e6009-184">CompositeMode property</span></span>

<span data-ttu-id="e6009-185">La proprietà CompositeMode indica a DirectComposition come unire il contenuto bitmap di un oggetto visivo con la destinazione di rendering.</span><span class="sxs-lookup"><span data-stu-id="e6009-185">The CompositeMode property tells DirectComposition how to blend the bitmap content of a visual with the render target.</span></span> <span data-ttu-id="e6009-186">Per una descrizione delle modalità composite supportate, vedere [**\_ \_ modalità composita DCOMPOSITION**](/windows/desktop/api/DcompTypes/ne-dcomptypes-dcomposition_composite_mode).</span><span class="sxs-lookup"><span data-stu-id="e6009-186">For a description of the supported composite modes, see [**DCOMPOSITION\_COMPOSITE\_MODE**](/windows/desktop/api/DcompTypes/ne-dcomptypes-dcomposition_composite_mode).</span></span>

<span data-ttu-id="e6009-187">Per impostare la proprietà CompositeMode di un oggetto visivo, chiamare il metodo [**IDCompositionVisual:: SetCompositeMode**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcompositemode) .</span><span class="sxs-lookup"><span data-stu-id="e6009-187">You set the CompositeMode property of a visual by calling the [**IDCompositionVisual::SetCompositeMode**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcompositemode) method.</span></span>

### <a name="offsetx-and-offsety-properties"></a><span data-ttu-id="e6009-188">Proprietà OffsetX e OffsetY</span><span class="sxs-lookup"><span data-stu-id="e6009-188">OffsetX and OffsetY properties</span></span>

<span data-ttu-id="e6009-189">Le proprietà OffsetX e OffsetY indicano a DirectComposition dove posizionare un oggetto visivo orizzontalmente e verticalmente.</span><span class="sxs-lookup"><span data-stu-id="e6009-189">The OffsetX and OffsetY properties tell DirectComposition where to position a visual horizontally and vertically.</span></span> <span data-ttu-id="e6009-190">Definiscono la posizione fissa bidimensionale dalla quale vengono calcolate tutte le trasformazioni e gli effetti per l'oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="e6009-190">They define the two-dimensional fixed position from which all transforms and effects for the visual are calculated.</span></span>

<span data-ttu-id="e6009-191">Per un oggetto visivo radice, le proprietà OffsetX e OffsetY definiscono la coordinata x e la coordinata y di un punto rispetto all'angolo superiore sinistro della finestra che ospita l'oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="e6009-191">For a root visual, the OffsetX and OffsetY properties define the x-coordinate and y-coordinate of a point relative to the upper-left corner of the window that hosts the visual.</span></span> <span data-ttu-id="e6009-192">Per un oggetto visivo figlio, le coordinate sono relative all'angolo superiore sinistro dell'elemento padre o, se viene specificata la [Proprietà TransformParent](#transformparent-property) , l'angolo superiore sinistro dell'oggetto visivo specificato.</span><span class="sxs-lookup"><span data-stu-id="e6009-192">For a child visual, the coordinates are relative to the upper-left corner of the parent or, if the [TransformParent property](#transformparent-property) is specified, the upper-left corner of the specified visual.</span></span> <span data-ttu-id="e6009-193">Quando viene eseguito il rendering di un oggetto visivo, questo viene posizionato in modo tale che l'angolo superiore sinistro dell'oggetto visivo coincida con le coordinate specificate.</span><span class="sxs-lookup"><span data-stu-id="e6009-193">When a visual is rendered, it is positioned such that the visual's upper-left corner coincides with the specified coordinates.</span></span>

<span data-ttu-id="e6009-194">Per impostare le proprietà OffsetX e OffsetY di un oggetto visivo, chiamare i metodi [**IDCompositionVisual:: SetOffsetX**](/previous-versions/windows/desktop/legacy/hh449126(v=vs.85)) e [**seoffsety**](/previous-versions/windows/desktop/legacy/hh449131(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="e6009-194">You set the OffsetX and OffsetY properties of a visual by calling the [**IDCompositionVisual::SetOffsetX**](/previous-versions/windows/desktop/legacy/hh449126(v=vs.85)) and [**SetOffsetY**](/previous-versions/windows/desktop/legacy/hh449131(v=vs.85)) methods.</span></span>

### <a name="effect-property"></a><span data-ttu-id="e6009-195">Proprietà Effect</span><span class="sxs-lookup"><span data-stu-id="e6009-195">Effect property</span></span>

<span data-ttu-id="e6009-196">La proprietà Effect consente di specificare un effetto o un gruppo di effetti che modifica il modo in cui viene composto un oggetto visivo e il relativo sottoalbero.</span><span class="sxs-lookup"><span data-stu-id="e6009-196">The Effect property lets you specify an effect, or group of effects, that will modify how a visual and its subtree is composed.</span></span> <span data-ttu-id="e6009-197">Ad esempio, è possibile specificare gli effetti che controllano l'opacità di un oggetto visivo, combinano l'oggetto visivo con un'altra bitmap in diversi modi e applicano le trasformazioni della prospettiva all'oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="e6009-197">For example, you can specify effects that control the opacity of a visual, blend the visual with another bitmap in various ways, and apply perspective transforms to the visual.</span></span>

<span data-ttu-id="e6009-198">Per impostare la proprietà Effect di un oggetto visivo, chiamare il metodo [**IDCompositionVisual:: seeffect**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-seteffect) .</span><span class="sxs-lookup"><span data-stu-id="e6009-198">You set the Effect property of a visual by calling the [**IDCompositionVisual::SetEffect**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-seteffect) method.</span></span>

<span data-ttu-id="e6009-199">Per altre informazioni, vedere [Effects](effects.md) (Effetti).</span><span class="sxs-lookup"><span data-stu-id="e6009-199">For more information, see [Effects](effects.md).</span></span>

### <a name="transform-property"></a><span data-ttu-id="e6009-200">Transform (proprietà)</span><span class="sxs-lookup"><span data-stu-id="e6009-200">Transform property</span></span>

<span data-ttu-id="e6009-201">La proprietà Transform specifica una trasformazione bidimensionale (2D), o un gruppo di trasformazioni 2D, per l'esecuzione di DirectComposition sull'oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="e6009-201">The Transform property specifies a two-dimensional (2D) transformation, or group of 2D transformations, for DirectComposition to perform on the visual.</span></span> <span data-ttu-id="e6009-202">Una trasformazione (o trasformazione) è un'operazione che modifica il sistema di coordinate di un oggetto visivo rispetto al relativo padre o relativo all'oggetto visivo specificato dalla [Proprietà TransformParent](#transformparent-property).</span><span class="sxs-lookup"><span data-stu-id="e6009-202">A transformation (or transform) is an operation that modifies the coordinate system of a visual relative to its parent, or relative to the visual specified by the [TransformParent property](#transformparent-property).</span></span> <span data-ttu-id="e6009-203">È possibile utilizzare le trasformazioni per modificare la posizione, le dimensioni o la natura di un oggetto visivo spostando l'oggetto in un altro percorso (conversione), rendendolo più grande o più piccolo (ridimensionamento), trasformandolo (rotazione), distorsione della forma (inclinazione) e così via.</span><span class="sxs-lookup"><span data-stu-id="e6009-203">You can use transforms to alter the position, size, or nature of a visual by moving it to another location (translation), making it larger or smaller (scaling), turning it (rotation), distorting its shape (skewing), and so on.</span></span>

<span data-ttu-id="e6009-204">Per impostare la proprietà Transform di un oggetto visivo, chiamare il metodo [**IDCompositionVisual:: setransform**](/previous-versions/windows/desktop/legacy/hh449178(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="e6009-204">You set the Transform property of a visual by calling the [**IDCompositionVisual::SetTransform**](/previous-versions/windows/desktop/legacy/hh449178(v=vs.85)) method.</span></span>

<span data-ttu-id="e6009-205">Per altre informazioni, vedere [Trasformazioni](transforms.md).</span><span class="sxs-lookup"><span data-stu-id="e6009-205">For more information, see [Transforms](transforms.md).</span></span>

### <a name="transformparent-property"></a><span data-ttu-id="e6009-206">Proprietà TransformParent</span><span class="sxs-lookup"><span data-stu-id="e6009-206">TransformParent property</span></span>

<span data-ttu-id="e6009-207">Il sistema di coordinate di un oggetto visivo viene modificato dalle proprietà OffsetX, OffsetY e Transform.</span><span class="sxs-lookup"><span data-stu-id="e6009-207">The coordinate system of a visual is modified by the OffsetX, OffsetY, and Transform properties.</span></span> <span data-ttu-id="e6009-208">In genere, queste proprietà definiscono il sistema di coordinate di un oggetto visivo rispetto al relativo elemento padre diretto.</span><span class="sxs-lookup"><span data-stu-id="e6009-208">Normally, these properties define the coordinate system of a visual relative to its immediate parent.</span></span> <span data-ttu-id="e6009-209">Per utilizzare alcuni oggetti visivi diversi dall'elemento padre come base per il sistema di coordinate di un oggetto visivo figlio, utilizzare la proprietà TransformParent per specificare un oggetto visivo diverso come "padre" per finalità di trasformazione.</span><span class="sxs-lookup"><span data-stu-id="e6009-209">To use some visual other than the parent as the basis for the coordinate system of a child visual, use the TransformParent property to specify a different visual as the "parent" for transform purposes.</span></span>

<span data-ttu-id="e6009-210">Per impostare la proprietà TransformParent di un oggetto visivo, chiamare il metodo [**IDCompositionVisual:: SetTransformParent**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-settransformparent) .</span><span class="sxs-lookup"><span data-stu-id="e6009-210">You set the TransformParent property of a visual by calling the [**IDCompositionVisual::SetTransformParent**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-settransformparent) method.</span></span>

## <a name="device-object"></a><span data-ttu-id="e6009-211">Oggetto dispositivo</span><span class="sxs-lookup"><span data-stu-id="e6009-211">Device object</span></span>

<span data-ttu-id="e6009-212">Per utilizzare DirectComposition, è necessario creare e modificare un'ampia gamma di oggetti Component Object Model (COM).</span><span class="sxs-lookup"><span data-stu-id="e6009-212">To use DirectComposition, you must create and manipulate a variety of Component Object Model (COM) objects.</span></span> <span data-ttu-id="e6009-213">Il primo oggetto che è necessario creare è l' *oggetto dispositivo* DirectComposition, perché funge da Factory per la creazione di tutti gli altri oggetti utilizzati in una composizione.</span><span class="sxs-lookup"><span data-stu-id="e6009-213">The first object that you need to create is the DirectComposition *device object* because it serves as the factory for creating all other objects used in a composition.</span></span>

<span data-ttu-id="e6009-214">Per creare un oggetto dispositivo, chiamare la funzione [**DCompositionCreateDevice**](/windows/desktop/api/Dcomp/nf-dcomp-dcompositioncreatedevice) , che restituisce un puntatore a interfaccia [**IDCompositionDevice**](/windows/win32/api/dcomp/nn-dcomp-idcompositiondevice) .</span><span class="sxs-lookup"><span data-stu-id="e6009-214">You create a device object by calling the [**DCompositionCreateDevice**](/windows/desktop/api/Dcomp/nf-dcomp-dcompositioncreatedevice) function, which returns an [**IDCompositionDevice**](/windows/win32/api/dcomp/nn-dcomp-idcompositiondevice) interface pointer.</span></span> <span data-ttu-id="e6009-215">Questa interfaccia espone un set di metodi usati per creare oggetti visivi, ritagliare oggetti, oggetti animazione, oggetti Transform, oggetti Effect e così via.</span><span class="sxs-lookup"><span data-stu-id="e6009-215">This interface exposes a set of methods that you use to create visual objects, clip objects, animation objects, transform objects, effect objects, and so on.</span></span>

<span data-ttu-id="e6009-216">L'oggetto dispositivo serve un altro scopo oltre a essere una factory per la creazione di altri oggetti.</span><span class="sxs-lookup"><span data-stu-id="e6009-216">The device object serves one other purpose besides being a factory for creating other objects.</span></span> <span data-ttu-id="e6009-217">Espone un metodo denominato [**commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) che passa una struttura ad albero visuale a DirectComposition per l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="e6009-217">It exposes a method called [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) that passes a visual tree to DirectComposition for processing.</span></span> <span data-ttu-id="e6009-218">Per ulteriori informazioni, vedere [composizione transazionale](#transactional-composition).</span><span class="sxs-lookup"><span data-stu-id="e6009-218">For more information, see [Transactional Composition](#transactional-composition).</span></span>

<span data-ttu-id="e6009-219">Tenere presente che, sebbene sia possibile creare più istanze dell'oggetto dispositivo nell'applicazione, tutti gli oggetti utilizzati in una determinata composizione devono essere creati dallo stesso oggetto dispositivo, con una sola eccezione: è possibile combinare oggetti visivi da oggetti dispositivo diversi nella stessa struttura ad albero visuale.</span><span class="sxs-lookup"><span data-stu-id="e6009-219">Remember that, while you can create multiple instances of the device object in your application, all of the objects that you use in a particular composition must be created by the same device object—with one exception: You can combine visual objects from different device objects in the same visual tree.</span></span> <span data-ttu-id="e6009-220">Quando si esegue questa operazione, DirectComposition considera la struttura ad albero visuale come in genere, ad eccezione del fatto che le modifiche apportate a un determinato oggetto visivo nell'albero diventano effettive solo quando il metodo [**commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) viene chiamato sull'oggetto dispositivo che ha creato l'oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="e6009-220">When you do so, DirectComposition treats the visual tree as it normally would, except that changes to a particular visual object in the tree take effect only when the [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) method is called on the device object that created the visual object.</span></span>

<span data-ttu-id="e6009-221">La possibilità di usare oggetti visivi di dispositivi diversi nella stessa struttura ad albero visuale consente a più thread di creare e modificare una singola struttura ad albero visuale mantenendo due dispositivi indipendenti che possono essere usati per eseguire il commit delle modifiche in modo asincrono.</span><span class="sxs-lookup"><span data-stu-id="e6009-221">The ability to use visuals from different devices in the same visual tree enables multiple threads to create and manipulate a single visual tree while maintaining two independent devices that can be used to commit changes asynchronously.</span></span> <span data-ttu-id="e6009-222">Per altre informazioni, vedere [alberi visivi tra dispositivi](#cross-device-visual-trees).</span><span class="sxs-lookup"><span data-stu-id="e6009-222">For more information, see [Cross-Device Visual Trees](#cross-device-visual-trees).</span></span>

## <a name="composition-target-window"></a><span data-ttu-id="e6009-223">Finestra di destinazione composizione</span><span class="sxs-lookup"><span data-stu-id="e6009-223">Composition target window</span></span>

<span data-ttu-id="e6009-224">Una struttura ad albero visuale deve essere associata a una finestra prima che uno degli oggetti visivi dell'albero possa essere visualizzato sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="e6009-224">A visual tree must be bound to a window before any of the tree's visuals can be displayed on the screen.</span></span> <span data-ttu-id="e6009-225">La finestra, denominata *finestra di destinazione della composizione*, può essere una finestra di primo livello o una finestra figlio.</span><span class="sxs-lookup"><span data-stu-id="e6009-225">The window, called the *composition target window*, can be a top-level window or a child window.</span></span> <span data-ttu-id="e6009-226">Inoltre, la finestra di destinazione della composizione può essere una finestra sovrapposta. ovvero, può avere lo stile della finestra [**WS ex a più \_ \_ livelli**](/windows/desktop/winmsg/extended-window-styles) .</span><span class="sxs-lookup"><span data-stu-id="e6009-226">Also, the composition target window can be a layered window; that is, it can have the [**WS\_EX\_LAYERED**](/windows/desktop/winmsg/extended-window-styles) window style.</span></span>

<span data-ttu-id="e6009-227">DirectComposition consente a un'applicazione di associare un massimo di due alberi visivi a ogni finestra.</span><span class="sxs-lookup"><span data-stu-id="e6009-227">DirectComposition allows an application to bind a maximum of two visual trees to each window.</span></span> <span data-ttu-id="e6009-228">Gli alberi visivi includono uno che viene composto nella parte superiore della finestra stessa, ma dietro tutte le finestre figlio della finestra e un altro composto nella parte superiore della finestra e nella parte superiore delle finestre figlio.</span><span class="sxs-lookup"><span data-stu-id="e6009-228">The visual trees include one that is composed on top of the window itself, but behind all of the window’s child windows, and another that is composed on top of the window and on top of the child windows.</span></span> <span data-ttu-id="e6009-229">In altre parole, ogni finestra dispone di quattro livelli concettuali e tutti i livelli vengono ritagliati nell'area visibile della finestra di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e6009-229">In other words, each window has four conceptual layers, and all layers are clipped to the target window's visible region.</span></span> <span data-ttu-id="e6009-230">Nella figura seguente sono illustrati i quattro livelli concettuali di una finestra.</span><span class="sxs-lookup"><span data-stu-id="e6009-230">The following illustration shows the four conceptual layers of a window.</span></span>

![livelli concettuali di una finestra](images/directcomposition-layers.png)

## <a name="transactional-composition"></a><span data-ttu-id="e6009-232">Composizione transazionale</span><span class="sxs-lookup"><span data-stu-id="e6009-232">Transactional composition</span></span>

<span data-ttu-id="e6009-233">DirectComposition usa un modello transazionale in cui si crea un set di modifiche in batch in un oggetto visivo e quindi si esegue il commit del set in DirectComposition per l'elaborazione in una sola volta.</span><span class="sxs-lookup"><span data-stu-id="e6009-233">DirectComposition uses a transactional model where you create a batched set of changes to a visual and then "commit" the set to DirectComposition for processing all at once.</span></span> <span data-ttu-id="e6009-234">È possibile modificare lo stesso oggetto visivo DirectComposition ed eseguire il commit delle modifiche per un numero qualsiasi di volte.</span><span class="sxs-lookup"><span data-stu-id="e6009-234">You can modify the same DirectComposition visual object and commit the changes any number of times.</span></span> <span data-ttu-id="e6009-235">Quando il Gestione finestre desktop (DWM) preleva batch, preleva tutti i batch in sospeso e li applica al frame successivo nell'ordine in cui sono stati sottoposte a commit.</span><span class="sxs-lookup"><span data-stu-id="e6009-235">When the Desktop Window Manager (DWM) picks up batches, it picks up all pending batches and applies them to the next frame in the order they were committed.</span></span>

<span data-ttu-id="e6009-236">Tutte le modifiche all'interno di un singolo commit sono sicuramente applicabili a un singolo frame.</span><span class="sxs-lookup"><span data-stu-id="e6009-236">All changes within a single commit are guaranteed to be applied to a single frame.</span></span> <span data-ttu-id="e6009-237">Poiché DWM raccoglie batch una volta per ogni fotogramma, è possibile modificare qualsiasi oggetto specifico solo una volta per fotogramma.</span><span class="sxs-lookup"><span data-stu-id="e6009-237">Because DWM collects batches once per frame, you can modify any particular object only once per frame.</span></span> <span data-ttu-id="e6009-238">I commit successivi che modificano oggetti diversi possono anche essere applicati al frame corrente, ma DirectComposition non garantisce che le modifiche vengano eseguite nello stesso frame.</span><span class="sxs-lookup"><span data-stu-id="e6009-238">Subsequent commits that modify different objects might also be applied to the current frame, but DirectComposition does not guarantee that the changes will occur in the same frame.</span></span>

<span data-ttu-id="e6009-239">I metodi [**IDCompositionSurface:: BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) e [**IDCompositionSurface:: EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) consentono di sincronizzare gli aggiornamenti del rendering con gli aggiornamenti visivi.</span><span class="sxs-lookup"><span data-stu-id="e6009-239">The [**IDCompositionSurface::BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) and [**IDCompositionSurface::EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) methods let you synchronize rendering updates with visual updates.</span></span> <span data-ttu-id="e6009-240">Ad esempio, è possibile chiamare **IDCompositionSurface:: BeginDraw**, aggiornare le proprietà OffsetX e clip di un oggetto visivo, chiamare [**IDCompositionDevice:: commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit), creare contenuto con Microsoft DirectX, quindi chiamare **IDCompositionSurface:: EndDraw**.</span><span class="sxs-lookup"><span data-stu-id="e6009-240">For example, you can call **IDCompositionSurface::BeginDraw**, update the OffsetX and Clip properties of a visual, call [**IDCompositionDevice::Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit), draw content with Microsoft DirectX, and then call **IDCompositionSurface::EndDraw**.</span></span> <span data-ttu-id="e6009-241">In questo caso, Microsoft DirectComposition garantisce che il contenuto bitmap e le proprietà visive vengano aggiornate contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="e6009-241">In this case, Microsoft DirectComposition ensures that bitmap content and the visual properties are updated at the same time.</span></span>

### <a name="batching"></a><span data-ttu-id="e6009-242">Creazione di batch</span><span class="sxs-lookup"><span data-stu-id="e6009-242">Batching</span></span>

<span data-ttu-id="e6009-243">È possibile eseguire il commit di più modifiche nello stesso oggetto visivo o più modifiche a oggetti visivi diversi, all'interno dello stesso frame.</span><span class="sxs-lookup"><span data-stu-id="e6009-243">You can commit multiple changes to the same visual, or multiple changes to different visuals, within the same frame.</span></span> <span data-ttu-id="e6009-244">Quando si apportano più modifiche allo stesso oggetto visivo nello stesso frame, tenere presenti le considerazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="e6009-244">When making multiple changes to the same visual within the same frame, keep the following points in mind:</span></span>

-   <span data-ttu-id="e6009-245">Se si apportano più modifiche alla stessa proprietà di un oggetto visivo, viene applicata solo l'ultima modifica.</span><span class="sxs-lookup"><span data-stu-id="e6009-245">If you make multiple changes to the same property of a visual, only the last change is applied.</span></span> <span data-ttu-id="e6009-246">Se, ad esempio, si imposta l'opacità su 0, quindi su 0,5 e infine su 1,0, all'oggetto visivo viene applicata solo un'opacità 1,0.</span><span class="sxs-lookup"><span data-stu-id="e6009-246">For example, if you set the opacity to 0, then to 0.5, and finally to 1.0, only an opacity of 1.0 is applied to the visual.</span></span>
-   <span data-ttu-id="e6009-247">Se si modificano più proprietà dello stesso oggetto visivo, DirectComposition applica prima le modifiche all'oggetto visivo e quindi agli oggetti visivi figlio.</span><span class="sxs-lookup"><span data-stu-id="e6009-247">If you change multiple properties of the same visual, DirectComposition applies the changes first to the visual and then to any child visuals.</span></span> <span data-ttu-id="e6009-248">Le proprietà vengono applicate nell'ordine seguente indipendentemente dall'ordine in cui vengono specificate:</span><span class="sxs-lookup"><span data-stu-id="e6009-248">The properties are applied in the following order regardless of the order in which you specify them:</span></span>

    1.  <span data-ttu-id="e6009-249">Offset</span><span class="sxs-lookup"><span data-stu-id="e6009-249">Offset</span></span>
    2.  <span data-ttu-id="e6009-250">Trasformare</span><span class="sxs-lookup"><span data-stu-id="e6009-250">Transform</span></span>
    3.  <span data-ttu-id="e6009-251">Ritaglia</span><span class="sxs-lookup"><span data-stu-id="e6009-251">Clip</span></span>
    4.  <span data-ttu-id="e6009-252">Effetto</span><span class="sxs-lookup"><span data-stu-id="e6009-252">Effect</span></span>

    <span data-ttu-id="e6009-253">Nella figura seguente viene illustrato il risultato dell'applicazione di tutte e quattro le proprietà a un oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="e6009-253">The following illustration shows the result of applying all four properties to a visual.</span></span>

    ![risultato dell'applicazione di tutte e quattro le proprietà a un oggetto visivo](images/order-of-properties.png)

    <span data-ttu-id="e6009-255">Tenere presente che tutte le modifiche vengono applicate all'oggetto visivo in una sola volta all'interno del contesto dello stesso frame.</span><span class="sxs-lookup"><span data-stu-id="e6009-255">Remember that all changes are applied to the visual at once within the context of the same frame.</span></span> <span data-ttu-id="e6009-256">Ciò significa che, dal punto di vista dell'utente, le modifiche apportate all'oggetto visivo vengono eseguite immediatamente.</span><span class="sxs-lookup"><span data-stu-id="e6009-256">This means that, from the user's perspective, the changes to the visual occur instantaneously.</span></span>

-   <span data-ttu-id="e6009-257">Per la proprietà Transform, è possibile usare [**IDCompositionDevice:: CreateTransformGroup**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createtransformgroup) per creare un gruppo di trasformazioni da applicare a un oggetto visivo in una sola volta.</span><span class="sxs-lookup"><span data-stu-id="e6009-257">For the Transform property, you can use [**IDCompositionDevice::CreateTransformGroup**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createtransformgroup) to create a group of transforms to apply to a visual all at once.</span></span> <span data-ttu-id="e6009-258">DirectComposition applica le trasformazioni nell'ordine specificato.</span><span class="sxs-lookup"><span data-stu-id="e6009-258">DirectComposition applies the transforms in the order that you specify.</span></span>
-   <span data-ttu-id="e6009-259">Per la proprietà Effect, è possibile usare [**IDCompositionEffectGroup**](/windows/win32/api/dcomp/nn-dcomp-idcompositioneffectgroup) per applicare un gruppo di effetti.</span><span class="sxs-lookup"><span data-stu-id="e6009-259">For the Effect property, you can use [**IDCompositionEffectGroup**](/windows/win32/api/dcomp/nn-dcomp-idcompositioneffectgroup) to apply a group of effects.</span></span> <span data-ttu-id="e6009-260">DirectComposition applica gli effetti nell'ordine specificato.</span><span class="sxs-lookup"><span data-stu-id="e6009-260">DirectComposition applies the effects in the order that you specify.</span></span> <span data-ttu-id="e6009-261">Inoltre, le trasformazioni della prospettiva 3D comportano l'appiattimento della struttura ad albero visuale dopo l'applicazione di tutte le trasformazioni 3D nell'oggetto visivo corrente.</span><span class="sxs-lookup"><span data-stu-id="e6009-261">In addition, 3D perspective transformations result in flattening of the visual tree after all 3D transformations in the current visual have been applied.</span></span> <span data-ttu-id="e6009-262">Ciò consente di garantire che l'oggetto visivo risultante risulti più vicino possibile al 3D.</span><span class="sxs-lookup"><span data-stu-id="e6009-262">This helps ensure that the resulting visual looks as close to 3D as possible.</span></span>

### <a name="synchronization"></a><span data-ttu-id="e6009-263">Sincronizzazione</span><span class="sxs-lookup"><span data-stu-id="e6009-263">Synchronization</span></span>

<span data-ttu-id="e6009-264">L'applicazione può chiamare DirectComposition da più thread contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="e6009-264">Your application can call DirectComposition from multiple threads at the same time.</span></span> <span data-ttu-id="e6009-265">L'ordine di esecuzione è garantito per le chiamate sequenziali, ma non per le chiamate simultanee.</span><span class="sxs-lookup"><span data-stu-id="e6009-265">The order of execution is guaranteed for sequential calls, but not for concurrent calls.</span></span> <span data-ttu-id="e6009-266">Se, ad esempio, il thread A modifica un oggetto visivo e il thread B esegue il commit del batch nello stesso momento, non viene definito se la modifica visiva viene inclusa nel batch di cui è stato eseguito il commit o se viene avviato un nuovo batch.</span><span class="sxs-lookup"><span data-stu-id="e6009-266">For example, if thread A modifies a visual and thread B commits the batch at the same time, it is not defined whether that visual change is included in the committed batch or whether it starts a new batch.</span></span> <span data-ttu-id="e6009-267">D'altra parte, se l'applicazione usa altri meccanismi di sincronizzazione per assicurarsi che un metodo venga chiamato prima dell'altro, DirectComposition rispetta l'ordine di chiamata e li elabora come se entrambe le chiamate fossero state emesse nell'ordine da un singolo thread.</span><span class="sxs-lookup"><span data-stu-id="e6009-267">On the other hand, if your application uses other synchronization mechanisms to ensure that one method is called before the other, DirectComposition honors the call order and processes them as if both calls were issued in that order from a single thread.</span></span>

### <a name="cross-device-visual-trees"></a><span data-ttu-id="e6009-268">Alberi visivi tra dispositivi</span><span class="sxs-lookup"><span data-stu-id="e6009-268">Cross-device visual trees</span></span>

<span data-ttu-id="e6009-269">Gli oggetti DirectComposition non sono associati al thread; è possibile usare più thread per modificare lo stesso set di oggetti.</span><span class="sxs-lookup"><span data-stu-id="e6009-269">DirectComposition objects are not thread bound; you can use multiple threads to modify the same set of objects.</span></span> <span data-ttu-id="e6009-270">Tuttavia, tenere presente i seguenti problemi durante la condivisione dello stesso oggetto dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e6009-270">However, be aware of the following issues when sharing the same device object.</span></span>

-   <span data-ttu-id="e6009-271">Entrambi i thread devono essere in grado di chiamare [**IDCompositionDevice:: commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span><span class="sxs-lookup"><span data-stu-id="e6009-271">Both threads need to be able to call [**IDCompositionDevice::Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span></span> <span data-ttu-id="e6009-272">Se solo uno dei thread chiama **IDCompositionDevice:: commit**, l'altro thread non può eseguire il commit delle modifiche apportate a DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="e6009-272">If only one of the threads calls **IDCompositionDevice::Commit**, the other thread cannot commit any of its changes to DirectComposition.</span></span>
-   <span data-ttu-id="e6009-273">Il comportamento transazionale potrebbe andare perduto se un thread chiama [**IDCompositionDevice:: commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) mentre l'altro thread continua a apportare modifiche che devono far parte della stessa transazione.</span><span class="sxs-lookup"><span data-stu-id="e6009-273">Transactional behavior might be lost if one thread calls [**IDCompositionDevice::Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) while the other thread is still making changes that are intended to be part of the same transaction.</span></span>

<span data-ttu-id="e6009-274">Se è necessario eseguire il commit di più transazioni simultanee in DirectComposition, è necessario usare più oggetti dispositivo, possibilmente da più thread.</span><span class="sxs-lookup"><span data-stu-id="e6009-274">If you need to commit multiple simultaneous transactions to DirectComposition, you must use multiple device objects, possibly from multiple threads.</span></span> <span data-ttu-id="e6009-275">In questo scenario, la stessa struttura ad albero visuale è condivisa da entrambi gli oggetti dispositivo e ogni oggetto dispositivo effettua il commit delle proprie transazioni.</span><span class="sxs-lookup"><span data-stu-id="e6009-275">In this scenario, the same visual tree is shared by both device objects, and each device object commits its own transactions.</span></span>

<span data-ttu-id="e6009-276">Nella figura seguente è illustrata una struttura ad albero visuale condivisa da due oggetti dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e6009-276">The following illustration shows a visual tree that is shared by two device objects.</span></span> <span data-ttu-id="e6009-277">Gli oggetti visivi 1, 2, 4 e 5 sono di proprietà di un dispositivo o l'altro, ma Visual 3 è condiviso da entrambi i dispositivi e pertanto può essere usato per connettere due sottoalberi a una singola struttura ad albero visuale più ampia.</span><span class="sxs-lookup"><span data-stu-id="e6009-277">Visuals 1, 2, 4 and 5 are owned by one device or the other, but visual 3 is shared by both devices, and can therefore be used to connect two sub-trees into a single, larger visual tree.</span></span> <span data-ttu-id="e6009-278">La condivisione della struttura ad albero visuale consente la manipolazione dei due dispositivi da due thread diversi in modo asincrono.</span><span class="sxs-lookup"><span data-stu-id="e6009-278">Sharing the visual tree allows the two devices to be manipulated from two different threads asynchronously.</span></span>

![una struttura ad albero visuale condivisa da due dispositivi](images/shared-visual-tree-1.png)

<span data-ttu-id="e6009-280">Per illustrare l'utilità di condivisione di una struttura ad albero visuale tra due dispositivi, si consideri un'architettura che consente l'input tocco a bassa latenza.</span><span class="sxs-lookup"><span data-stu-id="e6009-280">To illustrate the usefulness of sharing a visual tree between two devices, consider an architecture that enables low-latency touch input.</span></span> <span data-ttu-id="e6009-281">L'architettura può usare due thread, uno che gestisce la maggior parte delle attività dell'interfaccia utente e un secondo thread dedicato all'elaborazione degli eventi di input tocco.</span><span class="sxs-lookup"><span data-stu-id="e6009-281">The architecture could use two threads, one that handles most UI tasks, and a second thread dedicated to processing touch input events.</span></span> <span data-ttu-id="e6009-282">Il thread tocco aggiorna la trasformazione di un determinato oggetto visivo in base al movimento di input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="e6009-282">The touch thread updates the transform of a particular visual based on the user input gesture.</span></span> <span data-ttu-id="e6009-283">Aggiornando la trasformazione, il thread di tocco può fare in modo che l'intero sottoalbero sotto tale oggetto visivo segua il dito dell'utente, venga scalato verso l'alto o verso il basso quando l'utente esegue un movimento multitocco e così via.</span><span class="sxs-lookup"><span data-stu-id="e6009-283">By updating the transform, the touch thread can make the entire subtree under that visual follow the user’s finger, scale up or down as the user executes a multi-touch gesture, and so on.</span></span> <span data-ttu-id="e6009-284">Il thread dell'interfaccia utente mantiene la proprietà della maggior parte dell'albero di composizione, con il thread di tocco che possiede solo i pochi oggetti visivi contrassegnati per la risposta asincrona al tocco.</span><span class="sxs-lookup"><span data-stu-id="e6009-284">The UI thread retains ownership of most of the composition tree, with the touch thread owning only the few visuals that are tagged for asynchronous touch response.</span></span> <span data-ttu-id="e6009-285">Nella figura seguente è illustrata una versione semplificata di tale albero di composizione:</span><span class="sxs-lookup"><span data-stu-id="e6009-285">The following illustration shows a simplified version of such a composition tree:</span></span>

![una struttura ad albero visuale condivisa tra un thread dell'interfaccia utente e un thread di tocco](images/shared-visual-tree-2.png)

<span data-ttu-id="e6009-287">In genere, il thread dell'interfaccia utente modifica solo gli oggetti visivi che possiede esclusivamente e il thread tocco modifica solo l'oggetto visivo condiviso.</span><span class="sxs-lookup"><span data-stu-id="e6009-287">Typically, the UI thread modifies only the visuals that it owns exclusively, and the touch thread modifies only the shared visual.</span></span> <span data-ttu-id="e6009-288">L'unica eccezione si verifica quando si crea o si elimina un sottoalbero abilitato per il tocco.</span><span class="sxs-lookup"><span data-stu-id="e6009-288">The only exception occurs when creating or destroying a touch-enabled subtree.</span></span>

## <a name="related-topics"></a><span data-ttu-id="e6009-289">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="e6009-289">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e6009-290">**IDCompositionSurface:: BeginDraw**</span><span class="sxs-lookup"><span data-stu-id="e6009-290">**IDCompositionSurface::BeginDraw**</span></span>](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw)
</dt> <dt>

[<span data-ttu-id="e6009-291">**IDCompositionSurface:: EndDraw**</span><span class="sxs-lookup"><span data-stu-id="e6009-291">**IDCompositionSurface::EndDraw**</span></span>](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw)
</dt> <dt>

[<span data-ttu-id="e6009-292">**IDCompositonDevice:: commit**</span><span class="sxs-lookup"><span data-stu-id="e6009-292">**IDCompositonDevice::Commit**</span></span>](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit)
</dt> <dt>

[<span data-ttu-id="e6009-293">Concetti di DirectComposition</span><span class="sxs-lookup"><span data-stu-id="e6009-293">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 