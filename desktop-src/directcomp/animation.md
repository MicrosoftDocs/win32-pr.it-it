---
title: Animazione (DirectComposition)
description: Questo argomento descrive le nozioni di base di Microsoft DirectComposition Animation.
ms.assetid: 65DA3971-97C0-4B59-BC67-287AAEAAE340
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f7462a10fd83b45c1b90450fdde806ef306a2f6
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/10/2020
ms.locfileid: "106300800"
---
# <a name="animation-directcomposition"></a><span data-ttu-id="a7743-103">Animazione (DirectComposition)</span><span class="sxs-lookup"><span data-stu-id="a7743-103">Animation (DirectComposition)</span></span>

> [!NOTE]
> <span data-ttu-id="a7743-104">Per le app in Windows 10, è consigliabile usare le API Windows. UI. Composition anziché DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="a7743-104">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="a7743-105">Per altre informazioni, vedere [modernizzare l'app desktop usando il livello visivo](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="a7743-105">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="a7743-106">Questo argomento descrive le nozioni di base di Microsoft DirectComposition Animation.</span><span class="sxs-lookup"><span data-stu-id="a7743-106">This topic discusses the basics of Microsoft DirectComposition animation.</span></span> <span data-ttu-id="a7743-107">Questa lezione contiene i seguenti argomenti:</span><span class="sxs-lookup"><span data-stu-id="a7743-107">It contains the following topics:</span></span>

-   [<span data-ttu-id="a7743-108">Che cos'è un'animazione?</span><span class="sxs-lookup"><span data-stu-id="a7743-108">What is an animation?</span></span>](#what-is-an-animation)
-   [<span data-ttu-id="a7743-109">Proprietà che possono essere animate</span><span class="sxs-lookup"><span data-stu-id="a7743-109">Properties that can be animated</span></span>](#properties-that-can-be-animated)
-   [<span data-ttu-id="a7743-110">Funzioni di animazione</span><span class="sxs-lookup"><span data-stu-id="a7743-110">Animation functions</span></span>](#animation-functions)
-   [<span data-ttu-id="a7743-111">Segmenti di animazione</span><span class="sxs-lookup"><span data-stu-id="a7743-111">Animation segments</span></span>](#animation-segments)
    -   [<span data-ttu-id="a7743-112">Segmento cubico</span><span class="sxs-lookup"><span data-stu-id="a7743-112">Cubic segment</span></span>](#cubic-segment)
    -   [<span data-ttu-id="a7743-113">Segmento sinusoidale</span><span class="sxs-lookup"><span data-stu-id="a7743-113">Sinusoidal segment</span></span>](#sinusoidal-segment)
    -   [<span data-ttu-id="a7743-114">Ripeti segmento</span><span class="sxs-lookup"><span data-stu-id="a7743-114">Repeat segment</span></span>](#repeat-segment)
    -   [<span data-ttu-id="a7743-115">Segmento finale</span><span class="sxs-lookup"><span data-stu-id="a7743-115">End segment</span></span>](#end-segment)
-   [<span data-ttu-id="a7743-116">Compatibilità con gestione animazioni Windows</span><span class="sxs-lookup"><span data-stu-id="a7743-116">Compatibility with Windows Animation Manager</span></span>](#compatibility-with-windows-animation-manager)
-   [<span data-ttu-id="a7743-117">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="a7743-117">Related topics</span></span>](#related-topics)

## <a name="what-is-an-animation"></a><span data-ttu-id="a7743-118">Che cos'è un'animazione?</span><span class="sxs-lookup"><span data-stu-id="a7743-118">What is an animation?</span></span>

<span data-ttu-id="a7743-119">L' *animazione* è un'illusione ottica creata rendendo rapidamente le modifiche incrementali apportate a un oggetto visivo in un periodo di tempo durante il ridisegno dell'oggetto visivo dopo ogni modifica apportata.</span><span class="sxs-lookup"><span data-stu-id="a7743-119">*Animation* is an optical illusion created by quickly making incremental changes to a visual over a period of time while redrawing the visual after each change is made.</span></span> <span data-ttu-id="a7743-120">Poiché i ridisegni si verificano rapidamente, il cervello percepisce le modifiche incrementali come una singola scena modificabile, così come in un film o video di un'azione live.</span><span class="sxs-lookup"><span data-stu-id="a7743-120">Because the redraws occur quickly, the brain perceives the incremental changes as a single changing scene, just as in a movie or video of live action.</span></span>

<span data-ttu-id="a7743-121">Nella tabella seguente vengono descritte alcune delle modalità tipiche di utilizzo dell'animazione.</span><span class="sxs-lookup"><span data-stu-id="a7743-121">The following table describes some of the typical ways of using animation.</span></span>

| <span data-ttu-id="a7743-122">Animazione</span><span class="sxs-lookup"><span data-stu-id="a7743-122">Animation</span></span>                 | <span data-ttu-id="a7743-123">Descrizione</span><span class="sxs-lookup"><span data-stu-id="a7743-123">Description</span></span>                                                                                                                                                                                                                                          |
|---------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="a7743-124">Scorrimento</span><span class="sxs-lookup"><span data-stu-id="a7743-124">Scrolling</span></span>                 | <span data-ttu-id="a7743-125">Usare l'animazione per aggiungere funzionalità, ad esempio il momento dell'emulazione fisica, a un controllo elenco a scorrimento.</span><span class="sxs-lookup"><span data-stu-id="a7743-125">Use animation to add features like physics-emulating momentum to a scrolling list control.</span></span>                                                                                                                                                           |
| <span data-ttu-id="a7743-126">Transizioni di scena</span><span class="sxs-lookup"><span data-stu-id="a7743-126">Scene transitions</span></span>         | <span data-ttu-id="a7743-127">Usare l'animazione per creare transizioni di scene di spostamento che forniscono continuità tra le attività in un flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="a7743-127">Use animation to create navigational scene transitions that provide continuity between tasks in a workflow.</span></span> <span data-ttu-id="a7743-128">Le transizioni della scena di spostamento forniscono il contesto che mostra l'utente in cui si trovavano, dove si trovano e dove devono andare avanti.</span><span class="sxs-lookup"><span data-stu-id="a7743-128">Navigational scene transitions provide context that shows the user where they have been, where they are, and where they need to go next.</span></span> |
| <span data-ttu-id="a7743-129">Interazioni tra finestre</span><span class="sxs-lookup"><span data-stu-id="a7743-129">Cross-window interactions</span></span> | <span data-ttu-id="a7743-130">Animare gli elementi dell'interfaccia utente di diverse applicazioni in modo da dare la percezione della continuità uniforme tra di essi per consentire all'utente di completare le attività che comportano il passaggio da un'applicazione a un'altra.</span><span class="sxs-lookup"><span data-stu-id="a7743-130">Animate UI elements of different applications in a way that gives the perception of seamless continuity between them to help the user complete tasks that involve switching from one application to another.</span></span>                                         |



 

## <a name="properties-that-can-be-animated"></a><span data-ttu-id="a7743-131">Proprietà che possono essere animate</span><span class="sxs-lookup"><span data-stu-id="a7743-131">Properties that can be animated</span></span>

<span data-ttu-id="a7743-132">In DirectComposition è possibile animare un oggetto visivo applicando un'animazione alle singole proprietà degli oggetti che definiscono l'oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="a7743-132">In DirectComposition, you animate a visual by applying animation to individual properties of the objects that define the visual.</span></span> <span data-ttu-id="a7743-133">Se, ad esempio, si desidera spostare un oggetto visivo orizzontalmente sullo schermo, applicare l'animazione alla proprietà OffsetX dell'oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="a7743-133">For example, if you want to move a visual horizontally across the screen, you would apply animation to the OffsetX property of the visual.</span></span> <span data-ttu-id="a7743-134">Analogamente, se si desidera eseguire una semplice rotazione 2D animata di un oggetto visivo, applicare l'animazione alla proprietà Angle di un oggetto Transform 2D, quindi applicare l'oggetto Transform 2D alla proprietà Transform dell'oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="a7743-134">Similarly, if you wanted to do a simple animated 2D rotation of a visual, you would apply animation to the Angle property of a 2D transform object, and then apply the 2D transform object to the Transform property of the visual.</span></span>

<span data-ttu-id="a7743-135">DirectComposition consente di applicare l'animazione a qualsiasi proprietà dell'oggetto che accetta un valore scalare.</span><span class="sxs-lookup"><span data-stu-id="a7743-135">DirectComposition enables you to apply animation to any object property that takes a scalar value.</span></span> <span data-ttu-id="a7743-136">È possibile applicare animazioni simultanee a più proprietà e a più oggetti.</span><span class="sxs-lookup"><span data-stu-id="a7743-136">You can apply simultaneous animations to multiple properties and multiple objects.</span></span>

<span data-ttu-id="a7743-137">DirectComposition esegue animazioni in un thread separato.</span><span class="sxs-lookup"><span data-stu-id="a7743-137">DirectComposition runs animations on a separate thread.</span></span> <span data-ttu-id="a7743-138">È possibile avviare un'animazione o un set di animazioni, quindi eseguire altre operazioni sui thread dell'applicazione o persino mettere i thread in sospensione, mentre il motore di composizione esegue le animazioni alla frequenza dei fotogrammi appropriata.</span><span class="sxs-lookup"><span data-stu-id="a7743-138">You can start an animation or set of animations and then do other work on your application threads, or even put threads to sleep, while the composition engine runs the animations at the appropriate frame rate.</span></span>

## <a name="animation-functions"></a><span data-ttu-id="a7743-139">Funzioni di animazione</span><span class="sxs-lookup"><span data-stu-id="a7743-139">Animation functions</span></span>

<span data-ttu-id="a7743-140">DirectComposition aggiunge un'animazione a una proprietà dell'oggetto in base a una funzione di animazione definita dall'utente.</span><span class="sxs-lookup"><span data-stu-id="a7743-140">DirectComposition animates an object property based on an animation function that you define.</span></span> <span data-ttu-id="a7743-141">Una *funzione di animazione* è un costrutto che specifica la modalità di modifica del valore di una proprietà dell'oggetto in un determinato periodo di tempo.</span><span class="sxs-lookup"><span data-stu-id="a7743-141">An *animation function* is a construct that specifies how the value of an object property changes over a period of time.</span></span> <span data-ttu-id="a7743-142">Ad esempio, è possibile definire una funzione di animazione che modifica il valore di una proprietà da 1 a 360 nel corso di 4 secondi.</span><span class="sxs-lookup"><span data-stu-id="a7743-142">For example, you could define an animation function that changes the value of a property from 1 to 360 over the course of 4 seconds.</span></span> <span data-ttu-id="a7743-143">Quindi, se si applica la funzione di animazione alla proprietà Angle di un oggetto Transform 2D rotate, quindi si applica l'oggetto Transform alla proprietà Transform di un oggetto visivo, la funzione di animazione ruota l'oggetto visivo in un cerchio completo nel corso di 4 secondi.</span><span class="sxs-lookup"><span data-stu-id="a7743-143">Then, if you apply the animation function to the Angle property of a 2D rotate transform object, and then apply the transform object to the Transform property of a visual, the animation function would rotate the visual in a full circle over the course of 4 seconds.</span></span>

<span data-ttu-id="a7743-144">Una funzione di animazione viene rappresentata da un *oggetto di animazione* creato da una chiamata al metodo [**IDCompositionDevice:: CreateAnimation**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createanimation) .</span><span class="sxs-lookup"><span data-stu-id="a7743-144">An animation function is represented by an *animation object* created by a call to the [**IDCompositionDevice::CreateAnimation**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createanimation) method.</span></span> <span data-ttu-id="a7743-145">Per creare una funzione di animazione, è possibile usare i metodi dell'interfaccia [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) di un oggetto animazione per aggiungere i *segmenti di animazione*, uno alla volta, alla matrice che definisce la funzione di animazione.</span><span class="sxs-lookup"><span data-stu-id="a7743-145">You create an animation function by using the methods of an animation object's [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) interface to append *animation segments*, one at a time, to the array that defines the animation function.</span></span> <span data-ttu-id="a7743-146">Quando si aggiunge un segmento, si specifica un offset in base zero che contrassegna l'ora di inizio del segmento rispetto all'inizio della funzione di animazione.</span><span class="sxs-lookup"><span data-stu-id="a7743-146">When appending a segment, you specify a zero-based offset that marks the begin time of the segment, relative to the beginning of the animation function.</span></span> <span data-ttu-id="a7743-147">I segmenti di animazione devono essere accodati in ordine crescente per gli orari di inizio.</span><span class="sxs-lookup"><span data-stu-id="a7743-147">Animation segments must be appended in increasing order of begin times.</span></span> <span data-ttu-id="a7743-148">Il tentativo di accodare un segmento di animazione la cui ora di inizio è precedente o uguale a un segmento precedente avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="a7743-148">Attempting to append an animation segment whose begin time is before or equal to a preceding segment will fail.</span></span> <span data-ttu-id="a7743-149">Una funzione di animazione può avere un'ora di fine specificata, che indica quando la funzione deve terminare.</span><span class="sxs-lookup"><span data-stu-id="a7743-149">An animation function can have a specified end time, indicating when the function should conclude.</span></span>

<span data-ttu-id="a7743-150">Se non diversamente specificato, una funzione di animazione viene avviata quando il Gestione finestre desktop (DWM) riceve il comando per eseguire l'animazione.</span><span class="sxs-lookup"><span data-stu-id="a7743-150">Unless otherwise specified, an animation function starts when the Desktop Window Manager (DWM) receives the command to execute the animation.</span></span> <span data-ttu-id="a7743-151">Ogni segmento viene eseguito fino a quando non viene raggiunta l'ora di inizio del segmento successivo.</span><span class="sxs-lookup"><span data-stu-id="a7743-151">Each segment runs until the begin time of the next segment is reached.</span></span> <span data-ttu-id="a7743-152">Eventuali modifiche discontinue che si verificano nel valore della proprietà animata tra segmenti sono considerate modifiche discrete.</span><span class="sxs-lookup"><span data-stu-id="a7743-152">Any discontinuous changes that occur in the animated property value between segments are considered to be discrete changes.</span></span>

<span data-ttu-id="a7743-153">Per applicare una funzione di animazione a una proprietà, impostare il valore della proprietà sul puntatore [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) dell'oggetto animazione che rappresenta la funzione di animazione.</span><span class="sxs-lookup"><span data-stu-id="a7743-153">You apply an animation function to a property by setting the property value to the [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) pointer of the animation object that represents the animation function.</span></span> <span data-ttu-id="a7743-154">Lo stesso oggetto di animazione può essere applicato a più proprietà dello stesso oggetto, oltre che alle proprietà di altri oggetti creati dallo stesso dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a7743-154">The same animation object can be applied to multiple properties of the same object, as well as to the properties of other objects created by the same device.</span></span>

## <a name="animation-segments"></a><span data-ttu-id="a7743-155">Segmenti di animazione</span><span class="sxs-lookup"><span data-stu-id="a7743-155">Animation segments</span></span>

<span data-ttu-id="a7743-156">I segmenti di animazione sono le definizioni di intervallo fondamentali di una funzione di animazione; sono le primitive da cui vengono compilate funzioni di animazione più complesse e di livello superiore.</span><span class="sxs-lookup"><span data-stu-id="a7743-156">Animation segments are the fundamental timing definitions of an animation function; they are the primitives from which more complex and higher level animation functions are built.</span></span> <span data-ttu-id="a7743-157">Un segmento di animazione viene costruito da una serie di parametri che descrivono la funzione e l'ora in cui inizia il segmento, relativo all'inizio della funzione di animazione.</span><span class="sxs-lookup"><span data-stu-id="a7743-157">An animation segment is constructed from a series of parameters that describe the function and the time when the segment begins, relative to the beginning of the animation function.</span></span> <span data-ttu-id="a7743-158">Per ogni segmento, Time (*t*) avanza lungo l'asse orizzontale e inizia a *t* = 0.</span><span class="sxs-lookup"><span data-stu-id="a7743-158">For every segment, time (*t*) progresses along the horizontal axis and begins at *t* = 0.</span></span>

### <a name="cubic-segment"></a><span data-ttu-id="a7743-159">Segmento cubico</span><span class="sxs-lookup"><span data-stu-id="a7743-159">Cubic segment</span></span>

<span data-ttu-id="a7743-160">La tempistica di un segmento cubico è definita da un polinomio cubico.</span><span class="sxs-lookup"><span data-stu-id="a7743-160">The timing of a cubic segment is defined by a cubic polynomial.</span></span> <span data-ttu-id="a7743-161">Per un dato tempo di input (*t*), il valore di output viene fornito dall'equazione seguente:</span><span class="sxs-lookup"><span data-stu-id="a7743-161">For a given time input (*t*), the output value is given by the following equation:</span></span>

<span data-ttu-id="a7743-162">*x*(*t*) = *in*³ + *BT*² + *CT*  +  *d*</span><span class="sxs-lookup"><span data-stu-id="a7743-162">*x*(*t*) = *at*³ + *bt*² + *ct* + *d*</span></span>

<span data-ttu-id="a7743-163">Nel diagramma seguente viene illustrata una funzione di animazione che contiene due segmenti cubici.</span><span class="sxs-lookup"><span data-stu-id="a7743-163">The following diagram shows an animation function that contains of two cubic segments.</span></span> <span data-ttu-id="a7743-164">Il primo segmento esegue la transizione di un valore da 0 a 16 in 4 secondi e il secondo modifica il valore in modo lineare da 16 a 0 nei successivi 4 secondi.</span><span class="sxs-lookup"><span data-stu-id="a7743-164">The first segment transitions a value from 0 to 16 over 4 seconds, and the second changes the value linearly from 16 to 0 over the next 4 seconds.</span></span> <span data-ttu-id="a7743-165">La prima transizione si verifica lungo questo polinomio cubico:</span><span class="sxs-lookup"><span data-stu-id="a7743-165">The first transition occurs along this cubic polynomial:</span></span>

<span data-ttu-id="a7743-166">*x*(*t*) = *t*³-6 *t*² + 12 *t*</span><span class="sxs-lookup"><span data-stu-id="a7743-166">*x*(*t*) = *t*³ - 6 *t*² + 12 *t*</span></span>

<span data-ttu-id="a7743-167">e la seconda transizione si verifica lungo questo:</span><span class="sxs-lookup"><span data-stu-id="a7743-167">and the second transition occurs along this one:</span></span>

<span data-ttu-id="a7743-168">*x*(*t*) =-4 *t* + 16</span><span class="sxs-lookup"><span data-stu-id="a7743-168">*x*(*t*) = - 4 *t* + 16</span></span>

![diagramma di una funzione di animazione con due segmenti cubici](images/cubicsegment.png)

<span data-ttu-id="a7743-170">Si aggiunge un segmento cubico a una funzione di animazione usando il metodo [**IDCompositionAnimation:: AddCubic**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addcubic) .</span><span class="sxs-lookup"><span data-stu-id="a7743-170">You add a cubic segment to an animation function by using the [**IDCompositionAnimation::AddCubic**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addcubic) method.</span></span>

### <a name="sinusoidal-segment"></a><span data-ttu-id="a7743-171">Segmento sinusoidale</span><span class="sxs-lookup"><span data-stu-id="a7743-171">Sinusoidal segment</span></span>

<span data-ttu-id="a7743-172">L'intervallo di tempo di un segmento sinusoidale è definito dall'equazione seguente:</span><span class="sxs-lookup"><span data-stu-id="a7743-172">The timing of a sinusoidal segment is defined by the following equation:</span></span>

<span data-ttu-id="a7743-173">*x*(*t*) = *distorsione* di disparità  +   \* sin (*t* \* *Frequency* \* 2 \* pi + *fase* \* pi/180.0)</span><span class="sxs-lookup"><span data-stu-id="a7743-173">*x*(*t*) = *Bias* + *Amplitude* \* sin(*t*\**Frequency*\*2\*PI + *Phase*\*PI/180.0)</span></span>

<span data-ttu-id="a7743-174">Si aggiunge un segmento sinusoidale a una funzione di animazione usando il metodo [**IDCompositionAnimation:: AddSinusoidal**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addsinusoidal) .</span><span class="sxs-lookup"><span data-stu-id="a7743-174">You add a sinusoidal segment to an animation function by using the [**IDCompositionAnimation::AddSinusoidal**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addsinusoidal) method.</span></span>

### <a name="repeat-segment"></a><span data-ttu-id="a7743-175">Ripeti segmento</span><span class="sxs-lookup"><span data-stu-id="a7743-175">Repeat segment</span></span>

<span data-ttu-id="a7743-176">Un segmento di ripetizione ripete una parte precedente specificata di una funzione di animazione.</span><span class="sxs-lookup"><span data-stu-id="a7743-176">A repeat segment repeats a specified preceding portion of an animation function.</span></span> <span data-ttu-id="a7743-177">Un segmento di ripetizione determina il ciclo illimitato della parte specificata della funzione di animazione fino a quando non viene rilevato il segmento successivo o viene raggiunta la fine dell'animazione specificata.</span><span class="sxs-lookup"><span data-stu-id="a7743-177">A repeat segment causes the specified portion of the animation function to loop indefinitely until the next segment is encountered or the specified end of the animation is reached.</span></span> <span data-ttu-id="a7743-178">La parte precedente di un'animazione è costituita da altri segmenti, inclusi altri segmenti ripetuti.</span><span class="sxs-lookup"><span data-stu-id="a7743-178">The preceding portion of an animation is made of other segments, including other repeat segments.</span></span> <span data-ttu-id="a7743-179">Non è possibile usare un segmento di ripetizione come primo segmento di una funzione di animazione.</span><span class="sxs-lookup"><span data-stu-id="a7743-179">A repeat segment cannot be used as the first segment in an animation function.</span></span>

<span data-ttu-id="a7743-180">Il diagramma seguente illustra una funzione di animazione costituita da due segmenti cubi di durata di 4 secondi, seguiti da un segmento di ripetizione che dura 12 secondi.</span><span class="sxs-lookup"><span data-stu-id="a7743-180">The following diagram shows an animation function that consists two cubic segments of 4 seconds duration each, followed by a repeat segment that lasts 12 seconds.</span></span> <span data-ttu-id="a7743-181">Il segmento di ripetizione inizia 8 secondi nell'animazione e ripete i 6 secondi precedenti dell'animazione due volte finché non viene raggiunto il segmento finale a 20 secondi.</span><span class="sxs-lookup"><span data-stu-id="a7743-181">The repeat segment begins 8 seconds into the animation and repeats the previous 6 seconds of the animation two times until the end segment is reached at 20 seconds.</span></span>

![diagramma di una funzione di animazione che contiene due segmenti cubici e un segmento di ripetizione](images/repeatsegment.png)

<span data-ttu-id="a7743-183">Per aggiungere un segmento di ripetizione a una funzione di animazione, usare il metodo [**IDCompositionAnimation:: AddRepeat**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addrepeat) .</span><span class="sxs-lookup"><span data-stu-id="a7743-183">To add a repeat segment to an animation function, use the [**IDCompositionAnimation::AddRepeat**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addrepeat) method.</span></span>

### <a name="end-segment"></a><span data-ttu-id="a7743-184">Segmento finale</span><span class="sxs-lookup"><span data-stu-id="a7743-184">End segment</span></span>

<span data-ttu-id="a7743-185">Dopo la costruzione di una funzione di animazione dai segmenti, è possibile aggiungere un segmento finale per fare in modo che la funzione di animazione termini in un determinato momento.</span><span class="sxs-lookup"><span data-stu-id="a7743-185">After constructing an animation function from segments, you can append an end segment to cause the animation function to end at a particular time.</span></span> <span data-ttu-id="a7743-186">Se non si aggiunge un segmento finale, il segmento finale della funzione di animazione viene eseguito a tempo indefinito.</span><span class="sxs-lookup"><span data-stu-id="a7743-186">If you do not append an end segment, the final segment of the animation function runs indefinitely.</span></span>

<span data-ttu-id="a7743-187">Si aggiunge un segmento finale chiamando il metodo [**IDCompositionAnimation:: end**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end) , specificando un offset dall'inizio della funzione di animazione che indica il punto finale della funzione.</span><span class="sxs-lookup"><span data-stu-id="a7743-187">You append an end segment by calling the [**IDCompositionAnimation::End**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end) method, specifying an offset from the beginning of the animation function which indicates the function's end point.</span></span> <span data-ttu-id="a7743-188">L'offset deve essere maggiore dell'offset iniziale del segmento precedente.</span><span class="sxs-lookup"><span data-stu-id="a7743-188">The offset must be greater than the beginning offset of the preceding segment.</span></span> <span data-ttu-id="a7743-189">Non è inoltre possibile utilizzare un segmento finale come prima primitiva in una funzione di animazione.</span><span class="sxs-lookup"><span data-stu-id="a7743-189">Also, an end segment cannot be used as the first primitive in an animation function.</span></span>

<span data-ttu-id="a7743-190">Quando si chiama [**end**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end), si specifica anche un valore finale per la proprietà a cui si sta aggiungendo un'animazione.</span><span class="sxs-lookup"><span data-stu-id="a7743-190">When you call [**End**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end), you also specify a final value for the property being animated.</span></span> <span data-ttu-id="a7743-191">La proprietà viene impostata sul valore finale specificato nel momento in cui viene raggiunto il punto finale della funzione di animazione.</span><span class="sxs-lookup"><span data-stu-id="a7743-191">The property is set to the specified final value at the moment when the end point of the animation function is reached.</span></span>

<span data-ttu-id="a7743-192">Dopo l'aggiunta di un segmento finale, non è possibile aggiungere altri segmenti alla funzione di animazione.</span><span class="sxs-lookup"><span data-stu-id="a7743-192">After appending an end segment, you cannot append any other segments to the animation function.</span></span> <span data-ttu-id="a7743-193">Ovvero, tutte le chiamate al metodo sull'oggetto Animation hanno esito negativo, ad eccezione di [**IDCompositionAnimation:: Reset**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-reset).</span><span class="sxs-lookup"><span data-stu-id="a7743-193">That is, all method calls on the animation object fail except [**IDCompositionAnimation::Reset**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-reset).</span></span> <span data-ttu-id="a7743-194">La chiamata di **Reset** restituisce l'oggetto animazione per pulire lo stato in cui la funzione di animazione non contiene segmenti. a questo punto è possibile aggiungere di nuovo segmenti.</span><span class="sxs-lookup"><span data-stu-id="a7743-194">Calling **Reset** returns the animation object to clean state in which the animation function contains no segments, at which point you can once again add segments.</span></span>

## <a name="compatibility-with-windows-animation-manager"></a><span data-ttu-id="a7743-195">Compatibilità con gestione animazioni Windows</span><span class="sxs-lookup"><span data-stu-id="a7743-195">Compatibility with Windows Animation Manager</span></span>

<span data-ttu-id="a7743-196">Gestione animazioni Windows (animazione Windows) genera le primitive di animazione in un formato compatibile con l'API DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="a7743-196">Windows Animation Manager (Windows Animation) outputs animation primitives in a format that is compatible with the DirectComposition API.</span></span> <span data-ttu-id="a7743-197">Ciò significa che DirectComposition può creare animazioni basate sulle primitive di animazione create dall'animazione di Windows.</span><span class="sxs-lookup"><span data-stu-id="a7743-197">This means that DirectComposition can create animations based on animation primitives created by Windows Animation.</span></span>

<span data-ttu-id="a7743-198">Per ulteriori informazioni, vedere [Gestione animazioni Windows](/windows/desktop/UIAnimation/-main-portal), il metodo [**IUIAnimationVariable2:: getcurve**](/windows/desktop/api/uianimation/nf-uianimation-iuianimationvariable2-getcurve) e [gestione dell'animazione DirectComposition con Windows Animation Manager v2](https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/DirectCompositionWindowsAnimationManager).</span><span class="sxs-lookup"><span data-stu-id="a7743-198">For more information, see [Windows Animation Manager](/windows/desktop/UIAnimation/-main-portal), the [**IUIAnimationVariable2::GetCurve**](/windows/desktop/api/uianimation/nf-uianimation-iuianimationvariable2-getcurve) method, and [Managing DirectComposition Animation with Windows Animation Manager v2](https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/DirectCompositionWindowsAnimationManager).</span></span>

## <a name="related-topics"></a><span data-ttu-id="a7743-199">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="a7743-199">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a7743-200">Concetti di DirectComposition</span><span class="sxs-lookup"><span data-stu-id="a7743-200">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 
