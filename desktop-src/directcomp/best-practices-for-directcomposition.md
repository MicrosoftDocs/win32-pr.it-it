---
title: Procedure consigliate per DirectComposition
description: Questo argomento descrive le procedure consigliate per l'uso di Microsoft DirectComposition.
ms.assetid: D3A1ECD4-9358-44B9-8A84-7D901219D5CD
keywords:
- procedure consigliate per DirectComposition
- procedure consigliate per DirectComposition
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2f0d19b82b188105c7914e89282c08b12dd4bdc4
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "103729898"
---
# <a name="best-practices-for-directcomposition"></a><span data-ttu-id="d20b9-105">Procedure consigliate per DirectComposition</span><span class="sxs-lookup"><span data-stu-id="d20b9-105">Best practices for DirectComposition</span></span>

> [!NOTE]
> <span data-ttu-id="d20b9-106">Per le app in Windows 10, è consigliabile usare le API Windows. UI. Composition anziché DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="d20b9-106">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="d20b9-107">Per altre informazioni, vedere [modernizzare l'app desktop usando il livello visivo](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="d20b9-107">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="d20b9-108">Questo argomento descrive le procedure consigliate per l'uso di Microsoft DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="d20b9-108">This topic describes best practices for using Microsoft DirectComposition.</span></span>

-   [<span data-ttu-id="d20b9-109">Procedure consigliate</span><span class="sxs-lookup"><span data-stu-id="d20b9-109">Best practices</span></span>](#best-practices-for-directcomposition)
-   [<span data-ttu-id="d20b9-110">Considerazioni sulla sicurezza</span><span class="sxs-lookup"><span data-stu-id="d20b9-110">Security considerations</span></span>](#security-considerations)
-   [<span data-ttu-id="d20b9-111">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="d20b9-111">Related topics</span></span>](#related-topics)

## <a name="best-practices"></a><span data-ttu-id="d20b9-112">Procedure consigliate</span><span class="sxs-lookup"><span data-stu-id="d20b9-112">Best practices</span></span>

<span data-ttu-id="d20b9-113">La tabella seguente illustra le procedure consigliate per l'uso degli oggetti visivi di Microsoft DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="d20b9-113">The following table presents the practices recommended for working with Microsoft DirectComposition visuals.</span></span>



| <span data-ttu-id="d20b9-114">Procedure consigliate</span><span class="sxs-lookup"><span data-stu-id="d20b9-114">Practice</span></span>                                                                                                                                                                                                                                                        | <span data-ttu-id="d20b9-115">Descrizione</span><span class="sxs-lookup"><span data-stu-id="d20b9-115">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d20b9-116">Dopo la creazione di un dispositivo DirectComposition, chiamare il metodo [**IDCompositionDevice:: CheckDeviceState**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-checkdevicestate) in risposta a ogni messaggio di [**\_ disegno WM**](/windows/desktop/gdi/wm-paint) per verificare che il dispositivo sia ancora valido.</span><span class="sxs-lookup"><span data-stu-id="d20b9-116">After creating a DirectComposition device, call the [**IDCompositionDevice::CheckDeviceState**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-checkdevicestate) method in response to each [**WM\_PAINT**](/windows/desktop/gdi/wm-paint) message to ensure that the device is still valid.</span></span><br/> | <span data-ttu-id="d20b9-117">Se il dispositivo Microsoft DirectX Graphics Infrastructure (DXGI) viene perso, anche il dispositivo DirectComposition associato al dispositivo DXGI viene perso.</span><span class="sxs-lookup"><span data-stu-id="d20b9-117">If the Microsoft DirectX Graphics Infrastructure (DXGI) device is lost, the DirectComposition device associated with the DXGI device is also lost.</span></span> <span data-ttu-id="d20b9-118">Quando rileva un dispositivo smarrito, DirectComposition invia il messaggio di [**\_ disegno WM**](/windows/desktop/gdi/wm-paint) a tutte le finestre.</span><span class="sxs-lookup"><span data-stu-id="d20b9-118">When it detects a lost device, DirectComposition sends the [**WM\_PAINT**](/windows/desktop/gdi/wm-paint) message to all windows.</span></span> <span data-ttu-id="d20b9-119">La chiamata di [**CheckDeviceState**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-checkdevicestate) in risposta a ogni messaggio di **\_ disegno WM** consente di determinare se l'oggetto dispositivo DirectComposition è ancora valido e, in caso contrario, di eseguire le operazioni per ripristinare il contenuto.</span><span class="sxs-lookup"><span data-stu-id="d20b9-119">Calling [**CheckDeviceState**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-checkdevicestate) in response to each **WM\_PAINT** message lets you determine whether the DirectComposition device object is still valid and, if not, take steps to recover content.</span></span> <br/> <span data-ttu-id="d20b9-120">Per altre informazioni, vedere [oggetto dispositivo](basic-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="d20b9-120">For more information, see [Device object](basic-concepts.md).</span></span><br/> |
| <span data-ttu-id="d20b9-121">Creare solo il numero di oggetti visivi necessari per una composizione o un'animazione ed eliminare gli oggetti visivi immediatamente dopo che DirectComposition termina di usarli.</span><span class="sxs-lookup"><span data-stu-id="d20b9-121">Create only the number of visuals needed for a composition or animation, and destroy the visuals immediately after DirectComposition finishes using them.</span></span><br/>                                                                                            | <span data-ttu-id="d20b9-122">DirectComposition usa la GPU (Graphics Processing Unit), una risorsa che l'applicazione condivide con altre applicazioni e il sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="d20b9-122">DirectComposition uses the graphics processing unit (GPU), a resource that your application shares with other applications and the operating system.</span></span> <span data-ttu-id="d20b9-123">Questa procedura garantisce che tutte le applicazioni e il sistema operativo ricevano risorse GPU adeguate.</span><span class="sxs-lookup"><span data-stu-id="d20b9-123">This practice ensures that all applications and the operating system receive adequate GPU resources.</span></span><br/> <span data-ttu-id="d20b9-124">Per altre informazioni, vedere oggetti [visivi](basic-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="d20b9-124">For more information, see [Visuals](basic-concepts.md).</span></span><br/>                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="d20b9-125">Non nascondere gli oggetti visivi impostando l'opacità su 0%; rimuovere invece oggetti visivi dalla struttura ad albero visuale.</span><span class="sxs-lookup"><span data-stu-id="d20b9-125">Do not hide visuals by setting opacity to 0%; instead, remove visuals from the visual tree.</span></span><br/>                                                                                                                                                          | <span data-ttu-id="d20b9-126">Per impostare l'opacità su 0% è necessario disporre di più risorse di sistema rispetto alla rimozione dalla struttura ad albero visuale.</span><span class="sxs-lookup"><span data-stu-id="d20b9-126">Setting opacity to 0% requires more system resources than removing them from the visual tree.</span></span><br/> <span data-ttu-id="d20b9-127">Per altre informazioni, vedere [opacità](effects.md) e [struttura ad albero visuale](basic-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="d20b9-127">For more information, see [Opacity](effects.md) and [Visual tree](basic-concepts.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="d20b9-128">Non nascondere un oggetto visivo applicando un rettangolo di ritaglio vuoto (zero size) a un oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="d20b9-128">Do not hide a visual by applying an empty (zero sized) clip rectangle to a visual.</span></span> <span data-ttu-id="d20b9-129">Rimuovere invece l'oggetto visivo dalla struttura ad albero visuale.</span><span class="sxs-lookup"><span data-stu-id="d20b9-129">Instead, remove the visual from the visual tree.</span></span> <br/>                                                                                                                 | <span data-ttu-id="d20b9-130">La rimozione di un oggetto visivo dalla struttura ad albero visuale comporta prestazioni migliori rispetto all'applicazione di un rettangolo di ritaglio vuoto.</span><span class="sxs-lookup"><span data-stu-id="d20b9-130">Removing a visual from the visual tree results in better performance than applying an empty clip rectangle.</span></span><br/> <span data-ttu-id="d20b9-131">Per ulteriori informazioni, vedere [ritaglio](clipping.md).</span><span class="sxs-lookup"><span data-stu-id="d20b9-131">For more information, see [Clipping](clipping.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="d20b9-132">Non applicare un rettangolo di ritaglio a un oggetto visivo se il rettangolo di ritaglio non è necessario, ad esempio un rettangolo di ritaglio che include l'intero contenuto bitmap dell'oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="d20b9-132">Do not apply a clip rectangle to a visual if the clip rectangle is not needed, such as a clip rectangle that includes the entire bitmap content of the visual.</span></span><br/>                                                                                       | <span data-ttu-id="d20b9-133">I rettangoli di ritaglio non necessari danno le prestazioni del sistema.</span><span class="sxs-lookup"><span data-stu-id="d20b9-133">Unnecessary clip rectangles harm system performance.</span></span><br/> <span data-ttu-id="d20b9-134">Per ulteriori informazioni, vedere [ritaglio](clipping.md).</span><span class="sxs-lookup"><span data-stu-id="d20b9-134">For more information, see [Clipping](clipping.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="d20b9-135">Se è necessaria una bitmap di grandi dimensioni a colore singolo, creare una superficie bitmap più piccola, quindi applicare una trasformazione scala anziché creare una superficie a dimensione intera.</span><span class="sxs-lookup"><span data-stu-id="d20b9-135">If you need a large, single-color bitmap, create a smaller bitmap surface and then apply a scale transform instead of creating a full-sized surface.</span></span> <br/>                                                                                                | <span data-ttu-id="d20b9-136">L'applicazione di una trasformazione di ridimensionamento a una superficie più piccola usa un minor numero di risorse di sistema rispetto a una superficie a dimensione intera.</span><span class="sxs-lookup"><span data-stu-id="d20b9-136">Applying a scale transform to a smaller surface is uses fewer system resources than a full-size surface.</span></span><br/> <span data-ttu-id="d20b9-137">Per altre informazioni, vedere [oggetti bitmap](bitmap-surfaces.md) e [trasformazioni](transforms.md).</span><span class="sxs-lookup"><span data-stu-id="d20b9-137">For more information, see [Bitmap objects](bitmap-surfaces.md) and [Transforms](transforms.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="d20b9-138">Evitare di applicare trasformazioni 3D a più livelli di una struttura ad albero visuale, ad esempio a un padre e ai relativi discendenti.</span><span class="sxs-lookup"><span data-stu-id="d20b9-138">Avoid applying 3D transforms to multiple levels of a visual tree, such as to a parent and its descendent(s).</span></span> <br/>                                                                                                                                        | <span data-ttu-id="d20b9-139">L'applicazione di trasformazioni 3D a più livelli di una struttura ad albero visuale può produrre risultati imprevisti perché le trasformazioni 3D non vengono moltiplicate nell'albero.</span><span class="sxs-lookup"><span data-stu-id="d20b9-139">Applying 3D transforms to multiple levels of a visual tree can produce unintended results because 3D transformations are not multiplied out in the tree.</span></span> <span data-ttu-id="d20b9-140">Ad esempio, una rotazione di 90 gradi intorno all'asse y su un figlio e una rotazione di 90 gradi intorno all'asse y in un elemento padre, il risultato è la rotazione di entrambi gli oggetti visivi.</span><span class="sxs-lookup"><span data-stu-id="d20b9-140">For example, a 90 degree rotation around the y-axis on a child, and a  90 degree rotation around the y-axis on a parent, results in both visuals being rotated away to nothing.</span></span><br/> <span data-ttu-id="d20b9-141">Per altre informazioni, vedere [Effects](effects.md) (Effetti).</span><span class="sxs-lookup"><span data-stu-id="d20b9-141">For more information, see [Effects](effects.md).</span></span><br/>                                                                                                                                                                                                     |



 

## <a name="security-considerations"></a><span data-ttu-id="d20b9-142">Considerazioni relative alla sicurezza</span><span class="sxs-lookup"><span data-stu-id="d20b9-142">Security considerations</span></span>

<span data-ttu-id="d20b9-143">Gli articoli seguenti forniscono indicazioni per la scrittura di codice C++ sicuro.</span><span class="sxs-lookup"><span data-stu-id="d20b9-143">The following articles provide guidance for writing secure C++ code.</span></span>

-   [<span data-ttu-id="d20b9-144">Procedure di protezione ottimali per C++</span><span class="sxs-lookup"><span data-stu-id="d20b9-144">Security Best Practices for C++</span></span>](/cpp/security/security-best-practices-for-cpp?view=vs-2019)
-   <span data-ttu-id="d20b9-145">[Modelli & procedure consigliate per la sicurezza delle applicazioni](/previous-versions/msp-n-p/ff650760(v=pandp.10))</span><span class="sxs-lookup"><span data-stu-id="d20b9-145">[Patterns & Practices Security Guidance for Applications](/previous-versions/msp-n-p/ff650760(v=pandp.10))</span></span>

## <a name="related-topics"></a><span data-ttu-id="d20b9-146">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="d20b9-146">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d20b9-147">Come usare DirectComposition</span><span class="sxs-lookup"><span data-stu-id="d20b9-147">How to Use DirectComposition</span></span>](how-to-use-directcomposition.md)
</dt> </dl>

 

