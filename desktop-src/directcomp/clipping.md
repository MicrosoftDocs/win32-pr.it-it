---
title: Ritaglio (DirectComposition)
description: Questo argomento descrive il supporto di Microsoft DirectComposition per il ritaglio degli oggetti visivi.
ms.assetid: B6E0D8F5-B6B9-40CC-B079-850AC8F2D538
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f4feb537dfb41053dd1099eca7f122b3284dce95
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/10/2020
ms.locfileid: "104400192"
---
# <a name="clipping-directcomposition"></a><span data-ttu-id="5e396-103">Ritaglio (DirectComposition)</span><span class="sxs-lookup"><span data-stu-id="5e396-103">Clipping (DirectComposition)</span></span>

> [!NOTE]
> <span data-ttu-id="5e396-104">Per le app in Windows 10, è consigliabile usare le API Windows. UI. Composition anziché DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="5e396-104">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="5e396-105">Per altre informazioni, vedere [modernizzare l'app desktop usando il livello visivo](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="5e396-105">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="5e396-106">Il ritaglio consente di rivelare solo una parte di una struttura ad albero visuale o visuale limitando il rendering dell'oggetto visivo o dell'albero a una particolare area rettangolare.</span><span class="sxs-lookup"><span data-stu-id="5e396-106">Clipping provides a way to reveal only a portion of a visual or visual tree by limiting the rendering of the visual or tree to a particular rectangular area.</span></span> <span data-ttu-id="5e396-107">Questo argomento descrive il supporto di Microsoft DirectComposition per il ritaglio degli oggetti visivi.</span><span class="sxs-lookup"><span data-stu-id="5e396-107">This topic describes Microsoft DirectComposition support for clipping visuals.</span></span> <span data-ttu-id="5e396-108">Include le sezioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="5e396-108">It includes the following sections:</span></span>

-   [<span data-ttu-id="5e396-109">Rettangolo di ritaglio</span><span class="sxs-lookup"><span data-stu-id="5e396-109">Clip rectangle</span></span>](#clip-rectangle)
-   [<span data-ttu-id="5e396-110">Clip (oggetto)</span><span class="sxs-lookup"><span data-stu-id="5e396-110">Clip object</span></span>](#clip-object)
-   [<span data-ttu-id="5e396-111">Rettangolo di ritaglio animato</span><span class="sxs-lookup"><span data-stu-id="5e396-111">Animated clip rectangle</span></span>](#animated-clip-rectangle)
-   [<span data-ttu-id="5e396-112">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="5e396-112">Related topics</span></span>](#related-topics)

## <a name="clip-rectangle"></a><span data-ttu-id="5e396-113">Rettangolo di ritaglio</span><span class="sxs-lookup"><span data-stu-id="5e396-113">Clip rectangle</span></span>

<span data-ttu-id="5e396-114">Un oggetto visivo ha una proprietà clip che definisce un'area rettangolare o un *rettangolo di ritaglio* nel contenuto bitmap dell'oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="5e396-114">A visual object has a Clip property that defines a rectangular region, or *clip rectangle*, within the visual's bitmap content.</span></span> <span data-ttu-id="5e396-115">Quando viene eseguito il rendering dell'oggetto visivo sullo schermo, viene disegnata solo la parte del contenuto bitmap all'interno del rettangolo di ritaglio, mentre il contenuto che si estende all'esterno del rettangolo di ritaglio viene ritagliato (non disegnato).</span><span class="sxs-lookup"><span data-stu-id="5e396-115">When the visual is rendered to the screen, only the portion of the bitmap content that is inside the clip rectangle is drawn on the screen, while the content that extends outside the clip rectangle is clipped (not drawn).</span></span> <span data-ttu-id="5e396-116">Per impostazione predefinita, la proprietà clip include tutto il contenuto della bitmap.</span><span class="sxs-lookup"><span data-stu-id="5e396-116">By default, the Clip property includes all bitmap content.</span></span>

<span data-ttu-id="5e396-117">La proprietà di ritaglio di un oggetto visivo si applica a tutti gli oggetti visivi figlio e discendente.</span><span class="sxs-lookup"><span data-stu-id="5e396-117">A visual's Clip property applies to all child and descendent visuals.</span></span> <span data-ttu-id="5e396-118">In altre parole, viene ritagliato anche eventuali contenuti figlio o discendenti che non rientrano nei limiti del rettangolo di ritaglio del padre.</span><span class="sxs-lookup"><span data-stu-id="5e396-118">In other words, any child or descendent content that falls outside the bounds of the parent's clip rectangle is also clipped.</span></span>

<span data-ttu-id="5e396-119">DirectComposition applica la proprietà di ritaglio prima di applicare le proprietà della trasformazione OffsetX, OffsetY e 2D, ma dopo aver applicato le proprietà effetto e trasformazione 3D.</span><span class="sxs-lookup"><span data-stu-id="5e396-119">DirectComposition applies the Clip property before applying the OffsetX, OffsetY, and 2D Transform properties, but after applying the Effect and 3D Transform properties.</span></span> <span data-ttu-id="5e396-120">Ciò significa che le trasformazioni 2D, OffsetX e OffsetY avranno effetto sia sul contenuto visivo che sul rettangolo di ritaglio.</span><span class="sxs-lookup"><span data-stu-id="5e396-120">This means that 2D Transforms, OffsetX, and OffsetY, will affect both the visual content, and the clip rectangle.</span></span> <span data-ttu-id="5e396-121">Mentre le trasformazioni 3D e gli effetti non si applicano al rettangolo di ritaglio.</span><span class="sxs-lookup"><span data-stu-id="5e396-121">Whereas 3D transforms and effects will not apply to the clip rectangle.</span></span>

<span data-ttu-id="5e396-122">Ad esempio, quando si applica un offset o una trasformazione 2D, il rettangolo di ritaglio è influenzato dalla matrice di trasformazione.</span><span class="sxs-lookup"><span data-stu-id="5e396-122">For example, when applying an offset or 2D transform, the clip rectangle is affected by the transformation matrix.</span></span> <span data-ttu-id="5e396-123">In questo modo, l'aggiunta di un offset e di una rotazione 2D (45 gradi) insieme a un rettangolo di ritaglio di un angolo arrotondato comporterà la seguente</span><span class="sxs-lookup"><span data-stu-id="5e396-123">So adding an offset and a 2D rotate (45 degrees) along with a rounded corner clip rectangle will result in this:</span></span>

![diagramma che illustra l'effetto di una trasformazione 2D su un rettangolo di ritaglio.](images/clipping2dtransform.png)

<span data-ttu-id="5e396-125">Quando si applica una trasformazione 3D "all'interno di", il rettangolo di ritaglio non è influenzato dalla matrice di trasformazione.</span><span class="sxs-lookup"><span data-stu-id="5e396-125">When applying a 3D transformation “within” the clip rectangle, the clip rectangle is not affected by the transformation matrix.</span></span> <span data-ttu-id="5e396-126">Anche quando si applica una rotazione intorno all'asse Z (in effetti lo stesso dell'esempio precedente), il diagramma seguente è il risultato:</span><span class="sxs-lookup"><span data-stu-id="5e396-126">Even when applying a rotation around the Z axis (effectively the same as the previous example), the following diagram is the result:</span></span>

![diagramma che mostra che una trasformazione 3D non influisce sulla clip rettangolare (l'oggetto visivo ruota all'interno della clip).](images/clipping3dtransform.png)

<span data-ttu-id="5e396-128">Si noti che l'oggetto visivo è stato ruotato all'interno del clip perché la matrice 3D non viene applicata alla clip stessa.</span><span class="sxs-lookup"><span data-stu-id="5e396-128">Note that the visual rotated within the clip because the 3D matrix is not applied to the clip itself.</span></span>

<span data-ttu-id="5e396-129">Se la proprietà clip è impostata su un rettangolo vuoto, l'oggetto visivo viene troncato completamente; ovvero, l'oggetto visivo è incluso nella struttura ad albero visuale, ma non esegue alcun rendering.</span><span class="sxs-lookup"><span data-stu-id="5e396-129">If the Clip property is set to an empty rectangle, the visual is fully clipped; that is, the visual is included in the visual tree, but it does not render anything.</span></span> <span data-ttu-id="5e396-130">Se non si desidera includere un oggetto visivo specifico in una composizione, rimuovere l'oggetto visivo dalla struttura ad albero visuale anziché impostare un rettangolo di ritaglio vuoto.</span><span class="sxs-lookup"><span data-stu-id="5e396-130">If you do not want to include a particular visual in a composition, remove the visual from the visual tree instead of setting an empty clip rectangle.</span></span> <span data-ttu-id="5e396-131">La rimozione dell'oggetto visivo comporta un miglioramento delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="5e396-131">Removing the visual results in better performance.</span></span>

<span data-ttu-id="5e396-132">Per impostare la proprietà clip di un oggetto visivo, usare il metodo [**IDCompositionVisual:: seclip**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(constd2d_rect_f_)) .</span><span class="sxs-lookup"><span data-stu-id="5e396-132">You set the Clip property of a visual by using the [**IDCompositionVisual::SetClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(constd2d_rect_f_)) method.</span></span> <span data-ttu-id="5e396-133">Questo metodo include overload che consentono di impostare il valore della proprietà clip su un rettangolo statico o su un oggetto di ritaglio.</span><span class="sxs-lookup"><span data-stu-id="5e396-133">This method includes overloads that enable you to set the value of the Clip property to a static rectangle or to a clip object.</span></span> <span data-ttu-id="5e396-134">Utilizzare un rettangolo statico se non è necessario modificare le dimensioni del rettangolo di ritaglio nel corso della durata dell'oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="5e396-134">Use a static rectangle if you do not need to change the dimensions of the clip rectangle during the lifetime of the visual.</span></span> <span data-ttu-id="5e396-135">Se è necessario modificare le dimensioni o aggiungere un'animazione al rettangolo di ritaglio, utilizzare un oggetto di ritaglio.</span><span class="sxs-lookup"><span data-stu-id="5e396-135">If you do need to change the dimensions or animate the clip rectangle, use a clip object.</span></span>

## <a name="clip-object"></a><span data-ttu-id="5e396-136">Clip (oggetto)</span><span class="sxs-lookup"><span data-stu-id="5e396-136">Clip object</span></span>

<span data-ttu-id="5e396-137">Un oggetto clip è un oggetto Component Object Model (COM) che rappresenta un rettangolo di ritaglio.</span><span class="sxs-lookup"><span data-stu-id="5e396-137">A clip object is a Component Object Model (COM) object that represents a clip rectangle.</span></span> <span data-ttu-id="5e396-138">Si crea un oggetto clip usando il metodo [**IDCompositionDevice:: CreateRectangleClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createrectangleclip) , quindi si usa l'interfaccia [**IDCompositionRectangleClip**](/windows/win32/api/dcomp/nn-dcomp-idcompositionrectangleclip) dell'oggetto per impostare le proprietà dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="5e396-138">You create a clip object by using the [**IDCompositionDevice::CreateRectangleClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createrectangleclip) method, and then use the object's [**IDCompositionRectangleClip**](/windows/win32/api/dcomp/nn-dcomp-idcompositionrectangleclip) interface to set the properties of the object.</span></span> <span data-ttu-id="5e396-139">Un oggetto ClipArt appena creato presenta i valori minimi possibili per le proprietà Left e Top e i valori massimi possibili per le proprietà Right e Bottom, rendendolo effettivamente un oggetto clip senza op.</span><span class="sxs-lookup"><span data-stu-id="5e396-139">A newly created clip object has the minimum possible values for the Left and Top properties, and the maximum possible values for the Right and Bottom properties, effectively making it a no-op clip object.</span></span> <span data-ttu-id="5e396-140">In altre parole, l'oggetto rappresenta un rettangolo di ritaglio che include l'intero contenuto bitmap di un oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="5e396-140">In other words, the object represents a clip rectangle that would include the entire bitmap content of a visual.</span></span>

<span data-ttu-id="5e396-141">Un oggetto clip include un set di proprietà che consentono di specificare gli angoli arrotondati per l'oggetto di ritaglio.</span><span class="sxs-lookup"><span data-stu-id="5e396-141">A clip object includes a set of properties that enable you to specify rounded corners for the clip object.</span></span> <span data-ttu-id="5e396-142">Le proprietà consentono di impostare il raggio x e il raggio y di ogni angolo dell'oggetto di ritaglio.</span><span class="sxs-lookup"><span data-stu-id="5e396-142">The properties enable you to set the x radius and y radius of each corner of the clipping object.</span></span>

## <a name="animated-clip-rectangle"></a><span data-ttu-id="5e396-143">Rettangolo di ritaglio animato</span><span class="sxs-lookup"><span data-stu-id="5e396-143">Animated clip rectangle</span></span>

<span data-ttu-id="5e396-144">È possibile aggiungere un'animazione a un rettangolo di ritaglio applicando oggetti di animazione alle proprietà Left, top, Right e Bottom di un oggetto clip.</span><span class="sxs-lookup"><span data-stu-id="5e396-144">You can animate a clip rectangle by applying animation objects to the Left, Top, Right, and Bottom properties of a clip object.</span></span> <span data-ttu-id="5e396-145">Usare il metodo di overload [**IDCompositionVisual:: seclip (IDCompositionClip)**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(idcompositionclip)) per applicare il rettangolo di ritaglio animato alla proprietà clip di un oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="5e396-145">Use the [**IDCompositionVisual::SetClip(IDCompositionClip)**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(idcompositionclip)) overloaded method to apply the animated clip rectangle to the Clip property of a visual.</span></span>

<span data-ttu-id="5e396-146">Per ulteriori informazioni sugli oggetti di animazione, vedere [Animation](animation.md).</span><span class="sxs-lookup"><span data-stu-id="5e396-146">For more information about animation objects, see [Animation](animation.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="5e396-147">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="5e396-147">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="5e396-148">Concetti di DirectComposition</span><span class="sxs-lookup"><span data-stu-id="5e396-148">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> <dt>

[<span data-ttu-id="5e396-149">Come eseguire il clip con un oggetto rettangolo clip</span><span class="sxs-lookup"><span data-stu-id="5e396-149">How to Clip with a Rectangle Clip Object</span></span>](how-to--set-the-clip-rectangle-for-a-visual.md)
</dt> </dl>

 

 
