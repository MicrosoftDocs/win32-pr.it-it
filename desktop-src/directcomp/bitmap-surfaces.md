---
title: Oggetti bitmap
description: Questo argomento descrive i tipi di contenuto bitmap supportati da DirectComposition.
ms.assetid: BC32CF76-D5E4-4B25-AFD5-42E8DABFA0D0
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c390778fef1ee7ad96c90a8b7706fa635f3615ff
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104399654"
---
# <a name="bitmap-objects"></a><span data-ttu-id="a841e-103">Oggetti bitmap</span><span class="sxs-lookup"><span data-stu-id="a841e-103">Bitmap objects</span></span>

> [!NOTE]
> <span data-ttu-id="a841e-104">Per le app in Windows 10, è consigliabile usare le API Windows. UI. Composition anziché DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="a841e-104">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="a841e-105">Per altre informazioni, vedere [modernizzare l'app desktop usando il livello visivo](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="a841e-105">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="a841e-106">Microsoft DirectComposition è un motore di composizione bitmap.</span><span class="sxs-lookup"><span data-stu-id="a841e-106">Microsoft DirectComposition is a bitmap compositing engine.</span></span> <span data-ttu-id="a841e-107">Consente agli sviluppatori di applicazioni di combinare più bitmap e di modificarle in diversi modi per ottenere effetti visivi e animazioni interessanti in un'interfaccia utente dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a841e-107">It enables application developers to combine multiple bitmaps and manipulate them in various ways to achieve interesting visual effects and animations in an application UI.</span></span> <span data-ttu-id="a841e-108">Questo argomento descrive i tipi di contenuto bitmap supportati da DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="a841e-108">This topic describes the types of bitmap content that DirectComposition supports.</span></span>

-   [<span data-ttu-id="a841e-109">Contenuto bitmap</span><span class="sxs-lookup"><span data-stu-id="a841e-109">Bitmap content</span></span>](#bitmap-content)
    -   [<span data-ttu-id="a841e-110">Bitmap memoria video</span><span class="sxs-lookup"><span data-stu-id="a841e-110">Video memory bitmaps</span></span>](#video-memory-bitmaps)
    -   [<span data-ttu-id="a841e-111">Bitmap finestra</span><span class="sxs-lookup"><span data-stu-id="a841e-111">Window bitmaps</span></span>](#window-bitmaps)
    -   [<span data-ttu-id="a841e-112">Associazione di contenuto bitmap a un oggetto visivo</span><span class="sxs-lookup"><span data-stu-id="a841e-112">Associating bitmap content with a visual</span></span>](#associating-bitmap-content-with-a-visual)
    -   [<span data-ttu-id="a841e-113">Canale alfa</span><span class="sxs-lookup"><span data-stu-id="a841e-113">Alpha channel</span></span>](#alpha-channel)
-   [<span data-ttu-id="a841e-114">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="a841e-114">Related topics</span></span>](#related-topics)

## <a name="bitmap-content"></a><span data-ttu-id="a841e-115">Contenuto bitmap</span><span class="sxs-lookup"><span data-stu-id="a841e-115">Bitmap content</span></span>

<span data-ttu-id="a841e-116">Le applicazioni forniscono DirectComposition con il contenuto della bitmap per comporre e animare creando oggetti visivi e quindi impostando la [proprietà Content](basic-concepts.md) di tali oggetti.</span><span class="sxs-lookup"><span data-stu-id="a841e-116">Applications provide DirectComposition with the bitmap content to compose and animate by creating visual objects and then setting the [Content property](basic-concepts.md) of those objects.</span></span> <span data-ttu-id="a841e-117">DirectComposition non offre alcun servizio di rasterizzazione.</span><span class="sxs-lookup"><span data-stu-id="a841e-117">DirectComposition does not offer any rasterization services.</span></span> <span data-ttu-id="a841e-118">Per popolare le bitmap da comporre, un'applicazione deve usare altre librerie di rasterizzazione basate su software o con accelerazione hardware, ad esempio [Direct2D](../direct2d/direct2d-portal.md) o [Direct3D](/windows/desktop/direct3d11/atoc-dx-graphics-direct3d-11) .</span><span class="sxs-lookup"><span data-stu-id="a841e-118">An application must use some other software-based or hardware-accelerated rasterization library such as [Direct2D](../direct2d/direct2d-portal.md) or [Direct3D](/windows/desktop/direct3d11/atoc-dx-graphics-direct3d-11) to populate the bitmaps that are to be composed.</span></span> <span data-ttu-id="a841e-119">Dopo la composizione, DirectComposition passa il contenuto della bitmap composto a [Gestione finestre desktop (DWM)](/windows/desktop/dwm/dwm-overview) per il rendering sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="a841e-119">After composing, DirectComposition passes composed bitmap content to [Desktop Window Manager (DWM)](/windows/desktop/dwm/dwm-overview) for rendering to the screen.</span></span>

<span data-ttu-id="a841e-120">**Tipi supportati di contenuto bitmap**   Microsoft DirectComposition supporta i tipi di bitmap seguenti:</span><span class="sxs-lookup"><span data-stu-id="a841e-120">**Supported types of bitmap content** Microsoft DirectComposition supports the following kinds of bitmaps:</span></span>

-   [<span data-ttu-id="a841e-121">Bitmap memoria video</span><span class="sxs-lookup"><span data-stu-id="a841e-121">Video memory bitmaps</span></span>](#video-memory-bitmaps)
-   [<span data-ttu-id="a841e-122">Bitmap finestra</span><span class="sxs-lookup"><span data-stu-id="a841e-122">Window bitmaps</span></span>](#window-bitmaps)

### <a name="video-memory-bitmaps"></a><span data-ttu-id="a841e-123">Bitmap memoria video</span><span class="sxs-lookup"><span data-stu-id="a841e-123">Video memory bitmaps</span></span>

<span data-ttu-id="a841e-124">Una bitmap di memoria video viene rasterizzata nell'hardware usando i metodi Microsoft DirectX (incluso il modello di interoperabilità DX-to-GDI).</span><span class="sxs-lookup"><span data-stu-id="a841e-124">A video memory bitmap is rasterized in hardware by using Microsoft DirectX methods (including the DX-to-GDI interop model).</span></span> <span data-ttu-id="a841e-125">È supportato da superfici condivise tra processi visibili all'applicazione chiamante e a DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="a841e-125">It is backed by cross-process shared surfaces that are visible to the calling application and to DirectComposition.</span></span> <span data-ttu-id="a841e-126">Una bitmap di memoria video non è soggetta a strappi perché l'applicazione può solo leggere dalle superfici da cui DirectComposition le trame.</span><span class="sxs-lookup"><span data-stu-id="a841e-126">A video memory bitmap is not subject to tearing because the application can only read from the surfaces that DirectComposition textures from.</span></span>

### <a name="video-content"></a><span data-ttu-id="a841e-127">Contenuto video</span><span class="sxs-lookup"><span data-stu-id="a841e-127">Video content</span></span>

<span data-ttu-id="a841e-128">Le applicazioni possono usare DirectComposition per comporre fotogrammi video che usano catene di scambio senza finestra DirectX associate a una superficie DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="a841e-128">Applications can use DirectComposition to compose video frames that use DirectX windowless swap chains that are bound to a DirectComposition surface.</span></span> <span data-ttu-id="a841e-129">Concettualmente, DirectComposition considera il contenuto video come una sequenza di bitmap.</span><span class="sxs-lookup"><span data-stu-id="a841e-129">Conceptually, DirectComposition treats video content as a sequence of bitmaps.</span></span> <span data-ttu-id="a841e-130">DirectComposition non fornisce un mezzo per la presentazione di fotogrammi video.</span><span class="sxs-lookup"><span data-stu-id="a841e-130">DirectComposition does not provide a means of presenting video frames.</span></span>

<span data-ttu-id="a841e-131">DirectComposition supporta le catene di scambio senza finestra DirectX, ovvero le catene di scambio non associate a una particolare finestra, e consente a due diverse applicazioni di condividere le catene di scambio senza finestra tra i limiti dei processi.</span><span class="sxs-lookup"><span data-stu-id="a841e-131">DirectComposition supports DirectX windowless swap chains—that is, swap chains that are not bound to a particular window—and enables two different applications to share windowless swap chains across process boundaries.</span></span> <span data-ttu-id="a841e-132">La condivisione di catene di scambio senza finestra consente scenari di video in cui la catena di scambio viene creata in un processo e viene utilizzata con DirectComposition in un secondo processo.</span><span class="sxs-lookup"><span data-stu-id="a841e-132">Sharing windowless swap chains enables video scenarios where the swap chain is created in one process and is used with DirectComposition in a second process.</span></span> <span data-ttu-id="a841e-133">Le catene di scambio senza finestra vengono create usando il metodo [**IDXGIFactory2:: CreateSwapChainForCompositionSurface**](/windows/desktop/api/dxgi1_2/nf-dxgi1_2-idxgifactory2-createswapchainforcomposition) .</span><span class="sxs-lookup"><span data-stu-id="a841e-133">Windowless swap chains are created using the [**IDXGIFactory2::CreateSwapChainForCompositionSurface**](/windows/desktop/api/dxgi1_2/nf-dxgi1_2-idxgifactory2-createswapchainforcomposition) method.</span></span>

<span data-ttu-id="a841e-134">Per altre informazioni sulle catene di scambio DirectX, vedere [Panoramica di DXGI](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span><span class="sxs-lookup"><span data-stu-id="a841e-134">For more information about DirectX swap chains, see [DXGI Overview](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span></span>

### <a name="stereo-content"></a><span data-ttu-id="a841e-135">Contenuto stereo</span><span class="sxs-lookup"><span data-stu-id="a841e-135">Stereo content</span></span>

<span data-ttu-id="a841e-136">A livello concettuale, una catena di swap stereo è costituita da superfici di Microsoft DirectX Graphics Infrastructure (DXGI) che rappresentano i canali sinistro e destro per il contenuto 3D stereo.</span><span class="sxs-lookup"><span data-stu-id="a841e-136">Conceptually, a stereo swap chain consists of Microsoft DirectX Graphics Infrastructure (DXGI) surfaces that represent the left and right channels for stereo 3D content.</span></span> <span data-ttu-id="a841e-137">Quando viene usata una catena di scambio stereo come risorsa bitmap per un oggetto visivo, DirectComposition è in formato stereo.</span><span class="sxs-lookup"><span data-stu-id="a841e-137">When a stereo swap chain is used as the bitmap resource for a visual, DirectComposition composes in stereo.</span></span> <span data-ttu-id="a841e-138">Tutto il contenuto non stereo (contenuto mono) viene considerato con il contenuto del canale sinistro e destro identico; ovvero, viene usato lo stesso contenuto bitmap per entrambi i canali.</span><span class="sxs-lookup"><span data-stu-id="a841e-138">All non-stereo content (mono content) is considered to have identical left and right channel content; that is, the same bitmap content is used for both channels.</span></span> <span data-ttu-id="a841e-139">DirectComposition compone separatamente tutto il contenuto a sinistra e tutto il contenuto corretto.</span><span class="sxs-lookup"><span data-stu-id="a841e-139">DirectComposition composes all left content and all right content separately.</span></span> <span data-ttu-id="a841e-140">Se il dispositivo di visualizzazione non è compatibile con lo stereo, DirectComposition considera il canale stereo sinistro o destro (a seconda dell'applicazione) come contenuto mono e compone solo i dati per la risorsa bitmap.</span><span class="sxs-lookup"><span data-stu-id="a841e-140">If the display device is not stereo capable, DirectComposition treats the left or right stereo channel (depending on the application) as mono content and composes using only that data for the bitmap resource.</span></span>

<span data-ttu-id="a841e-141">DirectComposition non supporta la creazione o la manipolazione di contenuto stereo e non può alzare di livello una catena di scambio mono a una coppia stereo.</span><span class="sxs-lookup"><span data-stu-id="a841e-141">DirectComposition does not support creating or manipulating stereo content, and cannot promote a mono swap chain to a stereo pair.</span></span> <span data-ttu-id="a841e-142">Un'applicazione deve eseguire queste attività prima di presentare contenuto stereo DirectX a DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="a841e-142">An application must perform these tasks before presenting DirectX stereo content to DirectComposition.</span></span> <span data-ttu-id="a841e-143">Inoltre, un'applicazione deve fornire gli offset del canale sinistro e destro per la percezione della profondità; DirectComposition non è in grado di modificare gli offset del canale sinistro e destro per modificare la profondità percepita del contenuto stereo DirectX.</span><span class="sxs-lookup"><span data-stu-id="a841e-143">Also, an application must provide the left and right channel offsets for depth perception; DirectComposition cannot adjust the left and right channel offsets to modify the perceived depth of DirectX stereo content.</span></span>

<span data-ttu-id="a841e-144">Il contenuto stereo DirectX viene composto e reso permanente in DWM quando è disponibile hardware idoneo per la funzionalità stereo.</span><span class="sxs-lookup"><span data-stu-id="a841e-144">DirectX stereo content is composed and persisted to DWM when stereo-capable hardware is available.</span></span>

### <a name="window-bitmaps"></a><span data-ttu-id="a841e-145">Bitmap finestra</span><span class="sxs-lookup"><span data-stu-id="a841e-145">Window bitmaps</span></span>

<span data-ttu-id="a841e-146">Una "bitmap della finestra" non è una bitmap reale, ma è un segnaposto che DirectComposition sostituisce in tempo reale con le rasterizzazioni delle finestre figlio o di primo livello a più livelli.</span><span class="sxs-lookup"><span data-stu-id="a841e-146">A "window bitmap" is not a real bitmap, but is a placeholder that DirectComposition replaces in real time with rasterizations of layered top-level or child windows.</span></span> <span data-ttu-id="a841e-147">Una bitmap della finestra è simile a un'anteprima di DWM, ad eccezione del fatto che un'anteprima può contenere contributi da molte finestre, ad esempio finestre non figlio di proprietà, mentre una bitmap della finestra DirectComposition è sempre una rappresentazione di una sola finestra e dei relativi elementi figlio.</span><span class="sxs-lookup"><span data-stu-id="a841e-147">A window bitmap is similar to a DWM thumbnail, except that a thumbnail can contain contributions from many windows, such as owned non-child windows, whereas a DirectComposition window bitmap is always a representation of just one window and its children.</span></span>

<span data-ttu-id="a841e-148">Poiché DirectComposition ha accesso alle aree di reindirizzamento di tutte le finestre e di tutte le strutture ad albero visive, può riutilizzare il contenuto da una finestra in più alberi visivi.</span><span class="sxs-lookup"><span data-stu-id="a841e-148">Because DirectComposition has access to the redirection surfaces of all windows and all visual trees, it can reuse the content from one window in multiple visual trees.</span></span> <span data-ttu-id="a841e-149">La finestra deve essere sovrapposta perché una finestra non sovrapposta non dispone di una superficie di reindirizzamento dedicata e, pertanto, la rasterizzazione non è sempre disponibile per DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="a841e-149">The window must be layered because a non-layered window does not have a dedicated redirection surface and, therefore, its rasterization is not always available to DirectComposition.</span></span>

<span data-ttu-id="a841e-150">Per utilizzare una bitmap della finestra, un'applicazione associa un oggetto visivo a un handle di finestra (HWND).</span><span class="sxs-lookup"><span data-stu-id="a841e-150">To use a window bitmap, an application associates a visual with a window handle (HWND).</span></span> <span data-ttu-id="a841e-151">Successivamente, DirectComposition ricompone l'oggetto visivo ogni volta che viene modificato il contenuto della finestra, anche quando il contenuto cambia in seguito a modifiche apportate alle strutture ad albero visuali associate alla finestra.</span><span class="sxs-lookup"><span data-stu-id="a841e-151">Afterward, DirectComposition re-composes the visual whenever the contents of the window change, including when the contents change as a result of changes to the visual trees associated with the window.</span></span> <span data-ttu-id="a841e-152">In altre parole, come le anteprime di DWM, le bitmap della finestra DirectComposition sono "attive".</span><span class="sxs-lookup"><span data-stu-id="a841e-152">In other words, like DWM thumbnails, DirectComposition window bitmaps are "live".</span></span>

### <a name="associating-bitmap-content-with-a-visual"></a><span data-ttu-id="a841e-153">Associazione di contenuto bitmap a un oggetto visivo</span><span class="sxs-lookup"><span data-stu-id="a841e-153">Associating bitmap content with a visual</span></span>

<span data-ttu-id="a841e-154">Per tutti e tre i tipi di bitmap, un'applicazione può associare la stessa bitmap a più oggetti visivi, il che significa che una singola allocazione di memoria può essere usata per visualizzare lo stesso contenuto più volte.</span><span class="sxs-lookup"><span data-stu-id="a841e-154">For all three kinds of bitmaps, an application can associate the same bitmap with multiple visuals, which means that a single memory allocation can be used to display the same content several times.</span></span>

### <a name="alpha-channel"></a><span data-ttu-id="a841e-155">Canale alfa</span><span class="sxs-lookup"><span data-stu-id="a841e-155">Alpha channel</span></span>

<span data-ttu-id="a841e-156">Tutte le bitmap hanno un formato di 32 bit per pixel (BPP), che include otto bit per la trasparenza per pixel.</span><span class="sxs-lookup"><span data-stu-id="a841e-156">All bitmaps have a 32 bits per pixel (BPP) format, which includes eight bits for per-pixel transparency.</span></span> <span data-ttu-id="a841e-157">Tuttavia, un'applicazione può specificare la modalità di utilizzo del canale alfa da parte di DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="a841e-157">However, an application can specify how DirectComposition should consume the alpha channel.</span></span> <span data-ttu-id="a841e-158">In particolare, DirectComposition è in grado di rispettare il canale alfa, oppure può ignorare completamente Alpha, nel qual caso la bitmap viene considerata completamente opaca.</span><span class="sxs-lookup"><span data-stu-id="a841e-158">In particular, DirectComposition can respect the alpha channel, or it can ignore alpha altogether, in which case the bitmap is considered to be fully opaque.</span></span>

<span data-ttu-id="a841e-159">Una modalità Alpha aggiuntiva ignora il canale alfa, ma considera i valori rosso, verde e blu come valori alfa per canale anziché l'interpretazione normale di tali canali come intensità dei colori.</span><span class="sxs-lookup"><span data-stu-id="a841e-159">An additional alpha mode ignores the alpha channel, but treats the red, green, and blue values as per-channel alpha values instead of the normal interpretation of those channels as color intensities.</span></span> <span data-ttu-id="a841e-160">Questa modalità è utile per il rendering ClearType, che richiede informazioni sul code coverage dei pixel.</span><span class="sxs-lookup"><span data-stu-id="a841e-160">This mode is useful for ClearType rendering, which requires sub-pixel coverage information.</span></span> <span data-ttu-id="a841e-161">Per usare la modalità Alpha per canale, un'applicazione deve prima di tutto usare [Direct2D](../direct2d/direct2d-portal.md) e [DirectWrite](/windows/desktop/DirectWrite/direct-write-portal) per scrivere i dati di code coverage di pixel in una bitmap.</span><span class="sxs-lookup"><span data-stu-id="a841e-161">To use the per-channel alpha mode, an application must first use [Direct2D](../direct2d/direct2d-portal.md) and [DirectWrite](/windows/desktop/DirectWrite/direct-write-portal) to write sub-pixel coverage data to a bitmap.</span></span> <span data-ttu-id="a841e-162">Successivamente, l'applicazione deve impostare la modalità Alpha corretta e specificare un colore del testo quando associa la bitmap a un oggetto visivo.</span><span class="sxs-lookup"><span data-stu-id="a841e-162">Next the application must set the correct alpha mode and specify a text color when it associates the bitmap with a visual.</span></span> <span data-ttu-id="a841e-163">DirectComposition combina il colore del testo con i dati di code coverage, che producono la fusione ClearType rispetto allo sfondo.</span><span class="sxs-lookup"><span data-stu-id="a841e-163">DirectComposition blends the text color with the coverage data, which produces ClearType blending against the background.</span></span>

<span data-ttu-id="a841e-164">Nelle situazioni in cui l'algoritmo ClearType non è applicabile, ad esempio se la bitmap non è allineata al pixel e allineata all'asse o se è necessario disegnarla in una superficie intermedia, DirectComposition può usare i dati di code coverage dei sottopixel nella bitmap per produrre una rasterizzazione in scala di grigi, automaticamente e senza costi aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="a841e-164">In situations where the ClearType algorithm is not applicable, such as if the bitmap is not pixel-aligned and axis-aligned, or if it needs to be drawn to an intermediate surface, DirectComposition can use the subpixel coverage data in the bitmap to produce a grayscale rasterization instead, automatically and at no additional cost.</span></span>

<span data-ttu-id="a841e-165">Per ulteriori informazioni, vedere la descrizione del parametro *alphaMode* della funzione [**IDCompositionDevice:: CreateSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createsurface) o [**IDCompositionDevice:: CreateVirtualSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createvirtualsurface) .</span><span class="sxs-lookup"><span data-stu-id="a841e-165">For more information, see the description of the *alphaMode* parameter of the [**IDCompositionDevice::CreateSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createsurface) or [**IDCompositionDevice::CreateVirtualSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createvirtualsurface) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a841e-166">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="a841e-166">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a841e-167">Concetti di DirectComposition</span><span class="sxs-lookup"><span data-stu-id="a841e-167">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 