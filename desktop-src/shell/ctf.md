---
description: Flag che controllano il comportamento della funzione chiamante. Usato da SHCreateThread e SHCreateThreadWithHandle. In tali funzioni, questi valori sono definiti come di tipo flag SHCT \_ .
title: Flag CTF (Shlwapi. h)
ms.topic: reference
ms.date: 05/31/2018
ms.assetid: 66cda866-7a39-4c5a-a795-a4c5c64cbab7
api_name:
- CTF_INSIST
- CTF_THREAD_REF
- CTF_PROCESS_REF
- CTF_COINIT_STA
- CTF_COINIT
- CTF_FREELIBANDEXIT
- CTF_REF_COUNTED
- CTF_WAIT_ALLOWCOM
- CTF_UNUSED
- CTF_INHERITWOW64
- CTF_WAIT_NO_REENTRANCY
- CTF_KEYBOARD_LOCALE
- CTF_OLEINITIALIZE
- CTF_COINIT_MTA
- CTF_NOADDREFLIB
api_type:
- HeaderDef
api_location:
- Shlwapi.h
topic_type:
- APIRef
- kbSyntax
ms.openlocfilehash: db0f33daecc4abcbfbc9972d0607f4817bc7ecff
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104977319"
---
# <a name="ctf-flags"></a><span data-ttu-id="cdd2b-105">Flag CTF</span><span class="sxs-lookup"><span data-stu-id="cdd2b-105">CTF Flags</span></span>

<span data-ttu-id="cdd2b-106">Flag che controllano il comportamento della funzione chiamante.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-106">Flags that control the calling function's behavior.</span></span> <span data-ttu-id="cdd2b-107">Usato da [**SHCreateThread**](/windows/desktop/api/Shlwapi/nf-shlwapi-shcreatethread) e [**SHCreateThreadWithHandle**](/windows/desktop/api/Shlwapi/nf-shlwapi-shcreatethreadwithhandle).</span><span class="sxs-lookup"><span data-stu-id="cdd2b-107">Used by [**SHCreateThread**](/windows/desktop/api/Shlwapi/nf-shlwapi-shcreatethread) and [**SHCreateThreadWithHandle**](/windows/desktop/api/Shlwapi/nf-shlwapi-shcreatethreadwithhandle).</span></span> <span data-ttu-id="cdd2b-108">In tali funzioni, questi valori sono definiti come di tipo flag SHCT \_ .</span><span class="sxs-lookup"><span data-stu-id="cdd2b-108">In those functions, these values are defined as being of type SHCT\_FLAGS.</span></span>



| <span data-ttu-id="cdd2b-109">Costante/valore</span><span class="sxs-lookup"><span data-stu-id="cdd2b-109">Constant/value</span></span>                                                                                                                                                                                                                                             | <span data-ttu-id="cdd2b-110">Descrizione</span><span class="sxs-lookup"><span data-stu-id="cdd2b-110">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="CTF_INSIST"></span><span id="ctf_insist"></span><dl> <span data-ttu-id="cdd2b-111"><dt>**CTF \_ INSISTEre**</dt> <dt>0x00000001</dt></span><span class="sxs-lookup"><span data-stu-id="cdd2b-111"><dt>**CTF\_INSIST**</dt> <dt>0x00000001</dt></span></span> </dl>                                       | <span data-ttu-id="cdd2b-112">0x00000001.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-112">0x00000001.</span></span> <span data-ttu-id="cdd2b-113">Se il tentativo di creare il thread con [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread) ha esito negativo, l'impostazione di questo flag provocherà la chiamata sincrona della funzione a cui punta *pfnThreadProc* dal thread chiamante.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-113">If the attempt to create the thread with [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread) fails, setting this flag will cause the function pointed to by *pfnThreadProc* to be called synchronously from the calling thread.</span></span> <span data-ttu-id="cdd2b-114">Questo flag può essere utilizzato solo se *pfnCallback* è **null**.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-114">This flag can be used only if *pfnCallback* is **NULL**.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="CTF_THREAD_REF"></span><span id="ctf_thread_ref"></span><dl> <span data-ttu-id="cdd2b-115"><dt>**CTF \_ 0x00000002 \_ ref thread**</dt> <dt></dt></span><span class="sxs-lookup"><span data-stu-id="cdd2b-115"><dt>**CTF\_THREAD\_REF**</dt> <dt>0x00000002</dt></span></span> </dl>                          | <span data-ttu-id="cdd2b-116">0x00000002.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-116">0x00000002.</span></span> <span data-ttu-id="cdd2b-117">Mantenere un riferimento al thread di creazione per la durata della chiamata alla funzione a cui punta *pfnThreadProc*.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-117">Hold a reference to the creating thread for the duration of the call to the function pointed to by *pfnThreadProc*.</span></span> <span data-ttu-id="cdd2b-118">Questo riferimento deve essere stato impostato con [**SHSetThreadRef**](/windows/desktop/api/Shlwapi/nf-shlwapi-shsetthreadref).</span><span class="sxs-lookup"><span data-stu-id="cdd2b-118">This reference must have been set with [**SHSetThreadRef**](/windows/desktop/api/Shlwapi/nf-shlwapi-shsetthreadref).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span id="CTF_PROCESS_REF"></span><span id="ctf_process_ref"></span><dl> <span data-ttu-id="cdd2b-119"><dt>**CTF \_ 0x00000004 \_ ref processo**</dt> <dt></dt></span><span class="sxs-lookup"><span data-stu-id="cdd2b-119"><dt>**CTF\_PROCESS\_REF**</dt> <dt>0x00000004</dt></span></span> </dl>                       | <span data-ttu-id="cdd2b-120">0x00000004.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-120">0x00000004.</span></span> <span data-ttu-id="cdd2b-121">Mantenere un riferimento al processo di Esplora risorse per la durata della chiamata alla funzione a cui punta *pfnThreadProc*.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-121">Hold a reference to the Windows Explorer process for the duration of the call to the function pointed to by *pfnThreadProc*.</span></span> <span data-ttu-id="cdd2b-122">Questo flag è utile per i [gestori di estensioni della shell](handlers.md), che potrebbero dover evitare la chiusura anomala del processo di Esplora risorse.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-122">This flag is useful for [Shell extension handlers](handlers.md), which might need to keep the Windows Explorer process from closing prematurely.</span></span> <span data-ttu-id="cdd2b-123">Questa azione è utile durante le attività, ad esempio l'utilizzo di un thread in background o la copia di file.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-123">This action is useful during tasks such as working on a background thread or copying files.</span></span> <span data-ttu-id="cdd2b-124">Per ulteriori informazioni, vedere [**SHGetInstanceExplorer**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetinstanceexplorer).</span><span class="sxs-lookup"><span data-stu-id="cdd2b-124">For more information, see [**SHGetInstanceExplorer**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetinstanceexplorer).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="CTF_COINIT_STA"></span><span id="ctf_coinit_sta"></span><dl> <span data-ttu-id="cdd2b-125"><dt>**CTF \_ CoInit \_ sta**</dt> <dt>0x00000008</dt></span><span class="sxs-lookup"><span data-stu-id="cdd2b-125"><dt>**CTF\_COINIT\_STA**</dt> <dt>0x00000008</dt></span></span> </dl>                          | <span data-ttu-id="cdd2b-126">0x00000008.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-126">0x00000008.</span></span> <span data-ttu-id="cdd2b-127">Inizializzare COM come Apartment a thread singolo (STA) per il thread creato prima di chiamare la funzione facoltativa a cui punta *pfnCallback* o la funzione a cui fa riferimento *pfnThreadProc*.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-127">Initialize COM as a Single Threaded Apartment (STA) for the created thread before calling either the optional function pointed to by *pfnCallback* or the function pointed to by *pfnThreadProc*.</span></span> <span data-ttu-id="cdd2b-128">Questo flag è utile quando è necessario inizializzare COM per un thread.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-128">This flag is useful when COM needs to be initialized for a thread.</span></span> <span data-ttu-id="cdd2b-129">COM verrà automaticamente inizializzato.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-129">COM will automatically be uninitialized as well.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span id="CTF_COINIT"></span><span id="ctf_coinit"></span><dl> <span data-ttu-id="cdd2b-130"><dt>**CTF \_ CoInit**</dt> <dt>0x00000008</dt></span><span class="sxs-lookup"><span data-stu-id="cdd2b-130"><dt>**CTF\_COINIT**</dt> <dt>0x00000008</dt></span></span> </dl>                                       | <span data-ttu-id="cdd2b-131">Equivalente a CTF \_ CoInit \_ sta.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-131">Equivalent to CTF\_COINIT\_STA.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span id="CTF_FREELIBANDEXIT"></span><span id="ctf_freelibandexit"></span><dl> <span data-ttu-id="cdd2b-132"><dt>**CTF \_**</dt> <dt>0x00000010</dt> FREELIBANDEXIT</span><span class="sxs-lookup"><span data-stu-id="cdd2b-132"><dt>**CTF\_FREELIBANDEXIT**</dt> <dt>0x00000010</dt></span></span> </dl>               | <span data-ttu-id="cdd2b-133">0x00000010.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-133">0x00000010.</span></span> <span data-ttu-id="cdd2b-134">**Internet Explorer 6 o versione successiva.** [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) verrà chiamato sulla dll che contiene la funzione *pfnThreadProc* per impedire che venga scaricata.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-134">**Internet Explorer 6 or later.**[**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) will be called on the DLL that contains the *pfnThreadProc* function to prevent it from being unloaded.</span></span> <span data-ttu-id="cdd2b-135">Dopo la restituzione di *pfnThreadProc* , la dll verrà liberata con [**FreeLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibrary), diminuendo in tal modo il conteggio dei riferimenti alla dll.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-135">After *pfnThreadProc* returns, the DLL will be freed with [**FreeLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibrary), thereby decrementing the DLL reference count.</span></span> <span data-ttu-id="cdd2b-136">Passare questo flag per impedire che la DLL venga scaricata prematuramente; ad esempio, da [**CoFreeUnusedLibraries**](/windows/win32/api/combaseapi/nf-combaseapi-cofreeunusedlibraries).</span><span class="sxs-lookup"><span data-stu-id="cdd2b-136">Pass this flag to prevent the DLL from being unloaded prematurely; for example, by [**CoFreeUnusedLibraries**](/windows/win32/api/combaseapi/nf-combaseapi-cofreeunusedlibraries).</span></span> <span data-ttu-id="cdd2b-137">Si noti che se questo flag viene passato, la funzione *pfnThreadProc* deve trovarsi in una dll.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-137">Note that if this flag is passed, the *pfnThreadProc* function must reside in a DLL.</span></span> <span data-ttu-id="cdd2b-138">Questo flag è implicito in Windows Vista e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-138">This flag is implicit in Windows Vista and later.</span></span><br/>                                                                                                                                                                                                                                                                   |
| <span id="CTF_REF_COUNTED"></span><span id="ctf_ref_counted"></span><dl> <span data-ttu-id="cdd2b-139"><dt>**CTF \_ 0x00000020 \_ conteggiati Ref**</dt> <dt></dt></span><span class="sxs-lookup"><span data-stu-id="cdd2b-139"><dt>**CTF\_REF\_COUNTED**</dt> <dt>0x00000020</dt></span></span> </dl>                       | <span data-ttu-id="cdd2b-140">0x00000020.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-140">0x00000020.</span></span> <span data-ttu-id="cdd2b-141">**Internet Explorer 6 o versione successiva.**</span><span class="sxs-lookup"><span data-stu-id="cdd2b-141">**Internet Explorer 6 or later.**</span></span> <span data-ttu-id="cdd2b-142">Verrà creato automaticamente un riferimento al thread per il thread creato e impostato con [**SHSetThreadRef**](/windows/desktop/api/Shlwapi/nf-shlwapi-shsetthreadref).</span><span class="sxs-lookup"><span data-stu-id="cdd2b-142">A thread reference will automatically be created for the created thread and set with [**SHSetThreadRef**](/windows/desktop/api/Shlwapi/nf-shlwapi-shsetthreadref).</span></span> <span data-ttu-id="cdd2b-143">Al termine della restituzione di *pfnThreadProc* , il riferimento al thread viene rilasciato e i messaggi vengono inviati fino a quando il conteggio dei riferimenti nel riferimento al thread non scende fino a zero, ovvero fino a quando i thread che dipendono dal thread creato non hanno rilasciato i relativi riferimenti.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-143">After the *pfnThreadProc* returns, the thread reference is released and messages are sent until the reference count on the thread reference drops to zero, that is, until threads that are dependent on the created thread have released their references.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="CTF_WAIT_ALLOWCOM"></span><span id="ctf_wait_allowcom"></span><dl> <span data-ttu-id="cdd2b-144"><dt>**CTF \_ ATTESA \_ ALLOWCOM**</dt> <dt>0x00000040</dt></span><span class="sxs-lookup"><span data-stu-id="cdd2b-144"><dt>**CTF\_WAIT\_ALLOWCOM**</dt> <dt>0x00000040</dt></span></span> </dl>                 | <span data-ttu-id="cdd2b-145">0x00000040.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-145">0x00000040.</span></span> <span data-ttu-id="cdd2b-146">**Internet Explorer 6 o versione successiva.**</span><span class="sxs-lookup"><span data-stu-id="cdd2b-146">**Internet Explorer 6 or later.**</span></span> <span data-ttu-id="cdd2b-147">Il thread chiamante attende e pompa i messaggi COM e [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) .</span><span class="sxs-lookup"><span data-stu-id="cdd2b-147">The calling thread waits and pumps COM and [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) messages.</span></span> <span data-ttu-id="cdd2b-148">Se la procedura sincrona tenta di inviare un messaggio di Windows con **SendMessage** a una finestra ospitata nel thread chiamante, il messaggio verrà visualizzato correttamente.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-148">If the synchronous procedure attempts to send a Windows message with **SendMessage** to a window hosted on the calling thread, the message will arrive successfully.</span></span> <span data-ttu-id="cdd2b-149">Se la procedura sincrona tenta di usare COM per comunicare con un oggetto STA ospitato nel thread chiamante, la chiamata di funzione raggiungerà correttamente l'oggetto previsto.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-149">If the synchronous procedure attempts to use COM to communicate with an STA object hosted on the calling thread, the function call will successfully reach the intended object.</span></span> <span data-ttu-id="cdd2b-150">Il thread chiamante è aperto per rientrare in fragilità.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-150">The calling thread is open to re-entrance fragility.</span></span> <span data-ttu-id="cdd2b-151">Mentre il thread chiamante è in grado di gestire l'uso di **SendMessage** e com da parte di altri thread, se altri thread utilizzano **SendMessage** o com per comunicare con gli oggetti ospitati nel thread chiamante, potrebbero essere messaggi imprevisti o chiamate di funzione elaborati durante il completamento della procedura sincrona.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-151">While the calling thread can handle the synchronous procedure's use of **SendMessage** and COM, if other threads are using **SendMessage** or COM to communicate to objects hosted on the calling thread, then these might be unexpected messages or function calls which are processed while the synchronous procedure is completing.</span></span><br/> |
| <span id="CTF_UNUSED"></span><span id="ctf_unused"></span><dl> <span data-ttu-id="cdd2b-152"><dt>**CTF \_**</dt> <dt>0X00000080</dt> non usato</span><span class="sxs-lookup"><span data-stu-id="cdd2b-152"><dt>**CTF\_UNUSED**</dt> <dt>0x00000080</dt></span></span> </dl>                                       | <span data-ttu-id="cdd2b-153">0x00000080.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-153">0x00000080.</span></span> <span data-ttu-id="cdd2b-154">**Internet Explorer 7 o versione successiva.**</span><span class="sxs-lookup"><span data-stu-id="cdd2b-154">**Internet Explorer 7 or later.**</span></span> <span data-ttu-id="cdd2b-155">Non usato.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-155">Not used.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="CTF_INHERITWOW64"></span><span id="ctf_inheritwow64"></span><dl> <span data-ttu-id="cdd2b-156"><dt>**CTF \_**</dt> <dt>0x00000100</dt> INHERITWOW64</span><span class="sxs-lookup"><span data-stu-id="cdd2b-156"><dt>**CTF\_INHERITWOW64**</dt> <dt>0x00000100</dt></span></span> </dl>                     | <span data-ttu-id="cdd2b-157">0x00000100.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-157">0x00000100.</span></span> <span data-ttu-id="cdd2b-158">**Internet Explorer 7 o versione successiva.**</span><span class="sxs-lookup"><span data-stu-id="cdd2b-158">**Internet Explorer 7 or later.**</span></span> <span data-ttu-id="cdd2b-159">Il nuovo thread eredita lo stato di disabilitazione di Windows-on-Windows a 64 bit (WOW64) per il redirector file system.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-159">The new thread inherits the Windows-on-Windows 64-bit (WOW64) disable state for the file system redirector.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="CTF_WAIT_NO_REENTRANCY"></span><span id="ctf_wait_no_reentrancy"></span><dl> <span data-ttu-id="cdd2b-160"><dt>**CTF \_ \_Non attendere \_**</dt> <dt>0x00000200</dt> rientranti</span><span class="sxs-lookup"><span data-stu-id="cdd2b-160"><dt>**CTF\_WAIT\_NO\_REENTRANCY**</dt> <dt>0x00000200</dt></span></span> </dl> | <span data-ttu-id="cdd2b-161">0x00000200.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-161">0x00000200.</span></span> <span data-ttu-id="cdd2b-162">**Windows Vista o versioni successive.**</span><span class="sxs-lookup"><span data-stu-id="cdd2b-162">**Windows Vista or later.**</span></span> <span data-ttu-id="cdd2b-163">Il thread chiamante blocca tutti gli altri processi in attesa dell'esecuzione della procedura sincrona sul nuovo thread.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-163">The calling thread blocks all other processes while waiting for the synchronous procedure to run on the new thread.</span></span> <span data-ttu-id="cdd2b-164">Se la procedura sincrona tenta di inviare un messaggio di Windows con [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) a una finestra ospitata nel thread chiamante, la procedura sincrona genera un deadlock.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-164">If the synchronous procedure attempts to send a Windows message with [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) to a window hosted on the calling thread, this causes the synchronous procedure to deadlock.</span></span> <span data-ttu-id="cdd2b-165">Se la procedura sincrona tenta di usare COM per comunicare con un oggetto STA ospitato nel thread chiamante, questo causa anche il deadlock della procedura sincrona.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-165">If the synchronous procedure attempts to use COM to talk to an STA object hosted on the calling thread, this also causes the synchronous procedure to deadlock.</span></span> <span data-ttu-id="cdd2b-166">Il thread chiamante è protetto da tutte le problematiche di rientrata specificando questo flag.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-166">The calling thread is protected from all re-entrance concerns by specifying this flag.</span></span><br/>                                                                                                                                                                                                                                                                |
| <span id="CTF_KEYBOARD_LOCALE"></span><span id="ctf_keyboard_locale"></span><dl> <span data-ttu-id="cdd2b-167"><dt>**CTF \_ \_Impostazioni locali tastiera**</dt> <dt>0x00000400</dt></span><span class="sxs-lookup"><span data-stu-id="cdd2b-167"><dt>**CTF\_KEYBOARD\_LOCALE**</dt> <dt>0x00000400</dt></span></span> </dl>           | <span data-ttu-id="cdd2b-168">0x00000400.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-168">0x00000400.</span></span> <span data-ttu-id="cdd2b-169">**Windows 7 o versione successiva.**</span><span class="sxs-lookup"><span data-stu-id="cdd2b-169">**Windows 7 or later.**</span></span> <span data-ttu-id="cdd2b-170">Usare le impostazioni locali della tastiera dal thread originale nel nuovo thread che genera.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-170">Use the keyboard locale from the original thread in the new thread that it spawns.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="CTF_OLEINITIALIZE"></span><span id="ctf_oleinitialize"></span><dl> <span data-ttu-id="cdd2b-171"><dt>**CTF \_**</dt> <dt>0x00000800</dt> OLEINITIALIZE</span><span class="sxs-lookup"><span data-stu-id="cdd2b-171"><dt>**CTF\_OLEINITIALIZE**</dt> <dt>0x00000800</dt></span></span> </dl>                  | <span data-ttu-id="cdd2b-172">0x00000800.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-172">0x00000800.</span></span> <span data-ttu-id="cdd2b-173">**Windows 7 o versione successiva.**</span><span class="sxs-lookup"><span data-stu-id="cdd2b-173">**Windows 7 or later.**</span></span> <span data-ttu-id="cdd2b-174">Inizializzare COM con il modello di Apartment a thread singolo (STA) per il thread creato.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-174">Initialize COM with the single-threaded apartment (STA) model for the created thread.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="CTF_COINIT_MTA"></span><span id="ctf_coinit_mta"></span><dl> <span data-ttu-id="cdd2b-175"><dt>**CTF \_ CoInit \_ MTA**</dt> <dt>0x00001000</dt></span><span class="sxs-lookup"><span data-stu-id="cdd2b-175"><dt>**CTF\_COINIT\_MTA**</dt> <dt>0x00001000</dt></span></span> </dl>                          | <span data-ttu-id="cdd2b-176">0x00001000.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-176">0x00001000.</span></span> <span data-ttu-id="cdd2b-177">**Windows 7 e versioni successive**.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-177">**Windows 7 and later**.</span></span> <span data-ttu-id="cdd2b-178">Inizializzare COM con il modello di Apartment a thread multipli (MTA) per il thread creato.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-178">Initialize COM with the multithreaded apartment (MTA) model for the created thread.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="CTF_NOADDREFLIB"></span><span id="ctf_noaddreflib"></span><dl> <span data-ttu-id="cdd2b-179"><dt>**CTF \_**</dt> <dt>0x00002000</dt> NOADDREFLIB</span><span class="sxs-lookup"><span data-stu-id="cdd2b-179"><dt>**CTF\_NOADDREFLIB**</dt> <dt>0x00002000</dt></span></span> </dl>                        | <span data-ttu-id="cdd2b-180">0x00002000.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-180">0x00002000.</span></span> <span data-ttu-id="cdd2b-181">**Windows 7 o versione successiva.**</span><span class="sxs-lookup"><span data-stu-id="cdd2b-181">**Windows 7 or later.**</span></span> <span data-ttu-id="cdd2b-182">Questo flag è essenzialmente il contrario di CTF \_ FREELIBANDEXIT.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-182">This flag is essentially the opposite of CTF\_FREELIBANDEXIT.</span></span> <span data-ttu-id="cdd2b-183">In questo modo [](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya)si evitano / le chiamate a LoadLibrary [**FreeLibraryAndExitThread**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibraryandexitthread) che possono comportare la contesa del blocco del caricatore.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-183">This avoids [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya)/[**FreeLibraryAndExitThread**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibraryandexitthread) calls that can result in contention for the loader lock.</span></span> <span data-ttu-id="cdd2b-184">Usare la funzione CTF \_ NOADDREFLIB solo quando il nuovo thread ha il significato di garantire che il codice della routine del thread originale rimanga caricato.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-184">Use CTF\_NOADDREFLIB only when the new thread has means to ensure that the code of the original thread procedure will remain loaded.</span></span> <span data-ttu-id="cdd2b-185">Questo valore non deve essere utilizzato nel contesto di oggetti COM, perché gli oggetti COM devono garantire che la DLL rimanga caricata (in genere, COM Scarica le dll).</span><span class="sxs-lookup"><span data-stu-id="cdd2b-185">This value should not be used in the context of COM objects, because COM objects must ensure that the DLL stays loaded (normally, COM unloads the DLLs).</span></span><br/>                                                                                                                                                                                                                                                                                                                    |



## <a name="remarks"></a><span data-ttu-id="cdd2b-186">Commenti</span><span class="sxs-lookup"><span data-stu-id="cdd2b-186">Remarks</span></span>

<span data-ttu-id="cdd2b-187">Se non \_ \_ viene specificato alcun flag di attesa CTF, il thread chiamante attenderà e invierà messaggi [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) .</span><span class="sxs-lookup"><span data-stu-id="cdd2b-187">If no CTF\_WAIT\_ flag is specified, the calling thread will wait and send [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) messages.</span></span> <span data-ttu-id="cdd2b-188">Se la procedura sincrona tenta di inviare un messaggio di Windows con **SendMessage** a una finestra ospitata nel thread chiamante, il messaggio verrà inserito nella finestra desiderata.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-188">If the synchronous procedure attempts to send a Windows message with **SendMessage** to a window hosted on the calling thread, the message will get to the intended window.</span></span> <span data-ttu-id="cdd2b-189">Se la procedura sincrona tenta di usare COM per comunicare con un oggetto STA ospitato nel thread chiamante, la procedura sincrona si blocca.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-189">If the synchronous procedure attempts to use COM to talk to an STA object hosted on the calling thread, the synchronous procedure will deadlock.</span></span> <span data-ttu-id="cdd2b-190">Il thread chiamante è aperto per rientrare in fragilità.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-190">The calling thread is open to re-entrance fragility.</span></span> <span data-ttu-id="cdd2b-191">Mentre il thread chiamante è in grado di gestire l'uso di **SendMessage** per la procedura sincrona, se altri thread utilizzano **SendMessage** per comunicare con una finestra ospitata nel thread chiamante, questi messaggi potrebbero essere imprevisti.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-191">While the calling thread can handle the synchronous procedure's use of **SendMessage**, if other threads use **SendMessage** to communicate to an window hosted on the calling thread, then these messages might be unexpected.</span></span> <span data-ttu-id="cdd2b-192">Ciò può comportarne l'elaborazione durante il completamento della procedura sincrona.</span><span class="sxs-lookup"><span data-stu-id="cdd2b-192">This can cause them to be processed while the synchronous procedure is completing.</span></span>

## <a name="requirements"></a><span data-ttu-id="cdd2b-193">Requisiti</span><span class="sxs-lookup"><span data-stu-id="cdd2b-193">Requirements</span></span>



| <span data-ttu-id="cdd2b-194">Requisito</span><span class="sxs-lookup"><span data-stu-id="cdd2b-194">Requirement</span></span> | <span data-ttu-id="cdd2b-195">Valore</span><span class="sxs-lookup"><span data-stu-id="cdd2b-195">Value</span></span> |
|-------------------------------------|--------------------------------------------------------------------------------------|
| <span data-ttu-id="cdd2b-196">Client minimo supportato</span><span class="sxs-lookup"><span data-stu-id="cdd2b-196">Minimum supported client</span></span><br/> | <span data-ttu-id="cdd2b-197">Windows 2000 Professional, Windows XP, Windows 7 \[ desktop apps\]</span><span class="sxs-lookup"><span data-stu-id="cdd2b-197">Windows 2000 Professional, Windows XP, Windows 7 \[desktop apps only\]</span></span><br/>    |
| <span data-ttu-id="cdd2b-198">Server minimo supportato</span><span class="sxs-lookup"><span data-stu-id="cdd2b-198">Minimum supported server</span></span><br/> | <span data-ttu-id="cdd2b-199">Windows 2000 Server \[solo app desktop\]</span><span class="sxs-lookup"><span data-stu-id="cdd2b-199">Windows 2000 Server \[desktop apps only\]</span></span><br/>                                 |
| <span data-ttu-id="cdd2b-200">Intestazione</span><span class="sxs-lookup"><span data-stu-id="cdd2b-200">Header</span></span><br/>                   | <dl> <span data-ttu-id="cdd2b-201"><dt>Shlwapi. h</dt></span><span class="sxs-lookup"><span data-stu-id="cdd2b-201"><dt>Shlwapi.h</dt></span></span> </dl> |



 

 
