---
description: Tutta la memoria allocata da un processo usando le funzioni di allocazione della memoria (HeapAlloc, VirtualAlloc, GlobalAlloc o LocalAlloc) è accessibile solo al processo.
ms.assetid: b47200dc-6824-4fd8-8d9f-2aaa439a74ff
title: Ambito della memoria allocata
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b8d2db67a04c019683e737d0f9c581ce8d16b800
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104226254"
---
# <a name="scope-of-allocated-memory"></a><span data-ttu-id="9f9e7-103">Ambito della memoria allocata</span><span class="sxs-lookup"><span data-stu-id="9f9e7-103">Scope of Allocated Memory</span></span>

<span data-ttu-id="9f9e7-104">Tutta la memoria allocata da un processo usando le funzioni di allocazione della memoria ( [**HeapAlloc**](/windows/desktop/api/HeapApi/nf-heapapi-heapalloc), [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc), [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc)o [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc)) è accessibile solo al processo.</span><span class="sxs-lookup"><span data-stu-id="9f9e7-104">All memory a process allocates by using the memory allocation functions ( [**HeapAlloc**](/windows/desktop/api/HeapApi/nf-heapapi-heapalloc), [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc), [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc), or [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc)) is accessible only to the process.</span></span> <span data-ttu-id="9f9e7-105">Tuttavia, la memoria allocata da una DLL viene allocata nello spazio degli indirizzi del processo che ha chiamato la DLL e non è accessibile ad altri processi che usano la stessa DLL.</span><span class="sxs-lookup"><span data-stu-id="9f9e7-105">However, memory allocated by a DLL is allocated in the address space of the process that called the DLL and is not accessible to other processes using the same DLL.</span></span> <span data-ttu-id="9f9e7-106">Per creare la memoria condivisa, è necessario utilizzare il mapping dei file.</span><span class="sxs-lookup"><span data-stu-id="9f9e7-106">To create shared memory, you must use file mapping.</span></span>

<span data-ttu-id="9f9e7-107">Il mapping dei file denominati fornisce un modo semplice per creare un blocco di memoria condivisa.</span><span class="sxs-lookup"><span data-stu-id="9f9e7-107">Named file mapping provides an easy way to create a block of shared memory.</span></span> <span data-ttu-id="9f9e7-108">Un processo può specificare un nome quando usa la funzione [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) per creare un oggetto mapping di file.</span><span class="sxs-lookup"><span data-stu-id="9f9e7-108">A process can specify a name when it uses the [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) function to create a file-mapping object.</span></span> <span data-ttu-id="9f9e7-109">Altri processi possono specificare lo stesso nome per la funzione **CreateFileMapping** o [**OpenFileMapping**](/windows/desktop/api/WinBase/nf-winbase-openfilemappinga) per ottenere un handle per l'oggetto di mapping.</span><span class="sxs-lookup"><span data-stu-id="9f9e7-109">Other processes can specify the same name to either the **CreateFileMapping** or [**OpenFileMapping**](/windows/desktop/api/WinBase/nf-winbase-openfilemappinga) function to obtain a handle to the mapping object.</span></span>

<span data-ttu-id="9f9e7-110">Ogni processo specifica il relativo handle per l'oggetto di mapping dei file nella funzione [**MapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffile) per eseguire il mapping di una visualizzazione del file nel proprio spazio degli indirizzi.</span><span class="sxs-lookup"><span data-stu-id="9f9e7-110">Each process specifies its handle to the file-mapping object in the [**MapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffile) function to map a view of the file into its own address space.</span></span> <span data-ttu-id="9f9e7-111">Le visualizzazioni di tutti i processi per un singolo oggetto mapping di file sono mappate alle stesse pagine condivisibili di archiviazione fisica.</span><span class="sxs-lookup"><span data-stu-id="9f9e7-111">The views of all processes for a single file-mapping object are mapped into the same sharable pages of physical storage.</span></span> <span data-ttu-id="9f9e7-112">Tuttavia, gli indirizzi virtuali delle visualizzazioni mappate possono variare da un processo a un altro, a meno che non venga usata la funzione [**MapViewOfFileEx**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffileex) per eseguire il mapping della vista in corrispondenza di un indirizzo specificato.</span><span class="sxs-lookup"><span data-stu-id="9f9e7-112">However, the virtual addresses of the mapped views can vary from one process to another, unless the [**MapViewOfFileEx**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffileex) function is used to map the view at a specified address.</span></span> <span data-ttu-id="9f9e7-113">Sebbene condivisibili, le pagine di archiviazione fisica utilizzate per una visualizzazione file mappata non sono globali. non sono accessibili ai processi che non hanno eseguito il mapping di una visualizzazione del file.</span><span class="sxs-lookup"><span data-stu-id="9f9e7-113">Although sharable, the pages of physical storage used for a mapped file view are not global; they are not accessible to processes that have not mapped a view of the file.</span></span>

<span data-ttu-id="9f9e7-114">Tutte le pagine sottoposte a commit eseguendo il mapping di una vista di un file vengono rilasciate quando l'ultimo processo con una vista dell'oggetto di mapping termina o rimuove il mapping della vista chiamando la funzione [**UnmapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-unmapviewoffile) .</span><span class="sxs-lookup"><span data-stu-id="9f9e7-114">Any pages committed by mapping a view of a file are released when the last process with a view of the mapping object either terminates or unmaps its view by calling the [**UnmapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-unmapviewoffile) function.</span></span> <span data-ttu-id="9f9e7-115">Al momento, viene aggiornato il file specificato, se presente, associato all'oggetto di mapping.</span><span class="sxs-lookup"><span data-stu-id="9f9e7-115">At this time, the specified file (if any) associated with the mapping object is updated.</span></span> <span data-ttu-id="9f9e7-116">È anche possibile forzare l'aggiornamento di un file specificato chiamando la funzione [**FlushViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-flushviewoffile) .</span><span class="sxs-lookup"><span data-stu-id="9f9e7-116">A specified file can also be forced to update by calling the [**FlushViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-flushviewoffile) function.</span></span>

<span data-ttu-id="9f9e7-117">Per ulteriori informazioni, vedere [mapping di file](file-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="9f9e7-117">For more information, see [File Mapping](file-mapping.md).</span></span> <span data-ttu-id="9f9e7-118">Per un esempio di memoria condivisa in una DLL, vedere [uso della memoria condivisa in una libreria di Dynamic-Link](../dlls/using-shared-memory-in-a-dynamic-link-library.md).</span><span class="sxs-lookup"><span data-stu-id="9f9e7-118">For an example of shared memory in a DLL, see [Using Shared Memory in a Dynamic-Link Library](../dlls/using-shared-memory-in-a-dynamic-link-library.md).</span></span>

<span data-ttu-id="9f9e7-119">Se più processi hanno accesso in scrittura alla memoria condivisa, è necessario sincronizzare l'accesso alla memoria.</span><span class="sxs-lookup"><span data-stu-id="9f9e7-119">If multiple processes have write access to shared memory, you must synchronize access to the memory.</span></span> <span data-ttu-id="9f9e7-120">Per ulteriori informazioni, vedere [sincronizzazione](../sync/synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="9f9e7-120">For more information, see [Synchronization](../sync/synchronization.md).</span></span>

 

 
