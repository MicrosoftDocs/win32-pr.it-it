---
description: Protezione esecuzione programmi (DEP) è una funzionalità di protezione della memoria a livello di sistema incorporata nel sistema operativo a partire da Windows XP e Windows Server 2003.
ms.assetid: 75cd83a5-4b77-4ca9-b595-e32d0dd609d0
title: Protezione esecuzione programmi
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8bc53febb383ef2789c2798b091960c2d20856d0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106311742"
---
# <a name="data-execution-prevention"></a><span data-ttu-id="81514-103">Protezione esecuzione programmi</span><span class="sxs-lookup"><span data-stu-id="81514-103">Data Execution Prevention</span></span>

<span data-ttu-id="81514-104">Protezione esecuzione programmi (DEP) è una funzionalità di protezione della memoria a livello di sistema incorporata nel sistema operativo a partire da Windows XP e Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="81514-104">Data Execution Prevention (DEP) is a system-level memory protection feature that is built into the operating system starting with Windows XP and Windows Server 2003.</span></span> <span data-ttu-id="81514-105">DEP consente al sistema di contrassegnare una o più pagine di memoria come non eseguibili.</span><span class="sxs-lookup"><span data-stu-id="81514-105">DEP enables the system to mark one or more pages of memory as non-executable.</span></span> <span data-ttu-id="81514-106">Contrassegnare le aree di memoria come non eseguibile significa che non è possibile eseguire il codice da tale area di memoria, rendendo più difficile l'exploit dei sovraccarichi del buffer.</span><span class="sxs-lookup"><span data-stu-id="81514-106">Marking memory regions as non-executable means that code cannot be run from that region of memory, which makes it harder for the exploitation of buffer overruns.</span></span>

<span data-ttu-id="81514-107">DEP impedisce l'esecuzione del codice da pagine di dati quali heap, stack e pool di memoria predefiniti.</span><span class="sxs-lookup"><span data-stu-id="81514-107">DEP prevents code from being run from data pages such as the default heap, stacks, and memory pools.</span></span> <span data-ttu-id="81514-108">Se un'applicazione tenta di eseguire il codice da una pagina di dati protetta, si verifica un'eccezione di violazione dell'accesso alla memoria e, se l'eccezione non viene gestita, il processo chiamante viene terminato.</span><span class="sxs-lookup"><span data-stu-id="81514-108">If an application attempts to run code from a data page that is protected, a memory access violation exception occurs, and if the exception is not handled, the calling process is terminated.</span></span>

<span data-ttu-id="81514-109">DEP non è progettato per essere una difesa completa contro tutti gli exploit; è concepito come un altro strumento che è possibile usare per proteggere l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="81514-109">DEP is not intended to be a comprehensive defense against all exploits; it is intended to be another tool that you can use to secure your application.</span></span>

## <a name="how-data-execution-prevention-works"></a><span data-ttu-id="81514-110">Funzionamento della prevenzione dell'esecuzione dei dati</span><span class="sxs-lookup"><span data-stu-id="81514-110">How Data Execution Prevention Works</span></span>

<span data-ttu-id="81514-111">Se un'applicazione tenta di eseguire il codice da una pagina protetta, l'applicazione riceve un'eccezione con la **violazione di \_ accesso \_ allo stato** del codice di stato.</span><span class="sxs-lookup"><span data-stu-id="81514-111">If an application attempts to run code from a protected page, the application receives an exception with the status code **STATUS\_ACCESS\_VIOLATION**.</span></span> <span data-ttu-id="81514-112">Se l'applicazione deve eseguire codice da una pagina di memoria, deve allocare e impostare gli attributi di [protezione della memoria](memory-protection.md) virtuale appropriati.</span><span class="sxs-lookup"><span data-stu-id="81514-112">If your application must run code from a memory page, it must allocate and set the proper virtual [memory protection](memory-protection.md) attributes.</span></span> <span data-ttu-id="81514-113">La memoria allocata deve essere contrassegnata come **\_ esecuzione pagina**, esecuzione **\_ \_ lettura pagina**, **pagina \_ esecuzione \_ ReadWrite** o **pagina \_ esecuzione \_ WRITECOPY** durante l'allocazione della memoria.</span><span class="sxs-lookup"><span data-stu-id="81514-113">The allocated memory must be marked **PAGE\_EXECUTE**, **PAGE\_EXECUTE\_READ**, **PAGE\_EXECUTE\_READWRITE**, or **PAGE\_EXECUTE\_WRITECOPY** when allocating memory.</span></span> <span data-ttu-id="81514-114">Le allocazioni di heap effettuate chiamando le funzioni **malloc** e [**HeapAlloc**](/windows/desktop/api/HeapApi/nf-heapapi-heapalloc) non sono eseguibili.</span><span class="sxs-lookup"><span data-stu-id="81514-114">Heap allocations made by calling the **malloc** and [**HeapAlloc**](/windows/desktop/api/HeapApi/nf-heapapi-heapalloc) functions are non-executable.</span></span>

<span data-ttu-id="81514-115">Le applicazioni non possono eseguire codice dall'heap di processo predefinito o dallo stack.</span><span class="sxs-lookup"><span data-stu-id="81514-115">Applications cannot run code from the default process heap or the stack.</span></span>

<span data-ttu-id="81514-116">DEP viene configurato all'avvio del sistema in base all'impostazione dei criteri di protezione della pagina No-Execute nei dati di configurazione di avvio.</span><span class="sxs-lookup"><span data-stu-id="81514-116">DEP is configured at system boot according to the no-execute page protection policy setting in the boot configuration data.</span></span> <span data-ttu-id="81514-117">Un'applicazione può ottenere l'impostazione dei criteri corrente chiamando la funzione [**GetSystemDEPPolicy**](/windows/desktop/api/WinBase/nf-winbase-getsystemdeppolicy) .</span><span class="sxs-lookup"><span data-stu-id="81514-117">An application can get the current policy setting by calling the [**GetSystemDEPPolicy**](/windows/desktop/api/WinBase/nf-winbase-getsystemdeppolicy) function.</span></span> <span data-ttu-id="81514-118">A seconda dell'impostazione dei criteri, un'applicazione può modificare l'impostazione DEP per il processo corrente chiamando la funzione [**SetProcessDEPPolicy**](/windows/desktop/api/WinBase/nf-winbase-setprocessdeppolicy) .</span><span class="sxs-lookup"><span data-stu-id="81514-118">Depending on the policy setting, an application can change the DEP setting for the current process by calling the [**SetProcessDEPPolicy**](/windows/desktop/api/WinBase/nf-winbase-setprocessdeppolicy) function.</span></span>

## <a name="programming-considerations"></a><span data-ttu-id="81514-119">Considerazioni sulla programmazione</span><span class="sxs-lookup"><span data-stu-id="81514-119">Programming Considerations</span></span>

<span data-ttu-id="81514-120">Un'applicazione può utilizzare la funzione [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc) per allocare memoria eseguibile con le opzioni di protezione della memoria appropriate.</span><span class="sxs-lookup"><span data-stu-id="81514-120">An application can use the [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc) function to allocate executable memory with the appropriate memory protection options.</span></span> <span data-ttu-id="81514-121">È consigliabile che un'applicazione configurata come minimo l'opzione di protezione della memoria di **\_ esecuzione della pagina** .</span><span class="sxs-lookup"><span data-stu-id="81514-121">It is suggested that an application set, at a minimum, the **PAGE\_EXECUTE** memory protection option.</span></span> <span data-ttu-id="81514-122">Dopo la generazione del codice eseguibile, è consigliabile che l'applicazione imposti Protezioni di memoria per impedire l'accesso in scrittura alla memoria allocata.</span><span class="sxs-lookup"><span data-stu-id="81514-122">After the executable code is generated, it is recommended that the application set memory protections to disallow write access to the allocated memory.</span></span> <span data-ttu-id="81514-123">Le applicazioni possono impedire l'accesso in scrittura alla memoria allocata tramite la funzione [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) .</span><span class="sxs-lookup"><span data-stu-id="81514-123">Applications can disallow write access to allocated memory by using the [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) function.</span></span> <span data-ttu-id="81514-124">Non consentire l'accesso in scrittura garantisce la massima protezione per le aree eseguibili dello spazio degli indirizzi del processo.</span><span class="sxs-lookup"><span data-stu-id="81514-124">Disallowing write access ensures maximum protection for executable regions of process address space.</span></span> <span data-ttu-id="81514-125">È consigliabile tentare di creare applicazioni che utilizzano lo spazio degli indirizzi eseguibile più piccolo possibile, riducendo al minimo la quantità di memoria esposta allo sfruttamento della memoria.</span><span class="sxs-lookup"><span data-stu-id="81514-125">You should attempt to create applications that use the smallest executable address space possible, which minimizes the amount of memory that is exposed to memory exploitation.</span></span>

<span data-ttu-id="81514-126">È anche necessario provare a controllare il layout della memoria virtuale dell'applicazione e creare aree eseguibili.</span><span class="sxs-lookup"><span data-stu-id="81514-126">You should also attempt to control the layout of your application's virtual memory and create executable regions.</span></span> <span data-ttu-id="81514-127">Queste aree eseguibili devono trovarsi in uno spazio di memoria inferiore rispetto alle aree non eseguibili.</span><span class="sxs-lookup"><span data-stu-id="81514-127">These executable regions should be located in a lower memory space than non-executable regions.</span></span> <span data-ttu-id="81514-128">Individuando le aree eseguibili sotto le aree non eseguibili, è possibile evitare l'overflow del buffer nell'area eseguibile della memoria.</span><span class="sxs-lookup"><span data-stu-id="81514-128">By locating executable regions below non-executable regions, you can help prevent a buffer overflow from overflowing into the executable area of memory.</span></span>

## <a name="application-compatibility"></a><span data-ttu-id="81514-129">Compatibilità delle applicazioni</span><span class="sxs-lookup"><span data-stu-id="81514-129">Application Compatibility</span></span>

<span data-ttu-id="81514-130">Alcune funzionalità dell'applicazione non sono compatibili con DEP.</span><span class="sxs-lookup"><span data-stu-id="81514-130">Some application functionality is incompatible with DEP.</span></span> <span data-ttu-id="81514-131">Le applicazioni che eseguono la generazione di codice dinamico (ad esempio la generazione di codice JIT) e non contrassegnano in modo esplicito il codice generato con l'autorizzazione Execute possono presentare problemi di compatibilità nei computer che utilizzano DEP.</span><span class="sxs-lookup"><span data-stu-id="81514-131">Applications that perform dynamic code generation (such as Just-In-Time code generation) and do not explicitly mark generated code with execute permission may have compatibility issues on computers that are using DEP.</span></span> <span data-ttu-id="81514-132">Le applicazioni scritte nella Active Template Library (ATL) versione 7,1 e versioni precedenti possono tentare di eseguire codice sulle pagine contrassegnate come non eseguibili, che attiva un errore NX e termina l'applicazione. Per ulteriori informazioni, vedere [**SetProcessDEPPolicy**](/windows/desktop/api/WinBase/nf-winbase-setprocessdeppolicy).</span><span class="sxs-lookup"><span data-stu-id="81514-132">Applications written to the Active Template Library (ATL) version 7.1 and earlier can attempt to execute code on pages marked as non-executable, which triggers an NX fault and terminates the application; for more information, see [**SetProcessDEPPolicy**](/windows/desktop/api/WinBase/nf-winbase-setprocessdeppolicy).</span></span> <span data-ttu-id="81514-133">Per il corretto funzionamento, è necessario aggiornare la maggior parte delle applicazioni che eseguono azioni incompatibili con DEP.</span><span class="sxs-lookup"><span data-stu-id="81514-133">Most applications that perform actions incompatible with DEP must be updated to function properly.</span></span>

<span data-ttu-id="81514-134">Un numero ridotto di file eseguibili e librerie può contenere codice eseguibile nella sezione dati di un file di immagine.</span><span class="sxs-lookup"><span data-stu-id="81514-134">A small number of executable files and libraries may contain executable code in the data section of an image file.</span></span> <span data-ttu-id="81514-135">In alcuni casi, le applicazioni possono inserire piccoli segmenti di codice, comunemente definiti thunk, nelle sezioni di dati.</span><span class="sxs-lookup"><span data-stu-id="81514-135">In some cases, applications may place small segments of code (commonly referred to as thunks) in the data sections.</span></span> <span data-ttu-id="81514-136">Tuttavia, DEP contrassegna le sezioni del file di immagine che viene caricato in memoria come non eseguibile, a meno che alla sezione non sia applicato l'attributo Executable.</span><span class="sxs-lookup"><span data-stu-id="81514-136">However, DEP marks sections of the image file that is loaded in memory as non-executable unless the section has the executable attribute applied.</span></span>

<span data-ttu-id="81514-137">Pertanto, è necessario eseguire la migrazione del codice eseguibile nelle sezioni di dati a una sezione di codice oppure la sezione di dati che contiene il codice eseguibile deve essere contrassegnata in modo esplicito come eseguibile.</span><span class="sxs-lookup"><span data-stu-id="81514-137">Therefore, executable code in data sections should be migrated to a code section, or the data section that contains the executable code should be explicitly marked as executable.</span></span> <span data-ttu-id="81514-138">L'attributo eseguibile **Image \_ SCN \_ mem \_ Execute** deve essere aggiunto al campo **caratteristiche** dell'intestazione della sezione corrispondente per le sezioni che contengono codice eseguibile.</span><span class="sxs-lookup"><span data-stu-id="81514-138">The executable attribute, **IMAGE\_SCN\_MEM\_EXECUTE**, should be added to the **Characteristics** field of the corresponding section header for sections that contain executable code.</span></span> <span data-ttu-id="81514-139">Per ulteriori informazioni sull'aggiunta di attributi a una sezione, vedere la documentazione inclusa nel linker.</span><span class="sxs-lookup"><span data-stu-id="81514-139">For more information about adding attributes to a section, see the documentation included with your linker.</span></span>

## <a name="related-topics"></a><span data-ttu-id="81514-140">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="81514-140">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="81514-141">[Protezione esecuzione programmi (TechNet)](/previous-versions/windows/it-pro/windows-xp/bb457155(v=technet.10))</span><span class="sxs-lookup"><span data-stu-id="81514-141">[Data Execution Prevention (TechNet)](/previous-versions/windows/it-pro/windows-xp/bb457155(v=technet.10))</span></span>
</dt> <dt>

[<span data-ttu-id="81514-142">Come configurare la protezione della memoria</span><span class="sxs-lookup"><span data-stu-id="81514-142">How to Configure Memory Protection</span></span>](https://www.microsoft.com/technet/security/prodtech/windowsxp/depcnfxp.mspx)
</dt> <dt>

[<span data-ttu-id="81514-143">Articolo della Knowledge 875352</span><span class="sxs-lookup"><span data-stu-id="81514-143">KB Article 875352</span></span>](https://support.microsoft.com/kb/875352)
</dt> </dl>

 

 
