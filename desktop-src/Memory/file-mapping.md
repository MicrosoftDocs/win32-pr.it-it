---
description: Il mapping dei file è l'associazione del contenuto di un file a una parte dello spazio degli indirizzi virtuali di un processo.
ms.assetid: 86a8bc81-914d-46a2-99fd-65dfd03bbcdd
title: Mapping dei file
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b7f49162a4545d0e087e6b291e429d89049dbf57
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104526370"
---
# <a name="file-mapping"></a><span data-ttu-id="f69ca-103">Mapping dei file</span><span class="sxs-lookup"><span data-stu-id="f69ca-103">File Mapping</span></span>

<span data-ttu-id="f69ca-104">Il *mapping dei file* è l'associazione del contenuto di un file a una parte dello spazio degli indirizzi virtuali di un processo.</span><span class="sxs-lookup"><span data-stu-id="f69ca-104">*File mapping* is the association of a file's contents with a portion of the virtual address space of a process.</span></span> <span data-ttu-id="f69ca-105">Il sistema crea un *oggetto di mapping dei file* (noto anche come *oggetto sezione*) per mantenere questa associazione.</span><span class="sxs-lookup"><span data-stu-id="f69ca-105">The system creates a *file mapping object* (also known as a *section object*) to maintain this association.</span></span> <span data-ttu-id="f69ca-106">Una *visualizzazione file* è la parte dello spazio degli indirizzi virtuali utilizzata da un processo per accedere al contenuto del file.</span><span class="sxs-lookup"><span data-stu-id="f69ca-106">A *file view* is the portion of virtual address space that a process uses to access the file's contents.</span></span> <span data-ttu-id="f69ca-107">Il mapping dei file consente al processo di utilizzare l'input e l'output (I/O) casuali e l'I/O sequenziale.</span><span class="sxs-lookup"><span data-stu-id="f69ca-107">File mapping allows the process to use both random input and output (I/O) and sequential I/O.</span></span> <span data-ttu-id="f69ca-108">Consente inoltre di usare in modo efficiente il processo con un file di dati di grandi dimensioni, ad esempio un database, senza dover eseguire il mapping dell'intero file in memoria.</span><span class="sxs-lookup"><span data-stu-id="f69ca-108">It also allows the process to work efficiently with a large data file, such as a database, without having to map the whole file into memory.</span></span> <span data-ttu-id="f69ca-109">Più processi possono anche usare file mappati alla memoria per condividere i dati.</span><span class="sxs-lookup"><span data-stu-id="f69ca-109">Multiple processes can also use memory-mapped files to share data.</span></span>

<span data-ttu-id="f69ca-110">Elabora le letture e le Scritture nella visualizzazione file usando i puntatori, così come farebbero con la memoria allocata in modo dinamico.</span><span class="sxs-lookup"><span data-stu-id="f69ca-110">Processes read from and write to the file view using pointers, just as they would with dynamically allocated memory.</span></span> <span data-ttu-id="f69ca-111">L'uso del mapping dei file migliora l'efficienza perché il file risiede sul disco, ma la visualizzazione file risiede in memoria.</span><span class="sxs-lookup"><span data-stu-id="f69ca-111">The use of file mapping improves efficiency because the file resides on disk, but the file view resides in memory.</span></span> <span data-ttu-id="f69ca-112">I processi possono anche modificare la visualizzazione file con la funzione [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) .</span><span class="sxs-lookup"><span data-stu-id="f69ca-112">Processes can also manipulate the file view with the [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) function.</span></span>

<span data-ttu-id="f69ca-113">Nella figura seguente viene illustrata la relazione tra il file su disco, un oggetto mapping di file e una visualizzazione file.</span><span class="sxs-lookup"><span data-stu-id="f69ca-113">The following illustration shows the relationship between the file on disk, a file mapping object, and a file view.</span></span>

![relazione tra il file su disco, un oggetto mapping di file e una visualizzazione file.](images/fmap.png)

<span data-ttu-id="f69ca-115">Il file su disco può essere un file di cui si desidera eseguire il mapping in memoria oppure il file di paging di sistema.</span><span class="sxs-lookup"><span data-stu-id="f69ca-115">The file on disk can be any file that you want to map into memory, or it can be the system page file.</span></span> <span data-ttu-id="f69ca-116">L'oggetto di mapping dei file può essere costituito solo da parte del file.</span><span class="sxs-lookup"><span data-stu-id="f69ca-116">The file mapping object can consist of all or only part of the file.</span></span> <span data-ttu-id="f69ca-117">È supportato dal file su disco.</span><span class="sxs-lookup"><span data-stu-id="f69ca-117">It is backed by the file on disk.</span></span> <span data-ttu-id="f69ca-118">Ciò significa che quando il sistema scambia le pagine dell'oggetto mapping di file, tutte le modifiche apportate all'oggetto mapping dei file vengono scritte nel file.</span><span class="sxs-lookup"><span data-stu-id="f69ca-118">This means that when the system swaps out pages of the file mapping object, any changes made to the file mapping object are written to the file.</span></span> <span data-ttu-id="f69ca-119">Quando le pagine dell'oggetto mapping dei file vengono nuovamente scambiate, vengono ripristinate dal file.</span><span class="sxs-lookup"><span data-stu-id="f69ca-119">When the pages of the file mapping object are swapped back in, they are restored from the file.</span></span>

<span data-ttu-id="f69ca-120">Una visualizzazione file può essere costituita solo da parte dell'oggetto mapping di file.</span><span class="sxs-lookup"><span data-stu-id="f69ca-120">A file view can consist of all or only part of the file mapping object.</span></span> <span data-ttu-id="f69ca-121">Un processo modifica il file tramite le visualizzazioni di file.</span><span class="sxs-lookup"><span data-stu-id="f69ca-121">A process manipulates the file through the file views.</span></span> <span data-ttu-id="f69ca-122">Un processo può creare più visualizzazioni per un oggetto mapping di file.</span><span class="sxs-lookup"><span data-stu-id="f69ca-122">A process can create multiple views for a file mapping object.</span></span> <span data-ttu-id="f69ca-123">Le visualizzazioni di file create da ogni processo si trovano nello spazio degli indirizzi virtuale del processo.</span><span class="sxs-lookup"><span data-stu-id="f69ca-123">The file views created by each process reside in the virtual address space of that process.</span></span> <span data-ttu-id="f69ca-124">Quando il processo richiede dati da una parte del file diversa da quella presente nella visualizzazione file corrente, può annullare la visualizzazione file corrente, quindi creare una nuova visualizzazione file.</span><span class="sxs-lookup"><span data-stu-id="f69ca-124">When the process needs data from a portion of the file other than what is in the current file view, it can unmap the current file view, then create a new file view.</span></span>

<span data-ttu-id="f69ca-125">Quando più processi utilizzano lo stesso oggetto mapping di file per creare visualizzazioni per un file locale, i dati sono coerenti.</span><span class="sxs-lookup"><span data-stu-id="f69ca-125">When multiple processes use the same file mapping object to create views for a local file, the data is coherent.</span></span> <span data-ttu-id="f69ca-126">Ovvero le visualizzazioni contengono copie identiche del file su disco.</span><span class="sxs-lookup"><span data-stu-id="f69ca-126">That is, the views contain identical copies of the file on disk.</span></span> <span data-ttu-id="f69ca-127">Il file non può risiedere in un computer remoto se si desidera condividere la memoria tra più processi.</span><span class="sxs-lookup"><span data-stu-id="f69ca-127">The file cannot reside on a remote computer if you want to share memory between multiple processes.</span></span>

<span data-ttu-id="f69ca-128">Per altre informazioni, vedere i seguenti argomenti:</span><span class="sxs-lookup"><span data-stu-id="f69ca-128">For more information, see the following topics:</span></span>

-   [<span data-ttu-id="f69ca-129">Creazione di un oggetto di mapping dei file</span><span class="sxs-lookup"><span data-stu-id="f69ca-129">Creating a File Mapping Object</span></span>](creating-a-file-mapping-object.md)
-   [<span data-ttu-id="f69ca-130">Creazione di una visualizzazione file</span><span class="sxs-lookup"><span data-stu-id="f69ca-130">Creating a File View</span></span>](creating-a-file-view.md)
-   [<span data-ttu-id="f69ca-131">Condivisione di file e memoria</span><span class="sxs-lookup"><span data-stu-id="f69ca-131">Sharing Files and Memory</span></span>](sharing-files-and-memory.md)
-   [<span data-ttu-id="f69ca-132">Lettura e scrittura da una visualizzazione file</span><span class="sxs-lookup"><span data-stu-id="f69ca-132">Reading and Writing From a File View</span></span>](reading-and-writing-from-a-file-view.md)
-   [<span data-ttu-id="f69ca-133">Chiusura di un oggetto di mapping dei file</span><span class="sxs-lookup"><span data-stu-id="f69ca-133">Closing a File Mapping Object</span></span>](closing-a-file-mapping-object.md)
-   [<span data-ttu-id="f69ca-134">Diritti di accesso e sicurezza per il mapping dei file</span><span class="sxs-lookup"><span data-stu-id="f69ca-134">File Mapping Security and Access Rights</span></span>](file-mapping-security-and-access-rights.md)
-   [<span data-ttu-id="f69ca-135">Uso del mapping dei file</span><span class="sxs-lookup"><span data-stu-id="f69ca-135">Using File Mapping</span></span>](using-file-mapping.md)

 

 
