---
description: Le funzioni globali e locali sono supportate per il porting dal codice a 16 bit o per la gestione della compatibilità del codice sorgente con Windows a 16 bit.
ms.assetid: 97707ce7-4c65-4d0e-ba69-47fdaee73a9b
title: Funzioni globali e locali
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cf356647f92f0e7d82e914a91020c438363ff082
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103879069"
---
# <a name="global-and-local-functions"></a><span data-ttu-id="3999a-103">Funzioni globali e locali</span><span class="sxs-lookup"><span data-stu-id="3999a-103">Global and Local Functions</span></span>

<span data-ttu-id="3999a-104">Le funzioni globali e locali sono supportate per il porting dal codice a 16 bit o per la gestione della compatibilità del codice sorgente con Windows a 16 bit.</span><span class="sxs-lookup"><span data-stu-id="3999a-104">The global and local functions are supported for porting from 16-bit code, or for maintaining source code compatibility with 16-bit Windows.</span></span> <span data-ttu-id="3999a-105">A partire da Windows a 32 bit, le funzioni globali e locali vengono implementate come funzioni wrapper che chiamano le [funzioni heap](heap-functions.md) corrispondenti usando un handle per l'heap predefinito del processo.</span><span class="sxs-lookup"><span data-stu-id="3999a-105">Starting with 32-bit Windows, the global and local functions are implemented as wrapper functions that call the corresponding [heap functions](heap-functions.md) using a handle to the process's default heap.</span></span> <span data-ttu-id="3999a-106">Pertanto, le funzioni globali e locali hanno un sovraccarico maggiore rispetto ad altre funzioni di gestione della memoria.</span><span class="sxs-lookup"><span data-stu-id="3999a-106">Therefore, the global and local functions have greater overhead than other memory management functions.</span></span>

<span data-ttu-id="3999a-107">Le [funzioni heap](heap-functions.md) forniscono maggiori funzionalità e controllo rispetto alle funzioni globali e locali.</span><span class="sxs-lookup"><span data-stu-id="3999a-107">The [heap functions](heap-functions.md) provide more features and control than the global and local functions.</span></span> <span data-ttu-id="3999a-108">Le nuove applicazioni devono usare le funzioni di heap, a meno che la documentazione non riferisca specificamente la funzione globale o locale da usare.</span><span class="sxs-lookup"><span data-stu-id="3999a-108">New applications should use the heap functions unless documentation specifically states that a global or local function should be used.</span></span> <span data-ttu-id="3999a-109">Alcune funzioni di Windows, ad esempio, allocano memoria che deve essere liberata con [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree)e le funzioni globali vengono ancora utilizzate con Dynamic Data Exchange (DDE), le funzioni degli Appunti e gli oggetti dati OLE.</span><span class="sxs-lookup"><span data-stu-id="3999a-109">For example, some Windows functions allocate memory that must be freed with [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree), and the global functions are still used with Dynamic Data Exchange (DDE), the clipboard functions, and OLE data objects.</span></span> <span data-ttu-id="3999a-110">Per un elenco completo delle funzioni globali e locali, vedere la tabella in [funzioni di gestione della memoria](memory-management-functions.md).</span><span class="sxs-lookup"><span data-stu-id="3999a-110">For a complete list of global and local functions, see the table in [Memory Management Functions](memory-management-functions.md).</span></span>

<span data-ttu-id="3999a-111">Gestione memoria Windows non fornisce un heap locale e un heap globale distinti, come avviene in Windows a 16 bit.</span><span class="sxs-lookup"><span data-stu-id="3999a-111">Windows memory management does not provide a separate local heap and global heap, as 16-bit Windows does.</span></span> <span data-ttu-id="3999a-112">Di conseguenza, le famiglie globali e locali di funzioni sono equivalenti e la scelta tra di esse è una questione di preferenza personale.</span><span class="sxs-lookup"><span data-stu-id="3999a-112">As a result, the global and local families of functions are equivalent and choosing between them is a matter of personal preference.</span></span> <span data-ttu-id="3999a-113">Si noti che la modifica da un modello di memoria segmentata a 16 bit a un modello di memoria virtuale a 32 bit ha fatto in modo che alcune delle funzioni globali e locali correlate e le relative opzioni non siano necessarie o non significative.</span><span class="sxs-lookup"><span data-stu-id="3999a-113">Note that the change from a 16-bit segmented memory model to a 32-bit virtual memory model has made some of the related global and local functions and their options unnecessary or meaningless.</span></span> <span data-ttu-id="3999a-114">Ad esempio, non ci sono più puntatori quasi e lontani, perché le allocazioni locali e globali restituiscono indirizzi virtuali a 32 bit.</span><span class="sxs-lookup"><span data-stu-id="3999a-114">For example, there are no longer near and far pointers, because both local and global allocations return 32-bit virtual addresses.</span></span>

<span data-ttu-id="3999a-115">Gli oggetti memoria allocati da [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) e [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) si trovano in pagine private di cui è stato eseguito il commit con accesso in lettura/scrittura a cui non è possibile accedere da altri processi.</span><span class="sxs-lookup"><span data-stu-id="3999a-115">Memory objects allocated by [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) and [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) are in private, committed pages with read/write access that cannot be accessed by other processes.</span></span> <span data-ttu-id="3999a-116">La memoria allocata usando **GlobalAlloc** con **GMEM \_ DDESHARE** non è effettivamente condivisa globalmente come in Windows a 16 bit.</span><span class="sxs-lookup"><span data-stu-id="3999a-116">Memory allocated by using **GlobalAlloc** with **GMEM\_DDESHARE** is not actually shared globally as it is in 16-bit Windows.</span></span> <span data-ttu-id="3999a-117">Questo valore non ha alcun effetto ed è disponibile solo per la compatibilità.</span><span class="sxs-lookup"><span data-stu-id="3999a-117">This value has no effect and is available only for compatibility.</span></span> <span data-ttu-id="3999a-118">Le applicazioni che richiedono memoria condivisa per altri scopi devono usare oggetti di mapping di file.</span><span class="sxs-lookup"><span data-stu-id="3999a-118">Applications requiring shared memory for other purposes must use file-mapping objects.</span></span> <span data-ttu-id="3999a-119">Più processi possono eseguire il mapping di una visualizzazione dello stesso oggetto mapping di file per fornire la memoria condivisa denominata.</span><span class="sxs-lookup"><span data-stu-id="3999a-119">Multiple processes can map a view of the same file-mapping object to provide named shared memory.</span></span> <span data-ttu-id="3999a-120">Per ulteriori informazioni, vedere [mapping di file](file-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="3999a-120">For more information, see [File Mapping](file-mapping.md).</span></span>

<span data-ttu-id="3999a-121">Le allocazioni di memoria sono limitate solo dalla memoria fisica disponibile, inclusa l'archiviazione nel file di paging su disco.</span><span class="sxs-lookup"><span data-stu-id="3999a-121">Memory allocations are limited only by the available physical memory, including storage in the paging file on disk.</span></span> <span data-ttu-id="3999a-122">Quando si alloca memoria fissa, [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) e [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) restituiscono un puntatore che il processo chiamante può utilizzare immediatamente per accedere alla memoria.</span><span class="sxs-lookup"><span data-stu-id="3999a-122">When you allocate fixed memory, [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) and [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) return a pointer that the calling process can immediately use to access the memory.</span></span> <span data-ttu-id="3999a-123">Quando si alloca memoria mobile, il valore restituito è un handle.</span><span class="sxs-lookup"><span data-stu-id="3999a-123">When you allocate moveable memory, the return value is a handle.</span></span> <span data-ttu-id="3999a-124">Per ottenere un puntatore a un oggetto di memoria mobile, usare le funzioni [**funzione GlobalLock**](/windows/desktop/api/WinBase/nf-winbase-globallock) e [**LocalLock**](/windows/desktop/api/WinBase/nf-winbase-locallock) .</span><span class="sxs-lookup"><span data-stu-id="3999a-124">To get a pointer to a movable memory object, use the [**GlobalLock**](/windows/desktop/api/WinBase/nf-winbase-globallock) and [**LocalLock**](/windows/desktop/api/WinBase/nf-winbase-locallock) functions.</span></span>

<span data-ttu-id="3999a-125">Le dimensioni effettive della memoria allocata possono essere maggiori delle dimensioni richieste.</span><span class="sxs-lookup"><span data-stu-id="3999a-125">The actual size of the memory allocated can be larger than the requested size.</span></span> <span data-ttu-id="3999a-126">Per determinare il numero effettivo di byte allocati, usare la funzione [**GlobalSize**](/windows/desktop/api/WinBase/nf-winbase-globalsize) o [**LocalSize**](/windows/desktop/api/WinBase/nf-winbase-localsize) .</span><span class="sxs-lookup"><span data-stu-id="3999a-126">To determine the actual number of bytes allocated, use the [**GlobalSize**](/windows/desktop/api/WinBase/nf-winbase-globalsize) or [**LocalSize**](/windows/desktop/api/WinBase/nf-winbase-localsize) function.</span></span> <span data-ttu-id="3999a-127">Se la quantità allocata è maggiore della quantità richiesta, il processo può utilizzare l'intero importo.</span><span class="sxs-lookup"><span data-stu-id="3999a-127">If the amount allocated is greater than the amount requested, the process can use the entire amount.</span></span>

<span data-ttu-id="3999a-128">Le funzioni [**GlobalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc) e [**LocalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-localrealloc) modificano le dimensioni o gli attributi di un oggetto Memory allocato da [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) e [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc).</span><span class="sxs-lookup"><span data-stu-id="3999a-128">The [**GlobalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc) and [**LocalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-localrealloc) functions change the size or the attributes of a memory object allocated by [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) and [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc).</span></span> <span data-ttu-id="3999a-129">È possibile aumentare o diminuire le dimensioni.</span><span class="sxs-lookup"><span data-stu-id="3999a-129">The size can increase or decrease.</span></span>

<span data-ttu-id="3999a-130">Le funzioni [**GlobalFree**](/windows/desktop/api/WinBase/nf-winbase-globalfree) e [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree) rilasciano memoria allocata da [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc), [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc), [**GlobalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc)o [**LocalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-localrealloc).</span><span class="sxs-lookup"><span data-stu-id="3999a-130">The [**GlobalFree**](/windows/desktop/api/WinBase/nf-winbase-globalfree) and [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree) functions release memory allocated by [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc), [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc), [**GlobalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc), or [**LocalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-localrealloc).</span></span> <span data-ttu-id="3999a-131">Per rimuovere l'oggetto di memoria specificato senza invalidare l'handle, utilizzare la funzione [**GlobalDiscard**](/windows/desktop/api/WinBase/nf-winbase-globaldiscard) o [**LocalDiscard**](/windows/win32/api/minwinbase/nf-minwinbase-localdiscard) .</span><span class="sxs-lookup"><span data-stu-id="3999a-131">To discard the specified memory object without invalidating the handle, use the [**GlobalDiscard**](/windows/desktop/api/WinBase/nf-winbase-globaldiscard) or [**LocalDiscard**](/windows/win32/api/minwinbase/nf-minwinbase-localdiscard) function.</span></span> <span data-ttu-id="3999a-132">L'handle può essere usato in un secondo momento da **GlobalReAlloc** o **LocalReAlloc** per allocare un nuovo blocco di memoria associato allo stesso handle.</span><span class="sxs-lookup"><span data-stu-id="3999a-132">The handle can be used later by **GlobalReAlloc** or **LocalReAlloc** to allocate a new block of memory associated with the same handle.</span></span>

<span data-ttu-id="3999a-133">Per restituire informazioni su un oggetto di memoria specificato, utilizzare la funzione [**GlobalFlags**](/windows/desktop/api/WinBase/nf-winbase-globalflags) o [**LocalFlags**](/windows/desktop/api/WinBase/nf-winbase-localflags) .</span><span class="sxs-lookup"><span data-stu-id="3999a-133">To return information about a specified memory object, use the [**GlobalFlags**](/windows/desktop/api/WinBase/nf-winbase-globalflags) or [**LocalFlags**](/windows/desktop/api/WinBase/nf-winbase-localflags) function.</span></span> <span data-ttu-id="3999a-134">Le informazioni includono il conteggio dei blocchi dell'oggetto e indica se l'oggetto è rimossa o se è già stato rimosso.</span><span class="sxs-lookup"><span data-stu-id="3999a-134">The information includes the object's lock count and indicates whether the object is discardable or has already been discarded.</span></span> <span data-ttu-id="3999a-135">Per restituire un handle all'oggetto Memory associato a un puntatore specificato, utilizzare la funzione [**GlobalHandle**](/windows/desktop/api/WinBase/nf-winbase-globalhandle) o [**LocalHandle**](/windows/desktop/api/WinBase/nf-winbase-localhandle) .</span><span class="sxs-lookup"><span data-stu-id="3999a-135">To return a handle to the memory object associated with a specified pointer, use the [**GlobalHandle**](/windows/desktop/api/WinBase/nf-winbase-globalhandle) or [**LocalHandle**](/windows/desktop/api/WinBase/nf-winbase-localhandle) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="3999a-136">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="3999a-136">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3999a-137">Confronto tra i metodi di allocazione della memoria</span><span class="sxs-lookup"><span data-stu-id="3999a-137">Comparing Memory Allocation Methods</span></span>](comparing-memory-allocation-methods.md)
</dt> </dl>

 

 
