---
description: 'Ottimizzazione da 4 gigabyte: BCDEdit e Boot.ini'
ms.assetid: 991eb86f-9e6f-4084-8b6f-f979e42104b5
title: 'Ottimizzazione da 4 gigabyte: BCDEdit e Boot.ini'
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f997ae09748370d5ec8ec246da80b6440d7aaf45
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104227408"
---
# <a name="4-gigabyte-tuning-bcdedit-and-bootini"></a><span data-ttu-id="db033-103">Ottimizzazione da 4 gigabyte: BCDEdit e Boot.ini</span><span class="sxs-lookup"><span data-stu-id="db033-103">4-Gigabyte Tuning: BCDEdit and Boot.ini</span></span>

<span data-ttu-id="db033-104">Nelle edizioni di Windows a 32 bit, le applicazioni dispongono di 4 gigabyte (GB) di spazio degli indirizzi virtuali disponibili.</span><span class="sxs-lookup"><span data-stu-id="db033-104">On 32-bit editions of Windows, applications have 4 gigabyte (GB) of virtual address space available.</span></span> <span data-ttu-id="db033-105">Lo spazio degli indirizzi virtuali è diviso in modo che 2 GB siano disponibili per l'applicazione e gli altri 2 GB siano disponibili solo per il sistema.</span><span class="sxs-lookup"><span data-stu-id="db033-105">The virtual address space is divided so that 2 GB is available to the application and the other 2 GB is available only to the system.</span></span> <span data-ttu-id="db033-106">La funzionalità di ottimizzazione da 4 gigabyte (4GT o 4GT RAM), abilitata con il comando *bcdedit/set increaseuserva* , aumenta lo spazio degli indirizzi virtuale disponibile per l'applicazione fino a 3 GB e riduce la quantità di spazio disponibile per il sistema a un valore compreso tra 1 e 2 GB.</span><span class="sxs-lookup"><span data-stu-id="db033-106">The 4-gigabyte tuning (4GT or 4GT RAM Tuning) feature, enabled with the *BCDEdit /set increaseuserva* command, increases the virtual address space that is available to the application up to 3 GB, and reduces the amount available to the system to between 1 and 2 GB.</span></span>

<span data-ttu-id="db033-107">Per le applicazioni con utilizzo intensivo della memoria, ad esempio sistemi di gestione di database (DBMS), l'utilizzo di uno spazio degli indirizzi virtuali più grande può offrire notevoli vantaggi in merito a prestazioni e scalabilità.</span><span class="sxs-lookup"><span data-stu-id="db033-107">For applications that are memory-intensive, such as database management systems (DBMS), the use of a larger virtual address space can provide considerable performance and scalability benefits.</span></span> <span data-ttu-id="db033-108">Tuttavia, la cache di file, il pool di paging e il pool non di paging sono più piccoli, che possono influire negativamente sulle applicazioni con rete o I/O intensiva.</span><span class="sxs-lookup"><span data-stu-id="db033-108">However, the file cache, paged pool, and nonpaged pool are smaller, which can adversely affect applications with heavy networking or I/O.</span></span> <span data-ttu-id="db033-109">Pertanto, è consigliabile testare l'applicazione sotto carico ed esaminare i contatori delle prestazioni per determinare se l'applicazione trae vantaggio dallo spazio degli indirizzi più grande.</span><span class="sxs-lookup"><span data-stu-id="db033-109">Therefore, you might want to test your application under load, and examine the performance counters to determine whether your application benefits from the larger address space.</span></span>

<span data-ttu-id="db033-110">Per abilitare 4GT, usare il comando [bcdedit/set](/windows-hardware/drivers/devtest/bcdedit--set) per impostare l'opzione della voce di avvio **increaseuserva** su un valore compreso tra 2048 (2 GB) e 3072 (3 GB).</span><span class="sxs-lookup"><span data-stu-id="db033-110">To enable 4GT, use the [BCDEdit /set](/windows-hardware/drivers/devtest/bcdedit--set) command to set the **increaseuserva** boot entry option to a value between 2048 (2 GB) and 3072 (3 GB).</span></span>

<span data-ttu-id="db033-111">**Windows Server 2003 e versioni precedenti:** Per abilitare 4GT, aggiungere l'opzione **/3GB** al file Boot.ini.</span><span class="sxs-lookup"><span data-stu-id="db033-111">**Windows Server 2003 and earlier:** To enable 4GT, add the **/3GB** switch to the Boot.ini file.</span></span> <span data-ttu-id="db033-112">L'opzione **/3GB** è supportata nei sistemi seguenti:</span><span class="sxs-lookup"><span data-stu-id="db033-112">The **/3GB** switch is supported on the following systems:</span></span>

-   <span data-ttu-id="db033-113">Windows Server 2003</span><span class="sxs-lookup"><span data-stu-id="db033-113">Windows Server 2003</span></span>
-   <span data-ttu-id="db033-114">Windows XP Professional</span><span class="sxs-lookup"><span data-stu-id="db033-114">Windows XP Professional</span></span>

<span data-ttu-id="db033-115">L'opzione **/3GB** rende disponibili 3 GB completi di spazio degli indirizzi virtuali per le applicazioni e riduce la quantità disponibile per il sistema a 1 GB.</span><span class="sxs-lookup"><span data-stu-id="db033-115">The **/3GB** switch makes a full 3 GB of virtual address space available to applications and reduces the amount available to the system to 1 GB.</span></span> <span data-ttu-id="db033-116">In Windows Server 2003, la quantità di spazio degli indirizzi disponibile per le applicazioni può essere regolata impostando l'opzione **parametro/USERVA** in Boot.ini su un valore compreso tra 2048 e 3072, che aumenta la quantità di spazio degli indirizzi disponibile per il sistema.</span><span class="sxs-lookup"><span data-stu-id="db033-116">On Windows Server 2003, the amount of address space available to applications can be adjusted by setting the **/USERVA** switch in Boot.ini to a value between 2048 and 3072, which increases the amount of address space available to the system.</span></span> <span data-ttu-id="db033-117">Ciò consente di mantenere le prestazioni complessive del sistema quando l'applicazione richiede più di 2 GB, ma meno di 3 GB di spazio di indirizzi.</span><span class="sxs-lookup"><span data-stu-id="db033-117">This can help maintain overall system performance when the application requires more than 2 GB but less than 3 GB of address space.</span></span>

<span data-ttu-id="db033-118">Per consentire a un'applicazione di usare lo spazio degli indirizzi più grande, impostare il flag di rilevamento [**\_ \_ \_ indirizzi \_ grande**](/windows/desktop/api/dbghelp/ns-dbghelp-loaded_image) per il file di immagine nell'intestazione dell'immagine.</span><span class="sxs-lookup"><span data-stu-id="db033-118">To enable an application to use the larger address space, set the [**IMAGE\_FILE\_LARGE\_ADDRESS\_AWARE**](/windows/desktop/api/dbghelp/ns-dbghelp-loaded_image) flag in the image header.</span></span> <span data-ttu-id="db033-119">Il linker incluso in Microsoft Visual C++ supporta l'opzione **/LARGEADDRESSAWARE** per impostare questo flag.</span><span class="sxs-lookup"><span data-stu-id="db033-119">The linker included with Microsoft Visual C++ supports the **/LARGEADDRESSAWARE** switch to set this flag.</span></span> <span data-ttu-id="db033-120">L'impostazione di questo flag e quindi l'esecuzione dell'applicazione in un sistema che non dispone del supporto 4GT non dovrebbe influire sull'applicazione.</span><span class="sxs-lookup"><span data-stu-id="db033-120">Setting this flag and then running the application on a system that does not have 4GT support should not affect the application.</span></span>

<span data-ttu-id="db033-121">Nelle edizioni a 64 bit di Windows, le applicazioni a 32 bit contrassegnate con il flag di rilevamento degli [**\_ \_ indirizzi grande del \_ \_ file di immagine**](/windows/desktop/api/dbghelp/ns-dbghelp-loaded_image) hanno 4 GB di spazio di indirizzi disponibile.</span><span class="sxs-lookup"><span data-stu-id="db033-121">On 64-bit editions of Windows, 32-bit applications marked with the [**IMAGE\_FILE\_LARGE\_ADDRESS\_AWARE**](/windows/desktop/api/dbghelp/ns-dbghelp-loaded_image) flag have 4 GB of address space available.</span></span>

<span data-ttu-id="db033-122">**Edizioni Itanium di Windows Server 2003:** Prima di SP1, i processi a 32 bit hanno solo 2 GB di spazio di indirizzi disponibile.</span><span class="sxs-lookup"><span data-stu-id="db033-122">**Itanium editions of Windows Server 2003:** Prior to SP1, 32-bit processes have only 2 GB of address space available.</span></span>

<span data-ttu-id="db033-123">Usare le linee guida seguenti per supportare 4GT nelle applicazioni:</span><span class="sxs-lookup"><span data-stu-id="db033-123">Use the following guidelines to support 4GT in applications:</span></span>

-   <span data-ttu-id="db033-124">Gli indirizzi vicini al limite di 2 GB vengono in genere utilizzati da varie DLL di sistema.</span><span class="sxs-lookup"><span data-stu-id="db033-124">Addresses near the 2-GB boundary are typically used by various system DLLs.</span></span> <span data-ttu-id="db033-125">Pertanto, un processo a 32 bit non può allocare più di 2 GB di memoria contigua, anche se è disponibile l'intero spazio degli indirizzi da 4 GB.</span><span class="sxs-lookup"><span data-stu-id="db033-125">Therefore, a 32-bit process cannot allocate more than 2 GB of contiguous memory, even if the entire 4-GB address space is available.</span></span>
-   <span data-ttu-id="db033-126">Per recuperare la quantità di spazio virtuale utente totale, utilizzare la funzione [**GlobalMemoryStatusEx**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-globalmemorystatusex) .</span><span class="sxs-lookup"><span data-stu-id="db033-126">To retrieve the amount of total user virtual space, use the [**GlobalMemoryStatusEx**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-globalmemorystatusex) function.</span></span> <span data-ttu-id="db033-127">Per recuperare l'indirizzo utente più elevato possibile, usare la funzione [**GetSystemInfo**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-getsysteminfo) .</span><span class="sxs-lookup"><span data-stu-id="db033-127">To retrieve the highest possible user address, use the [**GetSystemInfo**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-getsysteminfo) function.</span></span> <span data-ttu-id="db033-128">Rilevare sempre il valore reale in fase di esecuzione ed evitare di usare definizioni di costanti cablate come: `#define HIGHEST_USER_ADDRESS 0xC0000000` .</span><span class="sxs-lookup"><span data-stu-id="db033-128">Always detect the real value at runtime, and avoid using hard-wired constant definitions such as: `#define HIGHEST_USER_ADDRESS 0xC0000000`.</span></span>
-   <span data-ttu-id="db033-129">Evitare i confronti firmati con i puntatori, perché potrebbero causare l'arresto anomalo delle applicazioni in un sistema abilitato per 4GT.</span><span class="sxs-lookup"><span data-stu-id="db033-129">Avoid signed comparisons with pointers, because they might cause applications to crash on a 4GT-enabled system.</span></span> <span data-ttu-id="db033-130">Una condizione come la seguente è false per un puntatore che supera i 2 GB: `if (pointer > 40000000)` .</span><span class="sxs-lookup"><span data-stu-id="db033-130">A condition such as the following is false for a pointer that is above 2 GB: `if (pointer > 40000000)`.</span></span>
-   <span data-ttu-id="db033-131">Il codice che usa il bit più alto di un puntatore per uno scopo definito dall'applicazione avrà esito negativo quando 4GT è abilitato.</span><span class="sxs-lookup"><span data-stu-id="db033-131">Code that uses the highest bit of a pointer for an application-defined purpose will fail when 4GT is enabled.</span></span> <span data-ttu-id="db033-132">Ad esempio, una parola a 32 bit potrebbe essere considerata un indirizzo in modalità utente se è sotto 0x80000000 e un codice di errore se sopra.</span><span class="sxs-lookup"><span data-stu-id="db033-132">For example, a 32-bit word might be considered a user-mode address if it is below 0x80000000, and an error code if above.</span></span> <span data-ttu-id="db033-133">Questo non è vero con 4GT.</span><span class="sxs-lookup"><span data-stu-id="db033-133">This is not true with 4GT.</span></span>

<span data-ttu-id="db033-134">[**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc) restituisce in genere indirizzi bassi prima di indirizzi elevati.</span><span class="sxs-lookup"><span data-stu-id="db033-134">[**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc) usually returns low addresses before high addresses.</span></span> <span data-ttu-id="db033-135">Pertanto, il processo non può utilizzare indirizzi molto elevati, a meno che non si allochi una grande quantità di memoria o uno spazio degli indirizzi virtuali frammentato.</span><span class="sxs-lookup"><span data-stu-id="db033-135">Therefore, your process may not use very high addresses unless it allocates a lot of memory or has a fragmented virtual address space.</span></span> <span data-ttu-id="db033-136">Per forzare l'allocazione degli indirizzi superiori prima degli indirizzi inferiori a scopo di test, è necessario specificare il valore di **mem \_ Top \_ Down** quando si chiama **VirtualAlloc** o impostare il seguente valore del registro di sistema su 0x100000:</span><span class="sxs-lookup"><span data-stu-id="db033-136">To force allocations to allocate from higher addresses before lower addresses for testing purposes, specify **MEM\_TOP\_DOWN** when calling **VirtualAlloc** or set the following registry value to 0x100000:</span></span>

<span data-ttu-id="db033-137">**HKEY \_ \_** \\  \\  \\  \\  \\ **Gestione della memoria di gestione delle** \\  sessioni del sistema CurrentControlSet del computer locale AllocationPreference</span><span class="sxs-lookup"><span data-stu-id="db033-137">**HKEY\_LOCAL\_MACHINE**\\**System**\\**CurrentControlSet**\\**Control**\\**Session Manager**\\**Memory Management**\\**AllocationPreference**</span></span>

## <a name="related-topics"></a><span data-ttu-id="db033-138">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="db033-138">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="db033-139">Limiti di memoria per le versioni di Windows</span><span class="sxs-lookup"><span data-stu-id="db033-139">Memory Limits for Windows Releases</span></span>](memory-limits-for-windows-releases.md)
</dt> <dt>

[<span data-ttu-id="db033-140">Estensione indirizzo fisico</span><span class="sxs-lookup"><span data-stu-id="db033-140">Physical Address Extension</span></span>](physical-address-extension.md)
</dt> <dt>

<span data-ttu-id="db033-141">[Riferimento tecnico per 4GT](/previous-versions/windows/it-pro/windows-server-2003/cc778496(v=ws.10))</span><span class="sxs-lookup"><span data-stu-id="db033-141">[4GT Technical Reference](/previous-versions/windows/it-pro/windows-server-2003/cc778496(v=ws.10))</span></span>
</dt> </dl>

 

 
