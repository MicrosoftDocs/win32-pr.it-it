---
description: Microsoft fornisce Word breaker e stemmer per diversi linguaggi. In questo argomento viene descritto come implementare e utilizzare Word breaker e stemmer personalizzati per le lingue e le impostazioni locali oltre a quelle fornite da Microsoft.
ms.assetid: 47768691-7071-440e-bfbf-975713880c00
title: Implementazione di un Word breaker e uno stemmer
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4bd4f4e3210e7f4e17bb035115fd694656cc6e6d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104049382"
---
# <a name="implementing-a-word-breaker-and-stemmer"></a><span data-ttu-id="4a349-104">Implementazione di un Word breaker e uno stemmer</span><span class="sxs-lookup"><span data-stu-id="4a349-104">Implementing a Word Breaker and Stemmer</span></span>

<span data-ttu-id="4a349-105">Microsoft fornisce Word breaker e stemmer per diversi linguaggi.</span><span class="sxs-lookup"><span data-stu-id="4a349-105">Microsoft provides word breakers and stemmers for a number of languages.</span></span> <span data-ttu-id="4a349-106">In questo argomento viene descritto come implementare e utilizzare Word breaker e stemmer personalizzati per le lingue e le impostazioni locali oltre a quelle fornite da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="4a349-106">This topic describes how to implement, and use custom word breakers and stemmers for languages, and locales beyond those provided by Microsoft.</span></span>

> [!Note]
> <span data-ttu-id="4a349-107">Al 2018 luglio è stata apportata una modifica alla sicurezza di Windows Server 2019 che impedisce il caricamento delle dll senza una firma Microsoft da SearchIndexer.exe.</span><span class="sxs-lookup"><span data-stu-id="4a349-107">As of July 2018 a security change was made to Windows Server 2019 that prevents DLLs without a Microsoft signature from being loaded by SearchIndexer.exe.</span></span> <span data-ttu-id="4a349-108">Di conseguenza, Windows Server 2019 non supporta più Word breaker personalizzati non Microsoft firmati.</span><span class="sxs-lookup"><span data-stu-id="4a349-108">As a result Windows Server 2019 no longer supports non-Microsoft signed custom word breakers.</span></span> 

<span data-ttu-id="4a349-109">Questo argomento è organizzato nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="4a349-109">This topic is organized as follows:</span></span>

-   [<span data-ttu-id="4a349-110">Registrazione di una DLL di risorse della lingua</span><span class="sxs-lookup"><span data-stu-id="4a349-110">Registering a Language Resource DLL</span></span>](#registering-a-language-resource-dll)
-   [<span data-ttu-id="4a349-111">Registrazione di una lingua</span><span class="sxs-lookup"><span data-stu-id="4a349-111">Registering a Language</span></span>](#registering-a-language-resource-dll)
-   [<span data-ttu-id="4a349-112">Implementazione di un Word Becher</span><span class="sxs-lookup"><span data-stu-id="4a349-112">Implementing a Word Beaker</span></span>](#implementing-a-word-beaker)
    -   [<span data-ttu-id="4a349-113">WordSink e PhraseSink</span><span class="sxs-lookup"><span data-stu-id="4a349-113">WordSink and PhraseSink</span></span>](#wordsink-and-phrasesink)
    -   [<span data-ttu-id="4a349-114">Interruzioni</span><span class="sxs-lookup"><span data-stu-id="4a349-114">Breaks</span></span>](#breaks)
    -   [<span data-ttu-id="4a349-115">Scalabilità, Performancy e sicurezza</span><span class="sxs-lookup"><span data-stu-id="4a349-115">Scalability, Performancy, and Security</span></span>](#scalability-performancy-and-security)
-   [<span data-ttu-id="4a349-116">Implementazione di uno stemmer</span><span class="sxs-lookup"><span data-stu-id="4a349-116">Implementing a Stemmer</span></span>](#implementing-a-stemmer)
    -   [<span data-ttu-id="4a349-117">Scalabilità, Performancy e sicurezza</span><span class="sxs-lookup"><span data-stu-id="4a349-117">Scalability, Performancy, and Security</span></span>](#scalability-performancy-and-security)
-   [<span data-ttu-id="4a349-118">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="4a349-118">Related topics</span></span>](#related-topics)

## <a name="registering-a-language-resource-dll"></a><span data-ttu-id="4a349-119">Registrazione di una DLL di risorse della lingua</span><span class="sxs-lookup"><span data-stu-id="4a349-119">Registering a Language Resource DLL</span></span>

<span data-ttu-id="4a349-120">Ogni DLL di risorse della lingua deve implementare ed esportare i punti di ingresso seguenti.</span><span class="sxs-lookup"><span data-stu-id="4a349-120">Each language resource DLL must implement and export the following entry points.</span></span> <span data-ttu-id="4a349-121">La DLL può essere registrata in qualsiasi cartella.</span><span class="sxs-lookup"><span data-stu-id="4a349-121">The DLL can be registered to be in any folder.</span></span>

-   <span data-ttu-id="4a349-122">DllMain è il punto di ingresso standard della DLL.</span><span class="sxs-lookup"><span data-stu-id="4a349-122">DllMain is the standard entry point to DLL.</span></span>
-   <span data-ttu-id="4a349-123">DllRegisterServer registra la DLL nel registro di sistema, ad esempio `regsvr32.exe %SystemRoot%\MyFolder\wordbreaker.dll`</span><span class="sxs-lookup"><span data-stu-id="4a349-123">DllRegisterServer registers the DLL in the registry, such as `regsvr32.exe %SystemRoot%\MyFolder\wordbreaker.dll`</span></span>
-   <span data-ttu-id="4a349-124">DllCanUnloadNow consente ai client di chiamare questo punto di ingresso tramite Component Object Model (COM) per determinare se è possibile scaricare la DLL di risorse della lingua.</span><span class="sxs-lookup"><span data-stu-id="4a349-124">DllCanUnloadNow enables clients to call this entry point through Component Object Model (COM) to determine whether it is possible to unload the language resource DLL.</span></span>
-   <span data-ttu-id="4a349-125">DllUnRegisterServer rimuove la DLL dal registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="4a349-125">DllUnRegisterServer removes the DLL from the registry.</span></span>

## <a name="registering-a-language"></a><span data-ttu-id="4a349-126">Registrazione di una lingua</span><span class="sxs-lookup"><span data-stu-id="4a349-126">Registering a Language</span></span>

<span data-ttu-id="4a349-127">Il registro di sistema contiene voci specifiche della lingua per la lingua da indicizzare e queste voci controllano le parti dei processi di indicizzazione e query specifiche della lingua.</span><span class="sxs-lookup"><span data-stu-id="4a349-127">The registry contains language-specific entries for the language being indexed, and these entries control the parts of the indexing and query processes that are language specific.</span></span> <span data-ttu-id="4a349-128">Queste voci del registro di sistema si trovano nella seguente chiave del registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="4a349-128">These registry entries can be found under the following registry key.</span></span>

```
HKEY_LOCAL_MACHINE
   SYSTEM
      CurrentControlSet
         ContentIndex
            Control
               Language
                  
```

## <a name="implementing-a-word-beaker"></a><span data-ttu-id="4a349-129">Implementazione di un Word Becher</span><span class="sxs-lookup"><span data-stu-id="4a349-129">Implementing a Word Beaker</span></span>

<span data-ttu-id="4a349-130">I Word breaker implementano [**IWordBreaker**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordbreaker).</span><span class="sxs-lookup"><span data-stu-id="4a349-130">Word breakers implement [**IWordBreaker**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordbreaker).</span></span> <span data-ttu-id="4a349-131">Il metodo [**IWordBreaker:: BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) esegue tutte le operazioni di elaborazione e analisi del testo.</span><span class="sxs-lookup"><span data-stu-id="4a349-131">The [**IWordBreaker::BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) method performs all text processing and parsing.</span></span> <span data-ttu-id="4a349-132">Per implementare un componente word breaker, è necessario disporre di euristica per la lingua.</span><span class="sxs-lookup"><span data-stu-id="4a349-132">To implement a word breaker component, you must have language heuristics for your language.</span></span> <span data-ttu-id="4a349-133">Sono incluse informazioni sulla sintassi e la morfologia.</span><span class="sxs-lookup"><span data-stu-id="4a349-133">This includes information about syntax and morphology.</span></span> <span data-ttu-id="4a349-134">Potrebbe essere necessario anche un elenco di parole da escludere o includere.</span><span class="sxs-lookup"><span data-stu-id="4a349-134">You may also need a list of words to exclude or include.</span></span> <span data-ttu-id="4a349-135">Si compila il file di parole non significative per le impostazioni locali della lingua dall'elenco di parole escluse.</span><span class="sxs-lookup"><span data-stu-id="4a349-135">You build the file of noise words for your language locale from the list of excluded words.</span></span> <span data-ttu-id="4a349-136">Per ulteriori informazioni sulle considerazioni linguistiche e sul modo in cui queste considerazioni influiscono sulle implementazioni del Word breaker, vedere [considerazioni linguistiche e Unicode](linguistic-and-unicode-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="4a349-136">For more information about linguistic considerations and how these considerations affect word breaker implementations, see [Linguistic and Unicode Considerations](linguistic-and-unicode-considerations.md).</span></span>

<span data-ttu-id="4a349-137">Lo scopo principale di [**IWordBreaker:: BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) è elaborare continuamente il testo dall' [**\_ origine del testo**](/windows/win32/api/indexsrv/ns-indexsrv-text_source) fino a quando non viene elaborato tutto il testo o finché il Word breaker non rileva un errore.</span><span class="sxs-lookup"><span data-stu-id="4a349-137">The main purpose of [**IWordBreaker::BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) is to process text continuously from the [**TEXT\_SOURCE**](/windows/win32/api/indexsrv/ns-indexsrv-text_source) until all the text is processed, or until the word breaker encounters an error.</span></span> <span data-ttu-id="4a349-138">In questo ciclo di elaborazione dati, **IWordBreaker:: BreakText** chiama i metodi di analisi e di utilità che eseguono attività specifiche per tale processo.</span><span class="sxs-lookup"><span data-stu-id="4a349-138">While in this data processing loop, **IWordBreaker::BreakText** calls parsing and utility methods that perform specific tasks for that process.</span></span> <span data-ttu-id="4a349-139">Il Word breaker tedesco, ad esempio, può gestire parole composte, mentre il Word breaker francese può elaborare [segni diacritici](surface-form-normalization.md) o [clitici](surface-form-normalization.md).</span><span class="sxs-lookup"><span data-stu-id="4a349-139">For example, the German word breaker may handle compound words, whereas the French word breaker may process [diacritics](surface-form-normalization.md) or [clitics](surface-form-normalization.md).</span></span> <span data-ttu-id="4a349-140">Le funzioni specifiche eseguite dal Word breaker e la strategia utilizzata per l'esecuzione di queste attività dipendono interamente dai requisiti per tale lingua.</span><span class="sxs-lookup"><span data-stu-id="4a349-140">The specific functions that the word breaker performs and the strategy that it uses in performing these tasks depend entirely on the requirements for that language.</span></span>

<span data-ttu-id="4a349-141">Quando si interrompe il testo, i Word breaker identificano i moduli "alternativi" per le parole che possono avere più rappresentazioni.</span><span class="sxs-lookup"><span data-stu-id="4a349-141">When breaking text, word breakers identify "alternative" forms for words that may have multiple representations.</span></span> <span data-ttu-id="4a349-142">Nessuna relazione semantica è implicita tra le parole generate.</span><span class="sxs-lookup"><span data-stu-id="4a349-142">No semantic relationship is implied between the generated words.</span></span> <span data-ttu-id="4a349-143">Infatti, la parola originale non può essere inclusa nell'elenco delle alternative.</span><span class="sxs-lookup"><span data-stu-id="4a349-143">In fact, the original word may not be included among the list of alternatives.</span></span> <span data-ttu-id="4a349-144">I formati alternativi vengono salvati nella stessa posizione nell'indice della parola originale per indicare che sono identici.</span><span class="sxs-lookup"><span data-stu-id="4a349-144">The alternative forms are saved in the same position in the index as the original word to indicate that they are identical.</span></span>

<span data-ttu-id="4a349-145">Quando un documento viene incluso nell'indice, a ogni parola viene assegnato un valore integer che rappresenta l'offset o la distanza della parola dall'inizio di un documento.</span><span class="sxs-lookup"><span data-stu-id="4a349-145">When a document is included in the index, each word is assigned an integer value that represents the offset, or the distance of the word from the beginning of a document.</span></span> <span data-ttu-id="4a349-146">La distanza relativa tra le parole in una query viene confrontata con gli offset archiviati nell'indice full-text.</span><span class="sxs-lookup"><span data-stu-id="4a349-146">The relative distance between words in a query is compared against the offsets stored in the full-text index.</span></span> <span data-ttu-id="4a349-147">La query "Where is the Kyle ' s Document" corrisponde a qualsiasi documento con "Where" at offset n, "is" at n + 1, "Kyle ' s" at n + 2 e "Document" at n + 3.</span><span class="sxs-lookup"><span data-stu-id="4a349-147">The query "Where is Kyle's document" matches any document with "Where" at offset n, "is" at n+1, "Kyle's" at n+2, and "document" at n+3.</span></span> <span data-ttu-id="4a349-148">"Dov'è il documento di Kyle archiviato nella data-base?"</span><span class="sxs-lookup"><span data-stu-id="4a349-148">"Where is Kyle's document filed in the data-base?"</span></span> <span data-ttu-id="4a349-149">è rappresentato come:</span><span class="sxs-lookup"><span data-stu-id="4a349-149">is represented as:</span></span>



|       |     |                        |          |       |     |     |                               |
|-------|-----|------------------------|----------|-------|-----|-----|-------------------------------|
| <span data-ttu-id="4a349-150">Where</span><span class="sxs-lookup"><span data-stu-id="4a349-150">Where</span></span> | <span data-ttu-id="4a349-151">is</span><span class="sxs-lookup"><span data-stu-id="4a349-151">is</span></span>  | <span data-ttu-id="4a349-152">Kyle Kyle</span><span class="sxs-lookup"><span data-stu-id="4a349-152">Kyle Kyle's</span></span><br/> | <span data-ttu-id="4a349-153">documento</span><span class="sxs-lookup"><span data-stu-id="4a349-153">document</span></span> | <span data-ttu-id="4a349-154">campo</span><span class="sxs-lookup"><span data-stu-id="4a349-154">filed</span></span> | <span data-ttu-id="4a349-155">in ingresso</span><span class="sxs-lookup"><span data-stu-id="4a349-155">in</span></span>  | <span data-ttu-id="4a349-156">il</span><span class="sxs-lookup"><span data-stu-id="4a349-156">the</span></span> | <span data-ttu-id="4a349-157">data base database</span><span class="sxs-lookup"><span data-stu-id="4a349-157">database data base</span></span><br/> |



 

<span data-ttu-id="4a349-158">In questo esempio il Word breaker archivia moduli alternativi per "Kyle" ("Kyle") e "database" ("data base") nell'indice.</span><span class="sxs-lookup"><span data-stu-id="4a349-158">In this example, the word breaker stores alternative forms for "Kyle" ("Kyle's") and "database" ("data base") in the index.</span></span> <span data-ttu-id="4a349-159">Il Word breaker genera e archivia parole alternative durante il processo di creazione dell'indice nelle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="4a349-159">The word breaker generates and stores alternative words during the index creation process under the following conditions:</span></span>

-   <span data-ttu-id="4a349-160">Se una parola alternativa viene probabilmente visualizzata come una singola parola in una query</span><span class="sxs-lookup"><span data-stu-id="4a349-160">If an alternative word is likely to appear as a single word in a query</span></span>
-   <span data-ttu-id="4a349-161">Se uno stemmer non è in grado di derivare la parola originale dall'alternativa</span><span class="sxs-lookup"><span data-stu-id="4a349-161">If a stemmer is not likely to derive the original word from the alternative</span></span>

<span data-ttu-id="4a349-162">La generazione di moduli Word alternativi aumenta il numero di modi in cui le query rappresentano e corrispondono a una frase, come illustrato nelle varianti seguenti:</span><span class="sxs-lookup"><span data-stu-id="4a349-162">Generating alternative word forms increases the number of ways that queries represent and match a sentence, as shown in the following variations:</span></span>

1.  <span data-ttu-id="4a349-163">Dove è il documento Kyle archiviato nel database</span><span class="sxs-lookup"><span data-stu-id="4a349-163">Where is Kyle document filed in the database</span></span>
2.  <span data-ttu-id="4a349-164">Dove si trova il documento di Kyle archiviato nel database</span><span class="sxs-lookup"><span data-stu-id="4a349-164">Where is Kyle's document filed in the database</span></span>
3.  <span data-ttu-id="4a349-165">Dove è il documento Kyle archiviato nel database</span><span class="sxs-lookup"><span data-stu-id="4a349-165">Where is Kyle document filed in the data base</span></span>
4.  <span data-ttu-id="4a349-166">Dove si trova il documento di Kyle archiviato nel database</span><span class="sxs-lookup"><span data-stu-id="4a349-166">Where is Kyle's document filed in the data base</span></span>

### <a name="wordsink-and-phrasesink"></a><span data-ttu-id="4a349-167">WordSink e PhraseSink</span><span class="sxs-lookup"><span data-stu-id="4a349-167">WordSink and PhraseSink</span></span>

<span data-ttu-id="4a349-168">I Word breaker utilizzano gli oggetti [**IWordSink**](iwordsink.md) e [**IPhraseSink**](/windows/win32/api/indexsrv/nn-indexsrv-iphrasesink) per raccogliere e archiviare tutte le parole e le frasi estratte dal testo.</span><span class="sxs-lookup"><span data-stu-id="4a349-168">Word breakers use the [**IWordSink**](iwordsink.md) and [**IPhraseSink**](/windows/win32/api/indexsrv/nn-indexsrv-iphrasesink) objects to collect and store all words and phrases that they extract from text.</span></span> <span data-ttu-id="4a349-169">Un Word breaker archivia le parole in un modulo il più vicino possibile al modulo Word originale nel documento.</span><span class="sxs-lookup"><span data-stu-id="4a349-169">A word breaker stores words in a form that is as close as possible to the original word form in the document.</span></span> <span data-ttu-id="4a349-170">**IPhraseSink** archivia le frasi in fase di query.</span><span class="sxs-lookup"><span data-stu-id="4a349-170">**IPhraseSink** stores phrases at query time.</span></span> <span data-ttu-id="4a349-171">Le frasi migliorano la pertinenza dei risultati delle query perché le sequenze più lunghe di parole sono più rare e forniscono una maggiore distinzione rispetto a frasi più piccole.</span><span class="sxs-lookup"><span data-stu-id="4a349-171">Phrases improve the relevance of query results because longer sequences of words are rarer and provide greater distinction than smaller phrases.</span></span> <span data-ttu-id="4a349-172">Quando l'indicizzatore posiziona una frase in **IPhraseSink** in fase di query, crea un'istanza del Word breaker per suddividere la frase in parole.</span><span class="sxs-lookup"><span data-stu-id="4a349-172">When the indexer places a phrase in the **IPhraseSink** at query time, it creates an instance of the word breaker to break the phrase into words.</span></span> <span data-ttu-id="4a349-173">L'indicizzatore valuta quindi la frase controllando se le parole nella frase si trovano adiacenti l'una all'altra nell'indice.</span><span class="sxs-lookup"><span data-stu-id="4a349-173">The indexer then evaluates the phrase by checking whether the words in the phrase occur adjacent to one another in the index.</span></span> <span data-ttu-id="4a349-174">Se, ad esempio, si verifica "ABCD" nell'indice nelle posizioni *x*, *x*+ 1, *x*+ 2 e *x*+ 3, la frase corrispondente si verificherà se in una query viene inviata una sottostringa adiacente di "abcd".</span><span class="sxs-lookup"><span data-stu-id="4a349-174">For example, if "ABCD" occurs in the index at positions *x*, *x*+1, *x*+2, and *x*+3, the phrase match will occur if any adjacent substring of "ABCD" is submitted in a query.</span></span> <span data-ttu-id="4a349-175">Questa strategia è efficace per i Word breaker basati su caratteri che dividono le frasi e le parole lunghe durante la creazione dell'indice e generano frasi durante la fase di esecuzione della query.</span><span class="sxs-lookup"><span data-stu-id="4a349-175">This strategy is effective for character-based word breakers that split phrases and long words during index creation and that generate phrases during query time.</span></span>

### <a name="breaks"></a><span data-ttu-id="4a349-176">Interruzioni</span><span class="sxs-lookup"><span data-stu-id="4a349-176">Breaks</span></span>

<span data-ttu-id="4a349-177">Le interruzioni sono gli spazi tra le parole.</span><span class="sxs-lookup"><span data-stu-id="4a349-177">Breaks are the spaces between words.</span></span> <span data-ttu-id="4a349-178">Gli spazi vuoti, la punteggiatura, la formattazione o solo la natura del linguaggio stesso possono causare interruzioni.</span><span class="sxs-lookup"><span data-stu-id="4a349-178">White space, punctuation, formatting, or just the nature of the language itself can cause breaks.</span></span> <span data-ttu-id="4a349-179">Sono disponibili quattro tipi diversi di interruzioni utilizzate dall'indicizzatore: end of Word (EOW), end of frase (EOS), end of Paragraph (EOP) e End of Chapter (EDC).</span><span class="sxs-lookup"><span data-stu-id="4a349-179">There are four different types of breaks that the indexer uses: end of word (EOW), end of sentence (EOS), end of paragraph (EOP) and end of chapter (EOC).</span></span> <span data-ttu-id="4a349-180">L'EOW Break è l'opzione predefinita.</span><span class="sxs-lookup"><span data-stu-id="4a349-180">The EOW break is the default break.</span></span> <span data-ttu-id="4a349-181">Dopo ogni token, ogni Break indica una distanza semantica diversa tra le parole su entrambi i lati.</span><span class="sxs-lookup"><span data-stu-id="4a349-181">After each token, each break indicates a different semantic distance between the words on either side.</span></span> <span data-ttu-id="4a349-182">Le parole separate da EOW hanno il collegamento semantico più stretto, seguito da EOS, EOP e EDC.</span><span class="sxs-lookup"><span data-stu-id="4a349-182">Words separated by EOW have the tightest semantic link, followed by EOS, EOP, and EOC.</span></span> <span data-ttu-id="4a349-183">Più chiamate a [**IWordSink::P utbreak**](iwordsink-putbreak.md) sono cumulative e sono analoghe all'inserimento di parole o frasi null.</span><span class="sxs-lookup"><span data-stu-id="4a349-183">Multiple calls to [**IWordSink::PutBreak**](iwordsink-putbreak.md) are cumulative, and are analogous to inserting null words or sentences.</span></span>

### <a name="scalability-performancy-and-security"></a><span data-ttu-id="4a349-184">Scalabilità, Performancy e sicurezza</span><span class="sxs-lookup"><span data-stu-id="4a349-184">Scalability, Performancy, and Security</span></span>

<span data-ttu-id="4a349-185">Il modo in cui il Word breaker risponde alle chiamate simultanee è in gran parte determinato dalla scelta del modello di Threading.</span><span class="sxs-lookup"><span data-stu-id="4a349-185">The way the word breaker responds to simultaneous calls is largely determined by your choice of threading model.</span></span> <span data-ttu-id="4a349-186">L'indicizzatore è un'applicazione a thread singolo.</span><span class="sxs-lookup"><span data-stu-id="4a349-186">The indexer is a single-threaded application.</span></span> <span data-ttu-id="4a349-187">Per il funzionamento dei word breaker in un ambiente a thread singolo, è necessario scrivere i Word breaker usando un modello di threading "libero" o "both".</span><span class="sxs-lookup"><span data-stu-id="4a349-187">For word breakers to work in a single-threaded environment, word breakers must be written using a "free" or "both" threading model.</span></span> <span data-ttu-id="4a349-188">I Word breaker non devono registrarsi a COM utilizzando il modello di threading "Apartment".</span><span class="sxs-lookup"><span data-stu-id="4a349-188">Word breakers must not register with COM by using the "apartment" threading model.</span></span>

<span data-ttu-id="4a349-189">È consigliabile che i Word breaker evitino gli Stati globali e memorizzino i dati nell'istanza per il Word breaker.</span><span class="sxs-lookup"><span data-stu-id="4a349-189">We recommend that word breakers avoid global states and store data in the instance for the word breaker.</span></span> <span data-ttu-id="4a349-190">L'unico contenuto che deve essere archiviato nell'implementazione del Word breaker riguarda i parametri *fQuery* e *ulMaxTokenSize*.</span><span class="sxs-lookup"><span data-stu-id="4a349-190">The only content that should be stored in the word breaker implementation are for the parameters *fQuery* and *ulMaxTokenSize*.</span></span> <span data-ttu-id="4a349-191">I Word breaker non devono essere più di due volte più lenti rispetto al benchmark stabilito dal Word breaker per la lingua inglese.</span><span class="sxs-lookup"><span data-stu-id="4a349-191">Word breakers should be no more than two times slower than the benchmark established by the English word breaker.</span></span> <span data-ttu-id="4a349-192">Le prestazioni del Word breaker dovrebbero inoltre migliorare con una maggiore capacità di hardware.</span><span class="sxs-lookup"><span data-stu-id="4a349-192">Word breaker performance should also improve with increased hardware capability.</span></span>

<span data-ttu-id="4a349-193">I Word breaker per l'indicizzatore vengono eseguiti nel contesto di sicurezza del sistema locale.</span><span class="sxs-lookup"><span data-stu-id="4a349-193">Word breakers for the indexer run in the Local System security context.</span></span> <span data-ttu-id="4a349-194">Devono essere scritti per gestire i buffer e per eseguire lo stack in modo corretto.</span><span class="sxs-lookup"><span data-stu-id="4a349-194">They should be written to manage buffers and to stack correctly.</span></span> <span data-ttu-id="4a349-195">Tutte le copie di stringhe devono avere controlli espliciti per evitare sovraccarichi del buffer.</span><span class="sxs-lookup"><span data-stu-id="4a349-195">All string copies must have explicit checks to guard against buffer overruns.</span></span> <span data-ttu-id="4a349-196">Verificare sempre la dimensione allocata del buffer e verificare le dimensioni dei dati rispetto alle dimensioni del buffer.</span><span class="sxs-lookup"><span data-stu-id="4a349-196">You should always verify the allocated size of the buffer and test the size of the data against the size of the buffer.</span></span> <span data-ttu-id="4a349-197">I Word breaker non possono presupporre che il testo passato al metodo [**IWordBreaker:: BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) sia ben formato.</span><span class="sxs-lookup"><span data-stu-id="4a349-197">Word breakers cannot assume that the text passed to the [**IWordBreaker::BreakText**](/windows/desktop/api/Indexsrv/nf-indexsrv-iwordbreaker-breaktext) method is well formed.</span></span> <span data-ttu-id="4a349-198">Per ulteriori informazioni sulla risoluzione dei problemi relativi ai Word breaker, vedere [risoluzione dei problemi relativi a risorse e procedure consigliate](troubleshooting-language-resources.md).</span><span class="sxs-lookup"><span data-stu-id="4a349-198">For more information about troubleshooting word breakers, see [Troubleshooting Language Resources and Best Practices](troubleshooting-language-resources.md).</span></span>

## <a name="implementing-a-stemmer"></a><span data-ttu-id="4a349-199">Implementazione di uno stemmer</span><span class="sxs-lookup"><span data-stu-id="4a349-199">Implementing a Stemmer</span></span>

<span data-ttu-id="4a349-200">Gli stemmer implementano l'interfaccia [**IStemmer**](/windows/desktop/api/Indexsrv/nn-indexsrv-istemmer) .</span><span class="sxs-lookup"><span data-stu-id="4a349-200">Stemmers implement the [**IStemmer**](/windows/desktop/api/Indexsrv/nn-indexsrv-istemmer) interface.</span></span> <span data-ttu-id="4a349-201">Il metodo [**IStemmer:: GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) genera un elenco di forme di Word flesse per una determinata parola di input.</span><span class="sxs-lookup"><span data-stu-id="4a349-201">The [**IStemmer::GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms) method generates a list of inflected word forms for a particular input word.</span></span> <span data-ttu-id="4a349-202">Per implementare un componente dello stemmer, è necessario avere l'euristica del linguaggio per la lingua.</span><span class="sxs-lookup"><span data-stu-id="4a349-202">To implement a stemmer component, you must have language heuristics for your language.</span></span> <span data-ttu-id="4a349-203">Sono incluse informazioni sulla morfologia.</span><span class="sxs-lookup"><span data-stu-id="4a349-203">This includes information about morphology.</span></span> <span data-ttu-id="4a349-204">Potrebbe essere necessario anche un elenco di parole da escludere o includere.</span><span class="sxs-lookup"><span data-stu-id="4a349-204">You may also need a list of words to exclude or include.</span></span> <span data-ttu-id="4a349-205">Per ulteriori informazioni sulle considerazioni linguistiche e sul modo in cui queste considerazioni influiscono sulle implementazioni dello stemmer, vedere [considerazioni relative a lingue e Unicode](linguistic-and-unicode-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="4a349-205">For more information about linguistic considerations and how these considerations affect stemmer implementations, see [Linguistic and Unicode Considerations](linguistic-and-unicode-considerations.md).</span></span>

<span data-ttu-id="4a349-206">È consigliabile che gli stemmer non generino il genitivo, o il caso possessivo, per le parole.</span><span class="sxs-lookup"><span data-stu-id="4a349-206">We recommend that stemmers should not generate the genitive, or possessive, case for words.</span></span> <span data-ttu-id="4a349-207">Ad esempio, "David" non viene generato come forma alternativa per "David".</span><span class="sxs-lookup"><span data-stu-id="4a349-207">For example, "David" is not generated as an alternative form for "David's."</span></span> <span data-ttu-id="4a349-208">Il Word breaker genera "David" e "David" durante l'analisi di "David".</span><span class="sxs-lookup"><span data-stu-id="4a349-208">The word breaker generates both "David" and "David's" when it parses "David's."</span></span>

<span data-ttu-id="4a349-209">Lo stemmer usa l'oggetto [IWordFormSink](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordformsink) per raccogliere l'elenco di parole alternative.</span><span class="sxs-lookup"><span data-stu-id="4a349-209">The stemmer uses the [IWordFormSink](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordformsink) object to gather the list of alternative words.</span></span> <span data-ttu-id="4a349-210">[**IWordFormSink::P utword**](iwordformsink-putword.md) genera la parola finale dallo stemmer.</span><span class="sxs-lookup"><span data-stu-id="4a349-210">[**IWordFormSink::PutWord**](iwordformsink-putword.md) generates the final word from the stemmer.</span></span> <span data-ttu-id="4a349-211">In tutti i casi, la parola finale corrisponde alla parola di input di [**IStemmer:: GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms).</span><span class="sxs-lookup"><span data-stu-id="4a349-211">In all cases, this final word is the same as the input word from [**IStemmer::GenerateWordForms**](/windows/desktop/api/Indexsrv/nf-indexsrv-istemmer-generatewordforms).</span></span> <span data-ttu-id="4a349-212">Ad esempio, data la parola "swim", lo stemmer genera le seguenti forme di Word: "nuoto", "nuotatore", "nuota", "nuotata" e "nuotata" tramite chiamate a [**IWordFormSink::P utaltword**](iwordformsink-putphrase.md).</span><span class="sxs-lookup"><span data-stu-id="4a349-212">For example, given the word "swim," the stemmer generates the following word forms: "swimming," "swimmer," "swims," "swam," and "swum," through calls to [**IWordFormSink::PutAltWord**](iwordformsink-putphrase.md).</span></span> <span data-ttu-id="4a349-213">Lo stemmer genera "swim" tramite **IWordFormSink::P utword**.</span><span class="sxs-lookup"><span data-stu-id="4a349-213">The stemmer generates "swim" through **IWordFormSink::PutWord**.</span></span>

### <a name="scalability-performancy-and-security"></a><span data-ttu-id="4a349-214">Scalabilità, Performancy e sicurezza</span><span class="sxs-lookup"><span data-stu-id="4a349-214">Scalability, Performancy, and Security</span></span>

<span data-ttu-id="4a349-215">Gli stemmer, come i Word breaker, devono usare un modello di threading "libero" e registrarsi con COM con il modello di threading impostato su "Free" o "both".</span><span class="sxs-lookup"><span data-stu-id="4a349-215">Stemmers, like word breakers, must use a "free" threading model and register with COM with their threading model set to "free" or "both."</span></span> <span data-ttu-id="4a349-216">Windows Search chiama istanze separate dello stemmer da diversi thread contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="4a349-216">Windows Search calls separate instances of the stemmer from different threads at the same time.</span></span> <span data-ttu-id="4a349-217">Gli stemmer devono quindi avere dati di istanza minimi.</span><span class="sxs-lookup"><span data-stu-id="4a349-217">Stemmers should therefore have minimal instance data.</span></span>

<span data-ttu-id="4a349-218">L'accuratezza dello stemmer ha un impatto significativo sulla rilevanza delle query.</span><span class="sxs-lookup"><span data-stu-id="4a349-218">Stemmer accuracy has a significant impact on query relevance.</span></span> <span data-ttu-id="4a349-219">Se lo stemmer deriva il testo in modo errato, le query possono restituire risultati imprevedibili e non accurati.</span><span class="sxs-lookup"><span data-stu-id="4a349-219">If the stemmer stems the text incorrectly, queries may return unpredictable and inaccurate results.</span></span> <span data-ttu-id="4a349-220">Gli stemmer devono gestire centinaia di query al secondo senza influire negativamente sulle prestazioni di esecuzione delle query.</span><span class="sxs-lookup"><span data-stu-id="4a349-220">Stemmers must handle hundreds of queries per second without negatively affecting query performance.</span></span> <span data-ttu-id="4a349-221">Le prestazioni dello stemmer dovrebbero migliorare con una maggiore capacità hardware.</span><span class="sxs-lookup"><span data-stu-id="4a349-221">Stemmer performance should improve with increased hardware capability.</span></span> <span data-ttu-id="4a349-222">Per informazioni sulla risoluzione dei problemi relativi agli stemmer, vedere [risoluzione dei problemi relativi a risorse di linguaggio e procedure consigliate](troubleshooting-language-resources.md).</span><span class="sxs-lookup"><span data-stu-id="4a349-222">For information about troubleshooting stemmers, see [Troubleshooting Language Resources and Best Practices](troubleshooting-language-resources.md).</span></span>

<span data-ttu-id="4a349-223">Gli stemmer per la ricerca di Windows vengono eseguiti nel contesto di sicurezza locale.</span><span class="sxs-lookup"><span data-stu-id="4a349-223">Stemmers for Windows Search run in the Local Security context.</span></span> <span data-ttu-id="4a349-224">Devono essere scritti per gestire i buffer e per eseguire lo stack in modo corretto.</span><span class="sxs-lookup"><span data-stu-id="4a349-224">They should be written to manage buffers and to stack correctly.</span></span> <span data-ttu-id="4a349-225">Tutte le copie di stringhe devono avere controlli espliciti per evitare sovraccarichi del buffer.</span><span class="sxs-lookup"><span data-stu-id="4a349-225">All string copies must have explicit checks to guard against buffer overruns.</span></span> <span data-ttu-id="4a349-226">Verificare sempre la dimensione allocata del buffer e verificare le dimensioni dei dati rispetto alle dimensioni del buffer.</span><span class="sxs-lookup"><span data-stu-id="4a349-226">You should always verify the allocated size of the buffer and test the size of the data against the size of the buffer.</span></span>

## <a name="related-topics"></a><span data-ttu-id="4a349-227">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="4a349-227">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4a349-228">Estensione delle risorse della lingua</span><span class="sxs-lookup"><span data-stu-id="4a349-228">Extending Language Resources</span></span>](extending-language-resources-in-windows-search.md)
</dt> <dt>

[<span data-ttu-id="4a349-229">Informazioni sui componenti delle risorse della lingua</span><span class="sxs-lookup"><span data-stu-id="4a349-229">Understanding Language Resource Components</span></span>](understanding-language-resource-components.md)
</dt> <dt>

[<span data-ttu-id="4a349-230">Considerazioni linguistiche e Unicode</span><span class="sxs-lookup"><span data-stu-id="4a349-230">Linguistic and Unicode Considerations</span></span>](linguistic-and-unicode-considerations.md)
</dt> <dt>

[<span data-ttu-id="4a349-231">Risoluzione dei problemi relativi a risorse di linguaggio e procedure consigliate</span><span class="sxs-lookup"><span data-stu-id="4a349-231">Troubleshooting Language Resources and Best Practices</span></span>](troubleshooting-language-resources.md)
</dt> </dl>

 

 
