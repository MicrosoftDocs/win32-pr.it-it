---
description: Usando i componenti delle API di notifica è possibile notificare all'indicizzatore che un elemento è stato modificato, spostato o eliminato e può aggiungere ambiti di ricerca alla coda degli URL dell'indicizzatore di ricerca di Windows che richiedono l'indicizzazione.
ms.assetid: 817550e2-a256-48d5-9fa6-1ea04f8b8589
title: Notifica dell'indice delle modifiche (Windows Search)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f5a89112da20c4010e1fc23fab16778309195d20
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104128602"
---
# <a name="notifying-the-index-of-changes-windows-search"></a><span data-ttu-id="bff56-103">Notifica dell'indice delle modifiche (Windows Search)</span><span class="sxs-lookup"><span data-stu-id="bff56-103">Notifying the Index of Changes (Windows Search)</span></span>

<span data-ttu-id="bff56-104">Usando i componenti delle API di notifica è possibile notificare all'indicizzatore che un elemento è stato modificato, spostato o eliminato e può aggiungere ambiti di ricerca alla coda degli URL dell'indicizzatore di ricerca di Windows che richiedono l'indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="bff56-104">By using the notification APIs components can notify the indexer that an item has been changed, moved or deleted, and can add search scopes to the Windows Search indexer's queue of URLs that require indexing.</span></span>

<span data-ttu-id="bff56-105">I componenti possono notificare all'indicizzatore di Windows Search che i dati nel relativo archivio sono stati modificati.</span><span class="sxs-lookup"><span data-stu-id="bff56-105">Components can notify the Windows Search indexer that data in their store has changed.</span></span> <span data-ttu-id="bff56-106">In genere, è possibile basarsi sulle ricerche per indicizzazione pianificate dell'indicizzatore.</span><span class="sxs-lookup"><span data-stu-id="bff56-106">Typically, you can rely on the indexer's scheduled crawls.</span></span> <span data-ttu-id="bff56-107">Tuttavia, fornire notifiche all'indicizzatore può migliorare le prestazioni assicurando che l'indicizzatore non indicizzazione dell'intero archivio negli indici incrementali.</span><span class="sxs-lookup"><span data-stu-id="bff56-107">However, providing notifications to the indexer can improve performance by ensuring the indexer doesn't crawl the entire store on incremental indexes.</span></span> <span data-ttu-id="bff56-108">Ad esempio, questa opzione potrebbe essere consigliata se si prevede che l'archivio dati sia eccezionalmente grande e/o particolarmente occupato, ad esempio un archivio dati di posta elettronica.</span><span class="sxs-lookup"><span data-stu-id="bff56-108">For example, this might recommended if you expect your data store to be exceptionally large and/or exceptionally busy, such as an email data store for example.</span></span>

-   [<span data-ttu-id="bff56-109">Implementazione di notifiche gestite da indicizzatore</span><span class="sxs-lookup"><span data-stu-id="bff56-109">Implementing Indexer-managed Notifications</span></span>](#implementing-indexer-managed-notifications)
    -   [<span data-ttu-id="bff56-110">Coda notifiche</span><span class="sxs-lookup"><span data-stu-id="bff56-110">Notifications Queue</span></span>](#notifications-queue)
    -   [<span data-ttu-id="bff56-111">ISearchPersistentItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="bff56-111">ISearchPersistentItemsChangedSink</span></span>](#isearchpersistentitemschangedsink)
-   [<span data-ttu-id="bff56-112">Implementazione di notifiche gestite dal provider</span><span class="sxs-lookup"><span data-stu-id="bff56-112">Implementing Provider-managed Notifications</span></span>](#implementing-provider-managed-notifications)
    -   [<span data-ttu-id="bff56-113">Coda notifiche</span><span class="sxs-lookup"><span data-stu-id="bff56-113">Notifications Queue</span></span>](#notifications-queue)
    -   [<span data-ttu-id="bff56-114">ISearchItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="bff56-114">ISearchItemsChangedSink</span></span>](#isearchitemschangedsink)
    -   [<span data-ttu-id="bff56-115">ISearchNotifyInlineSite</span><span class="sxs-lookup"><span data-stu-id="bff56-115">ISearchNotifyInlineSite</span></span>](#isearchnotifyinlinesite)
-   [<span data-ttu-id="bff56-116">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="bff56-116">Additional Resources</span></span>](#additional-resources)
-   [<span data-ttu-id="bff56-117">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="bff56-117">Related topics</span></span>](#related-topics)

## <a name="implementing-indexer-managed-notifications"></a><span data-ttu-id="bff56-118">Implementazione di notifiche gestite da indicizzatore</span><span class="sxs-lookup"><span data-stu-id="bff56-118">Implementing Indexer-managed Notifications</span></span>

<span data-ttu-id="bff56-119">Le notifiche gestite dall'indicizzatore consentono di controllare l'accesso all'archivio dati, evitando in tal modo di mantenere la coda delle notifiche durante l'intero processo di indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="bff56-119">Indexer-managed notifications enable you to control access to your data store while freeing you of maintaining the notifications queue throughout the entire indexing process.</span></span> <span data-ttu-id="bff56-120">Il provider di notifiche deve monitorare le modifiche apportate all'archivio dati e creare una coda di notifiche.</span><span class="sxs-lookup"><span data-stu-id="bff56-120">Your notifications provider must monitor changes to the data store and create a notifications queue.</span></span> <span data-ttu-id="bff56-121">Periodicamente, il provider invia un batch di notifiche di modifica all'indicizzatore.</span><span class="sxs-lookup"><span data-stu-id="bff56-121">Periodically, your provider sends a batch of change notifications to the indexer.</span></span> <span data-ttu-id="bff56-122">Quando l'indicizzatore riceve le notifiche, restituisce un riconoscimento ed è possibile rimuovere gli elementi dalla coda.</span><span class="sxs-lookup"><span data-stu-id="bff56-122">When the indexer receives your notifications, it returns an acknowledgement and you can remove the item(s) from your queue.</span></span> <span data-ttu-id="bff56-123">Se dopo un periodo di tempo non si riceve un riconoscimento, è possibile inviare nuovamente le notifiche.</span><span class="sxs-lookup"><span data-stu-id="bff56-123">If after a period of time you do not receive an acknowledgement, you can re-send the notifications.</span></span> <span data-ttu-id="bff56-124">In caso di errore, l'indicizzatore ricompila la coda interna degli elementi per eseguire la ricerca per indicizzazione o esegue una ricerca per indicizzazione incrementale dell'archivio.</span><span class="sxs-lookup"><span data-stu-id="bff56-124">In case of failure, the indexer rebuilds its internal queue of items to crawl or performs an incremental crawl of the store.</span></span>

<span data-ttu-id="bff56-125">Per implementare le notifiche gestite dall'indicizzatore, è necessario implementare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="bff56-125">To implement indexer-managed notifications, you need to implement the following:</span></span>

-   <span data-ttu-id="bff56-126">Meccanismo per il monitoraggio delle modifiche nell'archivio dati.</span><span class="sxs-lookup"><span data-stu-id="bff56-126">A mechanism for monitoring changes in your data store.</span></span>
-   <span data-ttu-id="bff56-127">Una struttura di dati per accodare le informazioni (più strutture di [**\_ \_ \_ modifica persistenti degli elementi di ricerca**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) ) relative a tali modifiche.</span><span class="sxs-lookup"><span data-stu-id="bff56-127">A data structure to queue up information (multiple [**SEARCH\_ITEM\_PERSISTENT\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) structures) about those changes.</span></span>
-   <span data-ttu-id="bff56-128">Interfaccia [**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) per inviare le notifiche all'indicizzatore e per ricevere i riconoscimenti delle notifiche dall'indicizzatore.</span><span class="sxs-lookup"><span data-stu-id="bff56-128">[**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) interface to send your notifications to the indexer and to get notification acknowledgements from the indexer.</span></span>

### <a name="notifications-queue"></a><span data-ttu-id="bff56-129">Coda notifiche</span><span class="sxs-lookup"><span data-stu-id="bff56-129">Notifications Queue</span></span>

<span data-ttu-id="bff56-130">È necessario monitorare e accodare ogni modifica nell'archivio dati da inviare all'indicizzatore come notifica.</span><span class="sxs-lookup"><span data-stu-id="bff56-130">You need to monitor and queue up every change in your data store to send to the indexer as a notification.</span></span> <span data-ttu-id="bff56-131">Il numero di notifiche accodate e la frequenza con cui vengono inviate all'indicizzatore dipendono dalla circostanza.</span><span class="sxs-lookup"><span data-stu-id="bff56-131">How many notifications you queue up and how frequently you send them to the indexer depends on your circumstance.</span></span> <span data-ttu-id="bff56-132">Probabilmente si invia un batch di notifiche per ogni *n* numero di modifiche o dopo un intervallo di tempo *t* o una combinazione dei due.</span><span class="sxs-lookup"><span data-stu-id="bff56-132">Perhaps you send a batch of notifications for every *n* number of changes or after some *t* time interval, or a combination of the two.</span></span>

<span data-ttu-id="bff56-133">L'indicizzatore prevede che le notifiche vengano inserite in una matrice di strutture di [**\_ \_ \_ modifica permanenti degli elementi di ricerca**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) , pertanto è possibile scegliere di implementare la coda in modo analogo.</span><span class="sxs-lookup"><span data-stu-id="bff56-133">The indexer expects the notifications to come in an array of [**SEARCH\_ITEM\_PERSISTENT\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) structures, so you may choose to implement your queue similarly.</span></span>

### <a name="isearchpersistentitemschangedsink"></a><span data-ttu-id="bff56-134">ISearchPersistentItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="bff56-134">ISearchPersistentItemsChangedSink</span></span>

<span data-ttu-id="bff56-135">Per accedere a questa interfaccia, è innanzitutto necessario creare un'istanza di un oggetto [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) per ottenere l'accesso a un oggetto [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) .</span><span class="sxs-lookup"><span data-stu-id="bff56-135">To access this interface, you first instantiate an [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) object to gain access to an [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) object.</span></span> <span data-ttu-id="bff56-136">Da tale oggetto **ISearchCatalogManager** , si crea un'istanza di un oggetto [**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) e si notifica all'indicizzatore le modifiche ai dati con una chiamata al metodo **OnItemsChanged** .</span><span class="sxs-lookup"><span data-stu-id="bff56-136">From that **ISearchCatalogManager** object, you instantiate an [**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) object and notify the indexer of the data changes with a call to the **OnItemsChanged** method.</span></span>

<span data-ttu-id="bff56-137">Nella chiamata a questo metodo si include il numero di modifiche segnalate e una matrice di strutture di [**\_ \_ \_ modifica permanenti degli elementi di ricerca**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) .</span><span class="sxs-lookup"><span data-stu-id="bff56-137">In the call to this method, you include the number of changes being reported and an array of [**SEARCH\_ITEM\_PERSISTENT\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) structures.</span></span> <span data-ttu-id="bff56-138">Viene restituito un array di codici di completamento HR che indica se ogni URL è stato accettato per l'indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="bff56-138">You get back an array of HR completion codes indicating whether each URL was accepted for indexing.</span></span> <span data-ttu-id="bff56-139">Questo è il riconoscimento dell'indicizzatore.</span><span class="sxs-lookup"><span data-stu-id="bff56-139">This is your acknowledgement from the indexer.</span></span>

## <a name="implementing-provider-managed-notifications"></a><span data-ttu-id="bff56-140">Implementazione di notifiche gestite dal provider</span><span class="sxs-lookup"><span data-stu-id="bff56-140">Implementing Provider-managed Notifications</span></span>

<span data-ttu-id="bff56-141">Le notifiche gestite dal provider consentono di controllare l'accesso all'archivio dati e di monitorare lo stato di avanzamento dell'indicizzatore durante l'aggiornamento del catalogo di Windows Search.</span><span class="sxs-lookup"><span data-stu-id="bff56-141">Provider-managed notifications enable you to control access to your data store and to monitor the progress of the indexer as it updates the Windows Search catalog.</span></span> <span data-ttu-id="bff56-142">Il provider deve monitorare le modifiche apportate all'archivio dati e creare una coda di notifiche.</span><span class="sxs-lookup"><span data-stu-id="bff56-142">Your provider must monitor changes to the data store and create a notifications queue.</span></span> <span data-ttu-id="bff56-143">Periodicamente, il provider invia un batch di notifiche di modifica all'indicizzatore.</span><span class="sxs-lookup"><span data-stu-id="bff56-143">Periodically, your provider sends a batch of change notifications to the indexer.</span></span> <span data-ttu-id="bff56-144">Quando l'indicizzatore riceve le notifiche, restituisce un riconoscimento.</span><span class="sxs-lookup"><span data-stu-id="bff56-144">When the indexer receives your notifications, it returns an acknowledgement.</span></span> <span data-ttu-id="bff56-145">Se dopo un periodo di tempo non si riceve un riconoscimento, è possibile inviare nuovamente le notifiche.</span><span class="sxs-lookup"><span data-stu-id="bff56-145">If after a period of time you do not receive an acknowledgement, you can re-send the notifications.</span></span> <span data-ttu-id="bff56-146">Quando l'indicizzatore esegue la ricerca per indicizzazione nell'archivio dati e aggiorna il catalogo di Windows Search, invia una notifica al provider di ogni aggiornamento del catalogo ed è possibile rimuovere gli elementi dalla coda.</span><span class="sxs-lookup"><span data-stu-id="bff56-146">As the indexer crawls the data store and updates the Windows Search catalog, it notifies your provider of each catalog update and you can remove the item(s) from your queue.</span></span> <span data-ttu-id="bff56-147">Il provider mantiene la coda delle notifiche durante questo processo in modo che, in caso di errore, sia possibile inviare di nuovo le notifiche all'indicizzatore.</span><span class="sxs-lookup"><span data-stu-id="bff56-147">Your provider maintains its notification queue throughout this process so that in case of failure, you can resend notifications to the indexer.</span></span>

<span data-ttu-id="bff56-148">Per implementare le notifiche gestite dal provider, è necessario implementare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="bff56-148">To implement provider-managed notifications, you need to implement the following:</span></span>

-   <span data-ttu-id="bff56-149">Meccanismo per il monitoraggio delle modifiche nell'archivio dati.</span><span class="sxs-lookup"><span data-stu-id="bff56-149">A mechanism for monitoring changes in your data store.</span></span>
-   <span data-ttu-id="bff56-150">Una struttura di dati per accodare le informazioni (più strutture di [**\_ \_ modifica degli elementi di ricerca**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) ) relative a tali modifiche.</span><span class="sxs-lookup"><span data-stu-id="bff56-150">A data structure to queue up information (multiple [**SEARCH\_ITEM\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) structures) about those changes.</span></span>
-   <span data-ttu-id="bff56-151">Interfaccia [**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) per inviare le notifiche all'indicizzatore e per ricevere i riconoscimenti delle notifiche dall'indicizzatore.</span><span class="sxs-lookup"><span data-stu-id="bff56-151">[**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) interface to send your notifications to the indexer and to get notification acknowledgements from the indexer.</span></span>
-   <span data-ttu-id="bff56-152">Interfaccia [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) per la ricezione di aggiornamenti sullo stato dell'indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="bff56-152">[**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) interface to receive updates about the status of indexing.</span></span>

### <a name="notifications-queue"></a><span data-ttu-id="bff56-153">Coda notifiche</span><span class="sxs-lookup"><span data-stu-id="bff56-153">Notifications Queue</span></span>

<span data-ttu-id="bff56-154">È necessario monitorare e accodare ogni modifica nell'archivio dati da inviare all'indicizzatore come notifica.</span><span class="sxs-lookup"><span data-stu-id="bff56-154">You need to monitor and queue up every change in your data store to send to the indexer as a notification.</span></span> <span data-ttu-id="bff56-155">Il numero di notifiche accodate e la frequenza con cui vengono inviate all'indicizzatore dipendono dalla circostanza.</span><span class="sxs-lookup"><span data-stu-id="bff56-155">How many notifications you queue up and how frequently you send them to the indexer depends on your circumstance.</span></span> <span data-ttu-id="bff56-156">Probabilmente si invia un batch di notifiche per ogni *n* numero di modifiche o dopo un intervallo di tempo *t* o una combinazione dei due.</span><span class="sxs-lookup"><span data-stu-id="bff56-156">Perhaps you send a batch of notifications for every *n* number of changes or after some *t* time interval, or a combination of the two.</span></span>

<span data-ttu-id="bff56-157">L'indicizzatore prevede che le notifiche vengano fornite in una matrice di strutture di [**\_ \_ modifica degli elementi di ricerca**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) , pertanto è possibile scegliere di archiviare le informazioni sulle modifiche in modo analogo.</span><span class="sxs-lookup"><span data-stu-id="bff56-157">The indexer expects the notifications to come in an array of [**SEARCH\_ITEM\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) structures, so you may choose to store change information similarly.</span></span> <span data-ttu-id="bff56-158">Tuttavia, è anche necessario essere in grado di associare le notifiche inviate con i riconoscimenti e gli aggiornamenti restituiti dall'indicizzatore.</span><span class="sxs-lookup"><span data-stu-id="bff56-158">However, you also need to be able to match the notifications you send with the acknowledgements and updates returned by the indexer.</span></span> <span data-ttu-id="bff56-159">Potrebbe inoltre essere necessario essere in grado di rilevare il tempo necessario per ottenere i riconoscimenti, in modo da poter decidere se/quando inviare nuovamente le notifiche.</span><span class="sxs-lookup"><span data-stu-id="bff56-159">You may also want to be able to detect how long it takes to get acknowledgements, so you can decide if/when to resend notifications.</span></span>

### <a name="isearchitemschangedsink"></a><span data-ttu-id="bff56-160">ISearchItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="bff56-160">ISearchItemsChangedSink</span></span>

<span data-ttu-id="bff56-161">Per accedere a questa interfaccia, è innanzitutto necessario creare un'istanza di un oggetto [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) per ottenere l'accesso a un oggetto [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) .</span><span class="sxs-lookup"><span data-stu-id="bff56-161">To access this interface, you first instantiate an [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) object to gain access to an [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) object.</span></span> <span data-ttu-id="bff56-162">Da tale oggetto **ISearchCatalogManager** , si crea un'istanza di un oggetto [**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) e si notifica all'indicizzatore le modifiche ai dati con una chiamata al metodo **OnItemsChanged** .</span><span class="sxs-lookup"><span data-stu-id="bff56-162">From that **ISearchCatalogManager** object, you instantiate an [**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) object and notify the indexer of the data changes with a call to the **OnItemsChanged** method.</span></span>

<span data-ttu-id="bff56-163">Nella chiamata a questo metodo si include il numero di modifiche segnalate e una matrice di strutture di [**\_ \_ modifica degli elementi di ricerca**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) .</span><span class="sxs-lookup"><span data-stu-id="bff56-163">In the call to this method, you include the number of changes being reported and an array of [**SEARCH\_ITEM\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) structures.</span></span> <span data-ttu-id="bff56-164">Viene restituita una matrice di DocIds assegnati dall'indicizzatore che rappresentano ogni modifica, oltre a una matrice di codici di completamento delle risorse umane che indica se ogni URL è stato accettato per l'indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="bff56-164">You get back an array of indexer-assigned DocIds that represent each change as well as an array of HR completion codes indicating whether each URL was accepted for indexing.</span></span> <span data-ttu-id="bff56-165">Questo è il riconoscimento dell'indicizzatore che ha ricevuto le notifiche e si sta preparando a indicizzare gli elementi.</span><span class="sxs-lookup"><span data-stu-id="bff56-165">This is your acknowledgement from the indexer that it has received your notifications and is preparing to index the items.</span></span>

<span data-ttu-id="bff56-166">Da quel punto in poi, l'indicizzatore invia gli aggiornamenti usando l'interfaccia [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) .</span><span class="sxs-lookup"><span data-stu-id="bff56-166">From that point forward the indexer sends updates using the [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) interface.</span></span>

### <a name="isearchnotifyinlinesite"></a><span data-ttu-id="bff56-167">ISearchNotifyInlineSite</span><span class="sxs-lookup"><span data-stu-id="bff56-167">ISearchNotifyInlineSite</span></span>

<span data-ttu-id="bff56-168">Per ottenere gli aggiornamenti sullo stato degli elementi e del catalogo, è necessario registrare l'interfaccia [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) con l'indicizzatore per poter inviare i callback.</span><span class="sxs-lookup"><span data-stu-id="bff56-168">In order to get updates about the status of both your items and the catalog, you must register your [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) interface with the indexer so it can send you callbacks.</span></span> <span data-ttu-id="bff56-169">Ogni aggiornamento inviato tramite [**ISearchNotifyInlineSite:: OnItemIndexedStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-onitemindexedstatuschange) identifica gli elementi in base a DocId, lo stato di ogni elemento ([**\_ \_ \_ stato di indicizzazione degli elementi di ricerca**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_indexing_status)) e la fase di indicizzazione ([**\_ \_ fase**](/windows/desktop/api/Searchapi/ne-searchapi-search_indexing_phase)di indicizzazione di ricerca) in cui si trovano gli elementi.</span><span class="sxs-lookup"><span data-stu-id="bff56-169">Each update sent using [**ISearchNotifyInlineSite::OnItemIndexedStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-onitemindexedstatuschange) identifies the items by DocId, the status of each item ([**SEARCH\_ITEM\_INDEXING\_STATUS**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_indexing_status)) and the indexing phase ([**SEARCH\_INDEXING\_PHASE**](/windows/desktop/api/Searchapi/ne-searchapi-search_indexing_phase)) the items are in.</span></span>

<span data-ttu-id="bff56-170">Non solo si ricevono aggiornamenti sullo stato di ogni elemento, come descritto in precedenza, si ottengono anche informazioni importanti sullo stato del catalogo stesso.</span><span class="sxs-lookup"><span data-stu-id="bff56-170">Not only do you receive updates on the status of each item, as described earlier, you also get important information about the status of the catalog itself.</span></span> <span data-ttu-id="bff56-171">Il servizio Windows Search può essere interrotto o riavviato dall'utente finale, da un'applicazione di terze parti o da un altro errore.</span><span class="sxs-lookup"><span data-stu-id="bff56-171">The Windows Search service can be interrupted or restarted by the end user, a third party application, or some other failure.</span></span> <span data-ttu-id="bff56-172">Quando si verifica questo problema, è necessario un modo per determinare quali notifiche inviare nuovamente all'indicizzatore.</span><span class="sxs-lookup"><span data-stu-id="bff56-172">When this happens, you need a way to determine what notifications to repush to the indexer.</span></span>

<span data-ttu-id="bff56-173">Il metodo [**ISearchNotifyInlineSite:: OnCatalogStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-oncatalogstatuschange) , chiamato dal servizio di ricerca di Windows, informa i client sullo stato del catalogo usando i parametri descritti nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="bff56-173">The [**ISearchNotifyInlineSite::OnCatalogStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-oncatalogstatuschange) method, called by the Windows Search service, informs clients about the status of the catalog using the parameters described in the following table.</span></span>



| <span data-ttu-id="bff56-174">Parametro</span><span class="sxs-lookup"><span data-stu-id="bff56-174">Parameter</span></span>                 | <span data-ttu-id="bff56-175">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bff56-175">Description</span></span>                                                                                                                                           |
|---------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="bff56-176">guidCatalogResetSignature</span><span class="sxs-lookup"><span data-stu-id="bff56-176">guidCatalogResetSignature</span></span> | <span data-ttu-id="bff56-177">GUID che rappresenta la reimpostazione del catalogo.</span><span class="sxs-lookup"><span data-stu-id="bff56-177">A GUID representing the catalog reset.</span></span> <span data-ttu-id="bff56-178">Se questo GUID viene modificato, tutte le notifiche devono essere inviate nuovamente.</span><span class="sxs-lookup"><span data-stu-id="bff56-178">If this GUID changes, all notifications must be resent.</span></span>                                                        |
| <span data-ttu-id="bff56-179">guidCheckPointSignature</span><span class="sxs-lookup"><span data-stu-id="bff56-179">guidCheckPointSignature</span></span>   | <span data-ttu-id="bff56-180">GUID che rappresenta l'ultimo checkpoint ripristinato.</span><span class="sxs-lookup"><span data-stu-id="bff56-180">A GUID representing the last checkpoint restored.</span></span> <span data-ttu-id="bff56-181">Se questo GUID viene modificato, tutte le notifiche accumulate dall'ultimo checkpoint salvato devono essere inviate nuovamente.</span><span class="sxs-lookup"><span data-stu-id="bff56-181">If this GUID changes, all notifications accumulated since the last saved checkpoint must be resent.</span></span> |
| <span data-ttu-id="bff56-182">dwLastCheckPointNumber</span><span class="sxs-lookup"><span data-stu-id="bff56-182">dwLastCheckPointNumber</span></span>    | <span data-ttu-id="bff56-183">Numero che indica l'ultimo checkpoint salvato.</span><span class="sxs-lookup"><span data-stu-id="bff56-183">A number indicating the last checkpoint saved.</span></span>                                                                                                        |



 

 

<span data-ttu-id="bff56-184">Quando si verifica un checkpoint del catalogo, il servizio di ricerca aggiorna il *dwLastCheckPointNumber* e tutte le notifiche inviate prima del checkpoint sono sicure e ripristinabili in caso di errore del servizio.</span><span class="sxs-lookup"><span data-stu-id="bff56-184">When a catalog checkpoint occurs, the search service updates the *dwLastCheckPointNumber*, and all notifications sent prior to that checkpoint are safe and recoverable in the event of a service failure.</span></span> <span data-ttu-id="bff56-185">I provider di notifiche devono tenere traccia solo delle notifiche inviate tra i checkpoint e il push in caso di ripristino o reimpostazione del catalogo.</span><span class="sxs-lookup"><span data-stu-id="bff56-185">Notifications providers need to track only those notifications sent between checkpoints and repush in case of a catalog restore or reset.</span></span>

<span data-ttu-id="bff56-186">Se si verifica un ripristino del catalogo, il servizio di ricerca esegue il rollback del catalogo all'ultimo checkpoint salvato e aggiorna *guidCheckPointSignature*.</span><span class="sxs-lookup"><span data-stu-id="bff56-186">If a catalog restore occurs, the search service rolls back the catalog to the last saved checkpoint and updates the *guidCheckPointSignature*.</span></span> <span data-ttu-id="bff56-187">In questa situazione, i provider di notifiche devono respingere tutte le notifiche accumulate dal checkpoint salvato più recente come identificato da *dwLastCheckPointNumber*.</span><span class="sxs-lookup"><span data-stu-id="bff56-187">In this situation, notifications providers must repush all notifications accumulated since the most recent saved checkpoint as identified by the *dwLastCheckPointNumber*.</span></span>

<span data-ttu-id="bff56-188">Se deve essere eseguita la reimpostazione di un catalogo, il servizio di ricerca Reimposta l'intero catalogo e aggiorna *guidCatalogResetSignature*.</span><span class="sxs-lookup"><span data-stu-id="bff56-188">If a catalog reset should occur, the search service resets the entire catalog and updates the *guidCatalogResetSignature*.</span></span> <span data-ttu-id="bff56-189">Il provider di notifiche deve eseguire di nuovo il push dell'intero ambito di ricerca.</span><span class="sxs-lookup"><span data-stu-id="bff56-189">Notifications provider must repush its entire crawl scope again.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="bff56-190">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="bff56-190">Additional Resources</span></span>

-   <span data-ttu-id="bff56-191">Per una panoramica del processo di indicizzazione, vedere [il processo di indicizzazione](-search-indexing-process-overview.md).</span><span class="sxs-lookup"><span data-stu-id="bff56-191">For an overview of the indexing process, see [The Indexing Process](-search-indexing-process-overview.md).</span></span>
-   <span data-ttu-id="bff56-192">Per panoramiche su Catalog Manager e Catalog Search Manager (CSM), vedere [using the Catalog Manager](-search-3x-wds-mngidx-catalog-manager.md) and [using the Crawl scope Manager](-search-3x-wds-extidx-csm.md).</span><span class="sxs-lookup"><span data-stu-id="bff56-192">For overviews of the Catalog Manager and Catalog Search Manager (CSM), see [Using the Catalog Manager](-search-3x-wds-mngidx-catalog-manager.md) and [Using the Crawl Scope Manager](-search-3x-wds-extidx-csm.md).</span></span>
-   <span data-ttu-id="bff56-193">Per informazioni sulla creazione di un archivio dati della shell, vedere [Implementing the Basic Folder Object Interfaces](/previous-versions/windows/desktop/legacy/cc144093(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="bff56-193">For information about creating a Shell data store, see [Implementing the Basic Folder Object Interfaces](/previous-versions/windows/desktop/legacy/cc144093(v=vs.85)).</span></span>

## <a name="related-topics"></a><span data-ttu-id="bff56-194">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="bff56-194">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="bff56-195">**Informazioni concettuali**</span><span class="sxs-lookup"><span data-stu-id="bff56-195">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="bff56-196">Sviluppo di gestori di protocollo</span><span class="sxs-lookup"><span data-stu-id="bff56-196">Developing Protocol Handlers</span></span>](-search-3x-wds-phaddins.md)
</dt> <dt>

[<span data-ttu-id="bff56-197">Informazioni sui gestori di protocollo</span><span class="sxs-lookup"><span data-stu-id="bff56-197">Understanding Protocol Handlers</span></span>](-search-3x-wds-extidx-prot-implementing.md)
</dt> <dt>

[<span data-ttu-id="bff56-198">Aggiunta di icone e menu di scelta rapida</span><span class="sxs-lookup"><span data-stu-id="bff56-198">Adding Icons and Context Menus</span></span>](-search-3x-wds-ph-ui-extensions.md)
</dt> <dt>

[<span data-ttu-id="bff56-199">Esempio di codice: estensioni della Shell per i gestori di protocollo</span><span class="sxs-lookup"><span data-stu-id="bff56-199">Code Sample: Shell Extensions for Protocol Handlers</span></span>](-search-3x-wds-ph-ui-samplecode.md)
</dt> <dt>

[<span data-ttu-id="bff56-200">Installazione e registrazione di gestori di protocollo</span><span class="sxs-lookup"><span data-stu-id="bff56-200">Installing and Registering Protocol Handlers</span></span>](-search-3x-wds-ph-install-registration.md)
</dt> <dt>

[<span data-ttu-id="bff56-201">Creazione di un connettore di ricerca per un gestore di protocollo</span><span class="sxs-lookup"><span data-stu-id="bff56-201">Creating a Search Connector for a Protocol Handler</span></span>](-search-3x-wds-ph-search-connector.md)
</dt> <dt>

[<span data-ttu-id="bff56-202">Debug di gestori di protocollo</span><span class="sxs-lookup"><span data-stu-id="bff56-202">Debugging Protocol Handlers</span></span>](-search-ws-protocolhandlertesting.md)
</dt> </dl>

 

 
