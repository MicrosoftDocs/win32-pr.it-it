---
description: Gestione ambito ricerca per indicizzazione consente di aggiungere e rimuovere le radici di ricerca per gli archivi dati da e verso l'ambito di ricerca per indicizzazione di Windows Search.
ms.assetid: 0f1ff41f-7c4c-4516-bb55-bf09a8f2f3bc
title: Gestione delle radici di ricerca
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cbdd63e5e71cd18d3028c6d08019890f90c0228a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104225961"
---
# <a name="managing-search-roots"></a><span data-ttu-id="c38a5-103">Gestione delle radici di ricerca</span><span class="sxs-lookup"><span data-stu-id="c38a5-103">Managing Search Roots</span></span>

<span data-ttu-id="c38a5-104">Gestione ambito ricerca per indicizzazione consente di aggiungere e rimuovere le radici di ricerca per gli archivi dati da e verso l'ambito di ricerca per indicizzazione di Windows Search.</span><span class="sxs-lookup"><span data-stu-id="c38a5-104">The Crawl Scope Manager (CSM) enables you to add and remove search roots for your data stores to and from the Windows Search crawl scope.</span></span>

<span data-ttu-id="c38a5-105">Vengono inoltre presentati gli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="c38a5-105">This topic includes the following subjects:</span></span>

-   [<span data-ttu-id="c38a5-106">Informazioni sulle radici di ricerca</span><span class="sxs-lookup"><span data-stu-id="c38a5-106">About Search Roots</span></span>](#about-search-roots)
-   [<span data-ttu-id="c38a5-107">Prima di iniziare</span><span class="sxs-lookup"><span data-stu-id="c38a5-107">Before You Begin</span></span>](#before-you-begin)
-   [<span data-ttu-id="c38a5-108">Windows 7: nuova API di gestione degli ambiti di ricerca</span><span class="sxs-lookup"><span data-stu-id="c38a5-108">Windows 7: New Crawl Scope Manager API</span></span>](#windows-7-new-crawl-scope-manager-api)
-   [<span data-ttu-id="c38a5-109">Aggiunta di radici all'ambito di ricerca per indicizzazione</span><span class="sxs-lookup"><span data-stu-id="c38a5-109">Adding Roots to the Crawl Scope</span></span>](#adding-roots-to-the-crawl-scope)
-   [<span data-ttu-id="c38a5-110">Rimozione delle radici dall'ambito della ricerca per indicizzazione</span><span class="sxs-lookup"><span data-stu-id="c38a5-110">Removing Roots from the Crawl Scope</span></span>](#removing-roots-from-the-crawl-scope)
-   [<span data-ttu-id="c38a5-111">Enumerazione delle radici nell'ambito della ricerca per indicizzazione</span><span class="sxs-lookup"><span data-stu-id="c38a5-111">Enumerating Roots in the Crawl Scope</span></span>](#enumerating-roots-in-the-crawl-scope)
-   [<span data-ttu-id="c38a5-112">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="c38a5-112">Related topics</span></span>](#related-topics)

 

## <a name="about-search-roots"></a><span data-ttu-id="c38a5-113">Informazioni sulle radici di ricerca</span><span class="sxs-lookup"><span data-stu-id="c38a5-113">About Search Roots</span></span>

<span data-ttu-id="c38a5-114">Una radice di ricerca definisce la base di uno spazio dei nomi della shell in cui è possibile includere o escludere ambiti specifici ed è in genere il contenitore di livello più alto in un protocollo che può essere enumerato.</span><span class="sxs-lookup"><span data-stu-id="c38a5-114">A search root defines the base of a Shell namespace where specific scopes could be included or excluded, and is usually the highest level container in a protocol that can be enumerated.</span></span> <span data-ttu-id="c38a5-115">Non specifica quali parti dell'archivio devono essere indicizzate o meno. indica semplicemente che un archivio contenuto esiste ed è associato a un gestore di protocollo registrato.</span><span class="sxs-lookup"><span data-stu-id="c38a5-115">It does not specify which parts of this store should or should not be indexed; it merely signals that a content store exists and is associated with a registered protocol handler.</span></span> <span data-ttu-id="c38a5-116">La sintassi per l'identificazione di un URL radice di ricerca include il protocollo, l'ID di sicurezza dell'archivio o dell'utente, il percorso e facoltativamente un elemento specifico (ad esempio un file).</span><span class="sxs-lookup"><span data-stu-id="c38a5-116">The syntax for identifying a search root URL includes the protocol, the store or user's security identifier, the path, and optionally a specific item (like a file).</span></span> <span data-ttu-id="c38a5-117">Negli esempi seguenti vengono illustrate due forme della sintassi per una radice di ricerca.</span><span class="sxs-lookup"><span data-stu-id="c38a5-117">The following examples show two forms of the syntax for a search root.</span></span>


```
<protocol>://<store or SID>\<path>\[item]
or
<protocol>://<store or SID>/<path>/[item]
```



<span data-ttu-id="c38a5-118">Il <protocol> segmento deve essere seguito da due (2) barre ('/'), a meno che non sia il file: protocollo, che richiede tre barre (file:///).</span><span class="sxs-lookup"><span data-stu-id="c38a5-118">The <protocol> segment must be followed by two (2) forward slashes ('/') unless it is the file: protocol, which requires three slashes (file:///).</span></span> <span data-ttu-id="c38a5-119">Il <site or SID> segmento rappresenta un archivio del contenuto o un identificatore di sicurezza utente se la radice di ricerca è destinata a essere specifica per l'utente.</span><span class="sxs-lookup"><span data-stu-id="c38a5-119">The <site or SID> segment represents either a content store or a user security identifier if the search root is meant to be specific to the user.</span></span> <span data-ttu-id="c38a5-120">Il <path> segmento è un set di contenitori, ad esempio directory o cartelle, e può includere il carattere jolly " \* ".</span><span class="sxs-lookup"><span data-stu-id="c38a5-120">The <path> segment is a set of containers, like directories or folders, and can include the wildcard character '\*'.</span></span> <span data-ttu-id="c38a5-121">Il valore di</span><span class="sxs-lookup"><span data-stu-id="c38a5-121">The</span></span> <item> <span data-ttu-id="c38a5-122">il segmento è facoltativo e può includere anche il carattere jolly " \* ".</span><span class="sxs-lookup"><span data-stu-id="c38a5-122">segment is optional and can also include the wildcard character '\*'.</span></span> <span data-ttu-id="c38a5-123">Se non si include un elemento, assicurarsi di terminare il segmento di percorso con una barra o l'indicizzatore presuppone che l'ultimo sottocontenitore sia un elemento.</span><span class="sxs-lookup"><span data-stu-id="c38a5-123">If you do not include an item, be sure to finish your path segment with a slash or the indexer will assume that the last subcontainer is an item.</span></span>

<span data-ttu-id="c38a5-124">Si supponga, ad esempio, di avere implementato un gestore di protocollo (myPH) per gestire i file di tipo \* . myext per un'applicazione personalizzata.</span><span class="sxs-lookup"><span data-stu-id="c38a5-124">For example, suppose you have implemented a protocol handler (myPH) to handle files of type \*.myext for a custom application.</span></span> <span data-ttu-id="c38a5-125">Tutti questi file si trovano nella cartella WorkteamA \\ ProjectFiles in un computer locale.</span><span class="sxs-lookup"><span data-stu-id="c38a5-125">All of these files will be located in the folder WorkteamA\\ProjectFiles on a local computer.</span></span> <span data-ttu-id="c38a5-126">La radice di ricerca per potrebbe essere simile alla seguente:</span><span class="sxs-lookup"><span data-stu-id="c38a5-126">The search root for that might look like this:</span></span>

-   <span data-ttu-id="c38a5-127">myPH:///C: \\ WorkteamA \\ ProjectFiles</span><span class="sxs-lookup"><span data-stu-id="c38a5-127">myPH:///C:\\WorkteamA\\ProjectFiles</span></span>\\

<span data-ttu-id="c38a5-128">Si supponga che si stia pianificando di includere tutti i file con estensione myext, ma non nient'altro da tale contenitore nell'indice.</span><span class="sxs-lookup"><span data-stu-id="c38a5-128">Suppose you are planning to include all .myext files but nothing else from that container in the index.</span></span> <span data-ttu-id="c38a5-129">La radice di ricerca per potrebbe essere simile alla seguente:</span><span class="sxs-lookup"><span data-stu-id="c38a5-129">The search root for that might look like this:</span></span>

-   <span data-ttu-id="c38a5-130">myPH:///C: \\ WorkteamA \\ ProjectFiles \\ \* . myext.</span><span class="sxs-lookup"><span data-stu-id="c38a5-130">myPH:///C:\\WorkteamA\\ProjectFiles\\\*.myext.</span></span>

<span data-ttu-id="c38a5-131">I pattern con caratteri jolly definiscono gli URL usando il carattere jolly " \* " e sono considerati un modello anziché un URL, ma la terminologia viene spesso usata in modo intercambiabile.</span><span class="sxs-lookup"><span data-stu-id="c38a5-131">Wildcard patterns define URLs by using the wildcard character '\*' and are considered a pattern rather than a URL, but the terminology is often used interchangeably.</span></span> <span data-ttu-id="c38a5-132">Ad esempio, file:///C: \\ \\ \* \\ i dati di NomeProgetto \\ corrisponderanno agli URL seguenti:</span><span class="sxs-lookup"><span data-stu-id="c38a5-132">For example, file:///C:\\ProjectA\\\*\\data\\ would match the following URLs:</span></span>

-   <span data-ttu-id="c38a5-133">C: \\ ProjectA \\ **Version1** \\ dati</span><span class="sxs-lookup"><span data-stu-id="c38a5-133">C:\\ProjectA\\**version1**\\data</span></span>\\
-   <span data-ttu-id="c38a5-134">C: \\ ProjectA \\ **Version2** \\ dati</span><span class="sxs-lookup"><span data-stu-id="c38a5-134">C:\\ProjectA\\**version2**\\data</span></span>\\

<span data-ttu-id="c38a5-135">Ma tale modello non corrisponderà a questo URL:</span><span class="sxs-lookup"><span data-stu-id="c38a5-135">But that pattern would not match this URL:</span></span>

-   <span data-ttu-id="c38a5-136">C: \\ ProjectA \\ **Version1 \\ Temp** \\ Data</span><span class="sxs-lookup"><span data-stu-id="c38a5-136">C:\\ProjectA\\**version1\\temp**\\data</span></span>\\

<span data-ttu-id="c38a5-137">È necessario creare nuove radici di ricerca per i contenitori che non si trovano già nell'ambito della ricerca per indicizzazione dell'indicizzatore.</span><span class="sxs-lookup"><span data-stu-id="c38a5-137">You should create new search roots for containers that are not already in the crawl scope of the indexer.</span></span> <span data-ttu-id="c38a5-138">Se il percorso C: \\ ParentScope è già incluso nell'ambito della ricerca per indicizzazione, non è necessario aggiungere una nuova radice di ricerca per C: \\ ParentScope ChildScope a meno che non \\ si sappia che l'ambito figlio è stato precedentemente escluso.</span><span class="sxs-lookup"><span data-stu-id="c38a5-138">If path C:\\ParentScope is already included in the crawl scope, you do not need to add a new search root for C:\\ParentScope\\ChildScope unless you know that the child scope was previously excluded.</span></span>

<span data-ttu-id="c38a5-139">L'interfaccia utente per l'impostazione delle opzioni di ricerca di Windows Visualizza le radici di ricerca per gli utenti in modo che possano ridefinire le regole di ambito per le ricerche.</span><span class="sxs-lookup"><span data-stu-id="c38a5-139">The user interface for setting Windows Search options displays search roots to users so they can refine the scope rules for their searches.</span></span> <span data-ttu-id="c38a5-140">Come parte del processo di installazione del gestore di protocollo personalizzato, del contenitore e/o dell'applicazione, è possibile definire un ambito di ricerca per indicizzazione predefinito, con regole di inclusione ed esclusione.</span><span class="sxs-lookup"><span data-stu-id="c38a5-140">As part of the installation process for your custom protocol handler, container, and/or application, you might define a default crawl scope, with inclusion and exclusion rules.</span></span> <span data-ttu-id="c38a5-141">Queste regole vengono presentate agli utenti finali come località.</span><span class="sxs-lookup"><span data-stu-id="c38a5-141">These rules are presented to end users as locations.</span></span> <span data-ttu-id="c38a5-142">Gli utenti possono spostarsi tra le sottodirectory della radice di ricerca predefinita e selezionare quelle che desiderano includere nelle ricerche o deselezionare quelle che vogliono escludere.</span><span class="sxs-lookup"><span data-stu-id="c38a5-142">Users can navigate within the subdirectories of your predefined search root and select the ones they want to include in searches or clear the ones they want to exclude.</span></span>

 

## <a name="before-you-begin"></a><span data-ttu-id="c38a5-143">Prima di iniziare</span><span class="sxs-lookup"><span data-stu-id="c38a5-143">Before You Begin</span></span>

<span data-ttu-id="c38a5-144">Prima di poter usare una delle interfacce di gestione dell'ambito di ricerca per indicizzazione (CSM), è necessario eseguire i passaggi dei prerequisiti seguenti:</span><span class="sxs-lookup"><span data-stu-id="c38a5-144">Before you can use any of the Crawl Scope Manager (CSM) interfaces, you must perform the following prerequisite steps:</span></span>

1.  <span data-ttu-id="c38a5-145">Creare l'oggetto **CrawlSearchManager** e ottenere la relativa interfaccia [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) .</span><span class="sxs-lookup"><span data-stu-id="c38a5-145">Create the **CrawlSearchManager** object and obtain its [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) interface.</span></span>
2.  <span data-ttu-id="c38a5-146">Chiamare [**ISearchManager:: getCatalog**](/windows/desktop/api/Searchapi/nf-searchapi-isearchmanager-getcatalog) per "SystemIndex" per ottenere un'istanza di un'interfaccia [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) .</span><span class="sxs-lookup"><span data-stu-id="c38a5-146">Call [**ISearchManager::GetCatalog**](/windows/desktop/api/Searchapi/nf-searchapi-isearchmanager-getcatalog) for "SystemIndex" to obtain an instance of an [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) interface.</span></span>
3.  <span data-ttu-id="c38a5-147">Chiamare [**ISearchCatalogManager:: GetCrawlScopeManager**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcatalogmanager-getcrawlscopemanager) per ottenere un'istanza dell'interfaccia [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) .</span><span class="sxs-lookup"><span data-stu-id="c38a5-147">Call [**ISearchCatalogManager::GetCrawlScopeManager**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcatalogmanager-getcrawlscopemanager) to obtain an instance of [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) interface.</span></span>

<span data-ttu-id="c38a5-148">Dopo aver apportato modifiche al gestore dell'ambito di ricerca per indicizzazione (CSM), è necessario chiamare [**ISearchCrawlScopeManager:: SaveAll**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-saveall).</span><span class="sxs-lookup"><span data-stu-id="c38a5-148">After making any changes to the Crawl Scope Manager (CSM), you must call [**ISearchCrawlScopeManager::SaveAll**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-saveall).</span></span> <span data-ttu-id="c38a5-149">Questo metodo non accetta parametri e restituisce \_ OK in seguito all'esito positivo.</span><span class="sxs-lookup"><span data-stu-id="c38a5-149">This method takes no parameters and returns S\_OK on success.</span></span>

 

## <a name="windows-7-new-crawl-scope-manager-api"></a><span data-ttu-id="c38a5-150">Windows 7: nuova API di gestione degli ambiti di ricerca</span><span class="sxs-lookup"><span data-stu-id="c38a5-150">Windows 7: New Crawl Scope Manager API</span></span>

<span data-ttu-id="c38a5-151">In **Windows 7 e versioni successive**, [**ISearchCrawlScopeManager2**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager2) estende le funzionalità dell'interfaccia [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) .</span><span class="sxs-lookup"><span data-stu-id="c38a5-151">In **Windows 7 and later**, [**ISearchCrawlScopeManager2**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager2) extends the functionality of the [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) interface.</span></span> <span data-ttu-id="c38a5-152">Il metodo [**ISearchCrawlScopeManager2:: GetVersion**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager2-getversion) ottiene la versione CSM (Crawl scope Manager), che informa i client se lo stato del CSM è stato modificato.</span><span class="sxs-lookup"><span data-stu-id="c38a5-152">The [**ISearchCrawlScopeManager2::GetVersion**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager2-getversion) method gets the Crawl Scope Manager (CSM) version, which informs clients if the state of the CSM has changed.</span></span> <span data-ttu-id="c38a5-153">**ISearchCrawlScopeManager2:: GetVersion** non comporta una chiamata tra processi.</span><span class="sxs-lookup"><span data-stu-id="c38a5-153">**ISearchCrawlScopeManager2::GetVersion** does not result in a cross-process call.</span></span> <span data-ttu-id="c38a5-154">Se la funzione ha esito positivo, il puntatore restituito rimane valido finché il client non chiama **UnmapViewOfFile** sull'indicatore di misura e **CloseHandle** sull'handle restituito.</span><span class="sxs-lookup"><span data-stu-id="c38a5-154">If the function succeeds, then the pointer that is returned remains valid until the client calls **UnmapViewOfFile** on the pointer and **CloseHandle** on the returned handle.</span></span>

 

## <a name="adding-roots-to-the-crawl-scope"></a><span data-ttu-id="c38a5-155">Aggiunta di radici all'ambito di ricerca per indicizzazione</span><span class="sxs-lookup"><span data-stu-id="c38a5-155">Adding Roots to the Crawl Scope</span></span>

<span data-ttu-id="c38a5-156">Il [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) indica al motore di ricerca i contenitori per la ricerca per indicizzazione e/o l'espressione di controllo e gli elementi in tali contenitori da includere o escludere.</span><span class="sxs-lookup"><span data-stu-id="c38a5-156">The [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) tells the search engine about containers to crawl and/or watch, and items under those containers to include or exclude.</span></span> <span data-ttu-id="c38a5-157">Per aggiungere una nuova radice di ricerca, creare un'istanza di un oggetto [**ISearchRoot**](/windows/desktop/api/Searchapi/nn-searchapi-isearchroot) , impostare gli attributi radice e quindi chiamare [**ISearchCrawlScopeManager:: AddRoot**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-addroot) e passargli un puntatore all'oggetto **ISearchRoot** .</span><span class="sxs-lookup"><span data-stu-id="c38a5-157">To add a new search root, instantiate an [**ISearchRoot**](/windows/desktop/api/Searchapi/nn-searchapi-isearchroot) object, set the root attributes, and then call [**ISearchCrawlScopeManager::AddRoot**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-addroot) and pass it a pointer to your **ISearchRoot** object.</span></span> <span data-ttu-id="c38a5-158">L'URL della radice di ricerca ha lo stesso formato della radice di ricerca descritta in precedenza.</span><span class="sxs-lookup"><span data-stu-id="c38a5-158">The search root URL takes the same form as the search root described earlier.</span></span>

<span data-ttu-id="c38a5-159">Nella tabella seguente vengono descritti i metodi put pertinenti per [**ISearchRoot**](/windows/desktop/api/Searchapi/nn-searchapi-isearchroot); gli altri metodi put dell'interfaccia non vengono attualmente usati da ricerca di Windows.</span><span class="sxs-lookup"><span data-stu-id="c38a5-159">The following table describes the relevant put methods for [**ISearchRoot**](/windows/desktop/api/Searchapi/nn-searchapi-isearchroot); the interface's other put methods are not used currently by Windows Search.</span></span> <span data-ttu-id="c38a5-160">Per una maggiore sicurezza, è consigliabile includere gli identificatori di sicurezza (SID) degli utenti in tutte le radici.</span><span class="sxs-lookup"><span data-stu-id="c38a5-160">We recommend including the users' security identifiers (SIDs) in all roots for better security.</span></span> <span data-ttu-id="c38a5-161">Le radici per utente sono più sicure quando le query vengono eseguite in un processo per utente, assicurando che un utente non possa visualizzare gli elementi indicizzati dalla posta in arrivo di un altro utente, ad esempio.</span><span class="sxs-lookup"><span data-stu-id="c38a5-161">Per-user roots are more secure as queries are run in a per-user process, ensuring that one user cannot see items indexed from another user's inbox, for example.</span></span>



| <span data-ttu-id="c38a5-162">Metodo</span><span class="sxs-lookup"><span data-stu-id="c38a5-162">Method</span></span>                     | <span data-ttu-id="c38a5-163">Descrizione</span><span class="sxs-lookup"><span data-stu-id="c38a5-163">Description</span></span>                                                                                                                                                                                         |
|----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="c38a5-164">Inserisci \_ ProvidesNotifications</span><span class="sxs-lookup"><span data-stu-id="c38a5-164">put\_ProvidesNotifications</span></span> | <span data-ttu-id="c38a5-165">Impostare su **true** se un gestore di protocollo o un'altra applicazione invierà una notifica al motore di ricerca delle modifiche apportate agli URL sotto la radice di ricerca.</span><span class="sxs-lookup"><span data-stu-id="c38a5-165">Set to **TRUE** if a protocol handler or other application will notify the search engine about changes to the URLs under the search root.</span></span> <span data-ttu-id="c38a5-166">La notifica indica che è necessario eseguire la reindicizzazione degli URL.</span><span class="sxs-lookup"><span data-stu-id="c38a5-166">The notification indicates that the URLs need reindexing.</span></span> |
| <span data-ttu-id="c38a5-167">Inserisci \_ RootURL</span><span class="sxs-lookup"><span data-stu-id="c38a5-167">put\_RootURL</span></span>               | <span data-ttu-id="c38a5-168">Imposta l'URL radice della ricerca corrente.</span><span class="sxs-lookup"><span data-stu-id="c38a5-168">Sets the root URL of the current search.</span></span> <span data-ttu-id="c38a5-169">L'URL accetta il form radice di ricerca descritto in precedenza.</span><span class="sxs-lookup"><span data-stu-id="c38a5-169">The URL takes the search root form described earlier.</span></span>                                                                                                      |



 

 

<span data-ttu-id="c38a5-170">Per impostazione predefinita, l'indicizzatore non esegue la ricerca per indicizzazione in un ambito quando si aggiunge una radice di ricerca.</span><span class="sxs-lookup"><span data-stu-id="c38a5-170">By default, the indexer does not crawl a scope when you add a search root.</span></span> <span data-ttu-id="c38a5-171">È inoltre necessario aggiungere una regola di inclusione per la radice.</span><span class="sxs-lookup"><span data-stu-id="c38a5-171">You must also add an include rule for the root.</span></span> <span data-ttu-id="c38a5-172">Se si desidera aggiungere una radice specifica dell'utente per un'applicazione, l'applicazione deve aggiungere le radici appropriate per i nuovi utenti all'avvio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c38a5-172">If you want to add a user-specific root for an application, that application should add the appropriate roots for new users when the application starts.</span></span>

<span data-ttu-id="c38a5-173">Per aggiungere le radici appropriate per i nuovi utenti:</span><span class="sxs-lookup"><span data-stu-id="c38a5-173">To add the appropriate roots for new users:</span></span>

1.  <span data-ttu-id="c38a5-174">Ottenere il SID dell'utente.</span><span class="sxs-lookup"><span data-stu-id="c38a5-174">Get the user's SID.</span></span>
2.  <span data-ttu-id="c38a5-175">Enumerare tutte le radici per verificare se ne esiste uno per questo SID.</span><span class="sxs-lookup"><span data-stu-id="c38a5-175">Enumerate all roots to check whether one exists for this SID.</span></span>
3.  <span data-ttu-id="c38a5-176">Aggiungere una nuova radice, usando il SID, se necessario.</span><span class="sxs-lookup"><span data-stu-id="c38a5-176">Add a new root, using the SID, if necessary.</span></span>

 

## <a name="removing-roots-from-the-crawl-scope"></a><span data-ttu-id="c38a5-177">Rimozione delle radici dall'ambito della ricerca per indicizzazione</span><span class="sxs-lookup"><span data-stu-id="c38a5-177">Removing Roots from the Crawl Scope</span></span>

<span data-ttu-id="c38a5-178">È possibile usare [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) per rimuovere una radice dall'ambito della ricerca per indicizzazione quando l'URL non è più necessario.</span><span class="sxs-lookup"><span data-stu-id="c38a5-178">You can use [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) to remove a root from the crawl scope when you no longer want that URL indexed.</span></span> <span data-ttu-id="c38a5-179">La rimozione di una radice comporta anche l'eliminazione di tutte le regole di ambito per tale URL.</span><span class="sxs-lookup"><span data-stu-id="c38a5-179">Removing a root also deletes all scope rules for that URL.</span></span> <span data-ttu-id="c38a5-180">Si supponga, ad esempio, di voler disinstallare un archivio del contenuto e/o il relativo gestore di protocollo da un sistema.</span><span class="sxs-lookup"><span data-stu-id="c38a5-180">For example, suppose you want to uninstall a content store and/or its protocol handler from a system.</span></span> <span data-ttu-id="c38a5-181">È possibile disinstallare l'applicazione, rimuovere tutti i dati, quindi rimuovere la radice di ricerca dall'ambito della ricerca per indicizzazione e il gestore dell'ambito di ricerca per indicizzazione rimuoverà la radice e tutte le regole di ambito associate alla radice.</span><span class="sxs-lookup"><span data-stu-id="c38a5-181">You can uninstall the application, remove all data, and then remove the search root from the crawl scope, and the Crawl Scope Manager will remove the root and all scope rules associated with the root.</span></span>

<span data-ttu-id="c38a5-182">Per rimuovere una radice di ricerca esistente, chiamare [**ISearchCrawlScopeManager:: RemoveRoot**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-removeroot) con la radice di ricerca che si vuole rimuovere.</span><span class="sxs-lookup"><span data-stu-id="c38a5-182">To remove an existing search root, call [**ISearchCrawlScopeManager::RemoveRoot**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-removeroot) with the search root you want to remove.</span></span> <span data-ttu-id="c38a5-183">L'URL della radice di ricerca ha lo stesso formato della radice di ricerca descritta in precedenza.</span><span class="sxs-lookup"><span data-stu-id="c38a5-183">The search root URL takes the same form as the search root described earlier.</span></span> <span data-ttu-id="c38a5-184">Questo metodo restituisce \_ false se la radice non viene trovata e un codice di errore se si è verificato un errore durante la rimozione di una radice trovata.</span><span class="sxs-lookup"><span data-stu-id="c38a5-184">This method returns S\_FALSE if the root is not found and an error code if there was an error removing a root that was found.</span></span>

<span data-ttu-id="c38a5-185">La rimozione di una radice di ricerca consente inoltre di rimuovere l'URL dall'interfaccia utente per le opzioni di ricerca di Windows, in modo che gli utenti potrebbero non essere in grado di aggiungere nuovamente tale contenitore o percorso utilizzando l'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="c38a5-185">Removing a search root also removes the URL from the user interface for Windows Search options, so users may not be able to re-add that container or location using the user interface.</span></span> <span data-ttu-id="c38a5-186">È anche possibile rimuovere tutte le sostituzioni impostate dall'utente di una radice di ricerca e ripristinare le regole di ambito e radice di ricerca originali.</span><span class="sxs-lookup"><span data-stu-id="c38a5-186">It is also possible to remove all user-set overrides of a search root and revert to the original search root and scope rules.</span></span> <span data-ttu-id="c38a5-187">Per ulteriori informazioni, vedere [gestione delle regole di ambito](-search-3x-wds-extidx-csm-scoperules.md).</span><span class="sxs-lookup"><span data-stu-id="c38a5-187">For more information, see [Managing Scope Rules](-search-3x-wds-extidx-csm-scoperules.md).</span></span>

> [!Note]  
> <span data-ttu-id="c38a5-188">In Windows Vista, se gli utenti vengono rimossi tramite profili utente nel pannello di controllo, CSM rimuove tutte le regole e le radici con il SID e rimuove gli elementi indicizzati dal catalogo.</span><span class="sxs-lookup"><span data-stu-id="c38a5-188">On Windows Vista, if users are removed through User Profiles in Control Panel, CSM removes all rules and roots with their SID and removes their indexed items from the catalog.</span></span> <span data-ttu-id="c38a5-189">In Windows XP è necessario rimuovere manualmente le radici e le regole degli utenti.</span><span class="sxs-lookup"><span data-stu-id="c38a5-189">On Windows XP, you need to remove the users' roots and rules manually.</span></span>

 

 

## <a name="enumerating-roots-in-the-crawl-scope"></a><span data-ttu-id="c38a5-190">Enumerazione delle radici nell'ambito della ricerca per indicizzazione</span><span class="sxs-lookup"><span data-stu-id="c38a5-190">Enumerating Roots in the Crawl Scope</span></span>

<span data-ttu-id="c38a5-191">CSM enumera le radici di ricerca usando un'interfaccia di enumeratore di tipo COM standard, [**IEnumSearchRoots**](/windows/desktop/api/Searchapi/nn-searchapi-ienumsearchroots).</span><span class="sxs-lookup"><span data-stu-id="c38a5-191">The CSM enumerates search roots using a standard COM-style enumerator interface, [**IEnumSearchRoots**](/windows/desktop/api/Searchapi/nn-searchapi-ienumsearchroots).</span></span> <span data-ttu-id="c38a5-192">È possibile usare questa interfaccia per enumerare le radici di ricerca per diversi scopi.</span><span class="sxs-lookup"><span data-stu-id="c38a5-192">You can use this interface to enumerate search roots for a number of purposes.</span></span> <span data-ttu-id="c38a5-193">Ad esempio, potrebbe essere necessario visualizzare l'intero ambito di ricerca per indicizzazione in un'interfaccia utente o scoprire se una particolare radice o l'elemento figlio di una radice è già presente nell'ambito della ricerca per indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="c38a5-193">For example, you might want to display the entire crawl scope in a user interface, or discover whether a particular root or the child of a root is already in the crawl scope.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="c38a5-194">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="c38a5-194">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="c38a5-195">**Riferimento**</span><span class="sxs-lookup"><span data-stu-id="c38a5-195">**Reference**</span></span>
</dt> <dt>

[<span data-ttu-id="c38a5-196">**ISearchCrawlScopeManager**</span><span class="sxs-lookup"><span data-stu-id="c38a5-196">**ISearchCrawlScopeManager**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager)
</dt> <dt>

[<span data-ttu-id="c38a5-197">**ISearchRoot**</span><span class="sxs-lookup"><span data-stu-id="c38a5-197">**ISearchRoot**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-isearchroot)
</dt> <dt>

[<span data-ttu-id="c38a5-198">**IEnumSearchRoots**</span><span class="sxs-lookup"><span data-stu-id="c38a5-198">**IEnumSearchRoots**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-ienumsearchroots)
</dt> <dt>

<span data-ttu-id="c38a5-199">**Informazioni concettuali**</span><span class="sxs-lookup"><span data-stu-id="c38a5-199">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="c38a5-200">Utilizzo di gestione ambito ricerca per indicizzazione</span><span class="sxs-lookup"><span data-stu-id="c38a5-200">Using the Crawl Scope Manager</span></span>](-search-3x-wds-extidx-csm.md)
</dt> <dt>

[<span data-ttu-id="c38a5-201">Gestione delle regole di ambito</span><span class="sxs-lookup"><span data-stu-id="c38a5-201">Managing Scope Rules</span></span>](-search-3x-wds-extidx-csm-scoperules.md)
</dt> </dl>

 

 



