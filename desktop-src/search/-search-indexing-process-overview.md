---
description: In questo argomento vengono descritte le tre fasi del processo di indicizzazione e i componenti primari interessati, viene illustrato il tempo di indicizzazione dell'attività e vengono fornite alcune note per gli sviluppatori di terze parti che desiderano indicizzare gli archivi dati o i formati di file.
ms.assetid: cfba12eb-4123-4b57-8311-d4fc8f9f514e
title: Processo di indicizzazione in Windows Search
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 87867d5925cd53b237092435bbc9d16428418b4f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103750402"
---
# <a name="indexing-process-in-windows-search"></a><span data-ttu-id="703c8-103">Processo di indicizzazione in Windows Search</span><span class="sxs-lookup"><span data-stu-id="703c8-103">Indexing Process in Windows Search</span></span>

<span data-ttu-id="703c8-104">In questo argomento vengono descritte le tre fasi del processo di indicizzazione e i componenti primari interessati, viene illustrato il tempo di indicizzazione dell'attività e vengono fornite alcune note per gli sviluppatori di terze parti che desiderano indicizzare gli archivi dati o i formati di file.</span><span class="sxs-lookup"><span data-stu-id="703c8-104">This topic describes the three stages of the indexing process and the primary components involved in each, explains the timing of indexing activity, and provides some notes for third-party developers who want their data stores or file formats indexed.</span></span>

<span data-ttu-id="703c8-105">Questo argomento è organizzato nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="703c8-105">This topic is organized as follows:</span></span>

- [<span data-ttu-id="703c8-106">Overview</span><span class="sxs-lookup"><span data-stu-id="703c8-106">Overview</span></span>](#overview)
- [<span data-ttu-id="703c8-107">Fase 1: accodamento degli URL per l'indicizzazione</span><span class="sxs-lookup"><span data-stu-id="703c8-107">Stage 1: Queuing URLs for Indexing</span></span>](#stage-1-queuing-urls-for-indexing)
- [<span data-ttu-id="703c8-108">Fase 2: ricerca per indicizzazione degli URL</span><span class="sxs-lookup"><span data-stu-id="703c8-108">Stage 2: Crawling URLs</span></span>](#stage-2-crawling-urls)
- [<span data-ttu-id="703c8-109">Fase 3: aggiornamento dell'indice</span><span class="sxs-lookup"><span data-stu-id="703c8-109">Stage 3: Updating the Index</span></span>](#stage-3-updating-the-index)
- [<span data-ttu-id="703c8-110">Modalità di pianificazione dell'indicizzazione</span><span class="sxs-lookup"><span data-stu-id="703c8-110">How Indexing is Scheduled</span></span>](#how-indexing-is-scheduled)
- [<span data-ttu-id="703c8-111">Note per gli implementatori</span><span class="sxs-lookup"><span data-stu-id="703c8-111">Notes to Implementers</span></span>](#notes-to-implementers)
- [<span data-ttu-id="703c8-112">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="703c8-112">Related topics</span></span>](#related-topics)

## <a name="overview"></a><span data-ttu-id="703c8-113">Panoramica</span><span class="sxs-lookup"><span data-stu-id="703c8-113">Overview</span></span>

<span data-ttu-id="703c8-114">Windows Search supporta l'indicizzazione di proprietà e contenuto da file di formati di file diversi, ad esempio formati doc o JPEG e archivi dati, ad esempio le cassette postali di file system o Windows Outlook.</span><span class="sxs-lookup"><span data-stu-id="703c8-114">Windows Search supports the indexing of properties and content from files of different file formats, such as .doc or .jpeg formats, and data stores, such as the file system or Windows Outlook mailboxes.</span></span> <span data-ttu-id="703c8-115">Esistono due tipi di indici: indici di valore che consentono di filtrare e ordinare in base all'intero valore di una proprietà e indici indici che indicizzano parole all'interno di contenuto o proprietà testuali.</span><span class="sxs-lookup"><span data-stu-id="703c8-115">There are two kinds of indices: value indices that allow filtering and sorting by the whole value of a property and inverted indices that index words within textual properties or content.</span></span> <span data-ttu-id="703c8-116">Se si dispone di un formato di file personalizzato o di un archivio dati, è necessario comprendere il modo in cui gli indici di ricerca di Windows vengono indicizzati correttamente.</span><span class="sxs-lookup"><span data-stu-id="703c8-116">If you have a custom file format or data store, you need to understand how Windows Search indexes in order to get your items indexed correctly.</span></span>

<span data-ttu-id="703c8-117">Il processo di indicizzazione si verifica in tre fasi controllate da un componente di ricerca di Windows denominato Gatherer.</span><span class="sxs-lookup"><span data-stu-id="703c8-117">The indexing process happens in three stages controlled by a Windows Search component called the gatherer.</span></span> <span data-ttu-id="703c8-118">Nella prima fase, il Gatherer aggiunge gli URL alle code.</span><span class="sxs-lookup"><span data-stu-id="703c8-118">In the first stage, the gatherer adds URLs to queues.</span></span> <span data-ttu-id="703c8-119">Gli URL identificano gli elementi da indicizzare e le code sono semplicemente elenchi di URL con priorità.</span><span class="sxs-lookup"><span data-stu-id="703c8-119">The URLs identify items to be indexed, and the queues are merely prioritized lists of URLs.</span></span> <span data-ttu-id="703c8-120">Nella seconda fase, il Gatherer coordina altri componenti di Windows Search e di terze parti per accedere agli elementi e raccoglierne i dati.</span><span class="sxs-lookup"><span data-stu-id="703c8-120">In the second stage, the gatherer coordinates other Windows Search and third-party components to access the items and collect data about them.</span></span> <span data-ttu-id="703c8-121">Infine, nella terza fase, i dati raccolti vengono aggiunti all'indice.</span><span class="sxs-lookup"><span data-stu-id="703c8-121">Finally, in the third stage, the data collected is added to the index.</span></span>

<span data-ttu-id="703c8-122">Il diagramma seguente illustra i componenti principali e il flusso di dati tramite il processo di indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="703c8-122">The following diagram shows the principal components and flow of data through the indexing process.</span></span> <span data-ttu-id="703c8-123">Per la raccolta dei dati per l'indice sono necessari diversi componenti.</span><span class="sxs-lookup"><span data-stu-id="703c8-123">A number of components are involved in collecting data for the index.</span></span> <span data-ttu-id="703c8-124">Alcune di queste sono parte della ricerca di Windows e alcune provengono da applicazioni di terze parti.</span><span class="sxs-lookup"><span data-stu-id="703c8-124">Some of these are a part of Windows Search, and some come from third-party applications.</span></span> <span data-ttu-id="703c8-125">Se si dispone di un archivio dati personalizzato o di un formato di file, la ricerca di Windows si basa sul gestore di protocollo e sul filtro per l'accesso agli URL e la creazione di proprietà per l'indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="703c8-125">If you have a custom data store or file format, Windows Search relies on your protocol handler and filter for accessing URLs and emitting properties for indexing.</span></span> <span data-ttu-id="703c8-126">I componenti di Windows Search sono visualizzati in blu e i componenti di terze parti sono visualizzati in verde.</span><span class="sxs-lookup"><span data-stu-id="703c8-126">Windows Search components are shown in blue, and third-party components are shown in green.</span></span>

![diagramma che mostra l'interazione tra i componenti durante il processo di indicizzazione](images/indexingcompoverview.jpg)

## <a name="stage-1-queuing-urls-for-indexing"></a><span data-ttu-id="703c8-128">Fase 1: accodamento degli URL per l'indicizzazione</span><span class="sxs-lookup"><span data-stu-id="703c8-128">Stage 1: Queuing URLs for Indexing</span></span>

<span data-ttu-id="703c8-129">Nella prima fase dell'indicizzazione, il Gatherer raccoglie informazioni sugli aggiornamenti agli archivi dati, confronta tali informazioni con l'ambito di ricerca per indicizzazione noto e quindi compila una coda di URL da attraversare per raccogliere i dati per l'indice.</span><span class="sxs-lookup"><span data-stu-id="703c8-129">In the first stage of indexing, the gatherer collects information about updates to data stores, compares that information to the known crawl scope, and then builds a queue of URLs to traverse to collect data for the index.</span></span> <span data-ttu-id="703c8-130">Per le origini non basate sulla notifica, ad esempio le unità FAT, il Gatherer avvia periodicamente un attraversamento completo dell'ambito della ricerca per indicizzazione, in modo che i dati nell'indice rimangano aggiornati.</span><span class="sxs-lookup"><span data-stu-id="703c8-130">For sources that are not based on notification, such as FAT drives, the gatherer periodically initiates a full traversal of the crawl scope so that the data in the index is kept fresh.</span></span> <span data-ttu-id="703c8-131">Per le origini, ad esempio NTFS, esiste una sola ricerca per indicizzazione e tutte le altre operazioni vengono gestite dalle notifiche del [Journal delle modifiche USN](/windows/desktop/FileIO/change-journals).</span><span class="sxs-lookup"><span data-stu-id="703c8-131">For sources such as NTFS, there is only a single crawl and everything else is handled by notifications from the [USN Change Journal](/windows/desktop/FileIO/change-journals).</span></span> <span data-ttu-id="703c8-132">Non esiste neanche una ricerca per indicizzazione di Microsoft Outlook.</span><span class="sxs-lookup"><span data-stu-id="703c8-132">There is also no crawl of Microsoft Outlook.</span></span> <span data-ttu-id="703c8-133">Nel diagramma seguente viene illustrata una visualizzazione di alto livello del processo di Accodamento per l'indicizzazione non di ricerca per indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="703c8-133">The following diagram shows a high-level view of the queuing process for non-crawl indexing.</span></span>

![diagramma che illustra il processo di query per l'indicizzazione non di ricerca per indicizzazione](images/queuingurls.jpg)

<span data-ttu-id="703c8-135">Nella parte restante di questa sezione viene illustrato come Windows Search determini quali URL eseguire la ricerca per indicizzazione e definisce alcuni termini importanti lungo il percorso.</span><span class="sxs-lookup"><span data-stu-id="703c8-135">The rest of this section explains how Windows Search determines what URLs to crawl, and defines some important terms along the way.</span></span>

<span data-ttu-id="703c8-136">**Ambito di ricerca per indicizzazione**  L'ambito di ricerca per indicizzazione è costituito da un set di URL che vengono attraversati dalla ricerca di Windows per raccogliere dati sugli elementi che l'utente desidera indicizzare per ricerche più veloci.</span><span class="sxs-lookup"><span data-stu-id="703c8-136">**Crawl Scope**  The crawl scope is a set of URLs that Windows Search traverses to collect data about items that the user wants indexed for faster searches.</span></span> <span data-ttu-id="703c8-137">Per impostazione predefinita, Windows Search aggiunge alcuni URL all'ambito di ricerca per indicizzazione, ad esempio i percorsi delle cartelle di **documenti** e **Immagini** degli utenti.</span><span class="sxs-lookup"><span data-stu-id="703c8-137">Windows Search adds some URLs to the crawl scope by default, like paths to users' **Documents** and **Pictures** folders.</span></span> <span data-ttu-id="703c8-138">È possibile aggiungere altri URL da applicazioni di terze parti, utenti e Criteri di gruppo.</span><span class="sxs-lookup"><span data-stu-id="703c8-138">Other URLs can be added by third-party applications, users, and Group Policy.</span></span> <span data-ttu-id="703c8-139">Infine, sia gli utenti che Criteri di gruppo possono escludere in modo esplicito gli URL.</span><span class="sxs-lookup"><span data-stu-id="703c8-139">Finally, both users and Group Policy can explicitly exclude URLs.</span></span> <span data-ttu-id="703c8-140">Windows Search accetta tutti gli URL aggiunti e rimuove gli URL esclusi per determinare l'ambito di ricerca per indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="703c8-140">Windows Search takes all the added URLs and removes the excluded URLs to determine the crawl scope.</span></span> <span data-ttu-id="703c8-141">Si tratta dell'working set degli URL da cui il Gatherer inizia il lavoro.</span><span class="sxs-lookup"><span data-stu-id="703c8-141">This is the working set of URLs from which the gatherer begins its work.</span></span>

<span data-ttu-id="703c8-142">**Raccolta**  Il Gatherer è un componente di ricerca di Windows che raccoglie informazioni sugli URL nell'ambito della ricerca per indicizzazione e crea una coda di URL per l'indicizzatore per la ricerca per indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="703c8-142">**Gatherer**  The gatherer is a Windows Search component that collects information about URLs within the crawl scope and creates a queue of URLs for the indexer to crawl.</span></span> <span data-ttu-id="703c8-143">Quando viene aggiunto, eliminato o aggiornato un elemento nell'ambito della ricerca per indicizzazione, il Gatherer riceve una notifica dal provider di notifiche dell'archivio dati.</span><span class="sxs-lookup"><span data-stu-id="703c8-143">When an item in the crawl scope is added, deleted, or updated, the gatherer is notified by the data store's notifications provider.</span></span> <span data-ttu-id="703c8-144">Viene avviata una ricerca per indicizzazione iniziale in corrispondenza della radice dell'ambito della ricerca.</span><span class="sxs-lookup"><span data-stu-id="703c8-144">There is an initial crawl where the gatherer starts at the crawl scope root.</span></span> <span data-ttu-id="703c8-145">L'URL viene passato al gestore di protocollo e quindi all' [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter)appropriato.</span><span class="sxs-lookup"><span data-stu-id="703c8-145">The URL is passed to the protocol handler and then to the appropriate [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter).</span></span> <span data-ttu-id="703c8-146">Il filtro è in genere un'enumerazione di directory che produce più URL.</span><span class="sxs-lookup"><span data-stu-id="703c8-146">The filter is usually a directory enumeration that produces more URLs.</span></span> <span data-ttu-id="703c8-147">Le notifiche sono lo stato stabile.</span><span class="sxs-lookup"><span data-stu-id="703c8-147">Notifications are the steady-state.</span></span> <span data-ttu-id="703c8-148">In genere, ogni archivio dati dispone di un proprio gestore di protocollo che fornisce queste notifiche.</span><span class="sxs-lookup"><span data-stu-id="703c8-148">Typically, each data store has its own protocol handler that provides these notifications.</span></span> <span data-ttu-id="703c8-149">Ad esempio, nel file system locale, il [Journal delle modifiche USN](/windows/desktop/FileIO/change-journals) funge da provider di notifiche per tutti gli URL nel protocollo file://.</span><span class="sxs-lookup"><span data-stu-id="703c8-149">For example, on the local file system, the [USN Change Journal](/windows/desktop/FileIO/change-journals) acts as a notifications provider for all URLs under the file:// protocol.</span></span> <span data-ttu-id="703c8-150">Analogamente, Microsoft Outlook funge da provider di notifiche per tutti gli URL nel protocollo mapi://.</span><span class="sxs-lookup"><span data-stu-id="703c8-150">Similarly, Microsoft Outlook acts as a notifications provider for all URLs under the mapi:// protocol.</span></span> <span data-ttu-id="703c8-151">Quando un utente riceve, sposta o Elimina la posta elettronica, Outlook notifica al Gatherer lo stato modificato del messaggio di posta elettronica.</span><span class="sxs-lookup"><span data-stu-id="703c8-151">When a user receives, moves, or deletes email, Outlook notifies the gatherer of the changed status of the email.</span></span> <span data-ttu-id="703c8-152">Da queste notifiche, il Gatherer crea le code di indicizzazione degli URL per eseguire la ricerca per indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="703c8-152">From these notifications, the gatherer creates indexing queues of URLs to crawl.</span></span>

<span data-ttu-id="703c8-153">**Indicizzazione di code**  Le code di indicizzazione sono elenchi di URL che identificano gli elementi che devono essere indicizzati o reindicizzati.</span><span class="sxs-lookup"><span data-stu-id="703c8-153">**Indexing Queues**  The indexing queues are lists of URLs that identify items that need to be indexed or re-indexed.</span></span> <span data-ttu-id="703c8-154">Il Gatherer confronta gli URL ricevuti dai provider di notifiche agli URL nell'ambito della ricerca per indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="703c8-154">The gatherer compares the URLs it receives from notifications providers to the URLs in the crawl scope.</span></span> <span data-ttu-id="703c8-155">Ogni URL dei provider di notifiche che rientra nell'ambito della ricerca per indicizzazione viene aggiunto a una coda utilizzata dal raccoglitore per definire le priorità degli URL da elaborare successivamente.</span><span class="sxs-lookup"><span data-stu-id="703c8-155">Every URL from notifications providers that falls within the crawl scope is added to a queue that the gatherer uses to prioritize which URLs to process next.</span></span>

<span data-ttu-id="703c8-156">Sono disponibili tre code: le notifiche con priorità alta, le notifiche normali e le ricerche periodiche.</span><span class="sxs-lookup"><span data-stu-id="703c8-156">There are three queues: high priority notifications, normal notifications, and periodic crawls.</span></span> <span data-ttu-id="703c8-157">La coda con priorità alta è destinata alle notifiche che devono essere elaborate immediatamente.</span><span class="sxs-lookup"><span data-stu-id="703c8-157">The high priority queue is for notifications that should be processed immediately.</span></span> <span data-ttu-id="703c8-158">Ad esempio, quando un utente modifica la proprietà title di un elemento in Esplora risorse, è necessario aggiornare la visualizzazione Esplora risorse immediatamente dopo la modifica.</span><span class="sxs-lookup"><span data-stu-id="703c8-158">For example, when a user changes an item's title property in Windows Explorer, the Windows Explorer view needs to be updated immediately after the change.</span></span> <span data-ttu-id="703c8-159">La normale coda di notifica è per tutte le notifiche di modifica rimanenti.</span><span class="sxs-lookup"><span data-stu-id="703c8-159">The normal notification queue is for all remaining change notifications.</span></span> <span data-ttu-id="703c8-160">Le code di notifica vengono elaborate prima della coda di ricerca per indicizzazione perché gli elementi modificati sono più probabili per un utente.</span><span class="sxs-lookup"><span data-stu-id="703c8-160">The notification queues are processed before the crawl queue because changed items are more likely to be of interest to a user.</span></span> <span data-ttu-id="703c8-161">Il Gatherer accede ai dati degli URL in ogni coda in ordine First in, First out (FIFO).</span><span class="sxs-lookup"><span data-stu-id="703c8-161">The gatherer accesses data for the URLs on each queue in first in, first out (FIFO) order.</span></span>

<span data-ttu-id="703c8-162">Per altre informazioni sulla definizione delle priorità e sulle API per gli eventi introdotte in Windows 7, vedere [indicizzazione delle priorità e eventi del set di righe in Windows 7](indexing-prioritization-and-rowset-events.md).</span><span class="sxs-lookup"><span data-stu-id="703c8-162">For more information on prioritization, and eventing APIs introduced in Windows 7, see [Indexing Prioritization and Rowset Events in Windows 7](indexing-prioritization-and-rowset-events.md).</span></span> <span data-ttu-id="703c8-163">Per ulteriori informazioni sulla gestione e sulle notifiche degli ambiti di ricerca, vedere la pagina relativa alla [fornitura di notifiche di modifica](-search-3x-wds-notifyingofchanges.md) e [all'utilizzo di gestione ambito ricerca](-search-3x-wds-extidx-csm.md)</span><span class="sxs-lookup"><span data-stu-id="703c8-163">For more information on crawl scope management and notifications, see [Providing Change Notifications](-search-3x-wds-notifyingofchanges.md) and [Using the Crawl Scope Manager](-search-3x-wds-extidx-csm.md).</span></span>

## <a name="stage-2-crawling-urls"></a><span data-ttu-id="703c8-164">Fase 2: ricerca per indicizzazione degli URL</span><span class="sxs-lookup"><span data-stu-id="703c8-164">Stage 2: Crawling URLs</span></span>

<span data-ttu-id="703c8-165">Nella seconda fase dell'indicizzazione, il Gatherer esegue la ricerca per indicizzazione nelle code, accedendo agli archivi dati e recuperando i flussi di elementi.</span><span class="sxs-lookup"><span data-stu-id="703c8-165">In the second stage of indexing, the gatherer crawls through the queues, accessing data stores and retrieving item streams.</span></span> <span data-ttu-id="703c8-166">In primo luogo, il Gatherer trova il gestore di protocollo appropriato per ogni URL.</span><span class="sxs-lookup"><span data-stu-id="703c8-166">First, the gatherer finds the appropriate protocol handler for each URL.</span></span> <span data-ttu-id="703c8-167">Quindi, il Gatherer passa l'URL al gestore del protocollo.</span><span class="sxs-lookup"><span data-stu-id="703c8-167">Then, the gatherer passes the URL to the protocol handler.</span></span> <span data-ttu-id="703c8-168">Il gestore di protocollo accede all'elemento e passa di nuovo i metadati dell'elemento al Gatherer.</span><span class="sxs-lookup"><span data-stu-id="703c8-168">The protocol handler accesses the item and passes item metadata back to the gatherer.</span></span> <span data-ttu-id="703c8-169">Il raccoglitore usa i metadati per identificare il filtro corretto.</span><span class="sxs-lookup"><span data-stu-id="703c8-169">The gatherer uses the metadata to identify the correct filter.</span></span>

<span data-ttu-id="703c8-170">Il diagramma seguente mostra una visualizzazione di alto livello del processo di ricerca di URL.</span><span class="sxs-lookup"><span data-stu-id="703c8-170">The following diagram shows a high-level view of the URL-crawling process.</span></span> <span data-ttu-id="703c8-171">Questa fase include un notevole coordinamento e comunicazione tra i componenti.</span><span class="sxs-lookup"><span data-stu-id="703c8-171">This stage includes considerable coordination and communication between components.</span></span>

![diagramma che illustra il processo di ricerca per indicizzazione degli URL e accesso agli elementi](images/crawlingqueues.jpg)

<span data-ttu-id="703c8-173">Nella parte restante di questa sezione viene descritto il modo in cui Windows Search accede agli elementi per l'indicizzazione e spiega i ruoli di ognuno dei componenti interessati.</span><span class="sxs-lookup"><span data-stu-id="703c8-173">The rest of this section describes how Windows Search accesses items for indexing and explains the roles of each of the components involved.</span></span>

<span data-ttu-id="703c8-174">**Raccolta**  Nella fase 2, la fase di ricerca per indicizzazione, il Gatherer elabora gli URL nelle code, a partire dalla coda con priorità alta.</span><span class="sxs-lookup"><span data-stu-id="703c8-174">**Gatherer**  In stage 2, the crawling stage, the gatherer processes the URLs in the queues, beginning with the high priority queue.</span></span> <span data-ttu-id="703c8-175">Ogni URL viene esaminato per identificare il protocollo.</span><span class="sxs-lookup"><span data-stu-id="703c8-175">Each URL is examined to identify its protocol.</span></span> <span data-ttu-id="703c8-176">Il raccoglitore cerca quindi il gestore di protocollo registrato per quel protocollo e ne crea un'istanza nel processo host del protocollo di ricerca.</span><span class="sxs-lookup"><span data-stu-id="703c8-176">The gatherer then looks up the protocol handler registered for that protocol and instantiates it in the search protocol host process.</span></span>

<span data-ttu-id="703c8-177">**Host del protocollo di ricerca**  L'host del protocollo di ricerca è semplicemente un processo host boxed per i gestori del protocollo.</span><span class="sxs-lookup"><span data-stu-id="703c8-177">**Search Protocol Host**  The search protocol host is merely a boxed, host process for protocol handlers.</span></span> <span data-ttu-id="703c8-178">In genere, la ricerca di Windows crea due processi host, uno che viene eseguito nel contesto di sicurezza del sistema e uno che viene eseguito nel contesto di sicurezza dell'utente.</span><span class="sxs-lookup"><span data-stu-id="703c8-178">Typically, Windows Search creates two such host processes, one that runs in the system security context and one that runs in the user security context.</span></span> <span data-ttu-id="703c8-179">Questa separazione garantisce che i dati specifici di un utente non vengano mai eseguiti nel contesto di sistema.</span><span class="sxs-lookup"><span data-stu-id="703c8-179">This separation ensures that data specific to a user is never run in the system context.</span></span>

<span data-ttu-id="703c8-180">Windows Search USA inoltre il processo host per isolare un'istanza di un gestore di protocollo da altri processi o applicazioni.</span><span class="sxs-lookup"><span data-stu-id="703c8-180">Windows Search also uses the host process to isolate an instance of a protocol handler from other processes or applications.</span></span> <span data-ttu-id="703c8-181">In questo modo, nessuna applicazione esterna può accedere a tale istanza specifica del gestore di protocollo e, se il gestore del protocollo non riesce in modo imprevisto, solo il processo di indicizzazione è interessato.</span><span class="sxs-lookup"><span data-stu-id="703c8-181">This way, no outside application can access that specific instance of the protocol handler, and if the protocol handler fails unexpectedly, only the indexing process is affected.</span></span> <span data-ttu-id="703c8-182">Poiché il processo host esegue codice di terze parti (gestori di protocollo), Windows Search ricicla periodicamente il processo per ridurre al minimo il tempo per cui un attacco riuscito deve sfruttare le informazioni nel processo.</span><span class="sxs-lookup"><span data-stu-id="703c8-182">Because the host process runs third party code (protocol handlers), Windows Search periodically recycles the process to minimize the time a successful attack has to exploit information in the process.</span></span> <span data-ttu-id="703c8-183">Oltre a questo, l'host del protocollo di ricerca non influisce sulla ricerca di URL o sull'indicizzazione di elementi.</span><span class="sxs-lookup"><span data-stu-id="703c8-183">Beyond this, the search protocol host does not affect the crawling of URLs or indexing of items.</span></span>

<span data-ttu-id="703c8-184">**Gestori di protocollo**  I gestori di protocollo forniscono l'accesso agli elementi in un archivio dati usando il protocollo dell'archivio dati.</span><span class="sxs-lookup"><span data-stu-id="703c8-184">**Protocol Handlers**  Protocol handlers provide access to items in a data store using the data store's protocol.</span></span> <span data-ttu-id="703c8-185">Il gestore di protocollo NTFS, ad esempio, consente di accedere ai file in un'unità locale usando il protocollo file://.</span><span class="sxs-lookup"><span data-stu-id="703c8-185">For example, the NTFS protocol handler provides access to files on a local drive using the file:// protocol.</span></span> <span data-ttu-id="703c8-186">Il gestore di protocollo sa come attraversare l'archivio dati, identificare gli elementi nuovi o aggiornati e inviare una notifica al Gatherer.</span><span class="sxs-lookup"><span data-stu-id="703c8-186">The protocol handler knows how to traverse the data store, identify new or updated items, and notify the gatherer.</span></span> <span data-ttu-id="703c8-187">Quindi, quando inizia la ricerca per indicizzazione, il gestore di protocollo fornisce un oggetto [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) al Gatherer per eseguire l'associazione al flusso sottostante dell'elemento e restituire i metadati dell'elemento, ad esempio le restrizioni di sicurezza e l'ora dell'Ultima modifica.</span><span class="sxs-lookup"><span data-stu-id="703c8-187">Then, when crawling begins, the protocol handler provides an [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object to the gatherer to bind to the item's underlying stream and return item metadata such as security restrictions and last modified time.</span></span>

> [!NOTE]  
> <span data-ttu-id="703c8-188">I gestori di protocollo non sono componenti di Windows Search; sono componenti del protocollo specifico e dell'archivio dati a cui sono progettati per l'accesso.</span><span class="sxs-lookup"><span data-stu-id="703c8-188">Protocol handlers are not Windows Search components; they are components of the specific protocol and data store they are designed to access.</span></span> <span data-ttu-id="703c8-189">Se si vuole indicizzare un archivio dati personalizzato, è necessario implementare un gestore di protocollo.</span><span class="sxs-lookup"><span data-stu-id="703c8-189">If you have a custom data store you want indexed, you need to implement a protocol handler.</span></span> <span data-ttu-id="703c8-190">Per altre informazioni sui gestori di protocollo e su come implementarne uno, vedere [sviluppo di gestori di protocollo](-search-3x-wds-phaddins.md).</span><span class="sxs-lookup"><span data-stu-id="703c8-190">For more information on protocol handlers and how to implement one, refer to [Developing Protocol Handlers](-search-3x-wds-phaddins.md).</span></span>

<span data-ttu-id="703c8-191">**Metadati e flusso**  Utilizzando i metadati restituiti dall'oggetto [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) del gestore di protocollo, il Gatherer identifica il filtro corretto per l'URL.</span><span class="sxs-lookup"><span data-stu-id="703c8-191">**Metadata and Stream**  Using metadata returned by the protocol handler's [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object, the gatherer identifies the correct filter for the URL.</span></span> <span data-ttu-id="703c8-192">Il raccoglitore analizza l'estensione del nome di file dell'elemento e cerca il filtro registrato per tale estensione.</span><span class="sxs-lookup"><span data-stu-id="703c8-192">The gatherer parses the item's file name extension and looks up the filter registered for that extension.</span></span> <span data-ttu-id="703c8-193">Se il gatherer non è in grado di trovare un filtro, Windows Search USA i metadati per derivare un set minimo di informazioni sulle proprietà di sistema, ad esempio System. ItemName, e aggiorna l'indice.</span><span class="sxs-lookup"><span data-stu-id="703c8-193">If the gatherer is unable to find a filter, Windows Search uses the metadata to derive a minimal set of system property information (like System.ItemName) and updates the index.</span></span> <span data-ttu-id="703c8-194">In caso contrario, se il raccoglitore trova il filtro, inizia la terza fase dell'indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="703c8-194">Otherwise, if the gatherer finds the filter, the third stage of indexing begins.</span></span>

## <a name="stage-3-updating-the-index"></a><span data-ttu-id="703c8-195">Fase 3: aggiornamento dell'indice</span><span class="sxs-lookup"><span data-stu-id="703c8-195">Stage 3: Updating the Index</span></span>

<span data-ttu-id="703c8-196">Nella terza fase dell'indicizzazione, il Gatherer crea un'istanza del filtro corretto per l'URL e inizializza il filtro con il flusso dall'oggetto [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) .</span><span class="sxs-lookup"><span data-stu-id="703c8-196">In the third stage of indexing, the gatherer instantiates the correct filter for the URL and initializes the filter with the stream from the [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object.</span></span> <span data-ttu-id="703c8-197">Il filtro accede quindi all'elemento e restituisce il contenuto per l'indice.</span><span class="sxs-lookup"><span data-stu-id="703c8-197">The filter then accesses the item and returns content for the index.</span></span> <span data-ttu-id="703c8-198">Se si dispone di un formato di file personalizzato, Windows Search si basa sul filtro per accedere agli URL ed emettere contenuto e proprietà per l'indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="703c8-198">If you have a custom file format, Windows Search relies on your filter to access URLs and emit content and properties for indexing.</span></span>

<span data-ttu-id="703c8-199">Nel diagramma seguente viene illustrata una visualizzazione di alto livello del processo di accesso ai dati.</span><span class="sxs-lookup"><span data-stu-id="703c8-199">The following diagram shows a high-level view of the data access process.</span></span> <span data-ttu-id="703c8-200">Questa fase include un notevole coordinamento e comunicazione tra i componenti.</span><span class="sxs-lookup"><span data-stu-id="703c8-200">This stage includes considerable coordination and communication between components.</span></span>

![diagramma che mostra i dati dell'elemento emessi per l'indice](images/filteringdata.jpg)

<span data-ttu-id="703c8-202">Nella parte restante di questa sezione viene descritto il modo in cui Windows Search accede ai dati degli elementi per l'indicizzazione e spiega i ruoli di ognuno dei componenti interessati.</span><span class="sxs-lookup"><span data-stu-id="703c8-202">The rest of this section describes how Windows Search accesses item data for indexing and explains the roles of each of the components involved.</span></span>

<span data-ttu-id="703c8-203">**Raccolta**  All'inizio di questa fase, il ruolo del Gatherer è creare un'istanza del filtro corretto per l'elemento e passargli il flusso dell'elemento.</span><span class="sxs-lookup"><span data-stu-id="703c8-203">**Gatherer**  At the beginning of this stage, the gatherer's role is to instantiate the correct filter for the item and pass it the item stream.</span></span> <span data-ttu-id="703c8-204">Alla fine di questa fase, il Gatherer acquisisce il contenuto e le proprietà generati dal gestore di filtro e proprietà e aggiorna l'indice.</span><span class="sxs-lookup"><span data-stu-id="703c8-204">At the end of this stage, the gatherer takes the content and properties emitted by the filter and property handler and updates the index.</span></span>

<span data-ttu-id="703c8-205">**Filtra host**  L'host del filtro è semplicemente un processo host per i filtri e i gestori di proprietà e offre uno scopo simile all'host del protocollo di ricerca.</span><span class="sxs-lookup"><span data-stu-id="703c8-205">**Filter Host**  The filter host is merely a host process for filters and property handlers and serves a purpose similar to the search protocol host.</span></span> <span data-ttu-id="703c8-206">Il processo host isola i filtri e i gestori delle proprietà dal resto del sistema per gli stessi motivi di sicurezza e stabilità che i processi host del protocollo di ricerca isolano i gestori del protocollo.</span><span class="sxs-lookup"><span data-stu-id="703c8-206">The host process isolates filters and property handlers from the rest of the system for the same security and stability reasons that search protocol host processes isolate protocol handlers.</span></span> <span data-ttu-id="703c8-207">Il processo host viene eseguito con diritti minimi (non può neanche accedere al file system) ed è occasionalmente riciclato per proteggersi da attacchi alla sicurezza.</span><span class="sxs-lookup"><span data-stu-id="703c8-207">The host process runs with minimal rights (it can't even access the file system) and is occasionally recycled to protect against security attacks.</span></span> <span data-ttu-id="703c8-208">Windows Search monitora inoltre l'utilizzo delle risorse in modo che, se un filtro utilizza troppe risorse, il processo host viene riciclato.</span><span class="sxs-lookup"><span data-stu-id="703c8-208">Windows Search also monitors resource use so that if a filter consumes too many resources, the host process is recycled.</span></span>

<span data-ttu-id="703c8-209">**Filtri**  I filtri sono componenti fondamentali del processo di indicizzazione che emettono informazioni sugli elementi per il Gatherer.</span><span class="sxs-lookup"><span data-stu-id="703c8-209">**Filters**  Filters are critical components in the indexing process that emit item information for the gatherer.</span></span> <span data-ttu-id="703c8-210">I filtri vengono denominati in base all'interfaccia principale utilizzata nella relativa implementazione, l'interfaccia [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) e, di conseguenza, vengono talvolta definiti IFilters.</span><span class="sxs-lookup"><span data-stu-id="703c8-210">Filters are named after the principal interface used in their implementation, the [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) interface, and consequently are sometimes referred to as IFilters.</span></span> <span data-ttu-id="703c8-211">Esistono due tipi di filtri: uno che interagisce con singoli elementi, ad esempio file, e uno che interagisce con contenitori come le cartelle.</span><span class="sxs-lookup"><span data-stu-id="703c8-211">There are two kinds of filters: one that interacts with individual items like files and one that interacts with containers like folders.</span></span> <span data-ttu-id="703c8-212">Entrambi forniscono i dati per l'indice.</span><span class="sxs-lookup"><span data-stu-id="703c8-212">Both provide data for the index.</span></span>

<span data-ttu-id="703c8-213">Utilizzando i metadati restituiti dall'oggetto [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) del gestore di protocollo, il Gatherer identifica il filtro corretto per un URL specifico e lo passa al flusso.</span><span class="sxs-lookup"><span data-stu-id="703c8-213">Using metadata returned by the protocol handler's [**IUrlAccessor**](/windows/desktop/api/Searchapi/nn-searchapi-iurlaccessor) object, the gatherer identifies the correct filter for a particular URL and passes it to the stream.</span></span> <span data-ttu-id="703c8-214">Il raccoglitore identifica il filtro corretto tramite un gestore di protocollo o mediante l'estensione del nome file, il tipo MIME o l'identificatore di classe (CLSID).</span><span class="sxs-lookup"><span data-stu-id="703c8-214">The gatherer identifies the correct filter either through a protocol handler or by the file name extension, MIME type, or class identifier (CLSID).</span></span> <span data-ttu-id="703c8-215">Se l'URL punta a un contenitore, il filtro emette le proprietà per il contenitore ed enumera gli elementi nel contenitore (URL figlio).</span><span class="sxs-lookup"><span data-stu-id="703c8-215">If the URL points to a container, the filter emits properties for the container and enumerates the items in the container (child URLs).</span></span> <span data-ttu-id="703c8-216">Se l'URL punta a un elemento, il filtro restituisce il contenuto testuale, se la lettura delle proprietà e sono più complesse rispetto ai gestori di proprietà.</span><span class="sxs-lookup"><span data-stu-id="703c8-216">If the URL points to an item, the filter returns the textual content, if any the reading of properties and are more complex than property handlers.</span></span> <span data-ttu-id="703c8-217">In genere, è consigliabile che i filtri creino il contenuto dell'elemento mentre i gestori delle proprietà emettono le proprietà degli elementi.</span><span class="sxs-lookup"><span data-stu-id="703c8-217">Generally, we recommend that filters emit item contents while property handlers emit item properties.</span></span> <span data-ttu-id="703c8-218">Tuttavia, se il filtro deve funzionare con le applicazioni meno recenti che non riconoscono i gestori delle proprietà, è possibile implementare il filtro per creare anche proprietà.</span><span class="sxs-lookup"><span data-stu-id="703c8-218">However, if your filter needs to work with older applications that do not recognize property handlers, you can implement the filter to emit properties as well.</span></span>

> [!NOTE]  
> <span data-ttu-id="703c8-219">I filtri non sono componenti di Windows Search; sono componenti correlati al formato di file specifico o al contenitore a cui sono progettati per l'accesso.</span><span class="sxs-lookup"><span data-stu-id="703c8-219">Filters are not Windows Search components; they are components related to the specific file format or container they are designed to access.</span></span> <span data-ttu-id="703c8-220">Per ulteriori informazioni sui filtri e su come implementarne uno per un contenitore o un formato di file personalizzato, vedere [procedure consigliate per la creazione di gestori di filtri in Windows Search](-search-3x-wds-extidx-filters.md).</span><span class="sxs-lookup"><span data-stu-id="703c8-220">For more information on filters and how to implement one for a custom file format or container, see [Best Practices for Creating Filter Handlers in Windows Search](-search-3x-wds-extidx-filters.md).</span></span>

<span data-ttu-id="703c8-221">Nella tabella seguente sono elencati i risultati che il Gatherer riceve da un filtro ([**IFilter**](/windows/win32/api/filter/nn-filter-ifilter)) e da un gestore di proprietà ([**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore)) durante il processo di indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="703c8-221">The following table lists the results that the gatherer receives from a filter ([**IFilter**](/windows/win32/api/filter/nn-filter-ifilter)) and property handler ([**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore)) during the indexing process.</span></span>

|                            | [<span data-ttu-id="703c8-222">**IFilter**</span><span class="sxs-lookup"><span data-stu-id="703c8-222">**IFilter**</span></span>](/windows/win32/api/filter/nn-filter-ifilter) | [<span data-ttu-id="703c8-223">**IPropertyStore**</span><span class="sxs-lookup"><span data-stu-id="703c8-223">**IPropertyStore**</span></span>](/windows/win32/api/propsys/nn-propsys-ipropertystore) |
|----------------------------|------------------------------------|-------------------------------------------------|
| <span data-ttu-id="703c8-224">Consenti scrittura</span><span class="sxs-lookup"><span data-stu-id="703c8-224">Allow write</span></span>                | <span data-ttu-id="703c8-225">No</span><span class="sxs-lookup"><span data-stu-id="703c8-225">No</span></span>                                 | <span data-ttu-id="703c8-226">Sì</span><span class="sxs-lookup"><span data-stu-id="703c8-226">Yes</span></span>                                             |
| <span data-ttu-id="703c8-227">Combinare contenuto e proprietà</span><span class="sxs-lookup"><span data-stu-id="703c8-227">Mix content and properties</span></span> | <span data-ttu-id="703c8-228">Sì</span><span class="sxs-lookup"><span data-stu-id="703c8-228">Yes</span></span>                                | <span data-ttu-id="703c8-229">No</span><span class="sxs-lookup"><span data-stu-id="703c8-229">No</span></span>                                              |
| <span data-ttu-id="703c8-230">Multilingue</span><span class="sxs-lookup"><span data-stu-id="703c8-230">Multilingual</span></span>               | <span data-ttu-id="703c8-231">Sì</span><span class="sxs-lookup"><span data-stu-id="703c8-231">Yes</span></span>                                | <span data-ttu-id="703c8-232">No</span><span class="sxs-lookup"><span data-stu-id="703c8-232">No</span></span>                                              |
| <span data-ttu-id="703c8-233">Creare collegamenti</span><span class="sxs-lookup"><span data-stu-id="703c8-233">Emit links</span></span>                 | <span data-ttu-id="703c8-234">Sì</span><span class="sxs-lookup"><span data-stu-id="703c8-234">Yes</span></span>                                | <span data-ttu-id="703c8-235">No</span><span class="sxs-lookup"><span data-stu-id="703c8-235">No</span></span>                                              |
| <span data-ttu-id="703c8-236">MIME</span><span class="sxs-lookup"><span data-stu-id="703c8-236">MIME</span></span>                       | <span data-ttu-id="703c8-237">Sì</span><span class="sxs-lookup"><span data-stu-id="703c8-237">Yes</span></span>                                | <span data-ttu-id="703c8-238">No</span><span class="sxs-lookup"><span data-stu-id="703c8-238">No</span></span>                                              |
| <span data-ttu-id="703c8-239">Limiti del testo</span><span class="sxs-lookup"><span data-stu-id="703c8-239">Text boundaries</span></span>            | <span data-ttu-id="703c8-240">Frase, paragrafo, capitolo</span><span class="sxs-lookup"><span data-stu-id="703c8-240">Sentence, paragraph, chapter</span></span>       | <span data-ttu-id="703c8-241">nessuno</span><span class="sxs-lookup"><span data-stu-id="703c8-241">None</span></span>                                            |
| <span data-ttu-id="703c8-242">Client/server</span><span class="sxs-lookup"><span data-stu-id="703c8-242">Client / server</span></span>            | <span data-ttu-id="703c8-243">Entrambi</span><span class="sxs-lookup"><span data-stu-id="703c8-243">Both</span></span>                               | <span data-ttu-id="703c8-244">Client</span><span class="sxs-lookup"><span data-stu-id="703c8-244">Client</span></span>                                          |
| <span data-ttu-id="703c8-245">Implementazione</span><span class="sxs-lookup"><span data-stu-id="703c8-245">Implementation</span></span>             | <span data-ttu-id="703c8-246">Complex</span><span class="sxs-lookup"><span data-stu-id="703c8-246">Complex</span></span>                            | <span data-ttu-id="703c8-247">Semplice</span><span class="sxs-lookup"><span data-stu-id="703c8-247">Simple</span></span>                                          |

<span data-ttu-id="703c8-248">**Gestori di proprietà**  I gestori di proprietà sono componenti che leggono e scrivono le proprietà per un formato di file specifico.</span><span class="sxs-lookup"><span data-stu-id="703c8-248">**Property Handlers**  Property handlers are components that read and write properties for a particular file format.</span></span> <span data-ttu-id="703c8-249">Accedono agli elementi ed emettono proprietà per il Gatherer nello stesso modo in cui i filtri eseguono il contenuto.</span><span class="sxs-lookup"><span data-stu-id="703c8-249">They access items and emit properties for the gatherer in the same way that filters do for content.</span></span> <span data-ttu-id="703c8-250">I gestori di proprietà sono più facili da implementare rispetto ai filtri.</span><span class="sxs-lookup"><span data-stu-id="703c8-250">Property handlers are easier to implement than filters.</span></span> <span data-ttu-id="703c8-251">Se un formato di file basato su testo è molto semplice o si prevede che i file siano di dimensioni molto ridotte, il gestore delle proprietà può emettere sia proprietà che contenuto.</span><span class="sxs-lookup"><span data-stu-id="703c8-251">If a text-based file format is very simple or the files are expected to be very small, the property handler can emit both properties and content.</span></span>

> [!NOTE]  
> <span data-ttu-id="703c8-252">I gestori di proprietà non sono componenti di Windows Search; sono componenti correlati al formato di file specifico per cui sono progettati per l'accesso.</span><span class="sxs-lookup"><span data-stu-id="703c8-252">Property handlers are not Windows Search components; they are components related to the specific file format they are designed to access.</span></span> <span data-ttu-id="703c8-253">Per altre informazioni sui gestori di proprietà e su come implementarne uno per un formato di file personalizzato, vedere [sviluppo di gestori di proprietà per la ricerca di Windows](-search-3x-wds-extidx-propertyhandlers.md).</span><span class="sxs-lookup"><span data-stu-id="703c8-253">For more information on property handlers and how to implement one for a custom file format, see [Developing Property Handlers for Windows Search](-search-3x-wds-extidx-propertyhandlers.md).</span></span>

<span data-ttu-id="703c8-254">**Proprietà** di Windows Search fornisce un [sistema di proprietà](https://msdn.microsoft.com/library/bb763010(VS.85).aspx) che include una raccolta di proprietà di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="703c8-254">**Properties** Windows Search provides a [property system](https://msdn.microsoft.com/library/bb763010(VS.85).aspx) that includes a large library of properties.</span></span> <span data-ttu-id="703c8-255">Qualsiasi proprietà può essere visualizzata in qualsiasi elemento come definito dal gestore di filtri o proprietà.</span><span class="sxs-lookup"><span data-stu-id="703c8-255">Any property can appear on any item as defined by the filter or property handler.</span></span> <span data-ttu-id="703c8-256">Se si dispone di un formato di file personalizzato, è possibile eseguire il mapping delle proprietà del formato di file a queste proprietà di sistema ed è possibile creare nuove proprietà personalizzate.</span><span class="sxs-lookup"><span data-stu-id="703c8-256">If you have a custom file format, you can map your file format's properties to these system properties, and you can create new custom properties.</span></span> <span data-ttu-id="703c8-257">Quando il gestore di filtro o proprietà emette queste proprietà, il Gatherer aggiorna l'indice in modo che gli utenti possano eseguire ricerche usando le proprietà.</span><span class="sxs-lookup"><span data-stu-id="703c8-257">When your filter or property handler emits these properties, the gatherer updates the index so users can search using your properties.</span></span> <span data-ttu-id="703c8-258">Per altre informazioni sulla creazione e la registrazione di proprietà personalizzate per un formato di file, vedere [sistema di proprietà](../properties/building-property-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="703c8-258">For more information on creating and registering custom properties for a file format, see [Property System](../properties/building-property-handlers.md).</span></span>

<span data-ttu-id="703c8-259">**SystemIndex**  L'indice, denominato SystemIndex, archivia i dati indicizzati ed è costituito da un archivio delle proprietà e dagli indici delle proprietà e del contenuto per le proprietà degli elementi e da un indice invertito per le proprietà e il contenuto testuale.</span><span class="sxs-lookup"><span data-stu-id="703c8-259">**SystemIndex**  The index, called SystemIndex, stores indexed data and is composed of a property store and indices over the properties and content for item properties, and an inverted index for textual content and properties.</span></span> <span data-ttu-id="703c8-260">Quando il Gatherer aggiorna l'indice, l'indice può essere sottoposto a query da Windows Search e da altre applicazioni.</span><span class="sxs-lookup"><span data-stu-id="703c8-260">After the gatherer updates the index, the index can be queried by Windows Search and other applications.</span></span> <span data-ttu-id="703c8-261">Per ulteriori informazioni su come eseguire query sull'indice, vedere [esecuzione di query sull'indice a livello di codice](-search-3x-wds-qryidx-overview.md).</span><span class="sxs-lookup"><span data-stu-id="703c8-261">For more information on ways to query the index, see [Querying the Index Programmatically](-search-3x-wds-qryidx-overview.md).</span></span>

> [!NOTE]  
> <span data-ttu-id="703c8-262">Tenere presente che quando si registra di nuovo uno schema, le modifiche apportate agli attributi delle proprietà definite in precedenza potrebbero non essere rispettate dall'indicizzatore.</span><span class="sxs-lookup"><span data-stu-id="703c8-262">Remember that when you re-register a schema, changes made to attributes of previously defined properties may not be respected by the indexer.</span></span> <span data-ttu-id="703c8-263">La soluzione consiste nel ricompilare l'indice o introdurre nuove proprietà che riflettono le modifiche anziché aggiornare quelle meno recenti (scelta non consigliata).</span><span class="sxs-lookup"><span data-stu-id="703c8-263">The solution is either to rebuild the index, or introduce new properties that reflect the changes instead of updating old ones (not recommended).</span></span> <span data-ttu-id="703c8-264">Per ulteriori informazioni, vedere la [Nota relativa agli implementatori](#notes-to-implementers) nella [Panoramica del sistema Properties](../properties/property-system-overview.md).</span><span class="sxs-lookup"><span data-stu-id="703c8-264">For more information, see [Note to Implementers](#notes-to-implementers) in [Properties System Overview](../properties/property-system-overview.md).</span></span>

## <a name="how-indexing-is-scheduled"></a><span data-ttu-id="703c8-265">Modalità di pianificazione dell'indicizzazione</span><span class="sxs-lookup"><span data-stu-id="703c8-265">How Indexing is Scheduled</span></span>

<span data-ttu-id="703c8-266">Quando Windows Search viene installato per la prima volta, viene eseguita un'indicizzazione completa dell'ambito di ricerca per indicizzazione, che viene sospesa durante i periodi di elevata attività di I/O e dell'utente.</span><span class="sxs-lookup"><span data-stu-id="703c8-266">When Windows Search is first installed, it performs a full indexing of the crawl scope, pausing during periods of high I/O and user activity.</span></span> <span data-ttu-id="703c8-267">L'ambito di ricerca per indicizzazione predefinito è costituito da percorsi di libreria predefiniti, ad esempio **documenti**, **musica**, **Immagini** e **video**.</span><span class="sxs-lookup"><span data-stu-id="703c8-267">The default crawl scope consists of the default library locations, such as **Documents**, **Music**, **Pictures**, and **Videos**.</span></span> <span data-ttu-id="703c8-268">Le notifiche vengono elaborate anche prima del completamento della ricerca per indicizzazione iniziale.</span><span class="sxs-lookup"><span data-stu-id="703c8-268">Notifications are processed even before the initial crawl is finished.</span></span> <span data-ttu-id="703c8-269">Occasionalmente, il Gatherer esegue la ricerca per indicizzazione degli URL dall'ambito completo.</span><span class="sxs-lookup"><span data-stu-id="703c8-269">Occasionally, the gatherer crawls the URLs from the full crawl scope.</span></span> <span data-ttu-id="703c8-270">Queste ricerche per indicizzazione complete assicurano che i dati nell'indice siano aggiornati.</span><span class="sxs-lookup"><span data-stu-id="703c8-270">These full crawls ensure that the data in the index is fresh.</span></span> <span data-ttu-id="703c8-271">Se, ad esempio, un provider di notifiche non riesce a inviare notifiche o se il servizio Windows Search viene terminato in modo imprevisto, il gatherer non avrà alcuna conoscenza degli elementi nuovi o modificati e non eseguirà l'indicizzazione di questi elementi.</span><span class="sxs-lookup"><span data-stu-id="703c8-271">For example, if a notification provider fails to send notifications or if the Windows Search service is terminated unexpectedly, the gatherer would have no knowledge of new or changed items and would not index these items.</span></span> <span data-ttu-id="703c8-272">Esistono due tipi di origini: solo notifica e notifica abilitata.</span><span class="sxs-lookup"><span data-stu-id="703c8-272">There are two kinds of sources: notification only and notification enabled.</span></span> <span data-ttu-id="703c8-273">In entrambe le origini, il Gatherer esegue inizialmente la ricerca per indicizzazione nell'indice.</span><span class="sxs-lookup"><span data-stu-id="703c8-273">In both sources, the gatherer initially crawls the index.</span></span> <span data-ttu-id="703c8-274">Dopo la ricerca per indicizzazione iniziale, le origini di sola notifica non eseguono mai una ricerca per indicizzazione completa, a meno che non si verifichi un errore, ad esempio il rollforward del [Journal delle modifiche USN](/windows/desktop/FileIO/change-journals) .</span><span class="sxs-lookup"><span data-stu-id="703c8-274">After the initial crawl, the notification-only sources will never do a full crawl again unless there is a failure, such as the [USN Change Journal](/windows/desktop/FileIO/change-journals) rolling over.</span></span> <span data-ttu-id="703c8-275">Le origini abilitate per le notifiche eseguono una ricerca per indicizzazione incrementale quando l'indicizzatore viene avviato, ma in ascolto delle notifiche durante l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="703c8-275">Notification-enabled sources do an incremental crawl when the indexer is started, but then listen to notifications while running.</span></span> <span data-ttu-id="703c8-276">NTFS e Microsoft Outlook sono solo notifiche.</span><span class="sxs-lookup"><span data-stu-id="703c8-276">NTFS and Microsoft Outlook are notification only.</span></span> <span data-ttu-id="703c8-277">Internet Explorer e FAT sono abilitati per le notifiche.</span><span class="sxs-lookup"><span data-stu-id="703c8-277">Internet Explorer and FAT are notification enabled.</span></span>

## <a name="notes-to-implementers"></a><span data-ttu-id="703c8-278">Note per gli implementatori</span><span class="sxs-lookup"><span data-stu-id="703c8-278">Notes to Implementers</span></span>

<span data-ttu-id="703c8-279">La qualità dei dati nell'indice e l'efficienza del processo di indicizzazione dipendono in gran parte dall'implementazione del gestore delle proprietà e del filtro.</span><span class="sxs-lookup"><span data-stu-id="703c8-279">The quality of the data in the index and the efficiency of the indexing process depend largely on your filter and property handler implementation.</span></span> <span data-ttu-id="703c8-280">Poiché il filtro viene chiamato ogni volta che un URL identifica il formato di file, il processo di indicizzazione può rallentare notevolmente se il filtro non è efficiente.</span><span class="sxs-lookup"><span data-stu-id="703c8-280">Because the filter is called every time a URL identifies your file format, the indexing process can slow down dramatically if your filter is inefficient.</span></span> <span data-ttu-id="703c8-281">Se il gestore delle proprietà non esegue correttamente il mapping di tutte le proprietà del file alle proprietà di sistema o non emette correttamente queste proprietà, i dati nell'indice non saranno corretti e le ricerche successive verranno restituiti risultati non corretti.</span><span class="sxs-lookup"><span data-stu-id="703c8-281">If your property handler doesn't correctly map all file properties to system properties or doesn't correctly emit these properties, the data in the index will be incorrect and later searches for those properties will return incorrect results.</span></span> <span data-ttu-id="703c8-282">Se il gestore di filtro o di proprietà ha esito negativo, l'indicizzatore non sarà in grado di indicizzare i dati.</span><span class="sxs-lookup"><span data-stu-id="703c8-282">If your filter or property handler fails, the indexer won't be able to index data.</span></span>

<span data-ttu-id="703c8-283">Le applicazioni e i processi diversi dalla ricerca di Windows si basano sui gestori di protocollo, i filtri e i gestori di proprietà.</span><span class="sxs-lookup"><span data-stu-id="703c8-283">Applications and processes other than Windows Search rely on protocol handlers, filters, and property handlers.</span></span> <span data-ttu-id="703c8-284">Le implementazioni possono influire su tali applicazioni in modi che potrebbero non essere previsti.</span><span class="sxs-lookup"><span data-stu-id="703c8-284">Your implementations can affect those applications in ways you may not expect.</span></span> <span data-ttu-id="703c8-285">La [Guida allo sviluppo di Windows Search](-search-developers-guide-entry-page.md) fornisce consigli sulle scelte di progettazione e sul test di ognuno di questi componenti.</span><span class="sxs-lookup"><span data-stu-id="703c8-285">The [Windows Search Development Guide](-search-developers-guide-entry-page.md) provides advice on design choices and on testing each of these components.</span></span>

## <a name="related-topics"></a><span data-ttu-id="703c8-286">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="703c8-286">Related topics</span></span>

[<span data-ttu-id="703c8-287">Indicizzazione, query e notifiche in Windows Search</span><span class="sxs-lookup"><span data-stu-id="703c8-287">Indexing, Querying and Notifications in Windows Search</span></span>](-search-3x-wds-included-in-index.md)

[<span data-ttu-id="703c8-288">Contenuto dell'indice</span><span class="sxs-lookup"><span data-stu-id="703c8-288">What is Included in the Index</span></span>](-search-indexing-process-overview.md)

[<span data-ttu-id="703c8-289">Esecuzione di query sul processo in Windows Search</span><span class="sxs-lookup"><span data-stu-id="703c8-289">Querying Process in Windows Search</span></span>](querying-process--windows-search-.md)

[<span data-ttu-id="703c8-290">Processo di notifica in Windows Search</span><span class="sxs-lookup"><span data-stu-id="703c8-290">Notifications Process in Windows Search</span></span>](-search-3x-wds-support.md)

[<span data-ttu-id="703c8-291">Requisiti per la formattazione degli URL</span><span class="sxs-lookup"><span data-stu-id="703c8-291">URL Formatting Requirements</span></span>](url-formatting-requirements.md)
