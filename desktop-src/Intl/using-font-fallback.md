---
description: Uso del fallback dei tipi di carattere
ms.assetid: 952f33b6-ca52-40a2-b914-52c1c62ae0e0
title: Uso del fallback dei tipi di carattere
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9afb073a01cc1c5b90d4a4861a973846d3ae9ae1
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103760484"
---
# <a name="using-font-fallback"></a><span data-ttu-id="418bb-103">Uso del fallback dei tipi di carattere</span><span class="sxs-lookup"><span data-stu-id="418bb-103">Using Font Fallback</span></span>

> [!Note]  
> <span data-ttu-id="418bb-104">In questo argomento tutti i commenti relativi a [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) si applicano ugualmente a [**ScriptShapeOpenType**](/windows/desktop/api/Usp10/nf-usp10-scriptshapeopentype).</span><span class="sxs-lookup"><span data-stu-id="418bb-104">In this topic, all remarks about [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) apply equally to [**ScriptShapeOpenType**](/windows/desktop/api/Usp10/nf-usp10-scriptshapeopentype).</span></span>

 

<span data-ttu-id="418bb-105">L'applicazione deve usare il fallback del tipo di carattere durante la visualizzazione del testo se alcuni caratteri in una stringa non sono supportati nel tipo di carattere o se l'applicazione usa uno [script complesso](uniscribe-glossary.md) non supportato dal tipo di carattere.</span><span class="sxs-lookup"><span data-stu-id="418bb-105">Your application must use font fallback during text display if some characters in a string are not supported in the font, or if the application uses a [complex script](uniscribe-glossary.md) not supported by the font.</span></span> <span data-ttu-id="418bb-106">Il requisito per il fallback del tipo di carattere viene rilevato durante il processo di layout per il testo, quando l'applicazione chiama la funzione [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) .</span><span class="sxs-lookup"><span data-stu-id="418bb-106">The requirement for font fallback is detected during the layout process for text, when the application calls the [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) function.</span></span> <span data-ttu-id="418bb-107">Per informazioni sulla visualizzazione del testo, vedere [visualizzazione di testo con Uniscribe](displaying-text-with-uniscribe.md).</span><span class="sxs-lookup"><span data-stu-id="418bb-107">For information about text display, see [Displaying Text with Uniscribe](displaying-text-with-uniscribe.md).</span></span>

## <a name="determine-the-need-for-font-fallback-for-unsupported-characters"></a><span data-ttu-id="418bb-108">Determinare la necessità del fallback dei tipi di carattere per i caratteri non supportati</span><span class="sxs-lookup"><span data-stu-id="418bb-108">Determine the Need for Font Fallback for Unsupported Characters</span></span>

<span data-ttu-id="418bb-109">Se alcuni dei caratteri di una stringa non sono supportati in un tipo di carattere richiesto, una chiamata dell'applicazione a [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) ha esito positivo.</span><span class="sxs-lookup"><span data-stu-id="418bb-109">If some of the characters in a string are not supported in a requested font, an application call to [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) succeeds.</span></span> <span data-ttu-id="418bb-110">Tuttavia, l'applicazione deve analizzare il buffer di output del glifo per la presenza di glifi mancanti.</span><span class="sxs-lookup"><span data-stu-id="418bb-110">However, the application must scan the glyph output buffer for the presence of missing glyphs.</span></span> <span data-ttu-id="418bb-111">L'indice del glifo del glifo mancante può essere determinato per un tipo di carattere specifico chiamando [**ScriptGetFontProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetfontproperties).</span><span class="sxs-lookup"><span data-stu-id="418bb-111">The glyph index of the missing glyph can be determined for a specific font by calling [**ScriptGetFontProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetfontproperties).</span></span> <span data-ttu-id="418bb-112">Se un glifo particolare non è disponibile, l'applicazione deve eseguire il fallback a un tipo di carattere diverso per un glifo o eseguire il rendering di un simbolo grafico che indica che non è disponibile alcun glifo.</span><span class="sxs-lookup"><span data-stu-id="418bb-112">If a particular glyph is unavailable, the application must either fall back to a different font for a glyph or render a graphic symbol that indicates that no glyph is available.</span></span>

## <a name="determine-the-need-for-font-fallback-for-unsupported-complex-scripts"></a><span data-ttu-id="418bb-113">Determinare la necessità del fallback dei tipi di carattere per gli script complessi non supportati</span><span class="sxs-lookup"><span data-stu-id="418bb-113">Determine the Need for Font Fallback for Unsupported Complex Scripts</span></span>

<span data-ttu-id="418bb-114">Il tipo di carattere preferenziale per la visualizzazione di un'applicazione potrebbe non supportare uno script complesso richiesto dal testo.</span><span class="sxs-lookup"><span data-stu-id="418bb-114">The font that an application prefers for display might not support a complex script that is required by the text.</span></span> <span data-ttu-id="418bb-115">In questo caso, la chiamata dell'applicazione a [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) ha esito negativo con il codice di errore E lo \_ script \_ non \_ nel \_ tipo di carattere.</span><span class="sxs-lookup"><span data-stu-id="418bb-115">In this case, the application call to [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) fails with the error code E\_SCRIPT\_NOT\_IN\_FONT.</span></span>

## <a name="assign-a-fallback-font"></a><span data-ttu-id="418bb-116">Assegnare un tipo di carattere di fallback</span><span class="sxs-lookup"><span data-stu-id="418bb-116">Assign a Fallback Font</span></span>

<span data-ttu-id="418bb-117">Una volta stabilito che è necessario il fallback del tipo di carattere, l'applicazione deve assegnare un tipo di carattere di fallback.</span><span class="sxs-lookup"><span data-stu-id="418bb-117">Once it has determined that font fallback is required, the application must assign a fallback font.</span></span> <span data-ttu-id="418bb-118">L'applicazione può provare le tecniche seguenti:</span><span class="sxs-lookup"><span data-stu-id="418bb-118">The application can try the following techniques:</span></span>

-   <span data-ttu-id="418bb-119">Chiamare [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) per ogni tipo di carattere in un elenco di tipi di carattere finché una chiamata non ha un risultato accettabile.</span><span class="sxs-lookup"><span data-stu-id="418bb-119">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) for each font in a font list until one call has an acceptable return.</span></span>
-   <span data-ttu-id="418bb-120">Chiamare [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) con ogni tipo di carattere in un elenco fino a quando non è possibile determinare se il tipo di carattere avrà esito positivo.</span><span class="sxs-lookup"><span data-stu-id="418bb-120">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) with each font in a list until it can be determined that no font will succeed.</span></span> <span data-ttu-id="418bb-121">Se il codice di errore è sempre E \_ lo script \_ non \_ \_ è in un tipo di carattere, uno script complesso non è supportato dai tipi di carattere.</span><span class="sxs-lookup"><span data-stu-id="418bb-121">If the error code is always E\_SCRIPT\_NOT\_IN\_FONT, a complex script is not supported by the fonts.</span></span> <span data-ttu-id="418bb-122">Eseguire il rendering di un simbolo grafico che indica che non è disponibile alcun glifo oppure specificare di nuovo lo script come non definito (nessuna elaborazione di script) e riavviarlo.</span><span class="sxs-lookup"><span data-stu-id="418bb-122">Either render a graphic symbol that indicates that no glyph is available, or re-specify the script as undefined (no script processing) and start again.</span></span> <span data-ttu-id="418bb-123">Per impostare lo script come non definito, impostare il membro **escript** della struttura di [**\_ analisi dello script**](/windows/win32/api/usp10/ns-usp10-script_analysis) in modo che lo script non sia \_ definito.</span><span class="sxs-lookup"><span data-stu-id="418bb-123">To set the script as undefined, set the **eScript** member of the [**SCRIPT\_ANALYSIS**](/windows/win32/api/usp10/ns-usp10-script_analysis) structure to SCRIPT\_UNDEFINED.</span></span>
-   <span data-ttu-id="418bb-124">Chiamare [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) con ogni tipo di carattere in un elenco fino a quando non è possibile determinare se il tipo di carattere avrà esito positivo.</span><span class="sxs-lookup"><span data-stu-id="418bb-124">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) with each font in a list until it can be determined that no font will succeed.</span></span> <span data-ttu-id="418bb-125">Se il codice di errore indica che per alcuni caratteri viene utilizzato il mapping a glifi mancanti, suddividere la stringa in intervalli più piccoli.</span><span class="sxs-lookup"><span data-stu-id="418bb-125">If the error code indicates that some of the characters are mapping to missing glyphs, break up the string into smaller ranges.</span></span> <span data-ttu-id="418bb-126">I tipi di carattere diversi possono essere assegnati a intervalli secondari, in modo che sia possibile eseguire il rendering di più caratteri.</span><span class="sxs-lookup"><span data-stu-id="418bb-126">Different fonts can be assigned to subranges so that more of the characters can be rendered.</span></span>

## <a name="generate-glyph-information"></a><span data-ttu-id="418bb-127">Genera informazioni sul glifo</span><span class="sxs-lookup"><span data-stu-id="418bb-127">Generate Glyph Information</span></span>

<span data-ttu-id="418bb-128">Una volta che l'applicazione ha assegnato un tipo di carattere che ha avuto esito positivo nelle chiamate a [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape), può effettuare chiamate a [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) per generare la larghezza di avanzamento del glifo e le informazioni sull'offset bidimensionale dall'output di **ScriptShape**.</span><span class="sxs-lookup"><span data-stu-id="418bb-128">Once the application has assigned a font that succeeds in calls to [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape), it can make calls to [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) to generate glyph advance width and two-dimensional offset information from the output of **ScriptShape**.</span></span> <span data-ttu-id="418bb-129">Il tipo di carattere deve avere esito positivo nelle chiamate.</span><span class="sxs-lookup"><span data-stu-id="418bb-129">The font should succeed in these calls.</span></span> <span data-ttu-id="418bb-130">Un errore del tipo di carattere in una chiamata a **ScriptPlace** dopo l'esito positivo in una chiamata **ScriptShape** indica un tipo di carattere rotto.</span><span class="sxs-lookup"><span data-stu-id="418bb-130">A font failure in a call to **ScriptPlace** after success in a **ScriptShape** call indicates a broken font.</span></span>

## <a name="related-topics"></a><span data-ttu-id="418bb-131">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="418bb-131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="418bb-132">Uso di Uniscribe</span><span class="sxs-lookup"><span data-stu-id="418bb-132">Using Uniscribe</span></span>](using-uniscribe.md)
</dt> </dl>

 

 



