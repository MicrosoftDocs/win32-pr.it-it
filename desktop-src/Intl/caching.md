---
description: Uniscribe Salva i mapping da Unicode a glifo (CMAP), le larghezze del glifo e le tabelle di shaping degli script OpenType.
ms.assetid: c06c0eaf-41cb-4fd1-9750-a78355217f12
title: Caching (internazionalizzazione)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3cf8bf7dd10fe414bc170086ff9b8c34142dc197
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106319988"
---
# <a name="caching-internationalization"></a><span data-ttu-id="1f76c-103">Caching (internazionalizzazione)</span><span class="sxs-lookup"><span data-stu-id="1f76c-103">Caching (Internationalization)</span></span>

<span data-ttu-id="1f76c-104">Uniscribe Salva i mapping da Unicode a glifo (CMAP), le larghezze del glifo e le tabelle di shaping degli script OpenType.</span><span class="sxs-lookup"><span data-stu-id="1f76c-104">Uniscribe saves Unicode-to-glyph (cmap) mappings, glyph widths, and OpenType script shaping tables.</span></span> <span data-ttu-id="1f76c-105">Un handle per le tabelle per un particolare tipo di carattere di una determinata dimensione è denominato "cache script".</span><span class="sxs-lookup"><span data-stu-id="1f76c-105">A handle to the tables for a particular font of a particular size is called a "script cache".</span></span> <span data-ttu-id="1f76c-106">Molte funzioni Uniscribe richiedono sia un parametro di handle del contesto di dispositivo che un puntatore a una struttura [**\_ della cache di script**](script-cache.md) .</span><span class="sxs-lookup"><span data-stu-id="1f76c-106">Many Uniscribe functions call for both a device context handle parameter and a pointer to a [**SCRIPT\_CACHE**](script-cache.md) structure.</span></span> <span data-ttu-id="1f76c-107">Queste funzioni ricercano prima di tutto le informazioni tramite la cache di script, usando il contesto di dispositivo solo quando le tabelle obbligatorie non sono già memorizzate nella cache.</span><span class="sxs-lookup"><span data-stu-id="1f76c-107">These functions look first for information through the script cache, using the device context only when required tables are not already cached.</span></span> <span data-ttu-id="1f76c-108">Quando si chiama la funzione [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape), [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace)o [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) , l'applicazione deve passare un puntatore a una **struttura \_ della cache di script** .</span><span class="sxs-lookup"><span data-stu-id="1f76c-108">When calling the [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape), [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace), or [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) function, the application must pass a pointer to a **SCRIPT\_CACHE** structure.</span></span> <span data-ttu-id="1f76c-109">L'handle deve essere inizializzato su **null** prima della prima volta che l'applicazione passa a una funzione Uniscribe.</span><span class="sxs-lookup"><span data-stu-id="1f76c-109">The handle should be initialized to **NULL** before the first time the application passes it to a Uniscribe function.</span></span> <span data-ttu-id="1f76c-110">L'applicazione non deve mai passare lo stesso handle per diversi tipi di carattere o dimensioni diverse.</span><span class="sxs-lookup"><span data-stu-id="1f76c-110">The application should never pass the same handle for different fonts or different sizes.</span></span>

<span data-ttu-id="1f76c-111">Un'applicazione può liberare una cache di script in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="1f76c-111">An application can free a script cache at any time.</span></span> <span data-ttu-id="1f76c-112">Uniscribe mantiene i conteggi dei riferimenti nelle cache del tipo di carattere e del shaper, libera i dati del tipo di carattere solo quando vengono liberate tutte le dimensioni del tipo di carattere e libera i dati di shaper solo quando vengono liberati tutti i tipi di carattere supportati dallo shaper.</span><span class="sxs-lookup"><span data-stu-id="1f76c-112">Uniscribe maintains reference counts in its font and shaper caches, frees font data only when all sizes of the font are freed, and frees shaper data only when all fonts that the shaper supports are freed.</span></span> <span data-ttu-id="1f76c-113">Quando l'applicazione viene eseguita con uno stile, deve chiamare la funzione [**ScriptFreeCache**](/windows/desktop/api/Usp10/nf-usp10-scriptfreecache) per liberare la cache di script per lo stile.</span><span class="sxs-lookup"><span data-stu-id="1f76c-113">When the application is done with a style, it should call the [**ScriptFreeCache**](/windows/desktop/api/Usp10/nf-usp10-scriptfreecache) function to free the script cache for the style.</span></span>

<span data-ttu-id="1f76c-114">Per [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) e [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace), è possibile che l'applicazione passi un contesto di dispositivo null.</span><span class="sxs-lookup"><span data-stu-id="1f76c-114">For [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) and [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace), it is valid for the application to pass a null device context.</span></span> <span data-ttu-id="1f76c-115">Spesso la chiamata avrà esito positivo, in quanto le tabelle obbligatorie sono già memorizzate nella cache.</span><span class="sxs-lookup"><span data-stu-id="1f76c-115">Most often the call will succeed, as required tables are already cached.</span></span> <span data-ttu-id="1f76c-116">Se il data shaping o la selezione host richiede l'accesso a un contesto di dispositivo, **ScriptShape** o **ScriptPlace** restituisce immediatamente il \_ codice di errore E in sospeso.</span><span class="sxs-lookup"><span data-stu-id="1f76c-116">If the shaping or placement requires access to a device context, **ScriptShape** or **ScriptPlace** returns immediately with the E\_PENDING error code.</span></span> <span data-ttu-id="1f76c-117">Quindi, l'applicazione deve selezionare il tipo di carattere nel contesto di dispositivo.</span><span class="sxs-lookup"><span data-stu-id="1f76c-117">Then the application must select the font in the device context.</span></span> <span data-ttu-id="1f76c-118">Per la maggior parte delle applicazioni, questo consente di migliorare le prestazioni evitando la preparazione ripetuta di un handle di contesto di dispositivo con chiamate a [**SelezionaOggetto**](/windows/win32/api/wingdi/nf-wingdi-selectobject).</span><span class="sxs-lookup"><span data-stu-id="1f76c-118">For most applications, this helps performance by avoiding repeated preparation of a device context handle with calls to [**SelectObject**](/windows/win32/api/wingdi/nf-wingdi-selectobject).</span></span>

## <a name="related-topics"></a><span data-ttu-id="1f76c-119">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="1f76c-119">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="1f76c-120">Uso di Uniscribe</span><span class="sxs-lookup"><span data-stu-id="1f76c-120">Using Uniscribe</span></span>](using-uniscribe.md)
</dt> </dl>

 

 
