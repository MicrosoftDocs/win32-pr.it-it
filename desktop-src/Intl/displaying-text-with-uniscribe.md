---
description: Le applicazioni possono utilizzare le funzioni API Uniscribe per supportare la tipografia e la visualizzazione e la modifica del testo internazionale. Uniscribe usa il paragrafo come unità per la visualizzazione del testo ed è necessario usare la funzionalità Uniscribe per l'intero paragrafo.
ms.assetid: e1adc567-0445-4deb-8634-25653f82127c
title: Visualizzazione di testo con Uniscribe
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: baeb9a2be4d00efaa2681097ddefe3a6de4c576b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "104348161"
---
# <a name="displaying-text-with-uniscribe"></a><span data-ttu-id="6952f-104">Visualizzazione di testo con Uniscribe</span><span class="sxs-lookup"><span data-stu-id="6952f-104">Displaying Text with Uniscribe</span></span>

<span data-ttu-id="6952f-105">Le applicazioni possono utilizzare le funzioni API Uniscribe per supportare la tipografia e la visualizzazione e la modifica del testo internazionale.</span><span class="sxs-lookup"><span data-stu-id="6952f-105">Your applications can use Uniscribe API functions to support typography and the display and editing of international text.</span></span> <span data-ttu-id="6952f-106">Uniscribe usa il paragrafo come unità per la visualizzazione del testo ed è necessario usare la funzionalità Uniscribe per l'intero paragrafo.</span><span class="sxs-lookup"><span data-stu-id="6952f-106">Uniscribe uses the paragraph as the unit for text display, and the Uniscribe functionality must be used for the entire paragraph.</span></span>

<span data-ttu-id="6952f-107">Quando si usa Uniscribe per la visualizzazione del testo, un'applicazione deve passare attraverso un processo di formattazione ("layout"), in genere usando Uniscribe.</span><span class="sxs-lookup"><span data-stu-id="6952f-107">When using Uniscribe for display of text, an application must go through a formatting ("layout") process, typically using Uniscribe.</span></span> <span data-ttu-id="6952f-108">L'applicazione divide un paragrafo di testo in stringhe di caratteri con lo stesso stile, denominato "esecuzioni".</span><span class="sxs-lookup"><span data-stu-id="6952f-108">The application divides a text paragraph into strings of characters with the same style, called "runs".</span></span> <span data-ttu-id="6952f-109">Lo stile è determinato dalla particolare implementazione, ma in genere include attributi come il tipo di carattere, la dimensione e il colore.</span><span class="sxs-lookup"><span data-stu-id="6952f-109">The style is determined by the particular implementation, but typically includes such attributes as font, size, and color.</span></span> <span data-ttu-id="6952f-110">Durante la definizione delle esecuzioni, l'applicazione può applicare anche altre informazioni, ad esempio la lingua e i dati delle impostazioni locali mantenuti per l'uso con gli strumenti lessicali.</span><span class="sxs-lookup"><span data-stu-id="6952f-110">In defining runs, the application can also apply other information, such as language and locale data maintained for use with lexical tools.</span></span> <span data-ttu-id="6952f-111">Un'applicazione, ad esempio, potrebbe trattare come un passaggio di esecuzione separato in un testo principalmente in lingua inglese di cui viene eseguito il rendering in francese.</span><span class="sxs-lookup"><span data-stu-id="6952f-111">For example, an application might treat as a separate run a passage in a primarily English text that is rendered in French.</span></span>

<span data-ttu-id="6952f-112">Una volta determinate le esecuzioni per tutti i paragrafi, l'applicazione divide ogni paragrafo in stringhe con lo stesso script e la stessa direzione ("Items").</span><span class="sxs-lookup"><span data-stu-id="6952f-112">Once it has determined the runs for all paragraphs, the application divides each paragraph into strings that have the same script and direction ("items").</span></span> <span data-ttu-id="6952f-113">L'applicazione applica le informazioni relative agli elementi per produrre esecuzioni univoche in uno script e in una direzione e rientrare interamente all'interno di un singolo elemento ("intervalli").</span><span class="sxs-lookup"><span data-stu-id="6952f-113">The application applies the item information to produce runs that are unique in script and direction and fall entirely within a single item ("ranges").</span></span>

<span data-ttu-id="6952f-114">La suddivisione di un elemento in intervalli è arbitraria, anche se un intervallo deve essere costituito da uno o più raggruppamenti consecutivi definiti dallo script e indivisibili, detti "cluster".</span><span class="sxs-lookup"><span data-stu-id="6952f-114">The breakdown of an item into ranges is somewhat arbitrary, although a range should consist of one or more consecutive script-defined, indivisible character groupings, called "clusters."</span></span> <span data-ttu-id="6952f-115">Per le lingue europee, un cluster corrisponde in genere a un singolo carattere della tabella codici o a un punto di codice Unicode ed è costituito da un solo [glifo](uniscribe-glossary.md).</span><span class="sxs-lookup"><span data-stu-id="6952f-115">For European languages, a cluster typically corresponds to a single code page character or Unicode code point, and consists of a single [glyph](uniscribe-glossary.md).</span></span> <span data-ttu-id="6952f-116">Tuttavia, in linguaggi come Thai, un cluster è un raggruppamento di glifi e corrisponde a più caratteri consecutivi o a punti di codice.</span><span class="sxs-lookup"><span data-stu-id="6952f-116">However, in languages such as Thai, a cluster is a grouping of glyphs and corresponds to multiple consecutive characters or code points.</span></span> <span data-ttu-id="6952f-117">Un cluster tailandese, ad esempio, può contenere una consonante, una vocale e un segno di tono.</span><span class="sxs-lookup"><span data-stu-id="6952f-117">For example, a Thai cluster might contain a consonant, a vowel, and a tone mark.</span></span> <span data-ttu-id="6952f-118">In modo che non interrompa i cluster, l'applicazione in genere deve usare gli intervalli più lunghi che può o usare le proprie informazioni lessicali per suddividere gli intervalli in posizioni che non si trovano al centro di un cluster.</span><span class="sxs-lookup"><span data-stu-id="6952f-118">So that it does not break clusters, the application typically should either use the longest ranges it can or use its own lexical information to break between ranges in places that are not in the middle of a cluster.</span></span>

<span data-ttu-id="6952f-119">Quando i cluster sono stati identificati in ogni intervallo, l'applicazione deve determinare le dimensioni di ogni cluster.</span><span class="sxs-lookup"><span data-stu-id="6952f-119">When it has identified the clusters in each range, the application must determine the size of each cluster.</span></span> <span data-ttu-id="6952f-120">USA Uniscribe per sommare i cluster per determinare le dimensioni di ogni intervallo.</span><span class="sxs-lookup"><span data-stu-id="6952f-120">It uses Uniscribe to sum the clusters to determine the size of each range.</span></span> <span data-ttu-id="6952f-121">Quindi, l'applicazione somma le dimensioni degli intervalli fino a quando non viene riversata una riga, ovvero raggiunge il margine.</span><span class="sxs-lookup"><span data-stu-id="6952f-121">Then the application sums the sizes of the ranges until they overflow a line, that is, reach the margin.</span></span> <span data-ttu-id="6952f-122">L'intervallo che trabocca la riga viene diviso tra la riga corrente e la riga successiva.</span><span class="sxs-lookup"><span data-stu-id="6952f-122">The range that overflows the line is divided between the current line and the next line.</span></span> <span data-ttu-id="6952f-123">Per ogni riga, l'applicazione compila una mappa dalla posizione visiva alla posizione logica per ogni intervallo.</span><span class="sxs-lookup"><span data-stu-id="6952f-123">For each line, the application builds a map from visual position to logical position for each range.</span></span> <span data-ttu-id="6952f-124">Quindi, l'applicazione consente di modellare i punti di codice per ogni intervallo in glifi, che possono quindi essere posizionati e sottoposto a rendering.</span><span class="sxs-lookup"><span data-stu-id="6952f-124">Then the application shapes the code points for each range into glyphs, which it can subsequently position and render.</span></span>

<span data-ttu-id="6952f-125">Un'applicazione esegue il layout del testo solo una volta.</span><span class="sxs-lookup"><span data-stu-id="6952f-125">An application does text layout only one time.</span></span> <span data-ttu-id="6952f-126">In seguito, Salva i glifi e le posizioni a scopo di visualizzazione oppure li genera ogni volta che viene visualizzato il testo, con un compromesso di velocità rispetto alla memoria.</span><span class="sxs-lookup"><span data-stu-id="6952f-126">Afterwards, it either saves the glyphs and positions for display purposes or it generates them each time it displays the text, with the tradeoff being speed versus memory.</span></span> <span data-ttu-id="6952f-127">Un'applicazione tipica implementa il processo di layout una volta, quindi genera le icone e le posizioni ogni volta che viene visualizzato il testo.</span><span class="sxs-lookup"><span data-stu-id="6952f-127">A typical application implements the layout process once, then generates the glyphs and positions each time it displays the text.</span></span>

<span data-ttu-id="6952f-128">Un'applicazione che utilizza [script complessi](uniscribe-glossary.md) presenta i seguenti problemi con un semplice approccio al layout e alla visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="6952f-128">An application that uses [complex scripts](uniscribe-glossary.md) has the following problems with a simple approach to layout and display.</span></span>

-   <span data-ttu-id="6952f-129">La larghezza di un carattere di script complesso dipende dal contesto.</span><span class="sxs-lookup"><span data-stu-id="6952f-129">The width of a complex script character depends on its context.</span></span> <span data-ttu-id="6952f-130">Non è possibile salvare le larghezze nelle tabelle semplici.</span><span class="sxs-lookup"><span data-stu-id="6952f-130">It is not possible to save the widths in simple tables.</span></span>
-   <span data-ttu-id="6952f-131">Per suddividere le parole negli script, ad esempio Thai, è necessario il supporto del dizionario.</span><span class="sxs-lookup"><span data-stu-id="6952f-131">Breaking between words in scripts such as Thai requires dictionary support.</span></span> <span data-ttu-id="6952f-132">Ad esempio, non viene utilizzato alcun carattere separatore tra le parole tailandesi.</span><span class="sxs-lookup"><span data-stu-id="6952f-132">For example, no separator character is used between Thai words.</span></span>
-   <span data-ttu-id="6952f-133">L'arabo, l'ebraico, il persiano, l'urdu e altre lingue di [testo bidirezionali](uniscribe-glossary.md) richiedono il riordinamento prima della visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="6952f-133">Arabic, Hebrew, Persian, Urdu, and other [bidirectional text](uniscribe-glossary.md) languages require reordering before display.</span></span>
-   <span data-ttu-id="6952f-134">Una forma di associazione di tipi di carattere è spesso necessaria per usare facilmente script complessi.</span><span class="sxs-lookup"><span data-stu-id="6952f-134">Some form of font association is often required to easily use complex scripts.</span></span>

<span data-ttu-id="6952f-135">Il fatto che Uniscribe usi il paragrafo come unità di visualizzazione consente all'applicazione di occuparsi adeguatamente di questi complessi problemi di script.</span><span class="sxs-lookup"><span data-stu-id="6952f-135">The fact that Uniscribe uses the paragraph as the display unit helps the application deal adequately with these complex script issues.</span></span>

> [!Note]  
> <span data-ttu-id="6952f-136">Uniscribe deve essere usato per un intero paragrafo, anche se le sezioni del paragrafo non sono script complessi.</span><span class="sxs-lookup"><span data-stu-id="6952f-136">Uniscribe must be used for an entire paragraph, even if sections of the paragraph are not complex scripts.</span></span>

 

<span data-ttu-id="6952f-137">Come illustrato nella tabella seguente, Uniscribe versione 1,6 o successiva supporta varie funzioni che sfruttano i tag OpenType.</span><span class="sxs-lookup"><span data-stu-id="6952f-137">As shown in the following table, Uniscribe version 1.6 or greater supports several functions that take advantage of OpenType tags.</span></span> <span data-ttu-id="6952f-138">Possono essere sostituiti con le corrispondenti funzioni Uniscribe normali.</span><span class="sxs-lookup"><span data-stu-id="6952f-138">They can be substituted for the corresponding regular Uniscribe functions.</span></span> <span data-ttu-id="6952f-139">In genere, le applicazioni dovrebbero funzionare interamente con le funzioni di un set o l'altra e non devono tentare di "combinare" e trovare la corrispondenza con le funzioni.</span><span class="sxs-lookup"><span data-stu-id="6952f-139">Generally your applications should work entirely with functions from one set or the other and should not attempt to "mix and match" functions.</span></span>



| <span data-ttu-id="6952f-140">Normale funzione Uniscribe</span><span class="sxs-lookup"><span data-stu-id="6952f-140">Regular Uniscribe function</span></span>             | <span data-ttu-id="6952f-141">Funzione OpenType equivalente</span><span class="sxs-lookup"><span data-stu-id="6952f-141">Equivalent OpenType function</span></span>                           |
|----------------------------------------|--------------------------------------------------------|
| [<span data-ttu-id="6952f-142">**ScriptItemize**</span><span class="sxs-lookup"><span data-stu-id="6952f-142">**ScriptItemize**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptitemize) | [<span data-ttu-id="6952f-143">**ScriptItemizeOpenType**</span><span class="sxs-lookup"><span data-stu-id="6952f-143">**ScriptItemizeOpenType**</span></span>](/windows/desktop/api/usp10/nf-usp10-scriptitemizeopentype) |
| [<span data-ttu-id="6952f-144">**ScriptShape**</span><span class="sxs-lookup"><span data-stu-id="6952f-144">**ScriptShape**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptshape)     | [<span data-ttu-id="6952f-145">**ScriptShapeOpenType**</span><span class="sxs-lookup"><span data-stu-id="6952f-145">**ScriptShapeOpenType**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptshapeopentype)     |
| [<span data-ttu-id="6952f-146">**ScriptPlace**</span><span class="sxs-lookup"><span data-stu-id="6952f-146">**ScriptPlace**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptplace)     | [<span data-ttu-id="6952f-147">**ScriptPlaceOpenType**</span><span class="sxs-lookup"><span data-stu-id="6952f-147">**ScriptPlaceOpenType**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptplaceopentype)     |



 

## <a name="lay-out-text-using-uniscribe"></a><span data-ttu-id="6952f-148">Layout del testo con Uniscribe</span><span class="sxs-lookup"><span data-stu-id="6952f-148">Lay Out Text Using Uniscribe</span></span>

<span data-ttu-id="6952f-149">L'applicazione può usare i passaggi seguenti per disporre un paragrafo di testo con Uniscribe.</span><span class="sxs-lookup"><span data-stu-id="6952f-149">Your application can use the following steps to lay out out a text paragraph with Uniscribe.</span></span> <span data-ttu-id="6952f-150">Questa procedura presuppone che l'applicazione abbia già diviso il paragrafo in esecuzioni.</span><span class="sxs-lookup"><span data-stu-id="6952f-150">This procedure assumes that the application has already divided the paragraph into runs.</span></span>

1.  <span data-ttu-id="6952f-151">Chiamare [**ScriptRecordDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptrecorddigitsubstitution) solo all'avvio o alla ricezione di un messaggio [**WM \_ SETTINGCHANGE**](../winmsg/wm-settingchange.md) .</span><span class="sxs-lookup"><span data-stu-id="6952f-151">Call [**ScriptRecordDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptrecorddigitsubstitution) only when starting or when receiving a [**WM\_SETTINGCHANGE**](../winmsg/wm-settingchange.md) message.</span></span>
2.  <span data-ttu-id="6952f-152">Opzionale Chiamare [**ScriptIsComplex**](/windows/desktop/api/Usp10/nf-usp10-scriptiscomplex) per determinare se il paragrafo richiede un'elaborazione complessa.</span><span class="sxs-lookup"><span data-stu-id="6952f-152">(Optional) Call [**ScriptIsComplex**](/windows/desktop/api/Usp10/nf-usp10-scriptiscomplex) to determine if the paragraph requires complex processing.</span></span>
3.  <span data-ttu-id="6952f-153">Opzionale Se si usa Uniscribe per gestire il testo bidirezionale e/o la sostituzione di cifre, chiamare [**ScriptApplyDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptapplydigitsubstitution) per preparare le strutture di [**\_ controllo script**](/windows/win32/api/usp10/ns-usp10-script_control) e [**\_ stato script**](/windows/win32/api/usp10/ns-usp10-script_state) come input per [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize).</span><span class="sxs-lookup"><span data-stu-id="6952f-153">(Optional) If using Uniscribe to handle bidirectional text and/or digit substitution, call [**ScriptApplyDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptapplydigitsubstitution) to prepare the [**SCRIPT\_CONTROL**](/windows/win32/api/usp10/ns-usp10-script_control) and [**SCRIPT\_STATE**](/windows/win32/api/usp10/ns-usp10-script_state) structures as inputs to [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize).</span></span> <span data-ttu-id="6952f-154">Se si ignora questo passaggio, ma è ancora richiesta la sostituzione delle cifre, sostituire le cifre nazionali per Unicode U + 0030 con U + 0039 (cifre europee).</span><span class="sxs-lookup"><span data-stu-id="6952f-154">If skipping this step, but still requiring digit substitution, substitute national digits for Unicode U+0030 through U+0039 (European digits).</span></span> <span data-ttu-id="6952f-155">Per informazioni sulla sostituzione di cifre, vedere [forme digit](digit-shapes.md).</span><span class="sxs-lookup"><span data-stu-id="6952f-155">For information about digit substitution, see [Digit Shapes](digit-shapes.md).</span></span>
4.  <span data-ttu-id="6952f-156">Chiamare [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize) per dividere il paragrafo in elementi.</span><span class="sxs-lookup"><span data-stu-id="6952f-156">Call [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize) to divide the paragraph into items.</span></span> <span data-ttu-id="6952f-157">Se non si utilizza Uniscribe per la sostituzione delle cifre e l'ordine bidirezionale è noto, ad esempio, a causa del layout della tastiera utilizzato per immettere il carattere, chiamare **ScriptItemize**.</span><span class="sxs-lookup"><span data-stu-id="6952f-157">If not using Uniscribe for digit substitution and the bidirectional order is known, for example, because of the keyboard layout used to enter the character, call **ScriptItemize**.</span></span> <span data-ttu-id="6952f-158">Nella chiamata, fornire puntatori null per le strutture [**di \_ controllo script**](/windows/win32/api/usp10/ns-usp10-script_control) e [**\_ stato script**](/windows/win32/api/usp10/ns-usp10-script_state) .</span><span class="sxs-lookup"><span data-stu-id="6952f-158">In the call, provide null pointers for the [**SCRIPT\_CONTROL**](/windows/win32/api/usp10/ns-usp10-script_control) and [**SCRIPT\_STATE**](/windows/win32/api/usp10/ns-usp10-script_state) structures.</span></span> <span data-ttu-id="6952f-159">Questa tecnica genera gli elementi solo usando il motore di shaping ed è possibile riordinare gli elementi usando le informazioni del motore.</span><span class="sxs-lookup"><span data-stu-id="6952f-159">This technique generates items by use of the shaping engine only, and the items can be reordered using the engine information.</span></span>
    > [!Note]  
    > <span data-ttu-id="6952f-160">In genere, le applicazioni che funzionano solo con gli script da sinistra a destra e senza alcuna sostituzione di cifre devono passare i puntatori null per le strutture di [**\_ controllo script**](/windows/win32/api/usp10/ns-usp10-script_control) e [**\_ dello stato dello script**](/windows/win32/api/usp10/ns-usp10-script_state) .</span><span class="sxs-lookup"><span data-stu-id="6952f-160">Typically, applications that work only with left-to-right scripts and without any digit substitution should pass null pointers for the [**SCRIPT\_CONTROL**](/windows/win32/api/usp10/ns-usp10-script_control) and [**SCRIPT\_STATE**](/windows/win32/api/usp10/ns-usp10-script_state) structures.</span></span>

     

5.  <span data-ttu-id="6952f-161">Unire le informazioni sull'elemento con le informazioni sull'esecuzione per produrre gli intervalli.</span><span class="sxs-lookup"><span data-stu-id="6952f-161">Merge the item information with the run information to produce ranges.</span></span>
6.  <span data-ttu-id="6952f-162">Chiamare [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) per identificare i cluster e generare glifi.</span><span class="sxs-lookup"><span data-stu-id="6952f-162">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) to identify clusters and generate glyphs.</span></span>
7.  <span data-ttu-id="6952f-163">Se [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) restituisce lo script del codice USP \_ E \_ \_ non \_ \_ è in carattere o \_ OK con l'output che contiene glifi mancanti, selezionare i caratteri da un tipo di carattere diverso.</span><span class="sxs-lookup"><span data-stu-id="6952f-163">If [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) returns the code USP\_E\_SCRIPT\_NOT\_IN\_FONT or S\_OK with the output containing missing glyphs, select characters from a different font.</span></span> <span data-ttu-id="6952f-164">Sostituire un altro tipo di carattere o disabilitare il data shaping impostando il membro **escript** della struttura di [**\_ analisi dello script**](/windows/win32/api/usp10/ns-usp10-script_analysis) passata a **ScriptShape** per lo script non \_ definito.</span><span class="sxs-lookup"><span data-stu-id="6952f-164">Either substitute another font or disable shaping by setting the **eScript** member of the [**SCRIPT\_ANALYSIS**](/windows/win32/api/usp10/ns-usp10-script_analysis) structure passed to **ScriptShape** to SCRIPT\_UNDEFINED.</span></span> <span data-ttu-id="6952f-165">Per ulteriori informazioni, vedere [utilizzo del fallback dei tipi di carattere](using-font-fallback.md).</span><span class="sxs-lookup"><span data-stu-id="6952f-165">For more information, see [Using Font Fallback](using-font-fallback.md).</span></span>
8.  <span data-ttu-id="6952f-166">Chiamare [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) per generare le [larghezze di avanzamento](uniscribe-glossary.md) e le posizioni x e y per i glifi in ogni intervallo successivo.</span><span class="sxs-lookup"><span data-stu-id="6952f-166">Call [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) to generate [advance widths](uniscribe-glossary.md) and x and y positions for the glyphs in each successive range.</span></span> <span data-ttu-id="6952f-167">Questo è il primo passaggio per cui la dimensione del testo diventa una considerazione.</span><span class="sxs-lookup"><span data-stu-id="6952f-167">This is the first step for which text size becomes a consideration.</span></span>
9.  <span data-ttu-id="6952f-168">Sommare le dimensioni dell'intervallo fino all'overflow della riga.</span><span class="sxs-lookup"><span data-stu-id="6952f-168">Sum the range sizes until the line overflows.</span></span>
10. <span data-ttu-id="6952f-169">Suddividere l'intervallo su un confine di parola usando i membri **fSoftBreak** e **fWhiteSpace** negli attributi logici.</span><span class="sxs-lookup"><span data-stu-id="6952f-169">Break the range on a word boundary by using the **fSoftBreak** and **fWhiteSpace** members in the logical attributes.</span></span> <span data-ttu-id="6952f-170">Per interrompere l'esecuzione di un singolo cluster di caratteri, usare le informazioni restituite chiamando [**ScriptBreak**](/windows/desktop/api/Usp10/nf-usp10-scriptbreak).</span><span class="sxs-lookup"><span data-stu-id="6952f-170">To break a single character cluster off the run, use the information returned by calling [**ScriptBreak**](/windows/desktop/api/Usp10/nf-usp10-scriptbreak).</span></span>
    > [!Note]  
    > <span data-ttu-id="6952f-171">Decidere se il primo punto di codice di un intervallo deve essere un punto di break Word perché l'ultimo carattere dell'intervallo precedente lo richiede.</span><span class="sxs-lookup"><span data-stu-id="6952f-171">Decide if the first code point of a range should be a word break point because the last character of the previous range requires it.</span></span> <span data-ttu-id="6952f-172">Se, ad esempio, un intervallo termina con una virgola, prendere in considerazione il primo carattere dell'intervallo successivo come punto di break di parole.</span><span class="sxs-lookup"><span data-stu-id="6952f-172">For example, if one range ends in a comma, consider the first character of the next range to be a word break point.</span></span>

     

11. <span data-ttu-id="6952f-173">Ripetere i passaggi da 6 a 10 per ogni riga del paragrafo.</span><span class="sxs-lookup"><span data-stu-id="6952f-173">Repeat steps 6 through 10 for each line in the paragraph.</span></span> <span data-ttu-id="6952f-174">Tuttavia, se si interrompe l'ultima esecuzione sulla riga, chiamare [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) per rimodellare la parte rimanente dell'esecuzione come la prima esecuzione nella riga successiva.</span><span class="sxs-lookup"><span data-stu-id="6952f-174">However, if breaking the last run on the line, call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) to reshape the remaining part of the run as the first run on the next line.</span></span>

## <a name="display-text-using-uniscribe"></a><span data-ttu-id="6952f-175">Visualizzare il testo con Uniscribe</span><span class="sxs-lookup"><span data-stu-id="6952f-175">Display Text Using Uniscribe</span></span>

<span data-ttu-id="6952f-176">L'applicazione può usare i passaggi seguenti per visualizzare un paragrafo di testo.</span><span class="sxs-lookup"><span data-stu-id="6952f-176">Your application can use the following steps to display a text paragraph.</span></span> <span data-ttu-id="6952f-177">Questa procedura presuppone che l'applicazione abbia già disposto il testo e non abbia salvato i glifi e le posizioni dal processo di layout.</span><span class="sxs-lookup"><span data-stu-id="6952f-177">This procedure assumes that the application has already laid out the text and has not saved the glyphs and positions from the layout process.</span></span> <span data-ttu-id="6952f-178">Se la velocità rappresenta un problema, l'applicazione può salvare i glifi e le posizioni dalla procedura di layout e iniziare dal passaggio 2 nella procedura di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="6952f-178">If speed is a concern, the application can save the glyphs and positions from the layout procedure and start at step 2 in the display procedure.</span></span>

> [!Note]  
> <span data-ttu-id="6952f-179">L'applicazione può omettere il passaggio 2 Se il testo non contiene caratteri da script da destra a sinistra, non contiene caratteri di controllo bidirezionali e utilizza un livello di incorporamento di base da sinistra a destra.</span><span class="sxs-lookup"><span data-stu-id="6952f-179">The application can omit step 2 if the text contains no characters from right-to-left scripts, contains no bidirectional control characters, and uses a left-to-right base embedding level.</span></span>

 

1.  <span data-ttu-id="6952f-180">Per ogni esecuzione eseguire le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="6952f-180">For each run, do the following:</span></span>
    1.  <span data-ttu-id="6952f-181">Se lo stile è stato modificato dopo l'ultima esecuzione, aggiornare l'handle al contesto di dispositivo rilasciando e ottenendo nuovamente.</span><span class="sxs-lookup"><span data-stu-id="6952f-181">If the style has changed since the last run, update the handle to the device context by releasing and getting it again.</span></span>
    2.  <span data-ttu-id="6952f-182">Chiamare [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) per generare glifi per l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="6952f-182">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) to generate glyphs for the run.</span></span>
    3.  <span data-ttu-id="6952f-183">Chiamare [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) per generare una larghezza di avanzamento e un offset x, y per ogni glifo.</span><span class="sxs-lookup"><span data-stu-id="6952f-183">Call [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) to generate an advance width and an x,y offset for each glyph.</span></span>
2.  <span data-ttu-id="6952f-184">Eseguire le operazioni seguenti per stabilire l'ordine visivo corretto per le esecuzioni nella riga:</span><span class="sxs-lookup"><span data-stu-id="6952f-184">Do the following to establish the correct visual order for the runs in the line:</span></span>
    1.  <span data-ttu-id="6952f-185">Estrae una matrice di livelli di [incorporamento](uniscribe-glossary.md)bidirezionale, uno per ogni intervallo.</span><span class="sxs-lookup"><span data-stu-id="6952f-185">Extract an array of bidirectional [embedding levels](uniscribe-glossary.md), one per range.</span></span> <span data-ttu-id="6952f-186">Il livello di incorporamento è fornito da ( \_ elemento script) si. Analisi degli SCRIPT \_ ) a.</span><span class="sxs-lookup"><span data-stu-id="6952f-186">The embedding level is given by (SCRIPT\_ITEM) si.(SCRIPT\_ANALYSIS) a.</span></span> <span data-ttu-id="6952f-187">(SCRIPT \_ STATO) s. uBidiLevel.</span><span class="sxs-lookup"><span data-stu-id="6952f-187">(SCRIPT\_STATE) s.uBidiLevel.</span></span>
    2.  <span data-ttu-id="6952f-188">Passare questa matrice a [**ScriptLayout**](/windows/desktop/api/Usp10/nf-usp10-scriptlayout) per generare una mappa delle posizioni visive in posizioni logiche.</span><span class="sxs-lookup"><span data-stu-id="6952f-188">Pass this array to [**ScriptLayout**](/windows/desktop/api/Usp10/nf-usp10-scriptlayout) to generate a map of visual positions to logical positions.</span></span>
3.  <span data-ttu-id="6952f-189">Opzionale Per giustificare il testo, chiamare [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify) o utilizzare una conoscenza specializzata del testo.</span><span class="sxs-lookup"><span data-stu-id="6952f-189">(Optional) To justify the text, either call [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify) or use specialized knowledge of the text.</span></span>
4.  <span data-ttu-id="6952f-190">Usare la mappa visiva-logica per visualizzare le esecuzioni in ordine visivo.</span><span class="sxs-lookup"><span data-stu-id="6952f-190">Use the visual-to-logical map to display the runs in visual order.</span></span> <span data-ttu-id="6952f-191">A partire dall'estremità sinistra della riga, chiamare [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) per visualizzare l'esecuzione specificata dalla prima voce della mappa.</span><span class="sxs-lookup"><span data-stu-id="6952f-191">Starting at the left end of the line, call [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) to display the run given by the first entry in the map.</span></span> <span data-ttu-id="6952f-192">Per ogni voce successiva nella mappa, chiamare **ScriptTextOut** per visualizzare l'esecuzione indicata a destra dell'esecuzione visualizzata in precedenza.</span><span class="sxs-lookup"><span data-stu-id="6952f-192">For each subsequent entry in the map, call **ScriptTextOut** to display the indicated run to the right of the previously displayed run.</span></span>

    <span data-ttu-id="6952f-193">Se si omette il passaggio 2, iniziare dall'estremità sinistra della riga e chiamare [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) per visualizzare la prima esecuzione logica e quindi per visualizzare ogni esecuzione logica a destra dell'esecuzione precedente.</span><span class="sxs-lookup"><span data-stu-id="6952f-193">If omitting step 2, start at the left end of the line and call [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) to display the first logical run, and then to display each logical run to the right of the previous run.</span></span>

5.  <span data-ttu-id="6952f-194">Ripetere i passaggi precedenti per tutte le righe nel paragrafo.</span><span class="sxs-lookup"><span data-stu-id="6952f-194">Repeat the steps above for all lines in the paragraph.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6952f-195">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="6952f-195">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6952f-196">Uso di Uniscribe</span><span class="sxs-lookup"><span data-stu-id="6952f-196">Using Uniscribe</span></span>](using-uniscribe.md)
</dt> </dl>

 

 
