---
description: Un &\# 0034; contesto di input&\# 0034; è una struttura interna gestita da IMM.
ms.assetid: 2b639e30-5368-45bb-943d-db1ab6b62582
title: Contesto di input
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 16f1f83a397373e17a7d637b61a3232a3d72acde
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103881525"
---
# <a name="input-context"></a><span data-ttu-id="ba56c-103">Contesto di input</span><span class="sxs-lookup"><span data-stu-id="ba56c-103">Input Context</span></span>

<span data-ttu-id="ba56c-104">Un "contesto di input" è una struttura interna gestita da IMM.</span><span class="sxs-lookup"><span data-stu-id="ba56c-104">An "input context" is an internal structure maintained by the IMM.</span></span> <span data-ttu-id="ba56c-105">Contiene informazioni sullo stato dell'IME e viene utilizzato dalle finestre IME.</span><span class="sxs-lookup"><span data-stu-id="ba56c-105">It contains information about the status of the IME and is used by IME windows.</span></span> <span data-ttu-id="ba56c-106">Per impostazione predefinita, il sistema operativo crea e assegna un contesto di input a ogni thread.</span><span class="sxs-lookup"><span data-stu-id="ba56c-106">By default, the operating system creates and assigns an input context to each thread.</span></span> <span data-ttu-id="ba56c-107">All'interno del thread, questo contesto di input predefinito è una risorsa condivisa ed è associato a ogni finestra appena creata.</span><span class="sxs-lookup"><span data-stu-id="ba56c-107">Within the thread, this default input context is a shared resource and is associated with each newly created window.</span></span>

<span data-ttu-id="ba56c-108">Per recuperare o impostare le informazioni nell'IME, un'applicazione in grado di riconoscere IME deve prima recuperare un handle per il contesto di input associato a una finestra specificata.</span><span class="sxs-lookup"><span data-stu-id="ba56c-108">To retrieve or set information in the IME, an IME-aware application must first retrieve a handle to the input context associated with a specified window.</span></span> <span data-ttu-id="ba56c-109">L'applicazione recupera l'handle utilizzando la funzione [**ImmGetContext**](/windows/desktop/api/Imm/nf-imm-immgetcontext) .</span><span class="sxs-lookup"><span data-stu-id="ba56c-109">The application retrieves the handle by using the [**ImmGetContext**](/windows/desktop/api/Imm/nf-imm-immgetcontext) function.</span></span> <span data-ttu-id="ba56c-110">Può usare l'handle recuperato nelle chiamate successive alle funzioni IMM per recuperare e impostare i valori IME, ad esempio lo stile della finestra di composizione, lo stile di composizione e la posizione della finestra di stato.</span><span class="sxs-lookup"><span data-stu-id="ba56c-110">It can use the retrieved handle in subsequent calls to the IMM functions to retrieve and set IME values, such as the composition window style, the composition style, and the status window position.</span></span> <span data-ttu-id="ba56c-111">Una volta che l'applicazione ha terminato di usare il contesto, deve rilasciare il contesto usando la funzione [**ImmReleaseContext**](/windows/desktop/api/Imm/nf-imm-immreleasecontext) .</span><span class="sxs-lookup"><span data-stu-id="ba56c-111">Once the application has finished using the context, it must release the context using the [**ImmReleaseContext**](/windows/desktop/api/Imm/nf-imm-immreleasecontext) function.</span></span>

<span data-ttu-id="ba56c-112">Poiché il contesto di input predefinito è una risorsa condivisa, tutte le modifiche apportate dall'applicazione si applicano a tutte le finestre nel thread.</span><span class="sxs-lookup"><span data-stu-id="ba56c-112">Because the default input context is a shared resource, any changes the application makes to it apply to all windows in the thread.</span></span> <span data-ttu-id="ba56c-113">Tuttavia, l'applicazione può eseguire l'override di questo comportamento predefinito creando il proprio contesto di input e associando tale comportamento a una o più finestre del thread.</span><span class="sxs-lookup"><span data-stu-id="ba56c-113">However, the application can override this default behavior by creating its own input context and associating it with one or more windows of the thread.</span></span> <span data-ttu-id="ba56c-114">Le modifiche apportate a un contesto di input specifico dell'applicazione si applicano solo alle finestre associate al contesto.</span><span class="sxs-lookup"><span data-stu-id="ba56c-114">The changes made to an application-specific input context apply only to the windows associated with the context.</span></span>

<span data-ttu-id="ba56c-115">L'applicazione può creare un contesto di input usando la funzione [**ImmCreateContext**](/windows/desktop/api/Imm/nf-imm-immcreatecontext) .</span><span class="sxs-lookup"><span data-stu-id="ba56c-115">Your application can create an input context by using the [**ImmCreateContext**](/windows/desktop/api/Imm/nf-imm-immcreatecontext) function.</span></span> <span data-ttu-id="ba56c-116">Per assegnare il contesto a una finestra, l'applicazione chiama la funzione [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) .</span><span class="sxs-lookup"><span data-stu-id="ba56c-116">To assign the context to a window, the application calls the [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) function.</span></span> <span data-ttu-id="ba56c-117">Questa funzione restituisce un handle per il contesto di input associato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="ba56c-117">This function returns a handle to the previously associated input context.</span></span> <span data-ttu-id="ba56c-118">Se l'applicazione non ha ancora associato un contesto di input alla finestra, l'handle restituito è per il contesto di input predefinito.</span><span class="sxs-lookup"><span data-stu-id="ba56c-118">If the application has not already associated an input context with the window, the returned handle is for the default input context.</span></span> <span data-ttu-id="ba56c-119">In genere, l'applicazione salva questo handle e successivamente lo associa alla finestra quando il contesto di input personalizzato non è più necessario.</span><span class="sxs-lookup"><span data-stu-id="ba56c-119">Typically, the application saves this handle and later reassociates it with the window when the customized input context is no longer needed.</span></span>

<span data-ttu-id="ba56c-120">Quando un contesto di input è associato a una finestra, il sistema operativo seleziona automaticamente tale contesto quando la finestra viene attivata e riceve lo stato attivo per l'input.</span><span class="sxs-lookup"><span data-stu-id="ba56c-120">Once an input context is associated with a window, the operating system automatically selects that context when the window is activated and receives the input focus.</span></span> <span data-ttu-id="ba56c-121">Lo stile e altre informazioni nel contesto di input influiscono sull'input della tastiera successivo per tale finestra, determinando la modalità di funzionamento dell'IME.</span><span class="sxs-lookup"><span data-stu-id="ba56c-121">The style and other information in the input context affects subsequent keyboard input for that window, determining how the IME operates.</span></span>

<span data-ttu-id="ba56c-122">L'applicazione deve eliminare qualsiasi contesto di input personalizzato prima di terminare.</span><span class="sxs-lookup"><span data-stu-id="ba56c-122">Your application must destroy any customized input context before it terminates.</span></span> <span data-ttu-id="ba56c-123">In primo luogo, l'applicazione rimuove il contesto di input da qualsiasi associazione effettuata con Windows nel thread utilizzando la funzione [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) .</span><span class="sxs-lookup"><span data-stu-id="ba56c-123">First, the application removes the input context from any association it has made with windows in the thread by using the [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) function.</span></span> <span data-ttu-id="ba56c-124">Chiama quindi la funzione [**ImmDestroyContext**](/windows/desktop/api/Imm/nf-imm-immdestroycontext) .</span><span class="sxs-lookup"><span data-stu-id="ba56c-124">Then, it calls the [**ImmDestroyContext**](/windows/desktop/api/Imm/nf-imm-immdestroycontext) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ba56c-125">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="ba56c-125">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ba56c-126">Informazioni su Gestione metodi di input</span><span class="sxs-lookup"><span data-stu-id="ba56c-126">About Input Method Manager</span></span>](about-input-method-manager.md)
</dt> </dl>

 

 



