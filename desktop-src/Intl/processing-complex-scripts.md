---
description: Per fornire la giustificazione del testo, un'applicazione può usare uno dei due metodi.
ms.assetid: 1190baed-5959-4f7a-8946-ac3b3da85821
title: Elaborazione di script complessi
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 87bea5b75e87afc4177b03c03f4263ba2592a0e0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104049447"
---
# <a name="processing-complex-scripts"></a><span data-ttu-id="59265-103">Elaborazione di script complessi</span><span class="sxs-lookup"><span data-stu-id="59265-103">Processing Complex Scripts</span></span>

<span data-ttu-id="59265-104">Per fornire la giustificazione del testo, un'applicazione può usare uno dei due metodi.</span><span class="sxs-lookup"><span data-stu-id="59265-104">To provide text justification, an application can use one of two methods.</span></span> <span data-ttu-id="59265-105">Per una semplice implementazione di una giustificazione multilingue, l'applicazione deve chiamare [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify).</span><span class="sxs-lookup"><span data-stu-id="59265-105">For a simple implementation of multilingual justification, the application should call [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify).</span></span> <span data-ttu-id="59265-106">Genera la matrice Delta DX considerando kashida, quindi la spaziatura tra le parole, quindi la spaziatura tra caratteri.</span><span class="sxs-lookup"><span data-stu-id="59265-106">It generates the delta dx array by considering kashida, then interword spacing, and then intercharacter spacing.</span></span> <span data-ttu-id="59265-107">Per una giustificazione più sofisticata, l'applicazione può generare una matrice Delta DX aggiornata usando la propria conoscenza della lingua e le informazioni recuperate da [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) nella matrice [**\_ VISATTR dello script**](/windows/win32/api/usp10/ns-usp10-script_visattr) .</span><span class="sxs-lookup"><span data-stu-id="59265-107">For more sophisticated justification, the application can generate an updated delta dx array using its own language knowledge and the information retrieved by [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) in the [**SCRIPT\_VISATTR**](/windows/win32/api/usp10/ns-usp10-script_visattr) array.</span></span>

<span data-ttu-id="59265-108">È necessario inserire lo spazio di giustificazione o kashida se identificato dal membro **uJustification** dello [**script \_ VISATTR**](/windows/win32/api/usp10/ns-usp10-script_visattr).</span><span class="sxs-lookup"><span data-stu-id="59265-108">Justification space or kashida should be inserted where identified by the **uJustification** member of [**SCRIPT\_VISATTR**](/windows/win32/api/usp10/ns-usp10-script_visattr).</span></span> <span data-ttu-id="59265-109">Quando si esegue la giustificazione tra caratteri, l'applicazione deve inserire ulteriore spazio solo dopo i glifi contrassegnati con il \_ carattere di giustificazione dello script \_ .</span><span class="sxs-lookup"><span data-stu-id="59265-109">When performing inter-character justification, the application should insert extra space only after glyphs marked with SCRIPT\_JUSTIFY\_CHARACTER.</span></span>

<span data-ttu-id="59265-110">L'applicazione esegue il posizionamento e l'hit testing del cursore usando [**ScriptXtoCP**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) e [**ScriptCPtoX**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox).</span><span class="sxs-lookup"><span data-stu-id="59265-110">The application does caret placement and hit testing by using [**ScriptXtoCP**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) and [**ScriptCPtoX**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox).</span></span> <span data-ttu-id="59265-111">Per ulteriori informazioni, vedere [gestione del posizionamento del cursore e hit testing](managing-caret-placement-and-hit-testing.md).</span><span class="sxs-lookup"><span data-stu-id="59265-111">For more information, see [Managing Caret Placement and Hit Testing](managing-caret-placement-and-hit-testing.md).</span></span>

<span data-ttu-id="59265-112">Per ottenere larghezze in modo indipendente dal tipo di carattere, l'applicazione chiama [**ScriptGetLogicalWidths**](/windows/desktop/api/Usp10/nf-usp10-scriptgetlogicalwidths).</span><span class="sxs-lookup"><span data-stu-id="59265-112">To get widths in a font-independent manner, the application calls [**ScriptGetLogicalWidths**](/windows/desktop/api/Usp10/nf-usp10-scriptgetlogicalwidths).</span></span> <span data-ttu-id="59265-113">Passando le larghezze logiche a [**ScriptApplyLogicalWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptapplylogicalwidth), un blocco di testo può essere rivisualizzato negli stessi limiti con una perdita accettabile di qualità anche quando il tipo di carattere originale non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="59265-113">By passing the logical widths to [**ScriptApplyLogicalWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptapplylogicalwidth), a block of text can be redisplayed in the same boundaries with acceptable loss of quality even when the original font is not available.</span></span> <span data-ttu-id="59265-114">Genera una matrice di larghezze del glifo ([larghezze di avanzamento](uniscribe-glossary.md)) adatte per passare a [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout).</span><span class="sxs-lookup"><span data-stu-id="59265-114">It generates an array of glyph widths ([advance widths](uniscribe-glossary.md)) suitable for passing to [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout).</span></span> <span data-ttu-id="59265-115">La registrazione e la riapplicazione delle informazioni sulla larghezza avanzata in modo indipendente dal tipo di carattere possono essere utili in situazioni come la Metafiling in un formato definito dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="59265-115">Such recording and reapplying of advance width information in a font-independent manner can be useful in situations such as metafiling in an application defined format.</span></span>

> [!Note]  
> <span data-ttu-id="59265-116">I metafile non supportano gli indici di glifi.</span><span class="sxs-lookup"><span data-stu-id="59265-116">Metafiles do not support glyph indexes.</span></span> <span data-ttu-id="59265-117">Per scrivere in un metafile avanzato, l'applicazione deve usare [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) e scrivere direttamente i caratteri logici.</span><span class="sxs-lookup"><span data-stu-id="59265-117">To write to an enhanced metafile, the application should use [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) and write the logical characters directly.</span></span> <span data-ttu-id="59265-118">Con questo meccanismo, la generazione e la selezione del glifo non vengono eseguite fino a quando non viene riprodotto il testo.</span><span class="sxs-lookup"><span data-stu-id="59265-118">Using this mechanism, the glyph generation and placement does not occur until the text is played back.</span></span>

 

<span data-ttu-id="59265-119">Per recuperare i glifi specifici utilizzati per i valori predefiniti, Blank, Kashida e così via, per il tipo di carattere corrente, l'applicazione deve chiamare [**ScriptGetFontProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetfontproperties).</span><span class="sxs-lookup"><span data-stu-id="59265-119">To retrieve the specific glyphs that are used for the default, blanks, kashida, and so forth, for the current font, the application should call [**ScriptGetFontProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetfontproperties).</span></span> <span data-ttu-id="59265-120">Per determinare quali caratteri in un'esecuzione sono supportati dal tipo di carattere selezionato, l'applicazione chiama [**ScriptGetCMap**](/windows/desktop/api/Usp10/nf-usp10-scriptgetcmap).</span><span class="sxs-lookup"><span data-stu-id="59265-120">To determine which characters in a run are supported by the selected font, the application calls [**ScriptGetCMap**](/windows/desktop/api/Usp10/nf-usp10-scriptgetcmap).</span></span> <span data-ttu-id="59265-121">I caratteri non disponibili hanno il glifo predefinito nel buffer del glifo.</span><span class="sxs-lookup"><span data-stu-id="59265-121">Characters that are not available have the default glyph in the glyph buffer.</span></span> <span data-ttu-id="59265-122">Si noti che questo metodo ha esito negativo se un tipo di carattere esegue il rendering di un carattere utilizzando una combinazione di glifi anziché un solo glifo.</span><span class="sxs-lookup"><span data-stu-id="59265-122">Note that this method fails if a font renders a character using a combination of glyphs instead of a single glyph.</span></span> <span data-ttu-id="59265-123">Ad esempio, 00C9; È possibile eseguire il rendering della lettera MAIUSCOLa Latina E con ACUTo usando un glifo e un glifo acuto.</span><span class="sxs-lookup"><span data-stu-id="59265-123">For example, 00C9; LATIN CAPITAL LETTER E WITH ACUTE can be rendered using a capital E glyph and an acute glyph.</span></span> <span data-ttu-id="59265-124">Per determinare il supporto del tipo di carattere per una stringa che contiene questi tipi di punti di codice, l'applicazione può chiamare [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape).</span><span class="sxs-lookup"><span data-stu-id="59265-124">To determine the font support for a string that contains these kinds of code points, the application can call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape).</span></span> <span data-ttu-id="59265-125">Per altre informazioni, vedere [uso dei motori di shaping](using-shaping-engines.md).</span><span class="sxs-lookup"><span data-stu-id="59265-125">For more information, see [Using Shaping Engines](using-shaping-engines.md).</span></span>

<span data-ttu-id="59265-126">La funzione [**ScriptCacheGetHeight**](/windows/desktop/api/Usp10/nf-usp10-scriptcachegetheight) restituisce l'altezza del tipo di carattere dalla cache dei tipi di carattere.</span><span class="sxs-lookup"><span data-stu-id="59265-126">The [**ScriptCacheGetHeight**](/windows/desktop/api/Usp10/nf-usp10-scriptcachegetheight) function returns the height of the font from the font cache.</span></span> <span data-ttu-id="59265-127">[**ScriptGetProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetproperties) fornisce informazioni sull'elaborazione speciale necessaria per tutti gli script, indicizzati per script.</span><span class="sxs-lookup"><span data-stu-id="59265-127">[**ScriptGetProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetproperties) provides information on the special processing required for all the scripts, indexed by script.</span></span> <span data-ttu-id="59265-128">Ad esempio, include la lingua primaria associata allo script, i dati che indicano se lo script è numerico e i dati che indicano se lo script è uno script complesso.</span><span class="sxs-lookup"><span data-stu-id="59265-128">For example, it includes the primary language associated with the script, data indicating if the script is numeric, and data indicating if the script is a complex script.</span></span>

<span data-ttu-id="59265-129">[**ScriptGetGlyphABCWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptgetglyphabcwidth) restituisce la [larghezza ABC](uniscribe-glossary.md) di un glifo specificato, che potrebbe essere utile per la creazione di grafici di glifi.</span><span class="sxs-lookup"><span data-stu-id="59265-129">[**ScriptGetGlyphABCWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptgetglyphabcwidth) returns the [ABC width](uniscribe-glossary.md) of a given glyph, which might be useful for drawing glyph charts.</span></span> <span data-ttu-id="59265-130">Tuttavia, non deve essere usato per la normale formattazione del testo di script complessi.</span><span class="sxs-lookup"><span data-stu-id="59265-130">However, it should not be used for normal complex script text formatting.</span></span>

## <a name="related-topics"></a><span data-ttu-id="59265-131">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="59265-131">Related Topics</span></span>

[<span data-ttu-id="59265-132">Uso di Uniscribe</span><span class="sxs-lookup"><span data-stu-id="59265-132">Using Uniscribe</span></span>](using-uniscribe.md)


 

 
