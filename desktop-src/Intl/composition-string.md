---
description: La stringa di composizione è il testo corrente nella finestra di composizione.
ms.assetid: ab226567-f68d-4fa4-9ead-e9bfabde927e
title: Stringa di composizione
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5e5cb63163ca9a8076edc4d01053e4baeffc619c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103967627"
---
# <a name="composition-string"></a><span data-ttu-id="a9033-103">Stringa di composizione</span><span class="sxs-lookup"><span data-stu-id="a9033-103">Composition String</span></span>

<span data-ttu-id="a9033-104">La stringa di composizione è il testo corrente nella finestra di composizione.</span><span class="sxs-lookup"><span data-stu-id="a9033-104">The composition string is the current text in the composition window.</span></span> <span data-ttu-id="a9033-105">Si tratta del testo che l'IME converte in caratteri finali.</span><span class="sxs-lookup"><span data-stu-id="a9033-105">This is the text that the IME converts to final characters.</span></span> <span data-ttu-id="a9033-106">Ogni stringa di composizione è costituita da una o più clausole ".</span><span class="sxs-lookup"><span data-stu-id="a9033-106">Each composition string consists of one or more "clauses".</span></span> <span data-ttu-id="a9033-107">Una clausola è la più piccola combinazione di caratteri che l'IME può convertire in un carattere finale.</span><span class="sxs-lookup"><span data-stu-id="a9033-107">A clause is the smallest combination of characters that the IME can convert to a final character.</span></span> <span data-ttu-id="a9033-108">Per ottenere e impostare la stringa di composizione, l'applicazione chiama rispettivamente le funzioni [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) e [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) .</span><span class="sxs-lookup"><span data-stu-id="a9033-108">To get and set the composition string, the application calls the [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) and [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) functions, respectively.</span></span>

<span data-ttu-id="a9033-109">Quando l'utente immette testo nella finestra di composizione, l'IME tiene traccia dello stato della stringa di composizione.</span><span class="sxs-lookup"><span data-stu-id="a9033-109">As the user enters text in the composition window, the IME tracks the status of the composition string.</span></span> <span data-ttu-id="a9033-110">Questo stato include informazioni sugli attributi, informazioni sulla clausola, informazioni di digitazione e posizione del cursore.</span><span class="sxs-lookup"><span data-stu-id="a9033-110">This status includes attribute information, clause information, typing information, and cursor position.</span></span> <span data-ttu-id="a9033-111">L'applicazione può recuperare lo stato di composizione tramite la funzione [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) .</span><span class="sxs-lookup"><span data-stu-id="a9033-111">The application can retrieve the composition status by using the [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) function.</span></span>

<span data-ttu-id="a9033-112">Viene eseguito il rendering delle informazioni sugli attributi in una matrice di valori a 8 bit che specifica lo stato dei caratteri nella stringa di composizione.</span><span class="sxs-lookup"><span data-stu-id="a9033-112">Attribute information is rendered in an array of 8-bit values that specifies the status of characters in the composition string.</span></span> <span data-ttu-id="a9033-113">Tutti i caratteri di una clausola devono avere lo stesso attributo.</span><span class="sxs-lookup"><span data-stu-id="a9033-113">All characters of one clause must have the same attribute.</span></span> <span data-ttu-id="a9033-114">La matrice include un valore per ogni byte nella stringa, incluso un byte per il lead e il secondo byte di qualsiasi carattere a byte doppio nella stringa.</span><span class="sxs-lookup"><span data-stu-id="a9033-114">The array includes one value for each byte in the string, including one byte each for the lead and second bytes of any double-byte characters in the string.</span></span> <span data-ttu-id="a9033-115">Per ogni valore nella matrice, i bit da 0 a 3 possono essere una combinazione dei valori seguenti.</span><span class="sxs-lookup"><span data-stu-id="a9033-115">For each value in the array, bits 0 through 3 can be one combination of the following values.</span></span>



| <span data-ttu-id="a9033-116">Valore</span><span class="sxs-lookup"><span data-stu-id="a9033-116">Value</span></span>                      | <span data-ttu-id="a9033-117">Significato</span><span class="sxs-lookup"><span data-stu-id="a9033-117">Meaning</span></span>                                                                                                   |
|----------------------------|-----------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="a9033-118">\_input attr</span><span class="sxs-lookup"><span data-stu-id="a9033-118">ATTR\_INPUT</span></span>                | <span data-ttu-id="a9033-119">Carattere immesso dall'utente.</span><span class="sxs-lookup"><span data-stu-id="a9033-119">Character being entered by the user.</span></span> <span data-ttu-id="a9033-120">L'IME deve ancora convertire questo carattere.</span><span class="sxs-lookup"><span data-stu-id="a9033-120">The IME has yet to convert this character.</span></span>                           |
| <span data-ttu-id="a9033-121">\_errore di input attr \_</span><span class="sxs-lookup"><span data-stu-id="a9033-121">ATTR\_INPUT\_ERROR</span></span>         | <span data-ttu-id="a9033-122">Carattere di errore che l'IME non è in grado di convertire.</span><span class="sxs-lookup"><span data-stu-id="a9033-122">An error character that the IME cannot convert.</span></span> <span data-ttu-id="a9033-123">L'IME, ad esempio, non può riunire alcune consonanti.</span><span class="sxs-lookup"><span data-stu-id="a9033-123">For example, the IME cannot put together some consonants.</span></span> |
| <span data-ttu-id="a9033-124">\_destinazione attr \_ convertita</span><span class="sxs-lookup"><span data-stu-id="a9033-124">ATTR\_TARGET\_CONVERTED</span></span>    | <span data-ttu-id="a9033-125">Carattere selezionato dall'utente e quindi convertito dall'IME.</span><span class="sxs-lookup"><span data-stu-id="a9033-125">Character selected by the user and then converted by the IME.</span></span>                                             |
| <span data-ttu-id="a9033-126">ATTR \_ convertito</span><span class="sxs-lookup"><span data-stu-id="a9033-126">ATTR\_CONVERTED</span></span>            | <span data-ttu-id="a9033-127">Carattere già convertito nell'IME.</span><span class="sxs-lookup"><span data-stu-id="a9033-127">Character that the IME has already converted.</span></span>                                                             |
| <span data-ttu-id="a9033-128">ATTR \_ destinazione \_ NOTCONVERTED</span><span class="sxs-lookup"><span data-stu-id="a9033-128">ATTR\_TARGET\_NOTCONVERTED</span></span> | <span data-ttu-id="a9033-129">Carattere da convertire.</span><span class="sxs-lookup"><span data-stu-id="a9033-129">Character being converted.</span></span> <span data-ttu-id="a9033-130">L'utente ha selezionato questo carattere ma non è ancora stato convertito dall'IME.</span><span class="sxs-lookup"><span data-stu-id="a9033-130">The user has selected this character but the IME has not yet converted it.</span></span>     |
| <span data-ttu-id="a9033-131">ATTR \_ FIXEDCONVERTED</span><span class="sxs-lookup"><span data-stu-id="a9033-131">ATTR\_FIXEDCONVERTED</span></span>       | <span data-ttu-id="a9033-132">Caratteri che non saranno più convertiti dall'IME.</span><span class="sxs-lookup"><span data-stu-id="a9033-132">Characters that the IME will no longer convert.</span></span>                                                           |



 

<span data-ttu-id="a9033-133">Tutti gli altri valori sono riservati.</span><span class="sxs-lookup"><span data-stu-id="a9033-133">All other values are reserved.</span></span> <span data-ttu-id="a9033-134">In giapponese, qualsiasi carattere non convertito con l'attributo di \_ input attr è un carattere hiragana, Katakana o alfanumerico.</span><span class="sxs-lookup"><span data-stu-id="a9033-134">In Japanese, any unconverted character having the ATTR\_INPUT attribute is a hiragana, katakana, or alphanumeric character.</span></span> <span data-ttu-id="a9033-135">In coreano questo attributo rappresenta un carattere hangul non ancora convertito nell'IME.</span><span class="sxs-lookup"><span data-stu-id="a9033-135">In Korean, this attribute represents a Hangul character that the IME has not yet converted.</span></span> <span data-ttu-id="a9033-136">In cinese tradizionale e cinese semplificato, ogni IME può limitare il proprio carattere all'interno di un intervallo.</span><span class="sxs-lookup"><span data-stu-id="a9033-136">In Traditional Chinese and Simplified Chinese, each IME can limit its character within some range.</span></span>

<span data-ttu-id="a9033-137">Le informazioni sulla clausola incluse nello stato della stringa di composizione sono una matrice di valori a 32 bit che specifica le posizioni delle clausole nella stringa di composizione.</span><span class="sxs-lookup"><span data-stu-id="a9033-137">The clause information included in the composition string status is an array of 32-bit values that specifies the positions of the clauses in the composition string.</span></span> <span data-ttu-id="a9033-138">La matrice include un valore per ogni clausola e un valore finale che specifica la lunghezza della stringa completa.</span><span class="sxs-lookup"><span data-stu-id="a9033-138">The array includes one value for each clause and a final value that specifies the length of the full string.</span></span> <span data-ttu-id="a9033-139">Ogni valore nella matrice specifica l'offset, in byte, dall'inizio della stringa alla clausola.</span><span class="sxs-lookup"><span data-stu-id="a9033-139">Each value in the array specifies the offset, in bytes, from the beginning of the string to the clause.</span></span> <span data-ttu-id="a9033-140">Il primo valore è sempre 0 perché la prima clausola inizia sempre dall'inizio della stringa.</span><span class="sxs-lookup"><span data-stu-id="a9033-140">The first value is always 0 because the first clause always starts at the beginning of the string.</span></span> <span data-ttu-id="a9033-141">Se, ad esempio, in una stringa sono presenti due clausole, le informazioni sulla clausola hanno tre valori: il primo valore è 0, il secondo valore è l'offset della seconda clausola e il terzo valore corrisponde alla lunghezza della stringa.</span><span class="sxs-lookup"><span data-stu-id="a9033-141">For example, if a string has two clauses, the clause information has three values: the first value is 0, the second value is the offset of the second clause, and the third value is the length of the string.</span></span> <span data-ttu-id="a9033-142">Per Unicode, la posizione di una clausola viene conteggiata in caratteri Unicode e la lunghezza di una stringa è la dimensione dei caratteri Unicode.</span><span class="sxs-lookup"><span data-stu-id="a9033-142">For Unicode, the position of a clause is counted in Unicode characters, and the length of a string is the size in Unicode characters.</span></span>

<span data-ttu-id="a9033-143">Le informazioni di tipizzazione incluse nello stato della stringa di composizione sono una stringa di caratteri con terminazione null che rappresenta i caratteri immessi dall'utente sulla tastiera.</span><span class="sxs-lookup"><span data-stu-id="a9033-143">The typing information included in the composition string status is a null-terminated character string representing the characters that the user enters at the keyboard.</span></span>

<span data-ttu-id="a9033-144">La posizione del cursore inclusa nello stato della stringa di composizione è un valore che indica la posizione del cursore rispetto ai caratteri nella stringa di composizione.</span><span class="sxs-lookup"><span data-stu-id="a9033-144">The cursor position included in the composition string status is a value indicating the position of the cursor relative to the characters in the composition string.</span></span> <span data-ttu-id="a9033-145">Il valore è l'offset, in byte, dall'inizio della stringa.</span><span class="sxs-lookup"><span data-stu-id="a9033-145">The value is the offset, in bytes, from the beginning of the string.</span></span> <span data-ttu-id="a9033-146">Se questo valore è 0, il cursore si trova immediatamente prima del primo carattere nella stringa.</span><span class="sxs-lookup"><span data-stu-id="a9033-146">If this value is 0, the cursor is immediately before the first character in the string.</span></span> <span data-ttu-id="a9033-147">Se il valore è uguale alla lunghezza della stringa, il cursore si trova immediatamente dopo l'ultimo carattere.</span><span class="sxs-lookup"><span data-stu-id="a9033-147">If the value is equal to the length of the string, the cursor is immediately after the last character.</span></span> <span data-ttu-id="a9033-148">Se il valore è 1, il cursore non è presente.</span><span class="sxs-lookup"><span data-stu-id="a9033-148">If the value is 1, the cursor is not present.</span></span> <span data-ttu-id="a9033-149">Per Unicode, la posizione e la lunghezza sono misurate in caratteri Unicode.</span><span class="sxs-lookup"><span data-stu-id="a9033-149">For Unicode, both position and length are measured in Unicode characters.</span></span>

<span data-ttu-id="a9033-150">L'applicazione può impostare la stringa di composizione o gli elementi dello stato di composizione utilizzando la funzione [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) .</span><span class="sxs-lookup"><span data-stu-id="a9033-150">Your application can set the composition string or elements of the composition status by using the [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) function.</span></span> <span data-ttu-id="a9033-151">Per assicurarsi che la finestra di composizione aggiorni l'aspetto in base a queste modifiche, la funzione consente all'applicazione di inviare un messaggio di notifica alla finestra.</span><span class="sxs-lookup"><span data-stu-id="a9033-151">To ensure that the composition window updates its appearance based on these changes, the function allows the application to send a notification message to the window.</span></span> <span data-ttu-id="a9033-152">Le applicazioni che impostano una combinazione di elementi di stato composizione in genere disabilitano le notifiche per tutte le chiamate, tranne l'ultima, in modo che venga generato un solo messaggio di notifica per la finestra di composizione.</span><span class="sxs-lookup"><span data-stu-id="a9033-152">Applications that set a combination of composition status elements typically disable notifications for all but the last call to this function so that only one notification message is generated for the composition window.</span></span>

<span data-ttu-id="a9033-153">Infine, il controllo di modifica supporta due messaggi per modificare la gestione delle stringhe di composizione dall'IME.</span><span class="sxs-lookup"><span data-stu-id="a9033-153">Finally, the edit control supports two messages for changing the handling of composition strings by the IME.</span></span> <span data-ttu-id="a9033-154">Per altre informazioni, vedere [**em \_ GETIMESTATUS**](../controls/em-getimestatus.md) e [**em \_ SETIMESTATUS**](../controls/em-setimestatus.md).</span><span class="sxs-lookup"><span data-stu-id="a9033-154">For more information, see [**EM\_GETIMESTATUS**](../controls/em-getimestatus.md) and [**EM\_SETIMESTATUS**](../controls/em-setimestatus.md).</span></span> <span data-ttu-id="a9033-155">Per ulteriori informazioni sul controllo di modifica, vedere [modifica del controllo](../controls/edit-controls.md).</span><span class="sxs-lookup"><span data-stu-id="a9033-155">For more information on the edit control, see [Edit Control](../controls/edit-controls.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="a9033-156">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="a9033-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a9033-157">Informazioni su Gestione metodi di input</span><span class="sxs-lookup"><span data-stu-id="a9033-157">About Input Method Manager</span></span>](about-input-method-manager.md)
</dt> </dl>

 

 
