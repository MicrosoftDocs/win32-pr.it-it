---
description: Surrogati e caratteri supplementari
ms.assetid: 0dea39e2-a2b4-47fc-b44a-56af8ba1e346
title: Surrogati e caratteri supplementari
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c8d6b738955c8b8de4f6cb0ae43c78f86752a928
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106306602"
---
# <a name="surrogates-and-supplementary-characters"></a><span data-ttu-id="ea4cd-103">Surrogati e caratteri supplementari</span><span class="sxs-lookup"><span data-stu-id="ea4cd-103">Surrogates and Supplementary Characters</span></span>

<span data-ttu-id="ea4cd-104">Le applicazioni Windows usano in genere UTF-16 per rappresentare i dati di tipo carattere [Unicode](unicode.md) .</span><span class="sxs-lookup"><span data-stu-id="ea4cd-104">Windows applications normally use UTF-16 to represent [Unicode](unicode.md) character data.</span></span> <span data-ttu-id="ea4cd-105">L'uso di 16 bit consente la rappresentazione diretta di 65.536 caratteri univoci, ma questo piano multilingue di base (BMP) non è abbastanza sufficiente per coprire tutti i simboli usati nelle lingue umane.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-105">The use of 16 bits allows direct representation of 65,536 unique characters, but this Basic Multilingual Plane (BMP) is not nearly enough to cover all the symbols used in human languages.</span></span> <span data-ttu-id="ea4cd-106">La versione Unicode 4,1 include oltre 97.000 caratteri, con oltre 70.000 caratteri solo per il cinese.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-106">Unicode version 4.1 includes over 97,000 characters, with over 70,000 characters for Chinese alone.</span></span>

<span data-ttu-id="ea4cd-107">Lo standard Unicode ha stabilito 16 "piani" aggiuntivi di caratteri, ognuno con le stesse dimensioni del BMP.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-107">The Unicode standard has established 16 additional "planes" of characters, each the same size as the BMP.</span></span> <span data-ttu-id="ea4cd-108">Naturalmente, la maggior parte dei punti di codice oltre al BMP non dispone ancora di caratteri assegnati, ma la definizione dei piani fornisce a Unicode la possibilità di definire 1.114.112 caratteri (ovvero, 2 ¹ ⁶ \* 17 caratteri) nell'intervallo di punti di codice compreso tra u + 0000 e u + 10FFFF.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-108">Naturally, most code points beyond the BMP do not yet have characters assigned to them, but definition of the planes gives Unicode the potential to define 1,114,112 characters (that is, 2¹⁶ \* 17 characters) within the code point range U+0000 to U+10FFFF.</span></span> <span data-ttu-id="ea4cd-109">Per UTF-16 per rappresentare questo set di caratteri più ampio, lo standard Unicode definisce "caratteri supplementari".</span><span class="sxs-lookup"><span data-stu-id="ea4cd-109">For UTF-16 to represent this larger set of characters, the Unicode Standard defines "supplementary characters".</span></span>

## <a name="about-supplementary-characters"></a><span data-ttu-id="ea4cd-110">Informazioni sui caratteri supplementari</span><span class="sxs-lookup"><span data-stu-id="ea4cd-110">About Supplementary Characters</span></span>

<span data-ttu-id="ea4cd-111">Un carattere supplementare è un carattere che si trova oltre il BMP e un "surrogato" è un valore di codice UTF-16.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-111">A supplementary character is a character located beyond the BMP, and a "surrogate" is a UTF-16 code value.</span></span> <span data-ttu-id="ea4cd-112">Per UTF-16, è necessaria una "coppia di surrogati" per rappresentare un singolo carattere supplementare.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-112">For UTF-16, a "surrogate pair" is required to represent a single supplementary character.</span></span> <span data-ttu-id="ea4cd-113">Il primo surrogato (alto) è un valore di codice a 16 bit compreso nell'intervallo tra U + D800 e U + DBFF.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-113">The first (high) surrogate is a 16-bit code value in the range U+D800 to U+DBFF.</span></span> <span data-ttu-id="ea4cd-114">Il secondo surrogato (basso) è un valore di codice a 16 bit compreso nell'intervallo tra U + DC00 e U + DFFF.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-114">The second (low) surrogate is a 16-bit code value in the range U+DC00 to U+DFFF.</span></span> <span data-ttu-id="ea4cd-115">Utilizzando il meccanismo surrogato, UTF-16 può supportare tutti 1.114.112 caratteri Unicode potenziali.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-115">Using the surrogate mechanism, UTF-16 can support all 1,114,112 potential Unicode characters.</span></span> <span data-ttu-id="ea4cd-116">Per ulteriori informazioni sui caratteri supplementari, sui surrogati e sulle coppie di surrogati, vedere [lo standard Unicode](https://www.unicode.org/standard/standard.html).</span><span class="sxs-lookup"><span data-stu-id="ea4cd-116">For more details about supplementary characters, surrogates, and surrogate pairs, refer to [The Unicode Standard](https://www.unicode.org/standard/standard.html).</span></span>

> [!Note]  
> <span data-ttu-id="ea4cd-117">Windows 2000 introduce il supporto per l'input di base, l'output e l'ordinamento semplice dei caratteri supplementari.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-117">Windows 2000 introduces support for basic input, output, and simple sorting of supplementary characters.</span></span> <span data-ttu-id="ea4cd-118">Tuttavia, non tutti i componenti di sistema sono compatibili con caratteri supplementari.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-118">However, not all system components are compatible with supplementary characters.</span></span>

 

<span data-ttu-id="ea4cd-119">Il sistema operativo supporta caratteri supplementari nei modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="ea4cd-119">The operating system supports supplementary characters in the following ways:</span></span>

-   <span data-ttu-id="ea4cd-120">Il formato 12 della tabella CMAP del tipo di carattere OpenType supporta direttamente il codice carattere a 4 byte.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-120">Format 12 of the OpenType font cmap table directly supports the 4-byte character code.</span></span> <span data-ttu-id="ea4cd-121">Per ulteriori informazioni, vedere la [specifica del tipo di carattere OpenType](/typography/opentype/spec/).</span><span class="sxs-lookup"><span data-stu-id="ea4cd-121">For more information, see the [OpenType font specification](/typography/opentype/spec/).</span></span>
-   <span data-ttu-id="ea4cd-122">Windows supporta [IME (Input Method Editor)](../dxtecharts/installing-and-using-input-method-editors.md)abilitati per surrogati.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-122">Windows supports surrogate-enabled [input method editors (IMEs)](../dxtecharts/installing-and-using-input-method-editors.md).</span></span>
-   <span data-ttu-id="ea4cd-123">L'API [Windows GDI](../gdi/windows-gdi.md) supporta il formato 12 tabelle cmap nei tipi di carattere, in modo che i surrogati possano essere visualizzati correttamente.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-123">The [Windows GDI](../gdi/windows-gdi.md) API supports format 12 cmap tables in fonts so that surrogates can be displayed correctly.</span></span>
-   <span data-ttu-id="ea4cd-124">L'API [Uniscribe](uniscribe.md) supporta caratteri supplementari.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-124">The [Uniscribe](uniscribe.md) API supports supplementary characters.</span></span>
-   <span data-ttu-id="ea4cd-125">I [controlli Windows](../controls/window-controls.md), tra cui [modifica](../controls/edit-controls.md) e [Rich Edit](../controls/rich-edit-controls.md), supportano i caratteri supplementari.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-125">[Windows controls](../controls/window-controls.md), including [Edit](../controls/edit-controls.md) and [Rich Edit](../controls/rich-edit-controls.md), support supplementary characters.</span></span>
-   <span data-ttu-id="ea4cd-126">Il motore HTML supporta le pagine HTML che includono caratteri supplementari per la visualizzazione, la modifica (tramite Outlook Express) e l'invio di form.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-126">The HTML engine supports HTML pages that include supplementary characters for display, editing (through Outlook Express), and forms submission.</span></span>
-   <span data-ttu-id="ea4cd-127">La tabella di ordinamento del sistema operativo supporta caratteri supplementari.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-127">The operating system sorting table supports supplementary characters.</span></span>

## <a name="general-guidelines-for-software-development-using-supplementary-characters"></a><span data-ttu-id="ea4cd-128">Linee guida generali per lo sviluppo di software con caratteri supplementari</span><span class="sxs-lookup"><span data-stu-id="ea4cd-128">General Guidelines for Software Development Using Supplementary Characters</span></span>

<span data-ttu-id="ea4cd-129">UTF-16 gestisce i caratteri supplementari come coppie di surrogati.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-129">UTF-16 handles supplementary characters as surrogate pairs.</span></span> <span data-ttu-id="ea4cd-130">Il sistema operativo elabora una coppia di surrogati in modo analogo al modo in cui elabora i [Contrassegni senza spaziatura](using-nonspacing-characters-and-diacritics.md).</span><span class="sxs-lookup"><span data-stu-id="ea4cd-130">The operating system processes a surrogate pair similarly to the way it processes [nonspacing marks](using-nonspacing-characters-and-diacritics.md).</span></span> <span data-ttu-id="ea4cd-131">Al momento della visualizzazione, la coppia di surrogati viene visualizzata come un glifo per mezzo di Uniscribe, come previsto dallo standard Unicode.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-131">At display time, the surrogate pair displays as one glyph by means of Uniscribe, as prescribed by the Unicode Standard.</span></span>

<span data-ttu-id="ea4cd-132">In Windows Vista sono state introdotte tre nuove macro che consentono di identificare i surrogati e le coppie di surrogati nelle stringhe UTF-16.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-132">Windows Vista introduces three new macros to help identify surrogates and surrogate pairs in UTF-16 strings.</span></span> <span data-ttu-id="ea4cd-133">Si tratta di un surrogato [**\_ alto \_**](/windows/win32/api/Winnls/nf-winnls-is_high_surrogate), [**è un \_ \_ surrogato basso**](/windows/win32/api/Winnls/nf-winnls-is_low_surrogate)ed [**è una \_ \_ coppia di surrogati**](/windows/win32/api/Winnls/nf-winnls-is_surrogate_pair).</span><span class="sxs-lookup"><span data-stu-id="ea4cd-133">These are [**IS\_HIGH\_SURROGATE**](/windows/win32/api/Winnls/nf-winnls-is_high_surrogate), [**IS\_LOW\_SURROGATE**](/windows/win32/api/Winnls/nf-winnls-is_low_surrogate), and [**IS\_SURROGATE\_PAIR**](/windows/win32/api/Winnls/nf-winnls-is_surrogate_pair).</span></span>

<span data-ttu-id="ea4cd-134">Le applicazioni supportano automaticamente i caratteri supplementari se supportano Unicode e utilizzano i controlli di sistema e le funzioni API standard, ad esempio [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) e [**DrawText**](/windows/win32/api/winuser/nf-winuser-drawtext).</span><span class="sxs-lookup"><span data-stu-id="ea4cd-134">Applications automatically support supplementary characters if they support Unicode and use system controls and standard API functions, such as [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) and [**DrawText**](/windows/win32/api/winuser/nf-winuser-drawtext).</span></span> <span data-ttu-id="ea4cd-135">Quindi, se l'applicazione usa controlli di sistema standard o usa chiamate di tipo [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta)generali per la visualizzazione, i caratteri supplementari dovrebbero funzionare senza alcuna codifica speciale.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-135">Thus, if your application uses standard system controls or uses general [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta)-type calls to display, supplementary characters should work without any special coding.</span></span>

<span data-ttu-id="ea4cd-136">Le applicazioni che implementano il proprio supporto di modifica elaborando le posizioni dei glifi in modo personalizzato possono usare Uniscribe per tutta l'elaborazione del testo.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-136">Applications that implement their own editing support by working out glyph positions in a customized way can use Uniscribe for all text processing.</span></span> <span data-ttu-id="ea4cd-137">Uniscribe dispone di funzioni separate per gestire l'elaborazione di script complessi, ad esempio la visualizzazione di testo, l'hit test e lo spostamento del cursore.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-137">Uniscribe has separate functions to deal with complex script processing, such as text display, hit testing, and cursor movement.</span></span> <span data-ttu-id="ea4cd-138">Per ottenere queste funzionalità avanzate, un'applicazione deve chiamare le funzioni Uniscribe in modo specifico.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-138">An application must call the Uniscribe functions specifically to get these advanced features.</span></span> <span data-ttu-id="ea4cd-139">Si noti che le applicazioni che usano le funzioni Uniscribe sono completamente multilingue, ma ciò impone una riduzione delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-139">Note that applications using the Uniscribe functions are fully multilingual, but this imposes a performance penalty.</span></span> <span data-ttu-id="ea4cd-140">Pertanto, alcune applicazioni devono eseguire la propria elaborazione dei caratteri supplementari.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-140">Thus some applications should do their own processing of supplementary characters.</span></span>

<span data-ttu-id="ea4cd-141">Poiché il meccanismo surrogato per rappresentare caratteri supplementari è ben definito, l'applicazione può includere il codice per gestire l'elaborazione del testo surrogato UTF-16.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-141">Because the surrogate mechanism to represent supplementary characters is well-defined, your application can include code to handle UTF-16 surrogate text processing.</span></span> <span data-ttu-id="ea4cd-142">Quando l'applicazione rileva un valore UTF-16 separato dall'intervallo di surrogati riservato inferiore (un surrogato basso) o dall'intervallo di surrogati riservato superiore (un surrogato alto), il valore deve essere una metà di una coppia di surrogati.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-142">When the application encounters a separated UTF-16 value from either the lower reserved surrogate range (a low surrogate) or the upper reserved surrogate range (a high surrogate), the value must be one half of a surrogate pair.</span></span> <span data-ttu-id="ea4cd-143">In questo modo, l'applicazione può rilevare una coppia di surrogati eseguendo semplici verifiche degli intervalli.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-143">Thus, the application can detect a surrogate pair by doing simple range checking.</span></span> <span data-ttu-id="ea4cd-144">Se viene rilevato un valore UTF-16 nell'intervallo inferiore o superiore, è necessario tenere traccia della larghezza precedente o diretta di 1 16 bit per ottenere il resto del carattere.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-144">If it encounters a UTF-16 value in the lower or upper range, it must track backward or forward one 16-bit width to get the rest of the character.</span></span> <span data-ttu-id="ea4cd-145">Quando si scrive l'applicazione, tenere presente che [**CharNext**](/windows/win32/api/winuser/nf-winuser-charnexta) e [**CharPrev**](/windows/win32/api/winuser/nf-winuser-charpreva) si spostano da punti di codice a 16 bit, non da coppie di surrogati.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-145">When writing your application, keep in mind that [**CharNext**](/windows/win32/api/winuser/nf-winuser-charnexta) and [**CharPrev**](/windows/win32/api/winuser/nf-winuser-charpreva) move by 16-bit code points, not by surrogate pairs.</span></span>

> [!Note]  
> <span data-ttu-id="ea4cd-146">I punti di codice surrogati autonomi hanno un surrogato alto senza un surrogato basso adiacente o viceversa.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-146">Standalone surrogate code points have either a high surrogate without an adjacent low surrogate, or vice versa.</span></span> <span data-ttu-id="ea4cd-147">Questi punti di codice non sono validi e non sono supportati.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-147">These code points are invalid and are not supported.</span></span> <span data-ttu-id="ea4cd-148">Il loro comportamento non è definito.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-148">Their behavior is undefined.</span></span>

 

<span data-ttu-id="ea4cd-149">Se si sviluppa un tipo di carattere o un provider IME, si noti che i sistemi operativi precedenti a Windows XP disabilitano il supporto dei caratteri supplementari per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-149">If you are developing a font or IME provider, note that pre-Windows XP operating systems disable supplementary character support by default.</span></span> <span data-ttu-id="ea4cd-150">Per impostazione predefinita, in Windows XP e versioni successive sono abilitati caratteri supplementari.</span><span class="sxs-lookup"><span data-stu-id="ea4cd-150">Windows XP and later enable supplementary characters by default.</span></span> <span data-ttu-id="ea4cd-151">Se si specifica un tipo di carattere e un pacchetto IME per i quali sono richiesti caratteri supplementari, l'applicazione deve impostare i seguenti valori del registro di sistema:</span><span class="sxs-lookup"><span data-stu-id="ea4cd-151">If you provide a font and IME package that requires supplementary characters, your application must set the following registry values:</span></span>


```C++
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\LanguagePack]
SURROGATE=(REG_DWORD)0x00000002

[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\International\Scripts\42]
IEFixedFontName=[Surrogate Font Face Name]
IEPropFontName=[Surrogate Font Face Name]
```



## <a name="related-topics"></a><span data-ttu-id="ea4cd-152">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="ea4cd-152">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ea4cd-153">Character Sets</span><span class="sxs-lookup"><span data-stu-id="ea4cd-153">Character Sets</span></span>](character-sets.md)
</dt> </dl>

 

 
