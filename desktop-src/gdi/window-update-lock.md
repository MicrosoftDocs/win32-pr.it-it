---
description: Un blocco di aggiornamento della finestra è una sospensione temporanea del disegno in una finestra.
ms.assetid: 92b1ba04-ff79-4a37-9633-99412cdafe95
title: Blocco aggiornamento finestra
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4897915020134387947c7a77009c4bdbd63cfdd6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104227137"
---
# <a name="window-update-lock"></a><span data-ttu-id="84bfc-103">Blocco aggiornamento finestra</span><span class="sxs-lookup"><span data-stu-id="84bfc-103">Window Update Lock</span></span>

<span data-ttu-id="84bfc-104">Un *blocco di aggiornamento della finestra* è una sospensione temporanea del disegno in una finestra.</span><span class="sxs-lookup"><span data-stu-id="84bfc-104">A *window update lock* is a temporary suspension of drawing in a window.</span></span> <span data-ttu-id="84bfc-105">Il sistema utilizza il blocco per impedire ad altre finestre di disegnare sul rettangolo di rilevamento ogni volta che l'utente sposta o ridimensiona una finestra.</span><span class="sxs-lookup"><span data-stu-id="84bfc-105">The system uses the lock to prevent other windows from drawing over the tracking rectangle whenever the user moves or sizes a window.</span></span> <span data-ttu-id="84bfc-106">Le applicazioni possono utilizzare il blocco per impedire il disegno se eseguono operazioni di ridimensionamento o di modifica simili con le proprie finestre.</span><span class="sxs-lookup"><span data-stu-id="84bfc-106">Applications can use the lock to prevent drawing if they carry out similar moving or sizing operations with their own windows.</span></span>

<span data-ttu-id="84bfc-107">Un'applicazione usa la funzione [**LockWindowUpdate**](/windows/desktop/api/Winuser/nf-winuser-lockwindowupdate) per impostare o cancellare un blocco di aggiornamento della finestra, specificando la finestra da bloccare.</span><span class="sxs-lookup"><span data-stu-id="84bfc-107">An application uses the [**LockWindowUpdate**](/windows/desktop/api/Winuser/nf-winuser-lockwindowupdate) function to set or clear a window update lock, specifying the window to lock.</span></span> <span data-ttu-id="84bfc-108">Il blocco si applica alla finestra specificata e a tutte le relative finestre figlio.</span><span class="sxs-lookup"><span data-stu-id="84bfc-108">The lock applies to the specified window and all of its child windows.</span></span> <span data-ttu-id="84bfc-109">Quando il blocco viene impostato, le funzioni [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) e [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) restituiscono un contesto di dispositivo di visualizzazione con un'area visibile vuota.</span><span class="sxs-lookup"><span data-stu-id="84bfc-109">When the lock is set, the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) and [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) functions return a display device context with a visible region that is empty.</span></span> <span data-ttu-id="84bfc-110">Dato questo, l'applicazione può continuare a creare nella finestra, ma tutto l'output viene troncato.</span><span class="sxs-lookup"><span data-stu-id="84bfc-110">Given this, the application can continue to draw in the window, but all output is clipped.</span></span> <span data-ttu-id="84bfc-111">Il blocco viene mantenuto finché l'applicazione non la cancella chiamando **LockWindowUpdate**, specificando **null** per la finestra.</span><span class="sxs-lookup"><span data-stu-id="84bfc-111">The lock persists until the application clears it by calling **LockWindowUpdate**, specifying **NULL** for the window.</span></span> <span data-ttu-id="84bfc-112">Sebbene **LockWindowUpdate** forza l'area visibile di una finestra come vuota, la funzione non rende invisibile la finestra specificata e non cancella il \_ bit di stile visibile WS.</span><span class="sxs-lookup"><span data-stu-id="84bfc-112">Although **LockWindowUpdate** forces a window's visible region to be empty, the function does not make the specified window invisible and does not clear the WS\_VISIBLE style bit.</span></span>

<span data-ttu-id="84bfc-113">Dopo l'impostazione del blocco, l'applicazione può usare la funzione [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) con il valore DCX \_ LOCKWINDOWUPDATE per recuperare un contesto di periferica di visualizzazione da estrarre sulla finestra bloccata.</span><span class="sxs-lookup"><span data-stu-id="84bfc-113">After the lock is set, the application can use the [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) function, with the DCX\_LOCKWINDOWUPDATE value, to retrieve a display device context to draw over the locked window.</span></span> <span data-ttu-id="84bfc-114">Ciò consente all'applicazione di creare un rettangolo di rilevamento durante l'elaborazione dei messaggi della tastiera o del mouse.</span><span class="sxs-lookup"><span data-stu-id="84bfc-114">This allows the application to draw a tracking rectangle when processing keyboard or mouse messages.</span></span> <span data-ttu-id="84bfc-115">Il sistema utilizza questo metodo quando l'utente sposta e ridimensiona le finestre.</span><span class="sxs-lookup"><span data-stu-id="84bfc-115">The system uses this method when the user moves and sizes windows.</span></span> <span data-ttu-id="84bfc-116">**GetDCEx** Recupera il contesto del dispositivo di visualizzazione dalla cache del contesto del dispositivo di visualizzazione, in modo che l'applicazione debba rilasciare il contesto di dispositivo appena possibile dopo il disegno.</span><span class="sxs-lookup"><span data-stu-id="84bfc-116">**GetDCEx** retrieves the display device context from the display device context cache, so the application must release the device context as soon as possible after drawing.</span></span>

<span data-ttu-id="84bfc-117">Quando viene impostato un blocco di aggiornamento della finestra, il sistema crea un rettangolo di delimitazione accumulato per ogni finestra bloccata.</span><span class="sxs-lookup"><span data-stu-id="84bfc-117">While a window update lock is set, the system creates an accumulated bounding rectangle for each locked window.</span></span> <span data-ttu-id="84bfc-118">Quando il blocco viene cancellato, il sistema utilizza questo rettangolo di delimitazione per impostare l'area di aggiornamento per la finestra e le relative finestre figlio, forzando un messaggio di [**\_ disegno WM**](wm-paint.md) finale.</span><span class="sxs-lookup"><span data-stu-id="84bfc-118">When the lock is cleared, the system uses this bounding rectangle to set the update region for the window and its child windows, forcing an eventual [**WM\_PAINT**](wm-paint.md) message.</span></span> <span data-ttu-id="84bfc-119">Se il rettangolo di delimitazione accumulato è vuoto, ovvero se non si è verificato alcun disegno durante l'impostazione del blocco, l'area di aggiornamento non viene impostata.</span><span class="sxs-lookup"><span data-stu-id="84bfc-119">If the accumulated bounding rectangle is empty (that is, if no drawing has occurred while the lock was set), the update region is not set.</span></span>

 

 



