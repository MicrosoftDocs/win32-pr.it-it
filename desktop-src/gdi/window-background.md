---
description: Lo sfondo della finestra è il colore o il motivo utilizzato per riempire l'area client prima che venga avviata la creazione di una finestra.
ms.assetid: d0613f9b-e65b-4de2-887d-2b642d36b22d
title: Sfondo finestra
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 32d567b0bdc38866cd9332ff8ed399bfb23f53c8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103880965"
---
# <a name="window-background"></a><span data-ttu-id="3b75b-103">Sfondo finestra</span><span class="sxs-lookup"><span data-stu-id="3b75b-103">Window Background</span></span>

<span data-ttu-id="3b75b-104">Lo sfondo della finestra è il colore o il motivo utilizzato per riempire l'area client prima che venga avviata la creazione di una finestra.</span><span class="sxs-lookup"><span data-stu-id="3b75b-104">The window background is the color or pattern used to fill the client area before a window begins drawing.</span></span> <span data-ttu-id="3b75b-105">Lo sfondo della finestra copre tutto ciò che era sullo schermo prima che la finestra venisse spostata, cancellando le immagini esistenti e impedendo che il nuovo output dell'applicazione venisse misto con informazioni non correlate.</span><span class="sxs-lookup"><span data-stu-id="3b75b-105">The window background covers whatever was on the screen before the window was moved there, erasing existing images and preventing the application's new output from being mixed with unrelated information.</span></span>

<span data-ttu-id="3b75b-106">Il sistema dipinge lo sfondo di una finestra o fornisce alla finestra la possibilità di farlo inviando un messaggio [**WM \_ ERASEBKGND**](../winmsg/wm-erasebkgnd.md) quando l'applicazione chiama [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint).</span><span class="sxs-lookup"><span data-stu-id="3b75b-106">The system paints the background for a window or gives the window the opportunity to do so by sending it a [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md) message when the application calls [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint).</span></span> <span data-ttu-id="3b75b-107">Se un'applicazione non elabora il messaggio ma lo passa a [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca), il sistema cancella lo sfondo riempiendo il modello nel pennello di sfondo specificato dalla classe della finestra.</span><span class="sxs-lookup"><span data-stu-id="3b75b-107">If an application does not process the message but passes it to [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca), the system erases the background by filling it with the pattern in the background brush specified by the window's class.</span></span> <span data-ttu-id="3b75b-108">Se il pennello non è valido o la classe non dispone di un pennello per lo sfondo, il sistema imposta il membro **fErase** nella struttura [**PAINTSTRUCT**](/windows/win32/api/winuser/ns-winuser-paintstruct) restituita da **BeginPaint** , ma non esegue altre azioni.</span><span class="sxs-lookup"><span data-stu-id="3b75b-108">If the brush is not valid or the class has no background brush, the system sets the **fErase** member in the [**PAINTSTRUCT**](/windows/win32/api/winuser/ns-winuser-paintstruct) structure that **BeginPaint** returns, but carries out no other action.</span></span> <span data-ttu-id="3b75b-109">L'applicazione ha quindi una seconda possibilità di creare lo sfondo della finestra, se necessario.</span><span class="sxs-lookup"><span data-stu-id="3b75b-109">The application then has a second chance to draw the window background, if necessary.</span></span>

<span data-ttu-id="3b75b-110">Se elabora [**WM \_ ERASEBKGND**](../winmsg/wm-erasebkgnd.md), l'applicazione deve usare il parametro *wParam* del messaggio per creare lo sfondo.</span><span class="sxs-lookup"><span data-stu-id="3b75b-110">If it processes [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md), the application should use the message's *wParam* parameter to draw the background.</span></span> <span data-ttu-id="3b75b-111">Questo parametro contiene un handle per il contesto del dispositivo di visualizzazione per la finestra.</span><span class="sxs-lookup"><span data-stu-id="3b75b-111">This parameter contains a handle to the display device context for the window.</span></span> <span data-ttu-id="3b75b-112">Dopo aver disegnato lo sfondo, l'applicazione deve restituire un valore diverso da zero.</span><span class="sxs-lookup"><span data-stu-id="3b75b-112">After drawing the background, the application should return a nonzero value.</span></span> <span data-ttu-id="3b75b-113">Ciò garantisce che [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) non imposti erroneamente il membro **FErase** della struttura [**PAINTSTRUCT**](/windows/win32/api/winuser/ns-winuser-paintstruct) su un valore diverso da zero (che indica che lo sfondo deve essere cancellato) quando l'applicazione elabora il messaggio di [**\_ disegno WM**](wm-paint.md) successivo.</span><span class="sxs-lookup"><span data-stu-id="3b75b-113">This ensures that [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) does not erroneously set the **fErase** member of the [**PAINTSTRUCT**](/windows/win32/api/winuser/ns-winuser-paintstruct) structure to a nonzero value (indicating the background should be erased) when the application processes the subsequent [**WM\_PAINT**](wm-paint.md) message.</span></span>

<span data-ttu-id="3b75b-114">Un'applicazione può definire un pennello per lo sfondo di una classe assegnando un handle di pennello o un valore di colore di sistema al membro **hbrBackground** della struttura [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) quando si registra la classe con la funzione [**registerClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) .</span><span class="sxs-lookup"><span data-stu-id="3b75b-114">An application can define a class background brush by assigning a brush handle or a system color value to the **hbrBackground** member of the [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure when registering the class with the [**RegisterClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) function.</span></span> <span data-ttu-id="3b75b-115">La funzione [**GetStockObject**](/windows/desktop/api/Wingdi/nf-wingdi-getstockobject) o [**CreateSolidBrush**](/windows/desktop/api/Wingdi/nf-wingdi-createsolidbrush) può essere utilizzata per creare un handle del pennello.</span><span class="sxs-lookup"><span data-stu-id="3b75b-115">The [**GetStockObject**](/windows/desktop/api/Wingdi/nf-wingdi-getstockobject) or [**CreateSolidBrush**](/windows/desktop/api/Wingdi/nf-wingdi-createsolidbrush) function can be used to create a brush handle.</span></span> <span data-ttu-id="3b75b-116">Un valore di colore di sistema può essere uno dei valori definiti per la funzione [**SetSysColors**](/windows/win32/api/winuser/nf-winuser-setsyscolors) .</span><span class="sxs-lookup"><span data-stu-id="3b75b-116">A system color value can be one of those defined for the [**SetSysColors**](/windows/win32/api/winuser/nf-winuser-setsyscolors) function.</span></span> <span data-ttu-id="3b75b-117">(Il valore deve essere aumentato di uno prima che venga assegnato al membro).</span><span class="sxs-lookup"><span data-stu-id="3b75b-117">(The value must be increased by one before it is assigned to the member.)</span></span>

<span data-ttu-id="3b75b-118">Un'applicazione può elaborare il messaggio [**WM \_ ERASEBKGND**](../winmsg/wm-erasebkgnd.md) anche se è definito un pennello per lo sfondo di una classe.</span><span class="sxs-lookup"><span data-stu-id="3b75b-118">An application can process the [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md) message even though a class background brush is defined.</span></span> <span data-ttu-id="3b75b-119">Questo è tipico nelle applicazioni che consentono all'utente di modificare il colore o il modello di sfondo della finestra per una finestra specificata senza influire sulle altre finestre della classe.</span><span class="sxs-lookup"><span data-stu-id="3b75b-119">This is typical in applications that enable the user to change the window background color or pattern for a specified window without affecting other windows in the class.</span></span> <span data-ttu-id="3b75b-120">In questi casi, l'applicazione non deve passare il messaggio a [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span><span class="sxs-lookup"><span data-stu-id="3b75b-120">In such cases, the application must not pass the message to [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span></span>

<span data-ttu-id="3b75b-121">Non è necessario che un'applicazione allineati i pennelli, perché il sistema disegna il pennello usando l'origine della finestra come punto di riferimento.</span><span class="sxs-lookup"><span data-stu-id="3b75b-121">It is not necessary for an application to align brushes, because the system draws the brush using the window origin as the point of reference.</span></span> <span data-ttu-id="3b75b-122">Dato questo, l'utente può spostare la finestra senza influire sull'allineamento dei pennelli del pattern.</span><span class="sxs-lookup"><span data-stu-id="3b75b-122">Given this, the user can move the window without affecting the alignment of pattern brushes.</span></span>

 

 
