---
description: Utilizzando un contesto di dispositivo della classe, un'applicazione può utilizzare un unico contesto di dispositivo di visualizzazione per ogni finestra appartenente a una classe specificata.
ms.assetid: fc76abbf-68da-47f2-8145-4fad806297b4
title: Classe Visualizza contesti di dispositivo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5e5a4cc0268d948e1a6f95050409698217e3f13e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104978783"
---
# <a name="class-display-device-contexts"></a><span data-ttu-id="4f9f7-103">Classe Visualizza contesti di dispositivo</span><span class="sxs-lookup"><span data-stu-id="4f9f7-103">Class Display Device Contexts</span></span>

<span data-ttu-id="4f9f7-104">Utilizzando un *contesto di dispositivo della classe*, un'applicazione può utilizzare un unico contesto di dispositivo di visualizzazione per ogni finestra appartenente a una classe specificata.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-104">By using a *class device context*, an application can use a single display device context for every window belonging to a specified class.</span></span> <span data-ttu-id="4f9f7-105">I contesti di dispositivo di classe vengono spesso usati con le finestre di controllo disegnate usando gli stessi valori di attributo.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-105">Class device contexts are often used with control windows that are drawn using the same attribute values.</span></span> <span data-ttu-id="4f9f7-106">Analogamente ai contesti di dispositivi privati, i contesti di dispositivo di classe riducono al minimo il tempo necessario per preparare un contesto di dispositivo per il disegno.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-106">Like private device contexts, class device contexts minimize the time required to prepare a device context for drawing.</span></span>

<span data-ttu-id="4f9f7-107">Il sistema fornisce un contesto di dispositivo della classe per una finestra se appartiene a una classe di finestra con lo \_ stile cs CLASSDC.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-107">The system supplies a class device context for a window if it belongs to a window class having the CS\_CLASSDC style.</span></span> <span data-ttu-id="4f9f7-108">Il sistema crea il contesto di dispositivo quando crea la prima finestra appartenente alla classe e quindi usa lo stesso contesto di dispositivo per tutte le finestre create successivamente nella classe.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-108">The system creates the device context when creating the first window belonging to the class and then uses the same device context for all subsequently created windows in the class.</span></span> <span data-ttu-id="4f9f7-109">Inizialmente, il contesto di dispositivo della classe ha gli stessi valori predefiniti per gli attributi di un contesto di dispositivo comune, ma l'applicazione può modificarli in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-109">Initially, the class device context has the same default values for attributes as a common device context, but the application can modify these at any time.</span></span> <span data-ttu-id="4f9f7-110">Il sistema conserva tutte le modifiche, ad eccezione dell'area di ridimensionamento e dell'origine del dispositivo, fino a quando l'ultima finestra della classe non viene eliminata definitivamente.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-110">The system preserves all changes, except for the clipping region and device origin, until the last window in the class has been destroyed.</span></span> <span data-ttu-id="4f9f7-111">Una modifica apportata a una finestra viene applicata a tutte le finestre di tale classe.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-111">A change made for one window applies to all windows in that class.</span></span>

<span data-ttu-id="4f9f7-112">Un'applicazione può recuperare l'handle per il contesto di dispositivo della classe usando la funzione [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) in qualsiasi momento dopo la creazione della prima finestra.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-112">An application can retrieve the handle to the class device context by using the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) function any time after the first window has been created.</span></span> <span data-ttu-id="4f9f7-113">L'applicazione può rimanere e usare l'handle senza rilasciarlo perché il contesto di dispositivo della classe non fa parte della cache del contesto del dispositivo di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-113">The application can keep and use the handle without releasing it because the class device context is not part of the display device context cache.</span></span> <span data-ttu-id="4f9f7-114">Se l'applicazione crea un'altra finestra nella stessa classe di finestra, l'applicazione deve recuperare di nuovo il contesto di dispositivo della classe.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-114">If the application creates another window in the same window class, the application must retrieve the class device context again.</span></span> <span data-ttu-id="4f9f7-115">Il recupero del contesto di dispositivo imposta l'origine del dispositivo e l'area di ritaglio corrette per la nuova finestra.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-115">Retrieving the device context sets the correct device origin and clipping region for the new window.</span></span> <span data-ttu-id="4f9f7-116">Dopo che l'applicazione recupera il contesto di dispositivo della classe per una nuova finestra nella classe, il contesto di dispositivo non può più essere usato per creare la finestra originale senza recuperarlo di nuovo per tale finestra.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-116">After the application retrieves the class device context for a new window in the class, the device context can no longer be used to draw in the original window without again retrieving it for that window.</span></span> <span data-ttu-id="4f9f7-117">In generale, ogni volta che deve essere disegnato in una finestra, un'applicazione deve recuperare in modo esplicito il contesto di dispositivo della classe per la finestra.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-117">In general, each time it must draw in a window, an application must explicitly retrieve the class device context for the window.</span></span>

<span data-ttu-id="4f9f7-118">Le applicazioni che usano i contesti di dispositivo della classe devono sempre chiamare [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) durante l'elaborazione di un messaggio di [**\_ disegno WM**](wm-paint.md) .</span><span class="sxs-lookup"><span data-stu-id="4f9f7-118">Applications that use class device contexts should always call [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) when processing a [**WM\_PAINT**](wm-paint.md) message.</span></span> <span data-ttu-id="4f9f7-119">La funzione imposta l'origine del dispositivo e l'area di ritaglio corrette per la finestra e incorpora l'area di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-119">The function sets the correct device origin and clipping region for the window, and incorporates the update region.</span></span> <span data-ttu-id="4f9f7-120">L'applicazione deve anche chiamare [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) per ripristinare il punto di inserimento se **BeginPaint** lo nasconde.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-120">The application should also call [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) to restore the caret if **BeginPaint** hid it.</span></span> <span data-ttu-id="4f9f7-121">**EndPaint** non ha alcun effetto su un contesto di dispositivo di classe.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-121">**EndPaint** has no other effect on a class device context.</span></span>

<span data-ttu-id="4f9f7-122">Il sistema passa il contesto di dispositivo della classe quando invia il messaggio [**WM \_ ERASEBKGND**](../winmsg/wm-erasebkgnd.md) all'applicazione, consentendo ai valori degli attributi correnti di influenzare qualsiasi disegno eseguito dall'applicazione o dal sistema durante l'elaborazione di questo messaggio.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-122">The system passes the class device context when sending the [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md) message to the application, permitting the current attribute values to affect any drawing carried out by the application or the system when processing this message.</span></span> <span data-ttu-id="4f9f7-123">Come con una finestra con un contesto di dispositivo privato, un'applicazione può usare [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) per forzare il sistema a restituire un contesto di dispositivo comune per la finestra con un contesto di dispositivo di classe.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-123">As it could with a window having a private device context, an application can use [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) to force the system to return a common device context for the window that has a class device context.</span></span>

<span data-ttu-id="4f9f7-124">Non è consigliabile usare contesti di dispositivo di classe.</span><span class="sxs-lookup"><span data-stu-id="4f9f7-124">Using class device contexts is not recommended.</span></span>

 

 
