---
description: Per consentire alle applicazioni di inserire l'output in memoria anziché inviarlo a un dispositivo effettivo, usare un contesto di dispositivo speciale per le operazioni bitmap denominate un contesto di dispositivo di memoria.
ms.assetid: 0a682dc4-31a4-43c8-b0b1-ab01986b1dac
title: Contesti di dispositivo di memoria
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 095de04fdf965a87011895015ad7ea6c9782e286
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103754383"
---
# <a name="memory-device-contexts"></a><span data-ttu-id="588e6-103">Contesti di dispositivo di memoria</span><span class="sxs-lookup"><span data-stu-id="588e6-103">Memory Device Contexts</span></span>

<span data-ttu-id="588e6-104">Per consentire alle applicazioni di inserire l'output in memoria anziché inviarlo a un dispositivo effettivo, usare un contesto di dispositivo speciale per le operazioni bitmap denominate un *contesto di dispositivo di memoria*.</span><span class="sxs-lookup"><span data-stu-id="588e6-104">To enable applications to place output in memory rather than sending it to an actual device, use a special device context for bitmap operations called a *memory device context*.</span></span> <span data-ttu-id="588e6-105">Un controller di dominio di memoria consente al sistema di considerare una parte della memoria come un dispositivo virtuale.</span><span class="sxs-lookup"><span data-stu-id="588e6-105">A memory DC enables the system to treat a portion of memory as a virtual device.</span></span> <span data-ttu-id="588e6-106">Si tratta di una matrice di bit in memoria che un'applicazione può utilizzare temporaneamente per archiviare i dati relativi ai colori per le bitmap create in una superficie di disegno normale.</span><span class="sxs-lookup"><span data-stu-id="588e6-106">It is an array of bits in memory that an application can use temporarily to store the color data for bitmaps created on a normal drawing surface.</span></span> <span data-ttu-id="588e6-107">Poiché la bitmap è compatibile con il dispositivo, anche un controller di dominio di memoria viene talvolta indicato come un *contesto di dispositivo compatibile*.</span><span class="sxs-lookup"><span data-stu-id="588e6-107">Because the bitmap is compatible with the device, a memory DC is also sometimes referred to as a *compatible device context*.</span></span>

<span data-ttu-id="588e6-108">Il controller di dominio della memoria archivia le immagini bitmap per un dispositivo specifico.</span><span class="sxs-lookup"><span data-stu-id="588e6-108">The memory DC stores bitmap images for a particular device.</span></span> <span data-ttu-id="588e6-109">Un'applicazione può creare un controller di dominio di memoria chiamando la funzione [**CreateCompatibleDC**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) .</span><span class="sxs-lookup"><span data-stu-id="588e6-109">An application can create a memory DC by calling the [**CreateCompatibleDC**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) function.</span></span>

<span data-ttu-id="588e6-110">La bitmap originale in un controller di dominio di memoria è semplicemente un segnaposto.</span><span class="sxs-lookup"><span data-stu-id="588e6-110">The original bitmap in a memory DC is simply a placeholder.</span></span> <span data-ttu-id="588e6-111">Le dimensioni sono un pixel di un pixel.</span><span class="sxs-lookup"><span data-stu-id="588e6-111">Its dimensions are one pixel by one pixel.</span></span> <span data-ttu-id="588e6-112">Prima che un'applicazione possa iniziare a disegnare, deve selezionare una bitmap con la larghezza e l'altezza appropriate per il controller di dominio chiamando la funzione [**SelezionaOggetto**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) .</span><span class="sxs-lookup"><span data-stu-id="588e6-112">Before an application can begin drawing, it must select a bitmap with the appropriate width and height into the DC by calling the [**SelectObject**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) function.</span></span> <span data-ttu-id="588e6-113">Per creare una bitmap delle dimensioni appropriate, utilizzare la funzione [**CreateBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmap), [**CreateBitmapIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmapindirect)o [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap) .</span><span class="sxs-lookup"><span data-stu-id="588e6-113">To create a bitmap of the appropriate dimensions, use the [**CreateBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmap), [**CreateBitmapIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmapindirect), or [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap) function.</span></span> <span data-ttu-id="588e6-114">Dopo aver selezionato la bitmap nel controller di dominio di memoria, il sistema sostituisce la matrice a bit singolo con una matrice sufficientemente grande da archiviare le informazioni sui colori per il rettangolo di pixel specificato.</span><span class="sxs-lookup"><span data-stu-id="588e6-114">After the bitmap is selected into the memory DC, the system replaces the single-bit array with an array large enough to store color information for the specified rectangle of pixels.</span></span>

<span data-ttu-id="588e6-115">Quando un'applicazione passa l'handle restituito da [**CreateCompatibleDC**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) a una delle funzioni di disegno, l'output richiesto non viene visualizzato nella superficie di disegno di un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="588e6-115">When an application passes the handle returned by [**CreateCompatibleDC**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) to one of the drawing functions, the requested output does not appear on a device's drawing surface.</span></span> <span data-ttu-id="588e6-116">Al contrario, il sistema archivia le informazioni sui colori per la riga, la curva, il testo o l'area risultante nella matrice di bit.</span><span class="sxs-lookup"><span data-stu-id="588e6-116">Instead, the system stores the color information for the resultant line, curve, text, or region in the array of bits.</span></span> <span data-ttu-id="588e6-117">L'applicazione può copiare l'immagine archiviata in memoria in una superficie di disegno chiamando la funzione [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) , identificando il controller di dominio della memoria come contesto di dispositivo di origine e un controller di dominio della finestra o dello schermo come contesto di dispositivo di destinazione.</span><span class="sxs-lookup"><span data-stu-id="588e6-117">The application can copy the image stored in memory back onto a drawing surface by calling the [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) function, identifying the memory DC as the source device context and a window or screen DC as the target device context.</span></span>

<span data-ttu-id="588e6-118">Quando si visualizza una DIB o un DDB creato da una DIB in un dispositivo tavolozza, è possibile migliorare la velocità con cui viene disegnata l'immagine organizzando la tavolozza logica in modo che corrisponda al layout della tavolozza di sistema.</span><span class="sxs-lookup"><span data-stu-id="588e6-118">When displaying a DIB or a DDB created from a DIB on a palette device, you can improve the speed at which the image is drawn by arranging the logical palette to match the layout of the system palette.</span></span> <span data-ttu-id="588e6-119">A tale scopo, chiamare [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) con il valore NUMRESERVED per ottenere il numero di colori riservati nel sistema.</span><span class="sxs-lookup"><span data-stu-id="588e6-119">To do this, call [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) with the NUMRESERVED value to get the number of reserved colors in the system.</span></span> <span data-ttu-id="588e6-120">Chiamare quindi [**GetSystemPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteentries) e compilare la prima e l'ultima voce NUMRESERVED/2 della tavolozza logica con i colori di sistema corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="588e6-120">Then call [**GetSystemPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteentries) and fill in the first and last NUMRESERVED/2 entries of the logical palette with the corresponding system colors.</span></span> <span data-ttu-id="588e6-121">Se, ad esempio, NUMRESERVED è 20, inserire le prime e le ultime 10 voci della tavolozza logica con i colori di sistema.</span><span class="sxs-lookup"><span data-stu-id="588e6-121">For example, if NUMRESERVED is 20, you would fill in the first and last 10 entries of the logical palette with the system colors.</span></span> <span data-ttu-id="588e6-122">Inserire quindi i colori rimanenti 256-NUMRESERVED della tavolozza logica (in questo esempio, i restanti 236 colori) con i colori della DIB e impostare il \_ flag PC nocollapse su ognuno di questi colori.</span><span class="sxs-lookup"><span data-stu-id="588e6-122">Then fill in the remaining 256-NUMRESERVED colors of the logical palette (in our example, the remaining 236 colors) with colors from the DIB and set the PC\_NOCOLLAPSE flag on each of these colors.</span></span>

<span data-ttu-id="588e6-123">Per ulteriori informazioni su colori e tavolozze, vedere [colori](colors.md).</span><span class="sxs-lookup"><span data-stu-id="588e6-123">For more information about color and palettes, see [Colors](colors.md).</span></span> <span data-ttu-id="588e6-124">Per ulteriori informazioni sulle bitmap e sulle operazioni bitmap, vedere [bitmap](bitmaps.md).</span><span class="sxs-lookup"><span data-stu-id="588e6-124">For more information about bitmaps and bitmap operations, see [Bitmaps](bitmaps.md).</span></span>

 

 



