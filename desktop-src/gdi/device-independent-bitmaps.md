---
description: Una bitmap indipendente dal dispositivo (DIB) contiene una tabella dei colori.
ms.assetid: 56b39a3d-48a4-4620-9652-ec41ea4d6423
title: Bitmap Device-Independent
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1aa35201a9a27c2d16a5a18b0125d25a3938890c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104130799"
---
# <a name="device-independent-bitmaps"></a><span data-ttu-id="b3f38-103">Bitmap Device-Independent</span><span class="sxs-lookup"><span data-stu-id="b3f38-103">Device-Independent Bitmaps</span></span>

<span data-ttu-id="b3f38-104">Una bitmap indipendente dal dispositivo (DIB) contiene una *tabella dei colori*.</span><span class="sxs-lookup"><span data-stu-id="b3f38-104">A device-independent bitmap (DIB) contains a *color table*.</span></span> <span data-ttu-id="b3f38-105">Una tabella dei colori descrive il modo in cui i valori dei pixel corrispondono ai valori dei colori *RGB* , che descrivono i colori prodotti dalla creazione di una luce.</span><span class="sxs-lookup"><span data-stu-id="b3f38-105">A color table describes how pixel values correspond to *RGB* color values, which describe colors that are produced by emitting light.</span></span> <span data-ttu-id="b3f38-106">Pertanto, una DIB può ottenere la combinazione di colori corretta su qualsiasi dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b3f38-106">Thus, a DIB can achieve the proper color scheme on any device.</span></span> <span data-ttu-id="b3f38-107">Una DIB contiene le informazioni relative al colore e alla dimensione seguenti:</span><span class="sxs-lookup"><span data-stu-id="b3f38-107">A DIB contains the following color and dimension information:</span></span>

-   <span data-ttu-id="b3f38-108">Formato colori del dispositivo in cui è stata creata l'immagine rettangolare.</span><span class="sxs-lookup"><span data-stu-id="b3f38-108">The color format of the device on which the rectangular image was created.</span></span>
-   <span data-ttu-id="b3f38-109">Risoluzione del dispositivo in cui è stata creata l'immagine rettangolare.</span><span class="sxs-lookup"><span data-stu-id="b3f38-109">The resolution of the device on which the rectangular image was created.</span></span>
-   <span data-ttu-id="b3f38-110">Tavolozza per il dispositivo in cui è stata creata l'immagine.</span><span class="sxs-lookup"><span data-stu-id="b3f38-110">The palette for the device on which the image was created.</span></span>
-   <span data-ttu-id="b3f38-111">Matrice di bit che esegue il mapping dei tripletti rosso, verde, blu ( [**RGB**](/windows/desktop/api/Wingdi/nf-wingdi-rgb) ) ai pixel nell'immagine rettangolare.</span><span class="sxs-lookup"><span data-stu-id="b3f38-111">An array of bits that maps red, green, blue ( [**RGB**](/windows/desktop/api/Wingdi/nf-wingdi-rgb) ) triplets to pixels in the rectangular image.</span></span>
-   <span data-ttu-id="b3f38-112">Identificatore di compressione dei dati che indica lo schema di compressione dei dati, se presente, utilizzato per ridurre le dimensioni della matrice di bit.</span><span class="sxs-lookup"><span data-stu-id="b3f38-112">A data-compression identifier that indicates the data compression scheme (if any) used to reduce the size of the array of bits.</span></span>

<span data-ttu-id="b3f38-113">Le informazioni relative al colore e alla dimensione vengono archiviate in una struttura [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) , che è costituita da una struttura [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)) seguita da due o più strutture [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) .</span><span class="sxs-lookup"><span data-stu-id="b3f38-113">The color and dimension information is stored in a [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) structure, which consists of a [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)) structure followed by two or more [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) structures.</span></span> <span data-ttu-id="b3f38-114">La struttura **BITMAPINFOHEADER** specifica le dimensioni del rettangolo pixel, descrive la tecnologia dei colori del dispositivo e identifica gli schemi di compressione utilizzati per ridurre le dimensioni della bitmap.</span><span class="sxs-lookup"><span data-stu-id="b3f38-114">The **BITMAPINFOHEADER** structure specifies the dimensions of the pixel rectangle, describes the device's color technology, and identifies the compression schemes used to reduce the size of the bitmap.</span></span> <span data-ttu-id="b3f38-115">Le strutture **RGBQUAD** identificano i colori visualizzati nel rettangolo pixel.</span><span class="sxs-lookup"><span data-stu-id="b3f38-115">The **RGBQUAD** structures identify the colors that appear in the pixel rectangle.</span></span>

<span data-ttu-id="b3f38-116">Sono disponibili due tipi di DIB:</span><span class="sxs-lookup"><span data-stu-id="b3f38-116">There are two varieties of DIBs:</span></span>

-   <span data-ttu-id="b3f38-117">Una DIB dal basso in alto, in cui l'origine si trova nell'angolo inferiore sinistro.</span><span class="sxs-lookup"><span data-stu-id="b3f38-117">A bottom-up DIB, in which the origin lies at the lower-left corner.</span></span>
-   <span data-ttu-id="b3f38-118">Una DIB dall'alto in basso, in cui l'origine si trova nell'angolo superiore sinistro.</span><span class="sxs-lookup"><span data-stu-id="b3f38-118">A top-down DIB, in which the origin lies at the upper-left corner.</span></span>

<span data-ttu-id="b3f38-119">Se l'altezza di una DIB, come indicato dal membro **Height** della struttura dell'intestazione delle informazioni bitmap, è un valore positivo, si tratta di una DIB dal basso in alto; Se l'altezza è un valore negativo, si tratta di una DIB dall'alto verso il basso.</span><span class="sxs-lookup"><span data-stu-id="b3f38-119">If the height of a DIB, as indicated by the **Height** member of the bitmap information header structure, is a positive value, it is a bottom-up DIB; if the height is a negative value, it is a top-down DIB.</span></span> <span data-ttu-id="b3f38-120">Non è possibile comprimere l'inizio dell'attività.</span><span class="sxs-lookup"><span data-stu-id="b3f38-120">Top-down DIBs cannot be compressed.</span></span>

<span data-ttu-id="b3f38-121">Il formato del colore viene specificato in termini di conteggio dei piani di colore e dei bit di colore.</span><span class="sxs-lookup"><span data-stu-id="b3f38-121">The color format is specified in terms of a count of color planes and color bits.</span></span> <span data-ttu-id="b3f38-122">Il numero di piani di colore è sempre 1; il numero di bit di colore è 1 per le bitmap monocromatiche, 4 per le bitmap VGA e 8, 16, 24 o 32 per le bitmap in altri dispositivi a colori.</span><span class="sxs-lookup"><span data-stu-id="b3f38-122">The count of color planes is always 1; the count of color bits is 1 for monochrome bitmaps, 4 for VGA bitmaps, and 8, 16, 24, or 32 for bitmaps on other color devices.</span></span> <span data-ttu-id="b3f38-123">Un'applicazione recupera il numero di bit di colore utilizzati da una particolare visualizzazione (o stampante) chiamando la funzione [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , specificando BITSPIXEL come secondo argomento.</span><span class="sxs-lookup"><span data-stu-id="b3f38-123">An application retrieves the number of color bits that a particular display (or printer) uses by calling the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying BITSPIXEL as the second argument.</span></span>

<span data-ttu-id="b3f38-124">La risoluzione di un dispositivo di visualizzazione viene specificata in pixel per contatore.</span><span class="sxs-lookup"><span data-stu-id="b3f38-124">The resolution of a display device is specified in pixels-per-meter.</span></span> <span data-ttu-id="b3f38-125">Un'applicazione può recuperare la risoluzione orizzontale per uno schermo video, o stampante, seguendo questo processo in tre passaggi.</span><span class="sxs-lookup"><span data-stu-id="b3f38-125">An application can retrieve the horizontal resolution for a video display, or printer, by following this three-step process.</span></span>

1.  <span data-ttu-id="b3f38-126">Chiamare la funzione [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , specificando HORZRES come secondo argomento.</span><span class="sxs-lookup"><span data-stu-id="b3f38-126">Call the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying HORZRES as the second argument.</span></span>
2.  <span data-ttu-id="b3f38-127">Chiamare [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) una seconda volta, specificando HORZSIZE come secondo argomento.</span><span class="sxs-lookup"><span data-stu-id="b3f38-127">Call [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) a second time, specifying HORZSIZE as the second argument.</span></span>
3.  <span data-ttu-id="b3f38-128">Dividere il primo valore restituito per il secondo valore restituito.</span><span class="sxs-lookup"><span data-stu-id="b3f38-128">Divide the first return value by the second return value.</span></span>

<span data-ttu-id="b3f38-129">L'applicazione può recuperare la risoluzione verticale usando lo stesso processo in tre passaggi con parametri diversi: VERTRES al posto di HORZRES e VERTSIZE al posto di HORZSIZE.</span><span class="sxs-lookup"><span data-stu-id="b3f38-129">The application can retrieve the vertical resolution by using the same three-step process with different parameters: VERTRES in place of HORZRES, and VERTSIZE in place of HORZSIZE.</span></span>

<span data-ttu-id="b3f38-130">La tavolozza è rappresentata da una matrice di strutture [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) che specificano i componenti di intensità rossa, verde e blu per ogni colore nella tavolozza dei colori di un dispositivo di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="b3f38-130">The palette is represented by an array of [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) structures that specify the red, green, and blue intensity components for each color in a display device's color palette.</span></span> <span data-ttu-id="b3f38-131">Ogni indice dei colori nella matrice della tavolozza è mappato a un pixel specifico nell'area rettangolare associata alla bitmap.</span><span class="sxs-lookup"><span data-stu-id="b3f38-131">Each color index in the palette array maps to a specific pixel in the rectangular region associated with the bitmap.</span></span> <span data-ttu-id="b3f38-132">La dimensione della matrice, in bit, equivale allo spessore del rettangolo, in pixel, moltiplicato per l'altezza del rettangolo, in pixel, moltiplicato per il numero di bit di colore per il dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b3f38-132">The size of this array, in bits, is equivalent to the width of the rectangle, in pixels, multiplied by the height of the rectangle, in pixels, multiplied by the count of color bits for the device.</span></span> <span data-ttu-id="b3f38-133">Un'applicazione può recuperare le dimensioni della tavolozza del dispositivo chiamando la funzione [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , specificando NUMCOLORS come secondo argomento.</span><span class="sxs-lookup"><span data-stu-id="b3f38-133">An application can retrieve the size of the device's palette by calling the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying NUMCOLORS as the second argument.</span></span>

<span data-ttu-id="b3f38-134">Windows supporta la compressione della matrice di tavolozze per la precedenza in base a 8 BPP e 4 BPP.</span><span class="sxs-lookup"><span data-stu-id="b3f38-134">Windows supports the compression of the palette array for 8-bpp and 4-bpp bottom-up DIBs.</span></span> <span data-ttu-id="b3f38-135">Queste matrici possono essere compresse usando lo schema di codifica Run-Length (RLE).</span><span class="sxs-lookup"><span data-stu-id="b3f38-135">These arrays can be compressed by using the run-length encoding (RLE) scheme.</span></span> <span data-ttu-id="b3f38-136">Lo schema RLE utilizza valori a 2 byte, il primo byte che specifica il numero di pixel consecutivi che utilizzano un indice dei colori e il secondo byte che specifica l'indice.</span><span class="sxs-lookup"><span data-stu-id="b3f38-136">The RLE scheme uses 2-byte values, the first byte specifying the number of consecutive pixels that use a color index and the second byte specifying the index.</span></span> <span data-ttu-id="b3f38-137">Per ulteriori informazioni sulla compressione bitmap, vedere la descrizione delle strutture [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)), [**BITMAPFILEHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapfileheader), [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)e [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) .</span><span class="sxs-lookup"><span data-stu-id="b3f38-137">For more information about bitmap compression, see the description of the [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)), [**BITMAPFILEHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapfileheader), [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header), and [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) structures.</span></span>

<span data-ttu-id="b3f38-138">Un'applicazione può creare una DIB da un DDB inizializzando le strutture necessarie e chiamando la funzione [**GetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-getdibits) .</span><span class="sxs-lookup"><span data-stu-id="b3f38-138">An application can create a DIB from a DDB by initializing the required structures and calling the [**GetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-getdibits) function.</span></span> <span data-ttu-id="b3f38-139">Per determinare se un dispositivo supporta questa funzione, chiamare la funzione [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , specificando \_ \_ la bitmap RC di come flag RasterCaps.</span><span class="sxs-lookup"><span data-stu-id="b3f38-139">To determine whether a device supports this function, call the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying RC\_DI\_BITMAP as the RASTERCAPS flag.</span></span>

<span data-ttu-id="b3f38-140">Un'applicazione che deve copiare una bitmap può usare [**TransparentBlt**](/windows/desktop/api/WinGdi/nf-wingdi-transparentblt) per copiare tutti i pixel in una bitmap di origine in una bitmap di destinazione, ad eccezione dei pixel che corrispondono al colore trasparente.</span><span class="sxs-lookup"><span data-stu-id="b3f38-140">An application that needs to copy a bitmap can use [**TransparentBlt**](/windows/desktop/api/WinGdi/nf-wingdi-transparentblt) to copy all pixels in a source bitmap to a destination bitmap except those pixels that match the transparent color.</span></span>

<span data-ttu-id="b3f38-141">Un'applicazione può usare una DIB per impostare i pixel sul dispositivo di visualizzazione chiamando la funzione [**SetDIBitsToDevice**](/windows/desktop/api/Wingdi/nf-wingdi-setdibitstodevice) o [**StretchDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits) .</span><span class="sxs-lookup"><span data-stu-id="b3f38-141">An application can use a DIB to set pixels on the display device by calling the [**SetDIBitsToDevice**](/windows/desktop/api/Wingdi/nf-wingdi-setdibitstodevice) or the [**StretchDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits) function.</span></span> <span data-ttu-id="b3f38-142">Per determinare se un dispositivo supporta la funzione **SetDIBitsToDevice** , chiamare la funzione [**GETDEVICECAPS**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) specificando RC \_ DIBTODEV come flag RasterCaps.</span><span class="sxs-lookup"><span data-stu-id="b3f38-142">To determine whether a device supports the **SetDIBitsToDevice** function, call the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying RC\_DIBTODEV as the RASTERCAPS flag.</span></span> <span data-ttu-id="b3f38-143">Specificare RC \_ STRETCHDIB come flag RasterCaps per determinare se il dispositivo supporta **StretchDIBits**.</span><span class="sxs-lookup"><span data-stu-id="b3f38-143">Specify RC\_STRETCHDIB as the RASTERCAPS flag to determine if the device supports **StretchDIBits**.</span></span>

<span data-ttu-id="b3f38-144">Un'applicazione che deve semplicemente visualizzare una DIB preesistente può usare la funzione [**SetDIBitsToDevice**](/windows/desktop/api/Wingdi/nf-wingdi-setdibitstodevice) .</span><span class="sxs-lookup"><span data-stu-id="b3f38-144">An application that simply needs to display a pre-existing DIB can use the [**SetDIBitsToDevice**](/windows/desktop/api/Wingdi/nf-wingdi-setdibitstodevice) function.</span></span> <span data-ttu-id="b3f38-145">Ad esempio, un'applicazione per fogli di calcolo può aprire grafici esistenti e visualizzarli in una finestra usando la funzione **SetDIBitsToDevice** .</span><span class="sxs-lookup"><span data-stu-id="b3f38-145">For example, a spreadsheet application can open existing charts and display them in a window by using the **SetDIBitsToDevice** function.</span></span> <span data-ttu-id="b3f38-146">Per ricreare ripetutamente una bitmap in una finestra, tuttavia, l'applicazione deve utilizzare la funzione [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) .</span><span class="sxs-lookup"><span data-stu-id="b3f38-146">To repeatedly redraw a bitmap in a window, however, the application should use the [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) function.</span></span> <span data-ttu-id="b3f38-147">Ad esempio, un'applicazione multimediale che combina grafica animata con un suono può trarre vantaggio dalla chiamata alla funzione **BitBlt** poiché viene eseguita più velocemente di **SetDIBitsToDevice**.</span><span class="sxs-lookup"><span data-stu-id="b3f38-147">For example, a multimedia application that combines animated graphics with sound would benefit from calling the **BitBlt** function because it executes faster than **SetDIBitsToDevice**.</span></span>

 

 
