---
description: Dopo la ricezione di una richiesta di verifica da parte del server, il client crea la risposta di verifica del digest chiamando la funzione InitializeSecurityContext (digest).
ms.assetid: b26b5676-a614-4017-a4e5-a5395292a667
title: Generazione della risposta alla richiesta digest
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8b577334348745425db23d3de41431ba4e37b7af
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103884521"
---
# <a name="generating-the-digest-challenge-response"></a><span data-ttu-id="e1121-103">Generazione della risposta alla richiesta digest</span><span class="sxs-lookup"><span data-stu-id="e1121-103">Generating the Digest Challenge Response</span></span>

<span data-ttu-id="e1121-104">Dopo la ricezione di una richiesta di verifica da parte del server, il client crea la risposta di verifica del digest chiamando la funzione [**InitializeSecurityContext (digest)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) .</span><span class="sxs-lookup"><span data-stu-id="e1121-104">After receiving a challenge from the server, the client creates the Digest challenge response by calling the [**InitializeSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function.</span></span> <span data-ttu-id="e1121-105">Questa funzione genera un'impronta digitale MD5 [*hash*](/windows/desktop/SecGloss/h-gly) usando le informazioni sulla risorsa e sui dati richiesti dalla richiesta di verifica e restituisce un token di sicurezza che rappresenta un [*contesto di sicurezza*](/windows/desktop/SecGloss/s-gly)parziale.</span><span class="sxs-lookup"><span data-stu-id="e1121-105">This function generates an MD5 [*hash*](/windows/desktop/SecGloss/h-gly) fingerprint by using information about the requested resource and data from the challenge, and outputs a security token that represents a partial [*security context*](/windows/desktop/SecGloss/s-gly).</span></span> <span data-ttu-id="e1121-106">Per completare l'autenticazione, il client deve restituire il token al server che ha emesso la richiesta di verifica.</span><span class="sxs-lookup"><span data-stu-id="e1121-106">To complete the authentication, the client must return the token to the server that issued the challenge.</span></span>

<span data-ttu-id="e1121-107">Nella tabella seguente vengono descritti i parametri della [*funzione*](/windows/desktop/SecGloss/c-gly) [**InitializeSecurityContext (digest)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) e i valori da fornire quando si costruisce una risposta di verifica del digest.</span><span class="sxs-lookup"><span data-stu-id="e1121-107">The following table describes the parameters of the [**InitializeSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) [*function*](/windows/desktop/SecGloss/c-gly), and the values to supply when constructing a Digest challenge response.</span></span>



| <span data-ttu-id="e1121-108">Parametro</span><span class="sxs-lookup"><span data-stu-id="e1121-108">Parameter</span></span>                  | <span data-ttu-id="e1121-109">Descrizione</span><span class="sxs-lookup"><span data-stu-id="e1121-109">Description</span></span>                                                                                                                                                                                               |
|----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e1121-110">*fContextReq*</span><span class="sxs-lookup"><span data-stu-id="e1121-110">*fContextReq*</span></span><br/>   | <span data-ttu-id="e1121-111">Attributi del contesto di sicurezza richiesti dal client.</span><span class="sxs-lookup"><span data-stu-id="e1121-111">The security context attributes requested by the client.</span></span> <span data-ttu-id="e1121-112">Per altre informazioni, vedere requisiti del contesto della risposta di richiesta digest.</span><span class="sxs-lookup"><span data-stu-id="e1121-112">For more information, see Digest Challenge Response Context Requirements.</span></span><br/>                                                             |
| <span data-ttu-id="e1121-113">*pszTargetName*</span><span class="sxs-lookup"><span data-stu-id="e1121-113">*pszTargetName*</span></span><br/> | <span data-ttu-id="e1121-114">HTTP: stringa con terminazione null che specifica l'URL di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e1121-114">HTTP: Null-terminated string that specifies the target URL.</span></span><br/> <span data-ttu-id="e1121-115">SASL: stringa con terminazione null che specifica la destinazione DNS/SPN.</span><span class="sxs-lookup"><span data-stu-id="e1121-115">SASL: Null-terminated string that specifies the DNS/SPN target.</span></span><br/>                                                         |
| <span data-ttu-id="e1121-116">*pInput*</span><span class="sxs-lookup"><span data-stu-id="e1121-116">*pInput*</span></span><br/>        | <span data-ttu-id="e1121-117">Buffer che contengono le informazioni richieste dal provider SSP del digest.</span><span class="sxs-lookup"><span data-stu-id="e1121-117">Buffers that contain information required by the Digest SSP.</span></span> <span data-ttu-id="e1121-118">Per altre informazioni, vedere [buffer di input per la risposta alla richiesta di verifica del digest](input-buffers-for-the-digest-challenge-response.md).</span><span class="sxs-lookup"><span data-stu-id="e1121-118">For more information, see [Input Buffers for the Digest Challenge Response](input-buffers-for-the-digest-challenge-response.md).</span></span><br/> |
| <span data-ttu-id="e1121-119">*pfContextAttr*</span><span class="sxs-lookup"><span data-stu-id="e1121-119">*pfContextAttr*</span></span><br/> | <span data-ttu-id="e1121-120">Riceve gli attributi supportati dal contesto di sicurezza restituito.</span><span class="sxs-lookup"><span data-stu-id="e1121-120">Receives the attributes supported by the returned security context.</span></span> <span data-ttu-id="e1121-121">Per altre informazioni, vedere requisiti del contesto della risposta di richiesta digest.</span><span class="sxs-lookup"><span data-stu-id="e1121-121">For more information, see Digest Challenge Response Context Requirements.</span></span><br/>                                                  |
| <span data-ttu-id="e1121-122">*pOutput*</span><span class="sxs-lookup"><span data-stu-id="e1121-122">*pOutput*</span></span><br/>       | <span data-ttu-id="e1121-123">Indirizzo di un \_ buffer di tipo token SECBUFFER che riceve un token di sicurezza da restituire al server.</span><span class="sxs-lookup"><span data-stu-id="e1121-123">Address of a SECBUFFER\_TOKEN type buffer that receives a security token to send back to the server.</span></span><br/>                                                                                           |



 

## <a name="digest-challenge-response-context-requirements"></a><span data-ttu-id="e1121-124">Requisiti del contesto della risposta di richiesta digest</span><span class="sxs-lookup"><span data-stu-id="e1121-124">Digest Challenge Response Context Requirements</span></span>

<span data-ttu-id="e1121-125">I requisiti di contesto sono flag che determinano:</span><span class="sxs-lookup"><span data-stu-id="e1121-125">Context requirements are flags that determine:</span></span>

-   <span data-ttu-id="e1121-126">Indica se Microsoft Digest funziona come meccanismo SASL o protocollo di autenticazione HTTP.</span><span class="sxs-lookup"><span data-stu-id="e1121-126">Whether Microsoft Digest functions as a SASL mechanism or HTTP authentication protocol.</span></span>
-   <span data-ttu-id="e1121-127">Qualità della protezione supportata dal contesto di [*sicurezza*](/windows/desktop/SecGloss/s-gly) condiviso dal client e dal server.</span><span class="sxs-lookup"><span data-stu-id="e1121-127">The quality of protection supported by the [*security context*](/windows/desktop/SecGloss/s-gly) shared by the client and server.</span></span>

<span data-ttu-id="e1121-128">Per impostazione predefinita, Microsoft Digest funziona come meccanismo SASL.</span><span class="sxs-lookup"><span data-stu-id="e1121-128">By default, Microsoft Digest functions as a SASL mechanism.</span></span>

<span data-ttu-id="e1121-129">I requisiti di contesto vengono specificati come flag passati al parametro *fContextReq* della funzione [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) .</span><span class="sxs-lookup"><span data-stu-id="e1121-129">Context requirements are specified as flags passed to the *fContextReq* parameter of the [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function.</span></span> <span data-ttu-id="e1121-130">I flag influiscono sulla qualità della protezione del contesto di sicurezza controllando la direttiva qop nella risposta alla richiesta di verifica.</span><span class="sxs-lookup"><span data-stu-id="e1121-130">The flags affect the security context's quality of protection by controlling the qop directive in the challenge response.</span></span>

<span data-ttu-id="e1121-131">Per impostazione predefinita, la direttiva qop è impostata su "auth".</span><span class="sxs-lookup"><span data-stu-id="e1121-131">By default, the qop directive is set to "auth".</span></span> <span data-ttu-id="e1121-132">Per generare una risposta di verifica che imposta qop su "auth-int", deve verificarsi quanto segue:</span><span class="sxs-lookup"><span data-stu-id="e1121-132">To generate a challenge response that sets qop to "auth-int", the following must occur:</span></span>

1.  <span data-ttu-id="e1121-133">La richiesta digest deve avere una direttiva qop impostata su "auth-int".</span><span class="sxs-lookup"><span data-stu-id="e1121-133">The Digest challenge must have had a qop directive set to "auth-int".</span></span>
2.  <span data-ttu-id="e1121-134">Il client deve specificare uno o più dei flag seguenti:</span><span class="sxs-lookup"><span data-stu-id="e1121-134">The client must specify one or more of the following flags:</span></span>

    -   <span data-ttu-id="e1121-135">\_integrità req di ISC \_</span><span class="sxs-lookup"><span data-stu-id="e1121-135">ISC\_REQ\_INTEGRITY</span></span>
    -   <span data-ttu-id="e1121-136">\_ \_ rilevamento riesecuzione richieste \_ ISC</span><span class="sxs-lookup"><span data-stu-id="e1121-136">ISC\_REQ\_REPLAY\_DETECT</span></span>
    -   <span data-ttu-id="e1121-137">\_ \_ rilevamento sequenza req di ISC \_</span><span class="sxs-lookup"><span data-stu-id="e1121-137">ISC\_REQ\_SEQUENCE\_DETECT</span></span>

<span data-ttu-id="e1121-138">Solo per SASL: generare una risposta di verifica con la direttiva qop impostata su "auth-conf" specificando il \_ \_ flag di riservatezza di ISC.</span><span class="sxs-lookup"><span data-stu-id="e1121-138">For SASL only: Generate a challenge response with the qop directive set to "auth-conf" by specifying the ISC\_REQ\_CONFIDENTIALITY flag.</span></span> <span data-ttu-id="e1121-139">Poiché questo flag non è valido per l'autenticazione HTTP, non può essere usato con il \_ flag http di richiesta ISC \_ .</span><span class="sxs-lookup"><span data-stu-id="e1121-139">Because this flag is not valid for HTTP authentication, it cannot be used with the ISC\_REQ\_HTTP flag.</span></span>

## <a name="verifying-the-quality-of-protection"></a><span data-ttu-id="e1121-140">Verifica della qualità della protezione</span><span class="sxs-lookup"><span data-stu-id="e1121-140">Verifying the Quality of Protection</span></span>

<span data-ttu-id="e1121-141">Il client deve esaminare i flag degli attributi del contesto di sicurezza restituiti nel parametro *pfContextAttr* della funzione [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) .</span><span class="sxs-lookup"><span data-stu-id="e1121-141">The client must examine the security context attributes flags returned in the [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function's *pfContextAttr* parameter.</span></span> <span data-ttu-id="e1121-142">Il client deve inviare la risposta alla richiesta di verifica al server solo se la qualità della protezione indicata dai flag è sufficiente per gli scopi.</span><span class="sxs-lookup"><span data-stu-id="e1121-142">The client should send the challenge response to the server only if the quality of protection indicated by the flags is sufficient for its purposes.</span></span> <span data-ttu-id="e1121-143">I flag rilevanti possono essere costituiti da qualsiasi combinazione dei seguenti elementi:</span><span class="sxs-lookup"><span data-stu-id="e1121-143">The relevant flags can be any combination of the following:</span></span>

-   <span data-ttu-id="e1121-144">\_integrità RET di ISC \_</span><span class="sxs-lookup"><span data-stu-id="e1121-144">ISC\_RET\_INTEGRITY</span></span>
-   <span data-ttu-id="e1121-145">\_ \_ rilevamento riproduzione RET di \_ ISC</span><span class="sxs-lookup"><span data-stu-id="e1121-145">ISC\_RET\_REPLAY\_DETECT</span></span>
-   <span data-ttu-id="e1121-146">\_ \_ rilevamento sequenza RET di ISC \_</span><span class="sxs-lookup"><span data-stu-id="e1121-146">ISC\_RET\_SEQUENCE\_DETECT</span></span>
-   <span data-ttu-id="e1121-147">\_ \_ Riservatezza RET ISC (solo contesti SASL)</span><span class="sxs-lookup"><span data-stu-id="e1121-147">ISC\_RET\_CONFIDENTIALITY (SASL contexts only)</span></span>

<span data-ttu-id="e1121-148">Per ulteriori informazioni sulla direttiva qop, vedere la pagina relativa alla [qualità della protezione e alle crittografie](quality-of-protection-and-ciphers.md).</span><span class="sxs-lookup"><span data-stu-id="e1121-148">For more information about the qop directive, see [Quality of Protection and Ciphers](quality-of-protection-and-ciphers.md).</span></span>

<span data-ttu-id="e1121-149">Per ulteriori informazioni sulle direttive di risposta alla richiesta di verifica, vedere [contenuto di una risposta di verifica del digest](contents-of-a-digest-challenge-response.md).</span><span class="sxs-lookup"><span data-stu-id="e1121-149">For more information about challenge response directives, see [Contents of a Digest Challenge Response](contents-of-a-digest-challenge-response.md).</span></span>

 

