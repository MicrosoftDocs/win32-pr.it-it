---
description: Anziché inviare le chiavi della sessione crittografata a entrambe le entità, il KDC invia al client sia le copie del client che del server della chiave della sessione.
ms.assetid: 6b20ab30-2cd9-4f2e-a26b-316980c4bc78
title: Ticket di sessione
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 762223311dd71f8bded5e021372d3a281f711eda
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106311598"
---
# <a name="session-tickets"></a><span data-ttu-id="39d2a-103">Ticket di sessione</span><span class="sxs-lookup"><span data-stu-id="39d2a-103">Session Tickets</span></span>

<span data-ttu-id="39d2a-104">Anziché inviare le chiavi della sessione crittografata a entrambe le entità, il [KDC](key-distribution-center.md) invia al client sia le copie del client che del server della [*chiave della sessione*](../secgloss/s-gly.md) .</span><span class="sxs-lookup"><span data-stu-id="39d2a-104">Instead of sending the encrypted session keys to both of the principals, the [KDC](key-distribution-center.md) sends both the client's and the server's copies of the [*session key*](../secgloss/s-gly.md) to the client.</span></span> <span data-ttu-id="39d2a-105">La copia del client della chiave di sessione viene crittografata con la [*chiave master*](../secgloss/m-gly.md) del client e pertanto non può essere decrittografata da nessun'altra entità.</span><span class="sxs-lookup"><span data-stu-id="39d2a-105">The client's copy of the session key is encrypted with the client's [*master key*](../secgloss/m-gly.md) and therefore cannot be decrypted by any other entity.</span></span> <span data-ttu-id="39d2a-106">La copia del server della chiave della sessione è incorporata, insieme ai dati di autorizzazione relativi al client, in una struttura di dati denominata ticket.</span><span class="sxs-lookup"><span data-stu-id="39d2a-106">The server's copy of the session key is embedded, along with authorization data about the client, in a data structure called a ticket.</span></span> <span data-ttu-id="39d2a-107">Il ticket è interamente crittografato con la chiave master del server e pertanto non può essere letto o modificato dal client o da qualsiasi altra entità che non dispone dell'accesso alla chiave master del server.</span><span class="sxs-lookup"><span data-stu-id="39d2a-107">The ticket is entirely encrypted with the server's master key and therefore cannot be read or changed by the client or any other entity that does not have access to the server's master key.</span></span> <span data-ttu-id="39d2a-108">È responsabilità del client archiviare il ticket in modo sicuro fino al contatto con il server.</span><span class="sxs-lookup"><span data-stu-id="39d2a-108">It is the responsibility of the client to store the ticket safely until contact with the server.</span></span>

> [!Note]  
> <span data-ttu-id="39d2a-109">Il KDC fornisce solo un servizio di concessione ticket.</span><span class="sxs-lookup"><span data-stu-id="39d2a-109">The KDC only provides a ticket-granting service.</span></span> <span data-ttu-id="39d2a-110">Il client e il server sono responsabili delle rispettive chiavi master protette.</span><span class="sxs-lookup"><span data-stu-id="39d2a-110">The client and server are responsible for keeping their respective master keys secure.</span></span>

 

<span data-ttu-id="39d2a-111">Quando il client riceve la risposta del KDC, estrae il ticket e la relativa copia della chiave della sessione, mettendolo a parte in una cache sicura.</span><span class="sxs-lookup"><span data-stu-id="39d2a-111">When the client receives the KDC's response, it extracts the ticket and its own copy of the session key, putting both aside in a secure cache.</span></span> <span data-ttu-id="39d2a-112">Per stabilire una sessione protetta con il server, viene inviato al server un messaggio costituito dal ticket, ancora crittografato con la chiave master del server e un [messaggio di autenticazione](authenticator-messages.md) crittografato con la chiave della sessione.</span><span class="sxs-lookup"><span data-stu-id="39d2a-112">To establish a secure session with the server, it sends the server a message consisting of the ticket, still encrypted with the server's master key, and an [authenticator message](authenticator-messages.md) encrypted with the session key.</span></span> <span data-ttu-id="39d2a-113">Insieme, il messaggio ticket e Authenticator sono le [*credenziali*](../secgloss/c-gly.md) del client per il server.</span><span class="sxs-lookup"><span data-stu-id="39d2a-113">Together, the ticket and authenticator message are the client's [*credentials*](../secgloss/c-gly.md) to the server.</span></span>

<span data-ttu-id="39d2a-114">Quando il server riceve le credenziali da un client, decrittografa il ticket con la relativa [*chiave master*](../secgloss/m-gly.md), estrae la [*chiave della sessione*](../secgloss/s-gly.md)e usa la chiave della sessione per decrittografare il messaggio di autenticazione del client.</span><span class="sxs-lookup"><span data-stu-id="39d2a-114">When the server receives credentials from a client, it decrypts the ticket with its [*master key*](../secgloss/m-gly.md), extracts the [*session key*](../secgloss/s-gly.md), and uses the session key to decrypt the client's authenticator message.</span></span> <span data-ttu-id="39d2a-115">Se tutto viene verificato, il server sa che le credenziali del client sono state rilasciate dal KDC, un'autorità attendibile.</span><span class="sxs-lookup"><span data-stu-id="39d2a-115">If everything checks out, the server knows that the client's credentials were issued by the KDC, a trusted authority.</span></span> <span data-ttu-id="39d2a-116">Per l'autenticazione reciproca, il server risponde crittografando il timestamp dal messaggio di autenticazione del client usando la chiave della sessione.</span><span class="sxs-lookup"><span data-stu-id="39d2a-116">For mutual authentication, the server responds by encrypting the time stamp from the client's authenticator message using the session key.</span></span> <span data-ttu-id="39d2a-117">Questo messaggio crittografato viene inviato al client.</span><span class="sxs-lookup"><span data-stu-id="39d2a-117">This encrypted message is sent to the client.</span></span> <span data-ttu-id="39d2a-118">Il client decrittografa quindi il messaggio.</span><span class="sxs-lookup"><span data-stu-id="39d2a-118">The client then decrypts the message.</span></span> <span data-ttu-id="39d2a-119">Se il messaggio restituito è uguale al timestamp del messaggio di autenticazione originale, il server viene autenticato.</span><span class="sxs-lookup"><span data-stu-id="39d2a-119">If the returned message is the same as the time stamp in the original authenticator message, the server is authenticated.</span></span>

<span data-ttu-id="39d2a-120">Come ulteriore vantaggio, il server non deve archiviare le chiavi di sessione che usa con i relativi client.</span><span class="sxs-lookup"><span data-stu-id="39d2a-120">As an added benefit, the server does not need to store the session keys it uses with its clients.</span></span> <span data-ttu-id="39d2a-121">Ogni cliente ha la responsabilità di gestire il ticket per il server nella propria cache dei ticket e di presentare il ticket ogni volta che accede al server.</span><span class="sxs-lookup"><span data-stu-id="39d2a-121">It is each client's responsibility to manage the ticket for the server in its ticket cache and to present that ticket each time it accesses the server.</span></span> <span data-ttu-id="39d2a-122">Ogni volta che il server riceve un ticket da un client, usa la chiave master per decrittografare il ticket ed estrarre la chiave della sessione.</span><span class="sxs-lookup"><span data-stu-id="39d2a-122">Whenever the server receives a ticket from a client, it uses its master key to decrypt the ticket and extract the session key.</span></span> <span data-ttu-id="39d2a-123">Quando il server non necessita più della chiave della sessione, la chiave viene eliminata.</span><span class="sxs-lookup"><span data-stu-id="39d2a-123">When the server no longer needs the session key, the key is deleted.</span></span>

<span data-ttu-id="39d2a-124">Il client non deve accedere al KDC ogni volta che desidera accedere a questo particolare server.</span><span class="sxs-lookup"><span data-stu-id="39d2a-124">The client does not need to access the KDC each time it wants access to this particular server.</span></span> <span data-ttu-id="39d2a-125">I ticket possono essere riutilizzati.</span><span class="sxs-lookup"><span data-stu-id="39d2a-125">Tickets can be reused.</span></span> <span data-ttu-id="39d2a-126">Come precauzione contro la possibilità di furto di ticket, i ticket hanno una data di scadenza, specificata dal KDC nella struttura del ticket.</span><span class="sxs-lookup"><span data-stu-id="39d2a-126">As a precaution against the possibility of ticket theft, tickets have an expiration time, specified by the KDC in the ticket structure.</span></span> <span data-ttu-id="39d2a-127">Il periodo di validità di un ticket dipende dal criterio Kerberos per l'area di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="39d2a-127">How long a ticket is valid depends on Kerberos policy for the realm.</span></span> <span data-ttu-id="39d2a-128">In genere, i ticket sono validi per non più di otto ore, per la durata di una normale [*sessione di accesso*](../secgloss/l-gly.md).</span><span class="sxs-lookup"><span data-stu-id="39d2a-128">Typically, tickets are good for no longer than eight hours, about the length of a normal [*logon session*](../secgloss/l-gly.md).</span></span> <span data-ttu-id="39d2a-129">Quando l'utente a una workstation client si disconnette, la cache dei ticket client viene scaricata e tutti i ticket e le chiavi della sessione client vengono eliminati definitivamente.</span><span class="sxs-lookup"><span data-stu-id="39d2a-129">When the user at a client workstation logs off, the client ticket cache is flushed and all tickets and client session keys are destroyed.</span></span>

 

 
