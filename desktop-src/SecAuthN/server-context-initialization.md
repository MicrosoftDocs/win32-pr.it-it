---
description: Come il client, il server acquisisce anche un handle di credenziali per essere pronto a rispondere a una richiesta di autenticazione in ingresso dal client.
ms.assetid: 2a0aeadf-e099-4264-8522-e498f437bf75
title: Inizializzazione del contesto server
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1362c8fd71e079392f10a8e35f76ad511de3c49f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103756416"
---
# <a name="server-context-initialization"></a><span data-ttu-id="d8603-103">Inizializzazione del contesto server</span><span class="sxs-lookup"><span data-stu-id="d8603-103">Server Context Initialization</span></span>

<span data-ttu-id="d8603-104">Come il client, il server acquisisce anche un handle di [*credenziali*](../secgloss/c-gly.md) per essere pronto a rispondere a una richiesta di autenticazione in ingresso dal client.</span><span class="sxs-lookup"><span data-stu-id="d8603-104">Like the client, the server also acquires a [*credentials*](../secgloss/c-gly.md) handle to be ready to respond to an incoming authentication request from the client.</span></span> <span data-ttu-id="d8603-105">Le credenziali del server vengono utilizzate per autenticare il server nel client in [*protocolli di sicurezza*](../secgloss/s-gly.md) che supportano l'autenticazione server o l'autenticazione reciproca.</span><span class="sxs-lookup"><span data-stu-id="d8603-105">Server credentials are used to authenticate the server to the client in [*security protocols*](../secgloss/s-gly.md) that support server authentication or mutual authentication.</span></span> <span data-ttu-id="d8603-106">Il server ottiene un handle per le credenziali definite dall'account del servizio utilizzato per avviare il server.</span><span class="sxs-lookup"><span data-stu-id="d8603-106">The server obtains a handle to its credentials defined by the service account used to start the server.</span></span> <span data-ttu-id="d8603-107">Esegue questa operazione chiamando [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea).</span><span class="sxs-lookup"><span data-stu-id="d8603-107">It does so by calling [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea).</span></span>

<span data-ttu-id="d8603-108">Il server è in grado di acquisire l'handle delle credenziali e di passare allo stato di ascolto oppure può attendere lo stato di ascolto fino a quando non arriva una richiesta di connessione e quindi acquisire un handle di credenziali in ingresso.</span><span class="sxs-lookup"><span data-stu-id="d8603-108">The server can acquire its credentials handle and then go into a listen state, or it can wait in a listen state until a connection request arrives and then acquire an inbound credentials handle.</span></span> <span data-ttu-id="d8603-109">Per ulteriori informazioni sulle funzioni di credenziali, vedere [gestione delle](authentication-functions.md)credenziali.</span><span class="sxs-lookup"><span data-stu-id="d8603-109">For more information on credentials functions, see [Credential Management](authentication-functions.md).</span></span>

<span data-ttu-id="d8603-110">Quando il server riceve un messaggio di richiesta di connessione da un client, crea un [*contesto di sicurezza*](../secgloss/s-gly.md) locale per il client usando [**AcceptSecurityContext (generale)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).</span><span class="sxs-lookup"><span data-stu-id="d8603-110">When the server receives a connection request message from a client, it creates a local [*security context*](../secgloss/s-gly.md) for the client using [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).</span></span> <span data-ttu-id="d8603-111">Il server usa questo contesto di sicurezza locale per eseguire richieste future dallo stesso client.</span><span class="sxs-lookup"><span data-stu-id="d8603-111">The server uses this local security context to carry out future requests by the same client.</span></span> <span data-ttu-id="d8603-112">Per ulteriori informazioni sulle funzioni di contesto, vedere [gestione del contesto](authentication-functions.md).</span><span class="sxs-lookup"><span data-stu-id="d8603-112">For more information on context functions, see [Context Management](authentication-functions.md).</span></span>

<span data-ttu-id="d8603-113">Il server controlla lo stato restituito e il descrittore del buffer di output per assicurarsi che non siano presenti errori fino a questo momento e può rifiutare la richiesta di connessione in caso di errori.</span><span class="sxs-lookup"><span data-stu-id="d8603-113">The server checks the return status and output buffer descriptor to ensure there are no errors so far, and can reject the connection request if there are errors.</span></span> <span data-ttu-id="d8603-114">Se sono presenti informazioni nel buffer di output restituito da [**AcceptSecurityContext (generale)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), il buffer viene aggregato in un messaggio di risposta al client.</span><span class="sxs-lookup"><span data-stu-id="d8603-114">If there is information in the output buffer returned by [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), it bundles that buffer into a response message to the client.</span></span>

<span data-ttu-id="d8603-115">Qualsiasi buffer di output da [**AcceptSecurityContext (generale)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) deve essere restituito al client.</span><span class="sxs-lookup"><span data-stu-id="d8603-115">Any output buffer from [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) must be sent back to the client.</span></span> <span data-ttu-id="d8603-116">Inoltre, se lo stato di restituzione richiede che il protocollo continui (il secondo \_ \_ è stato \_ necessario o il secondo \_ \_ completamento \_ e \_ continua), è necessario un altro scambio di messaggi con il client.</span><span class="sxs-lookup"><span data-stu-id="d8603-116">In addition, if the return status requires the protocol to continue (SEC\_I\_CONTINUE\_NEEDED or SEC\_I\_COMPLETE\_AND\_CONTINUE), another message exchange with the client is required.</span></span>

<span data-ttu-id="d8603-117">Per le gambe aggiuntive, il server attende che il client risponda con un altro messaggio.</span><span class="sxs-lookup"><span data-stu-id="d8603-117">For additional legs, the server waits for the client to respond with another message.</span></span> <span data-ttu-id="d8603-118">Questa attesa può essere scaduta in modo da evitare un attacco Denial of Service in cui un client non risponde mai, causando un thread server e presto tutti i thread del server, per non rispondere.</span><span class="sxs-lookup"><span data-stu-id="d8603-118">This wait can be timed out so as to avoid a denial of service attack where a client purposely never responds, causing a server thread and soon, all server threads, to stop responding.</span></span>

 

 
