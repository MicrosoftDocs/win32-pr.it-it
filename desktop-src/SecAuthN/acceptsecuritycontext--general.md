---
description: Consente al componente server di un'applicazione di trasporto di stabilire un [*contesto di sicurezza*](../secgloss/s-gly.md) tra il server e un client remoto.
ms.assetid: eaa15fed-4438-4e43-9be3-aa100ca453c7
title: Funzione AcceptSecurityContext (General) (SSPI. h)
ms.topic: reference
ms.date: 07/25/2019
ms.openlocfilehash: 41b3220e9304f63e1a6ac4f77b609e3cbbac8741
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103882377"
---
# <a name="acceptsecuritycontext-general-function"></a><span data-ttu-id="d4bbc-103">Funzione AcceptSecurityContext (General)</span><span class="sxs-lookup"><span data-stu-id="d4bbc-103">AcceptSecurityContext (General) function</span></span>

<span data-ttu-id="d4bbc-104">La funzione **AcceptSecurityContext (generale)** consente al componente server di un'applicazione di trasporto di stabilire un [*contesto di sicurezza*](../secgloss/s-gly.md) tra il server e un client remoto.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-104">The **AcceptSecurityContext (General)** function enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client.</span></span> <span data-ttu-id="d4bbc-105">Il client remoto utilizza la funzione [**InitializeSecurityContext (generale)**](initializesecuritycontext--general.md) per avviare il processo di creazione di un [*contesto di sicurezza*](../secgloss/s-gly.md).</span><span class="sxs-lookup"><span data-stu-id="d4bbc-105">The remote client uses the [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) function to start the process of establishing a [*security context*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="d4bbc-106">Il server può richiedere uno o più token di risposta dal client remoto per completare la creazione del [*contesto di sicurezza*](../secgloss/s-gly.md).</span><span class="sxs-lookup"><span data-stu-id="d4bbc-106">The server can require one or more reply tokens from the remote client to complete establishing the [*security context*](../secgloss/s-gly.md).</span></span>

<span data-ttu-id="d4bbc-107">Per informazioni sull'utilizzo di questa funzione con un [*Security Support Provider*](../secgloss/s-gly.md) specifico (SSP), vedere gli argomenti seguenti.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-107">For information about using this function with a specific [*security support provider*](../secgloss/s-gly.md) (SSP), see the following topics.</span></span>



| <span data-ttu-id="d4bbc-108">Argomento</span><span class="sxs-lookup"><span data-stu-id="d4bbc-108">Topic</span></span>                                                                          | <span data-ttu-id="d4bbc-109">Descrizione</span><span class="sxs-lookup"><span data-stu-id="d4bbc-109">Description</span></span>                                                                                                                                                                                                                                                                      |
|--------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="d4bbc-110">**AcceptSecurityContext (CredSSP)**</span><span class="sxs-lookup"><span data-stu-id="d4bbc-110">**AcceptSecurityContext (CredSSP)**</span></span>](acceptsecuritycontext--credssp.md)     | <span data-ttu-id="d4bbc-111">Consente al componente server di un'applicazione di trasporto di stabilire un [*contesto di sicurezza*](../secgloss/s-gly.md) tra il server e un client remoto utilizzando Credential Security Support Provider (CredSSP).</span><span class="sxs-lookup"><span data-stu-id="d4bbc-111">Allows the server component of a transport application establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client by using Credential Security Support Provider (CredSSP).</span></span><br/> |
| [<span data-ttu-id="d4bbc-112">**AcceptSecurityContext (digest)**</span><span class="sxs-lookup"><span data-stu-id="d4bbc-112">**AcceptSecurityContext (Digest)**</span></span>](acceptsecuritycontext--digest.md)       | <span data-ttu-id="d4bbc-113">Consente al componente server di un'applicazione di trasporto di stabilire un [*contesto di sicurezza*](../secgloss/s-gly.md) tra il server e un client remoto che utilizza il digest.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-113">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Digest.</span></span><br/>                                                                                                                  |
| [<span data-ttu-id="d4bbc-114">**AcceptSecurityContext (Kerberos)**</span><span class="sxs-lookup"><span data-stu-id="d4bbc-114">**AcceptSecurityContext (Kerberos)**</span></span>](acceptsecuritycontext--kerberos.md)   | <span data-ttu-id="d4bbc-115">Consente al componente server di un'applicazione di trasporto di stabilire un [*contesto di sicurezza*](../secgloss/s-gly.md) tra il server e un client remoto che utilizza Kerberos.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-115">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Kerberos.</span></span><br/>                                                                                                                |
| [<span data-ttu-id="d4bbc-116">**AcceptSecurityContext (negoziazione)**</span><span class="sxs-lookup"><span data-stu-id="d4bbc-116">**AcceptSecurityContext (Negotiate)**</span></span>](acceptsecuritycontext--negotiate.md) | <span data-ttu-id="d4bbc-117">Consente al componente server di un'applicazione di trasporto di stabilire un [*contesto di sicurezza*](../secgloss/s-gly.md) tra il server e un client remoto che utilizza Negotiate.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-117">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Negotiate.</span></span><br/>                                                                                                               |
| [<span data-ttu-id="d4bbc-118">**AcceptSecurityContext (NTLM)**</span><span class="sxs-lookup"><span data-stu-id="d4bbc-118">**AcceptSecurityContext (NTLM)**</span></span>](acceptsecuritycontext--ntlm.md)           | <span data-ttu-id="d4bbc-119">Consente al componente server di un'applicazione di trasporto di stabilire un [*contesto di sicurezza*](../secgloss/s-gly.md) tra il server e un client remoto che utilizza NTLM.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-119">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using NTLM.</span></span><br/>                                                                                                                    |
| [<span data-ttu-id="d4bbc-120">**AcceptSecurityContext (Schannel)**</span><span class="sxs-lookup"><span data-stu-id="d4bbc-120">**AcceptSecurityContext (Schannel)**</span></span>](acceptsecuritycontext--schannel.md)   | <span data-ttu-id="d4bbc-121">Consente al componente server di un'applicazione di trasporto di stabilire un [*contesto di sicurezza*](../secgloss/s-gly.md) tra il server e un client remoto che utilizza Schannel.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-121">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Schannel.</span></span><br/>                                                                                                                |



 

## <a name="syntax"></a><span data-ttu-id="d4bbc-122">Sintassi</span><span class="sxs-lookup"><span data-stu-id="d4bbc-122">Syntax</span></span>


```C++
SECURITY_STATUS SEC_Entry AcceptSecurityContext(
  _In_opt_    PCredHandle    phCredential,
  _Inout_opt_ PCtxtHandle    phContext,
  _In_opt_    PSecBufferDesc pInput,
  _In_        ULONG          fContextReq,
  _In_        ULONG          TargetDataRep,
  _Inout_opt_ PCtxtHandle    phNewContext,
  _Inout_opt_ PSecBufferDesc pOutput,
  _Out_       PULONG         pfContextAttr,
  _Out_opt_   PTimeStamp     ptsExpiry
);
```



## <a name="parameters"></a><span data-ttu-id="d4bbc-123">Parametri</span><span class="sxs-lookup"><span data-stu-id="d4bbc-123">Parameters</span></span>

<dl> <dt>

<span data-ttu-id="d4bbc-124">*phCredential* \[ in, facoltativo\]</span><span class="sxs-lookup"><span data-stu-id="d4bbc-124">*phCredential* \[in, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="d4bbc-125">Handle per le credenziali del server.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-125">A handle to the credentials of the server.</span></span> <span data-ttu-id="d4bbc-126">Il server chiama la funzione [**AcquireCredentialsHandle (generale)**](acquirecredentialshandle--general.md) con SECPKG \_ cred \_ in ingresso o SECPKG \_ cred \_ entrambi impostati per recuperare questo handle.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-126">The server calls the [**AcquireCredentialsHandle (General)**](acquirecredentialshandle--general.md) function with either the SECPKG\_CRED\_INBOUND or SECPKG\_CRED\_BOTH flag set to retrieve this handle.</span></span>

</dd> <dt>

<span data-ttu-id="d4bbc-127">*phContext* \[ in uscita\]</span><span class="sxs-lookup"><span data-stu-id="d4bbc-127">*phContext* \[in, out\]</span></span>
</dt> <dd>

<span data-ttu-id="d4bbc-128">Puntatore a una struttura [CtxtHandle](sspi-handles.md) .</span><span class="sxs-lookup"><span data-stu-id="d4bbc-128">A pointer to a [CtxtHandle](sspi-handles.md) structure.</span></span> <span data-ttu-id="d4bbc-129">Alla prima chiamata a **AcceptSecurityContext (generale)**, questo puntatore è **null**.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-129">On the first call to **AcceptSecurityContext (General)**, this pointer is **NULL**.</span></span> <span data-ttu-id="d4bbc-130">Nelle chiamate successive, *phContext* è l'handle per il contesto parzialmente formattato che è stato restituito nel parametro *phNewContext* dalla prima chiamata.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-130">On subsequent calls, *phContext* is the handle to the partially formed context that was returned in the *phNewContext* parameter by the first call.</span></span>

</dd> <dt>

<span data-ttu-id="d4bbc-131">*Pinput* \[ in, facoltativo\]</span><span class="sxs-lookup"><span data-stu-id="d4bbc-131">*pInput* \[in, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="d4bbc-132">Puntatore a una struttura [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) generata da una chiamata client a [**InitializeSecurityContext (generale)**](initializesecuritycontext--general.md) che contiene il descrittore del buffer di input.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-132">A pointer to a [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) structure generated by a client call to [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) that contains the input buffer descriptor.</span></span>

<span data-ttu-id="d4bbc-133">Quando si usa SSP Schannel, il primo buffer deve essere di tipo \_ token SECBUFFER e contenere il token di sicurezza ricevuto dal client.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-133">When using the Schannel SSP, the first buffer must be of type SECBUFFER\_TOKEN and contain the security token received from the client.</span></span> <span data-ttu-id="d4bbc-134">Il secondo buffer deve essere di tipo SECBUFFER \_ vuoto.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-134">The second buffer should be of type SECBUFFER\_EMPTY.</span></span>

<span data-ttu-id="d4bbc-135">Quando si utilizzano i SSP Negotiate, Kerberos o NTLM, è possibile specificare le informazioni sull'associazione di canale passando una struttura [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) di tipo **\_ \_ binding di canale SecBuffer** , oltre ai buffer generati dalla chiamata alla funzione [**InitializeSecurityContext (generale)**](initializesecuritycontext--general.md) .</span><span class="sxs-lookup"><span data-stu-id="d4bbc-135">When using the Negotiate, Kerberos, or NTLM SSPs, channel binding information can be specified by passing in a [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) structure of type **SECBUFFER\_CHANNEL\_BINDINGS** in addition to the buffers generated by the call to the [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) function.</span></span> <span data-ttu-id="d4bbc-136">È possibile ottenere le informazioni di associazione del canale per il buffer di associazione del canale chiamando la funzione [**QueryContextAttributes (Schannel)**](querycontextattributes--schannel.md) nel contesto Schannel utilizzato dal client per l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-136">The channel binding information for the channel binding buffer can be obtained by calling the [**QueryContextAttributes (Schannel)**](querycontextattributes--schannel.md) function on the Schannel context the client used to authenticate.</span></span>

</dd> <dt>

<span data-ttu-id="d4bbc-137">*fContextReq* \[ in\]</span><span class="sxs-lookup"><span data-stu-id="d4bbc-137">*fContextReq* \[in\]</span></span>
</dt> <dd>

<span data-ttu-id="d4bbc-138">Flag di bit che specificano gli attributi necessari al server per stabilire il contesto.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-138">Bit flags that specify the attributes required by the server to establish the context.</span></span> <span data-ttu-id="d4bbc-139">I flag di bit possono essere combinati usando **operazioni OR bit per** bit.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-139">Bit flags can be combined by using bitwise-**OR** operations.</span></span> <span data-ttu-id="d4bbc-140">Il parametro può essere costituito da uno o più dei valori seguenti.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-140">This parameter can be one or more of the following values.</span></span>



| <span data-ttu-id="d4bbc-141">Valore</span><span class="sxs-lookup"><span data-stu-id="d4bbc-141">Value</span></span>                                                                                                                                                                                                                                          | <span data-ttu-id="d4bbc-142">Significato</span><span class="sxs-lookup"><span data-stu-id="d4bbc-142">Meaning</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="ASC_REQ_ALLOCATE_MEMORY"></span><span id="asc_req_allocate_memory"></span><dl> <span data-ttu-id="d4bbc-143"><dt>**ASC \_ req \_ alloca \_ memoria**</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-143"><dt>**ASC\_REQ\_ALLOCATE\_MEMORY**</dt></span></span> </dl>                                                  | <span data-ttu-id="d4bbc-144">Digest e Schannel assegnerà automaticamente i buffer di output.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-144">Digest and Schannel will allocate output buffers for you.</span></span> <span data-ttu-id="d4bbc-145">Al termine dell'utilizzo dei buffer di output, è possibile liberarli chiamando la funzione [**FreeContextBuffer**](/windows/win32/api/sspi/nf-sspi-freecontextbuffer) .</span><span class="sxs-lookup"><span data-stu-id="d4bbc-145">When you have finished using the output buffers, free them by calling the [**FreeContextBuffer**](/windows/win32/api/sspi/nf-sspi-freecontextbuffer) function.</span></span><br/>                                                                                                                                                                                                                                                                                |
| <span id="ASC_REQ_ALLOW_MISSING_BINDINGS"></span><span id="asc_req_allow_missing_bindings"></span><dl> <span data-ttu-id="d4bbc-146"><dt>**ASC \_ req \_ consente \_ le \_ associazioni mancanti**</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-146"><dt>**ASC\_REQ\_ALLOW\_MISSING\_BINDINGS**</dt></span></span> </dl>                            | <span data-ttu-id="d4bbc-147">Indica che il digest non richiede binding di canale per i canali interni ed esterni.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-147">Indicates that Digest does not require channel bindings for both inner and outer channels.</span></span> <span data-ttu-id="d4bbc-148">Questo valore viene utilizzato per la compatibilità con le versioni precedenti quando il supporto per l'associazione di canale dell'endpoint non è noto.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-148">This value is used for backward compatibility when support for endpoint channel binding is not known.</span></span><br/> <span data-ttu-id="d4bbc-149">Questo valore si escludono a vicenda con le **\_ \_ \_ associazioni proxy ASC req**.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-149">This value is mutually exclusive with **ASC\_REQ\_PROXY\_BINDINGS**.</span></span><br/> <span data-ttu-id="d4bbc-150">Questo valore è supportato solo dal provider SSP del digest.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-150">This value is supported only by the Digest SSP.</span></span><br/> <span data-ttu-id="d4bbc-151">**Windows server 2008, Windows Vista, Windows server 2003 e Windows XP:** Questo valore non è supportato.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-151">**Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:** This value is not supported.</span></span><br/> <br/> |
| <span id="ASC_REQ_CONFIDENTIALITY"></span><span id="asc_req_confidentiality"></span><dl> <span data-ttu-id="d4bbc-152"><dt>**\_ \_ riservatezza ASC req**</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-152"><dt>**ASC\_REQ\_CONFIDENTIALITY**</dt></span></span> </dl>                                                   | <span data-ttu-id="d4bbc-153">Crittografare e decrittografare i messaggi.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-153">Encrypt and decrypt messages.</span></span> <br/> <span data-ttu-id="d4bbc-154">Il provider SSP digest supporta questo flag solo per SASL.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-154">The Digest SSP supports this flag for SASL only.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="ASC_REQ_CONNECTION"></span><span id="asc_req_connection"></span><dl> <span data-ttu-id="d4bbc-155"><dt>**\_connessione ASC req \_**</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-155"><dt>**ASC\_REQ\_CONNECTION**</dt></span></span> </dl>                                                                  | <span data-ttu-id="d4bbc-156">Il [*contesto di sicurezza*](../secgloss/s-gly.md) non gestirà i messaggi di formattazione.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-156">The [*security context*](../secgloss/s-gly.md) will not handle formatting messages.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="ASC_REQ_DELEGATE"></span><span id="asc_req_delegate"></span><dl> <span data-ttu-id="d4bbc-157"><dt>**\_delega ASC req \_**</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-157"><dt>**ASC\_REQ\_DELEGATE**</dt></span></span> </dl>                                                                        | <span data-ttu-id="d4bbc-158">Il server può rappresentare il client.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-158">The server is allowed to impersonate the client.</span></span> <span data-ttu-id="d4bbc-159">Valido per Kerberos.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-159">Valid for Kerberos.</span></span> <span data-ttu-id="d4bbc-160">Ignorare questo flag per la [*delega vincolata*](../secgloss/c-gly.md).</span><span class="sxs-lookup"><span data-stu-id="d4bbc-160">Ignore this flag for [*constrained delegation*](../secgloss/c-gly.md).</span></span><br/>                                                                                                                                                                                                                                                             |
| <span id="ASC_REQ_EXTENDED_ERROR"></span><span id="asc_req_extended_error"></span><dl> <span data-ttu-id="d4bbc-161"><dt>**\_ \_ errore esteso di ASC req \_**</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-161"><dt>**ASC\_REQ\_EXTENDED\_ERROR**</dt></span></span> </dl>                                                     | <span data-ttu-id="d4bbc-162">Quando si verificano errori, viene inviata una notifica all'entità remota.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-162">When errors occur, the remote party will be notified.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span id="ASC_REQ_HTTP__0x10000000_"></span><span id="asc_req_http__0x10000000_"></span><span id="ASC_REQ_HTTP__0X10000000_"></span><dl> <span data-ttu-id="d4bbc-163"><dt>**ASC \_ req \_ http (0x10000000)**</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-163"><dt>**ASC\_REQ\_HTTP (0x10000000)**</dt></span></span> </dl> | <span data-ttu-id="d4bbc-164">Usare digest per HTTP.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-164">Use Digest for HTTP.</span></span> <span data-ttu-id="d4bbc-165">Omettere questo flag per utilizzare il digest come meccanismo SASL.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-165">Omit this flag to use Digest as an SASL mechanism.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span id="ASC_REQ_INTEGRITY"></span><span id="asc_req_integrity"></span><dl> <span data-ttu-id="d4bbc-166"><dt>**integrità di ASC \_ req \_**</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-166"><dt>**ASC\_REQ\_INTEGRITY**</dt></span></span> </dl>                                                                     | <span data-ttu-id="d4bbc-167">Firmare i messaggi e verificare le firme.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-167">Sign messages and verify signatures.</span></span><br/> <span data-ttu-id="d4bbc-168">Schannel non supporta questo flag.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-168">Schannel does not support this flag.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                        |
| <span id="ASC_REQ_MUTUAL_AUTH"></span><span id="asc_req_mutual_auth"></span><dl> <span data-ttu-id="d4bbc-169"><dt>**\_ \_ autenticazione reciproca ASC req \_**</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-169"><dt>**ASC\_REQ\_MUTUAL\_AUTH**</dt></span></span> </dl>                                                              | <span data-ttu-id="d4bbc-170">È necessario che il client fornisca un certificato da usare per l'autenticazione client.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-170">The client is required to supply a certificate to be used for client authentication.</span></span><br/> <span data-ttu-id="d4bbc-171">Questo flag è supportato solo da Schannel.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-171">This flag is supported only by Schannel.</span></span><br/>                                                                                                                                                                                                                                                                                                                                    |
| <span id="ASC_REQ_PROXY_BINDINGS"></span><span id="asc_req_proxy_bindings"></span><dl> <span data-ttu-id="d4bbc-172"><dt>**\_ \_ Binding proxy ASC \_ req**</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-172"><dt>**ASC\_REQ\_PROXY\_BINDINGS**</dt></span></span> </dl>                                                     | <span data-ttu-id="d4bbc-173">Indica che il digest richiede l'associazione di canale.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-173">Indicates that Digest requires channel binding.</span></span><br/> <span data-ttu-id="d4bbc-174">Questo valore si escludono a vicenda con **ASC \_ req consente le \_ \_ \_ associazioni mancanti**.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-174">This value is mutually exclusive with **ASC\_REQ\_ALLOW\_MISSING\_BINDINGS**.</span></span><br/> <span data-ttu-id="d4bbc-175">Questo valore è supportato solo dal provider SSP del digest.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-175">This value is supported only by the Digest SSP.</span></span><br/> <span data-ttu-id="d4bbc-176">**Windows server 2008, Windows Vista, Windows server 2003 e Windows XP:** Questo valore non è supportato.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-176">**Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:** This value is not supported.</span></span><br/> <br/>                                                                                                                                         |
| <span id="ASC_REQ_REPLAY_DETECT"></span><span id="asc_req_replay_detect"></span><dl> <span data-ttu-id="d4bbc-177"><dt>**\_ \_ rilevamento riesecuzione di ASC req \_**</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-177"><dt>**ASC\_REQ\_REPLAY\_DETECT**</dt></span></span> </dl>                                                        | <span data-ttu-id="d4bbc-178">Rilevare i pacchetti riprodotti.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-178">Detect replayed packets.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="ASC_REQ_SEQUENCE_DETECT"></span><span id="asc_req_sequence_detect"></span><dl> <span data-ttu-id="d4bbc-179"><dt>**\_ \_ rilevamento sequenza ASC \_ req**</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-179"><dt>**ASC\_REQ\_SEQUENCE\_DETECT**</dt></span></span> </dl>                                                  | <span data-ttu-id="d4bbc-180">Rilevare i messaggi ricevuti fuori sequenza.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-180">Detect messages received out of sequence.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="ASC_REQ_STREAM"></span><span id="asc_req_stream"></span><dl> <span data-ttu-id="d4bbc-181"><dt>**flusso di ASC \_ req \_**</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-181"><dt>**ASC\_REQ\_STREAM**</dt></span></span> </dl>                                                                              | <span data-ttu-id="d4bbc-182">Supportare una connessione orientata al flusso.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-182">Support a stream-oriented connection.</span></span><br/> <span data-ttu-id="d4bbc-183">Questo flag è supportato solo da Schannel.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-183">This flag is supported only by Schannel.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                   |



 

<span data-ttu-id="d4bbc-184">Per i flag di attributo possibili e i relativi significati, vedere [requisiti di contesto](context-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="d4bbc-184">For possible attribute flags and their meanings, see [Context Requirements](context-requirements.md).</span></span> <span data-ttu-id="d4bbc-185">I flag usati per questo parametro sono preceduti dal prefisso ASC \_ req, ad esempio, ASC \_ req \_ delegate.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-185">Flags used for this parameter are prefixed with ASC\_REQ, for example, ASC\_REQ\_DELEGATE.</span></span>

<span data-ttu-id="d4bbc-186">Gli attributi richiesti potrebbero non essere supportati dal client.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-186">The requested attributes may not be supported by the client.</span></span> <span data-ttu-id="d4bbc-187">Per ulteriori informazioni, vedere il parametro *pfContextAttr* .</span><span class="sxs-lookup"><span data-stu-id="d4bbc-187">For more information, see the *pfContextAttr* parameter.</span></span>

</dd> <dt>

<span data-ttu-id="d4bbc-188">*TargetDataRep* \[ in\]</span><span class="sxs-lookup"><span data-stu-id="d4bbc-188">*TargetDataRep* \[in\]</span></span>
</dt> <dd>

<span data-ttu-id="d4bbc-189">Rappresentazione dei dati, ad esempio l'ordinamento dei byte, sulla destinazione.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-189">The data representation, such as byte ordering, on the target.</span></span> <span data-ttu-id="d4bbc-190">Questo parametro può essere una sicurezza \_ nativa \_ DREP o DREP della rete di sicurezza \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="d4bbc-190">This parameter can be either SECURITY\_NATIVE\_DREP or SECURITY\_NETWORK\_DREP.</span></span>

<span data-ttu-id="d4bbc-191">Questo parametro non viene usato con SSP Schannel o digest.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-191">This parameter is not used with Schannel or Digest SSPs.</span></span> <span data-ttu-id="d4bbc-192">Quando si usano SSP Schannel o digest, specificare zero per questo parametro.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-192">When you use Schannel or Digest SSPs, specify zero for this parameter.</span></span>

</dd> <dt>

<span data-ttu-id="d4bbc-193">*phNewContext* \[ in, out, facoltativo\]</span><span class="sxs-lookup"><span data-stu-id="d4bbc-193">*phNewContext* \[in, out, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="d4bbc-194">Puntatore a una struttura [CtxtHandle](sspi-handles.md) .</span><span class="sxs-lookup"><span data-stu-id="d4bbc-194">A pointer to a [CtxtHandle](sspi-handles.md) structure.</span></span> <span data-ttu-id="d4bbc-195">Alla prima chiamata a **AcceptSecurityContext (generale)**, questo puntatore riceve il nuovo handle di contesto.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-195">On the first call to **AcceptSecurityContext (General)**, this pointer receives the new context handle.</span></span> <span data-ttu-id="d4bbc-196">Nelle chiamate successive, *phNewContext* può corrispondere all'handle specificato nel parametro *phContext* .</span><span class="sxs-lookup"><span data-stu-id="d4bbc-196">On subsequent calls, *phNewContext* can be the same as the handle specified in the *phContext* parameter.</span></span>

</dd> <dt>

<span data-ttu-id="d4bbc-197">*pOutput* \[ in, out, facoltativo\]</span><span class="sxs-lookup"><span data-stu-id="d4bbc-197">*pOutput* \[in, out, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="d4bbc-198">Puntatore a una struttura [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) che contiene il descrittore del buffer di output.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-198">A pointer to a [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) structure that contains the output buffer descriptor.</span></span> <span data-ttu-id="d4bbc-199">Questo buffer viene inviato al client per l'input in chiamate aggiuntive a [**InitializeSecurityContext (generale)**](initializesecuritycontext--general.md).</span><span class="sxs-lookup"><span data-stu-id="d4bbc-199">This buffer is sent to the client for input into additional calls to [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md).</span></span> <span data-ttu-id="d4bbc-200">Un buffer di output può essere generato anche se la funzione restituisce SEC \_ E \_ OK.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-200">An output buffer may be generated even if the function returns SEC\_E\_OK.</span></span> <span data-ttu-id="d4bbc-201">Qualsiasi buffer generato deve essere restituito all'applicazione client.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-201">Any buffer generated must be sent back to the client application.</span></span>

<span data-ttu-id="d4bbc-202">Quando si usa Schannel, nell'output questo buffer riceve un token per il [*contesto di sicurezza*](../secgloss/s-gly.md).</span><span class="sxs-lookup"><span data-stu-id="d4bbc-202">When using Schannel, on output, this buffer receives a token for the [*security context*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="d4bbc-203">Il token deve essere inviato al client.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-203">The token must be sent to the client.</span></span> <span data-ttu-id="d4bbc-204">La funzione può anche restituire un buffer di tipo SECBUFFER \_ extra.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-204">The function can also return a buffer of type SECBUFFER\_EXTRA.</span></span> <span data-ttu-id="d4bbc-205">Inoltre, il chiamante deve passare un buffer di tipo **SECBUFFER \_ Alert**.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-205">In addition, the caller must pass in a buffer of type **SECBUFFER\_ALERT**.</span></span> <span data-ttu-id="d4bbc-206">Nell'output, se viene generato un avviso, questo buffer contiene informazioni sull'avviso e la funzione ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-206">On output, if an alert is generated, this buffer contains information about that alert, and the function fails.</span></span>

</dd> <dt>

<span data-ttu-id="d4bbc-207">*pfContextAttr* \[ out\]</span><span class="sxs-lookup"><span data-stu-id="d4bbc-207">*pfContextAttr* \[out\]</span></span>
</dt> <dd>

<span data-ttu-id="d4bbc-208">Puntatore a una variabile che riceve un set di flag di bit che indicano gli attributi del contesto stabilito.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-208">A pointer to a variable that receives a set of bit flags that indicate the attributes of the established context.</span></span> <span data-ttu-id="d4bbc-209">Per una descrizione dei vari attributi, vedere [requisiti di contesto](context-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="d4bbc-209">For a description of the various attributes, see [Context Requirements](context-requirements.md).</span></span> <span data-ttu-id="d4bbc-210">I flag usati per questo parametro sono preceduti dal prefisso ASC \_ RET, ad esempio ASC \_ ret \_ delegate.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-210">Flags used for this parameter are prefixed with ASC\_RET, for example, ASC\_RET\_DELEGATE.</span></span>

<span data-ttu-id="d4bbc-211">Non controllare gli attributi correlati alla sicurezza finché la chiamata di funzione finale non viene completata correttamente.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-211">Do not check for security-related attributes until the final function call returns successfully.</span></span> <span data-ttu-id="d4bbc-212">I flag di attributo non correlati alla sicurezza, ad esempio \_ il \_ flag ASC RET allocazioned \_ Memory, possono essere controllati prima della restituzione finale.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-212">Attribute flags not related to security, such as the ASC\_RET\_ALLOCATED\_MEMORY flag, can be checked before the final return.</span></span>

</dd> <dt>

<span data-ttu-id="d4bbc-213">*ptsTimeStamp* \[ out, facoltativo\]</span><span class="sxs-lookup"><span data-stu-id="d4bbc-213">*ptsTimeStamp* \[out, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="d4bbc-214">Puntatore a una struttura di [**timestamp**](timestamp.md) che riceve l'ora di scadenza del contesto.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-214">A pointer to a [**TimeStamp**](timestamp.md) structure that receives the expiration time of the context.</span></span> <span data-ttu-id="d4bbc-215">È consigliabile che il [*pacchetto di sicurezza*](../secgloss/s-gly.md) restituisca sempre questo valore nell'ora locale.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-215">We recommend that the [*security package*](../secgloss/s-gly.md) always return this value in local time.</span></span>

<span data-ttu-id="d4bbc-216">Questo parametro è impostato su un tempo massimo costante.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-216">This parameter is set to a constant maximum time.</span></span> <span data-ttu-id="d4bbc-217">Non esiste alcuna data di scadenza per il [*contesto di sicurezza*](../secgloss/s-gly.md)del digest o per le credenziali o quando si utilizza il provider SSP del digest.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-217">There is no expiration time for Digest [*security context*](../secgloss/s-gly.md)s or credentials or when using the Digest SSP.</span></span>

<span data-ttu-id="d4bbc-218">Questa opzione è facoltativa quando si usa SSP Schannel.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-218">This is optional when using the Schannel SSP.</span></span> <span data-ttu-id="d4bbc-219">Quando la parte remota ha fornito un certificato da usare per l'autenticazione, questo parametro riceve l'ora di scadenza per il certificato.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-219">When the remote party has supplied a certificate to be used for authentication, this parameter receives the expiration time for that certificate.</span></span> <span data-ttu-id="d4bbc-220">Se non è stato fornito alcun certificato, viene restituito un valore di tempo massimo.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-220">If no certificate was supplied, a maximum time value is returned.</span></span>

> [!Note]  
> <span data-ttu-id="d4bbc-221">Fino all'ultima chiamata del processo di autenticazione, l'ora di scadenza per il contesto può non essere corretta perché verranno fornite ulteriori informazioni durante le fasi successive della negoziazione.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-221">Until the last call of the authentication process, the expiration time for the context can be incorrect because more information will be provided during later stages of the negotiation.</span></span> <span data-ttu-id="d4bbc-222">Pertanto, *ptsTimeStamp* deve essere **null** fino all'ultima chiamata alla funzione.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-222">Therefore, *ptsTimeStamp* must be **NULL** until the last call to the function.</span></span>

 

</dd> </dl>

## <a name="return-value"></a><span data-ttu-id="d4bbc-223">Valore restituito</span><span class="sxs-lookup"><span data-stu-id="d4bbc-223">Return value</span></span>

<span data-ttu-id="d4bbc-224">Questa funzione restituisce uno dei valori seguenti.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-224">This function returns one of the following values.</span></span>



<table><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><thead><tr class="header"><th><span data-ttu-id="d4bbc-225">Codice/valore restituito</span><span class="sxs-lookup"><span data-stu-id="d4bbc-225">Return code/value</span></span></th><th><span data-ttu-id="d4bbc-226">Descrizione</span><span class="sxs-lookup"><span data-stu-id="d4bbc-226">Description</span></span></th></tr></thead><tbody><tr class="odd"><td><dl> <span data-ttu-id="d4bbc-227"><dt><strong>SEC_E_BAD_BINDINGS</strong></dt> <dt>0x80090346L</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-227"><dt><strong>SEC_E_BAD_BINDINGS</strong></dt> <dt>0x80090346L</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-228">La funzione non è riuscita.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-228">The function failed.</span></span> <span data-ttu-id="d4bbc-229">Il criterio di associazione del canale non è stato soddisfatto.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-229">Channel binding policy was not satisfied.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="d4bbc-230"><dt><strong>SEC_E_INCOMPLETE_MESSAGE</strong></dt> <dt>0x80090318L</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-230"><dt><strong>SEC_E_INCOMPLETE_MESSAGE</strong></dt> <dt>0x80090318L</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-231">Funzione completata.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-231">The function succeeded.</span></span> <span data-ttu-id="d4bbc-232">I dati nel buffer di input sono incompleti.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-232">The data in the input buffer is incomplete.</span></span> <span data-ttu-id="d4bbc-233">L'applicazione deve leggere i dati aggiuntivi dal client e chiamare di nuovo [<strong>AcceptSecurityContext (General)</strong>] (AcceptSecurityContext--General.MD).</span><span class="sxs-lookup"><span data-stu-id="d4bbc-233">The application must read additional data from the client and call [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md) again.</span></span><br/> <span data-ttu-id="d4bbc-234">Questo valore può essere restituito quando si usa SSP Schannel.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-234">This value can be returned when using the Schannel SSP.</span></span> <span data-ttu-id="d4bbc-235">Per ulteriori informazioni su questo valore restituito, vedere [<strong>AcceptSecurityContext (Schannel)</strong>] (AcceptSecurityContext--Schannel.MD).</span><span class="sxs-lookup"><span data-stu-id="d4bbc-235">For more information about this return value, see [<strong>AcceptSecurityContext (Schannel)</strong>](acceptsecuritycontext--schannel.md).</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="d4bbc-236"><dt><strong>SEC_E_INSUFFICIENT_MEMORY</strong></dt> <dt>0x80090300L</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-236"><dt><strong>SEC_E_INSUFFICIENT_MEMORY</strong></dt> <dt>0x80090300L</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-237">La funzione non è riuscita.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-237">The function failed.</span></span> <span data-ttu-id="d4bbc-238">La memoria disponibile non è sufficiente per completare l'azione richiesta.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-238">There is not enough memory available to complete the requested action.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="d4bbc-239"><dt><strong>SEC_E_INTERNAL_ERROR</strong></dt> <dt>0x80090304L</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-239"><dt><strong>SEC_E_INTERNAL_ERROR</strong></dt> <dt>0x80090304L</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-240">La funzione non è riuscita.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-240">The function failed.</span></span> <span data-ttu-id="d4bbc-241">Si è verificato un errore che non è stato mappato a un codice di errore SSPI.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-241">An error occurred that did not map to an SSPI error code.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="d4bbc-242"><dt><strong>SEC_E_INVALID_HANDLE</strong></dt> <dt>0x80100003L</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-242"><dt><strong>SEC_E_INVALID_HANDLE</strong></dt> <dt>0x80100003L</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-243">La funzione non è riuscita.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-243">The function failed.</span></span> <span data-ttu-id="d4bbc-244">L'handle passato alla funzione non è valido.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-244">The handle passed to the function is not valid.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="d4bbc-245"><dt><strong>SEC_E_INVALID_TOKEN</strong></dt> <dt>0x80090308L</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-245"><dt><strong>SEC_E_INVALID_TOKEN</strong></dt> <dt>0x80090308L</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-246">La funzione non è riuscita.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-246">The function failed.</span></span> <span data-ttu-id="d4bbc-247">Il token passato alla funzione non è valido.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-247">The token passed to the function is not valid.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="d4bbc-248"><dt><strong>SEC_E_LOGON_DENIED</strong></dt> <dt>0x8009030CL</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-248"><dt><strong>SEC_E_LOGON_DENIED</strong></dt> <dt>0x8009030CL</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-249">Accesso non riuscito.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-249">The logon failed.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="d4bbc-250"><dt><strong>SEC_E_NO_AUTHENTICATING_AUTHORITY</strong></dt> <dt>0x80090311L</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-250"><dt><strong>SEC_E_NO_AUTHENTICATING_AUTHORITY</strong></dt> <dt>0x80090311L</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-251">La funzione non è riuscita.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-251">The function failed.</span></span> <span data-ttu-id="d4bbc-252">Non è stato possibile contattare un'autorità per l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-252">No authority could be contacted for authentication.</span></span> <span data-ttu-id="d4bbc-253">Questo problema può essere dovuto alle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="d4bbc-253">This could be due to the following conditions:</span></span><br/><ul><li><span data-ttu-id="d4bbc-254">Il nome di dominio dell'entità di autenticazione non è corretto.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-254">The domain name of the authenticating party is incorrect.</span></span></li><li><span data-ttu-id="d4bbc-255">Il dominio non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-255">The domain is unavailable.</span></span></li><li><span data-ttu-id="d4bbc-256">Relazione di trust non riuscita.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-256">The trust relationship has failed.</span></span></li></ul></td></tr><tr class="odd"><td><dl> <span data-ttu-id="d4bbc-257"><dt><strong>SEC_E_NO_CREDENTIALS</strong></dt> <dt>0x8009030EL</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-257"><dt><strong>SEC_E_NO_CREDENTIALS</strong></dt> <dt>0x8009030EL</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-258">La funzione non è riuscita.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-258">The function failed.</span></span> <span data-ttu-id="d4bbc-259">L'handle delle credenziali specificato nel parametro <em>phCredential</em> non è valido.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-259">The credentials handle specified in the <em>phCredential</em> parameter is not valid.</span></span> <span data-ttu-id="d4bbc-260">Questo valore può essere restituito quando si utilizza SSP digest o Schannel.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-260">This value can be returned when using the Digest or Schannel SSP.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="d4bbc-261"><dt><strong>SEC_E_OK</strong></dt> <dt>0x00000000L</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-261"><dt><strong>SEC_E_OK</strong></dt> <dt>0x00000000L</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-262">Funzione completata.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-262">The function succeeded.</span></span> <span data-ttu-id="d4bbc-263">Il [*contesto di sicurezza*](../secgloss/s-gly.md) ricevuto dal client è stato accettato.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-263">The [*security context*](../secgloss/s-gly.md) received from the client was accepted.</span></span> <span data-ttu-id="d4bbc-264">Se è stato generato un token di output dalla funzione, è necessario inviarlo al processo client.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-264">If an output token was generated by the function, it must be sent to the client process.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="d4bbc-265"><dt><strong>SEC_E_SECURITY_QOS_FAILED</strong></dt> <dt>0x80090332L</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-265"><dt><strong>SEC_E_SECURITY_QOS_FAILED</strong></dt> <dt>0x80090332L</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-266">La funzione non è riuscita.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-266">The function failed.</span></span> <span data-ttu-id="d4bbc-267">Il flag di attributo di contesto non valido è stato specificato nel parametro <em>fContextReq</em> .</span><span class="sxs-lookup"><span data-stu-id="d4bbc-267">A context attribute flag that is not valid was specified in the <em>fContextReq</em> parameter.</span></span> <span data-ttu-id="d4bbc-268">Questo valore può essere restituito quando si utilizza SSP del digest.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-268">This value can be returned when using the Digest SSP.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="d4bbc-269"><dt><strong>SEC_E_UNSUPPORTED_FUNCTION</strong></dt> <dt>0x80090302L</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-269"><dt><strong>SEC_E_UNSUPPORTED_FUNCTION</strong></dt> <dt>0x80090302L</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-270">La funzione non è riuscita.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-270">The function failed.</span></span> <span data-ttu-id="d4bbc-271">Flag di attributo di contesto non valido (ASC_REQ_DELEGATE o ASC_REQ_PROMPT_FOR_CREDS) specificato nel parametro <em>fContextReq</em> .</span><span class="sxs-lookup"><span data-stu-id="d4bbc-271">A context attribute flag that is not valid (ASC_REQ_DELEGATE or ASC_REQ_PROMPT_FOR_CREDS) was specified in the <em>fContextReq</em> parameter.</span></span> <span data-ttu-id="d4bbc-272">Questo valore può essere restituito quando si usa SSP Schannel.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-272">This value can be returned when using the Schannel SSP.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="d4bbc-273"><dt><strong>SEC_I_COMPLETE_AND_CONTINUE</strong></dt> <dt>0x00090314L</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-273"><dt><strong>SEC_I_COMPLETE_AND_CONTINUE</strong></dt> <dt>0x00090314L</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-274">Funzione completata.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-274">The function succeeded.</span></span> <span data-ttu-id="d4bbc-275">Il server deve chiamare [<strong>CompleteAuthToken</strong>] (/Windows/Win32/API/SSPI/NF-SSPI-completeauthtoken) e passare il token di output al client.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-275">The server must call [<strong>CompleteAuthToken</strong>](/windows/win32/api/sspi/nf-sspi-completeauthtoken) and pass the output token to the client.</span></span> <span data-ttu-id="d4bbc-276">Il server attende quindi un token restituito dal client e quindi esegue un'altra chiamata a [<strong>AcceptSecurityContext (General)</strong>] (AcceptSecurityContext--General.MD).</span><span class="sxs-lookup"><span data-stu-id="d4bbc-276">The server then waits for a return token from the client and then makes another call to [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md).</span></span> <br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="d4bbc-277"><dt><strong>SEC_I_COMPLETE_NEEDED</strong></dt> <dt>0x00090313L</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-277"><dt><strong>SEC_I_COMPLETE_NEEDED</strong></dt> <dt>0x00090313L</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-278">Funzione completata.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-278">The function succeeded.</span></span> <span data-ttu-id="d4bbc-279">Il server deve terminare la compilazione del messaggio dal client, quindi chiamare la funzione [<strong>CompleteAuthToken</strong>] (/Windows/Win32/API/SSPI/NF-SSPI-completeauthtoken).</span><span class="sxs-lookup"><span data-stu-id="d4bbc-279">The server must finish building the message from the client and then call the [<strong>CompleteAuthToken</strong>](/windows/win32/api/sspi/nf-sspi-completeauthtoken) function.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="d4bbc-280"><dt><strong>SEC_I_CONTINUE_NEEDED</strong></dt> <dt>0x00090312L</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-280"><dt><strong>SEC_I_CONTINUE_NEEDED</strong></dt> <dt>0x00090312L</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-281">Funzione completata.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-281">The function succeeded.</span></span> <span data-ttu-id="d4bbc-282">Il server deve inviare il token di output al client e attendere un token restituito.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-282">The server must send the output token to the client and wait for a returned token.</span></span> <span data-ttu-id="d4bbc-283">Il token restituito deve essere passato in <em>Pinput</em> per un'altra chiamata a [<strong>AcceptSecurityContext (General)</strong>] (AcceptSecurityContext--General.MD).</span><span class="sxs-lookup"><span data-stu-id="d4bbc-283">The returned token should be passed in <em>pInput</em> for another call to [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md).</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="d4bbc-284"><dt><strong>STATUS_LOGON_FAILURE</strong></dt> <dt>0xC000006DL</dt> </span><span class="sxs-lookup"><span data-stu-id="d4bbc-284"><dt><strong>STATUS_LOGON_FAILURE</strong></dt> <dt>0xC000006DL</dt> </span></span></dl></td><td><span data-ttu-id="d4bbc-285">La funzione non è riuscita.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-285">The function failed.</span></span> <span data-ttu-id="d4bbc-286">La funzione [<strong>AcceptSecurityContext (General)</strong>] (AcceptSecurityContext--General.MD) è stata chiamata dopo che è stato stabilito il contesto specificato.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-286">The [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md) function was called after the specified context was established.</span></span> <span data-ttu-id="d4bbc-287">Questo valore può essere restituito quando si utilizza SSP del digest.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-287">This value can be returned when using the Digest SSP.</span></span><br/></td></tr></tbody></table>



 

## <a name="remarks"></a><span data-ttu-id="d4bbc-288">Commenti</span><span class="sxs-lookup"><span data-stu-id="d4bbc-288">Remarks</span></span>

<span data-ttu-id="d4bbc-289">La funzione **AcceptSecurityContext (generale)** è la controparte del server della funzione [**InitializeSecurityContext (generale)**](initializesecuritycontext--general.md) .</span><span class="sxs-lookup"><span data-stu-id="d4bbc-289">The **AcceptSecurityContext (General)** function is the server counterpart to the [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) function.</span></span>

<span data-ttu-id="d4bbc-290">Quando il server riceve una richiesta da un client, il server usa il parametro *fContextReq* per specificare cosa richiede la sessione.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-290">When the server receives a request from a client, the server uses the *fContextReq* parameter to specify what it requires of the session.</span></span> <span data-ttu-id="d4bbc-291">In questo modo, un server può specificare che i client devono essere in grado di usare una sessione riservata o controllata dall' [*integrità*](../secgloss/i-gly.md)e rifiutare i client che non sono in grado di soddisfare tale richiesta.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-291">In this fashion, a server can specify that clients must be capable of using a confidential or [*integrity*](../secgloss/i-gly.md)-checked session, and it can reject clients that cannot meet that demand.</span></span> <span data-ttu-id="d4bbc-292">In alternativa, un server può non richiedere alcun elemento e qualsiasi altro elemento che il client può fornire o richiede viene restituito nel parametro *pfContextAttr* .</span><span class="sxs-lookup"><span data-stu-id="d4bbc-292">Alternatively, a server can require nothing, and whatever the client can provide or requires is returned in the *pfContextAttr* parameter.</span></span>

<span data-ttu-id="d4bbc-293">Per un pacchetto che supporta l'autenticazione a più gambe, ad esempio l'autenticazione reciproca, la sequenza chiamante è la seguente:</span><span class="sxs-lookup"><span data-stu-id="d4bbc-293">For a package that supports multiple-leg authentication, such as mutual authentication, the calling sequence is as follows:</span></span>

1.  <span data-ttu-id="d4bbc-294">Il client trasmette un token al server.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-294">The client transmits a token to the server.</span></span>
2.  <span data-ttu-id="d4bbc-295">Il server chiama **AcceptSecurityContext (generale)** la prima volta, che genera un token di risposta che viene quindi inviato al client.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-295">The server calls **AcceptSecurityContext (General)** the first time, which generates a reply token that is then sent to the client.</span></span>
3.  <span data-ttu-id="d4bbc-296">Il client riceve il token e lo passa a [**InitializeSecurityContext (generale)**](initializesecuritycontext--general.md).</span><span class="sxs-lookup"><span data-stu-id="d4bbc-296">The client receives the token and passes it to [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md).</span></span> <span data-ttu-id="d4bbc-297">Se **InitializeSecurityContext (General)** restituisce sec \_ e \_ OK, l'autenticazione reciproca è stata completata ed è possibile avviare una sessione protetta.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-297">If **InitializeSecurityContext (General)** returns SEC\_E\_OK, mutual authentication has been completed and a secure session can begin.</span></span> <span data-ttu-id="d4bbc-298">Se **InitializeSecurityContext (General)** restituisce un codice di errore, termina la negoziazione di autenticazione reciproca.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-298">If **InitializeSecurityContext (General)** returns an error code, the mutual authentication negotiation ends.</span></span> <span data-ttu-id="d4bbc-299">In caso contrario, il token di sicurezza restituito da **InitializeSecurityContext (generale)** viene inviato al client e i passaggi 2 e 3 vengono ripetuti.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-299">Otherwise, the security token returned by **InitializeSecurityContext (General)** is sent to the client, and steps 2 and 3 are repeated.</span></span>

<span data-ttu-id="d4bbc-300">I parametri *fContextReq* e *pfContextAttr* sono maschere di maschera che rappresentano vari attributi di contesto.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-300">The *fContextReq* and *pfContextAttr* parameters are bitmasks that represent various context attributes.</span></span> <span data-ttu-id="d4bbc-301">Per una descrizione dei vari attributi, vedere [requisiti di contesto](context-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="d4bbc-301">For a description of the various attributes, see [Context Requirements](context-requirements.md).</span></span>

> [!Note]  
> <span data-ttu-id="d4bbc-302">Il parametro *pfContextAttr* è valido in caso di esito positivo, ma solo in caso di esito positivo finale è possibile esaminare i flag relativi agli aspetti di sicurezza del contesto.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-302">The *pfContextAttr* parameter is valid on any successful return, but only on the final successful return should you examine the flags pertaining to security aspects of the context.</span></span> <span data-ttu-id="d4bbc-303">I ritorni intermedi possono impostare, ad esempio, \_ il \_ flag di memoria allocata RET di ISC \_ .</span><span class="sxs-lookup"><span data-stu-id="d4bbc-303">Intermediate returns can set, for example, the ISC\_RET\_ALLOCATED\_MEMORY flag.</span></span>

 

<span data-ttu-id="d4bbc-304">Il chiamante è responsabile di determinare se gli attributi di contesto finali sono sufficienti.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-304">The caller is responsible for determining whether the final context attributes are sufficient.</span></span> <span data-ttu-id="d4bbc-305">Se, ad esempio, è stata richiesta la riservatezza (crittografia) ma non è stato possibile stabilirla, è possibile che alcune applicazioni decidano immediatamente di arrestare la connessione.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-305">If, for example, confidentiality (encryption) was requested, but could not be established, some applications may choose to shut down the connection immediately.</span></span> <span data-ttu-id="d4bbc-306">Se non è possibile stabilire il [*contesto di sicurezza*](../secgloss/s-gly.md) , il server deve liberare il contesto parzialmente creato chiamando la funzione [**DeleteSecurityContext**](/windows/win32/api/sspi/nf-sspi-deletesecuritycontext) .</span><span class="sxs-lookup"><span data-stu-id="d4bbc-306">If the [*security context*](../secgloss/s-gly.md) cannot be established, the server must free the partially created context by calling the [**DeleteSecurityContext**](/windows/win32/api/sspi/nf-sspi-deletesecuritycontext) function.</span></span> <span data-ttu-id="d4bbc-307">Per informazioni sul momento in cui chiamare la funzione **DeleteSecurityContext** , vedere **DeleteSecurityContext**.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-307">For information about when to call the **DeleteSecurityContext** function, see **DeleteSecurityContext**.</span></span>

<span data-ttu-id="d4bbc-308">Una volta stabilito il [*contesto di sicurezza*](../secgloss/s-gly.md) , l'applicazione server può utilizzare la funzione [**QuerySecurityContextToken**](/windows/win32/api/sspi/nf-sspi-querysecuritycontexttoken) per recuperare un handle per l'account utente a cui è stato eseguito il mapping del certificato client.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-308">After the [*security context*](../secgloss/s-gly.md) has been established, the server application can use the [**QuerySecurityContextToken**](/windows/win32/api/sspi/nf-sspi-querysecuritycontexttoken) function to retrieve a handle to the user account to which the client certificate was mapped.</span></span> <span data-ttu-id="d4bbc-309">Inoltre, il server può utilizzare la funzione [**ImpersonateSecurityContext**](/windows/win32/api/sspi/nf-sspi-impersonatesecuritycontext) per rappresentare l'utente.</span><span class="sxs-lookup"><span data-stu-id="d4bbc-309">Also, the server can use the [**ImpersonateSecurityContext**](/windows/win32/api/sspi/nf-sspi-impersonatesecuritycontext) function to impersonate the user.</span></span>

## <a name="requirements"></a><span data-ttu-id="d4bbc-310">Requisiti</span><span class="sxs-lookup"><span data-stu-id="d4bbc-310">Requirements</span></span>



| <span data-ttu-id="d4bbc-311">Requisito</span><span class="sxs-lookup"><span data-stu-id="d4bbc-311">Requirement</span></span> | <span data-ttu-id="d4bbc-312">Valore</span><span class="sxs-lookup"><span data-stu-id="d4bbc-312">Value</span></span> |
|-------------------------------------|--------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d4bbc-313">Client minimo supportato</span><span class="sxs-lookup"><span data-stu-id="d4bbc-313">Minimum supported client</span></span><br/> | <span data-ttu-id="d4bbc-314">\[Solo app desktop Windows XP\]</span><span class="sxs-lookup"><span data-stu-id="d4bbc-314">Windows XP \[desktop apps only\]</span></span><br/>                                                            |
| <span data-ttu-id="d4bbc-315">Server minimo supportato</span><span class="sxs-lookup"><span data-stu-id="d4bbc-315">Minimum supported server</span></span><br/> | <span data-ttu-id="d4bbc-316">\[Solo app desktop Windows Server 2003\]</span><span class="sxs-lookup"><span data-stu-id="d4bbc-316">Windows Server 2003 \[desktop apps only\]</span></span><br/>                                                   |
| <span data-ttu-id="d4bbc-317">Intestazione</span><span class="sxs-lookup"><span data-stu-id="d4bbc-317">Header</span></span><br/>                   | <dl> <span data-ttu-id="d4bbc-318"><dt>SSPI. h (include Security. h)</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-318"><dt>Sspi.h (include Security.h)</dt></span></span> </dl> |
| <span data-ttu-id="d4bbc-319">Libreria</span><span class="sxs-lookup"><span data-stu-id="d4bbc-319">Library</span></span><br/>                  | <dl> <span data-ttu-id="d4bbc-320"><dt>Secur32. lib</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-320"><dt>Secur32.lib</dt></span></span> </dl>                 |
| <span data-ttu-id="d4bbc-321">DLL</span><span class="sxs-lookup"><span data-stu-id="d4bbc-321">DLL</span></span><br/>                      | <dl> <span data-ttu-id="d4bbc-322"><dt>Secur32.dll</dt></span><span class="sxs-lookup"><span data-stu-id="d4bbc-322"><dt>Secur32.dll</dt></span></span> </dl>                 |



## <a name="see-also"></a><span data-ttu-id="d4bbc-323">Vedi anche</span><span class="sxs-lookup"><span data-stu-id="d4bbc-323">See also</span></span>

<dl> <dt>

[<span data-ttu-id="d4bbc-324">Funzioni SSPI</span><span class="sxs-lookup"><span data-stu-id="d4bbc-324">SSPI Functions</span></span>](authentication-functions.md#sspi-functions)
</dt> <dt>

[<span data-ttu-id="d4bbc-325">**DeleteSecurityContext**</span><span class="sxs-lookup"><span data-stu-id="d4bbc-325">**DeleteSecurityContext**</span></span>](/windows/win32/api/sspi/nf-sspi-deletesecuritycontext)
</dt> <dt>

[<span data-ttu-id="d4bbc-326">**InitializeSecurityContext (generale)**</span><span class="sxs-lookup"><span data-stu-id="d4bbc-326">**InitializeSecurityContext (General)**</span></span>](initializesecuritycontext--general.md)
</dt> </dl>

 

 
