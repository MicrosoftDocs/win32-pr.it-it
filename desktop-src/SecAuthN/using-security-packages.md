---
description: Elenca i pacchetti di sicurezza che possono essere utilizzati con SSPI.
ms.assetid: f5999d41-b334-49be-8883-d9b9042d20dc
title: Uso dei pacchetti di sicurezza
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: df24bba0f910ba74a633e8a43f961cee4fb505db
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106315854"
---
# <a name="using-security-packages"></a><span data-ttu-id="ebb90-103">Uso dei pacchetti di sicurezza</span><span class="sxs-lookup"><span data-stu-id="ebb90-103">Using Security Packages</span></span>

<span data-ttu-id="ebb90-104">[*Security Support Provider Interface*](../secgloss/s-gly.md) (SSPI) può essere utilizzato con i seguenti [*pacchetti di sicurezza*](../secgloss/s-gly.md):</span><span class="sxs-lookup"><span data-stu-id="ebb90-104">The [*Security Support Provider Interface*](../secgloss/s-gly.md) (SSPI) can be used with the following [*security packages*](../secgloss/s-gly.md):</span></span>

-   [<span data-ttu-id="ebb90-105">Pacchetto di sicurezza Kerberos</span><span class="sxs-lookup"><span data-stu-id="ebb90-105">Kerberos Security Package</span></span>](#kerberos-security-package)
-   [<span data-ttu-id="ebb90-106">Pacchetto di sicurezza NTLM</span><span class="sxs-lookup"><span data-stu-id="ebb90-106">NTLM Security Package</span></span>](#ntlm-security-package)

<span data-ttu-id="ebb90-107">I protocolli [*Kerberos*](../secgloss/k-gly.md) e NTLM vengono implementati come pacchetti di sicurezza da Secur32.dll [*Security Support Provider*](../secgloss/s-gly.md) (SSP) forniti con il sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="ebb90-107">The [*Kerberos*](../secgloss/k-gly.md) and NTLM protocols are implemented as security packages from the Secur32.dll [*security support provider*](../secgloss/s-gly.md) (SSP) supplied with the operating system.</span></span> <span data-ttu-id="ebb90-108">Per impostazione predefinita, il supporto per l'autenticazione Kerberos e NTLM viene caricato dall' [*autorità di sicurezza locale*](../secgloss/l-gly.md) (LSA) in un computer all'avvio del sistema.</span><span class="sxs-lookup"><span data-stu-id="ebb90-108">By default, support for both Kerberos and NTLM authentication are loaded by the [*local security authority*](../secgloss/l-gly.md) (LSA) on a computer when the system starts.</span></span> <span data-ttu-id="ebb90-109">Nei domini Windows Server o Windows, è possibile usare entrambi i pacchetti per autenticare gli accessi di rete e le connessioni client/server.</span><span class="sxs-lookup"><span data-stu-id="ebb90-109">In Windows Server or Windows domains, either package can be used to authenticate network logons and client/server connections.</span></span> <span data-ttu-id="ebb90-110">Quello utilizzato dipende dalle funzionalità del computer sull'altro lato della connessione.</span><span class="sxs-lookup"><span data-stu-id="ebb90-110">Which one is used depends on the capabilities of the computer on the other side of the connection.</span></span> <span data-ttu-id="ebb90-111">Il protocollo Kerberos è sempre preferito, se disponibile.</span><span class="sxs-lookup"><span data-stu-id="ebb90-111">The Kerberos protocol is always preferred, if available.</span></span>

<span data-ttu-id="ebb90-112">Dopo che è stato stabilito un contesto di sicurezza per un utente interattivo, un'altra istanza del pacchetto Kerberos o NTLM può essere caricata da un processo in esecuzione nel contesto di sicurezza dell'utente per supportare lo scambio, la firma, la verifica, la crittografia e la decrittografia dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="ebb90-112">After a security context for an interactive user has been established, another instance of the Kerberos or NTLM package can be loaded by a process running in the security context of the user to support the exchanging, signing, verifying, encrypting, and decrypting of messages.</span></span> <span data-ttu-id="ebb90-113">Tuttavia, non è consentito l'accesso alle chiavi o ai ticket della [*sessione*](../secgloss/s-gly.md) nella cache delle credenziali.</span><span class="sxs-lookup"><span data-stu-id="ebb90-113">However, no process other than the LSA is ever permitted access to [*session keys*](../secgloss/s-gly.md) or tickets in the credentials cache.</span></span>

<span data-ttu-id="ebb90-114">I servizi di sistema e le applicazioni a livello di trasporto accedono a un SSP tramite SSPI, che fornisce funzioni per l'enumerazione dei pacchetti di sicurezza disponibili in un sistema, la selezione di un pacchetto e l'utilizzo di tale pacchetto per ottenere una connessione autenticata.</span><span class="sxs-lookup"><span data-stu-id="ebb90-114">System services and transport-level applications access an SSP through SSPI, which provides functions for enumerating the security packages available on a system, selecting a package, and using that package to obtain an authenticated connection.</span></span>

<span data-ttu-id="ebb90-115">I metodi in SSPI sono routine generiche che possono essere utilizzate dagli sviluppatori senza conoscere i dettagli di un particolare [*protocollo di sicurezza*](../secgloss/s-gly.md).</span><span class="sxs-lookup"><span data-stu-id="ebb90-115">The methods in SSPI are generic routines that developers can use without knowing the details of a particular [*security protocol*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="ebb90-116">Ad esempio, quando viene autenticata una connessione client/server:</span><span class="sxs-lookup"><span data-stu-id="ebb90-116">For example, when a client/server connection is authenticated:</span></span>

1.  <span data-ttu-id="ebb90-117">L'applicazione sul lato client della connessione Invia le [*credenziali*](../secgloss/c-gly.md) al server utilizzando la funzione SSPI [**InitializeSecurityContext (generale)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta).</span><span class="sxs-lookup"><span data-stu-id="ebb90-117">The application on the client side of the connection sends [*credentials*](../secgloss/c-gly.md) to the server using the SSPI function [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta).</span></span>
2.  <span data-ttu-id="ebb90-118">L'applicazione sul lato server della connessione risponde con la funzione SSPI [**AcceptSecurityContext (generale)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).</span><span class="sxs-lookup"><span data-stu-id="ebb90-118">The application on the server side of the connection responds with the SSPI function [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).</span></span>
3.  <span data-ttu-id="ebb90-119">Dopo che la connessione è stata autenticata, l'LSA sul server utilizza le informazioni del client per compilare un [*token di accesso*](../secgloss/a-gly.md).</span><span class="sxs-lookup"><span data-stu-id="ebb90-119">After the connection has been authenticated, the LSA on the server uses information from the client to build an [*access token*](../secgloss/a-gly.md).</span></span>
4.  <span data-ttu-id="ebb90-120">Il server può quindi chiamare la funzione SSPI [**ImpersonateSecurityContext**](/windows/desktop/api/Sspi/nf-sspi-impersonatesecuritycontext) per alleghiare il token di accesso a un thread di rappresentazione per il servizio.</span><span class="sxs-lookup"><span data-stu-id="ebb90-120">The server can then call the SSPI function [**ImpersonateSecurityContext**](/windows/desktop/api/Sspi/nf-sspi-impersonatesecuritycontext) to attach the access token to an impersonation thread for the service.</span></span>

## <a name="kerberos-security-package"></a><span data-ttu-id="ebb90-121">Pacchetto di sicurezza Kerberos</span><span class="sxs-lookup"><span data-stu-id="ebb90-121">Kerberos Security Package</span></span>

<span data-ttu-id="ebb90-122">Il [*pacchetto di sicurezza*](../secgloss/s-gly.md) Kerberos è basato sul [*protocollo di autenticazione Kerberos*](../secgloss/k-gly.md).</span><span class="sxs-lookup"><span data-stu-id="ebb90-122">The Kerberos [*security package*](../secgloss/s-gly.md) is based on the [*Kerberos authentication protocol*](../secgloss/k-gly.md).</span></span>

<span data-ttu-id="ebb90-123">Se il protocollo Kerberos viene utilizzato per autenticare una connessione client/server, [**InitializeSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) genera un messaggio GSSAPI che include un \_ \_ messaggio di KRB AP REQ dal client.</span><span class="sxs-lookup"><span data-stu-id="ebb90-123">If the Kerberos protocol is being used to authenticate a client/server connection, [**InitializeSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) generates a GSSAPI message that includes a KRB\_AP\_REQ message from the client.</span></span> <span data-ttu-id="ebb90-124">[**AcceptSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) genera quindi un messaggio GSSAPI che include un \_ \_ messaggio di KRB AP Rep dal server.</span><span class="sxs-lookup"><span data-stu-id="ebb90-124">[**AcceptSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) then generates a GSSAPI message that includes a KRB\_AP\_REP message from the server.</span></span>

<span data-ttu-id="ebb90-125">Per informazioni generali sui passaggi che si verificano in background nell'implementazione di un protocollo Kerberos, vedere [Microsoft Kerberos](microsoft-kerberos.md).</span><span class="sxs-lookup"><span data-stu-id="ebb90-125">For background information on the steps that take place behind the scenes in the implementation of a Kerberos protocol, see [Microsoft Kerberos](microsoft-kerberos.md).</span></span>

<span data-ttu-id="ebb90-126">Tutti i servizi distribuiti utilizzano SSPI per accedere al protocollo Kerberos.</span><span class="sxs-lookup"><span data-stu-id="ebb90-126">All distributed services use SSPI to access the Kerberos protocol.</span></span> <span data-ttu-id="ebb90-127">Un elenco parziale delle modalità di utilizzo del protocollo Kerberos per l'autenticazione include:</span><span class="sxs-lookup"><span data-stu-id="ebb90-127">A partial list of the ways in which the Kerberos protocol is used for authentication includes:</span></span>

-   <span data-ttu-id="ebb90-128">Servizi spooler di stampa</span><span class="sxs-lookup"><span data-stu-id="ebb90-128">Print spooler services</span></span>
-   <span data-ttu-id="ebb90-129">Accesso al file remoto CIFS/SMB</span><span class="sxs-lookup"><span data-stu-id="ebb90-129">CIFS/SMB remote file access</span></span>
-   <span data-ttu-id="ebb90-130">Query [*LDAP*](../secgloss/l-gly.md) al Active Directory</span><span class="sxs-lookup"><span data-stu-id="ebb90-130">[*LDAP*](../secgloss/l-gly.md) queries to the Active Directory</span></span>
-   <span data-ttu-id="ebb90-131">Gestione file system distribuita e riferimenti</span><span class="sxs-lookup"><span data-stu-id="ebb90-131">Distributed file system management and referrals</span></span>
-   <span data-ttu-id="ebb90-132">Autenticazione dell'autorità di sicurezza da host a host IPsec</span><span class="sxs-lookup"><span data-stu-id="ebb90-132">IPsec host-to-host security authority authentication</span></span>
-   <span data-ttu-id="ebb90-133">Richieste di prenotazione per la qualità del servizio di rete</span><span class="sxs-lookup"><span data-stu-id="ebb90-133">Reservation requests for network Quality of Service</span></span>
-   <span data-ttu-id="ebb90-134">Autenticazione Intranet per Internet Information Services</span><span class="sxs-lookup"><span data-stu-id="ebb90-134">Intranet authentication to Internet Information Services</span></span>
-   <span data-ttu-id="ebb90-135">Gestione remota del server o della workstation mediante RPC autenticato</span><span class="sxs-lookup"><span data-stu-id="ebb90-135">Remote server or workstation management using authenticated RPC</span></span>
-   <span data-ttu-id="ebb90-136">[*Richieste di certificati*](../secgloss/c-gly.md) ai Servizi certificati per utenti e computer di dominio</span><span class="sxs-lookup"><span data-stu-id="ebb90-136">[*Certificate requests*](../secgloss/c-gly.md) to Certificate Services for domain users and computers</span></span>

## <a name="ntlm-security-package"></a><span data-ttu-id="ebb90-137">Pacchetto di sicurezza NTLM</span><span class="sxs-lookup"><span data-stu-id="ebb90-137">NTLM Security Package</span></span>

<span data-ttu-id="ebb90-138">Il pacchetto di sicurezza NTLM è basato sul protocollo di autenticazione NTLM.</span><span class="sxs-lookup"><span data-stu-id="ebb90-138">The NTLM security package is based on the NTLM authentication protocol.</span></span>

 

 
