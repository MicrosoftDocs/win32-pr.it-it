---
description: Un provider di rete è una DLL che consente al sistema operativo Windows di supportare un protocollo di rete specifico.
ms.assetid: 21dfa941-72fd-4f2c-8bc4-379ed6ca2a4c
title: Implementazione di un provider di rete
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 97819b033c57feb25cf882f97051785123e2e382
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104128307"
---
# <a name="implementing-a-network-provider"></a><span data-ttu-id="59fe2-103">Implementazione di un provider di rete</span><span class="sxs-lookup"><span data-stu-id="59fe2-103">Implementing a Network Provider</span></span>

<span data-ttu-id="59fe2-104">Un provider di rete è una DLL che consente al sistema operativo Windows di supportare un protocollo di rete specifico.</span><span class="sxs-lookup"><span data-stu-id="59fe2-104">A network provider is a DLL that enables the Windows operating system to support a specific network protocol.</span></span> <span data-ttu-id="59fe2-105">Questa operazione viene eseguita implementando l'API del provider di rete.</span><span class="sxs-lookup"><span data-stu-id="59fe2-105">It does this by implementing the Network Provider API.</span></span> <span data-ttu-id="59fe2-106">Questa API è un set di funzioni che vengono chiamate da [*più provider router*](../secgloss/m-gly.md) (MPR) per comunicare con la rete.</span><span class="sxs-lookup"><span data-stu-id="59fe2-106">This API is a set of functions the [*Multiple Provider Router*](../secgloss/m-gly.md) (MPR) calls to communicate with the network.</span></span> <span data-ttu-id="59fe2-107">Il provider di rete converte quindi queste chiamate in chiamate API specifiche della rete per eseguire l'azione specificata da MPR.</span><span class="sxs-lookup"><span data-stu-id="59fe2-107">The network provider then translates these calls into network-specific API calls to perform the action specified by the MPR.</span></span> <span data-ttu-id="59fe2-108">In questo modo, il sistema operativo Windows può interagire con i nuovi protocolli di rete senza che sia necessario comprendere le API specifiche della rete.</span><span class="sxs-lookup"><span data-stu-id="59fe2-108">In this way, the Windows operating system can interact with new network protocols without having to understand their network-specific APIs.</span></span>

<span data-ttu-id="59fe2-109">Per creare un provider di rete, scrivere una DLL che esporta la funzione [**NPGetCaps**](/windows/desktop/api/Npapi/nf-npapi-npgetcaps) .</span><span class="sxs-lookup"><span data-stu-id="59fe2-109">To create a network provider, write a DLL that exports the [**NPGetCaps**](/windows/desktop/api/Npapi/nf-npapi-npgetcaps) function.</span></span>

<span data-ttu-id="59fe2-110">Il supporto delle altre funzioni nell'API del provider di rete è facoltativo.</span><span class="sxs-lookup"><span data-stu-id="59fe2-110">Support of the other functions in the Network Provider API is optional.</span></span> <span data-ttu-id="59fe2-111">Se il provider di rete non richiede una funzione, la DLL non deve implementarla o fornire un'implementazione stub.</span><span class="sxs-lookup"><span data-stu-id="59fe2-111">If your network provider does not require a function, your DLL does not need to implement it or provide a stub implementation.</span></span> <span data-ttu-id="59fe2-112">Per ulteriori informazioni, vedere gli argomenti relativi alle singole funzioni in [funzioni del provider di rete](authentication-functions.md).</span><span class="sxs-lookup"><span data-stu-id="59fe2-112">For more information, see the individual function topics in [Network Provider Functions](authentication-functions.md).</span></span>

<span data-ttu-id="59fe2-113">L'eccezione è che se si supporta una delle funzioni di enumerazione seguenti, è necessario supportare anche le altre due funzioni: [**NPOpenEnum**](/windows/desktop/api/Npapi/nf-npapi-npopenenum), [**NPEnumResource**](/windows/desktop/api/Npapi/nf-npapi-npenumresource)e [**NPCloseEnum**](/windows/desktop/api/Npapi/nf-npapi-npcloseenum).</span><span class="sxs-lookup"><span data-stu-id="59fe2-113">The exception is that if you support one of the following enumeration functions, you must support the other two functions as well: [**NPOpenEnum**](/windows/desktop/api/Npapi/nf-npapi-npopenenum), [**NPEnumResource**](/windows/desktop/api/Npapi/nf-npapi-npenumresource), and [**NPCloseEnum**](/windows/desktop/api/Npapi/nf-npapi-npcloseenum).</span></span>

<span data-ttu-id="59fe2-114">Le linee guida seguenti descrivono come scrivere un provider di rete che interagisce correttamente con il sistema operativo e il sistema operativo Windows.</span><span class="sxs-lookup"><span data-stu-id="59fe2-114">The following guidelines describe how to write a network provider that interacts well with the MPR and the Windows operating system.</span></span> <span data-ttu-id="59fe2-115">Laddove possibile, il provider deve rispettare le linee guida seguenti per la velocità, la convalida e il routing.</span><span class="sxs-lookup"><span data-stu-id="59fe2-115">Whenever possible, your provider should adhere to the following guidelines for speed, validation, and routing.</span></span>

## <a name="speed"></a><span data-ttu-id="59fe2-116">speed</span><span class="sxs-lookup"><span data-stu-id="59fe2-116">Speed</span></span>

<span data-ttu-id="59fe2-117">Un provider di rete deve determinare rapidamente se una risorsa di rete è propria.</span><span class="sxs-lookup"><span data-stu-id="59fe2-117">A network provider should quickly determine whether a network resource is its own.</span></span> <span data-ttu-id="59fe2-118">Ciò è dovuto al fatto che è possibile che l'MPR debba scorrere molti provider per trovare il proprietario di una risorsa.</span><span class="sxs-lookup"><span data-stu-id="59fe2-118">This is because the MPR may have to cycle through many providers to find the owner of a resource.</span></span>

<span data-ttu-id="59fe2-119">Se il provider di rete non è il proprietario della risorsa, deve restituire immediatamente il \_ \_ codice di stato NETNAME non valido.</span><span class="sxs-lookup"><span data-stu-id="59fe2-119">If the network provider does not own the resource, it should immediately return the WN\_BAD\_NETNAME status code.</span></span>

<span data-ttu-id="59fe2-120">È inoltre importante che i provider che supportano [**NPGetDirectoryType**](/windows/desktop/api/Npapi/nf-npapi-npgetdirectorytype) restituiscono rapidamente i risultati per questa funzione perché viene chiamato mentre winfile sta disegnando l'albero di directory.</span><span class="sxs-lookup"><span data-stu-id="59fe2-120">It is also important that providers that support [**NPGetDirectoryType**](/windows/desktop/api/Npapi/nf-npapi-npgetdirectorytype) return results for this function quickly because it is called while WinFile is painting the directory tree.</span></span>

## <a name="validation"></a><span data-ttu-id="59fe2-121">Convalida</span><span class="sxs-lookup"><span data-stu-id="59fe2-121">Validation</span></span>

<span data-ttu-id="59fe2-122">L'ordine di convalida è importante.</span><span class="sxs-lookup"><span data-stu-id="59fe2-122">The order of validation is important.</span></span> <span data-ttu-id="59fe2-123">Un provider di rete deve innanzitutto determinare se la rete è avviata e quindi determinare se il provider di rete e di rete supporta l'operazione.</span><span class="sxs-lookup"><span data-stu-id="59fe2-123">A network provider should first determine whether its network is started and then determine whether the network and network provider support the operation.</span></span> <span data-ttu-id="59fe2-124">Se, dopo questi controlli, il provider di rete riceve tutte le risorse di rete, deve determinare se è proprietario.</span><span class="sxs-lookup"><span data-stu-id="59fe2-124">If, after these checks, the network provider receives any network resources, it should determine whether it owns them.</span></span> <span data-ttu-id="59fe2-125">Infine, deve convalidare altri parametri.</span><span class="sxs-lookup"><span data-stu-id="59fe2-125">Finally, it should validate other parameters.</span></span>

## <a name="routing"></a><span data-ttu-id="59fe2-126">Routing</span><span class="sxs-lookup"><span data-stu-id="59fe2-126">Routing</span></span>

<span data-ttu-id="59fe2-127">Se il MPR deve scorrere i provider di rete, tenterà di eseguire tutti i provider fino a quando non si accetta la chiamata.</span><span class="sxs-lookup"><span data-stu-id="59fe2-127">If the MPR has to cycle through network providers, it will try all providers until one accepts the call.</span></span> <span data-ttu-id="59fe2-128">In altre parole, il MPR continua sempre a provare a trovare un provider di rete.</span><span class="sxs-lookup"><span data-stu-id="59fe2-128">In other words, the MPR always continues to try to find a network provider.</span></span>

<span data-ttu-id="59fe2-129">Tuttavia, prende nota del primo errore significativo segnalato da un provider.</span><span class="sxs-lookup"><span data-stu-id="59fe2-129">It does, however, take note of the first significant error reported by a provider.</span></span> <span data-ttu-id="59fe2-130">Errori quali errore \_ NETPATH errato \_ , nome NET errato errore, \_ \_ \_ parametro errore \_ non valido \_ \_ . il livello di errore non valido \_ viene considerato non significativo perché significa semplicemente che il provider non gestisce la risorsa.</span><span class="sxs-lookup"><span data-stu-id="59fe2-130">Errors such as ERROR\_BAD\_NETPATH, ERROR\_BAD\_NET\_NAME, ERROR\_INVALID\_PARAMETER, ERROR\_INVALID\_LEVEL are considered insignificant because they simply mean that the provider does not manage the resource.</span></span> <span data-ttu-id="59fe2-131">Tuttavia, se il provider ha esito negativo e si verifica un errore di errore della \_ \_ password o di un altro errore significativo, MPR registra questo errore e continua a scorrere i provider di rete.</span><span class="sxs-lookup"><span data-stu-id="59fe2-131">However, if the provider fails with the error ERROR\_INVALID\_PASSWORD or some other significant error, MPR records this error and continues cycling through the network providers.</span></span> <span data-ttu-id="59fe2-132">In generale, durante il routing, se nessun provider accetta la chiamata, l'MPR segnala il primo errore significativo rilevato durante il ciclo dei provider di rete.</span><span class="sxs-lookup"><span data-stu-id="59fe2-132">In general, when routing, if no provider accepts the call, the MPR reports the first significant error it encounters while cycling through the network providers.</span></span>

<span data-ttu-id="59fe2-133">Quando si decide quale messaggio di errore restituire, il provider di rete deve tenere conto di questo comportamento di MPR.</span><span class="sxs-lookup"><span data-stu-id="59fe2-133">Your network provider should take this behavior of the MPR into account when deciding what error message to return.</span></span>

## <a name="implementation-note"></a><span data-ttu-id="59fe2-134">Nota sull'implementazione</span><span class="sxs-lookup"><span data-stu-id="59fe2-134">Implementation note</span></span>

<span data-ttu-id="59fe2-135">Quando si implementano le DLL del provider di rete, il provider non deve chiamare altre [funzioni di rete di Windows](../wnet/windows-networking-functions.md), [API shell](../shell/samples-usingthumbnailproviders.md)o altre query basate sul percorso UNC che potrebbero causare la reimmissione nel sottosistema MPR.</span><span class="sxs-lookup"><span data-stu-id="59fe2-135">When implementing Network Provider DLL’s, the provider must not call into other [Windows Networking Functions](../wnet/windows-networking-functions.md), [Shell APIs](../shell/samples-usingthumbnailproviders.md), or other UNC path-based queries that could cause reentry into the MPR subsystem.</span></span> <span data-ttu-id="59fe2-136">Se si effettuano chiamate di questo tipo da una DLL del provider di rete, l'applicazione o altri componenti del sistema operativo potrebbero riscontrare conflitti, prestazioni insufficienti o deadlock nel sottosistema MPR.</span><span class="sxs-lookup"><span data-stu-id="59fe2-136">If you make such calls from a Network Provider DLL, the application, or other operating system components may experience contention, poor performance, or deadlocks inside the MPR subsystem.</span></span>

 

 
