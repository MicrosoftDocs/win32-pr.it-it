---
description: I requisiti di contesto sono espressi come una combinazione di flag di bit passati alla funzione InitializeSecurityContext (generale) o AcceptSecurityContext (generale).
ms.assetid: 4a44b829-4202-46c0-b17e-04943fa067ab
title: Requisiti del contesto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 86af5f71557bdd53229b5c8ed6afc14dc24edb46
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "104232041"
---
# <a name="context-requirements"></a><span data-ttu-id="a0589-103">Requisiti del contesto</span><span class="sxs-lookup"><span data-stu-id="a0589-103">Context Requirements</span></span>

<span data-ttu-id="a0589-104">I requisiti di contesto sono espressi come una combinazione di flag di bit passati alla funzione [**InitializeSecurityContext (generale)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) o [**AcceptSecurityContext (generale)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) .</span><span class="sxs-lookup"><span data-stu-id="a0589-104">Context requirements are expressed as a combination of bit flags passed to either the [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) or [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span> <span data-ttu-id="a0589-105">Questi flag influiscono sul [*contesto*](/windows/desktop/SecGloss/c-gly) in diversi modi.</span><span class="sxs-lookup"><span data-stu-id="a0589-105">These flags affect the [*context*](/windows/desktop/SecGloss/c-gly) in a number of ways.</span></span> <span data-ttu-id="a0589-106">Non tutti i flag si applicano a tutti i contesti.</span><span class="sxs-lookup"><span data-stu-id="a0589-106">Not all flags apply to all contexts.</span></span> <span data-ttu-id="a0589-107">Alcune sono valide solo per il server, altre solo per il client.</span><span class="sxs-lookup"><span data-stu-id="a0589-107">Some are valid only for the server, others only for the client.</span></span>

<span data-ttu-id="a0589-108">Il chiamante usa il parametro *fContextReq* della chiamata [**InitializeSecurityContext (generale)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) o [**AcceptSecurityContext (generale)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) per specificare un set di flag che indicano le funzionalità necessarie.</span><span class="sxs-lookup"><span data-stu-id="a0589-108">The caller uses the *fContextReq* parameter of the [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) or [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) call to specify a set of flags that indicate the required capabilities.</span></span> <span data-ttu-id="a0589-109">Quando la funzione restituisce, il parametro *pfContextAttr* indica gli attributi del contesto stabilito.</span><span class="sxs-lookup"><span data-stu-id="a0589-109">When the function returns, the *pfContextAttr* parameter indicates the attributes of the established context.</span></span> <span data-ttu-id="a0589-110">Il chiamante determina se gli attributi del contesto finale sono accettabili.</span><span class="sxs-lookup"><span data-stu-id="a0589-110">The caller determines whether the final context attributes are acceptable.</span></span>

<span data-ttu-id="a0589-111">I flag richiesti o restituiti da [**InitializeSecurityContext (generale)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) sono preceduti da ISC.</span><span class="sxs-lookup"><span data-stu-id="a0589-111">Flags requested from or returned by [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) are prefixed by ISC.</span></span> <span data-ttu-id="a0589-112">Quelle richieste da o restituite da [**AcceptSecurityContext (generale)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) sono precedute dal prefisso ASC.</span><span class="sxs-lookup"><span data-stu-id="a0589-112">Those requested from or returned by [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) are prefixed by ASC.</span></span> <span data-ttu-id="a0589-113">I flag passati in una funzione includono REQ, mentre i flag restituiti includono RET.</span><span class="sxs-lookup"><span data-stu-id="a0589-113">Flags passed into a function include REQ, while returned flags include RET.</span></span> <span data-ttu-id="a0589-114">Ad esempio, un flag di richiesta per l'autenticazione reciproca passata a **InitializeSecurityContext (generale)** è ISC \_ req \_ Mutual \_ auth.</span><span class="sxs-lookup"><span data-stu-id="a0589-114">For example, a request flag for mutual authentication passed to **InitializeSecurityContext (General)** is ISC\_REQ\_MUTUAL\_AUTH.</span></span> <span data-ttu-id="a0589-115">Un server che richiede l'autenticazione reciproca passa ASC \_ req \_ reciproal \_ auth a **AcceptSecurityContext (generale)**.</span><span class="sxs-lookup"><span data-stu-id="a0589-115">A server requesting mutual authentication passes ASC\_REQ\_MUTUAL\_AUTH to **AcceptSecurityContext (General)**.</span></span> <span data-ttu-id="a0589-116">Se viene eseguita l'autenticazione reciproca, **InitializeSecurityContext (General)** restituisce ISC \_ ret \_ reciproal \_ AUTH e **AcceptSecurityContext (General)** restituisce ASC \_ ret \_ reciproal \_ auth.</span><span class="sxs-lookup"><span data-stu-id="a0589-116">If mutual authentication is achieved, **InitializeSecurityContext (General)** returns ISC\_RET\_MUTUAL\_AUTH and **AcceptSecurityContext (General)** returns ASC\_RET\_MUTUAL\_AUTH.</span></span> <span data-ttu-id="a0589-117">Se il chiamante richiede l'autenticazione reciproca, ma il [*pacchetto di sicurezza*](/windows/desktop/SecGloss/s-gly) indica che non è possibile eseguirlo, il chiamante deve decidere se annullare il contesto o continuare.</span><span class="sxs-lookup"><span data-stu-id="a0589-117">If the caller requests mutual authentication, but the [*security package*](/windows/desktop/SecGloss/s-gly) indicates that it cannot be performed, the caller must decide whether to cancel the context or continue.</span></span>

<span data-ttu-id="a0589-118">Nella tabella seguente vengono descritti i diversi flag dei requisiti di contesto.</span><span class="sxs-lookup"><span data-stu-id="a0589-118">The following table describes the various context requirement flags.</span></span>



| <span data-ttu-id="a0589-119">Flag</span><span class="sxs-lookup"><span data-stu-id="a0589-119">Flag</span></span>                             | <span data-ttu-id="a0589-120">Descrizione</span><span class="sxs-lookup"><span data-stu-id="a0589-120">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="a0589-121">Delegato</span><span class="sxs-lookup"><span data-stu-id="a0589-121">DELEGATE</span></span><br/>              | <span data-ttu-id="a0589-122">Il server nell'applicazione di trasporto può creare nuovi contesti di sicurezza che rappresenta il client che verranno accettati da altri server come contesti del client.</span><span class="sxs-lookup"><span data-stu-id="a0589-122">The server in the transport application can build new security contexts impersonating the client that will be accepted by other servers as the client's contexts.</span></span> <span data-ttu-id="a0589-123">Il delegato funziona solo se \_ è impostata l'autenticazione REciproca.</span><span class="sxs-lookup"><span data-stu-id="a0589-123">Delegate works only if MUTUAL\_AUTH is set.</span></span> <span data-ttu-id="a0589-124">Il delegato è attualmente supportato solo da [*Kerberos*](/windows/desktop/SecGloss/k-gly).</span><span class="sxs-lookup"><span data-stu-id="a0589-124">DELEGATE is currently supported only by [*Kerberos*](/windows/desktop/SecGloss/k-gly).</span></span> <span data-ttu-id="a0589-125">Inoltre, Kerberos delegherà solo a un server in cui è presente il flag TRUSTED \_ per la \_ delega.</span><span class="sxs-lookup"><span data-stu-id="a0589-125">Further, Kerberos will delegate only to a server that has the flag TRUSTED\_FOR\_DELEGATION.</span></span> <span data-ttu-id="a0589-126">Non usare questo flag per la [*delega vincolata*](/windows/desktop/SecGloss/c-gly).</span><span class="sxs-lookup"><span data-stu-id="a0589-126">Do not use this flag for [*constrained delegation*](/windows/desktop/SecGloss/c-gly).</span></span><br/> |
| <span data-ttu-id="a0589-127">autenticazione reciproca \_</span><span class="sxs-lookup"><span data-stu-id="a0589-127">MUTUAL\_AUTH</span></span><br/>          | <span data-ttu-id="a0589-128">Le parti che comunicano devono autenticare le proprie identità tra loro.</span><span class="sxs-lookup"><span data-stu-id="a0589-128">The communicating parties must authenticate their identities to each other.</span></span> <span data-ttu-id="a0589-129">Senza l'autenticazione reciproca \_ , il client autentica la propria identità sul server.</span><span class="sxs-lookup"><span data-stu-id="a0589-129">Without MUTUAL\_AUTH, the client authenticates its identity to the server.</span></span> <span data-ttu-id="a0589-130">Con l'autenticazione reciproca \_ , il server deve anche autenticare l'identità del client.</span><span class="sxs-lookup"><span data-stu-id="a0589-130">With MUTUAL\_AUTH, the server also must authenticate its identity to the client.</span></span><br/> <span data-ttu-id="a0589-131">Quando si usa il pacchetto di sicurezza [*Schannel*](/windows/desktop/SecGloss/s-gly) , il server imposta la costante di **\_ \_ \_ autenticazione reciproca ASC RET** solo nell'ultima chiamata a [**AcceptSecurityContext (Negotiate)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), dopo il completamento corretto del mapping dei certificati.</span><span class="sxs-lookup"><span data-stu-id="a0589-131">When using the [*Schannel*](/windows/desktop/SecGloss/s-gly) security package, the server sets the **ASC\_RET\_MUTUAL\_AUTH** constant only in the last call to [**AcceptSecurityContext (Negotiate)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), after certificate mapping has successfully completed.</span></span><br/>           |
| <span data-ttu-id="a0589-132">rilevamento riproduzione \_</span><span class="sxs-lookup"><span data-stu-id="a0589-132">REPLAY\_DETECT</span></span><br/>        | <span data-ttu-id="a0589-133">Il [*pacchetto di sicurezza*](/windows/desktop/SecGloss/s-gly) rileva i pacchetti riprodotti e notifica al chiamante se un pacchetto è stato riprodotto.</span><span class="sxs-lookup"><span data-stu-id="a0589-133">The [*security package*](/windows/desktop/SecGloss/s-gly) detects replayed packets and notifies the caller if a packet has been replayed.</span></span> <span data-ttu-id="a0589-134">L'uso di questo flag implica tutte le condizioni specificate dal flag di integrità.</span><span class="sxs-lookup"><span data-stu-id="a0589-134">The use of this flag implies all of the conditions specified by the INTEGRITY flag.</span></span><br/>                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="a0589-135">\_rilevamento sequenza</span><span class="sxs-lookup"><span data-stu-id="a0589-135">SEQUENCE\_DETECT</span></span><br/>      | <span data-ttu-id="a0589-136">Il contesto deve essere autorizzato a rilevare il recapito non ordinato dei pacchetti in un secondo momento tramite le funzioni di supporto del messaggio.</span><span class="sxs-lookup"><span data-stu-id="a0589-136">The context must be allowed to detect out-of-order delivery of packets later through the message support functions.</span></span> <span data-ttu-id="a0589-137">L'utilizzo di questo flag implica tutte le condizioni specificate dal flag di integrità.</span><span class="sxs-lookup"><span data-stu-id="a0589-137">Use of this flag implies all of the conditions specified by the INTEGRITY flag.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="a0589-138">RISERVATEZZA</span><span class="sxs-lookup"><span data-stu-id="a0589-138">CONFIDENTIALITY</span></span><br/>       | <span data-ttu-id="a0589-139">Il contesto può proteggere i dati in transito usando le funzioni [**EncryptMessage (generale)**](/windows/win32/api/sspi/nf-sspi-encryptmessage) e [**DecryptMessage (generale)**](/windows/win32/api/sspi/nf-sspi-decryptmessage) .</span><span class="sxs-lookup"><span data-stu-id="a0589-139">The context can protect data while in transit using the [**EncryptMessage (General)**](/windows/win32/api/sspi/nf-sspi-encryptmessage) and [**DecryptMessage (General)**](/windows/win32/api/sspi/nf-sspi-decryptmessage) functions.</span></span> <span data-ttu-id="a0589-140">Il flag di RISERVAtezza non funziona se il contesto generato è per l'account Guest.</span><span class="sxs-lookup"><span data-stu-id="a0589-140">The CONFIDENTIALITY flag does not work if the generated context is for the Guest account.</span></span><br/>                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="a0589-141">USA \_ chiave di sessione \_</span><span class="sxs-lookup"><span data-stu-id="a0589-141">USE\_SESSION\_KEY</span></span><br/>     | <span data-ttu-id="a0589-142">È necessario negoziare una nuova [*chiave di sessione*](/windows/desktop/SecGloss/s-gly) .</span><span class="sxs-lookup"><span data-stu-id="a0589-142">A new [*session key*](/windows/desktop/SecGloss/s-gly) must be negotiated.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="a0589-143">Richiedi \_ \_ credenziali</span><span class="sxs-lookup"><span data-stu-id="a0589-143">PROMPT\_FOR\_CREDS</span></span><br/>    | <span data-ttu-id="a0589-144">Se il client è un utente interattivo, è necessario che il pacchetto di sicurezza consenta all'utente di richiedere le [*credenziali*](/windows/desktop/SecGloss/c-gly)appropriate.</span><span class="sxs-lookup"><span data-stu-id="a0589-144">If the client is an interactive user, the security package must, if possible, prompt the user for the appropriate [*credentials*](/windows/desktop/SecGloss/c-gly).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="a0589-145">USA \_ \_ credenziali fornito</span><span class="sxs-lookup"><span data-stu-id="a0589-145">USE\_SUPPLIED\_CREDS</span></span><br/>  | <span data-ttu-id="a0589-146">Le informazioni sulle credenziali specifiche del pacchetto sono disponibili nel buffer di input.</span><span class="sxs-lookup"><span data-stu-id="a0589-146">Package-specific credential information is available in the input buffer.</span></span> <span data-ttu-id="a0589-147">Il pacchetto di sicurezza può utilizzare queste [*credenziali*](/windows/desktop/SecGloss/c-gly) per autenticare la connessione.</span><span class="sxs-lookup"><span data-stu-id="a0589-147">The security package can use these [*credentials*](/windows/desktop/SecGloss/c-gly) to authenticate the connection.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="a0589-148">Salva \_ \_ credenziali fornito</span><span class="sxs-lookup"><span data-stu-id="a0589-148">SAVE\_SUPPLIED\_CREDS</span></span><br/> | <span data-ttu-id="a0589-149">Le credenziali specificate devono essere memorizzate nella cache con le credenziali aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="a0589-149">The supplied credentials should be cached with the supplemental credentials.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="a0589-150">ALLOCA \_ memoria</span><span class="sxs-lookup"><span data-stu-id="a0589-150">ALLOCATE\_MEMORY</span></span><br/>      | <span data-ttu-id="a0589-151">Il [*pacchetto di sicurezza*](/windows/desktop/SecGloss/s-gly) deve allocare memoria.</span><span class="sxs-lookup"><span data-stu-id="a0589-151">The [*security package*](/windows/desktop/SecGloss/s-gly) must allocate memory.</span></span> <span data-ttu-id="a0589-152">Il chiamante deve chiamare la funzione [**FreeContextBuffer**](/windows/desktop/api/Sspi/nf-sspi-freecontextbuffer) per liberare la memoria allocata dal pacchetto di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="a0589-152">The caller must eventually call the [**FreeContextBuffer**](/windows/desktop/api/Sspi/nf-sspi-freecontextbuffer) function to free memory allocated by the security package.</span></span><br/>                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="a0589-153">USA \_ \_ stile DCE</span><span class="sxs-lookup"><span data-stu-id="a0589-153">USE\_DCE\_STYLE</span></span><br/>       | <span data-ttu-id="a0589-154">Il chiamante prevede una [*transazione*](/windows/desktop/SecGloss/t-gly)di autenticazione a tre gambe.</span><span class="sxs-lookup"><span data-stu-id="a0589-154">The caller expects a three-leg authentication [*transaction*](/windows/desktop/SecGloss/t-gly).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="a0589-155">DATAGRAMMA</span><span class="sxs-lookup"><span data-stu-id="a0589-155">DATAGRAM</span></span><br/>              | <span data-ttu-id="a0589-156">È necessario usare la semantica del [*datagramma*](/windows/desktop/SecGloss/d-gly) .</span><span class="sxs-lookup"><span data-stu-id="a0589-156">[*Datagram*](/windows/desktop/SecGloss/d-gly) semantics must be used.</span></span> <span data-ttu-id="a0589-157">Per ulteriori informazioni, vedere [contesti di datagramma](datagram-contexts.md).</span><span class="sxs-lookup"><span data-stu-id="a0589-157">For more information, see [Datagram Contexts](datagram-contexts.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="a0589-158">CONNECTION</span><span class="sxs-lookup"><span data-stu-id="a0589-158">CONNECTION</span></span><br/>            | <span data-ttu-id="a0589-159">È necessario usare la semantica di connessione.</span><span class="sxs-lookup"><span data-stu-id="a0589-159">Connection semantics must be used.</span></span> <span data-ttu-id="a0589-160">Per ulteriori informazioni, vedere [contesti orientati alla connessione](connection-oriented-contexts.md).</span><span class="sxs-lookup"><span data-stu-id="a0589-160">For more information, see [Connection-Oriented Contexts](connection-oriented-contexts.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="a0589-161">Stream</span><span class="sxs-lookup"><span data-stu-id="a0589-161">STREAM</span></span><br/>                | <span data-ttu-id="a0589-162">È necessario usare la semantica del flusso.</span><span class="sxs-lookup"><span data-stu-id="a0589-162">Stream semantics must be used.</span></span> <span data-ttu-id="a0589-163">Per altre informazioni, vedere [contesti di flusso](stream-contexts.md).</span><span class="sxs-lookup"><span data-stu-id="a0589-163">For more information, see [Stream Contexts](stream-contexts.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="a0589-164">\_errore esteso</span><span class="sxs-lookup"><span data-stu-id="a0589-164">EXTENDED\_ERROR</span></span><br/>       | <span data-ttu-id="a0589-165">Se il contesto ha esito negativo, è necessario generare messaggi di risposta di errore per il peer.</span><span class="sxs-lookup"><span data-stu-id="a0589-165">Error reply messages for the peer must be generated if the context fails.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="a0589-166">INTEGRITÀ</span><span class="sxs-lookup"><span data-stu-id="a0589-166">INTEGRITY</span></span><br/>             | <span data-ttu-id="a0589-167">L'integrità del buffer può essere verificata, ma non è abilitato alcun rilevamento della sequenza o della risposta.</span><span class="sxs-lookup"><span data-stu-id="a0589-167">Buffer integrity can be verified but no sequencing or reply detection is enabled.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="a0589-168">Nessuna \_ integrità</span><span class="sxs-lookup"><span data-stu-id="a0589-168">NO\_INTEGRITY</span></span><br/>         | <span data-ttu-id="a0589-169">Il requisito di **integrità** viene ignorato.</span><span class="sxs-lookup"><span data-stu-id="a0589-169">The **INTEGRITY** requirement is ignored.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="a0589-170">IDENTIFICARE</span><span class="sxs-lookup"><span data-stu-id="a0589-170">IDENTIFY</span></span><br/>              | <span data-ttu-id="a0589-171">Quando un server rappresenta un contesto in cui è impostato questo flag, tale rappresentazione produce un accesso estremamente limitato.</span><span class="sxs-lookup"><span data-stu-id="a0589-171">When a server impersonates a context that has this flag set, that impersonation yields extremely limited access.</span></span> <span data-ttu-id="a0589-172">La rappresentazione con il set di identificazione viene utilizzata per verificare l'identità del client.</span><span class="sxs-lookup"><span data-stu-id="a0589-172">Impersonation with IDENTIFY set is used to verify the client's identity.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                       |



 

 

