---
description: Per ridurre il traffico dei controller di dominio e migliorare le prestazioni, il lato client di Microsoft Digest memorizza nella cache le informazioni ricevute dopo il completamento dell'autenticazione con un server.
ms.assetid: cd928266-889a-494c-a94b-4ea7b1dcc241
title: Gestione del contesto di sicurezza tra le connessioni
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aeb450dde789f17f46397cb56fe74b94adcf8ea6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "104347146"
---
# <a name="maintaining-the-security-context-between-connections"></a><span data-ttu-id="6d991-103">Gestione del contesto di sicurezza tra le connessioni</span><span class="sxs-lookup"><span data-stu-id="6d991-103">Maintaining the Security Context Between Connections</span></span>

<span data-ttu-id="6d991-104">Per ridurre il traffico dei controller di dominio e migliorare le prestazioni, il lato client di Microsoft Digest memorizza nella cache le informazioni ricevute dopo il completamento dell'autenticazione con un server.</span><span class="sxs-lookup"><span data-stu-id="6d991-104">To reduce domain controller traffic and improve performance, the client-side of Microsoft Digest caches information received after successful authentication with a server.</span></span> <span data-ttu-id="6d991-105">Per le applicazioni client è necessario memorizzare nella cache l'handle solo per il [*contesto di sicurezza*](../secgloss/s-gly.md) stabilito.</span><span class="sxs-lookup"><span data-stu-id="6d991-105">Client applications need only cache the handle to the [*security context*](../secgloss/s-gly.md) that has been established.</span></span> <span data-ttu-id="6d991-106">Nella tabella seguente vengono descritte le informazioni memorizzate nella cache dal pacchetto di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="6d991-106">The following table describes information cached by the security package.</span></span>



| <span data-ttu-id="6d991-107">Informazioni</span><span class="sxs-lookup"><span data-stu-id="6d991-107">Information</span></span>                                                       | <span data-ttu-id="6d991-108">Descrizione</span><span class="sxs-lookup"><span data-stu-id="6d991-108">Description</span></span>                                                                                                                                         |
|-------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="6d991-109">Nome server</span><span class="sxs-lookup"><span data-stu-id="6d991-109">Server name</span></span>                                                       | <span data-ttu-id="6d991-110">Server in cui è stato creato correttamente un contesto di sicurezza per l'utente.</span><span class="sxs-lookup"><span data-stu-id="6d991-110">The server that has successfully created a security context for the user.</span></span>                                                                           |
| <span data-ttu-id="6d991-111">Area di autenticazione/dominio</span><span class="sxs-lookup"><span data-stu-id="6d991-111">Realm/Domain</span></span>                                                      | <span data-ttu-id="6d991-112">Nome di dominio utilizzato per l'autenticazione riuscita.</span><span class="sxs-lookup"><span data-stu-id="6d991-112">The domain name used in the successful authentication.</span></span>                                                                                              |
| [<span data-ttu-id="6d991-113">*Nonce*</span><span class="sxs-lookup"><span data-stu-id="6d991-113">*Nonce*</span></span>](../secgloss/n-gly.md) | <span data-ttu-id="6d991-114">Parametro nonce del server associato all'autenticazione riuscita.</span><span class="sxs-lookup"><span data-stu-id="6d991-114">A server nonce that is associated with the successful authentication.</span></span>                                                                               |
| <span data-ttu-id="6d991-115">Conteggio nonce</span><span class="sxs-lookup"><span data-stu-id="6d991-115">Nonce count</span></span>                                                       | <span data-ttu-id="6d991-116">Il numero di volte in cui il client ha incluso il parametro nonce nelle richieste al server.</span><span class="sxs-lookup"><span data-stu-id="6d991-116">The number of times the client has included the nonce in requests to the server.</span></span> <span data-ttu-id="6d991-117">Viene utilizzato per il rilevamento della riproduzione.</span><span class="sxs-lookup"><span data-stu-id="6d991-117">This is used for replay-detection.</span></span>                                 |
| <span data-ttu-id="6d991-118">Valore opaco</span><span class="sxs-lookup"><span data-stu-id="6d991-118">Opaque value</span></span>                                                      | <span data-ttu-id="6d991-119">Valore restituito per la direttiva opaca dopo un'autenticazione riuscita.</span><span class="sxs-lookup"><span data-stu-id="6d991-119">The value returned for the opaque directive after a successful authentication.</span></span> <span data-ttu-id="6d991-120">Questo valore contiene un riferimento al contesto di sicurezza dell'utente.</span><span class="sxs-lookup"><span data-stu-id="6d991-120">This value contains a reference to the security context of the user.</span></span> |



 

<span data-ttu-id="6d991-121">Quando un client invia un messaggio a un server, il server deve determinare se il client dispone di un contesto di sicurezza esistente.</span><span class="sxs-lookup"><span data-stu-id="6d991-121">When a client sends a message to a server, the server must determine whether the client has an existing security context.</span></span> <span data-ttu-id="6d991-122">A tale scopo, il server passa ogni richiesta client alla funzione [**AcceptSecurityContext (generale)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) .</span><span class="sxs-lookup"><span data-stu-id="6d991-122">To do this, the server passes each client request to the [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span> <span data-ttu-id="6d991-123">Questa funzione estrae il valore della direttiva Opaque dalla richiesta, se presente, e la usa per cercare il contesto di sicurezza del client.</span><span class="sxs-lookup"><span data-stu-id="6d991-123">This function extracts the value of the opaque directive from the request, if present, and uses it to look up the client's security context.</span></span> <span data-ttu-id="6d991-124">Se viene trovato il contesto di sicurezza, l'handle del contesto viene restituito al server.</span><span class="sxs-lookup"><span data-stu-id="6d991-124">If the security context is found, the handle of the context is returned to the server.</span></span> <span data-ttu-id="6d991-125">Per informazioni correlate, vedere [autenticazione delle richieste successive](authenticating-subsequent-requests-using-microsoft-digest.md).</span><span class="sxs-lookup"><span data-stu-id="6d991-125">For related information, see [Authenticating Subsequent Requests](authenticating-subsequent-requests-using-microsoft-digest.md).</span></span>

<span data-ttu-id="6d991-126">Come mezzo per rilevare gli attacchi di spoofing e riproduzione, il client chiama la funzione [**MakeSignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) che usa un contesto di sicurezza per firmare un messaggio.</span><span class="sxs-lookup"><span data-stu-id="6d991-126">As a means of detecting spoofing and replay attacks, the client calls the [**MakeSignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) function which uses a security context to sign a message.</span></span> <span data-ttu-id="6d991-127">Quando i messaggi vengono protetti tramite la funzione **MakeSignature** , il server utilizza la funzione [**VerifySignature**](/windows/desktop/api/Sspi/nf-sspi-verifysignature) con il contesto memorizzato nella cache per verificare l'origine e l' [*integrità*](../secgloss/i-gly.md)del messaggio.</span><span class="sxs-lookup"><span data-stu-id="6d991-127">When messages are protected using the **MakeSignature** function, the server uses the [**VerifySignature**](/windows/desktop/api/Sspi/nf-sspi-verifysignature) function with the cached context to verify the message's origin and [*integrity*](../secgloss/i-gly.md).</span></span> <span data-ttu-id="6d991-128">Per ulteriori informazioni, vedere la pagina relativa alla [protezione dei messaggi](protecting-messages-using-microsoft-digest.md).</span><span class="sxs-lookup"><span data-stu-id="6d991-128">For more information, see [Protecting Messages](protecting-messages-using-microsoft-digest.md).</span></span>

 

 
