---
description: Implementazione di IWICBitmapEncoder
ms.assetid: b671e941-ded6-4bde-bc4d-461f13feade0
title: Implementazione di IWICBitmapEncoder
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 590dffcf762d22155a89a8143994d9a4d8bcab02
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103883978"
---
# <a name="implementing-iwicbitmapencoder"></a><span data-ttu-id="6db36-103">Implementazione di IWICBitmapEncoder</span><span class="sxs-lookup"><span data-stu-id="6db36-103">Implementing IWICBitmapEncoder</span></span>

-   [<span data-ttu-id="6db36-104">IWICBitmapEncoder</span><span class="sxs-lookup"><span data-stu-id="6db36-104">IWICBitmapEncoder</span></span>](#implementing-iwicbitmapencoder)
    -   [<span data-ttu-id="6db36-105">Inizializzare</span><span class="sxs-lookup"><span data-stu-id="6db36-105">Initialize</span></span>](#initialize)
    -   [<span data-ttu-id="6db36-106">GetContainerFormat</span><span class="sxs-lookup"><span data-stu-id="6db36-106">GetContainerFormat</span></span>](#getcontainerformat)
    -   [<span data-ttu-id="6db36-107">GetEncoderInfo</span><span class="sxs-lookup"><span data-stu-id="6db36-107">GetEncoderInfo</span></span>](#getencoderinfo)
    -   [<span data-ttu-id="6db36-108">CreateNewFrame</span><span class="sxs-lookup"><span data-stu-id="6db36-108">CreateNewFrame</span></span>](#createnewframe)
    -   [<span data-ttu-id="6db36-109">Eseguire il commit</span><span class="sxs-lookup"><span data-stu-id="6db36-109">Commit</span></span>](#commit)
    -   [<span data-ttu-id="6db36-110">Anteprima</span><span class="sxs-lookup"><span data-stu-id="6db36-110">SetPreview</span></span>](#setpreview)
-   [<span data-ttu-id="6db36-111">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="6db36-111">Related topics</span></span>](#related-topics)

## <a name="iwicbitmapencoder"></a><span data-ttu-id="6db36-112">IWICBitmapEncoder</span><span class="sxs-lookup"><span data-stu-id="6db36-112">IWICBitmapEncoder</span></span>

-   [<span data-ttu-id="6db36-113">Inizializzare</span><span class="sxs-lookup"><span data-stu-id="6db36-113">Initialize</span></span>](#initialize)
-   [<span data-ttu-id="6db36-114">GetContainerFormat</span><span class="sxs-lookup"><span data-stu-id="6db36-114">GetContainerFormat</span></span>](#getcontainerformat)
-   [<span data-ttu-id="6db36-115">GetEncoderInfo</span><span class="sxs-lookup"><span data-stu-id="6db36-115">GetEncoderInfo</span></span>](#getencoderinfo)
-   [<span data-ttu-id="6db36-116">CreateNewFrame</span><span class="sxs-lookup"><span data-stu-id="6db36-116">CreateNewFrame</span></span>](#createnewframe)
-   [<span data-ttu-id="6db36-117">Eseguire il commit</span><span class="sxs-lookup"><span data-stu-id="6db36-117">Commit</span></span>](#commit)
-   [<span data-ttu-id="6db36-118">Anteprima</span><span class="sxs-lookup"><span data-stu-id="6db36-118">SetPreview</span></span>](#setpreview)

<span data-ttu-id="6db36-119">Questa interfaccia è la controparte dell'interfaccia [**IWICBitmapDecoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapdecoder) ed è il punto di partenza per la codifica di un file di immagine.</span><span class="sxs-lookup"><span data-stu-id="6db36-119">This interface is the counterpart to the [**IWICBitmapDecoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapdecoder) interface and is the starting point for encoding an image file.</span></span> <span data-ttu-id="6db36-120">Proprio come **IWICBitmapDecoder** viene usato per recuperare le proprietà a livello di contenitore e i singoli frame dal contenitore di immagini, [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder) viene usato per impostare le proprietà a livello di contenitore e serializzare i singoli frame di immagine nel contenitore.</span><span class="sxs-lookup"><span data-stu-id="6db36-120">Just as **IWICBitmapDecoder** is used for retrieving container-level properties and individual frames from the image container, [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder) is used for setting container-level properties and serializing individual image frames into the container.</span></span> <span data-ttu-id="6db36-121">Questa interfaccia viene implementata nella classe del codificatore a livello di contenitore.</span><span class="sxs-lookup"><span data-stu-id="6db36-121">You implement this interface on your container-level encoder class.</span></span>

``` syntax
interface IWICBitmapEncoder : public IUnknown
{
   // Required methods
   HRESULT Initialize ( IStream *pIStream,
              WICBitmapEncoderCacheOption cacheOption );
   HRESULT GetContainerFormat ( GUID *pguidContainerFormat );
   HRESULT GetEncoderInfo ( IWICBitmapEncoderInfo **pIEncoderInfo );
   HRESULT CreateNewFrame ( IWICBitmapFrameEncode **ppIFrameEncode,
              IPropertyBag2 **ppIEncoderOptions );
   HRESULT Commit ( void );

   // Optional methods
   HRESULT SetPreview ( IWICBitmapSource *pIPreview );
   HRESULT SetThumbnail ( IWICBitmapSource *pIThumbnail );
   HRESULT SetColorContexts ( UINT cCount,
              IWICColorContext **ppIColorContext );
   HRESULT GetMetadataQueryWriter ( IWICMetadataQueryWriter 
              **ppIMetadataQueryWriter );
   HRESULT SetPalette ( IWICPalette *pIPalette);
};
```

<span data-ttu-id="6db36-122">Come illustrato nell'argomento relativo all' [implementazione di IWICBitmapDecoder](-wic-imp-iwicbitmapdecoder.md), alcuni formati di immagine hanno anteprime globali, contesti di colore o metadati, mentre molti formati di immagine li forniscono solo in base ai singoli frame.</span><span class="sxs-lookup"><span data-stu-id="6db36-122">As discussed in [Implementing IWICBitmapDecoder](-wic-imp-iwicbitmapdecoder.md), some image formats have global thumbnails, color contexts, or metadata, while many image formats provide these only on a per-frame basis.</span></span> <span data-ttu-id="6db36-123">I metodi per l'impostazione di questi metodi sono pertanto facoltativi in [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder), ma sono necessari in [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode).</span><span class="sxs-lookup"><span data-stu-id="6db36-123">Therefore, the methods for setting these are optional on [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder), but are required on [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode).</span></span> <span data-ttu-id="6db36-124">Verranno illustrati i metodi facoltativi in **IWICBitmapEncoder** nella sezione di **IWICBitmapFrameEncode**, in cui sono implementati più di frequente.</span><span class="sxs-lookup"><span data-stu-id="6db36-124">We’ll discuss the methods that are optional on **IWICBitmapEncoder** in the section on **IWICBitmapFrameEncode**, where they’re most commonly implemented.</span></span>

<span data-ttu-id="6db36-125">Se non sono supportate le anteprime globali, restituire WINCODEC \_ Err \_ CODECNOTHUMBNAIL dal metodo sethumbnail su [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder).</span><span class="sxs-lookup"><span data-stu-id="6db36-125">If you don’t support global thumbnails, return WINCODEC\_ERR\_CODECNOTHUMBNAIL from the SetThumbnail method on [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder).</span></span> <span data-ttu-id="6db36-126">Se non si supporta una tavolozza a livello di contenitore o se l'immagine che si sta codificando non ha un formato indicizzato, restituire WINCODEC \_ Err \_ PALETTEUNAVAILABLE dal metodo sepalette.</span><span class="sxs-lookup"><span data-stu-id="6db36-126">If you don’t support a container-level palette, or if the image you are encoding doesn’t have an indexed format, return WINCODEC\_ERR\_PALETTEUNAVAILABLE from the SetPalette method.</span></span> <span data-ttu-id="6db36-127">Per tutti gli altri metodi non supportati, restituire WINCODEC \_ Err \_ UNSUPPORTEDOPERATION.</span><span class="sxs-lookup"><span data-stu-id="6db36-127">For any other unsupported methods, return WINCODEC\_ERR\_UNSUPPORTEDOPERATION.</span></span>

### <a name="initialize"></a><span data-ttu-id="6db36-128">Inizializzare</span><span class="sxs-lookup"><span data-stu-id="6db36-128">Initialize</span></span>

<span data-ttu-id="6db36-129">[**Initialize**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-initialize) è il primo metodo richiamato su un [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder) dopo che ne è stata creata un'istanza.</span><span class="sxs-lookup"><span data-stu-id="6db36-129">[**Initialize**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-initialize) is the first method invoked on an [**IWICBitmapEncoder**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder) after it has been instantiated.</span></span> <span data-ttu-id="6db36-130">Un flusso di immagini viene passato al codificatore e un chiamante può facoltativamente specificare un'opzione cache.</span><span class="sxs-lookup"><span data-stu-id="6db36-130">An image stream is passed to the encoder, and a caller may optionally specify a cache option.</span></span> <span data-ttu-id="6db36-131">Nel caso del decodificatore, il flusso è di sola lettura, ma il flusso passato a un codificatore è un flusso scrivibile, in cui il codificatore eseguirà la serializzazione di tutti i dati e i metadati dell'immagine.</span><span class="sxs-lookup"><span data-stu-id="6db36-131">In the case of the decoder, the stream is read-only, but the stream passed to an encoder is a writeable stream, into which the encoder will serialize all of the image data and metadata.</span></span> <span data-ttu-id="6db36-132">Anche le opzioni della cache nel codificatore sono diverse.</span><span class="sxs-lookup"><span data-stu-id="6db36-132">The cache options on the encoder are different as well.</span></span>

``` syntax
enum WICBitmapEncoderCacheOption
{
   WICBitmapEncoderCacheInMemory,
   WICBitmapEncoderCacheTempFile,
   WICBitmapEncoderNoCache
}
```

<span data-ttu-id="6db36-133">L'applicazione può scegliere di richiedere al codificatore di memorizzare nella cache i dati dell'immagine in memoria, memorizzarli nella cache in un file temporaneo o scriverli direttamente nel file su disco senza Caching.</span><span class="sxs-lookup"><span data-stu-id="6db36-133">The application has a choice of requesting the encoder to cache the image data in memory, cache it in a temporary file, or to write it directly into the disk file with no caching.</span></span> <span data-ttu-id="6db36-134">Quando viene richiesto di memorizzare nella cache i dati in un file temporaneo, il codificatore deve creare un file temporaneo su disco e scrivere direttamente in tale file senza caching in memoria.</span><span class="sxs-lookup"><span data-stu-id="6db36-134">When asked to cache the data in a temporary file, the encoder should create a temporary file on disk and write directly to that file without caching in memory.</span></span> <span data-ttu-id="6db36-135">Quando il chiamante seleziona l'opzione no cache, è necessario eseguire il commit di ogni frame in ordine prima che sia possibile creare il frame successivo.</span><span class="sxs-lookup"><span data-stu-id="6db36-135">When the caller selects the no cache option, each frame must be committed in order before the next frame can be created.</span></span>

### <a name="getcontainerformat"></a><span data-ttu-id="6db36-136">GetContainerFormat</span><span class="sxs-lookup"><span data-stu-id="6db36-136">GetContainerFormat</span></span>

<span data-ttu-id="6db36-137">[**GetContainerFormat**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-getcontainerformat) viene implementato in modo analogo al metodo [GetContainerFormat](-wic-imp-iwicbitmapdecoder.md) nell' [implementazione di IWICBitmapDecoder](-wic-imp-iwicbitmapdecoder.md).</span><span class="sxs-lookup"><span data-stu-id="6db36-137">[**GetContainerFormat**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-getcontainerformat) is implemented the same way as the [GetContainerFormat](-wic-imp-iwicbitmapdecoder.md) method in [Implementing IWICBitmapDecoder](-wic-imp-iwicbitmapdecoder.md).</span></span>

### <a name="getencoderinfo"></a><span data-ttu-id="6db36-138">GetEncoderInfo</span><span class="sxs-lookup"><span data-stu-id="6db36-138">GetEncoderInfo</span></span>

<span data-ttu-id="6db36-139">[**GetEncoderInfo**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-getencoderinfo) restituisce un oggetto [**IWICBitmapEncoderInfo**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapencoderinfo) .</span><span class="sxs-lookup"><span data-stu-id="6db36-139">[**GetEncoderInfo**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-getencoderinfo) returns an [**IWICBitmapEncoderInfo**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapencoderinfo) object.</span></span> <span data-ttu-id="6db36-140">Per ottenere l'oggetto **IWICBitmapEncoderInfo** , è sufficiente passare il GUID del codificatore al metodo [**CreateComponentInfo**](/windows/desktop/api/Wincodec/nf-wincodec-iwicimagingfactory-createcomponentinfo) in [**IWICImagingFactory**](/windows/desktop/api/Wincodec/nn-wincodec-iwicimagingfactory), quindi richiedere l'interfaccia **IWICBitmapEncoderInfo** .</span><span class="sxs-lookup"><span data-stu-id="6db36-140">To get the **IWICBitmapEncoderInfo** object, just pass the GUID of your encoder to the [**CreateComponentInfo**](/windows/desktop/api/Wincodec/nf-wincodec-iwicimagingfactory-createcomponentinfo) method on [**IWICImagingFactory**](/windows/desktop/api/Wincodec/nn-wincodec-iwicimagingfactory), and then request the **IWICBitmapEncoderInfo** interface on it.</span></span>

<span data-ttu-id="6db36-141">Vedere l'esempio in [implementazione di IWICBitmapDecoder](-wic-imp-iwicbitmapdecoder.md) in [GetDecoderInfo](-wic-imp-iwicbitmapdecoder.md).</span><span class="sxs-lookup"><span data-stu-id="6db36-141">See the example in [Implementing IWICBitmapDecoder](-wic-imp-iwicbitmapdecoder.md) under [GetDecoderInfo](-wic-imp-iwicbitmapdecoder.md).</span></span>

### <a name="createnewframe"></a><span data-ttu-id="6db36-142">CreateNewFrame</span><span class="sxs-lookup"><span data-stu-id="6db36-142">CreateNewFrame</span></span>

<span data-ttu-id="6db36-143">[**CreateNewFrame**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-createnewframe) è la controparte del codificatore di [**GetFrame**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapdecoder-getframe) in [**IWICBitmapDecoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapdecoder).</span><span class="sxs-lookup"><span data-stu-id="6db36-143">[**CreateNewFrame**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-createnewframe) is the encoder counterpart of [**GetFrame**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapdecoder-getframe) on [**IWICBitmapDecoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapdecoder).</span></span> <span data-ttu-id="6db36-144">Questo metodo restituisce un oggetto [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode) , ovvero l'oggetto che serializza effettivamente i dati dell'immagine per un frame specifico all'interno del contenitore.</span><span class="sxs-lookup"><span data-stu-id="6db36-144">This method returns an [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode) object, which is the object that actually serializes the image data for a specific frame within the container.</span></span>

<span data-ttu-id="6db36-145">Uno dei vantaggi di Windows Imaging Component (WIC) è che fornisce un livello di astrazione per le applicazioni che consente loro di utilizzare tutti i formati di immagine nello stesso modo.</span><span class="sxs-lookup"><span data-stu-id="6db36-145">One of the benefits of Windows Imaging Component (WIC) is that it provides a layer of abstraction for applications that enables them to work with all image formats in the same way.</span></span> <span data-ttu-id="6db36-146">Tuttavia, non tutti i formati di immagine sono esattamente uguali.</span><span class="sxs-lookup"><span data-stu-id="6db36-146">However, not all image formats are exactly the same.</span></span> <span data-ttu-id="6db36-147">Alcuni formati di immagine hanno funzionalità non disponibili in altri.</span><span class="sxs-lookup"><span data-stu-id="6db36-147">Some image formats have capabilities that others don’t have.</span></span> <span data-ttu-id="6db36-148">Affinché le applicazioni possano sfruttare i vantaggi di queste funzionalità esclusive, è necessario fornire un modo per il codec per esporle.</span><span class="sxs-lookup"><span data-stu-id="6db36-148">For applications to be able to take advantage of those unique capabilities, it’s necessary to provide a way for the codec to expose them.</span></span> <span data-ttu-id="6db36-149">Questo è lo scopo delle opzioni del codificatore.</span><span class="sxs-lookup"><span data-stu-id="6db36-149">This is the purpose of encoder options.</span></span> <span data-ttu-id="6db36-150">Se il codec supporta le opzioni del codificatore, è necessario creare un oggetto [IPropertyBag2](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa768192(v=vs.85)) che espone le opzioni del codificatore supportate e restituirlo nel parametro *ppIEncoderOptions* di questo metodo.</span><span class="sxs-lookup"><span data-stu-id="6db36-150">If your codec supports any encoder options, you should create an [IPropertyBag2](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa768192(v=vs.85)) object that exposes the encoder options you support, and return it in the *ppIEncoderOptions* parameter of this method.</span></span> <span data-ttu-id="6db36-151">Il chiamante può quindi usare questo oggetto IPropertyBag2 per determinare quali opzioni del codificatore supporta il codec.</span><span class="sxs-lookup"><span data-stu-id="6db36-151">The caller can then use this IPropertyBag2 object to determine what encoder options your codec supports.</span></span> <span data-ttu-id="6db36-152">Se il chiamante desidera specificare i valori per una qualsiasi delle opzioni del codificatore supportate, assegnerà il valore alla proprietà pertinente nell'oggetto IPropertyBag2 e lo passerà all'oggetto [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode) appena creato nel relativo metodo Initialize.</span><span class="sxs-lookup"><span data-stu-id="6db36-152">If the caller wants to specify values for any of the supported encoder options, they will assign the value to the relevant property in the IPropertyBag2 object and pass it to the newly created [**IWICBitmapFrameEncode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode) object in its Initialize method.</span></span>

<span data-ttu-id="6db36-153">Per creare un'istanza di un oggetto [IPropertyBag2](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa768192(v=vs.85)) , è prima di tutto necessario creare uno struct Campo PROPBAG2 per specificare ogni opzione del codificatore supportata dal codificatore e il tipo di dati per ogni proprietà.</span><span class="sxs-lookup"><span data-stu-id="6db36-153">To instantiate an [IPropertyBag2](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa768192(v=vs.85)) object, you first need to create a PROPBAG2 struct to specify each encoder option your encoder supports and its data type for each property.</span></span> <span data-ttu-id="6db36-154">Quindi, è necessario implementare un oggetto IPropertyBag2 che impone gli intervalli di valori per ogni proprietà in scrittura e riconcilia tutti i valori in conflitto o sovrapposti.</span><span class="sxs-lookup"><span data-stu-id="6db36-154">Then you must implement an IPropertyBag2 object that enforces the value ranges for each property on write, and reconciles any conflicting or overlapping values.</span></span> <span data-ttu-id="6db36-155">Per i set semplici di opzioni del codificatore non in conflitto, è possibile richiamare il metodo [**CreateEncoderPropertyBag**](/windows/desktop/api/Wincodecsdk/nf-wincodecsdk-iwiccomponentfactory-createencoderpropertybag) , che creerà un semplice oggetto IPropertyBag2 usando le proprietà specificate nello struct Campo PROPBAG2.</span><span class="sxs-lookup"><span data-stu-id="6db36-155">For simple sets of non-conflicting encoder options, you can invoke the [**CreateEncoderPropertyBag**](/windows/desktop/api/Wincodecsdk/nf-wincodecsdk-iwiccomponentfactory-createencoderpropertybag) method, which will create a simple IPropertyBag2 object using the properties you specify in your PROPBAG2 struct.</span></span> <span data-ttu-id="6db36-156">È comunque necessario applicare gli intervalli di valori.</span><span class="sxs-lookup"><span data-stu-id="6db36-156">You must still enforce the value ranges.</span></span> <span data-ttu-id="6db36-157">Per le opzioni del codificatore più avanzate o per risolvere i conflitti, è necessario scrivere un'implementazione IPropertyBag2 personalizzata.</span><span class="sxs-lookup"><span data-stu-id="6db36-157">For more advanced encoder options, or if you need to reconcile conflicting values, you should write your own IPropertyBag2 implementation.</span></span>


```C++
UINT cuiPropertyCount = 0;
IPropertyBag2* pPropertyBag = NULL;
PROPBAG2* pPropBagOptions;
HRESULT hr;

// Insert code here to initialize piPropertyBag with the 
// supported options for your encoder, and to initialize 
// cuiPropertyCount to the number of encoder option properties
// you are exposing.
...

hr = pComponentFactory->CreateEncoderPropertyBag( 
   pPropBagOptions, cuiPropertyCount, &pPropertyBag);
```



<span data-ttu-id="6db36-158">WIC fornisce un piccolo set di opzioni del codificatore canonico utilizzate da alcuni formati di immagine comuni.</span><span class="sxs-lookup"><span data-stu-id="6db36-158">WIC provides a small set of canonical encoder options that are used by some of the common image formats.</span></span> <span data-ttu-id="6db36-159">Tutte le opzioni del codificatore canonico sono facoltative e i codec non sono necessari per supportarli.</span><span class="sxs-lookup"><span data-stu-id="6db36-159">All of the canonical encoder options are optional, and codecs are not required to support any of them.</span></span> <span data-ttu-id="6db36-160">Il motivo per cui vengono fornite come opzioni canoniche è che molte applicazioni espongono l'interfaccia utente per consentire agli utenti di specificare queste opzioni quando si salva un file di immagine in un formato che li supporta.</span><span class="sxs-lookup"><span data-stu-id="6db36-160">The reason they are provided as canonical options is because many applications expose the user interface for users to specify these options when saving an image file in a format that supports them.</span></span> <span data-ttu-id="6db36-161">Fornire un metodo canonico per specificare queste opzioni consente alle applicazioni di comunicare con facilità ai codificatori in modo coerente.</span><span class="sxs-lookup"><span data-stu-id="6db36-161">Providing a canonical way to specify these options makes it easy for applications to communicate them to encoders in a consistent way.</span></span> <span data-ttu-id="6db36-162">Le opzioni del codificatore canonico sono elencate nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="6db36-162">The canonical encoder options are listed in the following table.</span></span>



| <span data-ttu-id="6db36-163">Opzione del codificatore</span><span class="sxs-lookup"><span data-stu-id="6db36-163">Encoder Option</span></span>     | <span data-ttu-id="6db36-164">VARTYPE</span><span class="sxs-lookup"><span data-stu-id="6db36-164">VARTYPE</span></span>  | <span data-ttu-id="6db36-165">Gamma valori</span><span class="sxs-lookup"><span data-stu-id="6db36-165">Value Range</span></span>               |
|--------------------|----------|---------------------------|
| <span data-ttu-id="6db36-166">Lossless</span><span class="sxs-lookup"><span data-stu-id="6db36-166">Lossless</span></span>           | <span data-ttu-id="6db36-167">\_bool VT</span><span class="sxs-lookup"><span data-stu-id="6db36-167">VT\_BOOL</span></span> | <span data-ttu-id="6db36-168">Vero/Falso</span><span class="sxs-lookup"><span data-stu-id="6db36-168">True/False</span></span>                |
| <span data-ttu-id="6db36-169">ImageQuality</span><span class="sxs-lookup"><span data-stu-id="6db36-169">ImageQuality</span></span>       | <span data-ttu-id="6db36-170">\_R4 VT</span><span class="sxs-lookup"><span data-stu-id="6db36-170">VT\_R4</span></span>   | <span data-ttu-id="6db36-171">0.0-1,0</span><span class="sxs-lookup"><span data-stu-id="6db36-171">0.0-1.0</span></span>                   |
| <span data-ttu-id="6db36-172">CompressionQuality</span><span class="sxs-lookup"><span data-stu-id="6db36-172">CompressionQuality</span></span> | <span data-ttu-id="6db36-173">\_R4 VT</span><span class="sxs-lookup"><span data-stu-id="6db36-173">VT\_R4</span></span>   | <span data-ttu-id="6db36-174">0.0-1,0</span><span class="sxs-lookup"><span data-stu-id="6db36-174">0.0-1.0</span></span>                   |
| <span data-ttu-id="6db36-175">BitmapTransform</span><span class="sxs-lookup"><span data-stu-id="6db36-175">BitmapTransform</span></span>    | <span data-ttu-id="6db36-176">\_Ui1 VT</span><span class="sxs-lookup"><span data-stu-id="6db36-176">VT\_UI1</span></span>  | <span data-ttu-id="6db36-177">WICBitmapTransformOptions</span><span class="sxs-lookup"><span data-stu-id="6db36-177">WICBitmapTransformOptions</span></span> |



 

<span data-ttu-id="6db36-178">Se il codec supporta la codifica senza perdita di codice, è necessario esporre l'opzione del codificatore lossless come metodo per le applicazioni per richiedere che un'immagine venga codificata senza perdita di codice.</span><span class="sxs-lookup"><span data-stu-id="6db36-178">If your codec supports lossless encoding, you should expose the Lossless encoder option as a way for applications to request that an image be losslessly encoded.</span></span> <span data-ttu-id="6db36-179">Se un chiamante imposta questa proprietà su true, è necessario ignorare l'opzione ImageQuality e codificare l'immagine senza perdita di pagina.</span><span class="sxs-lookup"><span data-stu-id="6db36-179">If a caller sets this property to True, you should ignore the ImageQuality option and encode the image losslessly.</span></span>

<span data-ttu-id="6db36-180">L'opzione ImageQuality consente a un'applicazione di specificare il grado di fedeltà con cui codificare l'immagine.</span><span class="sxs-lookup"><span data-stu-id="6db36-180">The ImageQuality option allows an application to specify the degree of fidelity with which to encode the image.</span></span> <span data-ttu-id="6db36-181">Questa opzione consente a un utente di raggiungere un compromesso tra la qualità dell'immagine e la velocità e/o le dimensioni del file.</span><span class="sxs-lookup"><span data-stu-id="6db36-181">This option lets a user make a tradeoff between image quality versus speed and/or file size.</span></span> <span data-ttu-id="6db36-182">JPEG è un esempio di formato di immagine che supporta questo compromesso.</span><span class="sxs-lookup"><span data-stu-id="6db36-182">JPEG is an example of an image format that supports this tradeoff.</span></span> <span data-ttu-id="6db36-183">Il valore 0,0 indica che la fedeltà è di importanza bassa e che il codificatore deve utilizzare l'algoritmo con la massima perdita.</span><span class="sxs-lookup"><span data-stu-id="6db36-183">A value of 0.0 indicates that fidelity is of low importance and the encoder should use its most lossy algorithm.</span></span> <span data-ttu-id="6db36-184">Il valore 1,0 indica che la fedeltà è la più importante e che il codificatore deve mantenere la massima fedeltà possibile.</span><span class="sxs-lookup"><span data-stu-id="6db36-184">A value of 1.0 indicates that fidelity is the most important and the encoder should preserve the highest fidelity possible.</span></span> <span data-ttu-id="6db36-185">(A seconda del codec, questo potrebbe essere sinonimo di opzione Lossless).</span><span class="sxs-lookup"><span data-stu-id="6db36-185">(Depending on your codec, this may be synonymous with the Lossless option.</span></span> <span data-ttu-id="6db36-186">Tuttavia, se il codec supporta la codifica lossless e se l'opzione lossless è impostata su true, l'opzione ImageQuality deve essere ignorata.</span><span class="sxs-lookup"><span data-stu-id="6db36-186">However, if your codec supports lossless encoding, and if the Lossless option is set to True, the ImageQuality option should be ignored.)</span></span>

<span data-ttu-id="6db36-187">L'opzione CompressionQuality consente a un'applicazione di specificare l'efficienza della compressione da usare durante la codifica dell'immagine.</span><span class="sxs-lookup"><span data-stu-id="6db36-187">The CompressionQuality option allows an application to specify the efficiency of compression to use when encoding the image.</span></span> <span data-ttu-id="6db36-188">Un algoritmo molto efficiente può produrre un file di immagine più piccolo con la stessa qualità di un algoritmo di compressione meno efficiente, ma potrebbe richiedere più tempo per la codifica.</span><span class="sxs-lookup"><span data-stu-id="6db36-188">A very efficient algorithm may produce a smaller image file with the same quality as a less efficient compression algorithm, but may take longer to encode.</span></span> <span data-ttu-id="6db36-189">Questa opzione consente a un utente di specificare un compromesso tra le dimensioni del file e la velocità di codifica, conservando allo stesso tempo lo stesso livello di qualità.</span><span class="sxs-lookup"><span data-stu-id="6db36-189">This option lets a user specify a tradeoff between file size versus speed of encoding, while preserving the same level of quality.</span></span> <span data-ttu-id="6db36-190">TIFF è un esempio di formato di immagine che supporta questo compromesso.</span><span class="sxs-lookup"><span data-stu-id="6db36-190">TIFF is an example of an image format that supports this tradeoff.</span></span> <span data-ttu-id="6db36-191">Si noti che un formato, ad esempio JPEG, supporta diversi livelli di compressione, ma una maggiore velocità di compressione comporta una riduzione della qualità dell'immagine.</span><span class="sxs-lookup"><span data-stu-id="6db36-191">(Note that a format such as JPEG supports different levels of compression, but a higher rate of compression results in lower image quality.</span></span> <span data-ttu-id="6db36-192">Pertanto, un formato di immagine JPEG esporrà l'opzione ImageQuality anziché l'opzione CompressionQuality. Il valore 0,0 per questa opzione indica che è necessario comprimere l'immagine il più rapidamente possibile, senza ridurre la fedeltà, a scapito di una dimensione di file più grande.</span><span class="sxs-lookup"><span data-stu-id="6db36-192">Therefore, a JPEG image format would expose the ImageQuality option rather than the CompressionQuality option.) A value of 0.0 for this option indicates that you should compress the image as quickly as possible, without reducing fidelity, at the expense of a larger file size.</span></span> <span data-ttu-id="6db36-193">Il valore 1,0 indica che è necessario creare le dimensioni più piccole possibile del file (allo stesso livello di qualità), indipendentemente dal tempo necessario per la codifica.</span><span class="sxs-lookup"><span data-stu-id="6db36-193">A value of 1.0 indicates that you should create the smallest possible file size (at the same level of quality), regardless of how long it may take to encode it.</span></span> <span data-ttu-id="6db36-194">Un codec può supportare sia l'opzione ImageQuality che l'opzione CompressionQuality, dove l'opzione ImageQuality specifica il grado accettabile di lossiness e l'opzione CompressionQuality offre un compromesso di dimensioni/velocità al livello di qualità specificato.</span><span class="sxs-lookup"><span data-stu-id="6db36-194">A codec can support both the ImageQuality option and the CompressionQuality option, where the ImageQuality option specifies the acceptable degree of lossiness, and the CompressionQuality option offers a size/speed tradeoff at the specified quality level.</span></span>

<span data-ttu-id="6db36-195">L'opzione BitmapTransform consente al chiamante di specificare un angolo di rotazione o un orientamento verticale o orizzontale per il capovolgimento durante la codifica.</span><span class="sxs-lookup"><span data-stu-id="6db36-195">The BitmapTransform option provides a way for the caller to specify a rotation angle or vertical or horizontal flip orientation when encoding.</span></span> <span data-ttu-id="6db36-196">L'enumerazione WICBitmapTransformOptions utilizzata per specificare la trasformazione richiesta è la stessa enum utilizzata per la richiesta di una trasformazione durante la decodifica tramite l'interfaccia IWICBitmapSourceTransform.</span><span class="sxs-lookup"><span data-stu-id="6db36-196">The WICBitmapTransformOptions enum used to specify the requested transform is the same enum used when requesting a transform during decoding through the IWICBitmapSourceTransform interface.</span></span>

<span data-ttu-id="6db36-197">Si noti che i codificatori non sono limitati alle opzioni del codificatore canonico.</span><span class="sxs-lookup"><span data-stu-id="6db36-197">Note that encoders are not limited to the canonical encoder options.</span></span> <span data-ttu-id="6db36-198">Lo scopo delle opzioni del codificatore è consentire ai codificatori di esporre le proprie funzionalità e non esiste alcun limite ai tipi di funzionalità che è possibile esporre.</span><span class="sxs-lookup"><span data-stu-id="6db36-198">The purpose of encoder options is to enable encoders to expose their capabilities, and there is no limit to the types of capabilities you can expose.</span></span> <span data-ttu-id="6db36-199">Verificare che le opzioni del codificatore siano ben documentate.</span><span class="sxs-lookup"><span data-stu-id="6db36-199">Make sure your encoder options are well-documented.</span></span> <span data-ttu-id="6db36-200">Anche se un'applicazione può usare il contenitore delle proprietà restituito da questo metodo per individuare i nomi, i tipi e gli intervalli di valori per le opzioni supportate, l'unico modo per individuare i significati o come esporli nell'interfaccia utente è dalla documentazione.</span><span class="sxs-lookup"><span data-stu-id="6db36-200">Even though an application can use the property bag you return from this method to discover the names, types, and value ranges for the options you support, the only way for them to find out their meanings, or how to expose them in the user interface, is from your documentation.</span></span>

### <a name="commit"></a><span data-ttu-id="6db36-201">Commit</span><span class="sxs-lookup"><span data-stu-id="6db36-201">Commit</span></span>

<span data-ttu-id="6db36-202">[**Commit**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-commit) è il metodo chiamato dopo che tutti i dati e i metadati dell'immagine sono stati serializzati nel flusso.</span><span class="sxs-lookup"><span data-stu-id="6db36-202">[**Commit**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-commit) is the method you call after all the image data and metadata have been serialized into the stream.</span></span> <span data-ttu-id="6db36-203">È consigliabile usare questo metodo per serializzare i dati dell'immagine di anteprima nel flusso e qualsiasi anteprima globale, metadati, tavolozza o altri elementi, se applicabile.</span><span class="sxs-lookup"><span data-stu-id="6db36-203">You should use this method to serialize the Preview image data into the stream, and any global thumbnails, metadata, palette, or other items, if applicable.</span></span> <span data-ttu-id="6db36-204">Questo metodo non deve chiudere il flusso di file, perché l'applicazione che ha aperto il flusso è prevista per chiuderla.</span><span class="sxs-lookup"><span data-stu-id="6db36-204">This method should not close the file stream, because the application that opened the stream is expected to close it.</span></span>

<span data-ttu-id="6db36-205">La sezione nel metodo IWICBitmapFrameEncode: commit contiene informazioni dettagliate sul modo in cui IWICBitmapEncoderCacheOptions influisce sul comportamento di questo metodo.</span><span class="sxs-lookup"><span data-stu-id="6db36-205">The section on the IWICBitmapFrameEncode:Commit method has details on how the IWICBitmapEncoderCacheOptions affect the behavior of this method.</span></span>

### <a name="setpreview"></a><span data-ttu-id="6db36-206">Anteprima</span><span class="sxs-lookup"><span data-stu-id="6db36-206">SetPreview</span></span>

<span data-ttu-id="6db36-207">L' [**Anteprima**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-setpreview) viene utilizzata per creare un'anteprima dell'immagine.</span><span class="sxs-lookup"><span data-stu-id="6db36-207">[**SetPreview**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapencoder-setpreview) is used to create a preview of the image.</span></span> <span data-ttu-id="6db36-208">Sebbene non sia strettamente necessario che ogni immagine disponga di un'anteprima, si consiglia vivamente di usarla.</span><span class="sxs-lookup"><span data-stu-id="6db36-208">While it is not strictly required that every image have a preview, it is highly recommended.</span></span> <span data-ttu-id="6db36-209">Le fotocamere digitali e gli scanner moderni generano immagini con risoluzione molto elevata, che tendono a essere molto grandi e, di conseguenza, importano un tempo di elaborazione significativo per la decodifica.</span><span class="sxs-lookup"><span data-stu-id="6db36-209">Modern digital cameras and scanners generate very high resolution images, which tend to be very large and, consequently, take significant processing time to decode.</span></span> <span data-ttu-id="6db36-210">Le immagini della prossima generazione di fotocamere saranno ancora più grandi.</span><span class="sxs-lookup"><span data-stu-id="6db36-210">Images from the next generation of cameras will be even larger.</span></span> <span data-ttu-id="6db36-211">È consigliabile fornire una versione più piccola, più bassa della risoluzione, di un'immagine, in genere in formato JPEG, che può essere rapidamente decodificata e visualizzata "immediatamente" quando un utente la richiede.</span><span class="sxs-lookup"><span data-stu-id="6db36-211">It’s a good idea to provide a smaller, lower resolution version of an image, typically in JPEG format, that can be quickly decoded and displayed “instantly” when a user requests it.</span></span> <span data-ttu-id="6db36-212">Un'applicazione può richiedere un'anteprima prima di richiedere la decodifica dell'immagine effettiva per offrire un'esperienza migliore per gli utenti e mostrare loro una rappresentazione delle dimensioni dello schermo dell'immagine mentre sono in attesa di decodificare l'immagine effettiva.</span><span class="sxs-lookup"><span data-stu-id="6db36-212">An application may request a preview before requesting the actual image to be decoded to provide a better experience for users, and show them a screen-size representation of the image while theyare waiting to decode the actual image.</span></span> <span data-ttu-id="6db36-213">Sebbene i codec forniscano anteprime, i codec che non supportano [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform) devono assolutamente farlo.</span><span class="sxs-lookup"><span data-stu-id="6db36-213">Although codecs should provide previews, codecs that do not support [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform) should definitely do so.</span></span>

<span data-ttu-id="6db36-214">Se si fornisce un'anteprima JPEG, non è necessario scrivere un codificatore JPEG per codificarlo.</span><span class="sxs-lookup"><span data-stu-id="6db36-214">If you provide a JPEG preview, you don’t have to write a JPEG encoder to encode it.</span></span> <span data-ttu-id="6db36-215">È necessario delegare il codificatore JPEG fornito con la piattaforma WIC per la codifica di anteprime e anteprime.</span><span class="sxs-lookup"><span data-stu-id="6db36-215">You should delegate to the JPEG encoder that ships with the WIC platform for encoding both previews and thumbnails.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6db36-216">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="6db36-216">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="6db36-217">**Riferimento**</span><span class="sxs-lookup"><span data-stu-id="6db36-217">**Reference**</span></span>
</dt> <dt>

[<span data-ttu-id="6db36-218">**IWICBitmapEncoder**</span><span class="sxs-lookup"><span data-stu-id="6db36-218">**IWICBitmapEncoder**</span></span>](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapencoder)
</dt> <dt>

[<span data-ttu-id="6db36-219">**IWICBitmapFrameEncode**</span><span class="sxs-lookup"><span data-stu-id="6db36-219">**IWICBitmapFrameEncode**</span></span>](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframeencode)
</dt> <dt>

<span data-ttu-id="6db36-220">**Informazioni concettuali**</span><span class="sxs-lookup"><span data-stu-id="6db36-220">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="6db36-221">Interfacce del codificatore</span><span class="sxs-lookup"><span data-stu-id="6db36-221">Encoder Interfaces</span></span>](-wic-encoderinterfaces.md)
</dt> <dt>

[<span data-ttu-id="6db36-222">Implementazione di IWICBitmapCodecProgressNotification (encoder)</span><span class="sxs-lookup"><span data-stu-id="6db36-222">Implementing IWICBitmapCodecProgressNotification (Encoder)</span></span>](-wic-imp-iwicbitmapcodecprogressnotification-encoder.md)
</dt> <dt>

[<span data-ttu-id="6db36-223">Come scrivere un CODEC WIC-Enabled</span><span class="sxs-lookup"><span data-stu-id="6db36-223">How to Write a WIC-Enabled CODEC</span></span>](-wic-howtowriteacodec.md)
</dt> <dt>

[<span data-ttu-id="6db36-224">Panoramica del componente imaging Windows</span><span class="sxs-lookup"><span data-stu-id="6db36-224">Windows Imaging Component Overview</span></span>](-wic-about-windows-imaging-codec.md)
</dt> </dl>

 

 
