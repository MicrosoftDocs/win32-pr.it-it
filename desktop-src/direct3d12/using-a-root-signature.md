---
title: Uso di una firma radice
description: La firma radice è la definizione di una raccolta disposta in modo arbitrario di tabelle dei descrittori (incluso il relativo layout), costanti radice e descrittori radice.
ms.assetid: 0131CDE4-02DB-440A-92B8-B0933C6414B0
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3babe26dc06d4f85ce3d6fb771e18c78b54a3701
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "74105092"
---
# <a name="using-a-root-signature"></a><span data-ttu-id="6bb3e-103">Uso di una firma radice</span><span class="sxs-lookup"><span data-stu-id="6bb3e-103">Using a Root Signature</span></span>

<span data-ttu-id="6bb3e-104">La firma radice è la definizione di una raccolta disposta in modo arbitrario di tabelle dei descrittori (incluso il relativo layout), costanti radice e descrittori radice.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-104">The root signature is the definition of an arbitrarily arranged collection of descriptor tables (including their layout), root constants and root descriptors.</span></span> <span data-ttu-id="6bb3e-105">Ogni voce ha un costo verso un limite massimo, pertanto l'applicazione può comportare un compromesso tra il numero di ogni tipo di voce che la firma radice conterrà.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-105">Each entry has a cost towards a maximum limit, so the application can trade off the balance between how many of each type of entry the root signature will contain.</span></span>

-   [<span data-ttu-id="6bb3e-106">Semantica elenco comandi</span><span class="sxs-lookup"><span data-stu-id="6bb3e-106">Command List Semantic</span></span>](#command-list-semantic)
-   [<span data-ttu-id="6bb3e-107">Semantica bundle</span><span class="sxs-lookup"><span data-stu-id="6bb3e-107">Bundle Semantics</span></span>](#bundle-semantics)
-   [<span data-ttu-id="6bb3e-108">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="6bb3e-108">Related topics</span></span>](#related-topics)

<span data-ttu-id="6bb3e-109">La firma radice è un oggetto che può essere creato dalla specifica manuale nell'API.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-109">The root signature is an object that can be created by manual specification at the API.</span></span> <span data-ttu-id="6bb3e-110">Tutti gli shader in un oggetto PSO devono essere compatibili con il layout radice specificato con l'oggetto PSO. in caso contrario, i singoli shader devono includere layout radice incorporati che corrispondono tra loro. in caso contrario, la creazione di PSO non riuscirà.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-110">All shaders in a PSO must be compatible with the root layout specified with the PSO, or else the individual shaders must include embedded root layouts that match each other; otherwise, PSO creation will fail.</span></span> <span data-ttu-id="6bb3e-111">Una proprietà della firma radice è che non è necessario che gli shader ne siano a conoscenza quando vengono creati, sebbene le firme radice possano essere create direttamente in shader, se lo si desidera.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-111">One property of the root signature is that shaders don't have to know about it when authored, although root signatures can also be authored directly in shaders if desired.</span></span> <span data-ttu-id="6bb3e-112">Per gli asset shader esistenti non è necessario che le modifiche siano compatibili con le firme radice.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-112">Existing shader assets do not require any changes to be compatible with root signatures.</span></span> <span data-ttu-id="6bb3e-113">Il modello di shader 5,1 è stato introdotto per offrire una flessibilità aggiuntiva (indicizzazione dinamica dei descrittori dall'interno degli shader), che può essere adottata in modo incrementale a partire dalle risorse dello shader esistenti, se lo si desidera.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-113">Shader Model 5.1 is introduced to provide some extra flexibility (dynamic indexing of descriptors from within shaders), and can be incrementally adopted starting from existing shader assets as desired.</span></span>

## <a name="command-list-semantic"></a><span data-ttu-id="6bb3e-114">Semantica elenco comandi</span><span class="sxs-lookup"><span data-stu-id="6bb3e-114">Command List Semantic</span></span>

<span data-ttu-id="6bb3e-115">All'inizio di un elenco di comandi, la firma radice non è definita.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-115">At the beginning of a command list, the root signature is undefined.</span></span> <span data-ttu-id="6bb3e-116">Gli shader grafici hanno una firma radice separata dal compute shader, ciascuno assegnato in modo indipendente in un elenco di comandi.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-116">Graphics shaders have a separate root signature from the compute shader, each independently assigned on a command list.</span></span> <span data-ttu-id="6bb3e-117">La firma radice impostata in un elenco di comandi o in un bundle deve corrispondere anche all'oggetto PSO attualmente impostato al momento dell'estrazione. in caso contrario, il comportamento non è definito.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-117">The root signature set on a command list or bundle must also match the currently set PSO at Draw/Dispatch; otherwise, the behavior is undefined.</span></span> <span data-ttu-id="6bb3e-118">Mancata corrispondenza della firma radice temporanea prima che il metodo di creazione/invio sia corretto, ad esempio impostando un oggetto PSO incompatibile prima di passare a una firma radice compatibile (purché siano compatibili con l'ora di creazione/invio).</span><span class="sxs-lookup"><span data-stu-id="6bb3e-118">Transient root signature mismatches before Draw/Dispatch are fine - such as setting an incompatible PSO before switching to a compatible root signature (as long as these are compatible by the time Draw/Dispatch is called).</span></span> <span data-ttu-id="6bb3e-119">L'impostazione di un oggetto PSO non comporta la modifica della firma radice.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-119">Setting a PSO does not change the root signature.</span></span> <span data-ttu-id="6bb3e-120">Per impostare la firma radice, l'applicazione deve chiamare un'API dedicata.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-120">The application must call a dedicated API for setting the root signature.</span></span>

<span data-ttu-id="6bb3e-121">Una volta impostata una firma radice in un elenco di comandi, il layout definisce il set di binding che l'applicazione deve fornire e quali PSO possono essere utilizzati (quelli compilati con lo stesso layout) per le successive chiamate di disegno/invio.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-121">Once a root signature has been set on a command list, the layout defines the set of bindings that the application is expected to provide, and which PSOs can be used (those compiled with the same layout) for the next draw/dispatch calls.</span></span> <span data-ttu-id="6bb3e-122">Una firma radice, ad esempio, può essere definita dall'applicazione per includere le voci seguenti.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-122">For example, a root signature could be defined by the application to have the following entries.</span></span> <span data-ttu-id="6bb3e-123">Ogni voce viene definita "slot".</span><span class="sxs-lookup"><span data-stu-id="6bb3e-123">Each entry is referred to as a "slot".</span></span>

-   <span data-ttu-id="6bb3e-124">\[0 \] un descrittore CBV inline (descrittori radice)</span><span class="sxs-lookup"><span data-stu-id="6bb3e-124">\[0\] A CBV descriptor inline (root descriptors)</span></span>
-   <span data-ttu-id="6bb3e-125">\[1 \] tabella descrittore contenente 2 SRVs, 1 CBVs e 1 UAV</span><span class="sxs-lookup"><span data-stu-id="6bb3e-125">\[1\] A descriptor table containing 2 SRVs, 1 CBVs, and 1 UAV</span></span>
-   <span data-ttu-id="6bb3e-126">\[2 \] tabella descrittore contenente 1 campionatore</span><span class="sxs-lookup"><span data-stu-id="6bb3e-126">\[2\] A descriptor table containing 1 sampler</span></span>
-   <span data-ttu-id="6bb3e-127">\[3 \] raccolta a 4x32 bit di costanti radice</span><span class="sxs-lookup"><span data-stu-id="6bb3e-127">\[3\] A 4x32-bit collection of root constants</span></span>
-   <span data-ttu-id="6bb3e-128">\[4 \] tabella descrittore contenente un numero di SRVs non specificato</span><span class="sxs-lookup"><span data-stu-id="6bb3e-128">\[4\] A descriptor table containing an unspecified number of SRVs</span></span>

<span data-ttu-id="6bb3e-129">In questo caso, prima di poter emettere un progetto/dispatch, è previsto che l'applicazione imposti l'associazione appropriata a ognuno degli slot \[ 0.. 4 \] definiti dall'applicazione con la firma radice corrente.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-129">In this case, before being able to issue a Draw/Dispatch, the application is expected to set the appropriate binding to each of the slots \[0..4\] that the application defined with its current root signature.</span></span> <span data-ttu-id="6bb3e-130">Ad esempio, in corrispondenza dello slot \[ 1 \] , è necessario associare una tabella dei descrittori, che è un'area contigua in un heap descrittore che contiene (o conterrà at execution) 2 SRVs, 1 CBVs e 1 UAV.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-130">For instance, at slot \[1\], a descriptor table must be bound, which is a contiguous region in a descriptor heap that contains (or will contain at execution) 2 SRVs, 1 CBVs, and 1 UAV.</span></span> <span data-ttu-id="6bb3e-131">Analogamente, le tabelle del descrittore devono essere impostate negli slot \[ 2 \] e \[ 4 \] .</span><span class="sxs-lookup"><span data-stu-id="6bb3e-131">Similarly, descriptor tables must be set at slots \[2\] and \[4\].</span></span>

<span data-ttu-id="6bb3e-132">L'applicazione può modificare parte delle associazioni della firma radice alla volta (il resto rimane invariato).</span><span class="sxs-lookup"><span data-stu-id="6bb3e-132">The application can change part of the root signature bindings at a time (the rest remain unchanged).</span></span> <span data-ttu-id="6bb3e-133">Se, ad esempio, l'unico elemento che deve cambiare tra le estrazioni è una delle costanti in corrispondenza dello slot \[ 2 \] , è necessario riassociare l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-133">For example, if the only thing that needs to change between draws is one of the constants at slot \[2\], that is all the application needs to rebind.</span></span> <span data-ttu-id="6bb3e-134">Come illustrato in precedenza, le versioni del driver/hardware di tutte le firme radice associano lo stato modificato automaticamente.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-134">As discussed previously, the driver/hardware versions all root signature bind state as it is modified automatically.</span></span> <span data-ttu-id="6bb3e-135">Se una firma radice viene modificata in un elenco di comandi, tutte le associazioni di firma radice precedenti diventano obsolete e tutte le associazioni appena previste devono essere impostate prima di creare/inviare. in caso contrario, il comportamento non è definito.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-135">If a root signature is changed on a command list, all previous root signature bindings become stale and all newly expected bindings must be set before Draw/Dispatch; otherwise, the behavior is undefined.</span></span> <span data-ttu-id="6bb3e-136">Se la firma radice è impostata in modo ridondante sullo stesso oggetto attualmente impostato, le associazioni della firma radice esistenti non diventano obsolete.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-136">If the root signature is redundantly set to the same one currently set, existing root signature bindings do not become stale.</span></span>

## <a name="bundle-semantics"></a><span data-ttu-id="6bb3e-137">Semantica bundle</span><span class="sxs-lookup"><span data-stu-id="6bb3e-137">Bundle Semantics</span></span>

<span data-ttu-id="6bb3e-138">I bundle ereditano i binding della firma radice dell'elenco di comandi (i binding ai vari slot nell'esempio di elenco dei comandi precedente).</span><span class="sxs-lookup"><span data-stu-id="6bb3e-138">Bundles inherit the command list's root signature bindings (the bindings to the various slots in the Command List example above).</span></span> <span data-ttu-id="6bb3e-139">Se un bundle deve modificare alcune delle associazioni di firma radice ereditate, deve innanzitutto impostare la firma radice in modo che corrisponda all'elenco dei comandi chiamante (le associazioni ereditate non diventano obsolete).</span><span class="sxs-lookup"><span data-stu-id="6bb3e-139">If a bundle needs to change some of the inherited root signature bindings, it must first set the root signature to be the same as the calling command list (the inherited bindings do not become stale).</span></span> <span data-ttu-id="6bb3e-140">Se il bundle imposta la firma radice in modo che sia diverso dall'elenco dei comandi chiamante, che ha lo stesso effetto della modifica della firma radice nell'elenco dei comandi descritto in precedenza: tutti i binding della firma radice precedenti sono obsoleti e le associazioni appena previste devono essere impostate prima di creare/inviare. in caso contrario, il comportamento non è definito.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-140">If the bundle sets the root signature to be different than the calling command list, that has the same effect as changing the root signature on the command list described above: all previous root signature bindings are stale and newly expected bindings must be set before Draw/Dispatch; otherwise, the behavior is undefined.</span></span> <span data-ttu-id="6bb3e-141">Se non è necessario che un bundle modifichi le associazioni della firma radice, non è necessario impostare la firma radice.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-141">If a bundle does not need to change any root signature bindings, it does not need to set the root signature.</span></span>

<span data-ttu-id="6bb3e-142">Il codice seguente mostra un esempio di flusso di chiamate in un bundle.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-142">The following code shows an example call flow into a bundle.</span></span>

``` syntax
// Command List
...
pCmdList->SetGraphicsRootSignature(pRootSig); // new parameter space
MyEngine_SetTextures(); // bundle inherits descriptor table setting
MyEngine_SetAnimationFactor(fTime); // bundle inherits root constant
pCmdList->ExecuteBundle(...);
...
// Bundle
pBundle->SetGraphicsRootSignature(pRootSig); // same as caller, in order to inherits bindings
pBundle->SetPipelineState(pPS); 
pBundle->SetGraphicsRoot32BitConstant(drawConstantsSlot,0,drawIDOffset);
pBundle->Draw(...); // using inherited textures / animation factor
pBundle->SetGraphicsRoot32BitConstant(drawConstantsSlot,1,drawIDOffset);
pBundle->Draw(...);
...
```

<span data-ttu-id="6bb3e-143">Quando si esce da un bundle, le modifiche apportate al layout radice e/o le modifiche di binding apportate dal bundle vengono ereditate nuovamente nell'elenco dei comandi chiamante al termine dell'esecuzione di un bundle.</span><span class="sxs-lookup"><span data-stu-id="6bb3e-143">Coming out of a bundle, any root layout changes and/or binding changes a bundle makes are inherited back to the calling command list when a bundle finishes executing.</span></span>

<span data-ttu-id="6bb3e-144">Per altre informazioni sull'ereditarietà, vedere la sezione **ereditarietà dello stato della pipeline grafica** di [gestione dello stato della pipeline grafica in Direct3D 12](managing-graphics-pipeline-state-in-direct3d-12.md).</span><span class="sxs-lookup"><span data-stu-id="6bb3e-144">For more information on inheritance, refer to the **Graphics pipeline state inheritance** section of [Managing Graphics Pipeline State in Direct3D 12](managing-graphics-pipeline-state-in-direct3d-12.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="6bb3e-145">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="6bb3e-145">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6bb3e-146">Firme radice</span><span class="sxs-lookup"><span data-stu-id="6bb3e-146">Root Signatures</span></span>](root-signatures.md)
</dt> </dl>

 

 




