---
title: Residenza
description: Un oggetto viene considerato residente quando è accessibile dalla GPU.
ms.assetid: 956F80D7-EEC8-4D88-B251-EE325614F31E
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6b842ce5b3e89c3877f50036e747a90f14104bce
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104548858"
---
# <a name="residency"></a><span data-ttu-id="c6792-103">Residenza</span><span class="sxs-lookup"><span data-stu-id="c6792-103">Residency</span></span>

<span data-ttu-id="c6792-104">Un oggetto viene considerato *residente* quando è accessibile dalla GPU.</span><span class="sxs-lookup"><span data-stu-id="c6792-104">An object is considered to be *resident* when it is accessible by the GPU.</span></span>

-   [<span data-ttu-id="c6792-105">Budget residenza</span><span class="sxs-lookup"><span data-stu-id="c6792-105">Residency budget</span></span>](#residency-budget)
-   [<span data-ttu-id="c6792-106">Risorse heap</span><span class="sxs-lookup"><span data-stu-id="c6792-106">Heap resources</span></span>](#heap-resources)
-   [<span data-ttu-id="c6792-107">Priorità di residenza</span><span class="sxs-lookup"><span data-stu-id="c6792-107">Residency priorities</span></span>](#residency-priorities)
    -   [<span data-ttu-id="c6792-108">Algoritmo di priorità predefinito</span><span class="sxs-lookup"><span data-stu-id="c6792-108">Default priority algorithm</span></span>](#default-priority-algorithm)
-   [<span data-ttu-id="c6792-109">Programmazione della gestione delle residenze</span><span class="sxs-lookup"><span data-stu-id="c6792-109">Programming residency management</span></span>](#programming-residency-management)
-   [<span data-ttu-id="c6792-110">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="c6792-110">Related topics</span></span>](#related-topics)

## <a name="residency-budget"></a><span data-ttu-id="c6792-111">Budget residenza</span><span class="sxs-lookup"><span data-stu-id="c6792-111">Residency budget</span></span>

<span data-ttu-id="c6792-112">Le GPU non supportano ancora l'errore di pagina, quindi le applicazioni devono eseguire il commit dei dati nella memoria fisica mentre la GPU può accedervi.</span><span class="sxs-lookup"><span data-stu-id="c6792-112">GPUs do not yet support page-faulting, so applications must commit data into physical memory while the GPU could access it.</span></span> <span data-ttu-id="c6792-113">Questo processo è noto come "creazione di un elemento residente" e deve essere eseguito sia per la memoria di sistema fisica che per la memoria del video discreta fisica.</span><span class="sxs-lookup"><span data-stu-id="c6792-113">This process is known as “making something resident”, and must be done for both physical system memory and physical discrete video memory.</span></span> <span data-ttu-id="c6792-114">In D3D12 la maggior parte degli oggetti API incapsula una certa quantità di memoria accessibile dalla GPU.</span><span class="sxs-lookup"><span data-stu-id="c6792-114">In D3D12, most API objects encapsulate some amount of GPU-accessible memory.</span></span> <span data-ttu-id="c6792-115">Tale memoria accessibile dalla GPU viene resa residente durante la creazione dell'oggetto API ed eliminata durante la distruzione dell'oggetto API.</span><span class="sxs-lookup"><span data-stu-id="c6792-115">That GPU-accessible memory is made resident during the creation of the API object, and evicted on API object destruction.</span></span>

<span data-ttu-id="c6792-116">La quantità di memoria fisica disponibile per il processo è nota come budget di memoria video.</span><span class="sxs-lookup"><span data-stu-id="c6792-116">The amount of physical memory available for the process is known as the video memory budget.</span></span> <span data-ttu-id="c6792-117">Il budget può variare in modo evidente dal momento che i processi in background riattivano e dormono; e variano notevolmente quando l'utente passa a un'altra applicazione.</span><span class="sxs-lookup"><span data-stu-id="c6792-117">The budget can fluctuate noticeably as background processes wake-up and sleep; and fluctuate dramatically when the user switches away to another application.</span></span> <span data-ttu-id="c6792-118">L'applicazione può ricevere una notifica quando il budget viene modificato e viene eseguito il polling del budget corrente e della quantità di memoria attualmente utilizzata.</span><span class="sxs-lookup"><span data-stu-id="c6792-118">The application can be notified when the budget changes and poll both the current budget and the currently consumed amount of memory.</span></span> <span data-ttu-id="c6792-119">Se un'applicazione non rimane entro il suo budget, il processo verrà bloccato in modo intermittente per consentire l'esecuzione di altre applicazioni e/o le API di creazione restituiranno un errore.</span><span class="sxs-lookup"><span data-stu-id="c6792-119">If an application doesn’t stay within its budget, the process will be intermittently frozen to allow other applications to run and/or the creation APIs will return failure.</span></span> <span data-ttu-id="c6792-120">L'interfaccia [**IDXGIAdapter3**](/windows/desktop/api/dxgi1_4/nn-dxgi1_4-idxgiadapter3) fornisce i metodi relativi a questa funzionalità, in particolare [**QueryVideoMemoryInfo**](/windows/desktop/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-queryvideomemoryinfo) e [**RegisterVideoMemoryBudgetChangeNotificationEvent**](/windows/desktop/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-registervideomemorybudgetchangenotificationevent).</span><span class="sxs-lookup"><span data-stu-id="c6792-120">The [**IDXGIAdapter3**](/windows/desktop/api/dxgi1_4/nn-dxgi1_4-idxgiadapter3) interface provides the methods pertaining to this functionality, in particular [**QueryVideoMemoryInfo**](/windows/desktop/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-queryvideomemoryinfo) and [**RegisterVideoMemoryBudgetChangeNotificationEvent**](/windows/desktop/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-registervideomemorybudgetchangenotificationevent).</span></span>

<span data-ttu-id="c6792-121">Le applicazioni sono incoraggiate a usare una prenotazione per indicare la quantità di memoria di cui non è possibile accedere.</span><span class="sxs-lookup"><span data-stu-id="c6792-121">Applications are encouraged to use a reservation to denote the amount of memory they cannot go without.</span></span> <span data-ttu-id="c6792-122">Idealmente, le impostazioni grafiche "low" specificate dall'utente o qualcosa di più basso è il valore corretto per tale prenotazione.</span><span class="sxs-lookup"><span data-stu-id="c6792-122">Ideally, the user-specified “low” graphics settings, or something even lower, is the right value for such a reservation.</span></span> <span data-ttu-id="c6792-123">L'impostazione di una prenotazione non consentirà a un'applicazione di ottenere un budget superiore rispetto a quello normalmente ricevuto.</span><span class="sxs-lookup"><span data-stu-id="c6792-123">Setting a reservation won’t ever give an application a higher budget than it would normally receive.</span></span> <span data-ttu-id="c6792-124">Al contrario, le informazioni sulla prenotazione consentono al kernel del sistema operativo di ridurre rapidamente l'effetto delle situazioni di utilizzo elevato della memoria.</span><span class="sxs-lookup"><span data-stu-id="c6792-124">Instead, the reservation information helps the OS kernel quickly minimize the impact of large memory pressure situations.</span></span> <span data-ttu-id="c6792-125">Anche se l'applicazione non è un'applicazione in primo piano, non è garantita la disponibilità della prenotazione.</span><span class="sxs-lookup"><span data-stu-id="c6792-125">Even the reservation is not guaranteed to be available to the application when the application isn’t the foreground application.</span></span>

## <a name="heap-resources"></a><span data-ttu-id="c6792-126">Risorse heap</span><span class="sxs-lookup"><span data-stu-id="c6792-126">Heap resources</span></span>

<span data-ttu-id="c6792-127">Sebbene molti oggetti API incapsulano alcune risorse di memoria accessibili per la GPU, è previsto che gli heap & risorse siano il modo più significativo per utilizzare e gestire la memoria fisica da parte delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="c6792-127">While many API objects encapsulate some GPU-accessible memory, heaps & resources are expected to be the most significant way applications consume and manage physical memory.</span></span> <span data-ttu-id="c6792-128">Un heap è l'unità di livello più basso per la gestione della memoria fisica, quindi è opportuno avere familiarità con le proprietà di residenza.</span><span class="sxs-lookup"><span data-stu-id="c6792-128">A heap is the lowest level unit to manage physical memory, so it’s good to have some familiarity with their residency properties.</span></span>

-   <span data-ttu-id="c6792-129">Gli heap non possono essere resi parzialmente residenti, ma esistono soluzioni alternative con risorse riservate.</span><span class="sxs-lookup"><span data-stu-id="c6792-129">Heaps cannot be made partially resident, but workarounds exists with reserved resources.</span></span>
-   <span data-ttu-id="c6792-130">Gli heap devono essere inclusi in un budget come parte di un pool specifico.</span><span class="sxs-lookup"><span data-stu-id="c6792-130">Heaps should be budgeted as part of a particular pool.</span></span> <span data-ttu-id="c6792-131">Gli adapter UMA hanno un pool, mentre gli adattatori discreti hanno due pool.</span><span class="sxs-lookup"><span data-stu-id="c6792-131">UMA adapters have one pool, while discrete adapters have two pools.</span></span> <span data-ttu-id="c6792-132">Sebbene sia vero, il kernel può spostare alcuni heap sugli adattatori discreti dalla memoria video alla memoria di sistema, ma solo come ultima risorsa.</span><span class="sxs-lookup"><span data-stu-id="c6792-132">While it is true that kernel can shift some heaps on discrete adapters from video memory to system memory, it does so only as an extreme last resort.</span></span> <span data-ttu-id="c6792-133">Le applicazioni non devono basarsi sul comportamento di budget eccessivo del kernel e dovrebbero concentrarsi sulla gestione del budget.</span><span class="sxs-lookup"><span data-stu-id="c6792-133">Applications should not rely on the over-budget behavior of the kernel, and should focus on good budget management instead.</span></span>
-   <span data-ttu-id="c6792-134">Gli heap possono essere rimossi dalla residenza, che consente il paging del contenuto sul disco.</span><span class="sxs-lookup"><span data-stu-id="c6792-134">Heaps can be evicted from residency, which allows their content to be paged out to disk.</span></span> <span data-ttu-id="c6792-135">Tuttavia, la distruzione degli heap è una tecnica più affidabile per liberare la residenza in tutte le architetture degli adapter.</span><span class="sxs-lookup"><span data-stu-id="c6792-135">But, destruction of heaps is a more reliable technique to free up residency across all adapter architectures.</span></span> <span data-ttu-id="c6792-136">Nelle schede in cui il campo *theMaxGPUVirtualAddressBitsPerProcess* del supporto per gli [**\_ \_ \_ \_ \_ indirizzi \_ virtuali della GPU dei dati della funzionalità D3D12**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_gpu_virtual_address_support) è vicino alle dimensioni del budget, [**Rimuovi**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-evict) non recupererà in modo affidabile la residenza.</span><span class="sxs-lookup"><span data-stu-id="c6792-136">On adapters where *theMaxGPUVirtualAddressBitsPerProcess* field of [**D3D12\_FEATURE\_DATA\_GPU\_VIRTUAL\_ADDRESS\_SUPPORT**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_gpu_virtual_address_support) is near the budget size, [**Evict**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-evict) won’t reliably reclaim residency.</span></span>
-   <span data-ttu-id="c6792-137">La creazione dell'heap può essere lenta; ma è ottimizzato per l'elaborazione dei thread in background.</span><span class="sxs-lookup"><span data-stu-id="c6792-137">Heap creation can be slow; but it is optimized for background thread processing.</span></span> <span data-ttu-id="c6792-138">È consigliabile creare heap sui thread in background per evitare la glitching del thread di rendering.</span><span class="sxs-lookup"><span data-stu-id="c6792-138">It’s recommended to create heaps on background threads to avoid glitching the render thread.</span></span> <span data-ttu-id="c6792-139">In D3D12, più thread possono chiamare in modo sicuro le routine create simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="c6792-139">In D3D12, multiple threads may safely call create routines concurrently.</span></span>

<span data-ttu-id="c6792-140">D3D12 introduce una maggiore flessibilità e ortogonalità nel modello di risorse, in modo da consentire più opzioni per le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="c6792-140">D3D12 introduces more flexibility and orthogonality into its resource model in order to enable more options for applications.</span></span> <span data-ttu-id="c6792-141">Sono disponibili tre tipi di risorse di alto livello in D3D12: commit, inserito e riservato.</span><span class="sxs-lookup"><span data-stu-id="c6792-141">There are three high-level types of resources in D3D12: committed, placed, and reserved.</span></span>

-   <span data-ttu-id="c6792-142">Le risorse di cui è stato eseguito il commit creano una risorsa e un heap nello stesso momento.</span><span class="sxs-lookup"><span data-stu-id="c6792-142">Committed resources create both a resource and a heap at the same time.</span></span> <span data-ttu-id="c6792-143">L'heap è implicito e non è possibile accedervi direttamente.</span><span class="sxs-lookup"><span data-stu-id="c6792-143">The heap is implicit and cannot be accessed directly.</span></span> <span data-ttu-id="c6792-144">L'heap è dimensionato in modo appropriato per individuare l'intera risorsa all'interno dell'heap.</span><span class="sxs-lookup"><span data-stu-id="c6792-144">The heap is appropriately sized to locate the entire resource within the heap.</span></span>
-   <span data-ttu-id="c6792-145">Le risorse posizionate consentono il posizionamento di una risorsa con un offset diverso da zero all'interno di un heap.</span><span class="sxs-lookup"><span data-stu-id="c6792-145">Placed resources allow the placement of a resource at a non-zero offset within a heap.</span></span> <span data-ttu-id="c6792-146">Gli offset devono in genere essere allineati a 64KB; Tuttavia, alcune eccezioni sono presenti in entrambe le direzioni.</span><span class="sxs-lookup"><span data-stu-id="c6792-146">Offsets must typically be aligned to 64KB; but some exceptions exist in both directions.</span></span> <span data-ttu-id="c6792-147">Le risorse MSAA richiedono l'allineamento di offset 4 MB e l'allineamento dell'offset 4KB è disponibile per le trame di piccole dimensioni.</span><span class="sxs-lookup"><span data-stu-id="c6792-147">MSAA resources require 4MB offset alignment, and 4KB offset alignment is available for small textures.</span></span> <span data-ttu-id="c6792-148">Le risorse posizionate non possono essere rilocate o rimappate direttamente a un altro heap; ma consentono una rilocazione semplice dei dati delle risorse tra gli heap.</span><span class="sxs-lookup"><span data-stu-id="c6792-148">Placed resources cannot be relocated or remapped to another heap directly; but they enable simple relocation of the resource data between heaps.</span></span> <span data-ttu-id="c6792-149">Dopo la creazione di una nuova risorsa posizionata in un heap diverso e la copia dei dati della risorsa, sarà necessario usare nuovi descrittori di risorse per la nuova posizione dei dati della risorsa.</span><span class="sxs-lookup"><span data-stu-id="c6792-149">After creating a new placed resource in a different heap and copying the resource data, new resource descriptors will have to be used for the new resource data location.</span></span>
-   <span data-ttu-id="c6792-150">Le risorse riservate sono disponibili solo se l'adapter supporta il livello 1 o superiore delle risorse affiancate.</span><span class="sxs-lookup"><span data-stu-id="c6792-150">Reserved resources are only available when the adapter supports tiled resources tier 1 or greater.</span></span> <span data-ttu-id="c6792-151">Quando disponibili, offrono le tecniche di gestione della residenza più avanzate disponibili; ma non tutti gli adapter li supportano attualmente.</span><span class="sxs-lookup"><span data-stu-id="c6792-151">When available, they offer the most advanced residency management techniques available; but not all adapters currently support them.</span></span> <span data-ttu-id="c6792-152">Consentono di ricreare il mapping di una risorsa senza richiedere la rigenerazione di descrittori di risorse, residenza del livello MIP parziale e scenari di trama sparse e così via. Non tutti i tipi di risorse sono supportati anche quando sono disponibili risorse riservate, quindi non è ancora possibile un gestore di residenza completo basato su pagine.</span><span class="sxs-lookup"><span data-stu-id="c6792-152">They enable remapping a resource without requiring regeneration of resource descriptors, partial mip level residency, and sparse texture scenarios, etc. Not all resources types are supported even when reserved resources are available, so a fully general page-based residency manager isn’t yet feasible.</span></span>

## <a name="residency-priorities"></a><span data-ttu-id="c6792-153">Priorità di residenza</span><span class="sxs-lookup"><span data-stu-id="c6792-153">Residency priorities</span></span>

<span data-ttu-id="c6792-154">Windows 10 Creators Update consente agli sviluppatori di influenzare gli heap e le risorse che preferiscono rimanere residenti quando la pressione della memoria richiede l'abbassamento di grado di alcune risorse.</span><span class="sxs-lookup"><span data-stu-id="c6792-154">The Windows 10 Creators Update enables developers to influence which heaps and resources will be prefered to stay resident when memory pressure requires that some of its resources be demoted.</span></span> <span data-ttu-id="c6792-155">Questo consente agli sviluppatori di creare applicazioni con prestazioni migliori sfruttando la conoscenza che il runtime non può dedurre dall'utilizzo dell'API.</span><span class="sxs-lookup"><span data-stu-id="c6792-155">This helps developers create better performing applications by leveraging knowlege that the runtime can't infer from API usage.</span></span> <span data-ttu-id="c6792-156">Si prevede che gli sviluppatori diventeranno più comodi e possano specificare le priorità durante la transizione dall'uso di risorse sottoposti a commit a riservato e alle risorse affiancate.</span><span class="sxs-lookup"><span data-stu-id="c6792-156">Its expected that developers will become more comfortable and capable specifying priorities as they transition from using commited resources to resereved and tiled resources.</span></span>

<span data-ttu-id="c6792-157">L'applicazione di queste priorità deve essere più semplice rispetto alla gestione di due budget di memoria dinamici, abbassamento manualmente e innalzamento di grado delle risorse bettween, dal momento che le applicazioni possono già farlo.</span><span class="sxs-lookup"><span data-stu-id="c6792-157">Applying these priorities must be easier than manageing two dynamic memory budgets, manually demoting and promoting resources bettween them, since applications can already do that.</span></span> <span data-ttu-id="c6792-158">Per questo motivo, la progettazione dell'API della priorità di residenza è naturalmente con granularità ragionevole assegnata a ogni heap o risorsa come creata.</span><span class="sxs-lookup"><span data-stu-id="c6792-158">Therefore, the design of the residency priority API is coursely-grained with reasonable default priorities assigned to each heap or resource as its created.</span></span> <span data-ttu-id="c6792-159">Per ulteriori informazioni, vedere [**ID3D12Device1:: SetResidencyPriority**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device1-setresidencypriority) e l'enumerazione di [**\_ \_ priorità di residenza D3D12**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_residency_priority) .</span><span class="sxs-lookup"><span data-stu-id="c6792-159">For more information, see [**ID3D12Device1::SetResidencyPriority**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device1-setresidencypriority) and the [**D3D12\_RESIDENCY\_PRIORITY**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_residency_priority) enumeration.</span></span>

<span data-ttu-id="c6792-160">Con le priorità, gli sviluppatori dovrebbero:</span><span class="sxs-lookup"><span data-stu-id="c6792-160">With priorities, developers are expected to either:</span></span>

-   <span data-ttu-id="c6792-161">Aumentare la priorità di alcuni heap eccezionali per attenuare al meglio l'effetto sulle prestazioni di questi heap abbassati prima o con maggiore frequenza rispetto ai modelli di accesso naturale richiesti.</span><span class="sxs-lookup"><span data-stu-id="c6792-161">Raise the priority of a few exceptional heaps to better mitigate the experienced performance impact of these heaps being demoted sooner or more frequently than their natural access patterns would demand.</span></span> <span data-ttu-id="c6792-162">Questo approccio dovrebbe essere usato dalle applicazioni portate da API grafiche, ad esempio Direct3D 11 o OpenGL, il modello di gestione delle risorse è significativamente diverso rispetto a quello di Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="c6792-162">This approach is expected to be leveraged by applications ported from graphics APIs such as Direct3D 11 or OpenGL, who's resource management model is significantly different than that of Direct3D 12.</span></span>
-   <span data-ttu-id="c6792-163">Eseguire l'override di quasi tutte le priorità dell'heap con lo schema di bucket personalizzato dell'applicazione, sia fisso, in base alla conoscenza della frequenza di accesso del programmatore, sia dinamica; uno schema fisso è più semplice da gestire rispetto a uno dinamico, ma può essere meno efficace e richiedere al programmatore intervento di modificare i modelli di utilizzo nel corso dello sviluppo.</span><span class="sxs-lookup"><span data-stu-id="c6792-163">Override nearly all heap priorities with the application's own bucketization scheme, either fixed, based on the programmer's knowlege of access frequency, or dynamic; a fixed scheme is simpler to manage than a dynamic one, but can be less effective and require programmer intevention as use patterns change over the course of development.</span></span> <span data-ttu-id="c6792-164">Questo approccio dovrebbe essere usato dalle applicazioni compilate con la gestione delle risorse di tipo Direct3D 12, ad esempio quelle che usano la libreria di residenza (in particolare gli schemi dinamici).</span><span class="sxs-lookup"><span data-stu-id="c6792-164">This approach is expected to be leveraged by applications that are built with Direct3D 12-style resource management in mind, such as those that use the residency library (especially dynamic schemes).</span></span>

### <a name="default-priority-algorithm"></a><span data-ttu-id="c6792-165">Algoritmo di priorità predefinito</span><span class="sxs-lookup"><span data-stu-id="c6792-165">Default priority algorithm</span></span>

<span data-ttu-id="c6792-166">Un'applicazione non può specificare le priorità utili per tutti gli heap che tenta di gestire senza prima sottostanare l'algoritmo di priorità predefinito.</span><span class="sxs-lookup"><span data-stu-id="c6792-166">An application can't specify useful priorities for any heap it attempts to manage without first understaning the default priority algorithm.</span></span> <span data-ttu-id="c6792-167">Ciò è dovuto al fatto che il valore di assegnazione di una particolare priorità a un heap deriva dalla relativa priorità ad altri heap con priorità che competono per la stessa memoria.</span><span class="sxs-lookup"><span data-stu-id="c6792-167">This is because the value of assigning a particular priority to a heap is derived from its relative priority to other prioritized heaps that compete for the same memory.</span></span>

<span data-ttu-id="c6792-168">La strategia scelta per la generazione delle priorità predefinite consiste nel categorizzare gli heap in due bucket, privilegiando gli heap (assegnando una priorità più elevata) che si presume vengano scritti frequentemente dalla GPU sugli heap che non lo sono.</span><span class="sxs-lookup"><span data-stu-id="c6792-168">The strategy chosen for generating default priorities is to categorize heaps into two buckets, favoring (giving higher priority to) heaps that are assumed to be written frequently by the GPU over heaps that aren't.</span></span>

<span data-ttu-id="c6792-169">Il bucket ad alta priorità contiene heap e risorse creati con flag che li identificano come destinazioni di rendering, buffer di stencil Depth o viste di accesso non ordinate (UAV).</span><span class="sxs-lookup"><span data-stu-id="c6792-169">The high-priority bucket contains heaps and resources that are created with flags that identify them as render targets, depth-stencil buffers, or Unordered Access Views (UAVs).</span></span> <span data-ttu-id="c6792-170">A questi vengono assegnati valori di priorità nell'intervallo a partire da **D3D12 \_ Residency \_ Priority \_ High**. per definire ulteriormente le priorità tra questi heap e risorse, i 16 bit più bassi della priorità vengono impostati sulla dimensione dell'heap o della risorsa divisa da 10 MB (saturazione a 0xFFFF per heap estremamente grandi).</span><span class="sxs-lookup"><span data-stu-id="c6792-170">These are assigned priority values in the range starting at **D3D12\_RESIDENCY\_PRIORITY\_HIGH**; to further prioritize among these heaps and resources, the lowest 16-bits of the priority are set to the size of the heap or resource divided by 10MB (saturating to 0xFFFF for extremely large heaps).</span></span> <span data-ttu-id="c6792-171">Questa impostazione di priorità aggiuntiva favorisce heap e risorse più grandi.</span><span class="sxs-lookup"><span data-stu-id="c6792-171">This additional prioritization favors larger heaps and resources.</span></span>

<span data-ttu-id="c6792-172">Il bucket con priorità bassa contiene tutti gli altri heap e risorse a cui viene assegnato un valore di priorità di **D3D12 \_ Residency \_ Priority \_ Normal**.</span><span class="sxs-lookup"><span data-stu-id="c6792-172">The low-priority bucket contains all other heaps and resources, which are assigned a priority value of **D3D12\_RESIDENCY\_PRIORITY\_NORMAL**.</span></span> <span data-ttu-id="c6792-173">Non è stata tentata alcuna ulteriore assegnazione di priorità tra questi heap e risorse.</span><span class="sxs-lookup"><span data-stu-id="c6792-173">No further prioritization among these heaps and resources is attempted.</span></span>

## <a name="programming-residency-management"></a><span data-ttu-id="c6792-174">Programmazione della gestione delle residenze</span><span class="sxs-lookup"><span data-stu-id="c6792-174">Programming residency management</span></span>

<span data-ttu-id="c6792-175">Le applicazioni semplici potrebbero essere in grado di ottenere semplicemente creando risorse di cui è stato eseguito il commit finché non si verificano errori di memoria insufficiente.</span><span class="sxs-lookup"><span data-stu-id="c6792-175">Simple applications may be able to get by merely creating committed resources until experiencing out-of-memory failures.</span></span> <span data-ttu-id="c6792-176">In caso di errore, l'applicazione può eliminare altre risorse o oggetti API di cui è stato eseguito il commit per consentire la riuscita di altre creazioni di risorse.</span><span class="sxs-lookup"><span data-stu-id="c6792-176">Upon failure, the application can destroy other committed resources or API objects to enable further resource creations to succeed.</span></span> <span data-ttu-id="c6792-177">Tuttavia, anche le applicazioni semplici sono fortemente consigliate per tenere sotto controllo le modifiche di budget negative ed eliminare gli oggetti API inutilizzati approssimativamente una volta al frame.</span><span class="sxs-lookup"><span data-stu-id="c6792-177">But, even simple applications are strongly recommended to watch for negative budget changes and destroy unused API objects roughly once a frame.</span></span>

<span data-ttu-id="c6792-178">La complessità di un progetto di gestione della residenza si verifica quando si tenta di ottimizzare le architetture degli adattatori o di incorporare le priorità di residenza.</span><span class="sxs-lookup"><span data-stu-id="c6792-178">The complexity of a residency management design will go up when trying to optimize for adapter architectures or incorporating residency priorities.</span></span> <span data-ttu-id="c6792-179">Il budget e la gestione discreta di due pool di memoria discreta saranno più complessi rispetto alla gestione di un solo e l'assegnazione di priorità fisse su larga scala può diventare un carico di manutenzione se i modelli di utilizzo cambiano.</span><span class="sxs-lookup"><span data-stu-id="c6792-179">Discretely budgeting and managing two pools of discrete memory will be more complex than managing only one, and assigning fixed priorities on a wide scale can become a maintainance burden if use patterns evolve.</span></span> <span data-ttu-id="c6792-180">L'overflow delle trame nella memoria di sistema aggiunge una maggiore complessità, perché la risorsa sbagliata nella memoria del sistema può influire gravemente sulla frequenza dei fotogrammi.</span><span class="sxs-lookup"><span data-stu-id="c6792-180">Overflowing textures into system memory adds more complexity, as the wrong resource in system-memory can severely impact frame rate.</span></span> <span data-ttu-id="c6792-181">Non sono disponibili funzionalità semplici che consentono di identificare le risorse che trarrebbero vantaggio da una maggiore larghezza di banda GPU o tollerano una larghezza di banda GPU inferiore.</span><span class="sxs-lookup"><span data-stu-id="c6792-181">And, there is no simple functionality to help identify the resources that would either benefit from higher GPU bandwidth or tolerate lower GPU bandwidth.</span></span>

<span data-ttu-id="c6792-182">Le progettazioni ancora più complesse eseguiranno una query per le funzionalità dell'adapter corrente.</span><span class="sxs-lookup"><span data-stu-id="c6792-182">Even more complicated designs will query for the features of the current adapter.</span></span> <span data-ttu-id="c6792-183">Queste informazioni sono disponibili nel [**supporto per gli \_ \_ \_ \_ \_ indirizzi \_ virtuali della GPU dati delle funzionalità di D3D12**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_gpu_virtual_address_support), nell' [**\_ \_ \_ architettura dei dati della funzionalità D3D12**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_architecture), nel [**\_ \_ \_ livello di risorse affiancato D3D12**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_tiled_resources_tier)e nel [**\_ \_ \_ livello heap risorse D3D12**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_resource_heap_tier).</span><span class="sxs-lookup"><span data-stu-id="c6792-183">This information is available in [**D3D12\_FEATURE\_DATA\_GPU\_VIRTUAL\_ADDRESS\_SUPPORT**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_gpu_virtual_address_support), [**D3D12\_FEATURE\_DATA\_ARCHITECTURE**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_architecture), [**D3D12\_TILED\_RESOURCES\_TIER**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_tiled_resources_tier), and [**D3D12\_RESOURCE\_HEAP\_TIER**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_resource_heap_tier).</span></span>

<span data-ttu-id="c6792-184">È probabile che più parti di un'applicazione si ritrovino utilizzando tecniche diverse.</span><span class="sxs-lookup"><span data-stu-id="c6792-184">Multiple parts of an application will likely wind up using different techniques.</span></span> <span data-ttu-id="c6792-185">Ad esempio, alcune trame di grandi dimensioni e percorsi di codice utilizzati raramente possono utilizzare risorse di cui è stato eseguito il commit, mentre molte trame possono essere designate con una proprietà di flusso e utilizzare una tecnica di risorse poste generali.</span><span class="sxs-lookup"><span data-stu-id="c6792-185">For example, some large textures and rarely exercised code paths may use committed resources, while many textures may be designated with a streaming property and use a general placed-resource technique.</span></span>

## <a name="related-topics"></a><span data-ttu-id="c6792-186">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="c6792-186">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c6792-187">**ID3D12Heap**</span><span class="sxs-lookup"><span data-stu-id="c6792-187">**ID3D12Heap**</span></span>](/windows/desktop/api/d3d12/nn-d3d12-id3d12heap)
</dt> <dt>

[<span data-ttu-id="c6792-188">Gestione della memoria</span><span class="sxs-lookup"><span data-stu-id="c6792-188">Memory Management</span></span>](memory-management.md)
</dt> </dl>

 

 