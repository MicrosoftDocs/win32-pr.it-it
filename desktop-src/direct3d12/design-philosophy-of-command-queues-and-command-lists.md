---
title: Filosofia di progettazione delle code dei comandi e degli elenchi di comandi
description: Gli obiettivi dell'abilitazione del riutilizzo del rendering del lavoro e del ridimensionamento multithreading richiedono modifiche fondamentali al modo in cui le app Direct3D inviano il lavoro di rendering alla GPU.
ms.assetid: C85C8C41-2306-4568-8FAE-F57EDA624298
keywords:
- Elenco comandi
- bundle
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 812275a630464dbe9137d587a672803f4d0c72f9
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "74103993"
---
# <a name="design-philosophy-of-command-queues-and-command-lists"></a><span data-ttu-id="a1c2c-105">Filosofia di progettazione delle code dei comandi e degli elenchi di comandi</span><span class="sxs-lookup"><span data-stu-id="a1c2c-105">Design Philosophy of Command Queues and Command Lists</span></span>

<span data-ttu-id="a1c2c-106">Gli obiettivi dell'abilitazione del riutilizzo del rendering del lavoro e del ridimensionamento multithreading richiedono modifiche fondamentali al modo in cui le app Direct3D inviano il lavoro di rendering alla GPU.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-106">The goals of enabling reuse of rendering work and of multi-threaded scaling, required fundamental changes to how Direct3D apps submit rendering work to the GPU.</span></span> <span data-ttu-id="a1c2c-107">In Direct3D 12, il processo di invio del lavoro di rendering è diverso rispetto alle versioni precedenti in tre modi importanti:</span><span class="sxs-lookup"><span data-stu-id="a1c2c-107">In Direct3D 12, the process of submitting rendering work differs from earlier versions in three important ways:</span></span>

<dl> 1. <span data-ttu-id="a1c2c-108">Eliminazione del contesto immediato.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-108">Elimination of the immediate context.</span></span> <span data-ttu-id="a1c2c-109">Questo consente il multithreading.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-109">This enables multi-threading.</span></span>  
2. <span data-ttu-id="a1c2c-110">Le app ora possiedono il modo in cui le chiamate di rendering vengono raggruppate in elementi di lavoro GPU (Graphics Processing Unit).</span><span class="sxs-lookup"><span data-stu-id="a1c2c-110">Apps now own how rendering calls are grouped into graphics processing unit (GPU) work items.</span></span> <span data-ttu-id="a1c2c-111">Questo consente di riutilizzare.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-111">This enables re-use.</span></span>  
3. <span data-ttu-id="a1c2c-112">Le app ora controllano in modo esplicito quando il lavoro viene inviato alla GPU.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-112">Apps now explicitly control when work is submitted to the GPU .</span></span> <span data-ttu-id="a1c2c-113">In questo modo vengono abilitati gli elementi 1 e 2.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-113">This enables items 1 and 2.</span></span>  
</dl>

-   [<span data-ttu-id="a1c2c-114">Rimozione del contesto immediato</span><span class="sxs-lookup"><span data-stu-id="a1c2c-114">Removal of the immediate context</span></span>](#removal-of-the-immediate-context)
-   [<span data-ttu-id="a1c2c-115">Raggruppamento di elementi di lavoro GPU</span><span class="sxs-lookup"><span data-stu-id="a1c2c-115">Grouping of GPU work items</span></span>](#grouping-of-gpu-work-items)
-   [<span data-ttu-id="a1c2c-116">Invio di lavoro GPU</span><span class="sxs-lookup"><span data-stu-id="a1c2c-116">GPU work submission</span></span>](#gpu-work-submission)
-   [<span data-ttu-id="a1c2c-117">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="a1c2c-117">Related topics</span></span>](#related-topics)

## <a name="removal-of-the-immediate-context"></a><span data-ttu-id="a1c2c-118">Rimozione del contesto immediato</span><span class="sxs-lookup"><span data-stu-id="a1c2c-118">Removal of the immediate context</span></span>

<span data-ttu-id="a1c2c-119">Il passaggio più grande da Microsoft Direct3D 11 a Microsoft Direct3D 12 è che non è più disponibile un unico contesto immediato associato a un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-119">The largest change from Microsoft Direct3D 11 to Microsoft Direct3D 12 is that there is no longer a single, immediate context associated with a device.</span></span> <span data-ttu-id="a1c2c-120">Al contrario, per eseguire il rendering, le app creano elenchi di comandi in cui è possibile chiamare le API di rendering tradizionali.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-120">Instead, to render, apps create command lists in which traditional rendering APIs can be called.</span></span> <span data-ttu-id="a1c2c-121">Un elenco di comandi è simile al metodo di rendering di un'app Direct3D 11 che ha usato il contesto immediato in quanto contiene chiamate che prevedono la generazione di primitive o la modifica dello stato di rendering.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-121">A command list looks similar to the render method of a Direct3D 11 app that used the immediate context in that it contains calls that draw primitives or change the rendering state.</span></span> <span data-ttu-id="a1c2c-122">Analogamente ai contesti immediati, ogni elenco di comandi non è a thread libero. Tuttavia, è possibile registrare contemporaneamente più elenchi di comandi, che sfruttano i vantaggi dei processori multicore moderni.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-122">Like immediate contexts, each command list is not free-threaded; however, multiple command lists can be recorded concurrently, which takes advantage of modern, multi-core processors.</span></span>

<span data-ttu-id="a1c2c-123">Gli elenchi di comandi vengono in genere eseguiti una volta.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-123">Command lists are typically executed once.</span></span> <span data-ttu-id="a1c2c-124">Tuttavia, un elenco di comandi può essere eseguito più volte se l'applicazione garantisce il completamento delle esecuzioni precedenti prima di inviare nuove esecuzioni.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-124">However, a command list can be executed multiple times if the application ensures that the previous executions are complete before submitting new executions.</span></span> <span data-ttu-id="a1c2c-125">Per ulteriori informazioni sulla sincronizzazione degli elenchi di comandi, vedere [esecuzione e sincronizzazione degli elenchi di comandi](executing-and-synchronizing-command-lists.md).</span><span class="sxs-lookup"><span data-stu-id="a1c2c-125">For more information about command list synchronization, see [Executing and synchronizing command lists](executing-and-synchronizing-command-lists.md).</span></span>

## <a name="grouping-of-gpu-work-items"></a><span data-ttu-id="a1c2c-126">Raggruppamento di elementi di lavoro GPU</span><span class="sxs-lookup"><span data-stu-id="a1c2c-126">Grouping of GPU work items</span></span>

<span data-ttu-id="a1c2c-127">Oltre agli elenchi di comandi, Direct3D 12 sfrutta attualmente le funzionalità presenti in tutti i componenti hardware aggiungendo un secondo livello di elenchi di comandi, detti *bundle*.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-127">In addition to command lists, Direct3D 12 takes advantage of functionality present in all hardware today by adding a second level of command lists, which are called *bundles*.</span></span> <span data-ttu-id="a1c2c-128">Per facilitare la distinzione di questi due tipi, gli elenchi di comandi di primo livello possono essere definiti *elenchi di comandi diretti*.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-128">To help to distinguish these two types, the first-level command lists can be referred to as *direct command lists*.</span></span> <span data-ttu-id="a1c2c-129">Lo scopo dei bundle è quello di consentire alle app di raggruppare un numero ridotto di comandi API insieme per una successiva esecuzione ripetuta dall'interno di elenchi di comandi diretti.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-129">The purpose of bundles is to allow apps to group a small number of API commands together for later, repeated execution from within direct command lists.</span></span> <span data-ttu-id="a1c2c-130">Al momento della creazione di un bundle, il driver eseguirà il maggior quantità possibile di pre-elaborazione per rendere efficiente l'esecuzione successiva.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-130">At the time of creating a bundle, the driver will perform as much pre-processing as possible to make later execution efficient.</span></span> <span data-ttu-id="a1c2c-131">I bundle possono quindi essere eseguiti da più elenchi di comandi e più volte nello stesso elenco di comandi.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-131">Bundles can then be executed from within multiple command lists and multiple times within the same command list.</span></span>

<span data-ttu-id="a1c2c-132">Il riutilizzo dei bundle è un grande driver di efficienza migliorata con singoli thread della CPU.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-132">The re-use of bundles is a large driver of improved efficiency with single CPU threads.</span></span> <span data-ttu-id="a1c2c-133">Poiché i bundle sono pre-elaborati e possono essere inviati più volte, esistono alcune restrizioni sulle operazioni che possono essere eseguite all'interno di un bundle.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-133">Because bundles are pre-processed and can be submitted multiple times, there are certain restrictions on what operations can be performed within a bundle.</span></span> <span data-ttu-id="a1c2c-134">Per altre informazioni, vedere [creazione e registrazione di elenchi di comandi e bundle](recording-command-lists-and-bundles.md).</span><span class="sxs-lookup"><span data-stu-id="a1c2c-134">For more information, see [Creating and recording command lists and bundles](recording-command-lists-and-bundles.md).</span></span>

## <a name="gpu-work-submission"></a><span data-ttu-id="a1c2c-135">Invio di lavoro GPU</span><span class="sxs-lookup"><span data-stu-id="a1c2c-135">GPU work submission</span></span>

<span data-ttu-id="a1c2c-136">Per eseguire il lavoro sulla GPU, un'app deve inviare esplicitamente un elenco di comandi a una coda di comandi associata al dispositivo Direct3D.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-136">To execute work on the GPU, an app must explicitly submit a command list to a command queue associated with the Direct3D device.</span></span> <span data-ttu-id="a1c2c-137">Un elenco di comandi diretto può essere inviato più volte per l'esecuzione, ma l'app è responsabile di garantire che l'esecuzione dell'elenco dei comandi diretto sia terminata sulla GPU prima di inviarla nuovamente.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-137">A direct command list can be submitted for execution multiple times, but the app is responsible for ensuring that the direct command list has finished executing on the GPU before submitting it again.</span></span> <span data-ttu-id="a1c2c-138">I bundle non hanno restrizioni per l'uso simultaneo e possono essere eseguiti più volte in più elenchi di comandi, ma non è possibile inviare i bundle direttamente a una coda di comandi per l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-138">Bundles have no concurrent-use restrictions and can be executed multiple times in multiple command lists, but bundles cannot be directly submitted to a command queue for execution.</span></span>

<span data-ttu-id="a1c2c-139">Qualsiasi thread può inviare un elenco di comandi a qualsiasi coda dei comandi in qualsiasi momento e il runtime eseguirà automaticamente la serializzazione dell'elenco dei comandi nella coda dei comandi, conservando l'ordine di invio.</span><span class="sxs-lookup"><span data-stu-id="a1c2c-139">Any thread may submit a command list to any command queue at any time, and the runtime will automatically serialize submission of the command list in the command queue while preserving the submission order.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a1c2c-140">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="a1c2c-140">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a1c2c-141">Invio di lavoro in Direct3D 12</span><span class="sxs-lookup"><span data-stu-id="a1c2c-141">Work Submission in Direct3D 12</span></span>](command-queues-and-command-lists.md)
</dt> </dl>

 

 




