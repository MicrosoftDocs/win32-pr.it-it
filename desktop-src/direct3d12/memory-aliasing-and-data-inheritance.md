---
title: Alias di memoria ed ereditarietà dei dati
description: La risorsa posizionata e riservata potrebbe avere l'alias della memoria fisica in un heap. Le risorse posizionate abilitano più scenari di ereditarietà dei dati rispetto alle risorse riservate quando l'heap dispone del flag condiviso impostato o quando le risorse con alias hanno layout di memoria completamente definiti.
ms.assetid: 53C5804B-0F81-41AF-83D2-A96DCDFDC94A
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cace5b5997e2a460406ae72abb247224886f3926
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "74105090"
---
# <a name="memory-aliasing-and-data-inheritance"></a><span data-ttu-id="55d04-104">Alias di memoria ed ereditarietà dei dati</span><span class="sxs-lookup"><span data-stu-id="55d04-104">Memory Aliasing and Data Inheritance</span></span>

<span data-ttu-id="55d04-105">La risorsa posizionata e riservata potrebbe avere l'alias della memoria fisica in un heap.</span><span class="sxs-lookup"><span data-stu-id="55d04-105">Placed and reserved resource may alias physical memory within a heap.</span></span> <span data-ttu-id="55d04-106">Le risorse posizionate abilitano più scenari di ereditarietà dei dati rispetto alle risorse riservate quando l'heap dispone del flag condiviso impostato o quando le risorse con alias hanno layout di memoria completamente definiti.</span><span class="sxs-lookup"><span data-stu-id="55d04-106">Placed resources enable more data inheritance scenarios than reserved resources when the heap has the shared flag set or when the aliased resources have fully defined memory layouts.</span></span>

-   [<span data-ttu-id="55d04-107">Aliasing</span><span class="sxs-lookup"><span data-stu-id="55d04-107">Aliasing</span></span>](#memory-aliasing-and-data-inheritance)
-   [<span data-ttu-id="55d04-108">Ereditarietà dei dati</span><span class="sxs-lookup"><span data-stu-id="55d04-108">Data Inheritance</span></span>](#data-inheritance)
-   [<span data-ttu-id="55d04-109">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="55d04-109">Related topics</span></span>](#related-topics)

## <a name="aliasing"></a><span data-ttu-id="55d04-110">Aliasing</span><span class="sxs-lookup"><span data-stu-id="55d04-110">Aliasing</span></span>

<span data-ttu-id="55d04-111">È necessario emettere una barriera di alias tra l'utilizzo di due risorse che condividono la stessa memoria fisica, anche se non si desidera l'ereditarietà dei dati.</span><span class="sxs-lookup"><span data-stu-id="55d04-111">An aliasing barrier must be issued between the usage of two resources that share the same physical memory, even if data inheritance is not desired.</span></span> <span data-ttu-id="55d04-112">I modelli di utilizzo semplice devono indicare, almeno, la risorsa di destinazione in cui è presente un'operazione di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="55d04-112">Simple usage models must denote, at least, the destination resource involved in such an operation.</span></span> <span data-ttu-id="55d04-113">Per altri dettagli e modelli di utilizzo avanzati, vedere [**CreatePlacedResource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createplacedresource) .</span><span class="sxs-lookup"><span data-stu-id="55d04-113">See [**CreatePlacedResource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createplacedresource) for more details and advanced usage models.</span></span>

<span data-ttu-id="55d04-114">Dopo l'accesso a una risorsa, tutte le risorse che condividono la memoria fisica con tale risorsa diventano Invalidate, a meno che non sia consentita l'ereditarietà dei dati.</span><span class="sxs-lookup"><span data-stu-id="55d04-114">After a resource is accessed, any resources which share physical memory with that resource become invalidated, unless data inheritance is allowed to occur.</span></span> <span data-ttu-id="55d04-115">Le letture delle risorse Invalidate generano contenuto di risorse non definito.</span><span class="sxs-lookup"><span data-stu-id="55d04-115">Reads of invalidated resources result in undefined resource contents.</span></span> <span data-ttu-id="55d04-116">Anche le Scritture nelle risorse Invalidate generano contenuto di risorse non definito, a meno che non si verifichino due condizioni:</span><span class="sxs-lookup"><span data-stu-id="55d04-116">Writes to invalidated resources also result in undefined resource contents, unless two conditions occur:</span></span>

-   <span data-ttu-id="55d04-117">La risorsa non contiene il \_ flag di risorsa D3D12 \_ Consenti la destinazione di \_ \_ rendering o il flag di \_ \_ risorsa D3D12 \_ \_ Consenti stencil di \_ profondità \_ .</span><span class="sxs-lookup"><span data-stu-id="55d04-117">The resource does not have either the D3D12\_RESOURCE\_FLAG\_ALLOW\_RENDER\_TARGET or D3D12\_RESOURCE\_FLAG\_ALLOW\_DEPTH\_STENCIL.</span></span>
-   <span data-ttu-id="55d04-118">La scrittura è un'operazione di copia o cancellazione in un'intera sottorisorsa o un riquadro.</span><span class="sxs-lookup"><span data-stu-id="55d04-118">The write is a copy or clear operation to an entire subresource or tile.</span></span> <span data-ttu-id="55d04-119">L'inizializzazione dei riquadri è disponibile solo per le risorse con il riquadro 64KB \_ \_ undefined \_ SWIZZLE e 64KB \_ tile \_ standard \_ SWIZZLE.</span><span class="sxs-lookup"><span data-stu-id="55d04-119">Tile-initialization is only available for resources with 64KB\_TILE\_UNDEFINED\_SWIZZLE and 64KB\_TILE\_STANDARD\_SWIZZLE.</span></span>

<span data-ttu-id="55d04-120">Le invalide sovrapposte hanno un ambito limitato a granularità più piccole, quando i layout forniscono informazioni sulla posizione in cui si trovano i dati Texel e quando le risorse sono in determinati stati di barriera di transizione.</span><span class="sxs-lookup"><span data-stu-id="55d04-120">Overlapping invalidations are scoped to smaller granularities, when layouts provide information on the location on the location of texel data and when resources are in certain transition barrier states.</span></span> <span data-ttu-id="55d04-121">Tuttavia, le invalide non possono superare le granularità di allineamento delle risorse.</span><span class="sxs-lookup"><span data-stu-id="55d04-121">But, invalidations cannot go any smaller than resource alignment granularities.</span></span>

<span data-ttu-id="55d04-122">Una granularità dell'allineamento del buffer è 64KB e la granularità dell'allineamento maggiore ha la precedenza.</span><span class="sxs-lookup"><span data-stu-id="55d04-122">A buffer alignment granularity is 64KB, and larger alignment granularity takes precedence.</span></span> <span data-ttu-id="55d04-123">Questo è importante quando si considerano le trame 4KB, in quanto più trame 4KB possono trovarsi in un'area 64KB senza sovrapporsi.</span><span class="sxs-lookup"><span data-stu-id="55d04-123">This is important when considering 4KB textures, as multiple 4KB textures can reside in a 64KB region without overlapping each other.</span></span> <span data-ttu-id="55d04-124">Tuttavia, non è possibile usare in combinazione con una qualsiasi di queste trame 4KB un alias del buffer con la stessa area 64KB.</span><span class="sxs-lookup"><span data-stu-id="55d04-124">But, a buffer aliasing the same 64KB region cannot be used in conjunction with any of those 4KB textures.</span></span> <span data-ttu-id="55d04-125">L'applicazione non è in grado di impedire in modo affidabile l'accesso al buffer dall'intersezione delle trame 4KB, in quanto le GPU sono autorizzate a swizzle i dati della trama 4KB all'interno dell'area 64KB in un modello non definito.</span><span class="sxs-lookup"><span data-stu-id="55d04-125">The application cannot reliably keep the access to the buffer from intersecting the 4KB textures, as GPUs are allowed to swizzle 4KB texture data within the 64KB region in an undefined pattern.</span></span>

<span data-ttu-id="55d04-126">\_il riquadro 64KB \_ undefined \_ SWIZZLE, 64KB \_ tile \_ standard \_ SWIZZLE e \_ i layout di trama principali della riga indicano all'applicazione che le granularità di allineamento sovrapposte sono diventate non valide.</span><span class="sxs-lookup"><span data-stu-id="55d04-126">64KB\_TILE\_UNDEFINED\_SWIZZLE, 64KB\_TILE\_STANDARD\_SWIZZLE, and ROW\_MAJOR texture layouts inform the application which overlapping alignment granularities have become invalid.</span></span> <span data-ttu-id="55d04-127">Ad esempio: un'applicazione può creare una matrice di trama di destinazione di rendering 2D con due sezioni di matrice, un singolo livello MIP e \_ il \_ layout di SWIZZLE indefinito del riquadro 64KB \_ .</span><span class="sxs-lookup"><span data-stu-id="55d04-127">For example: An application can create a 2D render target texture array with 2 array slices, a single mip level, and the 64KB\_TILE\_UNDEFINED\_SWIZZLE layout.</span></span> <span data-ttu-id="55d04-128">Si supponga che l'applicazione riconosca che ogni sezione della matrice occupa 100 riquadri 64KB.</span><span class="sxs-lookup"><span data-stu-id="55d04-128">Assume the application understands each array slice occupies 100 64KB tiles.</span></span> <span data-ttu-id="55d04-129">L'applicazione può non riuscire a usare la sezione della matrice 0 e riusare tale memoria per un buffer di ~ 6 MB, una trama di ~ 6 MB con layout non definito e così via. In futuro, si supponga che l'applicazione non abbia più richiesto il primo riquadro della sezione della matrice 1.</span><span class="sxs-lookup"><span data-stu-id="55d04-129">The application can forgo using array slice 0, and re-use that memory for either a ~6MB buffer, a ~6MB texture with undefined layout, etc. Going further, assume the application no longer required the first tile of array slice 1.</span></span> <span data-ttu-id="55d04-130">Quindi, l'applicazione potrebbe anche individuare un buffer 64KB fino a quando il rendering richiederebbe nuovamente il primo riquadro della sezione della matrice 1.</span><span class="sxs-lookup"><span data-stu-id="55d04-130">Then, the application could also locate a 64KB buffer there until rendering would again require the first tile of array slice 1.</span></span> <span data-ttu-id="55d04-131">Per riutilizzare il primo riquadro con la matrice di trama, l'applicazione deve eseguire una copia o una copia completa del riquadro.</span><span class="sxs-lookup"><span data-stu-id="55d04-131">The application would have to do a full tile clear or copy in order to re-use the first tile with the texture array again.</span></span>

<span data-ttu-id="55d04-132">Tuttavia, anche le trame con layout definiti presentano ancora casi problematici.</span><span class="sxs-lookup"><span data-stu-id="55d04-132">However, even textures with defined layouts still have problematic cases.</span></span> <span data-ttu-id="55d04-133">Le dimensioni delle risorse di trama possono essere notevolmente diverse da quelle che possono essere calcolate dall'applicazione, perché alcune architetture degli adattatori allocano memoria aggiuntiva per le trame per ridurre la larghezza di banda effettiva durante scenari di rendering comuni.</span><span class="sxs-lookup"><span data-stu-id="55d04-133">Texture resource sizes can significantly differ from what the application can calculate itself, because some adapter architectures allocate extra memory for textures to reduce the effective bandwidth during common rendering scenarios.</span></span> <span data-ttu-id="55d04-134">Eventuali invalide nell'area di memoria aggiuntiva determinano l'invalidazione dell'intera risorsa.</span><span class="sxs-lookup"><span data-stu-id="55d04-134">Any invalidations into that extra memory region cause the entire resource to become invalidated.</span></span> <span data-ttu-id="55d04-135">Per ulteriori informazioni, vedere [**GetResourceAllocationInfo**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-getresourceallocationinfo) .</span><span class="sxs-lookup"><span data-stu-id="55d04-135">See [**GetResourceAllocationInfo**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-getresourceallocationinfo) for more details.</span></span>

## <a name="data-inheritance"></a><span data-ttu-id="55d04-136">Ereditarietà dei dati</span><span class="sxs-lookup"><span data-stu-id="55d04-136">Data Inheritance</span></span>

<span data-ttu-id="55d04-137">Le risorse posizionate abilitano la maggior parte dell'ereditarietà dei dati per le trame, anche con layout di memoria non definiti.</span><span class="sxs-lookup"><span data-stu-id="55d04-137">Placed resources enable the most data inheritance for textures, even with undefined memory layouts.</span></span> <span data-ttu-id="55d04-138">Le applicazioni possono simulare le funzionalità di ereditarietà dei dati che consentono di abilitare le risorse condivise individuando due trame con proprietà di risorse identiche allo stesso offset in un heap condiviso.</span><span class="sxs-lookup"><span data-stu-id="55d04-138">Applications can mimic the data inheritance capabilities that shared committed resources enable by locating two textures with identical resource properties at the same offset in a shared heap.</span></span> <span data-ttu-id="55d04-139">L'intera descrizione della risorsa deve essere identica, inclusi il valore Clear ottimizzato e il tipo di metodo di creazione delle risorse (inserito o riservato).</span><span class="sxs-lookup"><span data-stu-id="55d04-139">The entire resource description must be identical, including the optimized clear value and type of resource creation method (placed or reserved).</span></span> <span data-ttu-id="55d04-140">Tuttavia, entrambe le risorse potrebbero avere stati diversi della barriera di transizione iniziale.</span><span class="sxs-lookup"><span data-stu-id="55d04-140">But, both resources may have had different initial transition barrier states.</span></span>

<span data-ttu-id="55d04-141">Le risorse riservate consentono l'ereditarietà dei dati per riquadro. Tuttavia, esistono restrizioni per gli Stati della barriera di transizione delle risorse.</span><span class="sxs-lookup"><span data-stu-id="55d04-141">Reserved resources enable per-tile data inheritance; but restrictions commonly exist for resource transition barrier states.</span></span>

<span data-ttu-id="55d04-142">Per ereditare i dati, entrambe le risorse devono trovarsi in uno stato di barriera di transizione delle risorse compatibile:</span><span class="sxs-lookup"><span data-stu-id="55d04-142">To inherit data, both resources must be in a compatible resource transition barrier state:</span></span>

-   <span data-ttu-id="55d04-143">Per i buffer, le trame con accesso simultaneo e le trame tra adattatori, lo stato di transizione delle risorse non è importante e tutti gli Stati sono "compatibili".</span><span class="sxs-lookup"><span data-stu-id="55d04-143">For buffers, simultaneous access textures, and cross-adapter textures, the resource transition state is not important and all states are “compatible”.</span></span>
-   <span data-ttu-id="55d04-144">Per le trame riservate senza le proprietà precedenti o altre ereditarietà dei dati per riquadro tramite il \_ riquadro 64KB \_ undefined \_ SWIZZLE o 64KB \_ tile \_ standard \_ SWIZZLE, lo stato della barriera di transizione delle risorse, incluso il riquadro, deve essere nello stato comune.</span><span class="sxs-lookup"><span data-stu-id="55d04-144">For reserved textures without the previous properties or other per-tile data inheritance through 64KB\_TILE\_UNDEFINED\_SWIZZLE or 64KB\_TILE\_STANDARD\_SWIZZLE, the resource transition barrier state including the tile must be in the common state.</span></span>
-   <span data-ttu-id="55d04-145">Per tutte le altre trame, in cui le descrizioni delle risorse corrispondono esattamente, lo stato della barriera di transizione delle risorse per ogni coppia corrispondente di sottorisorse deve:</span><span class="sxs-lookup"><span data-stu-id="55d04-145">For all other textures, where the resource descriptions match exactly, the resource transition barrier state for each corresponding pair of subresources must:</span></span>
    -   <span data-ttu-id="55d04-146">Si trova nello stato comune.</span><span class="sxs-lookup"><span data-stu-id="55d04-146">Be in the common state.</span></span>
    -   <span data-ttu-id="55d04-147">Essere uguali quando lo stato ha lo stesso flag di scrittura GPU.</span><span class="sxs-lookup"><span data-stu-id="55d04-147">Be equal when the state has the same GPU-write flag in them.</span></span>

<span data-ttu-id="55d04-148">Quando la GPU supporta swizzle standard, i buffer e le trame swizzle standard possono essere con alias sulla stessa memoria e ereditano i dati tra di essi.</span><span class="sxs-lookup"><span data-stu-id="55d04-148">When the GPU supports standard swizzle, buffers and standard swizzle textures may be aliased to the same memory and inherit data between them.</span></span> <span data-ttu-id="55d04-149">L'applicazione può modificare i Texel dalla rappresentazione del buffer, perché il modello swizzle standard descrive in che modo i Texel sono disposti in memoria.</span><span class="sxs-lookup"><span data-stu-id="55d04-149">The application can manipulate texels from the buffer representation, because the standard swizzle pattern describes how texels are laid out in memory.</span></span> <span data-ttu-id="55d04-150">Il modello swizzle visibile alla CPU è equivalente al modello swizzle visibile in GPU visualizzato nei buffer.</span><span class="sxs-lookup"><span data-stu-id="55d04-150">The CPU-visible swizzle pattern is equivalent to the GPU-visible swizzle pattern seen in buffers.</span></span>

## <a name="related-topics"></a><span data-ttu-id="55d04-151">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="55d04-151">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="55d04-152">Sottoallocazione negli heap</span><span class="sxs-lookup"><span data-stu-id="55d04-152">Suballocation Within Heaps</span></span>](suballocation-within-heaps.md)
</dt> </dl>

 

 




