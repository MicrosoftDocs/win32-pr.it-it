---
title: Passaggi di rendering di Direct3D 12
description: La funzionalità di rendering passa consente al renderer di migliorare l'efficienza della GPU riducendo il traffico di memoria alla/dalla memoria fuori chip; Questa operazione consente all'applicazione di identificare meglio i requisiti di ordinamento per il rendering delle risorse e le dipendenze dei dati.
ms.localizationpriority: high
ms.topic: article
ms.date: 11/15/2018
ms.openlocfilehash: f776729f17ac0017d713c6f37bc71de7302a7c08
ms.sourcegitcommit: 780d4b1601c45658ef0b799b80d13f45a53d808d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/26/2020
ms.locfileid: "104548779"
---
# <a name="direct3d-12-render-passes"></a><span data-ttu-id="d4c98-103">Passaggi di rendering di Direct3D 12</span><span class="sxs-lookup"><span data-stu-id="d4c98-103">Direct3D 12 render passes</span></span>

<span data-ttu-id="d4c98-104">La funzionalità di passaggio di rendering è una novità di Windows 10, versione 1809 (10,0; Build 17763) e introduce il concetto di passaggio di rendering di Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="d4c98-104">The render passes feature is new for Windows 10, version 1809 (10.0; Build 17763), and it introduces the concept of a Direct3D 12 render pass.</span></span> <span data-ttu-id="d4c98-105">Un passaggio di rendering è costituito da un subset dei comandi registrati in un elenco di comandi.</span><span class="sxs-lookup"><span data-stu-id="d4c98-105">A render pass consists of a subset of the commands that you record into a command list.</span></span>

<span data-ttu-id="d4c98-106">Per dichiarare l'inizio e la fine di ogni passaggio di rendering, nidificare i comandi che appartengono a che passano nelle chiamate a [**ID3D12GraphicsCommandList4:: BeginRenderPass**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist4-beginrenderpass) e [**EndRenderPass**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist4-endrenderpass).</span><span class="sxs-lookup"><span data-stu-id="d4c98-106">To declare where each render pass begins and ends, you nest the commands belonging to that pass inside calls to [**ID3D12GraphicsCommandList4::BeginRenderPass**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist4-beginrenderpass) and [**EndRenderPass**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist4-endrenderpass).</span></span> <span data-ttu-id="d4c98-107">Di conseguenza, qualsiasi elenco di comandi contiene zero, uno o più passaggi di rendering.</span><span class="sxs-lookup"><span data-stu-id="d4c98-107">Consequently, any command list contains zero, one, or more render passes.</span></span>

## <a name="scenarios"></a><span data-ttu-id="d4c98-108">Scenari</span><span class="sxs-lookup"><span data-stu-id="d4c98-108">Scenarios</span></span>

<span data-ttu-id="d4c98-109">Il rendering passa può migliorare le prestazioni del renderer se è basato su Tile-Based rendering posticipato (TBDR), tra le altre tecniche.</span><span class="sxs-lookup"><span data-stu-id="d4c98-109">Render passes can improve the performance of your renderer if it's based on Tile-Based Deferred Rendering (TBDR), among other techniques.</span></span> <span data-ttu-id="d4c98-110">In particolare, la tecnica consente al renderer di migliorare l'efficienza della GPU riducendo il traffico di memoria alla/dalla memoria fuori chip consentendo all'applicazione di identificare meglio i requisiti di ordinamento per il rendering delle risorse e le dipendenze dei dati.</span><span class="sxs-lookup"><span data-stu-id="d4c98-110">More specifically, the technique helps your renderer to improve GPU efficiency by reducing memory traffic to/from off-chip memory by enabling your application to better identify resource rendering ordering requirements and data dependencies.</span></span>

<span data-ttu-id="d4c98-111">Un driver di visualizzazione scritto espressamente per sfruttare la funzionalità di passaggio di rendering fornisce i migliori risultati.</span><span class="sxs-lookup"><span data-stu-id="d4c98-111">A display driver written expressly to leverage the render passes feature gives the best results.</span></span> <span data-ttu-id="d4c98-112">Tuttavia, le API di rendering passano possono essere eseguite anche su driver preesistenti, anche se non necessariamente con miglioramenti delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="d4c98-112">But render passes APIs can run even on pre-existing drivers (although, not necessarily with performance improvements).</span></span>

<span data-ttu-id="d4c98-113">Questi sono gli scenari in cui il passaggio di rendering è progettato per fornire un valore.</span><span class="sxs-lookup"><span data-stu-id="d4c98-113">These are the scenarios in which render passes is designed to provide value.</span></span>

### <a name="allow-your-application-to-avoid-unnecessary-loadsstores-of-resources-fromto-main-memory-on-a-tile-based-deferred-rendering-tbdr-architecture"></a><span data-ttu-id="d4c98-114">Consentire all'applicazione di evitare carichi/archivi di risorse non necessari da/verso la memoria principale in un'architettura Tile-Based rendering posticipato (TBDR)</span><span class="sxs-lookup"><span data-stu-id="d4c98-114">Allow your application to avoid unnecessary loads/stores of resources from/to main memory on a Tile-Based Deferred Rendering (TBDR) architecture</span></span>

<span data-ttu-id="d4c98-115">Una delle proposte di valore del passaggio di rendering è che fornisce una posizione centrale per indicare le dipendenze dei dati dell'applicazione per un set di operazioni di rendering.</span><span class="sxs-lookup"><span data-stu-id="d4c98-115">One of the value propositions of render passes is that it provides you with a central location to indicate your application's data dependencies for a set of rendering operations.</span></span> <span data-ttu-id="d4c98-116">Tali dipendenze consentono al driver di visualizzazione di ispezionare i dati in fase di binding/barriera e di emettere istruzioni per ridurre al minimo i caricamenti/archivi delle risorse da e verso la memoria principale.</span><span class="sxs-lookup"><span data-stu-id="d4c98-116">These data dependencies allow the display driver to inspect this data at bind/barrier time, and to issue instructions that minimize resource loads/stores from/to main memory.</span></span>

### <a name="allow-your-tbdr-architecture-to-opportunistically-persistent-resources-in-on-chip-cache-across-render-passes-even-in-separate-command-lists"></a><span data-ttu-id="d4c98-117">Consenti all'architettura TBDR di opportunisticamente risorse persistenti nella cache su chip tra i passaggi di rendering (anche in elenchi di comandi separati)</span><span class="sxs-lookup"><span data-stu-id="d4c98-117">Allow your TBDR architecture to opportunistically persistent resources in on-chip cache across render passes (even in separate Command Lists)</span></span>

> [!NOTE]
> <span data-ttu-id="d4c98-118">In particolare, questo scenario è limitato ai casi in cui si sta scrivendo sulle stesse destinazioni di rendering tra più elenchi di comandi.</span><span class="sxs-lookup"><span data-stu-id="d4c98-118">Specifically, this scenario is limited to the cases where you're writing to the same render target(s) across multiple command lists.</span></span>

<span data-ttu-id="d4c98-119">Un modello di rendering comune prevede che l'applicazione esegua il rendering delle stesse destinazioni di rendering in più elenchi di comandi in modo seriale, anche se i comandi di rendering vengono generati in parallelo.</span><span class="sxs-lookup"><span data-stu-id="d4c98-119">A common rendering pattern is for your application to render to the same render target(s) across multiple command lists serially, even though the rendering commands are generated in parallel.</span></span> <span data-ttu-id="d4c98-120">L'uso dei passaggi di rendering in questo scenario consente di combinare questi passaggi in modo tale che, poiché l'applicazione sa che riprende il rendering nell'elenco dei comandi immediatamente successivi, che il driver di visualizzazione può evitare uno scaricamento nella memoria principale nei limiti dell'elenco dei comandi.</span><span class="sxs-lookup"><span data-stu-id="d4c98-120">Your use of render passes in this scenario allows these passes to be combined in such a way (since the application knows that it will resume rendering on the immediate succeeding command list) that the display driver can avoid a flush to main memory on command list boundaries.</span></span>

## <a name="your-applications-responsibilities"></a><span data-ttu-id="d4c98-121">Responsabilità dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="d4c98-121">Your application's responsibilities</span></span>

<span data-ttu-id="d4c98-122">Anche con la funzionalità di passaggio di rendering, né il runtime di Direct3D 12 né il driver di visualizzazione assumono la responsabilità di dedurre le opportunità di riordinare/evitare i carichi e gli archivi.</span><span class="sxs-lookup"><span data-stu-id="d4c98-122">Even with the render passes feature, neither the Direct3D 12 runtime nor the display driver take on the responsibility of deducing opportunities to re-order/avoid loads and stores.</span></span> <span data-ttu-id="d4c98-123">Per sfruttare correttamente la funzionalità di passaggio di rendering, l'applicazione ha queste responsabilità.</span><span class="sxs-lookup"><span data-stu-id="d4c98-123">To correctly leverage the render passes feature, your application has these responsibilities.</span></span>

- <span data-ttu-id="d4c98-124">Identificare correttamente le dipendenze di dati/ordini per le relative operazioni.</span><span class="sxs-lookup"><span data-stu-id="d4c98-124">Properly identify data/ordering dependencies for its operations.</span></span>
- <span data-ttu-id="d4c98-125">Ordinare gli invii in modo da ridurre al minimo gli scaricamenti, per ridurre al minimo l'uso dei flag di **_PRESERVE** .</span><span class="sxs-lookup"><span data-stu-id="d4c98-125">Order its submissions in a way that minimizes flushes (so, minimize your use of **_PRESERVE** flags).</span></span>
- <span data-ttu-id="d4c98-126">Usare correttamente le barriere delle risorse e tenere traccia dello stato delle risorse.</span><span class="sxs-lookup"><span data-stu-id="d4c98-126">Correctly make use of resource barriers, and track resource state.</span></span>
- <span data-ttu-id="d4c98-127">Evitare copie/cancellazioni non necessarie.</span><span class="sxs-lookup"><span data-stu-id="d4c98-127">Avoid unneeded copies/clears.</span></span> <span data-ttu-id="d4c98-128">Per facilitarne l'identificazione, è possibile usare gli avvisi di prestazioni automatici dallo [strumento pix per Windows](https://devblogs.microsoft.com/pix/).</span><span class="sxs-lookup"><span data-stu-id="d4c98-128">To help identify these, you can make use of the automated performance warnings from the [PIX on Windows tool](https://devblogs.microsoft.com/pix/).</span></span>

## <a name="using-the-render-pass-feature"></a><span data-ttu-id="d4c98-129">Uso della funzionalità di passaggio di rendering</span><span class="sxs-lookup"><span data-stu-id="d4c98-129">Using the render pass feature</span></span>

### <a name="what-is-a-render-pass"></a><span data-ttu-id="d4c98-130">Che cos'è un *passaggio di rendering*?</span><span class="sxs-lookup"><span data-stu-id="d4c98-130">What is a *render pass*?</span></span>

<span data-ttu-id="d4c98-131">Un passaggio di rendering viene definito da questi elementi.</span><span class="sxs-lookup"><span data-stu-id="d4c98-131">A render pass is defined by these elements.</span></span>

- <span data-ttu-id="d4c98-132">Set di associazioni di output fisse per la durata del passaggio di rendering.</span><span class="sxs-lookup"><span data-stu-id="d4c98-132">A set of output bindings that are fixed for the duration of the render pass.</span></span> <span data-ttu-id="d4c98-133">Queste associazioni sono a una o più visualizzazioni di destinazione di rendering (RTVs) e/o a una vista depth stencil (DSV).</span><span class="sxs-lookup"><span data-stu-id="d4c98-133">These bindings are to one or more render target views (RTVs), and/or to a depth stencil view (DSV).</span></span>
- <span data-ttu-id="d4c98-134">Elenco di operazioni GPU destinate a tale set di associazioni di output.</span><span class="sxs-lookup"><span data-stu-id="d4c98-134">A list of GPU operations that target that set of output bindings.</span></span>
- <span data-ttu-id="d4c98-135">Metadati che descrivono le dipendenze di caricamento/archiviazione per tutte le associazioni di output di destinazione del passaggio di rendering.</span><span class="sxs-lookup"><span data-stu-id="d4c98-135">Metadata that describes the load/store dependencies for all output bindings targeted by the render pass.</span></span>

### <a name="declare-your-output-bindings"></a><span data-ttu-id="d4c98-136">Dichiarare le associazioni di output</span><span class="sxs-lookup"><span data-stu-id="d4c98-136">Declare your output bindings</span></span>

<span data-ttu-id="d4c98-137">All'inizio di un passaggio di rendering, si dichiarano i binding alle destinazioni di rendering e/o al buffer di profondità/stencil.</span><span class="sxs-lookup"><span data-stu-id="d4c98-137">At the start of a render pass, you declare bindings to your render target(s) and/or to your depth/stencil buffer.</span></span> <span data-ttu-id="d4c98-138">Si tratta di un'associazione facoltativa a destinazioni di rendering ed è facoltativa per l'associazione a un buffer di profondità/stencil.</span><span class="sxs-lookup"><span data-stu-id="d4c98-138">It's optional to bind to render target(s), and it's optional to bind to a depth/stencil buffer.</span></span> <span data-ttu-id="d4c98-139">Tuttavia, è necessario eseguire l'associazione ad almeno uno dei due e nell'esempio di codice riportato di seguito viene associato a entrambe.</span><span class="sxs-lookup"><span data-stu-id="d4c98-139">But you must bind to at least one of the two, and in the code example below we bind to both.</span></span>

<span data-ttu-id="d4c98-140">Questi binding vengono dichiarati in una chiamata a [**ID3D12GraphicsCommandList4:: BeginRenderPass**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist4-beginrenderpass).</span><span class="sxs-lookup"><span data-stu-id="d4c98-140">You declare these bindings in a call to [**ID3D12GraphicsCommandList4::BeginRenderPass**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist4-beginrenderpass).</span></span>

```cppwinrt
void render_passes(::ID3D12GraphicsCommandList4 * pIGCL4,
    D3D12_CPU_DESCRIPTOR_HANDLE const& rtvCPUDescriptorHandle,
    D3D12_CPU_DESCRIPTOR_HANDLE const& dsvCPUDescriptorHandle)
{
    const float clearColor4[]{ 0.f, 0.f, 0.f, 0.f };
    CD3DX12_CLEAR_VALUE clearValue{ DXGI_FORMAT_R32G32B32_FLOAT, clearColor4 };

    D3D12_RENDER_PASS_BEGINNING_ACCESS renderPassBeginningAccessClear{ D3D12_RENDER_PASS_BEGINNING_ACCESS_TYPE_CLEAR, { clearValue } };
    D3D12_RENDER_PASS_ENDING_ACCESS renderPassEndingAccessPreserve{ D3D12_RENDER_PASS_ENDING_ACCESS_TYPE_PRESERVE, {} };
    D3D12_RENDER_PASS_RENDER_TARGET_DESC renderPassRenderTargetDesc{ rtvCPUDescriptorHandle, renderPassBeginningAccessClear, renderPassEndingAccessPreserve };

    D3D12_RENDER_PASS_BEGINNING_ACCESS renderPassBeginningAccessNoAccess{ D3D12_RENDER_PASS_BEGINNING_ACCESS_TYPE_NO_ACCESS, {} };
    D3D12_RENDER_PASS_ENDING_ACCESS renderPassEndingAccessNoAccess{ D3D12_RENDER_PASS_ENDING_ACCESS_TYPE_NO_ACCESS, {} };
    D3D12_RENDER_PASS_DEPTH_STENCIL_DESC renderPassDepthStencilDesc{ dsvCPUDescriptorHandle, renderPassBeginningAccessNoAccess, renderPassBeginningAccessNoAccess, renderPassEndingAccessNoAccess, renderPassEndingAccessNoAccess };

    pIGCL4->BeginRenderPass(1, &renderPassRenderTargetDesc, &renderPassDepthStencilDesc, D3D12_RENDER_PASS_FLAG_NONE);
    // Record command list.
    pIGCL4->EndRenderPass();
    // Begin/End further render passes and then execute the command list(s).
}
```

<span data-ttu-id="d4c98-141">Il primo campo della struttura [**D3D12_RENDER_PASS_RENDER_TARGET_DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_render_pass_render_target_desc) viene impostato sull'handle descrittore CPU corrispondente a una o più visualizzazioni di destinazione di rendering (RTVs).</span><span class="sxs-lookup"><span data-stu-id="d4c98-141">You set the first field of the [**D3D12_RENDER_PASS_RENDER_TARGET_DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_render_pass_render_target_desc) structure to the CPU descriptor handle corresponding to one or more render target views (RTVs).</span></span> <span data-ttu-id="d4c98-142">Analogamente, [**D3D12_RENDER_PASS_DEPTH_STENCIL_DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_render_pass_depth_stencil_desc) contiene l'handle del descrittore della CPU corrispondente a una visualizzazione depth stencil (DSV).</span><span class="sxs-lookup"><span data-stu-id="d4c98-142">Similarly, [**D3D12_RENDER_PASS_DEPTH_STENCIL_DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_render_pass_depth_stencil_desc) contains the CPU descriptor handle corresponding to a depth stencil view (DSV).</span></span> <span data-ttu-id="d4c98-143">Gli handle del descrittore di CPU sono gli stessi che verrebbero altrimenti passati a [**ID3D12GraphicsCommandList:: OMSetRenderTargets**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-omsetrendertargets).</span><span class="sxs-lookup"><span data-stu-id="d4c98-143">Those CPU descriptor handles are the same ones that you would otherwise pass to [**ID3D12GraphicsCommandList::OMSetRenderTargets**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-omsetrendertargets).</span></span> <span data-ttu-id="d4c98-144">Analogamente a **OMSetRenderTargets**, i descrittori di CPU vengono *bloccati* dal rispettivo heap (descrittore della CPU) al momento della chiamata a **BeginRenderPass**.</span><span class="sxs-lookup"><span data-stu-id="d4c98-144">And, just as with **OMSetRenderTargets**, the CPU descriptors are *snapped* from their respective (CPU descriptor) heaps at the time of the call to **BeginRenderPass**.</span></span>

<span data-ttu-id="d4c98-145">RTVs e DSV non vengono ereditati nel passaggio di rendering.</span><span class="sxs-lookup"><span data-stu-id="d4c98-145">The RTVs and DSV are not inherited in to the render pass.</span></span> <span data-ttu-id="d4c98-146">Ma devono essere impostati.</span><span class="sxs-lookup"><span data-stu-id="d4c98-146">Rather, they must be set.</span></span> <span data-ttu-id="d4c98-147">Né RTVs e DSV dichiarati in **BeginRenderPass** vengono propagati all'elenco dei comandi.</span><span class="sxs-lookup"><span data-stu-id="d4c98-147">Nor are the RTVs and DSV declared in **BeginRenderPass** propagated out to the command list.</span></span> <span data-ttu-id="d4c98-148">Sono invece in uno stato non definito che segue il passaggio di rendering.</span><span class="sxs-lookup"><span data-stu-id="d4c98-148">Rather, they are in an undefined state following the render pass.</span></span>

### <a name="render-passes-and-workloads"></a><span data-ttu-id="d4c98-149">Passaggi e carichi di lavoro di rendering</span><span class="sxs-lookup"><span data-stu-id="d4c98-149">Render passes and workloads</span></span>

<span data-ttu-id="d4c98-150">Non è possibile nidificare i passaggi di rendering e non è possibile avere un passaggio di rendering a cavalcioni di più di un elenco di comandi (devono iniziare e terminare durante la registrazione in un unico elenco di comandi).</span><span class="sxs-lookup"><span data-stu-id="d4c98-150">You can't nest render passes, and you can't have a render pass straddle more than one command list (they must begin and end while recording into a single command list).</span></span> <span data-ttu-id="d4c98-151">Le ottimizzazioni progettate per consentire una generazione efficiente di passaggi di rendering sono illustrate nella sezione [ flag di passaggio di rendering](#render-pass-flags), più avanti.</span><span class="sxs-lookup"><span data-stu-id="d4c98-151">Optimizations designed to enable efficient multi-threaded generation of render passes are discussed in the section [ render pass Flags](#render-pass-flags), below.</span></span>

<span data-ttu-id="d4c98-152">Una scrittura eseguita dall'interno di un passaggio di rendering non è *valida* per la lettura fino a un passaggio di rendering successivo.</span><span class="sxs-lookup"><span data-stu-id="d4c98-152">A write that you do from within a render pass isn't *valid* for you to read from until a subsequent render pass.</span></span> <span data-ttu-id="d4c98-153">Che impedisce alcuni tipi di barriere all'interno del passaggio &mdash; di rendering, ad esempio, la barriera da **RENDER_TARGET** a **SHADER_RESOURCE** sulla destinazione di rendering attualmente associata.</span><span class="sxs-lookup"><span data-stu-id="d4c98-153">That precludes some types of barriers from within the render pass&mdash;for example, barriering from **RENDER_TARGET** to **SHADER_RESOURCE** on the currently-bound render target.</span></span> <span data-ttu-id="d4c98-154">Per altre informazioni, vedere la sezione [passaggi di rendering e barriere delle risorse](#render-passes-and-resource-barriers), più avanti.</span><span class="sxs-lookup"><span data-stu-id="d4c98-154">For more info, see the section [Render passes and resource barriers](#render-passes-and-resource-barriers), below.</span></span>

<span data-ttu-id="d4c98-155">L'unica eccezione al vincolo Write-Read appena citata riguarda le letture implicite che si verificano come parte del test di profondità e della fusione della destinazione di rendering.</span><span class="sxs-lookup"><span data-stu-id="d4c98-155">The one exception to the write-read constraint just mentioned involves the implicit reads that occur as part of depth-testing and render target blending.</span></span>
<span data-ttu-id="d4c98-156">Queste API non sono quindi consentite in un passaggio di rendering (il runtime principale rimuove l'elenco dei comandi se uno di essi viene chiamato durante la registrazione).</span><span class="sxs-lookup"><span data-stu-id="d4c98-156">So, these APIs are disallowed within a render pass (the core runtime removes the command list if any of them are called during recording).</span></span>

- [<span data-ttu-id="d4c98-157">**ID3D12GraphicsCommandList1::AtomicCopyBufferUINT**</span><span class="sxs-lookup"><span data-stu-id="d4c98-157">**ID3D12GraphicsCommandList1::AtomicCopyBufferUINT**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist1-atomiccopybufferuint)
- [<span data-ttu-id="d4c98-158">**ID3D12GraphicsCommandList1::AtomicCopyBufferUINT64**</span><span class="sxs-lookup"><span data-stu-id="d4c98-158">**ID3D12GraphicsCommandList1::AtomicCopyBufferUINT64**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist1-atomiccopybufferuint64)
- [<span data-ttu-id="d4c98-159">**ID3D12GraphicsCommandList4::BeginRenderPass**</span><span class="sxs-lookup"><span data-stu-id="d4c98-159">**ID3D12GraphicsCommandList4::BeginRenderPass**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist4-beginrenderpass)
- [<span data-ttu-id="d4c98-160">**ID3D12GraphicsCommandList::ClearDepthStencilView**</span><span class="sxs-lookup"><span data-stu-id="d4c98-160">**ID3D12GraphicsCommandList::ClearDepthStencilView**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-cleardepthstencilview)
- [<span data-ttu-id="d4c98-161">**ID3D12GraphicsCommandList::ClearRenderTargetView**</span><span class="sxs-lookup"><span data-stu-id="d4c98-161">**ID3D12GraphicsCommandList::ClearRenderTargetView**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-clearrendertargetview)
- [<span data-ttu-id="d4c98-162">**ID3D12GraphicsCommandList::ClearState**</span><span class="sxs-lookup"><span data-stu-id="d4c98-162">**ID3D12GraphicsCommandList::ClearState**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-clearstate)
- [<span data-ttu-id="d4c98-163">**ID3D12GraphicsCommandList::ClearUnorderedAccessViewFloat**</span><span class="sxs-lookup"><span data-stu-id="d4c98-163">**ID3D12GraphicsCommandList::ClearUnorderedAccessViewFloat**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-clearunorderedaccessviewfloat)
- [<span data-ttu-id="d4c98-164">**ID3D12GraphicsCommandList::ClearUnorderedAccessViewUint**</span><span class="sxs-lookup"><span data-stu-id="d4c98-164">**ID3D12GraphicsCommandList::ClearUnorderedAccessViewUint**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-clearunorderedaccessviewuint)
- [<span data-ttu-id="d4c98-165">**ID3D12GraphicsCommandList::CopyBufferRegion**</span><span class="sxs-lookup"><span data-stu-id="d4c98-165">**ID3D12GraphicsCommandList::CopyBufferRegion**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-copybufferregion)
- [<span data-ttu-id="d4c98-166">**ID3D12GraphicsCommandList::CopyResource**</span><span class="sxs-lookup"><span data-stu-id="d4c98-166">**ID3D12GraphicsCommandList::CopyResource**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-copyresource)
- [<span data-ttu-id="d4c98-167">**ID3D12GraphicsCommandList::CopyTextureRegion**</span><span class="sxs-lookup"><span data-stu-id="d4c98-167">**ID3D12GraphicsCommandList::CopyTextureRegion**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-copytextureregion)
- [<span data-ttu-id="d4c98-168">**ID3D12GraphicsCommandList::CopyTiles**</span><span class="sxs-lookup"><span data-stu-id="d4c98-168">**ID3D12GraphicsCommandList::CopyTiles**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-copytiles)
- [<span data-ttu-id="d4c98-169">**ID3D12GraphicsCommandList::D iscardResource**</span><span class="sxs-lookup"><span data-stu-id="d4c98-169">**ID3D12GraphicsCommandList::DiscardResource**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-discardresource)
- [<span data-ttu-id="d4c98-170">**ID3D12GraphicsCommandList::D patch**</span><span class="sxs-lookup"><span data-stu-id="d4c98-170">**ID3D12GraphicsCommandList::Dispatch**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-dispatch)
- [<span data-ttu-id="d4c98-171">**ID3D12GraphicsCommandList::OMSetRenderTargets**</span><span class="sxs-lookup"><span data-stu-id="d4c98-171">**ID3D12GraphicsCommandList::OMSetRenderTargets**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-omsetrendertargets)
- [<span data-ttu-id="d4c98-172">**ID3D12GraphicsCommandList::ResolveQueryData**</span><span class="sxs-lookup"><span data-stu-id="d4c98-172">**ID3D12GraphicsCommandList::ResolveQueryData**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-resolvequerydata)
- [<span data-ttu-id="d4c98-173">**ID3D12GraphicsCommandList::ResolveSubresource**</span><span class="sxs-lookup"><span data-stu-id="d4c98-173">**ID3D12GraphicsCommandList::ResolveSubresource**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-resolvesubresource)
- [<span data-ttu-id="d4c98-174">**ID3D12GraphicsCommandList1::ResolveSubresourceRegion**</span><span class="sxs-lookup"><span data-stu-id="d4c98-174">**ID3D12GraphicsCommandList1::ResolveSubresourceRegion**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist1-resolvesubresourceregion)
- [<span data-ttu-id="d4c98-175">**ID3D12GraphicsCommandList3::SetProtectedResourceSession**</span><span class="sxs-lookup"><span data-stu-id="d4c98-175">**ID3D12GraphicsCommandList3::SetProtectedResourceSession**</span></span>](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist3-setprotectedresourcesession)

### <a name="render-passes-and-resource-barriers"></a><span data-ttu-id="d4c98-176">Passaggi di rendering e barriere delle risorse</span><span class="sxs-lookup"><span data-stu-id="d4c98-176">Render passes and resource barriers</span></span>

<span data-ttu-id="d4c98-177">Non è possibile leggere o utilizzare una scrittura che si è verificata nello stesso passaggio di rendering.</span><span class="sxs-lookup"><span data-stu-id="d4c98-177">You may not read from, or consume, a write that occurred within the same render pass.</span></span> <span data-ttu-id="d4c98-178">Alcune barriere non sono conformi a questo vincolo, ad esempio da **D3D12_RESOURCE_STATE_RENDER_TARGET** a **\* _SHADER_RESOURCE** sulla destinazione di rendering attualmente associata (e il livello di debug genera un errore a tale scopo).</span><span class="sxs-lookup"><span data-stu-id="d4c98-178">Certain barriers don't conform to this constraint, for example from **D3D12_RESOURCE_STATE_RENDER_TARGET** to **\*_SHADER_RESOURCE** on the currently-bound render target (and the debug layer will error to that effect).</span></span> <span data-ttu-id="d4c98-179">Tuttavia, la stessa barriera in una destinazione di rendering scritta al di *fuori* del passaggio di rendering corrente è conforme, perché le scritture vengono completate prima dell'avvio del passaggio di rendering corrente.</span><span class="sxs-lookup"><span data-stu-id="d4c98-179">But, that same barrier on a render target that was written *outside* the current render pass is conformant, because the writes will complete ahead of the current render pass starting.</span></span>
<span data-ttu-id="d4c98-180">È possibile trarre vantaggio dalla conoscenza di determinate ottimizzazioni che possono essere apportate da un driver di visualizzazione in questo senso.</span><span class="sxs-lookup"><span data-stu-id="d4c98-180">You might benefit from knowing about certain optimizations that a display driver can make in this regard.</span></span> <span data-ttu-id="d4c98-181">Dato un carico di lavoro conforme, un driver di visualizzazione potrebbe spostare eventuali barriere rilevate nel passaggio di rendering all'inizio del passaggio di rendering.</span><span class="sxs-lookup"><span data-stu-id="d4c98-181">Given a conformant workload, a display driver might move any barriers encountered in your render pass to the beginning of the render pass.</span></span> <span data-ttu-id="d4c98-182">In questo caso possono essere unite (senza interferire con le operazioni di affiancamento/suddivisione in contenitori).</span><span class="sxs-lookup"><span data-stu-id="d4c98-182">There, they can be coalesced (and not interfere with any tiling/binning operations).</span></span> <span data-ttu-id="d4c98-183">Si tratta di un'ottimizzazione valida purché tutte le operazioni di scrittura siano completate prima dell'avvio del passaggio di rendering corrente.</span><span class="sxs-lookup"><span data-stu-id="d4c98-183">This is a valid optimization provided that all of your writes have finished before the current render pass starts.</span></span>

<span data-ttu-id="d4c98-184">Di seguito è riportato un esempio di ottimizzazione del driver più completo, che presuppone che si disponga di un motore di rendering con una progettazione di associazione di risorse precedente a Direct3D 12 che &mdash; esegue le barriere *su richiesta* in base alla modalità di associazione delle risorse.</span><span class="sxs-lookup"><span data-stu-id="d4c98-184">Here's a more complete driver-optimization example, which assumes that you have a rendering engine that has a pre-Direct3D 12-style resource-binding design&mdash;doing barriers *on demand* based on how resources are bound.</span></span> <span data-ttu-id="d4c98-185">Quando si scrive in una visualizzazione di accesso non ordinata (UAV) verso la fine di un frame (per essere utilizzato nel frame seguente), il motore potrebbe lasciare la risorsa nello stato **D3D12_RESOURCE_STATE_UNORDERED_ACCESS** alla conclusione del frame.</span><span class="sxs-lookup"><span data-stu-id="d4c98-185">When writing into an unordered access view (UAV) toward the end of a frame (to be consumed in the following frame), the engine might happen to leave the resource in the **D3D12_RESOURCE_STATE_UNORDERED_ACCESS** state at the conclusion of the frame.</span></span> <span data-ttu-id="d4c98-186">Nel frame seguente, quando il motore passa a associare la risorsa come visualizzazione risorse dello shader (SRV), si noterà che la risorsa non è nello stato corretto e che verrà rilasciata una barriera da **D3D12_RESOURCE_STATE_UNORDERED_ACCESS** a **D3D12_RESOURCE_STATE_PIXEL_SHADER_RESOURCE**.</span><span class="sxs-lookup"><span data-stu-id="d4c98-186">In the frame that follows, when the engine goes to bind the resource as a shader resource view (SRV), it will find that the resource is not in the correct state, and it will issue a barrier from **D3D12_RESOURCE_STATE_UNORDERED_ACCESS** to **D3D12_RESOURCE_STATE_PIXEL_SHADER_RESOURCE**.</span></span> <span data-ttu-id="d4c98-187">Se tale ostacolo si verifica all'interno del passaggio di rendering, il driver di visualizzazione è giustificato nel presupposto che tutte le Scritture si siano già verificate al di *fuori* di questo passaggio di rendering corrente e, di conseguenza, ed è in questo caso che l'ottimizzazione venga avviata, il driver visualizzato potrebbe *spostare* la barriera fino all'inizio del passaggio di rendering.</span><span class="sxs-lookup"><span data-stu-id="d4c98-187">If that barrier occurs within the render pass, then the display driver is justified in assuming that all writes have already occurred *outside* of this current render pass, and consequently (and here's where the optimization comes in) the display driver might *move* the barrier up to the start of the render pass.</span></span> <span data-ttu-id="d4c98-188">Anche in questo caso, si tratta di un valore valido, purché il codice sia conforme al vincolo Write-Read descritto in questa sezione e l'ultimo.</span><span class="sxs-lookup"><span data-stu-id="d4c98-188">Again, this is valid, as long as your code is conforming to the write-read constraint described in this section and the last.</span></span>


<span data-ttu-id="d4c98-189">Di seguito sono riportati alcuni esempi di barriere conformi.</span><span class="sxs-lookup"><span data-stu-id="d4c98-189">These are examples of conformant barriers.</span></span>
- <span data-ttu-id="d4c98-190">**D3D12_RESOURCE_STATE_UNORDERED_ACCESS** **D3D12_RESOURCE_STATE_INDIRECT_ARGUMENT**.</span><span class="sxs-lookup"><span data-stu-id="d4c98-190">**D3D12_RESOURCE_STATE_UNORDERED_ACCESS** to **D3D12_RESOURCE_STATE_INDIRECT_ARGUMENT**.</span></span>
- <span data-ttu-id="d4c98-191">**D3D12_RESOURCE_STATE_COPY_DEST** **\* _SHADER_RESOURCE**.</span><span class="sxs-lookup"><span data-stu-id="d4c98-191">**D3D12_RESOURCE_STATE_COPY_DEST** to **\*_SHADER_RESOURCE**.</span></span>

<span data-ttu-id="d4c98-192">E sono esempi di barriere non conformi.</span><span class="sxs-lookup"><span data-stu-id="d4c98-192">And these are examples of non-conformant barriers.</span></span>

- <span data-ttu-id="d4c98-193">**D3D12_RESOURCE_STATE_RENDER_TARGET** lo stato di lettura su RTVs/viste origine dati attualmente associati.</span><span class="sxs-lookup"><span data-stu-id="d4c98-193">**D3D12_RESOURCE_STATE_RENDER_TARGET** to any read state on currently-bound RTVs/DSVs.</span></span>
- <span data-ttu-id="d4c98-194">**D3D12_RESOURCE_STATE_DEPTH_WRITE** lo stato di lettura su RTVs/viste origine dati attualmente associati.</span><span class="sxs-lookup"><span data-stu-id="d4c98-194">**D3D12_RESOURCE_STATE_DEPTH_WRITE** to any read state on currently-bound RTVs/DSVs.</span></span>
- <span data-ttu-id="d4c98-195">Qualsiasi barriera di aliasing.</span><span class="sxs-lookup"><span data-stu-id="d4c98-195">Any aliasing barrier.</span></span>
- <span data-ttu-id="d4c98-196">Barriere per la visualizzazione di accesso non ordinato (UAV).</span><span class="sxs-lookup"><span data-stu-id="d4c98-196">Unordered access view (UAV) barriers.</span></span> 

### <a name="resource-access-declaration"></a><span data-ttu-id="d4c98-197">Dichiarazione di accesso alle risorse</span><span class="sxs-lookup"><span data-stu-id="d4c98-197">Resource access declaration</span></span>

<span data-ttu-id="d4c98-198">In fase di **BeginRenderPass** , oltre a dichiarare tutte le risorse che fungono da RTVs e/o vista origine dati all'interno di tale passaggio, è necessario specificare anche le caratteristiche di *accesso* iniziale e finale.</span><span class="sxs-lookup"><span data-stu-id="d4c98-198">At **BeginRenderPass** time, as well as declaring all resources that are serving as RTVs and/or DSV within that pass, you must also specify their beginning and ending *access* characteristics.</span></span> <span data-ttu-id="d4c98-199">Come si può notare nell'esempio di codice nella sezione [dichiarare i binding di output](#declare-your-output-bindings) precedente, è possibile eseguire questa operazione con le strutture [**D3D12_RENDER_PASS_RENDER_TARGET_DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_render_pass_render_target_desc) e [**D3D12_RENDER_PASS_DEPTH_STENCIL_DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_render_pass_depth_stencil_desc) .</span><span class="sxs-lookup"><span data-stu-id="d4c98-199">As you can see in the code example in the [Declare your output bindings](#declare-your-output-bindings) section above, you do this with the [**D3D12_RENDER_PASS_RENDER_TARGET_DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_render_pass_render_target_desc) and [**D3D12_RENDER_PASS_DEPTH_STENCIL_DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_render_pass_depth_stencil_desc) structures.</span></span>

<span data-ttu-id="d4c98-200">Per ulteriori informazioni, vedere le strutture [**D3D12_RENDER_PASS_BEGINNING_ACCESS**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_render_pass_beginning_access) e [**D3D12_RENDER_PASS_ENDING_ACCESS**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_render_pass_ending_access) e le enumerazioni [**D3D12_RENDER_PASS_BEGINNING_ACCESS_TYPE**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_render_pass_beginning_access_type) e [**D3D12_RENDER_PASS_ENDING_ACCESS_TYPE**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_render_pass_ending_access_type) .</span><span class="sxs-lookup"><span data-stu-id="d4c98-200">For more details, see the [**D3D12_RENDER_PASS_BEGINNING_ACCESS**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_render_pass_beginning_access) and [**D3D12_RENDER_PASS_ENDING_ACCESS**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_render_pass_ending_access) structures, and the [**D3D12_RENDER_PASS_BEGINNING_ACCESS_TYPE**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_render_pass_beginning_access_type) and [**D3D12_RENDER_PASS_ENDING_ACCESS_TYPE**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_render_pass_ending_access_type) enumerations.</span></span>

### <a name="render-pass-flags"></a><span data-ttu-id="d4c98-201">Flag di passaggio di rendering</span><span class="sxs-lookup"><span data-stu-id="d4c98-201">Render pass flags</span></span>

<span data-ttu-id="d4c98-202">L'ultimo parametro passato a **BeginRenderPass** è un flag di passaggio di rendering (un valore dell'enumerazione [**D3D12_RENDER_PASS_FLAGS**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_render_pass_flags) ).</span><span class="sxs-lookup"><span data-stu-id="d4c98-202">The last parameter passed to **BeginRenderPass** is a render pass flag (a value from the [**D3D12_RENDER_PASS_FLAGS**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_render_pass_flags) enumeration).</span></span>

```cppwinrt
enum D3D12_RENDER_PASS_FLAGS
{
    D3D12_RENDER_PASS_FLAG_NONE = 0,
    D3D12_RENDER_PASS_FLAG_ALLOW_UAV_WRITES = 0x1,
    D3D12_RENDER_PASS_FLAG_SUSPENDING_PASS = 0x2,
    D3D12_RENDER_PASS_FLAG_RESUMING_PASS = 0x4
};
```

#### <a name="uav-writes-within-a-render-pass"></a><span data-ttu-id="d4c98-203">Scritture UAV in un passaggio di rendering</span><span class="sxs-lookup"><span data-stu-id="d4c98-203">UAV writes within a render pass</span></span>

<span data-ttu-id="d4c98-204">Le Scritture per la visualizzazione di accesso non ordinato (UAV) sono consentite in un passaggio di rendering, ma è necessario indicare in modo specifico che le Scritture UAV verranno rilasciate nel passaggio di rendering specificando **D3D12_RENDER_PASS_FLAG_ALLOW_UAV_WRITES**, in modo che il driver di visualizzazione possa rifiutare esplicitamente l'affiancamento, se necessario.</span><span class="sxs-lookup"><span data-stu-id="d4c98-204">Unordered access view (UAV) writes are permitted within a render pass, but you must specifically indicate that you'll be issuing UAV writes within the render pass by specifying **D3D12_RENDER_PASS_FLAG_ALLOW_UAV_WRITES**, so that the display driver can opt out of tiling if necessary.</span></span>

<span data-ttu-id="d4c98-205">Gli accessi UAV devono seguire il vincolo Write-Read descritto in precedenza (le Scritture in un passaggio di rendering non sono valide per la lettura fino a un passaggio di rendering successivo).</span><span class="sxs-lookup"><span data-stu-id="d4c98-205">UAV accesses must follow the write-read constraint described above (writes in a render pass are not valid to read until a subsequent render pass).</span></span> <span data-ttu-id="d4c98-206">Le barriere UAV non sono consentite in un passaggio di rendering.</span><span class="sxs-lookup"><span data-stu-id="d4c98-206">UAV barriers are not permitted within a render pass.</span></span>

<span data-ttu-id="d4c98-207">Le associazioni UAV (tramite tabelle radice o descrittori radice) vengono ereditate in passaggi di rendering e vengono propagate all'esterno dei passaggi di rendering.</span><span class="sxs-lookup"><span data-stu-id="d4c98-207">UAV bindings (via root tables or root descriptors) are inherited into render passes, and are propagated out of render passes.</span></span>

#### <a name="suspending-passes-and-resuming-passes"></a><span data-ttu-id="d4c98-208">Sospensione-passaggi e ripresa-passaggi</span><span class="sxs-lookup"><span data-stu-id="d4c98-208">Suspending-passes, and resuming-passes</span></span>

<span data-ttu-id="d4c98-209">È possibile indicare un passaggio di rendering intero come un passaggio di sospensione e/o un passaggio di ripresa.</span><span class="sxs-lookup"><span data-stu-id="d4c98-209">You can indicate an entire render pass as being a suspending-pass and/or a resuming-pass.</span></span> <span data-ttu-id="d4c98-210">Una coppia di sospensione seguito da una coppia deve avere viste o flag di accesso identici tra i passaggi, e potrebbero non includere operazioni GPU (ad esempio, Draw, repliche, eliminazioni, cancellazioni, copie, aggiornamento-affiancato, mapping, Write-buffer-immediate, query, Risolvi query) tra il passaggio di rendering di sospensione e il passaggio di rendering di ripresa.</span><span class="sxs-lookup"><span data-stu-id="d4c98-210">A suspending-followed-by-a-resuming pair must have identical views/access flags between the passes, and may not have any intervening GPU operations (for example, draws, dispatches, discards, clears, copies, update-tile-mappings, write-buffer-immediates, queries, query resolves) between the suspending render pass and the resuming render pass.</span></span>

<span data-ttu-id="d4c98-211">Il caso d'uso previsto è il rendering multithread, in cui ad esempio quattro elenchi di comandi (ognuno con i rispettivi passaggi di rendering) possono avere come destinazione le stesse destinazioni di rendering.</span><span class="sxs-lookup"><span data-stu-id="d4c98-211">The intended use case is multi-threaded rendering, where say four command lists (each with their own render passes) can target the same render targets.</span></span> <span data-ttu-id="d4c98-212">Quando i passaggi di rendering vengono sospesi o ripresi tra gli elenchi di comandi, gli elenchi di comandi devono essere eseguiti nella stessa chiamata a [**ID3D12CommandQueue:: oggetti executecommandlist**](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists).</span><span class="sxs-lookup"><span data-stu-id="d4c98-212">When render passes are suspended/resumed across command lists, the command lists must be executed in the same call to [**ID3D12CommandQueue::ExecuteCommandLists**](/windows/desktop/api/d3d12/nf-d3d12-id3d12commandqueue-executecommandlists).</span></span>

<span data-ttu-id="d4c98-213">Una sessione di rendering può essere ripresa e sospesa.</span><span class="sxs-lookup"><span data-stu-id="d4c98-213">A render pass can be both resuming and suspending.</span></span> <span data-ttu-id="d4c98-214">Nell'esempio multithread appena specificato, gli elenchi di comandi 2 e 3 dovrebbero riprendere rispettivamente da 1 a 2.</span><span class="sxs-lookup"><span data-stu-id="d4c98-214">In the multi-threaded example just given, command lists 2 and 3 would be resuming from 1 and 2, respectively.</span></span> <span data-ttu-id="d4c98-215">E allo stesso tempo 2 e 3 verrebbero sospesi rispettivamente a 3 e 4.</span><span class="sxs-lookup"><span data-stu-id="d4c98-215">And at the same time 2 and 3 would be suspending to 3 and 4, respectively.</span></span>

## <a name="query-for-render-passes-feature-support"></a><span data-ttu-id="d4c98-216">Query per il supporto delle funzionalità delle sessioni di rendering</span><span class="sxs-lookup"><span data-stu-id="d4c98-216">Query for render passes feature support</span></span>

<span data-ttu-id="d4c98-217">È possibile chiamare [**ID3D12Device:: CheckFeatureSupport**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-checkfeaturesupport) per eseguire una query sulla misura in cui un driver di dispositivo e/o l'hardware supporta in modo efficiente i passaggi di rendering.</span><span class="sxs-lookup"><span data-stu-id="d4c98-217">You can call [**ID3D12Device::CheckFeatureSupport**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-checkfeaturesupport) to query the extent to which a device driver and/or the hardware efficiently supports render passes.</span></span>

```cppwinrt
D3D12_RENDER_PASS_TIER get_render_passes_tier(::ID3D12Device * pIDevice)
{
    D3D12_FEATURE_DATA_D3D12_OPTIONS5 featureSupport{};
    winrt::check_hresult(
        pIDevice->CheckFeatureSupport(D3D12_FEATURE_D3D12_OPTIONS5, &featureSupport, sizeof(featureSupport))
    );
    return featureSupport.RenderPassesTier;
}
...
    D3D12_RENDER_PASS_TIER renderPassesTier{ get_render_passes_tier(pIDevice) };
```

<span data-ttu-id="d4c98-218">A causa della logica di mapping del runtime, il rendering passa sempre alla funzione.</span><span class="sxs-lookup"><span data-stu-id="d4c98-218">Because of the runtime's mapping logic, render passes always function.</span></span> <span data-ttu-id="d4c98-219">Tuttavia, a seconda del supporto delle funzionalità, non forniranno sempre un vantaggio.</span><span class="sxs-lookup"><span data-stu-id="d4c98-219">But, depending on feature support, they won't always provide a benefit.</span></span> <span data-ttu-id="d4c98-220">È possibile usare codice simile all'esempio di codice precedente per determinare se/quando è necessario eseguire i comandi come passaggi di rendering e quando il Runtime sta semplicemente eseguendo il mapping alla superficie dell'API esistente (in questo caso,</span><span class="sxs-lookup"><span data-stu-id="d4c98-220">You can use code similar to the code example above to determine whether/when it is worth your while to issue commands as render passes, and when it is definitely not a benefit (that is, when the runtime is just mapping to the existing API surface).</span></span> <span data-ttu-id="d4c98-221">L'esecuzione di questo controllo è particolarmente importante se si usa [D3D11On12](/windows/desktop/direct3d12/direct3d-11-on-12)).</span><span class="sxs-lookup"><span data-stu-id="d4c98-221">Performing this check is particularly important if you're using [D3D11On12](/windows/desktop/direct3d12/direct3d-11-on-12)).</span></span>

<span data-ttu-id="d4c98-222">Per una descrizione dei tre livelli di supporto, vedere l'enumerazione [**D3D12_RENDER_PASS_TIER**](/windows/win32/api/d3d12/ne-d3d12-d3d12_render_pass_tier) .</span><span class="sxs-lookup"><span data-stu-id="d4c98-222">For a description of the three tiers of support, see the [**D3D12_RENDER_PASS_TIER**](/windows/win32/api/d3d12/ne-d3d12-d3d12_render_pass_tier) enumeration.</span></span>
