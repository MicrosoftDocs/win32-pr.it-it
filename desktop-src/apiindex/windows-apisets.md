---
description: I set di API sono gruppi funzionali di API Win32 nel sistema operativo di base. Forniscono una separazione architettonica dalla DLL host in cui è definita una determinata API Win32 e dal gruppo funzionale a cui appartiene l'API.
title: Set di API Windows
ms.topic: article
ms.date: 10/14/2020
ms.openlocfilehash: 15c8e6ad8124abf06e6ab3c2a8ca2bcd83772855
ms.sourcegitcommit: db89157e3be911fdce2e543e99faa31fb2403bc8
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 11/18/2020
ms.locfileid: "104474723"
---
# <a name="windows-api-sets"></a><span data-ttu-id="9397d-104">Set di API Windows</span><span class="sxs-lookup"><span data-stu-id="9397d-104">Windows API sets</span></span>

<span data-ttu-id="9397d-105">Tutte le versioni di Windows 10 condividono una base comune di componenti del sistema operativo denominati *sistema operativo* di base (in alcuni contesti questa base comune è chiamata anche *OneCore*).</span><span class="sxs-lookup"><span data-stu-id="9397d-105">All versions of Windows 10 share a common base of OS components that is called the *core OS* (in some contexts this common base is also called *OneCore*).</span></span> <span data-ttu-id="9397d-106">Nei componenti del sistema operativo di base, le API Win32 sono organizzate in gruppi funzionali denominati *set di API*.</span><span class="sxs-lookup"><span data-stu-id="9397d-106">In core OS components, Win32 APIs are organized into functional groups called *API sets*.</span></span>

<span data-ttu-id="9397d-107">Lo scopo di un set di API è fornire una separazione architettonica dalla DLL host in cui è implementata un'API Win32 specifica e dal contratto funzionale a cui appartiene l'API.</span><span class="sxs-lookup"><span data-stu-id="9397d-107">The purpose of an API set is to provide an architectural separation from the host DLL in which a given Win32 API is implemented and the functional contract to which the API belongs.</span></span> <span data-ttu-id="9397d-108">Il disaccoppiamento che i set di API forniscono tra implementazione e contratti offre molti vantaggi tecnici per gli sviluppatori.</span><span class="sxs-lookup"><span data-stu-id="9397d-108">The decoupling that API sets provide between implementation and contracts offers many engineering advantages for developers.</span></span> <span data-ttu-id="9397d-109">In particolare, l'uso di set di API nel codice può migliorare la compatibilità con tutti i dispositivi Windows 10.</span><span class="sxs-lookup"><span data-stu-id="9397d-109">In particular, using API sets in your code can improve compatibility with all Windows 10 devices.</span></span>

<span data-ttu-id="9397d-110">I set di API risolvono specificamente gli scenari seguenti:</span><span class="sxs-lookup"><span data-stu-id="9397d-110">API sets specifically address the following scenarios:</span></span>

- <span data-ttu-id="9397d-111">Sebbene la vasta gamma di API Win32 sia supportata nei PC, solo un subset dell'API Win32 è disponibile in altri dispositivi Windows 10, ad esempio HoloLens, Xbox e altri dispositivi che eseguono Windows 10.</span><span class="sxs-lookup"><span data-stu-id="9397d-111">Although the full breadth of the Win32 API is supported on PCs, only a subset of the Win32 API is available on other Windows 10 devices such as HoloLens, Xbox, and other devices running Windows 10x.</span></span> <span data-ttu-id="9397d-112">Il nome del set di API fornisce un meccanismo di query per rilevare in modo corretto se un'API è disponibile in un determinato dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9397d-112">The API set name provides a query mechanism to cleanly detect whether an API is available on any given device.</span></span>

- <span data-ttu-id="9397d-113">Alcune implementazioni di API Win32 sono presenti in dll con nomi diversi in diversi dispositivi Windows 10.</span><span class="sxs-lookup"><span data-stu-id="9397d-113">Some Win32 API implementations exist in DLLs with different names across different Windows 10 devices.</span></span> <span data-ttu-id="9397d-114">L'uso di nomi di set di API invece dei nomi di DLL quando si rileva la disponibilità delle API e le API per il caricamento ritardato forniscono una route corretta all'implementazione indipendentemente da dove è effettivamente implementata l'API.</span><span class="sxs-lookup"><span data-stu-id="9397d-114">Using API set names instead of DLL names when detecting API availability and delay loading APIs provide a correct route to the implementation no matter where the API is actually implemented.</span></span>

<span data-ttu-id="9397d-115">Per altri dettagli, vedere [operazione del caricatore del set di API](api-set-loader-operation.md) e [rilevare la disponibilità dei set di API](detect-api-set-availability.md).</span><span class="sxs-lookup"><span data-stu-id="9397d-115">For more details, see [API set loader operation](api-set-loader-operation.md) and [Detect API set availability](detect-api-set-availability.md).</span></span>

## <a name="linking-to-umbrella-libraries"></a><span data-ttu-id="9397d-116">Collegamento a librerie Umbrella</span><span class="sxs-lookup"><span data-stu-id="9397d-116">Linking to umbrella libraries</span></span>

<span data-ttu-id="9397d-117">Per semplificare la limitazione del codice alle API Win32 supportate nel sistema operativo di base, viene fornita una serie di *librerie Umbrella*.</span><span class="sxs-lookup"><span data-stu-id="9397d-117">To make it easier to restrict your code to Win32 APIs that are supported in the core OS, we provide a series of *umbrella libraries*.</span></span> <span data-ttu-id="9397d-118">Ad esempio, una libreria Umbrella denominata OneCore. lib fornisce le esportazioni per il subset di API Win32 comuni a tutti i dispositivi Windows 10.</span><span class="sxs-lookup"><span data-stu-id="9397d-118">For example, an umbrella library named OneCore.lib provides the exports for the subset of Win32 APIs that are common to all Windows 10 devices.</span></span>

<span data-ttu-id="9397d-119">Le API in una libreria Umbrella possono essere implementate in un'ampia gamma di moduli.</span><span class="sxs-lookup"><span data-stu-id="9397d-119">The APIs in an umbrella library may be implemented across a range of modules.</span></span> <span data-ttu-id="9397d-120">La libreria Umbrella estrae questi dettagli, rendendo il codice più portabile tra le versioni e i dispositivi di Windows 10.</span><span class="sxs-lookup"><span data-stu-id="9397d-120">The umbrella library abstracts those details away from you, making your code more portable across Windows 10 versions and devices.</span></span> <span data-ttu-id="9397d-121">Anziché collegarsi a librerie come Kernel32. lib e Advapi32. lib, è sufficiente collegare l'app desktop o il driver alla libreria Umbrella che contiene il set di API del sistema operativo di base a cui si è interessati.</span><span class="sxs-lookup"><span data-stu-id="9397d-121">Instead of linking to libraries such as kernel32.lib and advapi32.lib, simply link your desktop app or driver with the umbrella library that contains the set of core OS APIs that you're interested in.</span></span>

<span data-ttu-id="9397d-122">Per ulteriori informazioni, vedere [Windows Umbrella Libraries](windows-umbrella-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="9397d-122">For more details, see [Windows umbrella libraries](windows-umbrella-libraries.md).</span></span>

## <a name="api-set-contract-names"></a><span data-ttu-id="9397d-123">Nomi di contratto di set di API</span><span class="sxs-lookup"><span data-stu-id="9397d-123">API set contract names</span></span>

<span data-ttu-id="9397d-124">I set di API sono identificati da un nome di contratto sicuro che segue le convenzioni standard riconosciute dal caricatore della libreria.</span><span class="sxs-lookup"><span data-stu-id="9397d-124">API sets are identified by a strong contract name that follows these standard conventions recognized by the library loader.</span></span> 

- <span data-ttu-id="9397d-125">Il nome deve iniziare con l' **API** stringa o **ext-**.</span><span class="sxs-lookup"><span data-stu-id="9397d-125">The name must begin either with the string **api-** or **ext-**.</span></span> 
    - <span data-ttu-id="9397d-126">I nomi che iniziano con **API** rappresentano le API che possono esistere in tutte le versioni di Windows 10.</span><span class="sxs-lookup"><span data-stu-id="9397d-126">Names that begin with **api-** represent APIs that are guaranteed to exist on all Windows 10 versions.</span></span>
    - <span data-ttu-id="9397d-127">I nomi che iniziano con **ext** rappresentano le API che potrebbero non esistere in tutte le versioni di Windows 10.</span><span class="sxs-lookup"><span data-stu-id="9397d-127">Names that begin with **ext-** represent APIs that may not exist on all Windows 10 versions.</span></span>
- <span data-ttu-id="9397d-128">Il nome deve terminare con la sequenza **l \<n\> - \<n\> - \<n\>**, dove **n** è costituito da cifre decimali.</span><span class="sxs-lookup"><span data-stu-id="9397d-128">The name must end with the sequence **l\<n\>-\<n\>-\<n\>**, where **n** consists of decimal digits.</span></span>
- <span data-ttu-id="9397d-129">Il corpo del nome può essere costituito da caratteri alfanumerici o trattini ( **-** ).</span><span class="sxs-lookup"><span data-stu-id="9397d-129">The body of the name can be alphanumeric characters, or dashes (**-**).</span></span>
- <span data-ttu-id="9397d-130">Per il nome non viene fatta distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="9397d-130">The name is case insensitive.</span></span>

<span data-ttu-id="9397d-131">Di seguito sono riportati alcuni esempi di nomi di contratto di set di API:</span><span class="sxs-lookup"><span data-stu-id="9397d-131">Here are some examples of API set contract names:</span></span>

- <span data-ttu-id="9397d-132">**API-MS-Win-Core-UMS-L1-1-0**</span><span class="sxs-lookup"><span data-stu-id="9397d-132">**api-ms-win-core-ums-l1-1-0**</span></span>
- <span data-ttu-id="9397d-133">**EXT-MS-Win-com-Ole32-L1-1-5**</span><span class="sxs-lookup"><span data-stu-id="9397d-133">**ext-ms-win-com-ole32-l1-1-5**</span></span>
- <span data-ttu-id="9397d-134">**EXT-MS-Win-Ntuser-Window-L1-1-0**</span><span class="sxs-lookup"><span data-stu-id="9397d-134">**ext-ms-win-ntuser-window-l1-1-0**</span></span>
- <span data-ttu-id="9397d-135">**EXT-MS-Win-Ntuser-Window-L1-1-1**</span><span class="sxs-lookup"><span data-stu-id="9397d-135">**ext-ms-win-ntuser-window-l1-1-1**</span></span>

<span data-ttu-id="9397d-136">È possibile usare un nome di set di API nel contesto di un'operazione del caricatore, ad esempio [LoadLibrary](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) o [P/Invoke](/dotnet/standard/native-interop/pinvoke) anziché un nome di modulo dll, per garantire una route corretta all'implementazione indipendentemente dal punto in cui l'API è effettivamente implementata nel dispositivo corrente.</span><span class="sxs-lookup"><span data-stu-id="9397d-136">You can use an API set name in the context of a loader operation such as [LoadLibrary](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) or [P/Invoke](/dotnet/standard/native-interop/pinvoke) instead of a DLL module name to ensure a correct route to the implementation no matter where the API is actually implemented on the current device.</span></span> <span data-ttu-id="9397d-137">Tuttavia, quando si esegue questa operazione, è necessario aggiungere la stringa **. dll** alla fine del nome del contratto.</span><span class="sxs-lookup"><span data-stu-id="9397d-137">However, when you do this you must append the string **.dll** at the end of the contract name.</span></span> <span data-ttu-id="9397d-138">Si tratta di un requisito per il corretto funzionamento del caricatore, che non viene considerato effettivamente una parte del nome del contratto.</span><span class="sxs-lookup"><span data-stu-id="9397d-138">This is a requirement of the loader to function properly, and is not considered actually a part of the contract name.</span></span> <span data-ttu-id="9397d-139">Sebbene i nomi di contratto risultino simili ai nomi di DLL in questo contesto, sono fondamentalmente diversi dai nomi dei moduli DLL e non fanno direttamente riferimento a un file su disco.</span><span class="sxs-lookup"><span data-stu-id="9397d-139">Although contract names appear similar to DLL names in this context, they are fundamentally different from DLL module names and do not directly refer to a file on disk.</span></span>

<span data-ttu-id="9397d-140">Ad eccezione dell'accodamento di String **. dll** nelle operazioni del caricatore, i nomi dei contratti di set di API devono essere considerati un identificatore non modificabile corrispondente a una versione del contratto specifica.</span><span class="sxs-lookup"><span data-stu-id="9397d-140">Except for appending the string **.dll** in loader operations, API set contract names should be considered an immutable identifier that corresponds to a specific contract version.</span></span>

## <a name="identifying-api-sets-for-win32-apis"></a><span data-ttu-id="9397d-141">Identificazione dei set di API per le API Win32</span><span class="sxs-lookup"><span data-stu-id="9397d-141">Identifying API sets for Win32 APIs</span></span>

<span data-ttu-id="9397d-142">Per determinare se una particolare API Win32 appartiene a un set di API, esaminare la tabella dei requisiti nella documentazione di riferimento per l'API.</span><span class="sxs-lookup"><span data-stu-id="9397d-142">To identify whether a particular Win32 API belongs to an API set, review the requirements table in the reference documentation for the API.</span></span> <span data-ttu-id="9397d-143">Se l'API appartiene a un set di API, nella tabella dei requisiti dell'articolo sono elencati il nome del set di API e la versione di Windows in cui l'API è stata introdotta per la prima volta nel set di API.</span><span class="sxs-lookup"><span data-stu-id="9397d-143">If the API belongs to an API set, the requirements table in the article lists the API set name and the Windows version in which the API was first introduced to the API set.</span></span> <span data-ttu-id="9397d-144">Per esempi di API che appartengono a un set di API, vedere questi articoli:</span><span class="sxs-lookup"><span data-stu-id="9397d-144">For examples of APIs that belong to an API set, see these articles:</span></span>

- [<span data-ttu-id="9397d-145">AllowSetForegroundWindow</span><span class="sxs-lookup"><span data-stu-id="9397d-145">AllowSetForegroundWindow</span></span>](/windows/win32/api/winuser/nf-winuser-allowsetforegroundwindow)
- [<span data-ttu-id="9397d-146">FindWindowsEx</span><span class="sxs-lookup"><span data-stu-id="9397d-146">FindWindowsEx</span></span>](/windows/win32/api/winuser/nf-winuser-findwindowexa)
- [<span data-ttu-id="9397d-147">GetClassFile</span><span class="sxs-lookup"><span data-stu-id="9397d-147">GetClassFile</span></span>](/windows/win32/api/objbase/nf-objbase-getclassfile)

## <a name="in-this-section"></a><span data-ttu-id="9397d-148">Contenuto della sezione</span><span class="sxs-lookup"><span data-stu-id="9397d-148">In this section</span></span>

* [<span data-ttu-id="9397d-149">Funzionamento del caricatore dei set di API</span><span class="sxs-lookup"><span data-stu-id="9397d-149">API set loader operation</span></span>](api-set-loader-operation.md)
* [<span data-ttu-id="9397d-150">Rilevare la disponibilità di un set di API</span><span class="sxs-lookup"><span data-stu-id="9397d-150">Detect API set availability</span></span>](detect-api-set-availability.md)
* [<span data-ttu-id="9397d-151">Librerie generiche di Windows</span><span class="sxs-lookup"><span data-stu-id="9397d-151">Windows umbrella libraries</span></span>](windows-umbrella-libraries.md)