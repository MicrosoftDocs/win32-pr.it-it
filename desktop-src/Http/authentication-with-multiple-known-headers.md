---
title: Autenticazione con più intestazioni note
description: La \_ struttura delle \_ intestazioni note multiple http consente alle \_ applicazioni server di inviare più richieste di autenticazione al client.
ms.assetid: d517fd61-9547-4e1c-b0fd-1eb3d0098db2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b8afbce3c2a41ea143003723acebc7eb83dc463d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "106298193"
---
# <a name="authentication-with-multiple-known-headers"></a><span data-ttu-id="461aa-103">Autenticazione con più intestazioni note</span><span class="sxs-lookup"><span data-stu-id="461aa-103">Authentication with Multiple Known Headers</span></span>

<span data-ttu-id="461aa-104">La struttura delle [**\_ \_ \_ intestazioni note multiple http**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) consente alle applicazioni server di inviare più richieste di autenticazione al client.</span><span class="sxs-lookup"><span data-stu-id="461aa-104">The [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) structure enables server applications to send multiple authentication challenges to the client.</span></span> <span data-ttu-id="461aa-105">Le applicazioni possono richiedere al client un unico schema di autenticazione specificando il tipo di enumerazione **HttpHeaderWwwAuthenticate** nel membro **KnownHeaders** della struttura [**delle \_ \_ intestazioni di risposta http**](/windows/desktop/api/Http/ns-http-http_response_headers) contenuto [**nella \_ risposta http**](http-response.md).</span><span class="sxs-lookup"><span data-stu-id="461aa-105">Applications can challenge the client with a single authentication scheme by supplying the **HttpHeaderWwwAuthenticate** enumeration type in the **KnownHeaders** member of the [**HTTP\_RESPONSE\_HEADERS**](/windows/desktop/api/Http/ns-http-http_response_headers) structure contained in [**HTTP\_RESPONSE**](http-response.md).</span></span> <span data-ttu-id="461aa-106">Tuttavia, quando il server si verifica con più schemi di autenticazione, l'applicazione usa la struttura di [**\_ \_ \_ intestazioni note multiple http**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) per fornire i tipi di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="461aa-106">However, when the server challenges with multiple authentication schemes, the application uses the [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) structure to provide the authentication types.</span></span>

<span data-ttu-id="461aa-107">Quando il flag dell' **ordine di conservazione dei flag delle \_ informazioni di risposta \_ \_ \_ \_ http** è presente, http Invia le intestazioni di autenticazione nell'ordine specificato.</span><span class="sxs-lookup"><span data-stu-id="461aa-107">When the **HTTP\_RESPONSE\_INFO\_FLAGS\_PRESERVE\_ORDER** flag is present, HTTP sends the authentication headers in the specified order.</span></span> <span data-ttu-id="461aa-108">Se il flag non è presente, HTTP Ordina gli schemi di autenticazione dal più forte al più vulnerabile come segue:</span><span class="sxs-lookup"><span data-stu-id="461aa-108">If the flag is not present, HTTP orders the authentication schemes from strongest to weakest as follows:</span></span>

1.  <span data-ttu-id="461aa-109">Negotiate</span><span class="sxs-lookup"><span data-stu-id="461aa-109">Negotiate</span></span>
2.  <span data-ttu-id="461aa-110">NTLM</span><span class="sxs-lookup"><span data-stu-id="461aa-110">NTLM</span></span>
3.  <span data-ttu-id="461aa-111">Digest</span><span class="sxs-lookup"><span data-stu-id="461aa-111">Digest</span></span>
4.  <span data-ttu-id="461aa-112">Basic</span><span class="sxs-lookup"><span data-stu-id="461aa-112">Basic</span></span>

<span data-ttu-id="461aa-113">Se lo schema di autenticazione non è uno di questi schemi, l'applicazione deve specificare il flag di **ordine di conservazione dei flag delle \_ informazioni di risposta \_ \_ \_ \_ http** .</span><span class="sxs-lookup"><span data-stu-id="461aa-113">If the authentication scheme is not one of these schemes, the application must specify the **HTTP\_RESPONSE\_INFO\_FLAGS\_PRESERVE\_ORDER** flag.</span></span>

<span data-ttu-id="461aa-114">Il membro **KnownHeader** di [**\_ più \_ \_ intestazioni note http**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) punta a una matrice di strutture di [**\_ \_ intestazione note http**](/windows/desktop/api/Http/ns-http-http_known_header) .</span><span class="sxs-lookup"><span data-stu-id="461aa-114">The **KnownHeader** member of [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) points to an array of [**HTTP\_KNOWN\_HEADER**](/windows/desktop/api/Http/ns-http-http_known_header) structures.</span></span> <span data-ttu-id="461aa-115">Il membro **pRawValue** della struttura **di \_ \_ intestazione nota http** deve puntare a una stringa che specifica il nome dello schema.</span><span class="sxs-lookup"><span data-stu-id="461aa-115">The **pRawValue** member of the **HTTP\_KNOWN\_HEADER** structure must point to a string that specifies the scheme name.</span></span> <span data-ttu-id="461aa-116">HTTP analizza la stringa per determinare lo schema ed esegue una delle azioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="461aa-116">HTTP parses the string to determine the scheme and performs one of the following actions:</span></span>

-   <span data-ttu-id="461aa-117">Se la stringa contiene un tipo di autenticazione sconosciuto o se il tipo di autenticazione non è abilitato nel gruppo di configurazione (il gruppo di URL o la sessione del server) associato alla richiesta, l'API del server HTTP aggiunge la stringa in **pRawValue** all'intestazione WWW-Authenticate.</span><span class="sxs-lookup"><span data-stu-id="461aa-117">If the string contains an unknown authentication type, or if the authentication type is not enabled on the configuration group (either the URL group or server session) associated with the request, the HTTP Server API appends the string in **pRawValue** to the WWW-Authenticate header.</span></span> <span data-ttu-id="461aa-118">Se, ad esempio, l'applicazione specifica uno schema di autenticazione non supportato e **pRawValue** contiene la stringa "CustomAuthString", all'intestazione di autenticazione viene aggiunto il testo seguente:</span><span class="sxs-lookup"><span data-stu-id="461aa-118">For example, if the application specifies an unsupported authentication scheme, and **pRawValue** contains the string "CustomAuthString", the following text is appended to the authentication header:</span></span>

    <span data-ttu-id="461aa-119">WWW-autenticazione: CustomAuthSchemeCRLF</span><span class="sxs-lookup"><span data-stu-id="461aa-119">WWW-Authenticate: CustomAuthSchemeCRLF</span></span>

    <span data-ttu-id="461aa-120">Se per l'applicazione non è abilitata l'autenticazione di base e **pRawValue** contiene la stringa "Basic realm =" BasicRealm "", l'intestazione Authentication contiene il testo seguente:</span><span class="sxs-lookup"><span data-stu-id="461aa-120">If the application does not have Basic authentication enabled, and **pRawValue** contains the string "Basic realm="BasicRealm"", the authentication header contains the following text:</span></span>

    <span data-ttu-id="461aa-121">WWW-Authenticate: autenticazione di base = "BasicRealm"</span><span class="sxs-lookup"><span data-stu-id="461aa-121">WWW-Authenticate: Basic realm="BasicRealm"</span></span>

-   <span data-ttu-id="461aa-122">Se la stringa contiene un tipo di autenticazione noto ed è presente nel gruppo di configurazione (il gruppo di URL o la sessione del server) associata alla richiesta, l'API del server HTTP genera l'intestazione del WWW-Authenticate.</span><span class="sxs-lookup"><span data-stu-id="461aa-122">If the string contains a known authentication type and is present on the configuration group (either the URL group or the server session) associated with the request, the HTTP Server API generates the WWW-Authenticate header.</span></span> <span data-ttu-id="461aa-123">Se, ad esempio, la stringa specificata in **pRawValue** è "digest" e digest è abilitato nella sessione del server, l'API del server http aggiunge il testo seguente all'intestazione di autenticazione:</span><span class="sxs-lookup"><span data-stu-id="461aa-123">For example if the string specified in **pRawValue** is "Digest", and Digest is enabled on the server session, the HTTP Server API appends the following text to the authentication header:</span></span>

    <span data-ttu-id="461aa-124">WWW-Authenticate: Realm digest = " testrealm@host.com "</span><span class="sxs-lookup"><span data-stu-id="461aa-124">WWW-Authenticate: Digest realm="testrealm@host.com"</span></span>

<span data-ttu-id="461aa-125">Se lo schema nel membro **pRawValue** dell' [**\_ \_ intestazione nota http**](/windows/desktop/api/Http/ns-http-http_known_header) è Negotiate o NTLM, il nome dello schema di autenticazione è sufficiente.</span><span class="sxs-lookup"><span data-stu-id="461aa-125">If the scheme in the **pRawValue** member of [**HTTP\_KNOWN\_HEADER**](/windows/desktop/api/Http/ns-http-http_known_header) is Negotiate or NTLM, the authentication scheme name is sufficient.</span></span> <span data-ttu-id="461aa-126">Se lo schema specificato è di base, il nome dell'area di autenticazione viene aggiunto al nome dello schema; non è necessario che l'applicazione fornisca il nome dell'area di autenticazione in **pRawValue**.</span><span class="sxs-lookup"><span data-stu-id="461aa-126">If the specified scheme is Basic, the realm name is appended to the scheme name; the application doesn't need to supply the realm name in **pRawValue**.</span></span> <span data-ttu-id="461aa-127">Se lo schema specificato è digest, HTTP chiama [**AcceptSecurityContext**](../SecAuthN/acceptsecuritycontext--general.md) per generare la richiesta di verifica aggiunta al nome dello schema.</span><span class="sxs-lookup"><span data-stu-id="461aa-127">If the specified scheme is Digest, HTTP calls [**AcceptSecurityContext**](../SecAuthN/acceptsecuritycontext--general.md) to generate the challenge that is appended to the scheme name.</span></span> <span data-ttu-id="461aa-128">I parametri per lo schema di base (area di autenticazione) e digest (area di autenticazione e nome di dominio) vengono ottenuti dalle informazioni di autenticazione del gruppo di configurazione corrispondente.</span><span class="sxs-lookup"><span data-stu-id="461aa-128">The parameters for Basic (realm) and Digest (realm and domain name) scheme are obtained from the corresponding configuration group authentication information.</span></span>

<span data-ttu-id="461aa-129">Quando l'applicazione invia più richieste di autenticazione al client in intestazioni di richiesta sconosciute, l'API server HTTP le invia al client senza intervento.</span><span class="sxs-lookup"><span data-stu-id="461aa-129">When the application sends multiple authentication challenges to the client in Unknown request headers, the HTTP Server API sends these to the client without intervention.</span></span> <span data-ttu-id="461aa-130">Questo utilizzo non è tuttavia consigliato.</span><span class="sxs-lookup"><span data-stu-id="461aa-130">However this usage is not recommended.</span></span>

 

 




