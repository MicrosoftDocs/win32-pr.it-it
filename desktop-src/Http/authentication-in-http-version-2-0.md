---
title: Autenticazione (API del server HTTP)
description: A partire dalla versione 2,0, l'API del server HTTP esegue l'autenticazione lato server per l'applicazione.
ms.assetid: e8e41e8e-1b10-4747-b18e-763e0752ade4
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 16d523df90861c83a45f67811edad243ceee5165
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/10/2020
ms.locfileid: "104400116"
---
# <a name="authentication-http-server-api"></a><span data-ttu-id="140fc-103">Autenticazione (API del server HTTP)</span><span class="sxs-lookup"><span data-stu-id="140fc-103">Authentication (HTTP Server API)</span></span>

<span data-ttu-id="140fc-104">Alcune applicazioni server richiedono l'autenticazione client per accedere alle risorse e alle richieste HTTP del servizio.</span><span class="sxs-lookup"><span data-stu-id="140fc-104">Some server applications require client authentication to access resources and service HTTP requests.</span></span> <span data-ttu-id="140fc-105">A partire dalla versione 2,0, l'API del server HTTP esegue l'autenticazione lato server per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="140fc-105">Starting with version 2.0, the HTTP Server API performs server side authentication for the application.</span></span> <span data-ttu-id="140fc-106">Nell'API del server HTTP versione 1,0, l'applicazione server doveva implementare una propria autenticazione.</span><span class="sxs-lookup"><span data-stu-id="140fc-106">In the HTTP Server API version 1.0, the server application had to implement its own authentication.</span></span> <span data-ttu-id="140fc-107">Di seguito sono riportati alcuni vantaggi dell'autenticazione eseguita dall'API del server HTTP:</span><span class="sxs-lookup"><span data-stu-id="140fc-107">Some advantages of authentication performed by the HTTP Server API include:</span></span>

-   <span data-ttu-id="140fc-108">Le applicazioni possono essere eseguite con privilegi limitati, riducendo così i rischi per la sicurezza.</span><span class="sxs-lookup"><span data-stu-id="140fc-108">Applications can run under low privileges, thus reducing security risks.</span></span>
-   <span data-ttu-id="140fc-109">L'autenticazione viene eseguita in modalità kernel, riducendo così le transizioni dalla modalità utente alla modalità kernel durante l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="140fc-109">Authentication is performed in kernel mode, thus reducing transitions from user mode to kernel mode during authentication.</span></span>
-   <span data-ttu-id="140fc-110">L'autenticazione eseguita in modalità kernel consente l'esecuzione delle applicazioni server su account utente diversi.</span><span class="sxs-lookup"><span data-stu-id="140fc-110">Authentication performed in kernel mode allows server applications to run on different user accounts.</span></span> <span data-ttu-id="140fc-111">Nella versione 1,0, tutte le applicazioni nel computer devono essere eseguite con lo stesso account utente per l'autenticazione in base al nome SPN (Service Principal Name).</span><span class="sxs-lookup"><span data-stu-id="140fc-111">In version 1.0, all applications on the machine must run under the same user account to authenticate on the Service Principle Name (SPN).</span></span>
-   <span data-ttu-id="140fc-112">L'handshake di autenticazione NTLM non viene reimpostato se un processo di lavoro viene riciclato durante il processo di handshake.</span><span class="sxs-lookup"><span data-stu-id="140fc-112">The NTLM authentication handshake is not reset if a worker process is recycled while the handshake is in process.</span></span>

<span data-ttu-id="140fc-113">Per sfruttare i vantaggi dell'autenticazione della versione 2,0, l'applicazione Abilita gli schemi di autenticazione che l'API del server HTTP applica agli URL per i quali l'applicazione è stata registrata.</span><span class="sxs-lookup"><span data-stu-id="140fc-113">To take advantage of the version 2.0 authentication, the application enables the authentication schemes that the HTTP Server API applies to the URLs for which the application has registered.</span></span> <span data-ttu-id="140fc-114">È possibile abilitare l'autenticazione per la sessione del server o il gruppo di URL.</span><span class="sxs-lookup"><span data-stu-id="140fc-114">Authentication can be enabled on the server session or URL group.</span></span> <span data-ttu-id="140fc-115">Il gruppo URL eredita gli schemi di autenticazione abilitati dalla sessione del server se non è impostato alcun valore per il gruppo di URL.</span><span class="sxs-lookup"><span data-stu-id="140fc-115">The URL group inherits the authentication schemes enabled by the server session if none are set on the URL group.</span></span> <span data-ttu-id="140fc-116">L'API server HTTP supporta gli schemi seguenti:</span><span class="sxs-lookup"><span data-stu-id="140fc-116">The HTTP Server API supports the following schemes:</span></span>

-   <span data-ttu-id="140fc-117">Negotiate</span><span class="sxs-lookup"><span data-stu-id="140fc-117">Negotiate</span></span>
-   <span data-ttu-id="140fc-118">NTLM</span><span class="sxs-lookup"><span data-stu-id="140fc-118">NTLM</span></span>
-   <span data-ttu-id="140fc-119">Digest</span><span class="sxs-lookup"><span data-stu-id="140fc-119">Digest</span></span>
-   <span data-ttu-id="140fc-120">Basic</span><span class="sxs-lookup"><span data-stu-id="140fc-120">Basic</span></span>

<span data-ttu-id="140fc-121">L'applicazione server può inoltre implementare schemi di autenticazione non supportati dall'API del server HTTP.</span><span class="sxs-lookup"><span data-stu-id="140fc-121">The server application can also implement authentication schemes not supported by the HTTP Server API.</span></span> <span data-ttu-id="140fc-122">L'API server HTTP invia le richieste all'applicazione per gli schemi di autenticazione non supportati o per gli schemi che non sono stati abilitati dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="140fc-122">The HTTP Server API sends requests to the application for authentication schemes that are not supported, or for schemes that have not been enabled by the application.</span></span>

### <a name="enabling-authentication"></a><span data-ttu-id="140fc-123">Abilitazione dell'autenticazione</span><span class="sxs-lookup"><span data-stu-id="140fc-123">Enabling Authentication</span></span>

<span data-ttu-id="140fc-124">L'applicazione server consente di abilitare e configurare l'autenticazione per la sessione del server o il gruppo di URL con le funzioni [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) o [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty) come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="140fc-124">The server application enables and configures authentication on the server session or URL group with the [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty) functions as follows:</span></span>

1.  <span data-ttu-id="140fc-125">L'applicazione Abilita l'autenticazione specificando **HttpServerAuthenticationProperty** nel parametro *Property* di [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) o [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span><span class="sxs-lookup"><span data-stu-id="140fc-125">The application enables authentication by specifying **HttpServerAuthenticationProperty** in the *Property* parameter of [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span></span>
2.  <span data-ttu-id="140fc-126">L'applicazione specifica i parametri di configurazione nella struttura di [**informazioni di \_ autenticazione del server \_ \_ http**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) nel parametro *pPropertyInformation* di [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) o [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span><span class="sxs-lookup"><span data-stu-id="140fc-126">The application specifies the configuration parameters in the [**HTTP\_SERVER\_AUTHENTICATION\_INFO**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) structure in the *pPropertyInformation* parameter of [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span></span> <span data-ttu-id="140fc-127">L'applicazione specifica gli schemi di autenticazione abilitati, se la memorizzazione nella cache delle credenziali NTLM è disabilitata e fornisce i parametri di base e digest nella struttura delle **\_ informazioni di \_ autenticazione \_ del server http** .</span><span class="sxs-lookup"><span data-stu-id="140fc-127">The application specifies the authentication schemes enabled, whether NTLM credential caching is disabled, and supplies the Basic and Digest parameters in the **HTTP\_SERVER\_AUTHENTICATION\_INFO** structure.</span></span>

### <a name="authentication-procedure"></a><span data-ttu-id="140fc-128">Procedura di autenticazione</span><span class="sxs-lookup"><span data-stu-id="140fc-128">Authentication Procedure</span></span>

<span data-ttu-id="140fc-129">Per avviare l'autenticazione del server HTTP, l'applicazione Abilita la proprietà di autenticazione prima che la prima richiesta arrivi nella coda di richieste.</span><span class="sxs-lookup"><span data-stu-id="140fc-129">To initiate HTTP Server authentication, the application enables the authentication property before the first request arrives on the request queue.</span></span> <span data-ttu-id="140fc-130">I passaggi seguenti sono il flusso di elaborazione comune per l'autenticazione di una richiesta.</span><span class="sxs-lookup"><span data-stu-id="140fc-130">The following steps are the common processing flow for authenticating a request.</span></span>

1.  <span data-ttu-id="140fc-131">L'applicazione Abilita l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="140fc-131">The application enables authentication.</span></span> <span data-ttu-id="140fc-132">Vedere la sezione precedente "Abilitazione dell'autenticazione".</span><span class="sxs-lookup"><span data-stu-id="140fc-132">See the preceding "Enabling Authentication" section.</span></span>
    > [!Note]  
    > <span data-ttu-id="140fc-133">Il client invia una richiesta non autenticata.</span><span class="sxs-lookup"><span data-stu-id="140fc-133">The client sends an unauthenticated request.</span></span> <span data-ttu-id="140fc-134">L'API server HTTP passa la richiesta all'applicazione server e consente di generare la richiesta iniziale 401.</span><span class="sxs-lookup"><span data-stu-id="140fc-134">The HTTP Server API passes the request to the server application and allows it to generate the initial 401 challenge.</span></span> <span data-ttu-id="140fc-135">L'API server HTTP include la struttura delle [**\_ informazioni di \_ autenticazione \_ della richiesta http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) incorporata con la struttura della [**\_ richiesta http**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="140fc-135">The HTTP Server API includes the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure embedded with the [**HTTP\_REQUEST**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)) structure.</span></span> <span data-ttu-id="140fc-136">Il membro **AuthStatus** indica **HttpAuthStatusNotAuthenticated**</span><span class="sxs-lookup"><span data-stu-id="140fc-136">The **AuthStatus** member indicates **HttpAuthStatusNotAuthenticated**</span></span>

     

2.  <span data-ttu-id="140fc-137">L'applicazione esamina il membro **AuthStatus** della struttura di [**\_ informazioni di \_ autenticazione \_ della richiesta http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) per determinare se la richiesta è stata autenticata.</span><span class="sxs-lookup"><span data-stu-id="140fc-137">The application examines the **AuthStatus** member of the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure to determine if the request has been authenticated.</span></span> <span data-ttu-id="140fc-138">Se la richiesta non è stata autenticata, l'applicazione può servire la richiesta come anonima o inviare una richiesta di autenticazione 401 iniziale.</span><span class="sxs-lookup"><span data-stu-id="140fc-138">If the request has not been authenticated, the application can service the request as anonymous or send an initial 401 authentication challenge.</span></span>
3.  <span data-ttu-id="140fc-139">Se l'applicazione invia la richiesta come anonima, gestisce la richiesta e Invia la risposta finale all'applicazione client, proprio come se l'autenticazione non fosse stata interrotta.</span><span class="sxs-lookup"><span data-stu-id="140fc-139">If the application services the request as anonymous, it handles the request and sends the final response to the client application, just as if the authentication was not involved.</span></span>
4.  <span data-ttu-id="140fc-140">Se invece l'applicazione richiede l'autenticazione, Invia la richiesta iniziale 401 con una o più intestazioni di WWW-Authenticate che indicano gli schemi disponibili per il client.</span><span class="sxs-lookup"><span data-stu-id="140fc-140">If instead the application requires authentication, it sends the initial 401 challenge with one or more WWW-Authenticate headers indicating the available schemes to the client.</span></span> <span data-ttu-id="140fc-141">L'applicazione deve usare la struttura di [**\_ \_ \_ intestazioni note multiple http**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) per compilare il set di intestazioni necessario quando nella risposta viene inviata più di un'intestazione di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="140fc-141">The application should use the [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) structure to build the required set of headers when more than one authentication header is sent in the response.</span></span>
    > [!Note]
    >
    > <span data-ttu-id="140fc-142">Il client invia nuovamente la richiesta con l'intestazione di autorizzazione per uno schema selezionato dal set di schemi disponibili indicato dall'applicazione server nella risposta iniziale 401.</span><span class="sxs-lookup"><span data-stu-id="140fc-142">The client resends the request with the authorization header for a scheme selected from the set of available schemes indicated by the server application in initial 401 response.</span></span>
    >
    > <span data-ttu-id="140fc-143">L'API server HTTP esamina l'intestazione di autorizzazione della richiesta di autorizzazione per determinare se lo schema è abilitato.</span><span class="sxs-lookup"><span data-stu-id="140fc-143">The HTTP Server API examines the authorization request authorization header to determine if the scheme is enabled.</span></span> <span data-ttu-id="140fc-144">In caso contrario, l'API del server HTTP esegue l'autenticazione e gestisce tutti gli scambi di richieste/401-risposte provvisori, fino alla finalizzazione dell'handshake di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="140fc-144">If it is, then the HTTP Server API performs authentication and handles all interim request/401-response exchanges, until the authentication handshake is finalized.</span></span>
    >
    > <span data-ttu-id="140fc-145">Quando l'API del server HTTP completa il tentativo di autenticazione, Invia la richiesta all'applicazione con i risultati del tentativo di autenticazione nella struttura delle [**\_ \_ \_ informazioni**](/windows/desktop/api/Http/ns-http-http_request_auth_info) di autenticazione della richiesta HTTP restituita con la richiesta.</span><span class="sxs-lookup"><span data-stu-id="140fc-145">When The HTTP Server API completes the authentication attempt, it sends the request to the application with the results of the authentication attempt in the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure that is returned with the request.</span></span> <span data-ttu-id="140fc-146">Se il tentativo di autenticazione ha esito negativo per uno dei motivi seguenti, l'API server HTTP non passa la richiesta all'applicazione:</span><span class="sxs-lookup"><span data-stu-id="140fc-146">If the authentication attempt fails for one of the following reasons, the HTTP Server API does not pass the request to the application:</span></span>
    >
    > -   <span data-ttu-id="140fc-147">Se l'handshake di autenticazione ha esito negativo a causa di un errore interno dell'API del server HTTP, ad esempio un errore di allocazione della memoria, l'API del server HTTP genera una risposta 503 (servizio non disponibile) e invia nuovamente al client.</span><span class="sxs-lookup"><span data-stu-id="140fc-147">If the authentication handshake fails due to an internal HTTP Server API error such as a memory allocation failure, the HTTP Server API generates a 503 (service unavailable) response and sends back to client.</span></span>
    > -   <span data-ttu-id="140fc-148">Se è stata rilevata un'intestazione di autorizzazione non valida, ad esempio un'intestazione priva di nome di schema o di una codifica Base64 con formato non valido di credenziali client, l'API del server HTTP genera una risposta 400 (richiesta non valida) e la invia nuovamente al client.</span><span class="sxs-lookup"><span data-stu-id="140fc-148">If a malformed authorization header such as a header without a scheme name, or malformed Base64 encoding of client credentials encountered, the HTTP Server API generates a 400 (bad request) response and sends back to client.</span></span>

     

5.  <span data-ttu-id="140fc-149">L'applicazione server esamina il membro **AuthStatus** della struttura di [**\_ informazioni di \_ autenticazione \_ della richiesta http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) per determinare se l'autenticazione è stata eseguita correttamente.</span><span class="sxs-lookup"><span data-stu-id="140fc-149">The server application examines the **AuthStatus** member of the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure to determine if authentication was successful.</span></span> <span data-ttu-id="140fc-150">Quando l'autenticazione ha esito negativo, l'API del server HTTP include l'errore restituito da [AcceptSecurityContext](/previous-versions/windows/embedded/ms937012(v=msdn.10)) nel membro **SecStatus** della struttura di **informazioni di \_ \_ autenticazione \_ della richiesta http** .</span><span class="sxs-lookup"><span data-stu-id="140fc-150">When authentication fails, the HTTP Server API includes the error returned from [AcceptSecurityContext](/previous-versions/windows/embedded/ms937012(v=msdn.10)) in the **SecStatus** member of the **HTTP\_REQUEST\_AUTH\_INFO** structure.</span></span> <span data-ttu-id="140fc-151">Se il tentativo di autenticazione ha esito negativo a causa di credenziali non valide, l'applicazione può generare un'altra richiesta 401 con l'intestazione WWW-Authenticate desiderata oppure può decidere di servire la richiesta come anonima.</span><span class="sxs-lookup"><span data-stu-id="140fc-151">If the authentication attempt fails due to bad credentials, the application can generate another 401 challenge with the desired WWW-Authenticate header, or may decided to service the request as anonymous.</span></span>
6.  <span data-ttu-id="140fc-152">Se l'autenticazione ha avuto esito positivo, l'applicazione usa il token fornito nella struttura delle [**\_ informazioni di \_ autenticazione \_ della richiesta http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) per rappresentare il client e accedere alle risorse.</span><span class="sxs-lookup"><span data-stu-id="140fc-152">If authentication was successful, the application uses the token provided in the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure to impersonate the client and to access resources.</span></span> <span data-ttu-id="140fc-153">L'handle del token di accesso restituito all'applicazione è valido purché l'ID richiesta sia valido, in genere fino a quando l'applicazione non completa la risposta alla richiesta.</span><span class="sxs-lookup"><span data-stu-id="140fc-153">The access token handle returned to the application is valid as long as the request ID is valid, which is typically until the application completes the response to the request.</span></span> <span data-ttu-id="140fc-154">Il token può tuttavia scadere durante questo periodo e potrebbe essere necessario che l'applicazione invii un'altra richiesta 401 al client.</span><span class="sxs-lookup"><span data-stu-id="140fc-154">The token may, however, expire during this period and the application may need to send another 401 challenge to the client.</span></span>
7.  <span data-ttu-id="140fc-155">L'applicazione invia la risposta finale 200 OK ed è necessario chiudere l'handle per il token di accesso.</span><span class="sxs-lookup"><span data-stu-id="140fc-155">The application sends the final 200 OK response, and it must close the handle to the access token.</span></span>
    > [!Note]  
    > <span data-ttu-id="140fc-156">L'API server HTTP aggiunge i dati di autenticazione reciproca alla risposta finale 200 OK, se ne è stata generata una durante l'handshake di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="140fc-156">The HTTP Server API appends the mutual authentication data to the final 200 OK response, if one was generated during the authentication handshake.</span></span>

     

### <a name="ntlm-null-sessions"></a><span data-ttu-id="140fc-157">Sessioni NULL NTLM</span><span class="sxs-lookup"><span data-stu-id="140fc-157">NTLM NULL Sessions</span></span>

<span data-ttu-id="140fc-158">Si noti che una sessione NTLM NULL indicata nel contesto di sicurezza finale non viene trattata come autenticata.</span><span class="sxs-lookup"><span data-stu-id="140fc-158">Note that an NTLM NULL session indicated in the final security context, is not treated as authenticated.</span></span> <span data-ttu-id="140fc-159">In questo caso, la richiesta viene inviata all'applicazione con un errore HttpAuthStatusFailure nella struttura di [**\_ informazioni di \_ autenticazione \_ della richiesta http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) e l'applicazione può inviare un'altra richiesta di 401.</span><span class="sxs-lookup"><span data-stu-id="140fc-159">In this case, the request is sent to the application with an HttpAuthStatusFailure error in the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure and the application can send another 401 challenge.</span></span>

### <a name="preemptive-authentication"></a><span data-ttu-id="140fc-160">Autenticazione PreEmptive</span><span class="sxs-lookup"><span data-stu-id="140fc-160">Preemptive Authentication</span></span>

<span data-ttu-id="140fc-161">Secondo il protocollo HTTP, dopo che il client ha stabilito l'autenticazione per una risorsa, può inviare preventivamente l'intestazione di autorizzazione corrispondente con le successive richieste consecutive per la risorsa senza attendere una richiesta di 401 dal server.</span><span class="sxs-lookup"><span data-stu-id="140fc-161">According to the HTTP protocol, after the client has established authentication for a resource, it can preemptively send the corresponding authorization header with subsequent consecutive requests for the resource without waiting for a 401 challenge from the server.</span></span> <span data-ttu-id="140fc-162">Se lo schema indicato nell'intestazione dell'autorizzazione è ancora abilitato dall'applicazione e supportato dall'API del server HTTP, il server HTTP tenta l'autenticazione senza inviare la richiesta all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="140fc-162">If the scheme indicated in the Authorization header is still enabled by the application and supported by the HTTP Server API, the HTTP Server attempts authentication without sending the request to the application.</span></span> <span data-ttu-id="140fc-163">Quando l'applicazione riceve questo tipo di richiesta autenticata, può scegliere di rimuovere la richiesta e di rigenerare la richiesta iniziale di 401 o di servizio la richiesta come autenticata.</span><span class="sxs-lookup"><span data-stu-id="140fc-163">When this type of authenticated request is received by the application, it can choose to discard the request and regenerate the initial 401 challenge or service the request as authenticated.</span></span>

### <a name="mutual-authentication"></a><span data-ttu-id="140fc-164">Autenticazione reciproca</span><span class="sxs-lookup"><span data-stu-id="140fc-164">Mutual Authentication</span></span>

<span data-ttu-id="140fc-165">I dati di autenticazione reciproca vengono generati quando lo schema di negoziazione viene utilizzato durante l'handshake e vengono risolti in Kerberos e il client ha richiesto l'autenticazione reciproca.</span><span class="sxs-lookup"><span data-stu-id="140fc-165">Mutual authentication data is generated when the negotiate scheme is used during handshake and it is resolved to Kerberos, and client has asked for mutual authentication.</span></span> <span data-ttu-id="140fc-166">I dati di autenticazione reciproca vengono inseriti automaticamente dall'API del server HTTP nella risposta finale 200 OK inviata dall'applicazione server.</span><span class="sxs-lookup"><span data-stu-id="140fc-166">The mutual authentication data is automatically inserted by HTTP Server API in the final 200 OK response sent by the server application.</span></span> <span data-ttu-id="140fc-167">Per impostazione predefinita, l'API server HTTP non passa i dati di autenticazione reciproca all'applicazione server, perché gestisce automaticamente l'invio.</span><span class="sxs-lookup"><span data-stu-id="140fc-167">By default HTTP Server API does not pass the Mutual authentication data to the server application, since it automatically handles the sending of it.</span></span> <span data-ttu-id="140fc-168">Tuttavia, se l'applicazione server Abilita il flag ReceiveMutualAuth nella struttura delle [**\_ informazioni di \_ autenticazione \_ del server http**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) nella configurazione, i dati di autenticazione reciproca vengono passati all'applicazione nella struttura di informazioni di autenticazione della [**\_ richiesta \_ \_ http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) incorporata con la [**\_ richiesta http**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85))autenticata.</span><span class="sxs-lookup"><span data-stu-id="140fc-168">However, if server application enables the ReceiveMutualAuth flag in the [**HTTP\_SERVER\_AUTHENTICATION\_INFO**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) structure in configuration, the mutual authentication data is passed to the application in [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure embedded with the authenticated [**HTTP\_REQUEST**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)).</span></span> <span data-ttu-id="140fc-169">In questo caso l'applicazione deve inviare i dati di autenticazione reciproca con la risposta finale 200 OK.</span><span class="sxs-lookup"><span data-stu-id="140fc-169">In this case application should send the mutual authentication data with the final 200 OK response.</span></span> <span data-ttu-id="140fc-170">Nel caso in cui più siti vengono serviti da un singolo computer, tutti i siti del computer utilizzano le credenziali per l'account del computer locale nel dominio per l'autenticazione reciproca.</span><span class="sxs-lookup"><span data-stu-id="140fc-170">In the case where multiple sites are served by a single computer, all sites on the computer use the credentials for the Local Machine Account in the domain for mutual authentication.</span></span>

 

 
