---
title: Esempio di timeout HTTP dello scenario 1 uso della traccia ETW e dei comandi netsh
description: Tramite la traccia ETW, il flusso di dati tramite il componente API server HTTP può essere ispezionato per diagnosticare i problemi.
ms.assetid: b6b24161-c3da-4972-b49f-c545da2fc81e
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa50f438aca664651b24db822f2b9e3a30da4682
ms.sourcegitcommit: 37f276b5d887a3aad04b1ba86e390dea9d87e591
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/04/2021
ms.locfileid: "104567058"
---
# <a name="scenario-1-http-timeout-example-using-etw-tracing-and-netsh-commands"></a><span data-ttu-id="9bd71-103">Scenario 1: esempio di timeout HTTP con la traccia ETW e i comandi netsh</span><span class="sxs-lookup"><span data-stu-id="9bd71-103">Scenario 1: HTTP Timeout Example Using ETW Tracing and Netsh Commands</span></span>

<span data-ttu-id="9bd71-104">Tramite la traccia ETW, il flusso di dati tramite il componente API server HTTP può essere ispezionato per diagnosticare i problemi.</span><span class="sxs-lookup"><span data-stu-id="9bd71-104">Through ETW tracing, the flow of data through the HTTP Server API component can be inspected to diagnose problems.</span></span> <span data-ttu-id="9bd71-105">Ad esempio, gli utenti di un'applicazione Web possono visualizzare messaggi di errore nel browser che non possono essere visualizzati in una pagina Web.</span><span class="sxs-lookup"><span data-stu-id="9bd71-105">For example, users of a web application may see error messages in their browser that a web page cannot display.</span></span> <span data-ttu-id="9bd71-106">Sul server che ospita l'applicazione Web, il professionista IT vede anche una voce di timeout della connessione all'interno del log degli errori HTTP, come illustrato nella figura 1 riportata di seguito.</span><span class="sxs-lookup"><span data-stu-id="9bd71-106">On the server hosting the web application, the IT professional also sees a connection timeout entry within the HTTP Error Log, as shown in Figure 1 below.</span></span> <span data-ttu-id="9bd71-107">Il log degli errori HTTP si trova nella directory seguente:% windir% \\ system32 \\ LogFiles \\ HTTPERR \\ .</span><span class="sxs-lookup"><span data-stu-id="9bd71-107">The HTTP Error Log can be found in the following directory: %windir%\\System32\\LogFiles\\HTTPERR\\.</span></span>

![Screenshot che mostra la finestra di comando netsh H T t P che Visualizza il log degli errori di H t T P per il timeout.](images/httperrorlog.png)

<span data-ttu-id="9bd71-109">Figura 1: log degli errori HTTP per il timeout</span><span class="sxs-lookup"><span data-stu-id="9bd71-109">Figure 1: HTTP Error Log for Timeout</span></span>

## <a name="generating-an-etw-trace-report"></a><span data-ttu-id="9bd71-110">Generazione di un report di traccia ETW</span><span class="sxs-lookup"><span data-stu-id="9bd71-110">Generating an ETW Trace Report</span></span>

<span data-ttu-id="9bd71-111">Per generare un report di traccia ETW per il componente API server HTTP, eseguire i passaggi seguenti dal prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="9bd71-111">To generate an ETW trace report for the HTTP Server API component, run the steps below from the command prompt.</span></span> <span data-ttu-id="9bd71-112">In questo esempio, la traccia viene eseguita sul server perché ospita l'applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="9bd71-112">In this example, the trace is run on the server since it is hosting the web application.</span></span>

<span data-ttu-id="9bd71-113">I passaggi seguenti generano una traccia denominata Httptrace. ETL, quindi convertono la traccia in un file CSV denominato httptrace.csv.</span><span class="sxs-lookup"><span data-stu-id="9bd71-113">The steps below generate a trace called httptrace.etl and then convert the trace into a CSV file called httptrace.csv.</span></span> <span data-ttu-id="9bd71-114">Come illustrato di seguito, il provider ETW per l'API del server HTTP è denominato Microsoft-Windows-HttpService.</span><span class="sxs-lookup"><span data-stu-id="9bd71-114">As shown below, the ETW provider for the HTTP Server API is called Microsoft-Windows-HttpService.</span></span> <span data-ttu-id="9bd71-115">L'opzione della riga di comando 0xFFF indica che devono essere acquisiti tutti gli eventi ETW per questo provider.</span><span class="sxs-lookup"><span data-stu-id="9bd71-115">The 0xFFF command-line option indicates that all ETW events for this provider should be captured.</span></span>

<span data-ttu-id="9bd71-116">**Generare un report di traccia ETW**</span><span class="sxs-lookup"><span data-stu-id="9bd71-116">**Generate an ETW Trace Report**</span></span>

1.  <span data-ttu-id="9bd71-117">Avviare la traccia ETW per il componente API server HTTP: l **ogman.exe avviare Httptrace-p Microsoft-Windows-HTTPService 0xFFFF-o Httptrace. etl – ETS**</span><span class="sxs-lookup"><span data-stu-id="9bd71-117">Start ETW trace for HTTP Server API component: l **ogman.exe start httptrace -p Microsoft-Windows-HttpService 0xFFFF -o httptrace.etl –ets**</span></span>
2.  <span data-ttu-id="9bd71-118">Riprodurre il problema in modo che possa essere acquisito nella traccia.</span><span class="sxs-lookup"><span data-stu-id="9bd71-118">Reproduce the issue so that it can be captured in the trace.</span></span> <span data-ttu-id="9bd71-119">In questo esempio, accedere all'applicazione Web da un computer client, con la conseguente visualizzazione del messaggio "**Impossibile visualizzare la pagina**" nel client.</span><span class="sxs-lookup"><span data-stu-id="9bd71-119">In this example, access the web application from a client machine, resulting in the "**page cannot be displayed**" message being shown on the client.</span></span>
3.  <span data-ttu-id="9bd71-120">Ora che il problema è stato riprodotto, arrestare la traccia: **logman.exe stop Httptrace – ETS**</span><span class="sxs-lookup"><span data-stu-id="9bd71-120">Now that the issue has been reproduced, stop the trace: **logman.exe stop httptrace –ets**</span></span>
4.  <span data-ttu-id="9bd71-121">Convertire il report in formato CSV: **tracerpt.exe Httptrace. etl-of CSV-o httptrace.csv**</span><span class="sxs-lookup"><span data-stu-id="9bd71-121">Convert the report into CSV format: **tracerpt.exe httptrace.etl -of CSV -o httptrace.csv**</span></span>
5.  <span data-ttu-id="9bd71-122">Visualizzare il report di traccia.</span><span class="sxs-lookup"><span data-stu-id="9bd71-122">View the trace report.</span></span> <span data-ttu-id="9bd71-123">Di seguito è riportato un Estratto di una traccia CSV nella tabella 1.</span><span class="sxs-lookup"><span data-stu-id="9bd71-123">An excerpt from a CSV trace is shown below in Table 1.</span></span>

## <a name="viewing-the-trace-and-diagnosing"></a><span data-ttu-id="9bd71-124">Visualizzazione della traccia e diagnosi</span><span class="sxs-lookup"><span data-stu-id="9bd71-124">Viewing the Trace and Diagnosing</span></span>

<span data-ttu-id="9bd71-125">Il file CSV risultante per le tracce può essere visualizzato in Excel o in qualsiasi strumento che supporti il formato CSV.</span><span class="sxs-lookup"><span data-stu-id="9bd71-125">The resulting CSV file for traces can be viewed in Excel or any tool that supports the CSV format.</span></span> <span data-ttu-id="9bd71-126">La tabella 1 seguente Mostra gli estratti da un file di traccia di esempio (httptrace.csv).</span><span class="sxs-lookup"><span data-stu-id="9bd71-126">Table 1 below shows excerpts from a sample trace file (httptrace.csv).</span></span> <span data-ttu-id="9bd71-127">Nel report di traccia la colonna "Level" Mostra una voce con un valore "3", che corrisponde a un avviso in ETW.</span><span class="sxs-lookup"><span data-stu-id="9bd71-127">In the trace report, the "Level" column shows an entry with a value of "3", which corresponds to a warning in ETW.</span></span> <span data-ttu-id="9bd71-128">Il componente API server HTTP segue i livelli ETW definiti nell'articolo seguente: ( https://msdn2.microsoft.com/library/aa382793.aspx) .</span><span class="sxs-lookup"><span data-stu-id="9bd71-128">The HTTP Server API component follows the ETW Levels defined in the following article: (https://msdn2.microsoft.com/library/aa382793.aspx).</span></span> <span data-ttu-id="9bd71-129">I livelli ETW includono:</span><span class="sxs-lookup"><span data-stu-id="9bd71-129">The ETW levels include:</span></span>



| <span data-ttu-id="9bd71-130">Level</span><span class="sxs-lookup"><span data-stu-id="9bd71-130">Level</span></span> | <span data-ttu-id="9bd71-131">Significato</span><span class="sxs-lookup"><span data-stu-id="9bd71-131">Meaning</span></span>      |
|-------|--------------|
| <span data-ttu-id="9bd71-132">1</span><span class="sxs-lookup"><span data-stu-id="9bd71-132">1</span></span>     | <span data-ttu-id="9bd71-133">Critico</span><span class="sxs-lookup"><span data-stu-id="9bd71-133">Critical</span></span>     |
| <span data-ttu-id="9bd71-134">2</span><span class="sxs-lookup"><span data-stu-id="9bd71-134">2</span></span>     | <span data-ttu-id="9bd71-135">Errore</span><span class="sxs-lookup"><span data-stu-id="9bd71-135">Error</span></span>        |
| <span data-ttu-id="9bd71-136">3</span><span class="sxs-lookup"><span data-stu-id="9bd71-136">3</span></span>     | <span data-ttu-id="9bd71-137">Avviso</span><span class="sxs-lookup"><span data-stu-id="9bd71-137">Warning</span></span>      |
| <span data-ttu-id="9bd71-138">4</span><span class="sxs-lookup"><span data-stu-id="9bd71-138">4</span></span>     | <span data-ttu-id="9bd71-139">Infomational</span><span class="sxs-lookup"><span data-stu-id="9bd71-139">Infomational</span></span> |
| <span data-ttu-id="9bd71-140">5</span><span class="sxs-lookup"><span data-stu-id="9bd71-140">5</span></span>     | <span data-ttu-id="9bd71-141">Dettagliato</span><span class="sxs-lookup"><span data-stu-id="9bd71-141">Verbose</span></span>      |



 

<span data-ttu-id="9bd71-142">Con questo avviso, il tipo di evento (colonna di tipo) segnala "ConnTimedOut".</span><span class="sxs-lookup"><span data-stu-id="9bd71-142">With this warning, the event type (Type column) reports "ConnTimedOut".</span></span> <span data-ttu-id="9bd71-143">Nelle colonne successive per l'evento ConnTimeOut, il timer specifico che è scaduto viene segnalato come "timer \_ ConnectionIdle".</span><span class="sxs-lookup"><span data-stu-id="9bd71-143">In the subsequent columns for the ConnTimeOut event, the specific timer that expired is reported as "Timer\_ConnectionIdle".</span></span> <span data-ttu-id="9bd71-144">Si noti che la colonna con la \_ voce "timer ConnectionIdle" non è inclusa nella tabella per motivi di brevità e per evitare l'estrazione di colonne non contigue.</span><span class="sxs-lookup"><span data-stu-id="9bd71-144">Note the column with the "Timer\_ConnectionIdle" entry is not included in the table for the sake brevity and to avoid excerpting noncontiguous columns.</span></span>



| <span data-ttu-id="9bd71-145">Nome evento</span><span class="sxs-lookup"><span data-stu-id="9bd71-145">Event name</span></span>                    | <span data-ttu-id="9bd71-146">Tipo</span><span class="sxs-lookup"><span data-stu-id="9bd71-146">Type</span></span>            | <span data-ttu-id="9bd71-147">ID evento</span><span class="sxs-lookup"><span data-stu-id="9bd71-147">Event ID</span></span> | <span data-ttu-id="9bd71-148">Versione</span><span class="sxs-lookup"><span data-stu-id="9bd71-148">Version</span></span> | <span data-ttu-id="9bd71-149">Channel</span><span class="sxs-lookup"><span data-stu-id="9bd71-149">Channel</span></span> | <span data-ttu-id="9bd71-150">Level</span><span class="sxs-lookup"><span data-stu-id="9bd71-150">Level</span></span> |
|-------------------------------|-----------------|----------|---------|---------|-------|
| <span data-ttu-id="9bd71-151">EventTrace</span><span class="sxs-lookup"><span data-stu-id="9bd71-151">EventTrace</span></span>                    | <span data-ttu-id="9bd71-152">Intestazione</span><span class="sxs-lookup"><span data-stu-id="9bd71-152">Header</span></span>          | <span data-ttu-id="9bd71-153">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-153">0</span></span>        | <span data-ttu-id="9bd71-154">2</span><span class="sxs-lookup"><span data-stu-id="9bd71-154">2</span></span>       | <span data-ttu-id="9bd71-155">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-155">0</span></span>       | <span data-ttu-id="9bd71-156">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-156">0</span></span>     |
| <span data-ttu-id="9bd71-157">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="9bd71-157">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="9bd71-158">ChgUrlGrpProp</span><span class="sxs-lookup"><span data-stu-id="9bd71-158">ChgUrlGrpProp</span></span>   | <span data-ttu-id="9bd71-159">28</span><span class="sxs-lookup"><span data-stu-id="9bd71-159">28</span></span>       | <span data-ttu-id="9bd71-160">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-160">0</span></span>       | <span data-ttu-id="9bd71-161">16</span><span class="sxs-lookup"><span data-stu-id="9bd71-161">16</span></span>      | <span data-ttu-id="9bd71-162">4</span><span class="sxs-lookup"><span data-stu-id="9bd71-162">4</span></span>     |
| <span data-ttu-id="9bd71-163">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="9bd71-163">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="9bd71-164">AddUrl</span><span class="sxs-lookup"><span data-stu-id="9bd71-164">AddUrl</span></span>          | <span data-ttu-id="9bd71-165">31</span><span class="sxs-lookup"><span data-stu-id="9bd71-165">31</span></span>       | <span data-ttu-id="9bd71-166">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-166">0</span></span>       | <span data-ttu-id="9bd71-167">16</span><span class="sxs-lookup"><span data-stu-id="9bd71-167">16</span></span>      | <span data-ttu-id="9bd71-168">4</span><span class="sxs-lookup"><span data-stu-id="9bd71-168">4</span></span>     |
| <span data-ttu-id="9bd71-169">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="9bd71-169">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="9bd71-170">ChgReqQueueProp</span><span class="sxs-lookup"><span data-stu-id="9bd71-170">ChgReqQueueProp</span></span> | <span data-ttu-id="9bd71-171">30</span><span class="sxs-lookup"><span data-stu-id="9bd71-171">30</span></span>       | <span data-ttu-id="9bd71-172">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-172">0</span></span>       | <span data-ttu-id="9bd71-173">16</span><span class="sxs-lookup"><span data-stu-id="9bd71-173">16</span></span>      | <span data-ttu-id="9bd71-174">4</span><span class="sxs-lookup"><span data-stu-id="9bd71-174">4</span></span>     |
| <span data-ttu-id="9bd71-175">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="9bd71-175">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="9bd71-176">ChgUrlGrpProp</span><span class="sxs-lookup"><span data-stu-id="9bd71-176">ChgUrlGrpProp</span></span>   | <span data-ttu-id="9bd71-177">28</span><span class="sxs-lookup"><span data-stu-id="9bd71-177">28</span></span>       | <span data-ttu-id="9bd71-178">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-178">0</span></span>       | <span data-ttu-id="9bd71-179">16</span><span class="sxs-lookup"><span data-stu-id="9bd71-179">16</span></span>      | <span data-ttu-id="9bd71-180">4</span><span class="sxs-lookup"><span data-stu-id="9bd71-180">4</span></span>     |
| <span data-ttu-id="9bd71-181">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="9bd71-181">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="9bd71-182">ChgSrvSesProp</span><span class="sxs-lookup"><span data-stu-id="9bd71-182">ChgSrvSesProp</span></span>   | <span data-ttu-id="9bd71-183">29</span><span class="sxs-lookup"><span data-stu-id="9bd71-183">29</span></span>       | <span data-ttu-id="9bd71-184">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-184">0</span></span>       | <span data-ttu-id="9bd71-185">16</span><span class="sxs-lookup"><span data-stu-id="9bd71-185">16</span></span>      | <span data-ttu-id="9bd71-186">4</span><span class="sxs-lookup"><span data-stu-id="9bd71-186">4</span></span>     |
| <span data-ttu-id="9bd71-187">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="9bd71-187">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="9bd71-188">ChgSrvSesProp</span><span class="sxs-lookup"><span data-stu-id="9bd71-188">ChgSrvSesProp</span></span>   | <span data-ttu-id="9bd71-189">29</span><span class="sxs-lookup"><span data-stu-id="9bd71-189">29</span></span>       | <span data-ttu-id="9bd71-190">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-190">0</span></span>       | <span data-ttu-id="9bd71-191">16</span><span class="sxs-lookup"><span data-stu-id="9bd71-191">16</span></span>      | <span data-ttu-id="9bd71-192">4</span><span class="sxs-lookup"><span data-stu-id="9bd71-192">4</span></span>     |
| <span data-ttu-id="9bd71-193">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="9bd71-193">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="9bd71-194">ConnConnect</span><span class="sxs-lookup"><span data-stu-id="9bd71-194">ConnConnect</span></span>     | <span data-ttu-id="9bd71-195">21</span><span class="sxs-lookup"><span data-stu-id="9bd71-195">21</span></span>       | <span data-ttu-id="9bd71-196">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-196">0</span></span>       | <span data-ttu-id="9bd71-197">16</span><span class="sxs-lookup"><span data-stu-id="9bd71-197">16</span></span>      | <span data-ttu-id="9bd71-198">4</span><span class="sxs-lookup"><span data-stu-id="9bd71-198">4</span></span>     |
| <span data-ttu-id="9bd71-199">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="9bd71-199">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="9bd71-200">ConnIdAssgn</span><span class="sxs-lookup"><span data-stu-id="9bd71-200">ConnIdAssgn</span></span>     | <span data-ttu-id="9bd71-201">22</span><span class="sxs-lookup"><span data-stu-id="9bd71-201">22</span></span>       | <span data-ttu-id="9bd71-202">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-202">0</span></span>       | <span data-ttu-id="9bd71-203">16</span><span class="sxs-lookup"><span data-stu-id="9bd71-203">16</span></span>      | <span data-ttu-id="9bd71-204">4</span><span class="sxs-lookup"><span data-stu-id="9bd71-204">4</span></span>     |
| <span data-ttu-id="9bd71-205">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="9bd71-205">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="9bd71-206">RecvReq</span><span class="sxs-lookup"><span data-stu-id="9bd71-206">RecvReq</span></span>         | <span data-ttu-id="9bd71-207">1</span><span class="sxs-lookup"><span data-stu-id="9bd71-207">1</span></span>        | <span data-ttu-id="9bd71-208">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-208">0</span></span>       | <span data-ttu-id="9bd71-209">16</span><span class="sxs-lookup"><span data-stu-id="9bd71-209">16</span></span>      | <span data-ttu-id="9bd71-210">4</span><span class="sxs-lookup"><span data-stu-id="9bd71-210">4</span></span>     |
| <span data-ttu-id="9bd71-211">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="9bd71-211">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="9bd71-212">Analizza</span><span class="sxs-lookup"><span data-stu-id="9bd71-212">Parse</span></span>           | <span data-ttu-id="9bd71-213">2</span><span class="sxs-lookup"><span data-stu-id="9bd71-213">2</span></span>        | <span data-ttu-id="9bd71-214">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-214">0</span></span>       | <span data-ttu-id="9bd71-215">16</span><span class="sxs-lookup"><span data-stu-id="9bd71-215">16</span></span>      | <span data-ttu-id="9bd71-216">4</span><span class="sxs-lookup"><span data-stu-id="9bd71-216">4</span></span>     |
| <span data-ttu-id="9bd71-217">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="9bd71-217">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="9bd71-218">LogFileWrite</span><span class="sxs-lookup"><span data-stu-id="9bd71-218">LogFileWrite</span></span>    | <span data-ttu-id="9bd71-219">51</span><span class="sxs-lookup"><span data-stu-id="9bd71-219">51</span></span>       | <span data-ttu-id="9bd71-220">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-220">0</span></span>       | <span data-ttu-id="9bd71-221">16</span><span class="sxs-lookup"><span data-stu-id="9bd71-221">16</span></span>      | <span data-ttu-id="9bd71-222">4</span><span class="sxs-lookup"><span data-stu-id="9bd71-222">4</span></span>     |
| <span data-ttu-id="9bd71-223">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="9bd71-223">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="9bd71-224">ConnCleanup</span><span class="sxs-lookup"><span data-stu-id="9bd71-224">ConnCleanup</span></span>     | <span data-ttu-id="9bd71-225">24</span><span class="sxs-lookup"><span data-stu-id="9bd71-225">24</span></span>       | <span data-ttu-id="9bd71-226">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-226">0</span></span>       | <span data-ttu-id="9bd71-227">16</span><span class="sxs-lookup"><span data-stu-id="9bd71-227">16</span></span>      | <span data-ttu-id="9bd71-228">4</span><span class="sxs-lookup"><span data-stu-id="9bd71-228">4</span></span>     |
| <span data-ttu-id="9bd71-229">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="9bd71-229">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="9bd71-230">ConnTimedOut</span><span class="sxs-lookup"><span data-stu-id="9bd71-230">ConnTimedOut</span></span>    | <span data-ttu-id="9bd71-231">53</span><span class="sxs-lookup"><span data-stu-id="9bd71-231">53</span></span>       | <span data-ttu-id="9bd71-232">0</span><span class="sxs-lookup"><span data-stu-id="9bd71-232">0</span></span>       | <span data-ttu-id="9bd71-233">16</span><span class="sxs-lookup"><span data-stu-id="9bd71-233">16</span></span>      | <span data-ttu-id="9bd71-234">3</span><span class="sxs-lookup"><span data-stu-id="9bd71-234">3</span></span>     |



 

<span data-ttu-id="9bd71-235">Tabella 1: estratti da un report di traccia di esempio per un problema di timer</span><span class="sxs-lookup"><span data-stu-id="9bd71-235">Table 1: Excerpts from a Sample Trace Report for a Timer Issue</span></span>

<span data-ttu-id="9bd71-236">In questo esempio, la scadenza (evento ConnTimeOut) del timer dell'intestazione (timer \_ ConnectionIdle) è il motivo per cui gli utenti finali visualizzano il messaggio "Impossibile visualizzare la pagina" nei client Web.</span><span class="sxs-lookup"><span data-stu-id="9bd71-236">In this example, the expiration (ConnTimeOut event) of the header timer (Timer\_ConnectionIdle) is the reason end-users see the "page cannot be displayed" message in their web clients.</span></span> <span data-ttu-id="9bd71-237">Un potenziale motivo del timeout potrebbe essere che i client Web stanno inviando lentamente a causa di connessioni lente.</span><span class="sxs-lookup"><span data-stu-id="9bd71-237">A potential reason for the timeout may be that Web clients are sending slowly due to slow connections.</span></span> <span data-ttu-id="9bd71-238">Per risolvere questo problema, è possibile modificare il valore di timeout tramite comandi netsh.</span><span class="sxs-lookup"><span data-stu-id="9bd71-238">To address this issue, the timeout value can be adjusted through Netsh commands.</span></span>

## <a name="adjusting-timeout-through-netsh-and-verifying-the-solution"></a><span data-ttu-id="9bd71-239">Regolazione del timeout tramite Netsh e verifica della soluzione</span><span class="sxs-lookup"><span data-stu-id="9bd71-239">Adjusting Timeout through Netsh and Verifying the Solution</span></span>

<span data-ttu-id="9bd71-240">I comandi Netsh per HTTP elencati di seguito consentono a un professionista IT di visualizzare e configurare i valori delle impostazioni nel componente API del server HTTP.</span><span class="sxs-lookup"><span data-stu-id="9bd71-240">The Netsh commands for HTTP listed below allow an IT professional to view and configure setting values on the HTTP Server API component.</span></span> <span data-ttu-id="9bd71-241">Le modifiche apportate ai comandi netsh HTTP hanno effetto su tutte le applicazioni Server ospitate dal componente API server HTTP per tale computer.</span><span class="sxs-lookup"><span data-stu-id="9bd71-241">Changes through Netsh HTTP commands affect all server applications hosted by the HTTP Server API component for that machine.</span></span> <span data-ttu-id="9bd71-242">Queste modifiche vengono mantenute tra i riavvii del componente e i riavvii del computer.</span><span class="sxs-lookup"><span data-stu-id="9bd71-242">These changes persist across restarts of the component and reboots of the machine.</span></span> <span data-ttu-id="9bd71-243">I comandi netsh HTTP sono disponibili in Windows Vista e Windows Server 2008 e sostituiscono lo strumento HttpCfg.exe del Resource Kit di Windows Server 2003 durante l'esecuzione in Windows Vista e Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="9bd71-243">The Netsh HTTP commands are available in Windows Vista and Windows Server 2008 and replace the Windows Server 2003 Resource Kit's HttpCfg.exe tool when running on Windows Vista and Windows Server 2008.</span></span> <span data-ttu-id="9bd71-244">In questo scenario si modificherà un valore di timeout e quindi si verificherà la soluzione.</span><span class="sxs-lookup"><span data-stu-id="9bd71-244">In this scenario, we will adjust a timeout value and then verify the solution.</span></span> <span data-ttu-id="9bd71-245">I timer sono disponibili nel componente API server HTTP per garantire la disponibilità e la protezione dal sovraconsumo da parte di un utente malintenzionato o configurato in modo non conforme.</span><span class="sxs-lookup"><span data-stu-id="9bd71-245">Timers exist in the HTTP Server API component to ensure availability and protect against overconsumption by a misconfigured or malicious user.</span></span> <span data-ttu-id="9bd71-246">La regolazione dei timer dai valori predefiniti dovrebbe essere valutata attentamente rispetto a un potenziale attacco DoS.</span><span class="sxs-lookup"><span data-stu-id="9bd71-246">Adjusting timers from default values should be carefully evaluated against a potential DoS attack.</span></span>

<span data-ttu-id="9bd71-247">In questo esempio, i client Web sono protetti da una connessione di rete lenta, ottenendo l' \_ evento ETW ConnectionIdle del timer.</span><span class="sxs-lookup"><span data-stu-id="9bd71-247">In this example, the web clients are behind a slow network connection, resulting in the Timer\_ConnectionIdle ETW event.</span></span> <span data-ttu-id="9bd71-248">Dopo aver preso in considerazione la provocazione dei timeout e il bilanciamento dell'effetto sul carico del server, si decide di aumentare i valori di timeout a un valore di 240 secondi.</span><span class="sxs-lookup"><span data-stu-id="9bd71-248">After consideration of the cause of the timeouts and balancing with the impact on the server's load, the decision is made to increase the timeout values to a value of 240 seconds.</span></span> <span data-ttu-id="9bd71-249">È possibile visualizzare e quindi configurare il timer con la procedura riportata di seguito.</span><span class="sxs-lookup"><span data-stu-id="9bd71-249">You can view and then configure the timer with the following procedure.</span></span>

<span data-ttu-id="9bd71-250">**Configurare il timer di connessione inattiva (timer \_ ConnectionIdle) con Netsh**</span><span class="sxs-lookup"><span data-stu-id="9bd71-250">**Configure the idle connection timer (Timer\_ConnectionIdle) with Netsh**</span></span>

1.  <span data-ttu-id="9bd71-251">Sul server, aprire una finestra di comando con privilegi elevati ed eseguire la procedura seguente per visualizzare e configurare il valore di timeout.</span><span class="sxs-lookup"><span data-stu-id="9bd71-251">On the server, open an elevated command window and run the steps below to view and configure the timeout value.</span></span> <span data-ttu-id="9bd71-252">Una schermata del comando netsh HTTP è illustrata nella figura 2 riportata di seguito.</span><span class="sxs-lookup"><span data-stu-id="9bd71-252">A screenshot of the Netsh HTTP command is shown in Figure 2 below.</span></span>
2.  <span data-ttu-id="9bd71-253">Mostra i valori di timeout correnti: **netsh http show timeout**</span><span class="sxs-lookup"><span data-stu-id="9bd71-253">Show the current timeout values: **Netsh http show timeout**</span></span>
3.  <span data-ttu-id="9bd71-254">Configurare il \_ valore di timeout ConnectionIdle del timer.</span><span class="sxs-lookup"><span data-stu-id="9bd71-254">Configure the Timer\_ConnectionIdle timeout value.</span></span> <span data-ttu-id="9bd71-255">In questo esempio il valore viene modificato in 240 secondi: **netsh http add timeout timeouttype = idleconnectiontimeout value = 240**</span><span class="sxs-lookup"><span data-stu-id="9bd71-255">In this example, the value is changed to 240 seconds: **Netsh http add timeout timeouttype=idleconnectiontimeout value=240**</span></span>

![finestra di comando netsh http](images/netshhttpcommand.png)

<span data-ttu-id="9bd71-257">Figura 2: finestra di comando netsh HTTP</span><span class="sxs-lookup"><span data-stu-id="9bd71-257">Figure 2: Netsh HTTP command window</span></span>

<span data-ttu-id="9bd71-258">Dopo aver configurato il valore di timeout, eseguire di nuovo i passaggi di diagnostica ETW.</span><span class="sxs-lookup"><span data-stu-id="9bd71-258">After configuring the timeout value, rerun the ETW diagnosis steps.</span></span> <span data-ttu-id="9bd71-259">Se la condizione di errore viene corretta, la traccia ETW non dovrebbe più visualizzare un timeout con un livello ETW "3" per il timer di inattività della connessione.</span><span class="sxs-lookup"><span data-stu-id="9bd71-259">If the error condition is corrected, the ETW trace should no longer show a timeout with an ETW level of "3" for the connection idle timer.</span></span>

 

 




