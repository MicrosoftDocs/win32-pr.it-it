---
title: Estensioni del dispositivo MTP per il trasferimento dei metadati
description: Estensioni del dispositivo MTP per il trasferimento dei metadati
ms.assetid: 9cf68373-e84f-4568-a9da-16ddee0fc4e9
keywords:
- Windows Media Player, estensioni del dispositivo MTP
- Windows Media Player, estensioni del dispositivo
- Windows Media Player, estensioni
- Media Player di Windows, metadati
- Windows Media Player, Media Transfer Protocol (MTP)
- Protocollo MTP (Media Transfer Protocol)
- MTP (Media Transfer Protocol)
- metadati, estensioni del dispositivo MTP
- metadati, estensioni del dispositivo
- metadati, estensioni
- estensioni del dispositivo, trasferimento di metadati
- estensioni, trasferimento di metadati
- Estensioni del dispositivo MTP per il trasferimento dei metadati
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f64ff16fd97f135d7f8c902af823b967079408fb
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "104044038"
---
# <a name="mtp-device-extensions-for-metadata-transfer"></a><span data-ttu-id="de7c4-116">Estensioni del dispositivo MTP per il trasferimento dei metadati</span><span class="sxs-lookup"><span data-stu-id="de7c4-116">MTP Device Extensions for Metadata Transfer</span></span>

<span data-ttu-id="de7c4-117">Il protocollo MTP (Media Transfer Protocol) è un protocollo progettato per i dispositivi multimediali portatili.</span><span class="sxs-lookup"><span data-stu-id="de7c4-117">Media Transfer Protocol (MTP) is a protocol designed for portable media devices.</span></span> <span data-ttu-id="de7c4-118">Lo scopo principale di questo protocollo è fornire un protocollo comune per lo scambio di dati tra un computer e un dispositivo multimediale portatile.</span><span class="sxs-lookup"><span data-stu-id="de7c4-118">The primary purpose of this protocol is to provide a common protocol for exchanging data between a computer and a portable media device.</span></span> <span data-ttu-id="de7c4-119">Ciò include la ricezione e l'invio di oggetti multimediali e l'enumerazione del contenuto e delle funzionalità del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="de7c4-119">This includes receiving and sending media objects and enumerating the contents and capabilities of the device.</span></span>

<span data-ttu-id="de7c4-120">MTP usa identificatori di oggetti univoci (PUOIDs) permanenti per identificare in modo univoco gli elementi multimediali digitali (e altri oggetti) archiviati in un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="de7c4-120">MTP uses persistent unique object identifiers (PUOIDs) to uniquely identify digital media items (and other objects) stored on a device.</span></span> <span data-ttu-id="de7c4-121">Quando si scambiano informazioni sulle modifiche apportate in un dispositivo che supporta MTP, il dispositivo e Windows Media Player usano PUOIDs per identificare quali oggetti sono stati modificati.</span><span class="sxs-lookup"><span data-stu-id="de7c4-121">When exchanging information about changes that have occurred on a device that supports MTP, the device and Windows Media Player use PUOIDs to identify which objects have changed.</span></span>

<span data-ttu-id="de7c4-122">Il file di intestazione denominato wmpdevices. h, che viene installato come parte di Windows Media Player SDK, definisce le strutture e le costanti necessarie per supportare le estensioni del dispositivo Windows Media Player.</span><span class="sxs-lookup"><span data-stu-id="de7c4-122">The header file named wmpdevices.h, which is installed as part of the Windows Media Player SDK, defines the structures and constants needed to support Windows Media Player device extensions.</span></span>

<span data-ttu-id="de7c4-123">Affinché un dispositivo venga riconosciuto come supporto per il trasferimento dei metadati tramite il set di estensioni del dispositivo Windows Media Player MTP, deve includere le seguenti informazioni nel set di dati DeviceInfo.</span><span class="sxs-lookup"><span data-stu-id="de7c4-123">For a device to be recognized as supporting metadata transfer through the Windows Media Player MTP device extension set, it must include the following information in the DeviceInfo dataset.</span></span> <span data-ttu-id="de7c4-124">Per ulteriori informazioni su questo set di dati, vedere la sezione 4.6.1 della specifica MTP.</span><span class="sxs-lookup"><span data-stu-id="de7c4-124">(For more information about this dataset, see section 4.6.1 of the MTP specification.)</span></span>



| <span data-ttu-id="de7c4-125">Campo del set di dati</span><span class="sxs-lookup"><span data-stu-id="de7c4-125">Dataset field</span></span>          | <span data-ttu-id="de7c4-126">Ordine campi</span><span class="sxs-lookup"><span data-stu-id="de7c4-126">Field order</span></span> | <span data-ttu-id="de7c4-127">Tipo di dati</span><span class="sxs-lookup"><span data-stu-id="de7c4-127">Data type</span></span>  | <span data-ttu-id="de7c4-128">Valore</span><span class="sxs-lookup"><span data-stu-id="de7c4-128">Value</span></span>                       |
|------------------------|-------------|------------|-----------------------------|
| <span data-ttu-id="de7c4-129">VendorExtensionID</span><span class="sxs-lookup"><span data-stu-id="de7c4-129">VendorExtensionID</span></span>      | <span data-ttu-id="de7c4-130">2</span><span class="sxs-lookup"><span data-stu-id="de7c4-130">2</span></span>           | <span data-ttu-id="de7c4-131">**UINT32**</span><span class="sxs-lookup"><span data-stu-id="de7c4-131">**UINT32**</span></span> | <span data-ttu-id="de7c4-132">0x00000006</span><span class="sxs-lookup"><span data-stu-id="de7c4-132">0x00000006</span></span>                  |
| <span data-ttu-id="de7c4-133">VendorExtensionVersion</span><span class="sxs-lookup"><span data-stu-id="de7c4-133">VendorExtensionVersion</span></span> | <span data-ttu-id="de7c4-134">3</span><span class="sxs-lookup"><span data-stu-id="de7c4-134">3</span></span>           | <span data-ttu-id="de7c4-135">**UINT16**</span><span class="sxs-lookup"><span data-stu-id="de7c4-135">**UINT16**</span></span> | <span data-ttu-id="de7c4-136">0x0064 (100)</span><span class="sxs-lookup"><span data-stu-id="de7c4-136">0x0064 (100)</span></span>                |
| <span data-ttu-id="de7c4-137">VendorExtensionDesc</span><span class="sxs-lookup"><span data-stu-id="de7c4-137">VendorExtensionDesc</span></span>    | <span data-ttu-id="de7c4-138">4</span><span class="sxs-lookup"><span data-stu-id="de7c4-138">4</span></span>           | <span data-ttu-id="de7c4-139">**Stringa**</span><span class="sxs-lookup"><span data-stu-id="de7c4-139">**String**</span></span> | <span data-ttu-id="de7c4-140">"microsoft.com/WMPPD: 10,0"</span><span class="sxs-lookup"><span data-stu-id="de7c4-140">"microsoft.com/WMPPD: 10.0"</span></span> |



 

<span data-ttu-id="de7c4-141">La tabella seguente fornisce informazioni dettagliate sull'operazione MTP per il trasferimento di metadati accelerati.</span><span class="sxs-lookup"><span data-stu-id="de7c4-141">The following table provides details about the MTP operation for accelerated metadata transfer.</span></span>



| <span data-ttu-id="de7c4-142">Elemento</span><span class="sxs-lookup"><span data-stu-id="de7c4-142">Item</span></span>                  | <span data-ttu-id="de7c4-143">Descrizione</span><span class="sxs-lookup"><span data-stu-id="de7c4-143">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="de7c4-144">Codice operativo</span><span class="sxs-lookup"><span data-stu-id="de7c4-144">Operation Code</span></span>        | <span data-ttu-id="de7c4-145">0x9201</span><span class="sxs-lookup"><span data-stu-id="de7c4-145">0x9201</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="de7c4-146">Parametro dell'operazione 1</span><span class="sxs-lookup"><span data-stu-id="de7c4-146">Operation Parameter 1</span></span> | <span data-ttu-id="de7c4-147">ID transazione fornito dal dispositivo durante la sessione precedente.</span><span class="sxs-lookup"><span data-stu-id="de7c4-147">The transaction ID supplied by the device during the previous session.</span></span> <span data-ttu-id="de7c4-148">Questo valore è zero per la prima sessione.</span><span class="sxs-lookup"><span data-stu-id="de7c4-148">This value is zero for the first session.</span></span>                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="de7c4-149">Parametro dell'operazione 2</span><span class="sxs-lookup"><span data-stu-id="de7c4-149">Operation Parameter 2</span></span> | <span data-ttu-id="de7c4-150">Indice iniziale.</span><span class="sxs-lookup"><span data-stu-id="de7c4-150">Starting index.</span></span> <span data-ttu-id="de7c4-151">Questo valore è sempre zero nella prima chiamata di una sessione.</span><span class="sxs-lookup"><span data-stu-id="de7c4-151">This value is always zero on the first call of a session.</span></span> <span data-ttu-id="de7c4-152">Nelle chiamate successive all'interno della stessa sessione di sincronizzazione, questo valore aumenta in base alla somma del conteggio degli elementi modificati e degli elementi eliminati dai dati di risposta precedenti.</span><span class="sxs-lookup"><span data-stu-id="de7c4-152">On subsequent calls within the same synchronization session, this value increases by the sum of the count of the modified and the deleted items from the previous response data.</span></span>                                                                                                                                                                                                                                             |
| <span data-ttu-id="de7c4-153">Parametro dell'operazione 3</span><span class="sxs-lookup"><span data-stu-id="de7c4-153">Operation Parameter 3</span></span> | <span data-ttu-id="de7c4-154">0x10000.</span><span class="sxs-lookup"><span data-stu-id="de7c4-154">0x10000.</span></span> <span data-ttu-id="de7c4-155">Questa costante, definita in wmpdevices. h, è il numero massimo di PUOIDs che possono essere restituiti nella risposta.</span><span class="sxs-lookup"><span data-stu-id="de7c4-155">This constant, defined in wmpdevices.h, is the maximum number of PUOIDs that can be returned in the response.</span></span> <span data-ttu-id="de7c4-156">Si noti che il valore di questa costante può essere modificato nelle versioni future di questo file di intestazione.</span><span class="sxs-lookup"><span data-stu-id="de7c4-156">Note that the value of this constant may be revised in future releases of this header file.</span></span>                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="de7c4-157">Parametro dell'operazione 4</span><span class="sxs-lookup"><span data-stu-id="de7c4-157">Operation Parameter 4</span></span> | <span data-ttu-id="de7c4-158">0</span><span class="sxs-lookup"><span data-stu-id="de7c4-158">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="de7c4-159">Parametro dell'operazione 5</span><span class="sxs-lookup"><span data-stu-id="de7c4-159">Operation Parameter 5</span></span> | <span data-ttu-id="de7c4-160">0</span><span class="sxs-lookup"><span data-stu-id="de7c4-160">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="de7c4-161">Data</span><span class="sxs-lookup"><span data-stu-id="de7c4-161">Data</span></span>                  | <span data-ttu-id="de7c4-162">Il dispositivo restituisce due matrici MTP contigue che contengono PUOIDs.</span><span class="sxs-lookup"><span data-stu-id="de7c4-162">The device returns two contiguous MTP arrays containing PUOIDs.</span></span> <span data-ttu-id="de7c4-163">Ogni array MTP inizia con un valore **DWORD** che indica il numero di elementi nella matrice, seguito dalla matrice di elementi.</span><span class="sxs-lookup"><span data-stu-id="de7c4-163">Each MTP array begins with a **DWORD** value indicating the count of items in the array, followed by the array of elements.</span></span> <span data-ttu-id="de7c4-164">La prima matrice MTP contiene l'elenco di PUOIDs che sono stati aggiunti o modificati.</span><span class="sxs-lookup"><span data-stu-id="de7c4-164">The first MTP array contains the list of PUOIDs that have been added or changed.</span></span> <span data-ttu-id="de7c4-165">Il secondo array MTP contiene l'elenco di PUOIDs che sono stati eliminati dal dispositivo portatile. Si noti che la somma del numero di PUOID nelle due matrici non deve superare il valore passato nel parametro operation 3.</span><span class="sxs-lookup"><span data-stu-id="de7c4-165">The second MTP array contains the list of PUOIDs that have been deleted from the portable device.Note that the sum of PUOID count in the two arrays must not exceed the value passed in Operation Parameter 3.</span></span><br/> |
| <span data-ttu-id="de7c4-166">Direzione dati</span><span class="sxs-lookup"><span data-stu-id="de7c4-166">Data Direction</span></span>        | <span data-ttu-id="de7c4-167">R->I</span><span class="sxs-lookup"><span data-stu-id="de7c4-167">R->I</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="de7c4-168">Opzioni del codice di risposta</span><span class="sxs-lookup"><span data-stu-id="de7c4-168">Response Code Options</span></span> | <span data-ttu-id="de7c4-169">**MTP \_ RISPOSTA \_ OK** (0x2001) o codice di risposta di errore valido.</span><span class="sxs-lookup"><span data-stu-id="de7c4-169">**MTP\_RESPONSE\_OK** (0x2001) or valid error response code.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="de7c4-170">Parametro di risposta 1</span><span class="sxs-lookup"><span data-stu-id="de7c4-170">Response Parameter 1</span></span>  | <span data-ttu-id="de7c4-171">ID della transazione corrente del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="de7c4-171">The device's current transaction ID.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="de7c4-172">Parametro di risposta 2</span><span class="sxs-lookup"><span data-stu-id="de7c4-172">Response Parameter 2</span></span>  | <span data-ttu-id="de7c4-173">Numero di PUOIDs che rimangono per essere recuperate dalle richieste future.</span><span class="sxs-lookup"><span data-stu-id="de7c4-173">The number of PUOIDs that remain to be retrieved by future requests.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="de7c4-174">Parametro di risposta 3</span><span class="sxs-lookup"><span data-stu-id="de7c4-174">Response Parameter 3</span></span>  | <span data-ttu-id="de7c4-175">**DWORD** che contiene informazioni sullo stato.</span><span class="sxs-lookup"><span data-stu-id="de7c4-175">**DWORD** containing status information.</span></span> <span data-ttu-id="de7c4-176">Lo stato è indicato in modalità bit per bit.</span><span class="sxs-lookup"><span data-stu-id="de7c4-176">Status is indicated in a bitwise fashion.</span></span> <span data-ttu-id="de7c4-177">Per informazioni sui flag da usare, vedere la sezione Osservazioni.</span><span class="sxs-lookup"><span data-stu-id="de7c4-177">See Remarks for information about flags to use.</span></span>                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="de7c4-178">Parametro di risposta 4</span><span class="sxs-lookup"><span data-stu-id="de7c4-178">Response Parameter 4</span></span>  | <span data-ttu-id="de7c4-179">0</span><span class="sxs-lookup"><span data-stu-id="de7c4-179">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="de7c4-180">Parametro di risposta 5</span><span class="sxs-lookup"><span data-stu-id="de7c4-180">Response Parameter 5</span></span>  | <span data-ttu-id="de7c4-181">0</span><span class="sxs-lookup"><span data-stu-id="de7c4-181">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |



 

## <a name="remarks"></a><span data-ttu-id="de7c4-182">Commenti</span><span class="sxs-lookup"><span data-stu-id="de7c4-182">Remarks</span></span>

<span data-ttu-id="de7c4-183">Lo stato è indicato dal parametro di risposta 3 in modalità bit per bit usando i flag seguenti.</span><span class="sxs-lookup"><span data-stu-id="de7c4-183">Status is indicated through Response Parameter 3 in a bitwise fashion by using the following flags.</span></span>



| <span data-ttu-id="de7c4-184">Flag</span><span class="sxs-lookup"><span data-stu-id="de7c4-184">Flag</span></span>                                             | <span data-ttu-id="de7c4-185">valore</span><span class="sxs-lookup"><span data-stu-id="de7c4-185">Value</span></span> | <span data-ttu-id="de7c4-186">Descrizione</span><span class="sxs-lookup"><span data-stu-id="de7c4-186">Description</span></span>                                                                                                                                                                                                                          |
|--------------------------------------------------|-------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="de7c4-187">**MDRT i flag di WMP non \_ \_ \_ segnalati \_ \_ elementi eliminati**</span><span class="sxs-lookup"><span data-stu-id="de7c4-187">**WMP\_MDRT\_FLAGS\_UNREPORTED\_DELETED\_ITEMS**</span></span> | <span data-ttu-id="de7c4-188">0x1</span><span class="sxs-lookup"><span data-stu-id="de7c4-188">0x1</span></span>   | <span data-ttu-id="de7c4-189">Gli elementi sono stati eliminati prima che venisse segnalato il primo nome del percorso dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="de7c4-189">Items were deleted before the first object path name being reported.</span></span> <span data-ttu-id="de7c4-190">Questo indica spesso che il dispositivo è stato riformattato.</span><span class="sxs-lookup"><span data-stu-id="de7c4-190">This often indicates that the device was reformatted.</span></span>                                                                                                           |
| <span data-ttu-id="de7c4-191">**MDRT i flag di WMP non \_ \_ \_ segnalati \_ \_ elementi aggiunti**</span><span class="sxs-lookup"><span data-stu-id="de7c4-191">**WMP\_MDRT\_FLAGS\_UNREPORTED\_ADDED\_ITEMS**</span></span>   | <span data-ttu-id="de7c4-192">0x2</span><span class="sxs-lookup"><span data-stu-id="de7c4-192">0x2</span></span>   | <span data-ttu-id="de7c4-193">Il dispositivo contiene alcuni elementi aggiunti che non possono essere restituiti nell'elenco di PUOIDS.</span><span class="sxs-lookup"><span data-stu-id="de7c4-193">The device contains some added items that cannot be returned in the list of PUOIDS.</span></span> <span data-ttu-id="de7c4-194">Si noti che questo flag non è ridondante con il parametro di risposta 2.</span><span class="sxs-lookup"><span data-stu-id="de7c4-194">Note that this flag is not redundant with Response Parameter 2.</span></span> <span data-ttu-id="de7c4-195">Impostare questo flag solo quando sono presenti elementi richiesti che il dispositivo non può restituire.</span><span class="sxs-lookup"><span data-stu-id="de7c4-195">Set this flag only when there are requested items that the device cannot return.</span></span> |



 

<span data-ttu-id="de7c4-196">I bit da 2 a 31 sono riservati per un uso futuro.</span><span class="sxs-lookup"><span data-stu-id="de7c4-196">Bits 2 through 31 are reserved for future use.</span></span> <span data-ttu-id="de7c4-197">Questi bit devono essere impostati su zero.</span><span class="sxs-lookup"><span data-stu-id="de7c4-197">These bits should be set to zero.</span></span>

<span data-ttu-id="de7c4-198">Windows Media Player invia il comando MTP a un dispositivo all'inizio di una sessione di sincronizzazione prima del trasferimento dei file multimediali.</span><span class="sxs-lookup"><span data-stu-id="de7c4-198">Windows Media Player sends the MTP command to a device at the start of a synchronization session before media files are transferred.</span></span> <span data-ttu-id="de7c4-199">Il dispositivo deve restituire la risposta il più rapidamente possibile per evitare ritardi nell'operazione di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="de7c4-199">The device should return its response as quickly as possible to avoid delays in the synchronization operation.</span></span>

<span data-ttu-id="de7c4-200">Windows Media Player richiederà i valori per gli attributi elencati in [informazioni sui metadati](about-the-metadata.md) per ogni POUID modificato restituito nella risposta.</span><span class="sxs-lookup"><span data-stu-id="de7c4-200">Windows Media Player will request values for the attributes listed in [About the Metadata](about-the-metadata.md) for each modified POUID returned in the response.</span></span> <span data-ttu-id="de7c4-201">Windows Media Player potrebbe inviare i valori aggiornati per questi attributi al dispositivo nei comandi successivi.</span><span class="sxs-lookup"><span data-stu-id="de7c4-201">Windows Media Player might send updated values for these attributes to the device in subsequent commands.</span></span>

<span data-ttu-id="de7c4-202">I file segnalati come rimossi dal dispositivo possono essere copiati di nuovo nel dispositivo se le impostazioni dell'utente lo richiedono.</span><span class="sxs-lookup"><span data-stu-id="de7c4-202">Files reported as having been removed from the device can be copied to the device again if the user's settings require it.</span></span>

## <a name="related-topics"></a><span data-ttu-id="de7c4-203">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="de7c4-203">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="de7c4-204">**Estensioni del dispositivo per il trasferimento di metadati accelerati**</span><span class="sxs-lookup"><span data-stu-id="de7c4-204">**Device Extensions for Accelerated Metadata Transfer**</span></span>](device-extensions-for-accelerated-metadata-transfer.md)
</dt> </dl>

 

 





