---
title: Plug-in per negozi online di tipo 2
description: Plug-in per negozi online di tipo 2
ms.assetid: 16e90a01-20be-49a6-96df-de81a7283f42
keywords:
- Windows Media Player Online Stores, plug-in
- archivi online, plug-in
- digitare 2 archivi online, plug-in
- Windows Media Player Online Stores, interfaccia IWMPSubscriptionService
- negozi online, interfaccia IWMPSubscriptionService
- tipi 2 negozi online, interfaccia IWMPSubscriptionService
- plug-in, archivi Windows Media Player online
- plug-in, archivi online
- plug-in, digitare 2 archivi online
- plug-in, interfaccia IWMPSubscriptionService
- Plug-in di Windows Media Player, digitare 2 archivi online
- Plug-in di Windows Media Player, archivi online
- Plug-in di Windows Media Player, archivi Windows Media Player online
- Plug-in di Windows Media Player, interfaccia IWMPSubscriptionService
- IWMPSubscriptionService
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c6d2f3aeeaa7456c3452b498a1a728e24c96783c
ms.sourcegitcommit: ad672d3a10192c5ccac619ad2524407109266e93
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/25/2020
ms.locfileid: "104117466"
---
# <a name="type-2-online-store-plug-in"></a><span data-ttu-id="452e0-118">Plug-in per negozi online di tipo 2</span><span class="sxs-lookup"><span data-stu-id="452e0-118">Type 2 Online Store Plug-in</span></span>

<span data-ttu-id="452e0-119">Un plug-in di archivio online di tipo 2 è un componente COM che implementa l'interfaccia [IWMPSubscriptionService](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice) e, facoltativamente, l'interfaccia [IWMPSubscriptionService2](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice2) .</span><span class="sxs-lookup"><span data-stu-id="452e0-119">A type 2 online store plug-in is a COM component that implements the [IWMPSubscriptionService](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice) interface and optionally the [IWMPSubscriptionService2](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice2) interface.</span></span> <span data-ttu-id="452e0-120">Windows Media Player 9 chiama i metodi dell'interfaccia **IWMPSubscriptionService** .</span><span class="sxs-lookup"><span data-stu-id="452e0-120">Windows Media Player 9 calls the methods of the **IWMPSubscriptionService** interface.</span></span> <span data-ttu-id="452e0-121">Windows Media Player 10 o versioni successive chiama i metodi delle interfacce **IWMPSubscriptionService** e **IWMPSubscriptionService2** .</span><span class="sxs-lookup"><span data-stu-id="452e0-121">Windows Media Player 10 or later calls the methods of both the **IWMPSubscriptionService** and **IWMPSubscriptionService2** interfaces.</span></span>

<span data-ttu-id="452e0-122">Un plug-in di archiviazione di tipo 2 è incluso in un pacchetto come server COM in-process.</span><span class="sxs-lookup"><span data-stu-id="452e0-122">A type 2 online store plug-in is packaged as an in-process COM server.</span></span> <span data-ttu-id="452e0-123">Ovvero, il plug-in viene implementato in un file con estensione dll mappato al processo di Media Player di Windows.</span><span class="sxs-lookup"><span data-stu-id="452e0-123">That is, the plug-in is implemented in a .dll file that is mapped into the Windows Media Player process.</span></span>

<span data-ttu-id="452e0-124">Windows Media Player attiva i plug-in di tipo 2 Store online in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="452e0-124">Windows Media Player activates type 2 online store plug-ins as needed.</span></span> <span data-ttu-id="452e0-125">Si supponga, ad esempio, che l'utente tenti di riprodurre un brano protetto e che non esista una licenza corrente per riprodurlo.</span><span class="sxs-lookup"><span data-stu-id="452e0-125">For example, suppose the user attempts to play a protected song, and there is no current license to play it.</span></span> <span data-ttu-id="452e0-126">In tal caso, Windows Media Player controlla l'attributo **contentdistributor** nell'intestazione del file o nell'intestazione DRM.</span><span class="sxs-lookup"><span data-stu-id="452e0-126">In that case, Windows Media Player inspects the **ContentDistributor** attribute in either the file header or the DRM header.</span></span> <span data-ttu-id="452e0-127">Se esiste un valore che corrisponde al nome della chiave di un archivio online, Windows Media Player controlla il registro di sistema per verificare se l'archivio online ha fornito un plug-in di tipo 2.</span><span class="sxs-lookup"><span data-stu-id="452e0-127">If a value exists that matches the key name of an online store, Windows Media Player checks the registry to see whether that online store has provided a type 2 plug-in.</span></span> <span data-ttu-id="452e0-128">Se il plug-in esiste, Windows Media Player carica il plug-in e chiama i relativi metodi per determinare se l'utente dispone dei diritti per riprodurre il brano.</span><span class="sxs-lookup"><span data-stu-id="452e0-128">If the plug-in exists, Windows Media Player loads the plug-in and calls its methods to determine whether the user is has the rights to play the song.</span></span>

<span data-ttu-id="452e0-129">Nell'elenco seguente vengono descritti alcuni scenari in cui Windows Media Player chiama un plug-in di archiviazione di tipo 2 online.</span><span class="sxs-lookup"><span data-stu-id="452e0-129">The following list describes some of the scenarios in which Windows Media Player calls a type 2 online store plug-in.</span></span>

-   <span data-ttu-id="452e0-130">**L'utente tenta di riprodurre il contenuto del negozio online.**</span><span class="sxs-lookup"><span data-stu-id="452e0-130">**The user attempts to play online store content.**</span></span> <span data-ttu-id="452e0-131">Quando si verifica questa situazione, Windows Media Player chiama il metodo [IWMPSubscriptionService:: allowPlay](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowplay) del plug-in, passando un puntatore all'elemento multimediale digitale che l'utente sta tentando di riprodurre.</span><span class="sxs-lookup"><span data-stu-id="452e0-131">When this happens, Windows Media Player calls the plug-in's [IWMPSubscriptionService::allowPlay](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowplay) method, passing a pointer to the digital media item that the user is attempting to play.</span></span> <span data-ttu-id="452e0-132">Il negozio online può usarlo come opportunità per aggiornare la licenza dell'utente per riprodurre il contenuto o per non consentire la riproduzione.</span><span class="sxs-lookup"><span data-stu-id="452e0-132">The online store can use this as an opportunity to update the user's license to play the content or to disallow playback.</span></span> <span data-ttu-id="452e0-133">Se il plug-in restituisce **true** nel parametro *pfAllowPlay* , Windows Media Player tenta di riprodurre il contenuto.</span><span class="sxs-lookup"><span data-stu-id="452e0-133">If the plug-in returns **TRUE** in the *pfAllowPlay* parameter, Windows Media Player attempts to play the content.</span></span> <span data-ttu-id="452e0-134">La riproduzione avrà esito negativo anche se non esiste una licenza valida; Questo processo non elude Digital Rights Management (DRM).</span><span class="sxs-lookup"><span data-stu-id="452e0-134">Playback will still fail if a valid license does not exist; this process does not circumvent digital rights management (DRM).</span></span>
-   <span data-ttu-id="452e0-135">**L'utente richiede l'autorizzazione per masterizzare contenuto in un CD o DVD.**</span><span class="sxs-lookup"><span data-stu-id="452e0-135">**The user requests permission to burn content to a CD or DVD.**</span></span> <span data-ttu-id="452e0-136">Quando si verifica questa situazione, Windows Media Player chiama il metodo [IWMPSubscriptionService:: allowCDBurn](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowcdburn) del plug-in.</span><span class="sxs-lookup"><span data-stu-id="452e0-136">When this happens, Windows Media Player calls the plug-in's [IWMPSubscriptionService::allowCDBurn](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowcdburn) method.</span></span>
-   <span data-ttu-id="452e0-137">**L'utente tenta di sincronizzare il contenuto dell'archivio online con un dispositivo o Windows Media Player è pronto per sincronizzare automaticamente il contenuto di un negozio online con un dispositivo.**</span><span class="sxs-lookup"><span data-stu-id="452e0-137">**The user attempts to synchronize online store content with a device, or Windows Media Player is ready to automatically synchronize online store content with a device.**</span></span> <span data-ttu-id="452e0-138">Quando si verifica questa situazione, Windows Media Player chiama il metodo [IWMPSubscriptionService2::P repareforsync](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-prepareforsync) del plug-in per avvisare l'archivio online che un elemento multimediale sta per essere sincronizzato con un determinato dispositivo, identificato dal nome canonico.</span><span class="sxs-lookup"><span data-stu-id="452e0-138">When this happens, Windows Media Player calls the plug-in's [IWMPSubscriptionService2::prepareForSync](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-prepareforsync) method to alert the online store that a media item is about to be synchronized with a particular device, which is identified by its canonical name.</span></span> <span data-ttu-id="452e0-139">Si tratta di un'opportunità per l'archivio online per determinare se l'utente è autorizzato a sincronizzare l'elemento multimediale con il dispositivo.</span><span class="sxs-lookup"><span data-stu-id="452e0-139">This is an opportunity for the online store to determine whether the user is allowed to synchronize the media item with the device.</span></span> <span data-ttu-id="452e0-140">È anche un'opportunità per il negozio online di preparare il dispositivo per la sincronizzazione e aggiornare i record, ad esempio i conteggi della sincronizzazione, associati al dispositivo o all'elemento multimediale.</span><span class="sxs-lookup"><span data-stu-id="452e0-140">It is also an opportunity for the online store to prepare the device for synchronization and to update records, such as synchronization counts, associated with the device or the media item.</span></span> <span data-ttu-id="452e0-141">Il plug-in deve passare le attività di autorizzazione, preparazione e conservazione dei record a un thread separato e restituire immediatamente un risultato da **prepareForSync**.</span><span class="sxs-lookup"><span data-stu-id="452e0-141">The plug-in should pass the permission, preparation, and record-keeping tasks to a separate thread and return immediately from **prepareForSync**.</span></span> <span data-ttu-id="452e0-142">Al termine del lavoro, il thread separato deve notificare a Windows Media Player chiamando [IWMPSubscriptionServiceCallback:: OnComplete](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservicecallback-oncomplete).</span><span class="sxs-lookup"><span data-stu-id="452e0-142">When the separate thread has finished its work, it must notify Windows Media Player by calling [IWMPSubscriptionServiceCallback::onComplete](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservicecallback-oncomplete).</span></span>
-   <span data-ttu-id="452e0-143">**Un dispositivo diventa disponibile per l'elaborazione in background.**</span><span class="sxs-lookup"><span data-stu-id="452e0-143">**A device becomes available for background processing.**</span></span> <span data-ttu-id="452e0-144">Quando un dispositivo è connesso, Windows Media Player avvisa l'archivio online che il dispositivo è disponibile e inattivo chiamando [IWMPSubscriptionService2::D eviceavailable](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-deviceavailable).</span><span class="sxs-lookup"><span data-stu-id="452e0-144">When a device is connected, Windows Media Player alerts the online store that the device is available and idle by calling [IWMPSubscriptionService2::deviceAvailable](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-deviceavailable).</span></span>
-   <span data-ttu-id="452e0-145">**L'utente fa clic su un pulsante per attivare un archivio online in Windows Media Player.**</span><span class="sxs-lookup"><span data-stu-id="452e0-145">**The user clicks a button to activate an online store in Windows Media Player.**</span></span> <span data-ttu-id="452e0-146">Quando si verifica questa situazione, Windows Media Player chiama il metodo [IWMPSubscriptionService2:: serviceEvent](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-serviceevent) del plug-in.</span><span class="sxs-lookup"><span data-stu-id="452e0-146">When this occurs, Windows Media Player calls the plug-in's [IWMPSubscriptionService2::serviceEvent](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-serviceevent) method.</span></span> <span data-ttu-id="452e0-147">Windows Media Player chiama inoltre questo metodo quando l'utente passa a un altro servizio.</span><span class="sxs-lookup"><span data-stu-id="452e0-147">Windows Media Player also calls this method when the user switches to another service.</span></span>
-   <span data-ttu-id="452e0-148">**Windows Media Player entra in uno stato di bassa attività.**</span><span class="sxs-lookup"><span data-stu-id="452e0-148">**Windows Media Player enters a state of low activity.**</span></span> <span data-ttu-id="452e0-149">Quando si verifica questo problema, il lettore chiama il metodo [IWMPSubscriptionService:: startBackgroundProcessing](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-startbackgroundprocessing) del plug-in.</span><span class="sxs-lookup"><span data-stu-id="452e0-149">When this happens, the Player calls the plug-in's [IWMPSubscriptionService::startBackgroundProcessing](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-startbackgroundprocessing) method.</span></span> <span data-ttu-id="452e0-150">Il negozio online può usare questa opportunità per avviare o riattivare tutti i thread che eseguono attività in background, ad esempio il rinnovo di licenze scadute o la compilazione di dati di conteggio dei Play.</span><span class="sxs-lookup"><span data-stu-id="452e0-150">The online store can use this opportunity to start or wake up any threads that perform background tasks, such as renewing expired licenses or compiling play-count data.</span></span>
-   <span data-ttu-id="452e0-151">**Windows Media Player entra in uno stato di attività elevata.**</span><span class="sxs-lookup"><span data-stu-id="452e0-151">**Windows Media Player enters a state of high activity.**</span></span> <span data-ttu-id="452e0-152">Quando si verifica questa situazione, Windows Media Player chiama il metodo [IWMPSubscriptionService2:: stopBackgroundProcessing](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-stopbackgroundprocessing) del plug-in.</span><span class="sxs-lookup"><span data-stu-id="452e0-152">When this happens, Windows Media Player calls the plug-in's [IWMPSubscriptionService2::stopBackgroundProcessing](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-stopbackgroundprocessing) method.</span></span> <span data-ttu-id="452e0-153">In questo modo si informa il plug-in che deve sospendere tutti i thread che eseguono attività in background.</span><span class="sxs-lookup"><span data-stu-id="452e0-153">This informs the plug-in that it must suspend any threads that are performing background tasks.</span></span>

<span data-ttu-id="452e0-154">Windows Media Player rilascia il componente negozio online al termine della sessione del lettore.</span><span class="sxs-lookup"><span data-stu-id="452e0-154">Windows Media Player releases the online store component when the Player session ends.</span></span> <span data-ttu-id="452e0-155">Al rilascio, il componente deve interrompere l'elaborazione in background in corso e quindi arrestare.</span><span class="sxs-lookup"><span data-stu-id="452e0-155">Upon release, the component must interrupt any background processing in progress and then shut down.</span></span>

## <a name="related-topics"></a><span data-ttu-id="452e0-156">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="452e0-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="452e0-157">**Interfaccia IWMPSubscriptionService**</span><span class="sxs-lookup"><span data-stu-id="452e0-157">**IWMPSubscriptionService Interface**</span></span>](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice)
</dt> <dt>

[<span data-ttu-id="452e0-158">**Interfaccia IWMPSubscriptionService2**</span><span class="sxs-lookup"><span data-stu-id="452e0-158">**IWMPSubscriptionService2 Interface**</span></span>](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice2)
</dt> <dt>

[<span data-ttu-id="452e0-159">**Interfaccia IWMPSubscriptionServiceCallback**</span><span class="sxs-lookup"><span data-stu-id="452e0-159">**IWMPSubscriptionServiceCallback Interface**</span></span>](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservicecallback)
</dt> <dt>

[<span data-ttu-id="452e0-160">**Digitare 2 esempi di archivio online**</span><span class="sxs-lookup"><span data-stu-id="452e0-160">**Type 2 Online Store Samples**</span></span>](type-2-online-store-samples.md)
</dt> </dl>

 

 




