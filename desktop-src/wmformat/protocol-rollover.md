---
title: Rollover del protocollo
description: Rollover del protocollo
ms.assetid: 61db5e2b-4858-446e-9a27-e0305b46683d
keywords:
- Windows Media Format SDK, rollover del protocollo
- ASF (Advanced Systems Format), rollover del protocollo
- ASF (formato avanzato dei sistemi), rollover del protocollo
- rollover del protocollo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b2de8d0496467535f5740a10082f82e285c11ef6
ms.sourcegitcommit: 48d1c892045445bcbd0f22bafa2fd3861ffaa6e7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/19/2020
ms.locfileid: "104046312"
---
# <a name="protocol-rollover"></a><span data-ttu-id="87eb1-107">Rollover del protocollo</span><span class="sxs-lookup"><span data-stu-id="87eb1-107">Protocol Rollover</span></span>

<span data-ttu-id="87eb1-108">Il rollover del protocollo è un processo in cui l'oggetto Reader individua il protocollo di streaming migliore disponibile da un server.</span><span class="sxs-lookup"><span data-stu-id="87eb1-108">Protocol rollover is a process whereby the reader object discovers the best streaming protocol available from a server.</span></span> <span data-ttu-id="87eb1-109">Il lettore usa il rollover del protocollo ogni volta che viene aperto un URL che contiene uno schema "MMS".</span><span class="sxs-lookup"><span data-stu-id="87eb1-109">The reader uses protocol rollover whenever it opens a URL that contains an "mms" scheme.</span></span>

<span data-ttu-id="87eb1-110">Il lettore supporta diversi protocolli:</span><span class="sxs-lookup"><span data-stu-id="87eb1-110">The reader supports several protocols:</span></span>

-   <span data-ttu-id="87eb1-111">Protocollo RTSP (Real Time Streaming Protocol)</span><span class="sxs-lookup"><span data-stu-id="87eb1-111">Real Time Streaming Protocol (RTSP)</span></span>
-   <span data-ttu-id="87eb1-112">Hypertext Transfer Protocol (HTTP)</span><span class="sxs-lookup"><span data-stu-id="87eb1-112">Hypertext Transfer Protocol (HTTP)</span></span>
-   <span data-ttu-id="87eb1-113">Microsoft Media Server (MMS)</span><span class="sxs-lookup"><span data-stu-id="87eb1-113">Microsoft Media Server (MMS)</span></span>

<span data-ttu-id="87eb1-114">I protocolli RTSP e MMS sono entrambi disponibili in due versioni, una con [*UDP*](wmformat-glossary.md) come protocollo di recapito sottostante e l'altra con TCP.</span><span class="sxs-lookup"><span data-stu-id="87eb1-114">The RTSP and MMS protocols both come in two flavors, one using [*UDP*](wmformat-glossary.md) as the underlying delivery protocol, and the other using TCP.</span></span>

<span data-ttu-id="87eb1-115">L'oggetto Reader usa sempre TCP per i comandi di controllo della riproduzione, ma può usare TCP o UDP per il recapito del contenuto trasmesso.</span><span class="sxs-lookup"><span data-stu-id="87eb1-115">The reader object always uses TCP for playback control commands, but it can use either TCP or UDP for delivery of the streamed content.</span></span> <span data-ttu-id="87eb1-116">Per la distribuzione del contenuto è preferibile il protocollo UDP, perché impone un sovraccarico della larghezza di banda inferiore rispetto a TCP.</span><span class="sxs-lookup"><span data-stu-id="87eb1-116">UDP is preferred for content delivery, because it imposes less bandwidth overhead than TCP.</span></span> <span data-ttu-id="87eb1-117">Il protocollo TCP garantisce un trasporto affidabile attraverso l'uso di "circuiti virtuali", ma il costo di questa operazione significa che TCP non è altrettanto adatto per i flussi multimediali digitali, in cui l'uso efficiente della larghezza di banda è più importante per i pacchetti persi occasionali.</span><span class="sxs-lookup"><span data-stu-id="87eb1-117">The TCP protocol ensures reliable transport through the use of "virtual circuits," but the cost of doing so means that TCP is not as well suited for digital media streams, where efficient use of bandwidth is more important that occasional lost packets.</span></span>

<span data-ttu-id="87eb1-118">Quando un URL specifica "mms://", il lettore tenta di usare i protocolli seguenti per il recapito dei dati, nell'ordine seguente:</span><span class="sxs-lookup"><span data-stu-id="87eb1-118">When a URL specifies "mms://", the reader attempts to use the following protocols for data delivery, in the following order:</span></span>

1.  <span data-ttu-id="87eb1-119">RTSPt (RTSP con UDP)</span><span class="sxs-lookup"><span data-stu-id="87eb1-119">RTSPU (RTSP using UDP)</span></span>
2.  <span data-ttu-id="87eb1-120">RTSPt (RTSP con TCP)</span><span class="sxs-lookup"><span data-stu-id="87eb1-120">RTSPT (RTSP using TCP)</span></span>
3.  <span data-ttu-id="87eb1-121">MMSU (MMS con UDP)</span><span class="sxs-lookup"><span data-stu-id="87eb1-121">MMSU (MMS using UDP)</span></span>
4.  <span data-ttu-id="87eb1-122">MMST (MMS con TCP)</span><span class="sxs-lookup"><span data-stu-id="87eb1-122">MMST (MMS using TCP)</span></span>
5.  <span data-ttu-id="87eb1-123">HTTP</span><span class="sxs-lookup"><span data-stu-id="87eb1-123">HTTP</span></span>

<span data-ttu-id="87eb1-124">HTTP è un protocollo unidirezionale basato su TCP ed è il protocollo utilizzato dai server Web.</span><span class="sxs-lookup"><span data-stu-id="87eb1-124">HTTP is a one-way protocol based on TCP, and is the protocol used by Web servers.</span></span> <span data-ttu-id="87eb1-125">Lo streaming con HTTP è meno efficiente rispetto all'uso di RTSP.</span><span class="sxs-lookup"><span data-stu-id="87eb1-125">Streaming with HTTP is less efficient that using RTSP.</span></span> <span data-ttu-id="87eb1-126">Tuttavia, la maggior parte dei firewall è configurata per accettare richieste HTTP, mentre in genere rifiutano altri protocolli di streaming.</span><span class="sxs-lookup"><span data-stu-id="87eb1-126">However, most firewalls are configured to accept HTTP requests, whereas they typically reject other streaming protocols.</span></span>

<span data-ttu-id="87eb1-127">Windows Media Services 9 Series in Microsoft Windows Server 2003 rifiuterà tutte le richieste MMSU o MMST da un lettore di Windows Media Format SDK, perché RTSP è il protocollo di streaming preferito.</span><span class="sxs-lookup"><span data-stu-id="87eb1-127">Windows Media Services 9 Series in Microsoft Windows Server 2003 will reject any MMSU or MMST requests from a Windows Media Format SDK reader, because RTSP is the preferred streaming protocol.</span></span> <span data-ttu-id="87eb1-128">I servizi Windows Media versione 4,1 e versioni precedenti non supportano RTSP.</span><span class="sxs-lookup"><span data-stu-id="87eb1-128">Windows Media Services version 4.1 and earlier do not support RTSP.</span></span> <span data-ttu-id="87eb1-129">In questo caso l'oggetto Reader esegue il fallback a MMSU o HTTP.</span><span class="sxs-lookup"><span data-stu-id="87eb1-129">In this case the reader object falls back to MMSU or HTTP.</span></span>

<span data-ttu-id="87eb1-130">Il rollover del protocollo non si applica se lo schema URL fornisce un protocollo specifico, ad esempio "rtspu://" per RTSPr o "https://" per HTTP.</span><span class="sxs-lookup"><span data-stu-id="87eb1-130">Protocol rollover does not apply if the URL scheme gives a specific protocol, such as "rtspu://" for RTSPU or "https://" for HTTP.</span></span> <span data-ttu-id="87eb1-131">Se lo schema dell'URL è "rtsp://", il lettore cerca RTSPt e RTSPt, ma non altri.</span><span class="sxs-lookup"><span data-stu-id="87eb1-131">If the URL scheme is "rtsp://", the reader tries RTSPU and RTSPT, but no others.</span></span>

<span data-ttu-id="87eb1-132">Quando il lettore apre un file, è possibile eseguire una query sul protocollo usato chiamando il metodo [**IWMReaderAdvanced2:: Getprotocolname**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-getprotocolname) sul Reader.</span><span class="sxs-lookup"><span data-stu-id="87eb1-132">After the reader opens a file, you can query which protocol it is using by calling the [**IWMReaderAdvanced2::GetProtocolName**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-getprotocolname) method on the reader.</span></span> <span data-ttu-id="87eb1-133">Durante lo streaming o il download del contenuto, questo metodo restituisce il nome non appena il contenuto viene memorizzato nella cache completamente, il metodo **Getprotocolname** restituisce la stringa "cache".</span><span class="sxs-lookup"><span data-stu-id="87eb1-133">While the content is being streamed or downloaded, this method returns the name as soon as the content is completely cached, the **GetProtocolName** method returns the string "Cache."</span></span>

<span data-ttu-id="87eb1-134">Per ottenere i nomi di tutti i protocolli di Windows Media Server supportati dal lettore, chiamare il metodo [**IWMReaderNetworkConfig:: GetSupportedProtocolName**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-getsupportedprotocolname) sul Reader.</span><span class="sxs-lookup"><span data-stu-id="87eb1-134">To get the names of all the Windows Media server protocols that the reader supports, call the [**IWMReaderNetworkConfig::GetSupportedProtocolName**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-getsupportedprotocolname) method on the reader.</span></span> <span data-ttu-id="87eb1-135">È possibile disabilitare uno o più protocolli nell'elenco di rollover del protocollo del lettore usando l'interfaccia **IWMReaderNetworkConfig** .</span><span class="sxs-lookup"><span data-stu-id="87eb1-135">You can disable one or more of the protocols in the reader's protocol rollover list, using **IWMReaderNetworkConfig** interface.</span></span> <span data-ttu-id="87eb1-136">Ad esempio, il metodo [**IWMReaderNetworkConfig:: SetEnableTCP**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-setenabletcp) Abilita o Disabilita i protocolli basati su TCP e [**IWMReaderNetworkConfig:: SetEnableUDP**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-setenableudp) Abilita o Disabilita i protocolli basati su UDP.</span><span class="sxs-lookup"><span data-stu-id="87eb1-136">For example, the [**IWMReaderNetworkConfig::SetEnableTCP**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-setenabletcp) method enables or disables the TCP-based protocols, and [**IWMReaderNetworkConfig::SetEnableUDP**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-setenableudp) enables or disables the UDP-based protocols.</span></span> <span data-ttu-id="87eb1-137">Questi metodi si applicano solo al rollover del protocollo. i protocolli sono ancora disponibili se lo schema URL contiene un protocollo specifico.</span><span class="sxs-lookup"><span data-stu-id="87eb1-137">These methods apply only to protocol rollover; the protocols are still available if the URL scheme contains a specific protocol.</span></span> <span data-ttu-id="87eb1-138">In genere non esiste alcun motivo per disabilitare i protocolli utilizzati nel rollover del protocollo. Questa operazione può comportare un peggioramento delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="87eb1-138">There is usually no reason to disable any of the protocols used in protocol rollover; doing so can degrade performance.</span></span> <span data-ttu-id="87eb1-139">Tuttavia, potrebbe essere utile per i test.</span><span class="sxs-lookup"><span data-stu-id="87eb1-139">However, it might be useful for testing.</span></span>

 

 




