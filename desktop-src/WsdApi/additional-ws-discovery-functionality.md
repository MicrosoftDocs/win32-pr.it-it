---
description: Lo scopo di questo argomento è descrivere la funzionalità di individuazione implementata da WSDAPI, ma non diversamente descritta nelle specifiche DPWS o WS-Discovery.
ms.assetid: ae7eff53-c932-4cba-9e71-c60f308f0e2d
title: Funzionalità di WS-Discovery aggiuntive
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ce9856605273bec9c757e0b29c389991bf061309
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "104233246"
---
# <a name="additional-ws-discovery-functionality"></a><span data-ttu-id="3b610-103">Funzionalità di WS-Discovery aggiuntive</span><span class="sxs-lookup"><span data-stu-id="3b610-103">Additional WS-Discovery Functionality</span></span>

<span data-ttu-id="3b610-104">In alcuni casi, il [profilo dispositivi per i servizi Web](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) e le specifiche correlate non definiscono in modo esplicito le funzionalità di implementazione.</span><span class="sxs-lookup"><span data-stu-id="3b610-104">In some cases, the [Devices Profile for Web Services](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) and related specifications do not explicitly define implementation functionality.</span></span> <span data-ttu-id="3b610-105">Ad esempio, la specifica [WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) non definisce il comportamento del client e dell'host negli ambienti multihomed.</span><span class="sxs-lookup"><span data-stu-id="3b610-105">For example, the [WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) specification does not define client and host behavior in multi-homed environments.</span></span> <span data-ttu-id="3b610-106">Quando WSDAPI è stato implementato, alcune funzionalità di individuazione sono state aggiunte oltre la funzionalità definita nella specifica.</span><span class="sxs-lookup"><span data-stu-id="3b610-106">When WSDAPI was implemented, some discovery functionality was added beyond the functionality defined in the specification.</span></span>

<span data-ttu-id="3b610-107">WSDAPI implementa anche parti selezionate del CD1 WS-Discovery v 1.1 per la comunicazione con un proxy di individuazione su HTTP.</span><span class="sxs-lookup"><span data-stu-id="3b610-107">WSDAPI also implements selected portions of WS-Discovery v1.1 CD1 for communicating with a discovery proxy over HTTP.</span></span>

<span data-ttu-id="3b610-108">Lo scopo di questo argomento è descrivere la funzionalità di individuazione implementata da WSDAPI, ma non diversamente descritta nelle specifiche DPWS o WS-Discovery.</span><span class="sxs-lookup"><span data-stu-id="3b610-108">The purpose of this topic is to describe the discovery functionality implemented by WSDAPI but not otherwise described in the DPWS or WS-Discovery specifications.</span></span>

## <a name="ipv6-addresses-and-the-soapudp-uri-format"></a><span data-ttu-id="3b610-109">Indirizzi IPv6 e formato URI SOAP. UDP</span><span class="sxs-lookup"><span data-stu-id="3b610-109">IPv6 addresses and the soap.udp URI format</span></span>

<span data-ttu-id="3b610-110">SOAP-over-UDP e WS-Discovery non descrivono in modo esplicito la modalità di rappresentazione di un indirizzo IPv6 letterale nel formato URI SOAP. UDP.</span><span class="sxs-lookup"><span data-stu-id="3b610-110">SOAP-over-UDP and WS-Discovery do not explicitly describe how a literal IPv6 address is represented in the soap.udp URI format.</span></span> <span data-ttu-id="3b610-111">[RFC 2396](https://www.ietf.org/rfc/rfc2396.txt), denominato "Uniform Resource Identifier (URI): sintassi generica", indica che gli indirizzi IPv6 letterali non sono supportati dal formato URI SOAP. UDP.</span><span class="sxs-lookup"><span data-stu-id="3b610-111">[RFC 2396](https://www.ietf.org/rfc/rfc2396.txt), entitled "Uniform Resource Identifiers (URI): Generic Syntax", indicates that literal IPv6 addresses are not supported by the soap.udp URI format.</span></span>

<span data-ttu-id="3b610-112">Per semplicità, WSDAPI riconosce gli indirizzi IPv6 racchiusi tra parentesi quadre nello schema SOAP. UDP.</span><span class="sxs-lookup"><span data-stu-id="3b610-112">For simplicity, WSDAPI recognizes IPv6 addresses enclosed in square brackets in the soap.udp scheme.</span></span> <span data-ttu-id="3b610-113">Ad esempio, l'indirizzo `soap.udp://[2001:abcd:0001:0002:0003:0004:0005:0032]:3702` viene riconosciuto da wsdapi.</span><span class="sxs-lookup"><span data-stu-id="3b610-113">For example, the address `soap.udp://[2001:abcd:0001:0002:0003:0004:0005:0032]:3702` is recognized by WSDAPI.</span></span> <span data-ttu-id="3b610-114">Questo tipo di gestione è simile a quello degli indirizzi IPv6 gestiti in HTTP.</span><span class="sxs-lookup"><span data-stu-id="3b610-114">This is similar to how IPv6 addresses are handled in HTTP.</span></span>

## <a name="hello-and-xaddrs"></a><span data-ttu-id="3b610-115">Hello e XAddrs</span><span class="sxs-lookup"><span data-stu-id="3b610-115">Hello and XAddrs</span></span>

<span data-ttu-id="3b610-116">L'oggetto host DPWS di WSDAPI non invierà mai un messaggio WS-Discovery [Hello](hello-message.md) con [XAddrs](xaddr-validation-rules.md) nel corpo del messaggio.</span><span class="sxs-lookup"><span data-stu-id="3b610-116">WSDAPI's DPWS hosting object will never send a WS-Discovery [Hello](hello-message.md) message with [XAddrs](xaddr-validation-rules.md) in the message body.</span></span> <span data-ttu-id="3b610-117">Un client invierà sempre un messaggio di [risoluzione](resolve-message.md) dopo la ricezione di un messaggio Hello se il client deve ottenere il XAddrs.</span><span class="sxs-lookup"><span data-stu-id="3b610-117">A client will always send a [Resolve](resolve-message.md) message after receiving a Hello message if the client needs to get the XAddrs.</span></span>

<span data-ttu-id="3b610-118">Questo approccio presenta due vantaggi.</span><span class="sxs-lookup"><span data-stu-id="3b610-118">There are two benefits of this approach.</span></span> <span data-ttu-id="3b610-119">In primo luogo, un dispositivo basato su WSDAPI non esporrà mai XAddrs che divulgano gli indirizzi IP delle reti private.</span><span class="sxs-lookup"><span data-stu-id="3b610-119">First, a device built on WSDAPI will never expose XAddrs that disclose the IP addresses of private networks.</span></span> <span data-ttu-id="3b610-120">In secondo luogo, un dispositivo basato su WSDAPI espone solo XAddrs accessibili al client, il che significa che gli indirizzi IPv6 non vengono mai inviati a un client IPv4.</span><span class="sxs-lookup"><span data-stu-id="3b610-120">Secondly, a device built on WSDAPI only exposes XAddrs that are accessible to the client, which means that IPv6 addresses are never sent to an IPv4 client.</span></span>

<span data-ttu-id="3b610-121">Quando viene ricevuto un [Probe](probe-message.md) o un messaggio di risoluzione, viene inviato solo un singolo XAddr in risposta.</span><span class="sxs-lookup"><span data-stu-id="3b610-121">When a [Probe](probe-message.md) or Resolve message is received, only a single XAddr is sent in response.</span></span> <span data-ttu-id="3b610-122">Il XAddr inviato corrisponde all'indirizzo locale su cui è stata ricevuta la richiesta.</span><span class="sxs-lookup"><span data-stu-id="3b610-122">The sent XAddr corresponds to the local address on which the request was received.</span></span> <span data-ttu-id="3b610-123">Se la richiesta è stata ricevuta tra subnet su IPv6, WSDAPI fornirà un indirizzo IPv6 globale nella risposta.</span><span class="sxs-lookup"><span data-stu-id="3b610-123">If the request was received across subnets over IPv6, WSDAPI will provide a global IPv6 address in the response.</span></span>

## <a name="preferred-addresses"></a><span data-ttu-id="3b610-124">Indirizzi preferiti</span><span class="sxs-lookup"><span data-stu-id="3b610-124">Preferred addresses</span></span>

<span data-ttu-id="3b610-125">Un dispositivo può fornire più XAddrs in un messaggio [Hello](hello-message.md), [ProbeMatch](probematches-message.md)o [ResolveMatch](resolvematches-message.md) .</span><span class="sxs-lookup"><span data-stu-id="3b610-125">A device can provide multiple XAddrs in a [Hello](hello-message.md), [ProbeMatch](probematches-message.md), or [ResolveMatch](resolvematches-message.md) message.</span></span> <span data-ttu-id="3b610-126">Un servizio può essere disponibile anche in più endpoint con indirizzi di trasporto diversi.</span><span class="sxs-lookup"><span data-stu-id="3b610-126">A service can also be available at multiple endpoints with different transport addresses.</span></span> <span data-ttu-id="3b610-127">In questi casi, WSDAPI proverà a comunicare con il dispositivo sul primo indirizzo utilizzabile che trova.</span><span class="sxs-lookup"><span data-stu-id="3b610-127">In these cases, WSDAPI will try to communicate with the device on the first usable address it finds.</span></span> <span data-ttu-id="3b610-128">Un indirizzo può essere utilizzato se è un protocollo disponibile, ad esempio IPv4 in un computer in cui è installato IPv4 o IPv6 in un computer in cui è installato IPv6.</span><span class="sxs-lookup"><span data-stu-id="3b610-128">An address is usable if it is from an available protocol, such as IPv4 on a machine where IPv4 is installed or IPv6 on a machine where IPv6 is installed.</span></span> <span data-ttu-id="3b610-129">Inoltre, se l'indirizzo proviene da un dispositivo o un servizio che non si trova nella subnet locale, può essere utilizzato solo se è IPv4, sito IPv6 locale o collegamento IPv6 locale.</span><span class="sxs-lookup"><span data-stu-id="3b610-129">Additionally, if the address came from a device or service that is not on the local subnet, it is usable only if it is IPv4, IPv6 site local, or IPv6 link local.</span></span>

## <a name="wsdl-in-metadata-exchange"></a><span data-ttu-id="3b610-130">WSDL nello scambio di metadati</span><span class="sxs-lookup"><span data-stu-id="3b610-130">WSDL in metadata exchange</span></span>

<span data-ttu-id="3b610-131">I dispositivi e i servizi basati su WSDAPI non forniscono il proprio WSDL nello scambio di metadati, a meno che l'applicazione non fornisca queste informazioni.</span><span class="sxs-lookup"><span data-stu-id="3b610-131">Devices and services built on WSDAPI do not provide their WSDL in metadata exchange unless extended by the application to provide this information.</span></span> <span data-ttu-id="3b610-132">Per impostazione predefinita, il provisioning WSDL non fa parte del modello di programmazione.</span><span class="sxs-lookup"><span data-stu-id="3b610-132">By default, WSDL provision is not part of the programming model.</span></span>

## <a name="app_max_delay"></a><span data-ttu-id="3b610-133">\_ritardo massimo \_ app</span><span class="sxs-lookup"><span data-stu-id="3b610-133">APP\_MAX\_DELAY</span></span>

<span data-ttu-id="3b610-134">DPWS definisce \_ \_ il ritardo massimo dell'app, l'intervallo casuale per ritardare la ricezione di un [Probe](probe-message.md) e l'invio di un [ProbeMatch](probematches-message.md), come 5.000 millisecondi.</span><span class="sxs-lookup"><span data-stu-id="3b610-134">DPWS defines APP\_MAX\_DELAY, the random interval to delay between receiving a [Probe](probe-message.md) and sending a [ProbeMatch](probematches-message.md), as 5,000 milliseconds.</span></span> <span data-ttu-id="3b610-135">Windows Firewall richiede che il modello di risposta multicast request/unicast per UDP funzioni solo all'interno della finestra del firewall di 4 secondi.</span><span class="sxs-lookup"><span data-stu-id="3b610-135">Windows Firewall requires that the multicast request/unicast response model for UDP will only work within the 4 second firewall window.</span></span> <span data-ttu-id="3b610-136">Di conseguenza, WSDAPI trasmetterà le risposte in 2.500 ms o meno, invece della finestra 5.000 ms descritta dal \_ ritardo massimo dell'app \_ .</span><span class="sxs-lookup"><span data-stu-id="3b610-136">As a result, WSDAPI will transmit responses in 2,500 ms or less, instead of the 5,000 ms window described by APP\_MAX\_DELAY.</span></span>

## <a name="iana-port-reservations"></a><span data-ttu-id="3b610-137">Prenotazioni di porte IANA</span><span class="sxs-lookup"><span data-stu-id="3b610-137">IANA port reservations</span></span>

<span data-ttu-id="3b610-138">WSDAPI usa la porta TCP 5357 per il traffico HTTP e la porta TCP 5358 per il traffico HTTPS per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="3b610-138">WSDAPI uses TCP port 5357 for HTTP traffic and TCP port 5358 for HTTPS traffic by default.</span></span> <span data-ttu-id="3b610-139">Queste porte sono riservate per i processi con privilegi più bassi tramite una prenotazione URL in HTTP.sys e sono riservate anche con IANA.</span><span class="sxs-lookup"><span data-stu-id="3b610-139">These ports are reserved for lower privilege processes through a URL reservation in HTTP.sys, and are also reserved with IANA.</span></span>

## <a name="udp-port-sharing"></a><span data-ttu-id="3b610-140">Condivisione porte UDP</span><span class="sxs-lookup"><span data-stu-id="3b610-140">UDP port sharing</span></span>

<span data-ttu-id="3b610-141">WSDAPI usa la condivisione delle porte.</span><span class="sxs-lookup"><span data-stu-id="3b610-141">WSDAPI uses port sharing.</span></span> <span data-ttu-id="3b610-142">I messaggi unicast inviati alla porta 3702 potrebbero non essere gestiti correttamente da tutte le applicazioni basate su WSDAPI.</span><span class="sxs-lookup"><span data-stu-id="3b610-142">Unicast messages sent to port 3702 may not be properly handled by all WSDAPI-based applications.</span></span> <span data-ttu-id="3b610-143">Se un'applicazione viene associata esclusivamente alla porta 3702, può impedire che le applicazioni basate su WSDAPI utilizzino correttamente tale porta.</span><span class="sxs-lookup"><span data-stu-id="3b610-143">If an application binds exclusively to port 3702, it may prevent WSDAPI-based applications from using that port correctly.</span></span>

## <a name="ws-discovery-v11-cd1-proxy"></a><span data-ttu-id="3b610-144">Proxy CD1 WS-Discovery v 1.1</span><span class="sxs-lookup"><span data-stu-id="3b610-144">WS-Discovery v1.1 CD1 Proxy</span></span>

<span data-ttu-id="3b610-145">WSDAPI cercherà e comunicherà con un proxy di individuazione che implementi il protocollo della modalità gestita di WS-Discovery v 1.1 CD1.</span><span class="sxs-lookup"><span data-stu-id="3b610-145">WSDAPI will search for and communicate with a discovery proxy that implements the WS-Discovery v1.1 CD1 managed mode protocol.</span></span> <span data-ttu-id="3b610-146">WS-Discovery v 1.1 CD1 è la prima revisione di WS-Discovery includere una descrizione esplicita di un protocollo HTTP per la comunicazione tra un proxy e un client o un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="3b610-146">WS-Discovery v1.1 CD1 is the first revision of WS-Discovery to include an explicit description of an HTTP protocol for communication between a proxy and a client or device.</span></span>

<span data-ttu-id="3b610-147">Per limitare il numero di versioni simultanee usate nelle richieste multicast, WSDAPI invia una richiesta di probe di WS-Discovery nello spazio dei nomi 2005/04, ma cerca il tipo di DiscoveryProxy CD1 WS-Discovery v 1.1.</span><span class="sxs-lookup"><span data-stu-id="3b610-147">To limit the number of concurrent versions used in multicast requests, WSDAPI sends a WS-Discovery Probe request in the 2005/04 namespace, but searches for the WS-Discovery v1.1 CD1 DiscoveryProxy type.</span></span> <span data-ttu-id="3b610-148">Se un proxy risponde, WSDAPI invierà un probe HTTP o risolvono la richiesta all'endpoint proxy specificato come definito in WS-Discovery v 1.1 CD1.</span><span class="sxs-lookup"><span data-stu-id="3b610-148">If a proxy responds, WSDAPI will send an HTTP Probe or Resolve request to the specified proxy endpoint as defined in WS-Discovery v1.1 CD1.</span></span>

 

 



