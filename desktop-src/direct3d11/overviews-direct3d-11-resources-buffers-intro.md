---
title: Introduzione ai buffer in Direct3D 11
description: Una risorsa buffer è una raccolta di dati completamente tipizzati raggruppati in elementi.
ms.assetid: e33ca01e-f13c-4f91-b0db-2b2bc6b4fd8f
keywords:
- buffer costante, informazioni
- vertex buffer, informazioni
- buffer di indice, informazioni
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 241ade0721ae87b1371586bc901ee18f8975b53f
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104337895"
---
# <a name="introduction-to-buffers-in-direct3d-11"></a><span data-ttu-id="4fb71-106">Introduzione ai buffer in Direct3D 11</span><span class="sxs-lookup"><span data-stu-id="4fb71-106">Introduction to Buffers in Direct3D 11</span></span>

<span data-ttu-id="4fb71-107">Una risorsa buffer è una raccolta di dati completamente tipizzati raggruppati in elementi.</span><span class="sxs-lookup"><span data-stu-id="4fb71-107">A buffer resource is a collection of fully typed data grouped into elements.</span></span> <span data-ttu-id="4fb71-108">È possibile usare i buffer per archiviare un'ampia gamma di dati, inclusi i vettori di posizione, i vettori normali, le coordinate di trama in un buffer dei vertici, gli indici in un buffer di indice o lo stato del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="4fb71-108">You can use buffers to store a wide variety of data, including position vectors, normal vectors, texture coordinates in a vertex buffer, indexes in an index buffer, or device state.</span></span> <span data-ttu-id="4fb71-109">Un elemento buffer è costituito da 1 a 4 componenti.</span><span class="sxs-lookup"><span data-stu-id="4fb71-109">A buffer element is made up of 1 to 4 components.</span></span> <span data-ttu-id="4fb71-110">Gli elementi del buffer possono includere valori di dati compressi, ad esempio i valori della superficie R8G8B8A8, singoli interi a 8 bit o valori a virgola mobile a 4 32 bit.</span><span class="sxs-lookup"><span data-stu-id="4fb71-110">Buffer elements can include packed data values (like R8G8B8A8 surface values), single 8-bit integers, or four 32-bit floating point values.</span></span>

<span data-ttu-id="4fb71-111">Un buffer viene creato come una risorsa non strutturata.</span><span class="sxs-lookup"><span data-stu-id="4fb71-111">A buffer is created as an unstructured resource.</span></span> <span data-ttu-id="4fb71-112">Poiché non è strutturato, un buffer non può contenere alcun livello di mipmap, non può essere filtrato durante la lettura e non può essere multicampionato.</span><span class="sxs-lookup"><span data-stu-id="4fb71-112">Because it is unstructured, a buffer cannot contain any mipmap levels, it cannot get filtered when read, and it cannot be multisampled.</span></span>

## <a name="buffer-types"></a><span data-ttu-id="4fb71-113">Tipi di buffer</span><span class="sxs-lookup"><span data-stu-id="4fb71-113">Buffer Types</span></span>

<span data-ttu-id="4fb71-114">Di seguito sono riportati i tipi di risorse del buffer supportati da Direct3D 11.</span><span class="sxs-lookup"><span data-stu-id="4fb71-114">The following are the buffer resource types supported by Direct3D 11.</span></span> <span data-ttu-id="4fb71-115">Tutti i tipi di buffer sono incapsulati dall'interfaccia [**ID3D11Buffer**](/windows/desktop/api/D3D11/nn-d3d11-id3d11buffer) .</span><span class="sxs-lookup"><span data-stu-id="4fb71-115">All buffer types are encapsulated by the [**ID3D11Buffer**](/windows/desktop/api/D3D11/nn-d3d11-id3d11buffer) interface.</span></span>

-   [<span data-ttu-id="4fb71-116">Buffer vertex</span><span class="sxs-lookup"><span data-stu-id="4fb71-116">Vertex Buffer</span></span>](#vertex-buffer)
-   [<span data-ttu-id="4fb71-117">Buffer indice</span><span class="sxs-lookup"><span data-stu-id="4fb71-117">Index Buffer</span></span>](#index-buffer)
-   [<span data-ttu-id="4fb71-118">Buffer costante</span><span class="sxs-lookup"><span data-stu-id="4fb71-118">Constant Buffer</span></span>](#constant-buffer)

### <a name="vertex-buffer"></a><span data-ttu-id="4fb71-119">Buffer vertex</span><span class="sxs-lookup"><span data-stu-id="4fb71-119">Vertex Buffer</span></span>

<span data-ttu-id="4fb71-120">Un buffer di vertici contiene i dati dei vertici usati per definire la geometria.</span><span class="sxs-lookup"><span data-stu-id="4fb71-120">A vertex buffer contains the vertex data used to define your geometry.</span></span> <span data-ttu-id="4fb71-121">I dati dei vertici includono coordinate di posizione, dati di colore, dati di coordinate di trama, dati normali e così via.</span><span class="sxs-lookup"><span data-stu-id="4fb71-121">Vertex data includes position coordinates, color data, texture coordinate data, normal data, and so on.</span></span>

<span data-ttu-id="4fb71-122">L'esempio più semplice di un vertex buffer è quello che contiene solo i dati di posizione.</span><span class="sxs-lookup"><span data-stu-id="4fb71-122">The simplest example of a vertex buffer is one that only contains position data.</span></span> <span data-ttu-id="4fb71-123">Può essere visualizzato come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="4fb71-123">It can be visualized like the following illustration.</span></span>

![illustrazione di un buffer di vertice che contiene i dati relativi alla posizione](images/d3d10-resources-single-element-vb2.png)

<span data-ttu-id="4fb71-125">Più spesso, un buffer di vertici contiene tutti i dati necessari per specificare in modo completo i vertici 3D.</span><span class="sxs-lookup"><span data-stu-id="4fb71-125">More often, a vertex buffer contains all the data needed to fully specify 3D vertices.</span></span> <span data-ttu-id="4fb71-126">Un esempio può essere un buffer vertex che contiene le coordinate di trama, normali e di posizione per vertice.</span><span class="sxs-lookup"><span data-stu-id="4fb71-126">An example of this could be a vertex buffer that contains per-vertex position, normal and texture coordinates.</span></span> <span data-ttu-id="4fb71-127">Questi dati sono in genere organizzati come set di elementi per vertice, come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="4fb71-127">This data is usually organized as sets of per-vertex elements, as shown in the following illustration.</span></span>

![illustrazione di un buffer vertex che contiene i dati relativi alla posizione, al normale e alla trama](images/d3d10-vertex-buffer-element.png)

<span data-ttu-id="4fb71-129">Questo buffer vertex contiene dati per vertice. ogni vertice archivia tre elementi (posizione, normale e coordinate di trama).</span><span class="sxs-lookup"><span data-stu-id="4fb71-129">This vertex buffer contains per-vertex data; each vertex stores three elements (position, normal, and texture coordinates).</span></span> <span data-ttu-id="4fb71-130">La posizione e la normale vengono in genere specificate usando float a 3 32 bit (DXGI \_ Format \_ R32G32B32 \_ float) e le coordinate di trama usando float a 2 32 bit (DXGI \_ Format \_ R32G32 \_ float).</span><span class="sxs-lookup"><span data-stu-id="4fb71-130">The position and normal are each typically specified using three 32-bit floats (DXGI\_FORMAT\_R32G32B32\_FLOAT) and the texture coordinates using two 32-bit floats (DXGI\_FORMAT\_R32G32\_FLOAT).</span></span>

<span data-ttu-id="4fb71-131">Per accedere ai dati da un buffer vertex è necessario individuare il vertice a cui accedere, oltre ai seguenti parametri aggiuntivi del buffer:</span><span class="sxs-lookup"><span data-stu-id="4fb71-131">To access data from a vertex buffer you need to know which vertex to access, plus the following additional buffer parameters:</span></span>

-   <span data-ttu-id="4fb71-132">Offset: numero di byte dall'inizio del buffer ai dati per il primo vertice.</span><span class="sxs-lookup"><span data-stu-id="4fb71-132">Offset - the number of bytes from the start of the buffer to the data for the first vertex.</span></span> <span data-ttu-id="4fb71-133">È possibile specificare l'offset usando il metodo [**sul ID3D11DeviceContext:: IASetVertexBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetvertexbuffers) .</span><span class="sxs-lookup"><span data-stu-id="4fb71-133">You can specify the offset using the [**ID3D11DeviceContext::IASetVertexBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetvertexbuffers) method.</span></span>
-   <span data-ttu-id="4fb71-134">BaseVertexLocation: numero di byte dall'offset al primo vertice usato dalla chiamata di progetto appropriata.</span><span class="sxs-lookup"><span data-stu-id="4fb71-134">BaseVertexLocation - the number of bytes from the offset to the first vertex used by the appropriate draw call.</span></span>

<span data-ttu-id="4fb71-135">Prima di creare un buffer vertex, è necessario definirne il layout creando un'interfaccia [**ID3D11InputLayout**](/windows/win32/api/d3d11/nn-d3d11-id3d11inputlayout) ; Questa operazione viene eseguita chiamando il metodo [**ID3D11Device:: CreateInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createinputlayout) .</span><span class="sxs-lookup"><span data-stu-id="4fb71-135">Before you create a vertex buffer, you need to define its layout by creating an [**ID3D11InputLayout**](/windows/win32/api/d3d11/nn-d3d11-id3d11inputlayout) interface; this is done by calling the [**ID3D11Device::CreateInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createinputlayout) method.</span></span> <span data-ttu-id="4fb71-136">Dopo la creazione dell'oggetto layout di input, è possibile associarlo alla fase input-assembler chiamando [**sul ID3D11DeviceContext:: IASetInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetinputlayout).</span><span class="sxs-lookup"><span data-stu-id="4fb71-136">After the input-layout object is created, you can bind it to the input-assembler stage by calling the [**ID3D11DeviceContext::IASetInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetinputlayout).</span></span>

<span data-ttu-id="4fb71-137">Per creare un buffer vertex, chiamare [**ID3D11Device:: CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span><span class="sxs-lookup"><span data-stu-id="4fb71-137">To create a vertex buffer, call [**ID3D11Device::CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span></span>

### <a name="index-buffer"></a><span data-ttu-id="4fb71-138">Buffer indice</span><span class="sxs-lookup"><span data-stu-id="4fb71-138">Index Buffer</span></span>

<span data-ttu-id="4fb71-139">I buffer di indice contengono offset integer nei buffer dei vertici e vengono utilizzati per il rendering più efficiente delle primitive.</span><span class="sxs-lookup"><span data-stu-id="4fb71-139">Index buffers contain integer offsets into vertex buffers and are used to render primitives more efficiently.</span></span> <span data-ttu-id="4fb71-140">Un buffer di indice contiene un set sequenziale di indici a 16 bit o a 32 bit; ogni indice viene usato per identificare un vertice in un buffer del vertice.</span><span class="sxs-lookup"><span data-stu-id="4fb71-140">An index buffer contains a sequential set of 16-bit or 32-bit indices; each index is used to identify a vertex in a vertex buffer.</span></span> <span data-ttu-id="4fb71-141">Un buffer di indice può essere visualizzato come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="4fb71-141">An index buffer can be visualized like the following illustration.</span></span>

![illustrazione di un buffer di indice](images/d3d10-index-buffer.png)

<span data-ttu-id="4fb71-143">Gli indici sequenziali archiviati in un buffer di indice si trovano con i parametri seguenti:</span><span class="sxs-lookup"><span data-stu-id="4fb71-143">The sequential indices stored in an index buffer are located with the following parameters:</span></span>

-   <span data-ttu-id="4fb71-144">Offset: numero di byte dall'indirizzo di base del buffer dell'indice.</span><span class="sxs-lookup"><span data-stu-id="4fb71-144">Offset - the number of bytes from the base address of the index buffer.</span></span> <span data-ttu-id="4fb71-145">L'offset viene fornito al metodo [**sul ID3D11DeviceContext:: IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer) .</span><span class="sxs-lookup"><span data-stu-id="4fb71-145">The offset is supplied to the [**ID3D11DeviceContext::IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer) method.</span></span>
-   <span data-ttu-id="4fb71-146">StartIndexLocation: specifica il primo elemento buffer index dall'indirizzo di base e l'offset specificato in [**IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer).</span><span class="sxs-lookup"><span data-stu-id="4fb71-146">StartIndexLocation - specifies the first index buffer element from the base address and the offset provided in [**IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer).</span></span> <span data-ttu-id="4fb71-147">Il percorso iniziale viene fornito al metodo [**sul ID3D11DeviceContext::D rawindexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed) o [**sul ID3D11DeviceContext::D rawindexedinstanced**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexedinstanced) e rappresenta il primo indice di cui eseguire il rendering.</span><span class="sxs-lookup"><span data-stu-id="4fb71-147">The start location is supplied to the [**ID3D11DeviceContext::DrawIndexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed) or [**ID3D11DeviceContext::DrawIndexedInstanced**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexedinstanced) method and represents the first index to render.</span></span>
-   <span data-ttu-id="4fb71-148">IndexCount: numero di indici di cui eseguire il rendering.</span><span class="sxs-lookup"><span data-stu-id="4fb71-148">IndexCount - the number of indices to render.</span></span> <span data-ttu-id="4fb71-149">Il numero viene fornito al metodo [**DrawIndexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed)</span><span class="sxs-lookup"><span data-stu-id="4fb71-149">The number is supplied to the [**DrawIndexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed) method</span></span>

<span data-ttu-id="4fb71-150">Inizio del buffer di indice = indirizzo di base buffer di indice + offset (byte) + StartIndexLocation \* ElementSize (byte);</span><span class="sxs-lookup"><span data-stu-id="4fb71-150">Start of Index Buffer = Index Buffer Base Address + Offset (bytes) + StartIndexLocation \* ElementSize (bytes);</span></span>

<span data-ttu-id="4fb71-151">In questo calcolo, ElementSize è la dimensione di ogni elemento del buffer di indice, ovvero due o quattro byte.</span><span class="sxs-lookup"><span data-stu-id="4fb71-151">In this calculation, ElementSize is the size of each index buffer element, which is either two or four bytes.</span></span>

<span data-ttu-id="4fb71-152">Per creare un buffer di indice, chiamare [**ID3D11Device:: CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span><span class="sxs-lookup"><span data-stu-id="4fb71-152">To create an index buffer, call [**ID3D11Device::CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span></span>

### <a name="constant-buffer"></a><span data-ttu-id="4fb71-153">Buffer costante</span><span class="sxs-lookup"><span data-stu-id="4fb71-153">Constant Buffer</span></span>

<span data-ttu-id="4fb71-154">Un buffer costante consente di fornire in modo efficiente i dati delle costanti dello shader alla pipeline.</span><span class="sxs-lookup"><span data-stu-id="4fb71-154">A constant buffer allows you to efficiently supply shader constants data to the pipeline.</span></span> <span data-ttu-id="4fb71-155">È possibile usare un buffer costante per archiviare i risultati della fase di output del flusso.</span><span class="sxs-lookup"><span data-stu-id="4fb71-155">You can use a constant buffer to store the results of the stream-output stage.</span></span> <span data-ttu-id="4fb71-156">Concettualmente, un buffer costante è simile a un buffer di vertice a elemento singolo, come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="4fb71-156">Conceptually, a constant buffer looks just like a single-element vertex buffer, as shown in the following illustration.</span></span>

![illustrazione di un buffer di costante shader](images/d3d10-shader-resource-buffer.png)

<span data-ttu-id="4fb71-158">Ogni elemento archivia una costante componente da 1 a 4, determinata dal formato dei dati archiviati.</span><span class="sxs-lookup"><span data-stu-id="4fb71-158">Each element stores a 1-to-4 component constant, determined by the format of the data stored.</span></span> <span data-ttu-id="4fb71-159">Per creare un buffer di costante dello shader, chiamare [**ID3D11Device:: CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer) e specificare il membro del **\_ \_ \_ buffer costante di binding d3d11** del tipo enumerato del [**\_ \_ flag di associazione d3d11**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_bind_flag) .</span><span class="sxs-lookup"><span data-stu-id="4fb71-159">To create a shader-constant buffer, call [**ID3D11Device::CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer) and specify the **D3D11\_BIND\_CONSTANT\_BUFFER** member of the [**D3D11\_BIND\_FLAG**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_bind_flag) enumerated type.</span></span>

<span data-ttu-id="4fb71-160">Un buffer costante può utilizzare solo un singolo flag di binding (**d3d11 \_ binding \_ Constant \_ buffer**), che non può essere combinato con qualsiasi altro flag di binding.</span><span class="sxs-lookup"><span data-stu-id="4fb71-160">A constant buffer can only use a single bind flag (**D3D11\_BIND\_CONSTANT\_BUFFER**), which cannot be combined with any other bind flag.</span></span> <span data-ttu-id="4fb71-161">Per associare un buffer della costante dello shader alla pipeline, chiamare uno dei metodi seguenti: [**sul ID3D11DeviceContext:: GSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-gssetconstantbuffers), [**sul ID3D11DeviceContext::P ssetconstantbuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-pssetconstantbuffers)o [**sul ID3D11DeviceContext:: VSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-vssetconstantbuffers).</span><span class="sxs-lookup"><span data-stu-id="4fb71-161">To bind a shader-constant buffer to the pipeline, call one of the following methods: [**ID3D11DeviceContext::GSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-gssetconstantbuffers), [**ID3D11DeviceContext::PSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-pssetconstantbuffers), or [**ID3D11DeviceContext::VSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-vssetconstantbuffers).</span></span>

<span data-ttu-id="4fb71-162">Per leggere un buffer di costante shader da uno shader, usare una funzione di caricamento HLSL (ad esempio, [**Load**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-to-load)).</span><span class="sxs-lookup"><span data-stu-id="4fb71-162">To read a shader-constant buffer from a shader, use a HLSL load function (for example, [**Load**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-to-load)).</span></span> <span data-ttu-id="4fb71-163">Ogni fase dello shader consente fino a 15 buffer di costanti shader. ogni buffer può ospitare fino a 4096 costanti.</span><span class="sxs-lookup"><span data-stu-id="4fb71-163">Each shader stage allows up to 15 shader-constant buffers; each buffer can hold up to 4096 constants.</span></span>

## <a name="related-topics"></a><span data-ttu-id="4fb71-164">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="4fb71-164">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4fb71-165">Buffer</span><span class="sxs-lookup"><span data-stu-id="4fb71-165">Buffers</span></span>](overviews-direct3d-11-resources-buffers.md)
</dt> </dl>

 

 