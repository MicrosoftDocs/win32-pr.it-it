---
title: Mapping trama predefinito
description: L'uso del mapping di trama predefinito riduce la copia e l'utilizzo della memoria e condivide i dati di immagine tra la GPU e la CPU.
ms.assetid: 77AF4BFA-09B5-4181-9408-002764F2A923
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f203c7590c3673d30315250b2b4ce2663e48c9c3
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "104395999"
---
# <a name="default-texture-mapping"></a><span data-ttu-id="cd0f3-103">Mapping trama predefinito</span><span class="sxs-lookup"><span data-stu-id="cd0f3-103">Default Texture Mapping</span></span>

<span data-ttu-id="cd0f3-104">L'uso del mapping di trama predefinito riduce la copia e l'utilizzo della memoria e condivide i dati di immagine tra la GPU e la CPU.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-104">The use of default texture mapping reduces copying and memory usage while sharing image data between the GPU and the CPU.</span></span> <span data-ttu-id="cd0f3-105">Tuttavia, deve essere usato solo in situazioni specifiche.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-105">However, it should only be used in specific situations.</span></span> <span data-ttu-id="cd0f3-106">Il layout swizzle standard evita di copiare o swizzling i dati in più layout.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-106">The standard swizzle layout avoids copying or swizzling data in multiple layouts.</span></span>

-   [<span data-ttu-id="cd0f3-107">Overview</span><span class="sxs-lookup"><span data-stu-id="cd0f3-107">Overview</span></span>](#overview)
-   [<span data-ttu-id="cd0f3-108">API di D3D 11.3</span><span class="sxs-lookup"><span data-stu-id="cd0f3-108">D3D11.3 APIs</span></span>](#d3d113-apis)
-   [<span data-ttu-id="cd0f3-109">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="cd0f3-109">Related topics</span></span>](#related-topics)

## <a name="overview"></a><span data-ttu-id="cd0f3-110">Panoramica</span><span class="sxs-lookup"><span data-stu-id="cd0f3-110">Overview</span></span>

<span data-ttu-id="cd0f3-111">Il mapping delle trame predefinite non è la prima scelta per gli sviluppatori.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-111">Mapping default textures should not be the first choice for developers.</span></span> <span data-ttu-id="cd0f3-112">Gli sviluppatori devono prima scrivere codice in un modo semplice e intuitivo, ovvero non avere alcun accesso alla CPU per la maggior parte delle trame e caricare con [**CopySubresourceRegion1**](/windows/desktop/api/D3D11_1/nf-d3d11_1-id3d11devicecontext1-copysubresourceregion1).</span><span class="sxs-lookup"><span data-stu-id="cd0f3-112">Developers should code in a discrete-GPU friendly way first (that is, do not have any CPU access for the majority of textures and upload with [**CopySubresourceRegion1**](/windows/desktop/api/D3D11_1/nf-d3d11_1-id3d11devicecontext1-copysubresourceregion1)).</span></span> <span data-ttu-id="cd0f3-113">Tuttavia, per alcuni casi, la CPU e la GPU possono interagire così frequentemente con gli stessi dati, il mapping delle trame predefinite diventa utile per risparmiare energia o per velocizzare una particolare progettazione su specifiche schede o architetture.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-113">But, for certain cases, the CPU and GPU may interact so frequently on the same data, that mapping default textures becomes helpful to save power, or to speed up a particular design on particular adapters or architectures.</span></span> <span data-ttu-id="cd0f3-114">Le applicazioni devono rilevare questi casi e ottimizzare le copie non necessarie.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-114">Applications should detect these cases and optimize out the unnecessary copies.</span></span>

<span data-ttu-id="cd0f3-115">In D3D 11.3, le trame create con \_ il layout di trama d3d11 \_ \_ non definito (un membro dell'enumerazione [**\_ \_ layout trama d3d11**](/windows/desktop/api/D3D11_3/ne-d3d11_3-d3d11_texture_layout) ) e nessun accesso alla CPU sono le più efficienti per il rendering e il campionamento frequenti della GPU.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-115">In D3D11.3, textures created with D3D11\_TEXTURE\_LAYOUT\_UNDEFINED (one member of the [**D3D11\_TEXTURE\_LAYOUT**](/windows/desktop/api/D3D11_3/ne-d3d11_3-d3d11_texture_layout) enum) and no CPU access are the most efficient for frequent GPU rendering and sampling.</span></span> <span data-ttu-id="cd0f3-116">Quando si esegue il test delle prestazioni, tali trame devono essere confrontate con il layout di trama D3D11 non \_ \_ \_ definito con l'accesso alla CPU e il \_ layout di trama d3d11 \_ \_ 64K \_ standard \_ SWIZZLE con l'accesso alla CPU e \_ \_ la riga del layout della trama d3d11 per il \_ \_ supporto di Cross-adapter.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-116">When performance testing, those textures should be compared against D3D11\_TEXTURE\_LAYOUT\_UNDEFINED with CPU access, and D3D11\_TEXTURE\_LAYOUT\_64K\_STANDARD\_SWIZZLE with CPU access, and D3D11\_TEXTURE\_LAYOUT\_ROW\_MAJOR for cross-adapter support.</span></span>

<span data-ttu-id="cd0f3-117">L'uso del \_ layout di trama d3d11 \_ \_ non definito con l'accesso alla CPU consente ai metodi [**WriteToSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-writetosubresource), [**ReadFromSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-readfromsubresource), [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) (che non possono accedere all'applicazione) e [**annullare**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-unmap), ma può sacrificare l'efficienza dell'accesso alla GPU.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-117">Using D3D11\_TEXTURE\_LAYOUT\_UNDEFINED with CPU access enables the methods [**WriteToSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-writetosubresource), [**ReadFromSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-readfromsubresource), [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) (precluding application access to pointer), and [**Unmap**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-unmap); but can sacrifice efficiency of GPU access.</span></span> <span data-ttu-id="cd0f3-118">Usando \_ \_ il layout di trama d3d11 \_ 64K \_ standard \_ SWIZZLE con accesso alla CPU consente **WriteToSubresource**, **ReadFromSubresource**, **Map** (che restituisce un puntatore valido all'applicazione) e **annullare**.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-118">Using D3D11\_TEXTURE\_LAYOUT\_64K\_STANDARD\_SWIZZLE with CPU access enables **WriteToSubresource**, **ReadFromSubresource**, **Map** (which returns a valid pointer to application), and **Unmap**.</span></span> <span data-ttu-id="cd0f3-119">Può anche sacrificare l'efficienza dell'accesso alla GPU oltre al layout di trama D3D11 non \_ \_ \_ definito con l'accesso alla CPU.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-119">It can also sacrifice efficiency of GPU access more than D3D11\_TEXTURE\_LAYOUT\_UNDEFINED with CPU access.</span></span>

<span data-ttu-id="cd0f3-120">In generale, le applicazioni devono creare la maggior parte delle trame come accessibili solo per GPU e con layout di trama D3D11 non \_ \_ \_ definito.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-120">In general, applications should create the majority of textures as GPU-only-accessible, and with D3D11\_TEXTURE\_LAYOUT\_UNDEFINED.</span></span>

<span data-ttu-id="cd0f3-121">Precedente alla funzionalità di mapping delle trame predefinite, era disponibile un solo layout standardizzato per i dati multidimensionali: "lineare", noto anche come "row-major".</span><span class="sxs-lookup"><span data-stu-id="cd0f3-121">Previous to the mapping default textures feature, there was only one standardized layout for multi-dimensional data: "linear", also known as "row-major".</span></span> <span data-ttu-id="cd0f3-122">Le applicazioni devono evitare le \_ trame dinamiche di utilizzo e di gestione temporanea \_ quando è disponibile l'impostazione predefinita della mappa.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-122">Applications should avoid USAGE\_STAGING and USAGE\_DYNAMIC textures when map default is available.</span></span> <span data-ttu-id="cd0f3-123">Le \_ trame dinamiche di utilizzo e di gestione temporanea \_ utilizzano il layout lineare.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-123">The USAGE\_STAGING and USAGE\_DYNAMIC textures use the linear layout.</span></span>

<span data-ttu-id="cd0f3-124">D3D 11.3 (e D3D12) introducono un layout standard di dati multidimensionali.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-124">D3D11.3 (and D3D12) introduce a standard multi-dimensional data layout.</span></span> <span data-ttu-id="cd0f3-125">Questa operazione viene eseguita per consentire a più unità di elaborazione di operare sugli stessi dati senza copiare i dati o swizzling i dati tra più layout.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-125">This is done to enable multiple processing units to operate on the same data without copying the data or swizzling the data between multiple layouts.</span></span> <span data-ttu-id="cd0f3-126">Un layout standardizzato consente un miglioramento dell'efficienza attraverso gli effetti della rete e consente agli algoritmi di effettuare brevi riduzioni presumendo un modello particolare.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-126">A standardized layout enables efficiency gains through network effects and allows algorithms to make short-cuts assuming a particular pattern.</span></span>

<span data-ttu-id="cd0f3-127">Si noti tuttavia che questa swizzle standard è una funzionalità hardware e potrebbe non essere supportata da tutte le GPU.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-127">Note though that this standard swizzle is a hardware feature, and may not be supported by all GPUs.</span></span>

## <a name="d3d113-apis"></a><span data-ttu-id="cd0f3-128">API di D3D 11.3</span><span class="sxs-lookup"><span data-stu-id="cd0f3-128">D3D11.3 APIs</span></span>

<span data-ttu-id="cd0f3-129">A differenza di D3D12, D3D 11.3 non supporta il mapping delle trame per impostazione predefinita, pertanto è necessario eseguire una query [**\_ sui dati della funzionalità d3d11 \_ \_ d3d11 \_ OPTIONS2**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options2).</span><span class="sxs-lookup"><span data-stu-id="cd0f3-129">Unlike D3D12, D3D11.3 does not supports texture mapping by default, so you need to query [**D3D11\_FEATURE\_DATA\_D3D11\_OPTIONS2**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options2).</span></span> <span data-ttu-id="cd0f3-130">Sarà inoltre necessario eseguire query su swizzle standard con una chiamata a [**ID3D11Device:: CheckFeatureSupport**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-checkfeaturesupport) e controllando il `StandardSwizzle64KBSupported` campo dei **dati della \_ funzionalità \_ d3d11 \_ d3d11 \_** OPTIONS2.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-130">Standard swizzle will also need to be queried for with a call to [**ID3D11Device::CheckFeatureSupport**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-checkfeaturesupport) and checking the `StandardSwizzle64KBSupported` field of **D3D11\_FEATURE\_DATA\_D3D11\_OPTIONS2**.</span></span>

<span data-ttu-id="cd0f3-131">Le API seguenti fanno riferimento al mapping della trama:</span><span class="sxs-lookup"><span data-stu-id="cd0f3-131">The following APIs reference texture mapping:</span></span>

<span data-ttu-id="cd0f3-132">Enumerazioni</span><span class="sxs-lookup"><span data-stu-id="cd0f3-132">Enums</span></span>

-   <span data-ttu-id="cd0f3-133">[**D3d11 \_ \_Layout trama**](/windows/desktop/api/D3D11_3/ne-d3d11_3-d3d11_texture_layout) : controlla il modello di swizzle delle trame predefinite e Abilita il supporto della mappa sulle trame predefinite.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-133">[**D3D11\_TEXTURE\_LAYOUT**](/windows/desktop/api/D3D11_3/ne-d3d11_3-d3d11_texture_layout) : controls the swizzle pattern of default textures and enable map support on default textures.</span></span>
-   <span data-ttu-id="cd0f3-134">[**D3d11 \_ FUNZIONALITÀ**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_feature) : fa riferimento ai [**\_ dati della funzionalità d3d11 \_ \_ d3d11 \_ OPTIONS2**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options2).</span><span class="sxs-lookup"><span data-stu-id="cd0f3-134">[**D3D11\_FEATURE**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_feature) : references [**D3D11\_FEATURE\_DATA\_D3D11\_OPTIONS2**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_feature_data_d3d11_options2).</span></span>
-   <span data-ttu-id="cd0f3-135">[**D3d11 \_ \_ \_ Flag copia riquadro**](/windows/desktop/api/D3D11_2/ne-d3d11_2-d3d11_tile_copy_flag) : contiene i flag per copiare le risorse swizzled affiancate da e verso buffer lineari.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-135">[**D3D11\_TILE\_COPY\_FLAG**](/windows/desktop/api/D3D11_2/ne-d3d11_2-d3d11_tile_copy_flag) : contains flags to copy swizzled tiled resources to and from linear buffers.</span></span>

<span data-ttu-id="cd0f3-136">Strutture</span><span class="sxs-lookup"><span data-stu-id="cd0f3-136">Structures</span></span>

-   <span data-ttu-id="cd0f3-137">[**D3d11 \_ TEXTURE2D \_ DESC1**](/windows/desktop/api/D3D11_3/ns-d3d11_3-cd3d11_texture2d_desc1) : descrive una trama 2D.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-137">[**D3D11\_TEXTURE2D\_DESC1**](/windows/desktop/api/D3D11_3/ns-d3d11_3-cd3d11_texture2d_desc1) : describes a 2D texture.</span></span> <span data-ttu-id="cd0f3-138">Si noti la \_ \_ struttura Helper CD3D11 TEXTURE2D DESC1.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-138">Note the CD3D11\_TEXTURE2D\_DESC1 helper structure.</span></span>
-   <span data-ttu-id="cd0f3-139">[**D3d11 \_ TEXTURE3D \_ DESC1**](/windows/desktop/api/D3D11_3/ns-d3d11_3-cd3d11_texture3d_desc1) : descrive una trama 3D.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-139">[**D3D11\_TEXTURE3D\_DESC1**](/windows/desktop/api/D3D11_3/ns-d3d11_3-cd3d11_texture3d_desc1) : describes a 3D texture.</span></span> <span data-ttu-id="cd0f3-140">Si noti la \_ \_ struttura Helper CD3D11 TEXTURE3D DESC1.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-140">Note the CD3D11\_TEXTURE3D\_DESC1 helper structure.</span></span>

<span data-ttu-id="cd0f3-141">Metodi</span><span class="sxs-lookup"><span data-stu-id="cd0f3-141">Methods</span></span>

-   <span data-ttu-id="cd0f3-142">[**ID3D11Device3:: CreateTexture2D1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11device3-createtexture2d1) : crea una matrice di trame 2D.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-142">[**ID3D11Device3::CreateTexture2D1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11device3-createtexture2d1) : creates an array of 2D textures.</span></span>
-   <span data-ttu-id="cd0f3-143">[**ID3D11Device3:: CreateTexture3D1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11device3-createtexture3d1) : crea una singola trama 3D.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-143">[**ID3D11Device3::CreateTexture3D1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11device3-createtexture3d1) : creates a single 3D texture.</span></span>
-   <span data-ttu-id="cd0f3-144">[**ID3D11Device3:: WriteToSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-writetosubresource) : copia i dati in una \_ trama predefinita di utilizzo d3d11 mappata \_ mediante [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map).</span><span class="sxs-lookup"><span data-stu-id="cd0f3-144">[**ID3D11Device3::WriteToSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-writetosubresource) : copies data into a D3D11\_USAGE\_DEFAULT texture which was mapped using [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map).</span></span>
-   <span data-ttu-id="cd0f3-145">[**ID3D11Device3:: ReadFromSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-readfromsubresource) : copia i dati da una trama predefinita di utilizzo di d3d11 mappata \_ \_ mediante [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map).</span><span class="sxs-lookup"><span data-stu-id="cd0f3-145">[**ID3D11Device3::ReadFromSubresource**](/windows/desktop/api/d3d11_3/nf-d3d11_3-id3d11device3-readfromsubresource) : copies data from a D3D11\_USAGE\_DEFAULT texture which was mapped using [**Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map).</span></span>
-   <span data-ttu-id="cd0f3-146">[**Sul ID3D11DeviceContext:: Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) : ottiene un puntatore ai dati contenuti in una sottorisorsa e nega l'accesso alla GPU a tale risorsa.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-146">[**ID3D11DeviceContext::Map**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-map) : gets a pointer to the data contained in a subresource, and denies the GPU access to that subresource.</span></span>
-   <span data-ttu-id="cd0f3-147">[**Sul ID3D11DeviceContext:: annullare**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-unmap) : invalida il puntatore a una risorsa e riabilita l'accesso della GPU a tale risorsa.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-147">[**ID3D11DeviceContext::Unmap**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-unmap) : invalidates the pointer to a resource and reenables the GPU's access to that resource.</span></span>
-   <span data-ttu-id="cd0f3-148">[**ID3D11Texture2D1:: GetDesc1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11texture2d1-getdesc1) : ottiene le proprietà di una risorsa di trama 2D.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-148">[**ID3D11Texture2D1::GetDesc1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11texture2d1-getdesc1) : gets the properties of a 2D texture resource.</span></span>
-   <span data-ttu-id="cd0f3-149">[**ID3D11Texture3D1:: GetDesc1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11texture3d1-getdesc1) : ottiene le proprietà di una risorsa di trama 3D.</span><span class="sxs-lookup"><span data-stu-id="cd0f3-149">[**ID3D11Texture3D1::GetDesc1**](/windows/desktop/api/D3D11_3/nf-d3d11_3-id3d11texture3d1-getdesc1) : gets the properties of a 3D texture resource.</span></span>

## <a name="related-topics"></a><span data-ttu-id="cd0f3-150">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="cd0f3-150">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="cd0f3-151">Funzionalità di Direct3D 11,3</span><span class="sxs-lookup"><span data-stu-id="cd0f3-151">Direct3D 11.3 Features</span></span>](direct3d-11-3-features.md)
</dt> </dl>

 

 




