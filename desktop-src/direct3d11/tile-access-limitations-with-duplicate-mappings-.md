---
title: Limitazioni di accesso ai riquadri con mapping duplicati
description: Questa sezione descrive le limitazioni di accesso ai riquadri con mapping duplicati.
ms.assetid: 7A498E0D-9151-4A89-B7C3-C4F476457D17
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0909b0d10e286e5f774f6893b692abdeb19d3ef7
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "104044236"
---
# <a name="tile-access-limitations-with-duplicate-mappings"></a><span data-ttu-id="76088-103">Limitazioni di accesso ai riquadri con mapping duplicati</span><span class="sxs-lookup"><span data-stu-id="76088-103">Tile access limitations with duplicate mappings</span></span>

<span data-ttu-id="76088-104">Questa sezione descrive le limitazioni di accesso ai riquadri con mapping duplicati.</span><span class="sxs-lookup"><span data-stu-id="76088-104">This section describes tile access limitations with duplicate mappings.</span></span>

## <a name="copying-tiled-resources-with-overlapping-source-and-destination"></a><span data-ttu-id="76088-105">Copia di risorse affiancate con origine e destinazione sovrapposte</span><span class="sxs-lookup"><span data-stu-id="76088-105">Copying tiled resources with overlapping source and destination</span></span>

<span data-ttu-id="76088-106">Se i riquadri nell'area di origine e di destinazione di un'operazione di copia \* hanno mapping duplicati nell'area di copia che verrebbero sovrapposti anche se entrambe le risorse non erano risorse affiancate e l'operazione di copia \* supporta le copie sovrapposte, l'operazione di copia \* si comporterà correttamente (come se l'origine venisse copiata in un percorso temporaneo prima di passare alla destinazione).</span><span class="sxs-lookup"><span data-stu-id="76088-106">If tiles in the source and destination area of a Copy\* operation have duplicated mappings in the copy area that would have overlapped even if both resources were not tiled resources and the Copy\* operation supports overlapping copies, the Copy\* operation will behave fine (as if the source is copied to a temporary location before going to the destination).</span></span> <span data-ttu-id="76088-107">Tuttavia, se la sovrapposizione non è ovvia (ad esempio, le risorse di origine e di destinazione sono diverse ma i mapping di condivisione o i mapping vengono duplicati su una determinata superficie), i risultati dell'operazione di copia sui riquadri condivisi non sono definiti.</span><span class="sxs-lookup"><span data-stu-id="76088-107">But if the overlap is not obvious (like the source and destination resources are different but share mappings or mappings are duplicated over a given surface), results of the copy operation on the tiles that are shared are undefined.</span></span>

## <a name="copying-to-tiled-resource-with-duplicated-tiles-in-destination-area"></a><span data-ttu-id="76088-108">Copia in una risorsa affiancata con riquadri duplicati nell'area di destinazione</span><span class="sxs-lookup"><span data-stu-id="76088-108">Copying to tiled resource with duplicated tiles in destination area</span></span>

<span data-ttu-id="76088-109">La copia in una risorsa affiancata con riquadri duplicati nell'area di destinazione produce risultati non definiti in questi riquadri, a meno che i dati stessi non siano identici. riquadri diversi possono scrivere i riquadri in ordini diversi.</span><span class="sxs-lookup"><span data-stu-id="76088-109">Copying to a tiled resource with duplicated tiles in the destination area produces undefined results in these tiles unless the data itself is identical; different tiles might write the tiles in different orders.</span></span>

## <a name="uav-accesses-to-duplicate-tiles-mappings"></a><span data-ttu-id="76088-110">Accessi UAV ai mapping dei riquadri duplicati</span><span class="sxs-lookup"><span data-stu-id="76088-110">UAV accesses to duplicate tiles mappings</span></span>

<span data-ttu-id="76088-111">Si supponga che una visualizzazione di accesso non ordinato (UAV) su una risorsa affiancata includa mapping dei riquadri duplicati nell'area o con altre risorse associate alla pipeline.</span><span class="sxs-lookup"><span data-stu-id="76088-111">Suppose an unordered access view (UAV) on a tiled resource has duplicate tile mappings in its area or with other resources bound to the pipeline.</span></span> <span data-ttu-id="76088-112">L'ordinamento degli accessi a questi riquadri duplicati non è definito se eseguito da thread diversi, così come qualsiasi ordine di accesso alla memoria per UAV in generale non è ordinato.</span><span class="sxs-lookup"><span data-stu-id="76088-112">Ordering of accesses to these duplicated tiles is undefined if performed by different threads, just as any ordering of memory access to UAVs in general is unordered.</span></span>

## <a name="rendering-after-tile-mapping-changes-or-content-updates-from-outside-mappings"></a><span data-ttu-id="76088-113">Rendering dopo modifiche al mapping dei riquadri o aggiornamenti del contenuto da mapping esterni</span><span class="sxs-lookup"><span data-stu-id="76088-113">Rendering after tile mapping changes or content updates from outside mappings</span></span>

<span data-ttu-id="76088-114">Se i mapping dei riquadri di una risorsa affiancata sono stati modificati o il contenuto nei riquadri del pool affiancati è stato modificato tramite i mapping di un'altra risorsa affiancata, e la risorsa affiancata verrà sottoposta a rendering tramite la visualizzazione della destinazione di rendering o la visualizzazione depth stencil, l'applicazione deve cancellare (usando le API di cancellazione della funzione fissa) o copiare completamente usando \* \* le API Copy/Update i riquadri modificati nell'area di cui viene eseguito il rendering (mappata o meno).</span><span class="sxs-lookup"><span data-stu-id="76088-114">If a tiled resource's tile mappings have changed or content in mapped tiled pool tiles have changed via another tiled resource's mappings, and the tiled resource is going to be rendered via render target view or depth stencil view, the application must Clear (using the fixed function Clear APIs) or fully copy over using Copy\*/Update\* APIs the tiles that have changed within the area being rendered (mapped or not).</span></span> <span data-ttu-id="76088-115">Se un'applicazione non è stata cancellata o copiata in questi casi, le strutture di ottimizzazione hardware per la visualizzazione della destinazione di rendering specificata o la visualizzazione depth stencil risultano obsolete e i risultati del rendering del Garbage Collector comportano l'hardware e l'incoerenza in componenti hardware diversi.</span><span class="sxs-lookup"><span data-stu-id="76088-115">Failure of an application to clear or copy in these cases results in hardware optimization structures for the given render target view or depth stencil view being stale and will result in garbage rendering results on some hardware and inconsistency across different hardware.</span></span> <span data-ttu-id="76088-116">Queste strutture di dati di ottimizzazione nascoste utilizzate dall'hardware potrebbero essere locali a singoli mapping e non visibili ad altri mapping alla stessa memoria.</span><span class="sxs-lookup"><span data-stu-id="76088-116">These hidden optimization data structures used by hardware might be local to individual mappings and not visible to other mappings to the same memory.</span></span>

<span data-ttu-id="76088-117">L'operazione [**ID3D11DeviceContext1:: ClearView**](/windows/desktop/api/D3D11_1/nf-d3d11_1-id3d11devicecontext1-clearview) supporta la cancellazione delle visualizzazioni di destinazione di rendering con rettangoli.</span><span class="sxs-lookup"><span data-stu-id="76088-117">The [**ID3D11DeviceContext1::ClearView**](/windows/desktop/api/D3D11_1/nf-d3d11_1-id3d11devicecontext1-clearview) operation supports clearing render target views with rectangles.</span></span> <span data-ttu-id="76088-118">Per l'hardware che supporta le risorse affiancate, **ClearView** deve supportare anche la cancellazione di viste depth stencil con rettangoli, solo per le superfici di profondità (senza stencil).</span><span class="sxs-lookup"><span data-stu-id="76088-118">For hardware that supports tiled resources, **ClearView** must also support clearing of depth stencil views with rectangles, for depth only surfaces (without stencil).</span></span> <span data-ttu-id="76088-119">Questa operazione consente alle applicazioni di cancellare solo l'area necessaria di una superficie.</span><span class="sxs-lookup"><span data-stu-id="76088-119">This operation allows applications to clear only the necessary area of a surface.</span></span>

<span data-ttu-id="76088-120">Se un'applicazione deve mantenere il contenuto della memoria esistente delle aree di una risorsa affiancata in cui sono stati modificati i mapping, l'applicazione deve aggirare il requisito chiaro.</span><span class="sxs-lookup"><span data-stu-id="76088-120">If an application needs to preserve existing memory contents of areas in a tiled resource where mappings have changed, that application must work around the clear requirement.</span></span> <span data-ttu-id="76088-121">L'applicazione può eseguire questa operazione salvando prima il contenuto in cui i mapping dei riquadri sono stati modificati (copiando questi elementi in una superficie temporanea, ad esempio usando [**ID3D11DeviceContext2:: CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles)), eseguendo il comando Clear necessario e quindi copiando il contenuto.</span><span class="sxs-lookup"><span data-stu-id="76088-121">The application can accomplish this work-around by first saving the contents where tile mappings have changed (by copying them to a temporary surface, for example, by using [**ID3D11DeviceContext2::CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles)), issuing the required clear command and then copying the contents back.</span></span> <span data-ttu-id="76088-122">Sebbene questa operazione consenta di mantenere il contenuto della superficie per il rendering incrementale, il lato negativo è che le prestazioni di rendering successive sulla superficie potrebbero subire problemi perché le ottimizzazioni del rendering potrebbero andare perse.</span><span class="sxs-lookup"><span data-stu-id="76088-122">While this would accomplish the task of preserving surface contents for incremental rendering, the downside is that subsequent rendering performance on the surface might suffer because rendering optimizations might be lost.</span></span>

<span data-ttu-id="76088-123">Se un riquadro viene mappato a più risorse affiancate allo stesso tempo e il contenuto del riquadro viene modificato in qualsiasi modo (rendering, copia e così via) tramite una delle risorse affiancate, se è necessario eseguire il rendering dello stesso riquadro tramite qualsiasi altra risorsa affiancata, il riquadro deve essere cancellato per primo come descritto in precedenza.</span><span class="sxs-lookup"><span data-stu-id="76088-123">If a tile is mapped into multiple tiled resources at the same time and tile contents are manipulated by any means (render, copy, and so on) via one of the tiled resources, if the same tile is to be rendered via any other tiled resource, the tile must be cleared first as previously described.</span></span>

## <a name="rendering-to-tiles-shared-outside-render-area"></a><span data-ttu-id="76088-124">Rendering nei riquadri condivisi all'esterno dell'area di rendering</span><span class="sxs-lookup"><span data-stu-id="76088-124">Rendering to tiles shared outside render area</span></span>

<span data-ttu-id="76088-125">Si supponga che venga eseguito il rendering di un'area in una risorsa affiancata in e che ai riquadri del pool di sezioni a cui fa riferimento l'area di rendering venga anche eseguito il mapping a dall'esterno dell'area di rendering (anche tramite altre risorse affiancate, allo stesso tempo o meno).</span><span class="sxs-lookup"><span data-stu-id="76088-125">Suppose an area in a tiled resource is being rendered to and the tile pool tiles referenced by the render area are also mapped to from outside the render area (including via other tiled resources, at the same time or not).</span></span> <span data-ttu-id="76088-126">I dati di cui viene eseguito il rendering in questi riquadri non vengono visualizzati correttamente quando vengono visualizzati tramite gli altri mapping, anche se il layout di memoria sottostante è compatibile.</span><span class="sxs-lookup"><span data-stu-id="76088-126">Data rendered to these tiles isn't guaranteed to appear correctly when viewed through the other mappings, even though the underlying memory layout is compatible.</span></span> <span data-ttu-id="76088-127">Questo fatto è dovuto a strutture di dati di ottimizzazione che possono essere usate da un hardware locale a mapping singoli per le superfici di rendering e non visibili ad altri mapping alla stessa posizione di memoria.</span><span class="sxs-lookup"><span data-stu-id="76088-127">This fact is due to optimization data structures some hardware use that can be local to individual mappings for renderable surfaces and not visible to other mappings to the same memory location.</span></span> <span data-ttu-id="76088-128">È possibile ovviare a questa restrizione copiando dal mapping di cui è stato eseguito il rendering in tutti gli altri mapping alla stessa memoria a cui è possibile accedere oppure deselezionando tale memoria o copiando altri dati nel caso in cui il contenuto precedente non sia più necessario.</span><span class="sxs-lookup"><span data-stu-id="76088-128">You can work around this restriction by copying from the rendered mapping to all the other mappings to the same memory that might be accessed (or clearing that memory or copying other data to it if the old contents are no longer needed).</span></span> <span data-ttu-id="76088-129">Anche se questa soluzione ovvia sembra ridondante, tutti gli altri mapping alla stessa memoria comunicano correttamente come accedere al contenuto e almeno il risparmio di memoria dovuto alla presenza di un singolo supporto di memoria fisica rimane intatto.</span><span class="sxs-lookup"><span data-stu-id="76088-129">While this work-around seems redundant, it makes all other mappings to the same memory correctly understand how to access its contents, and at least the memory savings of having only a single physical memory backing remains intact.</span></span> <span data-ttu-id="76088-130">Inoltre, quando si passa dall'uso di risorse affiancate diverse che condividono i mapping (a meno che non solo la lettura), è necessario chiamare l'API [**ID3D11DeviceContext2:: TiledResourceBarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier) tra le opzioni.</span><span class="sxs-lookup"><span data-stu-id="76088-130">Also, when you switch between using different tiled resources that share mappings (unless only reading), you must call the [**ID3D11DeviceContext2::TiledResourceBarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier) API in between the switches.</span></span>

## <a name="rendering-to-tiles-shared-within-render-area"></a><span data-ttu-id="76088-131">Rendering nei riquadri condivisi all'interno dell'area di rendering</span><span class="sxs-lookup"><span data-stu-id="76088-131">Rendering to tiles shared within render area</span></span>

<span data-ttu-id="76088-132">Se viene eseguito il rendering di un'area in una risorsa affiancata in e all'interno dell'area di rendering, viene eseguito il mapping di più riquadri alla stessa posizione del pool di sezioni. i risultati del rendering non sono definiti in tali riquadri</span><span class="sxs-lookup"><span data-stu-id="76088-132">If an area in a tiled resource is being rendered to and within the render area multiple tiles are mapped to the same tile pool location, rendering results are undefined on those tiles.</span></span>

## <a name="data-compatibility-across-tiled-resources-sharing-tiles"></a><span data-ttu-id="76088-133">Compatibilità dei dati tra le risorse affiancate condivisione di riquadri</span><span class="sxs-lookup"><span data-stu-id="76088-133">Data compatibility across tiled resources sharing tiles</span></span>

<span data-ttu-id="76088-134">Si supponga che più risorse affiancate dispongano di mapping per gli stessi percorsi del pool di sezioni e che ogni risorsa venga utilizzata per accedere agli stessi dati.</span><span class="sxs-lookup"><span data-stu-id="76088-134">Suppose multiple tiled resources have mappings to the same tile pool locations and each resource is used to access the same data.</span></span> <span data-ttu-id="76088-135">Questo scenario è valido solo se le altre regole per evitare problemi con le strutture di ottimizzazione hardware vengono evitate, le chiamate appropriate a [**ID3D11DeviceContext2:: TiledResourceBarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier) vengono effettuate e le risorse affiancate sono compatibili tra loro.</span><span class="sxs-lookup"><span data-stu-id="76088-135">This scenario is only valid if the other rules about avoiding problems with hardware optimization structures are avoided, appropriate calls to [**ID3D11DeviceContext2::TiledResourceBarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier) are made, and the tiled resources are compatible with each other.</span></span> <span data-ttu-id="76088-136">Quest'ultimo viene descritto in termini di cosa significa che le risorse affiancate condividono i riquadri in modo che siano incompatibili.</span><span class="sxs-lookup"><span data-stu-id="76088-136">The latter is described here in terms of what it means for tiled resources sharing tiles to be incompatible.</span></span> <span data-ttu-id="76088-137">Le condizioni di incompatibilità per l'accesso agli stessi dati nei mapping dei riquadri duplicati sono l'uso di dimensioni o formati di superficie diversi oppure le differenze nella presenza della destinazione di rendering o dei flag di binding depth stencil sulle risorse.</span><span class="sxs-lookup"><span data-stu-id="76088-137">The incompatibility conditions of accessing the same data across duplicate tile mappings are the use of different surface dimensions or format, or differences in the presence of render target or depth stencil bind flags on the resources.</span></span> <span data-ttu-id="76088-138">La scrittura nella memoria con un tipo di mapping produce risultati non definiti se successivamente si esegue la lettura o il rendering tramite un mapping da una risorsa incompatibile.</span><span class="sxs-lookup"><span data-stu-id="76088-138">Writing to the memory with one type of mapping produces undefined results if you subsequently read or render via a mapping from an incompatible resource.</span></span> <span data-ttu-id="76088-139">Se gli altri mapping di condivisione delle risorse vengono inizializzati per la prima volta con nuovi dati (riciclo della memoria per uno scopo diverso), l'operazione di lettura o di rendering successiva è corretta perché i dati non vengono sottoposto a emorragia in interpretazioni incompatibili.</span><span class="sxs-lookup"><span data-stu-id="76088-139">If the other resource sharing mappings are first initialized with new data (recycling the memory for a different purpose), the subsequent read or render operation is fine since data isn't bleeding across incompatible interpretations.</span></span> <span data-ttu-id="76088-140">Tuttavia, è necessario chiamare l'API **TiledResourceBarrier** quando si passa dall'accesso a mapping incompatibili come questo.</span><span class="sxs-lookup"><span data-stu-id="76088-140">But, you must call the **TiledResourceBarrier** API when you switch between accessing incompatible mappings like this.</span></span>

<span data-ttu-id="76088-141">Se la destinazione di rendering o il flag di binding depth stencil non è impostato su una delle risorse che condividono i mapping tra loro, le restrizioni sono molto inferiori.</span><span class="sxs-lookup"><span data-stu-id="76088-141">If the render target or depth stencil bind flag isn't set on any of the resources sharing mappings with each other, there are far fewer restrictions.</span></span> <span data-ttu-id="76088-142">Se il formato e i tipi di superficie, ad esempio Texture2D, sono uguali, i riquadri possono essere condivisi.</span><span class="sxs-lookup"><span data-stu-id="76088-142">As long as the format and surface types (for example, Texture2D) are the same, tiles can be shared.</span></span> <span data-ttu-id="76088-143">Formati diversi che sono compatibili sono casi come \* le aree BC e il formato di 32 bit o 16 bit non compresso di dimensioni equivalenti, ad esempio BC6H e R32G32B32A32.</span><span class="sxs-lookup"><span data-stu-id="76088-143">Different formats being compatible are cases such as BC\* surfaces and the equivalent sized uncompressed 32 bit or 16 bit per component format, like BC6H and R32G32B32A32.</span></span> <span data-ttu-id="76088-144">Molti formati a 32 bit per elemento possono essere associati a un alias con R32 \_ \* (R10G10B10A2 \_ \* , R8G8B8A8 \_ \* , B8G8R8A8 \_ \* , B8G8R8X8 \_ \* , R16G16 \_ \* ). questa operazione è sempre consentita per le risorse non affiancate.</span><span class="sxs-lookup"><span data-stu-id="76088-144">Many 32 bit per element formats can be aliased with R32\_\* as well (R10G10B10A2\_\*, R8G8B8A8\_\*, B8G8R8A8\_\*,B8G8R8X8\_\*,R16G16\_\*); this operation has always been allowed for non-tiled resources.</span></span>

<span data-ttu-id="76088-145">La condivisione tra riquadri compressi e non compressi è un'ammenda se i formati sono compatibili e i riquadri sono riempiti con colore a tinta unita.</span><span class="sxs-lookup"><span data-stu-id="76088-145">Sharing between packed and non-packed tiles is fine if the formats are compatible and the tiles are filled with solid color.</span></span>

<span data-ttu-id="76088-146">Infine, se non è presente alcuna informazione comune sulle risorse che condividono i mapping dei riquadri, tranne per il fatto che nessuno ha una destinazione di rendering o depth stencil flag di binding, è possibile condividere in modo sicuro solo la memoria con 0. il mapping verrà visualizzato come qualsiasi altro 0 decodificato in per la definizione del formato di risorsa specificato (in genere solo 0).</span><span class="sxs-lookup"><span data-stu-id="76088-146">Finally, if nothing is common about the resources sharing tile mappings except that none have render target or depth stencil bind flags, only memory filled with 0 can be shared safely; the mapping will appear as whatever 0 decodes to for the definition of the given resource format (typically just 0).</span></span>

## <a name="related-topics"></a><span data-ttu-id="76088-147">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="76088-147">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="76088-148">Accesso alla pipeline alle risorse affiancate</span><span class="sxs-lookup"><span data-stu-id="76088-148">Pipeline access to tiled resources</span></span>](pipeline-access-to-tiled-resources.md)
</dt> </dl>

 

 




