---
title: Funzionalità di campionamento della trama delle risorse affiancate
description: Questa sezione descrive le funzionalità di campionamento delle trame di risorse affiancate.
ms.assetid: E56737CE-C468-4D3C-84EE-E8EB2AB6F505
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cdd46c96219e54aea6990e91de8e340fdca5e32b
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "103728727"
---
# <a name="tiled-resources-texture-sampling-features"></a><span data-ttu-id="db933-103">Funzionalità di campionamento della trama delle risorse affiancate</span><span class="sxs-lookup"><span data-stu-id="db933-103">Tiled resources texture sampling features</span></span>

<span data-ttu-id="db933-104">Questa sezione descrive le funzionalità di campionamento delle trame di risorse affiancate.</span><span class="sxs-lookup"><span data-stu-id="db933-104">This section describes tiled resources texture sampling features.</span></span>

## <a name="requirements-of-tiled-resources-texture-sampling-features"></a><span data-ttu-id="db933-105">Requisiti delle funzionalità di campionamento della trama delle risorse affiancate</span><span class="sxs-lookup"><span data-stu-id="db933-105">Requirements of tiled resources texture sampling features</span></span>

<span data-ttu-id="db933-106">Le funzionalità di campionamento di trama descritte di seguito richiedono il livello [2](tier-2.md) del supporto delle risorse affiancate.</span><span class="sxs-lookup"><span data-stu-id="db933-106">The texture sampling features described here require [Tier 2](tier-2.md) level of tiled resources support.</span></span>

## <a name="shader-feedback-about-mapped-areas"></a><span data-ttu-id="db933-107">Feedback dello shader sulle aree mappate</span><span class="sxs-lookup"><span data-stu-id="db933-107">Shader feedback about mapped areas</span></span>

<span data-ttu-id="db933-108">Qualsiasi istruzione shader che legge e/o scrive in una risorsa affiancata causa la registrazione delle informazioni sullo stato.</span><span class="sxs-lookup"><span data-stu-id="db933-108">Any shader instruction that reads and/or writes to a tiled resource causes status information to be recorded.</span></span> <span data-ttu-id="db933-109">Questo stato viene esposto come valore restituito aggiuntivo facoltativo per ogni istruzione di accesso alle risorse che entra in un registro temporaneo a 32 bit.</span><span class="sxs-lookup"><span data-stu-id="db933-109">This status is exposed as an optional extra return value on every resource access instruction that goes into a 32-bit temp register.</span></span> <span data-ttu-id="db933-110">Il contenuto del valore restituito è opaco.</span><span class="sxs-lookup"><span data-stu-id="db933-110">The contents of the return value are opaque.</span></span> <span data-ttu-id="db933-111">Ovvero la lettura diretta dal programma shader non è consentita.</span><span class="sxs-lookup"><span data-stu-id="db933-111">That is, direct reading by the shader program is disallowed.</span></span> <span data-ttu-id="db933-112">È tuttavia possibile usare la funzione [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) per estrarre le informazioni sullo stato.</span><span class="sxs-lookup"><span data-stu-id="db933-112">But, you can use the [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) function to extract the status info.</span></span>

## <a name="fully-mapped-check"></a><span data-ttu-id="db933-113">Controllo con mapping completo</span><span class="sxs-lookup"><span data-stu-id="db933-113">Fully mapped check</span></span>

<span data-ttu-id="db933-114">La funzione [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) interpreta lo stato restituito da un accesso alla memoria e indica se è stato eseguito il mapping di tutti i dati a cui è stato eseguito il mapping nella risorsa.</span><span class="sxs-lookup"><span data-stu-id="db933-114">The [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) function interprets the status returned from a memory access and indicates whether all data being accessed was mapped in the resource.</span></span> <span data-ttu-id="db933-115">**CheckAccessFullyMapped** restituisce true (0xFFFFFFFF) se i dati sono stati mappati o false (0x00000000) se non è stato eseguito il mapping dei dati.</span><span class="sxs-lookup"><span data-stu-id="db933-115">**CheckAccessFullyMapped** returns true (0xFFFFFFFF) if data was mapped or false (0x00000000) if data was unmapped.</span></span>

<span data-ttu-id="db933-116">Durante le operazioni di filtro, a volte il peso di un determinato Texel è 0,0.</span><span class="sxs-lookup"><span data-stu-id="db933-116">During filter operations, sometimes the weight of a given texel ends up being 0.0.</span></span> <span data-ttu-id="db933-117">Un esempio è un esempio lineare con coordinate di trama che rientrano direttamente in un centro Texel: 3 altri Texel (quelli che possono variare in base all'hardware) contribuiscono al filtro, ma con 0 peso.</span><span class="sxs-lookup"><span data-stu-id="db933-117">An example is a linear sample with texture coordinates that fall directly on a texel center: 3 other texels (which ones they are can vary by hardware) contribute to the filter but with 0 weight.</span></span> <span data-ttu-id="db933-118">I Texel in peso 0 non contribuiscono al risultato del filtro, pertanto se si verificano riquadri **null** , non vengono conteggiati come accessi non mappati.</span><span class="sxs-lookup"><span data-stu-id="db933-118">These 0 weight texels don't contribute to the filter result at all, so if they happen to fall on **NULL** tiles, they don't count as an unmapped access.</span></span> <span data-ttu-id="db933-119">Si noti che la stessa garanzia si applica ai filtri di trama che includono più livelli MIP; Se i Texel in uno dei mipmap non sono mappati, ma il peso su tali Texel è 0, questi Texel non vengono conteggiati come accesso non mappato.</span><span class="sxs-lookup"><span data-stu-id="db933-119">Note the same guarantee applies for texture filters that include multiple mip levels; if the texels on one of the mipmaps isn't mapped but the weight on those texels is 0, those texels don't count as an unmapped access.</span></span>

<span data-ttu-id="db933-120">Quando si esegue il campionamento da un formato con meno di 4 componenti (ad esempio DXGI \_ Format \_ R8 \_ UNORM), i Texel che rientrino nei riquadri **null** comportano l'accesso con mapping **null** , indipendentemente dai componenti che lo shader esamina effettivamente nel risultato.</span><span class="sxs-lookup"><span data-stu-id="db933-120">When sampling from a format that has fewer than 4 components (such as DXGI\_FORMAT\_R8\_UNORM), any texels that fall on **NULL** tiles result in the a **NULL** mapped access being reported regardless of which components the shader actually looks at in the result.</span></span> <span data-ttu-id="db933-121">Se ad esempio si esegue la lettura da R8 \_ UNORM e si maschera il risultato della lettura nello shader con. GBA/. yzw, non dovrebbe essere necessario leggere la trama.</span><span class="sxs-lookup"><span data-stu-id="db933-121">For example, reading from R8\_UNORM and masking the read result in the shader with .gba/.yzw wouldn't appear to need to read the texture at all.</span></span> <span data-ttu-id="db933-122">Tuttavia, se l'indirizzo Texel è un riquadro mappato **null** , l'operazione viene comunque conteggiata come un accesso con mapping **null** .</span><span class="sxs-lookup"><span data-stu-id="db933-122">But if the texel address is a **NULL** mapped tile, the operation still counts as a **NULL** map access.</span></span>

<span data-ttu-id="db933-123">Lo shader può controllare lo stato e intraprendere qualsiasi corso di azione desiderato in caso di errore.</span><span class="sxs-lookup"><span data-stu-id="db933-123">The shader can check the status and pursue any desired course of action on failure.</span></span> <span data-ttu-id="db933-124">Una linea di azione, ad esempio, può essere la registrazione dei "mancati" (ad esempio tramite la scrittura di UAV) e/o l'emissione di un'altra lettura clampata a un LOD più grossolano noto per il mapping.</span><span class="sxs-lookup"><span data-stu-id="db933-124">For example, a course of action can be logging 'misses' (say via UAV write) and/or issuing another read clamped to a coarser LOD known to be mapped.</span></span> <span data-ttu-id="db933-125">Un'applicazione potrebbe voler tenere traccia degli accessi riusciti, in modo da ottenere un'idea della parte del set di riquadri mappato a cui è stato effettuato l'accesso.</span><span class="sxs-lookup"><span data-stu-id="db933-125">An application might want to track successful accesses as well in order to get a sense of what portion of the mapped set of tiles got accessed.</span></span>

<span data-ttu-id="db933-126">Una complicazione per la registrazione non esiste alcun meccanismo per segnalare il set esatto di riquadri a cui sarebbe stato effettuato l'accesso.</span><span class="sxs-lookup"><span data-stu-id="db933-126">One complication for logging is no mechanism exists for reporting the exact set of tiles that would have been accessed.</span></span> <span data-ttu-id="db933-127">L'applicazione può prendere ipotesi conservative basate sulla conoscenza delle coordinate usate per l'accesso, nonché sull'uso dell'istruzione LOD (ad esempio, [**tex2Dlod**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-tex2dlod)) che restituisce il calcolo dell'hardware LOD.</span><span class="sxs-lookup"><span data-stu-id="db933-127">The application can make conservative guesses based on knowing the coordinates it used for access, as well as using the LOD instruction (for example, [**tex2Dlod**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-tex2dlod)) which returns what the hardware LOD calculation is.</span></span>

<span data-ttu-id="db933-128">Un'altra complicazione consiste nel fatto che molti accessi saranno agli stessi riquadri, pertanto si verificherà una grande quantità di registrazione ridondante e probabilmente la contesa sulla memoria.</span><span class="sxs-lookup"><span data-stu-id="db933-128">Another complication is that lots of accesses will be to the same tiles, so a lot of redundant logging will occur and possibly contention on memory.</span></span> <span data-ttu-id="db933-129">Potrebbe essere utile se l'hardware potesse avere la possibilità di non dover segnalare gli accessi ai riquadri se sono stati segnalati altrove.</span><span class="sxs-lookup"><span data-stu-id="db933-129">It could be convenient if the hardware could be given the option to not bother to report tile accesses if they were reported elsewhere before.</span></span> <span data-ttu-id="db933-130">Probabilmente lo stato di tale traccia può essere reimpostato dall'API (probabilmente in corrispondenza dei limiti del frame).</span><span class="sxs-lookup"><span data-stu-id="db933-130">Perhaps the state of such tracking could be reset from the API (likely at frame boundaries).</span></span>

## <a name="per-sample-minlod-clamp"></a><span data-ttu-id="db933-131">MinLOD Clamp per campione</span><span class="sxs-lookup"><span data-stu-id="db933-131">Per-sample MinLOD clamp</span></span>

<span data-ttu-id="db933-132">Per consentire agli shader di evitare aree in mipmap le risorse affiancate note come non mappate, la maggior parte delle istruzioni dello shader che comportano l'uso di un campionatore (filtro) hanno una nuova modalità che consente allo shader di passare un parametro di Clamp float32 MinLOD aggiuntivo all'esempio di trama.</span><span class="sxs-lookup"><span data-stu-id="db933-132">To help shaders avoid areas in mipmapped tiled resources that are known to be non-mapped, most shader instructions that involve using a sampler (filtering) have a new mode that allows the shader to pass an additional float32 MinLOD clamp parameter to the texture sample.</span></span> <span data-ttu-id="db933-133">Questo valore si trova nello spazio dei numeri mipmap della vista, in contrapposizione alla risorsa sottostante.</span><span class="sxs-lookup"><span data-stu-id="db933-133">This value is in the view's mipmap number space, as opposed to the underlying resource.</span></span>

<span data-ttu-id="db933-134">L'hardware esegue il valore [**Max**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-max)(FShaderMinLODClamp, fComputedLOD) nella stessa posizione del calcolo di LOD in cui si verifica il morsetto MinLOD per risorsa, che è anche un valore **Max**().</span><span class="sxs-lookup"><span data-stu-id="db933-134">The hardware performs [**max**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-max)(fShaderMinLODClamp,fComputedLOD) in the same place in the LOD calculation where the per-resource MinLOD clamp occurs, which is also a **max**().</span></span>

<span data-ttu-id="db933-135">Se il risultato dell'applicazione del clamp per singolo campione e di tutti gli altri morsetti LOD definiti nel campionatore è un set vuoto, il risultato è lo stesso risultato dell'accesso al di fuori limite come minLOD Clamp per risorsa: 0 per i componenti nel formato di superficie e i valori predefiniti per i componenti mancanti.</span><span class="sxs-lookup"><span data-stu-id="db933-135">If the result of applying the per-sample LOD clamp and any other LOD clamps defined in the sampler is an empty set, the result is the same out of bounds access result as the per-resource minLOD clamp: 0 for components in the surface format and defaults for missing components.</span></span>

<span data-ttu-id="db933-136">L'istruzione LOD (ad esempio, [**tex2Dlod**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-tex2dlod)), che precede il morsetto minLOD per campione descritto in questo argomento, restituisce un valore di LOD bloccato e non bloccato.</span><span class="sxs-lookup"><span data-stu-id="db933-136">The LOD instruction (for example, [**tex2Dlod**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-tex2dlod)), which predates the per-sample minLOD clamp described here, returns both a clamped and unclamped LOD.</span></span> <span data-ttu-id="db933-137">Il valore di LOD bloccato restituito da questa istruzione LOD riflette tutti i bloccaggi, incluso il morsetto per risorsa, ma non un morsetto per campione.</span><span class="sxs-lookup"><span data-stu-id="db933-137">The clamped LOD returned from this LOD instruction reflects all clamping including the per-resource clamp, but not a per-sample clamp.</span></span> <span data-ttu-id="db933-138">Il morsetto per campione è comunque controllato e noto dallo shader, quindi l'autore dello shader può applicare manualmente tale morsetto al valore restituito dell'istruzione LOD, se lo si desidera.</span><span class="sxs-lookup"><span data-stu-id="db933-138">Per-sample clamp is controlled and known by the shader anyway, so the shader author can manually apply that clamp to the LOD instruction's return value if desired.</span></span>

## <a name="minmax-reduction-filtering"></a><span data-ttu-id="db933-139">Filtro riduzione min/max</span><span class="sxs-lookup"><span data-stu-id="db933-139">Min/Max reduction filtering</span></span>

<span data-ttu-id="db933-140">Le applicazioni possono scegliere di gestire le proprie strutture di dati che informano l'aspetto dei mapping per una risorsa affiancata.</span><span class="sxs-lookup"><span data-stu-id="db933-140">Applications can choose to manage their own data structures that inform them of what the mappings looks like for a tiled resource.</span></span> <span data-ttu-id="db933-141">Un esempio potrebbe essere una superficie che contiene un Texel per contenere informazioni per ogni riquadro in una risorsa affiancata.</span><span class="sxs-lookup"><span data-stu-id="db933-141">An example would be a surface that contains a texel to hold information for every tile in a tiled resource.</span></span> <span data-ttu-id="db933-142">È possibile archiviare il primo elemento LOD mappato in una posizione del riquadro specificata.</span><span class="sxs-lookup"><span data-stu-id="db933-142">One might store the first LOD that is mapped at a given tile location.</span></span> <span data-ttu-id="db933-143">Con un attento campionamento di questa struttura di dati in modo analogo alla risorsa affiancata, è possibile individuare il valore minimo di LOD di cui è stato eseguito il mapping completo per un footprint di filtro di trama intero.</span><span class="sxs-lookup"><span data-stu-id="db933-143">By careful sampling of this data structure in a similar way that the tiled resource is intended to be sampled, one might discover what the minimum LOD that is fully mapped for an entire texture filter footprint will be.</span></span> <span data-ttu-id="db933-144">Per semplificare questo processo, Direct3D 11,2 introduce una nuova modalità di campionamento per utilizzo generico, ovvero un filtro minimo/massimo.</span><span class="sxs-lookup"><span data-stu-id="db933-144">To help make this process easier, Direct3D 11.2 introduces a new general purpose sampler mode, min/max filtering.</span></span>

<span data-ttu-id="db933-145">L'utilità di filtro min/max per il rilevamento di LOD può essere utile per altri scopi, ad esempio, forse il filtro delle superfici di profondità.</span><span class="sxs-lookup"><span data-stu-id="db933-145">The utility of min/max filtering for LOD tracking might be useful for other purposes, such as, perhaps the filtering of depth surfaces.</span></span>

<span data-ttu-id="db933-146">Il filtro di riduzione min/max è una modalità nei sampler che recupera lo stesso set di Texel che un normale filtro di trama recupererà.</span><span class="sxs-lookup"><span data-stu-id="db933-146">Min/max reduction filtering is a mode on samplers that fetches the same set of texels that a normal texture filter would fetch.</span></span> <span data-ttu-id="db933-147">Tuttavia, anziché fondere i valori per produrre una risposta, restituisce il valore min () o Max () dei Texel recuperati, in base ai singoli componenti, ad esempio il numero minimo di tutti i valori R, separatamente dal minimo di tutti i valori G e così via.</span><span class="sxs-lookup"><span data-stu-id="db933-147">But instead of blending the values to produce an answer, it returns the min() or max() of the texels fetched, on a per-component basis (for example, the min of all the R values, separately from the min of all the G values and so on).</span></span>

<span data-ttu-id="db933-148">Le operazioni min/max seguono le regole di precisione aritmetica Direct3D.</span><span class="sxs-lookup"><span data-stu-id="db933-148">The min/max operations follow Direct3D arithmetic precision rules.</span></span> <span data-ttu-id="db933-149">L'ordine dei confronti non è rilevante.</span><span class="sxs-lookup"><span data-stu-id="db933-149">The order of comparisons doesn't matter.</span></span>

<span data-ttu-id="db933-150">Durante le operazioni di filtro che non sono min/max, a volte il peso di un determinato Texel è 0,0.</span><span class="sxs-lookup"><span data-stu-id="db933-150">During filter operations that aren't min/max, sometimes the weight of a given texel ends up being 0.0.</span></span> <span data-ttu-id="db933-151">Un esempio è un esempio lineare con coordinate di trama che rientrano direttamente in un centro Texel-3 altri Texel (quelli che possono variare in base all'hardware) contribuiscono al filtro, ma con 0 peso.</span><span class="sxs-lookup"><span data-stu-id="db933-151">An example is a linear sample with texture coordinates that fall directly on a texel center - 3 other texels (which ones they are may vary by hardware) contribute to the filter but with 0 weight.</span></span> <span data-ttu-id="db933-152">Per uno di questi Texel che sarebbe 0 peso su un filtro non min/max, se il filtro è min/max, questi Texel non contribuiscono ancora al risultato (e i pesi non influiscono sull'operazione di filtro min/max).</span><span class="sxs-lookup"><span data-stu-id="db933-152">For any of these texels that would be 0 weight on a non-min/max filter, if the filter is min/max, these texels still do not contribute to the result (and the weights do not otherwise affect the min/max filter operation).</span></span>

<span data-ttu-id="db933-153">L'elenco completo delle modalità di filtro viene visualizzato nell'enumerazione del [**\_ filtro d3d11**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_filter) con i valori minimo e massimo nei valori di enumerazione.</span><span class="sxs-lookup"><span data-stu-id="db933-153">The full list of filter modes is shown in the [**D3D11\_FILTER**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_filter) enumeration with MINIMUM and MAXIMUM in the enumeration values.</span></span>

<span data-ttu-id="db933-154">Il supporto per questa funzionalità dipende dal supporto di [livello 2](tier-2.md) per le risorse affiancate.</span><span class="sxs-lookup"><span data-stu-id="db933-154">Support for this feature depends on [Tier 2](tier-2.md) support for tiled resources.</span></span>

## <a name="related-topics"></a><span data-ttu-id="db933-155">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="db933-155">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="db933-156">Accesso alla pipeline alle risorse affiancate</span><span class="sxs-lookup"><span data-stu-id="db933-156">Pipeline access to tiled resources</span></span>](pipeline-access-to-tiled-resources.md)
</dt> </dl>

 

 