---
title: Fasi a mosaico
description: Il runtime di Direct3D 11 supporta tre nuove fasi che implementano lo schema a mosaico, che converte le aree di sottodivisione con dettagli più bassi in primitive di dettaglio nella GPU.
ms.assetid: 4ad2fd3e-6e1a-4326-8469-3198acf931dc
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3aacb48ccc2c95ab93ba4f34212e654880d9a369
ms.sourcegitcommit: 4e4f9e7c90d25af0774deec1d44bd49fa9b6daa9
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2020
ms.locfileid: "104339511"
---
# <a name="tessellation-stages"></a><span data-ttu-id="602bc-103">Fasi a mosaico</span><span class="sxs-lookup"><span data-stu-id="602bc-103">Tessellation Stages</span></span>

<span data-ttu-id="602bc-104">Il runtime di Direct3D 11 supporta tre nuove fasi che implementano lo schema a mosaico, che converte le aree di sottodivisione con dettagli più bassi in primitive di dettaglio nella GPU.</span><span class="sxs-lookup"><span data-stu-id="602bc-104">The Direct3D 11 runtime supports three new stages that implement tessellation, which converts low-detail subdivision surfaces into higher-detail primitives on the GPU.</span></span> <span data-ttu-id="602bc-105">Tessere a mosaico (o suddividere) superfici di ordine superiore in strutture appropriate per il rendering.</span><span class="sxs-lookup"><span data-stu-id="602bc-105">Tessellation tiles (or breaks up) high-order surfaces into suitable structures for rendering.</span></span>

<span data-ttu-id="602bc-106">Implementando la suddivisione a mosaico nell'hardware, una pipeline grafica può valutare i modelli più bassi (conteggio poligono inferiore) ed eseguire il rendering in modo più dettagliato.</span><span class="sxs-lookup"><span data-stu-id="602bc-106">By implementing tessellation in hardware, a graphics pipeline can evaluate lower detail (lower polygon count) models and render in higher detail.</span></span> <span data-ttu-id="602bc-107">Sebbene sia possibile eseguire lo mosaico del software, la suddivisione in mosaico implementata dall'hardware può generare una notevole quantità di dettagli visivi (incluso il supporto per il mapping di spostamento) senza aggiungere i dettagli visivi alle dimensioni del modello e alle frequenze di aggiornamento paralizzanti.</span><span class="sxs-lookup"><span data-stu-id="602bc-107">While software tessellation can be done, tessellation implemented by hardware can generate an incredible amount of visual detail (including support for displacement mapping) without adding the visual detail to the model sizes and paralyzing refresh rates.</span></span>

-   [<span data-ttu-id="602bc-108">Vantaggi a mosaico</span><span class="sxs-lookup"><span data-stu-id="602bc-108">Tessellation Benefits</span></span>](#tessellation-benefits)
-   [<span data-ttu-id="602bc-109">Nuove fasi della pipeline</span><span class="sxs-lookup"><span data-stu-id="602bc-109">New Pipeline Stages</span></span>](#new-pipeline-stages)
    -   [<span data-ttu-id="602bc-110">Fase Hull shader</span><span class="sxs-lookup"><span data-stu-id="602bc-110">Hull-Shader Stage</span></span>](#hull-shader-stage)
    -   [<span data-ttu-id="602bc-111">Fase mosaico</span><span class="sxs-lookup"><span data-stu-id="602bc-111">Tessellator Stage</span></span>](#tessellator-stage)
    -   [<span data-ttu-id="602bc-112">Fase Domain-shader</span><span class="sxs-lookup"><span data-stu-id="602bc-112">Domain-Shader Stage</span></span>](#domain-shader-stage)
-   [<span data-ttu-id="602bc-113">API per l'inizializzazione di fasi mosaico</span><span class="sxs-lookup"><span data-stu-id="602bc-113">APIs for initializing Tessellation Stages</span></span>](#apis-for-initializing-tessellation-stages)
-   [<span data-ttu-id="602bc-114">Procedura:</span><span class="sxs-lookup"><span data-stu-id="602bc-114">How to's:</span></span>](#how-tos)
-   [<span data-ttu-id="602bc-115">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="602bc-115">Related topics</span></span>](#related-topics)

## <a name="tessellation-benefits"></a><span data-ttu-id="602bc-116">Vantaggi a mosaico</span><span class="sxs-lookup"><span data-stu-id="602bc-116">Tessellation Benefits</span></span>

<span data-ttu-id="602bc-117">Tassellatura</span><span class="sxs-lookup"><span data-stu-id="602bc-117">Tessellation:</span></span>

-   <span data-ttu-id="602bc-118">Salva una grande quantità di memoria e larghezza di banda, che consente a un'applicazione di eseguire il rendering di superfici dettagliate più dettagliate da modelli a bassa risoluzione.</span><span class="sxs-lookup"><span data-stu-id="602bc-118">Saves lots of memory and bandwidth, which allows an application to render higher detailed surfaces from low-resolution models.</span></span> <span data-ttu-id="602bc-119">La tecnica di suddivisione a mosaico implementata nella pipeline di Direct3D 11 supporta anche il mapping di spostamento, che può produrre quantità eccezionali di dettagli della superficie.</span><span class="sxs-lookup"><span data-stu-id="602bc-119">The tessellation technique implemented in the Direct3D 11 pipeline also supports displacement mapping, which can produce stunning amounts of surface detail.</span></span>
-   <span data-ttu-id="602bc-120">Supporta le tecniche di rendering scalabile, ad esempio i livelli di dettaglio dipendenti continui o visualizzabili, che possono essere calcolati in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="602bc-120">Supports scalable-rendering techniques, such as continuous or view dependent levels-of-detail which can be calculated on the fly.</span></span>
-   <span data-ttu-id="602bc-121">Consente di migliorare le prestazioni eseguendo calcoli costosi a una frequenza più bassa (eseguendo calcoli su un modello di dettaglio inferiore).</span><span class="sxs-lookup"><span data-stu-id="602bc-121">Improves performance by performing expensive computations at lower frequency (doing calculations on a lower-detail model).</span></span> <span data-ttu-id="602bc-122">Questo potrebbe includere calcoli di Blend con forme Blend o destinazioni morph per calcoli realistici di animazione o fisica per il rilevamento di conflitti o la dinamica del corpo flessibile.</span><span class="sxs-lookup"><span data-stu-id="602bc-122">This could include blending calculations using blend shapes or morph targets for realistic animation or physics calculations for collision detection or soft body dynamics.</span></span>

<span data-ttu-id="602bc-123">La pipeline Direct3D 11 implementa la suddivisione a mosaico nell'hardware, che consente di caricare il lavoro dalla CPU alla GPU.</span><span class="sxs-lookup"><span data-stu-id="602bc-123">The Direct3D 11 pipeline implements tessellation in hardware, which off-loads the work from the CPU to the GPU.</span></span> <span data-ttu-id="602bc-124">Questo può comportare un miglioramento delle prestazioni molto elevato se un'applicazione implementa un numero elevato di destinazioni morph e/o modelli di mascheramento/deformazione più sofisticati.</span><span class="sxs-lookup"><span data-stu-id="602bc-124">This can lead to very large performance improvements if an application implements large numbers of morph targets and/or more sophisticated skinning/deformation models.</span></span> <span data-ttu-id="602bc-125">Per accedere alle nuove funzionalità a mosaico, è necessario conoscere alcune nuove fasi della pipeline.</span><span class="sxs-lookup"><span data-stu-id="602bc-125">To access the new tessellation features, you must learn about some new pipeline stages.</span></span>

## <a name="new-pipeline-stages"></a><span data-ttu-id="602bc-126">Nuove fasi della pipeline</span><span class="sxs-lookup"><span data-stu-id="602bc-126">New Pipeline Stages</span></span>

<span data-ttu-id="602bc-127">Lo schema a mosaico usa la GPU per calcolare una superficie più dettagliata da una superficie costruita da patch quadre, patch di triangolo o oline.</span><span class="sxs-lookup"><span data-stu-id="602bc-127">Tessellation uses the GPU to calculate a more detailed surface from a surface constructed from quad patches, triangle patches or isolines.</span></span> <span data-ttu-id="602bc-128">Per approssimare l'area ordinata, ogni patch è suddivisa in triangoli, punti o linee usando i fattori a mosaico.</span><span class="sxs-lookup"><span data-stu-id="602bc-128">To approximate the high-ordered surface, each patch is subdivided into triangles, points, or lines using tessellation factors.</span></span> <span data-ttu-id="602bc-129">La pipeline Direct3D 11 implementa la suddivisione a mosaico usando tre nuove fasi della pipeline:</span><span class="sxs-lookup"><span data-stu-id="602bc-129">The Direct3D 11 pipeline implements tessellation using three new pipeline stages:</span></span>

-   <span data-ttu-id="602bc-130">[Fase Hull shader](#hull-shader-stage) : una fase programmabile dello shader che produce una patch di geometria (e costanti patch) che corrispondono a ogni patch di input (quad, triangolo o riga).</span><span class="sxs-lookup"><span data-stu-id="602bc-130">[Hull-Shader Stage](#hull-shader-stage) - A programmable shader stage that produces a geometry patch (and patch constants) that correspond to each input patch (quad, triangle, or line).</span></span>
-   <span data-ttu-id="602bc-131">[Fase mosaico](#tessellator-stage) : fase della pipeline di una funzione fissa che consente di creare un modello di campionamento del dominio che rappresenta la patch Geometry e genera un set di oggetti più piccoli (triangoli, punti o linee) che connettono questi esempi.</span><span class="sxs-lookup"><span data-stu-id="602bc-131">[Tessellator Stage](#tessellator-stage) - A fixed function pipeline stage that creates a sampling pattern of the domain that represents the geometry patch and generates a set of smaller objects (triangles, points, or lines) that connect these samples.</span></span>
-   <span data-ttu-id="602bc-132">[Fase Domain-shader](#domain-shader-stage) : una fase programmabile dello shader che calcola la posizione del vertice che corrisponde a ogni esempio di dominio.</span><span class="sxs-lookup"><span data-stu-id="602bc-132">[Domain-Shader Stage](#domain-shader-stage) - A programmable shader stage that calculates the vertex position that corresponds to each domain sample.</span></span>

<span data-ttu-id="602bc-133">Il diagramma seguente evidenzia le nuove fasi della pipeline Direct3D 11.</span><span class="sxs-lookup"><span data-stu-id="602bc-133">The following diagram highlights the new stages of the Direct3D 11 pipeline.</span></span>

![diagramma della pipeline Direct3D 11 che evidenzia le fasi di Hull shader, mosaico e Domain shader](images/d3d11-pipeline-stages-tessellation.png)

<span data-ttu-id="602bc-135">Nel diagramma seguente viene illustrata la progressione nelle fasi a mosaico.</span><span class="sxs-lookup"><span data-stu-id="602bc-135">The following diagram shows the progression through the tessellation stages.</span></span> <span data-ttu-id="602bc-136">La progressione inizia con la superficie di suddivisione dei dettagli bassa.</span><span class="sxs-lookup"><span data-stu-id="602bc-136">The progression starts with the low-detail subdivision surface.</span></span> <span data-ttu-id="602bc-137">La progressione evidenzia la patch di input con la patch Geometry corrispondente, gli esempi di dominio e i triangoli che connettono questi esempi.</span><span class="sxs-lookup"><span data-stu-id="602bc-137">The progression next highlights the input patch with the corresponding geometry patch, domain samples, and triangles that connect these samples.</span></span> <span data-ttu-id="602bc-138">La progressione evidenzia infine i vertici che corrispondono a questi esempi.</span><span class="sxs-lookup"><span data-stu-id="602bc-138">The progression finally highlights the vertices that correspond to these samples.</span></span>

![diagramma della progressione a mosaico](images/tess-prog.png)

### <a name="hull-shader-stage"></a><span data-ttu-id="602bc-140">Fase Hull-Shader</span><span class="sxs-lookup"><span data-stu-id="602bc-140">Hull-Shader Stage</span></span>

<span data-ttu-id="602bc-141">Hull shader, che viene richiamato una volta per ogni patch, trasforma i punti di controllo di input che definiscono una superficie di ordine inferiore nei punti di controllo che costituiscono una patch.</span><span class="sxs-lookup"><span data-stu-id="602bc-141">A hull shader -- which is invoked once per patch -- transforms input control points that define a low-order surface into control points that make up a patch.</span></span> <span data-ttu-id="602bc-142">Esegue anche alcuni calcoli per patch per fornire i dati per la fase di suddivisione a mosaico e la fase del dominio.</span><span class="sxs-lookup"><span data-stu-id="602bc-142">It also does some per patch calculations to provide data for the tessellation stage and the domain stage.</span></span> <span data-ttu-id="602bc-143">Al livello più semplice della casella nera, la fase Hull shader sarà simile al diagramma seguente.</span><span class="sxs-lookup"><span data-stu-id="602bc-143">At the simplest black-box level, the hull-shader stage would look something like the following diagram.</span></span>

![diagramma della fase Hull shader](images/d3d11-hull-shader.png)

<span data-ttu-id="602bc-145">Un Hull shader viene implementato con una funzione HLSL e presenta le proprietà seguenti:</span><span class="sxs-lookup"><span data-stu-id="602bc-145">A hull shader is implemented with an HLSL function, and has the following properties:</span></span>

-   <span data-ttu-id="602bc-146">L'input dello shader è compreso tra 1 e 32 punti di controllo.</span><span class="sxs-lookup"><span data-stu-id="602bc-146">The shader input is between 1 and 32 control points.</span></span>
-   <span data-ttu-id="602bc-147">L'output dello shader è compreso tra 1 e 32 punti di controllo, indipendentemente dal numero di fattori a mosaico.</span><span class="sxs-lookup"><span data-stu-id="602bc-147">The shader output is between 1 and 32 control points, regardless of the number of tessellation factors.</span></span> <span data-ttu-id="602bc-148">L'output dei punti di controllo di uno scafo dello shader può essere utilizzato dalla fase del dominio shader.</span><span class="sxs-lookup"><span data-stu-id="602bc-148">The control-points output from a hull shader can be consumed by the domain-shader stage.</span></span> <span data-ttu-id="602bc-149">I dati delle costanti patch possono essere utilizzati da uno shader del dominio; i fattori a mosaico possono essere utilizzati dal Domain shader e dalla fase a mosaico.</span><span class="sxs-lookup"><span data-stu-id="602bc-149">Patch constant data can be consumed by a domain shader; tessellation factors can be consumed by the domain shader and the tessellation stage.</span></span>
-   <span data-ttu-id="602bc-150">I fattori a mosaico determinano la quantità di suddivisione di ogni patch.</span><span class="sxs-lookup"><span data-stu-id="602bc-150">Tessellation factors determine how much to subdivide each patch.</span></span>
-   <span data-ttu-id="602bc-151">Lo shader dichiara lo stato richiesto dalla fase mosaico.</span><span class="sxs-lookup"><span data-stu-id="602bc-151">The shader declares the state required by the tessellator stage.</span></span> <span data-ttu-id="602bc-152">Sono incluse informazioni quali il numero di punti di controllo, il tipo di facet patch e il tipo di partizionamento da usare quando tessellating.</span><span class="sxs-lookup"><span data-stu-id="602bc-152">This includes information such as the number of control points, the type of patch face and the type of partitioning to use when tessellating.</span></span> <span data-ttu-id="602bc-153">Queste informazioni vengono visualizzate come dichiarazioni in genere all'inizio del codice dello shader.</span><span class="sxs-lookup"><span data-stu-id="602bc-153">This information appears as declarations typically at the front of the shader code.</span></span>
-   <span data-ttu-id="602bc-154">Se la fase Hull-shader imposta un fattore di mosaico perimetrale su = 0 o NaN, la patch verrà ritagliata.</span><span class="sxs-lookup"><span data-stu-id="602bc-154">If the hull-shader stage sets any edge tessellation factor to = 0 or NaN, the patch will be culled.</span></span> <span data-ttu-id="602bc-155">Di conseguenza, la fase mosaico può essere eseguita o meno, il Domain shader non verrà eseguito e non verrà generato alcun output visibile per tale patch.</span><span class="sxs-lookup"><span data-stu-id="602bc-155">As a result, the tessellator stage may or may not run, the domain shader will not run, and no visible output will be produced for that patch.</span></span>

<span data-ttu-id="602bc-156">A un livello più profondo, un Hull shader funziona effettivamente in due fasi: una fase del punto di controllo e una fase di una costante di patch, che vengono eseguite in parallelo dall'hardware.</span><span class="sxs-lookup"><span data-stu-id="602bc-156">At a deeper level, a hull-shader actually operates in two phases: a control-point phase and a patch-constant phase, which are run in parallel by the hardware.</span></span> <span data-ttu-id="602bc-157">Il compilatore HLSL estrae il parallelismo in uno scafo shader e lo codifica in bytecode che guida l'hardware.</span><span class="sxs-lookup"><span data-stu-id="602bc-157">The HLSL compiler extracts the parallelism in a hull shader and encodes it into bytecode that drives the hardware.</span></span>

-   <span data-ttu-id="602bc-158">La fase del punto di controllo funziona una volta per ogni punto di controllo, leggendo i punti di controllo per una patch e generando un punto di controllo di output (identificato da un ControlPointID).</span><span class="sxs-lookup"><span data-stu-id="602bc-158">The control-point phase operates once for each control-point, reading the control points for a patch, and generating one output control point (identified by a ControlPointID).</span></span>
-   <span data-ttu-id="602bc-159">La fase patch-Constant funziona una volta per ogni patch per generare fattori di mosaico perimetrale e altre costanti per patch.</span><span class="sxs-lookup"><span data-stu-id="602bc-159">The patch-constant phase operates once per patch to generate edge tessellation factors and other per-patch constants.</span></span> <span data-ttu-id="602bc-160">Internamente, è possibile che vengano eseguite contemporaneamente molte fasi della costante patch.</span><span class="sxs-lookup"><span data-stu-id="602bc-160">Internally, many patch-constant phases may run at the same time.</span></span> <span data-ttu-id="602bc-161">La fase patch-Constant ha accesso in sola lettura a tutti i punti di controllo di input e output.</span><span class="sxs-lookup"><span data-stu-id="602bc-161">The patch-constant phase has read-only access to all input and output control points.</span></span>

<span data-ttu-id="602bc-162">Di seguito è riportato un esempio di Hull shader:</span><span class="sxs-lookup"><span data-stu-id="602bc-162">Here's an example of a hull shader:</span></span>


```
[patchsize(12)]
[patchconstantfunc(MyPatchConstantFunc)]
MyOutPoint main(uint Id : SV_ControlPointID,
     InputPatch<MyInPoint, 12> InPts)
{
     MyOutPoint result;
     
     ...
     
     result = TransformControlPoint( InPts[Id] );

     return result;
}
```



<span data-ttu-id="602bc-163">Per un esempio in cui viene creato un Hull shader, vedere [How to: Create a Hull shader](direct3d-11-advanced-stages-hull-shader-create.md).</span><span class="sxs-lookup"><span data-stu-id="602bc-163">For an example that creates a hull shader, see [How To: Create a Hull Shader](direct3d-11-advanced-stages-hull-shader-create.md).</span></span>

### <a name="tessellator-stage"></a><span data-ttu-id="602bc-164">Fase mosaico</span><span class="sxs-lookup"><span data-stu-id="602bc-164">Tessellator Stage</span></span>

<span data-ttu-id="602bc-165">Mosaico è una fase a funzione fissa inizializzata associando uno scafo shader alla pipeline (vedere [procedura: inizializzare la fase mosaico](direct3d-11-advanced-stages-tessellator-initialize.md)).</span><span class="sxs-lookup"><span data-stu-id="602bc-165">The tessellator is a fixed-function stage initialized by binding a hull shader to the pipeline (see [How To: Initialize the Tessellator Stage](direct3d-11-advanced-stages-tessellator-initialize.md)).</span></span> <span data-ttu-id="602bc-166">Lo scopo della fase mosaico è suddividere un dominio (quad, Tri o line) in molti oggetti più piccoli (triangoli, punti o linee).</span><span class="sxs-lookup"><span data-stu-id="602bc-166">The purpose of the tessellator stage is to subdivide a domain (quad, tri, or line) into many smaller objects (triangles, points or lines).</span></span> <span data-ttu-id="602bc-167">Il mosaico riquadri un dominio canonico in un sistema di coordinate normalizzato (zero-a-uno).</span><span class="sxs-lookup"><span data-stu-id="602bc-167">The tessellator tiles a canonical domain in a normalized (zero-to-one) coordinate system.</span></span> <span data-ttu-id="602bc-168">Ad esempio, un dominio Quad è tassellati a un quadrato di unità.</span><span class="sxs-lookup"><span data-stu-id="602bc-168">For example, a quad domain is tessellated to a unit square.</span></span>

<span data-ttu-id="602bc-169">Mosaico funziona una volta per ogni patch usando i fattori a mosaico (che specificano la modalità di tassellati del dominio) e il tipo di partizionamento (che specifica l'algoritmo usato per sezionare una patch) passati dalla fase Hull-shader.</span><span class="sxs-lookup"><span data-stu-id="602bc-169">The tessellator operates once per patch using the tessellation factors (which specify how finely the domain will be tessellated) and the type of partitioning (which specifies the algorithm used to slice up a patch) that are passed in from the hull-shader stage.</span></span> <span data-ttu-id="602bc-170">Mosaico restituisce le coordinate UV (e facoltativamente w) e la topologia di superficie alla fase Domain-shader.</span><span class="sxs-lookup"><span data-stu-id="602bc-170">The tessellator outputs uv (and optionally w) coordinates and the surface topology to the domain-shader stage.</span></span>

<span data-ttu-id="602bc-171">Internamente, il mosaico funziona in due fasi:</span><span class="sxs-lookup"><span data-stu-id="602bc-171">Internally, the tessellator operates in two phases:</span></span>

-   <span data-ttu-id="602bc-172">La prima fase elabora i fattori a mosaico, risolvendo i problemi di arrotondamento, gestendo fattori molto piccoli, riducendo e combinando fattori, usando operazioni aritmetiche a virgola mobile a 32 bit.</span><span class="sxs-lookup"><span data-stu-id="602bc-172">The first phase processes the tessellation factors, fixing rounding problems, handling very small factors, reducing and combining factors, using 32-bit floating-point arithmetic.</span></span>
-   <span data-ttu-id="602bc-173">La seconda fase genera elenchi di punti o topologia in base al tipo di partizionamento selezionato.</span><span class="sxs-lookup"><span data-stu-id="602bc-173">The second phase generates point or topology lists based on the type of partitioning selected.</span></span> <span data-ttu-id="602bc-174">Si tratta dell'attività principale della fase mosaico e USA frazioni a 16 bit con aritmetica a virgola fissa.</span><span class="sxs-lookup"><span data-stu-id="602bc-174">This is the core task of the tessellator stage and uses 16-bit fractions with fixed-point arithmetic.</span></span> <span data-ttu-id="602bc-175">L'aritmetica a virgola fissa consente l'accelerazione hardware mantenendo la precisione accettabile.</span><span class="sxs-lookup"><span data-stu-id="602bc-175">Fixed-point arithmetic allows hardware acceleration while maintaining acceptable precision.</span></span> <span data-ttu-id="602bc-176">Ad esempio, data una patch a 64 metri di larghezza, questa precisione può inserire punti a una risoluzione di 2 mm.</span><span class="sxs-lookup"><span data-stu-id="602bc-176">For example, given a 64 meter wide patch, this precision can place points at a 2 mm resolution.</span></span>



| <span data-ttu-id="602bc-177">Tipo di partizionamento</span><span class="sxs-lookup"><span data-stu-id="602bc-177">Type of Partitioning</span></span> | <span data-ttu-id="602bc-178">Range</span><span class="sxs-lookup"><span data-stu-id="602bc-178">Range</span></span>                       |
|----------------------|-----------------------------|
| <span data-ttu-id="602bc-179">dispari frazionario \_</span><span class="sxs-lookup"><span data-stu-id="602bc-179">fractional\_odd</span></span>      | <span data-ttu-id="602bc-180">\[1... 63\]</span><span class="sxs-lookup"><span data-stu-id="602bc-180">\[1...63\]</span></span>                  |
| <span data-ttu-id="602bc-181">anche frazionaria \_</span><span class="sxs-lookup"><span data-stu-id="602bc-181">fractional\_even</span></span>     | <span data-ttu-id="602bc-182">Intervallo di TessFactor: \[ 2.. 64\]</span><span class="sxs-lookup"><span data-stu-id="602bc-182">TessFactor range: \[2..64\]</span></span> |
| <span data-ttu-id="602bc-183">numero intero</span><span class="sxs-lookup"><span data-stu-id="602bc-183">integer</span></span>              | <span data-ttu-id="602bc-184">Intervallo di TessFactor: \[ 1.. 64\]</span><span class="sxs-lookup"><span data-stu-id="602bc-184">TessFactor range: \[1..64\]</span></span> |
| <span data-ttu-id="602bc-185">pow2</span><span class="sxs-lookup"><span data-stu-id="602bc-185">pow2</span></span>                 | <span data-ttu-id="602bc-186">Intervallo di TessFactor: \[ 1.. 64\]</span><span class="sxs-lookup"><span data-stu-id="602bc-186">TessFactor range: \[1..64\]</span></span> |



 

### <a name="domain-shader-stage"></a><span data-ttu-id="602bc-187">Fase Domain-Shader</span><span class="sxs-lookup"><span data-stu-id="602bc-187">Domain-Shader Stage</span></span>

<span data-ttu-id="602bc-188">Un Domain shader calcola la posizione del vertice di un punto suddiviso nella patch di output.</span><span class="sxs-lookup"><span data-stu-id="602bc-188">A domain shader calculates the vertex position of a subdivided point in the output patch.</span></span> <span data-ttu-id="602bc-189">Un Domain shader viene eseguito una volta per ogni punto di output della fase mosaico e ha accesso in sola lettura alle coordinate UV di output della fase mosaico, alla patch di output di Hull shader e alle costanti della patch di output di Hull shader, come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="602bc-189">A domain shader is run once per tessellator stage output point and has read-only access to the tessellator stage output UV coordinates, the hull shader output patch, and the hull shader output patch constants, as the following diagram shows.</span></span>

![diagramma della fase Domain-shader](images/d3d11-domain-shader.png)

<span data-ttu-id="602bc-191">Le proprietà dello shader del dominio includono:</span><span class="sxs-lookup"><span data-stu-id="602bc-191">Properties of the domain shader include:</span></span>

-   <span data-ttu-id="602bc-192">Un Domain shader viene richiamato una volta per ogni coordinata di output dalla fase mosaico.</span><span class="sxs-lookup"><span data-stu-id="602bc-192">A domain shader is invoked once per output coordinate from the tessellator stage.</span></span>
-   <span data-ttu-id="602bc-193">Un Domain shader usa i punti di controllo di output dalla fase Hull shader.</span><span class="sxs-lookup"><span data-stu-id="602bc-193">A domain shader consumes output control points from the hull-shader stage.</span></span>
-   <span data-ttu-id="602bc-194">Un Domain shader restituisce la posizione di un vertice.</span><span class="sxs-lookup"><span data-stu-id="602bc-194">A domain shader outputs the position of a vertex.</span></span>
-   <span data-ttu-id="602bc-195">Gli input sono gli output dello scafo dello shader, inclusi i punti di controllo, i dati delle patch costanti e i fattori a mosaico.</span><span class="sxs-lookup"><span data-stu-id="602bc-195">Inputs are the hull shader outputs including control points, patch constant data and tessellation factors.</span></span> <span data-ttu-id="602bc-196">I fattori a mosaico possono includere, ad esempio, i valori usati dalla funzione fissa mosaico, nonché i valori non elaborati (prima di arrotondare per mosaico Integer), che facilita il geomorphing.</span><span class="sxs-lookup"><span data-stu-id="602bc-196">The tessellation factors can include the values used by the fixed function tessellator as well as the raw values (before rounding by integer tessellation, for example), which facilitates geomorphing, for example.</span></span>

<span data-ttu-id="602bc-197">Al termine dello shader del dominio, la suddivisione a mosaico viene completata e i dati della pipeline continuano alla fase successiva della pipeline (Geometry shader, pixel shader e così via).</span><span class="sxs-lookup"><span data-stu-id="602bc-197">After the domain shader completes, tessellation is finished and pipeline data continues to the next pipeline stage (geometry shader, pixel shader etc).</span></span> <span data-ttu-id="602bc-198">Un geometry shader che prevede primitive con adiacenza (ad esempio, 6 vertici per triangolo) non è valido quando il mosaico è attivo (ciò comporta un comportamento non definito, a cui il livello di debug si lamenta).</span><span class="sxs-lookup"><span data-stu-id="602bc-198">A geometry shader that expects primitives with adjacency (for example, 6 vertices per triangle) is not valid when tessellation is active (this results in undefined behavior, which the debug layer will complain about).</span></span>

<span data-ttu-id="602bc-199">Di seguito è riportato un esempio di Domain shader:</span><span class="sxs-lookup"><span data-stu-id="602bc-199">Here is an example of a domain shader:</span></span>


```
void main( out    MyDSOutput result, 
           float2 myInputUV : SV_DomainPoint, 
           MyDSInput DSInputs,
           OutputPatch<MyOutPoint, 12> ControlPts, 
           MyTessFactors tessFactors)
{
     ...

     result.Position = EvaluateSurfaceUV(ControlPoints, myInputUV);
}
```



## <a name="apis-for-initializing-tessellation-stages"></a><span data-ttu-id="602bc-200">API per l'inizializzazione di fasi mosaico</span><span class="sxs-lookup"><span data-stu-id="602bc-200">APIs for initializing Tessellation Stages</span></span>

<span data-ttu-id="602bc-201">La suddivisione a mosaico viene implementata con due nuove fasi di shader programmabili: uno scafo e uno shader del dominio.</span><span class="sxs-lookup"><span data-stu-id="602bc-201">Tessellation is implemented with two new programmable shader stages: a hull shader and a domain shader.</span></span> <span data-ttu-id="602bc-202">Queste nuove fasi dello shader sono programmate con codice HLSL definito nel modello di shader 5.</span><span class="sxs-lookup"><span data-stu-id="602bc-202">These new shader stages are programmed with HLSL code that is defined in shader model 5.</span></span> <span data-ttu-id="602bc-203">Le nuove destinazioni shader sono: HS \_ 5 \_ 0 e DS \_ 5 \_ 0.</span><span class="sxs-lookup"><span data-stu-id="602bc-203">The new shader targets are: hs\_5\_0 and ds\_5\_0.</span></span> <span data-ttu-id="602bc-204">Analogamente a tutte le fasi di shader programmabili, il codice per l'hardware viene estratto dagli shader compilati passati al runtime quando gli shader sono associati alla pipeline usando le API, ad esempio [**DSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshader) e [**HSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshader).</span><span class="sxs-lookup"><span data-stu-id="602bc-204">Like all programmable shader stages, code for the hardware is extracted from compiled shaders passed into the runtime when shaders are bound to the pipeline using APIs such as [**DSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshader) and [**HSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshader).</span></span> <span data-ttu-id="602bc-205">Prima di tutto, è necessario creare lo shader usando le API, ad esempio [**CreateHullShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createhullshader) e [**CreateDomainShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createdomainshader).</span><span class="sxs-lookup"><span data-stu-id="602bc-205">But first, the shader must be created using APIs such as [**CreateHullShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createhullshader) and [**CreateDomainShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createdomainshader).</span></span>

<span data-ttu-id="602bc-206">Abilitare la suddivisione a mosaico creando uno Hull shader e associarlo alla fase Hull-shader (la fase mosaico viene impostata automaticamente).</span><span class="sxs-lookup"><span data-stu-id="602bc-206">Enable tessellation by creating a hull shader and binding it to the hull-shader stage (this automatically sets up the tessellator stage).</span></span> <span data-ttu-id="602bc-207">Per generare le posizioni dei vertici finali dalle patch tassellati, è necessario creare anche un Domain shader e associarlo alla fase Domain-shader.</span><span class="sxs-lookup"><span data-stu-id="602bc-207">To generate the final vertex positions from the tessellated patches, you will also need to create a domain shader and bind it to the domain-shader stage.</span></span> <span data-ttu-id="602bc-208">Una volta abilitata la suddivisione a mosaico, l'input dei dati per la fase input-assembler deve contenere dati della patch.</span><span class="sxs-lookup"><span data-stu-id="602bc-208">Once tessellation is enabled, the data input to the input-assembler stage must be patch data.</span></span> <span data-ttu-id="602bc-209">Ovvero, la topologia dell'assembler di input deve essere una topologia costante patch da [**d3d11 \_ \_ topologia primitiva**](/previous-versions/windows/desktop/legacy/ff476189(v=vs.85)) impostata con [**IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology).</span><span class="sxs-lookup"><span data-stu-id="602bc-209">That is, the input assembler topology must be a patch constant topology from [**D3D11\_PRIMITIVE\_TOPOLOGY**](/previous-versions/windows/desktop/legacy/ff476189(v=vs.85)) set with [**IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology).</span></span>

<span data-ttu-id="602bc-210">Per disabilitare la suddivisione a mosaico, impostare Hull shader e Domain shader su **null**.</span><span class="sxs-lookup"><span data-stu-id="602bc-210">To disable tessellation, set the hull shader and the domain shader to **NULL**.</span></span> <span data-ttu-id="602bc-211">Né la fase geometry-shader né la fase output flusso possono leggere i dati della patch o i punti di controllo dell'output dello shader.</span><span class="sxs-lookup"><span data-stu-id="602bc-211">Neither the geometry-shader stage nor the stream-output stage can read hull-shader output-control points or patch data.</span></span>

-   <span data-ttu-id="602bc-212">Nuove topologie per la fase input-assembler, che sono estensioni di questa enumerazione.</span><span class="sxs-lookup"><span data-stu-id="602bc-212">New topologies for the input-assembler stage, which are extensions to this enumeration.</span></span>

    ```
    enum D3D11_PRIMITIVE_TOPOLOGY
    ```

    

    <span data-ttu-id="602bc-213">La topologia è impostata sulla fase input-assembler usando [ **IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology)</span><span class="sxs-lookup"><span data-stu-id="602bc-213">The topology is set to the input-assembler stage using [**IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology)</span></span>

-   <span data-ttu-id="602bc-214">Naturalmente, la nuova fase programmabile dello shader richiede l'impostazione di un altro stato, per associare buffer costanti, esempi e risorse dello shader alle fasi della pipeline appropriate.</span><span class="sxs-lookup"><span data-stu-id="602bc-214">Of course, the new programmable shader stages require other state to be set, to bind constant buffers, samples, and shader resources to the appropriate pipeline stages.</span></span> <span data-ttu-id="602bc-215">Questi nuovi metodi ID3D11Device sono implementati per l'impostazione di questo stato.</span><span class="sxs-lookup"><span data-stu-id="602bc-215">These new ID3D11Device methods are implemented for setting this state.</span></span>
    -   [<span data-ttu-id="602bc-216">**DSGetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="602bc-216">**DSGetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetconstantbuffers)
    -   [<span data-ttu-id="602bc-217">**DSGetSamplers**</span><span class="sxs-lookup"><span data-stu-id="602bc-217">**DSGetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetsamplers)
    -   [<span data-ttu-id="602bc-218">**DSGetShader**</span><span class="sxs-lookup"><span data-stu-id="602bc-218">**DSGetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetshader)
    -   [<span data-ttu-id="602bc-219">**DSGetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="602bc-219">**DSGetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetshaderresources)
    -   [<span data-ttu-id="602bc-220">**DSSetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="602bc-220">**DSSetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetconstantbuffers)
    -   [<span data-ttu-id="602bc-221">**DSSetSamplers**</span><span class="sxs-lookup"><span data-stu-id="602bc-221">**DSSetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetsamplers)
    -   [<span data-ttu-id="602bc-222">**DSSetShader**</span><span class="sxs-lookup"><span data-stu-id="602bc-222">**DSSetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshader)
    -   [<span data-ttu-id="602bc-223">**DSSetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="602bc-223">**DSSetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshaderresources)
    -   [<span data-ttu-id="602bc-224">**HSGetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="602bc-224">**HSGetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetconstantbuffers)
    -   [<span data-ttu-id="602bc-225">**HSGetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="602bc-225">**HSGetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetshaderresources)
    -   [<span data-ttu-id="602bc-226">**HSGetSamplers**</span><span class="sxs-lookup"><span data-stu-id="602bc-226">**HSGetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetsamplers)
    -   [<span data-ttu-id="602bc-227">**HSGetShader**</span><span class="sxs-lookup"><span data-stu-id="602bc-227">**HSGetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetshader)
    -   [<span data-ttu-id="602bc-228">**HSSetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="602bc-228">**HSSetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetconstantbuffers)
    -   [<span data-ttu-id="602bc-229">**HSSetSamplers**</span><span class="sxs-lookup"><span data-stu-id="602bc-229">**HSSetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetsamplers)
    -   [<span data-ttu-id="602bc-230">**HSSetShader**</span><span class="sxs-lookup"><span data-stu-id="602bc-230">**HSSetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshader)
    -   [<span data-ttu-id="602bc-231">**HSSetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="602bc-231">**HSSetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshaderresources)

## <a name="how-tos"></a><span data-ttu-id="602bc-232">Procedura:</span><span class="sxs-lookup"><span data-stu-id="602bc-232">How to's:</span></span>

<span data-ttu-id="602bc-233">La documentazione contiene anche esempi per inizializzare le fasi a mosaico.</span><span class="sxs-lookup"><span data-stu-id="602bc-233">The documentation also contains examples for initializing the tessellation stages.</span></span>



| <span data-ttu-id="602bc-234">Elemento</span><span class="sxs-lookup"><span data-stu-id="602bc-234">Item</span></span>                                                                                                                                                                                                                                                                                           | <span data-ttu-id="602bc-235">Descrizione</span><span class="sxs-lookup"><span data-stu-id="602bc-235">Description</span></span>                                   |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
| <span data-ttu-id="602bc-236"><span id="How_To__Create_a_Hull_Shader"></span><span id="how_to__create_a_hull_shader"></span><span id="HOW_TO__CREATE_A_HULL_SHADER"></span>[Procedura: creare un Hull shader](direct3d-11-advanced-stages-hull-shader-create.md)</span><span class="sxs-lookup"><span data-stu-id="602bc-236"><span id="How_To__Create_a_Hull_Shader"></span><span id="how_to__create_a_hull_shader"></span><span id="HOW_TO__CREATE_A_HULL_SHADER"></span>[How To: Create a Hull Shader](direct3d-11-advanced-stages-hull-shader-create.md)</span></span><br/>                                                     | <span data-ttu-id="602bc-237">Creare una Hull shader.</span><span class="sxs-lookup"><span data-stu-id="602bc-237">Create a hull shader.</span></span><br/>              |
| <span data-ttu-id="602bc-238"><span id="How_To__Design_a_Hull_Shader"></span><span id="how_to__design_a_hull_shader"></span><span id="HOW_TO__DESIGN_A_HULL_SHADER"></span>[Procedura: progettare un Hull shader](direct3d-11-advanced-stages-hull-shader-design.md)</span><span class="sxs-lookup"><span data-stu-id="602bc-238"><span id="How_To__Design_a_Hull_Shader"></span><span id="how_to__design_a_hull_shader"></span><span id="HOW_TO__DESIGN_A_HULL_SHADER"></span>[How To: Design a Hull Shader](direct3d-11-advanced-stages-hull-shader-design.md)</span></span><br/>                                                     | <span data-ttu-id="602bc-239">Progettare uno scafo dello shader.</span><span class="sxs-lookup"><span data-stu-id="602bc-239">Design a hull shader.</span></span><br/>              |
| <span data-ttu-id="602bc-240"><span id="How_To__Initialize_the_Tessellator_Stage"></span><span id="how_to__initialize_the_tessellator_stage"></span><span id="HOW_TO__INITIALIZE_THE_TESSELLATOR_STAGE"></span>[Procedura: inizializzare la fase mosaico](direct3d-11-advanced-stages-tessellator-initialize.md)</span><span class="sxs-lookup"><span data-stu-id="602bc-240"><span id="How_To__Initialize_the_Tessellator_Stage"></span><span id="how_to__initialize_the_tessellator_stage"></span><span id="HOW_TO__INITIALIZE_THE_TESSELLATOR_STAGE"></span>[How To: Initialize the Tessellator Stage](direct3d-11-advanced-stages-tessellator-initialize.md)</span></span><br/> | <span data-ttu-id="602bc-241">Inizializzare la fase a mosaico.</span><span class="sxs-lookup"><span data-stu-id="602bc-241">Initialize the tessellation stage.</span></span><br/> |
| <span data-ttu-id="602bc-242"><span id="How_To__Create_a_Domain_Shader"></span><span id="how_to__create_a_domain_shader"></span><span id="HOW_TO__CREATE_A_DOMAIN_SHADER"></span>[Procedura: creare uno shader di dominio](direct3d-11-advanced-stages-domain-shader-create.md)</span><span class="sxs-lookup"><span data-stu-id="602bc-242"><span id="How_To__Create_a_Domain_Shader"></span><span id="how_to__create_a_domain_shader"></span><span id="HOW_TO__CREATE_A_DOMAIN_SHADER"></span>[How To: Create a Domain Shader](direct3d-11-advanced-stages-domain-shader-create.md)</span></span><br/>                                           | <span data-ttu-id="602bc-243">Creare un Domain shader.</span><span class="sxs-lookup"><span data-stu-id="602bc-243">Create a domain shader.</span></span><br/>            |
| <span data-ttu-id="602bc-244"><span id="How_To__Design_a_Domain_Shader"></span><span id="how_to__design_a_domain_shader"></span><span id="HOW_TO__DESIGN_A_DOMAIN_SHADER"></span>[Procedura: progettare un Domain shader](direct3d-11-advanced-stages-domain-shader-design.md)</span><span class="sxs-lookup"><span data-stu-id="602bc-244"><span id="How_To__Design_a_Domain_Shader"></span><span id="how_to__design_a_domain_shader"></span><span id="HOW_TO__DESIGN_A_DOMAIN_SHADER"></span>[How To: Design a Domain Shader](direct3d-11-advanced-stages-domain-shader-design.md)</span></span><br/>                                           | <span data-ttu-id="602bc-245">Creare un Domain shader.</span><span class="sxs-lookup"><span data-stu-id="602bc-245">Create a domain shader.</span></span><br/>            |



 

## <a name="related-topics"></a><span data-ttu-id="602bc-246">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="602bc-246">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="602bc-247">Pipeline grafica</span><span class="sxs-lookup"><span data-stu-id="602bc-247">Graphics Pipeline</span></span>](overviews-direct3d-11-graphics-pipeline.md)
</dt> </dl>

 

