---
title: API di risorse affiancate
description: Le API descritte in questa sezione funzionano con le risorse affiancate e il pool di sezioni.
ms.assetid: 02DCF9BA-F9EA-4176-AD6F-AA620CE968BA
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8a0d97f5272f4f96db56e6e89b871951de035105
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "104395427"
---
# <a name="tiled-resource-apis"></a><span data-ttu-id="c1eb1-103">API di risorse affiancate</span><span class="sxs-lookup"><span data-stu-id="c1eb1-103">Tiled Resource APIs</span></span>

<span data-ttu-id="c1eb1-104">Le API descritte in questa sezione funzionano con le risorse affiancate e il pool di sezioni.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-104">The APIs described in this section work with tiled resources and tile pool.</span></span>

-   [<span data-ttu-id="c1eb1-105">Assegnazione di riquadri da un pool di sezioni a una risorsa</span><span class="sxs-lookup"><span data-stu-id="c1eb1-105">Assigning tiles from a tile pool to a resource</span></span>](#assigning-tiles-from-a-tile-pool-to-a-resource)
-   [<span data-ttu-id="c1eb1-106">Esecuzione di query su affiancamento e supporto delle risorse</span><span class="sxs-lookup"><span data-stu-id="c1eb1-106">Querying resource tiling and support</span></span>](#querying-resource-tiling-and-support)
-   [<span data-ttu-id="c1eb1-107">Copia di dati affiancati</span><span class="sxs-lookup"><span data-stu-id="c1eb1-107">Copying tiled data</span></span>](#copying-tiled-data)
-   [<span data-ttu-id="c1eb1-108">Ridimensionamento del pool di sezioni</span><span class="sxs-lookup"><span data-stu-id="c1eb1-108">Resizing tile pool</span></span>](#resizing-tile-pool)
-   [<span data-ttu-id="c1eb1-109">Barriera risorse affiancate</span><span class="sxs-lookup"><span data-stu-id="c1eb1-109">Tiled resource barrier</span></span>](#tiled-resource-barrier)
-   [<span data-ttu-id="c1eb1-110">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="c1eb1-110">Related topics</span></span>](#related-topics)

## <a name="assigning-tiles-from-a-tile-pool-to-a-resource"></a><span data-ttu-id="c1eb1-111">Assegnazione di riquadri da un pool di sezioni a una risorsa</span><span class="sxs-lookup"><span data-stu-id="c1eb1-111">Assigning tiles from a tile pool to a resource</span></span>

<span data-ttu-id="c1eb1-112">Le API [**ID3D11DeviceContext2:: UpdateTileMappings**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-updatetilemappings) e [**ID3D11DeviceContext2:: CopyTileMappings**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytilemappings) modificano ed eseguono query sui mapping dei riquadri.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-112">The [**ID3D11DeviceContext2::UpdateTileMappings**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-updatetilemappings) and [**ID3D11DeviceContext2::CopyTileMappings**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytilemappings) APIs manipulate and query tile mappings.</span></span> <span data-ttu-id="c1eb1-113">Le chiamate di aggiornamento hanno effetto solo sui riquadri identificati nella chiamata e altri vengono lasciati come definito in precedenza.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-113">Update calls only affect the tiles identified in the call, and others are left as defined previously.</span></span>

<span data-ttu-id="c1eb1-114">Qualsiasi riquadro specificato da un pool di sezioni può essere mappato a più posizioni in una risorsa e anche a più risorse.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-114">Any given tile from a tile pool can be mapped to multiple locations in a resource and even multiple resources.</span></span> <span data-ttu-id="c1eb1-115">Questo mapping include i riquadri in una risorsa che hanno un layout scelto dall'implementazione ([mipmap](mipmap-packing.md)) in cui più mipmap sono raggruppati in un unico riquadro.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-115">This mapping includes tiles in a resource that have an implementation-chosen layout ([Mipmap packing](mipmap-packing.md)) where multiple mipmaps are packed together into a single tile.</span></span> <span data-ttu-id="c1eb1-116">L'elemento catch è che se i dati vengono scritti nel riquadro tramite un mapping, ma letti tramite un mapping configurato in modo diverso, i risultati non sono definiti.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-116">The catch is that if data is written to the tile via one mapping, but read via a differently configured mapping, the results are undefined.</span></span> <span data-ttu-id="c1eb1-117">Un uso accurato di questa flessibilità può comunque essere utile per un'applicazione, come la condivisione di un riquadro tra le risorse che non verranno usate simultaneamente, in cui il contenuto del riquadro viene sempre inizializzato tramite lo stesso mapping delle risorse che verrà successivamente letto da.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-117">Careful use of this flexibility can still be useful for an application though, like sharing a tile between resources that will not be used simultaneously, where the contents of the tile are always initialized through the same resource mapping as they will be subsequently read from.</span></span> <span data-ttu-id="c1eb1-118">Analogamente, viene eseguito il mapping di un riquadro per conservare i mipmap di più risorse diverse con le stesse dimensioni di superficie. i dati verranno visualizzati nello stesso modo in entrambi i mapping.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-118">Similarly, a tile mapped to hold the packed mipmaps of multiple different resources with the same surface dimensions will work fine - the data will appear the same in both mappings.</span></span>

<span data-ttu-id="c1eb1-119">È possibile apportare modifiche alle assegnazioni di sezioni per una risorsa in qualsiasi momento in un contesto immediato o posticipato.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-119">Changes to tile assignments for a resource can be made at any time in an immediate or deferred context.</span></span>

## <a name="querying-resource-tiling-and-support"></a><span data-ttu-id="c1eb1-120">Esecuzione di query su affiancamento e supporto delle risorse</span><span class="sxs-lookup"><span data-stu-id="c1eb1-120">Querying resource tiling and support</span></span>

<span data-ttu-id="c1eb1-121">Per eseguire una query sul affiancamento delle risorse, usare [**ID3D11Device2:: GetResourceTiling**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11device2-getresourcetiling).</span><span class="sxs-lookup"><span data-stu-id="c1eb1-121">To query resource tiling, use [**ID3D11Device2::GetResourceTiling**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11device2-getresourcetiling).</span></span>

<span data-ttu-id="c1eb1-122">Per il supporto di altre risorse di affiancamento, usare [**ID3D11Device2:: CheckMultisampleQualityLevels1**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11device2-checkmultisamplequalitylevels1).</span><span class="sxs-lookup"><span data-stu-id="c1eb1-122">For other resource tiling support, use [**ID3D11Device2::CheckMultisampleQualityLevels1**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11device2-checkmultisamplequalitylevels1).</span></span>

## <a name="copying-tiled-data"></a><span data-ttu-id="c1eb1-123">Copia di dati affiancati</span><span class="sxs-lookup"><span data-stu-id="c1eb1-123">Copying tiled data</span></span>

<span data-ttu-id="c1eb1-124">Tutti i metodi in Direct3D per lo spostamento dei dati funzionano con le risorse affiancate come se non fossero affiancati, ad eccezione del fatto che le Scritture in aree non mappate vengono eliminate e le letture da aree non mappate producono 0.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-124">Any methods in Direct3D for moving data around work with tiled resources just as if they are not tiled, except that writes to unmapped areas are dropped and reads from unmapped areas produce 0.</span></span> <span data-ttu-id="c1eb1-125">Se un'operazione di copia comporta la scrittura più volte nella stessa posizione di memoria perché più percorsi nella risorsa di destinazione sono mappati alla stessa memoria del riquadro, le Scritture risultanti nei riquadri con mapping multiplo sono non deterministiche e non ripetibili.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-125">If a copy operation involves writing to the same memory location multiple times because multiple locations in the destination resource are mapped to the same tile memory, the resulting writes to multi-mapped tiles are non-deterministic and non-repeatable.</span></span> <span data-ttu-id="c1eb1-126">In altre circostanze, gli accessi avvengono in qualsiasi ordine in cui l'hardware esegue la copia.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-126">That is, accesses happen in whatever order the hardware happens to execute the copy.</span></span>

<span data-ttu-id="c1eb1-127">Direct3D 11,2 introduce metodi che consentono di copiare:</span><span class="sxs-lookup"><span data-stu-id="c1eb1-127">Direct3D 11.2 introduces methods for these additional ways to copy:</span></span>

-   <span data-ttu-id="c1eb1-128">Copia tra i riquadri in una risorsa affiancata (in granularità del riquadro 64KB) e (a/da) un buffer nella memoria di unità di elaborazione grafica (GPU) (o risorsa di staging)- [ **ID3D11DeviceContext2:: CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles)</span><span class="sxs-lookup"><span data-stu-id="c1eb1-128">Copy between tiles in a tiled resource (at 64KB tile granularity) and (to/from) a buffer in graphics processing unit (GPU) memory (or staging resource) - [**ID3D11DeviceContext2::CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles)</span></span>
-   <span data-ttu-id="c1eb1-129">Copia dalla memoria fornita dall'applicazione ai riquadri in una risorsa affiancata- [ **ID3D11DeviceContext2:: UpdateTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-updatetiles)</span><span class="sxs-lookup"><span data-stu-id="c1eb1-129">Copy from application-provided memory to tiles in a tiled resource - [**ID3D11DeviceContext2::UpdateTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-updatetiles)</span></span>

<span data-ttu-id="c1eb1-130">Questi metodi swizzle/deswizzle in base alle esigenze e consentono a \_ una \_ Copia \_ del riquadro d3d11 senza \_ flag di sovrascrittura quando il chiamante promette che la memoria di destinazione non è presente nel lavoro GPU in corso.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-130">These methods swizzle/deswizzle as needed, and allow a D3D11\_TILE\_COPY\_NO\_OVERWRITE flag when the caller promises the destination memory is not referenced by GPU work that is in flight.</span></span>

<span data-ttu-id="c1eb1-131">I riquadri interessati dalla copia non possono includere riquadri contenenti mipmap compressi o che hanno risultati non definiti.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-131">The tiles involved in the copy can't include tiles that contain packed mipmaps or that have results that are undefined.</span></span> <span data-ttu-id="c1eb1-132">Per trasferire i dati da e verso mipmap che l'hardware comprime in un riquadro, è necessario usare le API di copia/aggiornamento standard (non specifiche del riquadro) o [**sul ID3D11DeviceContext:: GenerateMips**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-generatemips) per l'intera catena MIP.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-132">To transfer data to/from mipmaps that the hardware packs into one tile, you must use the standard (non-tile specific) Copy/Update APIs or [**ID3D11DeviceContext::GenerateMips**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-generatemips) for the whole mip chain.</span></span>

<span data-ttu-id="c1eb1-133">**Nota in [**GenerateMips**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-generatemips):** l'uso di [**sul ID3D11DeviceContext:: GenerateMips**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-generatemips) in una risorsa con riquadri con mapping parziale genera risultati che seguono semplicemente le regole per la lettura e la scrittura di **valori null** applicati a qualsiasi algoritmo che l'hardware e il driver di visualizzazione devono usare per **GenerateMips**.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-133">**Note on [**GenerateMips**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-generatemips):** Using [**ID3D11DeviceContext::GenerateMips**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-generatemips) on a resource with partially mapped tiles will produce results that simply follow the rules for reading and writing **NULL** applied to whatever algorithm the hardware and display driver happen to use to **GenerateMips**.</span></span> <span data-ttu-id="c1eb1-134">Quindi, non è particolarmente utile per un'applicazione preoccuparsi di questa operazione, a meno che in qualche modo le aree con mapping **null** (e il loro effetto su altri MIP durante la fase di generazione) non abbiano alcuna conseguenza sulle parti della superficie a cui l'applicazione si occupa.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-134">So, it is not particularly useful for an application to bother doing this unless somehow the areas with **NULL** mappings (and their effect on other mips during the generation phase) will have no consequence on the parts of the surface the application does care about.</span></span>

<span data-ttu-id="c1eb1-135">La copia dei dati del riquadro da una superficie di staging o dalla memoria dell'applicazione è il modo in cui caricare i riquadri che potrebbero essere stati trasmessi dal disco, ad esempio.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-135">Copying tile data from a staging surface or from application memory would be the way to upload tiles that may have been streamed off disk, for example.</span></span> <span data-ttu-id="c1eb1-136">Una variazione quando lo streaming del disco è il caricamento di un tipo di dati compressi nella memoria GPU, quindi la decodifica della GPU.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-136">A variation when streaming off disk is uploading some sort of compressed data to GPU memory and then decoding on the GPU.</span></span> <span data-ttu-id="c1eb1-137">La destinazione Decode può essere una risorsa buffer nella memoria GPU, da cui [**CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles) copia quindi nella risorsa affiancata effettiva.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-137">The decode target could be a buffer resource in GPU memory, from which [**CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles) then copies to the actual tiled resource.</span></span> <span data-ttu-id="c1eb1-138">Questo passaggio di copia consente alla GPU di swizzle quando il modello swizzle non è noto.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-138">This copy step allows the GPU to swizzle when the swizzle pattern is not known.</span></span> <span data-ttu-id="c1eb1-139">Swizzling non è necessario se la risorsa affiancata è una risorsa di buffer (ad esempio, in contrapposizione a una trama).</span><span class="sxs-lookup"><span data-stu-id="c1eb1-139">Swizzling is not needed if the tiled resource itself is a buffer resource (for example, as opposed to a Texture).</span></span>

<span data-ttu-id="c1eb1-140">Il layout della memoria dei riquadri nel lato della risorsa del buffer non affiancato della copia è semplicemente lineare in memoria all'interno dei riquadri 64KB, che i driver hardware e display swizzle/deswizzle per riquadro in base alle esigenze durante il trasferimento da e verso una risorsa affiancata.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-140">The memory layout of the tiles in the non-tiled buffer resource side of the copy is simply linear in memory within 64KB tiles, which the hardware and display driver would swizzle/deswizzle per tile as appropriate when transferring to/from a tiled resource.</span></span> <span data-ttu-id="c1eb1-141">Per le superfici con aliasing a più campioni (MSAA), i campioni di ogni pixel vengono attraversati nell'ordine di indice di esempio prima di passare al pixel successivo.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-141">For multisample antialiasing (MSAA) surfaces, each pixel's samples are traversed in sample-index order before moving to the next pixel.</span></span> <span data-ttu-id="c1eb1-142">Per i riquadri che sono parzialmente riempiti sul lato destro (per una superficie che ha una larghezza non un multiplo della larghezza del riquadro in pixel), il pitch/stride per spostarsi verso il basso di una riga è la dimensione massima in byte del numero di pixel che si adattano al riquadro se il riquadro era pieno.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-142">For tiles that are partially filled on the right side (for a surface that has a width not a multiple of tile width in pixels), the pitch/stride to move down a row is the full size in bytes of the number pixels that would fit across the tile if the tile was full.</span></span> <span data-ttu-id="c1eb1-143">Quindi, può esserci un divario tra ogni riga di pixel in memoria.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-143">So, there can be a gap between each row of pixels in memory.</span></span> <span data-ttu-id="c1eb1-144">Per semplicità di specifica, mipmap inferiori a un riquadro non vengono compressi nel layout lineare.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-144">For specification simplicity, mipmaps smaller than a tile are not packed together in the linear layout.</span></span> <span data-ttu-id="c1eb1-145">Si tratta di uno spreco di spazio di memoria, ma come indicato in precedenza per la copia in MIPS, i pacchetti hardware non sono consentiti tramite [**CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles) o [**UpdateTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-updatetiles).</span><span class="sxs-lookup"><span data-stu-id="c1eb1-145">This seems to be a waste of memory space, but as mentioned copying to mips that the hardware packs together is not allowed via [**CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles) or [**UpdateTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-updatetiles).</span></span> <span data-ttu-id="c1eb1-146">L'applicazione può usare solo API UpdateSubresource \* () o CopySubresource \* () generiche per copiare i piccoli MIP singolarmente, anche se nel caso di CopySubresource \* () che significa che la memoria lineare deve essere della stessa dimensione della risorsa affiancata-CopySubresource () non è in grado di \* copiare da una risorsa buffer a una Texture2D per l'istanza.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-146">The application can just use generic UpdateSubresource\*() or CopySubresource\*() APIs to copy small mips individually, though in the case of CopySubresource\*() that means the linear memory has to be the same dimension as the tiled resource - CopySubresource\*() can't copy from a buffer resource to a Texture2D for instance.</span></span>

<span data-ttu-id="c1eb1-147">Se è stato definito un swizzle standard hardware, è possibile aggiungere i flag per indicare che i dati nel buffer devono essere interpretati in tale formato (nessun swizzle necessario per il trasferimento), anche se approcci alternativi al caricamento dei dati può essere utile anche in questo caso, ad esempio consentendo alle applicazioni di accedere direttamente alla memoria del pool di riquadri.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-147">If a hardware standard swizzle is defined, flags could be added to indicate that the data in the buffer is to be interpreted in that format (no swizzle necessary on transfer), though alternative approaches to uploading data may also make sense in that case such as allowing applications direct access to tile pool memory.</span></span>

<span data-ttu-id="c1eb1-148">Le operazioni di copia possono essere eseguite in un contesto immediato o posticipato.</span><span class="sxs-lookup"><span data-stu-id="c1eb1-148">Copying operations can be done on an immediate or deferred context.</span></span>

## <a name="resizing-tile-pool"></a><span data-ttu-id="c1eb1-149">Ridimensionamento del pool di sezioni</span><span class="sxs-lookup"><span data-stu-id="c1eb1-149">Resizing tile pool</span></span>

<span data-ttu-id="c1eb1-150">Per ridimensionare un pool di sezioni, utilizzare [**ID3D11DeviceContext2:: ResizeTilePool**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-resizetilepool).</span><span class="sxs-lookup"><span data-stu-id="c1eb1-150">To resize a tile pool, use [**ID3D11DeviceContext2::ResizeTilePool**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-resizetilepool).</span></span>

## <a name="tiled-resource-barrier"></a><span data-ttu-id="c1eb1-151">Barriera risorse affiancate</span><span class="sxs-lookup"><span data-stu-id="c1eb1-151">Tiled resource barrier</span></span>

<span data-ttu-id="c1eb1-152">Per specificare un vincolo di ordinamento per l'accesso ai dati tra più risorse affiancate, usare [**ID3D11DeviceContext2:: TiledResourceBarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier).</span><span class="sxs-lookup"><span data-stu-id="c1eb1-152">To specify a data access ordering constraint between multiple tiled resources, use [**ID3D11DeviceContext2::TiledResourceBarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier).</span></span>

## <a name="related-topics"></a><span data-ttu-id="c1eb1-153">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="c1eb1-153">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c1eb1-154">Risorse affiancate</span><span class="sxs-lookup"><span data-stu-id="c1eb1-154">Tiled resources</span></span>](tiled-resources.md)
</dt> </dl>

 

 




