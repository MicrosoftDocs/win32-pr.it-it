---
title: Mapping inclusi in un pool di riquadri
description: Quando viene creata una risorsa con il \_ flag di \_ varie sezioni della risorsa d3d11 \_ , i riquadri che compongono la risorsa provengono da punti in un pool di sezioni.
ms.assetid: 1DBE23B2-A1E6-4491-9B74-4E92508A68FC
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1537113d6685e39cab94445c8d3f16d406638820
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104993368"
---
# <a name="mappings-are-into-a-tile-pool"></a><span data-ttu-id="5f615-103">Mapping inclusi in un pool di riquadri</span><span class="sxs-lookup"><span data-stu-id="5f615-103">Mappings are into a tile pool</span></span>

<span data-ttu-id="5f615-104">Quando viene creata una risorsa con il flag di [**\_ \_ varie \_ sezioni della risorsa d3d11**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_resource_misc_flag) , i riquadri che compongono la risorsa provengono da punti in un pool di sezioni.</span><span class="sxs-lookup"><span data-stu-id="5f615-104">When a resource is created with the [**D3D11\_RESOURCE\_MISC\_TILED**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_resource_misc_flag) flag, the tiles that make up the resource come from pointing at locations in a tile pool.</span></span> <span data-ttu-id="5f615-105">Un pool di sezioni è un pool di memoria (supportato da una o più allocazioni dietro le quinte, non visibili dall'applicazione).</span><span class="sxs-lookup"><span data-stu-id="5f615-105">A tile pool is a pool of memory (backed by one or more allocations behind the scenes - unseen by the application).</span></span> <span data-ttu-id="5f615-106">Il sistema operativo e il driver di visualizzazione gestiscono questo pool di memoria e il footprint di memoria è facilmente comprensibile da un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5f615-106">The operating system and display driver manage this pool of memory, and the memory footprint is easily understood by an application.</span></span> <span data-ttu-id="5f615-107">Le risorse affiancate mappano le aree 64KB puntando a posizioni in un pool di sezioni.</span><span class="sxs-lookup"><span data-stu-id="5f615-107">Tiled resources map 64KB regions by pointing to locations in a tile pool.</span></span> <span data-ttu-id="5f615-108">Un Fallout di questa configurazione consente a più risorse di condividere e riutilizzare gli stessi riquadri e anche di riutilizzare gli stessi riquadri in posizioni diverse all'interno di una risorsa, se lo si desidera.</span><span class="sxs-lookup"><span data-stu-id="5f615-108">One fallout of this setup is it allows multiple resources to share and reuse the same tiles, and also for the same tiles to be reused at different locations within a resource if desired.</span></span>

<span data-ttu-id="5f615-109">Il costo per la flessibilità di popolamento dei riquadri per una risorsa da un pool di riquadri è che la risorsa deve eseguire le operazioni di definizione e gestione del mapping dei riquadri nel pool di sezioni che rappresentano i riquadri necessari per la risorsa.</span><span class="sxs-lookup"><span data-stu-id="5f615-109">The cost for the flexibility of populating the tiles for a resource out of a tile pool is that the resource has to do the work of defining and maintaining the mapping of which tiles in the tile pool represent the tiles needed for the resource.</span></span> <span data-ttu-id="5f615-110">È possibile modificare i mapping dei riquadri.</span><span class="sxs-lookup"><span data-stu-id="5f615-110">Tile mappings can be changed.</span></span> <span data-ttu-id="5f615-111">Inoltre, non è necessario eseguire il mapping di tutti i riquadri in una risorsa alla volta. una risorsa può avere mapping **null** .</span><span class="sxs-lookup"><span data-stu-id="5f615-111">Also, not all tiles in a resource need to be mapped at a time; a resource can have **NULL** mappings.</span></span> <span data-ttu-id="5f615-112">Un mapping **null** definisce un riquadro che non è disponibile dal punto di vista della risorsa che vi accede.</span><span class="sxs-lookup"><span data-stu-id="5f615-112">A **NULL** mapping defines a tile as not being available from the point of view of the resource accessing it.</span></span>

<span data-ttu-id="5f615-113">È possibile creare più pool di riquadri ed è possibile eseguire il mapping di un numero qualsiasi di risorse affiancate in qualsiasi pool di riquadri specificato nello stesso momento.</span><span class="sxs-lookup"><span data-stu-id="5f615-113">Multiple tile pools can be created, and any number of tiled resources can map into any given tile pool at the same time.</span></span> <span data-ttu-id="5f615-114">È anche possibile ampliare o compattare i pool di sezioni.</span><span class="sxs-lookup"><span data-stu-id="5f615-114">Tile pools can also be grown or shrunk.</span></span> <span data-ttu-id="5f615-115">Per altre informazioni, vedere [ridimensionamento del pool di riquadri](tile-pool-resizing.md).</span><span class="sxs-lookup"><span data-stu-id="5f615-115">For more info, see [Tile pool resizing](tile-pool-resizing.md).</span></span> <span data-ttu-id="5f615-116">Un vincolo esistente per semplificare la visualizzazione del driver e dell'implementazione del runtime è che una determinata risorsa affiancata può avere solo mapping al massimo in un pool di sezioni alla volta, anziché eseguire il mapping simultaneo a più pool di sezioni.</span><span class="sxs-lookup"><span data-stu-id="5f615-116">One constraint that exists to simplify display driver and runtime implementation is that a given tiled resource can only have mappings into at most one tile pool at a time (as opposed to having simultaneous mapping to multiple tile pools).</span></span>

<span data-ttu-id="5f615-117">La quantità di spazio di archiviazione associata a una risorsa affiancata, ovvero la memoria del pool di riquadri indipendente, è approssimativamente proporzionale al numero di riquadri effettivamente mappati al pool in un determinato momento.</span><span class="sxs-lookup"><span data-stu-id="5f615-117">The amount of storage that is associated with a tiled resource itself (that is, independent tile-pool memory) is roughly proportional to the number of tiles actually mapped to the pool at any given time.</span></span> <span data-ttu-id="5f615-118">In hardware, questo fatto si riduce a ridimensionare il footprint di memoria per l'archiviazione delle tabelle di pagine approssimativamente con la quantità di riquadri mappata (ad esempio, usando uno schema di tabella a più livelli come appropriato).</span><span class="sxs-lookup"><span data-stu-id="5f615-118">In hardware, this fact boils down to scaling the memory footprint for page table storage roughly with the amount of tiles that are mapped (for example, using a multilevel page table scheme as appropriate).</span></span>

<span data-ttu-id="5f615-119">Il pool di riquadri può essere considerato come un'astrazione interamente software che consente alle applicazioni Direct3D di essere in grado di programmare in modo efficace le tabelle di pagine sull'unità di elaborazione grafica (GPU) senza dover individuare i dettagli di implementazione di basso livello (o gestire direttamente gli indirizzi del puntatore).</span><span class="sxs-lookup"><span data-stu-id="5f615-119">The tile pool can be thought of as an entirely software abstraction that enables Direct3D applications to effectively be able to program the page tables on the graphics processing unit (GPU) without having to know the low level implementation details (or deal with pointer addresses directly).</span></span> <span data-ttu-id="5f615-120">I pool di sezioni non applicano ulteriori livelli di riferimento indiretto nell'hardware.</span><span class="sxs-lookup"><span data-stu-id="5f615-120">Tile pools don't apply any additional levels of indirection in hardware.</span></span> <span data-ttu-id="5f615-121">Le ottimizzazioni di una tabella di pagina a un singolo livello usando costrutti come le directory delle pagine sono indipendenti dal concetto di pool di sezioni.</span><span class="sxs-lookup"><span data-stu-id="5f615-121">Optimizations of a single level page table using constructs like page directories are independent of the tile pool concept.</span></span>

<span data-ttu-id="5f615-122">Si esaminerà quindi lo spazio di archiviazione che la tabella di pagina potrebbe richiedere nel peggiore dei casi (sebbene nelle implementazioni sia necessaria solo l'archiviazione approssimativamente proporzionale al mapping).</span><span class="sxs-lookup"><span data-stu-id="5f615-122">Let us explore what storage the page table itself could require in the worst case (though in practice implementations only require storage roughly proportional to what is mapped).</span></span>

<span data-ttu-id="5f615-123">Si supponga che ogni voce della tabella di pagina sia di 64 bit.</span><span class="sxs-lookup"><span data-stu-id="5f615-123">Suppose each page table entry is 64 bits.</span></span>

<span data-ttu-id="5f615-124">Per le dimensioni della tabella delle pagine peggiori raggiunte per una singola area, dati i limiti delle risorse in Direct3D 11, si supponga che una risorsa affiancata venga creata con un formato di 128 bit per elemento (ad esempio, un RGBA float), quindi un riquadro 64KB contiene solo 4096 pixel.</span><span class="sxs-lookup"><span data-stu-id="5f615-124">For the worst-case page table size hit for a single surface, given the resource limits in Direct3D 11, suppose a tiled resource is created with a 128 bit-per-element format (for example, a RGBA float), so a 64KB tile contains only 4096 pixels.</span></span> <span data-ttu-id="5f615-125">La dimensione massima supportata di [**Texture2DArray**](/windows/desktop/direct3dhlsl/sm5-object-texture2darray) di 16384 \* 16384 \* 2048 (ma con un solo mipmap) richiederà circa 1 GB di spazio di archiviazione nella tabella della pagina se completamente popolato (senza includere mipmap) con le voci della tabella di bit 64.</span><span class="sxs-lookup"><span data-stu-id="5f615-125">The maximum supported [**Texture2DArray**](/windows/desktop/direct3dhlsl/sm5-object-texture2darray) size of 16384\*16384\*2048 (but with only a single mipmap) would require about 1GB of storage in the page table if fully populated (not including mipmaps) using 64 bit table entries.</span></span> <span data-ttu-id="5f615-126">L'aggiunta di mipmap comporterebbe la crescita dell'archiviazione delle tabelle della pagina completamente mappata (worst case) di circa un terzo a circa 1,3 GB.</span><span class="sxs-lookup"><span data-stu-id="5f615-126">Adding mipmaps would grow the fully-mapped (worst case) page table storage by about a third, to about 1.3GB.</span></span>

<span data-ttu-id="5f615-127">Questo caso darebbe accesso a circa 10,6 terabyte di memoria indirizzabile.</span><span class="sxs-lookup"><span data-stu-id="5f615-127">This case would give access to about 10.6 terabytes of addressable memory.</span></span> <span data-ttu-id="5f615-128">Potrebbe tuttavia essere presente un limite alla quantità di memoria indirizzabile, che ridurrebbe tali importi, probabilmente intorno all'intervallo di terabyte.</span><span class="sxs-lookup"><span data-stu-id="5f615-128">There might be a limit on the amount of addressable memory however, which would reduce these amounts, perhaps to around the terabyte range.</span></span>

<span data-ttu-id="5f615-129">Un altro caso da considerare è costituito da una singola risorsa [**Texture2D**](/windows/desktop/direct3dhlsl/sm5-object-texture2d) affiancata di 16384 \* 16384 con un formato bit per elemento 32, incluso mipmap.</span><span class="sxs-lookup"><span data-stu-id="5f615-129">Another case to consider is a single [**Texture2D**](/windows/desktop/direct3dhlsl/sm5-object-texture2d) tiled resource of 16384\*16384 with a 32 bit-per-element format, including mipmaps.</span></span> <span data-ttu-id="5f615-130">Lo spazio necessario in una tabella di pagine completamente popolata è approssimativamente 170KB con le voci della tabella di bit 64.</span><span class="sxs-lookup"><span data-stu-id="5f615-130">The space needed in a fully populated page table would be roughly 170KB with 64 bit table entries.</span></span>

<span data-ttu-id="5f615-131">Infine, si consideri un esempio di utilizzo di un formato BC, ad esempio BC7 con 128 bit per riquadro di 4x4 pixel.</span><span class="sxs-lookup"><span data-stu-id="5f615-131">Finally, consider an example using a BC format, say BC7 with 128 bits per tile of 4x4 pixels.</span></span> <span data-ttu-id="5f615-132">Ovvero un byte per pixel.</span><span class="sxs-lookup"><span data-stu-id="5f615-132">That is one byte per pixel.</span></span> <span data-ttu-id="5f615-133">Un [**Texture2DArray**](/windows/desktop/direct3dhlsl/sm5-object-texture2darray) di 16384 \* 16384 \* 2048, incluso MIPMAP, richiede approssimativamente 85MB per popolare completamente questa memoria in una tabella di pagine.</span><span class="sxs-lookup"><span data-stu-id="5f615-133">A [**Texture2DArray**](/windows/desktop/direct3dhlsl/sm5-object-texture2darray) of 16384\*16384\*2048 including mipmaps would require roughly 85MB to fully populate this memory in a page table.</span></span> <span data-ttu-id="5f615-134">Questo non è un problema, in quanto consente a una risorsa affiancata di estendersi 550 gigapixels (512 GB di memoria in questo caso).</span><span class="sxs-lookup"><span data-stu-id="5f615-134">That is not bad considering this allows one tiled resource to span 550 gigapixels (512 GB of memory in this case).</span></span>

<span data-ttu-id="5f615-135">In pratica, non è possibile definire alcun luogo vicino a questi mapping completi, dato che la quantità di memoria fisica disponibile non consente di eseguire il mapping e il riferimento alla volta in un punto qualsiasi.</span><span class="sxs-lookup"><span data-stu-id="5f615-135">In practice, nowhere near these full mappings would be defined given that the amount of physical memory available wouldn't allow anywhere near that much to be mapped and referenced at a time.</span></span> <span data-ttu-id="5f615-136">Tuttavia, con un pool di sezioni, le applicazioni possono scegliere di riutilizzare i riquadri, come un semplice esempio, riutilizzare un riquadro colorato "nero" per aree nere di grandi dimensioni in un'immagine, in modo efficace utilizzando il pool di sezioni (ovvero i mapping delle tabelle di pagine) come strumento per la compressione della memoria.</span><span class="sxs-lookup"><span data-stu-id="5f615-136">But with a tile pool, applications could choose to reuse tiles (as a simple example, reusing a "black" colored tile for large black regions in an image) - effectively using the tile pool (that is, page table mappings) as a tool for memory compression.</span></span>

<span data-ttu-id="5f615-137">Il contenuto iniziale della tabella della pagina è **null** per tutte le voci.</span><span class="sxs-lookup"><span data-stu-id="5f615-137">The initial contents of the page table are **NULL** for all entries.</span></span> <span data-ttu-id="5f615-138">Inoltre, le applicazioni non possono passare i dati iniziali per il contenuto della memoria della superficie, dal momento che inizia senza alcun supporto di memoria.</span><span class="sxs-lookup"><span data-stu-id="5f615-138">Applications also can't pass initial data for the memory contents of the surface since it starts off with no memory backing.</span></span>

## <a name="in-this-section"></a><span data-ttu-id="5f615-139">Contenuto della sezione</span><span class="sxs-lookup"><span data-stu-id="5f615-139">In this section</span></span>



| <span data-ttu-id="5f615-140">Argomento</span><span class="sxs-lookup"><span data-stu-id="5f615-140">Topic</span></span>                                                                                                   | <span data-ttu-id="5f615-141">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5f615-141">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                |
|---------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="5f615-142">Creazione di pool di riquadri</span><span class="sxs-lookup"><span data-stu-id="5f615-142">Tile pool creation</span></span>](tile-pool-creation.md)<br/>                                                 | <span data-ttu-id="5f615-143">Un pool di sezioni viene creato tramite l'API [**ID3D11Device:: CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer) passando il flag del [**\_ \_ \_ \_ pool di sezioni varie della risorsa d3d11**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_resource_misc_flag) nel membro **MiscFlags** della struttura della [**\_ \_ Descrizione del buffer D3D11**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_buffer_desc) a cui punta il parametro *pDesc* .</span><span class="sxs-lookup"><span data-stu-id="5f615-143">A tile pool is created via the [**ID3D11Device::CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer) API by passing the [**D3D11\_RESOURCE\_MISC\_TILE\_POOL**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_resource_misc_flag) flag in the **MiscFlags** member of the [**D3D11\_BUFFER\_DESC**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_buffer_desc) structure that the *pDesc* parameter points to.</span></span> <br/> |
| [<span data-ttu-id="5f615-144">Ridimensionamento di pool di riquadri</span><span class="sxs-lookup"><span data-stu-id="5f615-144">Tile pool resizing</span></span>](tile-pool-resizing.md)<br/>                                                 | <span data-ttu-id="5f615-145">Usare l'API [**ID3D11DeviceContext2:: ResizeTilePool**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-resizetilepool) per espandere un pool di sezioni se l'applicazione necessita di più working set per il mapping delle risorse affiancate o per la compattazione se è necessario meno spazio.</span><span class="sxs-lookup"><span data-stu-id="5f615-145">Use the [**ID3D11DeviceContext2::ResizeTilePool**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-resizetilepool) API to grow a tile pool if the application needs more working set for the tiled resources mapping into it or to shrink if less space is needed.</span></span> <br/>                                                                                                                    |
| [<span data-ttu-id="5f615-146">Verifica dei rischi e risorse pool di riquadri</span><span class="sxs-lookup"><span data-stu-id="5f615-146">Hazard tracking versus tile pool resources</span></span>](hazard-tracking-versus-tile-pool-resources.md)<br/> | <span data-ttu-id="5f615-147">Per le risorse non affiancate, Direct3D può impedire determinate condizioni di rischio durante il rendering, ma poiché il rilevamento dei rischi è a livello di riquadro per le risorse affiancate, il rilevamento delle condizioni di rischio durante il rendering delle risorse affiancate potrebbe essere troppo costoso.</span><span class="sxs-lookup"><span data-stu-id="5f615-147">For non-tiled resources, Direct3D can prevent certain hazard conditions during rendering, but because hazard tracking would be at a tile level for tiled resources, tracking hazard conditions during rendering of tiled resources might be too expensive.</span></span> <br/>                                                                                                     |



 

## <a name="related-topics"></a><span data-ttu-id="5f615-148">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="5f615-148">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="5f615-149">Creazione di risorse affiancate</span><span class="sxs-lookup"><span data-stu-id="5f615-149">Creating tiled resources</span></span>](creating-tiled-resources.md)
</dt> </dl>

 

