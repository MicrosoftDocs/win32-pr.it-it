---
title: Introduzione al multithreading in Direct3D 11
description: Il multithreading è progettato per migliorare le prestazioni eseguendo il lavoro utilizzando uno o più thread contemporaneamente.
ms.assetid: b4bef1e4-8d34-455c-8aed-01af974c66c8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 527b78d8b29a507247c8eb067c20739004ace687
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104337559"
---
# <a name="introduction-to-multithreading-in-direct3d-11"></a><span data-ttu-id="16d0a-103">Introduzione al multithreading in Direct3D 11</span><span class="sxs-lookup"><span data-stu-id="16d0a-103">Introduction to Multithreading in Direct3D 11</span></span>

<span data-ttu-id="16d0a-104">Il multithreading è progettato per migliorare le prestazioni eseguendo il lavoro utilizzando uno o più thread contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="16d0a-104">Multithreading is designed to improve performance by performing work using one or more threads at the same time.</span></span>

<span data-ttu-id="16d0a-105">In passato, questa operazione è stata spesso eseguita generando un singolo thread principale per il rendering e uno o più thread per eseguire operazioni di preparazione, ad esempio la creazione, il caricamento, l'elaborazione e così via degli oggetti.</span><span class="sxs-lookup"><span data-stu-id="16d0a-105">In the past, this has often been done by generating a single main thread for rendering and one or more threads for doing preparation work such as object creation, loading, processing, and so on.</span></span> <span data-ttu-id="16d0a-106">Con la sincronizzazione incorporata in Direct3D 11, tuttavia, l'obiettivo del multithreading consiste nell'utilizzare ogni ciclo della CPU e della GPU senza che un processore attenda un altro processore (in particolare, non facendo attendere la GPU perché influisca direttamente sulla frequenza dei fotogrammi).</span><span class="sxs-lookup"><span data-stu-id="16d0a-106">However, with the built in synchronization in Direct3D 11, the goal behind multithreading is to utilize every CPU and GPU cycle without making a processor wait for another processor (particularly not making the GPU wait because it directly impacts frame rate).</span></span> <span data-ttu-id="16d0a-107">In questo modo, è possibile generare la maggior parte del lavoro mantenendo la frequenza dei fotogrammi migliore.</span><span class="sxs-lookup"><span data-stu-id="16d0a-107">By doing so, you can generate the most amount of work while maintaining the best frame rate.</span></span> <span data-ttu-id="16d0a-108">Il concetto di un singolo frame per il rendering non è più necessario perché l'API implementa la sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="16d0a-108">The concept of a single frame for rendering is no longer as necessary since the API implements synchronization.</span></span>

<span data-ttu-id="16d0a-109">Il multithreading richiede una qualche forma di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="16d0a-109">Multithreading requires some form of synchronization.</span></span> <span data-ttu-id="16d0a-110">Se, ad esempio, più thread eseguiti in un'applicazione devono accedere a un contesto di dispositivo singolo ([**sul ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)), l'applicazione deve utilizzare un meccanismo di sincronizzazione, ad esempio sezioni critiche, per sincronizzare l'accesso a tale contesto di dispositivo.</span><span class="sxs-lookup"><span data-stu-id="16d0a-110">For example, if multiple threads that run in an application must access a single device context ([**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)), that application must use some synchronization mechanism, such as critical sections, to synchronize access to that device context.</span></span> <span data-ttu-id="16d0a-111">Ciò è dovuto al fatto che l'elaborazione dei comandi di rendering (in genere eseguita sulla GPU) e la generazione dei comandi di rendering (in genere eseguiti sulla CPU tramite la creazione di oggetti, il caricamento dei dati, la modifica dello stato e l'elaborazione dei dati) spesso utilizzano le stesse risorse (trame, shader, stato della pipeline e così via).</span><span class="sxs-lookup"><span data-stu-id="16d0a-111">This is because processing of the render commands (generally done on the GPU) and generating the render commands (generally done on the CPU through object creation, data loading, state changing, data processing) often use the same resources (textures, shaders, pipeline state, and so on).</span></span> <span data-ttu-id="16d0a-112">Per organizzare il lavoro tra più thread, è necessario eseguire la sincronizzazione per impedire che un thread modifichi o legga i dati modificati da un altro thread.</span><span class="sxs-lookup"><span data-stu-id="16d0a-112">Organizing the work across multiple threads requires synchronization to prevent one thread from modifying or reading data that is being modified by another thread.</span></span>

<span data-ttu-id="16d0a-113">Mentre l'uso di un contesto di dispositivo ([**sul ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)) non è thread-safe, l'uso di un dispositivo Direct3D 11 ([**ID3D11Device**](/windows/desktop/api/D3D11/nn-d3d11-id3d11device)) è thread-safe.</span><span class="sxs-lookup"><span data-stu-id="16d0a-113">While the use of a device context ([**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)) is not thread-safe, the use of a Direct3D 11 device ([**ID3D11Device**](/windows/desktop/api/D3D11/nn-d3d11-id3d11device)) is thread-safe.</span></span> <span data-ttu-id="16d0a-114">Poiché ogni **sul ID3D11DeviceContext** è a thread singolo, solo un thread può chiamare un **sul ID3D11DeviceContext** alla volta.</span><span class="sxs-lookup"><span data-stu-id="16d0a-114">Because each **ID3D11DeviceContext** is single threaded, only one thread can call a **ID3D11DeviceContext** at a time.</span></span> <span data-ttu-id="16d0a-115">Se più thread devono accedere a un singolo **sul ID3D11DeviceContext**, devono usare un meccanismo di sincronizzazione, ad esempio sezioni critiche, per sincronizzare l'accesso a tale **sul ID3D11DeviceContext**.</span><span class="sxs-lookup"><span data-stu-id="16d0a-115">If multiple threads must access a single **ID3D11DeviceContext**, they must use some synchronization mechanism, such as critical sections, to synchronize access to that **ID3D11DeviceContext**.</span></span> <span data-ttu-id="16d0a-116">Tuttavia, non è necessario che più thread usino sezioni critiche o primitive di sincronizzazione per accedere a un singolo **ID3D11Device**.</span><span class="sxs-lookup"><span data-stu-id="16d0a-116">However, multiple threads are not required to use critical sections or synchronization primitives to access a single **ID3D11Device**.</span></span> <span data-ttu-id="16d0a-117">Se quindi un'applicazione usa **ID3D11Device** per creare oggetti risorsa, non è necessario che l'applicazione usi la sincronizzazione per creare più oggetti risorsa nello stesso momento.</span><span class="sxs-lookup"><span data-stu-id="16d0a-117">Therefore, if an application uses **ID3D11Device** to create resource objects, that application is not required to use synchronization to create multiple resource objects at the same time.</span></span>

<span data-ttu-id="16d0a-118">Il supporto per il multithreading divide l'API in due aree funzionali distinte:</span><span class="sxs-lookup"><span data-stu-id="16d0a-118">Multithreading support divides the API into two distinct functional areas:</span></span>

-   [<span data-ttu-id="16d0a-119">Creazione di oggetti con multithreading</span><span class="sxs-lookup"><span data-stu-id="16d0a-119">Object Creation with Multithreading</span></span>](overviews-direct3d-11-render-multi-thread-create.md)
-   [<span data-ttu-id="16d0a-120">Rendering immediato e posticipato</span><span class="sxs-lookup"><span data-stu-id="16d0a-120">Immediate and Deferred Rendering</span></span>](overviews-direct3d-11-render-multi-thread-render.md)

<span data-ttu-id="16d0a-121">Le prestazioni del multithreading dipendono dal supporto del driver.</span><span class="sxs-lookup"><span data-stu-id="16d0a-121">Multithreading performance depends on the driver support.</span></span> <span data-ttu-id="16d0a-122">[Procedura: cercare supporto driver](overviews-direct3d-11-render-multi-thread-support.md) fornisce altre informazioni sull'esecuzione di query sul driver e sul significato dei risultati.</span><span class="sxs-lookup"><span data-stu-id="16d0a-122">[How To: Check for Driver Support](overviews-direct3d-11-render-multi-thread-support.md) provides more information about querying the driver and what the results mean.</span></span>

<span data-ttu-id="16d0a-123">Direct3D 11 è stato progettato da zero per supportare il multithreading.</span><span class="sxs-lookup"><span data-stu-id="16d0a-123">Direct3D 11 has been designed from the ground up to support multithreading.</span></span> <span data-ttu-id="16d0a-124">Direct3D 10 implementa un supporto limitato per il multithreading utilizzando il [livello thread-safe](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-api-features-layers).</span><span class="sxs-lookup"><span data-stu-id="16d0a-124">Direct3D 10 implements limited support for multithreading using the [thread-safe layer](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-api-features-layers).</span></span> <span data-ttu-id="16d0a-125">In questa pagina sono elencate le differenze di comportamento tra le due versioni di DirectX: le [differenze di threading tra le versioni di Direct3D](overviews-direct3d-11-render-multi-thread-differences.md).</span><span class="sxs-lookup"><span data-stu-id="16d0a-125">This page lists the behavior differences between the two versions of DirectX: [Threading Differences between Direct3D Versions](overviews-direct3d-11-render-multi-thread-differences.md).</span></span>

## <a name="multithreading-and-dxgi"></a><span data-ttu-id="16d0a-126">Multithreading e DXGI</span><span class="sxs-lookup"><span data-stu-id="16d0a-126">Multithreading and DXGI</span></span>

<span data-ttu-id="16d0a-127">Un solo thread alla volta deve usare il contesto immediato.</span><span class="sxs-lookup"><span data-stu-id="16d0a-127">Only one thread at a time should use the immediate context.</span></span> <span data-ttu-id="16d0a-128">Tuttavia, l'applicazione deve usare anche lo stesso thread per le operazioni di Microsoft DirectX Graphics Infrastructure (DXGI), soprattutto quando l'applicazione effettua chiamate al metodo [**IDXGISwapChain::P**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-present) reinviate.</span><span class="sxs-lookup"><span data-stu-id="16d0a-128">However, your application should also use that same thread for Microsoft DirectX Graphics Infrastructure (DXGI) operations, especially when the application makes calls to the [**IDXGISwapChain::Present**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-present) method.</span></span>

> [!Note]  
> <span data-ttu-id="16d0a-129">Non è possibile usare contemporaneamente un contesto immediato con la maggior parte delle funzioni dell'interfaccia DXGI.</span><span class="sxs-lookup"><span data-stu-id="16d0a-129">It is invalid to use an immediate context concurrently with most of the DXGI interface functions.</span></span> <span data-ttu-id="16d0a-130">Per gli SDK DirectX 2009 e versioni successive, le uniche funzioni DXGI sicure sono [**AddRef**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-addref), [**Release**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-release)e [**QueryInterface**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-queryinterface(q)).</span><span class="sxs-lookup"><span data-stu-id="16d0a-130">For the March 2009 and later DirectX SDKs, the only DXGI functions that are safe are [**AddRef**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-addref), [**Release**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-release), and [**QueryInterface**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-queryinterface(q)).</span></span>

 

<span data-ttu-id="16d0a-131">Per altre informazioni sull'uso di DXGI con più thread, vedere [considerazioni su multithread](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span><span class="sxs-lookup"><span data-stu-id="16d0a-131">For more info about using DXGI with multiple threads, see [Multithread Considerations](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span></span>

## <a name="related-topics"></a><span data-ttu-id="16d0a-132">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="16d0a-132">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="16d0a-133">Multithreading</span><span class="sxs-lookup"><span data-stu-id="16d0a-133">Multithreading</span></span>](overviews-direct3d-11-render-multi-thread.md)
</dt> </dl>

 

 