---
title: Union (attributo)
description: La parola chiave Union viene visualizzata in funzioni correlate alle unioni discriminate.
ms.assetid: 135a6581-e03e-4b90-9fd8-15690820dbd0
keywords:
- attributo di Unione MIDL
topic_type:
- apiref
api_name:
- union
api_type:
- NA
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: bc683472d67775c4a2900695246d5f9ca920ca32
ms.sourcegitcommit: 57758ecb246c84d65e6e0e4bd5570d9176fa39cd
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/25/2019
ms.locfileid: "104516300"
---
# <a name="union-attribute"></a><span data-ttu-id="9f9e5-104">Union (attributo)</span><span class="sxs-lookup"><span data-stu-id="9f9e5-104">union attribute</span></span>

<span data-ttu-id="9f9e5-105">La parola chiave **Union** viene visualizzata in funzioni correlate alle unioni discriminate.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-105">The **union** keyword appears in functions that relate to discriminated unions.</span></span>

``` syntax
/* Encapsulated union*/
typedef [[ [type-attribute-list] ]] union [[ struct-name ]] switch (switch-type switch-name) [[ union-name ]] 
{
  C-style-case-list 
  [[ [ field-attribute-list <> ] ]] type-specifier <> declarator-list <>;

        ...
}

/* Non-encapsulated union*/
typedef [switch_type(switch-type) [[ , type-attr-list ]] ] union [[ tag ]] 
{ 
    [ case ( limited-expr-list) ]
  [[ [ field-attribute-list ] ]] type-specifier declarator-list;
  [[ [ default ]
  [[ [ field-attribute-list ] ]] type-specifier declarator-list;
  ]]
}
```

## <a name="parameters"></a><span data-ttu-id="9f9e5-106">Parametri</span><span class="sxs-lookup"><span data-stu-id="9f9e5-106">Parameters</span></span>

<dl> <dt>

<span data-ttu-id="9f9e5-107">*tipo-Attribute-List*</span><span class="sxs-lookup"><span data-stu-id="9f9e5-107">*type-attribute-list*</span></span> 
</dt> <dd>

<span data-ttu-id="9f9e5-108">Specifica zero o più attributi applicabili al tipo di Unione.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-108">Specifies zero or more attributes that apply to the union type.</span></span> <span data-ttu-id="9f9e5-109">Gli attributi di tipo validi includono **\[** [**handle**](handle.md) **\]** , **\[** [**trasmette \_ come**](transmit-as.md), **\]** l'attributo Pointer **\[** [**univoco**](unique.md) **\]** o **\[** [**ptr**](ptr.md) **\]** ; e l' **\[** [**\_ handle di contesto**](context-handle.md) degli attributi **\]** di utilizzo e **\[** [**ignorano**](ignore.md) **\]** .</span><span class="sxs-lookup"><span data-stu-id="9f9e5-109">Valid type attributes include **\[**[**handle**](handle.md)**\]**, **\[**[**transmit\_as**](transmit-as.md)**\]**; the pointer attribute **\[**[**unique**](unique.md)**\]**, or **\[**[**ptr**](ptr.md)**\]**; and the usage attributes **\[**[**context\_handle**](context-handle.md)**\]** and **\[**[**ignore**](ignore.md)**\]**.</span></span> <span data-ttu-id="9f9e5-110">Le unioni incapsulate possono anche avere l' **\[** attributo [**ref**](ref.md) **\]** pointer type.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-110">Encapsulated unions can also have the **\[**[**ref**](ref.md)**\]** pointer type attribute.</span></span> <span data-ttu-id="9f9e5-111">Separare più attributi con virgole.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-111">Separate multiple attributes with commas.</span></span>

</dd> <dt>

<span data-ttu-id="9f9e5-112">*struct-nome*</span><span class="sxs-lookup"><span data-stu-id="9f9e5-112">*struct-name*</span></span> 
</dt> <dd>

<span data-ttu-id="9f9e5-113">Specifica un tag facoltativo che denomina la struttura generata dal compilatore MIDL.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-113">Specifies an optional tag that names the structure generated by the MIDL compiler.</span></span>

</dd> <dt>

<span data-ttu-id="9f9e5-114">*switch-type*</span><span class="sxs-lookup"><span data-stu-id="9f9e5-114">*switch-type*</span></span> 
</dt> <dd>

<span data-ttu-id="9f9e5-115">Specifica un tipo [**int**](int.md), [**char**](char-idl.md), [**enum**](enum.md) o un identificatore che viene risolto in uno di questi tipi.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-115">Specifies an [**int**](int.md), [**char**](char-idl.md), [**enum**](enum.md) type, or an identifier that resolves to one of these types.</span></span>

</dd> <dt>

<span data-ttu-id="9f9e5-116">*Switch-name*</span><span class="sxs-lookup"><span data-stu-id="9f9e5-116">*switch-name*</span></span> 
</dt> <dd>

<span data-ttu-id="9f9e5-117">Specifica il nome della variabile di tipo *switch-type* che funge da discriminante di Unione.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-117">Specifies the name of the variable of type *switch-type* that acts as the union discriminant.</span></span>

</dd> <dt>

<span data-ttu-id="9f9e5-118">*nome-Unione*</span><span class="sxs-lookup"><span data-stu-id="9f9e5-118">*union-name*</span></span> 
</dt> <dd>

<span data-ttu-id="9f9e5-119">Specifica un identificatore facoltativo che denomina l'Unione nella struttura, generata dal compilatore MIDL, che contiene l'Unione e l'discriminante.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-119">Specifies an optional identifier that names the union in the structure, generated by the MIDL compiler, that contains the union and the discriminant.</span></span>

</dd> <dt>

<span data-ttu-id="9f9e5-120">*Elenco di casi di tipo C*</span><span class="sxs-lookup"><span data-stu-id="9f9e5-120">*C-style-case-list*</span></span> 
</dt> <dd>

<span data-ttu-id="9f9e5-121">Elenco di "**case** *const-expr* :"</span><span class="sxs-lookup"><span data-stu-id="9f9e5-121">List of "**case** *const-expr* :"</span></span>

</dd> <dt>

<span data-ttu-id="9f9e5-122">*elenco di espressioni limitate*</span><span class="sxs-lookup"><span data-stu-id="9f9e5-122">*limited-expression-list*</span></span> 
</dt> <dd>

<span data-ttu-id="9f9e5-123">Specifica una o più espressioni del linguaggio C.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-123">Specifies one or more C-language expressions.</span></span> <span data-ttu-id="9f9e5-124">Il compilatore MIDL supporta le espressioni condizionali, le espressioni logiche, le espressioni relazionali e le espressioni aritmetiche.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-124">The MIDL compiler supports conditional expressions, logical expressions, relational expressions, and arithmetic expressions.</span></span> <span data-ttu-id="9f9e5-125">MIDL non consente chiamate di funzione nelle espressioni e non consente operatori di incremento e decremento.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-125">MIDL does not allow function invocations in expressions and does not allow increment and decrement operators.</span></span> <span data-ttu-id="9f9e5-126">Le singole espressioni nell'elenco devono essere separate da una virgola.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-126">Individual expressions in the list should be separated by a comma.</span></span>

</dd> <dt>

<span data-ttu-id="9f9e5-127">*Field-Attribute-List*</span><span class="sxs-lookup"><span data-stu-id="9f9e5-127">*field-attribute-list*</span></span> 
</dt> <dd>

<span data-ttu-id="9f9e5-128">Specifica zero o più attributi di campo che si applicano al membro di Unione.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-128">Specifies zero or more field attributes that apply to the union member.</span></span> <span data-ttu-id="9f9e5-129">Gli attributi di campo validi includono **\[** [**First \_ è**](first-is.md) **\]** , **\[** [**Last \_ è**](last-is.md) **\]** , **\[** [**length \_ is**](length-is.md) **\]** , **\[** [**Max \_ is**](max-is.md) **\]** , **\[** [**size \_ is**](size-is.md) **\]** ; The usage Attributes **\[** [**String**](string.md) **\]** , **\[** [**Ignore**](ignore.md) **\]** e **\[** [**Context \_ handle**](context-handle.md), **\]** l'attributo Pointer **\[** [**univoco**](unique.md) **\]** o **\[** [**ptr**](ptr.md) **\]** ; e, per i membri che sono unioni non incapsulate, il **\[** [**\_ tipo di opzione**](switch-type.md)dell'attributo Union **\]** .</span><span class="sxs-lookup"><span data-stu-id="9f9e5-129">Valid field attributes include **\[**[**first\_is**](first-is.md)**\]**, **\[**[**last\_is**](last-is.md)**\]**, **\[**[**length\_is**](length-is.md)**\]**, **\[**[**max\_is**](max-is.md)**\]**, **\[**[**size\_is**](size-is.md)**\]**; the usage attributes **\[**[**string**](string.md)**\]**, **\[**[**ignore**](ignore.md)**\]**, and **\[**[**context\_handle**](context-handle.md)**\]**; the pointer attribute **\[**[**unique**](unique.md)**\]** or **\[**[**ptr**](ptr.md)**\]**; and, for members that are nonencapsulated unions, the union attribute **\[**[**switch\_type**](switch-type.md)**\]**.</span></span> <span data-ttu-id="9f9e5-130">Le unioni non incapsulate possono anche usare l' **\[** [](ref.md) **\]** attributo del campo Ref Pointer.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-130">Nonencapsulated unions can also use the **\[**[**ref**](ref.md)**\]** pointer field attribute.</span></span> <span data-ttu-id="9f9e5-131">Separare più attributi di campo con virgole.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-131">Separate multiple field attributes with commas.</span></span>

</dd> <dt>

<span data-ttu-id="9f9e5-132">*identificatore di tipo*</span><span class="sxs-lookup"><span data-stu-id="9f9e5-132">*type-specifier*</span></span> 
</dt> <dd>

<span data-ttu-id="9f9e5-133">Specifica un [tipo di base](midl-base-types.md), uno [**struct**](struct.md), un' **Unione**, un tipo [**enum**](enum.md) o un identificatore di tipo.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-133">Specifies a [base type](midl-base-types.md), [**struct**](struct.md), **union**, [**enum**](enum.md) type, or type identifier.</span></span> <span data-ttu-id="9f9e5-134">Una specifica di archiviazione facoltativa può precedere *Type-specifier*.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-134">An optional storage specification can precede *type-specifier*.</span></span>

</dd> <dt>

<span data-ttu-id="9f9e5-135">*elenco di dichiaratori*</span><span class="sxs-lookup"><span data-stu-id="9f9e5-135">*declarator-list*</span></span> 
</dt> <dd>

<span data-ttu-id="9f9e5-136">Uno o più dichiaratori C standard, ad esempio identificatori, dichiaratori di puntatore e dichiaratori di matrici.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-136">One or more standard C declarators, such as identifiers, pointer declarators, and array declarators.</span></span> <span data-ttu-id="9f9e5-137">I dichiaratori di funzione e le dichiarazioni di campi di bit non sono consentiti nelle unioni trasmesse in chiamate a procedure remote.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-137">(Function declarators and bit-field declarations are not allowed in unions that are transmitted in remote procedure calls.</span></span> <span data-ttu-id="9f9e5-138">Tranne quando si usa l'opzione del compilatore MIDL [**/OSF**](-osf.md), questi dichiaratori sono consentiti nelle unioni non trasmesse. Separare più dichiaratori con virgole.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-138">Except when you use the MIDL compiler switch [**/osf**](-osf.md), these declarators are allowed in unions that are not transmitted.) Separate multiple declarators with commas.</span></span>

</dd> <dt>

<span data-ttu-id="9f9e5-139">*tag*</span><span class="sxs-lookup"><span data-stu-id="9f9e5-139">*tag*</span></span> 
</dt> <dd>

<span data-ttu-id="9f9e5-140">Specifica un tag facoltativo.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-140">Specifies an optional tag.</span></span>

</dd> </dl>

## <a name="remarks"></a><span data-ttu-id="9f9e5-141">Commenti</span><span class="sxs-lookup"><span data-stu-id="9f9e5-141">Remarks</span></span>

<span data-ttu-id="9f9e5-142">MIDL supporta due tipi di unioni discriminate, ovvero [unioni](encapsulated-unions.md) incapsulate e unioni non [incapsulate](nonencapsulated-unions.md).</span><span class="sxs-lookup"><span data-stu-id="9f9e5-142">MIDL supports two types of discriminated unions: [encapsulated unions](encapsulated-unions.md) and [nonencapsulated unions](nonencapsulated-unions.md).</span></span> <span data-ttu-id="9f9e5-143">L'Unione incapsulata è compatibile con le implementazioni precedenti di RPC (garante della versione 1).</span><span class="sxs-lookup"><span data-stu-id="9f9e5-143">The encapsulated union is compatible with previous implementations of RPC (NCA version 1).</span></span> <span data-ttu-id="9f9e5-144">L'Unione non incapsulata Elimina alcune restrizioni dell'Unione incapsulata e fornisce un discriminante più visibile rispetto all'Unione incapsulata.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-144">The nonencapsulated union eliminates some of the restrictions of the encapsulated union and provides a more visible discriminant than the encapsulated union.</span></span>

<span data-ttu-id="9f9e5-145">L'Unione incapsulata è identificata dalla parola chiave [**Switch**](switch.md) e dall'assenza di altre parole chiave correlate all'Unione.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-145">The encapsulated union is identified by the [**switch**](switch.md) keyword and the absence of other union-related keywords.</span></span>

<span data-ttu-id="9f9e5-146">L'Unione non incapsulata, nota anche come Unione, è identificata dalla presenza dell' **\[** [**opzione \_**](switch-is.md) **\]** e dalle **\[** parole chiave di [**\_ tipo switch**](switch-type.md) **\]** , che identificano discriminante e il relativo tipo.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-146">The nonencapsulated union, also known as a union, is identified by the presence of the **\[**[**switch\_is**](switch-is.md)**\]** and **\[**[**switch\_type**](switch-type.md)**\]** keywords, which identify the discriminant and its type.</span></span>

<span data-ttu-id="9f9e5-147">Quando si utilizza **\[** [**in**](in.md), [](out-idl.md) le **\]** unioni out, tenere presente che la modifica del valore dell'opzione Union durante la chiamata può rendere il comportamento della chiamata remota in modo diverso da una chiamata locale.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-147">When you use **\[**[**in**](in.md), [**out**](out-idl.md)**\]** unions, be aware that changing the value of the union switch during the call can make the remote call behave differently from a local call.</span></span> <span data-ttu-id="9f9e5-148">Al ritorno, gli stub copiano il parametro **\[ in**, **out \]** in memoria che è già presente nel client.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-148">On return, the stubs copy the **\[in**, **out\]** parameter into memory that is already present on the client.</span></span> <span data-ttu-id="9f9e5-149">Quando la procedura remota modifica il valore dell'opzione Union e, di conseguenza, modifica la dimensione dell'oggetto dati, gli stub possono sovrascrivere la memoria valida con il valore **\[ out \]** .</span><span class="sxs-lookup"><span data-stu-id="9f9e5-149">When the remote procedure modifies the value of the union switch and consequently changes the data object's size, the stubs can overwrite valid memory with the **\[out\]** value.</span></span> <span data-ttu-id="9f9e5-150">Quando l'opzione di Unione modifica l'oggetto dati da un tipo di base a un tipo di puntatore, gli stub possono sovrascrivere la memoria valida quando copiano il referente del puntatore nella posizione di memoria indicata dall'oggetto **\[ in \]** valore di un tipo di base.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-150">When the union switch changes the data object from a base type to a pointer type, the stubs can overwrite valid memory when they copy the pointer referent into the memory location indicated by the **\[in\]** value of a base type.</span></span>

<span data-ttu-id="9f9e5-151">La forma delle unioni deve essere identica tra le diverse piattaforme per garantire l'interconnettività.</span><span class="sxs-lookup"><span data-stu-id="9f9e5-151">The shape of unions must be identical across platforms to ensure interconnectivity.</span></span>

## <a name="see-also"></a><span data-ttu-id="9f9e5-152">Vedi anche</span><span class="sxs-lookup"><span data-stu-id="9f9e5-152">See also</span></span>

<dl> <dt>

[<span data-ttu-id="9f9e5-153">Unioni incapsulate</span><span class="sxs-lookup"><span data-stu-id="9f9e5-153">Encapsulated Unions</span></span>](encapsulated-unions.md)
</dt> <dt>

[<span data-ttu-id="9f9e5-154">File di definizione dell'interfaccia (IDL)</span><span class="sxs-lookup"><span data-stu-id="9f9e5-154">Interface Definition (IDL) File</span></span>](interface-definition-idl-file.md)
</dt> <dt>

[<span data-ttu-id="9f9e5-155">**in**</span><span class="sxs-lookup"><span data-stu-id="9f9e5-155">**in**</span></span>](in.md)
</dt> <dt>

[<span data-ttu-id="9f9e5-156">Unioni non incapsulate</span><span class="sxs-lookup"><span data-stu-id="9f9e5-156">Nonencapsulated Unions</span></span>](nonencapsulated-unions.md)
</dt> <dt>

[<span data-ttu-id="9f9e5-157">**out**</span><span class="sxs-lookup"><span data-stu-id="9f9e5-157">**out**</span></span>](out-idl.md)
</dt> <dt>

[<span data-ttu-id="9f9e5-158">**opzione \_**</span><span class="sxs-lookup"><span data-stu-id="9f9e5-158">**switch\_is**</span></span>](switch-is.md)
</dt> <dt>

[<span data-ttu-id="9f9e5-159">**tipo di opzione \_**</span><span class="sxs-lookup"><span data-stu-id="9f9e5-159">**switch\_type**</span></span>](switch-type.md)
</dt> </dl>

 

 




