---
description: Questo argomento descrive i dettagli dell'evento quando si usano le funzionalità del proxy di dati di analisi dell'input penna.
ms.assetid: 837867a4-7cda-41b0-b20d-eec9a3a7fb86
title: Flusso eventi del proxy di dati
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 962348261b1c6a9200a615f03ce15a2bd7bb8830
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106316864"
---
# <a name="data-proxy-event-flow"></a>Flusso eventi del proxy di dati

Questo argomento descrive i dettagli dell'evento quando si usano le funzionalità del proxy di dati di analisi dell'input penna.

## <a name="data-proxy-event-flow-overview"></a>Panoramica del flusso di eventi del proxy di dati

Nell'utilizzo del proxy di dati di [**InkAnalyzer**](inkanalyzer.md)si presuppone che l'applicazione che integra l'oggetto InkAnalyzer disponga già di un modello di documento esistente a cui si desidera applicare il proxy per i risultati dell'analisi. Si presuppone inoltre che l'applicazione contenga i risultati di qualsiasi operazione di analisi precedente che si desidera creare durante l'archiviazione nel modello di documento. Potrebbe inoltre essere presente un contesto non di input penna che può essere aggiunto a **InkAnalyzer** sotto forma di un [**ContextNode**](icontextnode.md) **ImageNode** o **TextWordNode** per poter essere potenzialmente annotato con l'input penna.

La chiave per il sistema proxy di dati è che l'applicazione contrassegna l' [**oggetto ContextNode**](icontextnode.md) come "parzialmente popolato" usando [**PartiallyPopulated**](icontextnode-setpartiallypopulated.md). Quando questo flag è true, l' [**oggetto InkAnalyzer**](inkanalyzer.md) presuppone che siano tre gli elementi relativi a tale **oggetto ContextNode**:

-   La posizione dell' [**oggetto ContextNode**](icontextnode.md) è corretta.
-   Il tipo di [**ContextNode**](icontextnode.md) è corretto.
-   Tutte le altre informazioni sull' [**oggetto ContextNode**](icontextnode.md) sono archiviate altrove.

In base a queste tre regole, se e quando l' [**oggetto InkAnalyzer**](inkanalyzer.md) necessita di informazioni aggiuntive su un [**oggetto ContextNode**](icontextnode.md) , viene generato l'evento [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) e viene fatto riferimento all' **oggetto ContextNode** in questione. Questo consente all'applicazione di impostare tutte le informazioni note sull' **oggetto ContextNode** prima che l' **oggetto InkAnalyzer** lo analizza in modo più dettagliato. Dopo la gestione di un evento **PopulateContextNode** , l' **oggetto ContextNode** in questione deve avere una proprietà Location valida, il numero corretto di sottonodi impostato se si tratta di un **ContextNode** contenitore o se è stato impostato il set di tratti corretti, usando le [**sequenze**](icontextnode-setstrokes.md), se si tratta di un **oggetto ContextNode** foglia di input penna. Se non si imposta correttamente questo percorso, le informazioni sul sottonodo o sul tratto comporteranno un'eccezione **invalidOperation** . I sottonodi per un **oggetto ContextNode** contenitore possono essere impostati come parzialmente popolati, nel qual caso verranno generati più eventi **PopulateContextNode** se l' **oggetto InkAnalyzer** determina che saranno necessari per l'operazione di analisi corrente.

Le tabelle seguenti descrivono il momento in cui l'evento [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) verrà generato durante l'utilizzo dell' [**oggetto InkAnalyzer**](inkanalyzer.md).

Dopo aver calcolato alcuni risultati, l' [**oggetto InkAnalyzer**](inkanalyzer.md) riguarderà l'applicazione per aggiornare i risultati. Il primo evento generato è l'evento [**InkAnalyzerStateChanging**](-ianalysisproxyevents-inkanalyzerstatechanging.md) . Questo evento indica semplicemente all'applicazione che lo stato dell'albero dell'oggetto **InkAnalyzer** sta per essere modificato. In questo modo le applicazioni possono impostare il flag [**PartiallyPopulated**](icontextnode-setpartiallypopulated.md) su true in tutti gli [**ContextNode**](icontextnodes.md) con stato archiviato altrove. L' **oggetto InkAnalyzer** genererà una serie di eventi [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) per determinerà lo stato corrente dei dati. Una volta determiend, un'operazione di riconciliazione viene compelta per determinare quali risultati in background possono comunque essere applicati.

Per applicare risultati a [**InkAnalyzer**](inkanalyzer.md) , viene generata una serie di eventi di modifica dell'albero. Gli eventi di modifica dell'albero descrivono, dettagliatamente, tutte le modifiche necessarie per aggiornare i risultati. Questi eventi sono progettati per essere gestiti in successione senza interruzione o annullamento. Se l'operazione di analisi viene annullata (tramite il metodo [**Abort**](iinkanalyzer-abort.md) ) durante l'elaborazione degli eventi di modifica della struttura ad albero, lo stato dell' **oggetto InkAnalyzer** non sarà valido e potrebbe essere necessario analizzare nuovamente l'intero documento.

Le tabelle seguenti descrivono quando gli eventi di modifica dell'albero vengono generati durante l'utilizzo dell'oggetto InkAnalyzer. Le tabelle fanno riferimento ai timestamp mostrati nel diagramma del flusso di eventi seguente.

![IImage che mostra il flusso tra l'interfaccia utente dell'applicazione e l'analizzatore in background](images/7a0a54af-889e-43ed-8689-7f2d685567bf.jpg)

### <a name="adding-a-stroke"></a>Aggiunta di un tratto



|                          |                                                                         |                                                                                                  |                                                                                                                                                                                                                                                                                                            |
|--------------------------|-------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Timestamp<br/>    | Tipo di evento o scopo<br/>                                        | Evento generato<br/>                                                                          | Commento<br/>                                                                                                                                                                                                                                                                                         |
| T1, T5 e T9<br/> | \[All'interno della chiamata a AddStroke () \] \[ evento di esplorazione dell'albero\]<br/> | Generazione evento [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md)<br/> | È possibile che venga generato un numero di eventi [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) in base al numero di [**ContextNode**](icontextnodes.md) non **classificati** esistenti con un valore [**PartiallyPopulated**](icontextnode-setpartiallypopulated.md) impostato su true.<br/> |
| T1, T5 e T9<br/> | \[Evento di modifica dell'albero\]<br/>                                  | Generazione evento [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md)<br/>   | Verrà generato un solo evento [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md) come risultato della chiamata al metodo [**AddStroke**](iinkanalyzer-addstroke.md) . Tutti i tratti vengono aggiunti allo stesso [**oggetto ContextNode**](icontextnode.md)non classificato.<br/>                      |



 

### <a name="deleting-a-stroke"></a>Eliminazione di un tratto



|                           |                                                                                                                 |                                                                                                  |                                                                                                                                                                                                                                                                                                                      |
|---------------------------|-----------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Timestamp<br/>     | Tipo di evento o scopo<br/>                                                                                | Evento generato<br/>                                                                          | Commento<br/>                                                                                                                                                                                                                                                                                                   |
| T2, T6 e T10<br/> | \[All'interno della chiamata a [**RemoveStroke**](iinkanalyzer-removestroke.md)() \] \[ evento di esplorazione dell'albero\]<br/> | [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) Generazione evento<br/> | È possibile che venga generato un certo numero di eventi [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) , a seconda del numero di [**ContextNode**](icontextnodes.md) correlati ai tratti eliminati, che hanno un valore [**PartiallyPopulated**](icontextnode-setpartiallypopulated.md) true.<br/> |
| T2, T6 e T10<br/> | \[Evento di modifica dell'albero\]<br/>                                                                          | [**L'ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md) Generazione evento<br/> | È possibile che venga generato un numero qualsiasi di eventi [**l'ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md) , a seconda del contenuto dell'input penna eliminato e della struttura di analisi corrente.<br/>                                                                                                       |



 

### <a name="calling-the-backgroundanalyze-method"></a>Chiamata al metodo BackgroundAnalyze



|                       |                                                                                                                           |                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                     |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Timestamp<br/> | Tipo di evento o scopo<br/>                                                                                          | Evento generato<br/>                                                                          | Commento<br/>                                                                                                                                                                                                                                                                                                                                                                                                  |
| T3<br/>         | \[All'interno della chiamata a [**BackgroundAnalyze**](iinkanalyzer-backgroundanalyze.md)() \] \[ evento di esplorazione dell'albero\]<br/> | [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) Generazione evento<br/> | È possibile che venga generato un numero di eventi [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) , a seconda del numero di [**ContextNode**](icontextnodes.md) presenti nell'albero il cui valore [**PartiallyPopulated**](icontextnode-createpartiallypopulatedsubnode.md) è true (un evento per ogni [**oggetto ContextNode**](icontextnode.md) necessario nell'operazione di analisi corrente).<br/> |



 

### <a name="after-the-call-to-backgroundanalyze-returns"></a>Dopo la chiamata a BackgroundAnalyze () restituisce



|                       |                                             |                                  |                                                                                              |
|-----------------------|---------------------------------------------|----------------------------------|----------------------------------------------------------------------------------------------|
| Timestamp<br/> | Tipo di evento o scopo<br/>            | Evento generato<br/>          | Commento<br/>                                                                           |
| Da T3 a T7<br/>   | \[Eventi generati dal thread BG\]<br/> | Generazione evento attività<br/> | Durante questo periodo di analisi in background verranno generati diversi eventi di attività.<br/> |



 

### <a name="when-intermediateresults-are-ready"></a>Quando IntermediateResults () sono pronti



|                       |                                                                                                    |                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                       |
|-----------------------|----------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Timestamp<br/> | Tipo di evento o scopo<br/>                                                                   | Evento generato<br/>                                                                                            | Commento<br/>                                                                                                                                                                                                                                                                                                                                                                                    |
| Da T7 a T8<br/>   | \[Eventi generati dal thread BG, che indicano l'inizio della prima operazione di riconciliazione\]<br/> | [**InkAnalyzerStateChanging**](-ianalysisproxyevents-inkanalyzerstatechanging.md) Generazione evento<br/>         | È stato generato un solo evento [**InkAnalyzerStateChanging**](-ianalysisproxyevents-inkanalyzerstatechanging.md) . Questo evento viene generato prima di esaminare lo stato di [**InkAnalyzer**](inkanalyzer.md), consentendo all'applicazione di impostare il valore [**PartiallyPopulated**](icontextnode-setpartiallypopulated.md) su qualsiasi nodo o di eseguire qualsiasi blocco del documento locale necessario.<br/> |
| Da T7 a T8<br/>   | \[Evento esplorazione albero\]<br/>                                                              | [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) Generazione evento<br/>                   | È possibile che venga generato un numero di eventi [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                                               |
| Da T7 a T8<br/>   | \[Evento di modifica dell'albero\]<br/>                                                             | [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md) Generazione evento<br/>                     | È possibile che venga generato un numero di eventi [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                                                 |
| Da T7 a T8<br/>   | \[Evento di modifica dell'albero\]<br/>                                                             | [**L'ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md) Generazione evento<br/>                   | È possibile che venga generato un numero di eventi [**l'ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                                               |
| Da T7 a T8<br/>   | \[Evento di modifica dell'albero\]<br/>                                                             | [**ContextNodeMovingToPosition**](-ianalysisproxyevents-contextnodemovingtoposition.md)<br/>                | È possibile che venga generato un numero di eventi [**ContextNodeMovingToPosition**](-ianalysisproxyevents-contextnodemovingtoposition.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                               |
| Da T7 a T8<br/>   | \[Evento di modifica dell'albero\]<br/>                                                             | [**L'ContextNodeReparenting**](-ianalysisproxyevents-contextnodereparenting.md)<br/>                          | È possibile che venga generato un numero di eventi [**l'ContextNodeReparenting**](-ianalysisproxyevents-contextnodereparenting.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                                         |
| Da T7 a T8<br/>   | \[Evento di modifica dell'albero\]<br/>                                                             | [**StrokeReparented**](-ianalysisproxyevents-strokereparented.md)<br/>                                      | È possibile che venga generato un numero di eventi [**StrokeReparented**](-ianalysisproxyevents-strokereparented.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                                                     |
| Da T7 a T8<br/>   | \[Evento di modifica dell'albero\]<br/>                                                             | [**ContextNodeLinkAdding**](-ianalysisproxyevents-contextnodelinkadding.md)<br/>                            | È possibile che venga generato un numero di eventi [**ContextNodeLinkAdding**](-ianalysisproxyevents-contextnodelinkadding.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                                           |
| Da T7 a T8<br/>   | \[Evento di modifica dell'albero\]<br/>                                                             | [**L'ContextNodeLinkDeleting**](-ianalysisproxyevents-contextnodelinkdeleting.md)<br/>                        | È possibile che venga generato un numero di eventi [**l'ContextNodeLinkDeleting**](-ianalysisproxyevents-contextnodelinkdeleting.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                                       |
| Da T7 a T8<br/>   | \[Evento di modifica dell'albero\]<br/>                                                             | [**ContextNodePropertiesUpdated**](-ianalysisproxyevents-contextnodepropertiesupdated.md) Generazione evento<br/> | È possibile che venga generato un numero di eventi [**ContextNodePropertiesUpdated**](-ianalysisproxyevents-contextnodepropertiesupdated.md) , a seconda del contenuto dell'input penna. **ContextNodePropertiesUpdated** sono pianificati per essere generati dopo la generazione di tutti gli altri eventi di modifica di [**ContextNode**](icontextnode.md) durante questo periodo di [**riconciliazione**](iinkanalyzer-reconcile.md) .<br/>              |
| Da T7 a T8<br/>   | \[L'evento indica la fine della prima operazione di riconciliazione\]<br/>                            | [**IntermediateResults ()**](-ianalysisevents-intermediateresults.md) Generazione evento<br/>                        | Verrà generato un solo evento [**IntermediateResults ()**](-ianalysisevents-intermediateresults.md) per ogni operazione di analisi.<br/>                                                                                                                                                                                                                                                                  |



 

### <a name="after-intermediateresults-have-been-handled"></a>Una volta gestiti IntermediateResults ()



|                       |                                             |                                                                       |                                                                                                                                   |
|-----------------------|---------------------------------------------|-----------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| Timestamp<br/> | Tipo di evento o scopo<br/>            | Evento generato<br/>                                               | Commento<br/>                                                                                                                |
| Da T8 a T11<br/>  | \[Eventi generati dal thread BG\]<br/> | [**Attività**](-ianalysisevents-activity.md) di Generazione evento<br/> | Durante questo periodo di analisi in background verranno generati diversi eventi di [**attività**](-ianalysisevents-activity.md) .<br/> |



 

### <a name="when-final-results-are-ready"></a>Quando i risultati finali sono pronti



|                       |                                                                                                     |                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                       |
|-----------------------|-----------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Timestamp<br/> | Tipo di evento o scopo<br/>                                                                    | Evento generato<br/>                                                                                            | Commento<br/>                                                                                                                                                                                                                                                                                                                                                                                    |
| Da T11 a T12<br/> | \[Eventi generati dal thread BG, che significa l'inizio della seconda operazione di riconciliazione\]<br/> | [**InkAnalyzerStateChanging**](-ianalysisproxyevents-inkanalyzerstatechanging.md) Generazione evento<br/>         | È stato generato un solo evento [**InkAnalyzerStateChanging**](-ianalysisproxyevents-inkanalyzerstatechanging.md) . Questo evento viene generato prima di esaminare lo stato di [**InkAnalyzer**](inkanalyzer.md), consentendo all'applicazione di impostare il valore [**PartiallyPopulated**](icontextnode-setpartiallypopulated.md) su qualsiasi nodo o di eseguire qualsiasi blocco del documento locale necessario.<br/> |
| Da T11 a T12<br/> | \[Evento esplorazione albero\]<br/>                                                               | [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) Generazione evento<br/>                   | È possibile che venga generato un numero qualsiasi di eventi [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                                             |
| Da T11 a T12<br/> | \[Evento di modifica dell'albero\]<br/>                                                              | [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md) Generazione evento<br/>                     | È possibile che venga generato un numero qualsiasi di eventi [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                                               |
| Da T11 a T12<br/> | \[Evento di modifica dell'albero\]<br/>                                                              | [**L'ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md) Generazione evento<br/>                   | È possibile che venga generato un numero qualsiasi di eventi [**l'ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                                             |
| Da T11 a T12<br/> | \[Evento di modifica dell'albero\]<br/>                                                              | [**ContextNodeMovingToPosition**](-ianalysisproxyevents-contextnodemovingtoposition.md)<br/>                | È possibile che venga generato un numero qualsiasi di eventi [**ContextNodeMovingToPosition**](-ianalysisproxyevents-contextnodemovingtoposition.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                             |
| Da T11 a T12<br/> | \[Evento di modifica dell'albero\]<br/>                                                              | [**L'ContextNodeReparenting**](-ianalysisproxyevents-contextnodereparenting.md)<br/>                          | È possibile che venga generato un numero qualsiasi di eventi [**l'ContextNodeReparenting**](-ianalysisproxyevents-contextnodereparenting.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                                       |
| Da T11 a T12<br/> | \[Evento di modifica dell'albero\]<br/>                                                              | [**StrokeReparented**](-ianalysisproxyevents-strokereparented.md)<br/>                                      | È possibile che venga generato un numero qualsiasi di eventi [**StrokeReparented**](-ianalysisproxyevents-strokereparented.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                                                   |
| Da T11 a T12<br/> | \[Evento di modifica dell'albero\]<br/>                                                              | [**ContextNodeLinkAdding**](-ianalysisproxyevents-contextnodelinkadding.md)<br/>                            | È possibile che venga generato un numero qualsiasi di eventi [**ContextNodeLinkAdding**](-ianalysisproxyevents-contextnodelinkadding.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                                         |
| Da T11 a T12<br/> | \[Evento di modifica dell'albero\]<br/>                                                              | [**L'ContextNodeLinkDeleting**](-ianalysisproxyevents-contextnodelinkdeleting.md)<br/>                        | È possibile che venga generato un numero qualsiasi di eventi [**l'ContextNodeLinkDeleting**](-ianalysisproxyevents-contextnodelinkdeleting.md) , a seconda del contenuto dell'input penna.<br/>                                                                                                                                                                                                                                     |
| Da T11 a T12<br/> | \[Evento di modifica dell'albero\]<br/>                                                              | [**ContextNodePropertiesUpdated**](-ianalysisproxyevents-contextnodepropertiesupdated.md) Generazione evento<br/> | È possibile che venga generato un numero qualsiasi di eventi [**ContextNodePropertiesUpdated**](-ianalysisproxyevents-contextnodepropertiesupdated.md) , a seconda del contenuto dell'input penna. **ContextNodePropertiesUpdated** sono pianificati per essere generati dopo la generazione di tutti gli altri eventi di modifica di [**ContextNode**](icontextnode.md) durante questo periodo di [**riconciliazione**](iinkanalyzer-reconcile.md) .<br/>            |
| Da T11 a T12<br/> | \[L'evento indica la fine della seconda operazione di riconciliazione\]<br/>                            | [**Risultati**](-ianalysisevents-results.md) di Generazione evento<br/>                                                | Verrà generato un solo evento di [**risultati**](-ianalysisevents-results.md) per ogni operazione di analisi.<br/>                                                                                                                                                                                                                                                                                          |



 

 

 




