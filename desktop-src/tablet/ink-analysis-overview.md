---
description: Le API di InkAnalysis forniscono agli sviluppatori di Tablet PC strumenti avanzati per esaminare a livello di codice l'input penna. L'API classifica l'input penna in categorie significative quali parole, linee, paragrafi e disegni.
ms.assetid: d9521a8c-f61a-40ea-8603-e8afbba75a4e
title: Panoramica dell'analisi dell'input penna
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8e383d16c01cd9475d4c54587b4b5fb4c09791a0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104525309"
---
# <a name="ink-analysis-overview"></a><span data-ttu-id="33300-104">Panoramica dell'analisi dell'input penna</span><span class="sxs-lookup"><span data-stu-id="33300-104">Ink Analysis Overview</span></span>

<span data-ttu-id="33300-105">Le API di InkAnalysis forniscono agli sviluppatori di Tablet PC strumenti avanzati per esaminare a livello di codice l'input penna.</span><span class="sxs-lookup"><span data-stu-id="33300-105">The InkAnalysis APIs provide Tablet PC developers with powerful tools to programmatically examine ink input.</span></span> <span data-ttu-id="33300-106">L'API classifica l'input penna in categorie significative quali parole, linee, paragrafi e disegni.</span><span class="sxs-lookup"><span data-stu-id="33300-106">The API classifies ink into meaningful categories such as words, lines, paragraphs, and drawings.</span></span>

<span data-ttu-id="33300-107">È possibile utilizzare ogni classificazione in diversi modi, tra cui migliorare i risultati del riconoscimento per la grafia.</span><span class="sxs-lookup"><span data-stu-id="33300-107">You can use each classification in a variety of ways, including improving recognition results for handwriting.</span></span>

## <a name="ink-analysis-basics"></a><span data-ttu-id="33300-108">Nozioni fondamentali sull'analisi dell'input penna</span><span class="sxs-lookup"><span data-stu-id="33300-108">Ink Analysis Basics</span></span>

<span data-ttu-id="33300-109">In questa sezione viene presentata la tecnologia di analisi dell'input penna della piattaforma Tablet PC e viene illustrato quando e come utilizzarlo.</span><span class="sxs-lookup"><span data-stu-id="33300-109">This section introduces the Tablet PC Platform ink analysis technology and explains when and how to use it.</span></span>

<span data-ttu-id="33300-110">Le API InkAnalysis combinano efficacemente due tecnologie distinte ma gratuite: il riconoscimento della grafia e la classificazione del layout.</span><span class="sxs-lookup"><span data-stu-id="33300-110">The InkAnalysis APIs effectively combine two distinct but complimentary technologies: handwriting recognition and layout classification.</span></span> <span data-ttu-id="33300-111">La combinazione di queste due tecnologie offre risultati più estesi rispetto alle parti prese da soli.</span><span class="sxs-lookup"><span data-stu-id="33300-111">Combining these two technologies gives definitively greater results than the parts taken alone.</span></span>

<span data-ttu-id="33300-112">Il riconoscimento della grafia è l'analisi computazionale dell'input penna digitale manoscritto per restituire l'interpretazione basata sui caratteri in una determinata lingua.</span><span class="sxs-lookup"><span data-stu-id="33300-112">Handwriting recognition is the computational analysis of handwritten digital ink to return character-based interpretation in a given language.</span></span> <span data-ttu-id="33300-113">Ovvero il riconoscimento della grafia è il modo in cui il computer "legge" la grafia di una persona.</span><span class="sxs-lookup"><span data-stu-id="33300-113">That is, handwriting recognition is how the computer "reads" a person's handwriting.</span></span>

<span data-ttu-id="33300-114">L'analisi dell'input penna può essere suddivisa ulteriormente nella classificazione dell'input penna e nell'analisi del layout.</span><span class="sxs-lookup"><span data-stu-id="33300-114">Ink Analysis can be further broken down into ink classification and layout analysis.</span></span> <span data-ttu-id="33300-115">La classificazione Ink è la suddivisione computazionale dell'input penna in unità semanticamente significative, ad esempio paragrafi, righe, parole e disegni.</span><span class="sxs-lookup"><span data-stu-id="33300-115">Ink classification is the computational division of ink into semantically meaningful units such as paragraphs, lines, words, and drawings.</span></span> <span data-ttu-id="33300-116">L'analisi del layout è l'esame computazionale dell'input penna per determinare la posizione dell'input penna sulla superficie di Inking e il modo in cui i tratti sono correlati tra loro a livello spaziale e anche semanticamente.</span><span class="sxs-lookup"><span data-stu-id="33300-116">Layout analysis is the computational examination of ink input to determine the position of the ink on the inking surface and how the strokes relate to each other spatially and even semantically.</span></span> <span data-ttu-id="33300-117">Ad esempio, l'analisi del layout può indicare che un particolare componente di input penna è un'annotazione o una chiamata.</span><span class="sxs-lookup"><span data-stu-id="33300-117">For example, layout analysis can tell you that a particular piece of ink is an annotation or a call out.</span></span>

### <a name="recognition"></a><span data-ttu-id="33300-118">Riconoscimento</span><span class="sxs-lookup"><span data-stu-id="33300-118">Recognition</span></span>

<span data-ttu-id="33300-119">Un esempio di come la combinazione di riconoscimento con l'analisi dell'input penna nell'API InkAnalysis consente allo sviluppatore di migliorare i risultati dei riconoscimenti.</span><span class="sxs-lookup"><span data-stu-id="33300-119">One example of how the combination of recognition with ink analysis in the InkAnalysis API helps the developer is the improvement in recognition results.</span></span> <span data-ttu-id="33300-120">I motori di riconoscimento della grafia di Tablet PC sono stati progettati principalmente per riconoscere un'unica linea orizzontale di input penna.</span><span class="sxs-lookup"><span data-stu-id="33300-120">The Tablet PC handwriting recognition engines have been primarily designed to recognize a single horizontal line of ink.</span></span> <span data-ttu-id="33300-121">Tuttavia, le persone tendono a scrivere più righe quando si accettano note e tali righe non sono necessariamente orizzontali rispetto alla pagina.</span><span class="sxs-lookup"><span data-stu-id="33300-121">However, people tend to write multiple lines when taking notes, and those lines are not guaranteed to be horizontal in relation to the page.</span></span> <span data-ttu-id="33300-122">Con l'API InkAnalysis, l'input penna viene pre-elaborato da Ink Analyzer prima di essere inviato al riconoscimento.</span><span class="sxs-lookup"><span data-stu-id="33300-122">With the InkAnalysis API, ink is preprocessed by the ink analyzer before being sent to the recognizer.</span></span> <span data-ttu-id="33300-123">L'input penna analizzato viene trasformato in orizzontale prima di essere riconosciuto, migliorando i risultati del riconoscimento.</span><span class="sxs-lookup"><span data-stu-id="33300-123">The analyzed ink is transformed to horizontal before being recognized, improving the recognition results.</span></span>

<span data-ttu-id="33300-124">Altri vantaggi del riconoscimento derivano dal fatto che l'analizzatore di input penna corregge le informazioni errate dell'ordine di ictus prima di inviare l'input penna al riconoscimento.</span><span class="sxs-lookup"><span data-stu-id="33300-124">Other benefits to recognition are derived by having the ink analyzer correct incorrect stroke order information before sending the ink to the recognizer.</span></span> <span data-ttu-id="33300-125">I risultati del riconoscimento sono ora disponibili in modo selettivo.</span><span class="sxs-lookup"><span data-stu-id="33300-125">Further, recognition results are now available in a selective manner.</span></span> <span data-ttu-id="33300-126">In altre parole, lo sviluppatore può recuperare rapidamente i risultati del riconoscimento per una singola parola, riga o paragrafo in un'unica chiamata.</span><span class="sxs-lookup"><span data-stu-id="33300-126">That is, the developer can quickly retrieve the recognition results for a single word, line, or paragraph in one call.</span></span>

### <a name="ink-classification"></a><span data-ttu-id="33300-127">Classificazione input penna</span><span class="sxs-lookup"><span data-stu-id="33300-127">Ink Classification</span></span>

<span data-ttu-id="33300-128">Esistono, naturalmente, diversi scenari in cui è possibile mantenere intatti i dati dell'input penna, anziché convertirli immediatamente in testo.</span><span class="sxs-lookup"><span data-stu-id="33300-128">There are, of course, a variety of scenarios in which you may to keep the ink data intact, rather than converting it immediately to text.</span></span> <span data-ttu-id="33300-129">Anche l'analisi dell'input penna offre vantaggi.</span><span class="sxs-lookup"><span data-stu-id="33300-129">Ink analysis provides benefits here as well.</span></span> <span data-ttu-id="33300-130">In particolare, le API InkAnalysis offrono la possibilità di suddividere i tratti di input penna a seconda che si tratti di scritture o disegni.</span><span class="sxs-lookup"><span data-stu-id="33300-130">Specifically, the InkAnalysis APIs provide the ability to split ink strokes according to whether they are writing or drawings.</span></span> <span data-ttu-id="33300-131">I tratti di input penna classificati come scritti sono quelli che costituiscono una parola o caratteri.</span><span class="sxs-lookup"><span data-stu-id="33300-131">Ink strokes that are classified as writing are those that make up a word or characters.</span></span> <span data-ttu-id="33300-132">Tutti gli altri tratti sono disegni.</span><span class="sxs-lookup"><span data-stu-id="33300-132">All other strokes are drawings.</span></span> <span data-ttu-id="33300-133">Si tratta di un nuovo modo per accedere ai dati Ink, abilitando nuovi scenari utente.</span><span class="sxs-lookup"><span data-stu-id="33300-133">This provides you with a new way to access ink data, enabling new user scenarios.</span></span> <span data-ttu-id="33300-134">Ad esempio, è possibile implementare la selezione in modo che sia diversa in base al tipo di tratto su cui l'utente tocca; Se un utente tocca un tratto di scrittura, l'applicazione seleziona l'intero set di tratti che compongono la parola, se l'utente tocca un disegno Stoke, l'applicazione seleziona solo tale tratto.</span><span class="sxs-lookup"><span data-stu-id="33300-134">For instance, you may implement selection so that it is different based on which type of stroke the user taps on; if a user taps a writing stroke, the application selects the entire set of strokes that compose the word, if the user taps a drawing stoke, the application selects only that stroke.</span></span>

### <a name="layout-analysis"></a><span data-ttu-id="33300-135">Analisi del layout</span><span class="sxs-lookup"><span data-stu-id="33300-135">Layout Analysis</span></span>

<span data-ttu-id="33300-136">Un'analisi del layout utile è in realtà ben oltre la suddivisione relativamente semplice dell'input penna nella scrittura e nel disegno di componenti.</span><span class="sxs-lookup"><span data-stu-id="33300-136">Useful layout analysis actually goes far beyond the relatively simple breakdown of ink into writing and drawing components.</span></span>

<span data-ttu-id="33300-137">L'analisi dell'input penna include anche una suddivisione più dettagliata dei tratti di scrittura e di disegno.</span><span class="sxs-lookup"><span data-stu-id="33300-137">Ink analysis also includes a richer breakdown of the writing and drawing strokes.</span></span> <span data-ttu-id="33300-138">Come esempio molto semplice, prendere un BLOB di input penna, come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="33300-138">As a very simple example, take a blob of ink as shown in the following illustration.</span></span>

![due semplici righe di grafia](images/12e7a221-59c1-4d69-b7aa-67f2caebe375.jpg)

<span data-ttu-id="33300-140">Dopo che la piattaforma ha analizzato questi tratti, restituisce una rappresentazione ad albero di questi tratti, come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="33300-140">After the platform has analyzed these strokes, it returns a tree representation of these strokes as shown in the following illustration.</span></span> <span data-ttu-id="33300-141">Per questo semplice caso, l'albero contiene solo le informazioni relative a paragrafo, riga e parola, ma la ricchezza di questo albero aumenta man mano che aumenta la complessità del documento Ink.</span><span class="sxs-lookup"><span data-stu-id="33300-141">For this simple case, the tree contains only paragraph, line, and word information, but the richness of this tree increases as the complexity of the ink document increases.</span></span>

![rappresentazione ad albero di radice, paragrafo, righe e parole](images/be5a7635-0abc-45ad-bcb5-98fddee5e148.jpg)

<span data-ttu-id="33300-143">Poiché queste informazioni sono ora separate da unità gestibili, è ora possibile creare funzionalità più potenti.</span><span class="sxs-lookup"><span data-stu-id="33300-143">Because this information is now separated into manageable units, you can now create more powerful features.</span></span> <span data-ttu-id="33300-144">Ad esempio, l'applicazione può estendere la funzionalità in cui l'utente tocca per selezionare una parola in una funzionalità in cui l'utente tocca una sola volta per selezionare la parola, tocca due volte per selezionare l'intera riga e tocca tre volte per selezionare l'intero paragrafo.</span><span class="sxs-lookup"><span data-stu-id="33300-144">As an example, the application can extend the feature in which the user taps to select a word into a feature in which the user taps once to select the word, taps twice to select the entire line, and taps three times to select the entire paragraph.</span></span> <span data-ttu-id="33300-145">Sfruttando la struttura ad albero restituita dall'operazione di analisi, l'applicazione può correlare l'area toccata a un tratto nell'albero.</span><span class="sxs-lookup"><span data-stu-id="33300-145">By leveraging the tree structure returned by the analysis operation, the application can relate the tapped area back to a stroke in the tree.</span></span> <span data-ttu-id="33300-146">Dopo che l'applicazione ha individuato un tratto, può esaminare l'albero per determinare come e quali tratti adiacenti selezionare.</span><span class="sxs-lookup"><span data-stu-id="33300-146">After the application finds a stroke, it can walk up the tree to determine how and which neighboring strokes to select.</span></span>

<span data-ttu-id="33300-147">La selezione di un'intera riga è un esempio semplicistico dei vantaggi dell'analisi dell'input penna, ma le possibilità diventano ottimali quando si considerano i diversi tipi di strutture gerarchiche che possono essere rilevati dall'analizzatore di input penna:</span><span class="sxs-lookup"><span data-stu-id="33300-147">Selecting an entire line is a simplistic example of the benefits of ink analysis, but the possibilities become great when one considers the different types of hierarchical structures the ink analyzer is capable of detecting:</span></span>

-   <span data-ttu-id="33300-148">Elenchi ordinati e non ordinati</span><span class="sxs-lookup"><span data-stu-id="33300-148">Ordered and unordered lists</span></span>
-   <span data-ttu-id="33300-149">Forme</span><span class="sxs-lookup"><span data-stu-id="33300-149">Shapes</span></span>
-   <span data-ttu-id="33300-150">Commenti annotativi scritti inline con il testo</span><span class="sxs-lookup"><span data-stu-id="33300-150">Annotative comments written inline with the text</span></span>

<span data-ttu-id="33300-151">I tipi di funzionalità variano da applicazione ad applicazione e si basano sui requisiti e sui motori di analisi e di riconoscimento disponibili.</span><span class="sxs-lookup"><span data-stu-id="33300-151">The types of features vary from application to application and are based on requirements and the available ink analysis and recognition engines.</span></span>

### <a name="key-ink-analysis-features"></a><span data-ttu-id="33300-152">Funzionalità di analisi dell'input penna chiave</span><span class="sxs-lookup"><span data-stu-id="33300-152">Key Ink Analysis Features</span></span>

<span data-ttu-id="33300-153">Le funzionalità principali dell'API InkAnalysis includono le funzionalità seguenti:</span><span class="sxs-lookup"><span data-stu-id="33300-153">The key capabilities of the InkAnalysis API include the following features:</span></span>

-   <span data-ttu-id="33300-154">Analisi incrementale</span><span class="sxs-lookup"><span data-stu-id="33300-154">Incremental Analysis</span></span>
-   <span data-ttu-id="33300-155">Persistenza</span><span class="sxs-lookup"><span data-stu-id="33300-155">Persistence</span></span>
-   <span data-ttu-id="33300-156">Proxy di dati</span><span class="sxs-lookup"><span data-stu-id="33300-156">Data Proxy</span></span>
-   <span data-ttu-id="33300-157">Riconciliazione</span><span class="sxs-lookup"><span data-stu-id="33300-157">Reconciliation</span></span>
-   <span data-ttu-id="33300-158">Estendibilità</span><span class="sxs-lookup"><span data-stu-id="33300-158">Extensibility</span></span>

### <a name="incremental-analysis"></a><span data-ttu-id="33300-159">Analisi incrementale</span><span class="sxs-lookup"><span data-stu-id="33300-159">Incremental Analysis</span></span>

<span data-ttu-id="33300-160">Quando gli utenti finali lavorano con l'input penna, in genere lo considerano come grafia.</span><span class="sxs-lookup"><span data-stu-id="33300-160">When end users work with ink, they usually treat it like handwriting.</span></span> <span data-ttu-id="33300-161">L'input penna è costantemente soggetto a operazioni di modifica, ad esempio l'aggiunta di nuovi input penna, l'eliminazione di input penna e la modifica delle proprietà dell'input penna, tutte eseguite nello stesso modo in cui la grafia viene continuamente modificata.</span><span class="sxs-lookup"><span data-stu-id="33300-161">The ink is continually subject to editing operations such as the addition of new ink, deletion of existing ink, and the modification of ink properties, all done in the same way that handwriting is continually edited.</span></span> <span data-ttu-id="33300-162">Queste operazioni di modifica influiscono sui risultati dell'analisi.</span><span class="sxs-lookup"><span data-stu-id="33300-162">These editing operations affect the analysis results.</span></span> <span data-ttu-id="33300-163">Quando si verificano modifiche, in genere possono essere isolate in sezioni del documento in momenti specifici.</span><span class="sxs-lookup"><span data-stu-id="33300-163">When edits occur, they can usually be isolated to sections of the document at specific points in time.</span></span> <span data-ttu-id="33300-164">Si supponga, ad esempio, che un utente scriva cinque righe di input penna.</span><span class="sxs-lookup"><span data-stu-id="33300-164">For example, assume a user writes five lines of ink.</span></span> <span data-ttu-id="33300-165">Il modo standard in cui le applicazioni analizzano l'input penna è attendere fino a quando l'utente non ha completato la scrittura di tutte le cinque righe di input penna, ad esempio un paragrafo, e quindi analizza i risultati in modo sincrono o asincrono.</span><span class="sxs-lookup"><span data-stu-id="33300-165">The standard way that applications analyze ink is to wait until the user has finished writing all five lines of ink—a paragraph, for instance—and then analyze the results, either synchronously or asynchronously.</span></span>

<span data-ttu-id="33300-166">È possibile ottimizzare il tempo complessivo impiegato per l'analisi di queste cinque righe isolando le aree analizzate durante la scrittura e quindi rianalizzando solo le parti dei risultati modificati.</span><span class="sxs-lookup"><span data-stu-id="33300-166">You can optimize the overall time spent analyzing these five lines by isolating the areas that are analyzed as they are being written, and then reanalyzing only the parts of the results that have changed.</span></span> <span data-ttu-id="33300-167">Dopo l'analisi, la prima riga non verrà mai riconosciuta a meno che non venga modificata dall'utente finale.</span><span class="sxs-lookup"><span data-stu-id="33300-167">After the first line is analyzed, it will never be recognized again unless it is modified by the end user.</span></span> <span data-ttu-id="33300-168">Il riconoscimento della seconda riga viene considerato come un'operazione di riconoscimento indipendente.</span><span class="sxs-lookup"><span data-stu-id="33300-168">Recognition of the second line is treated as an independent recognition operation.</span></span>

<span data-ttu-id="33300-169">Questo approccio incrementale funziona bene a livello di riga per le operazioni di riconoscimento, ma deve funzionare a un livello superiore per l'operazione di analisi dell'input penna.</span><span class="sxs-lookup"><span data-stu-id="33300-169">This incremental approach works well at the line level for the recognition operations, but it needs to work at a higher level for the ink analysis operation.</span></span> <span data-ttu-id="33300-170">Poiché l'analizzatore di input penna è in grado di rilevare diverse classificazioni di livello superiore per queste cinque righe di input penna (ad esempio, potrebbe trattarsi di un paragrafo standard o di cinque elementi in un elenco), l'approccio incrementale per l'analizzatore di input penna è che deve analizzare queste strutture più elevate.</span><span class="sxs-lookup"><span data-stu-id="33300-170">Because the ink analyzer can detect different higher level classifications for these five lines of ink (for example, it could be a standard paragraph or five items in a list), the incremental approach for the ink analyzer is that it has to analyze these higher structures.</span></span> <span data-ttu-id="33300-171">Ciò significa che, dopo che l'analizzatore di input penna ha classificato la prima riga di input penna come riga, verifica che sia ancora una linea quando classifica la seconda riga.</span><span class="sxs-lookup"><span data-stu-id="33300-171">That is to say, after the ink analyzer classifies the first line of ink as a line, it double-checks that it is still a line when it classifies the second line.</span></span> <span data-ttu-id="33300-172">Tuttavia, l'analizzatore di input penna isola questo doppio controllo sul paragrafo e ignora il primo paragrafo quando si analizza un secondo paragrafo, considerando il secondo paragrafo come operazione di analizzatore di input penna indipendente.</span><span class="sxs-lookup"><span data-stu-id="33300-172">However, the ink analyzer isolates this double-checking to the paragraph and ignores the first paragraph when analyzing a second paragraph, treating the second paragraph as an independent ink analyzer operation.</span></span> <span data-ttu-id="33300-173">Questo approccio incrementale all'analisi consente di risparmiare notevolmente tempo di elaborazione quando nell'applicazione sono già presenti grandi quantità di input penna.</span><span class="sxs-lookup"><span data-stu-id="33300-173">This incremental approach to analysis dramatically saves processing time when large amounts of ink already exist in the application.</span></span>

### <a name="persistence"></a><span data-ttu-id="33300-174">Persistenza</span><span class="sxs-lookup"><span data-stu-id="33300-174">Persistence</span></span>

<span data-ttu-id="33300-175">L'analisi incrementale funziona correttamente in una determinata sessione o istanza di un oggetto [**InkAnalyzer**](inkanalyzer.md) .</span><span class="sxs-lookup"><span data-stu-id="33300-175">Incremental analysis works well within a given session or instance of an [**InkAnalyzer**](inkanalyzer.md) object.</span></span> <span data-ttu-id="33300-176">Tuttavia, le API della piattaforma Tablet PC di prima generazione non possono eseguire l'analisi incrementale dopo che l'input penna è stato salvato su disco.</span><span class="sxs-lookup"><span data-stu-id="33300-176">However, the first generation Tablet PC Platform APIs cannot perform incremental analysis after the ink is persisted to disk.</span></span> <span data-ttu-id="33300-177">L'API InkAnalysis consente di salvare l'input penna su disco insieme a una forma permanente dei risultati dell'analisi.</span><span class="sxs-lookup"><span data-stu-id="33300-177">The InkAnalysis API enables saving ink to disk along with a persisted form of the analysis results.</span></span> <span data-ttu-id="33300-178">I risultati dell'analisi possono essere caricati quando l'input penna viene caricato e possono essere inseriti in una nuova istanza di un **oggetto InkAnalyzer**.</span><span class="sxs-lookup"><span data-stu-id="33300-178">The analysis results can be loaded when the ink is loaded and can be injected into a new instance of an **InkAnalyzer**.</span></span> <span data-ttu-id="33300-179">Una nuova istanza dell'oggetto **InkAnalyzer** ha quindi lo stesso stato dei risultati ottenuta in precedenza ed è ora in grado di accettare modifiche incrementali apportate allo stato esistente, anziché analizzare di nuovo tutti gli elementi.</span><span class="sxs-lookup"><span data-stu-id="33300-179">A new instance of the **InkAnalyzer** object then has the same results state it previously had and can now accept any modifications as incremental changes to the existing state, rather than analyzing everything again.</span></span>

### <a name="data-proxy"></a><span data-ttu-id="33300-180">Proxy di dati</span><span class="sxs-lookup"><span data-stu-id="33300-180">Data Proxy</span></span>

<span data-ttu-id="33300-181">Molte applicazioni dispongono già di una struttura di documenti esistente nelle proprie applicazioni. ad esempio, un grafo o un database.</span><span class="sxs-lookup"><span data-stu-id="33300-181">Many applications already have some sort of existing document structure in their applications; for instance, a graph or a database.</span></span> <span data-ttu-id="33300-182">L' [**oggetto InkAnalyzer**](inkanalyzer.md) presenta anche i risultati in un formato strutturato, in una struttura ad albero di oggetti [**ContextNode**](icontextnode.md) .</span><span class="sxs-lookup"><span data-stu-id="33300-182">The [**InkAnalyzer**](inkanalyzer.md) also presents results in a structured form, in a tree of [**ContextNode**](icontextnode.md) objects.</span></span> <span data-ttu-id="33300-183">La struttura **InkAnalyzer** e la struttura esistente dell'applicazione devono interagire in due direzioni: i risultati vengono estratti dall' **oggetto InkAnalyzer** nell'applicazione e lo stato viene inserito dall'applicazione in **InkAnalyzer**.</span><span class="sxs-lookup"><span data-stu-id="33300-183">The **InkAnalyzer** structure and the application's existing structure need to interoperate in two directions: results are pulled from the **InkAnalyzer** into the application and state is pushed from the application into the **InkAnalyzer**.</span></span>

<span data-ttu-id="33300-184">Se il pull dei risultati dall' [**oggetto InkAnalyzer**](inkanalyzer.md) nella struttura dell'applicazione era sufficiente, sarebbe stato relativamente semplice.</span><span class="sxs-lookup"><span data-stu-id="33300-184">If pulling the results from the [**InkAnalyzer**](inkanalyzer.md) into the application's structure were all that was needed, it would be relatively simple.</span></span> <span data-ttu-id="33300-185">Le applicazioni eseguono l'iterazione nell'albero dei risultati e copiano (integrano) tutti i risultati necessari nella struttura dei dati esistente.</span><span class="sxs-lookup"><span data-stu-id="33300-185">Applications would iterate through the results tree and copy (integrate) all pieces of the results they need into their existing data structure.</span></span> <span data-ttu-id="33300-186">Tuttavia, poiché molte applicazioni orizzontali richiedono l'analisi incrementale e la persistenza su disco, il problema diventa bidirezionale.</span><span class="sxs-lookup"><span data-stu-id="33300-186">However, because many horizontal applications require incremental analysis and persistence to disk, the problem becomes two-directional.</span></span> <span data-ttu-id="33300-187">Lo stato (risultati precedenti) deve essere estratto dalla struttura dell'applicazione e inserito nell' **oggetto InkAnalyzer**.</span><span class="sxs-lookup"><span data-stu-id="33300-187">State (past results) needs to be pulled from the application's structure and pushed into the **InkAnalyzer**.</span></span>

<span data-ttu-id="33300-188">Per soddisfare questo requisito, l' [**oggetto InkAnalyzer**](inkanalyzer.md) contiene una serie di eventi che genera al momento appropriato durante un'operazione di analisi per consentire alle applicazioni di eseguire il proxy della richiesta di dati alle strutture esistenti.</span><span class="sxs-lookup"><span data-stu-id="33300-188">To meet this requirement, the [**InkAnalyzer**](inkanalyzer.md) contains a series of events that it raises at the appropriate time during an analysis operation to allow applications to proxy the request for data back to their existing structures.</span></span> <span data-ttu-id="33300-189">Questi eventi vengono generati solo per gli oggetti [**ContextNode**](icontextnode.md) richiesti dall'operazione incrementale.</span><span class="sxs-lookup"><span data-stu-id="33300-189">These events are raised only for those [**ContextNode**](icontextnode.md) objects required by the incremental operation.</span></span>

### <a name="reconciliation"></a><span data-ttu-id="33300-190">Riconciliazione</span><span class="sxs-lookup"><span data-stu-id="33300-190">Reconciliation</span></span>

<span data-ttu-id="33300-191">Per la maggior parte delle applicazioni si desidera analizzare l'input penna in background per ridurre al minimo le interruzioni dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="33300-191">Most applications will want to analyze the ink in the background to keep user interface interruptions to a minimum.</span></span> <span data-ttu-id="33300-192">L'analisi dell'input penna in background causa problemi, tuttavia, se l'utente modifica l'input penna (o l'input penna adiacente) analizzato.</span><span class="sxs-lookup"><span data-stu-id="33300-192">Analyzing ink in the background causes problems, however, if the user changes the ink (or neighboring ink) that is being analyzed.</span></span> <span data-ttu-id="33300-193">Se ad esempio l'utente elimina l'input penna durante l'operazione in background, la struttura risultante rifletterà lo stato del documento all'avvio dell'operazione in background, anziché quando è stata completata.</span><span class="sxs-lookup"><span data-stu-id="33300-193">For example, if the user deletes the ink during the background operation, the resulting structure would reflect the state of the document when the background operation started, rather than when it was completed.</span></span>

<span data-ttu-id="33300-194">Per supportare le applicazioni, [**InkAnalyzer**](inkanalyzer.md) riconcilia le differenze nello stato del documento tra l'inizio e la fine dell'operazione di analisi.</span><span class="sxs-lookup"><span data-stu-id="33300-194">To assist applications, the [**InkAnalyzer**](inkanalyzer.md) reconciles the differences in document state between the beginning and end of the analysis operation.</span></span> <span data-ttu-id="33300-195">Le modifiche apportate dall'utente o dall'applicazione durante l'esecuzione dell'analisi in background eseguono sempre l'override dei risultati calcolati in background.</span><span class="sxs-lookup"><span data-stu-id="33300-195">Changes made by the user or application while the analysis is running in the background always override the results calculated in the background.</span></span> <span data-ttu-id="33300-196">Dopo la riconciliazione, vengono segnalati solo le parti della struttura dei risultati che non sono in conflitto con le modifiche del documento e i tratti in conflitto vengono contrassegnati per l'analisi futura.</span><span class="sxs-lookup"><span data-stu-id="33300-196">After reconciliation, only the parts of the results structure that do not conflict with document changes are reported, and the conflicting strokes are tagged for future analysis.</span></span> <span data-ttu-id="33300-197">La volta successiva che viene eseguita l'operazione di analisi in background, i risultati vengono ricalcolati in base al nuovo stato.</span><span class="sxs-lookup"><span data-stu-id="33300-197">The next time the background analysis operation is run, the results are recalculated based on the new state.</span></span>

<span data-ttu-id="33300-198">Il diagramma seguente illustra questo processo.</span><span class="sxs-lookup"><span data-stu-id="33300-198">The following diagram shows this process.</span></span> <span data-ttu-id="33300-199">Il tempo è espresso in modo lineare dall'alto verso il basso nel diagramma.</span><span class="sxs-lookup"><span data-stu-id="33300-199">Time is expressed linearly from top to bottom in the diagram.</span></span>

![processo per la riconciliazione delle modifiche dello stato del documento durante l'operazione di analisi](images/6323e0b5-b6b3-4adc-8c73-da3fad5b4bc2.jpg)

1.  <span data-ttu-id="33300-201">All'ora 1 (T1), l'applicazione raccoglie l'input penna dall'utente finale, incluso qualsiasi tipo di modifica dell'input penna, ad esempio l'aggiunta, la rimozione o la modifica.</span><span class="sxs-lookup"><span data-stu-id="33300-201">At time 1 (t1), the application is collecting ink from the end-user, including any kind of ink modification, such as adding, removing, or modifying.</span></span>
2.  <span data-ttu-id="33300-202">In T2, l'applicazione richiama l'operazione di analisi in background.</span><span class="sxs-lookup"><span data-stu-id="33300-202">At t2, the application invokes the background analysis operation.</span></span> <span data-ttu-id="33300-203">[**InkAnalyzer**](inkanalyzer.md) determina quale input penna non contiene risultati e quale input penna deve essere sottoposto a doppio controllo.</span><span class="sxs-lookup"><span data-stu-id="33300-203">The [**InkAnalyzer**](inkanalyzer.md) determines what ink does not have results and what ink needs to be double-checked.</span></span> <span data-ttu-id="33300-204">Vengono copiati i dati dell'input penna necessari per consentire l'esecuzione del thread in background in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="33300-204">It copies the needed ink data to allow the background thread to execute independently.</span></span>
3.  <span data-ttu-id="33300-205">In T3, l' [**oggetto InkAnalyzer**](inkanalyzer.md) restituisce l'esecuzione del thread dell'interfaccia utente all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="33300-205">At t3, the [**InkAnalyzer**](inkanalyzer.md) returns the user interface thread execution to the application.</span></span> <span data-ttu-id="33300-206">**InkAnalyzer** crea un secondo thread, il thread di analisi in background e i motori di analisi e riconoscimento dell'input penna analizzano i dati dell'input penna copiato.</span><span class="sxs-lookup"><span data-stu-id="33300-206">The **InkAnalyzer** creates a second thread, the background analysis thread, and the ink analysis and recognition engines analyze the copied ink data.</span></span>
4.  <span data-ttu-id="33300-207">Mentre l'operazione di analisi è in corso sul secondo thread in background, l'utente finale continua a modificare il documento, aggiungendo e rimuovendo i dati del tratto, a T4 e T5.</span><span class="sxs-lookup"><span data-stu-id="33300-207">While the analysis operation is occurring on the second background thread, the end user continues to edit the document, adding and removing stroke data, at t4 and t5.</span></span> <span data-ttu-id="33300-208">Queste modifiche possono entrare in conflitto con il lavoro in corso di elaborazione in background.</span><span class="sxs-lookup"><span data-stu-id="33300-208">These edits can conflict with the work that is being process in the background.</span></span>
5.  <span data-ttu-id="33300-209">A T6, il thread in background ha completato l'operazione di analisi e i risultati sono pronti.</span><span class="sxs-lookup"><span data-stu-id="33300-209">At t6, the background thread has finished the analysis operation, and results are ready.</span></span> <span data-ttu-id="33300-210">Prima che l' [**oggetto InkAnalyzer**](inkanalyzer.md) comunichi i risultati all'applicazione, viene eseguito un algoritmo di riconciliazione per determinare se le modifiche apportate dall'utente durante il calcolo dell'operazione di analisi (T4 e T5) sono in conflitto con i risultati.</span><span class="sxs-lookup"><span data-stu-id="33300-210">Before the [**InkAnalyzer**](inkanalyzer.md) communicates the results to the application, it runs a reconciliation algorithm to determine if the user edits made while the analysis operation was being calculated (t4 and t5) conflict with the results.</span></span> <span data-ttu-id="33300-211">Se vengono rilevati conflitti, i tratti in conflitto vengono contrassegnati per la ripetizione dell'analisi, operazione che viene eseguita la volta successiva che l'applicazione richiama l'operazione di analisi in background.</span><span class="sxs-lookup"><span data-stu-id="33300-211">If any collisions are detected, the colliding strokes are flagged for re-analysis, which occurs the next time the application invokes the background analysis operation.</span></span>
6.  <span data-ttu-id="33300-212">Infine, in T7, con tutti i conflitti rilevati, l' [**oggetto InkAnalyzer**](inkanalyzer.md) presenta i risultati all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="33300-212">Finally, at t7, with all the collisions detected, the [**InkAnalyzer**](inkanalyzer.md) presents the results to the application.</span></span>

### <a name="extensibility"></a><span data-ttu-id="33300-213">Estendibilità</span><span class="sxs-lookup"><span data-stu-id="33300-213">Extensibility</span></span>

<span data-ttu-id="33300-214">Le API InkAnalysis consentono l'uso da parte delle applicazioni di nuovi tipi di motori di analisi, in modo da evitare che l'applicazione debba riscrivere tutti i vantaggi dell'API InkAnalysis, tra cui la riconciliazione, il proxy di dati, la persistenza e l'analisi incrementale.</span><span class="sxs-lookup"><span data-stu-id="33300-214">The InkAnalysis APIs allow new types of analysis engines to be used by applications, in such a way as to prevent the application from having to rewrite all of the benefits of the InkAnalysis API, including reconciliation, data proxy, persistence, and incremental analysis.</span></span>

## <a name="related-topics"></a><span data-ttu-id="33300-215">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="33300-215">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="33300-216">[Microsoft. Ink](/previous-versions/dotnet/netframework-3.5/ms581553(v=vs.90))</span><span class="sxs-lookup"><span data-stu-id="33300-216">[Microsoft.Ink](/previous-versions/dotnet/netframework-3.5/ms581553(v=vs.90))</span></span>
</dt> <dt>

[<span data-ttu-id="33300-217">Riferimento all'analisi dell'input penna</span><span class="sxs-lookup"><span data-stu-id="33300-217">Ink Analysis Reference</span></span>](ink-analysis-reference.md)
</dt> </dl>

 

 
