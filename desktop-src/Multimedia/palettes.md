---
title: Tavolozze
description: Tavolozze
ms.assetid: ee048f9a-3036-40dc-a6d7-f612b9ef767c
keywords:
- DrawDib, tavolozze
- DrawDibRealize (funzione)
- DrawDibDraw (funzione)
- DrawDibSetPalette (funzione)
- DrawDibGetPalette (funzione)
- DrawDibChangePalette (funzione)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f5935831d8996c424a386f86082282f9cf7c1c12
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/19/2020
ms.locfileid: "103963039"
---
# <a name="palettes"></a><span data-ttu-id="94f78-109">Tavolozze</span><span class="sxs-lookup"><span data-stu-id="94f78-109">Palettes</span></span>

<span data-ttu-id="94f78-110">Le funzioni DrawDib richiedono che un'applicazione risponda a due messaggi orientati alla tavolozza: [**WM \_ QUERYNEWPALETTE**](/windows/desktop/gdi/wm-querynewpalette) e [**WM \_ PALETTECHANGED**](/windows/desktop/gdi/wm-palettechanged).</span><span class="sxs-lookup"><span data-stu-id="94f78-110">The DrawDib functions require that an application respond to two palette-oriented messages: [**WM\_QUERYNEWPALETTE**](/windows/desktop/gdi/wm-querynewpalette) and [**WM\_PALETTECHANGED**](/windows/desktop/gdi/wm-palettechanged).</span></span> <span data-ttu-id="94f78-111">Se l'applicazione non è compatibile con le tavolozze, sarà necessario aggiungere un gestore per ognuno di questi messaggi.</span><span class="sxs-lookup"><span data-stu-id="94f78-111">If your application is not palette-aware, you will need to add a handler for each of these messages.</span></span> <span data-ttu-id="94f78-112">Per ulteriori informazioni sull'elaborazione dei messaggi **WM \_ QUERYNEWPALETTE** e **WM \_ PALETTECHANGED** , vedere [aggiunta di gestori di messaggi tavolozza](adding-palette-message-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="94f78-112">For more information about processing the **WM\_QUERYNEWPALETTE** and **WM\_PALETTECHANGED** messages, see [Adding Palette Message Handlers](adding-palette-message-handlers.md).</span></span>

<span data-ttu-id="94f78-113">È possibile realizzare la tavolozza DrawDib corrente per il controller di dominio usando la funzione [**DrawDibRealize**](/windows/desktop/api/Vfw/nf-vfw-drawdibrealize) .</span><span class="sxs-lookup"><span data-stu-id="94f78-113">You can realize the current DrawDib palette to the DC by using the [**DrawDibRealize**](/windows/desktop/api/Vfw/nf-vfw-drawdibrealize) function.</span></span> <span data-ttu-id="94f78-114">È necessario realizzare la tavolozza in risposta al messaggio [**WM \_ QUERYNEWPALETTE**](/windows/desktop/gdi/wm-querynewpalette) o [**WM \_ PALETTECHANGED**](/windows/desktop/gdi/wm-palettechanged) oppure quando si prepara la visualizzazione di una sequenza di immagini tramite la funzione [**DrawDibDraw**](/windows/desktop/api/Vfw/nf-vfw-drawdibdraw) .</span><span class="sxs-lookup"><span data-stu-id="94f78-114">You should realize the palette in response to the [**WM\_QUERYNEWPALETTE**](/windows/desktop/gdi/wm-querynewpalette) or [**WM\_PALETTECHANGED**](/windows/desktop/gdi/wm-palettechanged) message, or when you prepare to display an image sequence by using the [**DrawDibDraw**](/windows/desktop/api/Vfw/nf-vfw-drawdibdraw) function.</span></span>

<span data-ttu-id="94f78-115">È possibile creare un'immagine mappata a un'altra tavolozza usando la funzione [**DrawDibSetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibsetpalette) .</span><span class="sxs-lookup"><span data-stu-id="94f78-115">You can draw an image mapped to another palette by using the [**DrawDibSetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibsetpalette) function.</span></span> <span data-ttu-id="94f78-116">Questa funzione forza il controller di dominio DrawDib a usare la tavolozza specificata, che può influire sulla qualità dell'immagine.</span><span class="sxs-lookup"><span data-stu-id="94f78-116">This function forces the DrawDib DC to use the specified palette, which can affect the image quality.</span></span> <span data-ttu-id="94f78-117">Ad esempio, un'applicazione che è in grado di riconoscere la tavolozza potrebbe avere realizzato una tavolozza ed è necessario impedire a DrawDib di realizzare la propria tavolozza.</span><span class="sxs-lookup"><span data-stu-id="94f78-117">For example, an application that is palette-aware might have realized a palette and needs to prevent DrawDib from realizing its own palette.</span></span> <span data-ttu-id="94f78-118">L'applicazione può usare **DrawDibSetPalette** per notificare a DrawDib la tavolozza da usare.</span><span class="sxs-lookup"><span data-stu-id="94f78-118">The application can use **DrawDibSetPalette** to notify DrawDib of the palette to use.</span></span>

<span data-ttu-id="94f78-119">È possibile ottenere un handle della tavolozza di primo piano corrente usando la funzione [**DrawDibGetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibgetpalette) .</span><span class="sxs-lookup"><span data-stu-id="94f78-119">You can obtain a handle of the current foreground palette by using the [**DrawDibGetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibgetpalette) function.</span></span> <span data-ttu-id="94f78-120">Se l'applicazione usa la tavolozza di primo piano corrente, non ha un utilizzo esclusivo della tavolozza e un'altra applicazione può invalidare l'handle della tavolozza.</span><span class="sxs-lookup"><span data-stu-id="94f78-120">If your application uses the current foreground palette, it does not have exclusive use of the palette and another application can invalidate the palette handle.</span></span> <span data-ttu-id="94f78-121">Quando si termina l'uso, l'applicazione non deve liberare la tavolozza.</span><span class="sxs-lookup"><span data-stu-id="94f78-121">Your application should not free the palette when you finish using it.</span></span> <span data-ttu-id="94f78-122">La possibilità di liberare la tavolozza potrebbe invalidare l'handle della tavolozza per un'altra applicazione.</span><span class="sxs-lookup"><span data-stu-id="94f78-122">Freeing the palette could invalidate the palette handle for another application.</span></span>

<span data-ttu-id="94f78-123">È possibile preparare DrawDib per ricevere nuovi valori di colore per la tavolozza usando la funzione [**DrawDibChangePalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibchangepalette) .</span><span class="sxs-lookup"><span data-stu-id="94f78-123">You can prepare DrawDib to receive new color values for its palette by using the [**DrawDibChangePalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibchangepalette) function.</span></span> <span data-ttu-id="94f78-124">Nel codice seguente **DrawDibChangePalette** vengono assegnati nuovi valori per la tabella dei colori della tavolozza.</span><span class="sxs-lookup"><span data-stu-id="94f78-124">In the code following **DrawDibChangePalette**, you assign new values for the palette color table.</span></span> <span data-ttu-id="94f78-125">Se il flag **DDF \_ animate** non è impostato nel controller di dominio DrawDib quando si chiama **DrawDibChangePalette**, è possibile applicare le modifiche della tavolozza usando [**DrawDibRealize**](/windows/desktop/api/Vfw/nf-vfw-drawdibrealize) per realizzare la tavolozza.</span><span class="sxs-lookup"><span data-stu-id="94f78-125">If the **DDF\_ANIMATE** flag is not set in the DrawDib DC when you call **DrawDibChangePalette**, you can enact the palette changes by using [**DrawDibRealize**](/windows/desktop/api/Vfw/nf-vfw-drawdibrealize) to realize the palette.</span></span> <span data-ttu-id="94f78-126">È quindi possibile usare [**DrawDibDraw**](/windows/desktop/api/Vfw/nf-vfw-drawdibdraw) per ricreare l'immagine.</span><span class="sxs-lookup"><span data-stu-id="94f78-126">You can then use [**DrawDibDraw**](/windows/desktop/api/Vfw/nf-vfw-drawdibdraw) to redraw the image.</span></span> <span data-ttu-id="94f78-127">Se nel controller di dominio DrawDib è impostato il flag **DDF \_ animate** , è possibile animare la tavolozza e i colori della bitmap visualizzata utilizzando **DrawDibDraw** o **DrawDibRealize**.</span><span class="sxs-lookup"><span data-stu-id="94f78-127">If the **DDF\_ANIMATE** flag is set in the DrawDib DC, you can animate the palette and the colors of the displayed bitmap by using **DrawDibDraw** or **DrawDibRealize**.</span></span> <span data-ttu-id="94f78-128">È possibile aggiornare il flag **DDF \_ animate** usando le funzioni [**DrawDibEnd**](/windows/desktop/api/Vfw/nf-vfw-drawdibend) e [**DrawDibBegin**](/windows/desktop/api/Vfw/nf-vfw-drawdibbegin) .</span><span class="sxs-lookup"><span data-stu-id="94f78-128">You can update the **DDF\_ANIMATE** flag by using the [**DrawDibEnd**](/windows/desktop/api/Vfw/nf-vfw-drawdibend) and [**DrawDibBegin**](/windows/desktop/api/Vfw/nf-vfw-drawdibbegin) functions.</span></span>

> [!Note]  
> <span data-ttu-id="94f78-129">Se si libera la tavolozza DrawDib mentre è selezionata da un controller di dominio, è possibile che venga generato un errore GDI (Graphics Device Interface) quando il controller di dominio usa la tavolozza.</span><span class="sxs-lookup"><span data-stu-id="94f78-129">If you free the DrawDib palette while it is selected by a DC, a graphics device interface (GDI) error can result when the DC uses the palette.</span></span> <span data-ttu-id="94f78-130">Al contrario, l'applicazione deve usare [**DrawDibSetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibsetpalette) per modificare il controller di dominio DrawDib per usare la tavolozza predefinita o un'altra tavolozza.</span><span class="sxs-lookup"><span data-stu-id="94f78-130">Instead, your application should use [**DrawDibSetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibsetpalette) to change the DrawDib DC to use the default palette or another palette.</span></span>

 

<span data-ttu-id="94f78-131">Le funzioni [**DrawDibEnd**](/windows/desktop/api/Vfw/nf-vfw-drawdibend), [**DrawDibClose**](/windows/desktop/api/Vfw/nf-vfw-drawdibclose)e [**DrawDibBegin**](/windows/desktop/api/Vfw/nf-vfw-drawdibbegin) possono liberare la tavolozza DrawDib.</span><span class="sxs-lookup"><span data-stu-id="94f78-131">The [**DrawDibEnd**](/windows/desktop/api/Vfw/nf-vfw-drawdibend), [**DrawDibClose**](/windows/desktop/api/Vfw/nf-vfw-drawdibclose), and [**DrawDibBegin**](/windows/desktop/api/Vfw/nf-vfw-drawdibbegin) functions can free the DrawDib palette.</span></span> <span data-ttu-id="94f78-132">Queste funzioni, tuttavia, devono essere utilizzate solo quando la tavolozza non è stata selezionata dal controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="94f78-132">However, these functions should be used only when the palette has not been selected by the DC.</span></span> <span data-ttu-id="94f78-133">La funzione DrawDibDraw può anche liberare la tavolozza quando usa lo stesso controller di dominio DrawDib, ma specifica parametri di disegno diversi (*lpbi*, *dxDst*, *dyDst*, *dxSrc* o *dySrc*) o un formato diverso.</span><span class="sxs-lookup"><span data-stu-id="94f78-133">The DrawDibDraw function can also free the palette when it uses the same DrawDib DC, but specifies different drawing parameters (*lpbi*, *dxDst*, *dyDst*, *dxSrc*, or *dySrc*) or a different format.</span></span>

## <a name="related-topics"></a><span data-ttu-id="94f78-134">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="94f78-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="94f78-135">Rendering di immagini</span><span class="sxs-lookup"><span data-stu-id="94f78-135">Image Rendering</span></span>](image-rendering.md)
</dt> </dl>

 

 