---
title: Funzionalità di disegno hardware
description: Funzionalità di disegno hardware
ms.assetid: 3a26de73-cb9e-41a0-8c33-a7cca7d6058e
keywords:
- Gestione compressione video (VCM), disegno
- VCM (Video Compression Manager), disegno
- ICGetInfo (funzione)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ba7d3af8beb7c4ac676e421fe10d427322470d14
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "104044815"
---
# <a name="hardware-drawing-capabilities"></a><span data-ttu-id="b96e6-106">Funzionalità di disegno hardware</span><span class="sxs-lookup"><span data-stu-id="b96e6-106">Hardware Drawing Capabilities</span></span>

<span data-ttu-id="b96e6-107">Alcuni renderer possono disegnare direttamente su hardware video quando decomprimeno i fotogrammi video.</span><span class="sxs-lookup"><span data-stu-id="b96e6-107">Some renderers can draw directly to video hardware as they decompress video frames.</span></span> <span data-ttu-id="b96e6-108">Questi renderer restituiscono il \_ flag di traccia VIDCF in risposta alla funzione [**ICGetInfo**](/windows/desktop/api/Vfw/nf-vfw-icgetinfo) .</span><span class="sxs-lookup"><span data-stu-id="b96e6-108">These renderers return the VIDCF\_DRAW flag in response to the [**ICGetInfo**](/windows/desktop/api/Vfw/nf-vfw-icgetinfo) function.</span></span> <span data-ttu-id="b96e6-109">Quando si usa questo tipo di renderer, l'applicazione non deve gestire i dati decompressi.</span><span class="sxs-lookup"><span data-stu-id="b96e6-109">When using this type of renderer, your application does not have to handle the decompressed data.</span></span> <span data-ttu-id="b96e6-110">Consente al renderer di conservare i dati decompressi per il disegno.</span><span class="sxs-lookup"><span data-stu-id="b96e6-110">It lets the renderer retain the decompressed data for drawing.</span></span>

<span data-ttu-id="b96e6-111">Se l'applicazione utilizza un renderer con funzionalità di disegno, deve gestire le attività seguenti:</span><span class="sxs-lookup"><span data-stu-id="b96e6-111">If your application uses a renderer with drawing capabilities, it must handle the following tasks:</span></span>

-   <span data-ttu-id="b96e6-112">Selezionare un renderer.</span><span class="sxs-lookup"><span data-stu-id="b96e6-112">Select a renderer.</span></span>
-   <span data-ttu-id="b96e6-113">Specificare i formati di immagine.</span><span class="sxs-lookup"><span data-stu-id="b96e6-113">Specify image formats.</span></span>
-   <span data-ttu-id="b96e6-114">Inizializzare il renderer.</span><span class="sxs-lookup"><span data-stu-id="b96e6-114">Initialize the renderer.</span></span>
-   <span data-ttu-id="b96e6-115">Creare i dati.</span><span class="sxs-lookup"><span data-stu-id="b96e6-115">Draw the data.</span></span>
-   <span data-ttu-id="b96e6-116">Parametri di disegno del controllo.</span><span class="sxs-lookup"><span data-stu-id="b96e6-116">Control drawing parameters.</span></span>

## <a name="renderer-selection"></a><span data-ttu-id="b96e6-117">Selezione renderer</span><span class="sxs-lookup"><span data-stu-id="b96e6-117">Renderer Selection</span></span>

<span data-ttu-id="b96e6-118">La macro [**ICDrawOpen**](/windows/desktop/api/Vfw/nf-vfw-icdrawopen) apre un renderer che può creare immagini con il formato specificato.</span><span class="sxs-lookup"><span data-stu-id="b96e6-118">The [**ICDrawOpen**](/windows/desktop/api/Vfw/nf-vfw-icdrawopen) macro opens a renderer that can draw images with the specified format.</span></span> <span data-ttu-id="b96e6-119">Restituisce un handle di un renderer se ha esito positivo oppure zero in caso contrario.</span><span class="sxs-lookup"><span data-stu-id="b96e6-119">It returns a handle of a renderer if it is successful, or zero otherwise.</span></span> <span data-ttu-id="b96e6-120">Questa macro usa la funzione [**ICLocate**](/windows/desktop/api/Vfw/nf-vfw-iclocate) per aprire il renderer.</span><span class="sxs-lookup"><span data-stu-id="b96e6-120">This macro uses the [**ICLocate**](/windows/desktop/api/Vfw/nf-vfw-iclocate) function to open the renderer.</span></span>

## <a name="specifying-image-formats"></a><span data-ttu-id="b96e6-121">Specifica di formati di immagine</span><span class="sxs-lookup"><span data-stu-id="b96e6-121">Specifying Image Formats</span></span>

<span data-ttu-id="b96e6-122">Poiché non è necessario che l'applicazione disegni i dati decompressi, non richiede un formato di output specifico.</span><span class="sxs-lookup"><span data-stu-id="b96e6-122">Because your application does not need to draw the decompressed data, it does not require a specific output format.</span></span> <span data-ttu-id="b96e6-123">Tuttavia, deve verificare che il renderer possa creare usando il formato di input usando il messaggio di [**\_ \_ query di estrazione ICM**](icm-draw-query.md) (oppure usare la macro [**ICDrawQuery**](/windows/desktop/api/Vfw/nf-vfw-icdrawquery) ).</span><span class="sxs-lookup"><span data-stu-id="b96e6-123">It must, however, ensure that the renderer can draw using the input format by using the [**ICM\_DRAW\_QUERY**](icm-draw-query.md) message (or use the [**ICDrawQuery**](/windows/desktop/api/Vfw/nf-vfw-icdrawquery) macro).</span></span> <span data-ttu-id="b96e6-124">Questo messaggio non può determinare se un renderer può creare una bitmap.</span><span class="sxs-lookup"><span data-stu-id="b96e6-124">This message cannot determine if a renderer can draw a bitmap.</span></span> <span data-ttu-id="b96e6-125">Se l'applicazione deve determinare se il renderer è in grado di creare la bitmap, utilizzare questo messaggio con la funzione [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) .</span><span class="sxs-lookup"><span data-stu-id="b96e6-125">If your application must determine if the renderer can draw the bitmap, use this message with the [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) function.</span></span>

<span data-ttu-id="b96e6-126">L'applicazione può avere un renderer che suggerisce un formato di input tramite la funzione [**ICDrawSuggestFormat**](/windows/desktop/api/Vfw/nf-vfw-icdrawsuggestformat) .</span><span class="sxs-lookup"><span data-stu-id="b96e6-126">Your application can have a renderer suggest an input format by using the [**ICDrawSuggestFormat**](/windows/desktop/api/Vfw/nf-vfw-icdrawsuggestformat) function.</span></span> <span data-ttu-id="b96e6-127">Questa funzione viene utilizzata quando un renderer separa le funzionalità di disegno dalle funzionalità di decompressione.</span><span class="sxs-lookup"><span data-stu-id="b96e6-127">This function is used when a renderer separates the drawing capabilities from the decompressing capabilities.</span></span> <span data-ttu-id="b96e6-128">La maggior parte delle applicazioni che utilizzano le funzioni di disegno non dovrà determinare il formato di output.</span><span class="sxs-lookup"><span data-stu-id="b96e6-128">Most applications using the drawing functions will not need to determine the output format.</span></span>

## <a name="renderer-initialization"></a><span data-ttu-id="b96e6-129">Inizializzazione del renderer</span><span class="sxs-lookup"><span data-stu-id="b96e6-129">Renderer Initialization</span></span>

<span data-ttu-id="b96e6-130">La funzione [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) Inizializza un renderer e ne indica la destinazione del disegno.</span><span class="sxs-lookup"><span data-stu-id="b96e6-130">The [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) function initializes a renderer and tells it the drawing destination.</span></span> <span data-ttu-id="b96e6-131">Questa funzione può inoltre eseguire le attività seguenti:</span><span class="sxs-lookup"><span data-stu-id="b96e6-131">This function can also perform the following tasks:</span></span>

-   <span data-ttu-id="b96e6-132">Determinare se il renderer supporta un formato di input specifico.</span><span class="sxs-lookup"><span data-stu-id="b96e6-132">Determine whether the renderer supports a specific input format.</span></span>
-   <span data-ttu-id="b96e6-133">Consente di specificare se l'operazione di disegno occupa una finestra o l'intera schermata.</span><span class="sxs-lookup"><span data-stu-id="b96e6-133">Specify whether the drawing operation occupies a window or the entire screen.</span></span>
-   <span data-ttu-id="b96e6-134">Consente di specificare la parte dell'immagine da visualizzare utilizzando il rettangolo di origine.</span><span class="sxs-lookup"><span data-stu-id="b96e6-134">Specify the part of the image to display using the source rectangle.</span></span>
-   <span data-ttu-id="b96e6-135">Definire la velocità di riproduzione della sequenza di immagini.</span><span class="sxs-lookup"><span data-stu-id="b96e6-135">Define the playback rate of the image sequence.</span></span>

<span data-ttu-id="b96e6-136">Alcuni renderer memorizzano nel buffer i dati compressi per operare in modo più efficiente.</span><span class="sxs-lookup"><span data-stu-id="b96e6-136">Some renderers buffer the compressed data to operate more efficiently.</span></span> <span data-ttu-id="b96e6-137">L'applicazione può inviare il [**messaggio \_ GETBUFFERSWANTED MCI**](icm-getbufferswanted.md) (oppure usare la macro [**ICGetBuffersWanted**](/windows/desktop/api/Vfw/nf-vfw-icgetbufferswanted) ) per determinare il numero di buffer richiesti dal renderer.</span><span class="sxs-lookup"><span data-stu-id="b96e6-137">Your application can send the [**ICM\_GETBUFFERSWANTED**](icm-getbufferswanted.md) message (or use the [**ICGetBuffersWanted**](/windows/desktop/api/Vfw/nf-vfw-icgetbufferswanted) macro) to determine the number of buffers the renderer requests.</span></span> <span data-ttu-id="b96e6-138">L'applicazione deve precaricare questi buffer e inviarli al renderer prima del disegno.</span><span class="sxs-lookup"><span data-stu-id="b96e6-138">Your application should preload these buffers and send them to the renderer before drawing.</span></span>

## <a name="drawing-the-data"></a><span data-ttu-id="b96e6-139">Disegno dei dati</span><span class="sxs-lookup"><span data-stu-id="b96e6-139">Drawing the Data</span></span>

<span data-ttu-id="b96e6-140">È possibile utilizzare la funzione [**ICDraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) per decomprimere i dati per il disegno.</span><span class="sxs-lookup"><span data-stu-id="b96e6-140">You can use the [**ICDraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) function to decompress the data for drawing.</span></span> <span data-ttu-id="b96e6-141">Il renderer, tuttavia, non avvia il disegno dei dati fino a quando l'applicazione non invia il messaggio di [**\_ \_ avvio di disegno ICM**](icm-draw-start.md) (o usa la macro [**ICDrawStart**](/windows/desktop/api/Vfw/nf-vfw-icdrawstart) ).</span><span class="sxs-lookup"><span data-stu-id="b96e6-141">The renderer, however, does not start drawing data until your application sends the [**ICM\_DRAW\_START**](icm-draw-start.md) message (or uses the [**ICDrawStart**](/windows/desktop/api/Vfw/nf-vfw-icdrawstart) macro).</span></span> <span data-ttu-id="b96e6-142">Quando l'applicazione chiama questa funzione, il renderer inizia a creare i frame alla velocità specificata dal parametro *dwRate* diviso per il parametro *dwScale* . questi parametri sono stati specificati quando l'applicazione ha inizializzato il renderer tramite la funzione [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) .</span><span class="sxs-lookup"><span data-stu-id="b96e6-142">When your application calls this function, the renderer begins to draw the frames at the rate specified by the *dwRate* parameter divided by the *dwScale* parameter; these parameters were supplied when the application initialized the renderer by using the [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) function.</span></span> <span data-ttu-id="b96e6-143">Il disegno continua fino a quando l'applicazione non invia il messaggio di [**\_ \_ arresto di disegno ICM**](icm-draw-stop.md) (o usa la macro [**ICDrawStop**](/windows/desktop/api/Vfw/nf-vfw-icdrawstop) ).</span><span class="sxs-lookup"><span data-stu-id="b96e6-143">Drawing continues until your application sends the [**ICM\_DRAW\_STOP**](icm-draw-stop.md) message (or uses the [**ICDrawStop**](/windows/desktop/api/Vfw/nf-vfw-icdrawstop) macro).</span></span>

> [!Note]  
> <span data-ttu-id="b96e6-144">Se un renderer memorizza nel buffer i dati prima del disegno, l'applicazione non deve usare la macro **ICDrawStart** fino a quando non ha inviato il numero di frame restituiti dal renderer per la macro **ICGetBuffersWanted** .</span><span class="sxs-lookup"><span data-stu-id="b96e6-144">If a renderer buffers the data before drawing, your application should not use the **ICDrawStart** macro until it has sent the number of frames the renderer returned for the **ICGetBuffersWanted** macro.</span></span>

 

<span data-ttu-id="b96e6-145">Il parametro *ltime* di [**ICDraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) specifica l'ora in cui creare un frame.</span><span class="sxs-lookup"><span data-stu-id="b96e6-145">The *lTime* parameter of [**ICDraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) specifies the time to draw a frame.</span></span> <span data-ttu-id="b96e6-146">Il renderer divide questo Integer per la scala temporale specificata con [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) per ottenere il tempo effettivo.</span><span class="sxs-lookup"><span data-stu-id="b96e6-146">The renderer divides this integer by the time scale specified with [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) to obtain the actual time.</span></span> <span data-ttu-id="b96e6-147">I tempi per le funzioni **ICDraw** sono relativi a **ICDrawStart**.</span><span class="sxs-lookup"><span data-stu-id="b96e6-147">Times for **ICDraw** functions are relative to **ICDrawStart**.</span></span> <span data-ttu-id="b96e6-148">**ICDrawStart** imposta l'orologio su zero.</span><span class="sxs-lookup"><span data-stu-id="b96e6-148">**ICDrawStart** sets the clock to zero.</span></span> <span data-ttu-id="b96e6-149">Se, ad esempio, l'applicazione specifica 1000 per la scala temporale e 75 per *ltime*, il renderer disegna il frame 75 millisecondi nella sequenza.</span><span class="sxs-lookup"><span data-stu-id="b96e6-149">For example, if your application specifies 1000 for the time scale and 75 for *lTime*, the renderer draws the frame 75 milliseconds into the sequence.</span></span>

## <a name="controlling-drawing-parameters"></a><span data-ttu-id="b96e6-150">Controllo dei parametri di disegno</span><span class="sxs-lookup"><span data-stu-id="b96e6-150">Controlling Drawing Parameters</span></span>

<span data-ttu-id="b96e6-151">È possibile monitorare l'orologio di un renderer inviando il messaggio di [**\_ \_ tempo di richiamo di ICM**](icm-draw-gettime.md) (o usare la macro [**ICDrawGetTime**](/windows/desktop/api/Vfw/nf-vfw-icdrawgettime) ) ed è possibile impostare l'orologio di un renderer che può creare dati inviando il messaggio di [**\_ \_ tempo**](icm-draw-settime.md) di indicizzazione ICM (o usare la macro [**ICDrawSetTime**](/windows/desktop/api/Vfw/nf-vfw-icdrawsettime) ).</span><span class="sxs-lookup"><span data-stu-id="b96e6-151">You can monitor the clock of a renderer by sending the [**ICM\_DRAW\_GETTIME**](icm-draw-gettime.md) message (or use the [**ICDrawGetTime**](/windows/desktop/api/Vfw/nf-vfw-icdrawgettime) macro), and you can set the clock of a renderer that can draw data by sending the [**ICM\_DRAW\_SETTIME**](icm-draw-settime.md) message (or use the [**ICDrawSetTime**](/windows/desktop/api/Vfw/nf-vfw-icdrawsettime) macro).</span></span>

<span data-ttu-id="b96e6-152">Per modificare la posizione corrente durante il disegno di un renderer, l'applicazione può inviare il messaggio della [**\_ \_ finestra di disegno ICM**](icm-draw-window.md) (o usare la macro [**ICDrawWindow**](/windows/desktop/api/Vfw/nf-vfw-icdrawwindow) ) per riposizionare la finestra.</span><span class="sxs-lookup"><span data-stu-id="b96e6-152">To change the current position while a renderer is drawing, your application can send the [**ICM\_DRAW\_WINDOW**](icm-draw-window.md) message (or use the [**ICDrawWindow**](/windows/desktop/api/Vfw/nf-vfw-icdrawwindow) macro) for repositioning the window.</span></span> <span data-ttu-id="b96e6-153">Le applicazioni in genere usano questo messaggio ogni volta che viene modificata la finestra.</span><span class="sxs-lookup"><span data-stu-id="b96e6-153">Applications typically use this message whenever the window changes.</span></span>

<span data-ttu-id="b96e6-154">Se la finestra di riproduzione ottiene un messaggio della tavolozza di realizzo, l'applicazione deve inviare il messaggio di [**\_ progetto \_ MCI**](icm-draw-realize.md) (o usare la macro [**ICDrawRealize**](/windows/desktop/api/Vfw/nf-vfw-icdrawrealize) ) per fare in modo che il renderer realizzi nuovamente la tavolozza per la riproduzione.</span><span class="sxs-lookup"><span data-stu-id="b96e6-154">If the playback window gets a realize-palette message, your application must send the [**ICM\_DRAW\_REALIZE**](icm-draw-realize.md) message (or use the [**ICDrawRealize**](/windows/desktop/api/Vfw/nf-vfw-icdrawrealize) macro) to have the renderer realize the palette again for playback.</span></span> <span data-ttu-id="b96e6-155">Le applicazioni possono modificare la tavolozza inviando il messaggio di [**\_ \_ CHANGEPALETTE**](icm-draw-changepalette.md) (o usare la macro [**ICDrawChangePalette**](/windows/desktop/api/Vfw/nf-vfw-icdrawchangepalette) ) e ottenere la tavolozza corrente inviando il messaggio per la [**\_ \_ \_ tavolozza di estrazione di ICM**](icm-draw-get-palette.md) .</span><span class="sxs-lookup"><span data-stu-id="b96e6-155">Applications can change the palette by sending the [**ICM\_DRAW\_CHANGEPALETTE**](icm-draw-changepalette.md) message (or use the [**ICDrawChangePalette**](/windows/desktop/api/Vfw/nf-vfw-icdrawchangepalette) macro) and obtain the current palette by sending the [**ICM\_DRAW\_GET\_PALETTE**](icm-draw-get-palette.md) message.</span></span>

<span data-ttu-id="b96e6-156">Per alcuni renderer è necessario indicare in modo specifico di visualizzare i frame passati.</span><span class="sxs-lookup"><span data-stu-id="b96e6-156">Some renderers must be specifically instructed to display frames passed to them.</span></span> <span data-ttu-id="b96e6-157">Se si invia il messaggio [**\_ \_ RENDERBUFFER**](icm-draw-renderbuffer.md) (o si usa la macro [**ICDrawRenderBuffer**](/windows/desktop/api/Vfw/nf-vfw-icdrawrenderbuffer) ), i renderer devono disegnare il frame.</span><span class="sxs-lookup"><span data-stu-id="b96e6-157">Sending the [**ICM\_DRAW\_RENDERBUFFER**](icm-draw-renderbuffer.md) message (or use the [**ICDrawRenderBuffer**](/windows/desktop/api/Vfw/nf-vfw-icdrawrenderbuffer) macro) causes these renderers to draw the frame.</span></span>

 

 




