---
title: Dispositivi e tipi di dati
description: Dispositivi e tipi di dati
ms.assetid: 46247983-19c3-4c7a-a615-ba6cd8bd3289
keywords:
- audio waveform, apertura di dispositivi di output
- interfaccia waveform-audio, apertura di dispositivi di output
- apertura di dispositivi di output audio-waveform
- audio waveform, esecuzione di query su dispositivi di output
- interfaccia waveform-audio, esecuzione di query sui dispositivi di output
- esecuzione di query su dispositivi di output audio-waveform
- audio waveform, handle di dispositivo
- interfaccia waveform-audio, handle di dispositivo
- audio waveform, identificatori di dispositivo
- interfaccia waveform-audio, identificatori di dispositivo
- audio waveform, tipi di dati di output
- interfaccia waveform-audio, tipi di dati di output
- audio waveform, formati di dati
- interfaccia waveform-audio, formati di dati
- scrittura di dati audio waveform
- audio waveform, scrittura di dati
- interfaccia audio-forma d'onda, scrittura di dati
- Dati audio waveform PCM
- audio waveform, dati PCM
- interfaccia audio waveform,dati PCM
- audio waveform, chiusura di dispositivi di output
- interfaccia waveform-audio, chiusura di dispositivi di output
- chiusura di dispositivi di output audio-forma d'onda
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2abe0c2c20c52f4498316fb619885d41f85e41d6
ms.sourcegitcommit: b32433cc0394159c7263809ae67615ab5792d40d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/30/2021
ms.locfileid: "113120246"
---
# <a name="devices-and-data-types"></a><span data-ttu-id="ea774-126">Dispositivi e tipi di dati</span><span class="sxs-lookup"><span data-stu-id="ea774-126">Devices and Data Types</span></span>

<span data-ttu-id="ea774-127">Questa sezione descrive l'uso dei dispositivi audio waveform e include informazioni su come aprirli, chiuderli ed eseguire query per le relative funzionalità.</span><span class="sxs-lookup"><span data-stu-id="ea774-127">This section describes working with waveform-audio devices, and includes information on how to open, close and query them for their capabilities.</span></span> <span data-ttu-id="ea774-128">Descrive anche come tenere traccia dei dispositivi in un sistema usando handle di dispositivo e identificatori di dispositivo.</span><span class="sxs-lookup"><span data-stu-id="ea774-128">It also describes how to keep track of the devices in a system by using device handles and device identifiers.</span></span>

## <a name="opening-waveform-audio-output-devices"></a><span data-ttu-id="ea774-129">Apertura Waveform-Audio di output</span><span class="sxs-lookup"><span data-stu-id="ea774-129">Opening Waveform-Audio Output Devices</span></span>

<span data-ttu-id="ea774-130">Usare la [**funzione waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) per aprire un dispositivo di output audio-forma d'onda per la riproduzione.</span><span class="sxs-lookup"><span data-stu-id="ea774-130">Use the [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) function to open a waveform-audio output device for playback.</span></span> <span data-ttu-id="ea774-131">Questa funzione apre il dispositivo associato all'identificatore di dispositivo specificato e restituisce un handle del dispositivo aperto scrivendo l'handle di un percorso di memoria specificato.</span><span class="sxs-lookup"><span data-stu-id="ea774-131">This function opens the device associated with the specified device identifier and returns a handle of the open device by writing the handle of a specified memory location.</span></span>

<span data-ttu-id="ea774-132">Alcuni computer multimediali hanno più dispositivi di output audio waveform.</span><span class="sxs-lookup"><span data-stu-id="ea774-132">Some multimedia computers have multiple waveform-audio output devices.</span></span> <span data-ttu-id="ea774-133">A meno che non si voglia aprire un dispositivo di output audio-forma d'onda specifico in un sistema, è necessario usare il flag WAVE MAPPER per l'identificatore di dispositivo quando si \_ apre un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="ea774-133">Unless you want to open a specific waveform-audio output device in a system, you should use the WAVE\_MAPPER flag for the device identifier when you open a device.</span></span> <span data-ttu-id="ea774-134">La **funzione waveOutOpen** sceglie il dispositivo nel sistema in grado di riprodurre al meglio il formato dati specificato.</span><span class="sxs-lookup"><span data-stu-id="ea774-134">The **waveOutOpen** function chooses the device in the system that is best able to play the specified data format.</span></span>

## <a name="querying-audio-devices"></a><span data-ttu-id="ea774-135">Esecuzione di query su dispositivi audio</span><span class="sxs-lookup"><span data-stu-id="ea774-135">Querying Audio Devices</span></span>

<span data-ttu-id="ea774-136">Windows offre le funzioni seguenti per determinare il numero di dispositivi di un determinato tipo disponibili in un sistema.</span><span class="sxs-lookup"><span data-stu-id="ea774-136">Windows provides the following functions to determine how many devices of a certain type are available in a system.</span></span>



| <span data-ttu-id="ea774-137">Funzione</span><span class="sxs-lookup"><span data-stu-id="ea774-137">Function</span></span>                                       | <span data-ttu-id="ea774-138">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ea774-138">Description</span></span>                                                                  |
|------------------------------------------------|------------------------------------------------------------------------------|
| [<span data-ttu-id="ea774-139">**auxGetNumDevs**</span><span class="sxs-lookup"><span data-stu-id="ea774-139">**auxGetNumDevs**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-auxgetnumdevs)         | <span data-ttu-id="ea774-140">Recupera il numero di dispositivi di output ausiliari presenti nel sistema.</span><span class="sxs-lookup"><span data-stu-id="ea774-140">Retrieves the number of auxiliary output devices present in the system.</span></span>      |
| [<span data-ttu-id="ea774-141">**waveInGetNumDevs**</span><span class="sxs-lookup"><span data-stu-id="ea774-141">**waveInGetNumDevs**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveingetnumdevs)   | <span data-ttu-id="ea774-142">Recupera il numero di dispositivi di input audio-forma d'onda presenti nel sistema.</span><span class="sxs-lookup"><span data-stu-id="ea774-142">Retrieves the number of waveform-audio input devices present in the system.</span></span>  |
| [<span data-ttu-id="ea774-143">**waveOutGetNumDevs**</span><span class="sxs-lookup"><span data-stu-id="ea774-143">**waveOutGetNumDevs**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetnumdevs) | <span data-ttu-id="ea774-144">Recupera il numero di dispositivi di output audio-waveform presenti nel sistema.</span><span class="sxs-lookup"><span data-stu-id="ea774-144">Retrieves the number of waveform-audio output devices present in the system.</span></span> |



 

<span data-ttu-id="ea774-145">I dispositivi audio sono identificati da un identificatore di dispositivo.</span><span class="sxs-lookup"><span data-stu-id="ea774-145">Audio devices are identified by a device identifier.</span></span> <span data-ttu-id="ea774-146">L'identificatore del dispositivo viene determinato in modo implicito dal numero di dispositivi presenti in un sistema.</span><span class="sxs-lookup"><span data-stu-id="ea774-146">The device identifier is determined implicitly from the number of devices present in a system.</span></span> <span data-ttu-id="ea774-147">Gli identificatori dei dispositivi sono da zero a uno in meno rispetto al numero di dispositivi presenti.</span><span class="sxs-lookup"><span data-stu-id="ea774-147">Device identifiers range from zero to one less than the number of devices present.</span></span> <span data-ttu-id="ea774-148">Ad esempio, se in un sistema sono presenti due dispositivi di output audio-waveform, gli identificatori di dispositivo validi sono 0 e 1.</span><span class="sxs-lookup"><span data-stu-id="ea774-148">For example, if there are two waveform-audio output devices in a system, valid device identifiers are 0 and 1.</span></span>

<span data-ttu-id="ea774-149">Dopo aver determinato il numero di dispositivi di un determinato tipo presenti in un sistema, è possibile usare una delle funzioni seguenti per eseguire query sulle funzionalità di ogni dispositivo.</span><span class="sxs-lookup"><span data-stu-id="ea774-149">After you determine how many devices of a certain type are present in a system, you can use one of the following functions to query the capabilities of each device.</span></span>



| <span data-ttu-id="ea774-150">Funzione</span><span class="sxs-lookup"><span data-stu-id="ea774-150">Function</span></span>                                       | <span data-ttu-id="ea774-151">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ea774-151">Description</span></span>                                                             |
|------------------------------------------------|-------------------------------------------------------------------------|
| [<span data-ttu-id="ea774-152">**auxGetDevCaps**</span><span class="sxs-lookup"><span data-stu-id="ea774-152">**auxGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-auxgetdevcaps)         | <span data-ttu-id="ea774-153">Recupera le funzionalità di un dispositivo di output ausiliario specificato.</span><span class="sxs-lookup"><span data-stu-id="ea774-153">Retrieves the capabilities of a specified auxiliary output device.</span></span>      |
| [<span data-ttu-id="ea774-154">**waveInGetDevCaps**</span><span class="sxs-lookup"><span data-stu-id="ea774-154">**waveInGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveingetdevcaps)   | <span data-ttu-id="ea774-155">Recupera le funzionalità di un dispositivo di input audio-forma d'onda specificato.</span><span class="sxs-lookup"><span data-stu-id="ea774-155">Retrieves the capabilities of a specified waveform-audio input device.</span></span>  |
| [<span data-ttu-id="ea774-156">**waveOutGetDevCaps**</span><span class="sxs-lookup"><span data-stu-id="ea774-156">**waveOutGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetdevcaps) | <span data-ttu-id="ea774-157">Recupera le funzionalità di un dispositivo di output audio-forma d'onda specificato.</span><span class="sxs-lookup"><span data-stu-id="ea774-157">Retrieves the capabilities of a specified waveform-audio output device.</span></span> |



 

<span data-ttu-id="ea774-158">Ognuna di queste funzioni riempie una struttura con informazioni sulle funzionalità di un dispositivo specificato.</span><span class="sxs-lookup"><span data-stu-id="ea774-158">Each of these functions fills a structure with information about the capabilities of a specified device.</span></span> <span data-ttu-id="ea774-159">Nella tabella seguente sono elencate le strutture che corrispondono a ognuna di queste funzioni.</span><span class="sxs-lookup"><span data-stu-id="ea774-159">The following table lists the structures that correspond to each of these functions.</span></span>



|  <span data-ttu-id="ea774-160">Funzione</span><span class="sxs-lookup"><span data-stu-id="ea774-160">Function</span></span>                                              |  <span data-ttu-id="ea774-161">Struttura</span><span class="sxs-lookup"><span data-stu-id="ea774-161">Structure</span></span>                                  |
|------------------------------------------------|------------------------------------|
| [<span data-ttu-id="ea774-162">**auxGetDevCaps**</span><span class="sxs-lookup"><span data-stu-id="ea774-162">**auxGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-auxgetdevcaps)         | [<span data-ttu-id="ea774-163">**AUXCAPS**</span><span class="sxs-lookup"><span data-stu-id="ea774-163">**AUXCAPS**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-auxcaps)         |
| [<span data-ttu-id="ea774-164">**waveInGetDevCaps**</span><span class="sxs-lookup"><span data-stu-id="ea774-164">**waveInGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveingetdevcaps)   | [<span data-ttu-id="ea774-165">**WAVEINCAPS**</span><span class="sxs-lookup"><span data-stu-id="ea774-165">**WAVEINCAPS**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-waveincaps)   |
| [<span data-ttu-id="ea774-166">**waveOutGetDevCaps**</span><span class="sxs-lookup"><span data-stu-id="ea774-166">**waveOutGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetdevcaps) | [<span data-ttu-id="ea774-167">**WAVEOUTCAPS**</span><span class="sxs-lookup"><span data-stu-id="ea774-167">**WAVEOUTCAPS**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-waveoutcaps) |



 

<span data-ttu-id="ea774-168">I formati standard sono **elencati nel membro dwFormats** della **struttura WAVEOUTCAPS.**</span><span class="sxs-lookup"><span data-stu-id="ea774-168">Standard formats are listed in the **dwFormats** member of the **WAVEOUTCAPS** structure.</span></span> <span data-ttu-id="ea774-169">I dispositivi audio Waveform possono supportare formati non standard.</span><span class="sxs-lookup"><span data-stu-id="ea774-169">Waveform-audio devices can support nonstandard formats.</span></span> <span data-ttu-id="ea774-170">Per determinare se un particolare formato (standard o non standard) è supportato da un dispositivo, è possibile chiamare la funzione [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) con il flag WAVE \_ FORMAT \_ QUERY.</span><span class="sxs-lookup"><span data-stu-id="ea774-170">To determine whether a particular format (standard or nonstandard) is supported by a device, you can call the [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) function with the WAVE\_FORMAT\_QUERY flag.</span></span> <span data-ttu-id="ea774-171">Questo flag non apre il dispositivo.</span><span class="sxs-lookup"><span data-stu-id="ea774-171">This flag does not open the device.</span></span> <span data-ttu-id="ea774-172">Specificare il formato in questione nella struttura [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) a cui punta il *parametro pwfx* passato **a waveOutOpen.**</span><span class="sxs-lookup"><span data-stu-id="ea774-172">You specify the format in question in the [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) structure pointed to by the *pwfx* parameter passed to **waveOutOpen**.</span></span>

<span data-ttu-id="ea774-173">I dispositivi di output audio waveform variano in base alle funzionalità supportate.</span><span class="sxs-lookup"><span data-stu-id="ea774-173">Waveform-audio output devices vary in the capabilities they support.</span></span> <span data-ttu-id="ea774-174">Il **membro dwSupport** della struttura [**WAVEOUTCAPS**](/windows/win32/api/mmeapi/ns-mmeapi-waveoutcaps) indica se un dispositivo supporta funzionalità come le modifiche al volume e al passo.</span><span class="sxs-lookup"><span data-stu-id="ea774-174">The **dwSupport** member of the [**WAVEOUTCAPS**](/windows/win32/api/mmeapi/ns-mmeapi-waveoutcaps) structure indicates whether a device supports such capabilities as volume and pitch changes.</span></span>

## <a name="device-handles-and-device-identifiers"></a><span data-ttu-id="ea774-175">Handle di dispositivo e identificatori di dispositivo</span><span class="sxs-lookup"><span data-stu-id="ea774-175">Device Handles and Device Identifiers</span></span>

<span data-ttu-id="ea774-176">Ogni funzione che apre un dispositivo audio specifica un identificatore di dispositivo, un puntatore a una posizione di memoria e alcuni parametri univoci per ogni tipo di dispositivo.</span><span class="sxs-lookup"><span data-stu-id="ea774-176">Each function that opens an audio device specifies a device identifier, a pointer to a memory location, and some parameters that are unique to each type of device.</span></span> <span data-ttu-id="ea774-177">La posizione di memoria viene riempita con un handle di dispositivo.</span><span class="sxs-lookup"><span data-stu-id="ea774-177">The memory location is filled with a device handle.</span></span> <span data-ttu-id="ea774-178">Usare questo handle di dispositivo per identificare il dispositivo audio aperto quando si chiamano altre funzioni audio.</span><span class="sxs-lookup"><span data-stu-id="ea774-178">Use this device handle to identify the open audio device when calling other audio functions.</span></span>

<span data-ttu-id="ea774-179">La differenza tra identificatori e handle per i dispositivi audio è sottile ma importante:</span><span class="sxs-lookup"><span data-stu-id="ea774-179">The difference between identifiers and handles for audio devices is subtle but important:</span></span>

-   <span data-ttu-id="ea774-180">Gli identificatori di dispositivo vengono determinati in modo implicito dal numero di dispositivi presenti in un sistema.</span><span class="sxs-lookup"><span data-stu-id="ea774-180">Device identifiers are determined implicitly from the number of devices present in a system.</span></span> <span data-ttu-id="ea774-181">Questo numero viene ottenuto usando la [**funzione auxGetNumDevs,**](/windows/win32/api/mmeapi/nf-mmeapi-auxgetnumdevs) [**waveInGetNumDevs**](/windows/win32/api/mmeapi/nf-mmeapi-waveingetnumdevs)o [**waveOutGetNumDevs.**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetnumdevs)</span><span class="sxs-lookup"><span data-stu-id="ea774-181">This number is obtained by using the [**auxGetNumDevs**](/windows/win32/api/mmeapi/nf-mmeapi-auxgetnumdevs), [**waveInGetNumDevs**](/windows/win32/api/mmeapi/nf-mmeapi-waveingetnumdevs), or [**waveOutGetNumDevs**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetnumdevs) function.</span></span>
-   <span data-ttu-id="ea774-182">Gli handle di dispositivo vengono restituiti quando i driver di dispositivo vengono aperti tramite la [**funzione waveInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveinopen) o [**waveOutOpen.**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen)</span><span class="sxs-lookup"><span data-stu-id="ea774-182">Device handles are returned when device drivers are opened by using the [**waveInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveinopen) or [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) function.</span></span>

<span data-ttu-id="ea774-183">Non sono disponibili funzioni che aprono o chiudono i dispositivi audio ausiliari.</span><span class="sxs-lookup"><span data-stu-id="ea774-183">There are no functions that open or close auxiliary audio devices.</span></span> <span data-ttu-id="ea774-184">I dispositivi audio ausiliari non devono essere aperti e chiusi come dispositivi audio waveform perché non è associato alcun trasferimento dati continuo.</span><span class="sxs-lookup"><span data-stu-id="ea774-184">Auxiliary audio devices need not be opened and closed like waveform-audio devices because there is no continuous data transfer associated with them.</span></span> <span data-ttu-id="ea774-185">Tutte le funzioni audio ausiliarie usano gli identificatori di dispositivo per identificare i dispositivi.</span><span class="sxs-lookup"><span data-stu-id="ea774-185">All auxiliary audio functions use device identifiers to identify devices.</span></span>

## <a name="waveform-audio-output-data-types"></a><span data-ttu-id="ea774-186">Waveform-Audio di dati di output</span><span class="sxs-lookup"><span data-stu-id="ea774-186">Waveform-Audio Output Data Types</span></span>

<span data-ttu-id="ea774-187">I tipi di dati seguenti sono definiti per le funzioni di output audio-forma d'onda.</span><span class="sxs-lookup"><span data-stu-id="ea774-187">The following data types are defined for waveform-audio output functions.</span></span>



| <span data-ttu-id="ea774-188">Tipo</span><span class="sxs-lookup"><span data-stu-id="ea774-188">Type</span></span>                                 | <span data-ttu-id="ea774-189">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ea774-189">Description</span></span>                                                                                                                                                   |
|--------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ea774-190">**HWAVEOUT**</span><span class="sxs-lookup"><span data-stu-id="ea774-190">**HWAVEOUT**</span></span>                         | <span data-ttu-id="ea774-191">Handle per un dispositivo di output audio waveform aperto.</span><span class="sxs-lookup"><span data-stu-id="ea774-191">Handle to an open waveform-audio output device.</span></span>                                                                                                               |
| [<span data-ttu-id="ea774-192">**WAVEFORMATEX**</span><span class="sxs-lookup"><span data-stu-id="ea774-192">**WAVEFORMATEX**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) | <span data-ttu-id="ea774-193">Struttura che specifica i formati di dati supportati da un particolare dispositivo di input audio-forma d'onda.</span><span class="sxs-lookup"><span data-stu-id="ea774-193">Structure that specifies the data formats supported by a particular waveform-audio input device.</span></span> <span data-ttu-id="ea774-194">Questa struttura viene usata anche per i dispositivi di input audio-forma d'onda.</span><span class="sxs-lookup"><span data-stu-id="ea774-194">This structure is also usedfor waveform-audio input devices.</span></span> |
| [<span data-ttu-id="ea774-195">**WAVEHDR**</span><span class="sxs-lookup"><span data-stu-id="ea774-195">**WAVEHDR**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-wavehdr)           | <span data-ttu-id="ea774-196">Struttura utilizzata come intestazione per un blocco di dati di input audio-forma d'onda.</span><span class="sxs-lookup"><span data-stu-id="ea774-196">Structure used as a header for a block of waveform-audio input data.</span></span> <span data-ttu-id="ea774-197">Questa struttura viene usata anche per i dispositivi di input audio-forma d'onda.</span><span class="sxs-lookup"><span data-stu-id="ea774-197">This structure is also used for waveform-audio input devices.</span></span>                            |
| [<span data-ttu-id="ea774-198">**WAVEOUTCAPS**</span><span class="sxs-lookup"><span data-stu-id="ea774-198">**WAVEOUTCAPS**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-waveoutcaps)   | <span data-ttu-id="ea774-199">Struttura usata per eseguire query sulle funzionalità di un particolare dispositivo di output audio-forma d'onda.</span><span class="sxs-lookup"><span data-stu-id="ea774-199">Structure used to query the capabilities of a particular waveform-audio output device.</span></span>                                                                        |



 

## <a name="specifying-waveform-audio-data-formats"></a><span data-ttu-id="ea774-200">Specifica di Waveform-Audio dati personalizzati</span><span class="sxs-lookup"><span data-stu-id="ea774-200">Specifying Waveform-Audio Data Formats</span></span>

<span data-ttu-id="ea774-201">Quando si chiama la funzione [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) per aprire un driver di dispositivo per la riproduzione o per verificare se il driver supporta un particolare formato dati, usare il parametro *pwfx* per specificare un puntatore a una struttura [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) contenente il formato dati audio waveform richiesto.</span><span class="sxs-lookup"><span data-stu-id="ea774-201">When you call the [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) function to open a device driver for playback or to query whether the driver supports a particular data format, use the *pwfx* parameter to specify a pointer to a [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) structure containing the requested waveform-audio data format.</span></span> <span data-ttu-id="ea774-202">**WAVEFORMATEX** sostituisce le [**strutture WAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-waveformat) e [**PCMWAVEFORMAT.**](/windows/win32/api/mmreg/ns-mmreg-pcmwaveformat)</span><span class="sxs-lookup"><span data-stu-id="ea774-202">**WAVEFORMATEX** supersedes the [**WAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-waveformat) and [**PCMWAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-pcmwaveformat) structures.</span></span>

<span data-ttu-id="ea774-203">Per i dati audio separati in più di due canali o con una dimensione del campione diversa da un multiplo di 8, è consigliabile usare [**WAVEFORMATEXTENSIBLE.**](/windows/win32/api/mmreg/ns-mmreg-waveformatextensible)</span><span class="sxs-lookup"><span data-stu-id="ea774-203">For audio data that is separated into more than two channels or has a sample size that is not a multiple of 8, you should use [**WAVEFORMATEXTENSIBLE**](/windows/win32/api/mmreg/ns-mmreg-waveformatextensible).</span></span> <span data-ttu-id="ea774-204">Questa struttura configura semplicemente i byte aggiuntivi a cui punta il membro **cbSize** di **WAVEFORMATEX** per fornire informazioni aggiuntive sul formato.</span><span class="sxs-lookup"><span data-stu-id="ea774-204">This structure simply configures the extra bytes pointed to by the **cbSize** member of **WAVEFORMATEX** to give extra information about the format.</span></span> <span data-ttu-id="ea774-205">È possibile eseguire il cast di **WAVEFORMATEXTENSIBLE** come **WAVEFORMATEX.**</span><span class="sxs-lookup"><span data-stu-id="ea774-205">**WAVEFORMATEXTENSIBLE** can be cast as **WAVEFORMATEX**.</span></span>

<span data-ttu-id="ea774-206">Esistono anche due formati di Appunti che è possibile usare per rappresentare i dati audio: CF \_ WAVE e CF \_ RIFF.</span><span class="sxs-lookup"><span data-stu-id="ea774-206">There are also two clipboard formats you can use to represent audio data: CF\_WAVE and CF\_RIFF.</span></span> <span data-ttu-id="ea774-207">Usare il formato CF WAVE per rappresentare i dati in uno dei formati standard, ad esempio PCM a \_ 11 o 22 kHz.</span><span class="sxs-lookup"><span data-stu-id="ea774-207">Use the CF\_WAVE format to represent data in one of the standard formats, such as 11 kHz or 22 kHz PCM.</span></span> <span data-ttu-id="ea774-208">Usare il formato RIFF CF per rappresentare formati di dati più \_ complessi che non possono essere rappresentati come file audio waveform standard.</span><span class="sxs-lookup"><span data-stu-id="ea774-208">Use the CF\_RIFF format to represent more complex data formats that cannot be represented as standard waveform-audio files.</span></span>

## <a name="writing-waveform-audio-data"></a><span data-ttu-id="ea774-209">Scrittura Waveform-Audio dati</span><span class="sxs-lookup"><span data-stu-id="ea774-209">Writing Waveform-Audio Data</span></span>

<span data-ttu-id="ea774-210">Dopo aver aperto correttamente un driver di dispositivo di output audio-forma d'onda, è possibile iniziare a riprodurre un suono.</span><span class="sxs-lookup"><span data-stu-id="ea774-210">After successfully opening a waveform-audio output device driver, you can begin playing a sound.</span></span> <span data-ttu-id="ea774-211">Windows fornisce la [**funzione waveOutWrite**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutwrite) per l'invio di blocchi di dati ai dispositivi di output audio waveform.</span><span class="sxs-lookup"><span data-stu-id="ea774-211">Windows provides the [**waveOutWrite**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutwrite) function for sending data blocks to waveform-audio output devices.</span></span>

<span data-ttu-id="ea774-212">Usare la [**struttura WAVEHDR**](/windows/win32/api/mmeapi/ns-mmeapi-wavehdr) per specificare il blocco di dati audio-forma d'onda che si sta inviando usando **waveOutWrite.**</span><span class="sxs-lookup"><span data-stu-id="ea774-212">Use the [**WAVEHDR**](/windows/win32/api/mmeapi/ns-mmeapi-wavehdr) structure to specify the waveform-audio data block you are sending using **waveOutWrite**.</span></span> <span data-ttu-id="ea774-213">Questa struttura contiene un puntatore a un blocco di dati bloccato, la lunghezza del blocco di dati e alcuni flag.</span><span class="sxs-lookup"><span data-stu-id="ea774-213">This structure contains a pointer to a locked data block, the length of the data block, and some flags.</span></span> <span data-ttu-id="ea774-214">Questo blocco di dati deve essere preparato prima di usarlo. Per informazioni sulla preparazione di un blocco di dati, vedere [Blocchi di dati audio.](audio-data-blocks.md)</span><span class="sxs-lookup"><span data-stu-id="ea774-214">This data block must be prepared before you use it; for information about preparing a data block, see [Audio Data Blocks](audio-data-blocks.md).</span></span>

<span data-ttu-id="ea774-215">Dopo aver inviato un blocco di dati a un dispositivo di output usando **waveOutWrite,** è necessario attendere il completamento del blocco di dati da parte del driver di dispositivo prima di liberarlo.</span><span class="sxs-lookup"><span data-stu-id="ea774-215">After you send a data block to an output device by using **waveOutWrite**, you must wait until the device driver is finished with the data block before freeing it.</span></span> <span data-ttu-id="ea774-216">Se si inviano più blocchi di dati, è necessario monitorare il completamento dei blocchi di dati per sapere quando inviare blocchi aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="ea774-216">If you are sending multiple data blocks, you must monitor the completion of data blocks to know when to send additional blocks.</span></span> <span data-ttu-id="ea774-217">Per altre informazioni sui blocchi di dati, vedere [Blocchi di dati audio.](audio-data-blocks.md)</span><span class="sxs-lookup"><span data-stu-id="ea774-217">For more information about data blocks, see [Audio Data Blocks](audio-data-blocks.md).</span></span>

## <a name="pcm-waveform-audio-data-format"></a><span data-ttu-id="ea774-218">Formato dati Waveform-Audio PCM</span><span class="sxs-lookup"><span data-stu-id="ea774-218">PCM Waveform-Audio Data Format</span></span>

<span data-ttu-id="ea774-219">Il **membro lpData** della struttura [**WAVEHDR**](/windows/win32/api/mmeapi/ns-mmeapi-wavehdr) punta agli esempi di dati audio della forma d'onda.</span><span class="sxs-lookup"><span data-stu-id="ea774-219">The **lpData** member of the [**WAVEHDR**](/windows/win32/api/mmeapi/ns-mmeapi-wavehdr) structure pointsetts to the waveform-audio data samples.</span></span> <span data-ttu-id="ea774-220">Per i dati PCM a 8 bit, ogni campione è rappresentato da un singolo byte di dati senza segno.</span><span class="sxs-lookup"><span data-stu-id="ea774-220">For 8-bit PCM data, each sample is represented by a single unsigned data byte.</span></span> <span data-ttu-id="ea774-221">Per i dati PCM a 16 bit, ogni campione è rappresentato da un valore con segno a 16 bit.</span><span class="sxs-lookup"><span data-stu-id="ea774-221">For 16-bit PCM data, each sample is represented by a 16-bit signed value.</span></span> <span data-ttu-id="ea774-222">La tabella seguente riepiloga i valori massimo, minimo e medio per i dati audio della forma d'onda PCM.</span><span class="sxs-lookup"><span data-stu-id="ea774-222">The following table summarizes the maximum, minimum, and midpoint values for PCM waveform-audio data.</span></span>



| <span data-ttu-id="ea774-223">Formato dati</span><span class="sxs-lookup"><span data-stu-id="ea774-223">Data format</span></span> | <span data-ttu-id="ea774-224">Valore massimo</span><span class="sxs-lookup"><span data-stu-id="ea774-224">Maximum value</span></span>   | <span data-ttu-id="ea774-225">Valore minimo</span><span class="sxs-lookup"><span data-stu-id="ea774-225">Minimum value</span></span>    | <span data-ttu-id="ea774-226">Valore punto medio</span><span class="sxs-lookup"><span data-stu-id="ea774-226">Midpoint value</span></span> |
|-------------|-----------------|------------------|----------------|
| <span data-ttu-id="ea774-227">PCM a 8 bit</span><span class="sxs-lookup"><span data-stu-id="ea774-227">8-bit PCM</span></span>   | <span data-ttu-id="ea774-228">255 (0xFF)</span><span class="sxs-lookup"><span data-stu-id="ea774-228">255 (0xFF)</span></span>      | <span data-ttu-id="ea774-229">0</span><span class="sxs-lookup"><span data-stu-id="ea774-229">0</span></span>                | <span data-ttu-id="ea774-230">128 (0x80)</span><span class="sxs-lookup"><span data-stu-id="ea774-230">128 (0x80)</span></span>     |
| <span data-ttu-id="ea774-231">PCM a 16 bit</span><span class="sxs-lookup"><span data-stu-id="ea774-231">16-bit PCM</span></span>  | <span data-ttu-id="ea774-232">32.767 (0x7FFF)</span><span class="sxs-lookup"><span data-stu-id="ea774-232">32,767 (0x7FFF)</span></span> | <span data-ttu-id="ea774-233">–32.768 (0x8000)</span><span class="sxs-lookup"><span data-stu-id="ea774-233">–32,768 (0x8000)</span></span> | <span data-ttu-id="ea774-234">0</span><span class="sxs-lookup"><span data-stu-id="ea774-234">0</span></span>              |



 

## <a name="pcm-data-packing"></a><span data-ttu-id="ea774-235">Pacchetto di dati PCM</span><span class="sxs-lookup"><span data-stu-id="ea774-235">PCM Data Packing</span></span>

<span data-ttu-id="ea774-236">L'ordine dei byte di dati varia tra i formati a 8 bit e a 16 bit e tra i formati mono e stereo.</span><span class="sxs-lookup"><span data-stu-id="ea774-236">The order of the data bytes varies between 8-bit and 16-bit formats and between mono and stereo formats.</span></span> <span data-ttu-id="ea774-237">L'elenco seguente descrive la creazione di un pacchetto di dati per i diversi formati di dati audio-forma d'onda PCM.</span><span class="sxs-lookup"><span data-stu-id="ea774-237">The following list describes data packing for the different PCM waveform-audio data formats.</span></span>



| <span data-ttu-id="ea774-238">Formato audio waveform PCM</span><span class="sxs-lookup"><span data-stu-id="ea774-238">PCM waveform-audio format</span></span> | <span data-ttu-id="ea774-239">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ea774-239">Description</span></span>                                                                                                                                                                                                                                                                                                                                     |
|---------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ea774-240">Mono a 8 bit</span><span class="sxs-lookup"><span data-stu-id="ea774-240">8-bit mono</span></span>                | <span data-ttu-id="ea774-241">Ogni campione è di 1 byte che corrisponde a un singolo canale audio.</span><span class="sxs-lookup"><span data-stu-id="ea774-241">Each sample is 1 byte that corresponds to a single audio channel.</span></span> <span data-ttu-id="ea774-242">L'esempio 1 è seguito dagli esempi 2, 3, 4 e così via.</span><span class="sxs-lookup"><span data-stu-id="ea774-242">Sample 1 is followed by samples 2, 3, 4, and so on.</span></span>                                                                                                                                                                                                                           |
| <span data-ttu-id="ea774-243">Stereo a 8 bit</span><span class="sxs-lookup"><span data-stu-id="ea774-243">8-bit stereo</span></span>              | <span data-ttu-id="ea774-244">Ogni campione è di 2 byte.</span><span class="sxs-lookup"><span data-stu-id="ea774-244">Each sample is 2 bytes.</span></span> <span data-ttu-id="ea774-245">L'esempio 1 è seguito dagli esempi 2, 3, 4 e così via.</span><span class="sxs-lookup"><span data-stu-id="ea774-245">Sample 1 is followed by samples 2, 3, 4, and so on.</span></span> <span data-ttu-id="ea774-246">Per ogni esempio, il primo byte è il canale 0 (il canale sinistro) e il secondo byte è il canale 1 (il canale destro).</span><span class="sxs-lookup"><span data-stu-id="ea774-246">For each sample, the first byte is channel 0 (the left channel) and the second byte is channel 1 (the right channel).</span></span>                                                                                                                                               |
| <span data-ttu-id="ea774-247">Mono a 16 bit</span><span class="sxs-lookup"><span data-stu-id="ea774-247">16-bit mono</span></span>               | <span data-ttu-id="ea774-248">Ogni campione è di 2 byte.</span><span class="sxs-lookup"><span data-stu-id="ea774-248">Each sample is 2 bytes.</span></span> <span data-ttu-id="ea774-249">L'esempio 1 è seguito dagli esempi 2, 3, 4 e così via.</span><span class="sxs-lookup"><span data-stu-id="ea774-249">Sample 1 is followed by samples 2, 3, 4, and so on.</span></span> <span data-ttu-id="ea774-250">Per ogni campione, il primo byte è il byte di ordine più basso del canale 0 e il secondo byte è il byte più significativo del canale 0.</span><span class="sxs-lookup"><span data-stu-id="ea774-250">For each sample, the first byte is the low-order byte of channel 0 and the second byte is the high-order byte of channel 0.</span></span>                                                                                                                                         |
| <span data-ttu-id="ea774-251">Stereo a 16 bit</span><span class="sxs-lookup"><span data-stu-id="ea774-251">16-bit stereo</span></span>             | <span data-ttu-id="ea774-252">Ogni campione è di 4 byte.</span><span class="sxs-lookup"><span data-stu-id="ea774-252">Each sample is 4 bytes.</span></span> <span data-ttu-id="ea774-253">L'esempio 1 è seguito dagli esempi 2, 3, 4 e così via.</span><span class="sxs-lookup"><span data-stu-id="ea774-253">Sample 1 is followed by samples 2, 3, 4, and so on.</span></span> <span data-ttu-id="ea774-254">Per ogni esempio, il primo byte è il byte di ordine inferiore del canale 0 (canale sinistro); il secondo byte è il byte più significativo del canale 0; il terzo byte è il byte di ordine inferiore del canale 1 (canale destro); e il quarto byte è il byte più significativo del canale 1.</span><span class="sxs-lookup"><span data-stu-id="ea774-254">For each sample, the first byte is the low-order byte of channel 0 (left channel); the second byte is the high-order byte of channel 0; the third byte is the low-order byte of channel 1 (right channel); and the fourth byte is the high-order byte of channel 1.</span></span> |
| <span data-ttu-id="ea774-255">Altro</span><span class="sxs-lookup"><span data-stu-id="ea774-255">Others</span></span>                    | <span data-ttu-id="ea774-256">Ogni campione è contenuto in un blocco che è un multiplo di 4 byte, ma i campioni possono essere non allineati a byte.</span><span class="sxs-lookup"><span data-stu-id="ea774-256">Each sample is contained in a block that is a multiple of 4 bytes, but the samples may be non-byte-aligned.</span></span> <span data-ttu-id="ea774-257">La disposizione dei canali è specificata da una maschera.</span><span class="sxs-lookup"><span data-stu-id="ea774-257">The arrangement of channels is specified by a mask.</span></span> <span data-ttu-id="ea774-258">Per altre informazioni, vedere [**WAVEFORMATEXTENSIBLE.**](/windows/win32/api/mmreg/ns-mmreg-waveformatextensible)</span><span class="sxs-lookup"><span data-stu-id="ea774-258">For more information, see [**WAVEFORMATEXTENSIBLE**](/windows/win32/api/mmreg/ns-mmreg-waveformatextensible).</span></span>                                                                                                 |



 

## <a name="closing-waveform-audio-output-devices"></a><span data-ttu-id="ea774-259">Chiusura Waveform-Audio di output</span><span class="sxs-lookup"><span data-stu-id="ea774-259">Closing Waveform-Audio Output Devices</span></span>

<span data-ttu-id="ea774-260">Al termine della riproduzione audio waveform, chiamare [**waveOutClose**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutclose) per chiudere il dispositivo di output.</span><span class="sxs-lookup"><span data-stu-id="ea774-260">After waveform-audio playback is complete, call [**waveOutClose**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutclose) to close the output device.</span></span> <span data-ttu-id="ea774-261">Se **waveOutClose viene** chiamato durante la riproduzione di un file audio waveform, l'operazione di chiusura ha esito negativo e la funzione restituisce un codice di errore che indica che il dispositivo non è stato chiuso.</span><span class="sxs-lookup"><span data-stu-id="ea774-261">If **waveOutClose** is called while a waveform-audio file is playing, the close operation fails and the function returns an error code indicating that the device was not closed.</span></span> <span data-ttu-id="ea774-262">Se non si vuole attendere la fine della riproduzione prima di chiudere il dispositivo, chiamare la funzione [**waveOutReset**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutreset) prima della chiusura.</span><span class="sxs-lookup"><span data-stu-id="ea774-262">If you do not want to wait for playback to end before closing the device, call the [**waveOutReset**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutreset) function before closing.</span></span> <span data-ttu-id="ea774-263">Questa operazione termina la riproduzione e consente la chiusura del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="ea774-263">This ends playback and allows the device to be closed.</span></span> <span data-ttu-id="ea774-264">Assicurarsi di usare la funzione [**waveOutUnprepareHeader**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutunprepareheader) per pulire la preparazione in tutti i blocchi di dati prima di chiudere il dispositivo.</span><span class="sxs-lookup"><span data-stu-id="ea774-264">Be sure to use the [**waveOutUnprepareHeader**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutunprepareheader) function to clean up the preparation on all data blocks before closing the device.</span></span>

 

 