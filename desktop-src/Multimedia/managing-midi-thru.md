---
title: Gestione di MIDI Thru
description: Gestione di MIDI Thru
ms.assetid: ba03a2a1-d998-498d-ad53-027ba2b6e276
keywords:
- Digital Instrumental Interface (MIDI), thru driver
- MIDI (Musical Instrument Digital Interface), thru driver
- registrazione audio MIDI, driver thru
- Driver MIDI Thru
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 24214dd3f6cd13ca034b2555398f6055e4ce2da1
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/19/2020
ms.locfileid: "103956389"
---
# <a name="managing-midi-thru"></a><span data-ttu-id="7178b-107">Gestione di MIDI Thru</span><span class="sxs-lookup"><span data-stu-id="7178b-107">Managing MIDI Thru</span></span>

<span data-ttu-id="7178b-108">È possibile connettere un dispositivo di input MIDI direttamente a un dispositivo di output MIDI, in modo che quando il dispositivo di input riceve un messaggio di [**\_ dati MIM**](mim-data.md) , il sistema invia un messaggio con gli stessi dati di evento MIDI al driver di dispositivo di output.</span><span class="sxs-lookup"><span data-stu-id="7178b-108">You can connect a MIDI input device directly to a MIDI output device so that when the input device receives an [**MIM\_DATA**](mim-data.md) message, the system sends a message with the same MIDI event data to the output device driver.</span></span> <span data-ttu-id="7178b-109">Per connettere un dispositivo di output MIDI a un dispositivo di input MIDI, usare la funzione [**midiConnect**](/windows/win32/api/mmeapi/nf-mmeapi-midiconnect) .</span><span class="sxs-lookup"><span data-stu-id="7178b-109">To connect a MIDI output device to a MIDI input device, use the [**midiConnect**](/windows/win32/api/mmeapi/nf-mmeapi-midiconnect) function.</span></span>

<span data-ttu-id="7178b-110">Per ottenere le migliori prestazioni possibili con più output, un'applicazione può scegliere di fornire un modulo speciale di driver di output MIDI, denominato *driver thru*.</span><span class="sxs-lookup"><span data-stu-id="7178b-110">To achieve the best possible performance with multiple outputs, an application can choose to supply a special form of MIDI output driver, called a *thru driver*.</span></span> <span data-ttu-id="7178b-111">Sebbene il sistema consenta la connessione di un solo dispositivo di output MIDI a un dispositivo di input MIDI, è possibile connettere più dispositivi di output MIDI a un driver thru.</span><span class="sxs-lookup"><span data-stu-id="7178b-111">Although the system allows only one MIDI output device to be connected to a MIDI input device, multiple MIDI output devices can be connected to a thru driver.</span></span> <span data-ttu-id="7178b-112">Un'applicazione in un sistema di questo tipo potrebbe connettere il dispositivo di input MIDI a questo dispositivo tramite e connettere il dispositivo MIDI Thru a tutti i dispositivi di output MIDI necessari.</span><span class="sxs-lookup"><span data-stu-id="7178b-112">An application on such a system could connect the MIDI input device to this thru device and connect the MIDI thru device to as many MIDI output devices as needed.</span></span> <span data-ttu-id="7178b-113">Per ulteriori informazioni sui driver thru, vedere la documentazione di Windows Device-driver.</span><span class="sxs-lookup"><span data-stu-id="7178b-113">For more information about thru drivers, see the Windows device-driver documentation.</span></span>

## <a name="using-messages-to-manage-midi-recording"></a><span data-ttu-id="7178b-114">Uso dei messaggi per gestire la registrazione MIDI</span><span class="sxs-lookup"><span data-stu-id="7178b-114">Using Messages to Manage MIDI Recording</span></span>

<span data-ttu-id="7178b-115">I messaggi seguenti possono essere inviati a una procedura di callback di finestra o di thread per la gestione della registrazione MIDI.</span><span class="sxs-lookup"><span data-stu-id="7178b-115">The following messages can be sent to a window or thread callback procedure for managing MIDI recording.</span></span>



| <span data-ttu-id="7178b-116">Valore</span><span class="sxs-lookup"><span data-stu-id="7178b-116">Value</span></span>                                          | <span data-ttu-id="7178b-117">Significato</span><span class="sxs-lookup"><span data-stu-id="7178b-117">Meaning</span></span>                                                                                                                                |
|------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="7178b-118">**MM \_ di \_ chiusura MIM**</span><span class="sxs-lookup"><span data-stu-id="7178b-118">**MM\_MIM\_CLOSE**</span></span>](mm-mim-close.md)         | <span data-ttu-id="7178b-119">Inviato quando un dispositivo di input MIDI viene chiuso tramite la funzione [**midiInClose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) .</span><span class="sxs-lookup"><span data-stu-id="7178b-119">Sent when a MIDI input device is closed by using the [**midiInClose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) function.</span></span>                                      |
| [<span data-ttu-id="7178b-120">**\_dati MIM \_ mm**</span><span class="sxs-lookup"><span data-stu-id="7178b-120">**MM\_MIM\_DATA**</span></span>](mm-mim-data.md)           | <span data-ttu-id="7178b-121">Inviato quando viene ricevuto un messaggio MIDI completo.</span><span class="sxs-lookup"><span data-stu-id="7178b-121">Sent when a complete MIDI message is received.</span></span> <span data-ttu-id="7178b-122">(Questo messaggio viene usato per tutti i messaggi MIDI ad eccezione dei messaggi esclusivi del sistema).</span><span class="sxs-lookup"><span data-stu-id="7178b-122">(This message is used for all MIDI messages except system-exclusive messages.)</span></span>          |
| [<span data-ttu-id="7178b-123">**\_errore MIM \_ mm**</span><span class="sxs-lookup"><span data-stu-id="7178b-123">**MM\_MIM\_ERROR**</span></span>](mm-mim-error.md)         | <span data-ttu-id="7178b-124">Inviato quando viene ricevuto un messaggio MIDI non valido.</span><span class="sxs-lookup"><span data-stu-id="7178b-124">Sent when an invalid MIDI message is received.</span></span> <span data-ttu-id="7178b-125">(Questo messaggio viene usato per tutti i messaggi MIDI ad eccezione dei messaggi esclusivi del sistema).</span><span class="sxs-lookup"><span data-stu-id="7178b-125">(This message is used for all MIDI messages except system-exclusive messages.)</span></span>          |
| [<span data-ttu-id="7178b-126">**\_LONGDATA MIM \_ mm**</span><span class="sxs-lookup"><span data-stu-id="7178b-126">**MM\_MIM\_LONGDATA**</span></span>](mm-mim-longdata.md)   | <span data-ttu-id="7178b-127">Inviato quando viene ricevuto un messaggio esclusivo del sistema MIDI completo o quando un buffer è stato riempito con dati esclusivi del sistema.</span><span class="sxs-lookup"><span data-stu-id="7178b-127">Sent when either a complete MIDI system-exclusive message is received or when a buffer has been filled with system-exclusive data.</span></span>     |
| [<span data-ttu-id="7178b-128">**\_LONGERROR MIM \_ mm**</span><span class="sxs-lookup"><span data-stu-id="7178b-128">**MM\_MIM\_LONGERROR**</span></span>](mm-mim-longerror.md) | <span data-ttu-id="7178b-129">Inviato quando viene ricevuto un messaggio esclusivo del sistema MIDI non valido.</span><span class="sxs-lookup"><span data-stu-id="7178b-129">Sent when an invalid MIDI system-exclusive message is received.</span></span>                                                                        |
| [<span data-ttu-id="7178b-130">**\_MOREDATA MIM \_ mm**</span><span class="sxs-lookup"><span data-stu-id="7178b-130">**MM\_MIM\_MOREDATA**</span></span>](mm-mim-moredata.md)   | <span data-ttu-id="7178b-131">Inviato quando un'applicazione non elabora i messaggi di [**\_ dati MIM**](mim-data.md) abbastanza rapidamente da restare al passo con il driver di dispositivo di input.</span><span class="sxs-lookup"><span data-stu-id="7178b-131">Sent when an application is not processing [**MIM\_DATA**](mim-data.md) messages fast enough to keep up with the input device driver.</span></span> |
| [<span data-ttu-id="7178b-132">**\_apertura MIM \_ mm**</span><span class="sxs-lookup"><span data-stu-id="7178b-132">**MM\_MIM\_OPEN**</span></span>](mm-mim-open.md)           | <span data-ttu-id="7178b-133">Inviato quando un dispositivo di input MIDI viene aperto tramite la funzione [**midiInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) .</span><span class="sxs-lookup"><span data-stu-id="7178b-133">Sent when a MIDI input device is opened by using the [**midiInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) function.</span></span>                                        |



 

<span data-ttu-id="7178b-134">Un parametro *wParam* e un parametro *lParam* sono associati a ognuno di questi messaggi.</span><span class="sxs-lookup"><span data-stu-id="7178b-134">A *wParam* parameter and an *lParam* parameter are associated with each of these messages.</span></span> <span data-ttu-id="7178b-135">Il parametro *wParam* specifica sempre l'handle di un dispositivo MIDI aperto.</span><span class="sxs-lookup"><span data-stu-id="7178b-135">The *wParam* parameter always specifies the handle of an open MIDI device.</span></span> <span data-ttu-id="7178b-136">Il parametro *lParam* non è usato per i messaggi aperti di [**mm \_ MIM \_ Close**](mm-mim-close.md) e [**mm \_ MIM \_**](mm-mim-open.md) .</span><span class="sxs-lookup"><span data-stu-id="7178b-136">The *lParam* parameter is unused for the [**MM\_MIM\_CLOSE**](mm-mim-close.md) and [**MM\_MIM\_OPEN**](mm-mim-open.md) messages.</span></span>

<span data-ttu-id="7178b-137">Per il [**messaggio \_ \_ LONGDATA MIM mm**](mm-mim-longdata.md) , *lpMidiHdr* specifica un indirizzo di una struttura [**MIDIHDR**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) che identifica il buffer per i messaggi esclusivi del sistema.</span><span class="sxs-lookup"><span data-stu-id="7178b-137">For the [**MM\_MIM\_LONGDATA**](mm-mim-longdata.md) message, *lpMidiHdr* specifies an address of a [**MIDIHDR**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) structure that identifies the buffer for system-exclusive messages.</span></span> <span data-ttu-id="7178b-138">Il buffer non può essere riempito completamente, perché la dimensione dei messaggi esclusivi del sistema non è in genere nota prima di essere registrata e perché i buffer le cui dimensioni totali possono contenere il messaggio massimo previsto devono essere allocati.</span><span class="sxs-lookup"><span data-stu-id="7178b-138">The buffer may not be completely filled, because the size of the system-exclusive messages is usually not known before being recorded and because buffers whose total size can contain the largest expected message must be allocated.</span></span> <span data-ttu-id="7178b-139">Per determinare la quantità di dati validi presenti nel buffer, usare il membro **dwBytesRecorded** della struttura **MIDIHDR** .</span><span class="sxs-lookup"><span data-stu-id="7178b-139">To determine the amount of valid data present in the buffer, use the **dwBytesRecorded** member of the **MIDIHDR** structure.</span></span>

## <a name="using-a-callback-function-to-manage-midi-recording"></a><span data-ttu-id="7178b-140">Uso di una funzione di callback per gestire la registrazione MIDI</span><span class="sxs-lookup"><span data-stu-id="7178b-140">Using a Callback Function to Manage MIDI Recording</span></span>

<span data-ttu-id="7178b-141">È possibile definire una funzione di callback personalizzata per gestire la registrazione per i dispositivi di input MIDI.</span><span class="sxs-lookup"><span data-stu-id="7178b-141">You can define your own callback function to manage recording for MIDI input devices.</span></span> <span data-ttu-id="7178b-142">La funzione di callback è documentata come [**MidiInProc**](/previous-versions//dd798460(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="7178b-142">The callback function is documented as [**MidiInProc**](/previous-versions//dd798460(v=vs.85)).</span></span>

<span data-ttu-id="7178b-143">I messaggi seguenti possono essere inviati al parametro *wmsg* della funzione di callback **MidiInProc** .</span><span class="sxs-lookup"><span data-stu-id="7178b-143">The following messages can be sent to the *wMsg* parameter of the **MidiInProc** callback function.</span></span>



| <span data-ttu-id="7178b-144">Valore</span><span class="sxs-lookup"><span data-stu-id="7178b-144">Value</span></span>                                   | <span data-ttu-id="7178b-145">Significato</span><span class="sxs-lookup"><span data-stu-id="7178b-145">Meaning</span></span>                                                                                                                                |
|-----------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="7178b-146">**\_chiusura MIM**</span><span class="sxs-lookup"><span data-stu-id="7178b-146">**MIM\_CLOSE**</span></span>](mim-close.md)         | <span data-ttu-id="7178b-147">Inviato quando il dispositivo viene chiuso tramite la funzione [**midiInClose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) .</span><span class="sxs-lookup"><span data-stu-id="7178b-147">Sent when the device is closed by using the [**midiInClose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) function.</span></span>                                               |
| [<span data-ttu-id="7178b-148">**\_dati MIM**</span><span class="sxs-lookup"><span data-stu-id="7178b-148">**MIM\_DATA**</span></span>](mim-data.md)           | <span data-ttu-id="7178b-149">Inviato quando viene ricevuto un messaggio MIDI completo (questo messaggio viene usato per tutti i messaggi MIDI ad eccezione dei messaggi esclusivi del sistema).</span><span class="sxs-lookup"><span data-stu-id="7178b-149">Sent when a complete MIDI message is received (this message is used for all MIDI messages except system-exclusive messages).</span></span>           |
| [<span data-ttu-id="7178b-150">**\_errore MIM**</span><span class="sxs-lookup"><span data-stu-id="7178b-150">**MIM\_ERROR**</span></span>](mim-error.md)         | <span data-ttu-id="7178b-151">Inviato quando viene ricevuto un messaggio MIDI non valido (questo messaggio viene usato per tutti i messaggi MIDI ad eccezione dei messaggi esclusivi del sistema).</span><span class="sxs-lookup"><span data-stu-id="7178b-151">Sent when an invalid MIDI message is received (this message is used for all MIDI messages except system-exclusive messages).</span></span>           |
| [<span data-ttu-id="7178b-152">**\_LONGDATA MIM**</span><span class="sxs-lookup"><span data-stu-id="7178b-152">**MIM\_LONGDATA**</span></span>](mim-longdata.md)   | <span data-ttu-id="7178b-153">Inviato quando viene ricevuto un messaggio esclusivo del sistema MIDI completo o quando un buffer è stato riempito con dati esclusivi del sistema.</span><span class="sxs-lookup"><span data-stu-id="7178b-153">Sent when either a complete MIDI system-exclusive message is received or when a buffer has been filled with system-exclusive data.</span></span>     |
| [<span data-ttu-id="7178b-154">**\_LONGERROR MIM**</span><span class="sxs-lookup"><span data-stu-id="7178b-154">**MIM\_LONGERROR**</span></span>](mim-longerror.md) | <span data-ttu-id="7178b-155">Inviato quando viene ricevuto un messaggio esclusivo del sistema MIDI non valido.</span><span class="sxs-lookup"><span data-stu-id="7178b-155">Sent when an invalid MIDI system-exclusive message is received.</span></span>                                                                        |
| [<span data-ttu-id="7178b-156">**\_MOREDATA MIM**</span><span class="sxs-lookup"><span data-stu-id="7178b-156">**MIM\_MOREDATA**</span></span>](mim-moredata.md)   | <span data-ttu-id="7178b-157">Inviato quando un'applicazione non elabora i messaggi di [**\_ dati MIM**](mim-data.md) abbastanza rapidamente da restare al passo con il driver di dispositivo di input.</span><span class="sxs-lookup"><span data-stu-id="7178b-157">Sent when an application is not processing [**MIM\_DATA**](mim-data.md) messages fast enough to keep up with the input device driver.</span></span> |
| [<span data-ttu-id="7178b-158">**MIM \_ aperto**</span><span class="sxs-lookup"><span data-stu-id="7178b-158">**MIM\_OPEN**</span></span>](mim-open.md)           | <span data-ttu-id="7178b-159">Inviato quando il dispositivo di input MIDI viene aperto tramite la funzione [**midiInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) .</span><span class="sxs-lookup"><span data-stu-id="7178b-159">Sent when the MIDI input device is opened by using the [**midiInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) function.</span></span>                                      |



 

<span data-ttu-id="7178b-160">Questi messaggi sono simili a quelli inviati alle funzioni di routine della finestra, ma i parametri sono diversi.</span><span class="sxs-lookup"><span data-stu-id="7178b-160">These messages are similar to those sent to window procedure functions, but the parameters are different.</span></span> <span data-ttu-id="7178b-161">Un handle del dispositivo MIDI aperto viene passato come parametro alla funzione di callback, insieme al parola doppia dei dati dell'istanza passati usando **midiInOpen**.</span><span class="sxs-lookup"><span data-stu-id="7178b-161">A handle of the open MIDI device is passed as a parameter to the callback function, along with the doubleword of instance data that was passed by using **midiInOpen**.</span></span>

<span data-ttu-id="7178b-162">Per il [**messaggio \_ LONGDATA MIM**](mim-longdata.md) , *lpMidiHdr* specifica un indirizzo di una struttura [**MIDIHDR**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) che identifica il buffer per i messaggi esclusivi del sistema.</span><span class="sxs-lookup"><span data-stu-id="7178b-162">For the [**MIM\_LONGDATA**](mim-longdata.md) message, *lpMidiHdr* specifies an address of a [**MIDIHDR**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) structure that identifies the buffer for system-exclusive messages.</span></span> <span data-ttu-id="7178b-163">Il buffer potrebbe non essere riempito completamente.</span><span class="sxs-lookup"><span data-stu-id="7178b-163">The buffer might not be completely filled.</span></span> <span data-ttu-id="7178b-164">Per determinare la quantità di dati validi presenti nel buffer, usare il membro **dwBytesRecorded** della struttura **MIDIHDR** .</span><span class="sxs-lookup"><span data-stu-id="7178b-164">To determine the amount of valid data present in the buffer, use the **dwBytesRecorded** member of the **MIDIHDR** structure.</span></span>

<span data-ttu-id="7178b-165">Una volta che il driver di dispositivo è terminato con un blocco di dati, è possibile pulire e liberare il blocco di dati.</span><span class="sxs-lookup"><span data-stu-id="7178b-165">After the device driver is finished with a data block, you can clean up and free the data block.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7178b-166">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="7178b-166">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7178b-167">Registrazione audio MIDI</span><span class="sxs-lookup"><span data-stu-id="7178b-167">Recording MIDI Audio</span></span>](recording-midi-audio.md)
</dt> </dl>

 

 