---
title: DLL di amministrazione RAS
description: La DLL esporta funzioni che il server RAS chiama ogni volta che un utente tenta di connettersi o disconnettersi.
ms.assetid: 014ab85d-8924-4c7a-89ed-f83e75318ca6
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f0908032e0916f0937e964408b1551d3f1515dea
ms.sourcegitcommit: cba7f424a292fd7f3a8518947b9466439b455419
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 11/23/2019
ms.locfileid: "104335668"
---
# <a name="ras-administration-dll"></a><span data-ttu-id="9f246-103">DLL di amministrazione RAS</span><span class="sxs-lookup"><span data-stu-id="9f246-103">RAS administration DLL</span></span>

<span data-ttu-id="9f246-104">La DLL esporta funzioni che il server RAS chiama ogni volta che un utente tenta di connettersi o disconnettersi.</span><span class="sxs-lookup"><span data-stu-id="9f246-104">The DLL exports functions that the RAS server calls whenever a user tries to connect or disconnect.</span></span> <span data-ttu-id="9f246-105">È possibile utilizzare la DLL per eseguire le funzioni amministrative seguenti:</span><span class="sxs-lookup"><span data-stu-id="9f246-105">You can use the DLL to perform the following administrative functions:</span></span>

-   <span data-ttu-id="9f246-106">Decidere se consentire a un utente di connettersi al server.</span><span class="sxs-lookup"><span data-stu-id="9f246-106">Decide whether to allow a user to connect to the server.</span></span> <span data-ttu-id="9f246-107">Questo può fornire un controllo di sicurezza oltre all'autenticazione utente RAS standard.</span><span class="sxs-lookup"><span data-stu-id="9f246-107">This can provide a security check in addition to the standard RAS user authentication.</span></span>
-   <span data-ttu-id="9f246-108">Registrare l'ora in cui ogni utente si connette e si disconnette dal server.</span><span class="sxs-lookup"><span data-stu-id="9f246-108">Record the time that each user connects to and disconnects from the server.</span></span> <span data-ttu-id="9f246-109">Questa operazione può essere utile a scopo di fatturazione o controllo.</span><span class="sxs-lookup"><span data-stu-id="9f246-109">This can be useful for billing or auditing purposes.</span></span>
-   <span data-ttu-id="9f246-110">Assegnare un indirizzo IP a ogni utente.</span><span class="sxs-lookup"><span data-stu-id="9f246-110">Assign an IP address to each user.</span></span> <span data-ttu-id="9f246-111">Questa operazione può essere utile a scopo di sicurezza per eseguire il mapping della connessione di un utente a un computer specifico.</span><span class="sxs-lookup"><span data-stu-id="9f246-111">This can be useful for security purposes to map a user's connection to a specific computer.</span></span>

<span data-ttu-id="9f246-112">Implementare le funzioni seguenti durante lo sviluppo di una DLL di amministrazione del server RAS.</span><span class="sxs-lookup"><span data-stu-id="9f246-112">Implement the following functions when developing a RAS server administration DLL.</span></span>

-   [<span data-ttu-id="9f246-113">**RasAdminAcceptNewConnection**</span><span class="sxs-lookup"><span data-stu-id="9f246-113">**RasAdminAcceptNewConnection**</span></span>](rasadminacceptnewconnection.md)
-   [<span data-ttu-id="9f246-114">**RasAdminConnectionHangupNotification**</span><span class="sxs-lookup"><span data-stu-id="9f246-114">**RasAdminConnectionHangupNotification**</span></span>](rasadminconnectionhangupnotification.md)
-   [<span data-ttu-id="9f246-115">**RasAdminGetIpAddressForUser**</span><span class="sxs-lookup"><span data-stu-id="9f246-115">**RasAdminGetIpAddressForUser**</span></span>](rasadmingetipaddressforuser.md)
-   [<span data-ttu-id="9f246-116">**RasAdminReleaseIpAddress**</span><span class="sxs-lookup"><span data-stu-id="9f246-116">**RasAdminReleaseIpAddress**</span></span>](rasadminreleaseipaddress.md)

<span data-ttu-id="9f246-117">Una DLL di amministrazione RAS deve implementare ed esportare tutte le funzioni descritte in precedenza.</span><span class="sxs-lookup"><span data-stu-id="9f246-117">A RAS administration DLL must implement and export all of the above functions.</span></span> <span data-ttu-id="9f246-118">Se una delle funzioni non è implementata, il servizio di accesso remoto non verrà avviato.</span><span class="sxs-lookup"><span data-stu-id="9f246-118">If any of the functions are not implemented, the remote access service will fail to start.</span></span>

<span data-ttu-id="9f246-119">Le funzioni [**RasAdminAcceptNewConnection**](rasadminacceptnewconnection.md) e [**RASADMINCONNECTIONHANGUPNOTIFICATION**](rasadminconnectionhangupnotification.md) consentono alla DLL di controllare le connessioni utente al server.</span><span class="sxs-lookup"><span data-stu-id="9f246-119">The [**RasAdminAcceptNewConnection**](rasadminacceptnewconnection.md) and [**RasAdminConnectionHangupNotification**](rasadminconnectionhangupnotification.md) functions enable the DLL to audit user connections to the server.</span></span> <span data-ttu-id="9f246-120">Un server RAS Windows NT/Windows 2000 chiama la funzione **RasAdminAcceptNewConnection** ogni volta che un utente tenta di connettersi.</span><span class="sxs-lookup"><span data-stu-id="9f246-120">A Windows NT/Windows 2000 RAS server calls the **RasAdminAcceptNewConnection** function whenever a user tries to connect.</span></span> <span data-ttu-id="9f246-121">La funzione può impedire all'utente di connettersi.</span><span class="sxs-lookup"><span data-stu-id="9f246-121">The function can prevent the user from connecting.</span></span> <span data-ttu-id="9f246-122">È anche possibile usare la funzione per generare una voce in un log per la fatturazione o il controllo.</span><span class="sxs-lookup"><span data-stu-id="9f246-122">You can also use the function to generate an entry in a log for billing or auditing.</span></span> <span data-ttu-id="9f246-123">Quando l'utente si disconnette, il server RAS chiama la funzione **RasAdminConnectionHangupNotification** , che consente di registrare l'ora in cui l'utente è stato disconnesso.</span><span class="sxs-lookup"><span data-stu-id="9f246-123">When the user disconnects, the RAS server calls the **RasAdminConnectionHangupNotification** function, which can log the time at which the user disconnected.</span></span>

<span data-ttu-id="9f246-124">Dopo che il server RAS ha autenticato un chiamante, chiama la funzione [**RasAdminGetIpAddressForUser**](rasadmingetipaddressforuser.md) per ottenere un indirizzo IP per il client remoto.</span><span class="sxs-lookup"><span data-stu-id="9f246-124">After the RAS server has authenticated a caller, it calls the [**RasAdminGetIpAddressForUser**](rasadmingetipaddressforuser.md) function to get an IP address for the remote client.</span></span> <span data-ttu-id="9f246-125">La DLL può usare questa funzione per fornire uno schema alternativo per il mapping di un indirizzo IP a un utente di connessione remota.</span><span class="sxs-lookup"><span data-stu-id="9f246-125">The DLL can use this function to provide an alternate scheme for mapping an IP address to a dial-in user.</span></span> <span data-ttu-id="9f246-126">Se **RasAdminGetIpAddressForUser** non è implementato, un server RAS connette un utente remoto a un indirizzo IP selezionato da un pool statico di indirizzi IP o uno selezionato da un server Dynamic Host Configuration Protocol (DHCP).</span><span class="sxs-lookup"><span data-stu-id="9f246-126">If **RasAdminGetIpAddressForUser** is not implemented, a RAS server connects a remote user to an IP address selected from a static pool of IP addresses, or one selected by a Dynamic Host Configuration Protocol (DHCP) server.</span></span> <span data-ttu-id="9f246-127">La funzione **RasAdminGetIpAddressForUser** consente alla DLL di eseguire l'override di questo indirizzo IP predefinito e specificare un indirizzo IP specifico per ogni utente.</span><span class="sxs-lookup"><span data-stu-id="9f246-127">The **RasAdminGetIpAddressForUser** function allows the DLL to override this default IP address and specify a particular IP address for each user.</span></span> <span data-ttu-id="9f246-128">La funzione **RasAdminGetIpAddressForUser** può impostare un flag che fa in modo che RAS chiami la funzione [**RasAdminReleaseIpAddress**](rasadminreleaseipaddress.md) quando l'utente si disconnette.</span><span class="sxs-lookup"><span data-stu-id="9f246-128">The **RasAdminGetIpAddressForUser** function can set a flag that causes RAS to call the [**RasAdminReleaseIpAddress**](rasadminreleaseipaddress.md) function when the user disconnects.</span></span> <span data-ttu-id="9f246-129">La DLL può usare [**RasAdminReleaseIpAddress**](rasadminreleaseipaddress.md) per aggiornare la mappa da utente a indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="9f246-129">The DLL can use [**RasAdminReleaseIpAddress**](rasadminreleaseipaddress.md) to update its user-to-IP-address map.</span></span>

<span data-ttu-id="9f246-130">RAS serializza le chiamate nella DLL di amministrazione.</span><span class="sxs-lookup"><span data-stu-id="9f246-130">RAS serializes calls into the administration DLL.</span></span> <span data-ttu-id="9f246-131">Una chiamata a una delle funzioni della DLL per un determinato client RAS non verrà mai superata da una chiamata a tale funzione per un client RAS diverso; la chiamata iniziale può essere completata prima che RAS chiami la funzione per l'altro client.</span><span class="sxs-lookup"><span data-stu-id="9f246-131">A call into one of the DLL's functions for a given RAS client will never be preempted by a call to that function for a different RAS client; the initial call is guaranteed to be complete before RAS calls the function for the other client.</span></span> <span data-ttu-id="9f246-132">Inoltre, la serializzazione si estende a determinati gruppi di funzioni.</span><span class="sxs-lookup"><span data-stu-id="9f246-132">Furthermore, serialization extends to certain groups of functions.</span></span> <span data-ttu-id="9f246-133">Le funzioni degli indirizzi IP vengono serializzate come gruppo. una chiamata a [**RasAdminGetIpAddressForUser**](rasadmingetipaddressforuser.md) o [**RasAdminReleaseIpAddress**](rasadminreleaseipaddress.md) bloccherà le chiamate in entrambi i casi finché la chiamata iniziale non sarà completa.</span><span class="sxs-lookup"><span data-stu-id="9f246-133">The IP address functions are serialized as a group; a call into either [**RasAdminGetIpAddressForUser**](rasadmingetipaddressforuser.md) or [**RasAdminReleaseIpAddress**](rasadminreleaseipaddress.md) will block calls into both until the initial call is complete.</span></span> <span data-ttu-id="9f246-134">[**RasAdminAcceptNewConnection**](rasadminacceptnewconnection.md) e [**RasAdminConnectionHangupNotification**](rasadminconnectionhangupnotification.md) vengono inoltre serializzati come gruppo.</span><span class="sxs-lookup"><span data-stu-id="9f246-134">[**RasAdminAcceptNewConnection**](rasadminacceptnewconnection.md) and [**RasAdminConnectionHangupNotification**](rasadminconnectionhangupnotification.md) are also serialized as a group.</span></span>

<span data-ttu-id="9f246-135">RAS esegue le funzioni per l'assegnazione di indirizzi IP in un processo ed esegue le funzioni per le notifiche di connessione e disconnessione in un altro processo.</span><span class="sxs-lookup"><span data-stu-id="9f246-135">RAS executes the functions for assigning IP addresses in one process and executes the functions for connection and disconnection notifications in another process.</span></span> <span data-ttu-id="9f246-136">Di conseguenza, la DLL non deve dipendere da dati condivisi tra i due set di funzioni.</span><span class="sxs-lookup"><span data-stu-id="9f246-136">Consequently, the DLL should not depend on shared data between the two sets of functions.</span></span>

<span data-ttu-id="9f246-137">Il server RAS registra un errore nel registro eventi di sistema se si verifica un errore durante il tentativo di caricamento di una DLL di amministrazione RAS o quando viene chiamata una delle funzioni della DLL.</span><span class="sxs-lookup"><span data-stu-id="9f246-137">The RAS server logs an error in the system event log if an error occurs when it tries to load a RAS administration DLL or when calling one of the DLL's functions.</span></span> <span data-ttu-id="9f246-138">Questo può accadere, ad esempio, se la DLL ha specificato il nome errato per una funzione esportata o se non include il nome della funzione nel file def.</span><span class="sxs-lookup"><span data-stu-id="9f246-138">This can happen, for example, if the DLL specified the wrong name for an exported function, or if it did not include the function name in the .def file.</span></span> <span data-ttu-id="9f246-139">La voce nel registro eventi indica il motivo dell'errore.</span><span class="sxs-lookup"><span data-stu-id="9f246-139">The entry in the event log indicates the reason for the failure.</span></span>

<span data-ttu-id="9f246-140">**Windows 2000 Server e versioni successive:** Le DLL di amministrazione RAS che implementano questa interfaccia di funzione non funzionano più.</span><span class="sxs-lookup"><span data-stu-id="9f246-140">**Windows 2000 Server and later:** RAS administration DLLs that implement this function interface no longer work.</span></span> <span data-ttu-id="9f246-141">Usare invece l'interfaccia della funzione MprAdmin fornita con le versioni più recenti di Windows.</span><span class="sxs-lookup"><span data-stu-id="9f246-141">Instead, use the MprAdmin function interface provided with the more recent versions of Windows.</span></span> <span data-ttu-id="9f246-142">Per ulteriori informazioni, vedere le informazioni di [riferimento sull'amministrazione RAS](remote-access-service-administration-reference.md) nella documentazione relativa a routing e RAS.</span><span class="sxs-lookup"><span data-stu-id="9f246-142">For more information, see the [RAS Administration Reference](remote-access-service-administration-reference.md) in the Routing and RAS documentation.</span></span>

 

 




