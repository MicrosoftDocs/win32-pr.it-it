---
title: Transazione di autenticazione DLL di sicurezza RAS
description: Il server RAS Windows NT/Windows 2000 chiama la funzione RasSecurityDialogBegin della DLL di sicurezza per iniziare un'autenticazione di un utente remoto.
ms.assetid: e6549812-d906-4163-b9c8-86f8f1cb1ad3
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 109f6ad5cd3d7b76e30db099a478ffaf562feb32
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104517043"
---
# <a name="ras-security-dll-authentication-transaction"></a><span data-ttu-id="c5a2e-103">Transazione di autenticazione DLL di sicurezza RAS</span><span class="sxs-lookup"><span data-stu-id="c5a2e-103">RAS Security DLL Authentication Transaction</span></span>

<span data-ttu-id="c5a2e-104">Il server RAS Windows NT/Windows 2000 chiama la funzione [**RasSecurityDialogBegin**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogbegin) della DLL di sicurezza per iniziare un'autenticazione di un utente remoto.</span><span class="sxs-lookup"><span data-stu-id="c5a2e-104">Windows NT/Windows 2000 RAS server calls the security DLL's [**RasSecurityDialogBegin**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogbegin) function to begin an authentication of a remote user.</span></span> <span data-ttu-id="c5a2e-105">Il server RAS è bloccato e non può accettare altre chiamate fino a quando non viene restituito **RasSecurityDialogBegin** .</span><span class="sxs-lookup"><span data-stu-id="c5a2e-105">The RAS server is blocked and cannot accept any other calls until **RasSecurityDialogBegin** returns.</span></span> <span data-ttu-id="c5a2e-106">Per questo motivo, **RasSecurityDialogBegin** deve copiare i parametri di input, creare un thread per eseguire l'autenticazione e restituire il più rapidamente possibile.</span><span class="sxs-lookup"><span data-stu-id="c5a2e-106">For this reason, **RasSecurityDialogBegin** should copy the input parameters, create a thread to perform the authentication, and return as quickly as possible.</span></span>

<span data-ttu-id="c5a2e-107">Il thread creato dalla DLL di sicurezza utilizza le funzioni [**RasSecurityDialogSend**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogsend) e [**RasSecurityDialogReceive**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogreceive) per comunicare con il computer remoto.</span><span class="sxs-lookup"><span data-stu-id="c5a2e-107">The thread created by the security DLL uses the [**RasSecurityDialogSend**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogsend) and [**RasSecurityDialogReceive**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogreceive) functions to communicate with the remote computer.</span></span> <span data-ttu-id="c5a2e-108">Queste funzioni non sono disponibili per l'importazione statica da una libreria.</span><span class="sxs-lookup"><span data-stu-id="c5a2e-108">These functions are not available for static import from any library.</span></span> <span data-ttu-id="c5a2e-109">Al contrario, la DLL di sicurezza deve usare le funzioni [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) e [**GetProcAddress**](/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress) per eseguire il collegamento dinamico a queste funzioni in RASMAN.DLL.</span><span class="sxs-lookup"><span data-stu-id="c5a2e-109">Instead, the security DLL must use the [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) and [**GetProcAddress**](/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress) functions to dynamically link to these functions in RASMAN.DLL.</span></span>

<span data-ttu-id="c5a2e-110">Durante una transazione di autenticazione, la gestione connessione RAS nel computer remoto Visualizza una finestra del terminale.</span><span class="sxs-lookup"><span data-stu-id="c5a2e-110">During an authentication transaction, the RAS connection manager on the remote computer displays a terminal window.</span></span> <span data-ttu-id="c5a2e-111">Il thread della DLL di sicurezza chiama [**RasSecurityDialogSend**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogsend) per inviare un messaggio da visualizzare nella finestra del terminale.</span><span class="sxs-lookup"><span data-stu-id="c5a2e-111">The thread of the security DLL calls [**RasSecurityDialogSend**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogsend) to send a message to display in the terminal window.</span></span> <span data-ttu-id="c5a2e-112">Il thread chiama quindi [**RasSecurityDialogReceive**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogreceive) per ricevere l'input che l'utente remoto digita nella finestra del terminale.</span><span class="sxs-lookup"><span data-stu-id="c5a2e-112">The thread then calls [**RasSecurityDialogReceive**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogreceive) to receive the input that the remote user types in the terminal window.</span></span> <span data-ttu-id="c5a2e-113">Il thread può effettuare un numero qualsiasi di chiamate **RasSecurityDialogSend** , con ogni chiamata seguita da una chiamata **RasSecurityDialogReceive** .</span><span class="sxs-lookup"><span data-stu-id="c5a2e-113">The thread can make any number of **RasSecurityDialogSend** calls, with each call followed by a **RasSecurityDialogReceive** call.</span></span> <span data-ttu-id="c5a2e-114">Dopo ogni chiamata a **RasSecurityDialogReceive**, il thread deve chiamare una delle funzioni di attesa, ad esempio [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject), per attendere il completamento delle operazioni di invio e ricezione asincrone.</span><span class="sxs-lookup"><span data-stu-id="c5a2e-114">After each call to **RasSecurityDialogReceive**, the thread must call one of the wait functions, such as [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject), to wait for the asynchronous send and receive operations to be completed.</span></span> <span data-ttu-id="c5a2e-115">Il server RAS segnala un oggetto evento quando l'operazione di ricezione è stata completata o quando è trascorso un intervallo di timeout facoltativo.</span><span class="sxs-lookup"><span data-stu-id="c5a2e-115">The RAS server signals an event object when the receive operation has been completed or when an optional time-out interval has elapsed.</span></span>

<span data-ttu-id="c5a2e-116">Al termine dell'autenticazione dell'utente remoto da parte del thread, viene chiamata la funzione [**RasSecurityDialogComplete**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogcomplete) .</span><span class="sxs-lookup"><span data-stu-id="c5a2e-116">When the thread has finished authenticating the remote user, it calls the [**RasSecurityDialogComplete**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogcomplete) function.</span></span> <span data-ttu-id="c5a2e-117">Questa chiamata passa una struttura dei [**\_ messaggi di sicurezza**](/windows/desktop/api/Rasshost/ns-rasshost-security_message) contenente i risultati della transazione di autenticazione al server RAS.</span><span class="sxs-lookup"><span data-stu-id="c5a2e-117">This call passes a [**SECURITY\_MESSAGE**](/windows/desktop/api/Rasshost/ns-rasshost-security_message) structure containing the results of the authentication transaction to the RAS server.</span></span> <span data-ttu-id="c5a2e-118">Il server RAS esegue quindi una sequenza di pulitura che include una chiamata alla funzione [**RasSecurityDialogEnd**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogend) della dll.</span><span class="sxs-lookup"><span data-stu-id="c5a2e-118">The RAS server then performs a cleanup sequence that includes a call to the DLL's [**RasSecurityDialogEnd**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogend) function.</span></span> <span data-ttu-id="c5a2e-119">In questo modo la DLL di sicurezza consente di eseguire tutte le operazioni di pulizia necessarie.</span><span class="sxs-lookup"><span data-stu-id="c5a2e-119">This gives the security DLL an opportunity to perform any necessary cleanup.</span></span>

<span data-ttu-id="c5a2e-120">La DLL di sicurezza può chiamare la funzione [**RasSecurityDialogGetInfo**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialoggetinfo) per recuperare le informazioni sulla porta associata a una transazione di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="c5a2e-120">The security DLL can call the [**RasSecurityDialogGetInfo**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialoggetinfo) function to retrieve information about the port associated with an authentication transaction.</span></span> <span data-ttu-id="c5a2e-121">**RasSecurityDialogGetInfo** compila una struttura di [**\_ \_ informazioni di sicurezza RAS**](/windows/desktop/api/Rasshost/ns-rasshost-ras_security_info) che indica lo stato dell'ultima chiamata [**RasSecurityDialogReceive**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogreceive) per la porta.</span><span class="sxs-lookup"><span data-stu-id="c5a2e-121">**RasSecurityDialogGetInfo** fills in a [**RAS\_SECURITY\_INFO**](/windows/desktop/api/Rasshost/ns-rasshost-ras_security_info) structure that indicates the state of the last [**RasSecurityDialogReceive**](/windows/desktop/api/Rasshost/nf-rasshost-rassecuritydialogreceive) call for the port.</span></span>

 

 