---
title: Disconnessione in corso
description: Quando un'applicazione client RAS avvia un'operazione di connessione, la chiamata RasDial riceve un handle di connessione HRASCONN per identificare la connessione.
ms.assetid: a0fddc69-44bb-4bb0-ae57-ebecbe85cbe9
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 859a3751bcbaf7d95927cdf6d14de859ddcc731e
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104047281"
---
# <a name="disconnecting"></a><span data-ttu-id="f41e0-103">Disconnessione in corso</span><span class="sxs-lookup"><span data-stu-id="f41e0-103">Disconnecting</span></span>

<span data-ttu-id="f41e0-104">Quando un'applicazione client RAS avvia un'operazione di connessione, la chiamata [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala) riceve un handle di connessione **HRASCONN** per identificare la connessione.</span><span class="sxs-lookup"><span data-stu-id="f41e0-104">When a RAS client application starts a connection operation, the [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala) call receives an **HRASCONN** connection handle to identify the connection.</span></span> <span data-ttu-id="f41e0-105">Se l'handle restituito non è **null**, il client deve chiamare la funzione [**RasHangup**](/windows/desktop/api/Ras/nf-ras-rashangupa) per terminare la connessione.</span><span class="sxs-lookup"><span data-stu-id="f41e0-105">If the returned handle is not **NULL**, the client must eventually call the [**RasHangUp**](/windows/desktop/api/Ras/nf-ras-rashangupa) function to end the connection.</span></span> <span data-ttu-id="f41e0-106">Se si verifica un errore durante l'operazione di connessione, il client deve chiamare **RasHangup** anche se la connessione non è mai stata stabilita.</span><span class="sxs-lookup"><span data-stu-id="f41e0-106">If an error occurs during the connection operation, the client must call **RasHangUp** even though the connection was never established.</span></span>

<span data-ttu-id="f41e0-107">L'applicazione che chiama [**RasHangup**](/windows/desktop/api/Ras/nf-ras-rashangupa) non deve uscire immediatamente perché la gestione connessione di accesso remoto richiede tempo per terminare correttamente la connessione.</span><span class="sxs-lookup"><span data-stu-id="f41e0-107">The application that calls [**RasHangUp**](/windows/desktop/api/Ras/nf-ras-rashangupa) should not exit immediately because the Remote Access Connection Manager needs time to properly terminate the connection.</span></span> <span data-ttu-id="f41e0-108">Al contrario, l'applicazione deve attendere fino a quando la funzione [**RasGetConnectStatus**](/windows/desktop/api/Ras/nf-ras-rasgetconnectstatusa) restituisce l'errore \_ handle non valido \_ , che indica che la connessione è stata eliminata.</span><span class="sxs-lookup"><span data-stu-id="f41e0-108">Instead, the application should wait until the [**RasGetConnectStatus**](/windows/desktop/api/Ras/nf-ras-rasgetconnectstatusa) function returns ERROR\_INVALID\_HANDLE, indicating that the connection has been deleted.</span></span>

<span data-ttu-id="f41e0-109">Un'applicazione client RAS potrebbe dover terminare una connessione anche se non ha l'handle restituito da [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala).</span><span class="sxs-lookup"><span data-stu-id="f41e0-109">A RAS client application might need to end a connection even though it does not have the handle returned by [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala).</span></span> <span data-ttu-id="f41e0-110">Ad esempio, l'applicazione che ha chiamato **RasDial** potrebbe essere stata chiusa dopo che la connessione è stata stabilita correttamente.</span><span class="sxs-lookup"><span data-stu-id="f41e0-110">For example, the application that called **RasDial** might have exited after the connection was successfully established.</span></span> <span data-ttu-id="f41e0-111">In questo caso, l'applicazione di disconnessione può utilizzare la funzione [**RasEnumConnections**](/windows/desktop/api/Ras/nf-ras-rasenumconnectionsa) per ottenere tutte le connessioni correnti.</span><span class="sxs-lookup"><span data-stu-id="f41e0-111">In this case, the disconnecting application can use the [**RasEnumConnections**](/windows/desktop/api/Ras/nf-ras-rasenumconnectionsa) function to get all the current connections.</span></span> <span data-ttu-id="f41e0-112">Per ogni connessione, **RasEnumConnections** restituisce una struttura [**RASCONN**](/previous-versions/windows/desktop/legacy/aa376725(v=vs.85)) che contiene l'handle di connessione **HRASCONN** e il nome della voce o il numero di telefono del libro telefonico specificato quando è stata avviata l'operazione di connessione.</span><span class="sxs-lookup"><span data-stu-id="f41e0-112">For each connection, **RasEnumConnections** returns a [**RASCONN**](/previous-versions/windows/desktop/legacy/aa376725(v=vs.85)) structure that contains the **HRASCONN** connection handle and the phone-book entry name or phone number specified when the connection operation was started.</span></span> <span data-ttu-id="f41e0-113">Queste informazioni possono essere utilizzate per visualizzare un elenco di connessioni da cui l'utente può selezionare la connessione da terminare.</span><span class="sxs-lookup"><span data-stu-id="f41e0-113">This information can be used to display a list of connections from which the user can select the connection to end.</span></span>

 

 