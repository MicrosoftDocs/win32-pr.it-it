---
title: Ricezione di notifiche di modifiche
description: Molti client possono aggiornare contemporaneamente la tabella di routing e i client devono ricevere una notifica quando si verificano modifiche alle informazioni di routing.
ms.assetid: d42e16e2-32b2-4178-967b-e937730b3cca
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bacd8d1d0329cf29be82a890be30b602b9330249
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "104395755"
---
# <a name="receiving-notification-of-changes"></a><span data-ttu-id="66e40-103">Ricezione di notifiche di modifiche</span><span class="sxs-lookup"><span data-stu-id="66e40-103">Receiving Notification of Changes</span></span>

<span data-ttu-id="66e40-104">Molti client possono aggiornare contemporaneamente la tabella di routing e i client devono ricevere una notifica quando si verificano modifiche alle informazioni di routing.</span><span class="sxs-lookup"><span data-stu-id="66e40-104">Many clients can simultaneously update the routing table, and clients must be notified when changes to routing information occur.</span></span> <span data-ttu-id="66e40-105">Ad esempio, un client che non riceve alcuna notifica delle modifiche di un altro client alla tabella di routing potrebbe annunciare informazioni sulle route obsolete.</span><span class="sxs-lookup"><span data-stu-id="66e40-105">For example, a client that is not notified of another client's changes to the routing table could advertise outdated route information.</span></span> <span data-ttu-id="66e40-106">Questa operazione può essere impedita tramite la programmazione dei client per la registrazione con gestione tabelle di routing per ricevere notifiche delle modifiche apportate alla tabella di routing.</span><span class="sxs-lookup"><span data-stu-id="66e40-106">This can be prevented by programming clients to register with the routing table manager to be notified of changes in the routing table.</span></span> <span data-ttu-id="66e40-107">Gestione tabelle di routing invia le notifiche delle modifiche a tutti i client registrati per riceverli.</span><span class="sxs-lookup"><span data-stu-id="66e40-107">The routing table manager sends notifications of changes to all clients that register to receive them.</span></span>

<span data-ttu-id="66e40-108">La notifica delle modifiche è valida solo per le destinazioni.</span><span class="sxs-lookup"><span data-stu-id="66e40-108">Change notification applies only to destinations.</span></span> <span data-ttu-id="66e40-109">Non è possibile eseguire query su Gestione tabelle di routing per apportare modifiche a una route specifica.</span><span class="sxs-lookup"><span data-stu-id="66e40-109">There is no way to query the routing table manager for changes to a particular route.</span></span>

<span data-ttu-id="66e40-110">Quando viene apportata una modifica a una delle route a una destinazione, il servizio di gestione delle tabelle di routing invia una notifica che indica che si è verificata una modifica.</span><span class="sxs-lookup"><span data-stu-id="66e40-110">When a change is made to one of the routes to a destination, the routing table manager sends out a notification that a change has occurred.</span></span> <span data-ttu-id="66e40-111">Questa notifica viene inviata solo ai client che hanno eseguito la registrazione con gestione tabelle di routing per il tipo di modifica che si è verificata.</span><span class="sxs-lookup"><span data-stu-id="66e40-111">This notification goes only to those clients that have registered with the routing table manager for the type of change that has occurred.</span></span> <span data-ttu-id="66e40-112">Tutte le modifiche apportate alle informazioni di routing in Gestione tabelle di routing si verificano in una o più viste e i messaggi di notifica delle modifiche possono essere richiesti in qualsiasi subset di visualizzazioni supportate.</span><span class="sxs-lookup"><span data-stu-id="66e40-112">All changes to routing information in the routing table manager occur in one or more views, and change notification messages can be requested in any subset of supported views.</span></span>

<span data-ttu-id="66e40-113">Attualmente sono disponibili tre tipi di notifiche di modifica per le quali un client può registrarsi:</span><span class="sxs-lookup"><span data-stu-id="66e40-113">There are currently three types of change notifications for which a client can register:</span></span>

-   <span data-ttu-id="66e40-114">Notifica di qualsiasi modifica apportata alle route per la destinazione.</span><span class="sxs-lookup"><span data-stu-id="66e40-114">Notification of any change to the routes for the destination.</span></span> <span data-ttu-id="66e40-115">Questa richiesta viene eseguita utilizzando il \_ flag di modifica \_ tipo RTM \_ all.</span><span class="sxs-lookup"><span data-stu-id="66e40-115">This request is made using the RTM\_CHANGE\_TYPE\_ALL flag.</span></span>
-   <span data-ttu-id="66e40-116">Notifica se il percorso migliore per la destinazione cambia o una delle informazioni seguenti per le modifiche più recenti alla route:</span><span class="sxs-lookup"><span data-stu-id="66e40-116">Notification if the best route to the destination changes, or any of the following information for the current best route changes:</span></span>

    -   <span data-ttu-id="66e40-117">Preferenza</span><span class="sxs-lookup"><span data-stu-id="66e40-117">Preference</span></span>
    -   <span data-ttu-id="66e40-118">Hop successivi</span><span class="sxs-lookup"><span data-stu-id="66e40-118">Next hops</span></span>
    -   <span data-ttu-id="66e40-119">Flag di route</span><span class="sxs-lookup"><span data-stu-id="66e40-119">Route flags</span></span>

    <span data-ttu-id="66e40-120">Questa richiesta viene eseguita utilizzando il \_ flag di \_ tipo modifica RTM \_ .</span><span class="sxs-lookup"><span data-stu-id="66e40-120">This request is made using the RTM\_CHANGE\_TYPE\_BEST flag.</span></span>

-   <span data-ttu-id="66e40-121">Notifica di tutte le modifiche apportate al \_ tipo di modifica RTM \_ \_ , eccetto le modifiche apportate ai flag non di inoltro nella migliore route.</span><span class="sxs-lookup"><span data-stu-id="66e40-121">Notification of all changes of the type RTM\_CHANGE\_TYPE\_BEST, except changes in non-forwarding flags in the best route.</span></span> <span data-ttu-id="66e40-122">Ad esempio, gestione router attende le modifiche di questo tipo nella visualizzazione unicast e aggiorna le informazioni nel server d'avvio unicast.</span><span class="sxs-lookup"><span data-stu-id="66e40-122">For example, the router manager waits for changes of this type in the unicast view, and updates information in the unicast forwarder.</span></span> <span data-ttu-id="66e40-123">Questa richiesta viene effettuata utilizzando il \_ flag di invio del tipo di modifica RTM \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="66e40-123">This request is made using the RTM\_CHANGE\_TYPE\_FORWARDING flag.</span></span>

<span data-ttu-id="66e40-124">È anche possibile limitare le richieste di notifiche delle modifiche a un subset di destinazioni eseguendo la registrazione per le notifiche delle modifiche solo alle destinazioni "contrassegnate".</span><span class="sxs-lookup"><span data-stu-id="66e40-124">Requests for notifications of changes can also be restricted to a subset of destinations by registering for notifications of changes only to "marked" destinations.</span></span> <span data-ttu-id="66e40-125">Il client può contrassegnare una destinazione per la notifica di modifica chiamando [**RtmMarkDestForChangeNotification**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmmarkdestforchangenotification).</span><span class="sxs-lookup"><span data-stu-id="66e40-125">The client can mark a destination for change notification by calling [**RtmMarkDestForChangeNotification**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmmarkdestforchangenotification).</span></span>

<span data-ttu-id="66e40-126">Quando si verifica una modifica, gestione tabelle di routing verifica se sono presenti client che devono ricevere notifiche relative a questa modifica.</span><span class="sxs-lookup"><span data-stu-id="66e40-126">When a change occurs, the routing table manager checks to see if there are any clients that must be notified of this change.</span></span> <span data-ttu-id="66e40-127">Un client deve ricevere una notifica di una modifica se vengono soddisfatte tutte le condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="66e40-127">A client must be notified of a change if all of the following conditions are met:</span></span>

-   <span data-ttu-id="66e40-128">Il tipo di modifica che si è verificato è un tipo per il quale il client ha effettuato la registrazione per la notifica</span><span class="sxs-lookup"><span data-stu-id="66e40-128">The type of change that occurred is a type for which the client has registered for notification</span></span>
-   <span data-ttu-id="66e40-129">Le modifiche apportate a una destinazione contrassegnata dal client sono state eseguite o da qualsiasi destinazione, se il client ha richiesto modifiche per tutte le destinazioni</span><span class="sxs-lookup"><span data-stu-id="66e40-129">Changes to a destination that the client has marked have occurred or any destination, if the client has requested changes for all destinations</span></span>
-   <span data-ttu-id="66e40-130">Il client ha richiesto una notifica di modifica per la vista in cui si è verificata questa modifica</span><span class="sxs-lookup"><span data-stu-id="66e40-130">The client requested change notification for the view in which this change occurred</span></span>

<span data-ttu-id="66e40-131">Se la modifica soddisfa tutti i criteri sopra indicati, la modifica viene memorizzata nella cache e il client riceve una notifica.</span><span class="sxs-lookup"><span data-stu-id="66e40-131">If the change meets all of the above criteria, the change is cached and the client is notified.</span></span>

<span data-ttu-id="66e40-132">La notifica non specifica le modifiche effettive che si sono verificate.</span><span class="sxs-lookup"><span data-stu-id="66e40-132">The notification does not specify what the actual changes are, only that they have occurred.</span></span> <span data-ttu-id="66e40-133">Il client deve recuperare le modifiche chiamando [**RtmGetChangedDests**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmgetchangeddests) usando l'handle di notifica ottenuto da una precedente chiamata a [**RtmRegisterForChangeNotification**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmregisterforchangenotification).</span><span class="sxs-lookup"><span data-stu-id="66e40-133">The client must retrieve the changes by calling [**RtmGetChangedDests**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmgetchangeddests) using the notification handle that was obtained from a previous call to [**RtmRegisterForChangeNotification**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmregisterforchangenotification).</span></span>

 

 




