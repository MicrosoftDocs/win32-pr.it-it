---
title: Algoritmi di creazione della trasformazione WCS
description: Algoritmi di creazione della trasformazione WCS
ms.assetid: 526bbbfc-fb60-415d-b4f0-6a44a5d11a55
keywords:
- Windows Color System (WCS), trasformazione creazione
- WCS (sistema di colori Windows), creazione trasformazione
- Gestione colori immagine, creazione trasformazione
- Gestione colori, creazione trasformazione
- colori, creazione trasformazione
- creazione trasformazione
- Creazione della trasformazione WCS
- algoritmi, creazione trasformazione
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 418596c0e57571f3e504727d4606921d36ff9461
ms.sourcegitcommit: d39e82e232f6510f843fdb8d55d25b4e9e02e880
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/03/2021
ms.locfileid: "104559523"
---
# <a name="wcs-transform-creation-algorithms"></a><span data-ttu-id="b77c9-111">Algoritmi di creazione della trasformazione WCS</span><span class="sxs-lookup"><span data-stu-id="b77c9-111">WCS Transform Creation Algorithms</span></span>

[<span data-ttu-id="b77c9-112">Creazione di trasformazioni</span><span class="sxs-lookup"><span data-stu-id="b77c9-112">Creation of Transforms</span></span>](#creation-of-transforms)

 

[<span data-ttu-id="b77c9-113">Esecuzione di trasformazione sequenziale</span><span class="sxs-lookup"><span data-stu-id="b77c9-113">Sequential Transform Execution</span></span>](#sequential-transform-execution)

 

[<span data-ttu-id="b77c9-114">Creazione di trasformazioni ottimizzate</span><span class="sxs-lookup"><span data-stu-id="b77c9-114">Creation of Optimized Transforms</span></span>](#creation-of-optimized-transforms)

 

[<span data-ttu-id="b77c9-115">ICCProfileFromWCSProfile</span><span class="sxs-lookup"><span data-stu-id="b77c9-115">ICCProfileFromWCSProfile</span></span>](#iccprofilefromwcsprofile)

 

[<span data-ttu-id="b77c9-116">Conservazione nera e generazione nera</span><span class="sxs-lookup"><span data-stu-id="b77c9-116">Black Preservation and Black Generation</span></span>](#black-preservation-and-black-generation)

 

[<span data-ttu-id="b77c9-117">Verifica gamut</span><span class="sxs-lookup"><span data-stu-id="b77c9-117">Check Gamut</span></span>](#checkgamut)

## <a name="creation-of-transforms"></a><span data-ttu-id="b77c9-118">Creazione di trasformazioni</span><span class="sxs-lookup"><span data-stu-id="b77c9-118">Creation of Transforms</span></span>

<span data-ttu-id="b77c9-119">Per spiegare correttamente il funzionamento delle trasformazioni dei colori, è utile illustrare il percorso di elaborazione completo sia per ICM 2,0 che per gli elementi interni della CTE.</span><span class="sxs-lookup"><span data-stu-id="b77c9-119">To properly explain how color transforms work, it is helpful to explain the complete processing path through both ICM 2.0 and the internals of the CTE.</span></span> <span data-ttu-id="b77c9-120">La funzione MCI 2,0 [**CreateColorTransformW**](/windows/win32/api/icm/nf-icm-createcolortransformw) crea una trasformazione colore che le applicazioni possono usare per eseguire la gestione dei colori.</span><span class="sxs-lookup"><span data-stu-id="b77c9-120">The ICM 2.0 [**CreateColorTransformW**](/windows/win32/api/icm/nf-icm-createcolortransformw) function creates a color transform that applications can use to perform color management.</span></span> <span data-ttu-id="b77c9-121">Questa funzione crea un contesto di colore dagli input [**LOGCOLORSPACE**](/windows/desktop/api/Wingdi/ns-wingdi-taglogcolorspacea) e Intent.</span><span class="sxs-lookup"><span data-stu-id="b77c9-121">This function creates a color context from the [**LOGCOLORSPACE**](/windows/desktop/api/Wingdi/ns-wingdi-taglogcolorspacea) and intent inputs.</span></span> <span data-ttu-id="b77c9-122">Viene eseguito il mapping degli Intent all'algoritmo di mapping della gamma ICC di base.</span><span class="sxs-lookup"><span data-stu-id="b77c9-122">The intents are mapped to baseline ICC gamut mapping algorithm correlates.</span></span> <span data-ttu-id="b77c9-123">La funzione chiama quindi la funzione MCI 2,0 [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/) per l'elaborazione dei colori coerente.</span><span class="sxs-lookup"><span data-stu-id="b77c9-123">The function then calls ICM 2.0 function [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/) for consistent color processing.</span></span> <span data-ttu-id="b77c9-124">La funzione **CreateColorTransform** copia in genere i dati nella struttura di trasformazione ottimizzata interna.</span><span class="sxs-lookup"><span data-stu-id="b77c9-124">The **CreateColorTransform** function generally copies data into the internal optimized transform structure.</span></span>

<span data-ttu-id="b77c9-125">La funzione MCI 2,0 CreateMultiProfileTransform accetta una matrice di profili e una matrice di Intent o un profilo di collegamento a dispositivo singolo e crea una trasformazione colore che le applicazioni possono usare per eseguire il mapping dei colori.</span><span class="sxs-lookup"><span data-stu-id="b77c9-125">The ICM 2.0 CreateMultiProfileTransform function accepts an array of profiles and an array of intents or a single device link profile and creates a color transform that applications can use to perform color mapping.</span></span> <span data-ttu-id="b77c9-126">Elabora i profili di input e gli Intent per creare modelli di dispositivo, modelli di aspetto dei colori, descrizioni dei limiti della gamma e modelli di mapping di gamut.</span><span class="sxs-lookup"><span data-stu-id="b77c9-126">It processes those input profiles and intents to create device models, color appearance models, gamut boundary descriptions, and gamut mapping models.</span></span> <span data-ttu-id="b77c9-127">Ecco come eseguire questa operazione:</span><span class="sxs-lookup"><span data-stu-id="b77c9-127">Here's how this is done:</span></span>

-   <span data-ttu-id="b77c9-128">I modelli di dispositivo vengono inizializzati direttamente dai profili DM.</span><span class="sxs-lookup"><span data-stu-id="b77c9-128">Device models are initialized directly from DM profiles.</span></span> <span data-ttu-id="b77c9-129">È presente un modello di dispositivo creato per ogni profilo nella chiamata a [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span><span class="sxs-lookup"><span data-stu-id="b77c9-129">There is one device model created for each profile in the call to [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span></span>
-   <span data-ttu-id="b77c9-130">I modelli di aspetto dei colori vengono inizializzati direttamente dai profili CAM.</span><span class="sxs-lookup"><span data-stu-id="b77c9-130">Color appearance models are initialized directly from CAM profiles.</span></span> <span data-ttu-id="b77c9-131">Esiste un profilo di camma per ogni profilo nella chiamata a [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span><span class="sxs-lookup"><span data-stu-id="b77c9-131">There is one CAM profile for each profile in the call to [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span></span> <span data-ttu-id="b77c9-132">È tuttavia possibile specificare lo stesso profilo di camma per più di un profilo.</span><span class="sxs-lookup"><span data-stu-id="b77c9-132">The same CAM profile can be specified for more than one profile, however.</span></span>
-   <span data-ttu-id="b77c9-133">Le descrizioni dei limiti della gamma vengono inizializzate da un oggetto modello di dispositivo e da un oggetto camma.</span><span class="sxs-lookup"><span data-stu-id="b77c9-133">Gamut boundary descriptions are initialized from a device model object and a CAM object.</span></span> <span data-ttu-id="b77c9-134">Esiste una descrizione del limite di gamut per ogni profilo nella chiamata a [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span><span class="sxs-lookup"><span data-stu-id="b77c9-134">There is one gamut boundary description for each profile in the call to [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span></span>
-   <span data-ttu-id="b77c9-135">I modelli di mapping gamut vengono inizializzati da due limiti di gamut e da un Intent.</span><span class="sxs-lookup"><span data-stu-id="b77c9-135">Gamut mapping models are initialized from two gamut boundaries and an intent.</span></span> <span data-ttu-id="b77c9-136">È necessario creare un modello di mapping di gamut tra ogni coppia di modelli di dispositivo creati dalla chiamata a [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span><span class="sxs-lookup"><span data-stu-id="b77c9-136">You must create a gamut mapping model between each pair of device models created from the call to [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span></span> <span data-ttu-id="b77c9-137">Si noti che questo significa che si usa un modello di mappa a gamut inferiore rispetto al modello di dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b77c9-137">Note that this means that you use one fewer gamut map model than device model.</span></span> <span data-ttu-id="b77c9-138">Poiché il numero di Intent corrisponde al numero di modelli di dispositivo, esiste anche un altro scopo rispetto al necessario.</span><span class="sxs-lookup"><span data-stu-id="b77c9-138">Because the number of intents matches the number of device models, there is also one more intent than required.</span></span> <span data-ttu-id="b77c9-139">Il primo intento nell'elenco viene ignorato.</span><span class="sxs-lookup"><span data-stu-id="b77c9-139">The first intent in the list is skipped.</span></span> <span data-ttu-id="b77c9-140">Viene illustrato l'elenco dei modelli di dispositivo e degli Intent, creando modelli di mapping di gamut.</span><span class="sxs-lookup"><span data-stu-id="b77c9-140">You walk through the list of device models and intents, creating gamut mapping models.</span></span> <span data-ttu-id="b77c9-141">Prelevare il primo e il secondo modello di dispositivo e il secondo scopo, quindi inizializzare il primo modello di mapping di gamut.</span><span class="sxs-lookup"><span data-stu-id="b77c9-141">Pick up the first and second device models and the second intent, and then initialize the first gamut mapping model.</span></span> <span data-ttu-id="b77c9-142">Prelevare il secondo e il terzo modello di dispositivo e il terzo scopo, quindi inizializzare il modello di mapping del secondo gamut.</span><span class="sxs-lookup"><span data-stu-id="b77c9-142">Pick up the second and third device models and the third intent, and then initialize the second gamut mapping model.</span></span> <span data-ttu-id="b77c9-143">Continuare in questo modo fino a quando non sono stati creati tutti i modelli di mapping di gamut.</span><span class="sxs-lookup"><span data-stu-id="b77c9-143">Continue in this manner until you have created all the gamut mapping models.</span></span>

<span data-ttu-id="b77c9-144">Quando i profili sono stati elaborati correttamente e tutti gli oggetti intermedi sono stati creati e inizializzati, è possibile creare la trasformazione CITE con la chiamata seguente.</span><span class="sxs-lookup"><span data-stu-id="b77c9-144">When the profiles have been properly processed and all intermediate objects have been created and initialized, then you can create the CITE transform with the following call.</span></span> <span data-ttu-id="b77c9-145">*PDestCAM* e *pDestDM* sono quelli associati all'ultimo profilo nella chiamata a [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span><span class="sxs-lookup"><span data-stu-id="b77c9-145">The *pDestCAM* and *pDestDM* are those associated with the last profile in the call to [**CreateMultiProfileTransform**](/windows/desktop/api/Wingdi/).</span></span>


```C++
HRESULT CreateCITEColorTransform(
 __inout     IDeviceModel          *pSourceDM,
 __inout     IColorAppearanceModel *pSourceCAM,
 __in        GamutMapArray         *pGamutMapArray,
 __inout     IColorAppearanceModel *pDestCAM,
 __inout     IDeviceModel          *pDestDM,
             EColorTransformMode    eTransformMode,
 __deref_out IColorTransform      **ppCTS
 );
```



## <a name="support-for-plug-ins"></a><span data-ttu-id="b77c9-146">Supporto per i plug-in</span><span class="sxs-lookup"><span data-stu-id="b77c9-146">Support for plug-ins</span></span>

<span data-ttu-id="b77c9-147">Un problema relativo alla configurazione dell'elenco delle trasformazioni consiste nel verificare se è disponibile un plug-in obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="b77c9-147">One issue involved in setting up the transform list is to validate whether a required plug-in is available.</span></span> <span data-ttu-id="b77c9-148">Il seguente parametro di modello fornisce questo criterio per controllare questo comportamento.</span><span class="sxs-lookup"><span data-stu-id="b77c9-148">The following model switch provides this policy to control this behavior.</span></span> <span data-ttu-id="b77c9-149">La gestione di questo elenco di trasformazione è un metodo nella struttura di trasformazione ottimizzata interna, ma ogni metodo del modello fornisce il puntatore a se stesso e il proprio set di valori di parametro.</span><span class="sxs-lookup"><span data-stu-id="b77c9-149">The management of this transform list is a method in the internal optimized transform structure, but each model method provides the pointer to itself and its own set of parameter values.</span></span>

<span data-ttu-id="b77c9-150">La modalità deve essere una delle seguenti.</span><span class="sxs-lookup"><span data-stu-id="b77c9-150">The mode must be one of the following.</span></span>

-   <span data-ttu-id="b77c9-151">TfmRobust: se un profilo di misurazione specifica un plug-in preferito e il plug-in non è disponibile, il nuovo sistema CTE utilizzerà il plug-in baseline.</span><span class="sxs-lookup"><span data-stu-id="b77c9-151">TfmRobust: If a measurement profile specifies a preferred plug-in and the plug-in is not available, the new CTE system will use the baseline plug-in.</span></span> <span data-ttu-id="b77c9-152">Se non è disponibile alcun plug-in, la trasformazione segnalerà un errore.</span><span class="sxs-lookup"><span data-stu-id="b77c9-152">If neither plug-in is available, the transform will report an error.</span></span>
-   <span data-ttu-id="b77c9-153">TfmStrict: se ColorContext specifica un plug-in preferito, il plug-in deve essere disponibile.</span><span class="sxs-lookup"><span data-stu-id="b77c9-153">TfmStrict: If the ColorContext specifies a preferred plug-in, the plug-in must be available.</span></span> <span data-ttu-id="b77c9-154">Se non viene trovato alcun plug-in preferito, verrà usato il plug-in baseline.</span><span class="sxs-lookup"><span data-stu-id="b77c9-154">If no preferred plug-in is found, the baseline plug-in will be used.</span></span> <span data-ttu-id="b77c9-155">Se non è disponibile alcun plug-in, la trasformazione segnalerà un errore.</span><span class="sxs-lookup"><span data-stu-id="b77c9-155">If neither plug-in is available, the transform will report an error.</span></span>
-   <span data-ttu-id="b77c9-156">TfmBaseline: è possibile usare solo plug-in di base in AddMeasurementStep.</span><span class="sxs-lookup"><span data-stu-id="b77c9-156">TfmBaseline: Only baseline plug-ins can be used in AddMeasurementStep.</span></span> <span data-ttu-id="b77c9-157">Se ColorContext specifica un plug-in preferito, il plug-in verrà ignorato.</span><span class="sxs-lookup"><span data-stu-id="b77c9-157">If the ColorContext specifies a preferred plug-in, the plug-in will be ignored.</span></span> <span data-ttu-id="b77c9-158">Se il plug-in Baseline non è disponibile, la trasformazione segnalerà un errore.</span><span class="sxs-lookup"><span data-stu-id="b77c9-158">If the baseline plug-in is not available, the transform will report an error.</span></span>

## <a name="transform-execution"></a><span data-ttu-id="b77c9-159">Esecuzione della trasformazione</span><span class="sxs-lookup"><span data-stu-id="b77c9-159">Transform execution</span></span>

<span data-ttu-id="b77c9-160">La funzione [**TranslateColors**](/windows/win32/api/icm/nf-icm-translatecolors) dell'API MCI 2,0 converte una matrice di colori dallo [spazio](c.md) dei colori di origine allo spazio dei colori di destinazione in base a quanto definito da una trasformazione colore.</span><span class="sxs-lookup"><span data-stu-id="b77c9-160">The ICM 2.0 API [**TranslateColors**](/windows/win32/api/icm/nf-icm-translatecolors) function translates an array of colors from the source [color space](c.md) to the destination color space as defined by a color transform.</span></span> <span data-ttu-id="b77c9-161">Questa funzione controlla internamente in base a una matrice di colori memorizzati nella cache per consentire la corrispondenza immediata dei colori comunemente trasformati.</span><span class="sxs-lookup"><span data-stu-id="b77c9-161">This function internally checks against an array of cached colors to enable immediate matching of commonly transformed colors.</span></span> <span data-ttu-id="b77c9-162">Questa trasformazione supporta le matrici di byte a 8 bit per canale e le matrici float a 32 bit per canale.</span><span class="sxs-lookup"><span data-stu-id="b77c9-162">This transform supports 8-bit per channel byte arrays and 32-bit per channel float arrays.</span></span> <span data-ttu-id="b77c9-163">Tutti gli altri formati verranno convertiti prima del passaggio alla nuova CTE.</span><span class="sxs-lookup"><span data-stu-id="b77c9-163">All other formats will be converted prior to passing off to the new CTE.</span></span>

<span data-ttu-id="b77c9-164">La funzione [**TranslateBitmapBits**](/windows/win32/api/icm/nf-icm-translatebitmapbits) dell'API MCI 2,0 converte i colori di una bitmap con un formato definito per produrre un'altra bitmap in un formato richiesto.</span><span class="sxs-lookup"><span data-stu-id="b77c9-164">The ICM 2.0 API [**TranslateBitmapBits**](/windows/win32/api/icm/nf-icm-translatebitmapbits) function translates the colors of a bitmap having a defined format to produce another bitmap in a requested format.</span></span> <span data-ttu-id="b77c9-165">Questa funzione controlla internamente in base a una matrice di colori memorizzati nella cache per consentire la corrispondenza immediata dei colori comunemente trasformati.</span><span class="sxs-lookup"><span data-stu-id="b77c9-165">This function internally checks against an array of cached colors to enable immediate matching of commonly transformed colors.</span></span> <span data-ttu-id="b77c9-166">Per evitare troppi percorsi di codice, supporto e complessità dei test, solo un numero limitato di formati bitmap è effettivamente supportato nel motore di trasformazione e interpolazione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-166">To avoid too many code paths, support, and testing complexity, only a limited number of bitmap formats are actually supported in the transform and interpolation engine.</span></span> <span data-ttu-id="b77c9-167">Questa funzione deve tradurre i formati bitmap in entrata e in uscita non nativi in formati supportati in modo nativo per l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-167">This function must translate the non-native incoming and outgoing bitmap formats into natively supported formats for processing.</span></span> <span data-ttu-id="b77c9-168">Questa trasformazione supporta solo bitmap a 8 bit per byte di canale e bitmap float a 32 bit per canale.</span><span class="sxs-lookup"><span data-stu-id="b77c9-168">This transform only supports 8-bit per channel byte bitmaps and 32-bit per channel float bitmaps.</span></span> <span data-ttu-id="b77c9-169">Tutti gli altri formati verranno convertiti prima del passaggio alla nuova CTE.</span><span class="sxs-lookup"><span data-stu-id="b77c9-169">All other formats will be converted prior to passing off to the new CTE.</span></span>

 

### <a name="sequential-transform-execution"></a><span data-ttu-id="b77c9-170">Esecuzione di trasformazione sequenziale</span><span class="sxs-lookup"><span data-stu-id="b77c9-170">Sequential Transform Execution</span></span>

<span data-ttu-id="b77c9-171">Se il parametro *dwFlags* dispone del bit di trasformazione sequenziale \_ impostato quando vengono chiamate le funzioni ICM [**CreateColorTransformW**](/windows/win32/api/icm/nf-icm-createcolortransformw) o **CreateMultiProfileTransform** , i passaggi della trasformazione vengono eseguiti in sequenza.</span><span class="sxs-lookup"><span data-stu-id="b77c9-171">If the *dwFlags* parameter has the SEQUENTIAL\_TRANSFORM bit set when the ICM functions [**CreateColorTransformW**](/windows/win32/api/icm/nf-icm-createcolortransformw) or **CreateMultiProfileTransform** are called, then the transform steps are executed sequentially.</span></span> <span data-ttu-id="b77c9-172">Questo significa che il codice scorre ogni modello di dispositivo, modello di aspetto dei colori e modello di mapping di gamut separatamente, come specificato dalla chiamata a **CreateColorTransform** o **CreateMultiProfileTransform** .</span><span class="sxs-lookup"><span data-stu-id="b77c9-172">This means that the code steps through each device model, color appearance model, and gamut mapping model separately, as specified by the **CreateColorTransform** or **CreateMultiProfileTransform** call.</span></span> <span data-ttu-id="b77c9-173">Questo può essere utile per il debug dei moduli plug-in, ma è molto più lento rispetto all'esecuzione tramite una trasformazione ottimizzata.</span><span class="sxs-lookup"><span data-stu-id="b77c9-173">This may be helpful for debugging plug-in modules, but it is much slower than executing through an optimized transform.</span></span> <span data-ttu-id="b77c9-174">L'esecuzione in modalità sequenziale non è quindi consigliata per il software di produzione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-174">Running in sequential mode is therefore not recommended for production software.</span></span> <span data-ttu-id="b77c9-175">Inoltre, è possibile che si verifichino lievi differenze nei risultati ottenuti in modalità sequenziale e in modalità ottimizzata.</span><span class="sxs-lookup"><span data-stu-id="b77c9-175">Also, there may be slight differences in the results obtained in sequential mode and in optimized mode.</span></span> <span data-ttu-id="b77c9-176">Ciò è dovuto a variazioni introdotte quando le funzioni vengono concatenate insieme.</span><span class="sxs-lookup"><span data-stu-id="b77c9-176">This is due to variations introduced when the functions are concatenated together.</span></span>

### <a name="creation-of-optimized-transforms"></a><span data-ttu-id="b77c9-177">Creazione di trasformazioni ottimizzate</span><span class="sxs-lookup"><span data-stu-id="b77c9-177">Creation of Optimized Transforms</span></span>

<span data-ttu-id="b77c9-178">Una trasformazione ottimizzata è una tabella di ricerca multidimensionale.</span><span class="sxs-lookup"><span data-stu-id="b77c9-178">An optimized transform is a multi-dimensional lookup table.</span></span> <span data-ttu-id="b77c9-179">La tabella può essere elaborata da un motore di interpolazione multidimensionale, ad esempio l'interpolazione tetraedrica, che applica i colori di input alla trasformazione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-179">The table can be processed by a multi-dimensional interpolation engine, such as tetrahedral interpolation, that applies the input colors to the transform.</span></span> <span data-ttu-id="b77c9-180">Nella sezione seguente viene descritto come vengono create le tabelle di ricerca ottimizzate.</span><span class="sxs-lookup"><span data-stu-id="b77c9-180">The following section describes how the optimized lookup tables are created.</span></span> <span data-ttu-id="b77c9-181">La sezione successiva descrive come interpolare nelle tabelle di ricerca ottimizzata.</span><span class="sxs-lookup"><span data-stu-id="b77c9-181">The section after that describes how to interpolate within the optimized lookup tables.</span></span>

## <a name="sparse-lookup-tables"></a><span data-ttu-id="b77c9-182">Tabelle di ricerca di tipo sparse</span><span class="sxs-lookup"><span data-stu-id="b77c9-182">Sparse lookup tables</span></span>

<span data-ttu-id="b77c9-183">Le stampanti convenzionali hanno inchiostri CMYK.</span><span class="sxs-lookup"><span data-stu-id="b77c9-183">Conventional printers have CMYK inks.</span></span> <span data-ttu-id="b77c9-184">Per estendere la gamma, un approccio consiste nell'aggiungere nuovi inchiostri al sistema.</span><span class="sxs-lookup"><span data-stu-id="b77c9-184">To extend the gamut, one approach is to add new inks to the system.</span></span> <span data-ttu-id="b77c9-185">Gli inchiostri che vengono in genere aggiunti sono colori che gli inchiostri CMYK presentano difficoltà di riproduzione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-185">The inks typically added are colors that CMYK inks have difficulty reproducing.</span></span> <span data-ttu-id="b77c9-186">Le scelte comuni sono arancio, verde, rosso, blu e così via. Per aumentare la "risoluzione apparente", è possibile usare inchiostri con tinte diverse, ad esempio, ciano chiaro, magenta chiaro e così via.</span><span class="sxs-lookup"><span data-stu-id="b77c9-186">Common choices are orange, green, red, blue, etc. To increase the "apparent resolution," inks with different tints can be used, for example, light cyan, light magenta, and so on.</span></span> <span data-ttu-id="b77c9-187">In effetti, il dispositivo della stampante ha più di quattro canali.</span><span class="sxs-lookup"><span data-stu-id="b77c9-187">In effect, the printer device has more than four channels.</span></span>

<span data-ttu-id="b77c9-188">Sebbene le stampanti siano dispositivi di output, eseguono anche la conversione dei colori dallo spazio del dispositivo a un altro spazio colore.</span><span class="sxs-lookup"><span data-stu-id="b77c9-188">Although printers are output devices, they also perform the color conversion from the device space to another color space.</span></span> <span data-ttu-id="b77c9-189">Nel caso di una stampante CMYK, si tratta di una trasformazione da CMYK a XYZ o dal "modello di avanzamento" della stampante.</span><span class="sxs-lookup"><span data-stu-id="b77c9-189">In the case of a CMYK printer, this would be a transformation from CMYK to XYZ, or the "forward model" of the printer.</span></span> <span data-ttu-id="b77c9-190">Combinando il modello di tipo avanti con altre trasformazioni, è possibile emulare una stampa CMYK in un altro dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b77c9-190">By combining the forward model with other transformations, it is possible to emulate a CMYK print on another device.</span></span> <span data-ttu-id="b77c9-191">Ad esempio, una stampante CMYK per un monitor RGB renderebbe possibile un meccanismo di correzione che emula una stampa di tale stampante CMYK su un monitor.</span><span class="sxs-lookup"><span data-stu-id="b77c9-191">For example, a printer CMYK to a monitor RGB would make possible a proofing mechanism that emulates a print of that CMYK printer on a monitor.</span></span> <span data-ttu-id="b77c9-192">Analogamente, lo stesso vale anche per le stampanti Hi-Fi.</span><span class="sxs-lookup"><span data-stu-id="b77c9-192">Similarly, the same also applies for hi-fi printers.</span></span> <span data-ttu-id="b77c9-193">Una conversione da CMYKOG a RGB consente la correzione della stampante CMYKOG su un monitor.</span><span class="sxs-lookup"><span data-stu-id="b77c9-193">A CMYKOG to RGB conversion allows proofing of the CMYKOG printer on a monitor.</span></span>

<span data-ttu-id="b77c9-194">L'approccio convenzionale all'implementazione di tale conversione dei colori consiste nell'usare un LUT uniforme.</span><span class="sxs-lookup"><span data-stu-id="b77c9-194">The conventional approach to implementing such color conversion is by using a uniform LUT.</span></span> <span data-ttu-id="b77c9-195">Ad esempio, in un profilo ICC per una stampante CMYKOG, la specifica ICC impone un tag A2B1 che archivia un LUT uniforme che rappresenta un campionamento uniforme nello spazio del dispositivo CMYKOG del modello di avanzamento, che passa da CMYKOG allo spazio di connessione del profilo ICC, ovvero CIELAB o CIE XYZ.</span><span class="sxs-lookup"><span data-stu-id="b77c9-195">For example, in an ICC profile for a CMYKOG printer, the ICC specification mandates an A2B1 tag that stores a uniform LUT representing a uniform sampling in the CMYKOG device space of the forward model, which goes from CMYKOG to the ICC profile connection space (either CIELAB or CIEXYZ).</span></span> <span data-ttu-id="b77c9-196">Il profilo di collegamento del dispositivo ICC consente una trasformazione diretta dallo spazio del dispositivo CMYKOG a qualsiasi spazio di colore incluso uno spazio del dispositivo, anche sotto forma di un LUT campionato in modo uniforme nello spazio CMYKOG.</span><span class="sxs-lookup"><span data-stu-id="b77c9-196">The ICC device link profile enables a direct transformation from CMYKOG device space to any color space including a device space, also in the form of a LUT sampled uniformly in CMYKOG space.</span></span> <span data-ttu-id="b77c9-197">Il campionamento non viene mai eseguito con livelli di 256 (profondità di bit 8) a causa della grande LUT risultante, tranne nel caso di dispositivi monocromi (1 canale).</span><span class="sxs-lookup"><span data-stu-id="b77c9-197">Sampling is never done with 256 levels (bit depth 8) because of the huge LUT resulting, except in the case of monochrome devices (1 channel).</span></span> <span data-ttu-id="b77c9-198">Viene invece utilizzato il campionamento con una profondità di bit inferiore; alcune scelte tipiche sono 9 (profondità bit 3), 17 (profondità bit 4), 33 (profondità bit 5).</span><span class="sxs-lookup"><span data-stu-id="b77c9-198">Instead, sampling with lower bit depth is used; some typical choices are 9 (bit depth 3), 17 (bit depth 4), 33 (bit depth 5).</span></span> <span data-ttu-id="b77c9-199">Con il numero di livelli inferiore a 256 in ogni canale, LUT viene usato in combinazione con un algoritmo di interpolazione per produrre il risultato se un livello è compreso tra due livelli campionati.</span><span class="sxs-lookup"><span data-stu-id="b77c9-199">With the number of levels less than 256 in each channel, the LUT is used in conjunction with an interpolation algorithm to produce the result if a level is between two sampled levels.</span></span>

<span data-ttu-id="b77c9-200">Anche se un LUT uniforme è concettualmente semplice da implementare e l'interpolazione in un LUT uniforme è in genere efficiente, la dimensione LUT aumenta in modo esponenziale con la dimensione di input.</span><span class="sxs-lookup"><span data-stu-id="b77c9-200">While a uniform LUT is conceptually simple to implement, and interpolation on a uniform LUT is generally efficient, the LUT size increases exponentially with the input dimension.</span></span> <span data-ttu-id="b77c9-201">Infatti, se *d* è il numero di passaggi utilizzati nell'LUT uniforme e *n* è il numero di canali nello spazio colore di origine, il numero di nodi in LUT è ![ Mostra la variabile per il numero di nodi in un LUT. ](images/transformcreation-image002.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-201">In fact, if *d* is the number of steps used in the uniform LUT, and *n* is the number of channels in the source color space, then the number of nodes in the LUT is ![Shows the variable for the number of nodes in an LUT.](images/transformcreation-image002.gif).</span></span> <span data-ttu-id="b77c9-202">Ovviamente, il numero di nodi richiede rapidamente una quantità di spazio di archiviazione in memoria che anche i sistemi di elaborazione Top-of-line hanno difficoltà a gestire la richiesta.</span><span class="sxs-lookup"><span data-stu-id="b77c9-202">Clearly, the number of nodes quickly demands so much storage in memory that even top-of-the-line computing systems have difficulty handling the demand.</span></span> <span data-ttu-id="b77c9-203">Per i dispositivi con sei o otto canali, un'implementazione ICC del profilo di dispositivo richiede l'uso di pochi passaggi in LUT, a volte anche fino a cinque passaggi nella tabella A2B1 per preservare il profilo in megabyte anziché in gigabyte.</span><span class="sxs-lookup"><span data-stu-id="b77c9-203">For devices with six or eight channels, an ICC implementation of the device profile requires using few steps in the LUT, sometimes even down to five steps in the A2B1 table to keep the profile within megabytes instead of gigabytes.</span></span> <span data-ttu-id="b77c9-204">Ovviamente, l'utilizzo di un numero inferiore di passaggi aumenta l'errore di interpolazione, perché ora sono presenti meno esempi.</span><span class="sxs-lookup"><span data-stu-id="b77c9-204">Clearly, using a smaller number of steps increases interpolation error, because there are now fewer samples.</span></span> <span data-ttu-id="b77c9-205">Poiché il valore di LUT deve essere uniforme, l'accuratezza sull'intero spazio dei colori viene ridotta anche in queste aree dello spazio in cui una differenza di colore significativa può essere causata da una piccola modifica del valore del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b77c9-205">Because the LUT must be uniform, accuracy over the whole color space is degraded even in those regions of the space where a significant color difference can be caused by small change in the device value.</span></span>

<span data-ttu-id="b77c9-206">Nei dispositivi con più di quattro coloranti, determinati spazi sottospazi dell'intero spazio del dispositivo sono più importanti di altri.</span><span class="sxs-lookup"><span data-stu-id="b77c9-206">In devices with more than four colorants, certain subspaces of the whole device space are more important than others.</span></span> <span data-ttu-id="b77c9-207">Nello spazio CMYKOG, ad esempio, gli inchiostri cyan e verde vengono usati raramente insieme perché le tonalità si sovrappongono in gran parte.</span><span class="sxs-lookup"><span data-stu-id="b77c9-207">For example, in CMYKOG space, cyan and green inks are seldom used together because their hues largely overlap each other.</span></span> <span data-ttu-id="b77c9-208">In modo analogo, gli inchiostri giallo e arancione si sovrappongono.</span><span class="sxs-lookup"><span data-stu-id="b77c9-208">Similarly, yellow and orange inks largely overlap each other.</span></span> <span data-ttu-id="b77c9-209">Una riduzione uniforme del numero di passaggi può essere considerata come un calo generale della qualità in tutto lo spazio dei colori, che è un elemento che è possibile permettersi per le combinazioni di inchiostro improbabile, ma non per le combinazioni probabili o importanti.</span><span class="sxs-lookup"><span data-stu-id="b77c9-209">A uniform reduction in the number of steps can be viewed as an overall degradation in quality across the whole color space, which is something you can afford for the improbable ink combinations, but not for the likely or important combinations.</span></span>

<span data-ttu-id="b77c9-210">Anche se un LUT campionato in modo uniforme è semplice ed efficiente per l'interpolazione, impone requisiti di memoria elevati in quanto aumenta la dimensione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-210">While a uniformly sampled LUT is simple and efficient for interpolation, it imposes huge memory requirements as dimension increases.</span></span> <span data-ttu-id="b77c9-211">In realtà, sebbene un dispositivo possa avere sei o otto canali, viene usato raramente simultaneamente.</span><span class="sxs-lookup"><span data-stu-id="b77c9-211">In reality, while a device might have six or eight channels, they are rarely used simultaneously.</span></span> <span data-ttu-id="b77c9-212">Nella maggior parte dei casi, la trasformazione colore di input per colore ha solo pochi coloranti "attivi" e pertanto si trova in uno spazio di colore più basso.</span><span class="sxs-lookup"><span data-stu-id="b77c9-212">In most cases, the input color to color transformation has only a few "active" colorants and so resides in a lower dimensional color space.</span></span> <span data-ttu-id="b77c9-213">Ciò significa anche che l'interpolazione può essere eseguita in modo più efficiente nello spazio di dimensioni inferiori perché l'interpolazione è più veloce quando la dimensione è inferiore.</span><span class="sxs-lookup"><span data-stu-id="b77c9-213">This also means that interpolation can be done more efficiently in that lower dimensional space because interpolation is faster when the dimension is lower.</span></span>

<span data-ttu-id="b77c9-214">Pertanto, l'approccio consiste nel stratificare l'intero spazio del dispositivo in sottospazi di varie dimensioni.</span><span class="sxs-lookup"><span data-stu-id="b77c9-214">Therefore, the approach is to stratify the whole device space into subspaces of various dimensions.</span></span> <span data-ttu-id="b77c9-215">Poiché le dimensioni inferiori, ovvero quelle che combinano tre o quattro coloranti, sono più importanti, stratifica lo spazio, è anche possibile applicare frequenze di campionamento diverse; ovvero un numero diverso di passaggi, per le parti; aumento delle frequenze di campionamento per le dimensioni inferiori, riduzione per dimensioni maggiori.</span><span class="sxs-lookup"><span data-stu-id="b77c9-215">And because lower dimensions (those combining three or four colorants) are more important, by stratifying the space, you can also apply different sampling rates; that is, a different number of steps, to the pieces; increasing sampling rates for lower dimensions, reducing them for higher dimensions.</span></span>

<span data-ttu-id="b77c9-216">Per correggere le annotazioni, *n* è il numero di canali nello spazio dei colori di origine della trasformazione colore che si desidera campionare.</span><span class="sxs-lookup"><span data-stu-id="b77c9-216">To fix notations, *n* is the number of channels in the source color space of the color transformation that you want to sample.</span></span> <span data-ttu-id="b77c9-217">È anche possibile fare riferimento a *n* come dimensione di input e ![ indica che n è maggiore o uguale a 5.](images/transformcreation-image004.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-217">You can also refer to *n* as the input dimension, and ![Shows n greater than or equal to 5.](images/transformcreation-image004.gif)</span></span> <span data-ttu-id="b77c9-218">, se non diversamente specificato.</span><span class="sxs-lookup"><span data-stu-id="b77c9-218">, unless otherwise specified.</span></span>

<span data-ttu-id="b77c9-219">I blocchi predefiniti di base sono LUTs di diverse *dimensioni* e dimensioni di input, anziché un LUT uniforme con dimensione di input *n*.</span><span class="sxs-lookup"><span data-stu-id="b77c9-219">The basic building blocks are LUTs of various input *dimensions* and sizes, instead of one uniform LUT with input dimension *n*.</span></span> <span data-ttu-id="b77c9-220">Per maggiore precisione, un *LUT* è un reticolo rettangolare imposto per un cubo di unità; ovvero tutte le coordinate del dispositivo vengono normalizzate nell'intervallo compreso tra \[ 0 e 1 \] .</span><span class="sxs-lookup"><span data-stu-id="b77c9-220">To be more precise, a *LUT* is a rectangular lattice imposed on a unit cube; that is, all the device coordinates are normalized to the range \[0, 1\]).</span></span> <span data-ttu-id="b77c9-221">Se è la dimensione di input di LUT (si noti che non deve essere uguale a *n*, sebbene ![ mostri V minore o uguale a n.](images/transformcreation-image006.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-221">if   is the input dimension of the lut (note that   does not have to be equal to *n*, although ![Shows V less than or equal to n.](images/transformcreation-image006.gif)</span></span> <span data-ttu-id="b77c9-222">è obbligatorio), quindi è costituito da griglie di campionamento unidimensionale ν:</span><span class="sxs-lookup"><span data-stu-id="b77c9-222">is required), then it consists of ν one-dimensional sampling grids:</span></span>

<span data-ttu-id="b77c9-223">SAMP *i*: ![ Mostra una griglia di campionamento unidimensionale.](images/transformcreation-image008.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-223">Samp *i*: ![Shows a one-dimensional sampling grid.](images/transformcreation-image008.gif)</span></span>

<span data-ttu-id="b77c9-224">dove tutte le *x <sub>j</sub>* devono trovarsi nell'intervallo \[ 0, 1 \] , ![ Mostra un superscript d (i).](images/transformcreation-image010.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-224">where all the *x<sub>j</sub>s* must lie in the range \[0, 1\], ![Shows a superscript d(i).](images/transformcreation-image010.gif)</span></span> <span data-ttu-id="b77c9-225">è il numero di passaggi per il campionamento del canale *i* , che deve essere almeno 1, e ![ Mostra un spuperscript di X (pedice) d (i).](images/transformcreation-image012.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-225">is the number of steps for the *i* th channel sampling which must be at least 1, and ![Shows a spuperscript of X (subscript) d(i).](images/transformcreation-image012.gif)</span></span> <span data-ttu-id="b77c9-226">deve essere 1.</span><span class="sxs-lookup"><span data-stu-id="b77c9-226">must be 1.</span></span> <span data-ttu-id="b77c9-227">D'altra parte, ![ Mostra un superscript X (pedice 1).](images/transformcreation-image014.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-227">On the other hand, ![Shows a superscript X (subscript 1).](images/transformcreation-image014.gif)</span></span> <span data-ttu-id="b77c9-228">non deve essere 0.</span><span class="sxs-lookup"><span data-stu-id="b77c9-228">is not required to be 0.</span></span>

<span data-ttu-id="b77c9-229">Verranno definiti solo i due casi speciali seguenti di LUT.</span><span class="sxs-lookup"><span data-stu-id="b77c9-229">Only the following two special cases of LUT will be defined.</span></span>

<span data-ttu-id="b77c9-230">*Closed LUT*: si tratta di un LUT con il requisito aggiuntivo per ogni SAMP *<sub>i</sub>*, che ![ Mostra un superscript X (pedice 1) uguale a 0.](images/transformcreation-image016.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-230">*Closed LUT*: This is a LUT with the additional requirement that for each Samp *<sub>i</sub>*, ![Shows a superscript X (subscript 1) equals 0.](images/transformcreation-image016.gif)</span></span> <span data-ttu-id="b77c9-231">e ![ Mostra un apice d (i) maggiore o uguale a 2.](images/transformcreation-image018.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-231">, and ![Shows a superscript d(i) greater than or equal to 2.](images/transformcreation-image018.gif)</span></span> <span data-ttu-id="b77c9-232">.</span><span class="sxs-lookup"><span data-stu-id="b77c9-232">.</span></span> <span data-ttu-id="b77c9-233">Un LUT chiuso uniforme è un LUT chiuso con lo stesso valore che ![ Mostra un apice d (i).](images/transformcreation-image010.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-233">A uniform closed LUT is a closed LUT that has the same ![Shows a superscript d(i).](images/transformcreation-image010.gif)</span></span> <span data-ttu-id="b77c9-234">per ogni canale e i nodi sono distanziati in modo uniforme tra 0 e 1.</span><span class="sxs-lookup"><span data-stu-id="b77c9-234">for each channel, and the nodes are uniformly spaced between 0 and 1.</span></span>

<span data-ttu-id="b77c9-235">*Open LUT*: si tratta di un LUT con il requisito aggiuntivo per ogni SAMP *i*, che ![ Mostra un superscript X (pedice 1) maggiore di 0.](images/transformcreation-image020.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-235">*Open LUT*: This is a LUT with the additional requirement that for each Samp *i*, ![SHows a superscript X (subscript 1) greater than 0.](images/transformcreation-image020.gif)</span></span> <span data-ttu-id="b77c9-236">.</span><span class="sxs-lookup"><span data-stu-id="b77c9-236">.</span></span> <span data-ttu-id="b77c9-237">È possibile fare in modo che ![ mostri un apice d (i) uguale a 1.](images/transformcreation-image022.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-237">It is OK to have ![Shows a superscript d(i) equal to 1.](images/transformcreation-image022.gif)</span></span> <span data-ttu-id="b77c9-238">.</span><span class="sxs-lookup"><span data-stu-id="b77c9-238">.</span></span>

<span data-ttu-id="b77c9-239">L'obiettivo è stratificare il cubo di unità \[ 0, 1 \] *n* in una raccolta di LUTs chiusi e Open LUTS, in modo che l'intera raccolta copra il cubo di unità.</span><span class="sxs-lookup"><span data-stu-id="b77c9-239">The goal is to stratify the unit cube \[0, 1\] *n* into a collection of closed LUTs and open LUTs, such that the whole collection will cover the unit cube.</span></span> <span data-ttu-id="b77c9-240">È concettualmente più semplice organizzare questi "LUT strati" in base alle dimensioni, in modo che al livello superiore:</span><span class="sxs-lookup"><span data-stu-id="b77c9-240">It is conceptually simpler to organize these "LUT strata" by their dimensions, so that on the top level:</span></span>

![Mostra il primo livello per organizzare gli strati L U T in base alle dimensioni.](images/transformcreation-image024.png)

<span data-ttu-id="b77c9-242">dove ![ Mostra l'indice Sigma k.](images/transformcreation-image026.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-242">where ![Shows sigma subscript k.](images/transformcreation-image026.gif)</span></span> <span data-ttu-id="b77c9-243">è la "raccolta di strati *k* -dimensionali".</span><span class="sxs-lookup"><span data-stu-id="b77c9-243">is the "*k* -dimensional strata collection."</span></span> <span data-ttu-id="b77c9-244">Si noti che la dimensione Strata inizia da 3 anziché da 0; ovvero punti, perché l'interpolazione di combinazioni a tre colori può essere gestita senza una quantità eccessiva di memoria richiesta.</span><span class="sxs-lookup"><span data-stu-id="b77c9-244">Note that the strata dimension starts from 3 instead of 0; that is, points, because interpolation of three-colorant combinations can be handled without too much memory requirement.</span></span>

## <a name="description-of-the-lut-strata"></a><span data-ttu-id="b77c9-245">Descrizione degli strati LUT</span><span class="sxs-lookup"><span data-stu-id="b77c9-245">Description of the LUT strata</span></span>

<span data-ttu-id="b77c9-246">In questa implementazione:</span><span class="sxs-lookup"><span data-stu-id="b77c9-246">In this implementation:</span></span>

1. <span data-ttu-id="b77c9-247">![Mostra l'indice Sigma 3.](images/transformcreation-image028.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-247">![Shows sigma subscript 3.](images/transformcreation-image028.gif)</span></span> <span data-ttu-id="b77c9-248">è costituito da LUTs chiusi con tre input, uno da ogni possibile combinazione di tre coloranti scelti da *n* coloratori.</span><span class="sxs-lookup"><span data-stu-id="b77c9-248">consists of closed LUTs with three inputs, one from every possible combination of three colorants chosen out of the *n* colorants.</span></span>

2. ![Mostra l'indice Sigma 4.](images/transformcreation-image030.gif) <span data-ttu-id="b77c9-250">è costituito da un LUT chiuso per la combinazione di CMYK (o dei primi quattro coloranti), insieme a</span><span class="sxs-lookup"><span data-stu-id="b77c9-250">consists of one closed LUT for the combination CMYK (or the first four colorants), together with</span></span> ![Mostra (n su 4) meno 1.](images/transformcreation-image032.png) <span data-ttu-id="b77c9-252">Aprire LUTs per tutte le altre combinazioni a quattro colori.</span><span class="sxs-lookup"><span data-stu-id="b77c9-252">open LUTs for all other four-colorant combinations.</span></span> <span data-ttu-id="b77c9-253">Individuando la combinazione di CMYK, si conferma che si tratta di una combinazione importante.</span><span class="sxs-lookup"><span data-stu-id="b77c9-253">By singling out the CMYK combination, you acknowledge that it is an important combination.</span></span>

3. <span data-ttu-id="b77c9-254">Per ![ Mostra k uguale a 5,..., n.](images/transformcreation-image034.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-254">For ![Shows k equal to 5, ..., n.](images/transformcreation-image034.gif)</span></span> <span data-ttu-id="b77c9-255">, ![ Mostra l'indice Sigma k.](images/transformcreation-image026.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-255">, ![Shows sigma subscript k.](images/transformcreation-image026.gif)</span></span> <span data-ttu-id="b77c9-256">è costituito da ![ esposizioni (n su k).](images/transformcreation-image037.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-256">consists of ![Shows (n over k).](images/transformcreation-image037.gif)</span></span> <span data-ttu-id="b77c9-257">Aprire LUTs, una per ogni possibile combinazione di scelta di *k* coloranti dal totale di *n* coloranti.</span><span class="sxs-lookup"><span data-stu-id="b77c9-257">open LUTs, one for each possible combination of choosing *k* colorants from the total of *n* colorants.</span></span>

<span data-ttu-id="b77c9-258">Rimane per specificare le dimensioni del LUTs.</span><span class="sxs-lookup"><span data-stu-id="b77c9-258">It remains to specify the sizes of the LUTs.</span></span> <span data-ttu-id="b77c9-259">La differenza principale tra LUTs aperti e chiusi è che i LUTs aperti non si sovrappongono e la LUTs chiusa potrebbe sovrapporsi ai visi limite.</span><span class="sxs-lookup"><span data-stu-id="b77c9-259">The key difference between open and closed LUTs is that open LUTs don't overlap, and closed LUTs might overlap at the boundary faces.</span></span> <span data-ttu-id="b77c9-260">Poiché il campionamento unidimensionale in un LUT aperto non contiene 0, significa essenzialmente che un LUT aperto manca la metà delle facce limite, quindi il nome "Apri".</span><span class="sxs-lookup"><span data-stu-id="b77c9-260">The fact that the one-dimensional sampling in an open LUT does not contain 0, essentially means that an open LUT is missing half of the boundary faces, hence the name "open."</span></span> <span data-ttu-id="b77c9-261">Se due LUTs non si sovrappongono, è possibile usare un numero diverso di passaggi o posizioni dei nodi in ogni canale.</span><span class="sxs-lookup"><span data-stu-id="b77c9-261">If two LUTs don't overlap, you can use a different number of steps or node locations in each channel.</span></span> <span data-ttu-id="b77c9-262">Lo stesso non è vero se due LUTs si sovrappongono.</span><span class="sxs-lookup"><span data-stu-id="b77c9-262">The same is not true if two LUTs overlap.</span></span> <span data-ttu-id="b77c9-263">In tal caso, se il numero di passaggi o i percorsi del nodo sono diversi, un punto che si trova nell'intersezione dei due LUTs riceverà un valore di interpolazione diverso a seconda del LUT usato nell'interpolazione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-263">In that case, if the number of steps or the node locations are different, a point lying in the intersection of the two LUTs will receive a different interpolation value depending on which LUT is used in the interpolation.</span></span> <span data-ttu-id="b77c9-264">Una soluzione semplice a questo problema consiste nell'usare il campionamento uniforme con lo stesso numero di passaggi ogni volta che due LUTs si sovrappongono.</span><span class="sxs-lookup"><span data-stu-id="b77c9-264">A simple solution to this problem is to use uniform sampling with the same number of steps whenever two LUTs overlap.</span></span> <span data-ttu-id="b77c9-265">In altre parole:</span><span class="sxs-lookup"><span data-stu-id="b77c9-265">In other words:</span></span>

<span data-ttu-id="b77c9-266">Tutti i LUTs chiusi (tutti i LUTs a tre colori e i LUT CMYK in questa implementazione) devono essere uniformi e avere lo stesso numero di passaggi, che sono indicati *d*.</span><span class="sxs-lookup"><span data-stu-id="b77c9-266">All closed LUTs (all three-colorant LUTs and the CMYK LUT in this implementation) must be uniform and have the same number of steps, which are denoted *d*.</span></span>

<span data-ttu-id="b77c9-267">I due algoritmi seguenti possono essere usati per determinare il numero di passaggi *d* per LUTS chiuse e il numero di passaggi per LUTS aperti.</span><span class="sxs-lookup"><span data-stu-id="b77c9-267">The following two algorithms can be used to determine the number of steps *d* for closed LUTs and the number of steps for open LUTs.</span></span>

## <a name="algorithm-1"></a><span data-ttu-id="b77c9-268">Algoritmo \# 1</span><span class="sxs-lookup"><span data-stu-id="b77c9-268">Algorithm \#1</span></span>

<span data-ttu-id="b77c9-269">Questo algoritmo non richiede input esterno.</span><span class="sxs-lookup"><span data-stu-id="b77c9-269">This algorithm does not require external input.</span></span>

<span data-ttu-id="b77c9-270">Tutte le LUTs chiuse saranno uniformi con il numero *d* passaggi.</span><span class="sxs-lookup"><span data-stu-id="b77c9-270">All the closed LUTs will be uniform with *d* number of steps.</span></span>

<span data-ttu-id="b77c9-271">Tutti i LUTs aperti della dimensione *k* avranno lo stesso numero di passaggi che ![ mostrano d (k).](images/transformcreation-image039.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-271">All the open LUTs of dimension *k* will have same number of steps ![Shows d(k).](images/transformcreation-image039.gif)</span></span> <span data-ttu-id="b77c9-272">in ogni canale di input e i nodi sono equidistanti. ovvero, per ogni ![ Mostra i è uguale a 1, 2,..., k.](images/transformcreation-image041.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-272">in each input channel, and the nodes are equally spaced; that is, for each ![Shows i equal to 1, 2, ..., k.](images/transformcreation-image041.gif)</span></span> <span data-ttu-id="b77c9-273">.</span><span class="sxs-lookup"><span data-stu-id="b77c9-273">.</span></span>

<span data-ttu-id="b77c9-274">SAMP *i*: ![ Mostra l'algoritmo SAMP i.](images/transformcreation-image043.png)</span><span class="sxs-lookup"><span data-stu-id="b77c9-274">Samp *i*: ![Shows samp i algorithm.](images/transformcreation-image043.png)</span></span>

<span data-ttu-id="b77c9-275">Infine, specificare *d* e *d* (*k* ) nella tabella seguente 1.</span><span class="sxs-lookup"><span data-stu-id="b77c9-275">Finally, specify *d* and *d* (*k* ) in the following Table 1.</span></span> <span data-ttu-id="b77c9-276">Le tre modalità "Proof", "Normal" e "Best" sono le impostazioni di qualità MCI 2,0.</span><span class="sxs-lookup"><span data-stu-id="b77c9-276">The three modes, "proof," "normal," and "best" are the ICM 2.0 quality settings.</span></span> <span data-ttu-id="b77c9-277">In questa implementazione, la modalità di prova ha il footprint di memoria più piccolo e la modalità migliore ha il footprint di memoria più grande.</span><span class="sxs-lookup"><span data-stu-id="b77c9-277">In this implementation, the proof mode has the smallest memory footprint, and best mode has the largest memory footprint.</span></span>

<span data-ttu-id="b77c9-278">Per implementare questo algoritmo, è necessario chiamare il seguente algoritmo \# 2.</span><span class="sxs-lookup"><span data-stu-id="b77c9-278">To implement this algorithm, you must call the following Algorithm \#2.</span></span> <span data-ttu-id="b77c9-279">Gli utenti possono specificare le proprie posizioni di campionamento, usando le tabelle come guida.</span><span class="sxs-lookup"><span data-stu-id="b77c9-279">Users can specify their own sampling locations, using the tables as a guide.</span></span>

## <a name="algorithm-2"></a><span data-ttu-id="b77c9-280">Algoritmo \# 2</span><span class="sxs-lookup"><span data-stu-id="b77c9-280">Algorithm \#2</span></span>

<span data-ttu-id="b77c9-281">Questo algoritmo richiede un input esterno sotto forma di un elenco di percorsi di campionamento "importanti", ma è più adattivo e può ridurre potenzialmente lo spazio di memoria.</span><span class="sxs-lookup"><span data-stu-id="b77c9-281">This algorithm requires external input in the form of a list of "important" sampling locations, but it is more adaptive and can save memory space potentially.</span></span>

<span data-ttu-id="b77c9-282">L'input richiesto è una matrice di valori di dispositivo forniti dall'utente.</span><span class="sxs-lookup"><span data-stu-id="b77c9-282">The required input is an array of device values supplied by the user.</span></span> <span data-ttu-id="b77c9-283">Questi valori del dispositivo indicano quale area dello spazio dei colori del dispositivo è importante; ovvero, quale area deve essere campionata più.</span><span class="sxs-lookup"><span data-stu-id="b77c9-283">These device values indicate which region of the device color space is important; that is, which region should be sampled more.</span></span>

<span data-ttu-id="b77c9-284">Tutti i LUTs chiusi saranno uniformi con il numero di passaggi *d* , come descritto nell'algoritmo \# 1.</span><span class="sxs-lookup"><span data-stu-id="b77c9-284">All the closed LUTs will be uniform with *d* number of steps as described in Algorithm \#1.</span></span> <span data-ttu-id="b77c9-285">I valori per *d* sono riportati nella tabella 1.</span><span class="sxs-lookup"><span data-stu-id="b77c9-285">Values for *d* are provided in Table 1.</span></span>

<span data-ttu-id="b77c9-286">*(a) Uniform closed LUT*</span><span class="sxs-lookup"><span data-stu-id="b77c9-286">*(a) Uniform Closed LUT*</span></span>



|         | <span data-ttu-id="b77c9-287">Modalità di prova</span><span class="sxs-lookup"><span data-stu-id="b77c9-287">Proof mode</span></span> | <span data-ttu-id="b77c9-288">Modalità normale</span><span class="sxs-lookup"><span data-stu-id="b77c9-288">Normal mode</span></span> | <span data-ttu-id="b77c9-289">Modalità migliore</span><span class="sxs-lookup"><span data-stu-id="b77c9-289">Best mode</span></span> |
|---------|------------|-------------|-----------|
| <span data-ttu-id="b77c9-290">***d***</span><span class="sxs-lookup"><span data-stu-id="b77c9-290">***d***</span></span> | <span data-ttu-id="b77c9-291">9</span><span class="sxs-lookup"><span data-stu-id="b77c9-291">9</span></span>          | <span data-ttu-id="b77c9-292">17</span><span class="sxs-lookup"><span data-stu-id="b77c9-292">17</span></span>          | <span data-ttu-id="b77c9-293">33</span><span class="sxs-lookup"><span data-stu-id="b77c9-293">33</span></span>        |



 

<span data-ttu-id="b77c9-294">*(b) aprire LUT*</span><span class="sxs-lookup"><span data-stu-id="b77c9-294">*(b) Open LUT*</span></span>



| <span data-ttu-id="b77c9-295">Dimensione di input</span><span class="sxs-lookup"><span data-stu-id="b77c9-295">Input dimension</span></span> | <span data-ttu-id="b77c9-296">Modalità di prova</span><span class="sxs-lookup"><span data-stu-id="b77c9-296">Proof mode</span></span> | <span data-ttu-id="b77c9-297">Modalità normale</span><span class="sxs-lookup"><span data-stu-id="b77c9-297">Normal mode</span></span> | <span data-ttu-id="b77c9-298">Modalità migliore</span><span class="sxs-lookup"><span data-stu-id="b77c9-298">Best mode</span></span> |
|-----------------|------------|-------------|-----------|
| <span data-ttu-id="b77c9-299">4</span><span class="sxs-lookup"><span data-stu-id="b77c9-299">4</span></span>               | <span data-ttu-id="b77c9-300">5</span><span class="sxs-lookup"><span data-stu-id="b77c9-300">5</span></span>          | <span data-ttu-id="b77c9-301">7</span><span class="sxs-lookup"><span data-stu-id="b77c9-301">7</span></span>           | <span data-ttu-id="b77c9-302">9</span><span class="sxs-lookup"><span data-stu-id="b77c9-302">9</span></span>         |
| <span data-ttu-id="b77c9-303">5</span><span class="sxs-lookup"><span data-stu-id="b77c9-303">5</span></span>               | <span data-ttu-id="b77c9-304">2</span><span class="sxs-lookup"><span data-stu-id="b77c9-304">2</span></span>          | <span data-ttu-id="b77c9-305">3</span><span class="sxs-lookup"><span data-stu-id="b77c9-305">3</span></span>           | <span data-ttu-id="b77c9-306">3</span><span class="sxs-lookup"><span data-stu-id="b77c9-306">3</span></span>         |
| <span data-ttu-id="b77c9-307">6</span><span class="sxs-lookup"><span data-stu-id="b77c9-307">6</span></span>               | <span data-ttu-id="b77c9-308">2</span><span class="sxs-lookup"><span data-stu-id="b77c9-308">2</span></span>          | <span data-ttu-id="b77c9-309">3</span><span class="sxs-lookup"><span data-stu-id="b77c9-309">3</span></span>           | <span data-ttu-id="b77c9-310">3</span><span class="sxs-lookup"><span data-stu-id="b77c9-310">3</span></span>         |
| <span data-ttu-id="b77c9-311">7</span><span class="sxs-lookup"><span data-stu-id="b77c9-311">7</span></span>               | <span data-ttu-id="b77c9-312">2</span><span class="sxs-lookup"><span data-stu-id="b77c9-312">2</span></span>          | <span data-ttu-id="b77c9-313">2</span><span class="sxs-lookup"><span data-stu-id="b77c9-313">2</span></span>           | <span data-ttu-id="b77c9-314">2</span><span class="sxs-lookup"><span data-stu-id="b77c9-314">2</span></span>         |
| <span data-ttu-id="b77c9-315">8 o più</span><span class="sxs-lookup"><span data-stu-id="b77c9-315">8 or more</span></span>       | <span data-ttu-id="b77c9-316">2</span><span class="sxs-lookup"><span data-stu-id="b77c9-316">2</span></span>          | <span data-ttu-id="b77c9-317">2</span><span class="sxs-lookup"><span data-stu-id="b77c9-317">2</span></span>           | <span data-ttu-id="b77c9-318">2</span><span class="sxs-lookup"><span data-stu-id="b77c9-318">2</span></span>         |



 

<span data-ttu-id="b77c9-319">**Tabella 1:** Dimensioni LUT utilizzate nell'algoritmo</span><span class="sxs-lookup"><span data-stu-id="b77c9-319">**Table 1:** LUT sizes used in the algorithm</span></span>

<span data-ttu-id="b77c9-320">Ogni LUT aperto può avere un numero diverso di passaggi in ogni canale di input e i percorsi di campionamento non devono essere equidistanti.</span><span class="sxs-lookup"><span data-stu-id="b77c9-320">Each open LUT can have a different number of steps in each input channel, and the sampling locations do not have to be equally spaced.</span></span> <span data-ttu-id="b77c9-321">Per un determinato strato LUT aperto, è presente una combinazione di colori associata. ad esempio, Mostra il sottoscript ![ c 1,..., c indice k.](images/transformcreation-image045.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-321">For a given open LUT stratum, there is an associated colorant combination, for example, ![Shows C subscript 1, ..., C subscript k.](images/transformcreation-image045.gif)</span></span> <span data-ttu-id="b77c9-322">, dove ![ Mostra gli indici C.](images/transformcreation-image047.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-322">, where the ![Shows C subscript i.](images/transformcreation-image047.gif)</span></span> <span data-ttu-id="b77c9-323">i sono numeri interi distinti compresi tra 1 e *n*.</span><span class="sxs-lookup"><span data-stu-id="b77c9-323">s are distinct integers between 1 and *n*.</span></span> <span data-ttu-id="b77c9-324">Si tratta degli indici del canale corrispondenti ai coloranti "attivi" in questo strato.</span><span class="sxs-lookup"><span data-stu-id="b77c9-324">They are the channel indices corresponding to the "active" colorants in this strata.</span></span>

<span data-ttu-id="b77c9-325">PASSAGGIO 1: filtrare la matrice inputted dei valori del dispositivo che non sono contenuti in questo strato.</span><span class="sxs-lookup"><span data-stu-id="b77c9-325">STEP 1: Filter out the inputted array of device values that are not contained in this strata.</span></span> <span data-ttu-id="b77c9-326">Un valore del dispositivo ![ Mostra x indice 1, x indice 2,..., x indice n.](images/transformcreation-image049.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-326">A device value ![Shows X subscript 1, X subscript 2, ..., X subscript n.](images/transformcreation-image049.gif)</span></span> <span data-ttu-id="b77c9-327">è contenuto negli strati, se e solo se ![ Mostra un set di valori per un canale.](images/transformcreation-image051.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-327">is contained in the strata, if and only if ![Shows a set of values for a channel.](images/transformcreation-image051.gif)</span></span> <span data-ttu-id="b77c9-328">tutti gli altri canali sono pari a 0.</span><span class="sxs-lookup"><span data-stu-id="b77c9-328">and all other channels are 0.</span></span> <span data-ttu-id="b77c9-329">Se il set filtrato contiene *N* voci, Let</span><span class="sxs-lookup"><span data-stu-id="b77c9-329">If the filtered set has *N* entries, let</span></span>

![Mostra un'equazione da usare se il set filtrato contiene N voci.](images/transformcreation-image053.png)

<span data-ttu-id="b77c9-331">Per ogni</span><span class="sxs-lookup"><span data-stu-id="b77c9-331">For each</span></span> ![Mostra i uguali a 1, 2,..., k.](images/transformcreation-image041.gif) <span data-ttu-id="b77c9-333">, eseguire l'iterazione dei passaggi seguenti 2-5:</span><span class="sxs-lookup"><span data-stu-id="b77c9-333">, iterate the following steps 2-5:</span></span>

<span data-ttu-id="b77c9-334">PASSAGGIO 2: se ![ Mostra il tentativo di indice d (k) è uguale a 1.](images/transformcreation-image055.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-334">STEP 2: If ![Shows d subscript tentative (k) equal to 1.](images/transformcreation-image055.gif)</span></span> <span data-ttu-id="b77c9-335">, SAMP *i* ha un solo punto, che deve essere 1,0.</span><span class="sxs-lookup"><span data-stu-id="b77c9-335">, Samp *i* has only 1 point, which must be 1.0.</span></span> <span data-ttu-id="b77c9-336">Passare alla successiva *i*.</span><span class="sxs-lookup"><span data-stu-id="b77c9-336">Move on to the next *i*.</span></span> <span data-ttu-id="b77c9-337">In caso contrario, continuare con il passaggio 3.</span><span class="sxs-lookup"><span data-stu-id="b77c9-337">Otherwise, continue to STEP 3.</span></span>

<span data-ttu-id="b77c9-338">PASSAGGIO 3: ordinare gli esempi filtrati in ordine crescente nel</span><span class="sxs-lookup"><span data-stu-id="b77c9-338">STEP 3: Sort the filtered samples in ascending order in the</span></span> ![Mostra gli indici C.](images/transformcreation-image047.gif) <span data-ttu-id="b77c9-340">channel.</span><span class="sxs-lookup"><span data-stu-id="b77c9-340">channel.</span></span>

<span data-ttu-id="b77c9-341">PASSAGGIO 4: definire la griglia di campionamento "provvisorio" usando i nodi</span><span class="sxs-lookup"><span data-stu-id="b77c9-341">STEP 4: Define the "tentative" sampling grid using the nodes</span></span>

![Mostra i nodi utilizzati per definire la griglia di campionamento "provvisorio".](images/transformcreation-image057.png)

<span data-ttu-id="b77c9-343">dove</span><span class="sxs-lookup"><span data-stu-id="b77c9-343">where</span></span> ![Mostra j uguale a 1, 2,..., d pedice provvisorio (k).](images/transformcreation-image059.gif) <span data-ttu-id="b77c9-345">.</span><span class="sxs-lookup"><span data-stu-id="b77c9-345">.</span></span>

<span data-ttu-id="b77c9-346">PASSAGGIO 5: regolarizzare la griglia provvisoria per assicurarsi che sia conforme a una rigida monotona e anche che termini con 1,0.</span><span class="sxs-lookup"><span data-stu-id="b77c9-346">STEP 5: Regularize the tentative grid to ensure that it conforms with strict monotonicity and also that it ends with 1.0.</span></span> <span data-ttu-id="b77c9-347">Poiché la matrice è già ordinata, i nodi nella griglia provvisoria sono già nondecreasing monotonic.</span><span class="sxs-lookup"><span data-stu-id="b77c9-347">Because the array is already sorted, the nodes in the tentative grid are already monotonic nondecreasing.</span></span> <span data-ttu-id="b77c9-348">Tuttavia, i nodi adiacenti potrebbero essere identici.</span><span class="sxs-lookup"><span data-stu-id="b77c9-348">However, adjacent nodes might be identical.</span></span> <span data-ttu-id="b77c9-349">È possibile risolvere il problema rimuovendo i nodi identici, se necessario.</span><span class="sxs-lookup"><span data-stu-id="b77c9-349">You can fix this by removing identical nodes, if necessary.</span></span> <span data-ttu-id="b77c9-350">Infine, dopo questa procedura, se il punto finale è inferiore a 1,0, sostituirlo con 1,0.</span><span class="sxs-lookup"><span data-stu-id="b77c9-350">Finally, after this procedure, if the end point is less than 1.0, replace it with 1.0.</span></span>

<span data-ttu-id="b77c9-351">Si noti che il passaggio 5 indica il motivo per cui gli strati LUT possono avere un numero diverso di passaggi in ogni canale.</span><span class="sxs-lookup"><span data-stu-id="b77c9-351">Note that STEP 5 is the reason that the LUT strata may have a different number of steps in each channel.</span></span> <span data-ttu-id="b77c9-352">Dopo la regolarizzazione, il numero di passaggi in un canale può essere minore di</span><span class="sxs-lookup"><span data-stu-id="b77c9-352">After the regularization, the number of steps in a channel may be less than</span></span> ![Viene mostrato il tentativo di esecuzione di un indice d (k).](images/transformcreation-image061.gif) <span data-ttu-id="b77c9-354">.</span><span class="sxs-lookup"><span data-stu-id="b77c9-354">.</span></span>

## <a name="interpolation"></a><span data-ttu-id="b77c9-355">Interpolazione</span><span class="sxs-lookup"><span data-stu-id="b77c9-355">Interpolation</span></span>

<span data-ttu-id="b77c9-356">È possibile costruire la stratificazione del cubo di unità aprendo LUT strati e LUT strati chiusi.</span><span class="sxs-lookup"><span data-stu-id="b77c9-356">You can construct the stratification of the unit cube by open LUT strata and closed LUT strata.</span></span> <span data-ttu-id="b77c9-357">Per eseguire l'interpolazione utilizzando questa "struttura LUT di tipo sparse", attenersi alla seguente procedura.</span><span class="sxs-lookup"><span data-stu-id="b77c9-357">To perform interpolation using this "sparse LUT structure," follow these steps.</span></span> <span data-ttu-id="b77c9-358">Si supponga un valore di dispositivo di input specificato</span><span class="sxs-lookup"><span data-stu-id="b77c9-358">Assume a given input device value</span></span> ![Mostra (X pedice 1, X indice 2,..., X indice n).](images/transformcreation-image049.gif) <span data-ttu-id="b77c9-360">.</span><span class="sxs-lookup"><span data-stu-id="b77c9-360">.</span></span>

<span data-ttu-id="b77c9-361">PASSAGGIO 1: determinare il numero di canali "attivi".</span><span class="sxs-lookup"><span data-stu-id="b77c9-361">STEP 1: Determine the number of "active" channels.</span></span> <span data-ttu-id="b77c9-362">Questo è il numero di canali diversi da zero.</span><span class="sxs-lookup"><span data-stu-id="b77c9-362">This is the number of non-zero channels.</span></span> <span data-ttu-id="b77c9-363">In questo modo viene determinata la dimensione dello strato *k* per la ricerca dello strato contenitore.</span><span class="sxs-lookup"><span data-stu-id="b77c9-363">This determines the strata dimension *k* to search for the containing stratum.</span></span> <span data-ttu-id="b77c9-364">Più precisamente, la dimensione degli strati è 3 Se il numero di canali attivi è ![ minore o uguale a 3.](images/transformcreation-image063.gif)</span><span class="sxs-lookup"><span data-stu-id="b77c9-364">More precisely, the strata dimension is 3 if the number of active channels is ![Shows less than or equal to 3.](images/transformcreation-image063.gif)</span></span> <span data-ttu-id="b77c9-365">in caso contrario, la dimensione dello strato è uguale al numero di canali attivi.</span><span class="sxs-lookup"><span data-stu-id="b77c9-365">, otherwise, the strata dimension is the same as the number of active channels.</span></span>

<span data-ttu-id="b77c9-366">PASSAGGIO 2: all'interno di</span><span class="sxs-lookup"><span data-stu-id="b77c9-366">STEP 2: Within</span></span> ![Mostra l'indice Sigma k.](images/transformcreation-image026.gif) <span data-ttu-id="b77c9-368">, cercare lo strato contenitore.</span><span class="sxs-lookup"><span data-stu-id="b77c9-368">, search for the containing stratum.</span></span> <span data-ttu-id="b77c9-369">Un valore del dispositivo è contenuto in uno strato aperto se tutti i canali corrispondenti allo strato hanno un valore diverso da zero e tutti gli altri canali sono pari a zero.</span><span class="sxs-lookup"><span data-stu-id="b77c9-369">A device value is contained in an open stratum if all the channels corresponding to the stratum have non-zero value, and all other channels are zero.</span></span> <span data-ttu-id="b77c9-370">Un valore del dispositivo è contenuto in uno strato chiuso se ogni canale non rappresentato dallo strato è zero.</span><span class="sxs-lookup"><span data-stu-id="b77c9-370">A device value is contained in a closed stratum if every channel not represented by the stratum is zero.</span></span> <span data-ttu-id="b77c9-371">Se non viene trovato alcuno strato contenitore, si verifica una condizione di errore.</span><span class="sxs-lookup"><span data-stu-id="b77c9-371">If no containing stratum is found, there is an error condition.</span></span> <span data-ttu-id="b77c9-372">Annulla e segnala errore.</span><span class="sxs-lookup"><span data-stu-id="b77c9-372">Cancel and report failure.</span></span> <span data-ttu-id="b77c9-373">Se viene trovato uno strato contenitore, procedere al passaggio successivo.</span><span class="sxs-lookup"><span data-stu-id="b77c9-373">If a containing stratum is found, proceed to the next step.</span></span>

<span data-ttu-id="b77c9-374">PASSAGGIO 3: se lo strato contenitore è chiuso, l'interpolazione all'interno dello strato può essere eseguita da qualsiasi algoritmo di interpolazione noto.</span><span class="sxs-lookup"><span data-stu-id="b77c9-374">STEP 3: If the containing stratum is closed, then interpolation within the stratum can be done by any known interpolation algorithm.</span></span> <span data-ttu-id="b77c9-375">In questa implementazione, la scelta dell'algoritmo è l'interpolazione tetraedrica.</span><span class="sxs-lookup"><span data-stu-id="b77c9-375">In this implementation, the choice of algorithm is tetrahedral interpolation.</span></span> <span data-ttu-id="b77c9-376">Se lo strato contenitore è aperto e il valore del dispositivo si trova esclusivamente all'interno dello strato, ovvero</span><span class="sxs-lookup"><span data-stu-id="b77c9-376">If the containing stratum is open, and the device value lies strictly within the stratum, that is,</span></span>

<span data-ttu-id="b77c9-377">![Mostra X indice i maggiore o uguale a... ](images/transformcreation-image065.gif) primo nodo nel canale *i* TH</span><span class="sxs-lookup"><span data-stu-id="b77c9-377">![Shows X subscript i greater than or equal to...](images/transformcreation-image065.gif) first node in *i* th channel</span></span>

<span data-ttu-id="b77c9-378">dove *i* è un indice di canale per lo strato, l'algoritmo di interpolazione standard, ad esempio l'interpolazione tetraedrica, funziona.</span><span class="sxs-lookup"><span data-stu-id="b77c9-378">where *i* is a channel index for the stratum, then standard interpolation algorithm, such as tetrahedral interpolation, works.</span></span>

<span data-ttu-id="b77c9-379">Se ![ Mostra X pedice i, minore di... ](images/transformcreation-image067.gif) primo nodo nel canale *i* TH per alcuni *i*, il valore del dispositivo rientra nel "gap" tra lo strato e gli spazi subdimensionali inferiori.</span><span class="sxs-lookup"><span data-stu-id="b77c9-379">If ![Shows X subscript i less than...](images/transformcreation-image067.gif) first node in *i* th channel for some *i*, then the device value falls into the "gap" between the stratum and the lower dimensional subspaces.</span></span> <span data-ttu-id="b77c9-380">Questo MOI non è interessato da un algoritmo di interpolazione per se, pertanto è possibile usare qualsiasi algoritmo di interpolazione per interpolare in questo "gap", sebbene l'algoritmo preferito sia l'interpolazione transfinita seguente.</span><span class="sxs-lookup"><span data-stu-id="b77c9-380">This MOI is not concerned with an interpolation algorithm per se, so any interpolation algorithm can be used to interpolate within this "gap," although the preferred algorithm is the following transfinite interpolation.</span></span>

<span data-ttu-id="b77c9-381">L'architettura del modulo di interpolazione è illustrata nelle due parti della figura 1.</span><span class="sxs-lookup"><span data-stu-id="b77c9-381">The architecture of the interpolation module is illustrated in the two parts of Figure 1.</span></span>

![Diagramma che mostra parte di un'architettura del modulo di interpolazione.](images/transformcreation-image068.png)

![Diagramma che illustra la seconda parte dell'architettura del modulo di interpolazione.](images/transformcreation-image070.png)

<span data-ttu-id="b77c9-384">**Figura 1:** Architettura del modulo Intepolation</span><span class="sxs-lookup"><span data-stu-id="b77c9-384">**Figure 1:** Intepolation module architecture</span></span>

<span data-ttu-id="b77c9-385">Come spiegato in precedenza, questo algoritmo è in grado di ottenere un campionamento ragionevolmente denso nelle aree dello spazio del dispositivo che contengono una combinazione importante di coloranti, riducendo al minimo le dimensioni totali di LUTs necessarie.</span><span class="sxs-lookup"><span data-stu-id="b77c9-385">As explained earlier, this algorithm is able to achieve reasonably dense sampling in regions of the device space that contain important combination of colorants, while minimizing the total size of LUTs needed.</span></span> <span data-ttu-id="b77c9-386">La tabella seguente illustra un confronto tra il numero di nodi necessari per l'implementazione di LUT di tipo sparse (usando l'algoritmo \# 1 e la modalità normale) e l'implementazione LUT uniforme corrispondente.</span><span class="sxs-lookup"><span data-stu-id="b77c9-386">The following table shows a comparison of the number of nodes needed for the sparse LUT implementation (using Algorithm \#1 and normal mode) and the corresponding uniform LUT implementation.</span></span>



| <span data-ttu-id="b77c9-387">**Numero di canali di input**</span><span class="sxs-lookup"><span data-stu-id="b77c9-387">**Number of input channels**</span></span> | <span data-ttu-id="b77c9-388">**LUT sparse**</span><span class="sxs-lookup"><span data-stu-id="b77c9-388">**Sparse LUT**</span></span> | <span data-ttu-id="b77c9-389">**Uniform LUT**</span><span class="sxs-lookup"><span data-stu-id="b77c9-389">**Uniform LUT**</span></span> |
|------------------------------|----------------|-----------------|
| <span data-ttu-id="b77c9-390">5</span><span class="sxs-lookup"><span data-stu-id="b77c9-390">5</span></span>                            | <span data-ttu-id="b77c9-391">142498</span><span class="sxs-lookup"><span data-stu-id="b77c9-391">142498</span></span>         | <span data-ttu-id="b77c9-392">1419857</span><span class="sxs-lookup"><span data-stu-id="b77c9-392">1419857</span></span>         |
| <span data-ttu-id="b77c9-393">6</span><span class="sxs-lookup"><span data-stu-id="b77c9-393">6</span></span>                            | <span data-ttu-id="b77c9-394">217582</span><span class="sxs-lookup"><span data-stu-id="b77c9-394">217582</span></span>         | <span data-ttu-id="b77c9-395">24137567</span><span class="sxs-lookup"><span data-stu-id="b77c9-395">24137567</span></span>        |
| <span data-ttu-id="b77c9-396">7</span><span class="sxs-lookup"><span data-stu-id="b77c9-396">7</span></span>                            | <span data-ttu-id="b77c9-397">347444</span><span class="sxs-lookup"><span data-stu-id="b77c9-397">347444</span></span>         | <span data-ttu-id="b77c9-398">410338673</span><span class="sxs-lookup"><span data-stu-id="b77c9-398">410338673</span></span>       |
| <span data-ttu-id="b77c9-399">8</span><span class="sxs-lookup"><span data-stu-id="b77c9-399">8</span></span>                            | <span data-ttu-id="b77c9-400">559618</span><span class="sxs-lookup"><span data-stu-id="b77c9-400">559618</span></span>         | <span data-ttu-id="b77c9-401">6975757441</span><span class="sxs-lookup"><span data-stu-id="b77c9-401">6975757441</span></span>      |



 

## <a name="interpolation-within-a-unit-cube"></a><span data-ttu-id="b77c9-402">Interpolazione in un cubo di unità</span><span class="sxs-lookup"><span data-stu-id="b77c9-402">Interpolation within a unit cube</span></span>

<span data-ttu-id="b77c9-403">Un passaggio di base nel caso della griglia rettangolare è l'interpolazione all'interno di una cella di inclusione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-403">A basic step in the case of rectangular grid is interpolation within an enclosing cell.</span></span> <span data-ttu-id="b77c9-404">Per un punto di input, è possibile determinare facilmente la cella contenitore.</span><span class="sxs-lookup"><span data-stu-id="b77c9-404">For an input point, you can determine the enclosing cell easily.</span></span> <span data-ttu-id="b77c9-405">In una griglia rettangolare, viene specificato il valore di output in corrispondenza di ogni vertice (angoli) della cella di inclusione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-405">In a rectangular grid, the output value at each of the vertices (corner points) of the enclosing cell is specified.</span></span> <span data-ttu-id="b77c9-406">Sono anche le uniche condizioni limite (BCs) che devono essere soddisfatte da un Interpol: l'interpolatore deve superare tutti questi punti.</span><span class="sxs-lookup"><span data-stu-id="b77c9-406">They are also the only boundary conditions (BCs) that an interpolant must satisfy: The interpolant must pass through all these points.</span></span> <span data-ttu-id="b77c9-407">Si noti che queste condizioni limite si trovano su punti "discreti", in questo caso i punti dell'angolo 2n della cella, dove n è la dimensione dello spazio colore.</span><span class="sxs-lookup"><span data-stu-id="b77c9-407">Note that these boundary conditions are on "discrete" points, in this case the 2n corner points of the cell, where n is the dimension of the color space.</span></span>

<span data-ttu-id="b77c9-408">È utile per formalizzare il concetto di condizioni di limite prima di procedere.</span><span class="sxs-lookup"><span data-stu-id="b77c9-408">It is useful to formalize the concept of boundary conditions before moving on.</span></span> <span data-ttu-id="b77c9-409">Per tutti i subset del limite della cella di inclusione (il cubo di unità in n dimensioni), una condizione di limite su S è una specifica di una funzione BC: S → RM, dove m è la dimensione di output.</span><span class="sxs-lookup"><span data-stu-id="b77c9-409">For any subset S of the boundary of the enclosing cell (the unit cube in n dimensions), a boundary condition on S is a specification of a function BC: S → Rm, where m is the output dimension.</span></span> <span data-ttu-id="b77c9-410">In altre parole, un interpolatore, che può essere indicato interp: \[ 0, 1 \] n → RM, deve soddisfare i requisiti seguenti: interp (x) = BC (x) per tutte le x in S.</span><span class="sxs-lookup"><span data-stu-id="b77c9-410">In other words, an interpolant, which may be denoted Interp: \[0,1\]n→ Rm, is required to satisfy: Interp(x) = BC(x) for all x in S.</span></span>

<span data-ttu-id="b77c9-411">Nello scenario standard di interpolazione sul cubo di unità, S è il set di punti discreti che sono i vertici 2n del cubo.</span><span class="sxs-lookup"><span data-stu-id="b77c9-411">In the standard scenario of interpolation on the unit cube, S is the set of discrete points that are the 2n vertices of the cube.</span></span>

<span data-ttu-id="b77c9-412">È ora possibile generalizzare le condizioni limite per risolvere i problemi descritti in precedenza e fornire un nuovo algoritmo di interpolazione all'interno del cubo di unità.</span><span class="sxs-lookup"><span data-stu-id="b77c9-412">You can now generalize the boundary conditions to solve the issues described earlier and provide a new interpolation algorithm within the unit cube.</span></span> <span data-ttu-id="b77c9-413">Anziché consentire solo punti di limite discreti, le condizioni di limite possono essere imposte su una faccia perimetrale intera del cubo.</span><span class="sxs-lookup"><span data-stu-id="b77c9-413">Instead of allowing only discrete boundary points, boundary conditions can be imposed on a whole boundary face of the cube.</span></span> <span data-ttu-id="b77c9-414">Le ipotesi esatte sono le seguenti:</span><span class="sxs-lookup"><span data-stu-id="b77c9-414">The precise assumptions are as follows:</span></span>

<span data-ttu-id="b77c9-415">(a) il punto VN = (1, 1,..., 1) è speciale ed è consentita solo una condizione di limite discreta.</span><span class="sxs-lookup"><span data-stu-id="b77c9-415">(a) The point vn =(1,1,…,1) is special and only a discrete boundary condition is allowed.</span></span> <span data-ttu-id="b77c9-416">In altre parole, non è possibile imporre alcuna condizione di limite continuo ai bordi n, XI = 1 (i = 1,..., n).</span><span class="sxs-lookup"><span data-stu-id="b77c9-416">In other words, no continuous boundary conditions can be imposed on the n boundary faces xi=1 (i=1,…,n).</span></span>

<span data-ttu-id="b77c9-417">(b) per ognuno dei restanti n limiti XI = 0 (i = 1,..., n), è possibile imporre la condizione di limite sull'intero quadrante, con la condizione di compatibilità che se due facce si intersecano, le condizioni limite sulle facce devono accettare l'intersezione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-417">(b) For each of the remaining n boundary faces xi=0 (i=1,…,n), boundary condition can be imposed on the whole face, with the compatibility condition that if two faces intersect, the boundary conditions on the faces should agree on the intersection.</span></span>

<span data-ttu-id="b77c9-418">(c) i vertici non inclusi nei visi con la condizione di limite avranno una singola condizione di limite (discreto).</span><span class="sxs-lookup"><span data-stu-id="b77c9-418">(c) Any vertices not contained in the faces with boundary condition will have an individual (discrete) boundary condition.</span></span>

<span data-ttu-id="b77c9-419">È possibile fare riferimento a una condizione di limite discreta come dati limitati e una condizione di limite continuo come dati translimitati in discussione dell'interpolazione su dati finiti e transfiniti.</span><span class="sxs-lookup"><span data-stu-id="b77c9-419">You can refer to a discrete boundary condition as finite data, and a continuous boundary condition as transfinite data in discussing interpolation on finite and transfinite data.</span></span>

<span data-ttu-id="b77c9-420">Esaminare prima di tutto l'interpolazione tetraedrica standard (come quella usata nel brevetto di Sakamoto), che consente di impostare le annotazioni per questa particolare formulazione del problema.</span><span class="sxs-lookup"><span data-stu-id="b77c9-420">First, review the standard tetrahedral interpolation (such as that used in Sakamoto's patent) which helps set the notations for this particular formulation of the problem.</span></span> <span data-ttu-id="b77c9-421">È noto che il cubo di unità \[ 0, 1 \] n può essere suddiviso in n!</span><span class="sxs-lookup"><span data-stu-id="b77c9-421">It is known that the unit cube \[0,1\]n can be subdivided into n!</span></span> <span data-ttu-id="b77c9-422">tetraedri, con parametri per il set di permutazioni su n simboli.</span><span class="sxs-lookup"><span data-stu-id="b77c9-422">tetrahedra, parameterized by the set of permutations on n symbols.</span></span> <span data-ttu-id="b77c9-423">In particolare, ogni tetraedro viene definito dalle disuguaglianze</span><span class="sxs-lookup"><span data-stu-id="b77c9-423">More specifically, each such tetrahedron is defined by inequalities</span></span>

![Mostra la formula per il inequalites di tetraedri.](images/transformcreation-image073.gif)

<span data-ttu-id="b77c9-425">dove σ: {1, 2,.., n} → {1, 2,..., n} è una permutazione di "symbols" 1, 2,..., n, ovvero un mapping bigettivo del set di n simboli.</span><span class="sxs-lookup"><span data-stu-id="b77c9-425">where σ:{1,2,..,n}→{1,2,…,n} is a permutation of "symbols" 1, 2, …, n, that is, it is a bijective mapping of the set of n symbols.</span></span> <span data-ttu-id="b77c9-426">Ad esempio, se n = 3 e σ = (3, 2, 1), ovvero σ (1) = 3, σ (2) = 2, σ (3) = 1, il tetraedro corrispondente viene definito da z ≥ y ≥ x, in cui la notazione comune x, y, z viene utilizzata per X1, X2, X3.</span><span class="sxs-lookup"><span data-stu-id="b77c9-426">For example, if n = 3 and σ = (3, 2, 1), meaning σ(1)=3, σ(2)=2, σ(3)=1, then the corresponding tetrahedron is defined by z≥y≥x, where the common notation x, y, z is used for x1, x2, x3.</span></span> <span data-ttu-id="b77c9-427">Si noti che queste tetraedri non sono disgiunte l'una dall'altra.</span><span class="sxs-lookup"><span data-stu-id="b77c9-427">Note that these tetrahedrons are not disjoint from each other.</span></span> <span data-ttu-id="b77c9-428">Ai fini dell'interpolazione, i punti che si trovano su una faccia comune di due tetraedri distinti avranno lo stesso valore di interpolazione indipendentemente dal tetraedro usato nell'interpolazione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-428">For the purpose of interpolation, points lying on a common face of two distinct tetrahedrons will have the same interpolation value regardless of which tetrahedron is used in the interpolation.</span></span> <span data-ttu-id="b77c9-429">Tuttavia, nello scenario standard di interpolazione su punti finiti, per un punto di input specificato (x1,..., Xn), determinare prima di tutto il tetraedro in cui si trova o, in modo equivalente, la permutazione σ corrispondente, quindi il tetraedrica Interpol è definito come</span><span class="sxs-lookup"><span data-stu-id="b77c9-429">Still, in the standard scenario of interpolating on finite points, for a given input point (x1, …, xn), first determine which tetrahedron it lies in, or equivalently, the corresponding permutation σ, then the tetrahedral interpolant is defined as</span></span>

![Mostra l'equazione che definisce la tetraedrica interpolata.](images/transformcreation-image075.png)

<span data-ttu-id="b77c9-431">dove</span><span class="sxs-lookup"><span data-stu-id="b77c9-431">where</span></span> ![Mostra l'equazione per i vettori di base standard.](images/transformcreation-image077.png) <span data-ttu-id="b77c9-433">per i = 1,..., n e E1,..., en sono i vettori di base standard.</span><span class="sxs-lookup"><span data-stu-id="b77c9-433">for i=1, …, n, and e1, …, en are the standard basis vectors.</span></span> <span data-ttu-id="b77c9-434">Prima di procedere alla generalizzazione, si noti che V0, V1,..., VN sono i vertici del tetraedro e</span><span class="sxs-lookup"><span data-stu-id="b77c9-434">Before moving on to the generalization, note that v0, v1, …, vn are the vertices of the tetrahedron, and</span></span> ![Mostra le coordinate del baricentrica.](images/transformcreation-image079.png) <span data-ttu-id="b77c9-436">sono le coordinate "baricentrica".</span><span class="sxs-lookup"><span data-stu-id="b77c9-436">are the "barycentric coordinates."</span></span>

<span data-ttu-id="b77c9-437">Per il caso generale di BCs sui visi limite, è possibile usare il concetto di proiezione baricentrica.</span><span class="sxs-lookup"><span data-stu-id="b77c9-437">For the general case of BCs on boundary faces, you can use the concept of barycentric projection.</span></span> <span data-ttu-id="b77c9-438">Come prima, per un punto di input specificato (x1,..., Xn), determinare innanzitutto in quale tetraedro si trova o in modo equivalente la permutazione σ corrispondente.</span><span class="sxs-lookup"><span data-stu-id="b77c9-438">As before, for a given input point (x1, …, xn), first determine in which tetrahedron it lies, or equivalently, the corresponding permutation σ.</span></span> <span data-ttu-id="b77c9-439">Eseguire quindi una serie di proiezioni baricentrica, come indicato di seguito.</span><span class="sxs-lookup"><span data-stu-id="b77c9-439">Then perform a series of barycentric projections, as follows.</span></span> <span data-ttu-id="b77c9-440">Prima proiezione</span><span class="sxs-lookup"><span data-stu-id="b77c9-440">The first projection</span></span> ![Mostra BProj indice 1 (x).](images/transformcreation-image081.gif) <span data-ttu-id="b77c9-442">Invia il punto al piano</span><span class="sxs-lookup"><span data-stu-id="b77c9-442">sends the point to the plane</span></span> ![Mostra X Indice Delta (1) uguale a 0.](images/transformcreation-image083.gif) <span data-ttu-id="b77c9-444">a meno che</span><span class="sxs-lookup"><span data-stu-id="b77c9-444">unless</span></span> ![Mostra X uguale a V indice n.](images/transformcreation-image085.gif) <span data-ttu-id="b77c9-446">in tal caso, non viene modificato.</span><span class="sxs-lookup"><span data-stu-id="b77c9-446">in which case it is not changed.</span></span> <span data-ttu-id="b77c9-447">La definizione esatta della mappa BProj è definita nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="b77c9-447">The precise definition of the map BProj is defined as follows:</span></span>

![Mostra l'equazione per la definizione precisa della BProj della mappa.](images/transformcreation-image087.png)

<span data-ttu-id="b77c9-449">con</span><span class="sxs-lookup"><span data-stu-id="b77c9-449">with</span></span> ![Mostra l'equazione per l'indice P.](images/transformcreation-image089.png) <span data-ttu-id="b77c9-451">e k = 1, 2,..., n.</span><span class="sxs-lookup"><span data-stu-id="b77c9-451">and k = 1, 2, …, n.</span></span>

<span data-ttu-id="b77c9-452">Nel caso</span><span class="sxs-lookup"><span data-stu-id="b77c9-452">In the case</span></span> ![Mostra X è uguale a V indice n.](images/transformcreation-image085.gif) <span data-ttu-id="b77c9-454">, è possibile arrestare, perché BC viene definito in VN da presupposto (a).</span><span class="sxs-lookup"><span data-stu-id="b77c9-454">, you can stop, because BC is defined at vn by Assumption (a).</span></span> <span data-ttu-id="b77c9-455">Nel caso</span><span class="sxs-lookup"><span data-stu-id="b77c9-455">In the case</span></span> ![Mostra X non è uguale a V indice n.](images/transformcreation-image091.gif) <span data-ttu-id="b77c9-457">, è chiaro che</span><span class="sxs-lookup"><span data-stu-id="b77c9-457">, it is clear that</span></span> ![Mostra BProj indice 1 (X).](images/transformcreation-image081.gif) <span data-ttu-id="b77c9-459">il componente σ (1) esimo è stato annientato.</span><span class="sxs-lookup"><span data-stu-id="b77c9-459">has the σ(1)th component annihilated.</span></span> <span data-ttu-id="b77c9-460">In altre parole, si trova su uno dei visi limite.</span><span class="sxs-lookup"><span data-stu-id="b77c9-460">In other words, it is on one of boundary faces.</span></span> <span data-ttu-id="b77c9-461">Si tratta di una faccia su cui è definito BC, nel qual caso è possibile arrestare o eseguire un'altra proiezione baricentrica</span><span class="sxs-lookup"><span data-stu-id="b77c9-461">Either it is on a face on which BC is defined, in which case you can stop, or you perform another barycentric projection</span></span> ![Mostra l'indice BProj 2 (X ').](images/transformcreation-image093.gif) <span data-ttu-id="b77c9-463">dove</span><span class="sxs-lookup"><span data-stu-id="b77c9-463">where</span></span> ![Mostra X ' uguale a BProj indice 1 (X).](images/transformcreation-image095.gif) <span data-ttu-id="b77c9-465">.</span><span class="sxs-lookup"><span data-stu-id="b77c9-465">.</span></span> <span data-ttu-id="b77c9-466">E se</span><span class="sxs-lookup"><span data-stu-id="b77c9-466">And if</span></span> ![Mostra X '' = Bproj indice 1 (X ').](images/transformcreation-image097.gif) <span data-ttu-id="b77c9-468">si trova su una faccia in cui è definito BC, è possibile arrestare; in caso contrario, eseguire un'altra proiezione</span><span class="sxs-lookup"><span data-stu-id="b77c9-468">is on a face on which BC is defined, you can stop; otherwise, perform yet another projection</span></span> ![Mostra l'indice BProj 3 (X '').](images/transformcreation-image099.gif) <span data-ttu-id="b77c9-470">.</span><span class="sxs-lookup"><span data-stu-id="b77c9-470">.</span></span> <span data-ttu-id="b77c9-471">Poiché ogni proiezione annienta un componente, la dimensione effettiva diminuisce, in modo da essere certi che il processo debba arrestarsi.</span><span class="sxs-lookup"><span data-stu-id="b77c9-471">Because every projection annihilates one component, the effective dimension decreases, so you know the process must eventually stop.</span></span> <span data-ttu-id="b77c9-472">Nel peggiore dei casi, è possibile eseguire n proiezioni fino alla dimensione 0, ovvero i vertici del cubo, che in base al presupposto (c), si sa che BC verrà definito in.</span><span class="sxs-lookup"><span data-stu-id="b77c9-472">In the worst case scenario, you perform n projections down to dimension 0, that is, vertices on the cube, which according to Assumption (c), you know BC will be defined on.</span></span>

<span data-ttu-id="b77c9-473">Supponendo che siano state eseguite le proiezioni K, con</span><span class="sxs-lookup"><span data-stu-id="b77c9-473">Assuming that K projections have been performed, with</span></span>

![Mostra un'equazione da usare supponendo che sia stata eseguita la proiezione K.](images/transformcreation-image101.png)

<span data-ttu-id="b77c9-475">x (0) = x, il punto di input e BC viene definito in x (k).</span><span class="sxs-lookup"><span data-stu-id="b77c9-475">x(0)= x, the input point, and BC is defined at x(k).</span></span> <span data-ttu-id="b77c9-476">Rimuovere quindi le proiezioni definendo una serie di vettori di output:</span><span class="sxs-lookup"><span data-stu-id="b77c9-476">Then unwind the projections by defining a series of output vectors:</span></span>

![Mostra le equazioni per una serie di vettori di output.](images/transformcreation-image103.png)

<span data-ttu-id="b77c9-478">dove</span><span class="sxs-lookup"><span data-stu-id="b77c9-478">where</span></span> ![Mostra l'equazione per l'apice Y (K).](images/transformcreation-image105.gif) <span data-ttu-id="b77c9-480">e infine ottenere la risposta</span><span class="sxs-lookup"><span data-stu-id="b77c9-480">, and you finally obtain the answer</span></span>

![Mostra interp (x) uguale a y superscript (0).](images/transformcreation-image107.gif)

## <a name="worked-example"></a><span data-ttu-id="b77c9-482">Esempio di lavoro</span><span class="sxs-lookup"><span data-stu-id="b77c9-482">Worked example</span></span>

![Diagramma che illustra un esempio di interpolazione lavorato con un cubo di unità.](images/transformcreation-image108.png)

<span data-ttu-id="b77c9-484">**Figura 2:** Esempio di lavoro</span><span class="sxs-lookup"><span data-stu-id="b77c9-484">**Figure 2:** Worked example</span></span>

<span data-ttu-id="b77c9-485">Si consideri la situazione illustrata nella figura 2, dove n = 3, m = 1 ed è presente il BCs seguente:</span><span class="sxs-lookup"><span data-stu-id="b77c9-485">Consider the situation depicted in Figure 2, where n = 3, m = 1, and you have the following BCs:</span></span>

<span data-ttu-id="b77c9-486">(a) quattro BCs discreto sui vertici</span><span class="sxs-lookup"><span data-stu-id="b77c9-486">(a) Four discrete BCs on the vertices</span></span>

<span data-ttu-id="b77c9-487">(0, 0, 1): β001</span><span class="sxs-lookup"><span data-stu-id="b77c9-487">(0, 0, 1): β001</span></span>

<span data-ttu-id="b77c9-488">(0, 1, 1): β011</span><span class="sxs-lookup"><span data-stu-id="b77c9-488">(0, 1, 1): β011</span></span>

<span data-ttu-id="b77c9-489">(1, 0, 1): β 101</span><span class="sxs-lookup"><span data-stu-id="b77c9-489">(1, 0, 1): β101</span></span>

<span data-ttu-id="b77c9-490">(1, 1,1): β 111</span><span class="sxs-lookup"><span data-stu-id="b77c9-490">(1, 1, 1): β111</span></span>

<span data-ttu-id="b77c9-491">(b) A continuazione BC sulla faccia X3 = 0: F (x1, X2)</span><span class="sxs-lookup"><span data-stu-id="b77c9-491">(b) A continuous BC on the face x3=0: F(x1, x2)</span></span>

<span data-ttu-id="b77c9-492">Calcolo \# 1: punto di input x = (0,8, 0,5, 0,2).</span><span class="sxs-lookup"><span data-stu-id="b77c9-492">Computation \#1: Input point x = (0.8, 0.5, 0.2).</span></span> <span data-ttu-id="b77c9-493">Il tetraedro contenitore è associato alla permutazione &lt; 1, 2, 3 &gt; .</span><span class="sxs-lookup"><span data-stu-id="b77c9-493">The enclosing tetrahedron is associated with the permutation &lt;1, 2, 3&gt;.</span></span>

<span data-ttu-id="b77c9-494">prima proiezione:</span><span class="sxs-lookup"><span data-stu-id="b77c9-494">1st projection:</span></span> ![Mostra l'equazione per la prima proiezione.](images/transformcreation-image110.png)

<span data-ttu-id="b77c9-496">Questo è già presente nella faccia X3 = 0, quindi è possibile arrestare.</span><span class="sxs-lookup"><span data-stu-id="b77c9-496">This is already on the face x3=0, so you can stop.</span></span> <span data-ttu-id="b77c9-497">La sostituzione con le versioni precedenti restituisce quindi</span><span class="sxs-lookup"><span data-stu-id="b77c9-497">Backward substitution then gives</span></span>

![Mostra la risposta per la prima proiezione.](images/transformcreation-image112.png) <span data-ttu-id="b77c9-499">risposta.</span><span class="sxs-lookup"><span data-stu-id="b77c9-499">which is the answer.</span></span>

<span data-ttu-id="b77c9-500">Calcolo \# 2: punto di input x = (0,2, 0,5, 0,8).</span><span class="sxs-lookup"><span data-stu-id="b77c9-500">Computation \#2 : Input point x = (0.2, 0.5, 0.8).</span></span> <span data-ttu-id="b77c9-501">Il tetraedro contenitore è associato alla permutazione &lt; 3, 2, 1 &gt; .</span><span class="sxs-lookup"><span data-stu-id="b77c9-501">The enclosing tetrahedron is associated with the permutation &lt;3, 2, 1&gt;.</span></span>

<span data-ttu-id="b77c9-502">prima proiezione:</span><span class="sxs-lookup"><span data-stu-id="b77c9-502">1st projection:</span></span> ![Mostra l'equazione per la prima proiezione del calcolo 2.](images/transformcreation-image113.png)

<span data-ttu-id="b77c9-504">seconda proiezione:</span><span class="sxs-lookup"><span data-stu-id="b77c9-504">2nd projection:</span></span> ![Mostra l'equazione per la seconda proiezione del calcolo 2.](images/transformcreation-image115.png)

<span data-ttu-id="b77c9-506">terza proiezione:</span><span class="sxs-lookup"><span data-stu-id="b77c9-506">3rd projection:</span></span> ![Mostra l'equazione per la terza proiezione del calcolo 2.](images/transformcreation-image117.png) <span data-ttu-id="b77c9-508">, che si trova sulla superficie X3 = 0.</span><span class="sxs-lookup"><span data-stu-id="b77c9-508">, which is on the face x3=0.</span></span> <span data-ttu-id="b77c9-509">La sostituzione con le versioni precedenti restituisce quindi</span><span class="sxs-lookup"><span data-stu-id="b77c9-509">Backward substitution then gives</span></span>

![Mostra le prime due equazioni per la sostituzione con le versioni precedenti.](images/transformcreation-image119.png)

![Mostra la terza equazione per la sostituzione con le versioni precedenti.](images/transformcreation-image123.png)<span data-ttu-id="b77c9-512">, ovvero la risposta finale.</span><span class="sxs-lookup"><span data-stu-id="b77c9-512">, which is the final answer.</span></span>

## <a name="applications"></a><span data-ttu-id="b77c9-513">Applicazioni</span><span class="sxs-lookup"><span data-stu-id="b77c9-513">Applications</span></span>

<span data-ttu-id="b77c9-514">*(a) interpolazione tetraedrica sequenziale*</span><span class="sxs-lookup"><span data-stu-id="b77c9-514">*(a) Sequential Tetrahedral Interpolation*</span></span>

![Diagramma che mostra l'interpolazione tetraedrica sequenziale.](images/transformcreation-image124.png)

<span data-ttu-id="b77c9-516">**Figura 3:** Interpolazione tetraedrica sequenziale</span><span class="sxs-lookup"><span data-stu-id="b77c9-516">**Figure 3:** Sequential tetrahedral interpolation</span></span>

<span data-ttu-id="b77c9-517">Vedere la figura 3.</span><span class="sxs-lookup"><span data-stu-id="b77c9-517">Refer to Figure 3.</span></span> <span data-ttu-id="b77c9-518">Per eseguire l'interpolazione tra due piani su cui sono state imposte griglie incompatibili, prendere in considerazione una cella che include un punto specificato P illustrato nella figura.</span><span class="sxs-lookup"><span data-stu-id="b77c9-518">To interpolate between two planes on which incompatible grids have been imposed, consider a cell enclosing a given point P shown in the figure.</span></span> <span data-ttu-id="b77c9-519">I vertici "Top" della cella provengono direttamente dalla griglia nel piano superiore.</span><span class="sxs-lookup"><span data-stu-id="b77c9-519">The "top" vertices of the cell come directly from the grid in the top plane.</span></span> <span data-ttu-id="b77c9-520">I vertici nella parte inferiore del quadrante non sono compatibili con la griglia nel piano inferiore, quindi l'intero viso viene considerato come avente un BC con i valori ottenuti dall'interpolazione sulla griglia nel piano in basso.</span><span class="sxs-lookup"><span data-stu-id="b77c9-520">The vertices in the bottom face are not compatible with the grid in the bottom plane, so the whole face is treated as having a BC with values obtained by interpolation on the grid in the bottom plane.</span></span> <span data-ttu-id="b77c9-521">È quindi chiaro che questa configurazione soddisfa i presupposti (a), (b) e (c) indicati in precedenza ed è possibile applicare l'algoritmo di interpolazione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-521">It is then clear that this setup satisfies Assumptions (a), (b), and (c) above, and you can apply the interpolation algorithm.</span></span>

<span data-ttu-id="b77c9-522">È inoltre chiaro che l'algoritmo ha ridotto la dimensione del problema di interpolazione di 1, perché il risultato è una combinazione lineare di valori ai vertici nella griglia superiore e l'interpolazione nel piano inferiore, con una dimensione minore di 1.</span><span class="sxs-lookup"><span data-stu-id="b77c9-522">It is also clear that the algorithm has reduced the dimension of the interpolation problem by 1, because the result is a linear combination of values at the vertices in the upper grid, and interpolation in the lower plane, which has dimension less 1.</span></span> <span data-ttu-id="b77c9-523">Se nel piano inferiore esiste una configurazione simile a un piano di sandwich, è possibile applicare la procedura in tale piano, riducendone ulteriormente la dimensione di 1.</span><span class="sxs-lookup"><span data-stu-id="b77c9-523">If a similar sandwiching plane configuration exists in the lower plane, you can apply the procedure in that plane, further reducing the dimension by 1.</span></span> <span data-ttu-id="b77c9-524">Questa procedura può continuare fino a raggiungere la dimensione 0.</span><span class="sxs-lookup"><span data-stu-id="b77c9-524">This procedure can continue until you reach dimension 0.</span></span> <span data-ttu-id="b77c9-525">Questa catena di proiezioni e interpolazioni può essere denominata "interpolazione tetraedrica sequenziale".</span><span class="sxs-lookup"><span data-stu-id="b77c9-525">This cascade of projections and interpolations can be called "Sequential Tetrahedral Interpolation."</span></span>

<span data-ttu-id="b77c9-526">*(b) interpolazione Gap*</span><span class="sxs-lookup"><span data-stu-id="b77c9-526">*(b) Gap Interpolation*</span></span>

![Diagramma che mostra l'interpolazione del gap.](images/transformcreation-image126.jpg)

<span data-ttu-id="b77c9-528">**Figura 4:** Interpolazione Gap</span><span class="sxs-lookup"><span data-stu-id="b77c9-528">**Figure 4:** Gap interpolation</span></span>

<span data-ttu-id="b77c9-529">Si tratta di una griglia imposta su un cubo che si trova strettamente all'interno del quadrante positivo.</span><span class="sxs-lookup"><span data-stu-id="b77c9-529">This is a grid imposed on a cube sitting strictly inside the positive quadrant.</span></span> <span data-ttu-id="b77c9-530">Il cubo contiene una griglia e ogni piano coordinato dispone di griglie che non sono necessariamente compatibili.</span><span class="sxs-lookup"><span data-stu-id="b77c9-530">The cube itself has a grid on it, and each coordinate plane has grids that are not necessarily compatible.</span></span> <span data-ttu-id="b77c9-531">Il "gap" tra il cubo e i piani delle coordinate presenta una sezione incrociata che è "L-shaped" e non è suscettibile alle tecniche standard.</span><span class="sxs-lookup"><span data-stu-id="b77c9-531">The "gap" between the cube and the coordinate planes has a cross-section that is "L-shaped" and is not amenable to standard techniques.</span></span> <span data-ttu-id="b77c9-532">Tuttavia, con la tecnica introdotta in questo articolo, è possibile introdurre facilmente le celle che coprono questo gap.</span><span class="sxs-lookup"><span data-stu-id="b77c9-532">However, with the technique introduced here, you can easily introduce cells that cover this gap.</span></span> <span data-ttu-id="b77c9-533">Nella figura 4 viene illustrata una di queste.</span><span class="sxs-lookup"><span data-stu-id="b77c9-533">Figure 4 depicts one of these.</span></span> <span data-ttu-id="b77c9-534">Le griglie sui piani delle coordinate supportano l'interpolazione che fornisce il BCs necessario per tutti i visi inferiori della cella, con un vertice rimanente il cui BC viene fornito dall'angolo inferiore del cubo.</span><span class="sxs-lookup"><span data-stu-id="b77c9-534">The grids on the coordinate planes support interpolation that provides the necessary BCs for all the bottom faces of the cell, with one remaining vertex whose BC is provided by the lower corner of the cube.</span></span>

## <a name="final-note-on-implementation"></a><span data-ttu-id="b77c9-535">Nota finale sull'implementazione</span><span class="sxs-lookup"><span data-stu-id="b77c9-535">Final note on implementation</span></span>

<span data-ttu-id="b77c9-536">Nell'applicazione effettiva, il "cubo di unità" che rappresenta l'impostazione di base dell'algoritmo viene Estratto da reticoli più grandi e i valori nei vertici possono richiedere un calcolo oneroso.</span><span class="sxs-lookup"><span data-stu-id="b77c9-536">In actual application, the "unit cube" that is the basic setting of the algorithm is extracted from larger lattices, and the values at the vertices may require expensive calculation.</span></span> <span data-ttu-id="b77c9-537">D'altra parte, è anche chiaro che l'interpolazione tetraedrica richiede solo i valori nei vertici del tetraedro, ovvero un subset di tutti i vertici del cubo di unità.</span><span class="sxs-lookup"><span data-stu-id="b77c9-537">On the other hand, it is also clear that tetrahedral interpolation requires only the values at the vertices of the tetrahedron, which is a subset of all the vertices of the unit cube.</span></span> <span data-ttu-id="b77c9-538">Pertanto, è più efficiente implementare ciò che può essere definito "valutazione posticipata".</span><span class="sxs-lookup"><span data-stu-id="b77c9-538">Therefore, it is more efficient to implement what can be called "deferred evaluation."</span></span> <span data-ttu-id="b77c9-539">In un'implementazione software dell'algoritmo precedente, in genere è presente una subroutine che accetta il cubo di unità e i valori nei vertici come input.</span><span class="sxs-lookup"><span data-stu-id="b77c9-539">In a software implementation of the preceding algorithm, it is typical to have a subroutine that takes the unit cube and values at its vertices as input.</span></span> <span data-ttu-id="b77c9-540">La valutazione posticipata indica che anziché passare i valori nei vertici, le informazioni necessarie per valutare i valori dei vertici vengono passate, senza eseguire effettivamente la valutazione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-540">Deferred evaluation means that instead of passing the values at the vertices, the necessary information to evaluate the values of the vertices is passed, without actually carrying out the evaluation.</span></span> <span data-ttu-id="b77c9-541">All'interno della subroutine, la valutazione effettiva di questi valori verrà eseguita solo per i vertici che appartengono al tetraedro di inclusione, dopo che il tetraedro di inclusione è stato determinato.</span><span class="sxs-lookup"><span data-stu-id="b77c9-541">Inside the subroutine, actual evaluation of these values will be carried out only for those vertices that belong to the enclosing tetrahedron, after the enclosing tetrahedron is determined.</span></span>

## <a name="lookup-table-for-use-with-high-dynamic-range-virtual-rgb-source-devices"></a><span data-ttu-id="b77c9-542">Tabella di ricerca da usare con i dispositivi di origine RGB virtuali con intervallo dinamico elevato</span><span class="sxs-lookup"><span data-stu-id="b77c9-542">Lookup table for use with high dynamic range virtual RGB source devices</span></span>

<span data-ttu-id="b77c9-543">Nel caso in cui una trasformazione venga costruita con un dispositivo di origine modellato come dispositivo RGB virtuale, è possibile che i valori coloranti di origine siano negativi o maggiori di Unity (1,0).</span><span class="sxs-lookup"><span data-stu-id="b77c9-543">In the case where a transform is constructed with a source device that is modeled as a virtual RGB device, it is possible that source colorant values may be negative or greater than unity (1.0).</span></span> <span data-ttu-id="b77c9-544">In questo caso, il dispositivo di origine viene definito con un intervallo dinamico elevato (HDR).</span><span class="sxs-lookup"><span data-stu-id="b77c9-544">When this occurs, the source device is referred to as having a high dynamic range(HDR).</span></span> <span data-ttu-id="b77c9-545">Per questo caso viene presa particolare attenzione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-545">Special consideration is made for this case.</span></span>

<span data-ttu-id="b77c9-546">Nel caso di trasformazioni HDR, i valori minimo e massimo per ogni canale colorante possono essere determinati dal limite della gamma del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b77c9-546">In the case of HDR transforms, the minimum and maximum values for each colorant channel can be determined from the gamut boundary of the device.</span></span> <span data-ttu-id="b77c9-547">Usando questi valori, viene applicata una semplice scalabilità per ogni canale colorante, in modo che i valori coloranti uguali al colore minimo vengano convertiti in 0,0 e i valori coloranti uguali al colore massimo vengano convertiti in 1,0, con una scala lineare di valori tra per eseguire il mapping lineare tra 0,0 e 1,0.</span><span class="sxs-lookup"><span data-stu-id="b77c9-547">By using these values, a simple scaling for each colorant channel is applied so that colorant values equal to the minimum colorant would be converted to 0.0, and colorant values equal to the maximum colorant would be converted to 1.0, with a linear scaling of values between to map linearly between 0.0 and 1.0.</span></span>

### <a name="iccprofilefromwcsprofile"></a><span data-ttu-id="b77c9-548">ICCProfileFromWCSProfile</span><span class="sxs-lookup"><span data-stu-id="b77c9-548">ICCProfileFromWCSProfile</span></span>

<span data-ttu-id="b77c9-549">Poiché lo scopo principale di questa funzionalità è supportare le versioni precedenti a vista di Windows, è necessario generare i profili ICC della versione 2,2 come definito nella specifica ICC ICC. 1:1998-09.</span><span class="sxs-lookup"><span data-stu-id="b77c9-549">Because the main purpose of this feature is to support pre-Vista versions of Windows, you must generate Version 2.2 ICC profiles as defined in ICC Specification ICC.1:1998-09.</span></span> <span data-ttu-id="b77c9-550">In alcuni casi (vedere la tabella seguente "dispositivo di base per il mapping della classe del profilo ICC"), è possibile creare un profilo ICC basato su una matrice o su TRC da un profilo WCS.</span><span class="sxs-lookup"><span data-stu-id="b77c9-550">In certain cases (see the following table "Baseline Device To ICC Profile Class Mapping"), you can create a matrix or TRC-based ICC profile from a WCS profile.</span></span> <span data-ttu-id="b77c9-551">In altri casi, il profilo ICC è costituito da LUTs.</span><span class="sxs-lookup"><span data-stu-id="b77c9-551">In other cases, the ICC profile consists of LUTs.</span></span> <span data-ttu-id="b77c9-552">Il processo seguente descrive come creare AToB e BToA LUTs.</span><span class="sxs-lookup"><span data-stu-id="b77c9-552">The following process describes how to create the AToB and BToA LUTs.</span></span> <span data-ttu-id="b77c9-553">Naturalmente, i profili ICC hanno anche altri campi.</span><span class="sxs-lookup"><span data-stu-id="b77c9-553">Of course, ICC profiles have other fields as well.</span></span> <span data-ttu-id="b77c9-554">Alcuni dati possono essere derivati dal profilo WCS.</span><span class="sxs-lookup"><span data-stu-id="b77c9-554">Some of the data can be derived from the WCS profile.</span></span> <span data-ttu-id="b77c9-555">Per altri dati, è necessario sviluppare impostazioni predefinite intelligenti.</span><span class="sxs-lookup"><span data-stu-id="b77c9-555">For other data, you'll have to develop intelligent defaults.</span></span> <span data-ttu-id="b77c9-556">Il copyright verrà assegnato a Microsoft; Poiché si tratta di una tecnologia Microsoft utilizzata per creare il LUTs.</span><span class="sxs-lookup"><span data-stu-id="b77c9-556">The copyright will be assigned to Microsoft; since it is Microsoft technology that is being used to create the LUTs.</span></span>

<span data-ttu-id="b77c9-557">Questa progettazione dovrebbe funzionare per tutti i tipi di modelli di dispositivo, inclusi i plug-in. Fino a quando il plug-in ha un modello di dispositivo Baseline associato, è possibile determinare il tipo di dispositivo sottostante.</span><span class="sxs-lookup"><span data-stu-id="b77c9-557">This design should work for all types of device models, including plug-ins. As long as the plug-in has an associated baseline device model, the underlying device type can be determined.</span></span>

<span data-ttu-id="b77c9-558">La parte difficile della creazione di un profilo ICC consiste nel creare le tabelle di ricerca AToB e BToA.</span><span class="sxs-lookup"><span data-stu-id="b77c9-558">The hard part of creating an ICC profile is creating the AToB and BToA lookup tables.</span></span> <span data-ttu-id="b77c9-559">Queste tabelle sono mappate tra lo spazio del dispositivo, ad esempio RGB o CMYK, e lo spazio di connessione del profilo (PC), che è una variante di CIELAB.</span><span class="sxs-lookup"><span data-stu-id="b77c9-559">These tables map between the device space, for example, RGB or CMYK, and the Profile Connection Space (PCS), which is a variant of CIELAB.</span></span> <span data-ttu-id="b77c9-560">Questo è fondamentalmente lo stesso del processo di gestione dei colori usato nella trasformazione CITE per eseguire il mapping dallo spazio del dispositivo allo spazio del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b77c9-560">This is fundamentally the same as the color management process used in the CITE transform to map from device space to device space.</span></span> <span data-ttu-id="b77c9-561">Per eseguire la trasformazione è tuttavia necessario disporre delle informazioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="b77c9-561">However, you must have the following information to make the transformation.</span></span>

1) <span data-ttu-id="b77c9-562">Condizioni di visualizzazione dei riferimenti per i PC.</span><span class="sxs-lookup"><span data-stu-id="b77c9-562">Reference viewing conditions for the PCS.</span></span>

2) <span data-ttu-id="b77c9-563">Gamut del PC di riferimento.</span><span class="sxs-lookup"><span data-stu-id="b77c9-563">Reference PCS gamut.</span></span>

3) <span data-ttu-id="b77c9-564">Modello di dispositivo che esegue la conversione tra i valori dei PC e colorimetria.</span><span class="sxs-lookup"><span data-stu-id="b77c9-564">Device model that converts between PCS values and colorimetry.</span></span>

<span data-ttu-id="b77c9-565">Il profilo WCS e la relativa camma associata vengono forniti come parametri.</span><span class="sxs-lookup"><span data-stu-id="b77c9-565">The WCS profile and its associated CAM are provided as parameters.</span></span> <span data-ttu-id="b77c9-566">Esistono due modelli di dispositivo di base che eseguono la conversione tra colorimetria e la codifica PCS.</span><span class="sxs-lookup"><span data-stu-id="b77c9-566">There are two baseline device models that convert between colorimetry and the PCS encoding.</span></span> <span data-ttu-id="b77c9-567">Il motivo per cui sono necessarie due è illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="b77c9-567">The reason you need two is explained below.</span></span>

1) <span data-ttu-id="b77c9-568">È possibile ottenere le condizioni di visualizzazione dei riferimenti per i PC dalla specifica del formato del profilo ICC.</span><span class="sxs-lookup"><span data-stu-id="b77c9-568">You can obtain the reference viewing conditions for the PCS from the ICC profile format specification.</span></span> <span data-ttu-id="b77c9-569">Le informazioni fornite nella specifica del formato del profilo ICC sono sufficienti per calcolare tutti i dati necessari per inizializzare la camma usata dal CMS.</span><span class="sxs-lookup"><span data-stu-id="b77c9-569">The information provided in the ICC profile format specification is sufficient to compute all the data required to initialize the CAM used by the CMS.</span></span> <span data-ttu-id="b77c9-570">Per coerenza e flessibilità, queste informazioni vengono archiviate in un profilo colori WCS.</span><span class="sxs-lookup"><span data-stu-id="b77c9-570">For consistency and flexibility, this information is stored in a WCS color profile.</span></span>

2) <span data-ttu-id="b77c9-571">È anche possibile usare un profilo WCS per archiviare esempi che definiscono la gamma di riferimento dei PC.</span><span class="sxs-lookup"><span data-stu-id="b77c9-571">You can also use a WCS profile to store samples that define the reference gamut of the PCS.</span></span> <span data-ttu-id="b77c9-572">Il sistema di gestione dei colori CITE (CMS) presenta due modi per creare i limiti della gamma.</span><span class="sxs-lookup"><span data-stu-id="b77c9-572">The CITE color management system (CMS) has two ways to create gamut boundaries.</span></span> <span data-ttu-id="b77c9-573">Uno consiste nel campionare lo spazio completo del dispositivo e utilizzare il modello di dispositivo per creare valori di misurazione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-573">One is to sample the complete device space and use the device model to create measurement values.</span></span> <span data-ttu-id="b77c9-574">Il secondo metodo consiste nell'usare campioni misurati dal profilo per creare un limite di gamut di riferimento.</span><span class="sxs-lookup"><span data-stu-id="b77c9-574">The second method is to use measured samples from the profile to create a reference gamut boundary.</span></span> <span data-ttu-id="b77c9-575">Poiché la gamma dei PC ICC è troppo grande per creare una gamut di riferimento utile, il primo metodo non è appropriato.</span><span class="sxs-lookup"><span data-stu-id="b77c9-575">Because the gamut of the ICC PCS is too large to make a useful reference gamut, the first method is inappropriate.</span></span> <span data-ttu-id="b77c9-576">Il secondo metodo, tuttavia, è un approccio flessibile basato sul profilo.</span><span class="sxs-lookup"><span data-stu-id="b77c9-576">But the second method is a flexible, profile-based approach.</span></span> <span data-ttu-id="b77c9-577">Per ridefinire il gamut dei PC di riferimento, è possibile modificare i dati di misurazione nel profilo del dispositivo PCS.</span><span class="sxs-lookup"><span data-stu-id="b77c9-577">To redefine the reference PCS gamut, you can change the measurement data in the PCS device profile.</span></span>

3) <span data-ttu-id="b77c9-578">I PC ICC sono una modellazione di un dispositivo ideale.</span><span class="sxs-lookup"><span data-stu-id="b77c9-578">The ICC PCS is a modeling of an ideal device.</span></span> <span data-ttu-id="b77c9-579">Creando un modello dei PC come un vero e proprio dispositivo, è possibile sfruttare i vantaggi del processo di gestione dei colori usato nella smart CMM.</span><span class="sxs-lookup"><span data-stu-id="b77c9-579">By creating a model of the PCS as a real device, you can take advantage of the color management process used in the Smart CMM.</span></span> <span data-ttu-id="b77c9-580">La creazione di un modello di dispositivo da colorimetria alla codifica dei PC è semplice.</span><span class="sxs-lookup"><span data-stu-id="b77c9-580">Creating a device model from colorimetry to the PCS encoding is straightforward.</span></span> <span data-ttu-id="b77c9-581">È sufficiente eseguire il mapping tra i valori di colorimetrico true e quelli codificati per i PC.</span><span class="sxs-lookup"><span data-stu-id="b77c9-581">You simply map between the true colorimetric values and the PCS encoded values.</span></span> <span data-ttu-id="b77c9-582">Poiché l'interfaccia CMS per i modelli di dispositivo supporta solo i valori XYZ, potrebbe anche essere necessario eseguire il mapping tra XYZ e LAB.</span><span class="sxs-lookup"><span data-stu-id="b77c9-582">Since the CMS interface for device models only supports XYZ values, you might also have to map between XYZ and LAB.</span></span> <span data-ttu-id="b77c9-583">Si tratta di una trasformazione ben nota.</span><span class="sxs-lookup"><span data-stu-id="b77c9-583">This is a well-known transformation.</span></span> <span data-ttu-id="b77c9-584">Questo modello è descritto nel documento 2.2.02 "modelli di dispositivo di base" nelle sezioni 7,9 e 7,10.</span><span class="sxs-lookup"><span data-stu-id="b77c9-584">This model is described in the document 2.2.02 "Baseline Device Models" in sections 7.9 and 7.10.</span></span>

<span data-ttu-id="b77c9-585">Potrebbe essere necessario eseguire un mapping di gamut, se la gamma del dispositivo è maggiore della gamma dei PC.</span><span class="sxs-lookup"><span data-stu-id="b77c9-585">You might have to perform some gamut mapping, if the gamut of the device is larger than the gamut of the PCS.</span></span> <span data-ttu-id="b77c9-586">Per questo scopo è possibile usare il MGM di base.</span><span class="sxs-lookup"><span data-stu-id="b77c9-586">The baseline GMMs can be used for this purpose.</span></span> <span data-ttu-id="b77c9-587">Si noti che un profilo ICC creato correttamente dispone di tabelle di ricerca per gli Intent di colorimetrico, percettivo e saturazione relativi, sebbene questi possano puntare allo stesso LUT internamente.</span><span class="sxs-lookup"><span data-stu-id="b77c9-587">Note that a properly created ICC profile has lookup tables for the Relative Colorimetric, Perceptual, and Saturation intents, although these may all point to the same LUT internally.</span></span>

![Diagramma che illustra la creazione di un A T o B L U T.](images/transformcreation-image128.png)

<span data-ttu-id="b77c9-589">**Figura 5:** Creazione di un LUT AToB</span><span class="sxs-lookup"><span data-stu-id="b77c9-589">**Figure 5:** Creation of an AToB LUT</span></span>

<span data-ttu-id="b77c9-590">Questo processo è illustrato nella figura 5.</span><span class="sxs-lookup"><span data-stu-id="b77c9-590">This process is illustrated in Figure 5.</span></span> <span data-ttu-id="b77c9-591">In primo luogo, il modello di dispositivo viene inizializzato in base ai dati nel profilo DM.</span><span class="sxs-lookup"><span data-stu-id="b77c9-591">First, the device model is initialized from the data in the DM profile.</span></span> <span data-ttu-id="b77c9-592">Quindi, costruire un limite di gamut del dispositivo come segue.</span><span class="sxs-lookup"><span data-stu-id="b77c9-592">Then, construct a device gamut boundary as follows.</span></span> <span data-ttu-id="b77c9-593">Un campionamento dei dati dal modello di dispositivo viene eseguito tramite il modello di dispositivo per ottenere i dati colorimetrico.</span><span class="sxs-lookup"><span data-stu-id="b77c9-593">A sampling of data from the device model is run through the device model to obtain colorimetric data.</span></span> <span data-ttu-id="b77c9-594">I dati colorimetrico vengono eseguiti attraverso la camma per creare dati di aspetto.</span><span class="sxs-lookup"><span data-stu-id="b77c9-594">The colorimetric data is run through the CAM to create appearance data.</span></span> <span data-ttu-id="b77c9-595">I dati relativi all'aspetto vengono usati per creare il limite della gamma di dispositivi.</span><span class="sxs-lookup"><span data-stu-id="b77c9-595">The appearance data is used to create the device gamut boundary.</span></span>

<span data-ttu-id="b77c9-596">Usare quindi i dati del profilo di misurazione PC di riferimento per creare un limite di gamut per i PC.</span><span class="sxs-lookup"><span data-stu-id="b77c9-596">Next, use data from the reference PCS measurement profile to create a gamut boundary for the PCS.</span></span>

<span data-ttu-id="b77c9-597">Usare i due limiti di gamut appena creati per inizializzare un MGM.</span><span class="sxs-lookup"><span data-stu-id="b77c9-597">Use the two gamut boundaries just created to initialize a GMM.</span></span> <span data-ttu-id="b77c9-598">Usare quindi il modello di dispositivo, il MGM e il modello di dispositivo PCS per creare una trasformazione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-598">Then, use the device model, the GMM, and the PCS device model to create a transform.</span></span> <span data-ttu-id="b77c9-599">Eseguire un campionamento dello spazio del dispositivo attraverso la trasformazione per creare un LUT AToB.</span><span class="sxs-lookup"><span data-stu-id="b77c9-599">Run a sampling of device space through the transform to create an AToB LUT.</span></span>

![Diagramma che illustra la creazione di un A T o B L U T usando un campionamento dello spazio P C.](images/transformcreation-image130.png)

<span data-ttu-id="b77c9-601">**Figura 6:** Creazione di un LUT BToA</span><span class="sxs-lookup"><span data-stu-id="b77c9-601">**Figure 6:** Creation of a BToA LUT</span></span>

<span data-ttu-id="b77c9-602">Nella figura 6 viene illustrata la creazione di LUT BToA.</span><span class="sxs-lookup"><span data-stu-id="b77c9-602">Figure 6 illustrates the creation of the BToA LUT.</span></span> <span data-ttu-id="b77c9-603">Questa operazione è quasi identica alla creazione di un LUT AToB con i ruoli di origine e di destinazione scambiati.</span><span class="sxs-lookup"><span data-stu-id="b77c9-603">This is almost identical to creating an AToB LUT, with the roles of source and destination exchanged.</span></span> <span data-ttu-id="b77c9-604">Inoltre, è necessario campionare il gamut dei PC completi per creare il LUT.</span><span class="sxs-lookup"><span data-stu-id="b77c9-604">Also, you must sample the full PCS gamut to create the LUT.</span></span>

<span data-ttu-id="b77c9-605">Si noti che poiché la camma (CIECAM02 in WCS) è implicata nel processo, l'adattamento cromatico tra il punto bianco multimediale e il punto bianco dei PC (imposto da ICC come D50) viene applicato in modo trasparente dalla camma.</span><span class="sxs-lookup"><span data-stu-id="b77c9-605">Note that because the CAM (CIECAM02 in WCS) is involved in the process, chromatic adaptation between the media white point and the PCS white point (mandated by ICC to be that of D50) is effected transparently by the CAM.</span></span>

## <a name="hdr-virtual-rgb-devices"></a><span data-ttu-id="b77c9-606">Dispositivi RGB virtuali HDR</span><span class="sxs-lookup"><span data-stu-id="b77c9-606">HDR virtual RGB devices</span></span>

<span data-ttu-id="b77c9-607">È necessario prestare particolare attenzione durante la generazione di profili per i dispositivi RGB virtuali HDR; ovvero i dispositivi per i quali i valori coloranti possono essere inferiori a 0,0 o maggiori di 1,0.</span><span class="sxs-lookup"><span data-stu-id="b77c9-607">Special consideration must be given when generating profiles for HDR virtual RGB devices; that is, devices for which the colorant values may be less than 0.0 or greater than 1.0.</span></span> <span data-ttu-id="b77c9-608">Nella generazione di ATOB LUT, viene compilato un set più ampio di LUTs di input 1D.</span><span class="sxs-lookup"><span data-stu-id="b77c9-608">In the generation of the ATOB LUT, a larger set of 1D input LUTs is built.</span></span> <span data-ttu-id="b77c9-609">I valori coloranti vengono ridimensionati e spostati nell'intervallo 0.</span><span class="sxs-lookup"><span data-stu-id="b77c9-609">Colorant values are scaled and offset to the range 0 ..</span></span> <span data-ttu-id="b77c9-610">1 uso dei valori di colore minimo e massimo nel profilo WCS.</span><span class="sxs-lookup"><span data-stu-id="b77c9-610">1 using the minimum and maximum colorant values in the WCS profile.</span></span>

<span data-ttu-id="b77c9-611">Poiché lo spazio colorante per i dispositivi HDR non è probabilmente completamente popolato, il supporto speciale viene fornito nel LUT 3D anche per il tag.</span><span class="sxs-lookup"><span data-stu-id="b77c9-611">Because the colorant space for HDR devices is not likely to be completely populated, special support is provided in the 3-D LUT for the tag as well.</span></span> <span data-ttu-id="b77c9-612">Per gestire i colori nell'area popolata a bassa densità, i coloranti vengono ricodificati in modo che sia possibile ottenere l'estrapolazione oltre 0,0 e 1,0.</span><span class="sxs-lookup"><span data-stu-id="b77c9-612">In order to handle colors in the sparsely populated region, the colorants are recoded so that extrapolation beyond 0.0 and 1.0 can be achieved.</span></span> <span data-ttu-id="b77c9-613">L'intervallo usato è-1.</span><span class="sxs-lookup"><span data-stu-id="b77c9-613">The range used is -1 ..</span></span> <span data-ttu-id="b77c9-614">+ 4.</span><span class="sxs-lookup"><span data-stu-id="b77c9-614">+4.</span></span>

<span data-ttu-id="b77c9-615">A causa del ridimensionamento applicato per LUT 3D, viene creato un set di output 1D LUTs per eseguire il mapping del risultato all'intervallo 0.</span><span class="sxs-lookup"><span data-stu-id="b77c9-615">Because of the rescaling applied for the 3-D LUT, a set of 1D output LUTs is built to map the result back to the range 0 ..</span></span> <span data-ttu-id="b77c9-616">1.</span><span class="sxs-lookup"><span data-stu-id="b77c9-616">1.</span></span>

## <a name="more-than-one-pcs"></a><span data-ttu-id="b77c9-617">Più di un PC</span><span class="sxs-lookup"><span data-stu-id="b77c9-617">More than one PCS</span></span>

<span data-ttu-id="b77c9-618">Il TPI ha rilevato che uno dei PC non era sufficientemente flessibile per soddisfare tutti gli usi previsti di un CMS.</span><span class="sxs-lookup"><span data-stu-id="b77c9-618">The ICC found that one PCS was not sufficiently flexible to meet all the intended uses of a CMS.</span></span> <span data-ttu-id="b77c9-619">Nella versione 4 della specifica del profilo, il TPI ha chiarito che esistono effettivamente due codifiche di PC.</span><span class="sxs-lookup"><span data-stu-id="b77c9-619">In version 4 of the Profile Specification, the ICC clarified that there are actually two PCS encodings.</span></span> <span data-ttu-id="b77c9-620">Uno viene usato per gli Intent colorimetrico; un altro viene usato per finalità percettive.</span><span class="sxs-lookup"><span data-stu-id="b77c9-620">One is used for the colorimetric intents; another is used for the perceptual intent.</span></span> <span data-ttu-id="b77c9-621">(Nessun PC specificato per l'intento di saturazione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-621">(No PCS is specified for the Saturation intent.</span></span> <span data-ttu-id="b77c9-622">Il TPI ha lasciato ambiguo questa parte. I PC colorimetrico hanno una luminosità minima e massima specificata, ma i valori di Chroma e Hue variano approssimativamente a ± 127.</span><span class="sxs-lookup"><span data-stu-id="b77c9-622">The ICC has left this part ambiguous.) The colorimetric PCS has a minimum and maximum lightness specified, but the chroma and hue values range to roughly ± 127.</span></span> <span data-ttu-id="b77c9-623">Questi PC sembrano un prisma rettangolare.</span><span class="sxs-lookup"><span data-stu-id="b77c9-623">This PCS looks like a rectangular prism.</span></span> <span data-ttu-id="b77c9-624">Come indicato in precedenza, il volume dei PC percettivi è simile alla gamma di una stampante a getto d'inchiostro.</span><span class="sxs-lookup"><span data-stu-id="b77c9-624">As mentioned previously, the perceptual PCS volume resembles the gamut of an inkjet printer.</span></span>

<span data-ttu-id="b77c9-625">Le due PCSs ICC hanno anche due codifiche digitali diverse.</span><span class="sxs-lookup"><span data-stu-id="b77c9-625">The two ICC PCSs also have two different digital encodings.</span></span> <span data-ttu-id="b77c9-626">Nei PC percettivi, un valore pari a zero rappresenta una luminosità pari a zero.</span><span class="sxs-lookup"><span data-stu-id="b77c9-626">In the perceptual PCS, a value of zero represents a lightness of zero.</span></span> <span data-ttu-id="b77c9-627">Nei PC colorimetrico, un valore pari a zero rappresenta la luminosità minima dei PC, che è maggiore di zero.</span><span class="sxs-lookup"><span data-stu-id="b77c9-627">In the colorimetric PCS, a value of zero represents the minimum lightness of the PCS, which is greater than zero.</span></span> <span data-ttu-id="b77c9-628">Per risolvere questo problema, è necessario disporre di un modello di dispositivo diverso per ogni codifica dei PC.</span><span class="sxs-lookup"><span data-stu-id="b77c9-628">You can solve this problem by having a different device model for each of the PCS encodings.</span></span>

## <a name="gamut-mapping"></a><span data-ttu-id="b77c9-629">Mapping gamut</span><span class="sxs-lookup"><span data-stu-id="b77c9-629">Gamut mapping</span></span>

<span data-ttu-id="b77c9-630">Per creare il LUTs di AToB in un profilo ICC, è possibile eseguire il mapping dal gamut del dispositivo allo spazio dei PC appropriato.</span><span class="sxs-lookup"><span data-stu-id="b77c9-630">To create the AToB LUTs in an ICC profile, you map from the device gamut to the appropriate PCS space.</span></span> <span data-ttu-id="b77c9-631">Per creare il LUTs BToA, è necessario eseguire il mapping dallo spazio dei PC al gamut del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b77c9-631">To create the BToA LUTs, you map from the PCS space to the device gamut.</span></span> <span data-ttu-id="b77c9-632">Il mapping per il LUTs AToB è molto simile a quello usato in un CMS basato su misura.</span><span class="sxs-lookup"><span data-stu-id="b77c9-632">The mapping for the AToB LUTs is quite similar to that used in a measurement-based CMS.</span></span> <span data-ttu-id="b77c9-633">Per i PC percettivi, mappare la gamma plausibile del dispositivo al limite di gamut dei PC percettivi, usando il ritaglio o la compressione per tutti i colori fuori gamma.</span><span class="sxs-lookup"><span data-stu-id="b77c9-633">For the perceptual PCS, map the device plausible gamut to the perceptual PCS gamut boundary, using either clipping or compression for any out-of-gamut colors.</span></span> <span data-ttu-id="b77c9-634">Per gli Intent di colorimetrico, potrebbe essere necessario ritagliare la luminosità, ma i valori di Chroma e Hue verranno tutti inseriti nel gamut dei PC colorimetrico.</span><span class="sxs-lookup"><span data-stu-id="b77c9-634">For the colorimetric intents, you might have to clip lightness, but the chroma and hue values are all going to fit in the colorimetric PCS gamut.</span></span>

<span data-ttu-id="b77c9-635">Il mapping per il LUTs BToA è leggermente diverso.</span><span class="sxs-lookup"><span data-stu-id="b77c9-635">The mapping for the BToA LUTs is a little different.</span></span> <span data-ttu-id="b77c9-636">Gli Intent colorimetrico sono ancora facili; è sufficiente ritagliare i valori dei PC nel gamut del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="b77c9-636">The colorimetric intents are still easy; you just clip PCS values to the device gamut.</span></span> <span data-ttu-id="b77c9-637">Tuttavia, il TPI richiede che tutti i valori dei PC possibili siano mappati a un valore di dispositivo, non solo quelli all'interno della gamma di riferimento dei PC percettivi.</span><span class="sxs-lookup"><span data-stu-id="b77c9-637">But the ICC requires that all possible PCS values map to some device value, not merely those within the reference gamut of the perceptual PCS.</span></span> <span data-ttu-id="b77c9-638">Pertanto, è necessario assicurarsi che MGM sia in grado di gestire i colori di origine che si trovano all'esterno della gamma di riferimento.</span><span class="sxs-lookup"><span data-stu-id="b77c9-638">So, you must make sure that the GMMs can handle source colors that are outside the reference gamut.</span></span> <span data-ttu-id="b77c9-639">Questo può essere gestito ritagliando tali colori al limite della gamma di dispositivi.</span><span class="sxs-lookup"><span data-stu-id="b77c9-639">This can be handled by clipping those colors to the device gamut boundary.</span></span>

## <a name="baseline-device-to-icc-profile-class-mapping"></a><span data-ttu-id="b77c9-640">Mapping della classe del profilo del dispositivo di base al profilo ICC</span><span class="sxs-lookup"><span data-stu-id="b77c9-640">Baseline device to ICC profile class mapping</span></span>



| <span data-ttu-id="b77c9-641">Tipo di dispositivo Baseline</span><span class="sxs-lookup"><span data-stu-id="b77c9-641">Baseline Device Type</span></span>              | <span data-ttu-id="b77c9-642">Classe profilo ICC</span><span class="sxs-lookup"><span data-stu-id="b77c9-642">ICC Profile Class</span></span>       | <span data-ttu-id="b77c9-643">Commento</span><span class="sxs-lookup"><span data-stu-id="b77c9-643">Remark</span></span>                                                                      |
|-----------------------------------|-------------------------|-----------------------------------------------------------------------------|
| <span data-ttu-id="b77c9-644">Dispositivo di acquisizione RGB</span><span class="sxs-lookup"><span data-stu-id="b77c9-644">RGB Capture Device</span></span>                | <span data-ttu-id="b77c9-645">Dispositivo di input ("SCNR")</span><span class="sxs-lookup"><span data-stu-id="b77c9-645">Input Device ("scnr")</span></span>   | <span data-ttu-id="b77c9-646">I PC sono CIELAB.</span><span class="sxs-lookup"><span data-stu-id="b77c9-646">PCS is CIELAB.</span></span> <span data-ttu-id="b77c9-647">AToB0Tag è un dispositivo a PC con finalità colorimetrico relativa.</span><span class="sxs-lookup"><span data-stu-id="b77c9-647">AToB0Tag is Device to PCS with relative colorimetric intent.</span></span> |
| <span data-ttu-id="b77c9-648">CRT, monitor LCD</span><span class="sxs-lookup"><span data-stu-id="b77c9-648">CRT, LCD monitor</span></span>                  | <span data-ttu-id="b77c9-649">Visualizza dispositivo ("mntr")</span><span class="sxs-lookup"><span data-stu-id="b77c9-649">Display Device ("mntr")</span></span> | <span data-ttu-id="b77c9-650">I PC sono CIE XYZ.</span><span class="sxs-lookup"><span data-stu-id="b77c9-650">PCS is CIEXYZ.</span></span> <span data-ttu-id="b77c9-651">Vedere quanto segue per la conversione del modello.</span><span class="sxs-lookup"><span data-stu-id="b77c9-651">See the following for model conversion.</span></span>                      |
| <span data-ttu-id="b77c9-652">Proiettore RGB</span><span class="sxs-lookup"><span data-stu-id="b77c9-652">RGB Projector</span></span>                     | <span data-ttu-id="b77c9-653">Spazio colore ("SPAC")</span><span class="sxs-lookup"><span data-stu-id="b77c9-653">Color Space ("spac")</span></span>    | <span data-ttu-id="b77c9-654">I PC sono CIELAB.</span><span class="sxs-lookup"><span data-stu-id="b77c9-654">PCS is CIELAB.</span></span>                                                              |
| <span data-ttu-id="b77c9-655">Stampante RGB e CMYK</span><span class="sxs-lookup"><span data-stu-id="b77c9-655">RGB and CMYK printer</span></span>              | <span data-ttu-id="b77c9-656">Dispositivo di output ("PRTR")</span><span class="sxs-lookup"><span data-stu-id="b77c9-656">Output Device ("prtr")</span></span>  | <span data-ttu-id="b77c9-657">I PC sono CIELAB.</span><span class="sxs-lookup"><span data-stu-id="b77c9-657">PCS is CIELAB.</span></span>                                                              |
| <span data-ttu-id="b77c9-658">Dispositivo virtuale RGB (caso non HDR)</span><span class="sxs-lookup"><span data-stu-id="b77c9-658">RGB Virtual Device (non-HDR case)</span></span> | <span data-ttu-id="b77c9-659">Visualizza dispositivo ("mntr")</span><span class="sxs-lookup"><span data-stu-id="b77c9-659">Display Device ("mntr")</span></span> | <span data-ttu-id="b77c9-660">I PC sono CIE XYZ.</span><span class="sxs-lookup"><span data-stu-id="b77c9-660">PCS is CIEXYZ.</span></span>                                                              |
| <span data-ttu-id="b77c9-661">Dispositivo virtuale RGB (caso HDR)</span><span class="sxs-lookup"><span data-stu-id="b77c9-661">RGB Virtual Device (HDR case)</span></span>     | <span data-ttu-id="b77c9-662">Spazio colore ("SPAC")</span><span class="sxs-lookup"><span data-stu-id="b77c9-662">Color Space ("spac")</span></span>    | <span data-ttu-id="b77c9-663">I PC sono CIELAB.</span><span class="sxs-lookup"><span data-stu-id="b77c9-663">PCS is CIELAB.</span></span>                                                              |



 

<span data-ttu-id="b77c9-664">La conversione dei profili di monitoraggio non implica la compilazione di LUTs, ma consiste invece nella compilazione di un modello Matrix o TRC.</span><span class="sxs-lookup"><span data-stu-id="b77c9-664">The conversion of monitor profiles does not involving building LUTs, but instead consists of building a matrix or TRC model.</span></span> <span data-ttu-id="b77c9-665">Il modello usato in ICC è leggermente diverso da quello usato nella modellazione CRT o nel modello LCD di WCS in quanto manca il termine "correzione nera".</span><span class="sxs-lookup"><span data-stu-id="b77c9-665">The model used in ICC is slightly different from the one used in the WCS CRT or LCD modeling in that the "black correction" term is missing.</span></span> <span data-ttu-id="b77c9-666">ovvero:</span><span class="sxs-lookup"><span data-stu-id="b77c9-666">Specifically,</span></span>

<span data-ttu-id="b77c9-667">Modello WCS:</span><span class="sxs-lookup"><span data-stu-id="b77c9-667">WCS model:</span></span> ![Mostra un modello W C S.](images/transformcreation-image132.png)

<span data-ttu-id="b77c9-669">Modello ICC:</span><span class="sxs-lookup"><span data-stu-id="b77c9-669">ICC model:</span></span> ![Mostra un modello I C c.](images/transformcreation-image134.png)

<span data-ttu-id="b77c9-671">La conversione dal modello WCS al modello ICC viene eseguita come indicato di seguito.</span><span class="sxs-lookup"><span data-stu-id="b77c9-671">The conversion from WCS model to ICC model is done as follows.</span></span>

<span data-ttu-id="b77c9-672">Definire nuove curve:</span><span class="sxs-lookup"><span data-stu-id="b77c9-672">Define new curves:</span></span>

![Mostra una matrice per definire nuove curve.](images/transformcreation-image136.png)

<span data-ttu-id="b77c9-674">Non si tratta di curve per la riproduzione di suoni perché non eseguono il mapping tra 1 e 1.</span><span class="sxs-lookup"><span data-stu-id="b77c9-674">These are not tone reproduction curves because they do not map 1 to 1.</span></span> <span data-ttu-id="b77c9-675">La normalizzazione lo raggiungerà.</span><span class="sxs-lookup"><span data-stu-id="b77c9-675">A normalization will achieve that.</span></span> <span data-ttu-id="b77c9-676">Le definizioni finali del modello ICC sono le seguenti:</span><span class="sxs-lookup"><span data-stu-id="b77c9-676">The final definitions of the ICC model are:</span></span>

![Mostra le definizioni finali del modello i C c.](images/transformcreation-image138.png)

![Mostra la matrice finale per il modello I C c.](images/transformcreation-image140.png)

<span data-ttu-id="b77c9-679">Per i dispositivi virtuali RGB non HDR, viene generato anche un profilo ICC di visualizzazione per l'efficienza dello spazio.</span><span class="sxs-lookup"><span data-stu-id="b77c9-679">For non-HDR RGB virtual devices, you are also generating a display ICC profile for space efficiency.</span></span> <span data-ttu-id="b77c9-680">In tal caso, la matrice di tristimolo *M ICC* può essere ottenuta direttamente dalle primarie del profilo WCS senza la conversione del modello precedente.</span><span class="sxs-lookup"><span data-stu-id="b77c9-680">In that case, the tristimulus matrix *M ICC* can be obtained directly from the primaries of the WCS profile without the above model conversion.</span></span> <span data-ttu-id="b77c9-681">Un aspetto finale, ma importante, è che questa matrice tristimolo deve essere adattata in modo cromatico a D50 per essere conforme alla specifica ICC dei PC.</span><span class="sxs-lookup"><span data-stu-id="b77c9-681">One final, but important, note is that this tristimulus matrix must be chromatically adapted to D50 to conform with the ICC specification of the PCS.</span></span> <span data-ttu-id="b77c9-682">In altre parole, le voci in ogni riga della matrice da codificare nel profilo ICC devono essere sommate rispettivamente a 96,42, 100 e 82,49.</span><span class="sxs-lookup"><span data-stu-id="b77c9-682">In other words, the entries on each row of the matrix to be encoded in the ICC profile must sum respectively to 96.42, 100, and 82.49.</span></span> <span data-ttu-id="b77c9-683">Nell'implementazione corrente, l'adattamento cromatico viene eseguito da CAT02, che è anche la trasformazione di adattamento cromatico utilizzata in CAM02.</span><span class="sxs-lookup"><span data-stu-id="b77c9-683">In the current implementation, the chromatic adaptation is done by CAT02, which is also the chromatic adaptation transform used in CAM02.</span></span>

## <a name="black-preservation-and-black-generation"></a><span data-ttu-id="b77c9-684">Conservazione nera e generazione nera</span><span class="sxs-lookup"><span data-stu-id="b77c9-684">Black Preservation and Black Generation</span></span>

<span data-ttu-id="b77c9-685">L'implementazione della conservazione del nero è legata alla generazione del canale nero nei dispositivi che supportano un canale nero.</span><span class="sxs-lookup"><span data-stu-id="b77c9-685">Implementation of black preservation is tied together with the generation of the black channel in devices that support a black channel.</span></span> <span data-ttu-id="b77c9-686">A tale scopo, vengono raccolte le informazioni su ogni colore di origine per consentire ai modelli di dispositivo che supportano un canale nero di determinare il modo migliore per impostare il canale nero nell'output.</span><span class="sxs-lookup"><span data-stu-id="b77c9-686">To accomplish this, information about each source color is collected to allow device models that support a black channel to determine how best to set the black channel on output.</span></span> <span data-ttu-id="b77c9-687">Sebbene la conservazione nera sia pertinente per le trasformazioni dei colori che si convertono tra un dispositivo del canale nero e l'altro, la generazione nera viene implementata per tutte le trasformazioni che coinvolgono un dispositivo di destinazione del canale nero.</span><span class="sxs-lookup"><span data-stu-id="b77c9-687">While black preservation is pertinent for color transforms that convert between one black-channel device to another, black generation is implemented for all transform involving a black-channel destination device.</span></span>

<span data-ttu-id="b77c9-688">Le informazioni sul canale nero vengono registrate in una struttura di dati denominata [**BlackInformation**](/previous-versions/windows/desktop/api/WcsPlugIn/ns-wcsplugin-_blackinformation).</span><span class="sxs-lookup"><span data-stu-id="b77c9-688">Black channel information is recorded in a data structure called [**BlackInformation**](/previous-versions/windows/desktop/api/WcsPlugIn/ns-wcsplugin-_blackinformation).</span></span> <span data-ttu-id="b77c9-689">La struttura **BlackInformation** contiene un valore booleano che indica se il colore contiene solo colori neri e un valore numerico che indica il grado di "nero" denominato peso nero.</span><span class="sxs-lookup"><span data-stu-id="b77c9-689">The **BlackInformation** structure contains a boolean indicating whether the color contains only black colorant and a numeric value indicating the degree of "blackness" called black weight.</span></span> <span data-ttu-id="b77c9-690">Per i dispositivi di origine che supportano un canale nero, il peso nero è la percentuale di colore nero nel colore di origine.</span><span class="sxs-lookup"><span data-stu-id="b77c9-690">For source devices that support a black channel, the black weight is the percentage of black colorant in the source color.</span></span> <span data-ttu-id="b77c9-691">Per i dispositivi di origine che non contengono un canale nero, il peso nero viene calcolato usando gli altri coloranti e il valore dell'aspetto.</span><span class="sxs-lookup"><span data-stu-id="b77c9-691">For source devices that do not contain a black channel, the black weight is computed using the other colorants and the appearance value.</span></span> <span data-ttu-id="b77c9-692">Un valore denominato "purezza colore" viene calcolato prendendo la differenza tra il valore colore massimo e il valore colore minimo diviso per il valore colore massimo.</span><span class="sxs-lookup"><span data-stu-id="b77c9-692">A value called "color purity" is computed by taking the difference between the maximum colorant value and the minimum colorant value divided by the maximum colorant value.</span></span> <span data-ttu-id="b77c9-693">Un valore denominato "luminosità relativa" viene calcolato prendendo la differenza tra la luminosità del colore e la luminosità minima per il dispositivo di destinazione divisa per la differenza tra la luminosità minima e massima per il dispositivo di destinazione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-693">A value called "relative lightness" is computed by taking the difference between the lightness of the color and the minimum lightness for the destination device divided by the difference between the minimum and maximum lightness for the destination device.</span></span> <span data-ttu-id="b77c9-694">Se il dispositivo di origine è un dispositivo additivo (monitor o proiettore), il peso nero viene determinato come 1,0 meno la purezza del colore moltiplicata per la luminosità relativa.</span><span class="sxs-lookup"><span data-stu-id="b77c9-694">If the source device is an additive device (monitor or projector), the black weight is determined to be the 1.0 minus the color purity multiplied by the relative lightness.</span></span> <span data-ttu-id="b77c9-695">Se ad esempio il dispositivo di origine è un monitor RGB, viene calcolato il valore massimo e il valore minimo di R, G e B per ogni colore e il peso nero è determinato dalla formula:</span><span class="sxs-lookup"><span data-stu-id="b77c9-695">For example, if the source device is an RGB monitor, the maximum value and minimum value of R, G, and B for each color is computed and the black weight is determined by the formula:</span></span>

<span data-ttu-id="b77c9-696">BW = (1,0 – (Max (R, G, B)-min (R, G, B))/Max (R, G, B)) \* luminosità relativa</span><span class="sxs-lookup"><span data-stu-id="b77c9-696">BW = (1.0 – (max(R,G,B) – min(R,G,B)) / max(R, G, B)) \* relative lightness</span></span>

<span data-ttu-id="b77c9-697">Se il dispositivo di origine supporta la colorazione sottrattiva, ad esempio una stampante CMY, i singoli coloranti devono essere "quelli a complemento" (sottratti da 1,0) prima di essere utilizzati nella formula precedente.</span><span class="sxs-lookup"><span data-stu-id="b77c9-697">If the source device supports subtractive coloration, for example, a CMY printer, then the individual colorants must be "ones complemented" (subtracted from 1.0) before use in the preceding formula.</span></span> <span data-ttu-id="b77c9-698">Per una stampante CMY, quindi, R = 1,0 – C, G = 1,0-M e B = 1,0 – Y.</span><span class="sxs-lookup"><span data-stu-id="b77c9-698">Therefore, for a CMY printer, R = 1.0 – C, G = 1.0 – M, and B = 1.0 – Y.</span></span>

<span data-ttu-id="b77c9-699">Le informazioni nere per ogni colore elaborato dalla trasformazione colore vengono determinate durante il processo di conversione dei colori.</span><span class="sxs-lookup"><span data-stu-id="b77c9-699">The black information for each color processed by the color transform is determined during the color translation process.</span></span> <span data-ttu-id="b77c9-700">Le informazioni solo nere vengono determinate solo se è stata specificata la conservazione nera.</span><span class="sxs-lookup"><span data-stu-id="b77c9-700">The black-only information is only determined if black preservation is specified.</span></span> <span data-ttu-id="b77c9-701">Il peso nero viene sempre determinato se il modello di dispositivo di destinazione supporta un colore nero.</span><span class="sxs-lookup"><span data-stu-id="b77c9-701">Black weight is always determined if the destination device model support a black colorant.</span></span> <span data-ttu-id="b77c9-702">Le informazioni nere vengono passate al modello di dispositivo di destinazione tramite il metodo [**ColorimetricToDeviceColorsWithBlack**](/previous-versions/windows/desktop/api/WcsPlugIn/nf-wcsplugin-idevicemodelplugin-colorimetrictodevicecolorswithblack) , che usa il LUT risultante.</span><span class="sxs-lookup"><span data-stu-id="b77c9-702">The black information is passed to the destination device model via the [**ColorimetricToDeviceColorsWithBlack**](/previous-versions/windows/desktop/api/WcsPlugIn/nf-wcsplugin-idevicemodelplugin-colorimetrictodevicecolorswithblack) method, which uses the resulting LUT.</span></span>

<span data-ttu-id="b77c9-703">Si noti che, a causa dell'ottimizzazione della trasformazione dei colori, il processo precedente si verifica solo durante la creazione del LUT di trasformazione ottimizzato, non durante l'esecuzione del metodo TranslateColors.</span><span class="sxs-lookup"><span data-stu-id="b77c9-703">Note that, because of color transform optimization, the above process occurs only during the creation of the optimized transform LUT, not during the execution of the TranslateColors method.</span></span>

## <a name="optimization-for-transforms-with-more-than-three-source-channels"></a><span data-ttu-id="b77c9-704">Ottimizzazione per le trasformazioni con più di tre canali di origine</span><span class="sxs-lookup"><span data-stu-id="b77c9-704">Optimization for transforms with more than three source channels</span></span>

<span data-ttu-id="b77c9-705">La dimensione della trasformazione ottimizzata è determinata da diversi fattori: il numero di canali di colore nel dispositivo di origine, il numero di passaggi nella tabella per ogni canale di colore di origine e il numero di canali di colore nel dispositivo di output.</span><span class="sxs-lookup"><span data-stu-id="b77c9-705">The size of the optimized transform is determined by several factors: the number of color channels in the source device, the number of steps in the table for each source color channel, and the number of color channels in the output device.</span></span> <span data-ttu-id="b77c9-706">La formula per determinare le dimensioni della tabella di trasformazione è:</span><span class="sxs-lookup"><span data-stu-id="b77c9-706">The formula for determining the transform table size is:</span></span>

<span data-ttu-id="b77c9-707">Dimensioni = numero di passaggi per <sub>origine canale \ dispositivo (numero \ di \ canali \ in \ origine \ dispositivo)</sub> x numero di canali nel dispositivo di output</span><span class="sxs-lookup"><span data-stu-id="b77c9-707">Size = Number of steps per channel <sub>source\ device(Number\ of\ channels\ in\ source\ device)</sub> x number of channels in output device</span></span>

<span data-ttu-id="b77c9-708">Come si può notare, le dimensioni della tabella aumentano esponenzialmente in base al numero di canali nel dispositivo di origine.</span><span class="sxs-lookup"><span data-stu-id="b77c9-708">As you can see, the size of the table grows exponentially depending on the number of channels in the source device.</span></span> <span data-ttu-id="b77c9-709">Molti dispositivi di origine supportano tre canali di colore, ad esempio rosso, verde e blu.</span><span class="sxs-lookup"><span data-stu-id="b77c9-709">Many source devices support three color channels, for example,Red, Green, and Blue.</span></span> <span data-ttu-id="b77c9-710">Tuttavia, se un dispositivo di origine supporta quattro canali, ad esempio CMYK, le dimensioni della tabella e il tempo necessario per costruire la tabella crescono in base a un fattore del numero di passaggi.</span><span class="sxs-lookup"><span data-stu-id="b77c9-710">However, if a source device supports four channels, such as CMYK, the size of the table and the time required to construct the table grow by a factor of the number of steps.</span></span> <span data-ttu-id="b77c9-711">In un CMS basato su misurazione, in cui le trasformazioni vengono costruite in modo immediato, questo tempo potrebbe non essere accettabile.</span><span class="sxs-lookup"><span data-stu-id="b77c9-711">In a measurement-based CMS where transforms are constructed "on the fly," this time may well be unacceptable.</span></span>

<span data-ttu-id="b77c9-712">Per ridurre il tempo necessario per costruire la tabella di conversione dei colori, è possibile sfruttare i vantaggi di due fact.</span><span class="sxs-lookup"><span data-stu-id="b77c9-712">To reduce the time required to construct the color conversion table, it is possible to take advantage of two facts.</span></span> <span data-ttu-id="b77c9-713">In primo luogo, mentre il dispositivo di origine può supportare più di tre canali di colore, lo spazio di colore intermedio indipendente dal dispositivo (CIECAM02 ja <sub>c</sub> b <sub>c</sub> ) ha solo tre canali colori.</span><span class="sxs-lookup"><span data-stu-id="b77c9-713">First, while the source device may support more than three color channels, the intermediate device-independent color space (CIECAM02 Ja <sub>C</sub> b <sub>C</sub> ) has only three color channels.</span></span> <span data-ttu-id="b77c9-714">In secondo luogo, la parte più dispendiosa in termini di tempo dell'elaborazione non è la modellazione del dispositivo (conversione dalle coordinate dei colori del dispositivo ai valori tristimolo), ma il mapping della gamma.</span><span class="sxs-lookup"><span data-stu-id="b77c9-714">Second, the most time-consuming part of the processing is not the device modeling (converting from device color coordinates to tristimulus values), but the gamut mapping.</span></span> <span data-ttu-id="b77c9-715">Usando questi fatti, è possibile creare una tabella di conversione dei colori preliminare che converte i colori nello spazio di colore indipendente dal dispositivo attraverso i passaggi di mapping gamut e infine, tramite il modello di colore del dispositivo di output.</span><span class="sxs-lookup"><span data-stu-id="b77c9-715">Using these facts, you can construct a preliminary color conversion table that converts colors in the device-independent color space through the gamut mapping steps, and finally, through the output device color model.</span></span> <span data-ttu-id="b77c9-716">La costruzione di questa tabella è della dimensione tre.</span><span class="sxs-lookup"><span data-stu-id="b77c9-716">Construction of this table is of dimension three.</span></span> <span data-ttu-id="b77c9-717">Si costruisce quindi la dimensione quattro tabella di conversione dei colori finale convertendo le combinazioni di colori di origine in spazio intermedio indipendente dal dispositivo e quindi, usando la tabella di conversione dei colori preliminare, completare la conversione nello spazio colore del dispositivo di output.</span><span class="sxs-lookup"><span data-stu-id="b77c9-717">Then we construct the dimension four final color-conversion table by converting the source color combinations to intermediate device-independent space, and then, using the preliminary color-conversion table, finish the conversion to the output device color space.</span></span> <span data-ttu-id="b77c9-718">Si riducono quindi i calcoli (numero di passaggi nella tabella di ricerca) <sub>Number \ of \ Channels</sub> gamut mapping computing al numero di passaggi della tabella intermedia ₃ gamut mapping mapping.</span><span class="sxs-lookup"><span data-stu-id="b77c9-718">So you reduce from computing (number of steps in the lookup table) <sub>number\ of\ channels</sub> gamut mapping computations to the number of steps in the intermediate table ₃ gamut mapping computations.</span></span> <span data-ttu-id="b77c9-719">Anche se è necessario eseguire un numero di passaggi nel numero di calcoli (tabella di ricerca) <sub>numero \ di</sub> calcoli dei canali per la modellazione del dispositivo e le ricerche di tabelle tridimensionali, questo è ancora molto più veloce rispetto al calcolo originale.</span><span class="sxs-lookup"><span data-stu-id="b77c9-719">Even though you have to perform number of steps in the (lookup table) <sub>number\ of\ channels</sub> computations of device modeling and three-dimensional table lookups, this is still much faster than the original calculation.</span></span>

<span data-ttu-id="b77c9-720">Il processo precedente funziona correttamente purché non siano necessarie informazioni da passare tra il modello di dispositivo di origine e qualsiasi altro componente nella trasformazione colore.</span><span class="sxs-lookup"><span data-stu-id="b77c9-720">The preceding process will work well provided that there is no need for information to pass between the source device model and any other component in the color transform.</span></span> <span data-ttu-id="b77c9-721">Tuttavia, se il dispositivo di output e il dispositivo di origine supportano entrambi una colorazione nera e il colore nero di origine viene usato per determinare il colore nero di output, il processo non riuscirà a comunicare correttamente le informazioni nere di origine.</span><span class="sxs-lookup"><span data-stu-id="b77c9-721">However, if the output device and the source device both support a black colorant, and the source black colorant is used in determining the output black colorant, the process will fail to properly communicate the source black information.</span></span> <span data-ttu-id="b77c9-722">Un processo alternativo consiste nel creare una tabella di conversione dei colori preliminare che converte i colori nello spazio di colore indipendente dal dispositivo solo attraverso i passaggi di mapping della gamma.</span><span class="sxs-lookup"><span data-stu-id="b77c9-722">An alternative process is to construct a preliminary color conversion table that converts colors in the device-independent color space through the gamut mapping steps only.</span></span> <span data-ttu-id="b77c9-723">Costruire quindi la dimensione quattro tabella di conversione dei colori finale usando la procedura seguente: a) convertire le combinazioni di colori di origine in spazio intermedio indipendente dal dispositivo, b) eseguire i passaggi di mapping di gamut eseguendo l'interpolazione nella tabella dei colori preliminare anziché applicare i processi di mapping di gamut effettivi e c) usare i valori risultanti dai passaggi di mapping gamut e da eventuali informazioni sul canale nero di origine per calcolare i coloranti del dispositivo di output usando il</span><span class="sxs-lookup"><span data-stu-id="b77c9-723">Then construct the dimension four final color-conversion table using the following steps: a) convert the source color combinations to intermediate device-independent space, b) perform the gamut mapping steps by interpolating in the preliminary color table instead of applying the actual gamut mapping processes, and c) use the resulting values from the gamut mapping steps and any source black channel information to compute the output device colorants using the output device model.</span></span> <span data-ttu-id="b77c9-724">Questo processo può essere usato anche quando sono presenti informazioni trasferite tra i modelli di dispositivo di origine e di output anche se non è presente alcun canale nero; ad esempio, se i due moduli sono implementati con un'architettura plug-in che consente l'interscambio dei dati tra i moduli.</span><span class="sxs-lookup"><span data-stu-id="b77c9-724">This process also can be used when there is information transferred between the source and output device models even if there is no black channel; for example, if the two modules are implemented with a plug-in architecture that allows for data interchange between modules.</span></span>

<span data-ttu-id="b77c9-725">I due processi precedenti possono essere usati per migliorare efficacemente il tempo necessario per costruire la tabella di trasformazione dei colori a quattro dimensioni.</span><span class="sxs-lookup"><span data-stu-id="b77c9-725">The preceding two processes can be used to effectively improve the time required to construct the four-dimensional color transform table.</span></span>

### <a name="checkgamut"></a><span data-ttu-id="b77c9-726">CheckGamut</span><span class="sxs-lookup"><span data-stu-id="b77c9-726">CheckGamut</span></span>

<span data-ttu-id="b77c9-727">ICM chiama CreateTransform e **CreateMultiProfileTransform** accettano una parola dei valori del flag, uno dei quali è enable \_ gamut \_ checking.</span><span class="sxs-lookup"><span data-stu-id="b77c9-727">The ICM calls CreateTransform and **CreateMultiProfileTransform** take a word of flag values, one of which is ENABLE\_GAMUT\_CHECKING.</span></span> <span data-ttu-id="b77c9-728">Quando questo flag è impostato, CITE deve creare la trasformazione in modo diverso.</span><span class="sxs-lookup"><span data-stu-id="b77c9-728">When this flag is set, CITE must create the transform differently.</span></span> <span data-ttu-id="b77c9-729">I passaggi iniziali sono gli stessi: le camme di origine e di destinazione devono essere inizializzate, quindi è necessario inizializzare i descrittori di limite della gamma di origine e di destinazione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-729">The initial steps are the same: the source and destination CAMs must be initialized, then the source and destination gamut boundary descriptors must be initialized.</span></span> <span data-ttu-id="b77c9-730">Indipendentemente dall'intento specificato, è necessario usare CheckGamut MGM.</span><span class="sxs-lookup"><span data-stu-id="b77c9-730">Regardless of the specified intent, the CheckGamut GMM must be used.</span></span> <span data-ttu-id="b77c9-731">Il MGM di CheckGamut deve essere inizializzato usando i modelli di dispositivo di origine e di destinazione e i descrittori di limite della gamma.</span><span class="sxs-lookup"><span data-stu-id="b77c9-731">The CheckGamut GMM should be initialized using the source and destination device models and gamut boundary descriptors.</span></span> <span data-ttu-id="b77c9-732">Tuttavia, la trasformazione deve quindi creare una trasformazione troncata che comprende il modello di dispositivo di origine, la camma di origine, eventuali MGM interattivi e CheckGamut MGM.</span><span class="sxs-lookup"><span data-stu-id="b77c9-732">However, the transform should then create a truncated transform comprising the source device model, the source CAM, any intervening GMMs, and the CheckGamut GMM.</span></span> <span data-ttu-id="b77c9-733">Ciò garantisce che i valori Delta J, Delta C e Delta h restituiti dal CheckGamut CMM diventino i valori risultanti finali.</span><span class="sxs-lookup"><span data-stu-id="b77c9-733">This assures that the delta J, delta C, and delta h values output by the CheckGamut CMM become the final resulting values.</span></span>

<span data-ttu-id="b77c9-734">Il significato di CheckGamut è chiaro quando sono presenti solo due profili di dispositivo nella trasformazione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-734">The meaning of CheckGamut is clear when there are only two device profiles in the transform.</span></span> <span data-ttu-id="b77c9-735">Quando sono presenti più di due profili di dispositivo e più di due MGM, CheckGamut segnala se i colori che sono stati trasformati tramite il primo modello di dispositivo e tutti gli ultimi MGM rientrano nella gamma del dispositivo di destinazione.</span><span class="sxs-lookup"><span data-stu-id="b77c9-735">When there are more than two device profiles and more than two GMMs, then CheckGamut reports whether the colors which have been transformed through the first device model and all but the last GMM fall within the gamut of the destination device.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b77c9-736">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="b77c9-736">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b77c9-737">Concetti di base sulla gestione dei colori</span><span class="sxs-lookup"><span data-stu-id="b77c9-737">Basic color management concepts</span></span>](basic-color-management-concepts.md)
</dt> <dt>

[<span data-ttu-id="b77c9-738">Schemi e algoritmi del sistema di colori Windows</span><span class="sxs-lookup"><span data-stu-id="b77c9-738">Windows Color System Schemas and Algorithms</span></span>](windows-color-system-schemas-and-algorithms.md)
</dt> </dl>

 

 




