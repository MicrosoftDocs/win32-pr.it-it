---
description: I servizi HTTP di Microsoft Windows (WinHTTP) sono destinati a applicazioni server di livello intermedio e back-end che richiedono l'accesso a uno stack client HTTP.
ms.assetid: 5b0cf321-8f69-4526-a628-e6ca0f9d4a58
title: Porting di applicazioni WinINet a WinHTTP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6f64c4ecc825934d32b1d363f010bd04e1484428
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103968552"
---
# <a name="porting-wininet-applications-to-winhttp"></a><span data-ttu-id="8d49f-103">Porting di applicazioni WinINet a WinHTTP</span><span class="sxs-lookup"><span data-stu-id="8d49f-103">Porting WinINet Applications to WinHTTP</span></span>

<span data-ttu-id="8d49f-104">I servizi HTTP di Microsoft Windows (WinHTTP) sono destinati a applicazioni server di livello intermedio e back-end che richiedono l'accesso a uno stack client HTTP.</span><span class="sxs-lookup"><span data-stu-id="8d49f-104">Microsoft Windows HTTP Services (WinHTTP) is targeted at middle-tier and back-end server applications that require access to an HTTP client stack.</span></span> <span data-ttu-id="8d49f-105">[Microsoft Windows Internet (WinInet)](winhttp-start-page.md) fornisce uno stack client HTTP per le applicazioni client, nonché l'accesso ai protocolli File Transfer Protocol (FTP), SOCKSv4 e gopher.</span><span class="sxs-lookup"><span data-stu-id="8d49f-105">[Microsoft Windows Internet (WinINet)](winhttp-start-page.md) provides an HTTP client stack for client applications, as well as access to the File Transfer Protocol (FTP), SOCKSv4, and Gopher protocols.</span></span> <span data-ttu-id="8d49f-106">Questa panoramica può essere utile per determinare se il porting delle applicazioni WinINet a WinHTTP sarebbe vantaggioso.</span><span class="sxs-lookup"><span data-stu-id="8d49f-106">This overview can help determine whether porting your WinINet applications to WinHTTP would be beneficial.</span></span> <span data-ttu-id="8d49f-107">Vengono inoltre descritti i requisiti di conversione specifici.</span><span class="sxs-lookup"><span data-stu-id="8d49f-107">It also describes specific conversion requirements.</span></span>

-   [<span data-ttu-id="8d49f-108">Aspetti da considerare prima di trasferire l'applicazione WinINet</span><span class="sxs-lookup"><span data-stu-id="8d49f-108">Things to Consider Before Porting Your WinINet Application</span></span>](#things-to-consider-before-porting-your-wininet-application)
-   [<span data-ttu-id="8d49f-109">Equivalenti WinHTTP a funzioni WinINet</span><span class="sxs-lookup"><span data-stu-id="8d49f-109">WinHTTP Equivalents to WinINet Functions</span></span>](#winhttp-equivalents-to-wininet-functions)
-   [<span data-ttu-id="8d49f-110">Gestione diversa delle richieste asincrone</span><span class="sxs-lookup"><span data-stu-id="8d49f-110">Different Handling of Asynchronous Requests</span></span>](#different-handling-of-asynchronous-requests)
-   [<span data-ttu-id="8d49f-111">Differenze nelle notifiche di callback WinHTTP</span><span class="sxs-lookup"><span data-stu-id="8d49f-111">Differences in WinHTTP Callback Notifications</span></span>](#differences-in-winhttp-callback-notifications)
-   [<span data-ttu-id="8d49f-112">Differenze di autenticazione</span><span class="sxs-lookup"><span data-stu-id="8d49f-112">Authentication Differences</span></span>](#authentication-differences)
-   [<span data-ttu-id="8d49f-113">Differenze nelle transazioni HTTP protette</span><span class="sxs-lookup"><span data-stu-id="8d49f-113">Differences in Secure HTTP Transactions</span></span>](#differences-in-secure-http-transactions)

## <a name="things-to-consider-before-porting-your-wininet-application"></a><span data-ttu-id="8d49f-114">Aspetti da considerare prima di trasferire l'applicazione WinINet</span><span class="sxs-lookup"><span data-stu-id="8d49f-114">Things to Consider Before Porting Your WinINet Application</span></span>

<span data-ttu-id="8d49f-115">Provare a trasferire l'applicazione WinINet a WinHTTP se l'applicazione può trarre vantaggio da:</span><span class="sxs-lookup"><span data-stu-id="8d49f-115">Consider porting your WinINet application to WinHTTP if your application would benefit from:</span></span>

-   <span data-ttu-id="8d49f-116">Stack client HTTP indipendente dal server.</span><span class="sxs-lookup"><span data-stu-id="8d49f-116">A server-safe HTTP client stack.</span></span>
-   <span data-ttu-id="8d49f-117">Utilizzo dello stack ridotto a icona.</span><span class="sxs-lookup"><span data-stu-id="8d49f-117">Minimized stack usage.</span></span>
-   <span data-ttu-id="8d49f-118">Scalabilità di un'applicazione server.</span><span class="sxs-lookup"><span data-stu-id="8d49f-118">The scalability of a server application.</span></span>
-   <span data-ttu-id="8d49f-119">Meno dipendenze dalle API correlate alla piattaforma.</span><span class="sxs-lookup"><span data-stu-id="8d49f-119">Fewer dependencies on platform-related APIs.</span></span>
-   <span data-ttu-id="8d49f-120">Supporto per la rappresentazione del thread.</span><span class="sxs-lookup"><span data-stu-id="8d49f-120">Support for thread impersonation.</span></span>
-   <span data-ttu-id="8d49f-121">Stack HTTP adatto ai servizi.</span><span class="sxs-lookup"><span data-stu-id="8d49f-121">A service-friendly HTTP stack.</span></span>
-   <span data-ttu-id="8d49f-122">Accesso all'oggetto [**WinHttpRequest**](winhttprequest.md) di scripting.</span><span class="sxs-lookup"><span data-stu-id="8d49f-122">Access to the scriptable [**WinHttpRequest**](winhttprequest.md) object.</span></span>

<span data-ttu-id="8d49f-123">Non considerare la possibilità di trasferire l'applicazione WinINet a WinHTTP se deve supportare una o più delle seguenti operazioni:</span><span class="sxs-lookup"><span data-stu-id="8d49f-123">Do not consider porting your WinINet application to WinHTTP if it must support one or more of the following:</span></span>

-   <span data-ttu-id="8d49f-124">Protocollo FTP o gopher dallo stack HTTP.</span><span class="sxs-lookup"><span data-stu-id="8d49f-124">The FTP or Gopher protocol from the HTTP stack.</span></span>
-   <span data-ttu-id="8d49f-125">Supporto per il protocollo SOCKSv4 per la comunicazione con i proxy SOCKS.</span><span class="sxs-lookup"><span data-stu-id="8d49f-125">Support for SOCKSv4 protocol for communicating with SOCKS proxies.</span></span>
-   <span data-ttu-id="8d49f-126">Servizi di connessione remota automatici.</span><span class="sxs-lookup"><span data-stu-id="8d49f-126">Automatic dial-up services.</span></span>

<span data-ttu-id="8d49f-127">Se si decide di trasferire l'applicazione in WinHTTP, le sezioni seguenti illustrano il processo di conversione.</span><span class="sxs-lookup"><span data-stu-id="8d49f-127">If you decide to port your application to WinHTTP, the following sections guide you through the conversion process.</span></span>

<span data-ttu-id="8d49f-128">Per un'applicazione di esempio per WinINet e WinHTTP, confrontare l'esempio AsyncDemo per WinINet con l'esempio AsyncDemo per WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="8d49f-128">For a sample application for both WinINet and WinHTTP, compare the AsyncDemo sample for WinINet with the AsyncDemo sample for WinHTTP.</span></span>

## <a name="winhttp-equivalents-to-wininet-functions"></a><span data-ttu-id="8d49f-129">Equivalenti WinHTTP a funzioni WinINet</span><span class="sxs-lookup"><span data-stu-id="8d49f-129">WinHTTP Equivalents to WinINet Functions</span></span>

<span data-ttu-id="8d49f-130">Nella tabella seguente sono elencate le funzioni WinINet correlate allo stack client HTTP insieme agli equivalenti WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="8d49f-130">The following table lists WinINet functions related to the HTTP client stack together with the WinHTTP equivalents.</span></span>

<span data-ttu-id="8d49f-131">Se l'applicazione richiede funzioni WinINet non elencate, non trasferire l'applicazione in WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="8d49f-131">If your application requires WinINet functions that are not listed, do not port your application to WinHTTP.</span></span>



| <span data-ttu-id="8d49f-132">WinINet (funzione)</span><span class="sxs-lookup"><span data-stu-id="8d49f-132">WinINet function</span></span>                                                       | <span data-ttu-id="8d49f-133">Equivalente WinHTTP</span><span class="sxs-lookup"><span data-stu-id="8d49f-133">WinHTTP equivalent</span></span>                                                                                                                                                                                     | <span data-ttu-id="8d49f-134">Modifiche rilevanti</span><span class="sxs-lookup"><span data-stu-id="8d49f-134">Notable changes</span></span>                                                                                                                                                                                                                                                                                                                      |
|------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="8d49f-135">**HttpAddRequestHeaders**</span><span class="sxs-lookup"><span data-stu-id="8d49f-135">**HttpAddRequestHeaders**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpaddrequestheadersa)             | [<span data-ttu-id="8d49f-136">**WinHttpAddRequestHeaders**</span><span class="sxs-lookup"><span data-stu-id="8d49f-136">**WinHttpAddRequestHeaders**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpaddrequestheaders)                                                                                                                                           | <span data-ttu-id="8d49f-137">Nessuna.</span><span class="sxs-lookup"><span data-stu-id="8d49f-137">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="8d49f-138">**HttpEndRequest**</span><span class="sxs-lookup"><span data-stu-id="8d49f-138">**HttpEndRequest**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpendrequesta)                           | [<span data-ttu-id="8d49f-139">**WinHttpReceiveResponse**</span><span class="sxs-lookup"><span data-stu-id="8d49f-139">**WinHttpReceiveResponse**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse)                                                                                                                                               | <span data-ttu-id="8d49f-140">Il valore di contesto viene impostato con [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) o [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="8d49f-140">The context value is set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="8d49f-141">Le opzioni di richiesta sono impostate con [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span><span class="sxs-lookup"><span data-stu-id="8d49f-141">Request options are set with [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span> <span data-ttu-id="8d49f-142">[**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) deve essere chiamato dopo l'invio di una richiesta.</span><span class="sxs-lookup"><span data-stu-id="8d49f-142">[**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) must be called after sending a request.</span></span>                      |
| [<span data-ttu-id="8d49f-143">**HttpOpenRequest**</span><span class="sxs-lookup"><span data-stu-id="8d49f-143">**HttpOpenRequest**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpopenrequesta)                         | [<span data-ttu-id="8d49f-144">**WinHttpOpenRequest**</span><span class="sxs-lookup"><span data-stu-id="8d49f-144">**WinHttpOpenRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest)                                                                                                                                                       | <span data-ttu-id="8d49f-145">Il valore di contesto viene impostato con [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) o [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="8d49f-145">The context value is set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span>                                                                                                                                                                                                      |
| [<span data-ttu-id="8d49f-146">**HttpQueryInfo**</span><span class="sxs-lookup"><span data-stu-id="8d49f-146">**HttpQueryInfo**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpqueryinfoa)                             | [<span data-ttu-id="8d49f-147">**WinHttpQueryHeaders**</span><span class="sxs-lookup"><span data-stu-id="8d49f-147">**WinHttpQueryHeaders**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryheaders)                                                                                                                                                     | <span data-ttu-id="8d49f-148">Nessuna.</span><span class="sxs-lookup"><span data-stu-id="8d49f-148">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="8d49f-149">**HttpSendRequest**</span><span class="sxs-lookup"><span data-stu-id="8d49f-149">**HttpSendRequest**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpsendrequesta)                         | [<span data-ttu-id="8d49f-150">**WinHttpSendRequest**</span><span class="sxs-lookup"><span data-stu-id="8d49f-150">**WinHttpSendRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest)                                                                                                                                                       | <span data-ttu-id="8d49f-151">Il valore di contesto può essere impostato con [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest).</span><span class="sxs-lookup"><span data-stu-id="8d49f-151">The context value can be set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest).</span></span>                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="8d49f-152">**HttpSendRequestEx**</span><span class="sxs-lookup"><span data-stu-id="8d49f-152">**HttpSendRequestEx**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpsendrequestexa)                     | [<span data-ttu-id="8d49f-153">**WinHttpSendRequest**</span><span class="sxs-lookup"><span data-stu-id="8d49f-153">**WinHttpSendRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest)                                                                                                                                                       | <span data-ttu-id="8d49f-154">Impossibile fornire i buffer.</span><span class="sxs-lookup"><span data-stu-id="8d49f-154">Buffers cannot be provided.</span></span>                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="8d49f-155">**InternetCanonicalizeUrl**</span><span class="sxs-lookup"><span data-stu-id="8d49f-155">**InternetCanonicalizeUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcanonicalizeurla)         | <span data-ttu-id="8d49f-156">Nessun equivalente</span><span class="sxs-lookup"><span data-stu-id="8d49f-156">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="8d49f-157">Gli URL vengono ora inseriti in formato canonico in [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span><span class="sxs-lookup"><span data-stu-id="8d49f-157">URLs are now put in canonical form in [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span>                                                                                                                                                                                                                                              |
| [<span data-ttu-id="8d49f-158">**InternetCheckConnection**</span><span class="sxs-lookup"><span data-stu-id="8d49f-158">**InternetCheckConnection**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcheckconnectiona)         | <span data-ttu-id="8d49f-159">Nessun equivalente</span><span class="sxs-lookup"><span data-stu-id="8d49f-159">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="8d49f-160">Non implementato in WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="8d49f-160">Not implemented in WinHTTP.</span></span>                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="8d49f-161">**InternetCloseHandle**</span><span class="sxs-lookup"><span data-stu-id="8d49f-161">**InternetCloseHandle**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetclosehandle)                 | [<span data-ttu-id="8d49f-162">**WinHttpCloseHandle**</span><span class="sxs-lookup"><span data-stu-id="8d49f-162">**WinHttpCloseHandle**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpclosehandle)                                                                                                                                                       | <span data-ttu-id="8d49f-163">La chiusura di un handle padre in WinHTTP non chiude in modo ricorsivo gli handle figlio.</span><span class="sxs-lookup"><span data-stu-id="8d49f-163">Closing a parent handle in WinHTTP does not recursively close child handles.</span></span>                                                                                                                                                                                                                                                         |
| [<span data-ttu-id="8d49f-164">**InternetCombineUrl**</span><span class="sxs-lookup"><span data-stu-id="8d49f-164">**InternetCombineUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcombineurla)                   | <span data-ttu-id="8d49f-165">Nessun equivalente</span><span class="sxs-lookup"><span data-stu-id="8d49f-165">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="8d49f-166">Gli URL possono essere assemblati con la funzione [**WinHttpCreateUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcreateurl) .</span><span class="sxs-lookup"><span data-stu-id="8d49f-166">URLs can be assembled with the [**WinHttpCreateUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcreateurl) function.</span></span>                                                                                                                                                                                                                                                |
| [<span data-ttu-id="8d49f-167">**InternetConfirmZoneCrossing**</span><span class="sxs-lookup"><span data-stu-id="8d49f-167">**InternetConfirmZoneCrossing**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetconfirmzonecrossing) | <span data-ttu-id="8d49f-168">Nessun equivalente</span><span class="sxs-lookup"><span data-stu-id="8d49f-168">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="8d49f-169">Non implementato in WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="8d49f-169">Not implemented in WinHTTP.</span></span>                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="8d49f-170">**InternetConnect**</span><span class="sxs-lookup"><span data-stu-id="8d49f-170">**InternetConnect**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetconnecta)                         | [<span data-ttu-id="8d49f-171">**WinHttpConnect**</span><span class="sxs-lookup"><span data-stu-id="8d49f-171">**WinHttpConnect**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect)                                                                                                                                                               | <span data-ttu-id="8d49f-172">Il valore di contesto viene impostato con [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) o [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="8d49f-172">The context value is set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="8d49f-173">Le opzioni di richiesta sono impostate con [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span><span class="sxs-lookup"><span data-stu-id="8d49f-173">Request options are set with [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span> <span data-ttu-id="8d49f-174">Le credenziali utente sono impostate con [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span><span class="sxs-lookup"><span data-stu-id="8d49f-174">User credentials are set with [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span></span>                                 |
| [<span data-ttu-id="8d49f-175">**InternetCrackUrl**</span><span class="sxs-lookup"><span data-stu-id="8d49f-175">**InternetCrackUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcrackurla)                       | [<span data-ttu-id="8d49f-176">**WinHttpCrackUrl**</span><span class="sxs-lookup"><span data-stu-id="8d49f-176">**WinHttpCrackUrl**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcrackurl)                                                                                                                                                             | <span data-ttu-id="8d49f-177">Comportamento opposto del flag di \_ escape di ICU: con [**InternetCrackUrl**](/windows/desktop/api/wininet/nf-wininet-internetcrackurla), questo flag fa in modo che le sequenze di escape (% XX) vengano convertite in caratteri, ma con [**WinHttpCrackUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcrackurl), i caratteri che devono essere preceduti da un carattere di escape in una richiesta HTTP devono essere convertiti in sequenze di escape.</span><span class="sxs-lookup"><span data-stu-id="8d49f-177">Opposite behavior of the ICU\_ESCAPE flag: with [**InternetCrackUrl**](/windows/desktop/api/wininet/nf-wininet-internetcrackurla), this flag causes escape sequences (%xx) to be converted to characters, but with [**WinHttpCrackUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcrackurl), it causes characters that must be escaped from in an HTTP request to be converted to escape sequences.</span></span> |
| [<span data-ttu-id="8d49f-178">**InternetCreateUrl**</span><span class="sxs-lookup"><span data-stu-id="8d49f-178">**InternetCreateUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcreateurla)                     | [<span data-ttu-id="8d49f-179">**WinHttpCreateUrl**</span><span class="sxs-lookup"><span data-stu-id="8d49f-179">**WinHttpCreateUrl**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcreateurl)                                                                                                                                                           | <span data-ttu-id="8d49f-180">Nessuna.</span><span class="sxs-lookup"><span data-stu-id="8d49f-180">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="8d49f-181">**InternetErrorDlg**</span><span class="sxs-lookup"><span data-stu-id="8d49f-181">**InternetErrorDlg**</span></span>](/windows/desktop/api/wininet/nf-wininet-interneterrordlg)                       | <span data-ttu-id="8d49f-182">Nessun equivalente</span><span class="sxs-lookup"><span data-stu-id="8d49f-182">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="8d49f-183">Poiché WinHTTP è destinato alle applicazioni lato server, non implementa alcuna interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="8d49f-183">Because WinHTTP is targeted at server-side applications, it does not implement any user interface.</span></span>                                                                                                                                                                                                                                   |
| [<span data-ttu-id="8d49f-184">**InternetGetCookie**</span><span class="sxs-lookup"><span data-stu-id="8d49f-184">**InternetGetCookie**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetgetcookiea)                     | <span data-ttu-id="8d49f-185">Nessun equivalente</span><span class="sxs-lookup"><span data-stu-id="8d49f-185">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="8d49f-186">WinHTTP non rende persistenti i dati tra le sessioni e non può accedere ai cookie WinINet.</span><span class="sxs-lookup"><span data-stu-id="8d49f-186">WinHTTP does not persist data between sessions and cannot access WinINet cookies.</span></span>                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="8d49f-187">**InternetOpen**</span><span class="sxs-lookup"><span data-stu-id="8d49f-187">**InternetOpen**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetopena)                               | [<span data-ttu-id="8d49f-188">**WinHttpOpen**</span><span class="sxs-lookup"><span data-stu-id="8d49f-188">**WinHttpOpen**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen)                                                                                                                                                                     | <span data-ttu-id="8d49f-189">Nessuna.</span><span class="sxs-lookup"><span data-stu-id="8d49f-189">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="8d49f-190">**InternetOpenUrl**</span><span class="sxs-lookup"><span data-stu-id="8d49f-190">**InternetOpenUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetopenurla)                         | <span data-ttu-id="8d49f-191">[**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect), [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest), [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest), [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse)</span><span class="sxs-lookup"><span data-stu-id="8d49f-191">[**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect), [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest), [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest), [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse)</span></span> | <span data-ttu-id="8d49f-192">Questa funzionalità è disponibile nelle funzioni WinHTTP elencate.</span><span class="sxs-lookup"><span data-stu-id="8d49f-192">This functionality is available in the WinHTTP functions listed.</span></span>                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="8d49f-193">**La InternetQueryDataAvailable**</span><span class="sxs-lookup"><span data-stu-id="8d49f-193">**InternetQueryDataAvailable**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetquerydataavailable)   | [<span data-ttu-id="8d49f-194">**WinHttpQueryDataAvailable**</span><span class="sxs-lookup"><span data-stu-id="8d49f-194">**WinHttpQueryDataAvailable**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpquerydataavailable)                                                                                                                                         | <span data-ttu-id="8d49f-195">Nessun parametro riservato.</span><span class="sxs-lookup"><span data-stu-id="8d49f-195">No reserved parameters.</span></span>                                                                                                                                                                                                                                                                                                              |
| [<span data-ttu-id="8d49f-196">**InternetQueryOption**</span><span class="sxs-lookup"><span data-stu-id="8d49f-196">**InternetQueryOption**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetqueryoptiona)                 | [<span data-ttu-id="8d49f-197">**WinHttpQueryOption**</span><span class="sxs-lookup"><span data-stu-id="8d49f-197">**WinHttpQueryOption**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryoption)                                                                                                                                                       | <span data-ttu-id="8d49f-198">WinHTTP offre un diverso set di opzioni da WinINet.</span><span class="sxs-lookup"><span data-stu-id="8d49f-198">WinHTTP offers a different set of options from WinINet.</span></span> <span data-ttu-id="8d49f-199">Per ulteriori informazioni e opzioni offerte da WinHTTP, vedere [**flag di opzione**](option-flags.md).</span><span class="sxs-lookup"><span data-stu-id="8d49f-199">For more information and options offered by WinHTTP, see [**Option Flags**](option-flags.md).</span></span>                                                                                                                                                                               |
| [<span data-ttu-id="8d49f-200">**InternetReadFile**</span><span class="sxs-lookup"><span data-stu-id="8d49f-200">**InternetReadFile**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetreadfile)                       | [<span data-ttu-id="8d49f-201">**WinHttpReadData**</span><span class="sxs-lookup"><span data-stu-id="8d49f-201">**WinHttpReadData**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata)                                                                                                                                                             | <span data-ttu-id="8d49f-202">Nessuna.</span><span class="sxs-lookup"><span data-stu-id="8d49f-202">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="8d49f-203">**InternetReadFileEx**</span><span class="sxs-lookup"><span data-stu-id="8d49f-203">**InternetReadFileEx**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetreadfileexa)                   | [<span data-ttu-id="8d49f-204">**WinHttpReadData**</span><span class="sxs-lookup"><span data-stu-id="8d49f-204">**WinHttpReadData**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata)                                                                                                                                                             | <span data-ttu-id="8d49f-205">Anziché una struttura, il buffer è un'area di memoria richiamata con un puntatore.</span><span class="sxs-lookup"><span data-stu-id="8d49f-205">Rather than a structure, the buffer is a region of memory addressed with a pointer.</span></span>                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="8d49f-206">**InternetSetOption**</span><span class="sxs-lookup"><span data-stu-id="8d49f-206">**InternetSetOption**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetsetoptiona)                     | [<span data-ttu-id="8d49f-207">**WinHttpSetOption**</span><span class="sxs-lookup"><span data-stu-id="8d49f-207">**WinHttpSetOption**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption)                                                                                                                                                           | <span data-ttu-id="8d49f-208">Nessuna.</span><span class="sxs-lookup"><span data-stu-id="8d49f-208">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="8d49f-209">**InternetSetStatusCallback**</span><span class="sxs-lookup"><span data-stu-id="8d49f-209">**InternetSetStatusCallback**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetsetstatuscallback)     | [<span data-ttu-id="8d49f-210">**WinHttpSetStatusCallback**</span><span class="sxs-lookup"><span data-stu-id="8d49f-210">**WinHttpSetStatusCallback**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetstatuscallback)                                                                                                                                           | <span data-ttu-id="8d49f-211">Per ulteriori informazioni, vedere la sezione relativa alla gestione diversa delle richieste asincrone in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="8d49f-211">For more information, see "Different Handling of Asynchronous Requests" in this topic.</span></span>                                                                                                                                                                                                                                               |
| [<span data-ttu-id="8d49f-212">**InternetTimeFromSystemTime**</span><span class="sxs-lookup"><span data-stu-id="8d49f-212">**InternetTimeFromSystemTime**</span></span>](/windows/desktop/api/wininet/nf-wininet-internettimefromsystemtime)   | [<span data-ttu-id="8d49f-213">**WinHttpTimeFromSystemTime**</span><span class="sxs-lookup"><span data-stu-id="8d49f-213">**WinHttpTimeFromSystemTime**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttptimefromsystemtime)                                                                                                                                         | <span data-ttu-id="8d49f-214">Nessuna.</span><span class="sxs-lookup"><span data-stu-id="8d49f-214">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="8d49f-215">**InternetTimeToSystemTime**</span><span class="sxs-lookup"><span data-stu-id="8d49f-215">**InternetTimeToSystemTime**</span></span>](/windows/desktop/api/wininet/nf-wininet-internettimetosystemtime)       | [<span data-ttu-id="8d49f-216">**WinHttpTimeToSystemTime**</span><span class="sxs-lookup"><span data-stu-id="8d49f-216">**WinHttpTimeToSystemTime**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttptimetosystemtime)                                                                                                                                             | <span data-ttu-id="8d49f-217">Nessuna.</span><span class="sxs-lookup"><span data-stu-id="8d49f-217">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="8d49f-218">**InternetWriteFile**</span><span class="sxs-lookup"><span data-stu-id="8d49f-218">**InternetWriteFile**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetwritefile)                     | [<span data-ttu-id="8d49f-219">**WinHttpWriteData**</span><span class="sxs-lookup"><span data-stu-id="8d49f-219">**WinHttpWriteData**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata)                                                                                                                                                           | <span data-ttu-id="8d49f-220">Nessuna.</span><span class="sxs-lookup"><span data-stu-id="8d49f-220">None.</span></span>                                                                                                                                                                                                                                                                                                                                |



 

## <a name="different-handling-of-asynchronous-requests"></a><span data-ttu-id="8d49f-221">Gestione diversa delle richieste asincrone</span><span class="sxs-lookup"><span data-stu-id="8d49f-221">Different Handling of Asynchronous Requests</span></span>

<span data-ttu-id="8d49f-222">Tenere presente che in WinINet e WinHTTP alcune funzioni possono completare richieste asincrone in modo sincrono o asincrono.</span><span class="sxs-lookup"><span data-stu-id="8d49f-222">Be aware that in WinINet and WinHTTP, some functions can complete asynchronous requests either synchronously or asynchronously.</span></span> <span data-ttu-id="8d49f-223">L'applicazione deve gestire una situazione di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="8d49f-223">Your application must handle either situation.</span></span> <span data-ttu-id="8d49f-224">Esistono differenze significative nel modo in cui WinINet e WinHTTP gestiscono queste funzioni potenzialmente asincrone.</span><span class="sxs-lookup"><span data-stu-id="8d49f-224">There are significant differences in how WinINet and WinHTTP handle these potentially asynchronous functions.</span></span>

<span data-ttu-id="8d49f-225">WinINet</span><span class="sxs-lookup"><span data-stu-id="8d49f-225">WinINet</span></span>

-   <span data-ttu-id="8d49f-226">Completamento sincrono: se una chiamata di funzione WinINet potenzialmente asincrona viene completata in modo sincrono, i parametri OUT della funzione restituiscono i risultati dell'operazione.</span><span class="sxs-lookup"><span data-stu-id="8d49f-226">Synchronous completion: If a potentially asynchronous WinINet function call completes synchronously, the OUT parameters of the function return the results of the operation.</span></span> <span data-ttu-id="8d49f-227">Quando si verifica un errore, recuperare il codice di errore chiamando [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) dopo la chiamata di funzione WinInet.</span><span class="sxs-lookup"><span data-stu-id="8d49f-227">When an error occurs, retrieve the error code by calling [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) after the WinINet function call.</span></span>

-   <span data-ttu-id="8d49f-228">Completamento asincrono: se una chiamata di funzione potenzialmente asincrona viene completata in modo asincrono, i risultati dell'operazione e gli eventuali errori sono accessibili nella funzione di callback.</span><span class="sxs-lookup"><span data-stu-id="8d49f-228">Asynchronous completion: If a potentially asynchronous function call completes asynchronously, the results of the operation, and any errors, are accessible in the callback function.</span></span> <span data-ttu-id="8d49f-229">La funzione di callback viene eseguita su un thread di lavoro, non sul thread che ha effettuato la chiamata di funzione iniziale.</span><span class="sxs-lookup"><span data-stu-id="8d49f-229">The callback function is executed on a worker thread, not on the thread that made the initial function call.</span></span>

<span data-ttu-id="8d49f-230">In altre parole, l'applicazione deve duplicare la logica per gestire i risultati di tali operazioni in due posizioni: entrambe immediatamente dopo la chiamata di funzione e nella funzione di callback.</span><span class="sxs-lookup"><span data-stu-id="8d49f-230">In other words, your application must duplicate logic to handle the results of such operations in two places: both immediately after the function call and in the callback function.</span></span>

<span data-ttu-id="8d49f-231">WinHTTP semplifica questo modello consentendo di implementare la logica operativa solo nella funzione di callback, che riceve una notifica di completamento indipendentemente dal fatto che l'operazione sia stata completata in modo sincrono o asincrono.</span><span class="sxs-lookup"><span data-stu-id="8d49f-231">WinHTTP simplifies this model by enabling you to implement the operational logic only in the callback function, which receives a completion notification regardless of whether the operation completed synchronously or asynchronously.</span></span> <span data-ttu-id="8d49f-232">Quando è abilitata l'operazione asincrona, i parametri OUT delle funzioni WinHTTP non restituiscono dati significativi e devono essere impostati su **null**.</span><span class="sxs-lookup"><span data-stu-id="8d49f-232">When asynchronous operation is enabled, the OUT parameters of WinHTTP functions do not return meaningful data and must be set to **NULL**.</span></span>

<span data-ttu-id="8d49f-233">L'unica differenza significativa tra il completamento asincrono e sincrono in WinHTTP, dal punto di vista dell'applicazione, è la posizione in cui viene eseguita la funzione di callback.</span><span class="sxs-lookup"><span data-stu-id="8d49f-233">The only significant difference between asynchronous and synchronous completion in WinHTTP, from the application perspective, is in where the callback function is executed.</span></span>

<span data-ttu-id="8d49f-234">WinHTTP</span><span class="sxs-lookup"><span data-stu-id="8d49f-234">WinHTTP</span></span>

-   <span data-ttu-id="8d49f-235">Completamento sincrono: quando un'operazione viene completata in modo sincrono, i risultati vengono restituiti in una funzione di callback che viene eseguita nello stesso thread della chiamata di funzione originale.</span><span class="sxs-lookup"><span data-stu-id="8d49f-235">Synchronous completion: When an operation completes synchronously, the results are returned in a callback function that executes in the same thread as the original function call.</span></span>

-   <span data-ttu-id="8d49f-236">Completamento asincrono: quando un'operazione viene completata in modo asincrono, i risultati vengono restituiti in una funzione di callback che viene eseguita in un thread di lavoro.</span><span class="sxs-lookup"><span data-stu-id="8d49f-236">Asynchronous completion: When an operation completes asynchronously, the results are returned in a callback function that executes in a worker thread.</span></span>

<span data-ttu-id="8d49f-237">Anche se la maggior parte degli errori può essere gestita interamente all'interno della funzione di callback, è necessario che le applicazioni WinHTTP siano ancora preparate affinché una funzione restituisca **false** a causa di un errore di \_ parametro non valido \_ o di un altro errore simile recuperato chiamando [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror).</span><span class="sxs-lookup"><span data-stu-id="8d49f-237">Although most errors can also be handled entirely within the callback function, WinHTTP applications must still be prepared for a function to return **FALSE** because of an ERROR\_INVALID\_PARAMETER or other similar error retrieved by calling [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror).</span></span>

<span data-ttu-id="8d49f-238">Diversamente da WinINet, che può eseguire contemporaneamente più operazioni asincrone, WinHTTP impone un criterio di un'operazione asincrona in sospeso per ogni handle di richiesta.</span><span class="sxs-lookup"><span data-stu-id="8d49f-238">Unlike WinINet, which can execute multiple asynchronous operations simultaneously, WinHTTP enforces a policy of one pending asynchronous operation per request handle.</span></span> <span data-ttu-id="8d49f-239">Se un'operazione è in sospeso e viene chiamata un'altra funzione WinHTTP, la seconda funzione ha esito negativo e [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) restituisce l'errore \_ operazione non valida \_ .</span><span class="sxs-lookup"><span data-stu-id="8d49f-239">If one operation is pending and another WinHTTP function is called, the second function fails and [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) returns ERROR\_INVALID\_OPERATION.</span></span>

<span data-ttu-id="8d49f-240">WinHTTP semplifica questo modello consentendo di implementare la logica operativa solo nella funzione di callback, che riceve una notifica di completamento indipendentemente dal fatto che l'operazione sia stata completata in modo sincrono o asincrono.</span><span class="sxs-lookup"><span data-stu-id="8d49f-240">WinHTTP simplifies this model by enabling you to implement the operational logic only in the callback function, which receives a completion notification regardless of whether the operation completed synchronously or asynchronously.</span></span> <span data-ttu-id="8d49f-241">Quando è abilitata l'operazione asincrona, i parametri OUT delle funzioni WinHTTP non restituiscono dati significativi e devono essere impostati su **null**.</span><span class="sxs-lookup"><span data-stu-id="8d49f-241">When asynchronous operation is enabled, the OUT parameters of WinHTTP functions do not return meaningful data and must be set to **NULL**.</span></span>

## <a name="differences-in-winhttp-callback-notifications"></a><span data-ttu-id="8d49f-242">Differenze nelle notifiche di callback WinHTTP</span><span class="sxs-lookup"><span data-stu-id="8d49f-242">Differences in WinHTTP Callback Notifications</span></span>

<span data-ttu-id="8d49f-243">La funzione di callback status riceve gli aggiornamenti sullo stato delle operazioni tramite flag di notifica.</span><span class="sxs-lookup"><span data-stu-id="8d49f-243">The status callback function receives updates on the status of operations through notification flags.</span></span> <span data-ttu-id="8d49f-244">In WinHTTP le notifiche vengono selezionate utilizzando il parametro *dwNotificationFlags* della funzione [**WinHttpSetStatusCallback**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetstatuscallback) .</span><span class="sxs-lookup"><span data-stu-id="8d49f-244">In WinHTTP, notifications are selected using the *dwNotificationFlags* parameter of the [**WinHttpSetStatusCallback**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetstatuscallback) function.</span></span> <span data-ttu-id="8d49f-245">Usare il flag di **\_ richiamata WinHTTP per tutte le \_ \_ \_ notifiche** per ricevere notifiche di tutti gli aggiornamenti di stato.</span><span class="sxs-lookup"><span data-stu-id="8d49f-245">Use the **WINHTTP\_CALLBACK\_FLAG\_ALL\_NOTIFICATIONS** flag to be notified of all status updates.</span></span>

<span data-ttu-id="8d49f-246">Le notifiche che indicano una determinata operazione sono denominate notifiche di completamento o solo completamenti.</span><span class="sxs-lookup"><span data-stu-id="8d49f-246">Notifications that indicate a particular operation is complete are called completion notifications, or just completions.</span></span> <span data-ttu-id="8d49f-247">In WinINet ogni volta che la funzione di callback riceve un completamento, il parametro *lpvStatusInformation* contiene una struttura di [**\_ \_ risultati asincrona Internet**](/windows/desktop/api/wininet/ns-wininet-internet_async_result) .</span><span class="sxs-lookup"><span data-stu-id="8d49f-247">In WinINet, each time the callback function receives a completion, the *lpvStatusInformation* parameter contains an [**INTERNET\_ASYNC\_RESULT**](/windows/desktop/api/wininet/ns-wininet-internet_async_result) structure.</span></span> <span data-ttu-id="8d49f-248">In WinHTTP questa struttura non è disponibile per tutti i completamenti.</span><span class="sxs-lookup"><span data-stu-id="8d49f-248">In WinHTTP, this structure is not available for all completions.</span></span> <span data-ttu-id="8d49f-249">È importante esaminare la pagina di riferimento per il [**\_ \_ callback di stato WinHTTP**](/windows/win32/api/winhttp/nc-winhttp-winhttp_status_callback), che contiene informazioni sulle notifiche e il tipo di dati che è possibile prevedere per ognuno di essi.</span><span class="sxs-lookup"><span data-stu-id="8d49f-249">It is important to review the reference page for [**WINHTTP\_STATUS\_CALLBACK**](/windows/win32/api/winhttp/nc-winhttp-winhttp_status_callback), which contains information about notifications and what type of data can be expected for each.</span></span>

<span data-ttu-id="8d49f-250">In WinHTTP, un singolo completamento, **\_ errore di \_ \_ richiesta stato \_ callback WinHTTP**, indica che un'operazione non è riuscita.</span><span class="sxs-lookup"><span data-stu-id="8d49f-250">In WinHTTP, a single completion, **WINHTTP\_CALLBACK\_STATUS\_REQUEST\_ERROR**, indicates that an operation failed.</span></span> <span data-ttu-id="8d49f-251">Tutti gli altri completamenti indicano un'operazione completata correttamente.</span><span class="sxs-lookup"><span data-stu-id="8d49f-251">All other completions indicate a successful operation.</span></span>

<span data-ttu-id="8d49f-252">Sia WinINet che WinHTTP utilizzano un valore di contesto definito dall'utente per passare informazioni dal thread principale alla funzione di callback dello stato, che può essere eseguita su un thread di lavoro.</span><span class="sxs-lookup"><span data-stu-id="8d49f-252">Both WinINet and WinHTTP use a user-defined context value to pass information from the main thread to the status callback function, which can be executed on a worker thread.</span></span> <span data-ttu-id="8d49f-253">In WinINet, il valore di contesto usato dalla funzione di callback dello stato viene impostato chiamando una delle diverse funzioni.</span><span class="sxs-lookup"><span data-stu-id="8d49f-253">In WinINet, the context value used by the status callback function is set by calling one of several functions.</span></span> <span data-ttu-id="8d49f-254">In WinHTTP, il valore del contesto viene impostato solo con [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) o [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="8d49f-254">In WinHTTP, the context value is set only with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="8d49f-255">Per questo motivo, in WinHTTP è possibile che si verifichi una notifica prima dell'impostazione di un valore di contesto.</span><span class="sxs-lookup"><span data-stu-id="8d49f-255">Because of this, it is possible in WinHTTP for a notification to occur before a context value is set.</span></span> <span data-ttu-id="8d49f-256">Se la funzione di callback riceve una notifica prima dell'impostazione del valore di contesto, l'applicazione deve essere pronta a ricevere **null** nel parametro *dwContext* della funzione di callback.</span><span class="sxs-lookup"><span data-stu-id="8d49f-256">If the callback function receives a notification before the context value is set, the application must be prepared to receive **NULL** in the *dwContext* parameter of the callback function.</span></span>

## <a name="authentication-differences"></a><span data-ttu-id="8d49f-257">Differenze di autenticazione</span><span class="sxs-lookup"><span data-stu-id="8d49f-257">Authentication Differences</span></span>

<span data-ttu-id="8d49f-258">In WinINet le credenziali utente vengono impostate chiamando la funzione [**InternetSetOption**](/windows/desktop/api/wininet/nf-wininet-internetsetoptiona) , usando codice simile a quello fornito nell'esempio di codice seguente.</span><span class="sxs-lookup"><span data-stu-id="8d49f-258">In WinINet, user credentials are set by calling the [**InternetSetOption**](/windows/desktop/api/wininet/nf-wininet-internetsetoptiona) function, using code similar to that provided in the following code example.</span></span>

``` syntax
// Use the WinINet InternetSetOption function to set the 
// user credentials to the user name contained in strUsername 
// and the password to the contents of strPassword.
       
InternetSetOption( hRequest, INTERNET_OPTION_PROXY_USERNAME, 
                   strUsername, strlen(strUsername) + 1 );

InternetSetOption( hRequest, INTERNET_OPTION_PROXY_PASSWORD, 
                   strPassword, strlen(strPassword) + 1 );
```

<span data-ttu-id="8d49f-259">Per motivi di compatibilità, le credenziali utente possono essere impostate in modo analogo in WinHTTP usando la funzione [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) , ma questa operazione non è consigliata perché può comportare una vulnerabilità di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="8d49f-259">For compatibility, user credentials can similarly be set in WinHTTP using the [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) function, but this is not recommended because it can pose a security vulnerability.</span></span>

<span data-ttu-id="8d49f-260">Al contrario, quando un'applicazione riceve un codice di stato 401 in WinHTTP, il metodo consigliato per impostare le credenziali è per prima cosa identificare uno schema di autenticazione usando [**WinHttpQueryAuthSchemes**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryauthschemes) e, in secondo luogo, impostare le credenziali usando [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span><span class="sxs-lookup"><span data-stu-id="8d49f-260">Instead, when an application receives a 401 status code in WinHTTP, the recommended method of setting credentials is first to identify an authentication scheme using [**WinHttpQueryAuthSchemes**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryauthschemes) and, second, set the credentials using [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span></span> <span data-ttu-id="8d49f-261">Nell'esempio di codice riportato di seguito viene illustrato come eseguire questa operazione.</span><span class="sxs-lookup"><span data-stu-id="8d49f-261">The following code example shows how to do this.</span></span>

``` syntax
DWORD dwSupportedSchemes;
DWORD dwPrefered;
DWORD dwTarget;

// Obtain the supported and first schemes.
WinHttpQueryAuthSchemes( hRequest, &dwSupportedSchemes, &dwPrefered, &dwTarget );

// Set the credentials before resending the request.
WinHttpSetCredentials( hRequest, dwTarget, dwPrefered, strUsername, strPassword, NULL );
```

<span data-ttu-id="8d49f-262">Poiché non esiste un equivalente a [**InternetErrorDlg**](/windows/desktop/api/wininet/nf-wininet-interneterrordlg) in WinHTTP, le applicazioni che ottengono le credenziali tramite un'interfaccia utente devono fornire una propria interfaccia.</span><span class="sxs-lookup"><span data-stu-id="8d49f-262">Because there is no equivalent to [**InternetErrorDlg**](/windows/desktop/api/wininet/nf-wininet-interneterrordlg) in WinHTTP, applications that obtain credentials through a user interface must provide their own interface.</span></span>

<span data-ttu-id="8d49f-263">Diversamente da WinINet, WinHTTP non memorizza nella cache le password.</span><span class="sxs-lookup"><span data-stu-id="8d49f-263">Unlike WinINet, WinHTTP does not cache passwords.</span></span> <span data-ttu-id="8d49f-264">Per ogni richiesta è necessario specificare le credenziali utente valide.</span><span class="sxs-lookup"><span data-stu-id="8d49f-264">Valid user credentials must be supplied for each request.</span></span>

<span data-ttu-id="8d49f-265">WinHTTP non supporta lo schema DPA (Distributed Password Authentication) supportato da WinINet.</span><span class="sxs-lookup"><span data-stu-id="8d49f-265">WinHTTP does not support the Distributed Password Authentication (DPA) scheme supported by WinINet.</span></span> <span data-ttu-id="8d49f-266">Tuttavia, WinHTTP supporta Microsoft Passport 1,4.</span><span class="sxs-lookup"><span data-stu-id="8d49f-266">WinHTTP does, however, support Microsoft Passport 1.4.</span></span> <span data-ttu-id="8d49f-267">Per ulteriori informazioni sull'utilizzo dell'autenticazione Passport in WinHTTP, vedere [autenticazione Passport in WinHTTP](passport-authentication-in-winhttp.md).</span><span class="sxs-lookup"><span data-stu-id="8d49f-267">For more information about using Passport authentication in WinHTTP, see [Passport Authentication in WinHTTP](passport-authentication-in-winhttp.md).</span></span>

<span data-ttu-id="8d49f-268">WinHTTP non si basa sulle impostazioni di Internet Explorer per determinare il criterio di accesso automatico.</span><span class="sxs-lookup"><span data-stu-id="8d49f-268">WinHTTP does not rely on Internet Explorer settings to determine the automatic logon policy.</span></span> <span data-ttu-id="8d49f-269">Il criterio di accesso automatico viene invece impostato con [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="8d49f-269">Instead, the auto-logon policy is set with [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="8d49f-270">Per ulteriori informazioni sull'autenticazione in WinHTTP, inclusi i criteri di accesso automatico, vedere [autenticazione in WinHTTP](authentication-in-winhttp.md).</span><span class="sxs-lookup"><span data-stu-id="8d49f-270">For more information about authentication in WinHTTP, including the auto-logon policy, see [Authentication in WinHTTP](authentication-in-winhttp.md).</span></span>

## <a name="differences-in-secure-http-transactions"></a><span data-ttu-id="8d49f-271">Differenze nelle transazioni HTTP protette</span><span class="sxs-lookup"><span data-stu-id="8d49f-271">Differences in Secure HTTP Transactions</span></span>

<span data-ttu-id="8d49f-272">In WinINet avviare una sessione protetta usando [**HttpOpenRequest**](/windows/desktop/api/wininet/nf-wininet-httpopenrequesta) o [**InternetConnect**](/windows/desktop/api/wininet/nf-wininet-internetconnecta), ma in WinHTTP è necessario chiamare [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest) usando il flag di **\_ \_ sicurezza WinHTTP flag** .</span><span class="sxs-lookup"><span data-stu-id="8d49f-272">In WinINet, initiate a secure session using either [**HttpOpenRequest**](/windows/desktop/api/wininet/nf-wininet-httpopenrequesta) or [**InternetConnect**](/windows/desktop/api/wininet/nf-wininet-internetconnecta), but in WinHTTP, you must call [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest) using the **WINHTTP\_FLAG\_SECURE** flag.</span></span>

<span data-ttu-id="8d49f-273">In una transazione HTTP sicura, è possibile usare i certificati del server per autenticare un server per il client.</span><span class="sxs-lookup"><span data-stu-id="8d49f-273">In a secure HTTP transaction, server certificates can be used to authenticate a server to the client.</span></span> <span data-ttu-id="8d49f-274">In WinINet, se un certificato del server contiene errori, [**HttpSendRequest**](/windows/desktop/api/wininet/nf-wininet-httpsendrequesta) ha esito negativo e fornisce informazioni dettagliate sugli errori del certificato.</span><span class="sxs-lookup"><span data-stu-id="8d49f-274">In WinINet, if a server certificate contains errors, [**HttpSendRequest**](/windows/desktop/api/wininet/nf-wininet-httpsendrequesta) fails and provides details about the certificate errors.</span></span>

<span data-ttu-id="8d49f-275">In WinHttp gli errori del certificato del server vengono gestiti in base alla versione come segue:</span><span class="sxs-lookup"><span data-stu-id="8d49f-275">In WinHttp, server certificate errors are handled according to the version as follows:</span></span>

-   <span data-ttu-id="8d49f-276">A partire da WinHttp 5,1, se un certificato del server ha esito negativo o contiene errori, la chiamata a [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) segnala un **\_ \_ \_ \_ errore di protezione dello stato di callback WinHTTP** nella funzione di callback.</span><span class="sxs-lookup"><span data-stu-id="8d49f-276">Starting with WinHttp 5.1, if a server certificate fails or contains errors, the call to [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) reports a **WINHTTP\_CALLBACK\_STATUS\_SECURE\_FAILURE** in the callback function.</span></span> <span data-ttu-id="8d49f-277">Se l'errore generato da **WinHttpSendRequest** viene ignorato, le chiamate successive a [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) avranno esito negativo e si verificherà un errore di \_ annullamento dell'operazione WinHTTP \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="8d49f-277">If the error generated by **WinHttpSendRequest** is ignored, subsequent calls to [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) fail with an ERROR\_WINHTTP\_OPERATION\_CANCELLED error.</span></span>
-   <span data-ttu-id="8d49f-278">In WinHTTP 5,0 gli errori nei certificati del server non consentono, per impostazione predefinita, la mancata riuscita di una richiesta.</span><span class="sxs-lookup"><span data-stu-id="8d49f-278">In WinHTTP 5.0, errors in server certificates do not, by default, cause a request to fail.</span></span> <span data-ttu-id="8d49f-279">Al contrario, gli errori vengono segnalati nella funzione di callback con la notifica di **\_ \_ \_ \_ errore di protezione dello stato di callback WinHTTP** .</span><span class="sxs-lookup"><span data-stu-id="8d49f-279">Instead, the errors are reported in the callback function with the **WINHTTP\_CALLBACK\_STATUS\_SECURE\_FAILURE** notification.</span></span>

<span data-ttu-id="8d49f-280">In alcune piattaforme precedenti, WinINet supportava i protocolli PCT (Private Communication Technology) e/o fortezza, sebbene non sia in Windows XP.</span><span class="sxs-lookup"><span data-stu-id="8d49f-280">On some earlier platforms, WinINet supported the Private Communication Technology (PCT) and/or Fortezza protocols, although not on Windows XP.</span></span>

<span data-ttu-id="8d49f-281">WinHTTP non supporta i protocolli PCT e fortezza su qualsiasi piattaforma, ma si basa su Secure Sockets Layer (SSL) 2,0, SSL 3,0 o Transport Layer Security (TLS) 1,0.</span><span class="sxs-lookup"><span data-stu-id="8d49f-281">WinHTTP does not support the PCT and Fortezza protocols on any platform, and instead relies on Secure Sockets Layer (SSL) 2.0, SSL 3.0, or Transport Layer Security (TLS) 1.0.</span></span>

 

 
