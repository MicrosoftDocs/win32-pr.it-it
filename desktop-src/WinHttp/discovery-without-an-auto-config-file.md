---
description: Se un file di configurazione automatica del proxy non è stato distribuito nella rete locale, WinHttpGetProxyForUrl non è in grado di trovare un server proxy.
ms.assetid: a170e63a-8586-47df-af5e-4ee3621795b2
title: Individuazione senza un file di configurazione automatica
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b6a5ec281c2ef74e2a377cecbd30f16cbc49bd79
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106319818"
---
# <a name="discovery-without-an-auto-config-file"></a><span data-ttu-id="bb1aa-103">Individuazione senza un file di configurazione automatica</span><span class="sxs-lookup"><span data-stu-id="bb1aa-103">Discovery Without an Auto-Config File</span></span>

<span data-ttu-id="bb1aa-104">Se un file di configurazione automatica del proxy non è stato distribuito nella rete locale, [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) non è in grado di trovare un server proxy.</span><span class="sxs-lookup"><span data-stu-id="bb1aa-104">If a proxy auto-configuration file has not been deployed on the local network, [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) cannot find a proxy server.</span></span> <span data-ttu-id="bb1aa-105">Se **WinHttpGetProxyForUrl** ha esito negativo, esistono diverse possibili strategie di fallback per ottenere una configurazione del proxy valida, a seconda dell'ambiente di Runtime.</span><span class="sxs-lookup"><span data-stu-id="bb1aa-105">If **WinHttpGetProxyForUrl** fails, there are several possible fall-back strategies for obtaining a viable proxy configuration, depending on its runtime environment.</span></span> <span data-ttu-id="bb1aa-106">Queste includono la richiesta di impostazione del proxy tramite un'interfaccia utente, che richiede a un utente di archiviare la configurazione del proxy nel registro di sistema utilizzando l'utilità WinHTTP "ProxyCfg.exe" o l'utilizzo di [**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser) per verificare se un server proxy è elencato nelle impostazioni di Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="bb1aa-106">These include prompting for the proxy setting through a user interface, requiring someone to store the proxy configuration in the registry using the WinHTTP "ProxyCfg.exe" utility, or using [**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser) to check whether a proxy server is listed in Internet Explorer's settings.</span></span>

<span data-ttu-id="bb1aa-107">È possibile che non esistano file di configurazione automatica del proxy perché il client dispone di una connessione Internet diretta, ad esempio tramite un ISP, e non necessita di un server proxy.</span><span class="sxs-lookup"><span data-stu-id="bb1aa-107">It is possible that there is no proxy auto-configuration file because the client has a direct Internet connection, such as through an ISP, and does not need a proxy server.</span></span>

<span data-ttu-id="bb1aa-108">Potrebbe essere necessario un server proxy, d'altra parte, ma la rete locale potrebbe non supportare WPAD.</span><span class="sxs-lookup"><span data-stu-id="bb1aa-108">A proxy server may be required, on the other hand, but the local network may not support WPAD.</span></span> <span data-ttu-id="bb1aa-109">In questo caso, la configurazione del proxy deve essere ottenuta dall'utente o trovata in un punto qualsiasi nel computer client.</span><span class="sxs-lookup"><span data-stu-id="bb1aa-109">In this case, the proxy configuration must be obtained from the user or found somewhere on the client machine.</span></span>

<span data-ttu-id="bb1aa-110">Un'applicazione basata su WinHTTP eseguita in un ambiente server di livello intermedio, ad esempio un'applicazione COM+ o ASP, deve basarsi su un amministratore del server che imposta una configurazione proxy predefinita nel registro di sistema utilizzando l'utilità "ProxyCfg.exe".</span><span class="sxs-lookup"><span data-stu-id="bb1aa-110">A WinHTTP-based application running in a middle-tier server environment, such as a COM+ or ASP application, should rely on a server administrator setting a default proxy configuration in the registry using the "ProxyCfg.exe" utility.</span></span> <span data-ttu-id="bb1aa-111">Queste informazioni di configurazione predefinite possono quindi essere recuperate tramite la funzione [**WinHttpGetDefaultProxyConfiguration**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetdefaultproxyconfiguration) o semplicemente specificando il flag **di \_ \_ \_ preconfigurazione del tipo di accesso WinHTTP** nella chiamata [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) .</span><span class="sxs-lookup"><span data-stu-id="bb1aa-111">This default configuration information can then be retrieved either by using the [**WinHttpGetDefaultProxyConfiguration**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetdefaultproxyconfiguration) function, or simply by specifying the **WINHTTP\_ACCESS\_TYPE\_PRECONFIG** flag in the [**WinHttpOpen**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen) call.</span></span>

<span data-ttu-id="bb1aa-112">D'altra parte, un'applicazione WinHTTP in esecuzione su un computer desktop client può tentare di esaminare le impostazioni proxy di Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="bb1aa-112">On the other hand, a WinHTTP application running on a client desktop machine can attempt to examine Internet Explorer's proxy settings.</span></span> <span data-ttu-id="bb1aa-113">[**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser) riempie una struttura di configurazione del [**\_ \_ \_ \_ proxy \_**](/windows/win32/api/winhttp/ns-winhttp-winhttp_current_user_ie_proxy_config) di Internet Explorer fornita dal chiamante con le impostazioni proxy di Internet Explorer dell'utente corrente per la connessione attiva corrente (connessione remota, VPN o LAN).</span><span class="sxs-lookup"><span data-stu-id="bb1aa-113">[**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser) fills in a caller-supplied [**WINHTTP\_CURRENT\_USER\_IE\_PROXY\_CONFIG**](/windows/win32/api/winhttp/ns-winhttp-winhttp_current_user_ie_proxy_config) structure with the current user's Internet Explorer proxy settings for the current active connection (dial-up, VPN or LAN).</span></span> <span data-ttu-id="bb1aa-114">Questa configurazione può indicare che viene utilizzato il rilevamento automatico o che può specificare un URL per un file di configurazione automatica del proxy oppure può specificare un server proxy effettivo da utilizzare oppure una combinazione dei tre.</span><span class="sxs-lookup"><span data-stu-id="bb1aa-114">This configuration may indicate that auto-detection is used, or it may specify a URL for a proxy auto-configuration file, or it may specify an actual proxy server to use, or it may specify a combination of the three.</span></span> <span data-ttu-id="bb1aa-115">Se queste informazioni includono un URL PAC o un server proxy, l'applicazione WinHTTP può provare a usarle.</span><span class="sxs-lookup"><span data-stu-id="bb1aa-115">If this information includes a PAC URL or a proxy server, the WinHTTP application can try using those.</span></span>

<span data-ttu-id="bb1aa-116">Un esempio che usa le funzioni [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) e [**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser) è reperibile negli esempi di WinHTTP per Platform Software Development Kit (SDK).</span><span class="sxs-lookup"><span data-stu-id="bb1aa-116">A sample that uses the [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) and [**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser) functions can be found in the Platform Software Development Kit (SDK) WinHTTP samples.</span></span>

 

 



