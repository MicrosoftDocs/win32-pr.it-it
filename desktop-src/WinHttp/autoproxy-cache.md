---
description: Cache AutoProxy
ms.assetid: 087104e8-ab38-4ba4-be70-23a5ea2bb130
title: Cache AutoProxy
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6d0492bec116bad8a82da0e961cf6d851d27c787
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106318199"
---
# <a name="autoproxy-cache"></a><span data-ttu-id="fab7a-103">Cache AutoProxy</span><span class="sxs-lookup"><span data-stu-id="fab7a-103">AutoProxy Cache</span></span>

<span data-ttu-id="fab7a-104">La funzione [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) esegue la ricerca del proxy automatica in base alle singole richieste per l'URL specificato.</span><span class="sxs-lookup"><span data-stu-id="fab7a-104">The [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) function performs autoproxy lookup on a per-request basis for the specified URL.</span></span> <span data-ttu-id="fab7a-105">Se vengono restituiti più proxy, le applicazioni client devono testare ogni proxy prima di inviare la richiesta. per ulteriori informazioni, vedere la sezione [solo un server proxy attualmente supportata](autoproxy-issues-in-winhttp.md) nei problemi di AutoProxy in WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="fab7a-105">If multiple proxies are returned, client applications should test each proxy before sending the request (for more information, see the [Only One Proxy Server is Currently Supported](autoproxy-issues-in-winhttp.md) section in AutoProxy Issues in WinHTTP).</span></span> <span data-ttu-id="fab7a-106">Le informazioni contenute in questo argomento sono valide per le chiamate a **WinHttpGetProxyForUrl** quando il client specifica l'individuazione automatica del proxy.</span><span class="sxs-lookup"><span data-stu-id="fab7a-106">The information in this topic applies to calls to **WinHttpGetProxyForUrl** when the client specifies automatic proxy discovery.</span></span>

<span data-ttu-id="fab7a-107">[**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) , facoltativamente, individua l'URL del proxy AutoProxy e Scarica lo script di AutoProxy da tale sito.</span><span class="sxs-lookup"><span data-stu-id="fab7a-107">[**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) optionally locates the autoproxy URL and downloads the autoproxy script from that site.</span></span> <span data-ttu-id="fab7a-108">WinHttp usa lo script di AutoProxy per individuare i server proxy.</span><span class="sxs-lookup"><span data-stu-id="fab7a-108">WinHttp uses the autoproxy script to locate the proxy servers.</span></span> <span data-ttu-id="fab7a-109">Sia l'URL del proxy AutoProxy che lo script di AutoProxy vengono memorizzati nella cache per la sessione specificata.</span><span class="sxs-lookup"><span data-stu-id="fab7a-109">Both the autoproxy URL and the autoproxy script are cached for the specified session.</span></span> <span data-ttu-id="fab7a-110">Solo un URL e uno script di AutoProxy vengono memorizzati nella cache per ogni sessione.</span><span class="sxs-lookup"><span data-stu-id="fab7a-110">Only one autoproxy URL and script are cached for each session.</span></span> <span data-ttu-id="fab7a-111">In genere, lo script e l'URL del proxy AutoProxy vengono memorizzati nella cache fino a quando non viene modificato l'indirizzo IP associato al computer.</span><span class="sxs-lookup"><span data-stu-id="fab7a-111">Typically, the autoproxy script and URL are cached until the IP address associated with the computer changes.</span></span> <span data-ttu-id="fab7a-112">Se viene rilevato un nuovo indirizzo IP durante una chiamata a **WinHttpGetProxyForUrl**, la chiamata tenterà di individuare un nuovo URL di AutoProxy e di memorizzare nella cache i risultati.</span><span class="sxs-lookup"><span data-stu-id="fab7a-112">If a new IP address is detected during a call to **WinHttpGetProxyForUrl**, the call will attempt to locate a new autoproxy URL and script and cache the results.</span></span> <span data-ttu-id="fab7a-113">È necessario consentire un solo utente per sessione, in modo che i dati memorizzati nella cache non siano condivisi con altri utenti nel computer.</span><span class="sxs-lookup"><span data-stu-id="fab7a-113">Only one user should be allowed per session, so that the cached data is not shared with other users on the computer.</span></span> <span data-ttu-id="fab7a-114">Per ulteriori informazioni, vedere [Cenni preliminari sulle sessioni WinHTTP](winhttp-sessions-overview.md).</span><span class="sxs-lookup"><span data-stu-id="fab7a-114">For more information, see [WinHTTP Sessions Overview](winhttp-sessions-overview.md).</span></span>

<span data-ttu-id="fab7a-115">Se il servizio out-of-process è attivo quando viene chiamato [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) , l'URL e lo script del proxy AutoProxy memorizzati nella cache sono disponibili per l'intero computer.</span><span class="sxs-lookup"><span data-stu-id="fab7a-115">If the out-of-process service is active when [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) is called, the cached autoproxy URL and script are available to the whole computer.</span></span> <span data-ttu-id="fab7a-116">Tuttavia, se viene usato il servizio out-of-process e il flag **fAutoLogonIfChallenged** nella struttura *pAutoProxyOptions* è true, l'URL e lo script di AutoProxy non vengono memorizzati nella cache.</span><span class="sxs-lookup"><span data-stu-id="fab7a-116">However, if the out-of-process service is used, and the **fAutoLogonIfChallenged** flag in the *pAutoProxyOptions* structure is true, then the autoproxy URL and script are not cached.</span></span> <span data-ttu-id="fab7a-117">Pertanto, la chiamata di **WinHttpGetProxyForUrl** con il membro **FAutoLogonIfChallenged** impostato su **true** comporta operazioni di overhead aggiuntive che potrebbero influire sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="fab7a-117">Therefore, calling **WinHttpGetProxyForUrl** with the **fAutoLogonIfChallenged** member set to **TRUE** results in additional overhead operations that may affect performance.</span></span> <span data-ttu-id="fab7a-118">Per migliorare le prestazioni, è possibile usare i passaggi seguenti.</span><span class="sxs-lookup"><span data-stu-id="fab7a-118">The following steps can be used to improve performance.</span></span>

<span data-ttu-id="fab7a-119">**Per migliorare le prestazioni**</span><span class="sxs-lookup"><span data-stu-id="fab7a-119">**To improve performance**</span></span>

1.  <span data-ttu-id="fab7a-120">Chiamare [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) con il parametro fAutoLogonIfChallenged impostato su **false**.</span><span class="sxs-lookup"><span data-stu-id="fab7a-120">Call [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) with the fAutoLogonIfChallenged parameter set to **false**.</span></span> <span data-ttu-id="fab7a-121">L'URL e lo script di AutoProxy vengono memorizzati nella cache per le chiamate future a **WinHttpGetProxyForUrl**.</span><span class="sxs-lookup"><span data-stu-id="fab7a-121">The autoproxy URL and script are cached for future calls to **WinHttpGetProxyForUrl**.</span></span>
2.  <span data-ttu-id="fab7a-122">Se il passaggio 1 ha esito negativo, con **errore errore di \_ \_ accesso \_ WinHTTP**, chiamare [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) con il membro **fAutoLogonIfChallenged** impostato su **true**.</span><span class="sxs-lookup"><span data-stu-id="fab7a-122">If Step 1 fails, with **ERROR\_WINHTTP\_LOGIN\_FAILURE**, then call [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl) with the **fAutoLogonIfChallenged** member set to **TRUE**.</span></span>

 

 



