---
description: In questo argomento vengono descritte le differenze più importanti tra la versione 5,1 e la versione 5,0 di WinHTTP.
ms.assetid: df3fcf27-3012-4818-b29c-b8a4dc409828
title: Novità di WinHTTP 5,1
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 909d5ae8fb1d169af01782d21d2ead56b25c940c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106307109"
---
# <a name="whats-new-in-winhttp-51"></a><span data-ttu-id="16cd6-103">Novità di WinHTTP 5,1</span><span class="sxs-lookup"><span data-stu-id="16cd6-103">What's New in WinHTTP 5.1</span></span>

<span data-ttu-id="16cd6-104">In questo argomento vengono descritte le differenze più importanti tra la versione 5,1 e la versione 5,0 di WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="16cd6-104">This topic describes the most important differences between WinHTTP version 5.1 and version 5.0.</span></span> <span data-ttu-id="16cd6-105">Molte di queste differenze richiedono modifiche al codice nelle applicazioni che eseguono la migrazione dalla versione 5,0 alla versione 5,1.</span><span class="sxs-lookup"><span data-stu-id="16cd6-105">Many of these differences require code changes in applications migrating from version 5.0 to version 5.1.</span></span> <span data-ttu-id="16cd6-106">Alcune delle funzionalità della versione 5,1 sono disponibili solo a partire da Windows Server 2003 e Windows XP con Service Pack 2 (SP2), in particolare le funzionalità relative al miglioramento della sicurezza del client da server Web dannosi.</span><span class="sxs-lookup"><span data-stu-id="16cd6-106">Some of the features in version 5.1 are only available starting with Windows Server 2003 and Windows XP with Service Pack 2 (SP2), particularly features related to improving the security of the client against malicious Web servers.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="16cd6-107">Con il rilascio di WinHTTP versione 5,1, il download di WinHTTP 5,0 non è più disponibile.</span><span class="sxs-lookup"><span data-stu-id="16cd6-107">With the release of WinHTTP Version 5.1, the WinHTTP 5.0 download is no longer available.</span></span> <span data-ttu-id="16cd6-108">A partire dal 1 ° ottobre 2004, Microsoft ha rimosso il download di WinHTTP 5,0 SDK da MSDN e ha terminato il supporto tecnico per la versione 5,0.</span><span class="sxs-lookup"><span data-stu-id="16cd6-108">As of October 1, 2004, Microsoft has removed the WinHTTP 5.0 SDK download from MSDN and has terminated product support for version 5.0.</span></span>

 

## <a name="dll-name-change"></a><span data-ttu-id="16cd6-109">Modifica nome DLL</span><span class="sxs-lookup"><span data-stu-id="16cd6-109">DLL Name Change</span></span>

<span data-ttu-id="16cd6-110">Il nome della nuova DLL WinHTTP 5,1 è Winhttp.dll, mentre il nome della DLL WinHTTP 5,0 è Winhttp5.dll.</span><span class="sxs-lookup"><span data-stu-id="16cd6-110">The name of the new WinHTTP 5.1 DLL is Winhttp.dll, whereas the name of the WinHTTP 5.0 DLL is Winhttp5.dll.</span></span>

<span data-ttu-id="16cd6-111">WinHTTP 5,0 e 5,1 possono coesistere nello stesso sistema; WinHTTP 5,1 non sostituisce o esegue l'installazione in WinHTTP 5,0.</span><span class="sxs-lookup"><span data-stu-id="16cd6-111">WinHTTP 5.0 and 5.1 can coexist on the same system; WinHTTP 5.1 does not replace, or install over, WinHTTP 5.0.</span></span>

## <a name="redistribution"></a><span data-ttu-id="16cd6-112">Ridistribuzione</span><span class="sxs-lookup"><span data-stu-id="16cd6-112">Redistribution</span></span>

<span data-ttu-id="16cd6-113">WinHTTP 5,1 è disponibile solo con Windows Server 2003, Windows 2000 Professional con Service Pack 3 (SP3), Windows XP con Service Pack 1 (SP1) e sistemi operativi successivi.</span><span class="sxs-lookup"><span data-stu-id="16cd6-113">WinHTTP 5.1 is available only with Windows Server 2003, Windows 2000 Professional with Service Pack 3 (SP3), Windows XP with Service Pack 1 (SP1), and later operating systems.</span></span> <span data-ttu-id="16cd6-114">Un file di modulo unione ridistribuibile (MSM) non è disponibile per WinHTTP 5,1.</span><span class="sxs-lookup"><span data-stu-id="16cd6-114">A redistributable merge module (.msm) file is not available for WinHTTP 5.1.</span></span>

## <a name="winhttprequest-progid"></a><span data-ttu-id="16cd6-115">ProgID WinHttpRequest</span><span class="sxs-lookup"><span data-stu-id="16cd6-115">WinHttpRequest ProgID</span></span>

<span data-ttu-id="16cd6-116">Il ProgID del componente WinHttpRequest è stato modificato da "WinHttp. WinHttpRequest. 5" a "WinHttp. WinHttpRequest. 5.1".</span><span class="sxs-lookup"><span data-stu-id="16cd6-116">The ProgID of the WinHttpRequest component has changed from "WinHttp.WinHttpRequest.5" to "WinHttp.WinHttpRequest.5.1".</span></span> <span data-ttu-id="16cd6-117">È stato modificato anche il CLSID della classe [**WinHttpRequest**](winhttprequest.md) .</span><span class="sxs-lookup"><span data-stu-id="16cd6-117">The CLSID of the [**WinHttpRequest**](winhttprequest.md) class has also changed.</span></span>

## <a name="async-callback-behavior-change"></a><span data-ttu-id="16cd6-118">Modifica del comportamento di callback asincrono</span><span class="sxs-lookup"><span data-stu-id="16cd6-118">Async Callback Behavior Change</span></span>

<span data-ttu-id="16cd6-119">Quando si chiamano le funzioni [**WinHttpWriteData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata), [**WinHttpQueryDataAvailable**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpquerydataavailable) e [**WinHttpReadData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata) in modalità asincrona, non basarsi sui rispettivi parametri *lpdwNumberOfBytesWritten*, *lpdwNumberOfBytesAvailable* e *lpdwNumberOfBytesRead* out da impostare.</span><span class="sxs-lookup"><span data-stu-id="16cd6-119">When calling the [**WinHttpWriteData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata), [**WinHttpQueryDataAvailable**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpquerydataavailable) and [**WinHttpReadData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata) functions in asynchronous mode, do not rely on the respective *lpdwNumberOfBytesWritten*, *lpdwNumberOfBytesAvailable*, and *lpdwNumberOfBytesRead* OUT parameters to be set.</span></span> <span data-ttu-id="16cd6-120">Se la chiamata di funzione viene completata in modo asincrono, WinHTTP non scrive in questi puntatori forniti dal codice dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="16cd6-120">If the function call completes asynchronously, WinHTTP does not write to these pointers supplied by the application code.</span></span> <span data-ttu-id="16cd6-121">Al contrario, l'applicazione deve recuperare questi valori usando i parametri *lpvStatusInformation* e *dwStatusInformationLength* per la funzione di callback.</span><span class="sxs-lookup"><span data-stu-id="16cd6-121">Instead, the application should retrieve these values using *lpvStatusInformation* and *dwStatusInformationLength* parameters to the callback function.</span></span>

## <a name="changes-to-default-settings"></a><span data-ttu-id="16cd6-122">Modifiche alle impostazioni predefinite</span><span class="sxs-lookup"><span data-stu-id="16cd6-122">Changes to Default Settings</span></span>

<span data-ttu-id="16cd6-123">Le modifiche alle impostazioni predefinite includono:</span><span class="sxs-lookup"><span data-stu-id="16cd6-123">Changes to default settings include:</span></span>

-   <span data-ttu-id="16cd6-124">La verifica del certificato del server SSL è abilitata per impostazione predefinita in WinHTTP 5,1.</span><span class="sxs-lookup"><span data-stu-id="16cd6-124">SSL server certificate verification is enabled by default in WinHTTP 5.1.</span></span> <span data-ttu-id="16cd6-125">WinHTTP 5,0 non gestisce gli errori riscontrati durante la convalida del certificato del server come errori irreversibili; vengono segnalati all'applicazione tramite una notifica di callback di **\_ errore protetto** , ma non provoca l'interruzione della richiesta.</span><span class="sxs-lookup"><span data-stu-id="16cd6-125">WinHTTP 5.0 does not handle failures encountered when validating the server certificate as fatal errors; they are reported to the application using a **SECURE\_FAILURE** callback notification, but does not cause the request to be aborted.</span></span> <span data-ttu-id="16cd6-126">WinHTTP 5,1, in alternativa, gestisce gli errori di convalida del certificato server come errori irreversibili che interrompono la richiesta.</span><span class="sxs-lookup"><span data-stu-id="16cd6-126">WinHTTP 5.1, alternatively, handles server certificate validation failures as fatal errors that abort the request.</span></span> <span data-ttu-id="16cd6-127">L'applicazione può indicare a WinHTTP di ignorare un piccolo subset di errori del certificato, ad esempio una CA sconosciuta, una data del certificato non valida o scaduta o un nome soggetto del certificato non valido, usando l'opzione per i **\_ flag di \_ sicurezza \_ dell'opzione WinHTTP** .</span><span class="sxs-lookup"><span data-stu-id="16cd6-127">The application can instruct WinHTTP to ignore a small subset of certificate errors such as unknown CA, invalid/expired certificate date, or invalid certificate subject name, using the **WINHTTP\_OPTION\_SECURITY\_FLAGS** option.</span></span>
-   <span data-ttu-id="16cd6-128">Il supporto per l'autenticazione Passport è disabilitato per impostazione predefinita in WinHTTP 5,1.</span><span class="sxs-lookup"><span data-stu-id="16cd6-128">Passport authentication support is disabled by default in WinHTTP 5.1.</span></span> <span data-ttu-id="16cd6-129">È possibile abilitare il supporto Passport con l'opzione **WinHTTP \_ \_ Configure \_ Passport \_ AUTH** .</span><span class="sxs-lookup"><span data-stu-id="16cd6-129">Passport support can be enabled with the **WINHTTP\_OPTION\_CONFIGURE\_PASSPORT\_AUTH** option.</span></span> <span data-ttu-id="16cd6-130">Anche la ricerca automatica delle credenziali Passport nel portachiavi è disabilitata per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="16cd6-130">Automatic Passport credential look-up in the Keyring is also disabled by default.</span></span>
-   <span data-ttu-id="16cd6-131">Modifica del comportamento di reindirizzamento: i reindirizzamenti HTTP da un **HTTPS sicuro:** URL a un normale **http:** URL non sono più seguiti automaticamente per impostazione predefinita per motivi di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="16cd6-131">Redirect behavior change: HTTP redirects from a secure **https:** URL to a regular **http:** URL are no longer followed automatically by default for security reasons.</span></span> <span data-ttu-id="16cd6-132">È disponibile una nuova opzione, **i \_ \_ \_ criteri di reindirizzamento delle opzioni WinHTTP**, per eseguire l'override del comportamento di reindirizzamento predefinito in WinHTTP 5,1.</span><span class="sxs-lookup"><span data-stu-id="16cd6-132">There is a new option, **WINHTTP\_OPTION\_REDIRECT\_POLICY**, to override the default redirect behavior in WinHTTP 5.1.</span></span> <span data-ttu-id="16cd6-133">Con il componente COM **WinHttpRequest** , usare la nuova **opzione \_ EnableHttpsToHttpRedirects di WinHttpRequestOption** per abilitare i reindirizzamenti da https: a http: URL.</span><span class="sxs-lookup"><span data-stu-id="16cd6-133">With the **WinHttpRequest** COM component, use the new **WinHttpRequestOption\_EnableHttpsToHttpRedirects** option to enable redirects from https: to http: URLs.</span></span>
-   <span data-ttu-id="16cd6-134">Quando viene creato un file di traccia WinHTTP, l'accesso è limitato a un ACL in modo che solo gli amministratori possano leggere o scrivere il file.</span><span class="sxs-lookup"><span data-stu-id="16cd6-134">When a WinHTTP trace file is created, access is restricted with an ACL such that only administrators can read or write the file.</span></span> <span data-ttu-id="16cd6-135">L'account utente con cui è stato creato il TraceFile può anche modificare l'ACL per concedere ad altri utenti l'accesso.</span><span class="sxs-lookup"><span data-stu-id="16cd6-135">The user account under which the tracefile was created can also modify the ACL to grant others access.</span></span> <span data-ttu-id="16cd6-136">Questa protezione è disponibile solo nei file System che supportano la protezione. ovvero NTFS, non FAT32.</span><span class="sxs-lookup"><span data-stu-id="16cd6-136">This protection is available only on file systems which support security; that is, NTFS, not FAT32).</span></span>
-   <span data-ttu-id="16cd6-137">A partire da Windows Server 2003 e Windows XP con SP2, l'invio di richieste alle seguenti porte note e non HTTP è limitato per motivi di sicurezza: 21 (FTP), 25 (SMTP), 70 (GOPHER), 110 (POP3), 119 (NNTP), 143 (IMAP).</span><span class="sxs-lookup"><span data-stu-id="16cd6-137">Starting with Windows Server 2003 and Windows XP with SP2, sending requests to the following well-known, non-HTTP, ports is restricted for security reasons: 21 (FTP), 25 (SMTP), 70 (GOPHER), 110 (POP3), 119 (NNTP), 143 (IMAP).</span></span>
-   <span data-ttu-id="16cd6-138">A partire da Windows Server 2003 e Windows XP con SP2, la quantità massima di dati di intestazione che WinHTTP accetta in una risposta HTTP è 64K, per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="16cd6-138">Starting with Windows Server 2003, and Windows XP with SP2, the maximum amount of header data WinHTTP accepts in an HTTP response is 64K, by default.</span></span> <span data-ttu-id="16cd6-139">Se la risposta HTTP del server contiene più 64K di dati di intestazione totali, WinHTTP non riesce a usare la richiesta con errore WinHTTP: errore di **\_ \_ \_ \_ risposta del server non valido** .</span><span class="sxs-lookup"><span data-stu-id="16cd6-139">If the server HTTP response contains more that 64K of total header data, WinHTTP fails the request with an **ERROR\_WINHTTP\_INVALID\_SERVER\_RESPONSE** error.</span></span> <span data-ttu-id="16cd6-140">È possibile eseguire l'override di questo limite di 64K utilizzando l'opzione per le **\_ \_ \_ \_ \_ dimensioni massime dell'intestazione della risposta** per il nuovo WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="16cd6-140">This 64K limit can be overridden using the new **WINHTTP\_OPTION\_MAX\_RESPONSE\_HEADER\_SIZE** option.</span></span>

## <a name="ipv6-support"></a><span data-ttu-id="16cd6-141">Supporto IPv6</span><span class="sxs-lookup"><span data-stu-id="16cd6-141">IPv6 Support</span></span>

<span data-ttu-id="16cd6-142">WinHTTP 5,1 aggiunge il supporto per protocollo Internet versione 6 (IPv6).</span><span class="sxs-lookup"><span data-stu-id="16cd6-142">WinHTTP 5.1 adds support for Internet Protocol Version 6 (IPv6).</span></span> <span data-ttu-id="16cd6-143">WinHTTP può inviare richieste HTTP a un server il cui nome DNS viene risolto in un indirizzo IPv6 e a partire da Windows Server 2003 e Windows XP con SP2, WinHTTP supporta anche indirizzi letterali IPv6.</span><span class="sxs-lookup"><span data-stu-id="16cd6-143">WinHTTP can send HTTP requests to a server whose DNS name resolves into an IPv6 address, and starting with Windows Server 2003 and Windows XP with SP2, WinHTTP also supports IPv6 literal addresses.</span></span>

## <a name="new-options-in-the-cc-api-for-winhttp"></a><span data-ttu-id="16cd6-144">Nuove opzioni nell'API C/C++ per WinHTTP</span><span class="sxs-lookup"><span data-stu-id="16cd6-144">New Options in the C/C++ API for WinHTTP</span></span>

<span data-ttu-id="16cd6-145">WinHTTP 5,1 implementa le nuove opzioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="16cd6-145">WinHTTP 5.1 implements the following new options:</span></span>

<dl> <span data-ttu-id="16cd6-146">" \# Definisci l' \_ opzione \_ per il Passport di \_ disconnessione \_ 86"</span><span class="sxs-lookup"><span data-stu-id="16cd6-146">"\#define WINHTTP\_OPTION\_PASSPORT\_SIGN\_OUT 86"</span></span>  
<span data-ttu-id="16cd6-147">" \# define \_ \_ \_ URL Passport return \_ URL 87"</span><span class="sxs-lookup"><span data-stu-id="16cd6-147">"\#define WINHTTP\_OPTION\_PASSPORT\_RETURN\_URL 87"</span></span>  
<span data-ttu-id="16cd6-148">" \# definire i \_ criteri di reindirizzamento delle opzioni WinHTTP \_ \_ 88"</span><span class="sxs-lookup"><span data-stu-id="16cd6-148">"\#define WINHTTP\_OPTION\_REDIRECT\_POLICY 88"</span></span>  
</dl>

<span data-ttu-id="16cd6-149">A partire da Windows Server 2003 e Windows XP con SP2, WinHTTP 5,1 implementa le nuove opzioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="16cd6-149">Starting with Windows Server 2003 and Windows XP with SP2, WinHTTP 5.1 implements the following new options.</span></span> <span data-ttu-id="16cd6-150">In Windows 2000 Professional con SP3 o Windows XP con SP1, tuttavia, le chiamate a [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) o [**WinHttpQueryOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryoption) con questi ID opzione hanno esito negativo:</span><span class="sxs-lookup"><span data-stu-id="16cd6-150">On Windows 2000 Professional with SP3 or Windows XP with SP1, however, calls to [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) or [**WinHttpQueryOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryoption) with these option IDs fail:</span></span>

<dl> <span data-ttu-id="16cd6-151">" \# definire il \_ timeout di risposta di ricezione dell'opzione WinHTTP \_ \_ \_ 7"</span><span class="sxs-lookup"><span data-stu-id="16cd6-151">"\#define WINHTTP\_OPTION\_RECEIVE\_RESPONSE\_TIMEOUT 7"</span></span>  
<span data-ttu-id="16cd6-152">" \# Definisci l' \_ opzione WinHTTP \_ Max \_ http \_ \_ reindirizzamenti automatici 89"</span><span class="sxs-lookup"><span data-stu-id="16cd6-152">"\#define WINHTTP\_OPTION\_MAX\_HTTP\_AUTOMATIC\_REDIRECTS 89"</span></span>  
<span data-ttu-id="16cd6-153">" \# definizione \_ opzione WinHTTP \_ Max \_ http \_ status \_ continua 90"</span><span class="sxs-lookup"><span data-stu-id="16cd6-153">"\#define WINHTTP\_OPTION\_MAX\_HTTP\_STATUS\_CONTINUE 90"</span></span>  
<span data-ttu-id="16cd6-154">" \# definizione delle \_ dimensioni massime dell'intestazione della risposta per l'opzione WinHTTP \_ \_ \_ \_ 91"</span><span class="sxs-lookup"><span data-stu-id="16cd6-154">"\#define WINHTTP\_OPTION\_MAX\_RESPONSE\_HEADER\_SIZE 91"</span></span>  
<span data-ttu-id="16cd6-155">" \# definire le \_ dimensioni massime di svuotamento della risposta per l'opzione WinHTTP \_ \_ \_ \_ 92"</span><span class="sxs-lookup"><span data-stu-id="16cd6-155">"\#define WINHTTP\_OPTION\_MAX\_RESPONSE\_DRAIN\_SIZE 92"</span></span>  
</dl>

## <a name="new-options-in-the-winhttprequest-51-component"></a><span data-ttu-id="16cd6-156">Nuove opzioni nel componente WinHttpRequest 5,1</span><span class="sxs-lookup"><span data-stu-id="16cd6-156">New Options in the WinHttpRequest 5.1 Component</span></span>

<span data-ttu-id="16cd6-157">Il componente WinHttpRequest 5,1 implementa le nuove opzioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="16cd6-157">The WinHttpRequest 5.1 component implements the following new options:</span></span>

<dl> <span data-ttu-id="16cd6-158">"WinHttpRequestOption \_ RevertImpersonationOverSsl"</span><span class="sxs-lookup"><span data-stu-id="16cd6-158">"WinHttpRequestOption\_RevertImpersonationOverSsl"</span></span>  
<span data-ttu-id="16cd6-159">"WinHttpRequestOption \_ EnableHttpsToHttpRedirects"</span><span class="sxs-lookup"><span data-stu-id="16cd6-159">"WinHttpRequestOption\_EnableHttpsToHttpRedirects"</span></span>  
<span data-ttu-id="16cd6-160">"WinHttpRequestOption \_ EnablePassportAuthentication"</span><span class="sxs-lookup"><span data-stu-id="16cd6-160">"WinHttpRequestOption\_EnablePassportAuthentication"</span></span>  
</dl>

<span data-ttu-id="16cd6-161">Le seguenti nuove opzioni di WinHttpRequest 5,1 sono disponibili a partire da Windows Server 2003 e Windows XP con SP2:</span><span class="sxs-lookup"><span data-stu-id="16cd6-161">The following new WinHttpRequest 5.1 options are available starting with Windows Server 2003 and Windows XP with SP2:</span></span>

<dl> <span data-ttu-id="16cd6-162">"WinHttpRequestOption \_ MaxAutomaticRedirects"</span><span class="sxs-lookup"><span data-stu-id="16cd6-162">"WinHttpRequestOption\_MaxAutomaticRedirects"</span></span>  
<span data-ttu-id="16cd6-163">"WinHttpRequestOption \_ MaxResponseHeaderSize"</span><span class="sxs-lookup"><span data-stu-id="16cd6-163">"WinHttpRequestOption\_MaxResponseHeaderSize"</span></span>  
<span data-ttu-id="16cd6-164">"WinHttpRequestOption \_ MaxResponseDrainSize"</span><span class="sxs-lookup"><span data-stu-id="16cd6-164">"WinHttpRequestOption\_MaxResponseDrainSize"</span></span>  
<span data-ttu-id="16cd6-165">"WinHttpRequestOptions \_ EnableHttp1 \_ 1"</span><span class="sxs-lookup"><span data-stu-id="16cd6-165">"WinHttpRequestOptions\_EnableHttp1\_1"</span></span>  
</dl>

## <a name="proxies-are-not-trusted-when-auto-logon-security-is-set-to-high"></a><span data-ttu-id="16cd6-166">I proxy non sono attendibili quando la sicurezza dell'accesso automatico è impostata su High</span><span class="sxs-lookup"><span data-stu-id="16cd6-166">Proxies Are Not Trusted When Auto-Logon Security is Set to High</span></span>

<span data-ttu-id="16cd6-167">In WinHTTP 5,0, i server proxy sono sempre attendibili per l'accesso automatico.</span><span class="sxs-lookup"><span data-stu-id="16cd6-167">In WinHTTP 5.0, proxy servers are always trusted for auto-logon.</span></span> <span data-ttu-id="16cd6-168">Questa opzione non è più valida per WinHTTP 5,1 in esecuzione in Windows Server 2003 e Windows XP con SP2 quando è impostata l'opzione per i criteri **elevati del livello di sicurezza di WinHTTP \_ Autologon \_ \_ \_** .</span><span class="sxs-lookup"><span data-stu-id="16cd6-168">This is no longer valid for WinHTTP 5.1 running on Windows Server 2003 and Windows XP with SP2 when the **WINHTTP\_AUTOLOGON\_SECURITY\_LEVEL\_HIGH** policy option is set.</span></span>

## <a name="web-proxy-auto-discovery-autoproxy-api"></a><span data-ttu-id="16cd6-169">API Web Proxy Auto-Discovery (AutoProxy)</span><span class="sxs-lookup"><span data-stu-id="16cd6-169">Web Proxy Auto-Discovery (AutoProxy) API</span></span>

<span data-ttu-id="16cd6-170">Per semplificare la configurazione delle impostazioni proxy per le applicazioni basate su WinHTTP, WinHTTP implementa ora il protocollo WPAD (Web Proxy Auto-Discovery), noto anche come *AutoProxy*.</span><span class="sxs-lookup"><span data-stu-id="16cd6-170">To ease the configuration of proxy settings for WinHTTP-based applications, WinHTTP now implements the Web Proxy Auto-Discovery (WPAD) protocol, also referred to as *autoproxy*.</span></span> <span data-ttu-id="16cd6-171">Si tratta dello stesso protocollo che i Web browser, ad esempio Internet Explorer, implementano per individuare automaticamente la configurazione del proxy senza richiedere a un utente finale di specificare manualmente un server proxy.</span><span class="sxs-lookup"><span data-stu-id="16cd6-171">This is the same protocol that web browsers, such as Internet Explorer, implement to discover the proxy configuration automatically without requiring an end-user to specify a proxy server manually.</span></span> <span data-ttu-id="16cd6-172">Per supportare AutoProxy, WinHTTP 5,1 implementa una nuova funzione C/C++, [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl), più due funzioni di supporto, [**WinHttpDetectAutoProxyConfigUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpdetectautoproxyconfigurl) e [**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser).</span><span class="sxs-lookup"><span data-stu-id="16cd6-172">To support autoproxy, WinHTTP 5.1 implements a new C/C++ function, [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl), plus two supporting functions, [**WinHttpDetectAutoProxyConfigUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpdetectautoproxyconfigurl) and [**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser).</span></span>

## <a name="known-issues"></a><span data-ttu-id="16cd6-173">Problemi noti</span><span class="sxs-lookup"><span data-stu-id="16cd6-173">Known Issues</span></span>

<span data-ttu-id="16cd6-174">I problemi seguenti sono noti in WinHTTP 5,1 su Windows 2000 Professional con SP3 e Windows XP con SP1.</span><span class="sxs-lookup"><span data-stu-id="16cd6-174">The following issues are known to exist in WinHTTP 5.1 on Windows 2000 Professional with SP3 and Windows XP with SP1.</span></span> <span data-ttu-id="16cd6-175">Questi problemi vengono risolti per WinHTTP a partire da Windows Server 2003 e Windows XP con SP2:</span><span class="sxs-lookup"><span data-stu-id="16cd6-175">These issues are resolved for WinHTTP starting with Windows Server 2003 and Windows XP with SP2:</span></span>

-   <span data-ttu-id="16cd6-176">Se l'applicazione usa la funzione [**WinHttpSetTimeouts**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsettimeouts) o il metodo [**setimeouts**](iwinhttprequest-settimeouts.md) sul componente [**WinHttpRequest**](iwinhttprequest-interface.md) per impostare un timeout di risoluzione DNS non infinito, ad esempio il parametro *dwResolveTimeout* , si verifica una perdita di handle del thread ogni volta che WinHTTP risolve un nome DNS.</span><span class="sxs-lookup"><span data-stu-id="16cd6-176">If the application uses the [**WinHttpSetTimeouts**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsettimeouts) function or the [**SetTimeouts**](iwinhttprequest-settimeouts.md) method on the [**WinHttpRequest**](iwinhttprequest-interface.md) component to set a non-infinite DNS resolve timeout such as the *dwResolveTimeout* parameter, a thread handle leak occurs each time WinHTTP resolves a DNS name.</span></span> <span data-ttu-id="16cd6-177">Per un numero elevato di richieste HTTP, ciò causa una perdita di memoria significativa.</span><span class="sxs-lookup"><span data-stu-id="16cd6-177">Over a large number of HTTP requests, this causes a significant memory leak.</span></span> <span data-ttu-id="16cd6-178">La soluzione alternativa consiste nel lasciare invariata l'impostazione predefinita di timeout di risoluzione infinita (il valore 0 indica un timeout infinito).</span><span class="sxs-lookup"><span data-stu-id="16cd6-178">The workaround is to leave the default infinite resolve timeout setting unchanged (a value of 0 specifies an infinite timeout).</span></span> <span data-ttu-id="16cd6-179">Questa operazione è consigliata in ogni caso perché i timeout di supporto per le risoluzioni dei nomi DNS in WinHTTP sono costosi in termini di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="16cd6-179">This is strongly recommended in any case as supporting timeouts on DNS name resolutions in WinHTTP is expensive in terms of performance.</span></span> <span data-ttu-id="16cd6-180">Per Windows 2000 e versioni successive, l'impostazione di un timeout di risoluzione DNS in WinHTTP non è necessaria perché il servizio client DNS sottostante implementa il proprio timeout di risoluzione.</span><span class="sxs-lookup"><span data-stu-id="16cd6-180">For Windows 2000 and later, setting a DNS resolve timeout in WinHTTP is unnecessary as the underlying DNS client service implements its own resolve timeout.</span></span>
-   <span data-ttu-id="16cd6-181">Quando si elaborano richieste asincrone, WinHTTP non gestisce correttamente la rappresentazione del thread.</span><span class="sxs-lookup"><span data-stu-id="16cd6-181">When processing asynchronous requests, WinHTTP does not handle thread impersonation properly.</span></span> <span data-ttu-id="16cd6-182">In questo modo le richieste che richiedono l'autenticazione NTLM/Negotiate avranno esito negativo, a meno che le credenziali non vengano specificate in modo esplicito mediante le funzioni [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials) o [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) .</span><span class="sxs-lookup"><span data-stu-id="16cd6-182">This causes requests that require NTLM/Negotiate authentication to fail, unless credentials are explicitly given using the [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) functions.</span></span>

 

 



