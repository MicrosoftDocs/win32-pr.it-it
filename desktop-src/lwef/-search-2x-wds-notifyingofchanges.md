---
title: Notifica dell'indice delle modifiche (funzionalità legacy dell'ambiente Windows)
description: Con Microsoft Windows Desktop Search (WDS) 2,6, i gestori di protocollo per un determinato archivio dati possono indicare all'indicizzatore WDS quando i dati nel relativo archivio cambiano.
ms.assetid: 700b1707-dd11-4a30-8f00-5c4aae1173ff
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6021cfe5cd7061a3d3255e56d08e665a6caedf03
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/10/2020
ms.locfileid: "104225194"
---
# <a name="notifying-the-index-of-changes-legacy-windows-environment-features"></a><span data-ttu-id="8729a-103">Notifica dell'indice delle modifiche (funzionalità legacy dell'ambiente Windows)</span><span class="sxs-lookup"><span data-stu-id="8729a-103">Notifying the Index of Changes (Legacy Windows Environment Features)</span></span>

> [!NOTE]
> <span data-ttu-id="8729a-104">Windows Desktop Search 2. x è una tecnologia obsoleta originariamente disponibile come componente aggiuntivo per Windows XP e Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="8729a-104">Windows Desktop Search 2.x is an obsolete technology that was originally available as an add-in for Windows XP and Windows Server 2003.</span></span> <span data-ttu-id="8729a-105">Nelle versioni successive usare invece [Windows Search](../search/-search-3x-wds-overview.md) .</span><span class="sxs-lookup"><span data-stu-id="8729a-105">On later releases, use [Windows Search](../search/-search-3x-wds-overview.md) instead.</span></span>

<span data-ttu-id="8729a-106">Con Microsoft Windows Desktop Search (WDS) 2,6, i gestori di protocollo per un determinato archivio dati possono indicare all'indicizzatore WDS quando i dati nel relativo archivio cambiano.</span><span class="sxs-lookup"><span data-stu-id="8729a-106">With Microsoft Windows Desktop Search (WDS) 2.6, protocol handlers for a given data store can tell the WDS Indexer when data in their store has changed.</span></span> <span data-ttu-id="8729a-107">Ciò consente di migliorare le prestazioni assicurando che l'indicizzatore non esegue la ricerca per indici incrementali nell'intero archivio.</span><span class="sxs-lookup"><span data-stu-id="8729a-107">This improves performance by ensuring the Indexer doesn't crawl the entire store on incremental indexes.</span></span> <span data-ttu-id="8729a-108">Usando le API di notifica, i gestori di protocollo possono notificare all'indicizzatore che un elemento è stato spostato o eliminato e possono aggiungere degli ambiti alla coda di ricerca per indicizzazione dell'indicizzatore WDS degli URL che richiedono l'indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="8729a-108">Using notification APIs, protocol handlers can notify the Indexer that an item has been moved or deleted, and they can add scopes to the WDS Indexer's crawl queue of URLs requiring indexing.</span></span> <span data-ttu-id="8729a-109">La notifica è utile per le applicazioni, ad esempio la posta elettronica, in cui il gestore di protocollo monitora l'archivio e notifica all'indicizzatore che gli elementi sono stati modificati e richiedono l'indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="8729a-109">Notification is helpful for applications such as email, where the protocol handler monitors the store and notifies the Indexer that items have changed and require indexing.</span></span>

## <a name="isearchitemschangedsink"></a><span data-ttu-id="8729a-110">ISearchItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="8729a-110">ISearchItemsChangedSink</span></span>

<span data-ttu-id="8729a-111">I gestori di protocollo inviano notifiche all'indicizzatore delle modifiche tramite l'interfaccia [**ISearchItemsChangedSink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) .</span><span class="sxs-lookup"><span data-stu-id="8729a-111">Protocol handlers notify the Indexer of changes through the [**ISearchItemsChangedSink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) interface.</span></span> <span data-ttu-id="8729a-112">Le informazioni sulle modifiche ai dati devono essere raccolte \_ negli \_ struct di modifica degli elementi di ricerca e nel \_ tipo \_ di ricerca dei \_ tipi di enumerazione delle modifiche e quindi comunicate all'indicizzatore tramite il metodo **OnItemsChanged** dell'interfaccia **ISearchItemsChangedSink** .</span><span class="sxs-lookup"><span data-stu-id="8729a-112">Information about data changes should be collected in SEARCH\_ITEM\_CHANGE structs and SEARCH\_KIND\_OF\_CHANGE enumeration types and then communicated to the Indexer through the **OnItemsChanged** method of the **ISearchItemsChangedSink** interface.</span></span>

<span data-ttu-id="8729a-113">Per accedere a questa interfaccia, un gestore di protocollo personalizzato deve prima creare un'istanza di un oggetto [**ISearchManager**](/windows/desktop/api/searchapi/nn-searchapi-isearchmanager) per ottenere l'accesso all'oggetto [**ISearchCatalogManager**](/windows/desktop/api/searchapi/nn-searchapi-isearchcatalogmanager) .</span><span class="sxs-lookup"><span data-stu-id="8729a-113">To access this interface, a custom protocol handlers must first instantiate an [**ISearchManager**](/windows/desktop/api/searchapi/nn-searchapi-isearchmanager) object to gain access to the [**ISearchCatalogManager**](/windows/desktop/api/searchapi/nn-searchapi-isearchcatalogmanager) object.</span></span> <span data-ttu-id="8729a-114">Da qui, è possibile creare un'istanza di un oggetto [**ISearchItemsChangedSink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) e inviare una notifica all'indicizzatore delle modifiche dei dati.</span><span class="sxs-lookup"><span data-stu-id="8729a-114">From there, one can instantiate an [**ISearchItemsChangedSink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) object and notify the Indexer of the data changes.</span></span>

<span data-ttu-id="8729a-115">Il metodo OnItemsChanged consente di raccogliere e comunicare le modifiche ai dati nell'archivio dati del cliente per avviare l'indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="8729a-115">The OnItemsChanged method lets you collect and communicate data changes to your customer data store to initiate indexing.</span></span>



| <span data-ttu-id="8729a-116">Direzione</span><span class="sxs-lookup"><span data-stu-id="8729a-116">Direction</span></span> | <span data-ttu-id="8729a-117">Variabile</span><span class="sxs-lookup"><span data-stu-id="8729a-117">Variable</span></span>              | <span data-ttu-id="8729a-118">Descrizione</span><span class="sxs-lookup"><span data-stu-id="8729a-118">Description</span></span>                                                              |
|-----------|-----------------------|--------------------------------------------------------------------------|
| <span data-ttu-id="8729a-119">In</span><span class="sxs-lookup"><span data-stu-id="8729a-119">In</span></span>        | <span data-ttu-id="8729a-120">dwNumberofChanges</span><span class="sxs-lookup"><span data-stu-id="8729a-120">dwNumberofChanges</span></span>     | <span data-ttu-id="8729a-121">Numero totale di modifiche nella notifica.</span><span class="sxs-lookup"><span data-stu-id="8729a-121">Total number of changes in the notification.</span></span>                             |
| <span data-ttu-id="8729a-122">In</span><span class="sxs-lookup"><span data-stu-id="8729a-122">In</span></span>        | <span data-ttu-id="8729a-123">DataChangeEntries\[\]</span><span class="sxs-lookup"><span data-stu-id="8729a-123">DataChangeEntries\[\]</span></span> | <span data-ttu-id="8729a-124">Tutte le notifiche di modifica in una matrice di strutture di modifica degli elementi di ricerca \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="8729a-124">All change notifications in an array of SEARCH\_ITEM\_CHANGE structures.</span></span> |
| <span data-ttu-id="8729a-125">In uscita</span><span class="sxs-lookup"><span data-stu-id="8729a-125">Out</span></span>       | <span data-ttu-id="8729a-126">dwBatchId</span><span class="sxs-lookup"><span data-stu-id="8729a-126">dwBatchId</span></span>             | <span data-ttu-id="8729a-127">ID batch che verrà restituito con errori.</span><span class="sxs-lookup"><span data-stu-id="8729a-127">The batch ID that will be passed back with errors.</span></span>                       |
| <span data-ttu-id="8729a-128">In uscita</span><span class="sxs-lookup"><span data-stu-id="8729a-128">Out</span></span>       | <span data-ttu-id="8729a-129">hrCompletionCodes\[\]</span><span class="sxs-lookup"><span data-stu-id="8729a-129">hrCompletionCodes\[\]</span></span> | <span data-ttu-id="8729a-130">Indica se ogni URL è stato accettato per l'indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="8729a-130">Indicates whether each URL was accepted for indexing.</span></span>                    |



 

<span data-ttu-id="8729a-131">La \_ \_ struttura di modifica degli elementi di ricerca identifica il tipo di modifica che si è verificata, nonché l'URL corrente dell'elemento e l'URL precedente, se applicabile.</span><span class="sxs-lookup"><span data-stu-id="8729a-131">The SEARCH\_ITEM\_CHANGE structure identifies the kind of change that occurred as well as the item's current URL and previous URL, if applicable.</span></span> <span data-ttu-id="8729a-132">La struttura viene definita nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="8729a-132">The structure is defined as follows:</span></span>



| <span data-ttu-id="8729a-133">Nome della proprietà</span><span class="sxs-lookup"><span data-stu-id="8729a-133">Property Name</span></span> | <span data-ttu-id="8729a-134">Tipo di proprietà</span><span class="sxs-lookup"><span data-stu-id="8729a-134">Property Type</span></span>                  | <span data-ttu-id="8729a-135">Descrizione</span><span class="sxs-lookup"><span data-stu-id="8729a-135">Description</span></span>                                                                |
|---------------|--------------------------------|----------------------------------------------------------------------------|
| <span data-ttu-id="8729a-136">Modifica</span><span class="sxs-lookup"><span data-stu-id="8729a-136">Change</span></span>        | <span data-ttu-id="8729a-137">\_tipo \_ di \_ modifica di ricerca</span><span class="sxs-lookup"><span data-stu-id="8729a-137">SEARCH\_KIND\_OF\_CHANGE</span></span>       | <span data-ttu-id="8729a-138">Tipo di modifica a cui viene inviata una notifica.</span><span class="sxs-lookup"><span data-stu-id="8729a-138">The type of change that is being notified.</span></span>                                 |
| <span data-ttu-id="8729a-139">URL</span><span class="sxs-lookup"><span data-stu-id="8729a-139">URL</span></span>           | <span data-ttu-id="8729a-140">LPWSTR</span><span class="sxs-lookup"><span data-stu-id="8729a-140">LPWSTR</span></span>                         | <span data-ttu-id="8729a-141">URL per l'oggetto che è stato modificato.</span><span class="sxs-lookup"><span data-stu-id="8729a-141">The URL for the object that has changed.</span></span>                                   |
| <span data-ttu-id="8729a-142">OldURL</span><span class="sxs-lookup"><span data-stu-id="8729a-142">OldURL</span></span>        | <span data-ttu-id="8729a-143">LPWSTR</span><span class="sxs-lookup"><span data-stu-id="8729a-143">LPWSTR</span></span>                         | <span data-ttu-id="8729a-144">Se la notifica è uno spostamento, viene fornito l'URL precedente e deve essere univoco.</span><span class="sxs-lookup"><span data-stu-id="8729a-144">If the notification is a move, the old URL is provided and must be unique.</span></span> |
| <span data-ttu-id="8729a-145">Priorità</span><span class="sxs-lookup"><span data-stu-id="8729a-145">Priority</span></span>      | <span data-ttu-id="8729a-146">\_priorità di notifica di ricerca \_</span><span class="sxs-lookup"><span data-stu-id="8729a-146">SEARCH\_NOTIFICATION\_PRIORITY</span></span> | <span data-ttu-id="8729a-147">Priorità della modifica.</span><span class="sxs-lookup"><span data-stu-id="8729a-147">The priority of the change.</span></span>                                                |



 

<span data-ttu-id="8729a-148">Il \_ tipo \_ di ricerca dell'enumerazione delle \_ modifiche viene definito nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="8729a-148">The SEARCH\_KIND\_OF\_CHANGE enumeration is defined as follows:</span></span>



| <span data-ttu-id="8729a-149">Valore enum</span><span class="sxs-lookup"><span data-stu-id="8729a-149">Enum Value</span></span>                           | <span data-ttu-id="8729a-150">Valore</span><span class="sxs-lookup"><span data-stu-id="8729a-150">Value</span></span>   | <span data-ttu-id="8729a-151">Descrizione</span><span class="sxs-lookup"><span data-stu-id="8729a-151">Description</span></span>                                                                                     |
|--------------------------------------|---------|-------------------------------------------------------------------------------------------------|
| <span data-ttu-id="8729a-152">modifica di ricerca \_ \_ Aggiungi</span><span class="sxs-lookup"><span data-stu-id="8729a-152">SEARCH\_CHANGE\_ADD</span></span>                  | <span data-ttu-id="8729a-153">0</span><span class="sxs-lookup"><span data-stu-id="8729a-153">0</span></span>       | <span data-ttu-id="8729a-154">La notifica riguarda un URL aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="8729a-154">The notification is for an additional URL.</span></span>                                                      |
| <span data-ttu-id="8729a-155">\_Elimina modifiche di ricerca \_</span><span class="sxs-lookup"><span data-stu-id="8729a-155">SEARCH\_CHANGE\_DELETE</span></span>               | <span data-ttu-id="8729a-156">1</span><span class="sxs-lookup"><span data-stu-id="8729a-156">1</span></span>       | <span data-ttu-id="8729a-157">La notifica è relativa all'eliminazione di un URL.</span><span class="sxs-lookup"><span data-stu-id="8729a-157">The notification is for the deletion of a URL.</span></span>                                                  |
| <span data-ttu-id="8729a-158">modifica ricerca \_ modifiche \_</span><span class="sxs-lookup"><span data-stu-id="8729a-158">SEARCH\_CHANGE\_MODIFY</span></span>               | <span data-ttu-id="8729a-159">2</span><span class="sxs-lookup"><span data-stu-id="8729a-159">2</span></span>       | <span data-ttu-id="8729a-160">La notifica è che un URL è stato modificato.</span><span class="sxs-lookup"><span data-stu-id="8729a-160">The notification is that a URL has been modified.</span></span>                                               |
| <span data-ttu-id="8729a-161">\_modifica \_ \_ ridenominazione spostamento modifiche</span><span class="sxs-lookup"><span data-stu-id="8729a-161">SEARCH\_CHANGE\_MOVE\_RENAME</span></span>         | <span data-ttu-id="8729a-162">3</span><span class="sxs-lookup"><span data-stu-id="8729a-162">3</span></span>       | <span data-ttu-id="8729a-163">La notifica riguarda lo spostamento e la ridenominazione di un oggetto in un nuovo URL.</span><span class="sxs-lookup"><span data-stu-id="8729a-163">The notification is for the move and rename of an object to a new URL.</span></span>                          |
| <span data-ttu-id="8729a-164">Cerca \_ \_ nella directory della semantica di modifica \_</span><span class="sxs-lookup"><span data-stu-id="8729a-164">SEARCH\_CHANGE\_SEMANTICS\_DIRECTORY</span></span> | <span data-ttu-id="8729a-165">0x10000</span><span class="sxs-lookup"><span data-stu-id="8729a-165">0x10000</span></span> | <span data-ttu-id="8729a-166">La notifica riguarda un URL del contenitore.</span><span class="sxs-lookup"><span data-stu-id="8729a-166">The notification is for a container URL.</span></span>                                                        |
| <span data-ttu-id="8729a-167">\_semantica di modifica della ricerca \_ \_ superficiale</span><span class="sxs-lookup"><span data-stu-id="8729a-167">SEARCH\_CHANGE\_SEMANTICS\_SHALLOW</span></span>   | <span data-ttu-id="8729a-168">0x20000</span><span class="sxs-lookup"><span data-stu-id="8729a-168">0x20000</span></span> | <span data-ttu-id="8729a-169">La notifica riguarda un URL del contenitore che deve avere solo le proprietà del contenitore indicizzate.</span><span class="sxs-lookup"><span data-stu-id="8729a-169">The notification is for a container URL that should only have its container properties indexed.</span></span> |
| <span data-ttu-id="8729a-170">\_sicurezza della \_ semantica delle modifiche di ricerca \_</span><span class="sxs-lookup"><span data-stu-id="8729a-170">SEARCH\_CHANGE\_SEMANTICS\_SECURITY</span></span>  | <span data-ttu-id="8729a-171">0x40000</span><span class="sxs-lookup"><span data-stu-id="8729a-171">0x40000</span></span> | <span data-ttu-id="8729a-172">La notifica riguarda un URL o un URL del contenitore in cui sono state modificate le proprietà di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="8729a-172">The notification is for a URL or container URL that has had its security properties changed.</span></span>    |



 

<span data-ttu-id="8729a-173">L' \_ \_ enumerazione di priorità della notifica di ricerca viene definita nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="8729a-173">The SEARCH\_NOTIFICATION\_PRIORITY enumeration is defined as follows:</span></span>



| <span data-ttu-id="8729a-174">Valore enum</span><span class="sxs-lookup"><span data-stu-id="8729a-174">Enum Value</span></span>               | <span data-ttu-id="8729a-175">Valore</span><span class="sxs-lookup"><span data-stu-id="8729a-175">Value</span></span> | <span data-ttu-id="8729a-176">Descrizione</span><span class="sxs-lookup"><span data-stu-id="8729a-176">Description</span></span>                                                                                                                                                                    |
|--------------------------|-------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="8729a-177">Cerca \_ \_ priorità normale</span><span class="sxs-lookup"><span data-stu-id="8729a-177">SEARCH\_NORMAL\_PRIORITY</span></span> | <span data-ttu-id="8729a-178">0</span><span class="sxs-lookup"><span data-stu-id="8729a-178">0</span></span>     | <span data-ttu-id="8729a-179">Quando si indicizza l'URL, è necessario utilizzare solo una priorità normale.</span><span class="sxs-lookup"><span data-stu-id="8729a-179">Only a normal priority should be used when indexing the URL.</span></span> <span data-ttu-id="8729a-180">Queste notifiche vengono elaborate prima della normale indicizzazione incrementale in background dei file e degli archivi di un utente.</span><span class="sxs-lookup"><span data-stu-id="8729a-180">These notifications are processed before the normal background incremental indexing of a user's files and stores.</span></span> |



 

 

 
