---
title: Implementazione del meccanismo LEAP di EAPHost
description: Viene descritto il meccanismo EAPHost che consente a terze parti di scrivere moduli LEAP (Lightweight Extensible Authentication Protocol) per Windows.
ms.assetid: d17a99cb-4a43-4719-984e-b742c9518f52
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dc50cda8d32cc26dd81af5733345deebb579c792
ms.sourcegitcommit: 773fa6257ead6c74154ad3cf46d21e49adc900aa
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/09/2020
ms.locfileid: "104118618"
---
# <a name="implementing-the-eaphost-leap-mechanism"></a><span data-ttu-id="470d0-103">Implementazione del meccanismo LEAP di EAPHost</span><span class="sxs-lookup"><span data-stu-id="470d0-103">Implementing the EAPHost LEAP Mechanism</span></span>

<span data-ttu-id="470d0-104">In questo argomento viene descritto il meccanismo EAPHost che consente a terze parti di scrivere moduli LEAP (Lightweight Extensible Authentication Protocol) per Windows.</span><span class="sxs-lookup"><span data-stu-id="470d0-104">This topic describes the EAPHost mechanism that allows third parties to write Lightweight Extensible Authentication Protocol (LEAP) modules for Windows.</span></span> <span data-ttu-id="470d0-105">LEAP è un metodo di autenticazione legacy, creato da Cisco, in base allo [standard RFC 3748](https://go.microsoft.com/fwlink/p/?linkid=84016).</span><span class="sxs-lookup"><span data-stu-id="470d0-105">LEAP is a legacy authentication method, created by Cisco, as per [RFC 3748](https://go.microsoft.com/fwlink/p/?linkid=84016).</span></span> <span data-ttu-id="470d0-106">Per ulteriori informazioni su LEAP, vedere [la pagina relativa a Cisco LEAP Q&A](https://go.microsoft.com/fwlink/p/?linkid=84018).</span><span class="sxs-lookup"><span data-stu-id="470d0-106">For more information about LEAP, see [Cisco LEAP Q&A](https://go.microsoft.com/fwlink/p/?linkid=84018).</span></span>

## <a name="eaphost-authentication-process"></a><span data-ttu-id="470d0-107">Processo di autenticazione EAPHost</span><span class="sxs-lookup"><span data-stu-id="470d0-107">EAPHost Authentication Process</span></span>

<span data-ttu-id="470d0-108">Il normale processo di autenticazione EAPHost si verifica nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="470d0-108">The regular EAPHost authentication process occurs as follows:</span></span>

-   <span data-ttu-id="470d0-109">L'autenticatore invia una richiesta di autenticazione del peer.</span><span class="sxs-lookup"><span data-stu-id="470d0-109">The authenticator sends a Request to authenticate the peer.</span></span> <span data-ttu-id="470d0-110">Ad esempio, l'applicazione chiama [**EapHostPeerBeginSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerbeginsession) con la configurazione EAPHost e i dati utente.</span><span class="sxs-lookup"><span data-stu-id="470d0-110">For example, the application calls [**EapHostPeerBeginSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerbeginsession) with EAPHost configuration and user data.</span></span>
-   <span data-ttu-id="470d0-111">Il peer invia un pacchetto di risposta in risposta a una richiesta valida.</span><span class="sxs-lookup"><span data-stu-id="470d0-111">The peer sends a Response packet in reply to a valid Request.</span></span> <span data-ttu-id="470d0-112">Ad esempio, una chiamata riuscita restituisce un handle di sessione dell' **\_ \_ handle di sessione EAP** .</span><span class="sxs-lookup"><span data-stu-id="470d0-112">For example, a successful call returns an **EAP\_SESSION\_HANDLE** session handle.</span></span>
-   <span data-ttu-id="470d0-113">L'autenticatore Invia un pacchetto di richiesta aggiuntivo e il peer risponde con una risposta.</span><span class="sxs-lookup"><span data-stu-id="470d0-113">The authenticator sends an additional Request packet, and the peer replies with a Response.</span></span> <span data-ttu-id="470d0-114">Ad esempio, l'applicazione chiama [**EapHostPeerGetSendPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetsendpacket) per ottenere i pacchetti EAP ricevuti da EAPHost durante la sessione.</span><span class="sxs-lookup"><span data-stu-id="470d0-114">For example, the application calls [**EapHostPeerGetSendPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetsendpacket) to obtain EAP packets received by EAPHost throughout the session.</span></span> <span data-ttu-id="470d0-115">Ogni pacchetto viene elaborato da una chiamata a [**EapHostPeerProcessReceivedPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerprocessreceivedpacket).</span><span class="sxs-lookup"><span data-stu-id="470d0-115">Each packet is processed by a call to [**EapHostPeerProcessReceivedPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerprocessreceivedpacket).</span></span>
-   <span data-ttu-id="470d0-116">[**EapHostPeerProcessReceivedPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerprocessreceivedpacket) restituirà sempre un codice di azione.</span><span class="sxs-lookup"><span data-stu-id="470d0-116">[**EapHostPeerProcessReceivedPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerprocessreceivedpacket) will always return an action code.</span></span> <span data-ttu-id="470d0-117">Il supplicant deve quindi chiamare la funzione corrispondente al codice dell'azione.</span><span class="sxs-lookup"><span data-stu-id="470d0-117">The supplicant must then call the function corresponding to the action code.</span></span>
-   <span data-ttu-id="470d0-118">La sequenza di richieste e risposte continua fino a quando necessario.</span><span class="sxs-lookup"><span data-stu-id="470d0-118">The sequence of Requests and Responses continues as long as needed.</span></span> <span data-ttu-id="470d0-119">Ad esempio, l'applicazione può chiamare [**EapHostPeerGetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresponseattributes) per richiedere gli attributi EAP disponibili e il peer risponde con [**EapHostPeerSetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetresponseattributes) per restituirli.</span><span class="sxs-lookup"><span data-stu-id="470d0-119">For example, the application can call [**EapHostPeerGetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresponseattributes) to request available EAP attributes, and the peer responds with [**EapHostPeerSetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetresponseattributes) to return them.</span></span>
-   <span data-ttu-id="470d0-120">Dopo una richiesta iniziale, non è possibile inviare una nuova richiesta fino a quando non viene ricevuta una risposta valida.</span><span class="sxs-lookup"><span data-stu-id="470d0-120">After an initial Request, a new Request cannot be sent until a valid Response is received.</span></span>
-   <span data-ttu-id="470d0-121">La conversazione continua fino a quando l'autenticatore non è in grado di autenticare il peer, nel qual caso l'implementazione dell'autenticatore deve trasmettere un errore EAP.</span><span class="sxs-lookup"><span data-stu-id="470d0-121">The conversation continues until the authenticator cannot authenticate the peer, in which case the authenticator implementation must transmit an EAP Failure.</span></span> <span data-ttu-id="470d0-122">Ad esempio, le risposte non accettabili a una o più richieste potrebbero causare la trasmissione di un errore EAP del codice 4.</span><span class="sxs-lookup"><span data-stu-id="470d0-122">For example, unacceptable Responses to one or more Requests would cause the authenticator to transmit a Code 4 EAP Failure.</span></span>
-   <span data-ttu-id="470d0-123">In alternativa, la conversazione di autenticazione può continuare fino a quando l'autenticatore non determina l'esito positivo dell'autenticazione, nel qual caso l'autenticatore deve trasmettere un esito positivo EAP (codice 3).</span><span class="sxs-lookup"><span data-stu-id="470d0-123">Alternatively, the authentication conversation can continue until the authenticator determines that successful authentication has occurred, in which case the authenticator must transmit an EAP Success (Code 3).</span></span>
-   <span data-ttu-id="470d0-124">Se il risultato indica esito positivo o negativo, l'applicazione chiama [**EapHostPeerEndSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerendsession) per terminare la sessione.</span><span class="sxs-lookup"><span data-stu-id="470d0-124">Whether the result indicates success or failure, the application calls [**EapHostPeerEndSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerendsession) to terminate the session.</span></span> <span data-ttu-id="470d0-125">In caso di errore, è possibile tentare di ripetere l'autenticazione aprendo un'altra sessione con EAPHost e fornendo la stessa o una nuova identità.</span><span class="sxs-lookup"><span data-stu-id="470d0-125">In the case of failure, re-authentication can be attempted by opening another session with EAPHost and providing either the same or a new identity.</span></span>

### <a name="leap-authentication-process"></a><span data-ttu-id="470d0-126">Processo di autenticazione LEAP</span><span class="sxs-lookup"><span data-stu-id="470d0-126">LEAP Authentication Process</span></span>

<span data-ttu-id="470d0-127">Il processo di autenticazione LEAP differisce dal normale processo di autenticazione EAPhost, come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="470d0-127">The LEAP authentication process differs from the regular EAPhost authentication process as follows:</span></span>

-   <span data-ttu-id="470d0-128">L'autenticazione EAP viene avviata dal server (Authenticator).</span><span class="sxs-lookup"><span data-stu-id="470d0-128">EAP authentication is initiated by the server (authenticator).</span></span> <span data-ttu-id="470d0-129">LEAP, al contrario, viene avviato dal client (peer).</span><span class="sxs-lookup"><span data-stu-id="470d0-129">LEAP, in contrast, is initiated by the client (peer).</span></span>
    -   <span data-ttu-id="470d0-130">Pertanto, quando si scrive un modulo LEAP è sempre necessario assicurarsi che il pacchetto di richiesta di verifica dal metodo peer e la risposta EAP dal server EAP dispongano sempre dello stesso ID pacchetto del pacchetto EAP Success dal server.</span><span class="sxs-lookup"><span data-stu-id="470d0-130">Therefore, when writing a LEAP module you must always ensure that the Challenge Request packet from the peer method and the EAP Response from the EAP server must always have the same packet ID as that of the EAP Success packet from the server.</span></span>

    <!-- -->

    -   <span data-ttu-id="470d0-131">Al contrario, la richiesta e la risposta EAPHost e i pacchetti di successo hanno in genere tutti ID diversi.</span><span class="sxs-lookup"><span data-stu-id="470d0-131">In contrast, EAPHost Request and Response and Success packets typically all have different IDs.</span></span>
        > [!Note]  
        > <span data-ttu-id="470d0-132">Ogni richiesta EAP dispone di un campo di tipo per indicare gli elementi richiesti.</span><span class="sxs-lookup"><span data-stu-id="470d0-132">Every EAP Request has a Type field to indicate what is being requested.</span></span> <span data-ttu-id="470d0-133">Come per il pacchetto di richiesta, ogni pacchetto di risposta EAP contiene un campo di tipo, che corrisponde al campo tipo della richiesta.</span><span class="sxs-lookup"><span data-stu-id="470d0-133">As with the Request packet, every EAP Response packet contains a Type field, which corresponds to the Type field of the Request.</span></span> <span data-ttu-id="470d0-134">Gli esempi includono i pacchetti di richiesta di identità e di richiesta di verifica.</span><span class="sxs-lookup"><span data-stu-id="470d0-134">Examples include Identity Request and Challenge Request packets.</span></span>

         

-   <span data-ttu-id="470d0-135">In caso di errore con EAPHost, è possibile tentare di ripetere l'autenticazione aprendo un'altra sessione con EAPHost e fornendo la stessa identità o una nuova identità.</span><span class="sxs-lookup"><span data-stu-id="470d0-135">In the case of failure with EAPHost, re-authentication can be attempted by opening another session with EAPHost and providing either the same identity or a new identity.</span></span>

### <a name="leap-authenticator-method-implementation"></a><span data-ttu-id="470d0-136">Implementazione del metodo LEAP Authenticator</span><span class="sxs-lookup"><span data-stu-id="470d0-136">LEAP Authenticator Method Implementation</span></span>

<span data-ttu-id="470d0-137">Quando si sviluppa un metodo LEAP Authenticator, verificare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="470d0-137">When developing a LEAP authenticator method, please ensure the following:</span></span>

-   <span data-ttu-id="470d0-138">I metodi LEAP Authenticator devono restituire il codice dell'azione di [**\_ invio della \_ \_ risposta \_ dell'autenticatore del metodo EAP**](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action) dopo la prima fase di autenticazione (autenticazione peer).</span><span class="sxs-lookup"><span data-stu-id="470d0-138">LEAP authenticator methods must return the [**EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_SEND**](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action) action code after the 1st phase of authentication (peer authentication) is successful.</span></span> <span data-ttu-id="470d0-139">Quindi, quando viene chiamato [**EapMethodAuthenticatorSendPacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsendpacket) , deve restituire un [**EapPacket**](/windows/win32/api/eapmethodtypes/ns-eapmethodtypes-eappacket) valido con il codice EAP [**EapCodeSuccess**](/windows/win32/api/eapmethodtypes/ne-eapmethodtypes-eapcode).</span><span class="sxs-lookup"><span data-stu-id="470d0-139">Then when [**EapMethodAuthenticatorSendPacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsendpacket) is called, it should return a valid [**EapPacket**](/windows/win32/api/eapmethodtypes/ns-eapmethodtypes-eappacket) with an EAP code of [**EapCodeSuccess**](/windows/win32/api/eapmethodtypes/ne-eapmethodtypes-eapcode).</span></span>
-   <span data-ttu-id="470d0-140">I metodi LEAP Authenticator devono restituire il codice dell'azione del [**\_ risultato della \_ \_ risposta \_ dell'autenticatore del metodo EAP**](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action) se la prima fase dell'autenticazione peer ha avuto esito negativo.</span><span class="sxs-lookup"><span data-stu-id="470d0-140">LEAP authenticator methods should return the [**EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_RESULT**](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action) action code if the 1st phase of peer authentication is unsuccessful.</span></span>
-   <span data-ttu-id="470d0-141">I metodi LEAP Authenticator devono restituire il pacchetto di risposta di autenticazione finale con il codice di azione del [**risultato della \_ \_ \_ risposta \_ dell'autenticatore del metodo EAP**](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action) quando viene chiamato [**EapMethodAuthenticatorSendPacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsendpacket) .</span><span class="sxs-lookup"><span data-stu-id="470d0-141">LEAP authenticator methods must return the final authentication response packet with the [**EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_RESULT**](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action) action code when [**EapMethodAuthenticatorSendPacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsendpacket) is called.</span></span> <span data-ttu-id="470d0-142">Quindi, nelle chiamate successive a [**EapMethodAuthenticatorGetResult**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorgetresult) è necessario restituire l' **\_ \_ handle di sessione EAP** per identificare la sessione autenticata.</span><span class="sxs-lookup"><span data-stu-id="470d0-142">Then in subsequent calls to [**EapMethodAuthenticatorGetResult**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorgetresult) the **EAP\_SESSION\_HANDLE** must be returned to identify the authenticated session.</span></span>
-   

### <a name="leap-peer-method-implementation"></a><span data-ttu-id="470d0-143">Implementazione del metodo peer intercalare</span><span class="sxs-lookup"><span data-stu-id="470d0-143">LEAP Peer Method Implementation</span></span>

<span data-ttu-id="470d0-144">Quando si sviluppa un metodo di peer intercalare, verificare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="470d0-144">When developing a LEAP peer method, please ensure the following</span></span>

-   <span data-ttu-id="470d0-145">I metodi del peer intercalare devono restituire il codice dell'azione [**EapPeerMethodResponseActionSend**](/windows/win32/api/eapauthenticatoractiondefine/ne-eapauthenticatoractiondefine-eappeermethodresponseaction) dopo la prima fase di autenticazione (autenticazione peer) riuscita.</span><span class="sxs-lookup"><span data-stu-id="470d0-145">LEAP peer methods should return the [**EapPeerMethodResponseActionSend**](/windows/win32/api/eapauthenticatoractiondefine/ne-eapauthenticatoractiondefine-eappeermethodresponseaction) action code after the 1st phase of authentication (peer authentication) is successful.</span></span>
-   <span data-ttu-id="470d0-146">I metodi del peer intercalare devono restituire il codice dell'azione [**EapPeerMethodResponseActionResult**](/windows/win32/api/eapauthenticatoractiondefine/ne-eapauthenticatoractiondefine-eappeermethodresponseaction) dopo che la seconda fase dell'autenticazione ha avuto esito positivo.</span><span class="sxs-lookup"><span data-stu-id="470d0-146">LEAP peer methods should return the [**EapPeerMethodResponseActionResult**](/windows/win32/api/eapauthenticatoractiondefine/ne-eapauthenticatoractiondefine-eappeermethodresponseaction) action code after the 2nd phase of authentication is successful.</span></span>

## <a name="related-topics"></a><span data-ttu-id="470d0-147">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="470d0-147">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="470d0-148">Sequenza di chiamate EAPHost</span><span class="sxs-lookup"><span data-stu-id="470d0-148">EAPHost Call Sequence</span></span>](about-eaphost-call-sequences.md)
</dt> <dt>

[<span data-ttu-id="470d0-149">Uso di EAPHost</span><span class="sxs-lookup"><span data-stu-id="470d0-149">Using EAPHost</span></span>](using-eap-host.md)
</dt> </dl>

 

 




