---
title: Testo verticale
description: A partire da Windows 8, DirectWrite include una serie di nuove API che consentono di usare il testo verticale nelle app.
ms.assetid: F40A79AE-F7BF-4CAC-9480-1489CD212DA8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0db8788a6be97a55911694942a930e17dc69976a
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "103963127"
---
# <a name="vertical-text"></a><span data-ttu-id="1bf75-103">Testo verticale</span><span class="sxs-lookup"><span data-stu-id="1bf75-103">Vertical Text</span></span>

<span data-ttu-id="1bf75-104">A partire da Windows 8, [DirectWrite](direct-write-portal.md) include una serie di nuove API che consentono di usare il testo verticale nelle app.</span><span class="sxs-lookup"><span data-stu-id="1bf75-104">Starting with the Windows 8, [DirectWrite](direct-write-portal.md) has a number of new APIs that allow you to use vertical text in your apps.</span></span>

## <a name="drawing-vertical-text"></a><span data-ttu-id="1bf75-105">Disegno di testo verticale</span><span class="sxs-lookup"><span data-stu-id="1bf75-105">Drawing vertical text</span></span>

<span data-ttu-id="1bf75-106">È possibile creare testo verticale con Direct2D usando i metodi [**DrawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout) .</span><span class="sxs-lookup"><span data-stu-id="1bf75-106">You can draw vertical text with Direct2D by using the [**DrawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout) methods.</span></span> <span data-ttu-id="1bf75-107">Per estrarre il testo verticalmente, passare [**la \_ direzione di lettura di DWrite dall' \_ \_ alto \_ verso il \_ basso**](/windows/win32/api/dwrite/ne-dwrite-dwrite_reading_direction) al metodo [**IDWriteTextFormat:: SetReadingDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setreadingdirection) e la [**direzione del flusso DWrite da \_ \_ \_ destra \_ a \_ sinistra**](/windows/win32/api/dwrite/ne-dwrite-dwrite_flow_direction) al metodo [**IDWriteTextFormatSetFlowDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setflowdirection) .</span><span class="sxs-lookup"><span data-stu-id="1bf75-107">To draw the text vertically, pass [**DWRITE\_READING\_DIRECTION\_TOP\_TO\_BOTTOM**](/windows/win32/api/dwrite/ne-dwrite-dwrite_reading_direction) to the [**IDWriteTextFormat::SetReadingDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setreadingdirection) method and [**DWRITE\_FLOW\_DIRECTION\_RIGHT\_TO\_LEFT**](/windows/win32/api/dwrite/ne-dwrite-dwrite_flow_direction) to the [**IDWriteTextFormatSetFlowDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setflowdirection) method.</span></span> <span data-ttu-id="1bf75-108">È quindi possibile creare e creare un oggetto [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) verticale.</span><span class="sxs-lookup"><span data-stu-id="1bf75-108">Then you can create and draw a vertical [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) object.</span></span>

## <a name="analyzing-character-orientation"></a><span data-ttu-id="1bf75-109">Analisi dell'orientamento dei caratteri</span><span class="sxs-lookup"><span data-stu-id="1bf75-109">Analyzing character orientation</span></span>

<span data-ttu-id="1bf75-110">Ogni carattere ha un orientamento carattere preferito o la direzione in cui il carattere deve essere orientato in qualsiasi layout direzionale.</span><span class="sxs-lookup"><span data-stu-id="1bf75-110">Every character has a preferred character orientation, or the direction that the character should be oriented in any directional layout.</span></span> <span data-ttu-id="1bf75-111">Nel layout orizzontale tradizionale, ad esempio, il testo latino e il testo cinese sono orientati verticalmente.</span><span class="sxs-lookup"><span data-stu-id="1bf75-111">For example, in traditional horizontal layout, both the Latin text and the Chinese text are oriented vertically.</span></span> <span data-ttu-id="1bf75-112">D'altra parte, in un layout verticale, il testo cinese rimane verticale e il testo latino viene ruotato di 90 gradi.</span><span class="sxs-lookup"><span data-stu-id="1bf75-112">On the other hand, in a vertical layout, the Chinese text remains upright, and the Latin text is rotated 90 degrees.</span></span> <span data-ttu-id="1bf75-113">Questa differenza di orientamento è illustrata nell'esempio riportato di seguito.</span><span class="sxs-lookup"><span data-stu-id="1bf75-113">This difference in orientation is seen in the example here.</span></span>

![immagine del testo in inglese e cinese nei layout orizzontale e verticale.](images/vertical-text.png)

<span data-ttu-id="1bf75-115">Per determinare l'orientamento del testo di cui si dispone, è necessario implementare le interfacce [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) e [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) .</span><span class="sxs-lookup"><span data-stu-id="1bf75-115">To determine the orientation of the text you have, you need to implement the [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) and [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) interfaces.</span></span> <span data-ttu-id="1bf75-116">L'origine e il sink vengono eseguiti nel glifo e consentono di controllare se sono orientati verticalmente o meno.</span><span class="sxs-lookup"><span data-stu-id="1bf75-116">The source and sink take in the glyph runs and let you check if they are oriented vertically or not.</span></span>

<span data-ttu-id="1bf75-117">Dopo aver implementato l'origine e il sink, chiamare il metodo [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) .</span><span class="sxs-lookup"><span data-stu-id="1bf75-117">After you implement your source and sink, you call the [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) method.</span></span> <span data-ttu-id="1bf75-118">Nell'immagine di esempio, questa funzione restituisce 3 esecuzioni: "English", "中国" e "English".</span><span class="sxs-lookup"><span data-stu-id="1bf75-118">In the example image, this function returns 3 runs: "English", "中国", and "English."</span></span>

## <a name="going-from-characters-to-glyphs"></a><span data-ttu-id="1bf75-119">Passare da caratteri a glifi</span><span class="sxs-lookup"><span data-stu-id="1bf75-119">Going from characters to glyphs</span></span>

<span data-ttu-id="1bf75-120">Ora che si sa che l'esecuzione contiene glifi verticali, è necessario ottenere l'accesso a tali glifi.</span><span class="sxs-lookup"><span data-stu-id="1bf75-120">Now that you know the run contains vertical glyphs, you need to get access to those glyphs.</span></span> <span data-ttu-id="1bf75-121">Nell'esempio fino a questo punto, sono presenti 3 esecuzioni: una con glifi verticali e due senza.</span><span class="sxs-lookup"><span data-stu-id="1bf75-121">In the example so far, there are 3 runs: one with vertical glyphs and two without.</span></span> <span data-ttu-id="1bf75-122">Per eseguire la transizione da caratteri a glifi, chiamare [**GetGlyphIndices**](/windows/win32/api/dwrite/nf-dwrite-idwritefontface-getglyphindices).</span><span class="sxs-lookup"><span data-stu-id="1bf75-122">To transition from characters to glyphs, you call [**GetGlyphIndices**](/windows/win32/api/dwrite/nf-dwrite-idwritefontface-getglyphindices).</span></span> <span data-ttu-id="1bf75-123">Questo metodo restituisce gli indici di glifo corrispondenti per i caratteri nell'esempio.</span><span class="sxs-lookup"><span data-stu-id="1bf75-123">This method returns the corresponding glyph indices for the characters in the example.</span></span> <span data-ttu-id="1bf75-124">Poiché il metodo [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) restituisce un'esecuzione con glifi verticali, è necessario chiamare [**GetVerticalGlyphVariants**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefontface1-getverticalglyphvariants), che restituisce gli ID del glifo orientati verticalmente al posto degli ID di glifo correnti.</span><span class="sxs-lookup"><span data-stu-id="1bf75-124">Because the [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) method returns a run with vertical glyphs, you need to call [**GetVerticalGlyphVariants**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefontface1-getverticalglyphvariants), which returns the vertically oriented glyph IDs in place of the current glyph IDs.</span></span>

## <a name="drawing-text-vertically"></a><span data-ttu-id="1bf75-125">Disegno verticale del testo</span><span class="sxs-lookup"><span data-stu-id="1bf75-125">Drawing text vertically</span></span>

<span data-ttu-id="1bf75-126">Infine, è necessario disporre e creare il testo.</span><span class="sxs-lookup"><span data-stu-id="1bf75-126">Finally, you need to lay out and draw the text.</span></span> <span data-ttu-id="1bf75-127">Poiché si sta disegnando il testo verticalmente, è necessario ottenere altre informazioni in modo che il testo latino venga disegnato correttamente.</span><span class="sxs-lookup"><span data-stu-id="1bf75-127">Because you're drawing the text vertically, you need to get some more info so that the Latin text is drawn correctly.</span></span> <span data-ttu-id="1bf75-128">Se si estrae tutto il testo lungo la linea di base centrale, il testo latino sembra fluttuare al centro della riga.</span><span class="sxs-lookup"><span data-stu-id="1bf75-128">If you draw all of the text along the central baseline, the Latin text appears to float in the middle of the line.</span></span> <span data-ttu-id="1bf75-129">Per allineare il testo correttamente, è necessario accedere sia alla baseline centrale che alla linea di base romana.</span><span class="sxs-lookup"><span data-stu-id="1bf75-129">You need access to both the central and Roman baseline to align the text correctly.</span></span> <span data-ttu-id="1bf75-130">Usare il metodo [**IDWriteTextAnalyzer1:: GetBaseline**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getbaseline) per ottenere i valori numerici delle linee di base specificate.</span><span class="sxs-lookup"><span data-stu-id="1bf75-130">Use the [**IDWriteTextAnalyzer1::GetBaseline**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getbaseline) method to get the numerical values of the baselines you specify.</span></span> <span data-ttu-id="1bf75-131">È possibile sottrarre la baseline romana dalla linea di base centrale per ottenere l'offset tra i due.</span><span class="sxs-lookup"><span data-stu-id="1bf75-131">You can subtract the Roman baseline from the central baseline to get the offset between the two.</span></span>

<span data-ttu-id="1bf75-132">Con tutte queste informazioni è possibile creare il testo sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="1bf75-132">With all this info, you can draw the text on the screen.</span></span> <span data-ttu-id="1bf75-133">Chiamare innanzitutto il metodo [**GetGlyphOrientationTransform**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getglyphorientationtransform) con i risultati degli oggetti [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) e [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) .</span><span class="sxs-lookup"><span data-stu-id="1bf75-133">First, call the [**GetGlyphOrientationTransform**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getglyphorientationtransform) method with the results from the [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) and [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) objects.</span></span>

<span data-ttu-id="1bf75-134">Se si usa [Direct2D](rendering-by-using-direct2d.md) è anche necessario impostare la trasformazione globale sulla destinazione di rendering Direct2D per il rendering verticale.</span><span class="sxs-lookup"><span data-stu-id="1bf75-134">If you’re using [Direct2D](rendering-by-using-direct2d.md) you also need to set the world transform on the Direct2D render target for vertical rendering.</span></span>

<span data-ttu-id="1bf75-135">Infine, chiamare [**DrawGlyphRun**](/windows/win32/api/dwrite/nf-dwrite-idwritebitmaprendertarget-drawglyphrun) tre volte, una volta per ogni blocco di testo.</span><span class="sxs-lookup"><span data-stu-id="1bf75-135">Finally, call [**DrawGlyphRun**](/windows/win32/api/dwrite/nf-dwrite-idwritebitmaprendertarget-drawglyphrun) three times, once on each block of text.</span></span> <span data-ttu-id="1bf75-136">Nei due blocchi di testo in inglese, è necessario applicare l'offset calcolato tra le linee di base romane e centrali.</span><span class="sxs-lookup"><span data-stu-id="1bf75-136">On the two blocks of text that are in English, you need to apply the offset that we calculated between the Roman and central baselines.</span></span>

<span data-ttu-id="1bf75-137">A questo punto, il testo nell'app verrà disegnato verticalmente, con l'orientamento corretto per il glifo.</span><span class="sxs-lookup"><span data-stu-id="1bf75-137">Now, the text in your app will be drawn vertically, with the correct glyph orientation.</span></span>

 

 