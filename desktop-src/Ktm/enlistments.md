---
description: Un gestore di risorse viene integrato in una transazione quando inizia a partecipare alla transazione specifica.
ms.assetid: 9c201699-c00b-4efe-9f30-8d4e182de785
title: Integrazioni
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 52820af2a7b280bc4740d0309fb627725e648685
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "104233712"
---
# <a name="enlistments"></a><span data-ttu-id="8eb87-103">Integrazioni</span><span class="sxs-lookup"><span data-stu-id="8eb87-103">Enlistments</span></span>

<span data-ttu-id="8eb87-104">Un gestore di risorse viene integrato in una transazione quando inizia a partecipare alla transazione specifica.</span><span class="sxs-lookup"><span data-stu-id="8eb87-104">A resource manager enlists in a transaction when it begins participation in that particular transaction.</span></span> <span data-ttu-id="8eb87-105">L'integrazione definisce le notifiche accettate dal gestore di risorse.</span><span class="sxs-lookup"><span data-stu-id="8eb87-105">The enlistment defines which notifications the resource manager accepts.</span></span> <span data-ttu-id="8eb87-106">Un gestore di risorse crea un oggetto di integrazione quando si integra in una transazione.</span><span class="sxs-lookup"><span data-stu-id="8eb87-106">A resource manager creates an enlistment object when it enlists in a transaction.</span></span> <span data-ttu-id="8eb87-107">Questo oggetto segnala a KTM che Resource Manager (RM) richiede notifiche sulla transazione specificata.</span><span class="sxs-lookup"><span data-stu-id="8eb87-107">This object signals to KTM that the resource manager (RM) is requesting notifications about the specified transaction.</span></span>

<span data-ttu-id="8eb87-108">RM fornisce una struttura [**di \_ maschera di notifica**](notification-mask.md) che specifica le notifiche richieste.</span><span class="sxs-lookup"><span data-stu-id="8eb87-108">The RM provides a [**NOTIFICATION\_MASK**](notification-mask.md) structure that details which notifications it is requesting.</span></span>

## <a name="enlistment-functions"></a><span data-ttu-id="8eb87-109">Funzioni di integrazione</span><span class="sxs-lookup"><span data-stu-id="8eb87-109">Enlistment Functions</span></span>

<span data-ttu-id="8eb87-110">Le funzioni seguenti vengono usate con gli elenchi.</span><span class="sxs-lookup"><span data-stu-id="8eb87-110">The following functions are used with enlistments.</span></span>



| <span data-ttu-id="8eb87-111">Funzione</span><span class="sxs-lookup"><span data-stu-id="8eb87-111">Function</span></span>                                                                          | <span data-ttu-id="8eb87-112">Descrizione</span><span class="sxs-lookup"><span data-stu-id="8eb87-112">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                             |
|-----------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="8eb87-113">**CommitComplete**</span><span class="sxs-lookup"><span data-stu-id="8eb87-113">**CommitComplete**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-commitcomplete)                                          | <span data-ttu-id="8eb87-114">Indica che un gestore di risorse (RM) ha completato il commit di una transazione richiesta da Transaction Manager (TM).</span><span class="sxs-lookup"><span data-stu-id="8eb87-114">Indicates that a resource manager (RM) has finished committing a transaction that was requested by the transaction manager (TM).</span></span>                                                                                                                                                                                                                                                                        |
| [<span data-ttu-id="8eb87-115">**CreateEnlistment**</span><span class="sxs-lookup"><span data-stu-id="8eb87-115">**CreateEnlistment**</span></span>](/windows/desktop/api/KtmW32/nf-ktmw32-createenlistment)                                      | <span data-ttu-id="8eb87-116">Crea un'integrazione, ne imposta lo stato iniziale e apre un handle per l'elenco con l'accesso specificato.</span><span class="sxs-lookup"><span data-stu-id="8eb87-116">Creates an enlistment, sets its initial state, and opens a handle to the enlistment with the specified access.</span></span>                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="8eb87-117">**GetEnlistmentRecoveryInformation**</span><span class="sxs-lookup"><span data-stu-id="8eb87-117">**GetEnlistmentRecoveryInformation**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-getenlistmentrecoveryinformation) | <span data-ttu-id="8eb87-118">Recupera una struttura opaca dei dati di ripristino da KTM.</span><span class="sxs-lookup"><span data-stu-id="8eb87-118">Retrieves an opaque structure of recovery data from KTM.</span></span> <span data-ttu-id="8eb87-119">Le informazioni di ripristino vengono archiviate in un log per conto di gestione risorse (RM) chiamando la funzione [**SetEnlistmentRecoveryInformation**](/windows/desktop/api/Ktmw32/nf-ktmw32-setenlistmentrecoveryinformation) .</span><span class="sxs-lookup"><span data-stu-id="8eb87-119">Recovery information is stored in a log on behalf of a resource manager (RM) by calling the [**SetEnlistmentRecoveryInformation**](/windows/desktop/api/Ktmw32/nf-ktmw32-setenlistmentrecoveryinformation) function.</span></span> <span data-ttu-id="8eb87-120">In seguito a un errore, RM può utilizzare la funzione [**GetEnlistmentRecoveryInformation**](/windows/desktop/api/Ktmw32/nf-ktmw32-getenlistmentrecoveryinformation) per recuperare le informazioni.</span><span class="sxs-lookup"><span data-stu-id="8eb87-120">After a failure, the RM can use the [**GetEnlistmentRecoveryInformation**](/windows/desktop/api/Ktmw32/nf-ktmw32-getenlistmentrecoveryinformation) function to retrieve the information.</span></span> |
| [<span data-ttu-id="8eb87-121">**OpenEnlistment**</span><span class="sxs-lookup"><span data-stu-id="8eb87-121">**OpenEnlistment**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-openenlistment)                                          | <span data-ttu-id="8eb87-122">Apre un oggetto di integrazione esistente e restituisce un handle per l'integrazione.</span><span class="sxs-lookup"><span data-stu-id="8eb87-122">Opens an existing enlistment object, and returns a handle to the enlistment.</span></span>                                                                                                                                                                                                                                                                                                                            |
| [<span data-ttu-id="8eb87-123">**ReadOnlyEnlistment**</span><span class="sxs-lookup"><span data-stu-id="8eb87-123">**ReadOnlyEnlistment**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-readonlyenlistment)                                  | <span data-ttu-id="8eb87-124">Richiede che l'integrazione specificata venga convertita in un elenco di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="8eb87-124">Requests that the specified enlistment be converted to a read-only enlistment.</span></span> <span data-ttu-id="8eb87-125">Un elenco di sola lettura non può partecipare al risultato della transazione e non viene registrato in modo durevole per il ripristino.</span><span class="sxs-lookup"><span data-stu-id="8eb87-125">A read-only enlistment cannot participate in the outcome of the transaction and is not durably recorded for recovery.</span></span>                                                                                                                                                                                                    |
| [<span data-ttu-id="8eb87-126">**RollbackEnlistment**</span><span class="sxs-lookup"><span data-stu-id="8eb87-126">**RollbackEnlistment**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbackenlistment)                                  | <span data-ttu-id="8eb87-127">Esegue il rollback della transazione specificata associata a un'integrazione.</span><span class="sxs-lookup"><span data-stu-id="8eb87-127">Rolls back the specified transaction that is associated with an enlistment.</span></span> <span data-ttu-id="8eb87-128">Questa funzione non può essere chiamata per l'integrazione di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="8eb87-128">This function cannot be called for read-only enlistments.</span></span>                                                                                                                                                                                                                                                                   |
| [<span data-ttu-id="8eb87-129">**SetEnlistmentRecoveryInformation**</span><span class="sxs-lookup"><span data-stu-id="8eb87-129">**SetEnlistmentRecoveryInformation**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-setenlistmentrecoveryinformation)      | <span data-ttu-id="8eb87-130">Imposta una struttura opaca definita dall'utente dei dati di ripristino da KTM.</span><span class="sxs-lookup"><span data-stu-id="8eb87-130">Sets an opaque, user-defined structure of recovery data from KTM.</span></span> <span data-ttu-id="8eb87-131">Le informazioni di ripristino vengono archiviate in un log per conto di gestione risorse (RM) chiamando [**SetEnlistmentRecoveryInformation**](/windows/desktop/api/Ktmw32/nf-ktmw32-setenlistmentrecoveryinformation).</span><span class="sxs-lookup"><span data-stu-id="8eb87-131">Recovery information is stored in a log on behalf of a resource manager (RM) by calling [**SetEnlistmentRecoveryInformation**](/windows/desktop/api/Ktmw32/nf-ktmw32-setenlistmentrecoveryinformation).</span></span> <span data-ttu-id="8eb87-132">In seguito a un errore, il gestore di risorse può utilizzare [**GetEnlistmentRecoveryInformation**](/windows/desktop/api/Ktmw32/nf-ktmw32-getenlistmentrecoveryinformation) per recuperare le informazioni.</span><span class="sxs-lookup"><span data-stu-id="8eb87-132">After a failure, the RM can use [**GetEnlistmentRecoveryInformation**](/windows/desktop/api/Ktmw32/nf-ktmw32-getenlistmentrecoveryinformation) to retrieve the information.</span></span>                  |
| [<span data-ttu-id="8eb87-133">**SinglePhaseReject**</span><span class="sxs-lookup"><span data-stu-id="8eb87-133">**SinglePhaseReject**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-singlephasereject)                                    | <span data-ttu-id="8eb87-134">Indica che Gestione risorse (RM) sta rifiutando una richiesta a fase singola.</span><span class="sxs-lookup"><span data-stu-id="8eb87-134">Indicates that the resource manager (RM) is refusing a single-phase request.</span></span> <span data-ttu-id="8eb87-135">Quando una gestione transazioni riceve questa chiamata, avvia un commit a due fasi e invia una richiesta di preparazione a tutti i RMs integrati.</span><span class="sxs-lookup"><span data-stu-id="8eb87-135">When a transaction manager (TM) receives this call, it initiates a two-phase commit and sends a prepare request to all enlisted RMs.</span></span>                                                                                                                                                                                       |



 

 

 



