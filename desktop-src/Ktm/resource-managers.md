---
description: Gestione risorse
ms.assetid: c717b731-cf0b-45cb-bbff-695410fcf6ce
title: Gestione risorse
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1b2ea9b1cd834daf3bfbca49bf37d3f2c0956344
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106311131"
---
# <a name="resource-managers"></a><span data-ttu-id="e4a83-103">Gestione risorse</span><span class="sxs-lookup"><span data-stu-id="e4a83-103">Resource Managers</span></span>

<span data-ttu-id="e4a83-104">Un gestore di risorse utilizza il log di gestione transazioni per tenere traccia dello stato della transazione.</span><span class="sxs-lookup"><span data-stu-id="e4a83-104">A resource manager uses the transaction manager log to track the transaction state.</span></span> <span data-ttu-id="e4a83-105">L'azione del gestore di risorse durante l'elaborazione di una transazione è la seguente:</span><span class="sxs-lookup"><span data-stu-id="e4a83-105">The resource manager's action when processing a transaction is as follows:</span></span>

-   <span data-ttu-id="e4a83-106">Il client passa in modo esplicito una transazione a RM.</span><span class="sxs-lookup"><span data-stu-id="e4a83-106">The client passes a transaction to the RM explicitly.</span></span>
-   <span data-ttu-id="e4a83-107">Il RM si integra nella transazione utilizzando [**CreateEnlistment**](/windows/desktop/api/KtmW32/nf-ktmw32-createenlistment).</span><span class="sxs-lookup"><span data-stu-id="e4a83-107">The RM enlists in the transaction using [**CreateEnlistment**](/windows/desktop/api/KtmW32/nf-ktmw32-createenlistment).</span></span>
-   <span data-ttu-id="e4a83-108">L'utente può quindi continuare a eseguire qualsiasi operazione.</span><span class="sxs-lookup"><span data-stu-id="e4a83-108">The user can then proceed to perform any operation.</span></span>
-   <span data-ttu-id="e4a83-109">Quando l'utente chiama CommitTransaction, KTM invia una \_ notifica di preparazione transazione a RM.</span><span class="sxs-lookup"><span data-stu-id="e4a83-109">When the user calls CommitTransaction, KTM sends a PREPARE\_TRANSACTION notification to the RM.</span></span> <span data-ttu-id="e4a83-110">A questo punto, il RM Scarica su disco tutte le modifiche necessarie per eseguire il commit della transazione, ma potrebbe non riuscire.</span><span class="sxs-lookup"><span data-stu-id="e4a83-110">At this point, the RM flushes to disk any changes that would be necessary to commit the transaction, but could fail.</span></span> <span data-ttu-id="e4a83-111">Se queste operazioni hanno esito positivo, il RM segnala che è terminato con l'operazione di preparazione chiamando [**PrepareComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-preparecomplete).</span><span class="sxs-lookup"><span data-stu-id="e4a83-111">If these operations succeed, the RM signals that it is finished with the prepare operation by calling [**PrepareComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-preparecomplete).</span></span> <span data-ttu-id="e4a83-112">Se queste operazioni hanno esito negativo, il RM risponde chiamando [**RollBackEnlistment**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbackenlistment).</span><span class="sxs-lookup"><span data-stu-id="e4a83-112">If these operations fail, the RM responds by calling [**RollBackEnlistment**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbackenlistment).</span></span>
-   <span data-ttu-id="e4a83-113">Resource Manager riceve una notifica di preparazione.</span><span class="sxs-lookup"><span data-stu-id="e4a83-113">The resource manager receives a prepare notification.</span></span>
-   <span data-ttu-id="e4a83-114">Resource Manager Scarica tutti i dati associati alla transazione nel rispettivo file di log di log Services comune.</span><span class="sxs-lookup"><span data-stu-id="e4a83-114">The resource manager flushes any data associated with the transaction to its Common Log Services log file.</span></span>
-   <span data-ttu-id="e4a83-115">Resource Manager chiama la funzione [**PrepareComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-preparecomplete) e attende di ricevere il risultato della transazione da KTM.</span><span class="sxs-lookup"><span data-stu-id="e4a83-115">The resource manager calls the [**PrepareComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-preparecomplete) function and awaits to receive the transaction's outcome from the KTM.</span></span>
-   <span data-ttu-id="e4a83-116">A seconda del risultato della transazione, gestione risorse riceve un evento di notifica di commit o di rollback.</span><span class="sxs-lookup"><span data-stu-id="e4a83-116">Depending on the outcome of the transaction, the resource manager receives a commit or rollback notification event.</span></span> <span data-ttu-id="e4a83-117">Se il gestore delle risorse riceve una notifica di commit, rende permanenti le modifiche e informa la KTM chiamando la funzione [**CommitComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-commitcomplete) .</span><span class="sxs-lookup"><span data-stu-id="e4a83-117">If the resource manager receives a commit notification, it makes the changes permanent and informs the KTM by calling the [**CommitComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-commitcomplete) function.</span></span> <span data-ttu-id="e4a83-118">Se il gestore delle risorse riceve una notifica di rollback, rimuove tutte le modifiche e ripristina lo stato esistente prima di una delle modifiche transazionali e informa la KTM chiamando [**RollbackComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbackcomplete).</span><span class="sxs-lookup"><span data-stu-id="e4a83-118">If the resource manager receives a rollback notification, it discards all changes and reverts to the state that existed before any of the transacted changes and informs the KTM by calling [**RollbackComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbackcomplete).</span></span>

## <a name="resource-manager-functions"></a><span data-ttu-id="e4a83-119">Funzioni Gestione risorse</span><span class="sxs-lookup"><span data-stu-id="e4a83-119">Resource Manager Functions</span></span>

<span data-ttu-id="e4a83-120">Le funzioni seguenti vengono usate con i gestori di risorse.</span><span class="sxs-lookup"><span data-stu-id="e4a83-120">The following functions are used with resource managers.</span></span>



| <span data-ttu-id="e4a83-121">Funzione</span><span class="sxs-lookup"><span data-stu-id="e4a83-121">Function</span></span>                                                                           | <span data-ttu-id="e4a83-122">Descrizione</span><span class="sxs-lookup"><span data-stu-id="e4a83-122">Description</span></span>                                                                                                                                                                      |
|------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="e4a83-123">**CreateResourceManager**</span><span class="sxs-lookup"><span data-stu-id="e4a83-123">**CreateResourceManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-createresourcemanager)                             | <span data-ttu-id="e4a83-124">Consente di creare un nuovo oggetto di Resource Manager (RM) e di associare RM a una gestione transazioni (TM).</span><span class="sxs-lookup"><span data-stu-id="e4a83-124">Creates a new resource manager (RM) object, and associates the RM with a transaction manager (TM).</span></span>                                                                               |
| [<span data-ttu-id="e4a83-125">**GetNotificationResourceManager**</span><span class="sxs-lookup"><span data-stu-id="e4a83-125">**GetNotificationResourceManager**</span></span>](/windows/desktop/api/KtmW32/nf-ktmw32-getnotificationresourcemanager)           | <span data-ttu-id="e4a83-126">Richiede e riceve una notifica per Resource Manager (RM).</span><span class="sxs-lookup"><span data-stu-id="e4a83-126">Requests and receives a notification for a resource manager (RM).</span></span> <span data-ttu-id="e4a83-127">Questa funzione viene utilizzata dal registro RM per ricevere notifiche quando lo stato di una transazione viene modificato.</span><span class="sxs-lookup"><span data-stu-id="e4a83-127">This function is used by the RM register to receive notifications when a transaction changes state.</span></span>            |
| [<span data-ttu-id="e4a83-128">**GetNotificationResourceManagerAsync**</span><span class="sxs-lookup"><span data-stu-id="e4a83-128">**GetNotificationResourceManagerAsync**</span></span>](/windows/desktop/api/KtmW32/nf-ktmw32-getnotificationresourcemanagerasync) | <span data-ttu-id="e4a83-129">Richiede e riceve una notifica asincrona per un gestore di risorse (RM).</span><span class="sxs-lookup"><span data-stu-id="e4a83-129">Requests and receives asynchronous notification for a resource manager (RM).</span></span> <span data-ttu-id="e4a83-130">Questa funzione viene utilizzata dal registro RM per ricevere notifiche quando lo stato di una transazione viene modificato.</span><span class="sxs-lookup"><span data-stu-id="e4a83-130">This function is used by the RM register to receive notifications when a transaction changes state.</span></span> |
| [<span data-ttu-id="e4a83-131">**OpenResourceManager**</span><span class="sxs-lookup"><span data-stu-id="e4a83-131">**OpenResourceManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-openresourcemanager)                                 | <span data-ttu-id="e4a83-132">Apre un gestore di risorse esistente (RM).</span><span class="sxs-lookup"><span data-stu-id="e4a83-132">Opens an existing resource manager (RM).</span></span>                                                                                                                                         |
| [<span data-ttu-id="e4a83-133">**PrepareComplete**</span><span class="sxs-lookup"><span data-stu-id="e4a83-133">**PrepareComplete**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-preparecomplete)                                         | <span data-ttu-id="e4a83-134">Indica che Gestione risorse ha completato tutte le operazioni di elaborazione necessarie per garantire l'esito positivo di un'operazione di commit o di interruzione per la transazione specificata.</span><span class="sxs-lookup"><span data-stu-id="e4a83-134">Indicates that the resource manager (RM) has completed all processing necessary to guarantee that a commit or abort operation will succeed for the specified transaction.</span></span>        |
| [<span data-ttu-id="e4a83-135">**PrePrepareComplete**</span><span class="sxs-lookup"><span data-stu-id="e4a83-135">**PrePrepareComplete**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-prepreparecomplete)                                   | <span data-ttu-id="e4a83-136">Segnala che questo gestore di risorse ha completato il lavoro di prepreparazione, in modo che gli altri gestori di risorse possano ora iniziare le operazioni di preparazione.</span><span class="sxs-lookup"><span data-stu-id="e4a83-136">Signals that this resource manager has completed its preprepare work, so that other resource managers can now begin their prepare operations.</span></span>                                    |
| [<span data-ttu-id="e4a83-137">**SetResourceManagerCompletionPort**</span><span class="sxs-lookup"><span data-stu-id="e4a83-137">**SetResourceManagerCompletionPort**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-setresourcemanagercompletionport)       | <span data-ttu-id="e4a83-138">Associa la porta di completamento di I/O specificata al gestore di risorse specificato (RM).</span><span class="sxs-lookup"><span data-stu-id="e4a83-138">Associates the specified I/O completion port with the specified resource manager (RM).</span></span> <span data-ttu-id="e4a83-139">Questa porta riceve tutte le notifiche per RM.</span><span class="sxs-lookup"><span data-stu-id="e4a83-139">This port receives all notifications for the RM.</span></span>                                          |



 

 

 



