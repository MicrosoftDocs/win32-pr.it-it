---
description: Una gestione transazioni (TM) è un'istanza di un log. In KTM gli oggetti TM specificano il log e alcune delle funzionalità della TM. In un nodo specifico sono in genere presenti molti oggetti TM. I gestori di risorse (RMs) devono essere associati a una specifica TM.
ms.assetid: 8d43977a-84cf-4109-b7db-f9c94a226c5d
title: Gestori transazioni
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 313215816642201c75ae5f0facae3bf98799c8d1
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106311127"
---
# <a name="transaction-managers"></a><span data-ttu-id="01770-106">Gestori transazioni</span><span class="sxs-lookup"><span data-stu-id="01770-106">Transaction Managers</span></span>

<span data-ttu-id="01770-107">Una gestione transazioni (TM) è un'istanza di un log.</span><span class="sxs-lookup"><span data-stu-id="01770-107">A transaction manager (TM) is an instance of a log.</span></span> <span data-ttu-id="01770-108">In KTM gli oggetti TM specificano il log e alcune delle funzionalità della TM.</span><span class="sxs-lookup"><span data-stu-id="01770-108">In KTM, the TM objects specify the log and some of the functionality of the TM.</span></span> <span data-ttu-id="01770-109">In un nodo specifico sono in genere presenti molti oggetti TM.</span><span class="sxs-lookup"><span data-stu-id="01770-109">There are typically many TM objects on a particular node.</span></span> <span data-ttu-id="01770-110">I gestori di risorse (RMs) devono essere associati a una specifica TM.</span><span class="sxs-lookup"><span data-stu-id="01770-110">Resource managers (RMs) must be associated with a specific TM.</span></span> <span data-ttu-id="01770-111">Sono disponibili tre tipi di TMs:</span><span class="sxs-lookup"><span data-stu-id="01770-111">There are three types of TMs:</span></span>

-   <span data-ttu-id="01770-112">Una TM volatile, che non ha log.</span><span class="sxs-lookup"><span data-stu-id="01770-112">A volatile TM, which has no log.</span></span>
-   <span data-ttu-id="01770-113">Un TM regolare, che ha un log e viene usato per coordinare le transazioni di uno o più RMs.</span><span class="sxs-lookup"><span data-stu-id="01770-113">A regular TM, which has a log and is used to coordinate the transactions of one or more RMs.</span></span>
-   <span data-ttu-id="01770-114">Una gestione transazioni superiore.</span><span class="sxs-lookup"><span data-stu-id="01770-114">A superior transaction manager.</span></span>

## <a name="volatile-transaction-managers"></a><span data-ttu-id="01770-115">Gestori transazioni volatili</span><span class="sxs-lookup"><span data-stu-id="01770-115">Volatile Transaction Managers</span></span>

<span data-ttu-id="01770-116">Una TM volatile è una TM per la sola lettura o per RMs volatile.</span><span class="sxs-lookup"><span data-stu-id="01770-116">A volatile TM is a TM for read-only or volatile RMs.</span></span> <span data-ttu-id="01770-117">Non dispone di un log e non rende persistente lo stato delle transazioni tra i riavvii del sistema.</span><span class="sxs-lookup"><span data-stu-id="01770-117">It does not have a log and does not persist the state of transactions across system restarts.</span></span>

## <a name="transaction-managers"></a><span data-ttu-id="01770-118">Gestori transazioni</span><span class="sxs-lookup"><span data-stu-id="01770-118">Transaction Managers</span></span>

<span data-ttu-id="01770-119">Le TMs includono un log, uno o più RMs durevole o volatile o entrambi.</span><span class="sxs-lookup"><span data-stu-id="01770-119">TMs have a log, one or more durable or volatile RMs, or both.</span></span> <span data-ttu-id="01770-120">Il TM renderà permanente lo stato di una transazione tra i riavvii del sistema finché le transazioni non vengono completate.</span><span class="sxs-lookup"><span data-stu-id="01770-120">The TM will persist the state of a transaction across system restarts until the transactions are completed.</span></span> <span data-ttu-id="01770-121">Viene usato un modello presunto di interruzione, quindi le transazioni che erano attive ma non preparate quando l'oggetto TM viene arrestato viene eseguito il rollback.</span><span class="sxs-lookup"><span data-stu-id="01770-121">A presumed-abort model is used, so transactions which were active but not prepared when the TM object is shut down are rolled back.</span></span> <span data-ttu-id="01770-122">Quando si apre una TM per la prima volta, è necessario recuperare la TM chiamando la funzione [**RecoverTransactionManager**](/windows/desktop/api/Ktmw32/nf-ktmw32-recovertransactionmanager) .</span><span class="sxs-lookup"><span data-stu-id="01770-122">When you open a TM for the first time, you must recover the TM by calling the [**RecoverTransactionManager**](/windows/desktop/api/Ktmw32/nf-ktmw32-recovertransactionmanager) function.</span></span>

## <a name="superior-transaction-managers"></a><span data-ttu-id="01770-123">Gestori transazioni superiori</span><span class="sxs-lookup"><span data-stu-id="01770-123">Superior Transaction Managers</span></span>

<span data-ttu-id="01770-124">Una TM superiore è una TM per le altre TM.</span><span class="sxs-lookup"><span data-stu-id="01770-124">A superior TM is a TM for other TMs.</span></span> <span data-ttu-id="01770-125">Coordina le transazioni.</span><span class="sxs-lookup"><span data-stu-id="01770-125">It coordinates transactions.</span></span> <span data-ttu-id="01770-126">Genera inoltre notifiche per la **\_ \_ preparazione della notifica di transazione** a gestione transazioni kernel.</span><span class="sxs-lookup"><span data-stu-id="01770-126">It also issues **TRANSACTION\_NOTIFY\_PREPARE** notifications to the Kernel Transaction Manager (KTM).</span></span> <span data-ttu-id="01770-127">Un esempio di TM superiore è Microsoft Distributed Transaction Coordinator (DTC).</span><span class="sxs-lookup"><span data-stu-id="01770-127">An example of a superior TM is the Microsoft Distributed Transaction Coordinator (DTC).</span></span> <span data-ttu-id="01770-128">Questa possibilità viene fornita con una responsabilità aggiuntiva in fase di ripristino.</span><span class="sxs-lookup"><span data-stu-id="01770-128">This ability comes with an added recovery-time responsibility.</span></span> <span data-ttu-id="01770-129">Durante il ripristino, RM deve prima chiamare la funzione [**OpenEnlistment**](/windows/desktop/api/Ktmw32/nf-ktmw32-openenlistment) per riaprire l'integrazione.</span><span class="sxs-lookup"><span data-stu-id="01770-129">During recovery, the RM must first call the [**OpenEnlistment**](/windows/desktop/api/Ktmw32/nf-ktmw32-openenlistment) function to re-open the enlistment.</span></span> <span data-ttu-id="01770-130">Deve inoltre recapitare o recapitare il risultato della transazione se è stato eseguito il commit della transazione. è possibile recapitare un risultato chiamando la funzione [**CommitTransaction**](/windows/desktop/api/Ktmw32/nf-ktmw32-committransaction) o [**RollbackTransaction**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbacktransaction) .</span><span class="sxs-lookup"><span data-stu-id="01770-130">It must also deliver (or re-deliver) the transaction's outcome if the transaction was committed; it is free to deliver an outcome by calling either the [**CommitTransaction**](/windows/desktop/api/Ktmw32/nf-ktmw32-committransaction) function or the [**RollbackTransaction**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbacktransaction) function.</span></span> <span data-ttu-id="01770-131">Questo obbligo non termina fino a quando non viene ricevuto un evento di notifica del commit della transazione di notifica **\_ \_ \_ completato** o di notifica di **transazione \_ \_ \_** . Se una TM superiore non riesce a eseguire queste operazioni al momento del ripristino, la KTM eliminerà tutte le transazioni che non hanno ricevuto risultati al termine della fase di recupero.</span><span class="sxs-lookup"><span data-stu-id="01770-131">This obligation does not end until it has received an associated **TRANSACTION\_NOTIFY\_COMMIT\_COMPLETE** or **TRANSACTION\_NOTIFY\_ROLLBACK\_COMPLETE** notification event.If a superior TM fails to perform these operations at recovery time, the KTM will clean up any transactions that have not received outcomes by the end of the recovery phase.</span></span> <span data-ttu-id="01770-132">Tuttavia, ciò può comportare risultati di transazione incoerenti.</span><span class="sxs-lookup"><span data-stu-id="01770-132">However, this can result in inconsistent transaction outcomes.</span></span>

## <a name="transaction-manager-functions"></a><span data-ttu-id="01770-133">Funzioni di gestione transazioni</span><span class="sxs-lookup"><span data-stu-id="01770-133">Transaction Manager Functions</span></span>

<span data-ttu-id="01770-134">Con i gestori delle transazioni vengono utilizzate le funzioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="01770-134">The following functions are used with transaction managers.</span></span>



| <span data-ttu-id="01770-135">Funzione</span><span class="sxs-lookup"><span data-stu-id="01770-135">Function</span></span>                                                                            | <span data-ttu-id="01770-136">Descrizione</span><span class="sxs-lookup"><span data-stu-id="01770-136">Description</span></span>                                                                                    |
|-------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="01770-137">**CreateTransactionManager**</span><span class="sxs-lookup"><span data-stu-id="01770-137">**CreateTransactionManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-createtransactionmanager)                        | <span data-ttu-id="01770-138">Crea un nuovo oggetto di gestione transazioni (TM) e restituisce un handle con l'accesso specificato.</span><span class="sxs-lookup"><span data-stu-id="01770-138">Creates a new transaction manager (TM) object and returns a handle with the specified access.</span></span>  |
| [<span data-ttu-id="01770-139">**GetCurrentClockTransactionManager**</span><span class="sxs-lookup"><span data-stu-id="01770-139">**GetCurrentClockTransactionManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-getcurrentclocktransactionmanager) | <span data-ttu-id="01770-140">Ottiene un valore di clock virtuale da una gestione transazioni.</span><span class="sxs-lookup"><span data-stu-id="01770-140">Obtains a virtual clock value from a transaction manager.</span></span>                                      |
| [<span data-ttu-id="01770-141">**GetTransactionManagerId**</span><span class="sxs-lookup"><span data-stu-id="01770-141">**GetTransactionManagerId**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-gettransactionmanagerid)                          | <span data-ttu-id="01770-142">Ottiene un identificatore per la gestione transazioni specificata.</span><span class="sxs-lookup"><span data-stu-id="01770-142">Obtains an identifier for the specified transaction manager.</span></span>                                   |
| [<span data-ttu-id="01770-143">**OpenTransactionManager**</span><span class="sxs-lookup"><span data-stu-id="01770-143">**OpenTransactionManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-opentransactionmanager)                            | <span data-ttu-id="01770-144">Apre una gestione transazioni esistente.</span><span class="sxs-lookup"><span data-stu-id="01770-144">Opens an existing transaction manager.</span></span>                                                         |
| [<span data-ttu-id="01770-145">**RecoverTransactionManager**</span><span class="sxs-lookup"><span data-stu-id="01770-145">**RecoverTransactionManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-recovertransactionmanager)                      | <span data-ttu-id="01770-146">Recupera lo stato di una gestione transazioni dal relativo file di log.</span><span class="sxs-lookup"><span data-stu-id="01770-146">Recovers a transaction manager's state from its log file.</span></span>                                      |
| [<span data-ttu-id="01770-147">**RollforwardTransactionManager**</span><span class="sxs-lookup"><span data-stu-id="01770-147">**RollforwardTransactionManager**</span></span>](/windows/desktop/api/KtmW32/nf-ktmw32-rollforwardtransactionmanager)              | <span data-ttu-id="01770-148">Recupera lo stato di una gestione transazioni dal relativo file di log al valore di clock virtuale specificato.</span><span class="sxs-lookup"><span data-stu-id="01770-148">Recovers a transaction manager's state from its log file to the specified virtual clock value.</span></span> |



 

 

 



