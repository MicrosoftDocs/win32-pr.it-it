---
description: Illustra le chiamate necessarie per compilare un certificato.
ms.assetid: 74154b3b-75fc-412f-835c-1a6f54e688c6
title: Compilazione di un certificato
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b8f237fd729499aa5153f12f68657e2ce227da7b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103885442"
---
# <a name="building-a-certificate"></a><span data-ttu-id="de522-103">Compilazione di un certificato</span><span class="sxs-lookup"><span data-stu-id="de522-103">Building a Certificate</span></span>

<span data-ttu-id="de522-104">L'ordine delle chiamate nella compilazione di un certificato è il seguente:</span><span class="sxs-lookup"><span data-stu-id="de522-104">The order of calls in building a certificate is as follows:</span></span>

1.  <span data-ttu-id="de522-105">L' [*autorità di certificazione*](../secgloss/c-gly.md) (CA) Inizializza i moduli tramite le chiamate a [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) e [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) (si verifica una sola volta durante l'inizializzazione del server).</span><span class="sxs-lookup"><span data-stu-id="de522-105">[*Certification authority*](../secgloss/c-gly.md) (CA) initializes modules through calls to [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) and [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) (happens once on server initialization).</span></span> <span data-ttu-id="de522-106">La CA Inizializza i criteri e i moduli di uscita chiamando [**ICertPolicy2:: Initialize**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-initialize) e [**ICertExit:: Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize).</span><span class="sxs-lookup"><span data-stu-id="de522-106">The CA will initialize the policy and exit modules by calling [**ICertPolicy2::Initialize**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-initialize) and [**ICertExit::Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize).</span></span>
2.  <span data-ttu-id="de522-107">L'intermediario chiama la CA tramite [**ICertConfig**](/windows/desktop/api/Certcli/nn-certcli-icertconfig) (si verifica una volta per inizializzazione intermedia).</span><span class="sxs-lookup"><span data-stu-id="de522-107">Intermediary calls the CA through [**ICertConfig**](/windows/desktop/api/Certcli/nn-certcli-icertconfig) (happens once per intermediary initialization).</span></span> <span data-ttu-id="de522-108">L'intermediario trova la stringa di configurazione necessaria chiamando [**ICertConfig:: GetConfig**](/windows/desktop/api/Certcli/nf-certcli-icertconfig-getconfig).</span><span class="sxs-lookup"><span data-stu-id="de522-108">The intermediary finds the needed configuration string by calling [**ICertConfig::GetConfig**](/windows/desktop/api/Certcli/nf-certcli-icertconfig-getconfig).</span></span>
3.  <span data-ttu-id="de522-109">Il client chiama l'intermediario attraverso un'interfaccia specifica per l'intermediario (si verifica una volta per ogni richiesta).</span><span class="sxs-lookup"><span data-stu-id="de522-109">Client calls the intermediary through an interface specific to the intermediary (happens once per request).</span></span> <span data-ttu-id="de522-110">Il client invia una [*richiesta di certificato*](../secgloss/c-gly.md) all'intermediario.</span><span class="sxs-lookup"><span data-stu-id="de522-110">The client sends a [*certificate request*](../secgloss/c-gly.md) to the intermediary.</span></span> <span data-ttu-id="de522-111">Questo può essere, ad esempio, Microsoft Internet Explorer che invia una richiesta tramite il [controllo di registrazione certificati](certificate-enrollment-control.md) a Microsoft Internet Information Services.</span><span class="sxs-lookup"><span data-stu-id="de522-111">This can be, for example, Microsoft Internet Explorer sending a request through [Certificate Enrollment Control](certificate-enrollment-control.md) to Microsoft Internet Information Services.</span></span>
4.  <span data-ttu-id="de522-112">Intermediario per CA tramite [**ICertRequest**](/windows/desktop/api/Certcli/nn-certcli-icertrequest) (si verifica una volta per ogni richiesta).</span><span class="sxs-lookup"><span data-stu-id="de522-112">Intermediary to CA through [**ICertRequest**](/windows/desktop/api/Certcli/nn-certcli-icertrequest) (happens once per request).</span></span> <span data-ttu-id="de522-113">L'intermediario Invia la richiesta di certificato alla CA tramite [**ICertRequest:: Submit**](/windows/desktop/api/Certcli/nf-certcli-icertrequest-submit).</span><span class="sxs-lookup"><span data-stu-id="de522-113">The intermediary sends the certificate request to the CA through [**ICertRequest::Submit**](/windows/desktop/api/Certcli/nf-certcli-icertrequest-submit).</span></span> <span data-ttu-id="de522-114">Nel caso di Internet Information Services, è possibile eseguire questa operazione tramite Active Server script di pagine.</span><span class="sxs-lookup"><span data-stu-id="de522-114">In the case of Internet Information Services, this could be done through Active Server Pages scripts.</span></span>
5.  <span data-ttu-id="de522-115">La CA chiama il modulo criteri tramite l'interfaccia [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) (si verifica una volta per ogni richiesta).</span><span class="sxs-lookup"><span data-stu-id="de522-115">The CA calls the Policy Module through the [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) interface (happens once per request).</span></span> <span data-ttu-id="de522-116">La CA notifica al modulo criteri che è arrivata una richiesta chiamando [**ICertPolicy:: VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest).</span><span class="sxs-lookup"><span data-stu-id="de522-116">The CA notifies the policy module that a request has arrived by calling [**ICertPolicy::VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest).</span></span> <span data-ttu-id="de522-117">Il modulo criteri può esaminare la richiesta e modificare il certificato chiamando i metodi dell'interfaccia [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) .</span><span class="sxs-lookup"><span data-stu-id="de522-117">The policy module can examine the request and change the certificate by calling methods of the [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) interface.</span></span> <span data-ttu-id="de522-118">Il modulo criteri può quindi indicare che la richiesta è OK (in tal caso, il certificato è compilato a questo punto), la richiesta deve essere negata o la richiesta deve essere sospesa.</span><span class="sxs-lookup"><span data-stu-id="de522-118">The policy module can then indicate that the request is OK (if so, the certificate is built at this point), the request is to be denied, or the request should be suspended.</span></span>
6.  <span data-ttu-id="de522-119">Opzionale L'amministratore chiama la CA tramite l'interfaccia [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) .</span><span class="sxs-lookup"><span data-stu-id="de522-119">(Optional) Administrator calls the CA through the [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) interface.</span></span> <span data-ttu-id="de522-120">Se la richiesta viene sospesa, l'amministratore può inviare nuovamente o rifiutare la richiesta oppure modificare gli attributi e le estensioni della richiesta.</span><span class="sxs-lookup"><span data-stu-id="de522-120">If the request is suspended, the administrator can resubmit or deny the request, or modify request attributes and extensions.</span></span> <span data-ttu-id="de522-121">Si noti che se la richiesta viene inviata nuovamente, il modulo criteri avrà un'altra opportunità per elaborare la richiesta (in seguito a una chiamata a [**ICertPolicy:: VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest)).</span><span class="sxs-lookup"><span data-stu-id="de522-121">Note that if the request is resubmitted, the Policy Module will have another opportunity to process the request (as a result of a call to [**ICertPolicy::VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest)).</span></span> <span data-ttu-id="de522-122">L'attività di invio o negazione della richiesta può essere eseguita tramite lo snap-in MMC dell'autorità di certificazione o un'altra applicazione che utilizza **ICertAdmin**.</span><span class="sxs-lookup"><span data-stu-id="de522-122">The task of resubmitting or denying the request can be performed by means of the Certification Authority MMC snap-in, or another application that uses **ICertAdmin**.</span></span>
7.  <span data-ttu-id="de522-123">La CA chiama il modulo Exit tramite l'interfaccia [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) .</span><span class="sxs-lookup"><span data-stu-id="de522-123">The CA calls the exit module through the [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) interface.</span></span> <span data-ttu-id="de522-124">Se il modulo di uscita ha indicato (quando è stato chiamato [**ICertExit:: Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize) , nel passaggio 1) che è interessato a visualizzare i certificati rilasciati o le richieste mantenute in sospeso, la CA chiamerà [**ICertExit:: Notify**](/windows/desktop/api/Certexit/nf-certexit-icertexit-notify).</span><span class="sxs-lookup"><span data-stu-id="de522-124">If the exit module has indicated (when [**ICertExit::Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize) was called, in step 1) that it is interested in seeing certificates issued or requests held pending, the CA will call [**ICertExit::Notify**](/windows/desktop/api/Certexit/nf-certexit-icertexit-notify).</span></span>
8.  <span data-ttu-id="de522-125">Il modulo exit chiama la CA tramite l'interfaccia [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) .</span><span class="sxs-lookup"><span data-stu-id="de522-125">The exit module calls the CA through the [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) interface.</span></span> <span data-ttu-id="de522-126">Il modulo Exit può esaminare la richiesta e il nuovo certificato chiamando i metodi di **ICertServerExit**.</span><span class="sxs-lookup"><span data-stu-id="de522-126">The exit module can examine the request and the new certificate by calling methods of **ICertServerExit**.</span></span>

 

 
