---
description: Servizi certificati supporta il rinnovo di un'autorità di certificazione (CA).
ms.assetid: b6c76642-9a23-471e-af08-58e91d778f09
title: Rinnovo dell'autorità di certificazione
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: de57cd16ae6fc4c90bfeea411a06efcb14d028b7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103966962"
---
# <a name="certification-authority-renewal"></a><span data-ttu-id="8c70c-103">Rinnovo dell'autorità di certificazione</span><span class="sxs-lookup"><span data-stu-id="8c70c-103">Certification Authority Renewal</span></span>

<span data-ttu-id="8c70c-104">[*Servizi certificati*](../secgloss/c-gly.md) supporta il rinnovo di un' [*autorità di certificazione*](../secgloss/c-gly.md) (CA).</span><span class="sxs-lookup"><span data-stu-id="8c70c-104">[*Certificate Services*](../secgloss/c-gly.md) supports the renewal of a [*certification authority*](../secgloss/c-gly.md) (CA).</span></span> <span data-ttu-id="8c70c-105">Il rinnovo è l'emissione di un nuovo certificato per la CA per estendere la durata della CA oltre la data di fine del certificato originale.</span><span class="sxs-lookup"><span data-stu-id="8c70c-105">Renewal is the issuing of a new certificate for the CA to extend the CA's life beyond the end date of its original certificate.</span></span> <span data-ttu-id="8c70c-106">È possibile rinnovare una CA come attività nello snap-in MMC dell'autorità di certificazione o utilizzando lo strumento Certutil.exe (con il comando **-renewCert** ).</span><span class="sxs-lookup"><span data-stu-id="8c70c-106">You can renew a CA as a task within the Certificate Authority MMC snap-in or by using the Certutil.exe tool (with the **-renewCert** command).</span></span>

<span data-ttu-id="8c70c-107">Ogni rinnovo restituisce un nuovo certificato CA; Tuttavia, l'amministratore può generare una nuova coppia di chiavi pubblica/privata oppure riutilizzare la coppia di chiavi pubblica/privata esistente per il certificato della CA.</span><span class="sxs-lookup"><span data-stu-id="8c70c-107">Each renewal results in a new CA certificate; however, the administrator can either generate a new public/private key pair or reuse the existing public/private key pair for the CA certificate.</span></span> <span data-ttu-id="8c70c-108">Per coerenza e integrità, i certificati della CA e gli [*elenchi di revoche di certificati*](../secgloss/c-gly.md) (CRL) emessi dalla CA prima del rinnovo saranno disponibili dopo che l'autorità di certificazione è stata rinnovata.</span><span class="sxs-lookup"><span data-stu-id="8c70c-108">For consistency and integrity, CA certificates and [*certificate revocation lists*](../secgloss/c-gly.md) (CRL) issued by the CA before its renewal will be available after the CA has been renewed.</span></span> <span data-ttu-id="8c70c-109">Per renderle disponibili, Servizi certificati mantiene un indice di certificati, CRL e chiavi della CA.</span><span class="sxs-lookup"><span data-stu-id="8c70c-109">To make these available, Certificate Services maintains an index of CA certificates, CRLs, and keys.</span></span>

<span data-ttu-id="8c70c-110">Gli indici e i nomi dei suffissi dei certificati della CA e dei CRL durante le varie operazioni di rinnovo della CA sono i seguenti.</span><span class="sxs-lookup"><span data-stu-id="8c70c-110">The indexes and suffix names of CA certificates and CRLs during various CA renewal operations are as follows.</span></span>



| <span data-ttu-id="8c70c-111">Operazione</span><span class="sxs-lookup"><span data-stu-id="8c70c-111">Operation</span></span>                | <span data-ttu-id="8c70c-112">Indice certificato CA</span><span class="sxs-lookup"><span data-stu-id="8c70c-112">CA certificate index</span></span> | <span data-ttu-id="8c70c-113">Suffisso del nome file del certificato CA</span><span class="sxs-lookup"><span data-stu-id="8c70c-113">CA certificate file name suffix</span></span> | <span data-ttu-id="8c70c-114">CRL e indice chiave</span><span class="sxs-lookup"><span data-stu-id="8c70c-114">CRL and key index</span></span> | <span data-ttu-id="8c70c-115">Suffisso CRL e nome contenitore di chiavi</span><span class="sxs-lookup"><span data-stu-id="8c70c-115">CRL and key container name suffix</span></span> |
|--------------------------|----------------------|---------------------------------|-------------------|-----------------------------------|
| <span data-ttu-id="8c70c-116">Installazione della CA originale</span><span class="sxs-lookup"><span data-stu-id="8c70c-116">Original CA installation</span></span> | <span data-ttu-id="8c70c-117">0</span><span class="sxs-lookup"><span data-stu-id="8c70c-117">0</span></span>                    | <span data-ttu-id="8c70c-118">""</span><span class="sxs-lookup"><span data-stu-id="8c70c-118">""</span></span>                              | <span data-ttu-id="8c70c-119">0</span><span class="sxs-lookup"><span data-stu-id="8c70c-119">0</span></span>                 | <span data-ttu-id="8c70c-120">""</span><span class="sxs-lookup"><span data-stu-id="8c70c-120">""</span></span>                                |
| <span data-ttu-id="8c70c-121">Rinnovo con nuova chiave</span><span class="sxs-lookup"><span data-stu-id="8c70c-121">Renewal with new key</span></span>     | <span data-ttu-id="8c70c-122">1</span><span class="sxs-lookup"><span data-stu-id="8c70c-122">1</span></span>                    | <span data-ttu-id="8c70c-123">"(1)"</span><span class="sxs-lookup"><span data-stu-id="8c70c-123">"(1)"</span></span>                           | <span data-ttu-id="8c70c-124">1</span><span class="sxs-lookup"><span data-stu-id="8c70c-124">1</span></span>                 | <span data-ttu-id="8c70c-125">"(1)"</span><span class="sxs-lookup"><span data-stu-id="8c70c-125">"(1)"</span></span>                             |
| <span data-ttu-id="8c70c-126">Rinnovo chiave riutilizzo</span><span class="sxs-lookup"><span data-stu-id="8c70c-126">Renewal reusing key</span></span>      | <span data-ttu-id="8c70c-127">2</span><span class="sxs-lookup"><span data-stu-id="8c70c-127">2</span></span>                    | <span data-ttu-id="8c70c-128">"(2)"</span><span class="sxs-lookup"><span data-stu-id="8c70c-128">"(2)"</span></span>                           | <span data-ttu-id="8c70c-129">1</span><span class="sxs-lookup"><span data-stu-id="8c70c-129">1</span></span>                 | <span data-ttu-id="8c70c-130">"(1)"</span><span class="sxs-lookup"><span data-stu-id="8c70c-130">"(1)"</span></span>                             |
| <span data-ttu-id="8c70c-131">Rinnovo chiave riutilizzo</span><span class="sxs-lookup"><span data-stu-id="8c70c-131">Renewal reusing key</span></span>      | <span data-ttu-id="8c70c-132">3</span><span class="sxs-lookup"><span data-stu-id="8c70c-132">3</span></span>                    | <span data-ttu-id="8c70c-133">"(3)"</span><span class="sxs-lookup"><span data-stu-id="8c70c-133">"(3)"</span></span>                           | <span data-ttu-id="8c70c-134">1</span><span class="sxs-lookup"><span data-stu-id="8c70c-134">1</span></span>                 | <span data-ttu-id="8c70c-135">"(1)"</span><span class="sxs-lookup"><span data-stu-id="8c70c-135">"(1)"</span></span>                             |
| <span data-ttu-id="8c70c-136">Rinnovo con nuova chiave</span><span class="sxs-lookup"><span data-stu-id="8c70c-136">Renewal with new key</span></span>     | <span data-ttu-id="8c70c-137">4</span><span class="sxs-lookup"><span data-stu-id="8c70c-137">4</span></span>                    | <span data-ttu-id="8c70c-138">"(4)"</span><span class="sxs-lookup"><span data-stu-id="8c70c-138">"(4)"</span></span>                           | <span data-ttu-id="8c70c-139">4</span><span class="sxs-lookup"><span data-stu-id="8c70c-139">4</span></span>                 | <span data-ttu-id="8c70c-140">"(4)"</span><span class="sxs-lookup"><span data-stu-id="8c70c-140">"(4)"</span></span>                             |
| <span data-ttu-id="8c70c-141">Rinnovo chiave riutilizzo</span><span class="sxs-lookup"><span data-stu-id="8c70c-141">Renewal reusing key</span></span>      | <span data-ttu-id="8c70c-142">5</span><span class="sxs-lookup"><span data-stu-id="8c70c-142">5</span></span>                    | <span data-ttu-id="8c70c-143">"(5)"</span><span class="sxs-lookup"><span data-stu-id="8c70c-143">"(5)"</span></span>                           | <span data-ttu-id="8c70c-144">4</span><span class="sxs-lookup"><span data-stu-id="8c70c-144">4</span></span>                 | <span data-ttu-id="8c70c-145">"(4)"</span><span class="sxs-lookup"><span data-stu-id="8c70c-145">"(4)"</span></span>                             |
| <span data-ttu-id="8c70c-146">Rinnovo con nuova chiave</span><span class="sxs-lookup"><span data-stu-id="8c70c-146">Renewal with new key</span></span>     | <span data-ttu-id="8c70c-147">6</span><span class="sxs-lookup"><span data-stu-id="8c70c-147">6</span></span>                    | <span data-ttu-id="8c70c-148">"(6)"</span><span class="sxs-lookup"><span data-stu-id="8c70c-148">"(6)"</span></span>                           | <span data-ttu-id="8c70c-149">6</span><span class="sxs-lookup"><span data-stu-id="8c70c-149">6</span></span>                 | <span data-ttu-id="8c70c-150">"(6)"</span><span class="sxs-lookup"><span data-stu-id="8c70c-150">"(6)"</span></span>                             |
| <span data-ttu-id="8c70c-151">Rinnovo chiave riutilizzo</span><span class="sxs-lookup"><span data-stu-id="8c70c-151">Renewal reusing key</span></span>      | <span data-ttu-id="8c70c-152">7</span><span class="sxs-lookup"><span data-stu-id="8c70c-152">7</span></span>                    | <span data-ttu-id="8c70c-153">"(7)"</span><span class="sxs-lookup"><span data-stu-id="8c70c-153">"(7)"</span></span>                           | <span data-ttu-id="8c70c-154">6</span><span class="sxs-lookup"><span data-stu-id="8c70c-154">6</span></span>                 | <span data-ttu-id="8c70c-155">"(6)"</span><span class="sxs-lookup"><span data-stu-id="8c70c-155">"(6)"</span></span>                             |



 

<span data-ttu-id="8c70c-156">Quando viene installata un'autorità di certificazione, l'indice del certificato è zero e il suffisso del certificato è "" (una stringa vuota).</span><span class="sxs-lookup"><span data-stu-id="8c70c-156">When a CA is installed, the certificate index is zero and the certificate suffix is "" (an empty string).</span></span> <span data-ttu-id="8c70c-157">Ogni volta che il certificato viene rinnovato (indipendentemente dal fatto che le chiavi vengano riutilizzate), l'indice del certificato viene incrementato di uno e il suffisso del nome del file del certificato diventa una stringa nel formato "(*n*)", dove *n* rappresenta il numero di volte in cui il certificato della CA è stato rinnovato.</span><span class="sxs-lookup"><span data-stu-id="8c70c-157">Each time the certificate is renewed (whether or not keys are reused), the certificate index is incremented by one, and the certificate file name suffix becomes a string of the form "(*n*)", where *n* represents the number of times the CA certificate has been renewed.</span></span> <span data-ttu-id="8c70c-158">Dopo il primo rinnovo, l'indice del certificato è 1 e il suffisso del nome del file del certificato è "(1)".</span><span class="sxs-lookup"><span data-stu-id="8c70c-158">After the first renewal, the certificate index is 1 and the certificate file name suffix is "(1)".</span></span> <span data-ttu-id="8c70c-159">Dopo il secondo rinnovo, l'indice del certificato è 2 e il suffisso del nome del file del certificato è "(2)" e così via.</span><span class="sxs-lookup"><span data-stu-id="8c70c-159">After the second renewal, the certificate index is 2 and the certificate file name suffix is "(2)", and so on.</span></span>

<span data-ttu-id="8c70c-160">Anche se l'indice e il suffisso del certificato della CA vengono incrementati di uno ogni volta che l'autorità di certificazione viene rinnovata, il CRL e gli indici delle chiavi e i suffissi dei nomi di file vengono impostati sull'indice del certificato CA solo se il processo di rinnovo include una nuova coppia di chiavi pubblica/privata.</span><span class="sxs-lookup"><span data-stu-id="8c70c-160">Although the CA certificate index and suffix are incremented by one each time the CA is renewed, the CRL and key indexes and the file name suffixes are set to the CA certificate index only if the renewal process includes a new public/private key pair.</span></span> <span data-ttu-id="8c70c-161">In caso contrario, i valori di questi indici e suffissi rimangono invariati per l'ultimo indice.</span><span class="sxs-lookup"><span data-stu-id="8c70c-161">If it does not, the values of these indexes and suffixes remain the same as they were for the last index.</span></span> <span data-ttu-id="8c70c-162">Durante il rinnovo, un amministratore specifica se viene generata una nuova coppia di chiavi o se viene utilizzata la coppia di chiavi esistente.</span><span class="sxs-lookup"><span data-stu-id="8c70c-162">During renewal, an administrator specifies whether a new key pair is generated or the existing key pair is used.</span></span> <span data-ttu-id="8c70c-163">Nello snap-in MMC dell'autorità di certificazione, un'opzione nell'interfaccia utente specifica una coppia di chiavi nuova o esistente. nello strumento Certutil.exe il comando **certutil-renewCert** rinnova la CA con una nuova coppia di chiavi, mentre il comando **certutil-renewCert REUSEKEYS** rinnova la CA con la coppia di chiavi esistente.</span><span class="sxs-lookup"><span data-stu-id="8c70c-163">(In the Certificate Authority MMC snap-in, an option in the user interface specifies a new or an existing key pair; in the Certutil.exe tool, the command **certutil -renewCert** renews the CA with a new key pair, while the command **certutil -renewCert ReuseKeys** renews the CA with the existing key pair.)</span></span>

<span data-ttu-id="8c70c-164">L'indice CRL è direttamente associato all'indice della chiave, che è impostato sull'indice del certificato della CA solo quando per il rinnovo viene utilizzata una nuova coppia di chiavi.</span><span class="sxs-lookup"><span data-stu-id="8c70c-164">The CRL index is directly tied to the key index, which is set to the CA certificate index only when a new key pair is used for the renewal.</span></span> <span data-ttu-id="8c70c-165">Dopo il primo rinnovo (che usava una nuova coppia di chiavi), l'indice del CRL e della chiave è impostato su 1, mentre il suffisso CRL e il suffisso del nome del contenitore di chiavi sono "(1)".</span><span class="sxs-lookup"><span data-stu-id="8c70c-165">After the first renewal (which used a new key pair), the index of the CRL and key is set to 1, and the CRL and key container name suffix is "(1)".</span></span> <span data-ttu-id="8c70c-166">Dopo il secondo rinnovo, tuttavia, l'indice del CRL e della chiave rimane 1 e anche il suffisso CRL e il suffisso del nome del contenitore di chiavi rimangono "(1)"; Questo perché il secondo rinnovo usava la coppia di chiavi esistente e viene emesso un solo CRL per ogni coppia di chiavi della CA.</span><span class="sxs-lookup"><span data-stu-id="8c70c-166">After the second renewal, however, the index of the CRL and key remains 1, and the CRL and key container name suffix also remains "(1)"; this is because the second renewal used the existing key pair and only one CRL is issued for each CA key pair.</span></span>

<span data-ttu-id="8c70c-167">È possibile recuperare i certificati e i CRL della CA indicizzata chiamando il metodo **GetCertificateProperty** (in entrambe le interfacce [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) e [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) ).</span><span class="sxs-lookup"><span data-stu-id="8c70c-167">You can retrieve the indexed CA certificates and CRLs by calling the **GetCertificateProperty** method (in both the [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) and [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) interfaces).</span></span> <span data-ttu-id="8c70c-168">Quando si recuperano determinate proprietà correlate al certificato della CA o al CRL, è possibile aggiungere l'indice in base zero del certificato CA ai nomi delle proprietà.</span><span class="sxs-lookup"><span data-stu-id="8c70c-168">When you retrieve certain properties related to the CA certificate or CRL, you can append the CA certificate's zero-based index to the property names.</span></span> <span data-ttu-id="8c70c-169">Ad esempio, per recuperare l'indice CRL che corrisponde al terzo certificato della CA, passare la proprietà "CRLIndex. 2" a [**ICertServerPolicy:: GetCertificateProperty**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-getcertificateproperty); per la tabella, il valore della proprietà "CRLIndex. 2" recuperato sarà 1.</span><span class="sxs-lookup"><span data-stu-id="8c70c-169">For example, to retrieve the CRL index that corresponds to the CA's third certificate, pass the property "CRLIndex.2" to [**ICertServerPolicy::GetCertificateProperty**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-getcertificateproperty); for the table, the retrieved "CRLIndex.2" property value would be 1.</span></span> <span data-ttu-id="8c70c-170">Una proprietà denominata "CertCount" può essere usata per determinare il numero di volte in cui l'autorità di certificazione ha emesso un certificato CA.</span><span class="sxs-lookup"><span data-stu-id="8c70c-170">A property called "CertCount" can be used to determine the number of times the CA has been issued a CA certificate.</span></span>

<span data-ttu-id="8c70c-171">I certificati della CA e i CRL contengono un'estensione che fornisce informazioni sul certificato e sull'indice della chiave.</span><span class="sxs-lookup"><span data-stu-id="8c70c-171">CA certificates and CRLs contain an extension that provides information about the certificate and key index.</span></span> <span data-ttu-id="8c70c-172">L'estensione è definita in WinCrypt. h come szOID \_ CERTSRV \_ CA \_ Version con un valore di "1.3.6.1.4.1.311.21.1".</span><span class="sxs-lookup"><span data-stu-id="8c70c-172">The extension is defined in Wincrypt.h as szOID\_CERTSRV\_CA\_VERSION with a value of "1.3.6.1.4.1.311.21.1".</span></span> <span data-ttu-id="8c70c-173">I dati dell'estensione sono un valore **DWORD** (codificato come X509 \_ Integer nell'estensione), i 16 bit bassi sono l'indice del certificato e i 16 bit alti sono l'indice della chiave.</span><span class="sxs-lookup"><span data-stu-id="8c70c-173">The extension data is a **DWORD** value (encoded as X509\_INTEGER in the extension); the low 16 bits are the certificate index, and the high 16 bits are the key index.</span></span>

<span data-ttu-id="8c70c-174">L'installazione iniziale di una CA produce un indice del certificato pari a zero e un indice chiave pari a zero.</span><span class="sxs-lookup"><span data-stu-id="8c70c-174">The initial installation of a CA produces a certificate index of zero and a key index of zero.</span></span> <span data-ttu-id="8c70c-175">Il rinnovo di un certificato della CA provocherà l'incremento dell'indice del certificato.</span><span class="sxs-lookup"><span data-stu-id="8c70c-175">Renewal of a CA certificate will cause the certificate index to be incremented.</span></span> <span data-ttu-id="8c70c-176">Se la chiave viene riutilizzata nel rinnovo, l'indice chiave sarà lo stesso dell'indice chiave precedente.</span><span class="sxs-lookup"><span data-stu-id="8c70c-176">If the key is reused in the renewal, the key index will be the same as the previous key index.</span></span> <span data-ttu-id="8c70c-177">Se la chiave non viene riutilizzata, l'indice della chiave corrisponderà al nuovo indice del certificato.</span><span class="sxs-lookup"><span data-stu-id="8c70c-177">If the key is not reused, the key index will match the new certificate index.</span></span>

## <a name="related-topics"></a><span data-ttu-id="8c70c-178">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="8c70c-178">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8c70c-179">**ICertServerPolicy::GetCertificateProperty**</span><span class="sxs-lookup"><span data-stu-id="8c70c-179">**ICertServerPolicy::GetCertificateProperty**</span></span>](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-getcertificateproperty)
</dt> <dt>

[<span data-ttu-id="8c70c-180">**ICertServerExit::GetCertificateProperty**</span><span class="sxs-lookup"><span data-stu-id="8c70c-180">**ICertServerExit::GetCertificateProperty**</span></span>](/windows/desktop/api/Certif/nf-certif-icertserverexit-getcertificateproperty)
</dt> </dl>

 

 
