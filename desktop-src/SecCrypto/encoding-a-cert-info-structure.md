---
description: Il processo di codifica è il contrario del processo di decodifica descritto in decodifica di una struttura di informazioni del certificato \_ .
ms.assetid: 5d3311e5-a2fb-46f7-aa76-f232b39b34fd
title: Codifica di una struttura di CERT_INFO
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 645a1d3054546a7b11c57d4f515dc7d3e26b5fe0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106318940"
---
# <a name="encoding-a-cert_info-structure"></a><span data-ttu-id="2a9c7-103">Codifica di una \_ struttura di informazioni del certificato</span><span class="sxs-lookup"><span data-stu-id="2a9c7-103">Encoding a CERT\_INFO Structure</span></span>

<span data-ttu-id="2a9c7-104">Il processo di codifica è il contrario del processo di decodifica descritto in [decodifica di una \_ struttura di informazioni del certificato](decoding-a-cert-info-structure.md).</span><span class="sxs-lookup"><span data-stu-id="2a9c7-104">The encoding process is the reverse of the decoding process described in [Decoding a CERT\_INFO Structure](decoding-a-cert-info-structure.md).</span></span> <span data-ttu-id="2a9c7-105">Ad esempio, la procedura seguente consente di aggiungere un' **autorità emittente** codificata a una struttura di [**\_ informazioni del certificato**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) .</span><span class="sxs-lookup"><span data-stu-id="2a9c7-105">For example, the following procedure would add an encoded **Issuer** to a [**CERT\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) structure.</span></span> <span data-ttu-id="2a9c7-106">Vedere anche l'illustrazione che segue la procedura.</span><span class="sxs-lookup"><span data-stu-id="2a9c7-106">Also see the illustration that follows the procedure.</span></span>

<span data-ttu-id="2a9c7-107">**Per aggiungere un'autorità emittente codificata a una struttura di \_ informazioni sul certificato**</span><span class="sxs-lookup"><span data-stu-id="2a9c7-107">**To add an encoded Issuer to a CERT\_INFO structure**</span></span>

1.  <span data-ttu-id="2a9c7-108">Creare una stringa contenente il nome dell'autorità emittente da utilizzare.</span><span class="sxs-lookup"><span data-stu-id="2a9c7-108">Create a string containing the issuer name to be used.</span></span>
2.  <span data-ttu-id="2a9c7-109">Creare una matrice di [**strutture \_ RDN \_ del certificato**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn_attr) , che verrà inizializzata in modo da contenere le informazioni appropriate sulla stringa del nome dell'autorità emittente appena creata.</span><span class="sxs-lookup"><span data-stu-id="2a9c7-109">Create an array of [**CERT\_RDN\_ATTR**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn_attr) structures, which will be initialized to contain the proper information about the issuer name string just created.</span></span>
3.  <span data-ttu-id="2a9c7-110">Creare una matrice di [**strutture \_ RDN del certificato**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn) , una delle quali contiene le informazioni sulla matrice di [**strutture \_ RDN \_ del certificato**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn_attr) appena inizializzate.</span><span class="sxs-lookup"><span data-stu-id="2a9c7-110">Create an array of [**CERT\_RDN**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn) structures, one of which has the information about the array of [**CERT\_RDN\_ATTR**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn_attr) structures just initialized.</span></span>
4.  <span data-ttu-id="2a9c7-111">Creare una struttura di [**\_ \_ informazioni sul nome del certificato**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_name_info) che disponga di un puntatore alla matrice di strutture [**\_ RDN CERT**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn) appena create.</span><span class="sxs-lookup"><span data-stu-id="2a9c7-111">Create a [**CERT\_NAME\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_name_info) structure that has a pointer to the array of [**CERT\_RDN**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn) structures that just created.</span></span>
5.  <span data-ttu-id="2a9c7-112">Chiamare [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) per ottenere la dimensione del BLOB codificato di output e passargli l'indirizzo della struttura di [**\_ \_ informazioni sul nome del certificato**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_name_info) appena creato.</span><span class="sxs-lookup"><span data-stu-id="2a9c7-112">Call [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) to get the size of the output encoded BLOB, passing it the address of the [**CERT\_NAME\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_name_info) structure that you just created.</span></span>
6.  <span data-ttu-id="2a9c7-113">Allocare memoria per il BLOB codificato di output.</span><span class="sxs-lookup"><span data-stu-id="2a9c7-113">Allocate memory for the output encoded BLOB.</span></span>
7.  <span data-ttu-id="2a9c7-114">Chiamare di nuovo [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) , passandogli le stesse informazioni, ma passando ora l'indirizzo della memoria appena allocata.</span><span class="sxs-lookup"><span data-stu-id="2a9c7-114">Call [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) again, passing it the same information, but now passing it the address of the memory just allocated.</span></span>
8.  <span data-ttu-id="2a9c7-115">Impostare il membro **Issuer. cbData** della struttura [**CERT \_ info**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) sulla dimensione restituita nel passaggio 5 e il membro **Issuer. pbData** per l'indirizzo ottenuto nel passaggio 6.</span><span class="sxs-lookup"><span data-stu-id="2a9c7-115">Set the **Issuer.cbData** member of the [**CERT\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) structure to the size returned in step 5, and the **Issuer.pbData** member to the address obtained in step 6.</span></span> <span data-ttu-id="2a9c7-116">Il BLOB dell' **emittente** codificato si trova ora qui.</span><span class="sxs-lookup"><span data-stu-id="2a9c7-116">The encoded **Issuer** BLOB now resides there.</span></span>

![Aggiunta di un'autorità emittente codificata a una struttura di informazioni sul certificato \-](images/encflow.png)

<span data-ttu-id="2a9c7-118">Per inizializzare e codificare alcune informazioni sull'estensione del certificato, attenersi alla procedura riportata di seguito.</span><span class="sxs-lookup"><span data-stu-id="2a9c7-118">To initialize and encode some certificate extension information, use the following procedure.</span></span> <span data-ttu-id="2a9c7-119">Vedere anche l'illustrazione che segue la procedura.</span><span class="sxs-lookup"><span data-stu-id="2a9c7-119">Also see the illustration that follows the procedure.</span></span>

<span data-ttu-id="2a9c7-120">**Per aggiungere informazioni sull'estensione codificata a una struttura di informazioni sul certificato \_**</span><span class="sxs-lookup"><span data-stu-id="2a9c7-120">**To add encoded extension information to a CERT\_INFO structure**</span></span>

1.  <span data-ttu-id="2a9c7-121">Creare e inizializzare una struttura di informazioni sull'estensione: per questo esempio si tratta di una struttura di [**informazioni sui vincoli di base del certificato \_ \_ \_**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_basic_constraints_info) .</span><span class="sxs-lookup"><span data-stu-id="2a9c7-121">Create and initialize an extension information structure—for this example, it is a [**CERT\_BASIC\_CONSTRAINTS\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_basic_constraints_info) structure.</span></span>
2.  <span data-ttu-id="2a9c7-122">Chiamare [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject), passandogli l'indirizzo della struttura appena creata, per ottenere la dimensione del BLOB codificato di output.</span><span class="sxs-lookup"><span data-stu-id="2a9c7-122">Call [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject), passing it the address of the structure just created, to get the size of the output encoded BLOB.</span></span>
3.  <span data-ttu-id="2a9c7-123">Allocare memoria per il BLOB codificato di output.</span><span class="sxs-lookup"><span data-stu-id="2a9c7-123">Allocate memory for the output encoded BLOB.</span></span>
4.  <span data-ttu-id="2a9c7-124">Chiamare di nuovo [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) , passando le stesse informazioni, eccetto ora passare l'indirizzo della memoria allocata.</span><span class="sxs-lookup"><span data-stu-id="2a9c7-124">Call [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) again, passing the same information, except now pass in the address of the allocated memory.</span></span>
5.  <span data-ttu-id="2a9c7-125">Creare una matrice di strutture di [**\_ estensione del certificato**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) .</span><span class="sxs-lookup"><span data-stu-id="2a9c7-125">Create an array of [**CERT\_EXTENSION**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) structures.</span></span>
6.  <span data-ttu-id="2a9c7-126">Inizializzare una delle strutture di [**\_ estensione del certificato**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) in modo che **pszObjId** sia la stringa corretta per i dati contenuti nel **valore** e tale **valore** contenga il BLOB di dati crittografato restituito dalla chiamata a [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject).</span><span class="sxs-lookup"><span data-stu-id="2a9c7-126">Initialize one of the [**CERT\_EXTENSION**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) structures so that the **pszObjId** is the proper string for the data contained in **Value**, and that **Value** contains the encrypted data BLOB that was output from the call to [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject).</span></span>
7.  <span data-ttu-id="2a9c7-127">Inizializzare il membro **rgExtension** della struttura di [**\_ informazioni sul certificato**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) in modo che punti alla matrice di strutture di [**\_ estensione del certificato**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) .</span><span class="sxs-lookup"><span data-stu-id="2a9c7-127">Initialize the **rgExtension** member of the [**CERT\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) structure to point to the array of [**CERT\_EXTENSION**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) structures.</span></span>

![Aggiunta di informazioni sull'estensione codificata a una \- struttura di informazioni sul certificato](images/xtenflow.png)

 

 



