---
description: A partire dal formato del certificato X. 509 versione 3, un certificato può contenere estensioni di certificato.
ms.assetid: fb106cab-8a61-4a83-8fb4-7c045d905575
title: Gestori estensioni
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cfcf1b47fcc97b87f5956f4584aee07acce04222
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106318234"
---
# <a name="extension-handlers"></a><span data-ttu-id="d6382-103">Gestori estensioni</span><span class="sxs-lookup"><span data-stu-id="d6382-103">Extension Handlers</span></span>

<span data-ttu-id="d6382-104">A partire dal formato del certificato [*X. 509*](../secgloss/x-gly.md) versione 3, un certificato può contenere estensioni di certificato.</span><span class="sxs-lookup"><span data-stu-id="d6382-104">Beginning with [*X.509*](../secgloss/x-gly.md) Certificate format Version 3, a certificate may contain certificate extensions.</span></span> <span data-ttu-id="d6382-105">Per il contenuto di un certificato X. 509, vedere [proprietà del certificato](certificate-properties.md). Queste estensioni indicano informazioni aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="d6382-105">(For the contents of an X.509 Certificate, see [Certificate Properties](certificate-properties.md).) These extensions indicate additional information.</span></span> <span data-ttu-id="d6382-106">Un'estensione può, ad esempio, indicare informazioni aggiuntive sull'identificazione del soggetto o indicare le informazioni sull'utilizzo della chiave, che specificano le attività, ad esempio la firma o la crittografia, per le quali è possibile utilizzare una chiave.</span><span class="sxs-lookup"><span data-stu-id="d6382-106">For example, an extension can indicate additional subject identification information, or it can indicate key usage information, which specifies the tasks (such as signature or encryption) for which a key can be used.</span></span> <span data-ttu-id="d6382-107">Un set di estensioni standard viene definito per l'uso dell'applicazione ed è anche possibile personalizzare le estensioni.</span><span class="sxs-lookup"><span data-stu-id="d6382-107">A set of standard extensions is defined for application use, and extensions may also be customized.</span></span>

<span data-ttu-id="d6382-108">A ogni estensione è associata una stringa dell'identificatore di oggetto che identifica il tipo di informazioni aggiuntive e una struttura di dati che contiene queste informazioni.</span><span class="sxs-lookup"><span data-stu-id="d6382-108">Each extension has an associated object identifier string that identifies the type of additional information and a data structure that contains this information.</span></span> <span data-ttu-id="d6382-109">Ad esempio, l'identificatore dell'oggetto utilizzo chiave è "2.5.29.15", che indica le informazioni sull'utilizzo della chiave.</span><span class="sxs-lookup"><span data-stu-id="d6382-109">For example, the key usage object identifier is "2.5.29.15", which indicates key usage information.</span></span> <span data-ttu-id="d6382-110">La struttura dei dati associata è [**un \_ \_ BLOB di bit Crypt**](/windows/desktop/api/Wincrypt/ns-wincrypt-crypt_bit_blob) (bit) che specifica come è possibile usare la chiave.</span><span class="sxs-lookup"><span data-stu-id="d6382-110">Its associated data structure is a [**CRYPT\_BIT\_BLOB**](/windows/desktop/api/Wincrypt/ns-wincrypt-crypt_bit_blob) (bitfield) specifying how the key can be used.</span></span>

<span data-ttu-id="d6382-111">Un'estensione può essere aggiunta a un certificato prima dell'emissione.</span><span class="sxs-lookup"><span data-stu-id="d6382-111">An extension can be added to a certificate before it is issued.</span></span> <span data-ttu-id="d6382-112">Quando il certificato viene emesso, le estensioni abilitate fanno parte del certificato.</span><span class="sxs-lookup"><span data-stu-id="d6382-112">When the certificate is issued, any enabled extensions are part of the certificate.</span></span> <span data-ttu-id="d6382-113">Se un'estensione è contrassegnata come critica, il suo utilizzo deve essere noto all'applicazione using e l'applicazione deve rispettare lo scopo o il valore dell'estensione.</span><span class="sxs-lookup"><span data-stu-id="d6382-113">If an extension is marked critical, its use must be known by the using application, and the application must adhere to the intent or value of the extension.</span></span> <span data-ttu-id="d6382-114">Servizi certificati consente di impostare le estensioni per un certificato non emesso tramite i metodi forniti da [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) e [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy).</span><span class="sxs-lookup"><span data-stu-id="d6382-114">Certificate Services allows extensions to be set on a non-issued certificate through methods provided by [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) and [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy).</span></span> <span data-ttu-id="d6382-115">Per informazioni dettagliate sulle estensioni dei certificati, vedere [**\_ estensione CERT**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) nella documentazione di CryptoAPI.</span><span class="sxs-lookup"><span data-stu-id="d6382-115">For details about certificate extensions, see [**CERT\_EXTENSION**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) in the CryptoAPI documentation.</span></span> <span data-ttu-id="d6382-116">Per informazioni sulle strutture dei dati di estensione del certificato comuni, vedere [strutture di estensione del certificato X. 509](cryptography-structures.md).</span><span class="sxs-lookup"><span data-stu-id="d6382-116">For information about common certificate extension data structures, see [X.509 Certificate Extension Structures](cryptography-structures.md).</span></span>

<span data-ttu-id="d6382-117">Il gestore dell'estensione è un oggetto COM che fornisce routine per la codifica dei tipi di dati e delle estensioni più complessi, ma usati di frequente, ad esempio IA5String o PrintableString.</span><span class="sxs-lookup"><span data-stu-id="d6382-117">The extension handler is a COM object that provides routines for encoding the more complex, but commonly used extensions and data types, such as IA5String or PrintableString.</span></span>

<span data-ttu-id="d6382-118">Le estensioni con tipi di dati **date**, **Long** e **BSTR** non richiedono un gestore di estensione.</span><span class="sxs-lookup"><span data-stu-id="d6382-118">Extensions that have the data types **DATE**, **LONG**, and **BSTR** do not require an extension handler.</span></span> <span data-ttu-id="d6382-119">Il modulo criteri chiama semplicemente [**ICertServerPolicy:: SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) con il parametro di *tipo* impostato su un valore che rappresenta il tipo di dati dell'estensione: PROPTYPE \_ date, PROPTYPE \_ Long o PROPTYPE \_ String.</span><span class="sxs-lookup"><span data-stu-id="d6382-119">The policy module simply calls [**ICertServerPolicy::SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) with the *Type* parameter set to a value representing the extension data type: PROPTYPE\_DATE, PROPTYPE\_LONG, or PROPTYPE\_STRING.</span></span> <span data-ttu-id="d6382-120">Passa quindi l'estensione al motore del server.</span><span class="sxs-lookup"><span data-stu-id="d6382-120">It then passes the extension to the server engine.</span></span> <span data-ttu-id="d6382-121">Il motore di server, a sua volta, esegue la codifica ASN. 1 ( [*Abstract Syntax Notation One*](../secgloss/a-gly.md) ) prima di archiviare l'estensione nel certificato.</span><span class="sxs-lookup"><span data-stu-id="d6382-121">The server engine, in turn, performs the [*Abstract Syntax Notation One*](../secgloss/a-gly.md) (ASN.1) encoding before storing the extension in the certificate.</span></span>

<span data-ttu-id="d6382-122">Tuttavia, le estensioni con tipi di dati diversi da questi tipi predefiniti devono essere ASN. 1 codificate da un gestore di estensione prima che il modulo criteri le passi al motore del server.</span><span class="sxs-lookup"><span data-stu-id="d6382-122">However, extensions that have data types other than these default types must be ASN.1 encoded by an extension handler before the policy module passes them to the server engine.</span></span> <span data-ttu-id="d6382-123">Quando il modulo criteri chiama [**ICertServerPolicy:: SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) per passare un'estensione con codifica ASN. 1 al motore del server, è necessario impostare il parametro di *tipo* su PROPTYPE \_ Binary.</span><span class="sxs-lookup"><span data-stu-id="d6382-123">When the policy module calls [**ICertServerPolicy::SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) to pass an ASN.1-encoded extension to the server engine, it must set the *Type* parameter to PROPTYPE\_BINARY.</span></span> <span data-ttu-id="d6382-124">Il motore Server archivia semplicemente questa estensione codificata nel certificato.</span><span class="sxs-lookup"><span data-stu-id="d6382-124">The server engine then simply stores this encoded extension in the certificate.</span></span>

<span data-ttu-id="d6382-125">Il gestore dell'estensione predefinito, Certenc.dll, esporta un numero di interfacce **ICertEncodeXXX** e può essere chiamato dal modulo criteri.</span><span class="sxs-lookup"><span data-stu-id="d6382-125">The default extension handler, Certenc.dll, exports a number of **ICertEncodeXXX** interfaces and can be called by the policy module.</span></span> <span data-ttu-id="d6382-126">Le informazioni sul tipo necessarie sono contenute anche in Certencl.dll fornito in Platform Software Development Kit (SDK).</span><span class="sxs-lookup"><span data-stu-id="d6382-126">The necessary type information is also contained in Certencl.dll which is supplied in the Platform Software Development Kit (SDK).</span></span> <span data-ttu-id="d6382-127">Ogni interfaccia fornisce un metodo **Encode** che restituisce un'estensione di certificato con codifica ASN. 1 al modulo criteri in formato binario.</span><span class="sxs-lookup"><span data-stu-id="d6382-127">Each interface provides an **Encode** method that returns an ASN.1-encoded certificate extension to the policy module in a binary format.</span></span> <span data-ttu-id="d6382-128">Il modulo criteri può quindi impostare l'estensione in un certificato chiamando il metodo [**ICertServerPolicy:: SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) .</span><span class="sxs-lookup"><span data-stu-id="d6382-128">The policy module can then set the extension in a certificate by calling the [**ICertServerPolicy::SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) method.</span></span>

<span data-ttu-id="d6382-129">Per altre informazioni, vedere [scrittura di gestori estensioni personalizzati](writing-custom-extension-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="d6382-129">For more information, see [Writing Custom Extension Handlers](writing-custom-extension-handlers.md).</span></span>

 

 
