---
title: Redirector del file System
description: La \\ directory di windir system32 è riservata alle applicazioni a 64 bit in Windows a 64 bit.
ms.assetid: b4d36fe8-8bbb-469b-8ad1-650d559a4c75
keywords:
- Programmazione Windows a 64 bit per redirector file system
- Guida per programmatori Windows a 64 bit-programmazione Windows a 64 bit, redirector file system
- Programmazione Windows WOW64 a 64 bit, redirector file system
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 561d03c8da51bd37a2d97746296bc74e24e43154
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104047074"
---
# <a name="file-system-redirector"></a><span data-ttu-id="23779-106">Redirector del file System</span><span class="sxs-lookup"><span data-stu-id="23779-106">File System Redirector</span></span>

<span data-ttu-id="23779-107">La directory% windir% \\ system32 è riservata alle applicazioni a 64 bit in Windows a 64 bit.</span><span class="sxs-lookup"><span data-stu-id="23779-107">The %windir%\\System32 directory is reserved for 64-bit applications on 64-bit Windows.</span></span> <span data-ttu-id="23779-108">La maggior parte dei nomi di file DLL non è stata modificata quando sono state create versioni a 64 bit delle dll, quindi le versioni a 32 bit delle dll vengono archiviate in una directory diversa.</span><span class="sxs-lookup"><span data-stu-id="23779-108">Most DLL file names were not changed when 64-bit versions of the DLLs were created, so 32-bit versions of the DLLs are stored in a different directory.</span></span> <span data-ttu-id="23779-109">WOW64 nasconde questa differenza usando un *redirector file System*.</span><span class="sxs-lookup"><span data-stu-id="23779-109">WOW64 hides this difference by using a *file system redirector*.</span></span>

<span data-ttu-id="23779-110">Nella maggior parte dei casi, ogni volta che un'applicazione a 32 bit tenta di accedere a% windir% \\ system32,% windir% \\ LastGood \\ System32 o% windir% \\regedit.exe, l'accesso viene reindirizzato a un percorso specifico dell'architettura.</span><span class="sxs-lookup"><span data-stu-id="23779-110">In most cases, whenever a 32-bit application attempts to access %windir%\\System32, %windir%\\lastgood\\system32, or %windir%\\regedit.exe, the access is redirected to an architecture-specific path.</span></span>

> [!Note]  
> <span data-ttu-id="23779-111">Questi percorsi vengono forniti solo per riferimento.</span><span class="sxs-lookup"><span data-stu-id="23779-111">These paths are provided for reference only.</span></span> <span data-ttu-id="23779-112">Per compatibilità, le applicazioni non devono utilizzare direttamente questi percorsi.</span><span class="sxs-lookup"><span data-stu-id="23779-112">For compatibility, applications should not use these paths directly.</span></span> <span data-ttu-id="23779-113">Devono invece chiamare le API descritte di seguito.</span><span class="sxs-lookup"><span data-stu-id="23779-113">Instead, they should call the APIs described below.</span></span>

 



|                              |                                          |                                          |
|------------------------------|------------------------------------------|------------------------------------------|
| <span data-ttu-id="23779-114">Percorso originale</span><span class="sxs-lookup"><span data-stu-id="23779-114">Original Path</span></span>                | <span data-ttu-id="23779-115">Percorso reindirizzato per i processi x86 a 32 bit</span><span class="sxs-lookup"><span data-stu-id="23779-115">Redirected Path for 32-bit x86 Processes</span></span> | <span data-ttu-id="23779-116">Percorso reindirizzato per processi ARM a 32 bit</span><span class="sxs-lookup"><span data-stu-id="23779-116">Redirected Path for 32-bit ARM Processes</span></span> |
| <span data-ttu-id="23779-117">% WINDIR% \\ system32</span><span class="sxs-lookup"><span data-stu-id="23779-117">%windir%\\System32</span></span>           | <span data-ttu-id="23779-118">% WINDIR% \\ SysWow64</span><span class="sxs-lookup"><span data-stu-id="23779-118">%windir%\\SysWOW64</span></span>                       | <span data-ttu-id="23779-119">% WINDIR% \\ SysArm32</span><span class="sxs-lookup"><span data-stu-id="23779-119">%windir%\\SysArm32</span></span>                       |
| <span data-ttu-id="23779-120">% WINDIR% \\ LastGood \\ system32</span><span class="sxs-lookup"><span data-stu-id="23779-120">%windir%\\lastgood\\system32</span></span> | <span data-ttu-id="23779-121">% WINDIR% \\ LastGood \\ SysWow64</span><span class="sxs-lookup"><span data-stu-id="23779-121">%windir%\\lastgood\\SysWOW64</span></span>             | <span data-ttu-id="23779-122">% WINDIR% \\ LastGood \\ SysArm32</span><span class="sxs-lookup"><span data-stu-id="23779-122">%windir%\\lastgood\\SysArm32</span></span>             |
| <span data-ttu-id="23779-123">% WINDIR% \\regedit.exe</span><span class="sxs-lookup"><span data-stu-id="23779-123">%windir%\\regedit.exe</span></span>        | <span data-ttu-id="23779-124">% WINDIR% \\ SysWOW64 \\regedit.exe</span><span class="sxs-lookup"><span data-stu-id="23779-124">%windir%\\SysWOW64\\regedit.exe</span></span>          | <span data-ttu-id="23779-125">% WINDIR% \\ SysArm32 \\regedit.exe</span><span class="sxs-lookup"><span data-stu-id="23779-125">%windir%\\ SysArm32\\regedit.exe</span></span>         |



 

<span data-ttu-id="23779-126">Se l'accesso fa in modo che il sistema visualizzi la richiesta di controllo dell'account utente, il reindirizzamento non viene eseguito.</span><span class="sxs-lookup"><span data-stu-id="23779-126">If the access causes the system to display the UAC prompt, redirection does not occur.</span></span> <span data-ttu-id="23779-127">Viene invece avviata la versione a 64 bit del file richiesto.</span><span class="sxs-lookup"><span data-stu-id="23779-127">Instead, the 64-bit version of the requested file is launched.</span></span> <span data-ttu-id="23779-128">Per evitare questo problema, specificare la directory SysWOW64 per evitare il reindirizzamento e garantire l'accesso alla versione a 32 bit del file oppure eseguire l'applicazione a 32 bit con privilegi di amministratore, in modo che la richiesta di controllo dell'account utente non venga visualizzata.</span><span class="sxs-lookup"><span data-stu-id="23779-128">To prevent this problem, either specify the SysWOW64 directory to avoid redirection and ensure access to the 32-bit version of the file, or run the 32-bit application with administrator privileges so the UAC prompt is not displayed.</span></span>

<span data-ttu-id="23779-129">**Windows Server 2003 e Windows XP:  ** Il controllo dell'account utente non è supportato.</span><span class="sxs-lookup"><span data-stu-id="23779-129">**Windows Server 2003 and Windows XP:  ** UAC is not supported.</span></span>

<span data-ttu-id="23779-130">Alcune sottodirectory sono esentate dal reindirizzamento.</span><span class="sxs-lookup"><span data-stu-id="23779-130">Certain subdirectories are exempt from redirection.</span></span> <span data-ttu-id="23779-131">L'accesso a queste sottodirectory non viene reindirizzato a% windir% \\ SysWow64:</span><span class="sxs-lookup"><span data-stu-id="23779-131">Access to these subdirectories is not redirected to %windir%\\SysWOW64:</span></span> <dl> <span data-ttu-id="23779-132">% WINDIR% \\ system32 \\ Catroot</span><span class="sxs-lookup"><span data-stu-id="23779-132">%windir%\\system32\\catroot</span></span>  
<span data-ttu-id="23779-133">% WINDIR% \\ system32 \\ Catroot2</span><span class="sxs-lookup"><span data-stu-id="23779-133">%windir%\\system32\\catroot2</span></span>  
<span data-ttu-id="23779-134">% WINDIR% \\ system32 \\ DriverStore</span><span class="sxs-lookup"><span data-stu-id="23779-134">%windir%\\system32\\driverstore</span></span>  
<span data-ttu-id="23779-135">% WINDIR% \\ system32 \\ drivers e \\ così via</span><span class="sxs-lookup"><span data-stu-id="23779-135">%windir%\\system32\\drivers\\etc</span></span>  
<span data-ttu-id="23779-136">% WINDIR% \\ system32 \\ LogFiles</span><span class="sxs-lookup"><span data-stu-id="23779-136">%windir%\\system32\\logfiles</span></span>  
<span data-ttu-id="23779-137">% WINDIR% \\ system32 \\ spool</span><span class="sxs-lookup"><span data-stu-id="23779-137">%windir%\\system32\\spool</span></span>  
</dl>

<span data-ttu-id="23779-138">**Windows server 2008, Windows Vista, Windows server 2003 e Windows XP:  **% windir% \\ system32 \\ DriverStore è stato reindirizzato.</span><span class="sxs-lookup"><span data-stu-id="23779-138">**Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:  **%windir%\\system32\\driverstore is redirected.</span></span>

<span data-ttu-id="23779-139">Per recuperare il nome della directory di sistema a 32 bit, le applicazioni a 64 bit devono usare la funzione [**GetSystemWow64Directory2**](/windows/desktop/api/wow64apiset/nf-wow64apiset-getsystemwow64directory2a) (Windows 10, versione 1511) o la funzione [**GetSystemWow64Directory**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetknownfolderpath) .</span><span class="sxs-lookup"><span data-stu-id="23779-139">To retrieve the name of the 32-bit system directory, 64-bit applications should use the [**GetSystemWow64Directory2**](/windows/desktop/api/wow64apiset/nf-wow64apiset-getsystemwow64directory2a) function (Windows 10, version 1511) or the [**GetSystemWow64Directory**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetknownfolderpath) function.</span></span>

<span data-ttu-id="23779-140">Le applicazioni devono utilizzare la funzione [**SHGetKnownFolderPath**](https://www.bing.com/search?q=**SHGetKnownFolderPath**) per determinare il nome di directory% ProgramFiles%.</span><span class="sxs-lookup"><span data-stu-id="23779-140">Applications should use the [**SHGetKnownFolderPath**](https://www.bing.com/search?q=**SHGetKnownFolderPath**) function to determine the %ProgramFiles% directory name.</span></span>

<span data-ttu-id="23779-141">**Windows Server 2003 e Windows XP:** Le applicazioni devono utilizzare la funzione [**SHGetSpecialFolderPath**](/windows/win32/api/shlobj_core/nf-shlobj_core-shgetspecialfolderpatha) per determinare il nome di directory% ProgramFiles%.</span><span class="sxs-lookup"><span data-stu-id="23779-141">**Windows Server 2003 and Windows XP:** Applications should use the [**SHGetSpecialFolderPath**](/windows/win32/api/shlobj_core/nf-shlobj_core-shgetspecialfolderpatha) function to determine the %ProgramFiles% directory name.</span></span>

<span data-ttu-id="23779-142">Le applicazioni possono controllare il redirector file system WOW64 usando le funzioni [**Wow64DisableWow64FsRedirection**](/windows/desktop/api/wow64apiset/nf-wow64apiset-wow64disablewow64fsredirection), [**Wow64EnableWow64FsRedirection**](/windows/desktop/api/winbase/nf-winbase-wow64enablewow64fsredirection)e [**Wow64RevertWow64FsRedirection**](/windows/desktop/api/wow64apiset/nf-wow64apiset-wow64revertwow64fsredirection) .</span><span class="sxs-lookup"><span data-stu-id="23779-142">Applications can control the WOW64 file system redirector using the [**Wow64DisableWow64FsRedirection**](/windows/desktop/api/wow64apiset/nf-wow64apiset-wow64disablewow64fsredirection), [**Wow64EnableWow64FsRedirection**](/windows/desktop/api/winbase/nf-winbase-wow64enablewow64fsredirection), and [**Wow64RevertWow64FsRedirection**](/windows/desktop/api/wow64apiset/nf-wow64apiset-wow64revertwow64fsredirection) functions.</span></span> <span data-ttu-id="23779-143">La disabilitazione del reindirizzamento file system influiscono su tutte le operazioni sui file eseguite dal thread chiamante, quindi deve essere disabilitata solo quando è necessario per una singola chiamata a [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) e nuovamente riabilitata immediatamente dopo la restituzione della funzione.</span><span class="sxs-lookup"><span data-stu-id="23779-143">Disabling file system redirection affects all file operations performed by the calling thread, so it should be disabled only when necessary for a single [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) call and re-enabled again immediately after the function returns.</span></span> <span data-ttu-id="23779-144">La disabilitazione del reindirizzamento file system per periodi più lunghi può impedire il caricamento di dll di sistema da parte delle applicazioni a 32 bit, causando l'esito negativo delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="23779-144">Disabling file system redirection for longer periods can prevent 32-bit applications from loading system DLLs, causing the applications to fail.</span></span>

<span data-ttu-id="23779-145">le applicazioni a 32 bit possono accedere alla directory di sistema nativa sostituendo% windir% \\ SysNative per% windir% \\ system32.</span><span class="sxs-lookup"><span data-stu-id="23779-145">32-bit applications can access the native system directory by substituting %windir%\\Sysnative for %windir%\\System32.</span></span> <span data-ttu-id="23779-146">WOW64 riconosce SysNative come un alias speciale usato per indicare che l'file system non deve reindirizzare l'accesso.</span><span class="sxs-lookup"><span data-stu-id="23779-146">WOW64 recognizes Sysnative as a special alias used to indicate that the file system should not redirect the access.</span></span> <span data-ttu-id="23779-147">Questo meccanismo è flessibile e facile da usare, pertanto è il meccanismo consigliato per ignorare il reindirizzamento file system.</span><span class="sxs-lookup"><span data-stu-id="23779-147">This mechanism is flexible and easy to use, therefore, it is the recommended mechanism to bypass file system redirection.</span></span> <span data-ttu-id="23779-148">Si noti che le applicazioni a 64 bit non possono usare l'alias SysNative perché si tratta di una directory virtuale non reale.</span><span class="sxs-lookup"><span data-stu-id="23779-148">Note that 64-bit applications cannot use the Sysnative alias as it is a virtual directory not a real one.</span></span>

<span data-ttu-id="23779-149">**Windows Server 2003 e Windows XP:** L'alias SysNative è stato aggiunto a partire da Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="23779-149">**Windows Server 2003 and Windows XP:** The Sysnative alias was added starting with Windows Vista.</span></span>

 

 