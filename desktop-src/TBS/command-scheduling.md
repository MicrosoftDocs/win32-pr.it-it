---
title: Pianificazione comandi
description: A ogni comando è associata una priorità.
ms.assetid: 63f6ba9d-0b87-403b-916b-aa8550f98a11
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 06512f0748aa88f6b32de3291e2ed1c262212ba2
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "106298397"
---
# <a name="command-scheduling"></a><span data-ttu-id="500fb-103">Pianificazione comandi</span><span class="sxs-lookup"><span data-stu-id="500fb-103">Command Scheduling</span></span>

## <a name="command-scheduling"></a><span data-ttu-id="500fb-104">Pianificazione comandi</span><span class="sxs-lookup"><span data-stu-id="500fb-104">Command Scheduling</span></span>

<span data-ttu-id="500fb-105">I comandi possono essere inviati a TBS da più contesti in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="500fb-105">Commands can be submitted to the TBS from multiple contexts at any time.</span></span> <span data-ttu-id="500fb-106">Tuttavia, un TPM fisico può elaborare un solo comando alla volta e alcuni comandi possono essere eseguiti per un periodo di tempo significativo.</span><span class="sxs-lookup"><span data-stu-id="500fb-106">However, a physical TPM can only process one command at a time, and some commands can run for a significant period of time.</span></span> <span data-ttu-id="500fb-107">Quando più comandi sono in sospeso, TBS decide quale comando inviare al TPM.</span><span class="sxs-lookup"><span data-stu-id="500fb-107">When multiple commands are pending, the TBS decides which command to send to the TPM.</span></span> <span data-ttu-id="500fb-108">Quando viene inviato un comando, a ogni comando è associata una priorità.</span><span class="sxs-lookup"><span data-stu-id="500fb-108">When a command is submitted, each command has a priority associated with it.</span></span> <span data-ttu-id="500fb-109">TBS usa queste priorità per determinare quale comando in sospeso inviare ogni volta che il TPM è libero.</span><span class="sxs-lookup"><span data-stu-id="500fb-109">The TBS uses these priorities to determine which pending command to submit whenever the TPM is free.</span></span> <span data-ttu-id="500fb-110">I quattro livelli di priorità sono low, Normal, High e System.</span><span class="sxs-lookup"><span data-stu-id="500fb-110">The four levels of priority are low, normal, high, and system.</span></span> <span data-ttu-id="500fb-111">Le applicazioni devono utilizzare la priorità bassa, normale o alta.</span><span class="sxs-lookup"><span data-stu-id="500fb-111">Applications should use low, normal, or high priority.</span></span> <span data-ttu-id="500fb-112">Anche se i comandi ad alta priorità vengono in genere eseguiti prima di quelli con priorità bassa, l'utilità di pianificazione dei comandi di TBS dispone di un criterio di invecchiamento che fornisce una priorità molto elevata ai comandi che sono stati bloccati per periodi di tempo significativi.</span><span class="sxs-lookup"><span data-stu-id="500fb-112">Although high-priority commands are usually executed before low-priority commands, the TBS command scheduler has an aging policy that eventually gives very high priority to commands that have been blocked for significant periods of time.</span></span>

## <a name="context-management"></a><span data-ttu-id="500fb-113">Gestione del contesto</span><span class="sxs-lookup"><span data-stu-id="500fb-113">Context Management</span></span>

<span data-ttu-id="500fb-114">Quando un \_ comando TPM SaveContext o TPM2 ContextSave viene inviato con un handle virtuale a una risorsa gestita da TBS, TBS esegue il comando appropriato sulla risorsa fisica e restituisce il risultato al chiamante se la risorsa è fisicamente presente nel TPM.</span><span class="sxs-lookup"><span data-stu-id="500fb-114">When a TPM\_SaveContext or TPM2 ContextSave command is submitted with a virtual handle to a resource that the TBS is managing, the TBS executes the appropriate command on the physical resource and returns the result to the caller if the resource is physically present in the TPM.</span></span> <span data-ttu-id="500fb-115">Se la risorsa non è fisicamente presente nel TPM, la pre-elaborazione del \_ comando TPM SaveContext o TPM2 \_ ContextSave causa il ricaricamento della risorsa, a quel punto il contesto verrà salvato e restituito al chiamante.</span><span class="sxs-lookup"><span data-stu-id="500fb-115">If the resource is not physically present in the TPM, the preprocessing of the TPM\_SaveContext or TPM2\_ContextSave command causes the resource to be reloaded, at which point the context will be saved and returned to the caller.</span></span> <span data-ttu-id="500fb-116">Se la risorsa salvata è di un tipo che in genere viene scaricata automaticamente dal TPM dopo il salvataggio, il comando TBS invalida la risorsa virtuale al completamento di questo comando.</span><span class="sxs-lookup"><span data-stu-id="500fb-116">If the resource being saved is of a type that is normally flushed automatically from the TPM after saving, the TBS invalidates the virtual resource upon completion of this command.</span></span> <span data-ttu-id="500fb-117">Quando un \_ comando TPM LoadContext o TPM2 \_ ContextLoad viene inviato a TBS, il comando viene eseguito immediatamente da TBS.</span><span class="sxs-lookup"><span data-stu-id="500fb-117">When a TPM\_LoadContext or TPM2\_ContextLoad command is submitted to the TBS, the TBS executes the command immediately.</span></span> <span data-ttu-id="500fb-118">Se il comando viene completato correttamente, TBS virtualizza l'handle di risorsa e passa il flusso di byte TPM risultante al chiamante.</span><span class="sxs-lookup"><span data-stu-id="500fb-118">If the command completes successfully, the TBS virtualizes the resource handle and passes the resulting TPM byte stream to the caller.</span></span> <span data-ttu-id="500fb-119">Quando un \_ comando TPM FlushSpecific o TPM2 \_ FlushContext viene inviato con un handle virtuale a una risorsa gestita da TBS, TBS esegue un \_ comando TPM FlushSpecific o TPM2 \_ FlushContext per rimuovere la risorsa dal TPM se è fisicamente presente.</span><span class="sxs-lookup"><span data-stu-id="500fb-119">When a TPM\_FlushSpecific or TPM2\_FlushContext command is submitted with a virtual handle to a resource that the TBS is managing, the TBS executes a TPM\_FlushSpecific or TPM2\_FlushContext command to evict the resource from the TPM if it is physically present.</span></span> <span data-ttu-id="500fb-120">In questo caso, TBS invalida la risorsa virtuale e restituisce il risultato del comando flush al chiamante.</span><span class="sxs-lookup"><span data-stu-id="500fb-120">In this case, the TBS invalidates the virtual resource and returns the result of the flush command to the caller.</span></span> <span data-ttu-id="500fb-121">Se la risorsa non è fisicamente presente nel TPM, la pre-elaborazione del \_ comando TPM FlushSpecific o TPM2 \_ FlushContext caricherà la risorsa corrispondente all'handle virtuale, che verrà quindi scaricata quando il comando verrà effettivamente elaborato.</span><span class="sxs-lookup"><span data-stu-id="500fb-121">If the resource is not physically present in the TPM, the preprocessing of the TPM\_FlushSpecific or TPM2\_FlushContext command will load the resource that corresponds to the virtual handle, but it will then be flushed when the command is actually processed.</span></span> <span data-ttu-id="500fb-122">TBS non supporta il \_ bit KEYCONTROLOWNER TPM o la funzionalità keepHandle dell' \_ operazione LoadContext TPM, quindi non fornirà a una risorsa lo stesso handle prima del salvataggio del contesto.</span><span class="sxs-lookup"><span data-stu-id="500fb-122">The TBS does not support the TPM\_KeyControlOwner bit or the keepHandle functionality of the TPM\_LoadContext operation, so it will not give a resource the same handle it had before the context was saved.</span></span>

## <a name="other-commands"></a><span data-ttu-id="500fb-123">Altri comandi</span><span class="sxs-lookup"><span data-stu-id="500fb-123">Other Commands</span></span>

<span data-ttu-id="500fb-124">I comandi che non vengono citati in questa documentazione vengono elaborati sostituendo gli handle di chiave virtuale con handle di chiave fisici (se necessario) e inviando questi ultimi al TPM.</span><span class="sxs-lookup"><span data-stu-id="500fb-124">Commands that are not mentioned in this documentation are processed by replacing virtual key handles with physical key handles (if necessary) and submitting them to the TPM.</span></span> <span data-ttu-id="500fb-125">Questa operazione viene eseguita dopo l'esecuzione delle operazioni appropriate per garantire che le risorse utilizzate siano fisicamente presenti sul TPM.</span><span class="sxs-lookup"><span data-stu-id="500fb-125">This is done after performing the appropriate operations to ensure that resources being used are physically present on the TPM.</span></span> <span data-ttu-id="500fb-126">Non viene eseguita alcuna elaborazione speciale aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="500fb-126">No additional special processing is performed.</span></span> <span data-ttu-id="500fb-127">TBS non tenta di migliorare la fedeltà della virtualizzazione modificando i dati passati dal TPM come parte di una \_ query GetCapabilities o TPM2 \_ GetCapability del TPM.</span><span class="sxs-lookup"><span data-stu-id="500fb-127">The TBS does not attempt to improve the fidelity of the virtualization by modifying data passed back from the TPM as part of a TPM\_GetCapabilities or TPM2\_GetCapability query.</span></span> <span data-ttu-id="500fb-128">TBS supporta anche i comandi di presenza fisica TCG.</span><span class="sxs-lookup"><span data-stu-id="500fb-128">The TBS also supports TCG Physical Presence commands.</span></span> <span data-ttu-id="500fb-129">TBS funge da pass-through per i comandi di presenza fisica. non viene eseguita alcuna elaborazione speciale da TBS.</span><span class="sxs-lookup"><span data-stu-id="500fb-129">The TBS acts as a pass-through for Physical Presence commands; no special processing is performed by the TBS itself.</span></span>

## <a name="cleanup"></a><span data-ttu-id="500fb-130">Pulizia</span><span class="sxs-lookup"><span data-stu-id="500fb-130">Cleanup</span></span>

<span data-ttu-id="500fb-131">Quando si esce da un contesto, viene eseguita la pulizia di tutte le risorse fisiche e virtuali associate, in modo che non utilizzino più risorse di sistema.</span><span class="sxs-lookup"><span data-stu-id="500fb-131">When a context exits, all physical and virtual resources associated with it are cleaned up so they no longer consume system resources.</span></span>

 

 




