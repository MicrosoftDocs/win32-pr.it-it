---
title: Procedure consigliate per l'installazione per giochi multiplayer online
description: Questo articolo descrive la creazione di una catena di progettazione di attendibilità per l'installazione client di MMOG (Massively multiplayer online) e sistemi di aggiornamento dei giochi personalizzati che funzionano bene con Windows e con il modello di sicurezza di Windows Vista e Windows 7.
ms.assetid: b719cff7-97e8-5e0a-9c91-3bd8178da7c8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e81003a434b830f046c29d606355104fe618d1f5
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104046978"
---
# <a name="installation-best-practices-for-massively-multiplayer-online-games"></a><span data-ttu-id="7e425-103">Procedure consigliate per l'installazione per giochi multiplayer online</span><span class="sxs-lookup"><span data-stu-id="7e425-103">Installation Best Practices for Massively Multiplayer Online Games</span></span>

<span data-ttu-id="7e425-104">Questo articolo descrive la creazione di una catena di progettazione di attendibilità per l'installazione client di MMOG (Massively multiplayer online) e sistemi di aggiornamento dei giochi personalizzati che funzionano bene con Windows e con il modello di sicurezza di Windows Vista e Windows 7.</span><span class="sxs-lookup"><span data-stu-id="7e425-104">This article describes creating a chain of trust design for Massively Multiplayer Online Games (MMOG) client installation and custom game update systems that work well with Windows and the security model of Windows Vista and Windows 7.</span></span> <span data-ttu-id="7e425-105">Questo approccio è progettato per consentire l'applicazione di patch ai titoli MMOG, supportando gli account utente standard, che hanno accesso limitato al disco rigido e al registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="7e425-105">The approach is designed to enable patching of MMOG titles while supporting standard user accounts, which have restricted access to the hard drive and system registry.</span></span>

-   [<span data-ttu-id="7e425-106">Perché i client MMOG hanno requisiti diversi per i tradizionali giochi acquistati al dettaglio</span><span class="sxs-lookup"><span data-stu-id="7e425-106">Why MMOG Clients Have Different Requirements to Traditional Retail Purchased Games</span></span>](#why-mmog-clients-have-different-requirements-to-traditional-retail-purchased-games)
-   [<span data-ttu-id="7e425-107">Panoramica di una catena di approcci di attendibilità</span><span class="sxs-lookup"><span data-stu-id="7e425-107">Overview of a Chain of Trust Approach</span></span>](#overview-of-a-chain-of-trust-approach)
-   [<span data-ttu-id="7e425-108">Tutti gli elementi vengono convalidati sul server, perché è necessario preoccuparsi se il client viene hackerato?</span><span class="sxs-lookup"><span data-stu-id="7e425-108">Everything is validated on the server, why should I worry if my client gets hacked?</span></span>](#everything-is-validated-on-the-server-why-should-i-worry-if-my-client-gets-hacked)
-   [<span data-ttu-id="7e425-109">Creazione dell'applicazione Trust-Worthy Loader</span><span class="sxs-lookup"><span data-stu-id="7e425-109">Construction of the Trust-Worthy Loader Application</span></span>](#construction-of-the-trust-worthy-loader-application)
    -   [<span data-ttu-id="7e425-110">Lettura in background</span><span class="sxs-lookup"><span data-stu-id="7e425-110">Background Reading</span></span>](#background-reading)
    -   [<span data-ttu-id="7e425-111">Installazione del caricatore attendibile e del Patcher</span><span class="sxs-lookup"><span data-stu-id="7e425-111">Installation of the Trusted Loader and Patcher</span></span>](#installation-of-the-trusted-loader-and-patcher)
    -   [<span data-ttu-id="7e425-112">Installazione dei file eseguibili, delle dll e dei dati del gioco</span><span class="sxs-lookup"><span data-stu-id="7e425-112">Installation of the Game Executables, DLLs, and Data</span></span>](#installation-of-the-game-executables-dlls-and-data)
    -   [<span data-ttu-id="7e425-113">Codice di modifica dell'elenco di controllo di accesso</span><span class="sxs-lookup"><span data-stu-id="7e425-113">Access Control List Modification Code</span></span>](#access-control-list-modification-code)
    -   [<span data-ttu-id="7e425-114">Installazioni per utenti avanzati</span><span class="sxs-lookup"><span data-stu-id="7e425-114">Installations for Advanced Users</span></span>](#installations-for-advanced-users)
    -   [<span data-ttu-id="7e425-115">Verifica dell'attendibilità del caricatore</span><span class="sxs-lookup"><span data-stu-id="7e425-115">The Loader's Verification of Trust</span></span>](#the-loaders-verification-of-trust)
    -   [<span data-ttu-id="7e425-116">Convalida dei dati</span><span class="sxs-lookup"><span data-stu-id="7e425-116">Data Validation</span></span>](#data-validation)

## <a name="why-mmog-clients-have-different-requirements-to-traditional-retail-purchased-games"></a><span data-ttu-id="7e425-117">Perché i client MMOG hanno requisiti diversi per i tradizionali giochi acquistati al dettaglio</span><span class="sxs-lookup"><span data-stu-id="7e425-117">Why MMOG Clients Have Different Requirements to Traditional Retail Purchased Games</span></span>

<span data-ttu-id="7e425-118">La natura costantemente connessa e in evoluzione di MMOG rende un requisito fondamentale per fornire aggiornamenti regolari del codice client e del contenuto per correggere le vulnerabilità di sicurezza ed estendere l'esperienza di gioco.</span><span class="sxs-lookup"><span data-stu-id="7e425-118">The constantly connected and evolving nature of MMOGs makes it a fundamental requirement to provide regular updates of client code and content to fix security vulnerabilities and extend the gameplay experience.</span></span> <span data-ttu-id="7e425-119">Con la possibilità di aggiornamenti quasi giornalieri, lo scenario MMOG richiede una gestione attenta per garantire un'esperienza intuitiva.</span><span class="sxs-lookup"><span data-stu-id="7e425-119">With the potential for almost daily updates, the MMOG scenario requires careful management to ensure a user friendly experience.</span></span> <span data-ttu-id="7e425-120">Questo comportamento è diverso rispetto al modello di acquisto al dettaglio tradizionale, in cui è possibile fornire un numero ridotto di patch vicino alla data di spedizione al dettaglio del prodotto.</span><span class="sxs-lookup"><span data-stu-id="7e425-120">This differs from the traditional retail purchase model where a small number of patches may be provided close to the retail ship date of the product.</span></span> <span data-ttu-id="7e425-121">La Windows Installer tecnologia limitata per l'applicazione di patch per gli utenti fornita con il sistema operativo è progettata per gestire un numero ridotto di patch per le applicazioni e non per la grande quantità e la massima frequenza richiesta da MMOG.</span><span class="sxs-lookup"><span data-stu-id="7e425-121">The Windows Installer limited user patching technology provided with the operating system is designed to handle small numbers of application patches, and not the large quantity and high frequency needed by MMOGs.</span></span> <span data-ttu-id="7e425-122">Spesso è necessario che i sistemi di applicazione di patch personalizzati vengano sviluppati per soddisfare le esigenze di MMOG, inclusi i requisiti speciali specifici per il particolare MMOG sviluppato.</span><span class="sxs-lookup"><span data-stu-id="7e425-122">It is therefore often necessary for custom patching systems to be developed to address the needs of MMOGs, including any special requirements specific to the particular MMOG being developed.</span></span>

<span data-ttu-id="7e425-123">Poiché molti computer sono connessi a Internet, Windows Vista e Windows 7 presentano restrizioni e misure di sicurezza più complesse per gli utenti, che limitano l'accesso alle applicazioni per le varie aree del disco rigido.</span><span class="sxs-lookup"><span data-stu-id="7e425-123">Because so many computers are connected to the Internet, Windows Vista and Windows 7 have tougher security restrictions and safeguards for users, which limit the access that applications have to various areas of the hard drive.</span></span> <span data-ttu-id="7e425-124">A differenza di Windows XP, queste restrizioni sono abilitate per la modalità predefinita per gli account utente.</span><span class="sxs-lookup"><span data-stu-id="7e425-124">Unlike Windows XP, these restrictions are enabled for the default mode for user accounts.</span></span> <span data-ttu-id="7e425-125">Queste restrizioni devono essere prese in considerazione quando si progetta il layout di un gioco, un file eseguibile e i dati e il sistema di applicazione delle patch associato.</span><span class="sxs-lookup"><span data-stu-id="7e425-125">These restrictions must be taken into account when designing the layout of a game, executable and data, and its associated patching system.</span></span> <span data-ttu-id="7e425-126">Per altri dettagli sulle misure di sicurezza fornite dal sistema operativo, vedere [controllo dell'account utente per sviluppatori di giochi](/windows/desktop/DxTechArts/user-account-control-for-game-developers).</span><span class="sxs-lookup"><span data-stu-id="7e425-126">For more details about the security measures provided by the operating system, see [User Account Control for Game Developers](/windows/desktop/DxTechArts/user-account-control-for-game-developers).</span></span>

## <a name="overview-of-a-chain-of-trust-approach"></a><span data-ttu-id="7e425-127">Panoramica di una catena di approcci di attendibilità</span><span class="sxs-lookup"><span data-stu-id="7e425-127">Overview of a Chain of Trust Approach</span></span>

<span data-ttu-id="7e425-128">L'approccio di aggiornamento personalizzato presentato in questo white paper si basa sul fatto che un'applicazione di caricatore attendibile è installata nella cartella programmi protetti, mantenendo i file eseguibili dei giochi e i dati in un'area condivisa accessibile da tutti gli utenti.</span><span class="sxs-lookup"><span data-stu-id="7e425-128">The custom update approach presented in this whitepaper is based upon having a trustworthy loader application installed to the protected Program Files folder while keeping the games executable files and data in a shared all-user-accessible area.</span></span> <span data-ttu-id="7e425-129">Una catena di trust inizia con il caricatore che esegue controlli di validità sui file binari e sui dati del gioco prima dell'avvio.</span><span class="sxs-lookup"><span data-stu-id="7e425-129">A chain of trust starts with the loader which performs validity checks on the game binaries and data before launch.</span></span>

![la catena di attendibilità inizia con un caricatore attendibile](images/mmo-installation-best-practices-01.gif)

<span data-ttu-id="7e425-131">Il caricatore attendibile deve avere una logica sufficiente per essere in grado di verificare che l'eseguibile del gioco e altri file binari non siano stati manomessi prima di avviare il gioco.</span><span class="sxs-lookup"><span data-stu-id="7e425-131">The trustworthy loader needs to have enough logic to be able to verify that the game's executable and other binaries have not been tampered with before launching the game.</span></span> <span data-ttu-id="7e425-132">Il caricatore può inoltre verificare i dati del gioco con la frequenza necessaria. Tuttavia, le dimensioni dei dati del gioco sono in genere troppo grandi per consentire la verifica ogni volta in un singolo passaggio.</span><span class="sxs-lookup"><span data-stu-id="7e425-132">The loader may also verify game data as often as needed, however, the size of game data is usually too large to allow it be checked every time in a single pass.</span></span> <span data-ttu-id="7e425-133">Un approccio alternativo consiste nell'usare un modello di campionamento che garantisce che la verifica dell'intero set di dati venga eseguita in un periodo di tempo prolungato.</span><span class="sxs-lookup"><span data-stu-id="7e425-133">An alternative approach is to use a sampling pattern which ensures that verification of the entire data set occurs over an extended period of time.</span></span> <span data-ttu-id="7e425-134">L'applicazione Loader può contenere un motore di patch del gioco, che fornisce un metodo di attendibilità degno da per integrare gli aggiornamenti con il gioco installato.</span><span class="sxs-lookup"><span data-stu-id="7e425-134">The loader application may contain a game patching engine, which provides a trust worthy method by to integrate updates with the installed game.</span></span>

## <a name="everything-is-validated-on-the-server-why-should-i-worry-if-my-client-gets-hacked"></a><span data-ttu-id="7e425-135">Tutti gli elementi vengono convalidati sul server, perché è necessario preoccuparsi se il client viene hackerato?</span><span class="sxs-lookup"><span data-stu-id="7e425-135">Everything is validated on the server, why should I worry if my client gets hacked?</span></span>

<span data-ttu-id="7e425-136">Non è possibile considerare attendibile che il client non sia stato compromesso; è pertanto comune per i server MMOG convalidare tutti i dati ricevuti dal client.</span><span class="sxs-lookup"><span data-stu-id="7e425-136">It is impossible to trust that the client has not been compromised; therefore it is common for MMOG servers to validate all data received from the client.</span></span> <span data-ttu-id="7e425-137">Sebbene questa elaborazione possa identificare i client di gioco compromessi o barare nell'universo del gioco, il server non è in grado di identificare facilmente tutti i problemi a cui è possibile esporre il client di gioco.</span><span class="sxs-lookup"><span data-stu-id="7e425-137">While this processing can identify compromised or cheating game clients within the game universe, the server cannot easily identify all issues the game client can be exposed to.</span></span> <span data-ttu-id="7e425-138">È importante rafforzare la protezione da hacker che vogliono usare il client come piattaforma per gli attacchi al servizio, ad altri utenti o anche semplicemente come vettore per attaccare i computer client.</span><span class="sxs-lookup"><span data-stu-id="7e425-138">It's important to strengthen protection from hackers who wish to use your client as a platform for attacks on your service, other users, or even simply as a vector for attacking the client machines themselves.</span></span> <span data-ttu-id="7e425-139">L'applicazione delle tecniche di firma del codice e di verifica dei dati consente di rilevare i client compromessi prima di essere eseguiti.</span><span class="sxs-lookup"><span data-stu-id="7e425-139">The application of code signing and data verification techniques can help detect compromised clients before they get executed.</span></span> <span data-ttu-id="7e425-140">Poiché il meccanismo di applicazione delle patch richiede l'esposizione di file binari eseguibili e DLL non protetti dalle autorizzazioni di sola lettura standard per i file di programma, la convalida di questi file prima dell'avvio è importante per la sicurezza complessiva del sistema.</span><span class="sxs-lookup"><span data-stu-id="7e425-140">Since the patching mechanism requires exposing executable and DLL binaries that are not protected by the standard read-only permissions on Program Files, validating these files before launching them is important for overall system security.</span></span>

<span data-ttu-id="7e425-141">Questo modello non tenta di gestire lo scenario utente malintenzionato di amministrazione in cui il caricatore stesso potrebbe diventare compromesso ma è incentrato sulla protezione degli utenti standard dal codice alterato per l'esecuzione accidentale.</span><span class="sxs-lookup"><span data-stu-id="7e425-141">This model does not attempt to deal with the malicious admin user scenario where the loader itself could become compromised but focuses on protecting standard users from accidentally running tampered code.</span></span> <span data-ttu-id="7e425-142">Le tecniche di convalida dei client server tradizionali sono in realtà l'unica possibile mitigazione per gli amministratori di sistema client dannosi.</span><span class="sxs-lookup"><span data-stu-id="7e425-142">Traditional server-client validation techniques are really the only possible mitigation for malicious client system administrators.</span></span>

## <a name="construction-of-the-trust-worthy-loader-application"></a><span data-ttu-id="7e425-143">Creazione dell'applicazione Trust-Worthy Loader</span><span class="sxs-lookup"><span data-stu-id="7e425-143">Construction of the Trust-Worthy Loader Application</span></span>

### <a name="background-reading"></a><span data-ttu-id="7e425-144">Lettura in background</span><span class="sxs-lookup"><span data-stu-id="7e425-144">Background Reading</span></span>

<span data-ttu-id="7e425-145">I lettori devono acquisire familiarità con la seguente documentazione, che fornisce i dettagli della tecnologia di base per garantire la procedura consigliata per l'attendibilità basata su software.</span><span class="sxs-lookup"><span data-stu-id="7e425-145">Readers should familiarize themselves with the following documentation, which provides details of the foundation technology for ensuring best practice for software based trust.</span></span>

<dl> <dt>

<span data-ttu-id="7e425-146"><span id="Code_Signing"></span><span id="code_signing"></span><span id="CODE_SIGNING"></span>Firma del codice</span><span class="sxs-lookup"><span data-stu-id="7e425-146"><span id="Code_Signing"></span><span id="code_signing"></span><span id="CODE_SIGNING"></span>Code Signing</span></span>
</dt> <dd>

[<span data-ttu-id="7e425-147">Firma Authenticode per sviluppatori di giochi</span><span class="sxs-lookup"><span data-stu-id="7e425-147">Authenticode Signing for Game Developers</span></span>](/windows/desktop/DxTechArts/authenticode-signing-for-game-developers)

</dd> <dt>

<span data-ttu-id="7e425-148"><span id="SignTool"></span><span id="signtool"></span><span id="SIGNTOOL"></span>SignTool</span><span class="sxs-lookup"><span data-stu-id="7e425-148"><span id="SignTool"></span><span id="signtool"></span><span id="SIGNTOOL"></span>SignTool</span></span>
</dt> <dd>

<span data-ttu-id="7e425-149">[SignTool](/windows/desktop/SecCrypto/signtool) su MSDN</span><span class="sxs-lookup"><span data-stu-id="7e425-149">[SignTool](/windows/desktop/SecCrypto/signtool) on MSDN</span></span>

</dd> </dl>

<span data-ttu-id="7e425-150">La sezione seguente illustra in dettaglio le API che devono essere usate per costruire l'applicazione Loader, che supporta il layout del disco per l'installazione e la verifica del controllo di attendibilità.</span><span class="sxs-lookup"><span data-stu-id="7e425-150">The following section details the APIs that should be used to construct the loader application, which support disc layout for install and verification of trust checking.</span></span>

### <a name="installation-of-the-trusted-loader-and-patcher"></a><span data-ttu-id="7e425-151">Installazione del caricatore attendibile e del Patcher</span><span class="sxs-lookup"><span data-stu-id="7e425-151">Installation of the Trusted Loader and Patcher</span></span>

<span data-ttu-id="7e425-152">Il caricatore attendibile e la versione di base dell'utilità Patcher devono essere installati nella cartella programmi protetti sul disco rigido come nelle installazioni tradizionali.</span><span class="sxs-lookup"><span data-stu-id="7e425-152">The trusted loader and base version of the patcher utility should be installed under the protected Program Files folder on the HDD just as in traditional installs.</span></span> <span data-ttu-id="7e425-153">Per l'installazione e l'applicazione di patch dell'applicazione Loader sono necessari i diritti di amministratore ed è quindi importante ridurre al minimo la frequenza di aggiornamento per il caricatore, in modo da garantire che gli utenti finali non debbano elevare spesso il numero di patch per l'utente, anche Windows Installer se è possibile usare l'applicazione di patch per i caricatori.</span><span class="sxs-lookup"><span data-stu-id="7e425-153">Installation and patching of the loader application requires Admin rights so it is important to minimize the frequency of update for the loader to ensure end users do not need to elevate often, although Windows Installer limited user patching could be used to avoid elevation for loader patches.</span></span>

<span data-ttu-id="7e425-154">Vedere l'articolo patching Game software in Windows XP, Windows Vista e Windows 7.</span><span class="sxs-lookup"><span data-stu-id="7e425-154">See the article Patching Game Software in Windows XP, Windows Vista, and Windows 7.</span></span>

### <a name="installation-of-the-game-executables-dlls-and-data"></a><span data-ttu-id="7e425-155">Installazione dei file eseguibili, delle dll e dei dati del gioco</span><span class="sxs-lookup"><span data-stu-id="7e425-155">Installation of the Game Executables, DLLs, and Data</span></span>

<span data-ttu-id="7e425-156">Per semplificare gli aggiornamenti standard degli utenti del gioco senza privilegi amministrativi, è necessario installare l'eseguibile dei giochi, le dll e i dati in un'area del disco rigido che sia accessibile in scrittura per tutti gli utenti.</span><span class="sxs-lookup"><span data-stu-id="7e425-156">In order to facilitate Standard User updates of the game without administrative privilege, the games executable, DLLs, and data must be installed to an area of the hard disk that is write accessible for all users.</span></span> <span data-ttu-id="7e425-157">Il sistema operativo fornisce un'area "tutti gli utenti dati dell'applicazione" che può essere usata come percorso predefinito per l'installazione.</span><span class="sxs-lookup"><span data-stu-id="7e425-157">The operating system provides an "All Users Application Data" area which can be used as the default location for installation.</span></span> <span data-ttu-id="7e425-158">[**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) deve essere usato con la \_ \_ chiave AppData comune CSIDL per determinare il percorso del file per quest'area.</span><span class="sxs-lookup"><span data-stu-id="7e425-158">[**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) should be used with the CSIDL\_COMMON\_APPDATA key to determine the file path for this area.</span></span> <span data-ttu-id="7e425-159">È importante che non venga fatta alcuna ipotesi sul percorso a cui viene restituita la chiave, perché può essere configurabile dall'utente.</span><span class="sxs-lookup"><span data-stu-id="7e425-159">It is important that no assumptions be made about the path to which this key returns as it may be user configurable.</span></span>

<span data-ttu-id="7e425-160">L'installazione deve modificare o gestire le autorizzazioni per la cartella in modo da ottenere l'accesso all-user-Shared-Write necessario per l'aggiornamento del titolo.</span><span class="sxs-lookup"><span data-stu-id="7e425-160">The installation needs to alter or manage the folder permissions in order to achieve the all-user-shared-write access needed for updating the title.</span></span> <span data-ttu-id="7e425-161">Con le autorizzazioni corrette, la funzionalità di aggiornamento del gioco del programma di caricamento può facilmente applicare patch al gioco senza la necessità di privilegi speciali da parte di un account utente, inclusi i tempi di avvio da parte degli utenti standard.</span><span class="sxs-lookup"><span data-stu-id="7e425-161">With the correct permissions, the game updater functionality of the loader program can easily patch the game without the need for special privilege from any users account including times when launched by standard users.</span></span>

### <a name="access-control-list-modification-code"></a><span data-ttu-id="7e425-162">Codice di modifica dell'elenco di controllo di accesso</span><span class="sxs-lookup"><span data-stu-id="7e425-162">Access Control List Modification Code</span></span>

<span data-ttu-id="7e425-163">Per Windows XP, è necessario eseguire il codice per modificare manualmente l'elenco di controllo di accesso (ACL). di seguito è riportato un esempio di funzione che illustra come eseguire questa operazione:</span><span class="sxs-lookup"><span data-stu-id="7e425-163">For Windows XP, you will need to execute code to change the access control list (ACL) manually, here is an example function that demonstrates how to do this:</span></span>

``` syntax
HRESULT ChangeACLtoAllowUserRW( WCHAR* strDir )
{
    EXPLICIT_ACCESS explicitaccess;
    PACL NewAcl = NULL;
    DWORD dwError;

    BuildExplicitAccessWithName( &explicitaccess, L"BUILTIN\\Users",
                                 GENERIC_ALL, GRANT_ACCESS,
                                 SUB_CONTAINERS_AND_OBJECTS_INHERIT );
                                 
    dwError = SetEntriesInAcl( 1, &explicitaccess, NULL, &NewAcl );
    if( dwError == ERROR_SUCCESS) 
    {
        dwError = SetNamedSecurityInfo( strDir, SE_FILE_OBJECT,
                                        DACL_SECURITY_INFORMATION,
                                        NULL, NULL, NewAcl, NULL );
        if( dwError == ERROR_SUCCESS)
        {
            if( NewAcl != NULL ) AccFree( NewAcl );
            return S_OK;
        }
    }

    if( NewAcl != NULL ) AccFree( NewAcl );
    return E_FAIL;
}
```

<span data-ttu-id="7e425-164">Questo esempio di codice funziona anche per Windows Vista e Windows 7; Tuttavia, forniscono anche l'utilità della riga di comando icacls per modificare gli ACL dei file che è possibile scegliere di usare.</span><span class="sxs-lookup"><span data-stu-id="7e425-164">This code example will also work for Windows Vista and Windows 7; however, they also provide the command line utility icacls to edit file ACLS which you may choose to use instead.</span></span>

<span data-ttu-id="7e425-165">Lo strumento fornisce una guida dettagliata quando viene eseguito, tuttavia, un esempio di utilizzo per lo strumento è:</span><span class="sxs-lookup"><span data-stu-id="7e425-165">The tool provides a detailed help when executed however, one example usage for the tool is:</span></span>

``` syntax
icacls "C:\Users\All Users\Game" /grant Rex:(D,WDAC)
```

<span data-ttu-id="7e425-166">Questo utilizzo consentirà all'utente le autorizzazioni di eliminazione e scrittura DAC per la cartella di gioco archiviate nelle aree tutti gli utenti del disco rigido.</span><span class="sxs-lookup"><span data-stu-id="7e425-166">This usage will grant the user Rex Delete and Write DAC permissions to game folder stored in the All Users areas of the hard drive.</span></span>

### <a name="installations-for-advanced-users"></a><span data-ttu-id="7e425-167">Installazioni per utenti avanzati</span><span class="sxs-lookup"><span data-stu-id="7e425-167">Installations for Advanced Users</span></span>

<span data-ttu-id="7e425-168">Per gli scenari di installazione avanzata degli utenti, è possibile che un utente desideri specificare il percorso di installazione dei giochi manualmente.</span><span class="sxs-lookup"><span data-stu-id="7e425-168">For advanced user installation scenarios, a user may want to specify the games installation path manually.</span></span> <span data-ttu-id="7e425-169">La selezione della directory deve essere limitata a uno all'esterno dei file di programma per assicurarsi che la cartella si trovi in un'area realmente condivisibile del disco rigido.</span><span class="sxs-lookup"><span data-stu-id="7e425-169">The directory selection should be restricted to one outside of program files to ensure the folder is in a truly sharable area of the hard drive.</span></span> <span data-ttu-id="7e425-170">Il percorso selezionato dall'utente deve essere usato solo per i file exe e i dati dei giochi, perché il caricatore del gioco e gli exe delle patch devono sempre essere installati nella cartella programmi protetti per una maggiore sicurezza.</span><span class="sxs-lookup"><span data-stu-id="7e425-170">The user selected path should only be used for the games exes and data as the game Loader and Patcher exes should always be installed under the secure Program Files folder for better security.</span></span>

### <a name="the-loaders-verification-of-trust"></a><span data-ttu-id="7e425-171">Verifica dell'attendibilità del caricatore</span><span class="sxs-lookup"><span data-stu-id="7e425-171">The Loader's Verification of Trust</span></span>

<span data-ttu-id="7e425-172">Windows fornisce la funzione [**WinVerifyTrust**](/windows/desktop/api/wintrust/nf-wintrust-winverifytrust) per verificare la validità del codice firmato ed è basata sui servizi di crittografia nel sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="7e425-172">Windows provides the [**WinVerifyTrust**](/windows/desktop/api/wintrust/nf-wintrust-winverifytrust) function for checking the validity of signed code and is based on the cryptographic services in the operating system.</span></span> <span data-ttu-id="7e425-173">La funzione è completamente documentata in MSDN: **WinVerifyTrust** function.</span><span class="sxs-lookup"><span data-stu-id="7e425-173">The function is fully documented on MSDN: **WinVerifyTrust** Function.</span></span>

<span data-ttu-id="7e425-174">Il programma di esempio seguente su MSDN descrive in dettaglio l'uso della funzione per determinare se un eseguibile del programma è firmato con un certificato valido: [esempio C programma: verifica della firma di un file PE](/windows/desktop/SecCrypto/example-c-program--verifying-the-signature-of-a-pe-file).</span><span class="sxs-lookup"><span data-stu-id="7e425-174">The following example program on MSDN details the use of the function to determine whether a program executable is signed with a valid certificate: [Example C Program: Verifying the Signature of a PE File](/windows/desktop/SecCrypto/example-c-program--verifying-the-signature-of-a-pe-file).</span></span>

<span data-ttu-id="7e425-175">Ai fini della verifica che l'eseguibile del gioco firmato sia attendibile per l'esecuzione dall'interno del caricatore, sarà sufficiente l'azione di verifica generica:</span><span class="sxs-lookup"><span data-stu-id="7e425-175">For the purposes of verifying that the signed game executable is trustworthy to be executed from within the loader, the Generic Verify action will suffice:</span></span>

<dl> <dt>

<span data-ttu-id="7e425-176"><span id="Value"></span><span id="value"></span><span id="VALUE"></span>Valore</span><span class="sxs-lookup"><span data-stu-id="7e425-176"><span id="Value"></span><span id="value"></span><span id="VALUE"></span>Value</span></span>
</dt> <dd>

<span data-ttu-id="7e425-177">\_ \_ Verifica generica azione Wintrust \_ \_ v2</span><span class="sxs-lookup"><span data-stu-id="7e425-177">WINTRUST\_ACTION\_GENERIC\_VERIFY\_V2</span></span>

</dd> <dt>

<span data-ttu-id="7e425-178"><span id="Meaning"></span><span id="meaning"></span><span id="MEANING"></span>Significato</span><span class="sxs-lookup"><span data-stu-id="7e425-178"><span id="Meaning"></span><span id="meaning"></span><span id="MEANING"></span>Meaning</span></span>
</dt> <dd>

<span data-ttu-id="7e425-179">Verificare un file o un oggetto utilizzando il provider di criteri Authenticode.</span><span class="sxs-lookup"><span data-stu-id="7e425-179">Verify a file or object using the Authenticode policy provider.</span></span>

</dd> </dl>

<span data-ttu-id="7e425-180">La funzione accetta un argomento della struttura di input che contiene le informazioni necessarie al provider di attendibilità per elaborare l'azione specificata.</span><span class="sxs-lookup"><span data-stu-id="7e425-180">The function takes an input structure argument which contains information that the trust provider needs to process the specified action.</span></span> <span data-ttu-id="7e425-181">In genere, come nel caso di esempio precedente, la struttura include informazioni che identificano l'oggetto che deve essere valutato dal provider di attendibilità.</span><span class="sxs-lookup"><span data-stu-id="7e425-181">Typically, as in the preceding example case, the structure includes information that identifies the object that the trust provider must evaluate.</span></span>

<span data-ttu-id="7e425-182">Il formato della struttura è specifico dell'identificatore dell'azione.</span><span class="sxs-lookup"><span data-stu-id="7e425-182">The format of the structure is specific to the action identifier.</span></span> <span data-ttu-id="7e425-183">Nell'argomento seguente su MSDN viene illustrata la struttura di esempio per la struttura di [**\_ dati**](/windows/desktop/api/wintrust/ns-wintrust-wintrust_data) Wintrust provider: wintrust.</span><span class="sxs-lookup"><span data-stu-id="7e425-183">The following topic on MSDN details the example structure for the WinTrust provider: [**WINTRUST\_DATA**](/windows/desktop/api/wintrust/ns-wintrust-wintrust_data) Structure.</span></span>

<span data-ttu-id="7e425-184">Se il provider di attendibilità verifica che l'oggetto sia considerato attendibile per l'azione specificata, il valore restituito è zero.</span><span class="sxs-lookup"><span data-stu-id="7e425-184">If the trust provider verifies that the subject is trusted for the specified action, the return value is zero.</span></span> <span data-ttu-id="7e425-185">Nessun altro valore oltre a zero deve essere considerato un risultato positivo.</span><span class="sxs-lookup"><span data-stu-id="7e425-185">No other value besides zero should be considered a successful return.</span></span>

### <a name="data-validation"></a><span data-ttu-id="7e425-186">Convalida dei dati</span><span class="sxs-lookup"><span data-stu-id="7e425-186">Data Validation</span></span>

<span data-ttu-id="7e425-187">Il meccanismo di coprogettazione supporta solo la firma di alcuni tipi specifici di file, inclusi i file eseguibili, le dll, i pacchetti Windows Installer (file con estensione msi) e i file CAB (CAB).</span><span class="sxs-lookup"><span data-stu-id="7e425-187">The codesigning mechanism only supports signing a few specific types of files, including executables, DLLs, Windows Installer packages (.msi files), and cabinet (.cab) files.</span></span> <span data-ttu-id="7e425-188">L'API [**WinVerifyTrust**](/windows/desktop/api/wintrust/nf-wintrust-winverifytrust) non deve essere usata per verificare che i file di dati di grandi dimensioni (ad esempio file con estensione cab) non siano stati manomessi, in quanto si verificano problemi di prestazioni e stabilità durante la convalida di file di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="7e425-188">The [**WinVerifyTrust**](/windows/desktop/api/wintrust/nf-wintrust-winverifytrust) API should not be used to verify that large data files (.cab files for example) have not been tampered with, as there are some issues with performance and stability when validating very large files.</span></span> <span data-ttu-id="7e425-189">Gli eseguibili di programma tendono a essere sufficientemente piccoli da consentire l'esecuzione di un controllo di attendibilità totale usando il provider WinTrust, ma i file di dati per i giochi sono spesso dell'area di autenticazione di molti gigabyte.</span><span class="sxs-lookup"><span data-stu-id="7e425-189">Program executables tend be small enough for a full trust check to occur using the WinTrust provider but data files for games are often of the realm of many gigabytes in size.</span></span> <span data-ttu-id="7e425-190">L'approccio adottato dal caricatore per la verifica dei dati del gioco deve essere quello in cui viene testato un piccolo campione del set di dati in fase di esecuzione del gioco.</span><span class="sxs-lookup"><span data-stu-id="7e425-190">The approach taken by the loader for verification of game data should be one where a small sample of the dataset is tested over the run time of the game.</span></span> <span data-ttu-id="7e425-191">Questo approccio consente di distribuire il costo dei test di verifica rispetto alla durata dell'esperienza di gioco e di offrire un'esperienza utente uniforme senza tempi di attesa prolungati.</span><span class="sxs-lookup"><span data-stu-id="7e425-191">This approach spreads the cost of verification tests over the life of the game play experience and can provide a seamless user experience without long wait times.</span></span> <span data-ttu-id="7e425-192">Per ottenere questo risultato, potrebbe essere necessaria un'attenta organizzazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="7e425-192">To achieve this, careful organization of the data may be required.</span></span> <span data-ttu-id="7e425-193">Alcuni MMOG adottano un approccio basato su database per gestire, gestire e verificare la correttezza delle risorse dei giochi nel tempo.</span><span class="sxs-lookup"><span data-stu-id="7e425-193">Some MMOGs employ a database approach to help manage, maintain and verify correctness of game assets over time.</span></span>

<span data-ttu-id="7e425-194">Dal punto di vista della sicurezza, il codice client deve essere progettato in modo da non considerare attendibili i file di dati anche se si usa un tipo di convalida dei dati di base con il caricatore attendibile.</span><span class="sxs-lookup"><span data-stu-id="7e425-194">From a security standpoint, the client code should be designed to not trust data files even if using some kind of basic data validation with the trusted loader.</span></span> <span data-ttu-id="7e425-195">Devono essere usati controlli di intestazione, hash e altri controlli di integrità tradizionali.</span><span class="sxs-lookup"><span data-stu-id="7e425-195">Header checks, hashes, and other traditional integrity checking should be employed.</span></span> <span data-ttu-id="7e425-196">Il lavoro per la protezione avanzata del codice i/O del client deve essere eseguito anche usando tecniche quali i test fuzzy, oltre a sfruttare gli strumenti di analisi del codice statico automatici, ad esempio l'opzione **/Analyze** in visual Studio 2005 e visual Studio 2008 (disponibile in Visual Studio Team System e il compilatore gratuito fornito con il Windows SDK).</span><span class="sxs-lookup"><span data-stu-id="7e425-196">Work to hardened the client's I/O code should also be done using techniques such as fuzz testing as well as taking advantage of automatic static code analysis tools such as the **/analyze** switch in Visual Studio 2005 and Visual Studio 2008 (available in Visual Studio Team System and the free compiler that ships with the Windows SDK).</span></span>

<span data-ttu-id="7e425-197">Per ulteriori informazioni sulla sicurezza del software, vedere procedure consigliate per la [sicurezza nello sviluppo di giochi](/windows/desktop/DxTechArts/best-security-practices-in-game-development).</span><span class="sxs-lookup"><span data-stu-id="7e425-197">For more information about software security, see [Best Security Practices in Game Development](/windows/desktop/DxTechArts/best-security-practices-in-game-development).</span></span>

 

 