---
title: Giochi con account utente Least-Privileged
description: Questo articolo descrive in che modo gli sviluppatori di giochi possono creare giochi Microsoft Windows che funzionano bene con gli account utente con privilegi minimi (noti anche come account utente limitati).
ms.assetid: 1b7cc3c9-b180-14b1-53c8-57f9e545d009
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d4c44d94345462fc02ec649c5674ed88c38c12ee
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104473670"
---
# <a name="gaming-with-least-privileged-user-accounts"></a><span data-ttu-id="84070-103">Giochi con account utente Least-Privileged</span><span class="sxs-lookup"><span data-stu-id="84070-103">Gaming with Least-Privileged User Accounts</span></span>

<span data-ttu-id="84070-104">Questo articolo descrive in che modo gli sviluppatori di giochi possono creare giochi Microsoft Windows che funzionano bene con gli account utente con privilegi minimi (noti anche come account utente limitati).</span><span class="sxs-lookup"><span data-stu-id="84070-104">This article describes how games developers can author Microsoft Windows games that work well with least-privileged user accounts (also known as limited-user accounts).</span></span>

-   [<span data-ttu-id="84070-105">Introduzione</span><span class="sxs-lookup"><span data-stu-id="84070-105">Introduction</span></span>](#introduction)
-   [<span data-ttu-id="84070-106">Accesso ai file per gli account utente Least-Privileged</span><span class="sxs-lookup"><span data-stu-id="84070-106">File Access for Least-Privileged User Accounts</span></span>](#file-access-for-least-privileged-user-accounts)
    -   [<span data-ttu-id="84070-107">Scenario 1: file che non devono essere visualizzati o modificati dagli utenti</span><span class="sxs-lookup"><span data-stu-id="84070-107">Scenario 1: Files that do not need to be viewed or altered by users</span></span>](#scenario-1-files-that-do-not-need-to-be-viewed-or-altered-by-users)
    -   [<span data-ttu-id="84070-108">Scenario 2: file che devono essere visualizzati o modificati dagli utenti</span><span class="sxs-lookup"><span data-stu-id="84070-108">Scenario 2: Files that need to be viewed or altered by users</span></span>](#scenario-2-files-that-need-to-be-viewed-or-altered-by-users)
-   [<span data-ttu-id="84070-109">Accesso al registro di sistema per gli account utente Least-Privileged</span><span class="sxs-lookup"><span data-stu-id="84070-109">Registry Access for Least-Privileged User Accounts</span></span>](#registry-access-for-least-privileged-user-accounts)
-   [<span data-ttu-id="84070-110">Applicazione di patch con account utente Least-Privileged</span><span class="sxs-lookup"><span data-stu-id="84070-110">Patching with Least-Privileged User Accounts</span></span>](#patching-with-least-privileged-user-accounts)

## <a name="introduction"></a><span data-ttu-id="84070-111">Introduzione</span><span class="sxs-lookup"><span data-stu-id="84070-111">Introduction</span></span>

<span data-ttu-id="84070-112">Windows gestisce gli utenti con gli account.</span><span class="sxs-lookup"><span data-stu-id="84070-112">Windows manages its users with accounts.</span></span> <span data-ttu-id="84070-113">Attualmente, più del 80% degli utenti del computer a casa condivide il proprio computer con altri membri della famiglia.</span><span class="sxs-lookup"><span data-stu-id="84070-113">Today, more than eighty percent of computer users at home share their computer with other family members.</span></span> <span data-ttu-id="84070-114">Quando più utenti condividono un computer Windows, vengono creati più account utente e ogni utente accede con un account singolo per accedere al computer.</span><span class="sxs-lookup"><span data-stu-id="84070-114">When multiple users share a Windows computer, multiple user accounts are created, and each user logs in with an individual account to access the computer.</span></span> <span data-ttu-id="84070-115">Con la maggiore consapevolezza per la sicurezza, un maggior numero di persone opera nei propri computer con account utente con privilegi minimi, noti anche come account utente limitati, che non hanno il controllo completo sul sistema.</span><span class="sxs-lookup"><span data-stu-id="84070-115">With the increasing awareness for security, more people operate their computers with least-privileged user accounts, also known as limited-user accounts, which do not have complete control over the system.</span></span> <span data-ttu-id="84070-116">Gli account amministratore hanno in genere accesso illimitato a tutte le parti del computer.</span><span class="sxs-lookup"><span data-stu-id="84070-116">Administrator accounts typically have unrestricted access to every part of the computer.</span></span> <span data-ttu-id="84070-117">Questo può influire sul funzionamento di giochi basati su Windows.</span><span class="sxs-lookup"><span data-stu-id="84070-117">This can affect how Windows-based games work.</span></span>

<span data-ttu-id="84070-118">Sono disponibili altri vantaggi per gli sviluppatori di giochi che scrivono i giochi per lavorare con gli account utente con privilegi minimi.</span><span class="sxs-lookup"><span data-stu-id="84070-118">There are additional benefits for games developers who write their games to work with least-privileged user accounts.</span></span> <span data-ttu-id="84070-119">In Windows Vista e versioni successive, vengono applicati gli account utente con privilegi minimi, il che significa che ogni account del sistema, ad eccezione dell'amministratore locale, è un account utente con privilegi minimi.</span><span class="sxs-lookup"><span data-stu-id="84070-119">In Windows Vista and later, least-privileged user accounts are enforced, which means that every account on the system, with the exception of the local administrator, is a least-privileged user account.</span></span> <span data-ttu-id="84070-120">Questo influirà sulla modalità di esecuzione dei giochi che non seguono le linee guida (applicazioni legacy) in Windows Vista e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="84070-120">This will affect how games that do not follow the guideline (legacy applications) run on Windows Vista and later.</span></span> <span data-ttu-id="84070-121">Ad esempio, quando un'applicazione tenta di scrivere in una cartella o in un valore del registro di sistema a cui non è autorizzato, il file di scrittura viene reindirizzato a un archivio di file virtuale per l'utente.</span><span class="sxs-lookup"><span data-stu-id="84070-121">For instance, when an application attempts to write to a folder or a registry value to which it does not have permission, the file write is redirected to a virtual file store for the user.</span></span> <span data-ttu-id="84070-122">Questo archivio file virtuale si trova in una cartella a cui l'utente ha accesso in scrittura.</span><span class="sxs-lookup"><span data-stu-id="84070-122">This virtual file store will reside in a folder to which the user has write access.</span></span> <span data-ttu-id="84070-123">Questo comportamento potrebbe non sembrare irreversibile perché il tentativo di scrittura non riesce. Tuttavia, le applicazioni che creano file virtualizzati possono confondere gli utenti poiché i file non verranno scritti nel percorso previsto dagli utenti.</span><span class="sxs-lookup"><span data-stu-id="84070-123">This behavior may not seem as catastrophic as outright failing the write attempt; however, applications that create virtualized files may confuse users because files will not be written to the location users expect.</span></span> <span data-ttu-id="84070-124">Ad esempio, i giochi che scrivono file con punteggio elevato nella stessa cartella della cartella eseguibile scriveranno invece questi file in una cartella virtualizzata.</span><span class="sxs-lookup"><span data-stu-id="84070-124">For instance, games that write high score files to the same folder as the executable folder will write these files to a virtualized folder instead.</span></span> <span data-ttu-id="84070-125">Di conseguenza, un utente non è in grado di visualizzare il punteggio massimo ottenuto da un altro utente perché ogni utente dispone di un archivio file virtualizzato separato.</span><span class="sxs-lookup"><span data-stu-id="84070-125">Consequently, one user cannot see the high score achieved by another user because every user has a separate virtualized file store.</span></span>

<span data-ttu-id="84070-126">I giochi che seguono le linee guida in questo articolo vengono eseguiti con account utente con privilegi minimi e di conseguenza manterranno la compatibilità con Windows Vista e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="84070-126">Games that follow the guidelines in this article will run with least-privileged user accounts, and consequently will maintain compatibility with Windows Vista and later.</span></span>

## <a name="file-access-for-least-privileged-user-accounts"></a><span data-ttu-id="84070-127">Accesso ai file per gli account utente Least-Privileged</span><span class="sxs-lookup"><span data-stu-id="84070-127">File Access for Least-Privileged User Accounts</span></span>

<span data-ttu-id="84070-128">Windows supporta due file System: FAT32 e NTFS.</span><span class="sxs-lookup"><span data-stu-id="84070-128">Windows supports two file systems: FAT32 and NTFS.</span></span> <span data-ttu-id="84070-129">FAT32 è un file system legacy supportato solo per la compatibilità con le versioni precedenti. NTFS supporta autorizzazioni file più potenti e affidabili.</span><span class="sxs-lookup"><span data-stu-id="84070-129">FAT32 is a legacy file system supported only for backward compatibility; NTFS supports more powerful and robust file permissions.</span></span> <span data-ttu-id="84070-130">L'uso di NTFS si espande perché i rivenditori stanno spedendo nuovi computer con Windows preinstallato in un disco rigido partizionato NTFS.</span><span class="sxs-lookup"><span data-stu-id="84070-130">The use of NTFS is expanding as retailers are shipping new computers with Windows pre-installed on a NTFS-partitioned hard drive.</span></span> <span data-ttu-id="84070-131">In un sistema Windows XP basato su NTFS, gli utenti con account utente con privilegi minimi hanno solo accesso limitato a diverse cartelle.</span><span class="sxs-lookup"><span data-stu-id="84070-131">On an NTFS-based Windows XP system, users with least-privileged user accounts have only limited access to several folders.</span></span> <span data-ttu-id="84070-132">Tuttavia, avranno accesso completo a un sistema Windows XP basato su FAT32.</span><span class="sxs-lookup"><span data-stu-id="84070-132">However, they would have complete access on a FAT32-based Windows XP system.</span></span>

<span data-ttu-id="84070-133">La tabella seguente elenca il percorso predefinito di queste cartelle e le relative autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="84070-133">The following table lists the default location of these folders and their permissions.</span></span>



| <span data-ttu-id="84070-134">Percorso</span><span class="sxs-lookup"><span data-stu-id="84070-134">Path</span></span>                                               | <span data-ttu-id="84070-135">Contenuto della cartella</span><span class="sxs-lookup"><span data-stu-id="84070-135">Folder Contents</span></span>              | <span data-ttu-id="84070-136">Lettura</span><span class="sxs-lookup"><span data-stu-id="84070-136">Read</span></span> | <span data-ttu-id="84070-137">Scrittura</span><span class="sxs-lookup"><span data-stu-id="84070-137">Write</span></span> | <span data-ttu-id="84070-138">Creazione/Eliminazione</span><span class="sxs-lookup"><span data-stu-id="84070-138">Create/Delete</span></span> |
|----------------------------------------------------|------------------------------|------|-------|---------------|
| <span data-ttu-id="84070-139"><Drive>: \\ Windows</span><span class="sxs-lookup"><span data-stu-id="84070-139"><Drive>:\\Windows</span></span>                            | <span data-ttu-id="84070-140">Sistema operativo Windows</span><span class="sxs-lookup"><span data-stu-id="84070-140">The Windows operating system</span></span> | <span data-ttu-id="84070-141">X</span><span class="sxs-lookup"><span data-stu-id="84070-141">X</span></span>    |       |               |
| <span data-ttu-id="84070-142"><Drive>: \\ File di programma</span><span class="sxs-lookup"><span data-stu-id="84070-142"><Drive>:\\Program Files</span></span>                      | <span data-ttu-id="84070-143">File dell'applicazione eseguibile</span><span class="sxs-lookup"><span data-stu-id="84070-143">Executable application files</span></span> | <span data-ttu-id="84070-144">X</span><span class="sxs-lookup"><span data-stu-id="84070-144">X</span></span>    |       |               |
| <span data-ttu-id="84070-145"><Drive>: \\ Documents and Settings \\ username\*</span><span class="sxs-lookup"><span data-stu-id="84070-145"><Drive>:\\Documents and Settings\\Username\*</span></span> | <span data-ttu-id="84070-146">File di ogni utente</span><span class="sxs-lookup"><span data-stu-id="84070-146">Each user's files</span></span>            | <span data-ttu-id="84070-147">X</span><span class="sxs-lookup"><span data-stu-id="84070-147">X</span></span>    | <span data-ttu-id="84070-148">X</span><span class="sxs-lookup"><span data-stu-id="84070-148">X</span></span>     | <span data-ttu-id="84070-149">X</span><span class="sxs-lookup"><span data-stu-id="84070-149">X</span></span>             |
| <span data-ttu-id="84070-150"><Drive>: \\ Documents and Settings \\ All Users</span><span class="sxs-lookup"><span data-stu-id="84070-150"><Drive>:\\Documents and Settings\\All Users</span></span>  | <span data-ttu-id="84070-151">Tutti i file utente</span><span class="sxs-lookup"><span data-stu-id="84070-151">All user files</span></span>               | <span data-ttu-id="84070-152">X</span><span class="sxs-lookup"><span data-stu-id="84070-152">X</span></span>    | <span data-ttu-id="84070-153">X</span><span class="sxs-lookup"><span data-stu-id="84070-153">X</span></span>     | <span data-ttu-id="84070-154">X</span><span class="sxs-lookup"><span data-stu-id="84070-154">X</span></span>             |



 

<span data-ttu-id="84070-155">\* Username è il nome di accesso dell'utente.</span><span class="sxs-lookup"><span data-stu-id="84070-155">\* Username is the user's login name.</span></span>

<span data-ttu-id="84070-156">In un account utente con privilegi minimi, è possibile leggere, scrivere, creare ed eliminare file in una cartella: Documents and Settings \\ username o Documents and Settings \\ All Users.</span><span class="sxs-lookup"><span data-stu-id="84070-156">In a least-privileged user account, you may read, write, create and delete files in either folder: Documents and Settings\\Username or Documents and Settings\\All Users.</span></span>

<span data-ttu-id="84070-157">Ciò significa che non è consigliabile inserire i giochi Save nei \\ file di programma, bensì in una sottocartella dei \\ documenti.</span><span class="sxs-lookup"><span data-stu-id="84070-157">What this means is that you should not place save games in \\Program Files, instead they should go in a sub-folder in \\My Documents.</span></span> <span data-ttu-id="84070-158">Inoltre, è consigliabile non inserire i dati temporanei dell'applicazione in \\ programmi o \\ documenti, ma devono essere posizionati nella cartella Application Data (CSIDL \_ Local \_ AppData).</span><span class="sxs-lookup"><span data-stu-id="84070-158">Also you should not place temporary application data in \\Program Files or \\My Documents, instead it should be placed in Application Data folder (CSIDL\_LOCAL\_APPDATA).</span></span>

<span data-ttu-id="84070-159">In particolare, esistono due scenari che devono essere gestiti da ogni gioco:</span><span class="sxs-lookup"><span data-stu-id="84070-159">More specifically, there are two scenarios that each game should handle:</span></span>

### <a name="scenario-1-files-that-do-not-need-to-be-viewed-or-altered-by-users"></a><span data-ttu-id="84070-160">Scenario 1: file che non devono essere visualizzati o modificati dagli utenti</span><span class="sxs-lookup"><span data-stu-id="84070-160">Scenario 1: Files that do not need to be viewed or altered by users</span></span>

<span data-ttu-id="84070-161">Un esempio tipico è il file di configurazione del gioco, i file temporanei e i file della cache di gioco.</span><span class="sxs-lookup"><span data-stu-id="84070-161">A typical example would be the game's configuration file, temporary files, and game cache files.</span></span> <span data-ttu-id="84070-162">Questi file vengono in genere conservati nella cartella Application Data.</span><span class="sxs-lookup"><span data-stu-id="84070-162">These files are typically kept in the Application Data folder.</span></span> <span data-ttu-id="84070-163">Per ottenere il percorso di questa cartella, chiamare la funzione [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) con CSIDL \_ AppData o CSIDL \_ Local \_ AppData come illustrato nell'esempio di codice seguente.</span><span class="sxs-lookup"><span data-stu-id="84070-163">To obtain this folder path, call the [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) function with CSIDL\_APPDATA or CSIDL\_LOCAL\_APPDATA as shown in the following code example.</span></span>

``` syntax
#include <shlobj.h>
#include <strsafe.h>

#define APPNAME L"MyApp"

WCHAR wszPath[MAX_PATH];

// Local Application Data
SHGetFolderPath( hWnd, CSIDL_LOCAL_APPDATA, NULL, SHGFP_TYPE_CURRENT, wszPath );
StringCchCatW( wszPath, MAX_PATH, L"\\" );
StringCchCatW( wszPath, MAX_PATH, APPNAME );

// Create the folder wszPath
// Then create files in wszPath
// Roaming Application Data
SHGetFolderPath( hWnd, CSIDL_APPDATA, NULL, SHGFP_TYPE_CURRENT, wszPath );
StringCchCatW( wszPath, MAX_PATH, L"\\" );
StringCchCatW( wszPath, MAX_PATH, APPNAME );

// Create the folder wszPath
// Then create files in wszPath
```

<span data-ttu-id="84070-164">La differenza tra le cartelle di dati delle applicazioni locali e di roaming è che in Windows 2000 e Windows XP il contenuto mobile viene copiato da e verso il server durante il processo di accesso/disconnessione, mentre il contenuto locale non lo è.</span><span class="sxs-lookup"><span data-stu-id="84070-164">The difference between local and roaming Application Data folders is that on Windows 2000 and Windows XP, roaming content is copied to and from the server during the logon/logoff process, while local content is not.</span></span> <span data-ttu-id="84070-165">Per la maggior parte dei giochi, i dati dell'applicazione locale sono sufficienti.</span><span class="sxs-lookup"><span data-stu-id="84070-165">For most games, local Application Data is sufficient.</span></span>

### <a name="scenario-2-files-that-need-to-be-viewed-or-altered-by-users"></a><span data-ttu-id="84070-166">Scenario 2: file che devono essere visualizzati o modificati dagli utenti</span><span class="sxs-lookup"><span data-stu-id="84070-166">Scenario 2: Files that need to be viewed or altered by users</span></span>

<span data-ttu-id="84070-167">Un esempio tipico è costituito dai file di gioco salvati dall'utente.</span><span class="sxs-lookup"><span data-stu-id="84070-167">A typical example would be a user's saved game files.</span></span> <span data-ttu-id="84070-168">Archiviare i file nella cartella documenti dell'utente in modo che siano facilmente visibili all'utente.</span><span class="sxs-lookup"><span data-stu-id="84070-168">Store the files in the user's document folder so that they are easily visible to the user.</span></span> <span data-ttu-id="84070-169">Un'applicazione ottiene il percorso della cartella documenti dell'utente chiamando [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) con CSIDL \_ Personal, come illustrato nell'esempio di codice seguente:</span><span class="sxs-lookup"><span data-stu-id="84070-169">An application gets the user's document folder path by calling [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) with CSIDL\_PERSONAL, as the following code example shows:</span></span>

``` syntax
#include <shlobj.h>
#include <strsafe.h>

#define APPNAME L"MyApp"

WCHAR wszPath[MAX_PATH];

SHGetFolderPath( hWnd, CSIDL_PERSONAL, NULL, SHGFP_TYPE_CURRENT, wszPath );
StringCchCatW( wszPath, MAX_PATH, L"\\" );
StringCchCatW( wszPath, MAX_PATH, APPNAME );

// Create the folder wszPath
// Then create files in wszPath
```

<span data-ttu-id="84070-170">In alcuni casi, è possibile che un gioco debba archiviare i file che tutti gli utenti devono visualizzare e usare.</span><span class="sxs-lookup"><span data-stu-id="84070-170">At times, a game may need to store files that all users are meant to see and use.</span></span> <span data-ttu-id="84070-171">Un esempio è il record con punteggio elevato, in cui tutti gli utenti scrivono nello stesso file di record in modo che i punteggi elevati vengano mantenuti a livello di sistema anziché un punteggio elevato separato per ogni utente.</span><span class="sxs-lookup"><span data-stu-id="84070-171">One example is the high score record, where all users write to the same record file so that high scores are maintained system-wide instead of a separate high score for each user.</span></span> <span data-ttu-id="84070-172">Altri esempi sono mappe scaricate, missioni e modifiche ai giochi.</span><span class="sxs-lookup"><span data-stu-id="84070-172">Other examples are downloaded maps, missions, and game modifications.</span></span> <span data-ttu-id="84070-173">Se questi elementi sono condivisi, solo un utente deve scaricarli anziché ogni utente.</span><span class="sxs-lookup"><span data-stu-id="84070-173">If these are shared, then only one user has to download them instead of every user.</span></span> <span data-ttu-id="84070-174">In questo scenario, utilizzare la cartella documento sotto la cartella del profilo condiviso, come illustrato nel codice seguente.</span><span class="sxs-lookup"><span data-stu-id="84070-174">In this scenario, use the document folder under the shared profile folder, as demonstrated in the following code.</span></span>

``` syntax
#include <shlobj.h>
#include <strsafe.h>

#define APPNAME L"MyApp"

WCHAR wszPath[MAX_PATH];

SHGetFolderPath( hWnd, CSIDL_COMMON_DOCUMENTS, NULL, SHGFP_TYPE_CURRENT, wszPath );
StringCchCatW( wszPath, MAX_PATH, L"\\" );
StringCchCatW( wszPath, MAX_PATH, APPNAME );

// Create the folder wszPath
// Then create files in wszPath
```

## <a name="registry-access-for-least-privileged-user-accounts"></a><span data-ttu-id="84070-175">Accesso al registro di sistema per gli account utente Least-Privileged</span><span class="sxs-lookup"><span data-stu-id="84070-175">Registry Access for Least-Privileged User Accounts</span></span>

<span data-ttu-id="84070-176">Le applicazioni utilizzano il registro di sistema di Windows per archiviare le informazioni.</span><span class="sxs-lookup"><span data-stu-id="84070-176">It is common for applications to use the Windows registry to store information.</span></span> <span data-ttu-id="84070-177">Analogamente agli account di accesso ai file, l'amministratore e gli account utente con privilegi minimi non hanno le stesse autorizzazioni per il registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="84070-177">Similar to file access, administrator and least-privileged user accounts do not have the same permission to the registry.</span></span> <span data-ttu-id="84070-178">Per gli account utente con privilegi minimi, l'intero \_ nodo del computer locale HKEY è di sola \_ lettura.</span><span class="sxs-lookup"><span data-stu-id="84070-178">For least-privileged user accounts, the entire HKEY\_LOCAL\_MACHINE node is read-only.</span></span> <span data-ttu-id="84070-179">Ad esempio, un gioco può leggere le informazioni di configurazione predefinite, ma non può scrivere nuove informazioni in questo nodo.</span><span class="sxs-lookup"><span data-stu-id="84070-179">For instance, a game can read the default configuration information, but may not write any new information to this node.</span></span> <span data-ttu-id="84070-180">Di conseguenza, i giochi in esecuzione in modalità utente con privilegi minimi che devono scrivere nel registro di sistema dovranno usare il \_ \_ nodo utente corrente di HKEY per archiviare le informazioni per utente, come illustrato nel codice seguente.</span><span class="sxs-lookup"><span data-stu-id="84070-180">Consequently, games running in least-privileged user mode that need to write to the registry will need to use the HKEY\_CURRENT\_USER node to store per-user information, as illustrated in the following code.</span></span>

``` syntax
#define APP_REGISTRY_KEY_PATH L"Software\\MyCompany\\MyApp"

LONG lRetVal;
HKEY hKey;

lRetVal = RegCreateKeyExW( HKEY_CURRENT_USER,
                           APP_REGISTRY_KEY_PATH,
                           0,
                           NULL,
                           REG_OPTION_NON_VOLATILE,
                           KEY_WRITE|KEY_READ,
                           NULL,
                           &hKey,
                           NULL );

if( ERROR_SUCCESS == lRetVal )
{
    // Store information in hKey
}
```

<span data-ttu-id="84070-181">È importante notare che, durante l'installazione, le informazioni del registro di sistema devono essere scritte nel \_ computer locale HKEY \_ , non HKEY \_ \_ utente corrente.</span><span class="sxs-lookup"><span data-stu-id="84070-181">It is worth noting that during installation, registry information should be written to HKEY\_LOCAL\_MACHINE, not HKEY\_CURRENT\_USER.</span></span> <span data-ttu-id="84070-182">Questo perché la persona che esegue l'installazione è in genere un amministratore e potrebbe non essere l'unica persona a usare il programma.</span><span class="sxs-lookup"><span data-stu-id="84070-182">This is because the person running the installation is usually an administrator, and may not be the only person to use the program.</span></span> <span data-ttu-id="84070-183">In questa situazione, la scrittura in \_ HKEY \_ l'utente corrente rende le informazioni non disponibili ad altri utenti.</span><span class="sxs-lookup"><span data-stu-id="84070-183">In this situation, writing to HKEY\_CURRENT\_USER makes the information unavailable to other users.</span></span> <span data-ttu-id="84070-184">Non si tratta in genere di un problema perché le informazioni scritte nel registro di sistema durante l'installazione sono la configurazione e le impostazioni predefinite applicabili a ogni utente del programma.</span><span class="sxs-lookup"><span data-stu-id="84070-184">This is not usually an issue because the information written to the registry during installation is the configuration and default settings that apply to every user of the program.</span></span>

<span data-ttu-id="84070-185">Quando si disinstalla il gioco, è necessario ulteriore sforzo per rimuovere tutti i valori scritti dal gioco nel registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="84070-185">When uninstalling the game, extra effort is necessary to remove every value that the game has written to the registry.</span></span> <span data-ttu-id="84070-186">Poiché il disinstallatore viene eseguito da una sola persona, in genere l'amministratore, è sufficiente eliminare le informazioni rilevanti nel \_ computer locale HKEY \_ e l' \_ utente corrente di HKEY \_ non rimuoverà i valori per altri utenti.</span><span class="sxs-lookup"><span data-stu-id="84070-186">Because the uninstaller is run by one person, usually the administrator, simply deleting the relevant information in HKEY\_LOCAL\_MACHINE and HKEY\_CURRENT\_USER will not remove values for other users.</span></span> <span data-ttu-id="84070-187">Un modo per rimuovere le informazioni per utente nel registro di sistema consiste nell'enumerare la \_ radice hive del registro utenti HKEY.</span><span class="sxs-lookup"><span data-stu-id="84070-187">One way to remove the per-user information in the registry is to enumerate the HKEY\_USERS registry hive root.</span></span> <span data-ttu-id="84070-188">Ogni sottochiave in HKEY \_ Users corrisponde all' \_ hive dell'utente corrente di HKEY \_ per un determinato utente nel sistema.</span><span class="sxs-lookup"><span data-stu-id="84070-188">Each subkey under HKEY\_USERS corresponds to the HKEY\_CURRENT\_USER hive for a particular user on the system.</span></span> <span data-ttu-id="84070-189">Tramite \_ l'enumerazione degli utenti di HKEY e la rimozione delle informazioni specifiche del gioco in ogni sottochiave, il disinstallatore può garantire che non venga lasciata alcuna informazione.</span><span class="sxs-lookup"><span data-stu-id="84070-189">By enumerating HKEY\_USERS and removing the game-specific information under each subkey, the uninstaller can ensure that no information is left behind.</span></span>

## <a name="patching-with-least-privileged-user-accounts"></a><span data-ttu-id="84070-190">Applicazione di patch con account utente Least-Privileged</span><span class="sxs-lookup"><span data-stu-id="84070-190">Patching with Least-Privileged User Accounts</span></span>

<span data-ttu-id="84070-191">L'applicazione di patch a un gioco comporta l'aggiornamento dei file del gioco.</span><span class="sxs-lookup"><span data-stu-id="84070-191">Patching a game involves updating the game's files.</span></span> <span data-ttu-id="84070-192">Pertanto, richiede in genere l'accesso in scrittura alla cartella del programma del gioco.</span><span class="sxs-lookup"><span data-stu-id="84070-192">Therefore, it usually requires write access to the game's program folder.</span></span> <span data-ttu-id="84070-193">L'applicazione di patch a un gioco è un processo semplice quando viene eseguita da un amministratore perché ha accesso illimitato alla cartella del programma del gioco.</span><span class="sxs-lookup"><span data-stu-id="84070-193">Patching a game is a straightforward process when it is done by an administrator because they have unrestricted access to the game's program folder.</span></span> <span data-ttu-id="84070-194">Viceversa, è stato tradizionalmente difficile, se non impossibile, per un utente con privilegi minimi di applicare patch ai giochi a causa della restrizione di accesso.</span><span class="sxs-lookup"><span data-stu-id="84070-194">Conversely, it has traditionally been difficult, if not impossible, for a least privileged user to patch games because of the access restriction.</span></span> <span data-ttu-id="84070-195">A questo punto, [Windows Installer](/windows/desktop/Msi/windows-installer-portal) è stato migliorato per rendere possibile l'applicazione di patch per gli account utente con privilegi minimi.</span><span class="sxs-lookup"><span data-stu-id="84070-195">Now, [Windows Installer](/windows/desktop/Msi/windows-installer-portal) has been enhanced to make least-privileged user account patching possible.</span></span> <span data-ttu-id="84070-196">Per sfruttare i vantaggi di questa funzionalità, i giochi sono invitati a utilizzare Windows Installer per l'installazione e l'applicazione di patch.</span><span class="sxs-lookup"><span data-stu-id="84070-196">To take advantage of this feature, games are encouraged to utilize Windows Installer for installation and patching.</span></span>

<span data-ttu-id="84070-197">A partire da Windows Installer 3,0, le patch dell'applicazione possono essere applicate da utenti con privilegi minimi quando vengono soddisfatte determinate condizioni.</span><span class="sxs-lookup"><span data-stu-id="84070-197">Starting with Windows Installer 3.0, application patches can be applied by least privileged users when certain conditions are met.</span></span> <span data-ttu-id="84070-198">Queste condizioni sono:</span><span class="sxs-lookup"><span data-stu-id="84070-198">These conditions are:</span></span>

-   <span data-ttu-id="84070-199">L'applicazione è stata installata con Windows Installer 3,0.</span><span class="sxs-lookup"><span data-stu-id="84070-199">The application was installed using Windows Installer 3.0.</span></span>
-   <span data-ttu-id="84070-200">L'applicazione è stata originariamente installata per computer.</span><span class="sxs-lookup"><span data-stu-id="84070-200">The application was originally installed per-machine.</span></span>
-   <span data-ttu-id="84070-201">L'applicazione viene installata da un supporto rimovibile, ad esempio un CD-ROM o un disco video digitale (DVD).</span><span class="sxs-lookup"><span data-stu-id="84070-201">The application is installed from removable media, such a CD-ROM or digital video disc (DVD).</span></span>
-   <span data-ttu-id="84070-202">Le patch sono firmate digitalmente da un certificato identificato dal pacchetto originale del programma di installazione (file con estensione msi).</span><span class="sxs-lookup"><span data-stu-id="84070-202">The patches are digitally signed by a certificate that is identified by the original installer package (.msi file).</span></span>
-   <span data-ttu-id="84070-203">Le patch possono essere convalidate rispetto alla firma digitale.</span><span class="sxs-lookup"><span data-stu-id="84070-203">The patches can be validated against the digital signature.</span></span>
-   <span data-ttu-id="84070-204">Il pacchetto di installazione originale non ha disabilitato l'applicazione di patch per gli account utente con privilegi minimi.</span><span class="sxs-lookup"><span data-stu-id="84070-204">The original installer package has not disabled least-privileged user account patching.</span></span>
-   <span data-ttu-id="84070-205">L'amministratore di sistema non ha disabilitato l'applicazione di patch per l'account utente con privilegi minimi tramite criteri di sistema.</span><span class="sxs-lookup"><span data-stu-id="84070-205">The system administrator has not disabled least-privileged user account patching via system policy.</span></span>

<span data-ttu-id="84070-206">In genere, un utente con privilegi minimi non può modificare i file di programma di un gioco.</span><span class="sxs-lookup"><span data-stu-id="84070-206">Normally, a least privileged user cannot modify a game's program files.</span></span> <span data-ttu-id="84070-207">Tuttavia, quando vengono soddisfatte le condizioni precedenti ed è abilitata l'applicazione di patch LUA, Windows Installer possibile aggiornare i file del gioco in modo che l'utente ottenga la versione più recente.</span><span class="sxs-lookup"><span data-stu-id="84070-207">However, when the above conditions are met and LUA patching is enabled, Windows Installer can update the game's files so that the user gets the latest version.</span></span>

> [!Note]  
> <span data-ttu-id="84070-208">Le informazioni contenute in questo articolo si riferiscono al prodotto software provvisorio, che può essere modificato in modo sostanziale prima della prima versione commerciale.</span><span class="sxs-lookup"><span data-stu-id="84070-208">The information contained in this article relates to pre-release software product, which may be substantially modified before its first commercial release.</span></span> <span data-ttu-id="84070-209">Di conseguenza, è possibile che le informazioni non descrivano o riflettano in modo accurato il prodotto software alla prima pubblicazione in commercio.</span><span class="sxs-lookup"><span data-stu-id="84070-209">Accordingly, the information may not accurately describe or reflect the software product when first commercially released.</span></span> <span data-ttu-id="84070-210">Questo articolo viene fornito esclusivamente a scopo informativo e Microsoft non rilascia alcuna garanzia, espressa o implicita, in relazione a questo articolo o alle informazioni contenute nel presente documento.</span><span class="sxs-lookup"><span data-stu-id="84070-210">This article is provided for informational purposes only, and Microsoft makes no warranties, express or implied, with respect to this article or the information contained in it.</span></span>

 

 

 