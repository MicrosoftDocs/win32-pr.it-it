---
title: Informazioni sul progetto personalizzato
description: Questa sezione contiene informazioni generali sulla funzionalità di personalizzazione personalizzata e fornisce una panoramica concettuale del modo in cui un'applicazione può supportare il progetto personalizzato.
ms.assetid: dd104661-1e0c-4569-9753-817bcded1894
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 121a4df5aa6fab222a5c4387ebdcfba51a7977b2
ms.sourcegitcommit: 773fa6257ead6c74154ad3cf46d21e49adc900aa
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/09/2020
ms.locfileid: "104474552"
---
# <a name="about-custom-draw"></a><span data-ttu-id="cb4f8-103">Informazioni sul progetto personalizzato</span><span class="sxs-lookup"><span data-stu-id="cb4f8-103">About Custom Draw</span></span>

<span data-ttu-id="cb4f8-104">Questa sezione contiene informazioni generali sulla funzionalità di personalizzazione personalizzata e fornisce una panoramica concettuale del modo in cui un'applicazione può supportare il progetto personalizzato.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-104">This section contains general information about custom draw functionality and provides a conceptual overview of how an application can support custom draw.</span></span> <span data-ttu-id="cb4f8-105">Attualmente, i controlli seguenti supportano la funzionalità di estrazione personalizzata:</span><span class="sxs-lookup"><span data-stu-id="cb4f8-105">Currently, the following controls support custom draw functionality:</span></span>

-   <span data-ttu-id="cb4f8-106">Controlli intestazione</span><span class="sxs-lookup"><span data-stu-id="cb4f8-106">Header controls</span></span>
-   <span data-ttu-id="cb4f8-107">Controlli elenco-visualizzazione</span><span class="sxs-lookup"><span data-stu-id="cb4f8-107">List-view controls</span></span>
-   <span data-ttu-id="cb4f8-108">Controlli Rebar</span><span class="sxs-lookup"><span data-stu-id="cb4f8-108">Rebar controls</span></span>
-   <span data-ttu-id="cb4f8-109">Controlli della barra degli strumenti</span><span class="sxs-lookup"><span data-stu-id="cb4f8-109">Toolbar controls</span></span>
-   <span data-ttu-id="cb4f8-110">Controlli ToolTip</span><span class="sxs-lookup"><span data-stu-id="cb4f8-110">Tooltip controls</span></span>
-   <span data-ttu-id="cb4f8-111">Controlli TrackBar</span><span class="sxs-lookup"><span data-stu-id="cb4f8-111">Trackbar controls</span></span>
-   <span data-ttu-id="cb4f8-112">Controlli di visualizzazione albero</span><span class="sxs-lookup"><span data-stu-id="cb4f8-112">Tree-view controls</span></span>

<!-- -->

-   [<span data-ttu-id="cb4f8-113">Informazioni sui messaggi di notifica di estrazione personalizzata</span><span class="sxs-lookup"><span data-stu-id="cb4f8-113">About Custom Draw Notification Messages</span></span>](#about-custom-draw-notification-messages)
-   [<span data-ttu-id="cb4f8-114">Cicli di verniciatura, fasi di disegno e messaggi di notifica</span><span class="sxs-lookup"><span data-stu-id="cb4f8-114">Paint Cycles, Drawing Stages, and Notification Messages</span></span>](#paint-cycles-drawing-stages-and-notification-messages)
-   [<span data-ttu-id="cb4f8-115">Sfrutta i vantaggi dei servizi di creazione personalizzati</span><span class="sxs-lookup"><span data-stu-id="cb4f8-115">Taking Advantage of Custom Draw Services</span></span>](#taking-advantage-of-custom-draw-services)
    -   [<span data-ttu-id="cb4f8-116">Risposta alla notifica di PrePaint</span><span class="sxs-lookup"><span data-stu-id="cb4f8-116">Responding to the prepaint notification</span></span>](#responding-to-the-prepaint-notification)
    -   [<span data-ttu-id="cb4f8-117">Richiesta di notifiche specifiche dell'elemento</span><span class="sxs-lookup"><span data-stu-id="cb4f8-117">Requesting item-specific notifications</span></span>](#requesting-item-specific-notifications)
    -   [<span data-ttu-id="cb4f8-118">Disegno dell'elemento manualmente</span><span class="sxs-lookup"><span data-stu-id="cb4f8-118">Drawing the item yourself</span></span>](#drawing-the-item-yourself)
    -   [<span data-ttu-id="cb4f8-119">Modifica di tipi di carattere e colori</span><span class="sxs-lookup"><span data-stu-id="cb4f8-119">Changing fonts and colors</span></span>](#changing-fonts-and-colors)
-   [<span data-ttu-id="cb4f8-120">Progetto personalizzato con controlli List-View e Tree-View</span><span class="sxs-lookup"><span data-stu-id="cb4f8-120">Custom Draw With List-View and Tree-View Controls</span></span>](#custom-draw-with-list-view-and-tree-view-controls)
    -   [<span data-ttu-id="cb4f8-121">Progetto personalizzato con controlli List-View</span><span class="sxs-lookup"><span data-stu-id="cb4f8-121">Custom Draw With List-View Controls</span></span>](#custom-draw-with-list-view-controls)
-   [<span data-ttu-id="cb4f8-122">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="cb4f8-122">Related topics</span></span>](#related-topics)

## <a name="about-custom-draw-notification-messages"></a><span data-ttu-id="cb4f8-123">Informazioni sui messaggi di notifica di estrazione personalizzata</span><span class="sxs-lookup"><span data-stu-id="cb4f8-123">About Custom Draw Notification Messages</span></span>

<span data-ttu-id="cb4f8-124">Tutti i controlli comuni che supportano il disegno personalizzato inviano i codici di notifica [ \_ CUSTOMDRAW](nm-customdraw.md) in punti specifici durante le operazioni di disegno.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-124">All common controls that support custom draw send [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes at specific points during drawing operations.</span></span> <span data-ttu-id="cb4f8-125">Questi codici di notifica descrivono le operazioni di disegno che si applicano all'intero controllo, nonché le operazioni di disegno specifiche per gli elementi all'interno del controllo.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-125">These notification codes describe drawing operations that apply to the entire control as well as drawing operations specific to items within the control.</span></span> <span data-ttu-id="cb4f8-126">Analogamente a molti codici di notifica, le \_ notifiche CUSTOMDRAW di nm vengono inviate come messaggi di [**\_ notifica WM**](wm-notify.md) .</span><span class="sxs-lookup"><span data-stu-id="cb4f8-126">Like many notification codes, NM\_CUSTOMDRAW notifications are sent as [**WM\_NOTIFY**](wm-notify.md) messages.</span></span>

<span data-ttu-id="cb4f8-127">Il parametro *lParam* di una notifica di progetto personalizzata sarà l'indirizzo di una struttura [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) o una struttura specifica del controllo che contiene una struttura **NMCUSTOMDRAW** come primo membro.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-127">The *lParam* parameter of a custom draw notification will be the address of an [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure or a control-specific structure that contains an **NMCUSTOMDRAW** structure as its first member.</span></span> <span data-ttu-id="cb4f8-128">Nella tabella seguente viene illustrata la relazione tra i controlli e le strutture utilizzate.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-128">The following table illustrates the relationship between the controls and the structures they use.</span></span>



| <span data-ttu-id="cb4f8-129">Struttura</span><span class="sxs-lookup"><span data-stu-id="cb4f8-129">Structure</span></span>                                | <span data-ttu-id="cb4f8-130">Usato da</span><span class="sxs-lookup"><span data-stu-id="cb4f8-130">Used by</span></span>                              |
|------------------------------------------|--------------------------------------|
| [<span data-ttu-id="cb4f8-131">**NMCUSTOMDRAW**</span><span class="sxs-lookup"><span data-stu-id="cb4f8-131">**NMCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw)     | <span data-ttu-id="cb4f8-132">Controlli Rebar, TrackBar e header</span><span class="sxs-lookup"><span data-stu-id="cb4f8-132">Rebar, trackbar, and header controls</span></span> |
| [<span data-ttu-id="cb4f8-133">**NMLVCUSTOMDRAW**</span><span class="sxs-lookup"><span data-stu-id="cb4f8-133">**NMLVCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmlvcustomdraw) | <span data-ttu-id="cb4f8-134">Controlli elenco-visualizzazione</span><span class="sxs-lookup"><span data-stu-id="cb4f8-134">List-view controls</span></span>                   |
| [<span data-ttu-id="cb4f8-135">**NMTBCUSTOMDRAW**</span><span class="sxs-lookup"><span data-stu-id="cb4f8-135">**NMTBCUSTOMDRAW**</span></span>](/windows/desktop/api/Commctrl/ns-commctrl-nmtbcustomdraw) | <span data-ttu-id="cb4f8-136">Controlli della barra degli strumenti</span><span class="sxs-lookup"><span data-stu-id="cb4f8-136">Toolbar controls</span></span>                     |
| [<span data-ttu-id="cb4f8-137">**NMTTCUSTOMDRAW**</span><span class="sxs-lookup"><span data-stu-id="cb4f8-137">**NMTTCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmttcustomdraw) | <span data-ttu-id="cb4f8-138">Controlli ToolTip</span><span class="sxs-lookup"><span data-stu-id="cb4f8-138">Tooltip controls</span></span>                     |
| [<span data-ttu-id="cb4f8-139">**NMTVCUSTOMDRAW**</span><span class="sxs-lookup"><span data-stu-id="cb4f8-139">**NMTVCUSTOMDRAW**</span></span>](/windows/win32/api/commctrl/ns-commctrl-nmtvcustomdraw) | <span data-ttu-id="cb4f8-140">Controlli di visualizzazione albero</span><span class="sxs-lookup"><span data-stu-id="cb4f8-140">Tree-view controls</span></span>                   |



 

## <a name="paint-cycles-drawing-stages-and-notification-messages"></a><span data-ttu-id="cb4f8-141">Cicli di verniciatura, fasi di disegno e messaggi di notifica</span><span class="sxs-lookup"><span data-stu-id="cb4f8-141">Paint Cycles, Drawing Stages, and Notification Messages</span></span>

<span data-ttu-id="cb4f8-142">Come tutte le applicazioni Windows, i controlli comuni disegnano e cancellano periodicamente in base ai messaggi ricevuti dal sistema o da altre applicazioni.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-142">Like all Windows applications, common controls periodically paint and erase themselves based on messages received from the system or other applications.</span></span> <span data-ttu-id="cb4f8-143">Il processo di disegno o cancellazione di un controllo viene definito ciclo di *disegno*.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-143">The process of a control painting or erasing itself is called a *paint cycle*.</span></span> <span data-ttu-id="cb4f8-144">I controlli che supportano il disegno personalizzato inviano periodicamente i codici di notifica [ \_ CUSTOMDRAW](nm-customdraw.md) per ogni ciclo di disegno.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-144">Controls that support custom draw send [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes periodically through each paint cycle.</span></span> <span data-ttu-id="cb4f8-145">Questo codice di notifica è accompagnato da una struttura [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) o da un'altra struttura che contiene una struttura **NMCUSTOMDRAW** come primo membro.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-145">This notification code is accompanied by an [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure or another structure that contains an **NMCUSTOMDRAW** structure as its first member.</span></span>

<span data-ttu-id="cb4f8-146">Una parte delle informazioni contenute nella struttura [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) è la fase corrente del ciclo di disegno.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-146">One piece of information that the [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure contains is the current stage of the paint cycle.</span></span> <span data-ttu-id="cb4f8-147">Questa operazione viene definita fase di *estrazione* ed è rappresentata dal valore nel membro **dwDrawStage** della struttura.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-147">This is referred to as the *draw stage* and is represented by the value in the structure's **dwDrawStage** member.</span></span> <span data-ttu-id="cb4f8-148">Un controllo informa l'elemento padre su quattro fasi di estrazione di base.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-148">A control informs its parent about four basic draw stages.</span></span> <span data-ttu-id="cb4f8-149">Queste fasi di traccia di base o globali sono rappresentate nella struttura con i valori di flag seguenti (definiti in commctrl. h).</span><span class="sxs-lookup"><span data-stu-id="cb4f8-149">These basic, or global, draw stages are represented in the structure by the following flag values (defined in Commctrl.h).</span></span>



| <span data-ttu-id="cb4f8-150">Valori della fase di estrazione globale</span><span class="sxs-lookup"><span data-stu-id="cb4f8-150">Global draw stage values</span></span> | <span data-ttu-id="cb4f8-151">Descrizione</span><span class="sxs-lookup"><span data-stu-id="cb4f8-151">Description</span></span>                        |
|--------------------------|------------------------------------|
| <span data-ttu-id="cb4f8-152">CDDS \_ PREpaint</span><span class="sxs-lookup"><span data-stu-id="cb4f8-152">CDDS\_PREPAINT</span></span>           | <span data-ttu-id="cb4f8-153">Prima dell'inizio del ciclo di disegno.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-153">Before the paint cycle begins.</span></span>     |
| <span data-ttu-id="cb4f8-154">CDDS \_ POSTpaint</span><span class="sxs-lookup"><span data-stu-id="cb4f8-154">CDDS\_POSTPAINT</span></span>          | <span data-ttu-id="cb4f8-155">Al termine del ciclo di disegno.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-155">After the paint cycle is complete.</span></span> |
| <span data-ttu-id="cb4f8-156">precancellazione CDDS \_</span><span class="sxs-lookup"><span data-stu-id="cb4f8-156">CDDS\_PREERASE</span></span>           | <span data-ttu-id="cb4f8-157">Prima dell'inizio del ciclo di cancellazione.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-157">Before the erase cycle begins.</span></span>     |
| <span data-ttu-id="cb4f8-158">CDDS \_ POSTerase</span><span class="sxs-lookup"><span data-stu-id="cb4f8-158">CDDS\_POSTERASE</span></span>          | <span data-ttu-id="cb4f8-159">Al termine del ciclo di cancellazione.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-159">After the erase cycle is complete.</span></span> |



 

<span data-ttu-id="cb4f8-160">Ognuno dei valori precedenti può essere combinato con il flag di \_ elemento CDDS per specificare le fasi di traccia specifiche degli elementi.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-160">Each of the preceding values can be combined with the CDDS\_ITEM flag to specify draw stages specific to items.</span></span> <span data-ttu-id="cb4f8-161">Per praticità, COMmctrl. h contiene i valori specifici dell'elemento seguenti.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-161">For convenience, Commctrl.h contains the following item-specific values.</span></span>



| <span data-ttu-id="cb4f8-162">Valori della fase di traccia specifici dell'elemento</span><span class="sxs-lookup"><span data-stu-id="cb4f8-162">Item-specific draw stage values</span></span> | <span data-ttu-id="cb4f8-163">Descrizione</span><span class="sxs-lookup"><span data-stu-id="cb4f8-163">Description</span></span>                                                                                                                                                                                                                                                                         |
|---------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="cb4f8-164">\_ITEMPREPAINT CDDS</span><span class="sxs-lookup"><span data-stu-id="cb4f8-164">CDDS\_ITEMPREPAINT</span></span>              | <span data-ttu-id="cb4f8-165">Prima della traccia di un elemento.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-165">Before an item is drawn.</span></span>                                                                                                                                                                                                                                                            |
| <span data-ttu-id="cb4f8-166">\_ITEMPOSTPAINT CDDS</span><span class="sxs-lookup"><span data-stu-id="cb4f8-166">CDDS\_ITEMPOSTPAINT</span></span>             | <span data-ttu-id="cb4f8-167">Dopo la traccia di un elemento.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-167">After an item has been drawn.</span></span>                                                                                                                                                                                                                                                       |
| <span data-ttu-id="cb4f8-168">\_ITEMPREERASE CDDS</span><span class="sxs-lookup"><span data-stu-id="cb4f8-168">CDDS\_ITEMPREERASE</span></span>              | <span data-ttu-id="cb4f8-169">Prima della cancellazione di un elemento.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-169">Before an item is erased.</span></span>                                                                                                                                                                                                                                                           |
| <span data-ttu-id="cb4f8-170">\_ITEMPOSTERASE CDDS</span><span class="sxs-lookup"><span data-stu-id="cb4f8-170">CDDS\_ITEMPOSTERASE</span></span>             | <span data-ttu-id="cb4f8-171">Dopo la cancellazione di un elemento.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-171">After an item has been erased.</span></span>                                                                                                                                                                                                                                                      |
| <span data-ttu-id="cb4f8-172">sottoelemento CDDS \_</span><span class="sxs-lookup"><span data-stu-id="cb4f8-172">CDDS\_SUBITEM</span></span>                   | <span data-ttu-id="cb4f8-173">[Versioni di controllo comuni](common-control-versions.md) 4,71.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-173">[Common Control Versions](common-control-versions.md) 4.71.</span></span> <span data-ttu-id="cb4f8-174">Flag combinato con CDDS \_ ITEMPREPAINT o CDDS \_ ITEMPOSTPAINT se viene disegnato un sottoelemento.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-174">Flag combined with CDDS\_ITEMPREPAINT or CDDS\_ITEMPOSTPAINT if a subitem is being drawn.</span></span> <span data-ttu-id="cb4f8-175">Questa impostazione verrà impostata solo se viene restituito [**CDRF \_ NOTIFYITEMDRAW**](cdrf-constants.md) da CDDS \_ PrePaint.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-175">This will only be set if [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md) is returned from CDDS\_PREPAINT.</span></span> |



 

<span data-ttu-id="cb4f8-176">L'applicazione deve elaborare il codice di notifica [ \_ CUSTOMDRAW di Nm](nm-customdraw.md) e quindi restituire un valore specifico che informa il controllo cosa deve fare.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-176">Your application must process the [NM\_CUSTOMDRAW](nm-customdraw.md) notification code and then return a specific value that informs the control what it must do.</span></span> <span data-ttu-id="cb4f8-177">Per ulteriori informazioni su questi valori restituiti, vedere le sezioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-177">See the following sections for more information about these return values.</span></span>

## <a name="taking-advantage-of-custom-draw-services"></a><span data-ttu-id="cb4f8-178">Sfrutta i vantaggi dei servizi di creazione personalizzati</span><span class="sxs-lookup"><span data-stu-id="cb4f8-178">Taking Advantage of Custom Draw Services</span></span>

<span data-ttu-id="cb4f8-179">La chiave per sfruttare la funzionalità di estrazione personalizzata è la risposta ai codici di notifica [ \_ CUSTOMDRAW di Nm](nm-customdraw.md) inviati da un controllo.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-179">The key to harnessing custom draw functionality is in responding to the [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes that a control sends.</span></span> <span data-ttu-id="cb4f8-180">I valori restituiti che l'applicazione invia in risposta a queste notifiche determinano il comportamento del controllo per il ciclo di disegno.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-180">The return values your application sends in response to these notifications determine the control's behavior for that paint cycle.</span></span>

<span data-ttu-id="cb4f8-181">Questa sezione contiene informazioni sul modo in cui l'applicazione può usare i valori restituiti della notifica [ \_ CUSTOMDRAW di Nm](nm-customdraw.md) per determinare il comportamento del controllo.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-181">This section contains information about how your application can use [NM\_CUSTOMDRAW](nm-customdraw.md) notification return values to determine the control's behavior.</span></span>

<span data-ttu-id="cb4f8-182">I dettagli sono suddivisi negli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="cb4f8-182">Details are broken into the following topics:</span></span>

-   [<span data-ttu-id="cb4f8-183">Risposta alla notifica di PrePaint</span><span class="sxs-lookup"><span data-stu-id="cb4f8-183">Responding to the prepaint notification</span></span>](#responding-to-the-prepaint-notification)
-   [<span data-ttu-id="cb4f8-184">Richiesta di notifiche specifiche dell'elemento</span><span class="sxs-lookup"><span data-stu-id="cb4f8-184">Requesting item-specific notifications</span></span>](#requesting-item-specific-notifications)
-   [<span data-ttu-id="cb4f8-185">Disegno dell'elemento manualmente</span><span class="sxs-lookup"><span data-stu-id="cb4f8-185">Drawing the item yourself</span></span>](#drawing-the-item-yourself)
-   [<span data-ttu-id="cb4f8-186">Modifica di tipi di carattere e colori</span><span class="sxs-lookup"><span data-stu-id="cb4f8-186">Changing fonts and colors</span></span>](#changing-fonts-and-colors)

### <a name="responding-to-the-prepaint-notification"></a><span data-ttu-id="cb4f8-187">Risposta alla notifica di PrePaint</span><span class="sxs-lookup"><span data-stu-id="cb4f8-187">Responding to the prepaint notification</span></span>

<span data-ttu-id="cb4f8-188">All'inizio di ogni ciclo di disegno, il controllo Invia il codice di notifica [ \_ CUSTOMDRAW di Nm](nm-customdraw.md) , specificando il \_ valore di PrePaint CDDS nel membro **dwDrawStage** della struttura di Nm \_ CUSTOMDRAW associata.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-188">At the beginning of each paint cycle, the control sends the [NM\_CUSTOMDRAW](nm-customdraw.md) notification code, specifying the CDDS\_PREPAINT value in the **dwDrawStage** member of the accompanying NM\_CUSTOMDRAW structure.</span></span> <span data-ttu-id="cb4f8-189">Il valore restituito dall'applicazione a questa prima notifica determina come e quando il controllo Invia notifiche di disegno personalizzate successive per il resto del ciclo di disegno.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-189">The value that your application returns to this first notification dictates how and when the control sends subsequent custom draw notifications for the rest of that paint cycle.</span></span> <span data-ttu-id="cb4f8-190">L'applicazione può restituire una combinazione dei flag seguenti in risposta alla prima notifica.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-190">Your application can return a combination of the following flags in response to the first notification.</span></span>



| <span data-ttu-id="cb4f8-191">Valore restituito</span><span class="sxs-lookup"><span data-stu-id="cb4f8-191">Return value</span></span>            | <span data-ttu-id="cb4f8-192">Effetto</span><span class="sxs-lookup"><span data-stu-id="cb4f8-192">Effect</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="cb4f8-193">\_DODEFAULT CDRF</span><span class="sxs-lookup"><span data-stu-id="cb4f8-193">CDRF\_DODEFAULT</span></span>         | <span data-ttu-id="cb4f8-194">Il controllo viene disegnato automaticamente.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-194">The control will draw itself.</span></span> <span data-ttu-id="cb4f8-195">Non invierà altre notifiche [ \_ CUSTOMDRAW di Nm](nm-customdraw.md) per questo ciclo di disegno.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-195">It will not send additional [NM\_CUSTOMDRAW](nm-customdraw.md) notifications for this paint cycle.</span></span> <span data-ttu-id="cb4f8-196">Questo flag non può essere usato con altri flag.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-196">This flag cannot be used with any other flag.</span></span>                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="cb4f8-197">\_DOERASE CDRF</span><span class="sxs-lookup"><span data-stu-id="cb4f8-197">CDRF\_DOERASE</span></span>           | <span data-ttu-id="cb4f8-198">Il controllo trarrà solo lo sfondo.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-198">The control will only draw the background.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="cb4f8-199">\_NEWFONT CDRF</span><span class="sxs-lookup"><span data-stu-id="cb4f8-199">CDRF\_NEWFONT</span></span>           | <span data-ttu-id="cb4f8-200">L'applicazione ha specificato un nuovo tipo di carattere per l'elemento. il controllo utilizzerà il nuovo tipo di carattere.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-200">Your application specified a new font for the item; the control will use the new font.</span></span> <span data-ttu-id="cb4f8-201">Per ulteriori informazioni sulla modifica dei tipi di carattere, vedere [modifica di tipi di carattere e colori](#changing-fonts-and-colors).</span><span class="sxs-lookup"><span data-stu-id="cb4f8-201">For more information on changing fonts, see [Changing fonts and colors](#changing-fonts-and-colors).</span></span> <span data-ttu-id="cb4f8-202">Questo errore si verifica quando **dwDrawStage** è uguale a CDDS \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-202">This occurs when **dwDrawStage** equals CDDS\_ITEMPREPAINT.</span></span>                                                                                                                                                                                                       |
| <span data-ttu-id="cb4f8-203">\_NOTIFYITEMDRAW CDRF</span><span class="sxs-lookup"><span data-stu-id="cb4f8-203">CDRF\_NOTIFYITEMDRAW</span></span>    | <span data-ttu-id="cb4f8-204">Il controllo invierà una notifica all'elemento padre di qualsiasi operazione di disegno specifica dell'elemento.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-204">The control will notify the parent of any item-specific drawing operations.</span></span> <span data-ttu-id="cb4f8-205">Invierà i codici di notifica di [ \_ CUSTOMDRAW](nm-customdraw.md) prima e dopo aver disegnato gli elementi. Questo errore si verifica quando **dwDrawStage** è uguale a CDDS \_ PrePaint.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-205">It will send [NM\_CUSTOMDRAW](nm-customdraw.md) notification codes before and after it draws items.This occurs when **dwDrawStage** equals CDDS\_PREPAINT.</span></span>                                                                                                                                                                                                                       |
| <span data-ttu-id="cb4f8-206">\_NOTIFYPOSTERASE CDRF</span><span class="sxs-lookup"><span data-stu-id="cb4f8-206">CDRF\_NOTIFYPOSTERASE</span></span>   | <span data-ttu-id="cb4f8-207">Il controllo invierà una notifica al padre dopo la cancellazione di un elemento.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-207">The control will notify the parent after erasing an item.</span></span> <span data-ttu-id="cb4f8-208">Questo errore si verifica quando **dwDrawStage** è uguale a CDDS \_ PrePaint.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-208">This occurs when **dwDrawStage** equals CDDS\_PREPAINT.</span></span>                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="cb4f8-209">\_NOTIFYPOSTPAINT CDRF</span><span class="sxs-lookup"><span data-stu-id="cb4f8-209">CDRF\_NOTIFYPOSTPAINT</span></span>   | <span data-ttu-id="cb4f8-210">Il controllo invierà una [notifica \_ CUSTOMDRAW Nm](nm-customdraw.md) quando il ciclo di disegno per l'intero controllo è completo.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-210">The control will send an [NM\_CUSTOMDRAW](nm-customdraw.md) notification when the painting cycle for the entire control is complete.</span></span> <span data-ttu-id="cb4f8-211">Questo errore si verifica quando **dwDrawStage** è uguale a CDDS \_ PrePaint.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-211">This occurs when **dwDrawStage** equals CDDS\_PREPAINT.</span></span>                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="cb4f8-212">\_NOTIFYSUBITEMDRAW CDRF</span><span class="sxs-lookup"><span data-stu-id="cb4f8-212">CDRF\_NOTIFYSUBITEMDRAW</span></span> | <span data-ttu-id="cb4f8-213">[Versione 4,71](common-control-versions.md).</span><span class="sxs-lookup"><span data-stu-id="cb4f8-213">[Version 4.71](common-control-versions.md).</span></span> <span data-ttu-id="cb4f8-214">L'applicazione riceverà una notifica [nm \_ CUSTOMDRAW](nm-customdraw.md) con **dwDrawStage** impostato su CDDS \_ ITEMPREPAINT \| CDDS \_ sottoelemento prima che ogni elemento secondario di visualizzazione elenco venga disegnato.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-214">Your application will receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification with **dwDrawStage** set to CDDS\_ITEMPREPAINT \| CDDS\_SUBITEM before each list-view subitem is drawn.</span></span> <span data-ttu-id="cb4f8-215">È quindi possibile specificare il tipo di carattere e il colore per ogni elemento secondario separatamente oppure restituire [**CDRF \_ DODEFAULT**](cdrf-constants.md) per l'elaborazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-215">You can then specify font and color for each subitem separately or return [**CDRF\_DODEFAULT**](cdrf-constants.md) for default processing.</span></span> <span data-ttu-id="cb4f8-216">Questo errore si verifica quando **dwDrawStage** è uguale a CDDS \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-216">This occurs when **dwDrawStage** equals CDDS\_ITEMPREPAINT.</span></span> |
| <span data-ttu-id="cb4f8-217">\_SKIPDEFAULT CDRF</span><span class="sxs-lookup"><span data-stu-id="cb4f8-217">CDRF\_SKIPDEFAULT</span></span>       | <span data-ttu-id="cb4f8-218">L'applicazione ha disegnato manualmente l'elemento.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-218">Your application drew the item manually.</span></span> <span data-ttu-id="cb4f8-219">L'elemento non viene disegnato dal controllo.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-219">The control will not draw the item.</span></span> <span data-ttu-id="cb4f8-220">Questo errore si verifica quando **dwDrawStage** è uguale a CDDS \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-220">This occurs when **dwDrawStage** equals CDDS\_ITEMPREPAINT.</span></span>                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="cb4f8-221">\_SKIPPOSTPAINT CDRF</span><span class="sxs-lookup"><span data-stu-id="cb4f8-221">CDRF\_SKIPPOSTPAINT</span></span>     | <span data-ttu-id="cb4f8-222">Il controllo non trarrà il rettangolo di attivazione intorno a un elemento.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-222">The control will not draw the focus rectangle around an item.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                 |



 

### <a name="requesting-item-specific-notifications"></a><span data-ttu-id="cb4f8-223">Richiesta di notifiche specifiche dell'elemento</span><span class="sxs-lookup"><span data-stu-id="cb4f8-223">Requesting item-specific notifications</span></span>

<span data-ttu-id="cb4f8-224">Se l'applicazione restituisce [**CDRF \_ NOTIFYITEMDRAW**](cdrf-constants.md) alla notifica di disegno personalizzata di PrePaint iniziale, il controllo invierà notifiche per ogni elemento disegnato durante il ciclo di disegno.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-224">If your application returns [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md) to the initial prepaint custom draw notification, the control will send notifications for each item it draws during that paint cycle.</span></span> <span data-ttu-id="cb4f8-225">Queste notifiche specifiche dell'elemento avranno il \_ valore ITEMPREPAINT di CDDS nel membro **dwDrawStage** della struttura [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) associata.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-225">These item-specific notifications will have the CDDS\_ITEMPREPAINT value in the **dwDrawStage** member of the accompanying [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure.</span></span> <span data-ttu-id="cb4f8-226">È possibile richiedere che il controllo invii un'altra notifica al termine del disegno dell'elemento restituendo [**CDRF \_ NOTIFYPOSTPAINT**](cdrf-constants.md) a queste notifiche specifiche dell'elemento.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-226">You can request that the control send another notification when it is finished drawing the item by returning [**CDRF\_NOTIFYPOSTPAINT**](cdrf-constants.md) to these item-specific notifications.</span></span> <span data-ttu-id="cb4f8-227">In caso contrario, restituire [**CDRF \_ DODEFAULT**](cdrf-constants.md) e il controllo non invierà una notifica alla finestra padre fino a quando non inizierà a tracciare l'elemento successivo.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-227">Otherwise, return [**CDRF\_DODEFAULT**](cdrf-constants.md) and the control will not notify the parent window until it starts to draw the next item.</span></span>

### <a name="drawing-the-item-yourself"></a><span data-ttu-id="cb4f8-228">Disegno dell'elemento manualmente</span><span class="sxs-lookup"><span data-stu-id="cb4f8-228">Drawing the item yourself</span></span>

<span data-ttu-id="cb4f8-229">Se l'applicazione disegna l'intero elemento, restituire [**CDRF \_ SKIPDEFAULT**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="cb4f8-229">If your application draws the entire item, return [**CDRF\_SKIPDEFAULT**](cdrf-constants.md).</span></span> <span data-ttu-id="cb4f8-230">Ciò consente al controllo di ignorare gli elementi che non è necessario creare, riducendo in tal modo l'overhead del sistema.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-230">This allows the control to skip items that it does not need to draw, thereby decreasing system overhead.</span></span> <span data-ttu-id="cb4f8-231">Tenere presente che la restituzione di questo valore indica che il controllo non trarrà alcuna parte dell'elemento.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-231">Keep in mind that returning this value means the control will not draw any portion of the item.</span></span>

### <a name="changing-fonts-and-colors"></a><span data-ttu-id="cb4f8-232">Modifica di tipi di carattere e colori</span><span class="sxs-lookup"><span data-stu-id="cb4f8-232">Changing fonts and colors</span></span>

<span data-ttu-id="cb4f8-233">L'applicazione può usare il progetto personalizzato per modificare il tipo di carattere di un elemento.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-233">Your application can use custom draw to change an item's font.</span></span> <span data-ttu-id="cb4f8-234">È sufficiente selezionare il HFONT che si vuole inserire nel contesto di dispositivo specificato dal membro **HDC** della struttura [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) associata alla notifica di estrazione personalizzata.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-234">Simply select the HFONT you want into the device context specified by the **hdc** member of the [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure associated with the custom draw notification.</span></span> <span data-ttu-id="cb4f8-235">Poiché il tipo di carattere selezionato potrebbe avere metriche diverse da quelle del tipo di carattere predefinito, assicurarsi di includere il bit [**CDRF \_ NEWFONT**](cdrf-constants.md) nel valore restituito per il messaggio di notifica.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-235">Since the font you select might have different metrics than the default font, make sure you include the [**CDRF\_NEWFONT**](cdrf-constants.md) bit in the return value for the notification message.</span></span> <span data-ttu-id="cb4f8-236">Per altre informazioni sull'uso di questa funzionalità, vedere il codice di esempio in uso di un [progetto personalizzato](using-custom-draw.md).</span><span class="sxs-lookup"><span data-stu-id="cb4f8-236">For more information on using this functionality, see the sample code in [Using Custom Draw](using-custom-draw.md).</span></span> <span data-ttu-id="cb4f8-237">Il tipo di carattere specificato dall'applicazione viene utilizzato per visualizzare l'elemento quando non è selezionato.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-237">The font that your application specifies is used to display that item when it is not selected.</span></span> <span data-ttu-id="cb4f8-238">Il progetto personalizzato non consente di modificare gli attributi del tipo di carattere per gli elementi selezionati.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-238">Custom draw does not allow you to change the font attributes for selected items.</span></span>

<span data-ttu-id="cb4f8-239">Per modificare i colori del testo per tutti i controlli che supportano l'estrazione personalizzata, ad eccezione della visualizzazione elenco e della visualizzazione albero, è sufficiente impostare il testo e i colori di sfondo desiderati nel contesto di dispositivo fornito nella struttura di notifica di estrazione personalizzata con le funzioni [**SetTextColor**](/windows/desktop/api/wingdi/nf-wingdi-settextcolor) e [**SetBkColor**](/windows/desktop/api/wingdi/nf-wingdi-setbkcolor) .</span><span class="sxs-lookup"><span data-stu-id="cb4f8-239">To change text colors for all controls that support custom draw except for the list view and tree view, simply set the desired text and background colors in the device context supplied in the custom draw notification structure with the [**SetTextColor**](/windows/desktop/api/wingdi/nf-wingdi-settextcolor) and [**SetBkColor**](/windows/desktop/api/wingdi/nf-wingdi-setbkcolor) functions.</span></span> <span data-ttu-id="cb4f8-240">Per modificare i colori del testo nella visualizzazione elenco o nella visualizzazione albero, è necessario inserire i valori dei colori desiderati nei membri **clrText** e **ClrTextBk** della struttura [**NMLVCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmlvcustomdraw) o [**NMTVCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmtvcustomdraw) .</span><span class="sxs-lookup"><span data-stu-id="cb4f8-240">To modify the text colors in the list view or tree view, you need to place the desired color values in the **clrText** and **clrTextBk** members of the [**NMLVCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmlvcustomdraw) or [**NMTVCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmtvcustomdraw) structure.</span></span>

> [!Note]  
> <span data-ttu-id="cb4f8-241">Prima della [versione 6,0](common-control-versions.md) dei controlli comuni, le barre degli strumenti ignoravano il flag [**\_ NEWFONT di CDRF**](cdrf-constants.md) .</span><span class="sxs-lookup"><span data-stu-id="cb4f8-241">Prior to [Version 6.0](common-control-versions.md) of the common controls, toolbars ignore the [**CDRF\_NEWFONT**](cdrf-constants.md) flag.</span></span> <span data-ttu-id="cb4f8-242">La versione 6,0 supporta il flag **CDRF \_ NEWFONT** ed è possibile usarla per selezionare un tipo di carattere diverso per la barra degli strumenti.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-242">Version 6.0 supports the **CDRF\_NEWFONT** flag, and you can use it to select a different font for the toolbar.</span></span> <span data-ttu-id="cb4f8-243">Tuttavia, non è possibile modificare il colore di una barra degli strumenti quando è attivo uno stile di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-243">However, you cannot change a toolbar's color when a visual style is active.</span></span> <span data-ttu-id="cb4f8-244">Per modificare il colore di una barra degli strumenti nella versione 6,0, è necessario innanzitutto disabilitare gli stili di visualizzazione chiamando [**SetWindowTheme**](/windows/desktop/api/Uxtheme/nf-uxtheme-setwindowtheme) e specificando nessun stile di visualizzazione:</span><span class="sxs-lookup"><span data-stu-id="cb4f8-244">To change a toolbar's color in Version 6.0, you must first disable visual styles by calling [**SetWindowTheme**](/windows/desktop/api/Uxtheme/nf-uxtheme-setwindowtheme) and specifying no visual style:</span></span>

 


```
SetWindowTheme (hwnd, "", "");
```



## <a name="custom-draw-with-list-view-and-tree-view-controls"></a><span data-ttu-id="cb4f8-245">Progetto personalizzato con controlli List-View e Tree-View</span><span class="sxs-lookup"><span data-stu-id="cb4f8-245">Custom Draw With List-View and Tree-View Controls</span></span>

<span data-ttu-id="cb4f8-246">La maggior parte dei controlli comuni può essere gestita essenzialmente nello stesso modo.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-246">Most common controls can be handled in essentially the same way.</span></span> <span data-ttu-id="cb4f8-247">Tuttavia, i controlli visualizzazione elenco e visualizzazione albero dispongono di alcune funzionalità che richiedono un approccio leggermente diverso al progetto personalizzato.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-247">However, the list-view and tree-view controls have some features that require a somewhat different approach to custom draw.</span></span>

<span data-ttu-id="cb4f8-248">Per la [versione 5,0](common-control-versions.md), questi due controlli possono visualizzare il testo ritagliato se si modifica il tipo di carattere restituendo [**CDRF \_ NEWFONT**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="cb4f8-248">For [Version 5.0](common-control-versions.md), these two controls may display clipped text if you change the font by returning [**CDRF\_NEWFONT**](cdrf-constants.md).</span></span> <span data-ttu-id="cb4f8-249">Questo comportamento è necessario per garantire la compatibilità con le versioni precedenti dei controlli comuni.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-249">This behavior is necessary for backward compatibility with earlier versions of the common controls.</span></span> <span data-ttu-id="cb4f8-250">Se si desidera modificare il tipo di carattere di un controllo visualizzazione elenco o visualizzazione albero, si otterranno risultati migliori se si invia un messaggio di [**tipo \_ CCM**](ccm-setversion.md) con il valore *wParam* impostato su 5 prima di aggiungere elementi al controllo.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-250">If you want to change the font of a list-view or tree-view control, you will get better results if you send a [**CCM\_SETVERSION**](ccm-setversion.md) message with the *wParam* value set to 5 before adding any items to the control.</span></span> <span data-ttu-id="cb4f8-251">Per un esempio di controllo di visualizzazione albero che usa il modello di illustrazione personalizzato, vedere l'articolo della Knowledge base [esempio: CustDTv illustra il progetto personalizzato in un oggetto TreeView (Q248496)]( https://support.microsoft.com/default.aspx?scid=kb;EN-US;q248496).</span><span class="sxs-lookup"><span data-stu-id="cb4f8-251">For an example of a tree-view control that uses custom draw see Knowledge Base article [SAMPLE: CustDTv Illustrates Custom Draw in a TreeView (Q248496)]( https://support.microsoft.com/default.aspx?scid=kb;EN-US;q248496).</span></span>

### <a name="custom-draw-with-list-view-controls"></a><span data-ttu-id="cb4f8-252">Progetto personalizzato con controlli List-View</span><span class="sxs-lookup"><span data-stu-id="cb4f8-252">Custom Draw With List-View Controls</span></span>

<span data-ttu-id="cb4f8-253">Poiché i controlli elenco-visualizzazione includono elementi secondari e più modalità di visualizzazione, è necessario gestire la [notifica \_ CUSTOMDRAW di Nm](nm-customdraw.md) in modo leggermente diverso rispetto agli altri controlli comuni.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-253">Because list-view controls have subitems and multiple display modes, you will need to handle the [NM\_CUSTOMDRAW](nm-customdraw.md) notification somewhat differently than for the other common controls.</span></span>

<span data-ttu-id="cb4f8-254">Per la modalità report, utilizzare la procedura riportata di seguito.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-254">For report mode, use the following procedure.</span></span>

1.  <span data-ttu-id="cb4f8-255">La prima [notifica \_ CUSTOMDRAW di Nm](nm-customdraw.md) avrà il membro **dwDrawStage** della struttura [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) associata impostata su CDDS \_ PrePaint.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-255">The first [NM\_CUSTOMDRAW](nm-customdraw.md) notification will have the **dwDrawStage** member of the associated [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure set to CDDS\_PREPAINT.</span></span> <span data-ttu-id="cb4f8-256">Restituisce [**CDRF \_ NOTIFYITEMDRAW**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="cb4f8-256">Return [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md).</span></span>
2.  <span data-ttu-id="cb4f8-257">Si riceverà quindi una notifica [nm \_ CUSTOMDRAW](nm-customdraw.md) con **dwDrawStage** impostato su CDDS \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-257">You will then receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification with **dwDrawStage** set to CDDS\_ITEMPREPAINT.</span></span> <span data-ttu-id="cb4f8-258">Se si specificano nuovi tipi di carattere o colori e si restituisce [**CDRF \_ NEWFONT**](cdrf-constants.md), verranno modificati tutti gli elementi secondari dell'elemento.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-258">If you specify new fonts or colors and return [**CDRF\_NEWFONT**](cdrf-constants.md), all subitems of the item will be changed.</span></span> <span data-ttu-id="cb4f8-259">Se invece si desidera gestire ogni elemento secondario separatamente, restituire [**CDRF \_ NOTIFYSUBITEMDRAW**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="cb4f8-259">If you want instead to handle each subitem separately, return [**CDRF\_NOTIFYSUBITEMDRAW**](cdrf-constants.md).</span></span>
3.  <span data-ttu-id="cb4f8-260">Se nel passaggio precedente è stato restituito [**CDRF \_ NOTIFYSUBITEMDRAW**](cdrf-constants.md) , si riceverà una notifica [di \_ CUSTOMDRAW Nm](nm-customdraw.md) per ogni elemento secondario con **dwDrawStage** impostato su CDDS \_ sottoelemento CDDS ITEMPREPAINT \| \_ .</span><span class="sxs-lookup"><span data-stu-id="cb4f8-260">If you returned [**CDRF\_NOTIFYSUBITEMDRAW**](cdrf-constants.md) in the previous step, you will then receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification for each subitem with **dwDrawStage** set to CDDS\_SUBITEM \| CDDS\_ITEMPREPAINT.</span></span> <span data-ttu-id="cb4f8-261">Per modificare il tipo di carattere o il colore dell'elemento secondario, specificare un nuovo tipo di carattere o colore e restituire [**CDRF \_ NEWFONT**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="cb4f8-261">To change the font or color for that subitem, specify a new font or color and return [**CDRF\_NEWFONT**](cdrf-constants.md).</span></span>

<span data-ttu-id="cb4f8-262">Per l'icona grande, l'icona piccola e le modalità elenco, utilizzare la procedura riportata di seguito.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-262">For the large icon, small icon, and list modes, use the following procedure.</span></span>

1.  <span data-ttu-id="cb4f8-263">La prima [notifica \_ CUSTOMDRAW di Nm](nm-customdraw.md) avrà il membro **dwDrawStage** della struttura [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) associata impostata su CDDS \_ PrePaint.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-263">The first [NM\_CUSTOMDRAW](nm-customdraw.md) notification will have the **dwDrawStage** member of the associated [**NMCUSTOMDRAW**](/windows/win32/api/commctrl/ns-commctrl-nmcustomdraw) structure set to CDDS\_PREPAINT.</span></span> <span data-ttu-id="cb4f8-264">Restituisce [**CDRF \_ NOTIFYITEMDRAW**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="cb4f8-264">Return [**CDRF\_NOTIFYITEMDRAW**](cdrf-constants.md).</span></span>
2.  <span data-ttu-id="cb4f8-265">Si riceverà quindi una notifica [nm \_ CUSTOMDRAW](nm-customdraw.md) con **dwDrawStage** impostato su CDDS \_ ITEMPREPAINT.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-265">You will then receive an [NM\_CUSTOMDRAW](nm-customdraw.md) notification with **dwDrawStage** set to CDDS\_ITEMPREPAINT.</span></span> <span data-ttu-id="cb4f8-266">È possibile modificare i tipi di carattere o i colori di un elemento specificando nuovi tipi di carattere e colori e restituendo [**CDRF \_ NEWFONT**](cdrf-constants.md).</span><span class="sxs-lookup"><span data-stu-id="cb4f8-266">You can change the fonts or colors of an item by specifying new fonts and colors and returning [**CDRF\_NEWFONT**](cdrf-constants.md).</span></span> <span data-ttu-id="cb4f8-267">Poiché queste modalità non dispongono di elementi secondari, non si riceveranno altre \_ notifiche CUSTOMDRAW di nm.</span><span class="sxs-lookup"><span data-stu-id="cb4f8-267">Because these modes do not have subitems, you will not receive any additional NM\_CUSTOMDRAW notifications.</span></span>

<span data-ttu-id="cb4f8-268">Per un esempio di gestore di notifiche [ \_ CUSTOMDRAW](nm-customdraw.md) di visualizzazione elenco, vedere uso di un [progetto personalizzato](using-custom-draw.md).</span><span class="sxs-lookup"><span data-stu-id="cb4f8-268">For an example of a list-view [NM\_CUSTOMDRAW](nm-customdraw.md) notification handler, see [Using Custom Draw](using-custom-draw.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="cb4f8-269">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="cb4f8-269">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="cb4f8-270">**Informazioni concettuali**</span><span class="sxs-lookup"><span data-stu-id="cb4f8-270">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="cb4f8-271">Uso di un progetto personalizzato</span><span class="sxs-lookup"><span data-stu-id="cb4f8-271">Using Custom Draw</span></span>](using-custom-draw.md)
</dt> <dt>

[<span data-ttu-id="cb4f8-272">Riferimento di progetto personalizzato</span><span class="sxs-lookup"><span data-stu-id="cb4f8-272">Custom Draw Reference</span></span>](custom-draw-reference.md)
</dt> <dt>

<span data-ttu-id="cb4f8-273">**Altre risorse**</span><span class="sxs-lookup"><span data-stu-id="cb4f8-273">**Other Resources**</span></span>
</dt> <dt>

[<span data-ttu-id="cb4f8-274">ESEMPIO: CustDTv illustra il progetto personalizzato in un oggetto TreeView (Q248496)</span><span class="sxs-lookup"><span data-stu-id="cb4f8-274">SAMPLE: CustDTv Illustrates Custom Draw in a TreeView (Q248496)</span></span>]( https://support.microsoft.com/default.aspx?scid=kb;EN-US;q248496)
</dt> </dl>

 

 