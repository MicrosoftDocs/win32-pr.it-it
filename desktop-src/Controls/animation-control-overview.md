---
title: Informazioni sui controlli di animazione
description: Un controllo di animazione è una finestra che visualizza un Audio-Video clip con interfoliazione (AVI). Un clip AVI è costituito da una serie di frame bitmap come un film. I controlli di animazione possono visualizzare solo le clip AVI che non contengono audio.
ms.assetid: 6be69d1a-5b2c-41d5-b6d7-e86ddac2cb0d
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1625828e5f4febce7314da365c9db93ce3a07136
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/21/2020
ms.locfileid: "106300541"
---
# <a name="about-animation-controls"></a><span data-ttu-id="b8bc6-105">Informazioni sui controlli di animazione</span><span class="sxs-lookup"><span data-stu-id="b8bc6-105">About Animation Controls</span></span>

<span data-ttu-id="b8bc6-106">Un *controllo di animazione* è una finestra che visualizza un Audio-Video clip con INTERFOLIAZIONE (AVI).</span><span class="sxs-lookup"><span data-stu-id="b8bc6-106">An *animation control* is a window that displays an Audio-Video Interleaved (AVI) clip.</span></span> <span data-ttu-id="b8bc6-107">Un clip AVI è costituito da una serie di frame bitmap come un film.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-107">An AVI clip is a series of bitmap frames like a movie.</span></span> <span data-ttu-id="b8bc6-108">I controlli di animazione possono visualizzare solo le clip AVI che non contengono audio.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-108">Animation controls can only display AVI clips that do not contain audio.</span></span>

<span data-ttu-id="b8bc6-109">Un controllo di animazione viene comunemente usato per indicare l'attività di sistema durante un'operazione di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-109">One common use for an animation control is to indicate system activity during a lengthy operation.</span></span> <span data-ttu-id="b8bc6-110">Questo è possibile perché il thread dell'operazione continua l'esecuzione durante la visualizzazione del clip AVI.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-110">This is possible because the operation thread continues executing while the AVI clip is displayed.</span></span> <span data-ttu-id="b8bc6-111">La finestra di dialogo trova di Esplora risorse, ad esempio, consente di visualizzare una lente di ingrandimento quando il sistema cerca un file.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-111">For example, the Find dialog box of Windows Explorer displays a moving magnifying glass as the system searches for a file.</span></span>

> [!Note]  
> <span data-ttu-id="b8bc6-112">Se si usa ComCtl32.dll versione 6, il thread non è supportato. Assicurarsi che l'applicazione non blocchi l'interfaccia utente. in caso contrario, l'animazione non viene eseguita.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-112">If you are using ComCtl32.dll version 6 the thread is not supported; make sure that your application does not block the UI, or else the animation will not occur.</span></span>

 

<span data-ttu-id="b8bc6-113">Un controllo animazione può visualizzare un clip AVI originato da un file AVI non compresso o da un file AVI compresso usando la codifica di Run-Length (BI \_ RLE8).</span><span class="sxs-lookup"><span data-stu-id="b8bc6-113">An animation control can display an AVI clip originating from either an uncompressed AVI file or from an AVI file that was compressed using run-length (BI\_RLE8) encoding.</span></span> <span data-ttu-id="b8bc6-114">È possibile aggiungere il clip AVI all'applicazione come risorsa AVI oppure il clip può accompagnare l'applicazione come file AVI separato.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-114">You can add the AVI clip to your application as an AVI resource, or the clip can accompany your application as a separate AVI file.</span></span>

> [!Note]  
> <span data-ttu-id="b8bc6-115">Il file AVI o la risorsa non deve avere un canale audio.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-115">The AVI file, or resource, must not have a sound channel.</span></span> <span data-ttu-id="b8bc6-116">Le funzionalità del controllo animazione sono molto limitate e sono soggette a modifiche.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-116">The capabilities of the animation control are very limited and are subject to change.</span></span> <span data-ttu-id="b8bc6-117">Se è necessario un controllo per fornire funzionalità di riproduzione e registrazione multimediali per l'applicazione, è possibile usare il controllo MCIWnd.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-117">If you need a control to provide multimedia playback and recording capabilities for your application, you can use the MCIWnd control.</span></span> <span data-ttu-id="b8bc6-118">Per altre informazioni, vedere [classe della finestra MCIWnd](/windows/desktop/Multimedia/mciwnd-window-class).</span><span class="sxs-lookup"><span data-stu-id="b8bc6-118">For more information, see [MCIWnd Window Class](/windows/desktop/Multimedia/mciwnd-window-class).</span></span>

 

<span data-ttu-id="b8bc6-119">In questa sezione vengono illustrati gli argomenti seguenti.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-119">This section discusses the following topics.</span></span>

-   [<span data-ttu-id="b8bc6-120">Creazione del controllo animazione</span><span class="sxs-lookup"><span data-stu-id="b8bc6-120">Animation Control Creation</span></span>](#animation-control-creation)
-   [<span data-ttu-id="b8bc6-121">Informazioni sui messaggi di controllo animazione</span><span class="sxs-lookup"><span data-stu-id="b8bc6-121">About Animation Control Messages</span></span>](#about-animation-control-messages)
-   [<span data-ttu-id="b8bc6-122">Elaborazione del messaggio predefinita</span><span class="sxs-lookup"><span data-stu-id="b8bc6-122">Default Message Processing</span></span>](#default-message-processing)

## <a name="animation-control-creation"></a><span data-ttu-id="b8bc6-123">Creazione del controllo animazione</span><span class="sxs-lookup"><span data-stu-id="b8bc6-123">Animation Control Creation</span></span>

<span data-ttu-id="b8bc6-124">Un controllo di animazione appartiene alla classe della finestra della [**\_ classe animata**](common-control-window-classes.md) .</span><span class="sxs-lookup"><span data-stu-id="b8bc6-124">An animation control belongs to the [**ANIMATE\_CLASS**](common-control-window-classes.md) window class.</span></span> <span data-ttu-id="b8bc6-125">Per creare un controllo di animazione, usare la funzione [**CreateWindow**](/windows/desktop/api/winuser/nf-winuser-createwindowa) o [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) o la macro [**\_ create animate**](/windows/desktop/api/Commctrl/nf-commctrl-animate_create) .</span><span class="sxs-lookup"><span data-stu-id="b8bc6-125">You create an animation control by using the [**CreateWindow**](/windows/desktop/api/winuser/nf-winuser-createwindowa) or [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function or the [**Animate\_Create**](/windows/desktop/api/Commctrl/nf-commctrl-animate_create) macro.</span></span> <span data-ttu-id="b8bc6-126">La macro posiziona il controllo dell'animazione nell'angolo superiore sinistro della finestra padre e, se non si specifica lo stile del [**\_ centro ACS**](animation-control-styles.md) , imposta la larghezza e l'altezza del controllo in base alle dimensioni di un frame nel clip AVI.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-126">The macro positions the animation control in the upper-left corner of the parent window and, if the [**ACS\_CENTER**](animation-control-styles.md) style is not specified, sets the width and height of the control based on the dimensions of a frame in the AVI clip.</span></span> <span data-ttu-id="b8bc6-127">Se viene specificato il **\_ centro ACS** , **animate \_ create** imposta la larghezza e l'altezza del controllo su zero.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-127">If **ACS\_CENTER** is specified, **Animate\_Create** sets the width and height of the control to zero.</span></span> <span data-ttu-id="b8bc6-128">È possibile utilizzare la funzione [**SetWindowPos**](/windows/desktop/api/winuser/nf-winuser-setwindowpos) per impostare la posizione e le dimensioni del controllo.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-128">You can use the [**SetWindowPos**](/windows/desktop/api/winuser/nf-winuser-setwindowpos) function to set the position and size of the control.</span></span>

<span data-ttu-id="b8bc6-129">Se si crea un controllo animazione in una finestra di dialogo o in una risorsa della finestra di dialogo, il controllo viene eliminato automaticamente quando l'utente chiude la finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-129">If you create an animation control within a dialog box or from a dialog box resource, the control is automatically destroyed when the user closes the dialog box.</span></span> <span data-ttu-id="b8bc6-130">Se si crea un controllo animazione in una finestra, è necessario eliminare in modo esplicito il controllo.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-130">If you create an animation control within a window, you must explicitly destroy the control.</span></span>

## <a name="about-animation-control-messages"></a><span data-ttu-id="b8bc6-131">Informazioni sui messaggi di controllo animazione</span><span class="sxs-lookup"><span data-stu-id="b8bc6-131">About Animation Control Messages</span></span>

<span data-ttu-id="b8bc6-132">Un'applicazione invia messaggi a un controllo animazione per aprire, riprodurre, arrestare e chiudere il clip AVI corrispondente.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-132">An application sends messages to an animation control to open, play, stop, and close the corresponding AVI clip.</span></span> <span data-ttu-id="b8bc6-133">Ogni messaggio ha una o più macro che è possibile usare anziché inviare il messaggio in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-133">Each message has one or more macros that you can use instead of sending the message explicitly.</span></span>

<span data-ttu-id="b8bc6-134">Dopo aver creato un controllo di animazione, un'applicazione invia il messaggio di [**\_ apertura di ACM**](acm-open.md) per aprire una clip AVI e caricarla in memoria.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-134">After creating an animation control, an application sends the [**ACM\_OPEN**](acm-open.md) message to open an AVI clip and load it into memory.</span></span> <span data-ttu-id="b8bc6-135">Il messaggio specifica il percorso di un file AVI o il nome di una risorsa AVI.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-135">The message specifies either the path of an AVI file or the name of an AVI resource.</span></span> <span data-ttu-id="b8bc6-136">Il sistema carica la risorsa AVI dal modulo che ha creato il controllo dell'animazione.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-136">The system loads the AVI resource from the module that created the animation control.</span></span>

<span data-ttu-id="b8bc6-137">Se il controllo dell'animazione dispone dello stile di [**\_ riproduzione automatica ACS**](animation-control-styles.md) , il controllo inizia a riprodurre il clip AVI immediatamente dopo l'apertura del file AVI o della risorsa AVI.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-137">If the animation control has the [**ACS\_AUTOPLAY**](animation-control-styles.md) style, the control begins playing the AVI clip immediately after the AVI file or AVI resource is opened.</span></span> <span data-ttu-id="b8bc6-138">In caso contrario, un'applicazione può usare il messaggio [**ACM \_ Play**](acm-play.md) per avviare il clip AVI.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-138">Otherwise, an application can use the [**ACM\_PLAY**](acm-play.md) message to start the AVI clip.</span></span> <span data-ttu-id="b8bc6-139">Un'applicazione può arrestare il clip in qualsiasi momento inviando il messaggio di [**\_ arresto di ACM**](acm-stop.md) .</span><span class="sxs-lookup"><span data-stu-id="b8bc6-139">An application can stop the clip at any time by sending the [**ACM\_STOP**](acm-stop.md) message.</span></span> <span data-ttu-id="b8bc6-140">L'ultimo frame riprodotto rimane visualizzato quando il controllo termina la riproduzione del clip AVI o quando viene inviato il punto di **\_ arresto di ACM** .</span><span class="sxs-lookup"><span data-stu-id="b8bc6-140">The last frame played remains displayed when the control finishes playing the AVI clip or when **ACM\_STOP** is sent.</span></span>

<span data-ttu-id="b8bc6-141">Un controllo animazione può inviare due codici di notifica alla relativa finestra padre: [ACN \_ Start](acn-start.md) e [ACN \_ Stop](acn-stop.md).</span><span class="sxs-lookup"><span data-stu-id="b8bc6-141">An animation control can send two notification codes to its parent window: [ACN\_START](acn-start.md) and [ACN\_STOP](acn-stop.md).</span></span> <span data-ttu-id="b8bc6-142">La maggior parte delle applicazioni non gestisce alcuna notifica.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-142">Most applications do not handle either notification.</span></span>

<span data-ttu-id="b8bc6-143">Per chiudere il file AVI o la risorsa AVI e rimuoverlo dalla memoria, un'applicazione può usare la macro di [**animazione \_ Close**](/windows/desktop/api/Commctrl/nf-commctrl-animate_close) , che invia ad [**ACM \_ Open**](acm-open.md) con il nome file o il nome della risorsa impostato su **null**.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-143">To close the AVI file or AVI resource and remove it from memory, an application can use the [**Animate\_Close**](/windows/desktop/api/Commctrl/nf-commctrl-animate_close) macro, which sends [**ACM\_OPEN**](acm-open.md) with the file name or resource name set to **NULL**.</span></span>

## <a name="default-message-processing"></a><span data-ttu-id="b8bc6-144">Elaborazione del messaggio predefinita</span><span class="sxs-lookup"><span data-stu-id="b8bc6-144">Default Message Processing</span></span>

<span data-ttu-id="b8bc6-145">In questa sezione vengono descritti i messaggi della finestra gestiti dalla routine della finestra per la classe della finestra [**anima \_ classe**](common-control-window-classes.md) .</span><span class="sxs-lookup"><span data-stu-id="b8bc6-145">This section describes the window messages handled by the window procedure for the [**ANIMATE\_CLASS**](common-control-window-classes.md) window class.</span></span>



| <span data-ttu-id="b8bc6-146">Message</span><span class="sxs-lookup"><span data-stu-id="b8bc6-146">Message</span></span>                                    | <span data-ttu-id="b8bc6-147">Elaborazione eseguita</span><span class="sxs-lookup"><span data-stu-id="b8bc6-147">Processing performed</span></span>                                                                                                                                                                                                                                                                        |
|--------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="b8bc6-148">**\_chiusura WM**</span><span class="sxs-lookup"><span data-stu-id="b8bc6-148">**WM\_CLOSE**</span></span>](/windows/desktop/winmsg/wm-close)           | <span data-ttu-id="b8bc6-149">Libera il file AVI o la risorsa AVI associata al controllo dell'animazione.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-149">Frees the AVI file or AVI resource associated with the animation control.</span></span>                                                                                                                                                                                                                   |
| [<span data-ttu-id="b8bc6-150">**eliminazione di WM \_**</span><span class="sxs-lookup"><span data-stu-id="b8bc6-150">**WM\_DESTROY**</span></span>](/windows/desktop/winmsg/wm-destroy)       | <span data-ttu-id="b8bc6-151">Libera il file AVI o la risorsa AVI, libera una struttura di dati interna, quindi chiama la funzione [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) .</span><span class="sxs-lookup"><span data-stu-id="b8bc6-151">Frees the AVI file or AVI resource, frees an internal data structure, and then calls the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function.</span></span>                                                                                                                                                |
| [<span data-ttu-id="b8bc6-152">**\_ERASEBKGND WM**</span><span class="sxs-lookup"><span data-stu-id="b8bc6-152">**WM\_ERASEBKGND**</span></span>](/windows/desktop/winmsg/wm-erasebkgnd) | <span data-ttu-id="b8bc6-153">Cancella lo sfondo della finestra usando il colore di sfondo corrente per i controlli statici.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-153">Erases the window background using the current background color for static controls.</span></span>                                                                                                                                                                                                        |
| [<span data-ttu-id="b8bc6-154">**\_NCCREATE WM**</span><span class="sxs-lookup"><span data-stu-id="b8bc6-154">**WM\_NCCREATE**</span></span>](/windows/desktop/winmsg/wm-nccreate)     | <span data-ttu-id="b8bc6-155">Alloca e Inizializza una struttura di dati interna, quindi chiama [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span><span class="sxs-lookup"><span data-stu-id="b8bc6-155">Allocates and initializes an internal data structure and then calls [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span></span>                                                                                                                                                                              |
| [<span data-ttu-id="b8bc6-156">**\_NCHITTEST WM**</span><span class="sxs-lookup"><span data-stu-id="b8bc6-156">**WM\_NCHITTEST**</span></span>](/windows/desktop/inputdev/wm-nchittest) | <span data-ttu-id="b8bc6-157">Restituisce il valore dell'hit test di HTTRANSPARENT.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-157">Returns the HTTRANSPARENT hit test value.</span></span>                                                                                                                                                                                                                                                   |
| [<span data-ttu-id="b8bc6-158">**\_disegno WM**</span><span class="sxs-lookup"><span data-stu-id="b8bc6-158">**WM\_PAINT**</span></span>](/windows/desktop/gdi/wm-paint)              | <span data-ttu-id="b8bc6-159">Disegna un frame AVI nel controllo dell'animazione.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-159">Draws an AVI frame in the animation control.</span></span>                                                                                                                                                                                                                                                |
| [<span data-ttu-id="b8bc6-160">**\_dimensioni WM**</span><span class="sxs-lookup"><span data-stu-id="b8bc6-160">**WM\_SIZE**</span></span>](/windows/desktop/winmsg/wm-size)             | <span data-ttu-id="b8bc6-161">Verifica se il controllo ha lo stile del [**\_ centro ACS**](animation-control-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="b8bc6-161">Checks if the control has the [**ACS\_CENTER**](animation-control-styles.md) style.</span></span> <span data-ttu-id="b8bc6-162">Se il controllo non lo è, viene chiamato [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span><span class="sxs-lookup"><span data-stu-id="b8bc6-162">If the control does not, it calls [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span></span> <span data-ttu-id="b8bc6-163">In caso contrario, centra l'animazione nel controllo, invalida il controllo e quindi chiama **DefWindowProc**.</span><span class="sxs-lookup"><span data-stu-id="b8bc6-163">Otherwise, it centers the animation in the control, invalidates the control, and then calls **DefWindowProc**.</span></span> |



 

 

 