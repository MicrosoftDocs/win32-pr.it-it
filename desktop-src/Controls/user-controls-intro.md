---
title: Controlli personalizzati
description: Questa sezione contiene informazioni sui controlli personalizzati o definiti dall'applicazione.
ms.assetid: 220f7058-db04-46d0-acee-ed5e676790b3
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e82ed9394ec06257e524153b86ef487f4507f35b
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/21/2020
ms.locfileid: "104118483"
---
# <a name="custom-controls"></a><span data-ttu-id="d351c-103">Controlli personalizzati</span><span class="sxs-lookup"><span data-stu-id="d351c-103">Custom Controls</span></span>

<span data-ttu-id="d351c-104">Questa sezione contiene informazioni sui controlli personalizzati o definiti dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="d351c-104">This section contains information about application-defined or custom controls.</span></span>

<span data-ttu-id="d351c-105">Vengono illustrati gli argomenti seguenti.</span><span class="sxs-lookup"><span data-stu-id="d351c-105">The following topics are discussed.</span></span>

-   [<span data-ttu-id="d351c-106">Creazione di controlli Owner-Drawn</span><span class="sxs-lookup"><span data-stu-id="d351c-106">Creating Owner-Drawn Controls</span></span>](#creating-owner-drawn-controls)
-   [<span data-ttu-id="d351c-107">Sottoclasse della classe della finestra di un controllo esistente</span><span class="sxs-lookup"><span data-stu-id="d351c-107">Subclassing the Window Class of an Existing Control</span></span>](#subclassing-the-window-class-of-an-existing-control)
-   [<span data-ttu-id="d351c-108">Implementazione di una classe Application-Defined Window</span><span class="sxs-lookup"><span data-stu-id="d351c-108">Implementing an Application-Defined Window Class</span></span>](#implementing-an-application-defined-window-class)
-   [<span data-ttu-id="d351c-109">Invio di notifiche da un controllo</span><span class="sxs-lookup"><span data-stu-id="d351c-109">Sending Notifications from a Control</span></span>](#sending-notifications-from-a-control)
-   [<span data-ttu-id="d351c-110">Accessibilità</span><span class="sxs-lookup"><span data-stu-id="d351c-110">Accessibility</span></span>](#accessibility)
-   [<span data-ttu-id="d351c-111">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="d351c-111">Related topics</span></span>](#related-topics)

## <a name="creating-owner-drawn-controls"></a><span data-ttu-id="d351c-112">Creazione di controlli Owner-Drawn</span><span class="sxs-lookup"><span data-stu-id="d351c-112">Creating Owner-Drawn Controls</span></span>

<span data-ttu-id="d351c-113">I pulsanti, i menu, i controlli di testo statici, le caselle di riepilogo e le caselle combinate possono essere creati con un flag di stile disegnato dal proprietario.</span><span class="sxs-lookup"><span data-stu-id="d351c-113">Buttons, menus, static text controls, list boxes, and combo boxes can be created with an owner-drawn style flag.</span></span> <span data-ttu-id="d351c-114">Quando un controllo ha lo stile disegnato dal proprietario, il sistema gestisce l'interazione dell'utente con il controllo come di consueto, eseguendo attività come il rilevamento quando un utente sceglie un pulsante e invia una notifica al proprietario dell'evento.</span><span class="sxs-lookup"><span data-stu-id="d351c-114">When a control has the owner-drawn style, the system handles the user's interaction with the control as usual, performing such tasks as detecting when a user has chosen a button and notifying the button's owner of the event.</span></span> <span data-ttu-id="d351c-115">Tuttavia, poiché il controllo è creato dal proprietario, la finestra padre del controllo è responsabile dell'aspetto visivo del controllo.</span><span class="sxs-lookup"><span data-stu-id="d351c-115">However, because the control is owner-drawn, the parent window of the control is responsible for the visual appearance of the control.</span></span> <span data-ttu-id="d351c-116">La finestra padre riceve un messaggio ogni volta che è necessario disegnare il controllo.</span><span class="sxs-lookup"><span data-stu-id="d351c-116">The parent window receives a message whenever the control must be drawn.</span></span>

<span data-ttu-id="d351c-117">Per i pulsanti e i controlli di testo statici, lo stile disegnato dal proprietario influiscono sul modo in cui il sistema disegna l'intero controllo.</span><span class="sxs-lookup"><span data-stu-id="d351c-117">For buttons and static text controls, the owner-drawn style affects how the system draws the entire control.</span></span> <span data-ttu-id="d351c-118">Per le caselle di riepilogo e le caselle combinate, la finestra padre disegna gli elementi all'interno del controllo e il controllo disegna il proprio contorno.</span><span class="sxs-lookup"><span data-stu-id="d351c-118">For list boxes and combo boxes, the parent window draws the items within the control, and the control draws its own outline.</span></span> <span data-ttu-id="d351c-119">Ad esempio, un'applicazione può personalizzare una casella di riepilogo in modo da visualizzare una piccola bitmap accanto a ogni elemento dell'elenco.</span><span class="sxs-lookup"><span data-stu-id="d351c-119">For example, an application can customize a list box so that it displays a small bitmap next to each item in the list.</span></span>

<span data-ttu-id="d351c-120">Nell'esempio di codice seguente viene illustrato come creare un controllo testo statico creato dal proprietario.</span><span class="sxs-lookup"><span data-stu-id="d351c-120">The following example code shows how to create an owner-drawn static text control.</span></span> <span data-ttu-id="d351c-121">Si supponga che Unicode sia definito.</span><span class="sxs-lookup"><span data-stu-id="d351c-121">Assume that Unicode is defined.</span></span>


```
// g_myStatic is a global HWND variable.
g_myStatic = CreateWindowEx(0, L"STATIC", L"Some static text", 
            WS_CHILD | WS_VISIBLE | SS_OWNERDRAW, 
            25, 125, 150, 20, hDlg, 0, 0, 0);
```



<span data-ttu-id="d351c-122">Nell'esempio seguente, nella procedura della finestra di dialogo che contiene il controllo creato nell'esempio precedente, il messaggio [**WM \_ DrawItem**](wm-drawitem.md) viene gestito visualizzando il testo in un colore personalizzato, usando il tipo di carattere predefinito.</span><span class="sxs-lookup"><span data-stu-id="d351c-122">In the following example, from the window procedure for the dialog box that contains the control created in the previous example, the [**WM\_DRAWITEM**](wm-drawitem.md) message is handled by displaying the text in a custom color, using the default font.</span></span> <span data-ttu-id="d351c-123">Si noti che non è necessario chiamare [**BeginPaint**](/windows/desktop/api/winuser/nf-winuser-beginpaint) e [**EndPaint**](/windows/desktop/api/winuser/nf-winuser-endpaint) quando si gestisce **WM \_ DrawItem**.</span><span class="sxs-lookup"><span data-stu-id="d351c-123">Note that you do not need to call [**BeginPaint**](/windows/desktop/api/winuser/nf-winuser-beginpaint) and [**EndPaint**](/windows/desktop/api/winuser/nf-winuser-endpaint) when handling **WM\_DRAWITEM**.</span></span>


```
case WM_DRAWITEM:
{
    LPDRAWITEMSTRUCT pDIS = (LPDRAWITEMSTRUCT)lParam;
    if (pDIS->hwndItem == g_myStatic)
    {
        SetTextColor(pDIS->hDC, RGB(100, 0, 100));
        WCHAR staticText[99];
        int len = SendMessage(myStatic, WM_GETTEXT, 
            ARRAYSIZE(staticText), (LPARAM)staticText);
        TextOut(pDIS->hDC, pDIS->rcItem.left, pDIS->rcItem.top, staticText, len);
    }
    return TRUE;
}
```



<span data-ttu-id="d351c-124">Per ulteriori informazioni sui controlli creati dal proprietario, vedere [creazione di una casella di riepilogo creata dal proprietario](using-list-boxes.md) e [caselle combinate create](about-combo-boxes.md)dal proprietario.</span><span class="sxs-lookup"><span data-stu-id="d351c-124">For more information about owner-drawn controls, see [Creating an Owner-drawn List Box](using-list-boxes.md) and [Owner Drawn Combo Boxes](about-combo-boxes.md).</span></span>

## <a name="subclassing-the-window-class-of-an-existing-control"></a><span data-ttu-id="d351c-125">Sottoclasse della classe della finestra di un controllo esistente</span><span class="sxs-lookup"><span data-stu-id="d351c-125">Subclassing the Window Class of an Existing Control</span></span>

<span data-ttu-id="d351c-126">La creazione di una sottoclasse di un controllo esistente è un altro modo per creare un controllo personalizzato.</span><span class="sxs-lookup"><span data-stu-id="d351c-126">Subclassing an existing control is another way to create a custom control.</span></span> <span data-ttu-id="d351c-127">La procedura di sottoclasse può modificare i comportamenti selezionati del controllo elaborando i messaggi che interessano i comportamenti selezionati.</span><span class="sxs-lookup"><span data-stu-id="d351c-127">The subclass procedure can alter selected behaviors of the control by processing those messages that affect the selected behaviors.</span></span> <span data-ttu-id="d351c-128">Tutti gli altri messaggi passano alla routine della finestra originale per il controllo.</span><span class="sxs-lookup"><span data-stu-id="d351c-128">All other messages pass to the original window procedure for the control.</span></span> <span data-ttu-id="d351c-129">Ad esempio, un'applicazione può visualizzare una piccola bitmap accanto al testo in un controllo di sola lettura e di modifica a riga singola eseguendo la sottoclasse del controllo ed elaborando il messaggio di [**\_ disegno WM**](/windows/desktop/gdi/wm-paint) .</span><span class="sxs-lookup"><span data-stu-id="d351c-129">For example, an application can display a small bitmap next to the text in a read-only, single-line edit control by subclassing the control and processing the [**WM\_PAINT**](/windows/desktop/gdi/wm-paint) message.</span></span> <span data-ttu-id="d351c-130">Per ulteriori informazioni, vedere [informazioni sulle routine della finestra e sui controlli di](/windows/desktop/winmsg/about-window-procedures) [sottoclasse](subclassing-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d351c-130">For more information, see [About Window Procedures](/windows/desktop/winmsg/about-window-procedures) and [Subclassing Controls](subclassing-overview.md).</span></span>

## <a name="implementing-an-application-defined-window-class"></a><span data-ttu-id="d351c-131">Implementazione di una classe Application-Defined Window</span><span class="sxs-lookup"><span data-stu-id="d351c-131">Implementing an Application-Defined Window Class</span></span>

<span data-ttu-id="d351c-132">Per creare un controllo non basato in modo esplicito su un controllo esistente, l'applicazione deve creare e registrare una classe di finestra.</span><span class="sxs-lookup"><span data-stu-id="d351c-132">To create a control that is not explicitly based on an existing control, the application must create and register a window class.</span></span> <span data-ttu-id="d351c-133">Il processo per la registrazione di una classe di finestra definita dall'applicazione per un controllo personalizzato equivale alla registrazione di una classe per una finestra ordinaria.</span><span class="sxs-lookup"><span data-stu-id="d351c-133">The process for registering an application-defined window class for a custom control is the same as registering a class for an ordinary window.</span></span> <span data-ttu-id="d351c-134">Per creare un controllo personalizzato, specificare il nome della classe della finestra nella funzione [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) o in un modello di finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="d351c-134">To create a custom control, specify the name of the window class in the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function or in a dialog box template.</span></span> <span data-ttu-id="d351c-135">Ogni classe deve avere un nome univoco, una routine della finestra corrispondente e altre informazioni.</span><span class="sxs-lookup"><span data-stu-id="d351c-135">Each class must have a unique name, a corresponding window procedure, and other information.</span></span>

<span data-ttu-id="d351c-136">Come minimo, la routine della finestra Disegna il controllo.</span><span class="sxs-lookup"><span data-stu-id="d351c-136">At a minimum, the window procedure draws the control.</span></span> <span data-ttu-id="d351c-137">Se un'applicazione utilizza il controllo per consentire all'utente di immettere informazioni sul tipo, la procedura della finestra elabora anche i messaggi di input dalla tastiera e il mouse e invia messaggi di notifica alla finestra padre.</span><span class="sxs-lookup"><span data-stu-id="d351c-137">If an application uses the control to let the user type information, the window procedure also processes input messages from the keyboard and mouse and sends notification messages to the parent window.</span></span> <span data-ttu-id="d351c-138">Inoltre, se il controllo supporta i messaggi di controllo, la routine della finestra elabora i messaggi inviati dalla finestra padre o da altre finestre.</span><span class="sxs-lookup"><span data-stu-id="d351c-138">In addition, if the control supports control messages, the window procedure processes messages sent to it by the parent window or other windows.</span></span> <span data-ttu-id="d351c-139">I controlli, ad esempio, elaborano spesso il messaggio [**WM \_ GETDLGCODE**](/windows/desktop/dlgbox/wm-getdlgcode) inviato da finestre di dialogo per indicare a una finestra di dialogo di elaborare l'input da tastiera in un determinato modo.</span><span class="sxs-lookup"><span data-stu-id="d351c-139">For example, controls often process the [**WM\_GETDLGCODE**](/windows/desktop/dlgbox/wm-getdlgcode) message sent by dialog boxes to direct a dialog box to process keyboard input in a given way.</span></span>

<span data-ttu-id="d351c-140">La routine della finestra per un controllo definito dall'applicazione deve elaborare qualsiasi messaggio di controllo predefinito nella tabella seguente se il messaggio influiscono sul funzionamento del controllo.</span><span class="sxs-lookup"><span data-stu-id="d351c-140">The window procedure for an application-defined control should process any predefined control message in the following table if the message affects the operation of the control.</span></span>



| <span data-ttu-id="d351c-141">Message</span><span class="sxs-lookup"><span data-stu-id="d351c-141">Message</span></span>                                          | <span data-ttu-id="d351c-142">Recommendation</span><span class="sxs-lookup"><span data-stu-id="d351c-142">Recommendation</span></span>                                                                                                                                                                                                                                  |
|--------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="d351c-143">**\_GETDLGCODE WM**</span><span class="sxs-lookup"><span data-stu-id="d351c-143">**WM\_GETDLGCODE**</span></span>](/windows/desktop/dlgbox/wm-getdlgcode)       | <span data-ttu-id="d351c-144">Elaborare se il controllo Usa i tasti INVIO, ESC, TAB o freccia.</span><span class="sxs-lookup"><span data-stu-id="d351c-144">Process if the control uses the ENTER, ESC, TAB, or arrow keys.</span></span> <span data-ttu-id="d351c-145">La funzione [**IsDialogMessage**](/windows/desktop/api/winuser/nf-winuser-isdialogmessagea) Invia questo messaggio ai controlli in una finestra di dialogo per determinare se elaborare le chiavi o passarle al controllo.</span><span class="sxs-lookup"><span data-stu-id="d351c-145">The [**IsDialogMessage**](/windows/desktop/api/winuser/nf-winuser-isdialogmessagea) function sends this message to controls in a dialog box to determine whether to process the keys or pass them to the control.</span></span> |
| [<span data-ttu-id="d351c-146">**\_tipo di carattere WM GetFont**</span><span class="sxs-lookup"><span data-stu-id="d351c-146">**WM\_GETFONT**</span></span>](/windows/desktop/winmsg/wm-getfont)             | <span data-ttu-id="d351c-147">Elabora se viene elaborato anche il messaggio [**WM \_ sefont**](/windows/desktop/winmsg/wm-setfont) .</span><span class="sxs-lookup"><span data-stu-id="d351c-147">Process if the [**WM\_SETFONT**](/windows/desktop/winmsg/wm-setfont) message is also processed.</span></span>                                                                                                                                                                  |
| [<span data-ttu-id="d351c-148">**WM \_ GETtext**</span><span class="sxs-lookup"><span data-stu-id="d351c-148">**WM\_GETTEXT**</span></span>](/windows/desktop/winmsg/wm-gettext)             | <span data-ttu-id="d351c-149">Elaborare se il testo del controllo non è uguale al titolo specificato dalla funzione [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) .</span><span class="sxs-lookup"><span data-stu-id="d351c-149">Process if the control text is not the same as the title specified by the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function.</span></span>                                                                                                                 |
| [<span data-ttu-id="d351c-150">**\_GETTEXTLENGTH WM**</span><span class="sxs-lookup"><span data-stu-id="d351c-150">**WM\_GETTEXTLENGTH**</span></span>](/windows/desktop/winmsg/wm-gettextlength) | <span data-ttu-id="d351c-151">Elaborare se il testo del controllo non è uguale al titolo specificato dalla funzione [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) .</span><span class="sxs-lookup"><span data-stu-id="d351c-151">Process if the control text is not the same as the title specified by the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function.</span></span>                                                                                                                 |
| [<span data-ttu-id="d351c-152">**\_KILLFOCUS WM**</span><span class="sxs-lookup"><span data-stu-id="d351c-152">**WM\_KILLFOCUS**</span></span>](/windows/desktop/inputdev/wm-killfocus)       | <span data-ttu-id="d351c-153">Elabora se il controllo Visualizza un accento circonflesso, un rettangolo di attivazione o un altro elemento per indicare che ha lo stato attivo per l'input.</span><span class="sxs-lookup"><span data-stu-id="d351c-153">Process if the control displays a caret, a focus rectangle, or another item to indicate that it has the input focus.</span></span>                                                                                                                            |
| [<span data-ttu-id="d351c-154">**\_stato attivo WM**</span><span class="sxs-lookup"><span data-stu-id="d351c-154">**WM\_SETFOCUS**</span></span>](/windows/desktop/inputdev/wm-setfocus)         | <span data-ttu-id="d351c-155">Elabora se il controllo Visualizza un accento circonflesso, un rettangolo di attivazione o un altro elemento per indicare che ha lo stato attivo per l'input.</span><span class="sxs-lookup"><span data-stu-id="d351c-155">Process if the control displays a caret, a focus rectangle, or another item to indicate that it has the input focus.</span></span>                                                                                                                            |
| [<span data-ttu-id="d351c-156">**\_testo WM**</span><span class="sxs-lookup"><span data-stu-id="d351c-156">**WM\_SETTEXT**</span></span>](/windows/desktop/winmsg/wm-settext)             | <span data-ttu-id="d351c-157">Elaborare se il testo del controllo non è uguale al titolo specificato dalla funzione [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) .</span><span class="sxs-lookup"><span data-stu-id="d351c-157">Process if the control text is not the same as the title specified by the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function.</span></span>                                                                                                                 |
| [<span data-ttu-id="d351c-158">**\_tipo di carattere WM**</span><span class="sxs-lookup"><span data-stu-id="d351c-158">**WM\_SETFONT**</span></span>](/windows/desktop/winmsg/wm-setfont)             | <span data-ttu-id="d351c-159">Elaborare se il controllo Visualizza il testo.</span><span class="sxs-lookup"><span data-stu-id="d351c-159">Process if the control displays text.</span></span> <span data-ttu-id="d351c-160">Questo messaggio viene inviato dal sistema durante la creazione di una finestra di dialogo con lo \_ stile DS sefont.</span><span class="sxs-lookup"><span data-stu-id="d351c-160">The system sends this message when creating a dialog box that has the DS\_SETFONT style.</span></span>                                                                                                                  |



 

<span data-ttu-id="d351c-161">I messaggi di controllo definiti dall'applicazione sono specifici del controllo specificato e devono essere inviati in modo esplicito al controllo tramite una funzione [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) o [**SendDlgItemMessage**](/windows/desktop/api/winuser/nf-winuser-senddlgitemmessagea) .</span><span class="sxs-lookup"><span data-stu-id="d351c-161">Application-defined control messages are specific to the given control and must be explicitly sent to the control by using a [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) or [**SendDlgItemMessage**](/windows/desktop/api/winuser/nf-winuser-senddlgitemmessagea) function.</span></span> <span data-ttu-id="d351c-162">Il valore numerico per ogni messaggio deve essere univoco e non deve essere in conflitto con i valori di altri messaggi della finestra.</span><span class="sxs-lookup"><span data-stu-id="d351c-162">The numeric value for each message must be unique and must not conflict with the values of other window messages.</span></span> <span data-ttu-id="d351c-163">Per assicurarsi che i valori dei messaggi definiti dall'applicazione non siano in conflitto, un'applicazione deve creare ogni valore aggiungendo un numero univoco al valore [**\_ utente WM**](/windows/desktop/winmsg/wm-user) .</span><span class="sxs-lookup"><span data-stu-id="d351c-163">To ensure that application-defined message values do not conflict, an application should create each value by adding a unique number to the [**WM\_USER**](/windows/desktop/winmsg/wm-user) value.</span></span>

## <a name="sending-notifications-from-a-control"></a><span data-ttu-id="d351c-164">Invio di notifiche da un controllo</span><span class="sxs-lookup"><span data-stu-id="d351c-164">Sending Notifications from a Control</span></span>

<span data-ttu-id="d351c-165">I controlli personalizzati potrebbero essere necessari per inviare notifiche di eventi alla finestra padre in modo che l'applicazione host possa rispondere a questi eventi.</span><span class="sxs-lookup"><span data-stu-id="d351c-165">Custom controls might be required to send notifications of events to the parent window so that the host application can respond to these events.</span></span> <span data-ttu-id="d351c-166">Ad esempio, una visualizzazione elenco personalizzata può inviare una notifica quando l'utente seleziona un elemento e un'altra notifica quando si fa doppio clic su un elemento.</span><span class="sxs-lookup"><span data-stu-id="d351c-166">For example, a custom list view might send a notification when the user selects an item, and another notification when an item is double-clicked.</span></span>

<span data-ttu-id="d351c-167">Le notifiche vengono inviate come i messaggi [**WM \_ Command**](/windows/desktop/menurc/wm-command) o [**WM \_ Notify**](wm-notify.md) .</span><span class="sxs-lookup"><span data-stu-id="d351c-167">Notifications are sent as [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) or [**WM\_NOTIFY**](wm-notify.md) messages.</span></span> <span data-ttu-id="d351c-168">**WM \_** I messaggi di notifica contengono più informazioni rispetto ai messaggi di **\_ comando WM** .</span><span class="sxs-lookup"><span data-stu-id="d351c-168">**WM\_NOTIFY** messages carry more information than **WM\_COMMAND** messages.</span></span>

<span data-ttu-id="d351c-169">L'identificatore di controllo è un numero univoco usato dall'applicazione per identificare il controllo che invia il messaggio.</span><span class="sxs-lookup"><span data-stu-id="d351c-169">The control identifier is a unique number the application uses to identify the control sending the message.</span></span> <span data-ttu-id="d351c-170">L'applicazione imposta l'identificatore per un controllo quando crea il controllo.</span><span class="sxs-lookup"><span data-stu-id="d351c-170">The application sets the identifier for a control when it creates the control.</span></span> <span data-ttu-id="d351c-171">Tramite l'applicazione viene specificato l'identificatore nel parametro *HMENU* della funzione [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) o nel membro **ID** della struttura [**DLGITEMTEMPLATEEX**](/windows/desktop/dlgbox/dlgitemtemplateex) .</span><span class="sxs-lookup"><span data-stu-id="d351c-171">The application specifies the identifier either in the *hMenu* parameter of the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function or in the **id** member of the [**DLGITEMTEMPLATEEX**](/windows/desktop/dlgbox/dlgitemtemplateex) structure.</span></span>

<span data-ttu-id="d351c-172">Poiché il controllo stesso non imposta l'identificatore del controllo, il controllo deve recuperare l'identificatore prima di poter inviare i messaggi di notifica.</span><span class="sxs-lookup"><span data-stu-id="d351c-172">Because the control itself does not set the control identifier, the control must retrieve the identifier before it can send notification messages.</span></span> <span data-ttu-id="d351c-173">Un controllo deve usare la funzione [**GetDlgCtrlID**](/windows/desktop/api/winuser/nf-winuser-getdlgctrlid) per recuperare il proprio identificatore del controllo.</span><span class="sxs-lookup"><span data-stu-id="d351c-173">A control must use the [**GetDlgCtrlID**](/windows/desktop/api/winuser/nf-winuser-getdlgctrlid) function to retrieve its own control identifier.</span></span> <span data-ttu-id="d351c-174">Sebbene l'identificatore di controllo venga specificato come handle di menu quando viene creato il controllo, non è possibile utilizzare la funzione [**GetMenu**](/windows/desktop/api/winuser/nf-winuser-getmenu) per recuperare l'identificatore.</span><span class="sxs-lookup"><span data-stu-id="d351c-174">Although the control identifier is specified as the menu handle when the control is created, the [**GetMenu**](/windows/desktop/api/winuser/nf-winuser-getmenu) function cannot be used to retrieve the identifier.</span></span> <span data-ttu-id="d351c-175">In alternativa, un controllo può recuperare l'identificatore dal membro **HMENU** nella struttura [**struttura CREATESTRUCT**](/windows/win32/api/winuser/ns-winuser-createstructa) durante l'elaborazione del messaggio [**WM \_ create**](/windows/desktop/winmsg/wm-create) .</span><span class="sxs-lookup"><span data-stu-id="d351c-175">Alternatively, a control can retrieve the identifier from the **hMenu** member in the [**CREATESTRUCT**](/windows/win32/api/winuser/ns-winuser-createstructa) structure while processing the [**WM\_CREATE**](/windows/desktop/winmsg/wm-create) message.</span></span>

<span data-ttu-id="d351c-176">Gli esempi seguenti, in cui *hwndControl* è l'handle della finestra di controllo e CN \_ VALUECHANGED è una definizione di notifica personalizzata, mostrano le due modalità di invio di una notifica specifica del controllo.</span><span class="sxs-lookup"><span data-stu-id="d351c-176">The following examples, where *hwndControl* is the handle of the control window and CN\_VALUECHANGED is a custom notification definition, show the two ways of sending a control-specific notification.</span></span>


```
 // Send as WM_COMMAND.
SendMessage(GetParent(hwndControl), 
    WM_COMMAND,
    MAKEWPARAM(GetDlgCtrlID(hwndControl), CN_VALUECHANGED),
    (LPARAM)hwndControl);

// Send as WM_NOTIFY.           
NMHDR nmh;
nmh.code = CN_VALUECHANGED;
nmh.idFrom = GetDlgCtrlID(hwndControl);
nmh.hwndFrom = hwndControl;
SendMessage(GetParent(hwndControl), 
    WM_NOTIFY, 
    (WPARAM)hwndControl, 
    (LPARAM)&nmh);
```



<span data-ttu-id="d351c-177">Si noti che la struttura [**NMHDR**](/windows/desktop/api/richedit/ns-richedit-nmhdr) può far parte di una struttura più ampia definita dal controllo che contiene informazioni aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="d351c-177">Note that the [**NMHDR**](/windows/desktop/api/richedit/ns-richedit-nmhdr) structure can be part of a larger control-defined structure that contains additional information.</span></span> <span data-ttu-id="d351c-178">Nell'esempio, i valori vecchi e nuovi del controllo potrebbero essere contenuti in questa struttura.</span><span class="sxs-lookup"><span data-stu-id="d351c-178">In the example, the old and new values of the control might be contained in this structure.</span></span> <span data-ttu-id="d351c-179">Queste strutture estese vengono usate con molte notifiche standard. ad esempio, vedere [LVN \_ INSERTITEM](lvn-insertitem.md), che usa la struttura [**NMLISTVIEW**](/windows/win32/api/commctrl/ns-commctrl-nmlistview) .</span><span class="sxs-lookup"><span data-stu-id="d351c-179">(Such extended structures are used with many standard notifications; for example, see [LVN\_INSERTITEM](lvn-insertitem.md), which uses the [**NMLISTVIEW**](/windows/win32/api/commctrl/ns-commctrl-nmlistview) structure.)</span></span>

## <a name="accessibility"></a><span data-ttu-id="d351c-180">Accessibilità</span><span class="sxs-lookup"><span data-stu-id="d351c-180">Accessibility</span></span>

<span data-ttu-id="d351c-181">Tutti i controlli comuni supportano Microsoft Active Accessibility (MSAA), che consente l'accesso a livello di codice alle applicazioni tecnologiche accessibili, ad esempio i lettori dello schermo.</span><span class="sxs-lookup"><span data-stu-id="d351c-181">All the common controls support Microsoft Active Accessibility (MSAA), which enables programmatic access by accessible-technology applications such as screen-readers.</span></span> <span data-ttu-id="d351c-182">MSAA consente inoltre l'automazione dell'interfaccia utente, una tecnologia più recente, per interagire con i controlli.</span><span class="sxs-lookup"><span data-stu-id="d351c-182">MSAA also enables UI Automation, a newer technology, to interact with controls.</span></span>

<span data-ttu-id="d351c-183">I controlli personalizzati devono implementare l'interfaccia [**IAccessible**](/windows/desktop/api/oleacc/nn-oleacc-iaccessible) (per supportare MSAA) o le interfacce di automazione interfaccia utente o entrambi.</span><span class="sxs-lookup"><span data-stu-id="d351c-183">Custom controls should implement either the [**IAccessible**](/windows/desktop/api/oleacc/nn-oleacc-iaccessible) interface (to support MSAA) or the UI Automation interfaces, or both.</span></span> <span data-ttu-id="d351c-184">In caso contrario, i prodotti con tecnologia accessibile potranno ottenere solo informazioni molto limitate sulla finestra di controllo, non avranno accesso alle proprietà del controllo e non saranno in grado di attivare eventi nel controllo.</span><span class="sxs-lookup"><span data-stu-id="d351c-184">Otherwise, accessible-technology products will be able to obtain only very limited information about the control window, will not have access to the control's properties, and will be unable to trigger events in the control.</span></span>

<span data-ttu-id="d351c-185">Per altre informazioni su come rendere accessibile il controllo, vedere [API di automazione di Windows](/windows/desktop/WinAuto/windows-automation-api-portal).</span><span class="sxs-lookup"><span data-stu-id="d351c-185">For more information about making your control accessible, see [Windows Automation API](/windows/desktop/WinAuto/windows-automation-api-portal).</span></span>

## <a name="related-topics"></a><span data-ttu-id="d351c-186">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="d351c-186">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="d351c-187">**Informazioni concettuali**</span><span class="sxs-lookup"><span data-stu-id="d351c-187">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="d351c-188">Riferimento al controllo generale</span><span class="sxs-lookup"><span data-stu-id="d351c-188">General Control Reference</span></span>](common-control-reference.md)
</dt> <dt>

[<span data-ttu-id="d351c-189">Personalizzazione dell'aspetto di un controllo mediante il progetto personalizzato</span><span class="sxs-lookup"><span data-stu-id="d351c-189">Customizing a Control's Appearance Using Custom Draw</span></span>](custom-draw.md)
</dt> <dt>

[<span data-ttu-id="d351c-190">Messaggi di controllo</span><span class="sxs-lookup"><span data-stu-id="d351c-190">Control Messages</span></span>](control-messages.md)
</dt> <dt>

[<span data-ttu-id="d351c-191">Uso di stili di visualizzazione con controlli Owner-Drawn</span><span class="sxs-lookup"><span data-stu-id="d351c-191">Using Visual Styles with Owner-Drawn Controls</span></span>](using-visual-styles.md)
</dt> </dl>

 

 