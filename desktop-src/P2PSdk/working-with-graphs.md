---
description: Quando si utilizzano i grafici peer, è necessario chiamare le funzioni in un ordine specifico. Il flusso di chiamate varia a seconda che si stia creando o aprendo un grafo peer. In questo argomento viene identificato il flusso di chiamate di funzione in una semplice applicazione di peer Graph.
ms.assetid: cb4f48d0-d1e2-4a4b-bd5a-6e8f66d03806
title: Utilizzo dei grafici
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b4328b7a0109139421cf03c72a7228a3dc17e375
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106312199"
---
# <a name="working-with-graphs"></a><span data-ttu-id="fe5c2-105">Utilizzo dei grafici</span><span class="sxs-lookup"><span data-stu-id="fe5c2-105">Working with Graphs</span></span>

<span data-ttu-id="fe5c2-106">Quando si utilizzano i grafici peer, è necessario chiamare le funzioni in un ordine specifico.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-106">When working with peer graphs, functions must be called in a specific order.</span></span> <span data-ttu-id="fe5c2-107">Il flusso di chiamate varia a seconda che si stia creando o aprendo un grafo peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-107">The flow of calls depends on whether you are creating or opening a peer graph.</span></span> <span data-ttu-id="fe5c2-108">In questo argomento viene identificato il flusso di chiamate di funzione in una semplice applicazione di peer Graph.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-108">This topic identifies the flow of function calls in a simple peer graph application.</span></span>

## <a name="starting-up-a-graph"></a><span data-ttu-id="fe5c2-109">Avvio di un grafico</span><span class="sxs-lookup"><span data-stu-id="fe5c2-109">Starting Up a Graph</span></span>

<span data-ttu-id="fe5c2-110">Prima che un'applicazione chiami una funzione nell'API Graphing peer, è necessario chiamare [**PeerGraphStartup**](/windows/desktop/api/P2P/nf-p2p-peergraphstartup) per inizializzare l'API per la rappresentazione grafica dei peer per un'applicazione, quindi impostare la versione supportata.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-110">Before an application calls a function in the Peer Graphing API, [**PeerGraphStartup**](/windows/desktop/api/P2P/nf-p2p-peergraphstartup) must be called to initialize the Peer Graphing API for an application, and then set the supported version.</span></span>

## <a name="creating-a-peer-graph"></a><span data-ttu-id="fe5c2-111">Creazione di un grafico peer</span><span class="sxs-lookup"><span data-stu-id="fe5c2-111">Creating a Peer Graph</span></span>

<span data-ttu-id="fe5c2-112">La procedura seguente identifica il flusso di chiamate per la creazione di un grafico peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-112">The following procedure identifies the flow of calls for creating a peer graph.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="fe5c2-113">Solo un peer deve chiamare [**PeerGraphCreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-113">Only one peer should call [**PeerGraphCreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).</span></span> <span data-ttu-id="fe5c2-114">Tutti gli altri peer devono chiamare [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-114">All other peers should call [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen).</span></span> <span data-ttu-id="fe5c2-115">Più chiamate a **PeerGraphCreate** invalidano un grafo.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-115">Multiple calls to **PeerGraphCreate** invalidate a graph.</span></span>

 

-   <span data-ttu-id="fe5c2-116">Creare un grafico peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-116">Create a peer graph.</span></span> <span data-ttu-id="fe5c2-117">Chiamare [**PeerGraphCreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-117">Call [**PeerGraphCreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).</span></span>
-   <span data-ttu-id="fe5c2-118">Eseguire la registrazione per gli eventi peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-118">Register for peer events.</span></span> <span data-ttu-id="fe5c2-119">Chiamare [**PeerGraphRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-119">Call [**PeerGraphRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent).</span></span>
    > [!Note]  
    > <span data-ttu-id="fe5c2-120">Per altre informazioni sulla registrazione per gli eventi peer, vedere [infrastruttura degli eventi](peer-events-infrastructure.md).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-120">For more information about registering for peer events, see [Events Infrastructure](peer-events-infrastructure.md).</span></span>

     

-   <span data-ttu-id="fe5c2-121">Ascolto delle connessioni a un grafo peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-121">Listen for connections to a peer graph.</span></span> <span data-ttu-id="fe5c2-122">Chiamare [**PeerGraphListen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-122">Call [**PeerGraphListen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten).</span></span>
-   <span data-ttu-id="fe5c2-123">Eseguire funzioni dipendenti dall'applicazione per il resto del tempo di esecuzione, ad esempio elaborare gli eventi del peer e utilizzare le connessioni.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-123">Perform application-dependent functions for the remainder of the running time, for example, process peer events and work with connections.</span></span>
-   <span data-ttu-id="fe5c2-124">Chiude la connessione a un grafico peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-124">Close the connection to a peer graph.</span></span> <span data-ttu-id="fe5c2-125">Chiamare [**PeerGraphClose**](/windows/desktop/api/P2P/nf-p2p-peergraphclose).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-125">Call [**PeerGraphClose**](/windows/desktop/api/P2P/nf-p2p-peergraphclose).</span></span>

## <a name="opening-a-peer-graph"></a><span data-ttu-id="fe5c2-126">Apertura di un grafico a più peer</span><span class="sxs-lookup"><span data-stu-id="fe5c2-126">Opening a Peer Graph</span></span>

<span data-ttu-id="fe5c2-127">Il flusso di chiamate di funzione per aprire un grafico peer dipende dal valore restituito della chiamata a [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-127">The flow of function calls to open a peer graph depends on the return value of the call to [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen).</span></span> <span data-ttu-id="fe5c2-128">I valori più importanti sono **s \_ OK** e i **dati di peer \_ s \_ \_ creati**, descritti nelle sezioni seguenti di questo argomento.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-128">The most important values are **S\_OK** and **PEER\_S\_DATA\_CREATED**, which are explained in the following sections of this topic.</span></span>

> [!Note]  
> <span data-ttu-id="fe5c2-129">Se una chiamata a [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) non restituisce i dati **s \_ OK** o **peer \_ s \_ \_ creati**, gestire l'errore.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-129">If a call to [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) does not return **S\_OK** or **PEER\_S\_DATA\_CREATED**, handle the error.</span></span>

 

## <a name="when-peergraphopen-returns-s_ok"></a><span data-ttu-id="fe5c2-130">Quando PeerGraphOpen restituisce \_ OK</span><span class="sxs-lookup"><span data-stu-id="fe5c2-130">When PeerGraphOpen Returns S\_OK</span></span>

<span data-ttu-id="fe5c2-131">Quando una chiamata a [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) restituisce **\_ OK**, è stato aperto un grafico peer e un database esistente.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-131">When a call to [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) returns **S\_OK**, a peer graph and an existing database have been opened.</span></span> <span data-ttu-id="fe5c2-132">Nella procedura riportata di seguito vengono identificate le operazioni che è possibile eseguire per aprire un grafico peer quando una chiamata a **PeerGraphOpen** restituisce **\_ OK**</span><span class="sxs-lookup"><span data-stu-id="fe5c2-132">The following procedure identifies what you can do to open a peer graph when a call to **PeerGraphOpen** returns **S\_OK**</span></span>

-   <span data-ttu-id="fe5c2-133">Eseguire la registrazione per gli eventi peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-133">Register for peer events.</span></span> <span data-ttu-id="fe5c2-134">Chiamare [**PeerGraphRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-134">Call [**PeerGraphRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent).</span></span>
    > [!Note]  
    > <span data-ttu-id="fe5c2-135">Per altre informazioni sulla registrazione degli eventi, vedere [infrastruttura degli eventi](peer-events-infrastructure.md).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-135">For more information about registering for events, see [Events Infrastructure](peer-events-infrastructure.md).</span></span>

     

-   <span data-ttu-id="fe5c2-136">Individuare un nodo.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-136">Locate a node.</span></span> <span data-ttu-id="fe5c2-137">Si tratta di un processo eseguito all'esterno dell'infrastruttura di Peer Graphing, usando un metodo o un'applicazione identificata dall'utente.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-137">This is a process performed outside of the Peer Graphing Infrastructure, by using a method or application that you identify.</span></span> <span data-ttu-id="fe5c2-138">L'API di Graphing peer non fornisce un meccanismo specifico per trovare un nodo grafico iniziale a cui connettersi.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-138">The Peer Graphing API does not provide a specific mechanism to find an initial graph node to connect to.</span></span> <span data-ttu-id="fe5c2-139">Un'applicazione deve usare un altro meccanismo, ad esempio l'API [PNRP (Peer Name Resolution Protocol)](pnrp-namespace-provider-api.md) , per individuare il nodo iniziale.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-139">An application must use another mechanism, such as the [Peer Name Resolution Protocol (PNRP)](pnrp-namespace-provider-api.md) API, to locate the initial node.</span></span>
-   <span data-ttu-id="fe5c2-140">Se viene trovato un nodo, connettersi.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-140">If a node is found, connect to it.</span></span> <span data-ttu-id="fe5c2-141">Chiamare [**PeerGraphConnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect), quindi chiamare [**PeerGraphListen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten) per restare in ascolto delle connessioni al grafo peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-141">Call [**PeerGraphConnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect), then call [**PeerGraphListen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten) to listen for connections to the peer graph.</span></span>
    > [!Note]  
    > <span data-ttu-id="fe5c2-142">Se non viene trovato alcun nodo, non chiamare [**PeerGraphConnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect) e [**PeerGraphListen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-142">If a node is not found, do not call [**PeerGraphConnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect) and [**PeerGraphListen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten).</span></span>

     

-   <span data-ttu-id="fe5c2-143">Eseguire funzioni dipendenti dall'applicazione per il resto del tempo di esecuzione, ad esempio elaborare gli eventi del peer e utilizzare le connessioni, a seconda che il nodo sia connesso o meno al grafo peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-143">Perform application-dependent functions for the remainder of the running time, for example, process peer events and work with connections, depending on whether the node is connected to the peer graph or not.</span></span> <span data-ttu-id="fe5c2-144">Ad esempio, l'applicazione può scegliere di timeout o eseguire periodicamente l'individuazione per un nodo attivo nel grafico.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-144">For example, the application can choose to timeout or periodically perform discovery for an active node in the graph.</span></span>
-   <span data-ttu-id="fe5c2-145">Chiudere la connessione al grafo peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-145">Close the connection to the peer graph.</span></span> <span data-ttu-id="fe5c2-146">Chiamare [**PeerGraphClose**](/windows/desktop/api/P2P/nf-p2p-peergraphclose).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-146">Call [**PeerGraphClose**](/windows/desktop/api/P2P/nf-p2p-peergraphclose).</span></span>

## <a name="when-peergraphopen-returns-peer_s_data_created"></a><span data-ttu-id="fe5c2-147">Quando PeerGraphOpen restituisce \_ \_ i dati dei peer \_ creati</span><span class="sxs-lookup"><span data-stu-id="fe5c2-147">When PeerGraphOpen Returns PEER\_S\_DATA\_CREATED</span></span>

<span data-ttu-id="fe5c2-148">Quando [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) restituisce i **dati del peer \_ S \_ \_ creati**, significa che non viene trovato un database esistente per un grafo peer, viene creato un nuovo database e questa è la prima volta che viene aperta.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-148">When [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) returns **PEER\_S\_DATA\_CREATED**, it means that an existing database for a peer graph is not found, a new database is created, and this is the first time it is opened.</span></span> <span data-ttu-id="fe5c2-149">Per utilizzare o restare in ascolto su un grafo peer, un peer deve essere connesso e sincronizzato con un grafo peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-149">To use or listen on a peer graph, a peer must be connected to and synchronized with a peer graph.</span></span>

<span data-ttu-id="fe5c2-150">Nella procedura riportata di seguito vengono identificate le operazioni che è possibile eseguire per aprire un grafico peer quando una chiamata a [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) restituisce i **dati del peer \_ S \_ \_ creati**.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-150">The following procedure identifies what you can do to open a peer graph when a call to [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen) returns **PEER\_S\_DATA\_CREATED**.</span></span>

-   <span data-ttu-id="fe5c2-151">Aprire un grafico peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-151">Open a peer graph.</span></span> <span data-ttu-id="fe5c2-152">Chiamare [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-152">Call [**PeerGraphOpen**](/windows/desktop/api/P2P/nf-p2p-peergraphopen).</span></span>
-   <span data-ttu-id="fe5c2-153">Eseguire la registrazione per gli eventi peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-153">Register for peer events.</span></span> <span data-ttu-id="fe5c2-154">Chiamare [**PeerGraphRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-154">Call [**PeerGraphRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergraphregisterevent).</span></span>
    > [!Note]  
    > <span data-ttu-id="fe5c2-155">Per altre informazioni sulla registrazione per gli eventi peer, vedere [infrastruttura degli eventi](peer-events-infrastructure.md).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-155">For more information about registering for peer events, see [Events Infrastructure](peer-events-infrastructure.md).</span></span>

     

-   <span data-ttu-id="fe5c2-156">Individuare un nodo.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-156">Locate a node.</span></span> <span data-ttu-id="fe5c2-157">Si tratta di un processo eseguito all'esterno dell'infrastruttura di Peer Graphing, usando un metodo o un'applicazione identificata dall'utente.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-157">This is a process performed outside of the Peer Graphing Infrastructure, by using a method or application that you identify.</span></span> <span data-ttu-id="fe5c2-158">L'API di Graphing peer non fornisce un meccanismo specifico per trovare un nodo grafico iniziale a cui connettersi.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-158">The Peer Graphing API does not provide a specific mechanism to find an initial graph node to connect to.</span></span> <span data-ttu-id="fe5c2-159">Un'applicazione deve usare un altro meccanismo, ad esempio l'API [PNRP (Peer Name Resolution Protocol)](pnrp-namespace-provider-api.md) , per individuare il nodo iniziale.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-159">An application must use another mechanism, such as the [Peer Name Resolution Protocol (PNRP)](pnrp-namespace-provider-api.md) API, to locate the initial node.</span></span>
-   <span data-ttu-id="fe5c2-160">Se viene trovato un nodo, connettersi.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-160">If a node is found, connect to it.</span></span> <span data-ttu-id="fe5c2-161">Chiamare [**PeerGraphConnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect), quindi chiamare [**PeerGraphListen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten) per restare in ascolto delle connessioni al grafo peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-161">Call [**PeerGraphConnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect), then call [**PeerGraphListen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten) to listen for connections to the peer graph.</span></span>
    > [!Note]  
    > <span data-ttu-id="fe5c2-162">Se non viene trovato alcun nodo, non chiamare [**PeerGraphConnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect) e [**PeerGraphListen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-162">If a node is not found, do not call [**PeerGraphConnect**](/windows/desktop/api/P2P/nf-p2p-peergraphconnect) and [**PeerGraphListen**](/windows/desktop/api/P2P/nf-p2p-peergraphlisten).</span></span>

     

-   <span data-ttu-id="fe5c2-163">Eseguire funzioni dipendenti dall'applicazione per il resto del tempo di esecuzione, ad esempio elaborare gli eventi del peer e utilizzare le connessioni, a seconda che il nodo sia connesso o meno al grafo peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-163">Perform application-dependent functions for the remainder of the running time, for example, process peer events and work with connections, depending on whether the node is connected to the peer graph or not.</span></span> <span data-ttu-id="fe5c2-164">Ad esempio, l'applicazione può scegliere di timeout o eseguire periodicamente l'individuazione per un nodo attivo nel grafico.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-164">For example, the application can choose to timeout or periodically perform discovery for an active node in the graph.</span></span>
-   <span data-ttu-id="fe5c2-165">Chiudere la connessione al grafo peer.</span><span class="sxs-lookup"><span data-stu-id="fe5c2-165">Close the connection to the peer graph.</span></span> <span data-ttu-id="fe5c2-166">Chiamare [**PeerGraphClose**](/windows/desktop/api/P2P/nf-p2p-peergraphclose).</span><span class="sxs-lookup"><span data-stu-id="fe5c2-166">Call [**PeerGraphClose**](/windows/desktop/api/P2P/nf-p2p-peergraphclose).</span></span>

 

 



