---
description: In questo argomento viene illustrato il processo di invito di un peer a partecipare a un gruppo peer mediante le API di raggruppamento peer.
ms.assetid: 6afcbfec-b1df-45cd-8a43-221dfe5d8c33
title: Invito di un peer a un gruppo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 68b1e8852f58387d424944d4a8821f56b5e11e8d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103967536"
---
# <a name="inviting-a-peer-to-a-group"></a><span data-ttu-id="8bd46-103">Invito di un peer a un gruppo</span><span class="sxs-lookup"><span data-stu-id="8bd46-103">Inviting a Peer to a Group</span></span>

<span data-ttu-id="8bd46-104">In questo argomento viene illustrato il processo di invito di un peer a partecipare a un gruppo peer mediante le API di raggruppamento peer.</span><span class="sxs-lookup"><span data-stu-id="8bd46-104">This topic discusses the process of inviting a peer to join a peer group using the Peer Grouping APIs.</span></span>

<span data-ttu-id="8bd46-105">Un gruppo peer richiede credenziali valide per partecipare.</span><span class="sxs-lookup"><span data-stu-id="8bd46-105">A peer group requires valid credentials to participate.</span></span> <span data-ttu-id="8bd46-106">Le credenziali vengono emesse dall'esterno di un gruppo sotto forma di inviti o direttamente ai membri all'interno di un gruppo quando sono necessari aggiornamenti delle credenziali.</span><span class="sxs-lookup"><span data-stu-id="8bd46-106">Credentials are issued from outside a group in the form of invitations, or directly to members within a group when credential updates are needed.</span></span>

## <a name="group-member-certificates"></a><span data-ttu-id="8bd46-107">Certificati dei membri del gruppo</span><span class="sxs-lookup"><span data-stu-id="8bd46-107">Group Member Certificates</span></span>

<span data-ttu-id="8bd46-108">Un gruppo peer viene creato quando un'applicazione effettua una chiamata a [**PeerGroupCreate**](/windows/desktop/api/P2P/nf-p2p-peergroupcreate).</span><span class="sxs-lookup"><span data-stu-id="8bd46-108">A peer group is created when an application makes a call to [**PeerGroupCreate**](/windows/desktop/api/P2P/nf-p2p-peergroupcreate).</span></span>

<span data-ttu-id="8bd46-109">Per partecipare a un gruppo peer, ogni peer deve avere un'identità peer.</span><span class="sxs-lookup"><span data-stu-id="8bd46-109">To participate in a peer group, each peer must have a peer identity.</span></span> <span data-ttu-id="8bd46-110">Chiamare [**PeerEnumIdentities**](/windows/desktop/api/P2P/nf-p2p-peerenumidentities) fino a quando non vengono restituite tutte le identità peer definite per il peer e selezionare quella da usare.</span><span class="sxs-lookup"><span data-stu-id="8bd46-110">Call [**PeerEnumIdentities**](/windows/desktop/api/P2P/nf-p2p-peerenumidentities) until all peer identities defined for the peer have been returned, and select the one that should be used.</span></span> <span data-ttu-id="8bd46-111">Se non esiste un'identità peer, crearne una chiamando [**PeerIdentityCreate**](/windows/desktop/api/P2P/nf-p2p-peeridentitycreate).</span><span class="sxs-lookup"><span data-stu-id="8bd46-111">If a peer identity does not exist, create one by calling [**PeerIdentityCreate**](/windows/desktop/api/P2P/nf-p2p-peeridentitycreate).</span></span>

<span data-ttu-id="8bd46-112">Ogni identità peer è associata a un set di credenziali specifico che può essere usato per dimostrare l'appartenenza al gruppo peer durante la connessione, nonché per la pubblicazione di record o l'invito di altri membri.</span><span class="sxs-lookup"><span data-stu-id="8bd46-112">Each peer identity is associated with a specific set of credentials that can be used to prove peer group membership when connecting, as well as when publishing records or inviting additional members.</span></span> <span data-ttu-id="8bd46-113">Queste credenziali sono rappresentate come catene di [certificati X. 509](https://www.ietf.org/rfc/rfc2511.txt) denominati certificati di appartenenza a gruppi (GMC).</span><span class="sxs-lookup"><span data-stu-id="8bd46-113">These credentials are represented as chains of [X.509 certificates](https://www.ietf.org/rfc/rfc2511.txt) called Group Membership Certificates (GMC).</span></span>

<span data-ttu-id="8bd46-114">Per creare il GMC per un'identità peer, è necessario prima ottenere la relativa chiave pubblica.</span><span class="sxs-lookup"><span data-stu-id="8bd46-114">To create the GMC for a peer identity, you must first obtain its public key.</span></span> <span data-ttu-id="8bd46-115">Questa chiave viene ottenuta chiamando [**PeerIdentityGetXML**](/windows/desktop/api/P2P/nf-p2p-peeridentitygetxml) sul potenziale invito e passando la relativa identità peer.</span><span class="sxs-lookup"><span data-stu-id="8bd46-115">This key is obtained by calling [**PeerIdentityGetXML**](/windows/desktop/api/P2P/nf-p2p-peeridentitygetxml) on the potential invitee and passing in its peer identity.</span></span> <span data-ttu-id="8bd46-116">Questa funzione restituisce un certificato con codifica base 64 (IDC) che contiene la chiave pubblica RSA usata per creare la GMC per l'identità peer (tra le altre cose), incapsulata in un BLOB XML, nel formato seguente:</span><span class="sxs-lookup"><span data-stu-id="8bd46-116">This function returns a base-64 encoded certificate (IDC) that contains the RSA public key used to create the GMC for the peer identity (among other things), encapsulated in an XML blob, in the following format:</span></span>

``` syntax
<PEERIDENTITYINFO VERSION="1.0">
     <IDC xmlns:dt="urn:schemas-microsoft-com:datatypes" dt:dt="bin.base64">
          <!-- Base-64 encoded certificate  -->
     </IDC>
</PEERIDENTITYINFO>
```

<span data-ttu-id="8bd46-117">Questa stringa può essere passata a [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), che restituisce un invito che contiene il GMC per l'identità peer.</span><span class="sxs-lookup"><span data-stu-id="8bd46-117">This string can be passed to [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), which returns an invitation that contains the GMC for that peer identity.</span></span> <span data-ttu-id="8bd46-118">L'invito deve essere passato all'invito usando un processo diverso, ad esempio posta elettronica, FTP o una condivisione file sicura.</span><span class="sxs-lookup"><span data-stu-id="8bd46-118">The invitation must be passed to the invitee using a different process such as e-mail, FTP, or a secure file share.</span></span>

<span data-ttu-id="8bd46-119">In alternativa, l'IDC stesso può essere inserito in una nuova struttura di [**\_ \_ informazioni sulle credenziali peer**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) e passata a [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials), che genera un invito.</span><span class="sxs-lookup"><span data-stu-id="8bd46-119">Alternatively, the IDC itself can be placed in a new [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure and passed to [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials), which likewise generates an invitation.</span></span>

<span data-ttu-id="8bd46-120">Si noti che le applicazioni non possono aggiungere tag all'interno del tag **PEERIDENTITYINFO** o modificare in alcun modo il frammento XML.</span><span class="sxs-lookup"><span data-stu-id="8bd46-120">Note that applications are not allowed to add tags within the **PEERIDENTITYINFO** tag or modify this XML fragment in any way.</span></span> <span data-ttu-id="8bd46-121">Le applicazioni possono incorporare questo frammento XML in altri documenti XML, ma devono rimuovere tutti i file XML specifici dell'applicazione prima di passare questo frammento alle funzioni [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) o [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) .</span><span class="sxs-lookup"><span data-stu-id="8bd46-121">Applications are allowed to incorporate this XML fragment into other XML documents, but must strip out all application-specific XML before passing this fragment to the [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) or [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) functions.</span></span>

<span data-ttu-id="8bd46-122">I membri GMCs vengono emessi dagli amministratori e dall'autore del gruppo peer.</span><span class="sxs-lookup"><span data-stu-id="8bd46-122">Member GMCs are issued by administrators and the peer group creator.</span></span> <span data-ttu-id="8bd46-123">I membri devono ottenere nuovi GMCs con durate estese il GMCs prima che venga superata l'ora di scadenza.</span><span class="sxs-lookup"><span data-stu-id="8bd46-123">Members must obtain new GMCs with extended lifetimes their GMCs before the expiration time has passed.</span></span> <span data-ttu-id="8bd46-124">L'amministratore del gruppo peer rilascia le credenziali aggiornate chiamando [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) con le credenziali esistenti per tale peer.</span><span class="sxs-lookup"><span data-stu-id="8bd46-124">The peer group administrator issues updated credentials by calling [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) with the existing credentials for that peer.</span></span>

<span data-ttu-id="8bd46-125">La struttura di [**\_ \_ informazioni sulle credenziali peer**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) contiene i dati di base sullo stato di appartenenza di un peer, inclusa la chiave pubblica per la relativa GMC.</span><span class="sxs-lookup"><span data-stu-id="8bd46-125">The [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure contains the basic data on a peer's membership status, including the public key for their GMC.</span></span> <span data-ttu-id="8bd46-126">Le credenziali appena rilasciate possono essere pubblicate nel gruppo peer impostando il \_ flag delle credenziali dell'archivio del gruppo peer \_ \_ nella chiamata a [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span><span class="sxs-lookup"><span data-stu-id="8bd46-126">Newly-issued credentials can be published to the peer group by setting the PEER\_GROUP\_STORE\_CREDENTIALS flag in the call to [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span></span> <span data-ttu-id="8bd46-127">Quando il destinatario delle nuove credenziali viene aggiunto al gruppo peer, le credenziali esistenti verranno aggiornate dall'infrastruttura di raggruppamento dei peer.</span><span class="sxs-lookup"><span data-stu-id="8bd46-127">When the recipient of the new credentials joins the peer group, it's existing credentials will be updated by the Peer Grouping Infrastructure.</span></span>

## <a name="issuing-an-invitation"></a><span data-ttu-id="8bd46-128">Invio di un invito</span><span class="sxs-lookup"><span data-stu-id="8bd46-128">Issuing an Invitation</span></span>

<span data-ttu-id="8bd46-129">Un membro viene invitato a partecipare al gruppo peer in uno dei due modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="8bd46-129">A member is invited to join the peer group in one of the following two ways:</span></span>

-   <span data-ttu-id="8bd46-130">Un amministratore del gruppo peer chiama [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), passando la stringa XML delle informazioni di identità ottenuta dal potenziale invito tramite un meccanismo fuori banda comune, ad esempio un messaggio di posta elettronica o una sessione di messaggistica immediata.</span><span class="sxs-lookup"><span data-stu-id="8bd46-130">A peer group administrator calls [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), passing in the identity information XML string obtained from the potential invitee via a common out-of-band mechanism, such as email or an IM session.</span></span> <span data-ttu-id="8bd46-131">L'invito viene inoltre passato attraverso un processo o un meccanismo esterno al peer, che lo riceverà come una stringa XML o un file di testo.</span><span class="sxs-lookup"><span data-stu-id="8bd46-131">The invitation is also passed through some external process or mechanism to the peer, who will ultimately receive it as an XML string or text file.</span></span>
-   <span data-ttu-id="8bd46-132">Un amministratore del gruppo peer chiama [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span><span class="sxs-lookup"><span data-stu-id="8bd46-132">A peer group administrator calls [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span></span> <span data-ttu-id="8bd46-133">Per usare questa funzione, il peer deve avere già pubblicato le informazioni di appartenenza al gruppo peer [**( \_ membro peer**](/windows/desktop/api/P2P/ns-p2p-peer_member)) o avere una chiave pubblica disponibile (della coppia di chiavi RSA usata per creare l'identità del soggetto).</span><span class="sxs-lookup"><span data-stu-id="8bd46-133">To use this function, the peer must have already published membership information to the peer group ([**PEER\_MEMBER**](/windows/desktop/api/P2P/ns-p2p-peer_member)), or have an available public key (of the RSA key pair used to create the subject identity).</span></span> <span data-ttu-id="8bd46-134">Nel primo caso, la struttura [**delle \_ \_ informazioni sulle credenziali peer**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) necessaria per **PeerGroupIssueCredentials** può essere ottenuta dalla struttura del **\_ membro peer** . nel secondo caso, una nuova struttura di **\_ \_ informazioni sulle credenziali peer** può essere popolata con la chiave pubblica.</span><span class="sxs-lookup"><span data-stu-id="8bd46-134">In the former case, the [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure required for **PeerGroupIssueCredentials** can be obtained from the **PEER\_MEMBER** structure; in the latter case, a new **PEER\_CREDENTIAL\_INFO** structure can be populated with the public key.</span></span>

<span data-ttu-id="8bd46-135">Dopo aver ricevuto la stringa di invito, il peer lo passa a [**PeerGroupJoin**](/windows/desktop/api/P2P/nf-p2p-peergroupjoin) per l'aggiunta al gruppo peer.</span><span class="sxs-lookup"><span data-stu-id="8bd46-135">After receiving the invitation string, the peer passes it to [**PeerGroupJoin**](/windows/desktop/api/P2P/nf-p2p-peergroupjoin) to join the peer group.</span></span> <span data-ttu-id="8bd46-136">Se la chiamata a **PeerGroupJoin** ha esito positivo, il peer può aprire successivamente il gruppo peer chiamando [**PeerGroupOpen**](/windows/desktop/api/P2P/nf-p2p-peergroupopen).</span><span class="sxs-lookup"><span data-stu-id="8bd46-136">If the call to **PeerGroupJoin** is successful, the peer can later open the peer group by calling [**PeerGroupOpen**](/windows/desktop/api/P2P/nf-p2p-peergroupopen).</span></span>

## <a name="parsing-an-invitation"></a><span data-ttu-id="8bd46-137">Analisi di un invito</span><span class="sxs-lookup"><span data-stu-id="8bd46-137">Parsing an Invitation</span></span>

<span data-ttu-id="8bd46-138">Facoltativamente, è possibile analizzare un invito chiamando [**PeerGroupParseInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupparseinvitation), che restituisce una struttura di [**\_ \_ informazioni di invito peer**](/windows/desktop/api/P2P/ns-p2p-peer_invitation_info) .</span><span class="sxs-lookup"><span data-stu-id="8bd46-138">Optionally, an invitation can be parsed by calling [**PeerGroupParseInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupparseinvitation), which returns a [**PEER\_INVITATION\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_invitation_info) structure.</span></span> <span data-ttu-id="8bd46-139">I campi della struttura possono essere facilmente ottenuti a scopo di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="8bd46-139">The fields in the structure can be easily obtained for display purposes.</span></span>

 

 



