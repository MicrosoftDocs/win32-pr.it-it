---
description: Prima che un'applicazione possa eseguire ricerche nella tabella di routing distribuita (DRT), è necessario creare una query di ricerca.
ms.assetid: b3403a64-128c-461e-9384-8e62c03322e1
title: Ricerca in una tabella di routing distribuita
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1c9977ca395393cef09198182fb8790738d2b00c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106315441"
---
# <a name="searching-a-distributed-routing-table"></a><span data-ttu-id="a839d-103">Ricerca in una tabella di routing distribuita</span><span class="sxs-lookup"><span data-stu-id="a839d-103">Searching a Distributed Routing Table</span></span>

<span data-ttu-id="a839d-104">Prima che un'applicazione possa eseguire ricerche nella tabella di routing distribuita (DRT), è necessario creare una query di ricerca.</span><span class="sxs-lookup"><span data-stu-id="a839d-104">Before an application can search the Distributed Routing Table (DRT), a search query must be created.</span></span> <span data-ttu-id="a839d-105">Il valore della chiave desiderata viene specificato dall'applicazione quando viene chiamata la funzione [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) .</span><span class="sxs-lookup"><span data-stu-id="a839d-105">The desired key value is specified by the application when the [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) function is called.</span></span> <span data-ttu-id="a839d-106">Il comportamento della ricerca è determinato dalle informazioni specificate dall'applicazione nella struttura delle [**informazioni di \_ ricerca \_ DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info) .</span><span class="sxs-lookup"><span data-stu-id="a839d-106">The behavior of the search is determined by information specified by the application in the [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info) structure.</span></span>

<span data-ttu-id="a839d-107">In genere, un evento dell'applicazione viene segnalato quando la ricerca individua i risultati e un altro al termine della ricerca.</span><span class="sxs-lookup"><span data-stu-id="a839d-107">Typically, an application event is signaled when the search discovers results and another at the conclusion of the search.</span></span> <span data-ttu-id="a839d-108">Tuttavia, se **fIterative** è impostato in [**DRT \_ Search \_ info**](/windows/desktop/api/drt/ns-drt-drt_search_info), un evento dell'applicazione può essere segnalato quando viene eseguito un contatto con ogni nodo lungo il percorso.</span><span class="sxs-lookup"><span data-stu-id="a839d-108">However, if **fIterative** is set in [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info), an application event can be signaled when contact is made with each node along the way.</span></span>

<span data-ttu-id="a839d-109">Dopo la segnalazione di un evento, l'applicazione chiama la funzione [**DrtGetSearchResult**](/windows/desktop/api/drt/nf-drt-drtgetsearchresult) per i risultati.</span><span class="sxs-lookup"><span data-stu-id="a839d-109">After an event is signaled, the application then calls the [**DrtGetSearchResult**](/windows/desktop/api/drt/nf-drt-drtgetsearchresult) function for the results.</span></span> <span data-ttu-id="a839d-110">Se il codice restituito è **\_ OK**, i risultati vengono puntati nella struttura dei [**\_ \_ risultati di ricerca DRT**](/windows/desktop/api/drt/ns-drt-drt_search_result) restituita dall'API.</span><span class="sxs-lookup"><span data-stu-id="a839d-110">If the returned code is **S\_OK**, the results are pointed to in the [**DRT\_SEARCH\_RESULT**](/windows/desktop/api/drt/ns-drt-drt_search_result) structure returned by the API.</span></span> <span data-ttu-id="a839d-111">I risultati restituiti rientrano nell'intervallo di valori specificato [**nelle \_ \_ informazioni di ricerca DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span><span class="sxs-lookup"><span data-stu-id="a839d-111">The returned results fall into the range of values specified in [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span></span> <span data-ttu-id="a839d-112">Nel caso in cui la ricerca non rilevi corrispondenze, solo **DRT \_ E non verrà restituito \_ alcun \_** valore alla fine dei risultati restituiti.</span><span class="sxs-lookup"><span data-stu-id="a839d-112">In the event that the search finds no matches, only the **DRT\_E\_NO\_MORE** value will be returned at the conclusion of result returns.</span></span>

<span data-ttu-id="a839d-113">Le informazioni seguenti illustrano in dettaglio come i membri contenuti nelle [**\_ \_ informazioni di ricerca di DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info) consentono a un'applicazione di determinare in modo specifico il comportamento di ricerca dell'infrastruttura DRT:</span><span class="sxs-lookup"><span data-stu-id="a839d-113">The following information details how the members contained in [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info) allow an application to specifically dictate the search behavior of the DRT infrastructure:</span></span>

## <a name="fallowcurrentinstancematch"></a><span data-ttu-id="a839d-114">fAllowCurrentInstanceMatch</span><span class="sxs-lookup"><span data-stu-id="a839d-114">fAllowCurrentInstanceMatch</span></span>

<span data-ttu-id="a839d-115">Per impostazione predefinita, i risultati della ricerca di DRT includono solo corrispondenze rilevate all'esterno del nodo locale.</span><span class="sxs-lookup"><span data-stu-id="a839d-115">By default, DRT search results include only matches found outside of the local node.</span></span> <span data-ttu-id="a839d-116">L'impostazione di **fAllowCurrentInstanceMatch** specifica che nei risultati della ricerca sono incluse anche le corrispondenze rilevate nell'istanza locale di DRT.</span><span class="sxs-lookup"><span data-stu-id="a839d-116">Setting **fAllowCurrentInstanceMatch** specifies that the search results also include matches found in the local DRT instance.</span></span>

## <a name="cmaxendpoints"></a><span data-ttu-id="a839d-117">cMaxEndpoints</span><span class="sxs-lookup"><span data-stu-id="a839d-117">cMaxEndpoints</span></span>

<span data-ttu-id="a839d-118">La quantità e l'intervallo dei risultati restituiti dalla ricerca sono specificati dall'applicazione con i valori **cMaxEndpoints** (Quantity) e **pMinimumKey** e **pMaximumKey** (intervallo), a cui fanno riferimento le [**\_ \_ informazioni di ricerca DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span><span class="sxs-lookup"><span data-stu-id="a839d-118">The quantity and range of the results returned by the search are specified by the application with the **cMaxEndpoints** (quantity) and the **pMinimumKey** and **pMaximumKey** (range) values, and referenced by [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span></span>

<span data-ttu-id="a839d-119">Quando **cMaxEndpoints = 1**, l'infrastruttura DRT cerca una chiave, restituendo una corrispondenza nell'intervallo specificato dai valori **pMinimumKey** e **pMaximumKey** in [**DRT \_ Search \_ info**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span><span class="sxs-lookup"><span data-stu-id="a839d-119">When **cMaxEndpoints = 1**, the DRT infrastructure searches for a key, returning one match within the range specified by the **pMinimumKey** and **pMaximumKey** values in [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span></span> <span data-ttu-id="a839d-120">Questa corrispondenza può essere una corrispondenza esatta o la corrispondenza più vicina nell'intervallo.</span><span class="sxs-lookup"><span data-stu-id="a839d-120">This match can be either an exact match or the nearest match within range.</span></span> <span data-ttu-id="a839d-121">Se non viene trovata alcuna corrispondenza, viene restituito **DRT \_ E \_ \_** .</span><span class="sxs-lookup"><span data-stu-id="a839d-121">If a match is not found, **DRT\_E\_NO\_MORE** is returned.</span></span>

<span data-ttu-id="a839d-122">Se **cMaxEndpoints > 1**, l'infrastruttura DRT restituirà corrispondenze comprese nell'intervallo fino al valore di **cMaxEndpoints**.</span><span class="sxs-lookup"><span data-stu-id="a839d-122">If **cMaxEndpoints > 1**, the DRT infrastructure will return matches within the range up to the value of **cMaxEndpoints**.</span></span> <span data-ttu-id="a839d-123">Le corrispondenze restituite possono contenere una corrispondenza esatta o i risultati della corrispondenza più vicina nell'intervallo.</span><span class="sxs-lookup"><span data-stu-id="a839d-123">The returned matches can contain an exact match or the nearest match results within range.</span></span> <span data-ttu-id="a839d-124">Inoltre, se **pMinimumKey** e **pMaximumKey** sono impostati sullo stesso valore, una ricerca viene eseguita solo per tale valore, restituendo **DRT \_ e \_ non \_ più** se non viene trovato.</span><span class="sxs-lookup"><span data-stu-id="a839d-124">Additionally, if **pMinimumKey** and **pMaximumKey** are set to the same value, a search is carried out only for that value, returning **DRT\_E\_NO\_MORE** if it is not found.</span></span>

## <a name="fanymatchinrange"></a><span data-ttu-id="a839d-125">fAnyMatchInRange</span><span class="sxs-lookup"><span data-stu-id="a839d-125">fAnyMatchInRange</span></span>

<span data-ttu-id="a839d-126">Il membro **fAnyMatchInRange** indica se la ricerca viene interrotta dopo che la prima corrispondenza si trova nell'intervallo specificato o se la ricerca continuerà per la corrispondenza più vicina alla chiave specificata nell'API [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) .</span><span class="sxs-lookup"><span data-stu-id="a839d-126">The **fAnyMatchInRange** member indicates whether the search will stop after the first match is located within the specified range, or if the search will continue for the closest match to the key specified in the [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) API.</span></span> <span data-ttu-id="a839d-127">Quando **fAnyMatchInRange** è impostato, la ricerca viene eseguita con **cMaxEndpoints = 1** indipendentemente dal valore specificato di **cMaxEndpoints** in [**DRT \_ Search \_ info**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span><span class="sxs-lookup"><span data-stu-id="a839d-127">When **fAnyMatchInRange** is set, the search is carried out with **cMaxEndpoints = 1** regardless of the specified value of **cMaxEndpoints** in [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span></span>

## <a name="fiterative"></a><span data-ttu-id="a839d-128">fIterative</span><span class="sxs-lookup"><span data-stu-id="a839d-128">fIterative</span></span>

<span data-ttu-id="a839d-129">Il membro **fIterative** specifica se a ogni nodo contattato dall'infrastruttura DRT durante la ricerca sono associati i dati chiave/endpoint resi disponibili per l'applicazione tramite il [**\_ \_ risultato della ricerca DRT**](/windows/desktop/api/drt/ns-drt-drt_search_result).</span><span class="sxs-lookup"><span data-stu-id="a839d-129">The **fIterative** member specifies if each node contacted by the DRT infrastructure during the search will have the key/endpoint data associated with it made available to the application via [**DRT\_SEARCH\_RESULT**](/windows/desktop/api/drt/ns-drt-drt_search_result).</span></span> <span data-ttu-id="a839d-130">Impostando **fIterative** su **true**, il valore di **cMaxEndpoints = 1** verrà forzato.</span><span class="sxs-lookup"><span data-stu-id="a839d-130">By setting **fIterative** to **TRUE**, the value of **cMaxEndpoints = 1** will be forced.</span></span> <span data-ttu-id="a839d-131">Quando **fIterative** è impostato su **true** in una query di ricerca per DRT, l'applicazione viene richiamata dopo il contatto con ogni nodo o "hop".</span><span class="sxs-lookup"><span data-stu-id="a839d-131">When **fIterative** is set to **TRUE** within a search query for the DRT, the application is called back after contact with each node or "hop."</span></span> <span data-ttu-id="a839d-132">Ogni risultato dell'hop contiene una chiave che indica il nodo che verrà ricercato da DRT.</span><span class="sxs-lookup"><span data-stu-id="a839d-132">Each hop result contains a key indicating which node the DRT will search next.</span></span> <span data-ttu-id="a839d-133">Il risultato di un hop viene restituito tramite [**DrtGetSearchResult**](/windows/desktop/api/drt/nf-drt-drtgetsearchresult) come risultato **\_ \_ intermedio corrispondente a DRT** .</span><span class="sxs-lookup"><span data-stu-id="a839d-133">A hop result is returned via [**DrtGetSearchResult**](/windows/desktop/api/drt/nf-drt-drtgetsearchresult) as a **DRT\_MATCH\_INTERMEDIATE** result.</span></span>

## <a name="pminimumkey-and-pmaximumkey"></a><span data-ttu-id="a839d-134">pMinimumKey e pMaximumKey</span><span class="sxs-lookup"><span data-stu-id="a839d-134">pMinimumKey and pMaximumKey</span></span>

<span data-ttu-id="a839d-135">I membri **pMinimumKey** e **pMaximumKey** possono essere usati per cercare le chiavi che rientrano in un intervallo.</span><span class="sxs-lookup"><span data-stu-id="a839d-135">The **pMinimumKey** and **pMaximumKey** members can be used to search for keys falling within a range.</span></span> <span data-ttu-id="a839d-136">Se il membro **fAnyMatchInRange** è impostato su **false**, DRT restituirà la chiave o le chiavi più vicine alla destinazione di ricerca, specificata usando l'argomento PKey passato nella funzione [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) , che rientra nell'intervallo.</span><span class="sxs-lookup"><span data-stu-id="a839d-136">If the **fAnyMatchInRange** member is set to **FALSE**, the DRT will return the closest key(s) to the search target (specified using the pKey argument passed in the [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) function) falling within the range.</span></span> <span data-ttu-id="a839d-137">Si noti che l'argomento *pKey* passato a **DrtStartSearch** deve rientrare nell'intervallo definito da **pMinimumKey** e **pMaximumKey**.</span><span class="sxs-lookup"><span data-stu-id="a839d-137">Note that the *pKey* argument passed to **DrtStartSearch** must fall within the range defined by **pMinimumKey** and **pMaximumKey**.</span></span> <span data-ttu-id="a839d-138">Per cercare una chiave precisa, impostare **pMinimumKey**, **pMaximumKey** e *pKey* sullo stesso valore.</span><span class="sxs-lookup"><span data-stu-id="a839d-138">To search for a precise key, set **pMinimumKey**, **pMaximumKey** and *pKey* to the same value.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a839d-139">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="a839d-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a839d-140">Registrazione e annullamento della registrazione delle chiavi</span><span class="sxs-lookup"><span data-stu-id="a839d-140">Registering and Deregistering Keys</span></span>](registering-and-deregistering-keys.md)
</dt> <dt>

[<span data-ttu-id="a839d-141">Informazioni sulle tabelle di routing distribuite</span><span class="sxs-lookup"><span data-stu-id="a839d-141">About Distributed Routing Tables</span></span>](about-distributed-routing-tables.md)
</dt> <dt>

[<span data-ttu-id="a839d-142">Riferimento API Tabella routing distribuito</span><span class="sxs-lookup"><span data-stu-id="a839d-142">Distributed Routing Table API Reference</span></span>](distributed-routing-table-api-reference.md)
</dt> </dl>

 

 



