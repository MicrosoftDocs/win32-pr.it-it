---
description: Un record di gruppo è costituito da dati specifici pubblicati in tutti i membri attivi di un gruppo peer, ad esempio un messaggio di chat o un aggiornamento dello stato specifico dell'applicazione.
ms.assetid: 073ee4e9-0e97-451a-a808-8265575d073c
title: Gestione dei record di gruppo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3b6d9e3257cc597b715dc9c65eb5945c00c15286
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106312257"
---
# <a name="managing-group-records"></a><span data-ttu-id="1e3aa-103">Gestione dei record di gruppo</span><span class="sxs-lookup"><span data-stu-id="1e3aa-103">Managing Group Records</span></span>

<span data-ttu-id="1e3aa-104">Un record di gruppo è costituito da dati specifici pubblicati in tutti i membri attivi di un gruppo peer, ad esempio un messaggio di chat o un aggiornamento dello stato specifico dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-104">A group record is specific data published to all active members of a peer group, for example, a chat message or an application-specific status update.</span></span> <span data-ttu-id="1e3aa-105">Un record è rappresentato dalla struttura [**del \_ record peer**](/windows/desktop/api/P2P/ns-p2p-peer_record) e contiene le informazioni seguenti su un peer:</span><span class="sxs-lookup"><span data-stu-id="1e3aa-105">A record is represented by the [**PEER\_RECORD**](/windows/desktop/api/P2P/ns-p2p-peer_record) structure, and contains the following information about a peer:</span></span>

-   <span data-ttu-id="1e3aa-106">L'ID record è un valore che identifica in modo univoco un record nel gruppo peer.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-106">The record ID is a value that uniquely identifies a record in the peer group.</span></span>
-   <span data-ttu-id="1e3aa-107">GUID che specifica il tipo di record.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-107">A GUID that specifies the record type.</span></span> <span data-ttu-id="1e3aa-108">Le applicazioni possono supportare tipi di record diversi.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-108">Applications can support different record types.</span></span> <span data-ttu-id="1e3aa-109">Un'applicazione interpreta il campo **dati** di un record in base al tipo di record.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-109">An application interprets the **data** field of a record based on the record type.</span></span> <span data-ttu-id="1e3aa-110">Alcuni GUID sono riservati e la chiamata API restituisce **peer \_ E \_ non \_ autorizzato** quando l'applicazione tenta di usarli.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-110">Some GUIDs are reserved, and the API call returns **PEER\_E\_NOT\_AUTHORIZED** when the application attempts to use them.</span></span>
-   <span data-ttu-id="1e3aa-111">Set di attributi di record descritto come stringa XML.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-111">A set of record attributes described as an XML string.</span></span> <span data-ttu-id="1e3aa-112">Gli attributi vengono utilizzati durante la ricerca di record.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-112">The attributes are used when searching records.</span></span> <span data-ttu-id="1e3aa-113">Per ulteriori informazioni sugli attributi, vedere [record attribute schema](record-attribute-schema.md).</span><span class="sxs-lookup"><span data-stu-id="1e3aa-113">For more information about attributes, see [Record Attribute Schema](record-attribute-schema.md).</span></span>
-   <span data-ttu-id="1e3aa-114">Tempo peer per la creazione di un record.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-114">The peer time that a record is created.</span></span>
-   <span data-ttu-id="1e3aa-115">Tempo peer per la scadenza di un record.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-115">The peer time that a record expires.</span></span>
-   <span data-ttu-id="1e3aa-116">Tempo peer per la modifica di un record.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-116">The peer time that a record is modified.</span></span>
-   <span data-ttu-id="1e3aa-117">Autore di un record.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-117">The creator of a record.</span></span>
-   <span data-ttu-id="1e3aa-118">Membro che modifica un record.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-118">The member who modifies a record.</span></span>
-   <span data-ttu-id="1e3aa-119">Struttura [**di \_ dati peer**](/windows/desktop/api/P2P/ns-p2p-peer_data) contenente la firma crittografica per tutti i campi in questa struttura di [**\_ record peer**](/windows/desktop/api/P2P/ns-p2p-peer_record) .</span><span class="sxs-lookup"><span data-stu-id="1e3aa-119">A [**PEER\_DATA**](/windows/desktop/api/P2P/ns-p2p-peer_data) structure that contains the cryptographic signature for all of the fields in this [**PEER\_RECORD**](/windows/desktop/api/P2P/ns-p2p-peer_record) structure.</span></span> <span data-ttu-id="1e3aa-120">Questo campo non può essere aggiornato o modificato direttamente da un peer.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-120">This field cannot be directly updated or altered by a peer.</span></span>
-   <span data-ttu-id="1e3aa-121">Struttura [**di \_ dati peer**](/windows/desktop/api/P2P/ns-p2p-peer_data) che contiene i dati specifici dell'applicazione associati a questo record sotto forma di matrice di byte.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-121">A [**PEER\_DATA**](/windows/desktop/api/P2P/ns-p2p-peer_data) structure that contains the application-specific data associated with this record as an array of bytes.</span></span> <span data-ttu-id="1e3aa-122">Il tipo di dati presenti in questo campo è determinato dal tipo di record definito dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-122">The type of data present in this field is determined by application-defined record type.</span></span>

## <a name="obtaining-peer-group-records"></a><span data-ttu-id="1e3aa-123">Recupero di record di gruppi di peer</span><span class="sxs-lookup"><span data-stu-id="1e3aa-123">Obtaining Peer Group Records</span></span>

<span data-ttu-id="1e3aa-124">I singoli record vengono ottenuti chiamando [**PeerGroupGetRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupgetrecord) con l'ID del record.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-124">Individual records are obtained by calling [**PeerGroupGetRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupgetrecord) with the ID of the record.</span></span> <span data-ttu-id="1e3aa-125">Quando si elaborano tutti i record di un tipo specifico, il set enumerato di tutti i record del gruppo peer correnti viene ottenuto chiamando prima [**PeerGroupEnumRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupenumrecords) per aprire l'enumerazione e quindi chiamando in modo iterativo [**PeerGetNextItem**](/windows/desktop/api/P2P/nf-p2p-peergetnextitem) fino a quando non vengono recuperati tutti i record.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-125">When processing all records of a specific type, the enumerated set of all current peer group records is obtained by first calling [**PeerGroupEnumRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupenumrecords) to open the enumeration and then iteratively calling [**PeerGetNextItem**](/windows/desktop/api/P2P/nf-p2p-peergetnextitem) until all records are retrieved.</span></span> <span data-ttu-id="1e3aa-126">Al termine, chiudere l'enumerazione e rilasciare la memoria associata chiamando [**PeerEndEnumeration**](/windows/desktop/api/P2P/nf-p2p-peerendenumeration).</span><span class="sxs-lookup"><span data-stu-id="1e3aa-126">When finished, close the enumeration and release the memory associated with it by calling [**PeerEndEnumeration**](/windows/desktop/api/P2P/nf-p2p-peerendenumeration).</span></span>

<span data-ttu-id="1e3aa-127">Quando un record viene creato, eliminato o aggiornato da un peer, il record interessato viene pubblicato in tutti i membri del gruppo peer per mezzo dell'evento di **\_ modifica del \_ \_ record dell' \_ evento del gruppo peer** .</span><span class="sxs-lookup"><span data-stu-id="1e3aa-127">When a record is created, deleted, or updated by a peer, the affected record is published to all members of the peer group by way of the **PEER\_GROUP\_EVENT\_RECORD\_CHANGE** event.</span></span> <span data-ttu-id="1e3aa-128">Si noti che se un peer non è connesso al gruppo, riceverà il record aggiornato alla successiva connessione.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-128">Note that if a peer is not connected to the group, it will receive the updated record then next time it connects.</span></span> <span data-ttu-id="1e3aa-129">È importante registrare questo evento con [**PeerGroupRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergroupregisterevent) se l'applicazione gestisce o gestisce i record in modo significativo.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-129">It is important to register for this event with [**PeerGroupRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergroupregisterevent) if your application maintains or manages records in any meaningful way.</span></span> <span data-ttu-id="1e3aa-130">In alternativa, l'applicazione può eseguire query sul database di record su richiesta usando [**PeerGroupSearchRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupsearchrecords).</span><span class="sxs-lookup"><span data-stu-id="1e3aa-130">Alternatively, the application can query the record database on demand using [**PeerGroupSearchRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupsearchrecords).</span></span>

<span data-ttu-id="1e3aa-131">Quando viene generato l'evento di **modifica del record dell' \_ evento del gruppo \_ \_ \_ peer** , l'ID e il tipo del record, nonché il tipo di modifica (aggiunta, aggiornamento, eliminazione) vengono ricevuti come struttura dei dati di modifica di un [**\_ record di eventi \_ \_ \_ peer**](/windows/desktop/api/P2P/ns-p2p-peer_event_record_change_data) .</span><span class="sxs-lookup"><span data-stu-id="1e3aa-131">When the **PEER\_GROUP\_EVENT\_RECORD\_CHANGE** event is raised, the specific record ID and type as well as the type of change (add, update, delete) is received as a [**PEER\_EVENT\_RECORD\_CHANGE\_DATA**](/windows/desktop/api/P2P/ns-p2p-peer_event_record_change_data) structure.</span></span> <span data-ttu-id="1e3aa-132">Questa struttura viene ottenuta con una chiamata a [**PeerGroupGetEventData**](/windows/desktop/api/P2P/nf-p2p-peergroupgeteventdata).</span><span class="sxs-lookup"><span data-stu-id="1e3aa-132">This structure is obtained with a call to [**PeerGroupGetEventData**](/windows/desktop/api/P2P/nf-p2p-peergroupgeteventdata).</span></span> <span data-ttu-id="1e3aa-133">Se la modifica è un'aggiunta o un aggiornamento, è necessario usare [**PeerGroupGetRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupgetrecord) per ottenere il record con l'ID fornito.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-133">If the change is an add or an update, you should use [**PeerGroupGetRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupgetrecord) to obtain the record with the supplied ID.</span></span> <span data-ttu-id="1e3aa-134">Il database di record locale per l'infrastruttura viene aggiornato automaticamente.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-134">The local record database for the infrastructure is updated automatically.</span></span>

<span data-ttu-id="1e3aa-135">È anche possibile cercare record specifici in base a attributi personalizzati specifici specificati nel campo **pwzAttributes** del [**\_ record peer**](/windows/desktop/api/P2P/ns-p2p-peer_record), oltre a eventuali attributi predefiniti.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-135">You can also search for specific records based on specific custom attributes supplied in the **pwzAttributes** field of [**PEER\_RECORD**](/windows/desktop/api/P2P/ns-p2p-peer_record), as well as any predefined attributes.</span></span> <span data-ttu-id="1e3aa-136">A tale scopo, usare la funzione [**PeerGroupSearchRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupsearchrecords) con una query di ricerca XML formattata come specificato nell'argomento [formato della query di ricerca di record](record-search-query-format.md) .</span><span class="sxs-lookup"><span data-stu-id="1e3aa-136">To accomplish this, use the [**PeerGroupSearchRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupsearchrecords) function with an XML search query formatted as specified in the [Record Search Query Format](record-search-query-format.md) topic.</span></span>

<span data-ttu-id="1e3aa-137">Per ulteriori informazioni sull'utilizzo dei record nell'infrastruttura peer, consultare l'argomento [record](records.md) in [utilizzo dell'infrastruttura peer](using-the-peer-infrastructure.md).</span><span class="sxs-lookup"><span data-stu-id="1e3aa-137">For more details on working with records in the Peer Infrastructure, please refer to the [Records](records.md) topic in [Using the Peer Infrastructure](using-the-peer-infrastructure.md).</span></span>

## <a name="administration-of-peer-group-records"></a><span data-ttu-id="1e3aa-138">Amministrazione dei record del gruppo di peer</span><span class="sxs-lookup"><span data-stu-id="1e3aa-138">Administration of Peer Group Records</span></span>

<span data-ttu-id="1e3aa-139">Quando gli inviti iniziali vengono emessi dal creatore del gruppo peer, è possibile specificare che alcuni membri vengono utilizzati in un ruolo amministrativo ( \_ amministratore del ruolo del gruppo peer \_ \_ ) ogni volta che vengono generate nuove credenziali per l'utente (tramite [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) o [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials)).</span><span class="sxs-lookup"><span data-stu-id="1e3aa-139">When the initial invitations are issued by the peer group's creator, it can specify that certain members serve in an administrative role (PEER\_GROUP\_ROLE\_ADMIN) whenever it issues new credentials to the user (via either [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) or [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials)).</span></span> <span data-ttu-id="1e3aa-140">Un amministratore ha la possibilità di aggiungere, eliminare e aggiornare direttamente tutti i record del gruppo peer.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-140">An administrator has the ability to directly add, delete, and update any peer group records.</span></span> <span data-ttu-id="1e3aa-141">Viceversa, un membro del gruppo peer con il suo ruolo impostato sul membro del **\_ \_ ruolo \_** del gruppo peer o **sul \_ ruolo del gruppo peer che invita il \_ \_ \_ membro** può solo aggiungere, aggiornare ed eliminare i propri record.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-141">Conversely, a peer group member with it's role set to either **PEER\_GROUP\_ROLE\_MEMBER** or **PEER\_GROUP\_ROLE\_INVITING\_MEMBER** can only add, update, and delete its own record(s).</span></span>

<span data-ttu-id="1e3aa-142">Per impostazione predefinita, l'autore ha il ruolo di amministratore.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-142">The creator has the administrator role by default.</span></span>

<span data-ttu-id="1e3aa-143">Per aggiornare un record, ottenere il record con [**PeerGroupGetRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupgetrecord) o [**PeerGroupEnumRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupenumrecords), apportare le modifiche e passare il record aggiornato a [**PeerGroupUpdateRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupupdaterecord).</span><span class="sxs-lookup"><span data-stu-id="1e3aa-143">To update a record, obtain the record with [**PeerGroupGetRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupgetrecord) or [**PeerGroupEnumRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupenumrecords), make the changes, and pass the updated record to [**PeerGroupUpdateRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupupdaterecord).</span></span>

<span data-ttu-id="1e3aa-144">Per eliminare un record, passare l'ID record da eliminare a [**PeerGroupDeleteRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupdeleterecord).</span><span class="sxs-lookup"><span data-stu-id="1e3aa-144">To delete a record, pass the record ID to delete to [**PeerGroupDeleteRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupdeleterecord).</span></span>

<span data-ttu-id="1e3aa-145">Per aggiungere un record, creare una nuova struttura di [**\_ record peer**](/windows/desktop/api/P2P/ns-p2p-peer_record) e popolare i campi seguenti:</span><span class="sxs-lookup"><span data-stu-id="1e3aa-145">To add a record, create a new [**PEER\_RECORD**](/windows/desktop/api/P2P/ns-p2p-peer_record) structure and populate the following fields:</span></span>

-   <span data-ttu-id="1e3aa-146">**dwSize**.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-146">**dwSize**.</span></span> <span data-ttu-id="1e3aa-147">Questo campo contiene il valore **sizeof**([**\_ record peer**](/windows/desktop/api/P2P/ns-p2p-peer_record)).</span><span class="sxs-lookup"><span data-stu-id="1e3aa-147">This field contains the value of **sizeof**([**PEER\_RECORD**](/windows/desktop/api/P2P/ns-p2p-peer_record)).</span></span>
-   <span data-ttu-id="1e3aa-148">**ftExpiration**.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-148">**ftExpiration**.</span></span> <span data-ttu-id="1e3aa-149">Questo campo contiene la data e l'ora di scadenza di questo record, espresso in tempo peer come struttura **FILETIME** .</span><span class="sxs-lookup"><span data-stu-id="1e3aa-149">This field contains the expiration date and time of this record, expressed in peer time as a **FILETIME** structure.</span></span>
-   <span data-ttu-id="1e3aa-150">**digitare**.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-150">**type**.</span></span> <span data-ttu-id="1e3aa-151">Questo campo contiene un valore **GUID** che identifica il tipo di record per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-151">This field contains a **GUID** value that identifies the record type to the application.</span></span> <span data-ttu-id="1e3aa-152">Se questo tipo è personalizzato per l'infrastruttura dell'applicazione, è necessario popolare anche il campo **dati** .</span><span class="sxs-lookup"><span data-stu-id="1e3aa-152">If this type is custom to your application infrastructure, you should also populate the **data** field.</span></span>

<span data-ttu-id="1e3aa-153">I campi seguenti vengono popolati dall'infrastruttura e verranno ignorati se impostati dall'applicazione:</span><span class="sxs-lookup"><span data-stu-id="1e3aa-153">The following fields are populated by the infrastructure, and will be ignored if set by the application:</span></span>

-   <span data-ttu-id="1e3aa-154">**id**</span><span class="sxs-lookup"><span data-stu-id="1e3aa-154">**id**</span></span>
-   <span data-ttu-id="1e3aa-155">**pwzCreatorId**</span><span class="sxs-lookup"><span data-stu-id="1e3aa-155">**pwzCreatorId**</span></span>
-   <span data-ttu-id="1e3aa-156">**pwzLastModifiedById**</span><span class="sxs-lookup"><span data-stu-id="1e3aa-156">**pwzLastModifiedById**</span></span>
-   <span data-ttu-id="1e3aa-157">**ftCreation**</span><span class="sxs-lookup"><span data-stu-id="1e3aa-157">**ftCreation**</span></span>
-   <span data-ttu-id="1e3aa-158">**ftLastModified**</span><span class="sxs-lookup"><span data-stu-id="1e3aa-158">**ftLastModified**</span></span>
-   <span data-ttu-id="1e3aa-159">**securityData**</span><span class="sxs-lookup"><span data-stu-id="1e3aa-159">**securityData**</span></span>

<span data-ttu-id="1e3aa-160">I campi rimanenti sono facoltativi.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-160">The remaining fields are optional.</span></span> <span data-ttu-id="1e3aa-161">Per aggiungere il nuovo record al gruppo peer, passarlo a [**PeerGroupAddRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupaddrecord).</span><span class="sxs-lookup"><span data-stu-id="1e3aa-161">To add this new record to the peer group, pass it to [**PeerGroupAddRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupaddrecord).</span></span>

## <a name="importing-and-exporting-records"></a><span data-ttu-id="1e3aa-162">Importazione ed esportazione di record</span><span class="sxs-lookup"><span data-stu-id="1e3aa-162">Importing and Exporting Records</span></span>

<span data-ttu-id="1e3aa-163">I record di gruppi peer-to-peer vengono gestiti localmente come database.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-163">Peer-to-peer group records are maintained locally as a database.</span></span> <span data-ttu-id="1e3aa-164">Per salvare uno snapshot corrente del database di record del gruppo peer in un file locale, chiamare [**PeerGroupExportDatabase**](/windows/desktop/api/P2P/nf-p2p-peergroupexportdatabase)e passare l'handle al gruppo peer.</span><span class="sxs-lookup"><span data-stu-id="1e3aa-164">To save a current snapshot of the peer group record database to a local file, call [**PeerGroupExportDatabase**](/windows/desktop/api/P2P/nf-p2p-peergroupexportdatabase), and pass it the handle to the peer group.</span></span> <span data-ttu-id="1e3aa-165">Questo file può quindi essere trasportato in un altro computer o applicazione, che può estrarre e usare questo database di record chiamando [**PeerGroupImportDatabase**](/windows/desktop/api/P2P/nf-p2p-peergroupimportdatabase).</span><span class="sxs-lookup"><span data-stu-id="1e3aa-165">This file can then be transported to a different computer or application, which can extract and use this record database by calling [**PeerGroupImportDatabase**](/windows/desktop/api/P2P/nf-p2p-peergroupimportdatabase).</span></span>

 

 



