---
description: Security Service Provider Interface (SSPI) fornisce un'interfaccia universale standard del settore per le applicazioni distribuite sicure.
ms.assetid: c3cebb9d-9094-493f-96d3-763a0c282dfb
title: Provider di servizi di sicurezza
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b2121940337d0f4e06c53981cf30f0125180c466
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106315438"
---
# <a name="security-service-providers"></a><span data-ttu-id="e4c70-103">Provider di servizi di sicurezza</span><span class="sxs-lookup"><span data-stu-id="e4c70-103">Security Service Providers</span></span>

<span data-ttu-id="e4c70-104">Security Service Provider Interface (SSPI) fornisce un'interfaccia universale standard del settore per le applicazioni distribuite sicure.</span><span class="sxs-lookup"><span data-stu-id="e4c70-104">The Security Service Provider Interface (SSPI) provides a universal, industry-standard interface for secure distributed applications.</span></span> <span data-ttu-id="e4c70-105">L'API per la rappresentazione grafica dei peer consente alle applicazioni di proteggere i collegamenti in un grafico specificando un provider di servizi di sicurezza (SSP), ovvero una DLL che implementa un'interfaccia SSPI.</span><span class="sxs-lookup"><span data-stu-id="e4c70-105">The Peer Graphing API provides a way for applications to secure links in a graph by specifying a Security Service Provider (SSP), which is a DLL that implements an SSPI interface.</span></span> <span data-ttu-id="e4c70-106">Un'applicazione specifica un SSP quando crea un grafo usando [**PeerGraphCreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).</span><span class="sxs-lookup"><span data-stu-id="e4c70-106">An application specifies an SSP when it creates a graph by using [**PeerGraphCreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).</span></span>

<span data-ttu-id="e4c70-107">Per ulteriori informazioni sulla creazione di un SSP personalizzato, vedere il collegamento alla documentazione SSPI nell'elenco dei [collegamenti di riferimento](graphing-reference-links.md)per la creazione di grafici.</span><span class="sxs-lookup"><span data-stu-id="e4c70-107">For more information about creating your own SSP, see the SSPI documentation link in the list of [Graphing Reference Links](graphing-reference-links.md).</span></span>

## <a name="programming-considerations-for-implementing-an-ssp"></a><span data-ttu-id="e4c70-108">Considerazioni sulla programmazione per l'implementazione di un provider di servizi condivisi</span><span class="sxs-lookup"><span data-stu-id="e4c70-108">Programming Considerations for Implementing an SSP</span></span>

<span data-ttu-id="e4c70-109">Prestare attenzione quando si chiama un'applicazione dall'interno di un SSP.</span><span class="sxs-lookup"><span data-stu-id="e4c70-109">Use caution when calling into an application from within an SSP.</span></span> <span data-ttu-id="e4c70-110">Per le richiamate SSP, si applicano le considerazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="e4c70-110">The following considerations apply to SSP callbacks:</span></span>

-   <span data-ttu-id="e4c70-111">I callback non devono richiedere molto tempo per la restituzione, perché vengono chiamati durante la negoziazione della connessione.</span><span class="sxs-lookup"><span data-stu-id="e4c70-111">Callbacks should not take a long time to return, because they are called during connection negotiation.</span></span> <span data-ttu-id="e4c70-112">Se la connessione deve essere stabilita troppo a lungo, la connessione può essere eliminata.</span><span class="sxs-lookup"><span data-stu-id="e4c70-112">If it takes too long for a connection to be established, the connection can be dropped.</span></span>
-   <span data-ttu-id="e4c70-113">L'API per la rappresentazione grafica dei peer regola dinamicamente i valori di timeout della connessione in base al carico effettivo di un sistema.</span><span class="sxs-lookup"><span data-stu-id="e4c70-113">The Peer Graphing API dynamically adjusts connection timeout values, based on the actual load of a system.</span></span> <span data-ttu-id="e4c70-114">Il valore di timeout più basso è di 20 secondi.</span><span class="sxs-lookup"><span data-stu-id="e4c70-114">The lowest timeout value is 20 seconds.</span></span>
-   <span data-ttu-id="e4c70-115">Per evitare potenziali situazioni di deadlock, un'applicazione non deve accedere al database peer Graphing da un callback.</span><span class="sxs-lookup"><span data-stu-id="e4c70-115">To avoid potential deadlock situations, an application must not access the peer graphing database from a callback.</span></span> <span data-ttu-id="e4c70-116">Se un'applicazione richiede informazioni dal database di Graphing, l'applicazione può memorizzare nella cache le informazioni necessarie e quindi fare riferimento alla cache dall'interno del callback.</span><span class="sxs-lookup"><span data-stu-id="e4c70-116">If an application requires information from the graphing database, the application can cache the necessary information, and then refer to the cache from within the callback.</span></span> <span data-ttu-id="e4c70-117">La memorizzazione nella cache consente inoltre di ridurre il tempo di connessione.</span><span class="sxs-lookup"><span data-stu-id="e4c70-117">Caching can also help decrease connection time.</span></span>

<span data-ttu-id="e4c70-118">Quando si chiamano i punti di ingresso SSPI, l'infrastruttura di Peer Graphing richiede valori specifici per parametri specifici di cinque (5) funzioni.</span><span class="sxs-lookup"><span data-stu-id="e4c70-118">When calling the SSPI entry points, the Peer Graphing Infrastructure requires specific values for specific parameters of five (5) functions.</span></span> <span data-ttu-id="e4c70-119">Non è possibile modificare questi valori di parametro forniti a SSP e il provider di servizi condivisi può ignorare i valori dei cinque parametri o gestirli normalmente.</span><span class="sxs-lookup"><span data-stu-id="e4c70-119">You cannot change these parameter values provided to SSP, and the SSP can either ignore the values for the five parameters or handle them gracefully.</span></span> <span data-ttu-id="e4c70-120">L'elenco seguente identifica questi parametri specifici e i valori obbligatori:</span><span class="sxs-lookup"><span data-stu-id="e4c70-120">The following list identifies these specific parameters and required values:</span></span>

-   [<span data-ttu-id="e4c70-121">**AcquireCredentialsHandle**</span><span class="sxs-lookup"><span data-stu-id="e4c70-121">**AcquireCredentialsHandle**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="e4c70-122">Specificare uno (1) per il parametro *pvGetKeyArgument* .</span><span class="sxs-lookup"><span data-stu-id="e4c70-122">Specify one (1) for the *pvGetKeyArgument* parameter.</span></span> <span data-ttu-id="e4c70-123">Specifica **null** per i parametri *pszPrincipal*, *pvLogonID* e *pGetKeyFn* .</span><span class="sxs-lookup"><span data-stu-id="e4c70-123">Specifies **NULL** for the *pszPrincipal*, *pvLogonID*, and *pGetKeyFn* parameters.</span></span>

-   [<span data-ttu-id="e4c70-124">**InitializeSecurityContext**</span><span class="sxs-lookup"><span data-stu-id="e4c70-124">**InitializeSecurityContext**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="e4c70-125">Specificare i flag seguenti per il parametro *fContextReq* : **ISC \_ req \_ reciproal \_ auth \| ISC \_ req \_ confidentiality \| ISC req \_ \_ Integrity \| ISC \_ req \_ \_ \| \_ \_ \| \_ \_ \_**.</span><span class="sxs-lookup"><span data-stu-id="e4c70-125">Specify the following flags for the *fContextReq* parameter: **ISC\_REQ\_MUTUAL\_AUTH \| ISC\_REQ\_CONFIDENTIALITY \| ISC\_REQ\_INTEGRITY \| ISC\_REQ\_SEQUENCE\_DETECT \| ISC\_REQ\_STREAM \| ISC\_REQ\_ALLOCATE\_MEMORY**.</span></span>

-   [<span data-ttu-id="e4c70-126">**AcceptSecurityContext**</span><span class="sxs-lookup"><span data-stu-id="e4c70-126">**AcceptSecurityContext**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="e4c70-127">Specificare i flag seguenti per il parametro *fContextReq* : **ASC \_ req \_ Mutual \_ auth \| ASC \_ req \_ confidentiality \| ASC \_ req \_ Integrity \| ASC \_ req \_ Sequence \_ Detect \| ASC \_ req \_ Stream \| ASC \_ req \_ allocate \_ Memory**.</span><span class="sxs-lookup"><span data-stu-id="e4c70-127">Specify the following flags for the *fContextReq* parameter: **ASC\_REQ\_MUTUAL\_AUTH \| ASC\_REQ\_CONFIDENTIALITY \| ASC\_REQ\_INTEGRITY \| ASC\_REQ\_SEQUENCE\_DETECT \| ASC\_REQ\_STREAM \| ASC\_REQ\_ALLOCATE\_MEMORY**.</span></span>

-   [<span data-ttu-id="e4c70-128">**EncryptMessage**</span><span class="sxs-lookup"><span data-stu-id="e4c70-128">**EncryptMessage**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="e4c70-129">Specificare zero (0) per i parametri *fQOP* e *MessageSeqNo* .</span><span class="sxs-lookup"><span data-stu-id="e4c70-129">Specify zero (0) for the *fQOP* and *MessageSeqNo* parameters.</span></span>

-   [<span data-ttu-id="e4c70-130">**DecryptMessage**</span><span class="sxs-lookup"><span data-stu-id="e4c70-130">**DecryptMessage**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="e4c70-131">Specificare zero (0) per il parametro *MessageSeqNo* e **null** per il parametro *pfQOP* .</span><span class="sxs-lookup"><span data-stu-id="e4c70-131">Specify zero (0) for the *MessageSeqNo* parameter and **NULL** for the *pfQOP* parameter.</span></span>

<span data-ttu-id="e4c70-132">Quando si chiama [**EncryptMessage**](graphing-reference-links.md), vengono passati quattro buffer nella struttura **SecBufferDesc** .</span><span class="sxs-lookup"><span data-stu-id="e4c70-132">When calling [**EncryptMessage**](graphing-reference-links.md), four buffers are passed in the **SecBufferDesc** structure.</span></span> <span data-ttu-id="e4c70-133">Nella tabella seguente viene identificato l'ordine di passaggio dei buffer.</span><span class="sxs-lookup"><span data-stu-id="e4c70-133">The following table identifies the order to pass the buffers.</span></span>

| <span data-ttu-id="e4c70-134">Struttura specifica di SSP</span><span class="sxs-lookup"><span data-stu-id="e4c70-134">SSP-specific structure</span></span>         | <span data-ttu-id="e4c70-135">Descrizione</span><span class="sxs-lookup"><span data-stu-id="e4c70-135">Description</span></span>                                                                                                                                                                                                       |
|--------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e4c70-136">**\_intestazione del flusso SECBUFFER \_**</span><span class="sxs-lookup"><span data-stu-id="e4c70-136">**SECBUFFER\_STREAM\_HEADER**</span></span>  | <span data-ttu-id="e4c70-137">Contiene i dati dell'intestazione di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="e4c70-137">Contains the security header data.</span></span> <span data-ttu-id="e4c70-138">La dimensione del buffer di intestazione viene ottenuta chiamando [**QueryContextAttributes**](graphing-reference-links.md) e specificando l'attributo **SECPKG \_ attr \_ Stream \_ sizes** .</span><span class="sxs-lookup"><span data-stu-id="e4c70-138">The size of the header buffer is obtained by calling [**QueryContextAttributes**](graphing-reference-links.md) and specifying the **SECPKG\_ATTR\_STREAM\_SIZES** attribute.</span></span>  |
| <span data-ttu-id="e4c70-139">**\_dati SECBUFFER**</span><span class="sxs-lookup"><span data-stu-id="e4c70-139">**SECBUFFER\_DATA**</span></span>            | <span data-ttu-id="e4c70-140">Contiene il messaggio di testo normale da crittografare.</span><span class="sxs-lookup"><span data-stu-id="e4c70-140">Contains the plain-text message to be encrypted.</span></span>                                                                                                                                                                  |
| <span data-ttu-id="e4c70-141">**\_trailer del flusso SECBUFFER \_**</span><span class="sxs-lookup"><span data-stu-id="e4c70-141">**SECBUFFER\_STREAM\_TRAILER**</span></span> | <span data-ttu-id="e4c70-142">Contiene i dati del trailer di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="e4c70-142">Contains the security trailer data.</span></span> <span data-ttu-id="e4c70-143">La dimensione del buffer di intestazione viene ottenuta chiamando [**QueryContextAttributes**](graphing-reference-links.md) e specificando l'attributo **SECPKG \_ attr \_ Stream \_ sizes** .</span><span class="sxs-lookup"><span data-stu-id="e4c70-143">The size of the header buffer is obtained by calling [**QueryContextAttributes**](graphing-reference-links.md) and specifying the **SECPKG\_ATTR\_STREAM\_SIZES** attribute.</span></span> |
| <span data-ttu-id="e4c70-144">**SECBUFFER \_ vuoto**</span><span class="sxs-lookup"><span data-stu-id="e4c70-144">**SECBUFFER\_EMPTY**</span></span>           | <span data-ttu-id="e4c70-145">Non inizializzato.</span><span class="sxs-lookup"><span data-stu-id="e4c70-145">Not initialized.</span></span> <span data-ttu-id="e4c70-146">La dimensione di questo buffer è zero (0).</span><span class="sxs-lookup"><span data-stu-id="e4c70-146">The size of this buffer is zero (0).</span></span>                                                                                                                                                             |



 

<span data-ttu-id="e4c70-147">Quando si chiama [**DecryptMessage**](graphing-reference-links.md), l'API per la rappresentazione di peering passa esattamente quattro strutture **SecBuffer** .</span><span class="sxs-lookup"><span data-stu-id="e4c70-147">When calling [**DecryptMessage**](graphing-reference-links.md), the Peer Graphing API passes exactly four **SecBuffer** structures.</span></span> <span data-ttu-id="e4c70-148">Il primo buffer è **SECBUFFER i \_ dati** e contiene un messaggio crittografato.</span><span class="sxs-lookup"><span data-stu-id="e4c70-148">The first buffer is **SECBUFFER\_DATA**, and contains an encrypted message.</span></span> <span data-ttu-id="e4c70-149">I buffer rimanenti vengono usati per l'output e sono di tipo **SECBUFFER \_ vuoto**.</span><span class="sxs-lookup"><span data-stu-id="e4c70-149">The remaining buffers are used for output, and are of type **SECBUFFER\_EMPTY**.</span></span>

<span data-ttu-id="e4c70-150">Il provider di servizi condivisi deve supportare la crittografia e la decrittografia dei buffer di dati utente con dimensioni di 16K e superiori in un'unica chiamata.</span><span class="sxs-lookup"><span data-stu-id="e4c70-150">The SSP needs to support encrypting and decrypting user data buffers with sizes of 16K and greater in one call.</span></span>

 

 



