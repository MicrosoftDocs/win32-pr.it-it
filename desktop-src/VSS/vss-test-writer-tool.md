---
description: Il writer di test è un'utilità che è possibile usare per testare le applicazioni del richiedente VSS.
ms.assetid: 02434cb9-390c-4cf0-9941-b833ace55685
title: Strumento writer di test VSS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 61ffdbb513697a701866be5ceeb40168e8c28368
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106307153"
---
# <a name="vss-test-writer-tool"></a><span data-ttu-id="11d67-103">Strumento writer di test VSS</span><span class="sxs-lookup"><span data-stu-id="11d67-103">VSS Test Writer Tool</span></span>

<span data-ttu-id="11d67-104">Il writer di test è un'utilità che è possibile usare per testare le applicazioni del richiedente VSS.</span><span class="sxs-lookup"><span data-stu-id="11d67-104">The Test Writer is a utility that you can use to test VSS requester applications.</span></span> <span data-ttu-id="11d67-105">Questo writer può essere configurato in modo da eseguire quasi tutte le azioni che possono essere eseguite da un VSS writer.</span><span class="sxs-lookup"><span data-stu-id="11d67-105">This writer can be configured to perform almost all of the actions that a VSS writer can perform.</span></span> <span data-ttu-id="11d67-106">Inoltre, il writer di test esegue verifiche estese per garantire che il richiedente abbia gestito correttamente le azioni del writer.</span><span class="sxs-lookup"><span data-stu-id="11d67-106">In addition, the Test Writer performs extensive checks to ensure that the requester has dealt with these writer actions correctly.</span></span>

<span data-ttu-id="11d67-107">Ogni istanza del writer viene inizializzata con un file di configurazione XML che descrive esattamente quali componenti verranno segnalati dal writer e il comportamento del writer.</span><span class="sxs-lookup"><span data-stu-id="11d67-107">Each instance of the writer is initialized with an XML configuration file that describes exactly what components the writer will report on, and how the writer behaves.</span></span> <span data-ttu-id="11d67-108">Il writer può essere configurato in modo da creare report su vari tipi di scenari, tra cui scenari più complicati usando le interfacce incrementali e differenziali.</span><span class="sxs-lookup"><span data-stu-id="11d67-108">The writer can be configured to report on various types of scenarios, including more complicated scenarios using the incremental and differential interfaces.</span></span> <span data-ttu-id="11d67-109">Il writer eseguirà i controlli in vari punti durante il processo per garantire che il richiedente si comporterà in modo corretto.</span><span class="sxs-lookup"><span data-stu-id="11d67-109">The writer will perform checks at various points during the process to ensure that the requester is behaving in a proper manner.</span></span> <span data-ttu-id="11d67-110">Al termine del ripristino, il writer verificherà che tutti i file necessari siano stati ripristinati senza danneggiamento.</span><span class="sxs-lookup"><span data-stu-id="11d67-110">After the restore is completed, the writer will check that all necessary files have been restored without corruption.</span></span> <span data-ttu-id="11d67-111">Il writer può anche essere configurato per eseguire altre operazioni, ad esempio eventi specifici non riusciti.</span><span class="sxs-lookup"><span data-stu-id="11d67-111">The writer can also be configured to perform other operations such as failing specific events.</span></span>

> [!Note]  
> <span data-ttu-id="11d67-112">Questo strumento è incluso in Microsoft Windows Software Development Kit (SDK) per Windows Vista e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="11d67-112">This tool is included in the Microsoft Windows Software Development Kit (SDK) for Windows Vista and later.</span></span> <span data-ttu-id="11d67-113">È possibile scaricare il Windows SDK da [https://msdn.microsoft.com/windowsvista](https://msdn.microsoft.com/windows/default.aspx) .</span><span class="sxs-lookup"><span data-stu-id="11d67-113">You can download the Windows SDK from [https://msdn.microsoft.com/windowsvista](https://msdn.microsoft.com/windows/default.aspx).</span></span>

 

<span data-ttu-id="11d67-114">Nell'installazione di Windows SDK lo strumento VssSampleProvider si trova in `%Program Files(x86)%\Windows Kits\8.1\bin\x64` (per Windows a 64 bit) e `%Program Files(x86)%\Windows Kits\8.1\bin\x86` .</span><span class="sxs-lookup"><span data-stu-id="11d67-114">In the Windows SDK installation, the VssSampleProvider tool can be found in `%Program Files(x86)%\Windows Kits\8.1\bin\x64` (for 64-bit Windows) and `%Program Files(x86)%\Windows Kits\8.1\bin\x86`.</span></span>

## <a name="running-the-test-writer-tool"></a><span data-ttu-id="11d67-115">Esecuzione dello strumento writer di test</span><span class="sxs-lookup"><span data-stu-id="11d67-115">Running the Test Writer Tool</span></span>

<span data-ttu-id="11d67-116">Per avviare il writer di test, digitare quanto segue al prompt dei comandi:</span><span class="sxs-lookup"><span data-stu-id="11d67-116">To start the Test Writer, type the following at the command prompt:</span></span>

<span data-ttu-id="11d67-117"> *File di configurazione* vswriter.exe</span><span class="sxs-lookup"><span data-stu-id="11d67-117">**vswriter.exe** *config-file*</span></span>

<span data-ttu-id="11d67-118">dove *config-file* è il percorso di un file di configurazione che specifica il comportamento di questo writer.</span><span class="sxs-lookup"><span data-stu-id="11d67-118">where *config-file* is the path to a configuration file that specifies the behavior of this writer.</span></span>

<span data-ttu-id="11d67-119">Per arrestare il writer di test, premere CTRL + C.</span><span class="sxs-lookup"><span data-stu-id="11d67-119">To stop the Test Writer, press CTRL+C.</span></span>

<span data-ttu-id="11d67-120">È possibile eseguire contemporaneamente più istanze del writer di test.</span><span class="sxs-lookup"><span data-stu-id="11d67-120">Multiple instances of the Test Writer can be run at the same time.</span></span> <span data-ttu-id="11d67-121">Tuttavia, ogni istanza del writer restituirà lo stesso ID di classe Writer (anche se un ID istanza di writer diverso), pertanto i percorsi logici e i nomi dei componenti devono essere univoci in tutte le istanze in esecuzione simultanea del writer.</span><span class="sxs-lookup"><span data-stu-id="11d67-121">However, each instance of the writer will report the same writer class ID (though a different writer instance ID), so logical paths and component names must be unique across all simultaneously running instances of the writer.</span></span>

<span data-ttu-id="11d67-122">Per assicurarsi che il writer possa verificare correttamente che il richiedente abbia rispettato le specifiche del file di esclusione, tutti i file di cui è stato eseguito il backup devono essere eliminati dal volume originale prima di provare a ripristinarli.</span><span class="sxs-lookup"><span data-stu-id="11d67-122">To ensure that the writer can properly check that the requester has honored the exclude file specifications, all files that were backed up should be deleted from the original volume before attempting to restore them.</span></span> <span data-ttu-id="11d67-123">È consigliabile archiviare un modello di ogni scenario di writer, in modo che lo scenario possa essere facilmente ricreato.</span><span class="sxs-lookup"><span data-stu-id="11d67-123">It is recommended that a template of each writer scenario be stored, so the scenario can be easily recreated.</span></span>

## <a name="using-a-configuration-file"></a><span data-ttu-id="11d67-124">Uso di un file di configurazione</span><span class="sxs-lookup"><span data-stu-id="11d67-124">Using a Configuration File</span></span>

<span data-ttu-id="11d67-125">Il file di configurazione di esempio seguente, vswriter \_config.xml, si trova in `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\vsstools` su piattaforme x86 e `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\x64\vsstools` su piattaforme x64.</span><span class="sxs-lookup"><span data-stu-id="11d67-125">The following sample configuration file, vswriter\_config.xml, can be found in `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\vsstools` on x86 platforms and `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\x64\vsstools` on x64 platforms.</span></span>

``` syntax
<TestWriter usage="USER_DATA">

    <RestoreMethod method="RESTORE_IF_CAN_BE_REPLACED"
                   writerRestore="always"
                   rebootRequired="no" />

    <ExcludeFile path="c:\writerData\notTheseFiles" 
                 filespec="excludeThisFile.txt" 
                 recursive="no"/>

    <Component componentType="filegroup"
               componentName="TestFiles">
        <ComponentFile path="c:\writerData\myFilesHere" 
                       filespec="*"
                       recursive="no" />
    </Component>

</TestWriter>
```

<span data-ttu-id="11d67-126">L'elemento radice in questo file di configurazione è denominato TestWriter.</span><span class="sxs-lookup"><span data-stu-id="11d67-126">The root element in this configuration file is named TestWriter.</span></span> <span data-ttu-id="11d67-127">Tutti gli altri elementi sono disposti nell'elemento TestWriter.</span><span class="sxs-lookup"><span data-stu-id="11d67-127">All other elements are arranged under the TestWriter element.</span></span>

<span data-ttu-id="11d67-128">Uno degli attributi associati a TestWriter è l'attributo Usage.</span><span class="sxs-lookup"><span data-stu-id="11d67-128">One of the attributes associated with TestWriter is the usage attribute.</span></span> <span data-ttu-id="11d67-129">Questo attributo specifica il tipo di utilizzo riportato tramite [**IVssExamineWriterMetadata:: GetIdentity**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getidentity).</span><span class="sxs-lookup"><span data-stu-id="11d67-129">This attribute specifies the usage type reported through [**IVssExamineWriterMetadata::GetIdentity**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getidentity).</span></span> <span data-ttu-id="11d67-130">Uno dei possibili valori di questo attributo è costituito dai \_ dati utente.</span><span class="sxs-lookup"><span data-stu-id="11d67-130">One of the possible values for this attribute is USER\_DATA.</span></span>

<span data-ttu-id="11d67-131">Il primo elemento figlio dell'elemento radice deve essere sempre un elemento RestoreMethod.</span><span class="sxs-lookup"><span data-stu-id="11d67-131">The first child element of the root element must always be a RestoreMethod element.</span></span> <span data-ttu-id="11d67-132">Questo elemento specifica quanto segue:</span><span class="sxs-lookup"><span data-stu-id="11d67-132">This element specifies the following:</span></span>

-   <span data-ttu-id="11d67-133">Metodo Restore (in questo caso, RESTOre \_ if \_ può \_ essere \_ sostituito)</span><span class="sxs-lookup"><span data-stu-id="11d67-133">The restore method (in this case, RESTORE\_IF\_CAN\_BE\_REPLACED)</span></span>
-   <span data-ttu-id="11d67-134">Indica se il writer richiede eventi di ripristino (in questo caso, always)</span><span class="sxs-lookup"><span data-stu-id="11d67-134">Whether the writer requires restore events (in this case, always)</span></span>
-   <span data-ttu-id="11d67-135">Indica se è necessario riavviare il computer dopo il ripristino del writer, in questo caso no.</span><span class="sxs-lookup"><span data-stu-id="11d67-135">Whether a reboot is required after the writer is restored (in this case, no)</span></span>

<span data-ttu-id="11d67-136">Questo elemento può facoltativamente specificare un mapping in un percorso alternativo.</span><span class="sxs-lookup"><span data-stu-id="11d67-136">This element can optionally specify an alternate-location mapping.</span></span> <span data-ttu-id="11d67-137">In questo caso non viene specificato alcun percorso alternativo.</span><span class="sxs-lookup"><span data-stu-id="11d67-137">(In this case, no alternate location is specified.)</span></span>

<span data-ttu-id="11d67-138">Il secondo elemento figlio è un elemento ExcludeFile.</span><span class="sxs-lookup"><span data-stu-id="11d67-138">The second child element is an ExcludeFile element.</span></span> <span data-ttu-id="11d67-139">Questo elemento fa sì che il writer escluda un file o un set di file dal backup.</span><span class="sxs-lookup"><span data-stu-id="11d67-139">This element causes the writer to exclude a file or a set of files from backup.</span></span>

<span data-ttu-id="11d67-140">Il terzo elemento figlio è un elemento Component.</span><span class="sxs-lookup"><span data-stu-id="11d67-140">The third child element is a Component element.</span></span> <span data-ttu-id="11d67-141">Questo elemento fa sì che il writer aggiunga un componente ai relativi metadati.</span><span class="sxs-lookup"><span data-stu-id="11d67-141">This element causes the writer to add a component to its metadata.</span></span> <span data-ttu-id="11d67-142">Un elemento Component contiene gli attributi per descrivere il componente e gli elementi figlio per descrivere il contenuto del componente, ad esempio quanto segue:</span><span class="sxs-lookup"><span data-stu-id="11d67-142">A Component element contains attributes to describe the component and child elements to describe the content of the component, such as the following:</span></span>

-   <span data-ttu-id="11d67-143">componentType per indicare se si tratta di un filegroup o di un database</span><span class="sxs-lookup"><span data-stu-id="11d67-143">componentType to indicate whether this is a filegroup or a database</span></span>
-   <span data-ttu-id="11d67-144">logicalPath per il percorso logico del componente</span><span class="sxs-lookup"><span data-stu-id="11d67-144">logicalPath for the component logical path</span></span>
-   <span data-ttu-id="11d67-145">ComponentName per il nome del componente</span><span class="sxs-lookup"><span data-stu-id="11d67-145">componentName for the name of the component</span></span>
-   <span data-ttu-id="11d67-146">selezionabile per indicare lo stato selezionabile per il backup</span><span class="sxs-lookup"><span data-stu-id="11d67-146">selectable to indicate selectable-for-backup status</span></span>

<span data-ttu-id="11d67-147">L'elemento Component dispone anche di un elemento figlio denominato ComponentFile per aggiungere una specifica del file a questo componente.</span><span class="sxs-lookup"><span data-stu-id="11d67-147">The Component element also has a child element named ComponentFile to add a file specification to this component.</span></span> <span data-ttu-id="11d67-148">Un elemento Component può avere un numero arbitrario di elementi ComponentFile che può essere specificato per ogni componente. Questo elemento ComponentFile ha gli attributi seguenti:</span><span class="sxs-lookup"><span data-stu-id="11d67-148">(A Component element can have an arbitrary number of ComponentFile elements that can be specified for each component.) This ComponentFile element has the following attributes:</span></span>

-   <span data-ttu-id="11d67-149">path = "c: \\ writerData \\ myFilesHere"</span><span class="sxs-lookup"><span data-stu-id="11d67-149">path="c:\\writerData\\myFilesHere"</span></span>
-   <span data-ttu-id="11d67-150">filespec = " \* "</span><span class="sxs-lookup"><span data-stu-id="11d67-150">filespec="\*"</span></span>
-   <span data-ttu-id="11d67-151">ricorsivo = "No"</span><span class="sxs-lookup"><span data-stu-id="11d67-151">recursive="no"</span></span>

<span data-ttu-id="11d67-152">Sebbene il writer di test verifichi il comportamento del richiedente, non verifica che il file di configurazione mantenga sempre la semantica documentata per un writer.</span><span class="sxs-lookup"><span data-stu-id="11d67-152">Although the Test Writer verifies requester behavior, it does not verify that the configuration file always maintains the documented semantics for a writer.</span></span> <span data-ttu-id="11d67-153">Sono disponibili molte operazioni che un writer ben funzionante non deve eseguire, ad esempio segnala lo stesso file in più componenti, ed è l'autore del file di configurazione XML per mantenere la semantica.</span><span class="sxs-lookup"><span data-stu-id="11d67-153">There are many operations that a well-behaved writer should not do (such as report the same file in multiple components), and it is up to the author of the XML configuration file to maintain these semantics.</span></span>

## <a name="configuring-writer-attributes"></a><span data-ttu-id="11d67-154">Configurazione degli attributi del writer</span><span class="sxs-lookup"><span data-stu-id="11d67-154">Configuring Writer Attributes</span></span>

<span data-ttu-id="11d67-155">L'elemento radice TestWriter contiene attributi che determinano vari comportamenti del writer.</span><span class="sxs-lookup"><span data-stu-id="11d67-155">The TestWriter root element contains attributes that determine various behaviors of the writer.</span></span> <span data-ttu-id="11d67-156">Di seguito sono riportati alcuni dei comportamenti che è possibile modificare:</span><span class="sxs-lookup"><span data-stu-id="11d67-156">Some of the behaviors that can be altered are the following:</span></span>



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="11d67-157">Attributo</span><span class="sxs-lookup"><span data-stu-id="11d67-157">Attribute</span></span></th>
<th><span data-ttu-id="11d67-158">Descrizione</span><span class="sxs-lookup"><span data-stu-id="11d67-158">Description</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="11d67-159"><span id="verbosity"></span><span id="VERBOSITY"></span>dettaglio</span><span class="sxs-lookup"><span data-stu-id="11d67-159"><span id="verbosity"></span><span id="VERBOSITY"></span>verbosity</span></span><br/></td>
<td><span data-ttu-id="11d67-160">Il writer stampa lo stato nella console mentre riceve gli eventi e li elabora.</span><span class="sxs-lookup"><span data-stu-id="11d67-160">The writer prints the status to the console as it receives events and processes them.</span></span> <span data-ttu-id="11d67-161">Il livello di dettaglio visualizzato viene specificato dall'attributo di dettaglio.</span><span class="sxs-lookup"><span data-stu-id="11d67-161">The level of verbosity displayed is specified by the verbosity attribute.</span></span> <span data-ttu-id="11d67-162">È possibile scegliere tra tre livelli di dettaglio:</span><span class="sxs-lookup"><span data-stu-id="11d67-162">There are three verbosity levels to choose from:</span></span><br/> <dl> <span data-ttu-id="11d67-163"><dt><span id="low"></span><span id="LOW"></span>basso</dt> </span><span class="sxs-lookup"><span data-stu-id="11d67-163"><dt><span id="low"></span><span id="LOW"></span>low</dt> </span></span><dd> <span data-ttu-id="11d67-164">Verranno stampati solo gli errori del writer o il comportamento errato del richiedente.</span><span class="sxs-lookup"><span data-stu-id="11d67-164">Only failures in the writer or incorrect behavior from the requester will be printed.</span></span><br/> </dd> <span data-ttu-id="11d67-165"><dt><span id="medium"></span><span id="MEDIUM"></span>media</dt> </span><span class="sxs-lookup"><span data-stu-id="11d67-165"><dt><span id="medium"></span><span id="MEDIUM"></span>medium</dt> </span></span><dd> <span data-ttu-id="11d67-166">Tutti gli elementi a livello di dettaglio basso vengono stampati in aggiunta alle informazioni aggiuntive sullo stato, ad esempio quando vengono ricevuti gli eventi.</span><span class="sxs-lookup"><span data-stu-id="11d67-166">Everything at the low verbosity level is printed in addition to extra status information such as when events are received.</span></span> <span data-ttu-id="11d67-167">Si tratta del livello predefinito.</span><span class="sxs-lookup"><span data-stu-id="11d67-167">This is the default level.</span></span><br/> </dd> <span data-ttu-id="11d67-168"><dt><span id="high"></span><span id="HIGH"></span>alta</dt> </span><span class="sxs-lookup"><span data-stu-id="11d67-168"><dt><span id="high"></span><span id="HIGH"></span>high</dt> </span></span><dd> <span data-ttu-id="11d67-169">Vengono restituite informazioni dettagliate sullo stato relative all'operazione del writer.</span><span class="sxs-lookup"><span data-stu-id="11d67-169">Detailed status information about the operation of the writer is reported.</span></span><br/> </dd> </dl></td>
</tr>
<tr class="even">
<td><span data-ttu-id="11d67-170"><span id="deleteFiles"></span><span id="deletefiles"></span><span id="DELETEFILES"></span>deleteFiles</span><span class="sxs-lookup"><span data-stu-id="11d67-170"><span id="deleteFiles"></span><span id="deletefiles"></span><span id="DELETEFILES"></span>deleteFiles</span></span><br/></td>
<td><span data-ttu-id="11d67-171">Per eseguire una verifica aggiuntiva, impostare questo attributo su Sì per fare in modo che &quot; &quot; il writer elimini tutti i file immediatamente dopo la creazione della copia shadow del volume.</span><span class="sxs-lookup"><span data-stu-id="11d67-171">To perform extra verification, set this attribute to &quot;yes&quot; to cause the writer to delete all of its files immediately after the volume shadow copy is created.</span></span> <span data-ttu-id="11d67-172">Il richiedente deve quindi copiare i file dalla copia shadow, perché non esistono più nel volume originale.</span><span class="sxs-lookup"><span data-stu-id="11d67-172">The requester must then copy the files from the shadow copy, because they no longer exist on the original volume.</span></span> <br/>
<blockquote>
[!Note]<br />
<span data-ttu-id="11d67-173">Nel caso di writer Spit, i file vengono eliminati dal percorso originale dopo lo spiedo ma prima della creazione della copia shadow.</span><span class="sxs-lookup"><span data-stu-id="11d67-173">In the case of spit writers, the files are deleted from the original location after the spit but before the shadow copy is created.</span></span> <span data-ttu-id="11d67-174">Una volta creata la copia shadow, i file vengono eliminati dalla directory spit.</span><span class="sxs-lookup"><span data-stu-id="11d67-174">After the shadow copy is created, the files are deleted from the spit directory.</span></span>
</blockquote>
<br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="11d67-175"><span id="deletePartialFiles"></span><span id="deletepartialfiles"></span><span id="DELETEPARTIALFILES"></span>deletePartialFiles</span><span class="sxs-lookup"><span data-stu-id="11d67-175"><span id="deletePartialFiles"></span><span id="deletepartialfiles"></span><span id="DELETEPARTIALFILES"></span>deletePartialFiles</span></span><br/></td>
<td><span data-ttu-id="11d67-176">Per eliminare i file parziali, impostare questo attributo su &quot; Sì &quot; .</span><span class="sxs-lookup"><span data-stu-id="11d67-176">To delete partial files, set this attribute to &quot;yes&quot;.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="11d67-177"><span id="deleteDifferencedFiles"></span><span id="deletedifferencedfiles"></span><span id="DELETEDIFFERENCEDFILES"></span>deleteDifferencedFiles</span><span class="sxs-lookup"><span data-stu-id="11d67-177"><span id="deleteDifferencedFiles"></span><span id="deletedifferencedfiles"></span><span id="DELETEDIFFERENCEDFILES"></span>deleteDifferencedFiles</span></span><br/></td>
<td><span data-ttu-id="11d67-178">Per eliminare i file differenziati, impostare questo attributo su &quot; Sì &quot; .</span><span class="sxs-lookup"><span data-stu-id="11d67-178">To delete differenced files, set this attribute to &quot;yes&quot;.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="11d67-179"><span id="checkIncludes"></span><span id="checkincludes"></span><span id="CHECKINCLUDES"></span>checkIncludes</span><span class="sxs-lookup"><span data-stu-id="11d67-179"><span id="checkIncludes"></span><span id="checkincludes"></span><span id="CHECKINCLUDES"></span>checkIncludes</span></span><br/></td>
<td><span data-ttu-id="11d67-180">Impostare questo attributo su &quot; Sì per fare in modo &quot; che il writer verifichi che tutti i file di cui è stato eseguito il backup siano stati ripristinati in un percorso appropriato e che il file non sia danneggiato.</span><span class="sxs-lookup"><span data-stu-id="11d67-180">Set this attribute to &quot;yes&quot; to cause the writer to check that every file that has been backed up has been restored to an appropriate location, and that the file has not been corrupted.</span></span> <span data-ttu-id="11d67-181">Anche i file parziali e i file differenziati vengono gestiti correttamente.</span><span class="sxs-lookup"><span data-stu-id="11d67-181">Partial files and differenced files are also correctly handled.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="11d67-182"><span id="checkExcludes"></span><span id="checkexcludes"></span><span id="CHECKEXCLUDES"></span>checkExcludes</span><span class="sxs-lookup"><span data-stu-id="11d67-182"><span id="checkExcludes"></span><span id="checkexcludes"></span><span id="CHECKEXCLUDES"></span>checkExcludes</span></span><br/></td>
<td><span data-ttu-id="11d67-183">Impostare questo attributo su &quot; Sì per fare in modo &quot; che il writer verifichi che i file corrispondenti a una specifica del file nell'elenco di esclusioni non vengano ripristinati.</span><span class="sxs-lookup"><span data-stu-id="11d67-183">Set this attribute to &quot;yes&quot; to cause the writer to check that files matching a file specification in the exclude list are not restored.</span></span> <span data-ttu-id="11d67-184">Per il corretto funzionamento, è necessario svuotare le directory di ripristino prima di eseguire il ripristino.</span><span class="sxs-lookup"><span data-stu-id="11d67-184">For this to function correctly, the restore directories must be emptied prior to restore.</span></span><br/></td>
</tr>
</tbody>
</table>



 

## <a name="specifying-alternate-location-mappings"></a><span data-ttu-id="11d67-185">Specifica di mapping dei percorsi alternativi</span><span class="sxs-lookup"><span data-stu-id="11d67-185">Specifying Alternate Location Mappings</span></span>

<span data-ttu-id="11d67-186">Un mapping del percorso alternativo specifica un percorso in cui eseguire il ripristino se il metodo di ripristino è VSS \_ WRE \_ Restore \_ in un \_ \_ percorso alternativo o se il ripristino normale di un componente ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="11d67-186">An alternate location mapping specifies a location to restore to if the restore method is VSS\_WRE\_RESTORE\_TO\_ALTERNATE\_LOCATION or if normal restore of a component fails.</span></span> <span data-ttu-id="11d67-187">Un writer può segnalare i mapping dei percorsi alternativi al richiedente usando il metodo [**IVssExamineWriterMetadata:: GetAlternateLocationMapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getalternatelocationmapping) .</span><span class="sxs-lookup"><span data-stu-id="11d67-187">A writer can report its alternate location mappings to the requester by using the [**IVssExamineWriterMetadata::GetAlternateLocationMapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getalternatelocationmapping) method.</span></span> <span data-ttu-id="11d67-188">È possibile aggiungere mapping di percorsi alternativi al file di configurazione del writer di test aggiungendo sottoelementi AlternateLocationMapping all'elemento RestoreMethod.</span><span class="sxs-lookup"><span data-stu-id="11d67-188">You can add alternate location mappings to the Test Writer configuration file by adding AlternateLocationMapping subelements to the RestoreMethod element.</span></span>

<span data-ttu-id="11d67-189">Il seguente elemento RestoreMethod contiene un sottoelemento AlternateLocationMapping.</span><span class="sxs-lookup"><span data-stu-id="11d67-189">The following RestoreMethod element contains a AlternateLocationMapping subelement.</span></span>

``` syntax
<RestoreMethod method="RESTORE_IF_CAN_REPLACE"
              writerRestore="always"
              rebootRequired="no">
    <AlternateLocationMapping path="c:\files"
                              filespec="*.txt"
                              recursive="no"
                              alternatePath="c:\altfiles"/>
</RestoreMethod>
```

<span data-ttu-id="11d67-190">Questo esempio specifica che il richiedente deve prima tentare di ripristinare tutti i file corrispondenti a c: \\ files \\ \* . txt nella directory c: \\ files.</span><span class="sxs-lookup"><span data-stu-id="11d67-190">This example specifies that the requester should first attempt to restore all of the files matching c:\\files\\\*.txt to the c:\\files directory.</span></span> <span data-ttu-id="11d67-191">Se uno di questi file non può essere sostituito, il richiedente deve ripristinare tutti i file nella directory c: \\ altfiles.</span><span class="sxs-lookup"><span data-stu-id="11d67-191">If one of these files cannot be replaced, the requester should restore all the files to the c:\\altfiles directory instead.</span></span> <span data-ttu-id="11d67-192">Il richiedente deve salvare questo mapping del percorso alternativo usando il metodo [**IVssBackupComponents:: AddAlternativeLocationMapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addalternativelocationmapping) .</span><span class="sxs-lookup"><span data-stu-id="11d67-192">The requester should save this alternate location mapping by using the [**IVssBackupComponents::AddAlternativeLocationMapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addalternativelocationmapping) method.</span></span> <span data-ttu-id="11d67-193">Se il writer di test è configurato per verificare se i file sono stati ripristinati, verificherà anche se il richiedente ha chiamato **AddAlternativeLocationMapping**.</span><span class="sxs-lookup"><span data-stu-id="11d67-193">If the Test Writer is configured to check whether files have been restored, it will also check whether the requester has called **AddAlternativeLocationMapping**.</span></span>

## <a name="specifying-files-to-be-excluded"></a><span data-ttu-id="11d67-194">Specifica dei file da escludere</span><span class="sxs-lookup"><span data-stu-id="11d67-194">Specifying Files to Be Excluded</span></span>

<span data-ttu-id="11d67-195">Ogni writer può specificare un elenco di specifiche di file che specificano i file per il richiedente da escludere dal backup.</span><span class="sxs-lookup"><span data-stu-id="11d67-195">Every writer can specify a list of file specifications that specify files for the requester to exclude from backup.</span></span> <span data-ttu-id="11d67-196">È possibile aggiungere queste specifiche del file al file di configurazione del writer di test aggiungendo sottoelementi ExcludeFile all'elemento radice TestWriter.</span><span class="sxs-lookup"><span data-stu-id="11d67-196">You can add these file specifications to the Test Writer configuration file by adding ExcludeFile subelements to the TestWriter root element.</span></span>

<span data-ttu-id="11d67-197">Di seguito è riportato un esempio di un sottoelemento ExcludeFile che esclude tutti i file nella directory C: \\ files che corrispondono a c: \\ temp \* . \* .</span><span class="sxs-lookup"><span data-stu-id="11d67-197">Here is an example of an ExcludeFile subelement that excludes all files in the C:\\files directory that match C:\\temp\*.\*.</span></span>

``` syntax
    <ExcludeFile path="c:\files" 
                 filespec="temp*.*" 
                 recursive="no"/>
```

## <a name="backing-up-spit-writers"></a><span data-ttu-id="11d67-198">Esecuzione del backup di writer Spit</span><span class="sxs-lookup"><span data-stu-id="11d67-198">Backing Up Spit Writers</span></span>

<span data-ttu-id="11d67-199">Molti scrittori agiscono da "Spit Writers".</span><span class="sxs-lookup"><span data-stu-id="11d67-199">Many writers act as "spit writers."</span></span> <span data-ttu-id="11d67-200">Un writer Spit crea file intermedi, o "Spit file", in base a un set di file originale e inserisce i file Spit in un percorso alternativo in fase di backup.</span><span class="sxs-lookup"><span data-stu-id="11d67-200">A spit writer creates intermediate files, or "spit files," based on an original set of files, and puts the spit files in an alternate location at backup time.</span></span> <span data-ttu-id="11d67-201">Il writer usa il metodo [**IVssWMFiledesc:: GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) per notificare al richiedente che deve eseguire il backup di questi file dal percorso alternativo.</span><span class="sxs-lookup"><span data-stu-id="11d67-201">The writer uses the [**IVssWMFiledesc::GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) method to notify the requester that it should back these files up from the alternate location.</span></span> <span data-ttu-id="11d67-202">Tuttavia, questi file devono comunque essere ripristinati nel percorso attivo dei file originali.</span><span class="sxs-lookup"><span data-stu-id="11d67-202">However, these files should still be restored to the active location of the original files.</span></span> <span data-ttu-id="11d67-203">Il writer di test può essere configurato in modo da fungere da Writer Spit per una specifica specifica del file.</span><span class="sxs-lookup"><span data-stu-id="11d67-203">The Test Writer can be configured to act as a spit writer for a particular file specification.</span></span>

<span data-ttu-id="11d67-204">L'elemento ComponentFile seguente contiene un attributo alternatePath:</span><span class="sxs-lookup"><span data-stu-id="11d67-204">The following ComponentFile element contains an alternatePath attribute:</span></span>

``` syntax
    <ComponentFile path="c:\files"
                   filespec="*.txt"
                   recursive="no"
                   alternatePath="c:\files\spit" />
```

<span data-ttu-id="11d67-205">In questo esempio il writer di test viene configurato per copiare tutti i file corrispondenti a c: \\ files \\ \* . txt nella directory c: \\ file \\ Spit immediatamente prima della creazione della copia shadow del volume.</span><span class="sxs-lookup"><span data-stu-id="11d67-205">This example configures the Test Writer to copy all files matching c:\\files\\\*.txt to the c:\\files\\spit directory immediately before the volume shadow copy is created.</span></span> <span data-ttu-id="11d67-206">Il richiedente deve eseguire il backup dei file dalla directory c: \\ files \\ spit.</span><span class="sxs-lookup"><span data-stu-id="11d67-206">The requester must back up the files from the c:\\files\\spit directory.</span></span> <span data-ttu-id="11d67-207">Se il writer di test è configurato per eliminare i file, eliminerà i file originali prima della creazione della copia shadow, in modo che non vengano visualizzati nella \\ directory c: files del volume di copia shadow.</span><span class="sxs-lookup"><span data-stu-id="11d67-207">If the Test Writer is configured to delete files, it deletes the original files before the shadow copy is created, so they do not appear in the c:\\files directory on the shadow copy volume.</span></span> <span data-ttu-id="11d67-208">In questo caso, i file in c: \\ file \\ Spit vengono eliminati dopo la creazione della copia shadow, quindi è necessario eseguirne il backup dalla directory c: \\ files \\ Spit nel volume della copia shadow.</span><span class="sxs-lookup"><span data-stu-id="11d67-208">In this case, the files in c:\\files\\spit are deleted after the shadow copy is created, so they must be backed up from the c:\\files\\spit directory on the shadow copy volume.</span></span>

## <a name="reporting-component-dependencies"></a><span data-ttu-id="11d67-209">Dipendenze componente di report</span><span class="sxs-lookup"><span data-stu-id="11d67-209">Reporting Component Dependencies</span></span>

<span data-ttu-id="11d67-210">I writer possono specificare una dipendenza tra un componente locale e un componente presente in un altro writer.</span><span class="sxs-lookup"><span data-stu-id="11d67-210">Writers can specify a dependency between a local component and a component that exists in another writer.</span></span> <span data-ttu-id="11d67-211">Queste dipendenze vengono segnalate al richiedente usando [**IVssWMComponent:: getdependency**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdependency).</span><span class="sxs-lookup"><span data-stu-id="11d67-211">These dependencies are reported to the requester using [**IVssWMComponent::GetDependency**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdependency).</span></span> <span data-ttu-id="11d67-212">Il writer di test può essere configurato per segnalare queste dipendenze aggiungendo uno o più sottoelementi di dipendenza all'elemento Component.</span><span class="sxs-lookup"><span data-stu-id="11d67-212">The Test Writer can be configured to report these dependencies by adding one or more Dependency subelements to the Component element.</span></span>

<span data-ttu-id="11d67-213">L'elemento componente seguente contiene un sottoelemento Dependency:</span><span class="sxs-lookup"><span data-stu-id="11d67-213">The following Component element contains a Dependency subelement:</span></span>

``` syntax
    <Component componentType="filegroup"
               logicalPath=""
               componentName="WriterComponent"
               selectable="yes">
         <Dependency writerId="<GUID of target writer>"
                     logicalPath="ComponentPath"
                     componentName="Writer2Component" />
    </Component>
```

<span data-ttu-id="11d67-214">La dipendenza viene specificata come attributi dell'elemento dependency.</span><span class="sxs-lookup"><span data-stu-id="11d67-214">The dependency is specified as attributes of the Dependency element.</span></span> <span data-ttu-id="11d67-215">writerId è l'ID di classe del writer che contiene la destinazione della dipendenza, logicalPath è il percorso logico del componente in tale writer e ComponentName è il nome del componente.</span><span class="sxs-lookup"><span data-stu-id="11d67-215">writerId is the class id of the writer containing the target of the dependency, logicalPath is the logical path to the component in that writer, and componentName is the name of the component.</span></span> <span data-ttu-id="11d67-216">In questo caso, se il richiedente esegue il backup di "WriterComponent" nel writer corrente, deve eseguire anche il backup del componente "ComponentPath \\ Writer2Component" nel writer di destinazione.</span><span class="sxs-lookup"><span data-stu-id="11d67-216">In this case, if the requester is backing up "WriterComponent" in the current writer, it should also back up the component "ComponentPath\\Writer2Component" in the target writer.</span></span>

> [!Note]  
> <span data-ttu-id="11d67-217">Il writer di test non esegue alcun controllo per garantire che le dipendenze siano rispettate.</span><span class="sxs-lookup"><span data-stu-id="11d67-217">The Test Writer performs no checking to ensure dependencies are honored.</span></span>

 

## <a name="failing-events"></a><span data-ttu-id="11d67-218">Eventi in errore</span><span class="sxs-lookup"><span data-stu-id="11d67-218">Failing Events</span></span>

<span data-ttu-id="11d67-219">Il writer di test può essere configurato in modo da non riuscire agli eventi normali ricevuti da un writer.</span><span class="sxs-lookup"><span data-stu-id="11d67-219">The Test Writer can be configured to fail any of the normal events that a writer receives.</span></span> <span data-ttu-id="11d67-220">Questi eventi sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="11d67-220">These events are as follows:</span></span>



| <span data-ttu-id="11d67-221">Event</span><span class="sxs-lookup"><span data-stu-id="11d67-221">Event</span></span>                                                                                                                                    | <span data-ttu-id="11d67-222">Descrizione</span><span class="sxs-lookup"><span data-stu-id="11d67-222">Description</span></span>                                                                                                                                                                                                                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="11d67-223"><span id="Identify"></span><span id="identify"></span><span id="IDENTIFY"></span>Identificare</span><span class="sxs-lookup"><span data-stu-id="11d67-223"><span id="Identify"></span><span id="identify"></span><span id="IDENTIFY"></span>Identify</span></span><br/>                                     | <span data-ttu-id="11d67-224">Ricevuta come risposta a una chiamata [**IVssBackupComponents:: GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) .</span><span class="sxs-lookup"><span data-stu-id="11d67-224">Received as a response to a [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) call.</span></span> <span data-ttu-id="11d67-225">In questo caso, il writer non verrà segnalato.</span><span class="sxs-lookup"><span data-stu-id="11d67-225">Failure here will cause the writer to not be reported.</span></span><br/>                                                                 |
| <span data-ttu-id="11d67-226"><span id="PrepareForBackup"></span><span id="prepareforbackup"></span><span id="PREPAREFORBACKUP"></span>PrepareForBackup</span><span class="sxs-lookup"><span data-stu-id="11d67-226"><span id="PrepareForBackup"></span><span id="prepareforbackup"></span><span id="PREPAREFORBACKUP"></span>PrepareForBackup</span></span><br/>     | <span data-ttu-id="11d67-227">Ricevuta come risposta al richiedente che chiama [**IVssBackupComponents::P repareforbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup).</span><span class="sxs-lookup"><span data-stu-id="11d67-227">Received as a response to the requester calling [**IVssBackupComponents::PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup).</span></span><br/>                                                                                                                 |
| <span data-ttu-id="11d67-228"><span id="PrepareForSnapsot"></span><span id="prepareforsnapsot"></span><span id="PREPAREFORSNAPSOT"></span>PrepareForSnapsot</span><span class="sxs-lookup"><span data-stu-id="11d67-228"><span id="PrepareForSnapsot"></span><span id="prepareforsnapsot"></span><span id="PREPAREFORSNAPSOT"></span>PrepareForSnapsot</span></span><br/> | <span data-ttu-id="11d67-229">Ricevuto quando il richiedente chiama [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), ma prima della creazione della copia shadow.</span><span class="sxs-lookup"><span data-stu-id="11d67-229">Received when the requester calls [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), but before the shadow copy is created.</span></span><br/>                                                                                              |
| <span data-ttu-id="11d67-230"><span id="Freeze"></span><span id="freeze"></span><span id="FREEZE"></span>Congelare</span><span class="sxs-lookup"><span data-stu-id="11d67-230"><span id="Freeze"></span><span id="freeze"></span><span id="FREEZE"></span>Freeze</span></span><br/>                                             | <span data-ttu-id="11d67-231">Ricevuto immediatamente dopo [*PrepareForSnapshot*](vssgloss-p.md), ma ancora prima della creazione della copia shadow.</span><span class="sxs-lookup"><span data-stu-id="11d67-231">Received immediately after [*PrepareForSnapshot*](vssgloss-p.md), but still before the shadow copy is created.</span></span><br/>                                                                                                      |
| <span data-ttu-id="11d67-232"><span id="Thaw"></span><span id="thaw"></span><span id="THAW"></span>Sblocca</span><span class="sxs-lookup"><span data-stu-id="11d67-232"><span id="Thaw"></span><span id="thaw"></span><span id="THAW"></span>Thaw</span></span><br/>                                                     | <span data-ttu-id="11d67-233">Ricevuto al termine della creazione della copia shadow.</span><span class="sxs-lookup"><span data-stu-id="11d67-233">Received after the shadow copy creation is finished.</span></span><br/>                                                                                                                                                                                                     |
| <span data-ttu-id="11d67-234"><span id="PostSnapshot"></span><span id="postsnapshot"></span><span id="POSTSNAPSHOT"></span>PostSnapshot</span><span class="sxs-lookup"><span data-stu-id="11d67-234"><span id="PostSnapshot"></span><span id="postsnapshot"></span><span id="POSTSNAPSHOT"></span>PostSnapshot</span></span><br/>                     | <span data-ttu-id="11d67-235">Ricevuto dopo il completamento del disgelo, ma prima del completamento di [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) .</span><span class="sxs-lookup"><span data-stu-id="11d67-235">Received after Thaw completes, but before [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) completes.</span></span><br/>                                                                                                                   |
| <span data-ttu-id="11d67-236"><span id="Abort"></span><span id="abort"></span><span id="ABORT"></span>Interruzione</span><span class="sxs-lookup"><span data-stu-id="11d67-236"><span id="Abort"></span><span id="abort"></span><span id="ABORT"></span>Abort</span></span><br/>                                                 | <span data-ttu-id="11d67-237">Ricevuta se trascorre troppo tempo tra [*Freeze*](vssgloss-f.md) e [*scongela*](vssgloss-t.md) o se il richiedente chiama [**IVssBackupComponents:: AbortBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup).</span><span class="sxs-lookup"><span data-stu-id="11d67-237">Received if too much time elapses between [*Freeze*](vssgloss-f.md) and [*Thaw*](vssgloss-t.md) or if the requester calls [**IVssBackupComponents::AbortBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup).</span></span><br/> |
| <span data-ttu-id="11d67-238"><span id="BackupComplete"></span><span id="backupcomplete"></span><span id="BACKUPCOMPLETE"></span>BackupComplete</span><span class="sxs-lookup"><span data-stu-id="11d67-238"><span id="BackupComplete"></span><span id="backupcomplete"></span><span id="BACKUPCOMPLETE"></span>BackupComplete</span></span><br/>             | <span data-ttu-id="11d67-239">Ricevuto quando il richiedente viene chiuso.</span><span class="sxs-lookup"><span data-stu-id="11d67-239">Received when the requester exits.</span></span> <span data-ttu-id="11d67-240">Gli errori non verranno mai segnalati.</span><span class="sxs-lookup"><span data-stu-id="11d67-240">Failures here will never be reported.</span></span><br/>                                                                                                                                                                                 |
| <span data-ttu-id="11d67-241"><span id="PreRestore"></span><span id="prerestore"></span><span id="PRERESTORE"></span>PreRestore</span><span class="sxs-lookup"><span data-stu-id="11d67-241"><span id="PreRestore"></span><span id="prerestore"></span><span id="PRERESTORE"></span>PreRestore</span></span><br/>                             | <span data-ttu-id="11d67-242">Ricevuto quando il richiedente chiama [**IVssBackupComponents::P Rerestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore).</span><span class="sxs-lookup"><span data-stu-id="11d67-242">Received when the requester calls [**IVssBackupComponents::PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore).</span></span><br/>                                                                                                                                           |
| <span data-ttu-id="11d67-243"><span id="PostRestore"></span><span id="postrestore"></span><span id="POSTRESTORE"></span>PostRestore</span><span class="sxs-lookup"><span data-stu-id="11d67-243"><span id="PostRestore"></span><span id="postrestore"></span><span id="POSTRESTORE"></span>PostRestore</span></span><br/>                         | <span data-ttu-id="11d67-244">Ricevuto quando il richiedente chiama [**IVssBackupComponents::P ostrestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-postrestore).</span><span class="sxs-lookup"><span data-stu-id="11d67-244">Received when the requester calls [**IVssBackupComponents::PostRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-postrestore).</span></span><br/>                                                                                                                                         |



 

<span data-ttu-id="11d67-245">Questi errori vengono configurati aggiungendo uno o più sottoelementi FailEvent all'elemento radice TestWriter.</span><span class="sxs-lookup"><span data-stu-id="11d67-245">These failures are configured by adding one or more FailEvent subelements to the TestWriter root element.</span></span> <span data-ttu-id="11d67-246">Esistono due classi di errori che è possibile impostare: riprovabile e non reversibile.</span><span class="sxs-lookup"><span data-stu-id="11d67-246">There are two classes of failures that can be set: retryable and non-retryable.</span></span> <span data-ttu-id="11d67-247">Gli errori rilevabili sono errori che possono scomparire se viene eseguito un nuovo tentativo di eseguire l'intero processo di backup, mentre gli errori non ripetibili sono improbabile.</span><span class="sxs-lookup"><span data-stu-id="11d67-247">Retryable errors are errors that may go away if the entire backup process is retried, while non-retryable errors are unlikely to disappear.</span></span> <span data-ttu-id="11d67-248">Il tipo di errore per l'evento viene scelto in base all'attributo retryable.</span><span class="sxs-lookup"><span data-stu-id="11d67-248">The failure type for the event is chosen based on the retryable attribute.</span></span>

<span data-ttu-id="11d67-249">Di seguito è riportato un esempio di un errore non irreversibile di base:</span><span class="sxs-lookup"><span data-stu-id="11d67-249">Here is an example of a basic non-retryable failure:</span></span>

``` syntax
    <FailEvent writerEvent="Freeze"
               retryable="no" />
```

<span data-ttu-id="11d67-250">Questo esempio provocherà l'esito negativo del writer durante l'evento [*Freeze*](vssgloss-f.md) .</span><span class="sxs-lookup"><span data-stu-id="11d67-250">This example will cause the writer to fail during the [*Freeze*](vssgloss-f.md) event.</span></span> <span data-ttu-id="11d67-251">[**IVssBackupComponents:: GatherWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) segnala l'errore del writer come VSS E WRITERERROR non può essere \_ \_ \_ ritentato.</span><span class="sxs-lookup"><span data-stu-id="11d67-251">[**IVssBackupComponents::GatherWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) will report the writer failure to be VSS\_E\_WRITERERROR\_NONRETRYABLE.</span></span>

<span data-ttu-id="11d67-252">Di seguito è riportato un esempio di errore irreversibile di base:</span><span class="sxs-lookup"><span data-stu-id="11d67-252">Here is an example of a basic retryable error:</span></span>

``` syntax
    <FailEvent writerEvent="Freeze"
               retryable="yes"
               numFailures="2"/>
```

<span data-ttu-id="11d67-253">In questo esempio il writer avrà esito negativo la prima due volte che riceve un evento [*Freeze*](vssgloss-f.md) .</span><span class="sxs-lookup"><span data-stu-id="11d67-253">This example will cause the writer to fail the first two times it receives a [*Freeze*](vssgloss-f.md) event.</span></span> <span data-ttu-id="11d67-254">Dopo le prime due volte, il writer avrà sempre esito positivo.</span><span class="sxs-lookup"><span data-stu-id="11d67-254">After the first two times, the writer will always succeed.</span></span> <span data-ttu-id="11d67-255">L'errore del writer segnalato tramite [**GatherWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) sarà un codice di errore irreversibile casuale.</span><span class="sxs-lookup"><span data-stu-id="11d67-255">The writer failure reported through [**GatherWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) will be a random retryable error code.</span></span>

## <a name="declaring-supported-backup-types"></a><span data-ttu-id="11d67-256">Dichiarazione dei tipi di backup supportati</span><span class="sxs-lookup"><span data-stu-id="11d67-256">Declaring Supported Backup Types</span></span>

<span data-ttu-id="11d67-257">I writer comunicano quali tipi di backup sono supportati tramite la chiamata di [**IVssExamineWriterMetadata:: GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema)del richiedente.</span><span class="sxs-lookup"><span data-stu-id="11d67-257">Writers communicate what backup types are supported through the requester's calling [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span></span> <span data-ttu-id="11d67-258">L'elemento radice TestWriter contiene gli attributi per ogni tipo di backup per indicare il supporto.</span><span class="sxs-lookup"><span data-stu-id="11d67-258">The TestWriter root element contains attributes for each backup type to indicate support.</span></span> <span data-ttu-id="11d67-259">Questi attributi sono supportsCopy, supportsDifferential, supportsIncremental e supportsLog.</span><span class="sxs-lookup"><span data-stu-id="11d67-259">These attributes are supportsCopy, supportsDifferential, supportsIncremental, and supportsLog.</span></span> <span data-ttu-id="11d67-260">Per indicare il supporto per un tipo di backup specifico, impostare l'attributo corrispondente su "Yes".</span><span class="sxs-lookup"><span data-stu-id="11d67-260">To indicate support for a particular backup type, set the corresponding attribute to "yes".</span></span>

<span data-ttu-id="11d67-261">Se il richiedente imposta il tipo di backup su un tipo di backup non supportato dal writer, il writer noterà questo fatto durante [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup), ma in caso contrario funzionerà correttamente.</span><span class="sxs-lookup"><span data-stu-id="11d67-261">If the requester sets the backup type to a backup type that is not supported by the writer, the writer will note this fact during [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup), but otherwise work correctly.</span></span>

## <a name="indicating-the-file-backup-type"></a><span data-ttu-id="11d67-262">Che indica il tipo di backup del file</span><span class="sxs-lookup"><span data-stu-id="11d67-262">Indicating the File Backup Type</span></span>

<span data-ttu-id="11d67-263">Il metodo [**IVssWMFiledesc:: GetBackupTypeMask**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getbackuptypemask) restituisce una maschera di maschera al richiedente che indica il modo in cui deve essere eseguito il backup di un file.</span><span class="sxs-lookup"><span data-stu-id="11d67-263">The [**IVssWMFiledesc::GetBackupTypeMask**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getbackuptypemask) method returns a bitmask to the requester indicating how a file should be backed up.</span></span> <span data-ttu-id="11d67-264">Questa operazione indicherà se un file è obbligatorio o meno durante i tipi specifici di backup e anche se è necessaria una copia shadow durante i tipi specifici di backup.</span><span class="sxs-lookup"><span data-stu-id="11d67-264">This will indicate whether a file is required or not required during specific types of backup, and also whether a shadow copy is required during specific types of backup.</span></span> <span data-ttu-id="11d67-265">I tipi di backup in questa maschera di maschera sono descritti a una lunghezza maggiore nel [ruolo del richiedente del documento nel backup di archivi complessi](requestor-role-in-backing-up-complex-stores.md).</span><span class="sxs-lookup"><span data-stu-id="11d67-265">The backup types in this bitmask are explained at greater length in the document [Requester Role in Backing Up Complex Stores](requestor-role-in-backing-up-complex-stores.md).</span></span>

<span data-ttu-id="11d67-266">Nel writer di test, gli elementi della maschera di maschera vengono specificati impostando gli attributi in ogni elemento ComponentFile.</span><span class="sxs-lookup"><span data-stu-id="11d67-266">In the Test Writer, the elements of this bitmask are specified by setting attributes in each ComponentFile element.</span></span> <span data-ttu-id="11d67-267">Gli attributi fullBackupRequired, diffBackupRequired, incBackupRequired e logBackupRequired specificano quando deve essere eseguito il backup di un file.</span><span class="sxs-lookup"><span data-stu-id="11d67-267">The fullBackupRequired, diffBackupRequired, incBackupRequired, and logBackupRequired attributes specify when a file needs to be backed up.</span></span> <span data-ttu-id="11d67-268">Gli attributi fullSnapshotRequired, diffSnapshotRequired, incSnapshotRequired e logSnapshotRequired specificano quando è necessario eseguire il backup di un file da una copia shadow di un volume e mai dal volume originale.</span><span class="sxs-lookup"><span data-stu-id="11d67-268">The fullSnapshotRequired, diffSnapshotRequired, incSnapshotRequired, and logSnapshotRequired attributes specify when a file must be backed up from a shadow copy of a volume (and never from the original volume).</span></span> <span data-ttu-id="11d67-269">Il valore predefinito per tutti questi valori è "Yes", che indica che un file deve essere sempre sottoposto a backup ed è necessario eseguirne il backup da una copia shadow di un volume.</span><span class="sxs-lookup"><span data-stu-id="11d67-269">The default for all of these values is "yes", indicating that a file must always be backed up and must be backed up from a shadow copy of a volume.</span></span>

## <a name="adding-partial-files"></a><span data-ttu-id="11d67-270">Aggiunta di file parziali</span><span class="sxs-lookup"><span data-stu-id="11d67-270">Adding Partial Files</span></span>

<span data-ttu-id="11d67-271">Durante l'elaborazione di [**DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), un writer ha la possibilità di aggiungere file parziali a ogni componente.</span><span class="sxs-lookup"><span data-stu-id="11d67-271">During the processing of [**DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), a writer has a chance to add partial files to each component.</span></span> <span data-ttu-id="11d67-272">Questi file parziali vengono segnalati con [**IVssComponent:: GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span><span class="sxs-lookup"><span data-stu-id="11d67-272">These partial files are reported using [**IVssComponent::GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span></span> <span data-ttu-id="11d67-273">Il writer di test può essere configurato per aggiungere file parziali specificando sottoelementi PartialFile in un elemento Component.</span><span class="sxs-lookup"><span data-stu-id="11d67-273">The Test Writer can be configured to add partial files by specifying PartialFile subelements in a Component element.</span></span>

<span data-ttu-id="11d67-274">Di seguito è riportato un esempio di elemento Component con due sottoelementi PartialFile:</span><span class="sxs-lookup"><span data-stu-id="11d67-274">Here is an example of a Component element that has two PartialFile subelements:</span></span>

``` syntax
    <Component componentType="filegroup"
               logicalPath=""
               componentName="WriterComponent"
               selectable="yes">
        <ComponentFile path="c:\files"
                       filespec="*.txt"
                       recursive="no"/>
        <PartialFile path="c:\files"
                     filespec="partial.txt"
                     ranges="0:5,100:20" />
        <PartialFile path="c:\files2"
                     filespec="partial.txt"
                     ranges="0:5,100:20" />
    </Component>
```

<span data-ttu-id="11d67-275">Solo i file parziali che corrispondono parzialmente a un ComponentFile esistente (come nel primo file parziale nell'esempio) o i nuovi file parziali che si trovano nello stesso volume di un ComponentFile esistente (come nel secondo file parziale) devono essere specificati in questo modo.</span><span class="sxs-lookup"><span data-stu-id="11d67-275">Only partial files that partially match an existing ComponentFile (as in the first partial file in the example) or new partial files that are on the same volume as an existing ComponentFile (as in the second partial file) should be specified this way.</span></span> <span data-ttu-id="11d67-276">Per questo componente, il richiedente deve eseguire il backup completo di tutti i file corrispondenti a c: \\ files \\ \* . txt, ad eccezione di partial.txt.</span><span class="sxs-lookup"><span data-stu-id="11d67-276">For this component, the requester must fully back up all files matching c:\\files\\\*.txt except for partial.txt.</span></span> <span data-ttu-id="11d67-277">Il richiedente deve quindi eseguire il backup degli intervalli specificati (dove un intervallo è un offset seguito da una lunghezza) per i file c: \\ file \\partial.txt e c: \\ files2 \\partial.txt.</span><span class="sxs-lookup"><span data-stu-id="11d67-277">The requester must then back up the specified ranges (where a range is an offset followed by a length) for the files c:\\files\\partial.txt and c:\\files2\\partial.txt.</span></span>

<span data-ttu-id="11d67-278">Se il writer è configurato per controllare i ripristini dei file, al momento del ripristino verranno controllati solo gli intervalli di backup del file parziale.</span><span class="sxs-lookup"><span data-stu-id="11d67-278">If the writer is configured to check file restores, only the backed-up ranges of the partial file will be checked at restore time.</span></span> <span data-ttu-id="11d67-279">Le modifiche apportate ad altre parti del file non vengono rilevate.</span><span class="sxs-lookup"><span data-stu-id="11d67-279">Modifications to other portions of the file will go unnoticed.</span></span> <span data-ttu-id="11d67-280">Se l'attributo deletePartialFiles dell'elemento radice TestWriter è impostato, i file parziali vengono eliminati dal volume originale immediatamente dopo la creazione della copia shadow.</span><span class="sxs-lookup"><span data-stu-id="11d67-280">If the deletePartialFiles attribute of the TestWriter root element is set, the partial files are deleted from the original volume immediately after the shadow copy is created.</span></span>

## <a name="adding-differenced-files"></a><span data-ttu-id="11d67-281">Aggiunta di file differenziati</span><span class="sxs-lookup"><span data-stu-id="11d67-281">Adding Differenced Files</span></span>

<span data-ttu-id="11d67-282">Durante l'elaborazione di [**DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), un writer può aggiungere file differenziati a ogni componente.</span><span class="sxs-lookup"><span data-stu-id="11d67-282">During the processing of [**DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), a writer can add differenced files to each component.</span></span> <span data-ttu-id="11d67-283">Questi file differenziati vengono segnalati con [**IVssComponent:: GetDifferencedFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfile).</span><span class="sxs-lookup"><span data-stu-id="11d67-283">These differenced files are reported using [**IVssComponent::GetDifferencedFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfile).</span></span> <span data-ttu-id="11d67-284">Il writer di test può essere configurato per aggiungere file differenziati specificando sottoelementi DifferencedFile in un elemento Component.</span><span class="sxs-lookup"><span data-stu-id="11d67-284">The Test Writer can be configured to add differenced files by specifying DifferencedFile subelements in a Component element.</span></span>

<span data-ttu-id="11d67-285">Di seguito è riportato un esempio di elemento Component con due sottoelementi DifferencedFile:</span><span class="sxs-lookup"><span data-stu-id="11d67-285">Here is an example of a Component element that has two DifferencedFile subelements:</span></span>

``` syntax
    <Component componentType="filegroup"
               logicalPath=""
               componentName="WriterComponent"
               selectable="yes">
        <ComponentFile path="c:\files"
                       filespec="*.txt"
                       recursive="no"/>
        <DifferencedFile path="c:\files"
                         filespec="*.txt"
                         year="2007"
                         month="1"
                         day="22"
                         hour="12"
                         minute="44"
                         second="17" />
        <DifferencedFile path="c:\files2"
                         filespec="*.txt"
                         year="2007"
                         month="1"
                         day="22"
                         hour="12"
                         minute="44"
                         second="17" />
    </Component>
```

<span data-ttu-id="11d67-286">Diversamente dai file parziali, i file differenziati non devono mai corrispondere parzialmente a una specifica ComponentFile.</span><span class="sxs-lookup"><span data-stu-id="11d67-286">Unlike partial files, differenced files should never partially match a ComponentFile specification.</span></span> <span data-ttu-id="11d67-287">La specifica del file in un elemento DifferencedFile deve corrispondere esattamente a un ComponentFile (come nel primo file differenziato nell'esempio) o non deve corrispondere a tutti, ma deve trovarsi in un volume a cui si fa riferimento in un ComponentFile (come nel secondo file differenziato).</span><span class="sxs-lookup"><span data-stu-id="11d67-287">The file specification in a DifferencedFile element should either exactly match a ComponentFile (as in the first differenced file in the example) or it should not match it at all, but be on a volume that is referenced in a ComponentFile (as in the second differenced file).</span></span> <span data-ttu-id="11d67-288">I valori di data e ora devono essere relativi al fuso orario locale, ma verranno convertiti in GMT prima di essere segnalati al richiedente.</span><span class="sxs-lookup"><span data-stu-id="11d67-288">The date and time values should be relative to the local time zone, but they will be converted to GMT before being reported to the requester.</span></span> <span data-ttu-id="11d67-289">Nell'esempio, verrà eseguito il backup solo dei file corrispondenti a c: \\ file \\ \* . txt o c: \\ files2 \\ \* . txt che sono stati modificati dopo il 1/22/2003:12:44:17.</span><span class="sxs-lookup"><span data-stu-id="11d67-289">In the example, only files matching c:\\files\\\*.txt or c:\\files2\\\*.txt that have been modified since 1/22/2003:12:44:17 will be backed up.</span></span>

<span data-ttu-id="11d67-290">Se il writer di test è configurato per controllare i ripristini dei file, verranno controllati solo i file modificati per il ripristino.</span><span class="sxs-lookup"><span data-stu-id="11d67-290">If the Test Writer is configured to check file restores, only the modified files will be checked for restore.</span></span> <span data-ttu-id="11d67-291">Se l'attributo deleteDifferencedFiles dell'elemento radice TestWriter è impostato, i file differenziati vengono eliminati dal volume originale immediatamente dopo la creazione della copia shadow.</span><span class="sxs-lookup"><span data-stu-id="11d67-291">If the deleteDifferencedFiles attribute of the TestWriter root element is set, the differenced files are deleted from the original volume immediately after the shadow copy is created.</span></span>

## <a name="new-targets"></a><span data-ttu-id="11d67-292">Nuove destinazioni</span><span class="sxs-lookup"><span data-stu-id="11d67-292">New Targets</span></span>

<span data-ttu-id="11d67-293">Alcuni writer consentono al richiedente di informarli che è stata scelta una nuova località per il ripristino di determinati file.</span><span class="sxs-lookup"><span data-stu-id="11d67-293">Certain writers allow the requester to inform them that a new location has been chosen to restore certain files to.</span></span> <span data-ttu-id="11d67-294">Il writer indica che supporta questa modalità come parte della maschera di maschera restituita da [**IVssExamineWriterMetadata:: GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span><span class="sxs-lookup"><span data-stu-id="11d67-294">The writer indicates that it supports this mode as part of the bitmask returned by [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span></span> <span data-ttu-id="11d67-295">Per impostazione predefinita, il writer di test supporta sempre le nuove destinazioni.</span><span class="sxs-lookup"><span data-stu-id="11d67-295">By default, the Test Writer always supports new targets.</span></span> <span data-ttu-id="11d67-296">Questo supporto può essere disabilitato impostando l'attributo supportsNewTarget nell'elemento radice TestWriter su "No".</span><span class="sxs-lookup"><span data-stu-id="11d67-296">This support can be disabled by setting the supportsNewTarget attribute in the TestWriter root element to "no".</span></span>

<span data-ttu-id="11d67-297">Se un writer supporta nuove destinazioni, il richiedente può informare il writer di nuove destinazioni chiamando [**IVssBackupComponents:: AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget).</span><span class="sxs-lookup"><span data-stu-id="11d67-297">If a writer supports new targets, the requester can inform the writer of new targets by calling [**IVssBackupComponents::AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget).</span></span> <span data-ttu-id="11d67-298">Il writer verificherà quindi il nuovo percorso di destinazione per verificare il ripristino anziché il percorso originale.</span><span class="sxs-lookup"><span data-stu-id="11d67-298">The writer will then check the new target location to verify restore rather than the original location.</span></span>

## <a name="more-information"></a><span data-ttu-id="11d67-299">Altre informazioni</span><span class="sxs-lookup"><span data-stu-id="11d67-299">More Information</span></span>

<span data-ttu-id="11d67-300">Il writer di test supporta più opzioni di configurazione che non sono descritte qui.</span><span class="sxs-lookup"><span data-stu-id="11d67-300">The Test Writer supports more configuration options that are not described here.</span></span> <span data-ttu-id="11d67-301">Lo schema completo per tutte le funzionalità di configurazione del writer di test viene specificato in swriter.xml in `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\x64\vsstools` (per Windows a 64 bit) e `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\vsstools` (per windows a 32 bit).</span><span class="sxs-lookup"><span data-stu-id="11d67-301">The full schema for all of the configuration capabilities of the Test Writer is specified in swriter.xml in `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\x64\vsstools` (for 64-bit Windows) and `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\vsstools` (for 32-bit Windows).</span></span> <span data-ttu-id="11d67-302">Questo file contiene un XML Schema che descrive completamente tutti gli elementi e gli attributi che costituiscono un file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="11d67-302">This file contains an XML schema that completely describes all of the elements and attributes that make up a configuration file.</span></span> <span data-ttu-id="11d67-303">Ogni elemento e ogni attributo in questo file viene commentato con una descrizione che documenta l'uso dell'elemento o dell'attributo.</span><span class="sxs-lookup"><span data-stu-id="11d67-303">Each element and each attribute in this file is commented with a description that documents that element's or attribute's use.</span></span>

 

 




