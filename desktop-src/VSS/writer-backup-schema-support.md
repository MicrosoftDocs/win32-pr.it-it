---
description: Per implementare completamente un backup è necessario partecipare ai writer del sistema.
ms.assetid: ea504f8e-26d9-499e-b3e9-03515b480a75
title: Supporto dello schema di backup del writer
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 593df12f552f206d5d0eedbf8d021b69ef955c6d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104226109"
---
# <a name="writer-backup-schema-support"></a><span data-ttu-id="825b0-103">Supporto dello schema di backup del writer</span><span class="sxs-lookup"><span data-stu-id="825b0-103">Writer Backup Schema Support</span></span>

<span data-ttu-id="825b0-104">Per implementare completamente un backup è necessario partecipare ai writer del sistema.</span><span class="sxs-lookup"><span data-stu-id="825b0-104">To fully implement a backup requires participation of the system's writers.</span></span> <span data-ttu-id="825b0-105">Tipi diversi di backup supportati sono detti schemi e sono indicati da una maschera di bit (OR bit per bit) dei membri dell'enumerazione [**\_ \_ dello schema di backup VSS**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema) .</span><span class="sxs-lookup"><span data-stu-id="825b0-105">Different types of supported backups are referred to as schemas and are indicated by a bitmask (or bitwise OR) of members of the [**VSS\_BACKUP\_SCHEMA**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema) enumeration.</span></span> <span data-ttu-id="825b0-106">Gli schemi validi attualmente supportati sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="825b0-106">The currently supported valid schemas include the following:</span></span>

-   <span data-ttu-id="825b0-107">Schema predefinito: completo (VSS \_ BS non \_ definito): indica che un writer supporta un backup in cui verrà eseguito il backup di tutti i file indipendentemente dalla data dell'ultimo backup.</span><span class="sxs-lookup"><span data-stu-id="825b0-107">Default Schema: Full (VSS\_BS\_UNDEFINED)—indicates that a writer supports a backup where all files will be backed up regardless of their last backup date.</span></span> <span data-ttu-id="825b0-108">La cronologia di backup di ogni file può essere aggiornata dal richiedente e i writer che supportano il \_ valore di enumerazione con timestamp di VSS BS \_ archiviano un timestamp aggiornato con il richiedente.</span><span class="sxs-lookup"><span data-stu-id="825b0-108">The backup history of each file can be updated by the requester, and writers supporting the VSS\_BS\_TIMESTAMPED enumeration value, it will store an updated time stamp with the requester.</span></span> <span data-ttu-id="825b0-109">Questo schema di backup può essere utilizzato come base per un backup incrementale o differenziale.</span><span class="sxs-lookup"><span data-stu-id="825b0-109">This backup scheme can be used as the basis of an incremental or differential backup.</span></span>

    <span data-ttu-id="825b0-110">Il ripristino di un backup completo richiede una sola immagine di backup.</span><span class="sxs-lookup"><span data-stu-id="825b0-110">Restoring a full backup requires only a single backup image.</span></span>

-   <span data-ttu-id="825b0-111">Copia backup ( \_ \_ copia copia shadow del volume), come \_ lo \_ schema di backup completo VSS BS, indica che un writer supporta un backup in cui verrà eseguito il backup di tutti i file indipendentemente dalla data dell'ultimo backup.</span><span class="sxs-lookup"><span data-stu-id="825b0-111">Copy Backup (VSS\_BS\_COPY)—like the VSS\_BS\_FULL backup schema, indicates that a writer supports a backup where all files will be backed up regardless of their last backup date.</span></span> <span data-ttu-id="825b0-112">Tuttavia, la cronologia di backup di ogni file non verrà aggiornata dal richiedente o dal writer e questo tipo di backup non può essere utilizzato come base per un backup incrementale o differenziale.</span><span class="sxs-lookup"><span data-stu-id="825b0-112">However, the backup history of each file will not be updated by either requester or writer, and this sort of backup cannot be used as the basis of an incremental or differential backup.</span></span>
-   <span data-ttu-id="825b0-113">File di log ( \_ log VSS BS \_ ): è necessario eseguire il backup solo dei file di log del writer.</span><span class="sxs-lookup"><span data-stu-id="825b0-113">Log File (VSS\_BS\_LOG)—only a writer's log files are to be backed up.</span></span> <span data-ttu-id="825b0-114">È necessario che un writer abbia aggiunto almeno un file ad almeno un componente usando il metodo [**IVssCreateWriterMetadata:: AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles) .</span><span class="sxs-lookup"><span data-stu-id="825b0-114">This requires a writer to have added at least one file to at least one component using the [**IVssCreateWriterMetadata::AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles) method.</span></span> <span data-ttu-id="825b0-115">Questo tipo di backup è specifico per VSS.</span><span class="sxs-lookup"><span data-stu-id="825b0-115">This backup type is specific to VSS.</span></span>
-   <span data-ttu-id="825b0-116">Percorsi di ripristino personalizzati (il writer del servizio Copia Shadow \_ \_ del volume \_ supporta \_ \_ la nuova destinazione): indica il supporto del writer per un richiedente che cambia, in fase di ripristino, in cui vengono ripristinati i file.</span><span class="sxs-lookup"><span data-stu-id="825b0-116">Custom Restore Locations (VSS\_BS\_WRITER\_SUPPORTS\_NEW\_TARGET)—indicates writer support for a requester changing, at restore time, where its files are restored.</span></span> <span data-ttu-id="825b0-117">Questo significa che un writer è stato codificato per verificare la rilocazione (usando [**IVssComponent:: GetNewTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getnewtarget)) e ha la capacità di utilizzare i file spostati.</span><span class="sxs-lookup"><span data-stu-id="825b0-117">This means that a writer has been coded to check for such relocation (using [**IVssComponent::GetNewTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getnewtarget)), and has the capacity for working with relocated files.</span></span>
-   <span data-ttu-id="825b0-118">Restore with Move (il writer del servizio Copia Shadow \_ \_ del volume supporta il \_ \_ ripristino \_ con \_ lo spostamento): indica che il writer supporta l'esecuzione di più istanze del writer con lo stesso ID di classe e supporta un richiedente che sposta un componente in un'istanza di writer diversa in fase di ripristino.</span><span class="sxs-lookup"><span data-stu-id="825b0-118">Restore with Move (VSS\_BS\_WRITER\_SUPPORTS\_RESTORE\_WITH\_MOVE)—indicates that the writer supports running multiple writer instances with the same class ID, and it supports a requester moving a component to a different writer instance at restore time.</span></span> <span data-ttu-id="825b0-119">L'istanza del writer viene specificata utilizzando un nome di istanza del writer persistente passato come parametro *wszWriterInstanceName* al metodo [**CVssWriter:: Initialize**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-initialize) .</span><span class="sxs-lookup"><span data-stu-id="825b0-119">The writer instance is specified by using a persistent writer instance name that was passed as the *wszWriterInstanceName* parameter to the [**CVssWriter::Initialize**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-initialize) method.</span></span> <span data-ttu-id="825b0-120">Un richiedente può ottenere il nome dell'istanza del writer usando [**IVssExamineWriterMetadataEx:: GetIdentityEx**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadataex-getidentityex) e spostare i componenti durante il ripristino usando [**IVssBackupComponentsEx:: SetSelectedForRestoreEx**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex-setselectedforrestoreex).</span><span class="sxs-lookup"><span data-stu-id="825b0-120">A requester can obtain the writer instance name using [**IVssExamineWriterMetadataEx::GetIdentityEx**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadataex-getidentityex) and move components during restore using [**IVssBackupComponentsEx::SetSelectedForRestoreEx**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex-setselectedforrestoreex).</span></span>

    <span data-ttu-id="825b0-121">**Windows Server 2003 e Windows XP:** Questo valore non è supportato fino a Windows Server 2003 con Service Pack 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="825b0-121">**Windows Server 2003 and Windows XP:** This value is not supported until Windows Server 2003 with Service Pack 1 (SP1).</span></span>

-   <span data-ttu-id="825b0-122">Incremental (VSS \_ BS \_ incrementale): indica che il writer usa l'API VSS per aiutare il richiedente, assicurando che solo i file che sono stati modificati o aggiunti dopo l'ultimo backup completo o incrementale vengano copiati in un supporto di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="825b0-122">Incremental (VSS\_BS\_INCREMENTAL)—indicates that the writer uses the VSS API to help the requester, ensuring that only files that have been changed or added since the last full or incremental backup are to be copied to a storage medium.</span></span>

    <span data-ttu-id="825b0-123">Il ripristino di un backup incrementale richiede l'immagine di backup originale e tutte le immagini di backup incrementali effettuate dal backup iniziale.</span><span class="sxs-lookup"><span data-stu-id="825b0-123">Restoring an incremental backup requires the original backup image and all incremental backup images made since the initial backup.</span></span>

-   <span data-ttu-id="825b0-124">Differenziale (VSS \_ BS \_ differenziale): indica che il writer usa l'API VSS per consentire al richiedente di assicurarsi che solo i file che sono stati modificati o aggiunti dopo l'ultimo backup completo vengano copiati in un supporto di archiviazione. tutte le informazioni sul backup intermedio verranno ignorate.</span><span class="sxs-lookup"><span data-stu-id="825b0-124">Differential (VSS\_BS\_DIFFERENTIAL)—indicates that the writer uses the VSS API to help the requester ensure that only files that have been changed or added since the last full backup are to be copied to a storage medium; all intermediate backup information is ignored.</span></span>

    <span data-ttu-id="825b0-125">Il ripristino di un backup differenziale richiede l'immagine di backup originale e l'immagine di backup differenziale più recente eseguita dopo l'ultimo backup completo.</span><span class="sxs-lookup"><span data-stu-id="825b0-125">Restoring a differential backup requires the original backup image and the most recent differential backup image made since the last full backup.</span></span>

-   <span data-ttu-id="825b0-126">Incrementale/differenziale: supporto per l'indicatore di data e ora (VSS \_ BS \_ con timestamp): indica che un writer supporta l'utilizzo del meccanismo di timestamp VSS per includere i file nelle operazioni incrementali o differenziali.</span><span class="sxs-lookup"><span data-stu-id="825b0-126">Incremental/Differential: Time Stamping Support (VSS\_BS\_TIMESTAMPED)—indicates that a writer supports using the VSS time-stamp mechanism to include files in incremental or differential operations.</span></span> <span data-ttu-id="825b0-127">Al momento del backup, il writer deve archiviare il timbro di backup di un [*set di file*](vssgloss-f.md) con il metodo [**IVssComponent:: SetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupstamp) e in Restore recuperarlo con [**IVssComponent:: GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp).</span><span class="sxs-lookup"><span data-stu-id="825b0-127">At backup, the writer must store a [*file set's*](vssgloss-f.md) backup stamp with the [**IVssComponent::SetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupstamp) method, and at restore retrieve it with [**IVssComponent::GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp).</span></span>
-   <span data-ttu-id="825b0-128">Incrementale/differenziale: ora del supporto dell'Ultima modifica \_ ( \_ Ultima modifica di VSS BS): \_ indica che durante l'implementazione di backup incrementali o differenziali con file differenziati, un writer può fornire le informazioni sull'ora dell'Ultima modifica in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="825b0-128">Incremental/Differential: Time of Last Modification Support (VSS\_BS\_LAST\_MODIFY)—indicates that when implementing incremental or differential backups with differenced files, a writer can provide last modification time information independently.</span></span> <span data-ttu-id="825b0-129">Queste informazioni possono essere fornite a un richiedente tramite il metodo [**IVssComponent:: AddDifferencedFilesByLastModifyTime**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddifferencedfilesbylastmodifytime) .</span><span class="sxs-lookup"><span data-stu-id="825b0-129">This information can be provided to a requester via the [**IVssComponent::AddDifferencedFilesByLastModifyTime**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddifferencedfilesbylastmodifytime) method.</span></span>
-   <span data-ttu-id="825b0-130">Incrementale/differenziale: limitazione del supporto (backup \_ \_ differenziale esclusivo VSS BS \_ ): \_ indica il supporto del writer per gli schemi di backup differenziali o incrementali, ma solo esclusivamente: ad esempio, non è possibile seguire un backup incrementale con un backup differenziale.</span><span class="sxs-lookup"><span data-stu-id="825b0-130">Incremental/Differential: Support Limitation (VSS\_BS\_EXCLUSIVE\_INCREMENTAL\_DIFFERENTIAL)—indicates writer support of both differential or increment backup schemas, but only exclusively: for example, you cannot follow an incremental backup with a differential backup.</span></span>
-   <span data-ttu-id="825b0-131">Stato del sistema indipendente ( \_ \_ stato del sistema indipendente VSS BS \_ \_ ): indica che il writer supporta il backup dei dati che fanno parte dello stato del sistema, ma di cui è anche possibile eseguire il backup indipendentemente dallo stato del sistema.</span><span class="sxs-lookup"><span data-stu-id="825b0-131">Independent System State (VSS\_BS\_INDEPENDENT\_SYSTEM\_STATE)—indicates that the writer supports backing up data that is part of the system state, but that can also be backed up independently of the system state.</span></span>

    <span data-ttu-id="825b0-132">**Windows Server 2003 e Windows XP:** Questo valore non è supportato fino a Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="825b0-132">**Windows Server 2003 and Windows XP:** This value is not supported until Windows Vista.</span></span>

-   <span data-ttu-id="825b0-133">Roll-Forward Restore (VSS \_ BS \_ rollforward \_ Restore)-indica che il writer supporta un richiedente che imposta un punto di ripristino di rollforward tramite [**IVssBackupComponentsEx2:: SetRollForward**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-setrollforward).</span><span class="sxs-lookup"><span data-stu-id="825b0-133">Roll-Forward Restore (VSS\_BS\_ROLLFORWARD\_RESTORE)—indicates that the writer supports a requester setting a roll-forward restore point using [**IVssBackupComponentsEx2::SetRollForward**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-setrollforward).</span></span>

    <span data-ttu-id="825b0-134">**Windows Server 2003 e Windows XP:** Questo valore non è supportato fino a Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="825b0-134">**Windows Server 2003 and Windows XP:** This value is not supported until Windows Vista.</span></span>

-   <span data-ttu-id="825b0-135">Restore Rename (VSS \_ BS \_ Restore \_ Rename)-indica che il writer supporta un richiedente che imposta un nome di ripristino usando [**IVssBackupComponentsEx2:: serestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-setrestorename).</span><span class="sxs-lookup"><span data-stu-id="825b0-135">Restore Rename (VSS\_BS\_RESTORE\_RENAME)—indicates that the writer supports a requester setting a restore name using [**IVssBackupComponentsEx2::SetRestoreName**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-setrestorename).</span></span>

    <span data-ttu-id="825b0-136">**Windows Server 2003 e Windows XP:** Questo valore non è supportato fino a Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="825b0-136">**Windows Server 2003 and Windows XP:** This value is not supported until Windows Vista.</span></span>

-   <span data-ttu-id="825b0-137">Ripristino autorevole (VSS \_ BS \_ autorevole \_ Restore)-indica che il writer supporta l'impostazione di un ripristino autorevole per un richiedente tramite [**IVssBackupComponentsEx2:: SetAuthoritativeRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-setauthoritativerestore).</span><span class="sxs-lookup"><span data-stu-id="825b0-137">Authoritative Restore (VSS\_BS\_AUTHORITATIVE\_RESTORE)—indicates that the writer supports a requester setting authoritative restore using [**IVssBackupComponentsEx2::SetAuthoritativeRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-setauthoritativerestore).</span></span>

<span data-ttu-id="825b0-138">I writer impostano gli schemi usando il metodo [**IVssCreateWriterMetadata:: SetBackupSchema**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setbackupschema) e un richiedente ottiene lo schema di ogni writer chiamando [**IVssExamineWriterMetadata:: GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span><span class="sxs-lookup"><span data-stu-id="825b0-138">Writers set their schemas using the [**IVssCreateWriterMetadata::SetBackupSchema**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setbackupschema) method, and a requester obtains each writer's schema by calling [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span></span>

 

 



