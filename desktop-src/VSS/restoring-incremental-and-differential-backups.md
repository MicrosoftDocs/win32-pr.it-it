---
description: Il ripristino di un backup incrementale o differenziale in VSS non è significativamente diverso rispetto a qualsiasi altra operazione di ripristino VSS.
ms.assetid: 67143f6f-0bb8-4740-9289-8bbfeb7caadf
title: Ripristino di backup incrementali e differenziali
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 639919ea24f12fbc036116bd89b1630321cbae54
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104528704"
---
# <a name="restoring-incremental-and-differential-backups"></a><span data-ttu-id="5f01e-103">Ripristino di backup incrementali e differenziali</span><span class="sxs-lookup"><span data-stu-id="5f01e-103">Restoring Incremental and Differential Backups</span></span>

<span data-ttu-id="5f01e-104">Il ripristino di un backup incrementale o differenziale in VSS non è significativamente diverso rispetto a qualsiasi altra operazione di ripristino VSS.</span><span class="sxs-lookup"><span data-stu-id="5f01e-104">Restoring an incremental or differential backup under VSS is not significantly different from any other VSS restore operation.</span></span>

<span data-ttu-id="5f01e-105">Un writer può modificare le destinazioni di ripristino o la destinazione diretta della richiesta e un richiedente deve gestire i mapping del percorso alternativo e le nuove destinazioni, come per qualsiasi altro ripristino.</span><span class="sxs-lookup"><span data-stu-id="5f01e-105">A writer can modify restore targets or request directed targeting, and a requester must handle alternate location mappings and new targets, just as with any other restore.</span></span> <span data-ttu-id="5f01e-106">Esistono tuttavia due problemi significativi da tenere presente durante la gestione del ripristino di un backup incrementale o differenziale, ovvero ripristini aggiuntivi e timbri di backup.</span><span class="sxs-lookup"><span data-stu-id="5f01e-106">There are, however, two significant issues to be aware of in handling the restore of an incremental or differential backup: additional restores and backup stamps.</span></span>

## <a name="additional-restores"></a><span data-ttu-id="5f01e-107">Ripristini aggiuntivi</span><span class="sxs-lookup"><span data-stu-id="5f01e-107">Additional Restores</span></span>

<span data-ttu-id="5f01e-108">Il primo problema è quello di ripristini aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="5f01e-108">The first issue is that of additional restores.</span></span> <span data-ttu-id="5f01e-109">Un operatore di backup potrebbe dover eseguire diverse operazioni di ripristino utilizzando come origine un supporto di backup incrementale o differenziale iniziale completo e successivo.</span><span class="sxs-lookup"><span data-stu-id="5f01e-109">A backup operator may need to run several restore operations using an initial full and subsequent incremental or differential backup media as a source.</span></span>

<span data-ttu-id="5f01e-110">Alcuni writer, in genere come parte della gestione di un evento [*PostRestore*](vssgloss-p.md) con [**CVssWriter:: OnPostRestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostrestore), usano i file ripristinati per eseguire aggiornamenti dei dati attualmente su disco.</span><span class="sxs-lookup"><span data-stu-id="5f01e-110">Some writers, typically as part of their handling of a [*PostRestore*](vssgloss-p.md) event using [**CVssWriter::OnPostRestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostrestore), use restored files to perform updates of data currently on disk.</span></span> <span data-ttu-id="5f01e-111">Per alcuni di questi writer non è efficiente, o pericoloso, per aggiornare ripetutamente i dati su disco dai file ripristinati.</span><span class="sxs-lookup"><span data-stu-id="5f01e-111">For some of these writers it is inefficient—or dangerous—to repeatedly update on-disk data from restored files.</span></span>

<span data-ttu-id="5f01e-112">È pertanto importante che le applicazioni di backup indichino quando un componente o un set di componenti può richiedere ripristini successivi chiamando [**IVssBackupComponents:: SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores).</span><span class="sxs-lookup"><span data-stu-id="5f01e-112">Therefore, it is important that backup applications indicate when a component or component set may require subsequent restores by calling [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores).</span></span>

<span data-ttu-id="5f01e-113">Un writer chiama [**IVssComponent:: GetAdditionalRestores**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) per determinare se l'operatore di backup ha pianificato un maggior numero di ripristini del componente o del set di componenti.</span><span class="sxs-lookup"><span data-stu-id="5f01e-113">A writer would call [**IVssComponent::GetAdditionalRestores**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) to determine whether the backup operator planned more restores of the component or component set.</span></span>

<span data-ttu-id="5f01e-114">Se il richiedente non ha chiamato [**IVssBackupComponents:: SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores), [**IVssComponent:: GetAdditionalRestores**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) restituisce false e il writer può eseguire qualsiasi elaborazione successiva al ripristino necessaria.</span><span class="sxs-lookup"><span data-stu-id="5f01e-114">If the requester had not called [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores), then [**IVssComponent::GetAdditionalRestores**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) returns false, and the writer can perform any post-restore processing it needs to.</span></span>

<span data-ttu-id="5f01e-115">Se è stato chiamato [**IVssBackupComponents:: SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores) , [**IVssComponent:: GetAdditionalRestores**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) restituisce **true** e un writer deve decidere come gestire le operazioni di post-ripristino. ad esempio, il writer può scegliere di non aggiornare i dati su disco.</span><span class="sxs-lookup"><span data-stu-id="5f01e-115">If [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores) had been called, then [**IVssComponent::GetAdditionalRestores**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) returns **true**, and a writer should decide how to handle post-restore operations—for instance, the writer may choose not to update its on-disk data.</span></span>

## <a name="backup-stamps"></a><span data-ttu-id="5f01e-116">Timbri di backup</span><span class="sxs-lookup"><span data-stu-id="5f01e-116">Backup Stamps</span></span>

<span data-ttu-id="5f01e-117">Nell'ambito dell'operazione di backup completo precedente, un writer potrebbe avere archiviato un timbro di backup nel documento relativo ai componenti di backup del richiedente.</span><span class="sxs-lookup"><span data-stu-id="5f01e-117">As part of the previous full backup operation, a writer may have stored a backup stamp in the requester's Backup Components Document.</span></span>

<span data-ttu-id="5f01e-118">L'indicatore di backup viene archiviato come stringa e il formato e le informazioni non sono intelligibili per il richiedente.</span><span class="sxs-lookup"><span data-stu-id="5f01e-118">The backup stamp is stored as a string, and its format and information are not intelligible to the requester.</span></span> <span data-ttu-id="5f01e-119">Pertanto, il richiedente non è in grado di utilizzare direttamente le informazioni sul timbro di backup.</span><span class="sxs-lookup"><span data-stu-id="5f01e-119">Therefore, the requester cannot make direct use of the backup stamp information.</span></span>

<span data-ttu-id="5f01e-120">L'attività consiste invece nel rendere le informazioni disponibili al writer, chiamando il metodo [**IVssBackupComponents:: SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) prima della generazione di un evento [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) per un backup incrementale.</span><span class="sxs-lookup"><span data-stu-id="5f01e-120">Instead, its task is to make that information available to the writer, by calling the [**IVssBackupComponents::SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) method prior to the generation of a [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) event for an incremental backup.</span></span>

<span data-ttu-id="5f01e-121">Il richiedente esegue questa operazione in base al componente.</span><span class="sxs-lookup"><span data-stu-id="5f01e-121">The requester does this on a component-by-component basis.</span></span> <span data-ttu-id="5f01e-122">Un richiedente esamina le informazioni del timbro di backup del componente o del set di componenti archiviati usando [**IVssComponent:: GetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getbackupstamp).</span><span class="sxs-lookup"><span data-stu-id="5f01e-122">A requester examines stored component or component set backup stamp information using [**IVssComponent::GetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getbackupstamp).</span></span>

<span data-ttu-id="5f01e-123">Se le informazioni sul timbro di backup sono appropriate per il tipo di ripristino, il richiedente viene reso disponibile come timestamp dell'ultimo backup di un componente con il metodo [**IVssBackupComponents:: SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) .</span><span class="sxs-lookup"><span data-stu-id="5f01e-123">If backup stamp information is appropriate to the type of restore the requester is undertaking, it makes it available as the time stamp of the last backup of a component with the [**IVssBackupComponents::SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) method.</span></span>

<span data-ttu-id="5f01e-124">Un writer recupera le informazioni sull'indicatore di backup usando [**IVssComponent:: GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp).</span><span class="sxs-lookup"><span data-stu-id="5f01e-124">A writer recovers the backup stamp information using [**IVssComponent::GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp).</span></span> <span data-ttu-id="5f01e-125">Un writer di questa classe ha generato l'indicatore di backup iniziale, quindi il writer è in grado di decodificare questo timbro e di usare le informazioni.</span><span class="sxs-lookup"><span data-stu-id="5f01e-125">A writer of this class generated the initial backup stamp, so the writer is able to decode this stamp and use the information.</span></span> <span data-ttu-id="5f01e-126">In base a questo, durante la gestione di un evento di [**preripristino**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) , un writer può scegliere di eseguire azioni quali la modifica delle destinazioni di ripristino o la richiesta di destinazione diretta.</span><span class="sxs-lookup"><span data-stu-id="5f01e-126">Based on this, while handling a [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) event, a writer may choose to take actions such as changing restore targets or requesting directed targeting.</span></span>

 

 



