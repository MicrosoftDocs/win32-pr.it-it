---
description: 'VSS consente la presenza di molte copie shadow in una sola volta, ma consente solo la creazione di un set di copie shadow in corso tra la chiamata a IVssBackupComponents:: StartSnapshotSet e la restituzione dalla chiamata a IVssBackupComponents::D oSnapshotSet.'
ms.assetid: 26657fc2-180f-4ebb-820c-2159e7fe7584
title: Gestione degli errori nei provider di copie shadow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f5f040526f63a0fe57fc5a49ac903e8b60b76646
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106318587"
---
# <a name="error-handling-in-shadow-copy-providers"></a><span data-ttu-id="7abc9-103">Gestione degli errori nei provider di copie shadow</span><span class="sxs-lookup"><span data-stu-id="7abc9-103">Error Handling in Shadow Copy Providers</span></span>

<span data-ttu-id="7abc9-104">VSS consente la presenza di molte copie shadow in una sola volta, ma consente solo la creazione di un set di copie shadow in corso tra la chiamata a [**IVssBackupComponents:: StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset) e la restituzione dalla chiamata a [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span><span class="sxs-lookup"><span data-stu-id="7abc9-104">VSS allows many shadow copies to exist at once, but it only allows one shadow copy set creation to be in-progress between the call to [**IVssBackupComponents::StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset) and the return from the call to [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span></span>

## <a name="no-partial-commit"></a><span data-ttu-id="7abc9-105">Nessun commit parziale</span><span class="sxs-lookup"><span data-stu-id="7abc9-105">No Partial Commit</span></span>

<span data-ttu-id="7abc9-106">Se un provider non riesce a eseguire una copia shadow su un volume o un LUN nel set di copie shadow, la creazione dell'intero set di copie shadow ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="7abc9-106">If any provider fails a shadow copy on any volume or LUN in the shadow copy set, then the creation of the entire shadow copy set fails.</span></span> <span data-ttu-id="7abc9-107">Questo si verifica per motivi strutturali.</span><span class="sxs-lookup"><span data-stu-id="7abc9-107">This is by design.</span></span> <span data-ttu-id="7abc9-108">Questa progettazione semplifica i problemi comportamentali associati alla semantica degli errori parziali e mantiene un temporizzato coerente in tutte le copie shadow nel set.</span><span class="sxs-lookup"><span data-stu-id="7abc9-108">This design simplifies the behavioral issues associated with partial failure semantics and maintains a consistent point-in-time across all shadow copies in the set.</span></span>

## <a name="reporting-fault-conditions"></a><span data-ttu-id="7abc9-109">Segnalazione di condizioni di errore</span><span class="sxs-lookup"><span data-stu-id="7abc9-109">Reporting Fault Conditions</span></span>

<span data-ttu-id="7abc9-110">Se si verifica un errore del provider o una condizione di errore, il provider deve registrare un errore nel registro eventi dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="7abc9-110">If a provider error or fault condition occurs, the provider must log an error to the Application event log.</span></span> <span data-ttu-id="7abc9-111">Sono inclusi, tra gli altri, gli eventuali errori specifici del provider durante la creazione o l'importazione di un set di copie shadow o un errore di allocazione delle risorse per la copia shadow di copia in scrittura dopo la creazione.</span><span class="sxs-lookup"><span data-stu-id="7abc9-111">This includes, but is not limited to, any provider-specific errors when creating or importing a Shadow Copy Set, or resource allocation failure for copy-on-write shadow copy after creation.</span></span> <span data-ttu-id="7abc9-112">Questa registrazione non deve essere eseguita nel momento in cui i volumi nel set di copie shadow sono in uno stato bloccato.</span><span class="sxs-lookup"><span data-stu-id="7abc9-112">This logging must not take place during the time the volumes in the shadow copy set are in a frozen state.</span></span>

## <a name="valid-provider-return-values"></a><span data-ttu-id="7abc9-113">Valori restituiti del provider validi</span><span class="sxs-lookup"><span data-stu-id="7abc9-113">Valid Provider Return Values</span></span>

<span data-ttu-id="7abc9-114">Nella tabella seguente sono elencati i codici restituiti validi per i metodi del provider e i relativi significati.</span><span class="sxs-lookup"><span data-stu-id="7abc9-114">The following table lists the valid return codes for provider methods and their meanings.</span></span>



| <span data-ttu-id="7abc9-115">Valore</span><span class="sxs-lookup"><span data-stu-id="7abc9-115">Value</span></span>                                                                                                                                                                              | <span data-ttu-id="7abc9-116">Descrizione</span><span class="sxs-lookup"><span data-stu-id="7abc9-116">Description</span></span>                                                                                                                                                                                                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="7abc9-117"><span id="S_OK"></span><span id="s_ok"></span>\_OK</span><span class="sxs-lookup"><span data-stu-id="7abc9-117"><span id="S_OK"></span><span id="s_ok"></span>S\_OK</span></span><br/>                                                                                                                     | <span data-ttu-id="7abc9-118">Il metodo è stato eseguito correttamente.</span><span class="sxs-lookup"><span data-stu-id="7abc9-118">The method was successful.</span></span><br/>                                                                                                                                                                                                                  |
| <span data-ttu-id="7abc9-119"><span id="E_OUTOFMEMORY"></span><span id="e_outofmemory"></span>E \_ OutOfMemory</span><span class="sxs-lookup"><span data-stu-id="7abc9-119"><span id="E_OUTOFMEMORY"></span><span id="e_outofmemory"></span>E\_OUTOFMEMORY</span></span><br/>                                                                                          | <span data-ttu-id="7abc9-120">Il provider ha esaurito la memoria o altre risorse di sistema.</span><span class="sxs-lookup"><span data-stu-id="7abc9-120">The provider is out of memory or other system resources.</span></span><br/>                                                                                                                                                                                    |
| <span data-ttu-id="7abc9-121"><span id="E_INVALIDARG"></span><span id="e_invalidarg"></span>E \_ INVALIDARG</span><span class="sxs-lookup"><span data-stu-id="7abc9-121"><span id="E_INVALIDARG"></span><span id="e_invalidarg"></span>E\_INVALIDARG</span></span><br/>                                                                                             | <span data-ttu-id="7abc9-122">Uno dei valori di parametro non è valido.</span><span class="sxs-lookup"><span data-stu-id="7abc9-122">One of the parameter values is not valid.</span></span><br/>                                                                                                                                                                                                   |
| <span data-ttu-id="7abc9-123"><span id="E_ACCESSDENIED"></span><span id="e_accessdenied"></span>E \_ AccessDenied</span><span class="sxs-lookup"><span data-stu-id="7abc9-123"><span id="E_ACCESSDENIED"></span><span id="e_accessdenied"></span>E\_ACCESSDENIED</span></span><br/>                                                                                       | <span data-ttu-id="7abc9-124">Un client senza privilegi ha tentato di chiamare il provider.</span><span class="sxs-lookup"><span data-stu-id="7abc9-124">A non-privileged client has tried to call into the provider.</span></span><br/>                                                                                                                                                                                |
| <span data-ttu-id="7abc9-125"><span id="VSS_E_BAD_STATE"></span><span id="vss_e_bad_state"></span>\_stato non \_ valido VSS E \_</span><span class="sxs-lookup"><span data-stu-id="7abc9-125"><span id="VSS_E_BAD_STATE"></span><span id="vss_e_bad_state"></span>VSS\_E\_BAD\_STATE</span></span><br/>                                                                                  | <span data-ttu-id="7abc9-126">Nessun provider supporta l'operazione richiesta oppure non è possibile eseguire l'operazione sull'oggetto perché lo stato dell'oggetto non è corretto.</span><span class="sxs-lookup"><span data-stu-id="7abc9-126">Either no provider supports the requested operation, or the operation cannot be performed on the object because the object is not in the correct state.</span></span><br/>                                                                                     |
| <span data-ttu-id="7abc9-127"><span id="VSS_E_OBJECT_NOT_FOUND"></span><span id="vss_e_object_not_found"></span>\_oggetto VSS \_ E \_ non \_ trovato</span><span class="sxs-lookup"><span data-stu-id="7abc9-127"><span id="VSS_E_OBJECT_NOT_FOUND"></span><span id="vss_e_object_not_found"></span>VSS\_E\_OBJECT\_NOT\_FOUND</span></span><br/>                                                            | <span data-ttu-id="7abc9-128">Un parametro fa riferimento a un oggetto non trovato, ad esempio un ID copia shadow, un ID set di copie shadow o un volume.</span><span class="sxs-lookup"><span data-stu-id="7abc9-128">A parameter refers to an object that was not found (such as a shadow copy ID, shadow copy set ID, or volume.)</span></span><br/>                                                                                                                               |
| <span data-ttu-id="7abc9-129"><span id="VSS_E_INSUFFICIENT_STORAGE"></span><span id="vss_e_insufficient_storage"></span>\_archiviazione VSS E \_ insufficiente \_</span><span class="sxs-lookup"><span data-stu-id="7abc9-129"><span id="VSS_E_INSUFFICIENT_STORAGE"></span><span id="vss_e_insufficient_storage"></span>VSS\_E\_INSUFFICIENT\_STORAGE</span></span><br/>                                                 | <span data-ttu-id="7abc9-130">Il provider non è in grado di eseguire l'operazione perché lo spazio su disco è insufficiente.</span><span class="sxs-lookup"><span data-stu-id="7abc9-130">The provider cannot perform the operation because there is not enough disk space.</span></span><br/>                                                                                                                                                           |
| <span data-ttu-id="7abc9-131"><span id="VSS_E_VOLUME_NOT_SUPPORTED"></span><span id="vss_e_volume_not_supported"></span>\_Volume VSS \_ E \_ non \_ supportato</span><span class="sxs-lookup"><span data-stu-id="7abc9-131"><span id="VSS_E_VOLUME_NOT_SUPPORTED"></span><span id="vss_e_volume_not_supported"></span>VSS\_E\_VOLUME\_NOT\_SUPPORTED</span></span><br/>                                                | <span data-ttu-id="7abc9-132">Nessun provider del computer supporta l'operazione richiesta nel volume.</span><span class="sxs-lookup"><span data-stu-id="7abc9-132">No provider on this computer supports the requested operation on the volume.</span></span><br/>                                                                                                                                                                |
| <span data-ttu-id="7abc9-133"><span id="VSS_E_VOLUME_NOT_SUPPORTED_BY_PROVIDER"></span><span id="vss_e_volume_not_supported_by_provider"></span>\_Volume VSS \_ E \_ non \_ supportato \_ dal \_ provider</span><span class="sxs-lookup"><span data-stu-id="7abc9-133"><span id="VSS_E_VOLUME_NOT_SUPPORTED_BY_PROVIDER"></span><span id="vss_e_volume_not_supported_by_provider"></span>VSS\_E\_VOLUME\_NOT\_SUPPORTED\_BY\_PROVIDER</span></span><br/>          | <span data-ttu-id="7abc9-134">Il provider non supporta il volume.</span><span class="sxs-lookup"><span data-stu-id="7abc9-134">The provider does not support the volume.</span></span><br/>                                                                                                                                                                                                   |
| <span data-ttu-id="7abc9-135"><span id="VSS_E_MAXIMUM_NUMBER_OF_SNAPSHOTS_REACHED"></span><span id="vss_e_maximum_number_of_snapshots_reached"></span>\_ \_ \_ numero massimo \_ di snapshot VSS E \_ \_ raggiunto</span><span class="sxs-lookup"><span data-stu-id="7abc9-135"><span id="VSS_E_MAXIMUM_NUMBER_OF_SNAPSHOTS_REACHED"></span><span id="vss_e_maximum_number_of_snapshots_reached"></span>VSS\_E\_MAXIMUM\_NUMBER\_OF\_SNAPSHOTS\_REACHED</span></span><br/> | <span data-ttu-id="7abc9-136">Il provider ha raggiunto il numero massimo di copie shadow che può supportare.</span><span class="sxs-lookup"><span data-stu-id="7abc9-136">The provider has reached the maximum number of shadow copies that it can support.</span></span><br/>                                                                                                                                                           |
| <span data-ttu-id="7abc9-137"><span id="VSS_E_PROVIDER_VETO"></span><span id="vss_e_provider_veto"></span>\_veto del \_ provider VSS E \_</span><span class="sxs-lookup"><span data-stu-id="7abc9-137"><span id="VSS_E_PROVIDER_VETO"></span><span id="vss_e_provider_veto"></span>VSS\_E\_PROVIDER\_VETO</span></span><br/>                                                                      | <span data-ttu-id="7abc9-138">Il provider ha rilevato un errore di run-time interno che non esegue il mapping a un altro valore restituito.</span><span class="sxs-lookup"><span data-stu-id="7abc9-138">The provider has encountered an internal run-time error that does not map to another return value.</span></span> <span data-ttu-id="7abc9-139">Il provider deve inoltre scrivere un evento nel registro eventi dell'applicazione, fornendo all'utente informazioni su come risolvere il problema.</span><span class="sxs-lookup"><span data-stu-id="7abc9-139">The provider must also write an event into the Application event log providing the user with information on how to resolve this problem.</span></span><br/> |
| <span data-ttu-id="7abc9-140"><span id="VSS_E_CANNOT_REVERT_DISKID"></span><span id="vss_e_cannot_revert_diskid"></span>VSS \_ E \_ non è in grado di \_ ripristinare un \_ DiskID</span><span class="sxs-lookup"><span data-stu-id="7abc9-140"><span id="VSS_E_CANNOT_REVERT_DISKID"></span><span id="vss_e_cannot_revert_diskid"></span>VSS\_E\_CANNOT\_REVERT\_DISKID</span></span><br/>                                                | <span data-ttu-id="7abc9-141">Impossibile impostare il valore richiesto per la firma MBR o l'ID GPT per uno o più dischi.</span><span class="sxs-lookup"><span data-stu-id="7abc9-141">The MBR signature or GPT ID for one or more disks could not be set to the requested value.</span></span> <span data-ttu-id="7abc9-142">Per ulteriori informazioni, consultare il registro eventi dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="7abc9-142">Check the Application event log for more information.</span></span><br/>                                                                                            |



 

<span data-ttu-id="7abc9-143">Il provider non deve tentare di restituire altri codici di errore.</span><span class="sxs-lookup"><span data-stu-id="7abc9-143">The provider should not attempt to return any other error codes.</span></span>

<span data-ttu-id="7abc9-144">Se il provider restituisce un codice di errore non previsto (ad esempio, **\_ false**, **e \_ Fail**, **e \_ Unexpected**, o **e \_ Abort**), VSS scrive un evento nel registro eventi che indica il provider e il metodo non riuscito e converte l'errore in VSS e il provider imprevisto **\_ \_ \_ \_ Error** prima di tornare al richiedente.</span><span class="sxs-lookup"><span data-stu-id="7abc9-144">If the provider returns an error code that is not expected (for example **S\_FALSE**, **E\_FAIL**, **E\_UNEXPECTED**, or **E\_ABORT**), VSS writes an event into the event log mentioning the provider and failed method and translates the error to **VSS\_E\_UNEXPECTED\_PROVIDER\_ERROR** before returning to the requester.</span></span> <span data-ttu-id="7abc9-145">Questa operazione non viene eseguita per qualsiasi risultato restituito da [**IVssProviderCreateSnapshotSet:: AbortSnapshots**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidercreatesnapshotset-abortsnapshots) o [**IVssProviderNotifications:: OnUnload**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidernotifications-onunload).</span><span class="sxs-lookup"><span data-stu-id="7abc9-145">This is not done for any returns from [**IVssProviderCreateSnapshotSet::AbortSnapshots**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidercreatesnapshotset-abortsnapshots) or [**IVssProviderNotifications::OnUnload**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidernotifications-onunload).</span></span>

 

 




