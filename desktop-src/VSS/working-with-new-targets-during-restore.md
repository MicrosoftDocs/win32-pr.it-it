---
description: Un richiedente potrebbe dover ripristinare i file in una posizione indicata da un percorso predefinito di un set di file o dal mapping del percorso alternativo.
ms.assetid: ce11485c-da0e-4c16-962e-eeedc2da3de4
title: Utilizzo di nuove destinazioni durante il ripristino
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 31f20a6e8c27c186648d0f662921160ab5c76988
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106307127"
---
# <a name="working-with-new-targets-during-restore"></a><span data-ttu-id="11498-103">Utilizzo di nuove destinazioni durante il ripristino</span><span class="sxs-lookup"><span data-stu-id="11498-103">Working with New Targets during Restore</span></span>

<span data-ttu-id="11498-104">Un richiedente potrebbe dover ripristinare i file in una posizione indicata da un percorso predefinito di un set di file o dal [*mapping del percorso alternativo*](vssgloss-a.md).</span><span class="sxs-lookup"><span data-stu-id="11498-104">A requester may need to restore files to a location indicated by something other than a file set's default path or its [*alternate location mapping*](vssgloss-a.md).</span></span> <span data-ttu-id="11498-105">Esistono molti motivi per cui questa situazione potrebbe verificarsi, ad esempio, nessuna destinazione di ripristino è accessibile o un utente richiedente richiede intenzionalmente che i file vengano ripristinati in un percorso precedentemente sconosciuto.</span><span class="sxs-lookup"><span data-stu-id="11498-105">There are many reasons why this might happen—for example, neither restore destination was accessible, or a requester user intentionally requests that files be restored to some previously unknown location.</span></span> <span data-ttu-id="11498-106">In questo caso, il richiedente usa il nuovo meccanismo di destinazione per indicare ai writer che ha ripristinato un file in un'area diversa sul disco.</span><span class="sxs-lookup"><span data-stu-id="11498-106">In this case, the requester uses the new target mechanism to indicate to writers that it has restored a file to a different area on disk.</span></span>

<span data-ttu-id="11498-107">Non tutti i writer supportano un richiedente che modifica la destinazione di ripristino di un file.</span><span class="sxs-lookup"><span data-stu-id="11498-107">Not all writers support a requester changing the restore destination of a file.</span></span> <span data-ttu-id="11498-108">Un richiedente deve verificare il supporto del writer controllando la maschera dello schema di backup del writer (restituita da [**IVssExamineWriterMetadata:: GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema)) e verificando che contenga il writer del servizio Copia Shadow del volume che \_ supporta il \_ \_ \_ nuovo \_ flag di destinazione.</span><span class="sxs-lookup"><span data-stu-id="11498-108">A requester needs to verify writer support by checking the writer's backup schema mask (returned by [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema)) and verifying that it contains the VSS\_BS\_WRITER\_SUPPORTS\_NEW\_TARGET flag.</span></span>

<span data-ttu-id="11498-109">Il richiedente indica un ripristino di questo tipo tramite il metodo [**IVssBackupComponents:: AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget) .</span><span class="sxs-lookup"><span data-stu-id="11498-109">The requester indicates such a restoration through the [**IVssBackupComponents::AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget) method.</span></span> <span data-ttu-id="11498-110">Oltre a specificare una specifica del file e una destinazione di ripristino originale e una nuova, il richiedente specifica le informazioni sul componente, ovvero un percorso logico e un nome di componente.</span><span class="sxs-lookup"><span data-stu-id="11498-110">In addition to specifying a file specification and an original and a new restore destination, the requester specifies component information—a logical path and component name.</span></span>

<span data-ttu-id="11498-111">Le informazioni sul componente utilizzate variano a seconda che il componente che gestisce il file con una nuova destinazione aggiunta sia incluso in [*modo esplicito*](vssgloss-e.md) o [*implicito*](vssgloss-i.md) nel backup.</span><span class="sxs-lookup"><span data-stu-id="11498-111">Which component's information is used depends on whether or not the component managing the file having a new target added was [*explicitly included*](vssgloss-e.md) or [*implicitly included*](vssgloss-i.md) in the backup.</span></span>

<span data-ttu-id="11498-112">Se il componente di gestione è stato incluso in modo esplicito, vengono utilizzate le relative informazioni.</span><span class="sxs-lookup"><span data-stu-id="11498-112">If the managing component was explicitly included, then its information is used.</span></span> <span data-ttu-id="11498-113">Se il componente di gestione è incluso in modo implicito, si tratta di un sottocomponente di un set di componenti.</span><span class="sxs-lookup"><span data-stu-id="11498-113">If the managing component was implicitly included, it is a subcomponent in a component set.</span></span> <span data-ttu-id="11498-114">In questo caso vengono usate le informazioni del componente di definizione del set di componenti.</span><span class="sxs-lookup"><span data-stu-id="11498-114">In this case, the component set's defining component's information is used.</span></span>

<span data-ttu-id="11498-115">Durante la gestione dell'evento [**PostRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-postrestore) , i writer devono verificare se uno dei file è stato ripristinato in una nuova posizione.</span><span class="sxs-lookup"><span data-stu-id="11498-115">While handling the [**PostRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-postrestore) event, writers should check to see if any of its files were restored to a new location.</span></span> <span data-ttu-id="11498-116">A tale scopo, è possibile usare i metodi [**IVssComponent:: GetNewTargetCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getnewtargetcount) e [**IVssComponent:: GetNewTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getnewtarget) .</span><span class="sxs-lookup"><span data-stu-id="11498-116">This can be done by using the [**IVssComponent::GetNewTargetCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getnewtargetcount) and [**IVssComponent::GetNewTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getnewtarget) methods.</span></span>

<span data-ttu-id="11498-117">L'istanza dell'interfaccia [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) utilizzata varia a seconda che il componente di gestione del file sia stato aggiunto in modo esplicito o implicito al backup.</span><span class="sxs-lookup"><span data-stu-id="11498-117">The instance of the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface that is used depends on whether the file's managing component was explicitly or implicitly added to the backup.</span></span>

 

 



