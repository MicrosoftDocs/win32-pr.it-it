---
description: "Durante un'operazione di backup, il richiedente USA IVssBackupComponents:: SetBackupState per definire il tipo di operazione in corso."
ms.assetid: 43dcdac7-ed8e-4150-83eb-585e0e92f13c
title: Stato backup VSS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e9aa9250139aee9f48f9880fd4a657fa7c6c4991
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103751567"
---
# <a name="vss-backup-state"></a><span data-ttu-id="6ac34-103">Stato backup VSS</span><span class="sxs-lookup"><span data-stu-id="6ac34-103">VSS Backup State</span></span>

<span data-ttu-id="6ac34-104">Durante un'operazione di backup, il richiedente USA [**IVssBackupComponents:: SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate) per definire il tipo di operazione in corso.</span><span class="sxs-lookup"><span data-stu-id="6ac34-104">During a backup operation, the requester uses [**IVssBackupComponents::SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate) to define the type of operation in progress.</span></span>

<span data-ttu-id="6ac34-105">Queste informazioni non sono incluse in un modulo facilmente recuperabile nel documento componenti di backup, quindi gli sviluppatori del richiedente devono archiviare queste informazioni in modo indipendente in qualsiasi supporto di backup.</span><span class="sxs-lookup"><span data-stu-id="6ac34-105">This information is not included in an easily retrievable form in the Backup Components Document, so requester developers should store this information independently on any backup media.</span></span>

<span data-ttu-id="6ac34-106">Lo stato di backup contiene gli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="6ac34-106">The backup state contains the following:</span></span>

<dl> <dt>

<span data-ttu-id="6ac34-107"><span id="Backup_Type"></span><span id="backup_type"></span><span id="BACKUP_TYPE"></span>Tipo di backup</span><span class="sxs-lookup"><span data-stu-id="6ac34-107"><span id="Backup_Type"></span><span id="backup_type"></span><span id="BACKUP_TYPE"></span>Backup Type</span></span>
</dt> <dd>

<span data-ttu-id="6ac34-108">Il tipo di backup specifica i criteri per l'identificazione dei file di cui eseguire il backup.</span><span class="sxs-lookup"><span data-stu-id="6ac34-108">The backup type specifies criteria for identifying files to be backed up.</span></span> <span data-ttu-id="6ac34-109">La valutazione di questi criteri deve essere eseguita usando l'API VSS.</span><span class="sxs-lookup"><span data-stu-id="6ac34-109">The evaluation of these criteria must be made using the VSS API.</span></span>

<span data-ttu-id="6ac34-110">Quando si decide il tipo di backup da perseguire e quali writer usare, i richiedenti devono esaminare i tipi o gli schemi, vedere [supporto dello schema di backup del writer](writer-backup-schema-support.md), delle operazioni di backup supportate da ciascuno dei writer del sistema.</span><span class="sxs-lookup"><span data-stu-id="6ac34-110">When deciding on the type of backup to pursue and which writers to work with, requesters should examine the kinds (or schemas—see [Writer Backup Schema Support](writer-backup-schema-support.md)) of backup operations that each of the system's writers supports.</span></span> <span data-ttu-id="6ac34-111">I backup in VSS possono essere i tipi seguenti:</span><span class="sxs-lookup"><span data-stu-id="6ac34-111">Backups under VSS can be the following types:</span></span>

-   <span data-ttu-id="6ac34-112">Completo (VSS \_ BT \_ Full): verrà eseguito il backup dei file indipendentemente dalla data dell'ultimo backup.</span><span class="sxs-lookup"><span data-stu-id="6ac34-112">Full (VSS\_BT\_FULL)—files will be backed up regardless of their last backup date.</span></span> <span data-ttu-id="6ac34-113">La cronologia di backup di ogni file verrà aggiornata e questo tipo di backup può essere utilizzato come base per un backup incrementale o differenziale.</span><span class="sxs-lookup"><span data-stu-id="6ac34-113">The backup history of each file will be updated, and this type of backup can be used as the basis of an incremental or differential backup.</span></span> <span data-ttu-id="6ac34-114">Il ripristino di un backup completo richiede una sola immagine di backup.</span><span class="sxs-lookup"><span data-stu-id="6ac34-114">Restoring a full backup requires only a single backup image.</span></span>
-   <span data-ttu-id="6ac34-115">Copia backup ( \_ copia servizio \_ Copia Shadow del volume): Analogamente al \_ \_ tipo di backup completo VSS BT, viene eseguito il backup dei file indipendentemente dalla data dell'ultimo backup.</span><span class="sxs-lookup"><span data-stu-id="6ac34-115">Copy Backup (VSS\_BT\_COPY)—like the VSS\_BT\_FULL backup type, files will be backed up regardless of their last backup date.</span></span> <span data-ttu-id="6ac34-116">Tuttavia, la cronologia di backup di ogni file non verrà aggiornata e questo tipo di backup non può essere utilizzato come base per un backup incrementale o differenziale.</span><span class="sxs-lookup"><span data-stu-id="6ac34-116">However, the backup history of each file will not be updated, and this sort of backup cannot be used as the basis of an incremental or differential backup.</span></span>
-   <span data-ttu-id="6ac34-117">Incrementale (VSS \_ BT \_ incrementale): l'API VSS viene utilizzata per garantire che solo i file che sono stati modificati o aggiunti dopo l'ultimo backup completo o incrementale vengano copiati in un supporto di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="6ac34-117">Incremental (VSS\_BT\_INCREMENTAL)—the VSS API is used to ensure that only files that have been changed or added since the last full or incremental backup are to be copied to a storage medium.</span></span> <span data-ttu-id="6ac34-118">Il ripristino di un backup incrementale richiede l'immagine di backup originale e tutte le immagini di backup incrementali effettuate dal backup iniziale.</span><span class="sxs-lookup"><span data-stu-id="6ac34-118">Restoring an incremental backup requires the original backup image and all incremental backup images made since the initial backup.</span></span>
-   <span data-ttu-id="6ac34-119">Differenziale ( \_ \_ differenziale del servizio Copia Shadow del volume): l'API VSS viene usata per garantire che solo i file che sono stati modificati o aggiunti dopo l'ultimo backup completo vengano copiati in un supporto di archiviazione; tutte le informazioni sul backup intermedio verranno ignorate.</span><span class="sxs-lookup"><span data-stu-id="6ac34-119">Differential (VSS\_BT\_DIFFERENTIAL)—the VSS API is used to ensure that only files that have been changed or added since the last full backup are to be copied to a storage media; all intermediate backup information is ignored.</span></span> <span data-ttu-id="6ac34-120">Il ripristino di un backup differenziale richiede l'immagine di backup originale e l'immagine di backup differenziale più recente eseguita dopo l'ultimo backup completo.</span><span class="sxs-lookup"><span data-stu-id="6ac34-120">Restoring a differential backup requires the original backup image and the most recent differential backup image made since the last full backup.</span></span>
-   <span data-ttu-id="6ac34-121">File di log ( \_ \_ log di VSS BT): verrà eseguito il backup solo dei file di log del writer, ovvero i file aggiunti a un componente con il metodo [**IVssCreateWriterMetadata:: AddDataBaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles) e recuperati da una chiamata a [**IVssWMComponent:: GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile).</span><span class="sxs-lookup"><span data-stu-id="6ac34-121">Log File (VSS\_BT\_LOG)—only a writer's log files (files added to a component with the [**IVssCreateWriterMetadata::AddDataBaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles) method, and retrieved by a call to [**IVssWMComponent::GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile)) will be backed up.</span></span> <span data-ttu-id="6ac34-122">Questo tipo di backup è specifico per VSS.</span><span class="sxs-lookup"><span data-stu-id="6ac34-122">This backup type is specific to VSS.</span></span>

<span data-ttu-id="6ac34-123">È possibile che i richiedenti implementino questi backup usando informazioni e metodi esterni a VSS.</span><span class="sxs-lookup"><span data-stu-id="6ac34-123">It is possible for requesters to implement these backups using information and methods outside of VSS.</span></span> <span data-ttu-id="6ac34-124">Solo quando un richiedente implementa un backup con l'API VSS, dovrebbe essere definito uno dei tipi di backup elencati.</span><span class="sxs-lookup"><span data-stu-id="6ac34-124">Only when a requester implements a backup using the VSS API should it be said to have one of the listed backup types.</span></span> <span data-ttu-id="6ac34-125">Un richiedente, ad esempio, fa parte di un \_ \_ tipo di log VSS BT solo se ha usato le informazioni restituite da [**IVssWMComponent:: GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile) per identificare i file di log.</span><span class="sxs-lookup"><span data-stu-id="6ac34-125">For instance, a requester participates in a VSS\_BT\_LOG type of backup only if it used the information returned by [**IVssWMComponent::GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile) to identify log files.</span></span> <span data-ttu-id="6ac34-126">Analogamente, i \_ \_ tipi differenziali di VSS BT incrementali e VSS \_ BT \_ si applicano solo alle operazioni incrementali o differenziali, come descritto in [backup incrementali e differenziali](incremental-and-differential-backups.md).</span><span class="sxs-lookup"><span data-stu-id="6ac34-126">Similarly, the VSS\_BT\_INCREMENTAL and VSS\_BT\_DIFFERENTIAL types apply only to incremental or differential operations, as described in [Incremental and Differential Backups](incremental-and-differential-backups.md).</span></span>

</dd> <dt>

<span data-ttu-id="6ac34-127"><span id="Specification_about_Selectability"></span><span id="specification_about_selectability"></span><span id="SPECIFICATION_ABOUT_SELECTABILITY"></span>Specifica sulla selezione</span><span class="sxs-lookup"><span data-stu-id="6ac34-127"><span id="Specification_about_Selectability"></span><span id="specification_about_selectability"></span><span id="SPECIFICATION_ABOUT_SELECTABILITY"></span>Specification about Selectability</span></span>
</dt> <dd>

<span data-ttu-id="6ac34-128">Un backup del servizio Copia Shadow del volume può scegliere di rispettare le nozioni VSS della selezione dei componenti. questa operazione viene definita esecuzione in [*modalità componente*](vssgloss-c.md), oppure per ignorarle.</span><span class="sxs-lookup"><span data-stu-id="6ac34-128">A VSS backup may choose to respect VSS notions of component selectability—this is referred to as running in [*component mode*](vssgloss-c.md)—or to ignore them.</span></span>

<span data-ttu-id="6ac34-129">Un esempio di non esecuzione in modalità componente consiste nell'esecuzione di un backup delle immagini del sistema, in cui l'applicazione di backup richiederebbe la collaborazione del writer per garantire la stabilità dei dati, ma la selezione dei componenti sarebbe irrilevante.</span><span class="sxs-lookup"><span data-stu-id="6ac34-129">An example of not running in component mode would be performing a system image backup, where the backup application would need writer cooperation to ensure data stability but where selection of components would be irrelevant.</span></span>

</dd> <dt>

<span data-ttu-id="6ac34-130"><span id="Saving_Bootable_State"></span><span id="saving_bootable_state"></span><span id="SAVING_BOOTABLE_STATE"></span>Salvataggio dello stato di avvio</span><span class="sxs-lookup"><span data-stu-id="6ac34-130"><span id="Saving_Bootable_State"></span><span id="saving_bootable_state"></span><span id="SAVING_BOOTABLE_STATE"></span>Saving Bootable State</span></span>
</dt> <dd>

<span data-ttu-id="6ac34-131">VSS supporta il salvataggio dello stato del sistema in esecuzione in una configurazione di avvio completo.</span><span class="sxs-lookup"><span data-stu-id="6ac34-131">VSS supports saving the running system state in a fully bootable configuration.</span></span> <span data-ttu-id="6ac34-132">Tuttavia, questo non è sempre necessario e la preparazione del writer per salvare uno stato di avvio può a volte peggiorare le prestazioni in tempo reale di un sistema in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="6ac34-132">However, this is not always necessary, and writer preparation to save a bootable state can sometimes degrade real-time performance of a running system.</span></span>

<span data-ttu-id="6ac34-133">Pertanto, i richiedenti indicano se un backup includerà uno stato del sistema di avvio come argomento di [**IVssBackupComponents:: SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate).</span><span class="sxs-lookup"><span data-stu-id="6ac34-133">Therefore, requesters indicate whether a backup will include a bootable system state as an argument to [**IVssBackupComponents::SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate).</span></span> <span data-ttu-id="6ac34-134">I writer determinano se devono supportare il salvataggio dello stato del sistema di avvio chiamando [**CVssWriter:: IsBootableStateBackedUp**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-isbootablesystemstatebackedup).</span><span class="sxs-lookup"><span data-stu-id="6ac34-134">Writers determine whether they have to support saving the bootable system state by calling [**CVssWriter::IsBootableStateBackedUp**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-isbootablesystemstatebackedup).</span></span>

<span data-ttu-id="6ac34-135">Anche se lo stato del sistema di avvio non è selezionato, verranno eseguite copie shadow dei file di sistema ed è possibile eseguire il backup dei file.</span><span class="sxs-lookup"><span data-stu-id="6ac34-135">Even if bootable system state is not selected, shadow copies of the system files will be made and the files may be backed up.</span></span>

<span data-ttu-id="6ac34-136">Tuttavia, è opportuno prestare particolare attenzione durante il ripristino dei file di sistema se il backup non ha salvato lo stato del sistema di avvio (vedere [backup e ripristino dello stato del sistema in Windows server 2003 R2 e Windows server 2003 SP1](backing-up-and-restoring-system-state-under-vss.md)).</span><span class="sxs-lookup"><span data-stu-id="6ac34-136">However, great care should be exercised in restoring system files if the backup did not save the bootable system state (see [Backing Up and Restoring System State in Windows Server 2003 R2 and Windows Server 2003 SP1](backing-up-and-restoring-system-state-under-vss.md)).</span></span>

<span data-ttu-id="6ac34-137">Non è possibile recuperare queste informazioni da un documento relativo ai componenti di backup recuperati, quindi gli autori del richiedente devono archiviare se è stato eseguito il backup del sistema con uno stato del sistema di avvio.</span><span class="sxs-lookup"><span data-stu-id="6ac34-137">It is not possible to recover this information from a retrieved Backup Components Document, so requester authors should store whether the system was backed up with a bootable system state or not.</span></span>

</dd> <dt>

<span data-ttu-id="6ac34-138"><span id="Partial_File_Support"></span><span id="partial_file_support"></span><span id="PARTIAL_FILE_SUPPORT"></span>Supporto file parziale</span><span class="sxs-lookup"><span data-stu-id="6ac34-138"><span id="Partial_File_Support"></span><span id="partial_file_support"></span><span id="PARTIAL_FILE_SUPPORT"></span>Partial File Support</span></span>
</dt> <dd>

<span data-ttu-id="6ac34-139">Alcuni writer supportano il ripristino dei file tramite la sovrascrittura delle parti dei file gestiti.</span><span class="sxs-lookup"><span data-stu-id="6ac34-139">Some writers support file restoration through the overwriting of parts of the files they manage.</span></span> <span data-ttu-id="6ac34-140">Un richiedente può essere progettato per trarre vantaggio da questo e, in caso affermativo, impostando le informazioni in [**IVssBackupComponents:: SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate).</span><span class="sxs-lookup"><span data-stu-id="6ac34-140">A requester may be designed to take advantage of this, and if so it indicates this by setting the information in [**IVssBackupComponents::SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate).</span></span>

</dd> </dl>

 

 



