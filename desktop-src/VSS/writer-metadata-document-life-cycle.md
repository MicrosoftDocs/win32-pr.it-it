---
description: 'In risposta a un evento di identificazione, ogni writer presente nel sistema costruisce il proprio documento di metadati del writer usando IVssCreateWriterMetadata. Un evento di identificazione viene in genere generato da un richiedente che chiama IVssBackupComponents:: GatherWriterMetadata.'
ms.assetid: bae9bbe7-ca55-47cb-b253-8092007cb181
title: Ciclo di vita del documento dei metadati del writer
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 45be5748625d21f99abe3e77e0d6474a62210904
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106307119"
---
# <a name="writer-metadata-document-life-cycle"></a><span data-ttu-id="6a8a9-104">Ciclo di vita del documento dei metadati del writer</span><span class="sxs-lookup"><span data-stu-id="6a8a9-104">Writer Metadata Document Life Cycle</span></span>

<span data-ttu-id="6a8a9-105">In risposta a un [*evento di identificazione*](vssgloss-i.md), ogni writer presente nel sistema costruisce il proprio documento di metadati del writer usando [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata).</span><span class="sxs-lookup"><span data-stu-id="6a8a9-105">In response to an [*Identify event*](vssgloss-i.md), each writer present on the system constructs its own Writer Metadata Document using [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata).</span></span> <span data-ttu-id="6a8a9-106">Un *evento di identificazione* viene in genere generato da un richiedente che chiama [**IVssBackupComponents:: GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata).</span><span class="sxs-lookup"><span data-stu-id="6a8a9-106">An *Identify event* is typically generated by a requester calling [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata).</span></span>

<span data-ttu-id="6a8a9-107">Quando si crea un documento di metadati del writer, tramite l'interfaccia [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata) o l'inizializzazione del writer ([**CVssWriter:: Initialize**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-initialize)), un writer deve specificare in modo esplicito quanto segue:</span><span class="sxs-lookup"><span data-stu-id="6a8a9-107">When creating a Writer Metadata Document, either through the [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata) interface or through writer initialization ([**CVssWriter::Initialize**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-initialize)), a writer must explicitly specify the following:</span></span>

-   [<span data-ttu-id="6a8a9-108">*Metodo Restore*</span><span class="sxs-lookup"><span data-stu-id="6a8a9-108">*Restore method*</span></span>](vssgloss-r.md)
-   <span data-ttu-id="6a8a9-109">Nome writer</span><span class="sxs-lookup"><span data-stu-id="6a8a9-109">Writer name</span></span>
-   [<span data-ttu-id="6a8a9-110">*ID classe Writer*</span><span class="sxs-lookup"><span data-stu-id="6a8a9-110">*Writer class ID*</span></span>](vssgloss-w.md)
-   <span data-ttu-id="6a8a9-111">Utilizzo dei dati ( [**vedere \_ \_ tipo di utilizzo VSS**](/windows/desktop/api/VsWriter/ne-vswriter-vss_usage_type))</span><span class="sxs-lookup"><span data-stu-id="6a8a9-111">Data usage (see [**VSS\_USAGE\_TYPE**](/windows/desktop/api/VsWriter/ne-vswriter-vss_usage_type))</span></span>
-   <span data-ttu-id="6a8a9-112">Tipo di origine data (vedere il [**\_ \_ tipo di origine VSS**](/windows/desktop/api/VsWriter/ne-vswriter-vss_source_type))</span><span class="sxs-lookup"><span data-stu-id="6a8a9-112">Date source type (see [**VSS\_SOURCE\_TYPE**](/windows/desktop/api/VsWriter/ne-vswriter-vss_source_type))</span></span>

<span data-ttu-id="6a8a9-113">Inoltre, è possibile specificare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="6a8a9-113">In addition, it may also specify the following:</span></span>

-   <span data-ttu-id="6a8a9-114">Componenti (che possono contenere o meno i set di file)</span><span class="sxs-lookup"><span data-stu-id="6a8a9-114">Components (which may or may not contain file sets)</span></span>
-   <span data-ttu-id="6a8a9-115">Aggiungi mapping alternativi</span><span class="sxs-lookup"><span data-stu-id="6a8a9-115">Add alternate mappings</span></span>
-   <span data-ttu-id="6a8a9-116">Escludi elenchi di file</span><span class="sxs-lookup"><span data-stu-id="6a8a9-116">Exclude file lists</span></span>

<span data-ttu-id="6a8a9-117">Una panoramica della creazione dei documenti dei metadati del writer si trova nelle [azioni del writer durante l'inizializzazione del backup](overview-of-backup-initialization.md).</span><span class="sxs-lookup"><span data-stu-id="6a8a9-117">An overview of Writer Metadata Document creation is found in [Writer Actions during Backup Initialization](overview-of-backup-initialization.md).</span></span>

<span data-ttu-id="6a8a9-118">Per ottenere l'accesso ai metadati del writer, i richiedenti usano in genere uno dei due metodi seguenti:</span><span class="sxs-lookup"><span data-stu-id="6a8a9-118">Requesters typically make use of one of two methods to obtain access to writer metadata:</span></span>

-   <span data-ttu-id="6a8a9-119">Durante la maggior parte delle operazioni di backup, un richiedente USA [**IVssBackupComponents:: GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata) per ottenere un'istanza dell'interfaccia [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) per consentire l'accesso ai metadati di un writer attualmente in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="6a8a9-119">During most backup operations, a requester uses [**IVssBackupComponents::GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata) to obtain an instance of the [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) interface to allow access to the metadata of a currently executing writer.</span></span>
-   <span data-ttu-id="6a8a9-120">Per le operazioni di ripristino o i backup che usano copie shadow importate (vedere [importazione di volumi copiati shadow trasportabili](importing-transportable-shadow-copied-volumes.md) per altre informazioni sull'importazione di copie shadow), un richiedente recupera un documento XML contenente i metadati e USA [**CreateVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-createvssexaminewritermetadata) per ottenere un'interfaccia [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) , che usa per leggere i metadati del ripristino.</span><span class="sxs-lookup"><span data-stu-id="6a8a9-120">For restore operations, or backups using imported shadow copies (see [Importing Transportable Shadow Copied Volumes](importing-transportable-shadow-copied-volumes.md) for more information on importing shadow copies), a requester retrieves an XML document containing the metadata and uses [**CreateVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-createvssexaminewritermetadata) to obtain an [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) interface, which it uses to read the restore metadata.</span></span>

<span data-ttu-id="6a8a9-121">I documenti di metadati del writer consentono al richiedente di eseguire un backup per ottenere informazioni sui Writer attualmente in esecuzione durante la fase di individuazione di un backup.</span><span class="sxs-lookup"><span data-stu-id="6a8a9-121">Writer Metadata Documents enable the requester performing a backup to learn about currently executing writers during the discovery phase of a backup.</span></span>

<span data-ttu-id="6a8a9-122">Per gli autori scelti per partecipare a un backup, un richiedente importa molte, ma non tutte, le informazioni contenute nel documento dei metadati del writer nel documento relativo ai propri componenti di backup durante la fase di individuazione di un backup.</span><span class="sxs-lookup"><span data-stu-id="6a8a9-122">For those writers chosen to participate in a backup, a requester imports much, but not all, of the information in the Writer Metadata Document into its own Backup Components Document during the discovery phase of a backup.</span></span>

<span data-ttu-id="6a8a9-123">Tuttavia, solo i documenti dei metadati del writer e non il documento dei componenti di backup contengono le specifiche di file e percorso.</span><span class="sxs-lookup"><span data-stu-id="6a8a9-123">However, only Writer Metadata Documents and not the Backup Components Document contain the file and path specifications.</span></span>

<span data-ttu-id="6a8a9-124">Per ulteriori informazioni sul modo in cui viene eseguita la fase di individuazione di un'operazione di backup, vedere [Cenni preliminari sulla fase di individuazione del backup](overview-of-the-backup-discovery-phase.md).</span><span class="sxs-lookup"><span data-stu-id="6a8a9-124">For more information on how the discovery phase of a backup operation is conducted, see [Overview of the Backup Discovery Phase](overview-of-the-backup-discovery-phase.md).</span></span>

<span data-ttu-id="6a8a9-125">Inoltre, durante un'operazione di backup solo i componenti [*inclusi in modo esplicito*](vssgloss-e.md) dispongono delle informazioni archiviate nel documento componenti di backup.</span><span class="sxs-lookup"><span data-stu-id="6a8a9-125">In addition, only [*explicitly included*](vssgloss-e.md) components have their information stored in the Backup Components Document during a backup operation.</span></span> <span data-ttu-id="6a8a9-126">Le informazioni sui componenti [*inclusi in modo implicito*](vssgloss-i.md) non sono incluse nel documento componenti di backup durante un'operazione di backup e devono essere interpolate utilizzando le informazioni sui componenti inclusi in modo esplicito e sui documenti di metadati del writer disponibili.</span><span class="sxs-lookup"><span data-stu-id="6a8a9-126">Information on [*implicitly included*](vssgloss-i.md) components is not included in the Backup Components Document during a backup operation, and must be interpolated using information about the explicitly included components and the available Writer Metadata Documents.</span></span>

<span data-ttu-id="6a8a9-127">È possibile che i componenti inclusi in modo implicito siano ancora [*selezionabili per il ripristino*](vssgloss-s.md) e che debbano essere inclusi in modo esplicito nel documento componenti di backup in fase di ripristino.</span><span class="sxs-lookup"><span data-stu-id="6a8a9-127">Implicitly included components may still be [*selectable for restore*](vssgloss-s.md) and may need to be explicitly included in the Backup Components Document at restore time.</span></span> <span data-ttu-id="6a8a9-128">In questo caso, come l'aggiunta di un componente durante un'operazione di backup, è necessario accedere al documento di metadati del writer writer's del componente (recuperato dal writer), un richiedente dovrà accedere a una copia dei documenti di metadati del writer del writer archiviati in fase di backup.</span><span class="sxs-lookup"><span data-stu-id="6a8a9-128">In this case, just as adding a component during a backup operation required access to the component's writer's Writer Metadata Document (then retrieved from the writer), a requester will require access to a copy of that writer's Writer Metadata Documents stored at backup time.</span></span>

<span data-ttu-id="6a8a9-129">Pertanto, l'unico modo per ottenere tutte le informazioni su tutti i file e i componenti coinvolti in un backup o un ripristino consiste nel disporre di ogni documento di metadati del writer per ogni writer che partecipa a un backup archiviato insieme al documento componenti di backup.</span><span class="sxs-lookup"><span data-stu-id="6a8a9-129">Therefore, the only way to obtain all the information about all the files and components involved in a backup or restore is to have each Writer Metadata Document for each writer participating in a backup stored along with the Backup Components Document.</span></span> <span data-ttu-id="6a8a9-130">Per ulteriori informazioni, vedere [Panoramica del ripristino effettivo dei file](overview-of-actual-file-restoration.md).</span><span class="sxs-lookup"><span data-stu-id="6a8a9-130">(For more information, see [Overview of Actual File Restoration](overview-of-actual-file-restoration.md).)</span></span>

 

 



