---
description: Un richiedente è qualsiasi applicazione che usa l'API VSS (in particolare l'interfaccia IVssBackupComponents) per richiedere ai servizi del Servizio Copia Shadow del volume di creare e gestire copie shadow e set di copie shadow di uno o più volumi.
ms.assetid: e49920d0-5b66-4aa1-b3ca-641629df5f8a
title: Requesters
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b676b8cd287365b257e3b6ee85a7e47a70f88ef3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104227038"
---
# <a name="requesters"></a><span data-ttu-id="6bba2-103">Requesters</span><span class="sxs-lookup"><span data-stu-id="6bba2-103">Requesters</span></span>

<span data-ttu-id="6bba2-104">Un [*richiedente*](vssgloss-r.md) è qualsiasi applicazione che usa l'API VSS (in particolare l'interfaccia [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) ) per richiedere ai servizi del servizio Copia Shadow del volume di creare e gestire copie shadow e set di copie shadow di uno o più volumi.</span><span class="sxs-lookup"><span data-stu-id="6bba2-104">A [*requester*](vssgloss-r.md) is any application that uses the VSS API (specifically the [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) interface) to request the services of the Volume Shadow Copy Service to create and manage shadow copies and shadow copy sets of one or more volumes.</span></span>

<span data-ttu-id="6bba2-105">L'esempio più comune di un richiedente (e l'unico trattato in questa documentazione) è un'applicazione di backup/ripristino compatibile con VSS, che usa dati copiati in Shadow come origine stabile per le operazioni di backup.</span><span class="sxs-lookup"><span data-stu-id="6bba2-105">The most typical example of a requester (and the only one addressed in this documentation) is a VSS-aware backup/restore application, which uses shadow-copied data as a stable source for its backup operations.</span></span>

<span data-ttu-id="6bba2-106">Oltre ad avviare le copie shadow, le applicazioni di richiesta di backup/ripristino comunicano con i producer (writer) per raccogliere informazioni sul sistema e segnalare ai writer di preparare i dati per il backup.</span><span class="sxs-lookup"><span data-stu-id="6bba2-106">In addition to initiating shadow copies, backup/recover requester applications communicate with data producers (writers) to gather information on the system and to signal writers to prepare their data for backup.</span></span>

## <a name="requester-state"></a><span data-ttu-id="6bba2-107">Stato del richiedente</span><span class="sxs-lookup"><span data-stu-id="6bba2-107">Requester State</span></span>

<span data-ttu-id="6bba2-108">Un richiedente mantiene le informazioni sullo stato in un oggetto di metadati basato su XML denominato documento componenti di backup.</span><span class="sxs-lookup"><span data-stu-id="6bba2-108">A requester maintains its state information in an XML-based metadata object called the Backup Components Document.</span></span> <span data-ttu-id="6bba2-109">I metadati del richiedente sono necessari, ma non sufficienti per consentire a un richiedente di eseguire il backup e quindi ripristinare un file system.</span><span class="sxs-lookup"><span data-stu-id="6bba2-109">The requester metadata is necessary, but not sufficient to allow a requester to back up and then restore a file system.</span></span> <span data-ttu-id="6bba2-110">I motivi sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="6bba2-110">The reasons for this are the following:</span></span>

-   <span data-ttu-id="6bba2-111">Durante un'operazione di backup, solo un subset di tutti i componenti inclusi nel backup, non [*selezionabili per*](vssgloss-s.md) i componenti di backup senza selezionare per i predecessori di backup e selezionabili per i componenti di backup che sono stati [*inclusi in modo esplicito*](vssgloss-e.md) nel backup, hanno aggiunto le informazioni al documento componenti di backup del richiedente.</span><span class="sxs-lookup"><span data-stu-id="6bba2-111">During a backup operation, only a subset of all the components involved in the backup—[*nonselectable for backup*](vssgloss-s.md) components without selectable for backup ancestors and selectable for backup components that have been [*included explicitly*](vssgloss-e.md) in the backup—have had their information added to the requester's Backup Components Document.</span></span>
-   <span data-ttu-id="6bba2-112">Le informazioni anche per i componenti aggiunti al documento componenti di backup sono incomplete: le specifiche di file e percorsi non sono incluse.</span><span class="sxs-lookup"><span data-stu-id="6bba2-112">The information even for those components added to the Backup Components Document is incomplete—file and path specifications are not included.</span></span>
-   <span data-ttu-id="6bba2-113">Durante le operazioni di ripristino, un componente [*incluso in modo implicito*](vssgloss-i.md) nel backup può essere [*selezionabile per il ripristino*](vssgloss-s.md) e pertanto può essere incluso in modo esplicito nel ripristino.</span><span class="sxs-lookup"><span data-stu-id="6bba2-113">During restore operations, a component [*implicitly included*](vssgloss-i.md) in the backup may be [*selectable for restore*](vssgloss-s.md) and therefore can be explicitly included in the restore.</span></span> <span data-ttu-id="6bba2-114">Questa operazione richiede l'aggiornamento del documento dei componenti di backup del richiedente con le informazioni provenienti da copie archiviate del documento di metadati del writer del writer.</span><span class="sxs-lookup"><span data-stu-id="6bba2-114">This will require the updating of the requester's Backup Components Document with information from stored copies of a writer's Writer Metadata Document.</span></span>

<span data-ttu-id="6bba2-115">Per consentire la specifica completa di un'operazione di backup o ripristino, l'API VSS consente al richiedente di eseguire query sui metadati dei writer (durante i backup) o di esaminare i metadati del writer archiviati (durante i ripristini).</span><span class="sxs-lookup"><span data-stu-id="6bba2-115">To allow for full specification of a backup or restore operation, the VSS API allows the requester to query running writers' metadata (during backups) or examine stored writer metadata (during restores).</span></span> <span data-ttu-id="6bba2-116">Inoltre, un writer può modificare le informazioni sui componenti nel documento componenti di backup nel corso di un'operazione di backup o ripristino.</span><span class="sxs-lookup"><span data-stu-id="6bba2-116">In addition, a writer can modify component information in the Backup Components Document in the course of a backup or restore operation.</span></span>

<span data-ttu-id="6bba2-117">Utilizzando le informazioni sui componenti selezionati per il backup e il ripristino e le regole relative alla selezione dei componenti (per altre informazioni, vedere [configurazione dell'organizzazione dei componenti](definition-of-components-by-writers.md) e [utilizzo di percorsi di selezione e logici](working-with-selectability-and-logical-paths.md)), un richiedente può determinare i file di cui è necessario eseguire il backup o il ripristino del writer e individuare i file.</span><span class="sxs-lookup"><span data-stu-id="6bba2-117">Using the information about which components have been selected for backup and restore and the rules regarding component selection (for more information, see [Setting up Component Organization](definition-of-components-by-writers.md) and [Working with Selectability and Logical Paths](working-with-selectability-and-logical-paths.md)), a requester can determine which files of which writer it needs to back up or restore, and where it can find those files.</span></span>

<span data-ttu-id="6bba2-118">Come parte di un backup, è necessario archiviare sia i metadati del richiedente che del writer, in modo da poterli usare nel ripristino.</span><span class="sxs-lookup"><span data-stu-id="6bba2-118">As part of a backup, both requester and writer metadata must be stored so that it can be used in the restore.</span></span> <span data-ttu-id="6bba2-119">Viceversa, le operazioni di ripristino richiedono il recupero dei vecchi componenti di backup e dei documenti di metadati del writer per ottenere istruzioni complete sul ripristino di file.</span><span class="sxs-lookup"><span data-stu-id="6bba2-119">Conversely, restore operations require the retrieval of the old Backup Components and Writer Metadata Documents to obtain full instructions on restoring files.</span></span>

## <a name="requester-interprocess-communication"></a><span data-ttu-id="6bba2-120">Comunicazione interprocesso del richiedente</span><span class="sxs-lookup"><span data-stu-id="6bba2-120">Requester Interprocess Communication</span></span>

<span data-ttu-id="6bba2-121">Il richiedente mantiene il controllo sulle operazioni di backup e ripristino di VSS generando eventi COM tramite varie chiamate nell'API del richiedente.</span><span class="sxs-lookup"><span data-stu-id="6bba2-121">The requester maintains control over VSS backup and restore operations by generating COM events through various calls in the requester API.</span></span> <span data-ttu-id="6bba2-122">Queste chiamate possono eseguire le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="6bba2-122">These calls can do the following:</span></span>

-   <span data-ttu-id="6bba2-123">Effettuare richieste dei provider, ad esempio [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) fa in modo che il provider crei una copia shadow del volume selezionato.</span><span class="sxs-lookup"><span data-stu-id="6bba2-123">Make requests of the providers, for example, [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) causes the provider to create a shadow copy of the selected volume.</span></span>
-   <span data-ttu-id="6bba2-124">Attivare i writer per restituire informazioni, ad esempio [**IVssBackupComponents:: GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) consente al richiedente di ottenere il documento di metadati del writer di ogni writer.</span><span class="sxs-lookup"><span data-stu-id="6bba2-124">Trigger the writers to return information, for example, [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) enables the requester to obtain each writer's Writer Metadata Document.</span></span>
-   <span data-ttu-id="6bba2-125">Richiedere ai writer di preparare o gestire varie fasi della copia shadow e delle operazioni di backup, ad esempio [**IVssBackupComponents::P repareforbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) segnala ai writer la configurazione per il blocco di i/O.</span><span class="sxs-lookup"><span data-stu-id="6bba2-125">Require writers to prepare for or handle various phases of the shadow copy and backup operations, for example, [**IVssBackupComponents::PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) signals writers to set up for the I/O freeze.</span></span>

<span data-ttu-id="6bba2-126">Un richiedente riceve informazioni dai writer tramite documenti di metadati del writer live o archiviati e tramite l'interfaccia [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) , che può essere aggiornata dal writer.</span><span class="sxs-lookup"><span data-stu-id="6bba2-126">A requester receives information from the writers through live or stored Writer Metadata Documents and through the use of the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface, which the writer can update.</span></span>

## <a name="life-cycle-of-a-requester-during-backup"></a><span data-ttu-id="6bba2-127">Ciclo di vita di un richiedente durante il backup</span><span class="sxs-lookup"><span data-stu-id="6bba2-127">Life Cycle of a Requester during Backup</span></span>

<span data-ttu-id="6bba2-128">Di seguito è riportato un riepilogo del ciclo di vita del richiedente per il backup:</span><span class="sxs-lookup"><span data-stu-id="6bba2-128">The following is a summary of the requester life cycle for backup:</span></span>

1.  <span data-ttu-id="6bba2-129">Creare un'istanza e inizializzare le interfacce API VSS.</span><span class="sxs-lookup"><span data-stu-id="6bba2-129">Instantiate and initialize VSS API interfaces.</span></span>
2.  <span data-ttu-id="6bba2-130">Contattare i writer e recuperare le informazioni.</span><span class="sxs-lookup"><span data-stu-id="6bba2-130">Contact writers and retrieve their information.</span></span>
3.  <span data-ttu-id="6bba2-131">Scegliere i dati di cui eseguire il backup.</span><span class="sxs-lookup"><span data-stu-id="6bba2-131">Choose data to back up.</span></span>
4.  <span data-ttu-id="6bba2-132">Richiedere una copia shadow del provider.</span><span class="sxs-lookup"><span data-stu-id="6bba2-132">Request a shadow copy of the provider.</span></span>
5.  <span data-ttu-id="6bba2-133">Eseguire il backup dei dati.</span><span class="sxs-lookup"><span data-stu-id="6bba2-133">Back up the data.</span></span>
6.  <span data-ttu-id="6bba2-134">Rilasciare l'interfaccia e la copia shadow.</span><span class="sxs-lookup"><span data-stu-id="6bba2-134">Release the interface and the shadow copy.</span></span>

## <a name="life-cycle-of-a-requester-during-restore"></a><span data-ttu-id="6bba2-135">Ciclo di vita di un richiedente durante il ripristino</span><span class="sxs-lookup"><span data-stu-id="6bba2-135">Life Cycle of a Requester during Restore</span></span>

<span data-ttu-id="6bba2-136">Il ciclo di vita del ripristino non richiede una copia shadow, ma richiede comunque la collaborazione del writer:</span><span class="sxs-lookup"><span data-stu-id="6bba2-136">The restore life cycle does not require a shadow copy, but still requires writer cooperation:</span></span>

1.  <span data-ttu-id="6bba2-137">Creare un'istanza delle interfacce API VSS.</span><span class="sxs-lookup"><span data-stu-id="6bba2-137">Instantiate VSS API interfaces.</span></span>
2.  <span data-ttu-id="6bba2-138">Inizializzare il richiedente per l'operazione di ripristino tramite il caricamento di un documento dei componenti di backup archiviati.</span><span class="sxs-lookup"><span data-stu-id="6bba2-138">Initialize the requester for the restore operation by loading a stored Backup Components Document.</span></span>
3.  <span data-ttu-id="6bba2-139">Recuperare i metadati del writer archiviato e i documenti dei componenti di backup.</span><span class="sxs-lookup"><span data-stu-id="6bba2-139">Retrieve stored Writer Metadata and Backup Components Documents.</span></span>
4.  <span data-ttu-id="6bba2-140">Contattare i writer per inizializzare la collaborazione.</span><span class="sxs-lookup"><span data-stu-id="6bba2-140">Contact the writers to initialize cooperation.</span></span>
5.  <span data-ttu-id="6bba2-141">Verificare la presenza di aggiornamenti del writer nel documento componenti di backup.</span><span class="sxs-lookup"><span data-stu-id="6bba2-141">Check for writer updates to the Backup Components Document.</span></span>
6.  <span data-ttu-id="6bba2-142">Ripristinare i dati.</span><span class="sxs-lookup"><span data-stu-id="6bba2-142">Restore the data.</span></span>

 

 



