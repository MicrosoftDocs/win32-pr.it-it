---
description: Dopo aver eseguito le azioni descritte in Panoramica dell'inizializzazione del ripristino e della panoramica della preparazione per il ripristino, il richiedente ha informazioni sufficienti per iniziare a ripristinare i file.
ms.assetid: 15df39fa-1eb1-4e96-9e26-14470f391de4
title: Panoramica del ripristino dei file effettivi
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6527a10d0880b1e599377abb797449816019ab89
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106310692"
---
# <a name="overview-of-actual-file-restoration"></a><span data-ttu-id="c0c53-103">Panoramica del ripristino dei file effettivi</span><span class="sxs-lookup"><span data-stu-id="c0c53-103">Overview of Actual File Restoration</span></span>

<span data-ttu-id="c0c53-104">Dopo aver eseguito le azioni descritte in [Panoramica dell'inizializzazione del ripristino](overview-of-restore-initialization.md) e [della panoramica della preparazione per il ripristino](overview-of-preparing-for-restore.md), il richiedente ha informazioni sufficienti per iniziare a ripristinare i file.</span><span class="sxs-lookup"><span data-stu-id="c0c53-104">After performing the actions described in [Overview of Restore Initialization](overview-of-restore-initialization.md) and [Overview of Preparing for Restore](overview-of-preparing-for-restore.md), the requester has sufficient information to begin restoring files.</span></span> <span data-ttu-id="c0c53-105">Il ripristino dei file non implica interazioni del writer o la generazione di eventi.</span><span class="sxs-lookup"><span data-stu-id="c0c53-105">File restoration does not involve writer interactions or the generation of events.</span></span> <span data-ttu-id="c0c53-106">Per ulteriori informazioni, vedere [Cenni preliminari sull'elaborazione di un ripristino in VSS](overview-of-processing-a-restore-under-vss.md).</span><span class="sxs-lookup"><span data-stu-id="c0c53-106">For more information, see [Overview of Processing a Restore Under VSS](overview-of-processing-a-restore-under-vss.md).</span></span>

<span data-ttu-id="c0c53-107">Nella tabella seguente viene illustrata la sequenza di azioni ed eventi necessari per ripristinare i file.</span><span class="sxs-lookup"><span data-stu-id="c0c53-107">The following table shows the sequence of actions and events that are required to restore files.</span></span>



| <span data-ttu-id="c0c53-108">Azione del richiedente</span><span class="sxs-lookup"><span data-stu-id="c0c53-108">Requester action</span></span>                                                                                                                                                                                                                                                                                                          | <span data-ttu-id="c0c53-109">Evento</span><span class="sxs-lookup"><span data-stu-id="c0c53-109">Event</span></span> | <span data-ttu-id="c0c53-110">Azione del writer</span><span class="sxs-lookup"><span data-stu-id="c0c53-110">Writer action</span></span> |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------|---------------|
| <span data-ttu-id="c0c53-111">Genera un elenco di set di ripristino per i file nei supporti di backup.</span><span class="sxs-lookup"><span data-stu-id="c0c53-111">Generate a restore set listing for files on backup media.</span></span>                                                                                                                                                                                                                                                                 | <span data-ttu-id="c0c53-112">nessuno</span><span class="sxs-lookup"><span data-stu-id="c0c53-112">None</span></span>  | <span data-ttu-id="c0c53-113">nessuno</span><span class="sxs-lookup"><span data-stu-id="c0c53-113">None</span></span>          |
| <span data-ttu-id="c0c53-114">Gestire le [*destinazioni dirette*](vssgloss-d.md) o il ripristino [*parziale di file*](vssgloss-p.md) (vedere [**IVssComponent:: GetDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtarget), [**IVssComponent:: GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile)).</span><span class="sxs-lookup"><span data-stu-id="c0c53-114">Handle [*directed targets*](vssgloss-d.md) or [*partial file*](vssgloss-p.md) restoration (see [**IVssComponent::GetDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtarget), [**IVssComponent::GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile)).</span></span> | <span data-ttu-id="c0c53-115">nessuno</span><span class="sxs-lookup"><span data-stu-id="c0c53-115">None</span></span>  | <span data-ttu-id="c0c53-116">nessuno</span><span class="sxs-lookup"><span data-stu-id="c0c53-116">None</span></span>          |
| <span data-ttu-id="c0c53-117">Se necessario, ignorare tutti i percorsi di ripristino specificati e ripristinare un nuovo percorso specificato in una precedente chiamata a [**IVssBackupComponents:: AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget).</span><span class="sxs-lookup"><span data-stu-id="c0c53-117">If necessary, ignore all specified restore locations and restore to a new location specified in an earlier call to [**IVssBackupComponents::AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget).</span></span>                                                                                                                       | <span data-ttu-id="c0c53-118">nessuno</span><span class="sxs-lookup"><span data-stu-id="c0c53-118">None</span></span>  | <span data-ttu-id="c0c53-119">nessuno</span><span class="sxs-lookup"><span data-stu-id="c0c53-119">None</span></span>          |
| <span data-ttu-id="c0c53-120">Se il ripristino è incrementale e sono necessari ulteriori ripristini, indicare (vedere [**IVssBackupComponents:: SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores) e [backup incrementali e differenziali](incremental-and-differential-backups.md)).</span><span class="sxs-lookup"><span data-stu-id="c0c53-120">If the restore is incremental and further restores are needed, indicate (see [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores) and [Incremental and Differential Backups](incremental-and-differential-backups.md)).</span></span>                                                     | <span data-ttu-id="c0c53-121">nessuno</span><span class="sxs-lookup"><span data-stu-id="c0c53-121">None</span></span>  | <span data-ttu-id="c0c53-122">nessuno</span><span class="sxs-lookup"><span data-stu-id="c0c53-122">None</span></span>          |
| <span data-ttu-id="c0c53-123">Per sapere se un writer ha modificato il contenuto del documento dei componenti di backup, chiamare [**IVssBackupComponents:: GetWriterComponents**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents).</span><span class="sxs-lookup"><span data-stu-id="c0c53-123">To learn whether a writer has modified the contents of the Backup Components Document, call [**IVssBackupComponents::GetWriterComponents**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents).</span></span> <span data-ttu-id="c0c53-124">Ad esempio, il writer potrebbe aver modificato la destinazione di ripristino.</span><span class="sxs-lookup"><span data-stu-id="c0c53-124">For example, the writer might have changed the restore target.</span></span>                                                                 | <span data-ttu-id="c0c53-125">nessuno</span><span class="sxs-lookup"><span data-stu-id="c0c53-125">None</span></span>  | <span data-ttu-id="c0c53-126">nessuno</span><span class="sxs-lookup"><span data-stu-id="c0c53-126">None</span></span>          |



 

## <a name="requester-actions-during-restoring-files"></a><span data-ttu-id="c0c53-127">Azioni del richiedente durante il ripristino dei file</span><span class="sxs-lookup"><span data-stu-id="c0c53-127">Requester Actions during Restoring Files</span></span>

<span data-ttu-id="c0c53-128">Per la maggior parte dei file nel supporto di backup, il richiedente deve determinare i percorsi originali e le nuove posizioni o i mapping del percorso alternativo che vi si applicano.</span><span class="sxs-lookup"><span data-stu-id="c0c53-128">For most files on the backup media, the requester needs to determine their original locations and any new locations or alternate location mappings that apply to them.</span></span> <span data-ttu-id="c0c53-129">(Vedere [generazione di un set di ripristino](generating-a-restore-set.md) per una descrizione delle procedure consigliate per determinare quali file ripristinare e dove ripristinarli.)</span><span class="sxs-lookup"><span data-stu-id="c0c53-129">(See [Generating a Restore Set](generating-a-restore-set.md) for a discussion of best practices in determining which files to restore and where to restore them.)</span></span>

<span data-ttu-id="c0c53-130">Inoltre, alcuni file potrebbero avere [*destinazioni dirette*](vssgloss-d.md) o supportare il ripristino di [*file parziali*](vssgloss-p.md) .</span><span class="sxs-lookup"><span data-stu-id="c0c53-130">In addition, some files may have [*directed targets*](vssgloss-d.md) or support [*partial file*](vssgloss-p.md) restoration.</span></span> <span data-ttu-id="c0c53-131">Il numero di tali file può essere trovato chiamando [**IVssComponent:: GetDirectedTargetCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtargetcount) e [**IVssComponent:: GetPartialFileCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfilecount)e le informazioni sulle istruzioni di ripristino dettagliate sono reperibili chiamando [**IVssComponent:: AddDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddirectedtarget) e [**IVssComponent:: GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span><span class="sxs-lookup"><span data-stu-id="c0c53-131">The number of such files can be found by calling [**IVssComponent::GetDirectedTargetCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtargetcount) and [**IVssComponent::GetPartialFileCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfilecount), and information on detailed restoration instructions can be found by calling [**IVssComponent::AddDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddirectedtarget) and [**IVssComponent::GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span></span> <span data-ttu-id="c0c53-132">I file parziali e diretti possono far parte di componenti aggiunti in modo implicito o esplicito al backup originale. per ulteriori informazioni, vedere [utilizzo della selezione per il ripristino e i sottocomponenti](working-with-selectability-for-restore-and-subcomponents.md) .</span><span class="sxs-lookup"><span data-stu-id="c0c53-132">(Partial and directed files can be part of components added implicitly or explicitly to the original backup, see [Working with Selectability For Restore and Subcomponents](working-with-selectability-for-restore-and-subcomponents.md) for more information.)</span></span>

<span data-ttu-id="c0c53-133">L'esito positivo o negativo di un ripristino è indicato in base a un componente, usando [**IVssBackupComponents:: SetFileRestoreStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setfilerestorestatus).</span><span class="sxs-lookup"><span data-stu-id="c0c53-133">Success or failure of a restore is indicated on a component-by-component basis using [**IVssBackupComponents::SetFileRestoreStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setfilerestorestatus).</span></span> <span data-ttu-id="c0c53-134">La necessità di ulteriori operazioni di ripristino (in caso di ripristini incrementali o differenziali) viene anche indicata in base a un componente, usando [**IVssBackupComponents:: SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores).</span><span class="sxs-lookup"><span data-stu-id="c0c53-134">The need for further restore operations (in the case of incremental or differential restores) is also indicated on a component-by-component basis using [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores).</span></span>

<span data-ttu-id="c0c53-135">In generale, il servizio Copia Shadow del volume non specifica un meccanismo per il recupero di dati da un supporto di archiviazione, una scelta di supporto di archiviazione o come determinare i file da ripristinare laddove.</span><span class="sxs-lookup"><span data-stu-id="c0c53-135">In general, VSS does not specify a mechanism for retrieving data from a storage media, a choice of storage medium, or how to determine which files should be restored where.</span></span>

<span data-ttu-id="c0c53-136">Tuttavia, per determinati writer, il ripristino dei file può comportare l'utilizzo di un'interfaccia e una procedura personalizzate documentate.</span><span class="sxs-lookup"><span data-stu-id="c0c53-136">However, for certain writers, restoring files may involve the use of a documented custom interface and procedure.</span></span> <span data-ttu-id="c0c53-137">I writer di sistema Windows, che attualmente richiedono tale supporto, sono documentati in [casi di utilizzo VSS speciali](special-vss-usage-cases.md).</span><span class="sxs-lookup"><span data-stu-id="c0c53-137">Windows system writers, which currently require such support, are documented in [Special VSS Usage Cases](special-vss-usage-cases.md).</span></span>

<span data-ttu-id="c0c53-138">In generale, è consigliabile che i file di ogni componente di ogni [*istanza di writer*](vssgloss-w.md) vengano elaborati come unità.</span><span class="sxs-lookup"><span data-stu-id="c0c53-138">In general, it is recommended that the files of each component of each [*writer instance*](vssgloss-w.md) be processed as a unit.</span></span> <span data-ttu-id="c0c53-139">A questo scopo è necessario:</span><span class="sxs-lookup"><span data-stu-id="c0c53-139">This requires the following:</span></span>

-   <span data-ttu-id="c0c53-140">Associazione di ogni file da ripristinare con il componente che lo ha gestito.</span><span class="sxs-lookup"><span data-stu-id="c0c53-140">Associating each file to be restored with the component that managed it.</span></span> <span data-ttu-id="c0c53-141">Questa operazione richiede l'utilizzo di documenti di metadati del writer.</span><span class="sxs-lookup"><span data-stu-id="c0c53-141">This requires the use of Writer Metadata Documents.</span></span>
-   <span data-ttu-id="c0c53-142">Recupero delle informazioni corrette sulla destinazione di ripristino.</span><span class="sxs-lookup"><span data-stu-id="c0c53-142">Obtaining correct restoration target information.</span></span> <span data-ttu-id="c0c53-143">Questa operazione richiede informazioni dal documento componenti di backup.</span><span class="sxs-lookup"><span data-stu-id="c0c53-143">This requires information from the Backup Components Document.</span></span>

 

 



