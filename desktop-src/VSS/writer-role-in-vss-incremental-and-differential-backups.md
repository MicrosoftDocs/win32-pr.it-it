---
description: 'La partecipazione di un writer ai backup incrementali e differenziali avviene in genere durante la gestione di eventi di identificazione (CVssWriter:: onidentifi), PrepareForBackup (CVssWriter: OnPrepareBackup) e PostSnapshot (CVssWriter: OnPostSnapshot).'
ms.assetid: 85c4e003-b531-4283-83aa-dd5cc53f35b1
title: Ruolo writer nei backup incrementali e differenziali VSS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f2cda57d907bed4572f0c0f71f9ee829bee18299
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104526256"
---
# <a name="writer-role-in-vss-incremental-and-differential-backups"></a><span data-ttu-id="fe539-103">Ruolo writer nei backup incrementali e differenziali VSS</span><span class="sxs-lookup"><span data-stu-id="fe539-103">Writer Role in VSS Incremental and Differential Backups</span></span>

<span data-ttu-id="fe539-104">La partecipazione di un writer ai backup incrementali e differenziali avviene in genere durante la gestione di eventi di [*Identificazione*](vssgloss-i.md) ([**CVssWriter:: onidentifi**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify)), [*PrepareForBackup*](vssgloss-p.md) ([**CVssWriter: OnPrepareBackup**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpreparebackup)) e *PostSnapshot* ([**CVssWriter: OnPostSnapshot**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostsnapshot)).</span><span class="sxs-lookup"><span data-stu-id="fe539-104">A writer's participation in incremental and differential backups typically takes place while handling [*Identify*](vssgloss-i.md) ([**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify)), [*PrepareForBackup*](vssgloss-p.md) ([**CVssWriter:OnPrepareBackup**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpreparebackup)), and *PostSnapshot* ([**CVssWriter:OnPostSnapshot**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostsnapshot)) events.</span></span> <span data-ttu-id="fe539-105">Il modo in cui un writer partecipa viene definito in base a come supporta timbri di backup e ora dell'Ultima modifica e se il richiedente che esegue il backup supporta [*operazioni parziali su file*](vssgloss-p.md).</span><span class="sxs-lookup"><span data-stu-id="fe539-105">How a writer participates is shaped by whether it supports backup stamps and last modification times, and whether the requester running the backup supports [*partial file operations*](vssgloss-p.md).</span></span>

## <a name="handling-identify-events-during-incremental-and-differential-backups"></a><span data-ttu-id="fe539-106">Gestione degli eventi di identificazione durante i backup incrementali e differenziali</span><span class="sxs-lookup"><span data-stu-id="fe539-106">Handling Identify Events during Incremental and Differential Backups</span></span>

<span data-ttu-id="fe539-107">Durante la gestione dell'evento di identificazione, i writer stabiliscono l'architettura di base per l'operazione di backup incrementale e differenziale tramite lo schema di backup ([**\_ \_ schema di backup VSS**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema)) e le maschere del tipo di backup delle specifiche file ([**tipo di backup delle \_ specifiche del file \_ \_ \_ VSS**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type))</span><span class="sxs-lookup"><span data-stu-id="fe539-107">While handling the Identify event, writers establish their basic architecture for incremental and differential backup operation through the backup schema ([**VSS\_BACKUP\_SCHEMA**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema)) and file specification backup type ([**VSS\_FILE\_SPEC\_BACKUP\_TYPE**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type)) masks.</span></span>

<span data-ttu-id="fe539-108">Un writer indica le operazioni supportate nel documento di metadati del writer creando una maschera di bit dei [**valori \_ \_ dello schema di backup VSS**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema) e passandola al metodo [**IVssCreateWriterMetadata:: SetBackupSchema**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setbackupschema) .</span><span class="sxs-lookup"><span data-stu-id="fe539-108">A writer indicates which operations it supports in its Writer Metadata Document by creating a bit mask of [**VSS\_BACKUP\_SCHEMA**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema) values and passing it to the [**IVssCreateWriterMetadata::SetBackupSchema**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setbackupschema) method.</span></span> <span data-ttu-id="fe539-109">Con questo, un writer può indicare se supporta quanto segue:</span><span class="sxs-lookup"><span data-stu-id="fe539-109">With this, a writer can indicate whether it supports the following:</span></span>

-   <span data-ttu-id="fe539-110">Backup incrementali (**VSS \_ BS \_ incrementale**)</span><span class="sxs-lookup"><span data-stu-id="fe539-110">Incremental backups (**VSS\_BS\_INCREMENTAL**)</span></span>
-   <span data-ttu-id="fe539-111">Backup differenziali (**\_ \_ differenziale VSS BS**)</span><span class="sxs-lookup"><span data-stu-id="fe539-111">Differential backups (**VSS\_BS\_DIFFERENTIAL**)</span></span>
-   <span data-ttu-id="fe539-112">Non è possibile combinare i backup incrementali e differenziali (**VSS \_ BS \_ Exclusive \_ unincrement \_**)</span><span class="sxs-lookup"><span data-stu-id="fe539-112">Incremental and differential backups cannot be mixed (**VSS\_BS\_EXCLUSIVE\_INCREMENTAL\_DIFFERENTIAL**)</span></span>
-   <span data-ttu-id="fe539-113">Backup incrementali e differenziali con timbri di backup (con **\_ \_ timestamp di VSS BS**)</span><span class="sxs-lookup"><span data-stu-id="fe539-113">Incremental and differential backups using backup stamps (**VSS\_BS\_TIMESTAMPED**)</span></span>
-   <span data-ttu-id="fe539-114">Backup incrementali e differenziali sulla base delle informazioni sull'Ultima modifica di un file (**\_ \_ Ultima \_ modifica di VSS BS**)</span><span class="sxs-lookup"><span data-stu-id="fe539-114">Incremental and differential backups on the basis of information about a file's last modification (**VSS\_BS\_LAST\_MODIFY**)</span></span>

<span data-ttu-id="fe539-115">I writer utilizzano la maschera del tipo di backup specifica file per fornire informazioni a livello di set di file ai richiedenti su come includere i file in un backup incrementale o differenziale.</span><span class="sxs-lookup"><span data-stu-id="fe539-115">Writers use the file specification backup type mask to provide file set level information to requesters on how to include files in an incremental or differential backup.</span></span>

<span data-ttu-id="fe539-116">Un writer può impostare la maschera del tipo di backup delle specifiche file di un set di file quando aggiunge il set di file a un componente creando una maschera di bit dei valori del [**tipo di backup delle \_ specifiche del file \_ \_ \_ VSS**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type) e passandolo a [**IVssCreateWriterMetadata:: AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), [**IVssCreateWriterMetadata:: AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles)o [**IVssCreateWriterMetadata:: AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup).</span><span class="sxs-lookup"><span data-stu-id="fe539-116">A writer can set a file set's file specification backup type mask when it adds the file set to a component by creating a bit mask of [**VSS\_FILE\_SPEC\_BACKUP\_TYPE**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type) values and passing it to [**IVssCreateWriterMetadata::AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), [**IVssCreateWriterMetadata::AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles), or [**IVssCreateWriterMetadata::AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup).</span></span>

<span data-ttu-id="fe539-117">Sono disponibili tre valori "backup obbligatorio" dell'enumerazione [**del \_ \_ tipo di \_ backup \_ delle specifiche del file VSS**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type) che interessano i backup differenziali e incrementali:</span><span class="sxs-lookup"><span data-stu-id="fe539-117">There are three "backup required" values of the [**VSS\_FILE\_SPEC\_BACKUP\_TYPE**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type) enumeration that affect differential and incremental backups:</span></span>

-   <span data-ttu-id="fe539-118">**VSS \_ FSBT \_ tutti i \_ backup \_ necessari**</span><span class="sxs-lookup"><span data-stu-id="fe539-118">**VSS\_FSBT\_ALL\_BACKUP\_REQUIRED**</span></span>
-   <span data-ttu-id="fe539-119">**è \_ \_ necessario il backup incrementale FSBT VSS \_ \_**</span><span class="sxs-lookup"><span data-stu-id="fe539-119">**VSS\_FSBT\_INCREMENTAL\_BACKUP\_REQUIRED**</span></span>
-   <span data-ttu-id="fe539-120">**è \_ \_ necessario il \_ backup DIFFERENZIAle FSBT VSS \_**</span><span class="sxs-lookup"><span data-stu-id="fe539-120">**VSS\_FSBT\_DIFFERENTIAL\_BACKUP\_REQUIRED**</span></span>

<span data-ttu-id="fe539-121">Sono disponibili tre valori "copia shadow obbligatoria":</span><span class="sxs-lookup"><span data-stu-id="fe539-121">There are three "shadow copy required" values:</span></span>

-   <span data-ttu-id="fe539-122">**VSS \_ FSBT \_ tutti gli \_ snapshot \_ necessari**</span><span class="sxs-lookup"><span data-stu-id="fe539-122">**VSS\_FSBT\_ALL\_SNAPSHOT\_REQUIRED**</span></span>
-   <span data-ttu-id="fe539-123">**\_ \_ snapshot incrementale FSBT \_ VSS \_ obbligatorio**</span><span class="sxs-lookup"><span data-stu-id="fe539-123">**VSS\_FSBT\_INCREMENTAL\_SNAPSHOT\_REQUIRED**</span></span>
-   <span data-ttu-id="fe539-124">**\_ \_ snapshot differenziale FSBT VSS \_ \_ obbligatorio**</span><span class="sxs-lookup"><span data-stu-id="fe539-124">**VSS\_FSBT\_DIFFERENTIAL\_SNAPSHOT\_REQUIRED**</span></span>

<span data-ttu-id="fe539-125">I set di file contrassegnati con un tipo di backup della specifica del file "copia shadow obbligatoria" indicano se un richiedente deve copiare i dati da una copia shadow durante l'esecuzione di operazioni di backup INCREMENTAli, DIFFERENZIAli o tutte (che includono operazioni sia incrementali che differenziali).</span><span class="sxs-lookup"><span data-stu-id="fe539-125">File sets tagged with a file specification backup type of "shadow copy required" indicate whether a requester needs to copy data from a shadow copy when performing INCREMENTAL, DIFFERENTIAL, or ALL (which includes both incremental and differential operations) backup operations.</span></span>

<span data-ttu-id="fe539-126">Il flag "backup obbligatorio", applicato a operazioni INCREMENTAli, DIFFERENZIAli o di backup, indica che il writer prevede una copia della versione corrente del set di file in modo che sia disponibile dopo il ripristino di qualsiasi operazione di backup.</span><span class="sxs-lookup"><span data-stu-id="fe539-126">The "backup required" flag, applied to INCREMENTAL, DIFFERENTIAL, or ALL backup operations, indicates that the writer expects a copy of the current version of the file set to be available following the restore of any backup operation.</span></span> <span data-ttu-id="fe539-127">In genere, ciò significa che se un set di file è contrassegnato con "backup obbligatorio", tutti i relativi membri verranno copiati nei supporti di backup durante un backup incrementale o differenziale, indipendentemente dal momento in cui si è verificata l'ultima modifica o backup.</span><span class="sxs-lookup"><span data-stu-id="fe539-127">Typically, this means that if a file set is tagged with "backup required," all its members will be copied to backup media during an incremental or differential backup, regardless of when their backup or modification last occurred.</span></span>

<span data-ttu-id="fe539-128">Per impostazione predefinita, i set di file vengono aggiunti ai componenti con un tipo di backup della specifica del file **VSS \_ FSBT \_ tutti i \_ backup \_ necessari** \| **VSS \_ FSBT \_ tutti gli \_ snapshot \_ necessari**.</span><span class="sxs-lookup"><span data-stu-id="fe539-128">By default, file sets are added to components with a file specification backup type of **VSS\_FSBT\_ALL\_BACKUP\_REQUIRED** \| **VSS\_FSBT\_ALL\_SNAPSHOT\_REQUIRED**.</span></span> <span data-ttu-id="fe539-129">Pertanto, a meno che uno sviluppatore di writer non decida di non utilizzare l'impostazione predefinita (scegliendo un altro tipo di backup di specifica file, usando operazioni di file parziali o usando file differenziati), i file nella maggior parte dei set di file verranno in genere copiati interamente nei supporti di backup.</span><span class="sxs-lookup"><span data-stu-id="fe539-129">Therefore, unless a writer developer decides not to use the default (by choosing another file specification backup type, using partial file operations, or using differenced files), the files in most file sets will typically be copied in their entirety to backup media.</span></span>

<span data-ttu-id="fe539-130">A questo punto, il documento di metadati del writer del writer è completamente popolato con la maggior parte delle informazioni che un richiedente dovrà avviare un backup differenziale o incrementale.</span><span class="sxs-lookup"><span data-stu-id="fe539-130">At this point, the writer's Writer Metadata Document is fully populated with most of information a requester will need to start a differential or incremental backup.</span></span> <span data-ttu-id="fe539-131">La specifica di aggiunta di informazioni a livello di file o set di file per supportare il backup verrà gestita durante l'evento [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) .</span><span class="sxs-lookup"><span data-stu-id="fe539-131">Addition specification of file set or file level information to support the backup will be handled during the [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) event.</span></span>

## <a name="handling-prepareforbackup-events-during-incremental-and-differential-backups"></a><span data-ttu-id="fe539-132">Gestione degli eventi PrepareForBackup durante i backup incrementali e differenziali</span><span class="sxs-lookup"><span data-stu-id="fe539-132">Handling PrepareForBackup Events during Incremental and Differential Backups</span></span>

<span data-ttu-id="fe539-133">Prima che il richiedente proceda con l'operazione di backup effettiva, i writer possono modificare la specifica di un backup [*incrementale*](vssgloss-i.md) o [*differenziale*](vssgloss-d.md) modificando il documento relativo ai componenti di backup del richiedente tramite l'interfaccia [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) .</span><span class="sxs-lookup"><span data-stu-id="fe539-133">Before the requester proceeds with the actual backup operation, writers can modify the specification of an [*incremental*](vssgloss-i.md) or [*differential*](vssgloss-d.md) backup by altering the requester's Backup Components Document through the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface.</span></span>

<span data-ttu-id="fe539-134">Poiché i writer utilizzano l'interfaccia [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) , in genere eseguono tali preparazioni durante la gestione dell'evento [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) .</span><span class="sxs-lookup"><span data-stu-id="fe539-134">Because the writers use the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface, they typically perform these preparations while handling the [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) event.</span></span>

<span data-ttu-id="fe539-135">In [**CVssWriter: OnPrepareBackup**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpreparebackup), i writer possono specificare in modo più preciso la modalità di valutazione di alcuni file per il backup, specificare quali meccanismi devono essere usati per eseguirne il backup ed eventualmente impostare timbri di backup.</span><span class="sxs-lookup"><span data-stu-id="fe539-135">In [**CVssWriter:OnPrepareBackup**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpreparebackup), writers can more precisely specify how some files are to be evaluated for backup, specify what mechanisms should be used in backing them up, and possibly set backup stamps.</span></span>

<dl> <dt>

<span data-ttu-id="fe539-136"><span id="Partial_Files"></span><span id="partial_files"></span><span id="PARTIAL_FILES"></span>File parziali</span><span class="sxs-lookup"><span data-stu-id="fe539-136"><span id="Partial_Files"></span><span id="partial_files"></span><span id="PARTIAL_FILES"></span>Partial Files</span></span>
</dt> <dd>

<span data-ttu-id="fe539-137">Se un richiedente li supporta, un writer può scegliere di disporre di un backup incrementale o differenziale implementato usando operazioni parziali su file.</span><span class="sxs-lookup"><span data-stu-id="fe539-137">If a requester supports them, a writer can choose to have an incremental or differential backup implemented by using partial file operations.</span></span> <span data-ttu-id="fe539-138">(I writer possono determinare se un richiedente supporta operazioni parziali sui file chiamando [**CVssWriter:: IsPartialFileSupportEnabled**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-ispartialfilesupportenabled)).</span><span class="sxs-lookup"><span data-stu-id="fe539-138">(Writers can determine if a requester supports partial file operations by calling [**CVssWriter::IsPartialFileSupportEnabled**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-ispartialfilesupportenabled).)</span></span>

<span data-ttu-id="fe539-139">I writer utilizzano [**IVssComponent:: AddPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-addpartialfile) per indicare le parti dei file selezionati di cui eseguire il backup durante l'operazione incrementale o differenziale.</span><span class="sxs-lookup"><span data-stu-id="fe539-139">Writers use [**IVssComponent::AddPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-addpartialfile) to indicate those portions of the selected files to be backed up during the incremental or differential operation.</span></span> <span data-ttu-id="fe539-140">I richiedenti devono rispettare questa specifica e devono sempre eseguire il backup delle sezioni specificate dei file.</span><span class="sxs-lookup"><span data-stu-id="fe539-140">Requesters must respect this specification, and must always back up the specified sections of the files.</span></span> <span data-ttu-id="fe539-141">Per ulteriori informazioni sulle operazioni di file parziali, vedere [utilizzo dei file parziali](working-with-partial-files.md) .</span><span class="sxs-lookup"><span data-stu-id="fe539-141">(See [Working with Partial Files](working-with-partial-files.md) for more information on partial file operations.)</span></span>

<span data-ttu-id="fe539-142">Se si usa [**IVssComponent:: AddPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-addpartialfile), un writer può aggiungere un file al backup che non è stato aggiunto in precedenza a uno dei relativi set di componenti (per [**IVssCreateWriterMetadata:: AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), [**IVssCreateWriterMetadata:: AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles)o [**IVssCreateWriterMetadata:: AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup)) come file parziale.</span><span class="sxs-lookup"><span data-stu-id="fe539-142">Using [**IVssComponent::AddPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-addpartialfile), a writer can add a file to the backup that was not previously added to one of its component sets (by [**IVssCreateWriterMetadata::AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), [**IVssCreateWriterMetadata::AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles), or [**IVssCreateWriterMetadata::AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup)) as a partial file.</span></span> <span data-ttu-id="fe539-143">Tutti i nuovi file aggiunti al backup in questo modo devono trovarsi in un volume che è già stato replicato per questo backup.</span><span class="sxs-lookup"><span data-stu-id="fe539-143">Any new files added to the backup in this manner must be on a volume that already is being shadow copied for this backup.</span></span>

<span data-ttu-id="fe539-144">Se un file è incluso in operazioni di file parziali, sostituisce qualsiasi tipo di backup delle specifiche di file, che viene ignorato.</span><span class="sxs-lookup"><span data-stu-id="fe539-144">If a file is involved with partial file operations, this supersedes any file specification backup type, which is ignored.</span></span>

</dd> <dt>

<span data-ttu-id="fe539-145"><span id="Differenced_Files"></span><span id="differenced_files"></span><span id="DIFFERENCED_FILES"></span>File differenziati</span><span class="sxs-lookup"><span data-stu-id="fe539-145"><span id="Differenced_Files"></span><span id="differenced_files"></span><span id="DIFFERENCED_FILES"></span>Differenced Files</span></span>
</dt> <dd>

<span data-ttu-id="fe539-146">I writer che supportano un ultimo schema di backup modificato (**\_ \_ schema** del servizio Copia Shadow del volume) possono aggiungere [*file*](vssgloss-d.md) differenziati a un backup incrementale o differenziale.</span><span class="sxs-lookup"><span data-stu-id="fe539-146">Writers that support a last modified backup schema (**VSS\_BS\_SCHEMA**) can add [*differenced files*](vssgloss-d.md) to an incremental or differential backup.</span></span>

<span data-ttu-id="fe539-147">Quando si specifica un file differenziato, un writer USA [**IVssComponent:: AddDifferencedFileByLastModifyTime**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddifferencedfilesbylastmodifytime) e specifica un percorso, un nome di file e un flag ricorsivo. tali elementi, tuttavia, non devono corrispondere a un set di file incluso in alcun componente.</span><span class="sxs-lookup"><span data-stu-id="fe539-147">In specifying a differenced file, a writer uses [**IVssComponent::AddDifferencedFileByLastModifyTime**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddifferencedfilesbylastmodifytime) and specifies a path, a file name, and a recursive flag—however, these do not have to match a file set included in any component.</span></span>

<span data-ttu-id="fe539-148">Un writer può infatti aggiungere un file non aggiunto in precedenza a uno dei relativi set di componenti (da [**IVssCreateWriterMetadata:: AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), [**IVssCreateWriterMetadata:: AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles)o [**IVssCreateWriterMetadata:: AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup)) al backup come file differenziato.</span><span class="sxs-lookup"><span data-stu-id="fe539-148">In fact, a writer can add a file not previously added to one of its component sets (by [**IVssCreateWriterMetadata::AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), [**IVssCreateWriterMetadata::AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles), or [**IVssCreateWriterMetadata::AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup)) to the backup as a differenced file.</span></span> <span data-ttu-id="fe539-149">Tutti i nuovi file aggiunti al backup in questo modo devono trovarsi in un volume che è già stato replicato per questo backup.</span><span class="sxs-lookup"><span data-stu-id="fe539-149">Any new files added to the backup in this manner must be on a volume that already is being shadow copied for this backup.</span></span>

<span data-ttu-id="fe539-150">In genere, un writer specifica anche l'ora dell'Ultima modifica quando si aggiunge un file differenziato, in base al meccanismo di cronologia del writer.</span><span class="sxs-lookup"><span data-stu-id="fe539-150">Typically, a writer will also specify a time of last modification when adding a differenced file—based on the writer's own history mechanism.</span></span> <span data-ttu-id="fe539-151">L'ora dell'Ultima modifica, se specificata, deve essere sempre utilizzata dai richiedenti per determinare se un file deve essere incluso in un backup incrementale o differenziale.</span><span class="sxs-lookup"><span data-stu-id="fe539-151">This last modification time, if specified, must always be used by requesters in determining if a file needs to be included in an incremental or differential backup.</span></span>

<span data-ttu-id="fe539-152">Un writer può scegliere di non specificare l'ora dell'Ultima modifica quando si aggiunge un file differenziato a un set di backup incrementale o differenziale.</span><span class="sxs-lookup"><span data-stu-id="fe539-152">A writer may choose not to specify a last modification time when adding a differenced file to an incremental or differential backup set.</span></span> <span data-ttu-id="fe539-153">In tal caso, i richiedenti possono usare i propri meccanismi, ad esempio i log dei backup precedenti o informazioni file system, per determinare se il file differenziato deve essere incluso in un backup incrementale o differenziale.</span><span class="sxs-lookup"><span data-stu-id="fe539-153">If this is the case, requesters are free to use their own mechanisms—for instance, logs of previous backups or file system information—to determine whether the differenced file should be included in an incremental or differential backup.</span></span>

<span data-ttu-id="fe539-154">Il tipo di backup specifica file di qualsiasi file differenziato viene ignorato.</span><span class="sxs-lookup"><span data-stu-id="fe539-154">The file specification backup type of any differenced file is ignored.</span></span>

</dd> <dt>

<span data-ttu-id="fe539-155"><span id="Backup_Stamps"></span><span id="backup_stamps"></span><span id="BACKUP_STAMPS"></span>Timbri di backup</span><span class="sxs-lookup"><span data-stu-id="fe539-155"><span id="Backup_Stamps"></span><span id="backup_stamps"></span><span id="BACKUP_STAMPS"></span>Backup Stamps</span></span>
</dt> <dd>

<span data-ttu-id="fe539-156">I writer che supportano i timbri di backup (**\_ \_ timestamp del VSS BS**) hanno un proprio formato privato per archiviare le informazioni relative al momento in cui si è verificato l'ultimo backup.</span><span class="sxs-lookup"><span data-stu-id="fe539-156">Writers that support backup stamps (**VSS\_BS\_TIMESTAMP**) have their own private format for storing information about when a backup last occurred.</span></span> <span data-ttu-id="fe539-157">Queste informazioni vengono generate dal writer durante il backup.</span><span class="sxs-lookup"><span data-stu-id="fe539-157">This information is generated by the writer during backup.</span></span>

<span data-ttu-id="fe539-158">Il timbro di backup viene archiviato nel documento componenti di backup sotto forma di stringa tramite il metodo [**IVssComponent:: SetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupstamp) .</span><span class="sxs-lookup"><span data-stu-id="fe539-158">The backup stamp is stored in the Backup Components Document as a string by the [**IVssComponent::SetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupstamp) method.</span></span> <span data-ttu-id="fe539-159">Il timbro di backup si applica a tutti i set di file nel componente (o set di componenti) corrispondente all'istanza di [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent).</span><span class="sxs-lookup"><span data-stu-id="fe539-159">The backup stamp applies to all file sets in the component (or component set) corresponding to the instance of the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent).</span></span>

<span data-ttu-id="fe539-160">Se un richiedente ha accesso all'indicatore di backup di un backup precedente, sarà reso disponibile al writer chiamando [**IVssBackupComponents:: SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp).</span><span class="sxs-lookup"><span data-stu-id="fe539-160">If a requester has access to the backup stamp of a previous backup, it will have made it available to the writer by calling [**IVssBackupComponents::SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp).</span></span>

<span data-ttu-id="fe539-161">Un writer può quindi esaminare questo timestamp usando [**IVssComponent:: GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp).</span><span class="sxs-lookup"><span data-stu-id="fe539-161">A writer then can examine this time stamp using [**IVssComponent::GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp).</span></span>

<span data-ttu-id="fe539-162">Si noti che il richiedente archivia solo e restituisce la stringa contenente l'indicatore di backup.</span><span class="sxs-lookup"><span data-stu-id="fe539-162">Note that the requester merely stores and returns the string containing the backup stamp.</span></span> <span data-ttu-id="fe539-163">Non è in grado di conoscere il formato della stringa o come utilizzarlo; solo il writer ha tali informazioni.</span><span class="sxs-lookup"><span data-stu-id="fe539-163">It does not know anything about the string's format or how to use it; only the writer has that information.</span></span>

<span data-ttu-id="fe539-164">Un writer può scegliere di aggiornare l'indicatore di backup corrente usando [**IVssComponent:: SetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupstamp) dopo che è stato chiamato [**IVssComponent:: GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp), in modo da registrare nel proprio formato la data dell'operazione di backup incrementale o differenziale corrente.</span><span class="sxs-lookup"><span data-stu-id="fe539-164">A writer may choose to update the current backup stamp using [**IVssComponent::SetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupstamp) after it has called [**IVssComponent::GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp), thus recording in its own format the date of the current incremental or differential backup operation.</span></span>

</dd> </dl>

 

 



