---
description: La configurazione delle operazioni di ripristino inizia effettivamente durante il backup dei dati, quando i writer specificano nei documenti dei metadati del writer la modalità di ripristino dei dati.
ms.assetid: b1f948cd-d3b0-4637-b76d-b54a74bb5948
title: Impostazione di metodi di ripristino VSS
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 412cb699fb791a973e280f63fec03bd2854ccd1d
ms.sourcegitcommit: 37f276b5d887a3aad04b1ba86e390dea9d87e591
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/04/2021
ms.locfileid: "104234415"
---
# <a name="setting-vss-restore-methods"></a><span data-ttu-id="9a50d-103">Impostazione di metodi di ripristino VSS</span><span class="sxs-lookup"><span data-stu-id="9a50d-103">Setting VSS Restore Methods</span></span>

<span data-ttu-id="9a50d-104">La configurazione delle operazioni di ripristino inizia effettivamente durante il backup dei dati, quando i writer specificano nei documenti dei metadati del writer la modalità di ripristino dei dati.</span><span class="sxs-lookup"><span data-stu-id="9a50d-104">The configuration of restore operations actually begins during data backup, when writers specify, in their Writer Metadata Documents, how their data should be restored.</span></span>

<span data-ttu-id="9a50d-105">Queste specifiche, definite come metodi di [*ripristino*](vssgloss-r.md) o destinazioni di [*ripristino*](vssgloss-r.md)originali, possono essere modificate durante il ripristino da parte di writer che impostano nuove destinazioni di ripristino o da richiedenti che si ripristinano in nuovi percorsi (vedere [percorsi di backup e ripristino non predefiniti](non-default-backup-and-restore-locations.md)).</span><span class="sxs-lookup"><span data-stu-id="9a50d-105">These specifications, referred to either as [*restore methods*](vssgloss-r.md) or original [*restore targets*](vssgloss-r.md), can be modified during restore by writers setting new restore targets or by requesters restoring to new locations (see [Non-Default Backup and Restore Locations](non-default-backup-and-restore-locations.md)).</span></span>

<span data-ttu-id="9a50d-106">Chiamando [**IVssCreateWriterMetadata:: SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod), un writer indica il metodo di ripristino da utilizzare nel documento di metadati del writer.</span><span class="sxs-lookup"><span data-stu-id="9a50d-106">By calling [**IVssCreateWriterMetadata::SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod), a writer indicates which restore method should be used in its Writer Metadata Document.</span></span> <span data-ttu-id="9a50d-107">Il metodo Restore è impostato su Wide writer e applicato a tutti i file in tutti i componenti gestiti da un writer.</span><span class="sxs-lookup"><span data-stu-id="9a50d-107">The restore method is set writer wide and applied to all files in all components that a writer manages.</span></span>

<span data-ttu-id="9a50d-108">Un richiedente ottiene (e deve rispettare) queste informazioni chiamando [**IVssExamineWriterMetadata:: GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span><span class="sxs-lookup"><span data-stu-id="9a50d-108">A requester obtains (and must respect) this information by calling [**IVssExamineWriterMetadata::GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span></span>

<span data-ttu-id="9a50d-109">Il metodo Restore è definito da un'enumerazione [**\_ RESTOREMETHOD \_**](/windows/desktop/api/VsWriter/ne-vswriter-vss_restoremethod_enum) di enumerazione VSS, che viene passata a [**IVssCreateWriterMetadata:: SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod) e restituita da [**IVssExamineWriterMetadata:: GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span><span class="sxs-lookup"><span data-stu-id="9a50d-109">The restore method is defined by a [**VSS\_RESTOREMETHOD\_ENUM**](/windows/desktop/api/VsWriter/ne-vswriter-vss_restoremethod_enum) enumeration, which is passed to [**IVssCreateWriterMetadata::SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod) and returned from [**IVssExamineWriterMetadata::GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span></span>

<span data-ttu-id="9a50d-110">Il documento dei metadati del writer supporta i seguenti metodi di ripristino validi (un metodo di ripristino di VSS \_ RME non \_ definito indica un errore del writer).</span><span class="sxs-lookup"><span data-stu-id="9a50d-110">The Writer Metadata Document supports the following valid restore methods (a restore method of VSS\_RME\_UNDEFINED indicates a writer error).</span></span> <span data-ttu-id="9a50d-111">Le figure riepilogano il modo in cui devono essere implementati i vari metodi di ripristino supportati e definiti (il servizio Copia Shadow del volume \_ RME \_ personalizzato non è associato a una figura, perché per definizione è specifico del writer e deve seguire le API e la documentazione specifiche del writer):</span><span class="sxs-lookup"><span data-stu-id="9a50d-111">The figures summarize how the various supported and defined restore methods should be implemented (VSS\_RME\_CUSTOM has no figure associated with it, because by definition it is specific to the writer and must follow the specific writer APIs and documentation):</span></span>

-   <span data-ttu-id="9a50d-112">\_ripristino RME \_ VSS \_ se \_ non è \_ presente.</span><span class="sxs-lookup"><span data-stu-id="9a50d-112">VSS\_RME\_RESTORE\_IF\_NOT\_THERE.</span></span> <span data-ttu-id="9a50d-113">Ripristinare i file del componente su disco se nessuno dei file è già presente sul disco.</span><span class="sxs-lookup"><span data-stu-id="9a50d-113">Restore component files to disk if none of the files are on the disk already.</span></span> <span data-ttu-id="9a50d-114">Lo stato del file di destinazione deve essere controllato dopo un evento di [**preripristino**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) .</span><span class="sxs-lookup"><span data-stu-id="9a50d-114">Target file status should be checked after a [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) event.</span></span>
    <span data-ttu-id="9a50d-115">![Diagramma che mostra un albero per la risoluzione dei problemi per VSS_RME_RESTORE_IF_NOT_THERE.](images/rint.png)</span><span class="sxs-lookup"><span data-stu-id="9a50d-115">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_IF_NOT_THERE.](images/rint.png)</span></span>
-   <span data-ttu-id="9a50d-116">\_ripristino RME VSS se è in \_ grado di \_ \_ \_ sostituire.</span><span class="sxs-lookup"><span data-stu-id="9a50d-116">VSS\_RME\_RESTORE\_IF\_CAN\_REPLACE.</span></span> <span data-ttu-id="9a50d-117">Ripristinare i file su disco se tutti i file possono essere sostituiti.</span><span class="sxs-lookup"><span data-stu-id="9a50d-117">Restore files to disk if all the files can be replaced.</span></span> <span data-ttu-id="9a50d-118">Lo stato del file di destinazione deve essere controllato dopo un evento di [**preripristino**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) .</span><span class="sxs-lookup"><span data-stu-id="9a50d-118">Target file status should be checked after a [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) event.</span></span>
    <span data-ttu-id="9a50d-119">![Diagramma che mostra un albero per la risoluzione dei problemi per VSS_RME_RESTORE_IF_CAN_REPLACE.](images/ricr.png)</span><span class="sxs-lookup"><span data-stu-id="9a50d-119">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_IF_CAN_REPLACE.](images/ricr.png)</span></span>
-   <span data-ttu-id="9a50d-120">avvio dell'arresto del ripristino di VSS \_ RME \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="9a50d-120">VSS\_RME\_STOP\_RESTORE\_START.</span></span> <span data-ttu-id="9a50d-121">Un servizio verrà arrestato prima di ripristinare i file.</span><span class="sxs-lookup"><span data-stu-id="9a50d-121">A service will be stopped prior to restoring the files.</span></span>
    <span data-ttu-id="9a50d-122">![Diagramma che mostra un albero per la risoluzione dei problemi per VSS_RME_STOP_RESTORE_START.](images/srr.png)</span><span class="sxs-lookup"><span data-stu-id="9a50d-122">![Diagram that shows a troubleshooting tree for VSS_RME_STOP_RESTORE_START.](images/srr.png)</span></span>
-   <span data-ttu-id="9a50d-123">\_ripristino RME \_ VSS \_ in \_ un \_ percorso alternativo.</span><span class="sxs-lookup"><span data-stu-id="9a50d-123">VSS\_RME\_RESTORE\_TO\_ALTERNATE\_LOCATION.</span></span> <span data-ttu-id="9a50d-124">Ripristinare i file su disco in un percorso alternativo.</span><span class="sxs-lookup"><span data-stu-id="9a50d-124">Restore files to disk in an alternate location.</span></span> <span data-ttu-id="9a50d-125">I mapping dei percorsi alternativi vengono specificati nel documento di metadati del writer.</span><span class="sxs-lookup"><span data-stu-id="9a50d-125">The alternate location mappings are specified in the Writer Metadata Document.</span></span>
    <span data-ttu-id="9a50d-126">![Diagramma che mostra un albero per la risoluzione dei problemi per VSS_RME_RESTORE_TO_ALTERNATE_LOCATION.](images/rtal.png)</span><span class="sxs-lookup"><span data-stu-id="9a50d-126">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_TO_ALTERNATE_LOCATION.](images/rtal.png)</span></span>
-   <span data-ttu-id="9a50d-127">\_ripristino RME \_ VSS \_ al \_ riavvio.</span><span class="sxs-lookup"><span data-stu-id="9a50d-127">VSS\_RME\_RESTORE\_AT\_REBOOT.</span></span> <span data-ttu-id="9a50d-128">Quando il computer viene riavviato, i file possono essere ripristinati (sovrascritti).</span><span class="sxs-lookup"><span data-stu-id="9a50d-128">Cause files to be restored (overwritten) when the computer is rebooted.</span></span>
    <span data-ttu-id="9a50d-129">![Diagramma che mostra un albero per la risoluzione dei problemi per VSS_RME_RESTORE_AT_REBOOT.](images/rar.png)</span><span class="sxs-lookup"><span data-stu-id="9a50d-129">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_AT_REBOOT.](images/rar.png)</span></span>
-   <span data-ttu-id="9a50d-130">\_ripristino RME \_ VSS \_ al \_ riavvio \_ se \_ non è in grado di \_ sostituire.</span><span class="sxs-lookup"><span data-stu-id="9a50d-130">VSS\_RME\_RESTORE\_AT\_REBOOT\_IF\_CANNOT\_REPLACE.</span></span> <span data-ttu-id="9a50d-131">Se non è stato possibile ripristinare un file su disco in un sistema in esecuzione, questo viene ripristinato (sovrascritto) al riavvio del computer.</span><span class="sxs-lookup"><span data-stu-id="9a50d-131">If a file could not be restored to disk on a running system, then it is restored (overwritten) when the computer is rebooted.</span></span>
    <span data-ttu-id="9a50d-132">![Diagramma che mostra un forVSS_RME_RESTORE_AT_REBOOT_IF_CANNOT_REPLACE dell'albero per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="9a50d-132">![Diagram that shows a troubleshooting tree forVSS_RME_RESTORE_AT_REBOOT_IF_CANNOT_REPLACE.</span></span> ](images/raricr.png)
-   <span data-ttu-id="9a50d-133">VSS \_ RME \_ personalizzato.</span><span class="sxs-lookup"><span data-stu-id="9a50d-133">VSS\_RME\_CUSTOM.</span></span> <span data-ttu-id="9a50d-134">Nessuno dei metodi predefiniti funzionerà; per eseguire l'operazione di ripristino, è necessario che l'applicazione di backup utilizzi API specializzate.</span><span class="sxs-lookup"><span data-stu-id="9a50d-134">None of the predefined methods will work; the backup application must use specialized APIs to perform the restore operation.</span></span> <span data-ttu-id="9a50d-135">Per questo metodo di backup, il richiedente deve comprendere completamente il writer in questione.</span><span class="sxs-lookup"><span data-stu-id="9a50d-135">For this backup method, the requester must completely understand the writer in question.</span></span> <span data-ttu-id="9a50d-136">Vedere [casi di utilizzo VSS speciali](special-vss-usage-cases.md) per le istanze attualmente supportate.</span><span class="sxs-lookup"><span data-stu-id="9a50d-136">See [Special VSS Usage Cases](special-vss-usage-cases.md) for currently supported instances.</span></span>

 

 



