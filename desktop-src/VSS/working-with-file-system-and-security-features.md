---
description: Di seguito sono riportati alcuni suggerimenti per l'interoperabilità corretta con diverse funzionalità di file system e sicurezza introdotte in Windows Vista e Windows Server 2008.
ms.assetid: 3e8a1fd2-59e5-4f18-aafc-0ce5ac1e1cfa
title: Utilizzo delle funzionalità di sicurezza e file System
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 12903599beb7ed153965f4b803ad8147fd32067a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104129271"
---
# <a name="working-with-file-system-and-security-features"></a><span data-ttu-id="b4c8f-103">Utilizzo delle funzionalità di sicurezza e file System</span><span class="sxs-lookup"><span data-stu-id="b4c8f-103">Working with File System and Security Features</span></span>

<span data-ttu-id="b4c8f-104">Di seguito sono riportati alcuni suggerimenti per l'interoperabilità corretta con diverse funzionalità di file system e sicurezza introdotte in Windows Vista e Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-104">The following are hints for interoperating correctly with various file system and security features that were introduced in Windows Vista and Windows Server 2008.</span></span>

## <a name="interoperability-with-transactions"></a><span data-ttu-id="b4c8f-105">Interoperabilità con transazioni</span><span class="sxs-lookup"><span data-stu-id="b4c8f-105">Interoperability with Transactions</span></span>

<span data-ttu-id="b4c8f-106">Per supportare le transazioni, VSS garantisce che sia la gestione transazioni kernel (KTM) che la Distributed Transaction Coordinator (DTC) siano bloccate prima della creazione delle copie shadow del volume.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-106">To support transactions, VSS ensures that both the Kernel Transaction Manager (KTM) and the Distributed Transaction Coordinator (DTC) are frozen prior to the creation of volume shadow copies.</span></span> <span data-ttu-id="b4c8f-107">Se il sistema non riesce a bloccare o scongelare KTM o DTC, il metodo [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) può restituire gli errori di timeout seguenti:</span><span class="sxs-lookup"><span data-stu-id="b4c8f-107">If the system fails to freeze or thaw KTM or DTC, the following timeout errors may be returned by the [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) method:</span></span>

<dl> <span data-ttu-id="b4c8f-108">\_ \_ \_ timeout blocco transazioni VSS \_ E</span><span class="sxs-lookup"><span data-stu-id="b4c8f-108">VSS\_E\_TRANSACTION\_FREEZE\_TIMEOUT</span></span>  
<span data-ttu-id="b4c8f-109">\_timeout di \_ \_ sblocco transazione VSS E \_</span><span class="sxs-lookup"><span data-stu-id="b4c8f-109">VSS\_E\_TRANSACTION\_THAW\_TIMEOUT</span></span>  
</dl>

<span data-ttu-id="b4c8f-110">Se il richiedente riceve uno di questi codici di errore, deve ritentare la creazione della copia shadow.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-110">If the requester receives one of these error codes, it must retry the shadow copy creation.</span></span>

<span data-ttu-id="b4c8f-111">Anche le operazioni di registro e file system possono essere transazionali.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-111">Registry and file system operations can also be transacted.</span></span> <span data-ttu-id="b4c8f-112">Nel caso del registro di sistema, il writer del registro di sistema è responsabile di garantire la coerenza delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-112">In the case of the registry, the registry writer is responsible for ensuring transactional consistency.</span></span> <span data-ttu-id="b4c8f-113">Nel caso di operazioni di file system transazionale NTFS (TxF), il provider di sistema è responsabile di garantire la coerenza delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-113">In the case of Transactional NTFS (TxF) file system operations, the system provider is responsible for ensuring transactional consistency.</span></span> <span data-ttu-id="b4c8f-114">Questa operazione viene eseguita montando la copia shadow come di lettura/scrittura dopo che è stata creata per consentire il ripristino automatico.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-114">This is accomplished by mounting the shadow copy as read/write after it is created to allow for auto-recovery.</span></span> <span data-ttu-id="b4c8f-115">Durante la fase di recupero automatico, KTM esegue il rollback di tutte le transazioni incomplete.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-115">During the auto-recovery phase, KTM rolls back any incomplete transactions.</span></span>

## <a name="identifying-and-creating-hard-links"></a><span data-ttu-id="b4c8f-116">Identificazione e creazione di collegamenti reali</span><span class="sxs-lookup"><span data-stu-id="b4c8f-116">Identifying and Creating Hard Links</span></span>

<span data-ttu-id="b4c8f-117">Quando si esegue il backup dei file, un'applicazione di backup deve identificare tutti i collegamenti reali a ogni file per evitare di eseguire il backup dello stesso file più di una volta.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-117">When backing up files, a backup application must identify all hard links to each file to avoid backing up the same file more than once.</span></span> <span data-ttu-id="b4c8f-118">Per l'enumerazione dei collegamenti reali sono disponibili due nuove funzioni: [**FindFirstFileNameW**](/windows/win32/api/fileapi/nf-fileapi-findfirstfilenamew) e [**FindNextFileNameW**](/windows/win32/api/fileapi/nf-fileapi-findnextfilenamew).</span><span class="sxs-lookup"><span data-stu-id="b4c8f-118">Two new functions are available for enumerating hard links: [**FindFirstFileNameW**](/windows/win32/api/fileapi/nf-fileapi-findfirstfilenamew) and [**FindNextFileNameW**](/windows/win32/api/fileapi/nf-fileapi-findnextfilenamew).</span></span>

<span data-ttu-id="b4c8f-119">Analogamente, quando si ripristinano i file, l'applicazione di backup deve ripristinare i collegamenti reali utilizzando la funzione [**CreateHardLink**](/windows/win32/api/winbase/nf-winbase-createhardlinka) .</span><span class="sxs-lookup"><span data-stu-id="b4c8f-119">Similarly, when restoring files, the backup application must restore hard links using the [**CreateHardLink**](/windows/win32/api/winbase/nf-winbase-createhardlinka) function.</span></span>

<span data-ttu-id="b4c8f-120">Le applicazioni di backup devono anche dichiarare \_ il \_ privilegio di nome backup se durante la fase di backup e il \_ nome del ripristino se \_ durante la fase di ripristino.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-120">Backup applications must also assert the SE\_BACKUP\_NAME privilege during the backup phase and the SE\_RESTORE\_NAME during the restore phase.</span></span>

## <a name="permissions-and-privileges-required-by-backup-applications"></a><span data-ttu-id="b4c8f-121">Autorizzazioni e privilegi richiesti dalle applicazioni di backup</span><span class="sxs-lookup"><span data-stu-id="b4c8f-121">Permissions and Privileges Required by Backup Applications</span></span>

<span data-ttu-id="b4c8f-122">Per le applicazioni di backup che ripristinano i file di sistema sono necessari i privilegi seguenti:</span><span class="sxs-lookup"><span data-stu-id="b4c8f-122">Backup applications that restore system files require the following privileges:</span></span>

<dl> <span data-ttu-id="b4c8f-123">\_nome backup \_ se</span><span class="sxs-lookup"><span data-stu-id="b4c8f-123">SE\_BACKUP\_NAME</span></span>  
<span data-ttu-id="b4c8f-124">\_nome ripristino \_ se</span><span class="sxs-lookup"><span data-stu-id="b4c8f-124">SE\_RESTORE\_NAME</span></span>  
<span data-ttu-id="b4c8f-125">\_nome sicurezza \_ se</span><span class="sxs-lookup"><span data-stu-id="b4c8f-125">SE\_SECURITY\_NAME</span></span>  
<span data-ttu-id="b4c8f-126">\_nome del \_ proprietario \_</span><span class="sxs-lookup"><span data-stu-id="b4c8f-126">SE\_TAKE\_OWNERSHIP\_NAME</span></span>  
</dl>

<span data-ttu-id="b4c8f-127">Anche le applicazioni di backup devono richiedere \_ i diritti di accesso del proprietario della scrittura durante la fase di ripristino.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-127">Backup applications must also request WRITE\_OWNER access rights during the restore phase.</span></span>

## <a name="windows-media-digital-rights-management"></a><span data-ttu-id="b4c8f-128">Windows Media Digital Rights Management</span><span class="sxs-lookup"><span data-stu-id="b4c8f-128">Windows Media Digital Rights Management</span></span>

<span data-ttu-id="b4c8f-129">Il client Windows Media Digital Rights Management (DRM) gestisce una directory di file di licenza e di stato sensibili nella directory% ProgramData% \\ Microsoft \\ Windows \\ DRM.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-129">Windows Media Digital Rights Management (DRM) client maintains a directory of sensitive state and license files in the %ProgramData%\\Microsoft\\Windows\\DRM directory.</span></span> <span data-ttu-id="b4c8f-130">I file in questa directory devono essere eliminati contemporaneamente ai file temporanei e di cache.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-130">The files in this directory should be purged at the same time as temporary and cache files.</span></span> <span data-ttu-id="b4c8f-131">Per assicurarsi che il client DRM di Windows rimanga in uno stato coerente, è necessario evitare di eseguire il backup o il ripristino di questi file.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-131">To ensure that the Windows DRM client remains in a consistent state, you must avoid backing up or restoring these files.</span></span> <span data-ttu-id="b4c8f-132">Questa directory è elencata nella chiave del registro di sistema FilesNotToBackup.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-132">This directory is listed in the FilesNotToBackup registry key.</span></span> <span data-ttu-id="b4c8f-133">Per ulteriori informazioni sulla chiave FilesNotToBackup, vedere [generazione di un set di backup](generating-a-backup-set.md).</span><span class="sxs-lookup"><span data-stu-id="b4c8f-133">For more information about the FilesNotToBackup key, see [Generating a Backup Set](generating-a-backup-set.md).</span></span>

## <a name="user-account-control"></a><span data-ttu-id="b4c8f-134">Controllo dell'account utente</span><span class="sxs-lookup"><span data-stu-id="b4c8f-134">User Account Control</span></span>

<span data-ttu-id="b4c8f-135">L'introduzione di controllo dell'account utente in Windows Vista indica che, se non specificato diversamente, le applicazioni devono essere eseguite con un account utente standard.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-135">The introduction of User Account Control (UAC) in Windows Vista means that unless specified otherwise, applications must run under a standard user account.</span></span> <span data-ttu-id="b4c8f-136">Inoltre, la funzionalità di virtualizzazione di file e registro di sistema di controllo dell'account utente modifica i percorsi in cui vengono archiviati i dati utente.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-136">Additionally, the file and registry virtualization feature of UAC alters the locations where user data is stored.</span></span> <span data-ttu-id="b4c8f-137">Per altre informazioni su come usare UAC e la virtualizzazione di file e registro di sistema, vedere i riferimenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="b4c8f-137">For more information about how to work with UAC and file and registry virtualization, see the following references:</span></span>

<dl>

<span data-ttu-id="b4c8f-138">[Windows Vista e Windows Server 2008 Developer Story: requisiti per lo sviluppo di applicazioni Windows Vista per il controllo dell'account utente (UAC)](/previous-versions/aa905330(v=msdn.10))</span><span class="sxs-lookup"><span data-stu-id="b4c8f-138">[The Windows Vista and Windows Server 2008 Developer Story: Windows Vista Application Development Requirements for User Account Control (UAC)](/previous-versions/aa905330(v=msdn.10))</span></span>  
<span data-ttu-id="b4c8f-139">[Requisiti per lo sviluppo di applicazioni Windows Vista per la compatibilità con controllo dell'account utente](/previous-versions/dotnet/articles/bb530410(v=msdn.10))</span><span class="sxs-lookup"><span data-stu-id="b4c8f-139">[Windows Vista Application Development Requirements for User Account Control Compatibility](/previous-versions/dotnet/articles/bb530410(v=msdn.10))</span></span>  
[<span data-ttu-id="b4c8f-140">Applicazione di patch al controllo dell'account utente (UAC)</span><span class="sxs-lookup"><span data-stu-id="b4c8f-140">User Account Control (UAC) Patching</span></span>](../msi/user-account-control--uac--patching.md)  
</dl>

## <a name="bitlocker-drive-encryption"></a><span data-ttu-id="b4c8f-141">Crittografia unità BitLocker</span><span class="sxs-lookup"><span data-stu-id="b4c8f-141">BitLocker Drive Encryption</span></span>

<span data-ttu-id="b4c8f-142">Crittografia unità BitLocker è una nuova funzionalità di Windows Vista Enterprise, Windows Vista Ultimate e Windows Server 2008 che offre avvio sicuro e crittografia completa del volume.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-142">BitLocker Drive Encryption is a new feature in Windows Vista Enterprise, Windows Vista Ultimate, and Windows Server 2008 that offers secure startup and full volume encryption.</span></span> <span data-ttu-id="b4c8f-143">La comprensione di questa funzionalità è importante per gli sviluppatori di applicazioni di backup che eseguono ripristini offline in cui potrebbe essere necessario ripristinare i dati in un'unità crittografata.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-143">Understanding this feature is important for developers of backup applications that perform offline restores where data may need to be restored onto an encrypted drive.</span></span>

<span data-ttu-id="b4c8f-144">Per ripristinare i dati in un'unità crittografata, seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="b4c8f-144">To restore data onto an encrypted drive, perform the following steps:</span></span>

1.  <span data-ttu-id="b4c8f-145">Sbloccare l'unità.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-145">Unlock the drive.</span></span>
2.  <span data-ttu-id="b4c8f-146">Disattivare Crittografia unità BitLocker.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-146">Turn off BitLocker Drive Encryption.</span></span>
3.  <span data-ttu-id="b4c8f-147">Eseguire il ripristino.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-147">Perform the restore.</span></span>
4.  <span data-ttu-id="b4c8f-148">Avviare il sistema operativo ripristinato e attivare Crittografia unità BitLocker.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-148">Boot into the restored operating system and turn on BitLocker Drive Encryption.</span></span>

<span data-ttu-id="b4c8f-149">Per informazioni dettagliate sui Crittografia unità BitLocker, inclusa una guida dettagliata, vedere [crittografia unità BitLocker](https://www.microsoft.com/technet/windowsvista/security/bitlockr.mspx) sul sito Web Microsoft TechNet per Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="b4c8f-149">For detailed information about BitLocker Drive Encryption, including a step-by-step guide, see [BitLocker Drive Encryption](https://www.microsoft.com/technet/windowsvista/security/bitlockr.mspx) on the Microsoft TechNet Windows Vista website.</span></span> <span data-ttu-id="b4c8f-150">Per informazioni sul provider WMI Crittografia unità BitLocker, vedere [provider di crittografia unità BitLocker](../secprov/bitlocker-drive-encryption-provider.md).</span><span class="sxs-lookup"><span data-stu-id="b4c8f-150">For information about the BitLocker Drive Encryption WMI provider, see [BitLocker Drive Encryption Provider](../secprov/bitlocker-drive-encryption-provider.md).</span></span>

 

 
