---
description: Specifica di un contesto di attivazione predefinito
ms.assetid: 4d9a8552-7098-458d-a592-45524871cce5
title: Specifica di un contesto di attivazione predefinito
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 32cf0225a8e4290a09f7e6524a4b3ef47f9c4c4e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103968302"
---
# <a name="specifying-a-default-activation-context"></a><span data-ttu-id="d0fd2-103">Specifica di un contesto di attivazione predefinito</span><span class="sxs-lookup"><span data-stu-id="d0fd2-103">Specifying a Default Activation Context</span></span>

<span data-ttu-id="d0fd2-104">Quando l'applicazione o il componente crea un nuovo processo, Windows cerca un manifesto dell'applicazione predefinito.</span><span class="sxs-lookup"><span data-stu-id="d0fd2-104">When your application or component creates a new process, Windows searches for a default application manifest.</span></span> <span data-ttu-id="d0fd2-105">Si noti che un manifesto incluso come risorsa nell'applicazione ha la precedenza su un manifesto esterno.</span><span class="sxs-lookup"><span data-stu-id="d0fd2-105">Note that a manifest included as a resource in the application takes precedence over an external manifest.</span></span> <span data-ttu-id="d0fd2-106">Il contesto di attivazione predefinito è il primo contesto di attivazione attivo prima che venga attivato un altro contesto di attivazione.</span><span class="sxs-lookup"><span data-stu-id="d0fd2-106">The default activation context is the first activation context that is active before any other activation context has been activated.</span></span> <span data-ttu-id="d0fd2-107">Questo contesto di attivazione è sempre attivo, a meno che non si attivino altri contesti.</span><span class="sxs-lookup"><span data-stu-id="d0fd2-107">This activation context is always active unless you activate other contexts.</span></span> <span data-ttu-id="d0fd2-108">Se si definisce \_ \_ Abilitazione dell'isolamento quando si compila l'applicazione o il componente, le chiamate come [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance), [**LoadLibrary**](/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibrarya)e [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) possono eseguire la gestione automatica del contesto.</span><span class="sxs-lookup"><span data-stu-id="d0fd2-108">If you define ISOLATION\_AWARE\_ENABLED when you compile your application or component, calls like [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance), [**LoadLibrary**](/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibrarya), and [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) can perform automatic context management.</span></span>

<span data-ttu-id="d0fd2-109">Il caricatore consente a un'applicazione di specificare il contesto di attivazione predefinito con due metodi.</span><span class="sxs-lookup"><span data-stu-id="d0fd2-109">The loader allows an application to specify its default activation context by two methods.</span></span> <span data-ttu-id="d0fd2-110">È possibile inserire il file manifesto nelle risorse dell'eseguibile e il caricatore lo troverà.</span><span class="sxs-lookup"><span data-stu-id="d0fd2-110">You can put the manifest file in the resources of the executable and the loader will find it.</span></span> <span data-ttu-id="d0fd2-111">Equivale a inserire il file manifesto nella tabella delle risorse dell'eseguibile.</span><span class="sxs-lookup"><span data-stu-id="d0fd2-111">This is the same as putting the manifest file in the executable's resource table.</span></span> <span data-ttu-id="d0fd2-112">È possibile inserire il manifesto in un file denominato *MyApp*. exe. Manifesto nella stessa directory di *MyApp*. exe e il caricatore lo trova durante la ricerca di *MyApp*. exe.</span><span class="sxs-lookup"><span data-stu-id="d0fd2-112">You can place the manifest in a file named *Myapp*.exe.Manifest in the same directory as *Myapp*.exe, and the loader finds it while looking for *Myapp*.exe.</span></span>

<span data-ttu-id="d0fd2-113">Se non si utilizza nessuno di questi metodi, l'applicazione viene avviata con il contesto di attivazione predefinito del sistema, che contiene un set minimo di assembly.</span><span class="sxs-lookup"><span data-stu-id="d0fd2-113">If you use none of these methods, the application starts with the system default activation context, which contains a minimal set of assemblies.</span></span>

<span data-ttu-id="d0fd2-114">Un modo migliore per utilizzare la gestione automatica del contesto consiste nel compilare l'applicazione con l'impostazione abilitata per l'isolamento \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="d0fd2-114">A better way of using automatic context management is by compiling your application with ISOLATION\_AWARE\_ENABLED defined.</span></span> <span data-ttu-id="d0fd2-115">Il metodo consigliato consiste nell'impostare questa impostazione sulla riga di comando del compilatore per l'intero progetto da compilare anziché per l'impostazione di singoli file o intestazioni di origine.</span><span class="sxs-lookup"><span data-stu-id="d0fd2-115">The recommended method is to set this on the compiler's command line for the entire project being built rather than being set in individual source files or headers.</span></span> <span data-ttu-id="d0fd2-116">In questo modo, la maggior parte delle API Win32 è in grado di riconoscere i contesti di attivazione e come gestirli.</span><span class="sxs-lookup"><span data-stu-id="d0fd2-116">This makes most Win32 APIs aware of activation contexts and how to manage them.</span></span> <span data-ttu-id="d0fd2-117">Anziché dover eseguire la propria gestione del contesto di attivazione, è sufficiente inserire un manifesto nella tabella delle risorse all'ID risorsa ISOLATIONAWARE \_ \_ ID risorsa manifesto \_ (valore numerico 2), di tipo \_ manifesto RT (valore numerico 24). Funzioni come [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa), [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance)e [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) attivano automaticamente questo contesto prima di effettuare la chiamata effettiva.</span><span class="sxs-lookup"><span data-stu-id="d0fd2-117">Instead of having to do your own activation context management, you simply need to place a manifest in your resource table at resource ID ISOLATIONAWARE\_MANIFEST\_RESOURCE\_ID (numeric value 2), of type RT\_MANIFEST (numeric value 24.) Functions such as [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa), [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance), and [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) then automatically activate this context before making the actual call.</span></span>

<span data-ttu-id="d0fd2-118">Si noti che se si \_ \_ esegue la compilazione con l'abilitazione dell'isolamento abilitata, non è possibile eseguire anche la gestione del contesto di attivazione.</span><span class="sxs-lookup"><span data-stu-id="d0fd2-118">Note that if you compile with ISOLATION\_AWARE\_ENABLED defined, you cannot also do your own activation context management.</span></span> <span data-ttu-id="d0fd2-119">Con \_ \_ l'abilitazione dell'isolamento abilitato, Windows ignora qualsiasi creazione del contesto di attivazione dinamica che l'applicazione può tentare di eseguire tra le chiamate a [**ActivateActCtx**](/windows/desktop/api/Winbase/nf-winbase-activateactctx) e [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) .</span><span class="sxs-lookup"><span data-stu-id="d0fd2-119">With ISOLATION\_AWARE\_ENABLED defined, Windows ignores any dynamic activation context creation your application may attempt to do between [**ActivateActCtx**](/windows/desktop/api/Winbase/nf-winbase-activateactctx) and [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) calls.</span></span> <span data-ttu-id="d0fd2-120">Ciò significa che quando l'applicazione utilizza l' \_ isolamento \_ abilitato è necessario assicurarsi che il manifesto contenga un elenco completo di tutti gli assembly richiesti dal componente.</span><span class="sxs-lookup"><span data-stu-id="d0fd2-120">This means that when your application uses ISOLATION\_AWARE\_ENABLED you must make sure that the manifest contains a complete list of all assemblies that your component requires.</span></span>

 

 
