---
description: Specifica il modello di hosting del provider. L'impostazione di questa proprietà determina il caricamento del provider in un processo host condiviso con un livello di privilegio specificato.
ms.assetid: 1e5c778d-cd29-449b-88e2-fe0c90d0edcd
ms.tgt_platform: multiple
title: Hosting e sicurezza del provider
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: db6b88a5727f34fbb76baf62dcdf0488e5eb9eb7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106316562"
---
# <a name="provider-hosting-and-security"></a><span data-ttu-id="13b9d-104">Hosting e sicurezza del provider</span><span class="sxs-lookup"><span data-stu-id="13b9d-104">Provider Hosting and Security</span></span>

<span data-ttu-id="13b9d-105">La proprietà [**HostingModel**](--win32provider.md) nell'istanza **\_ \_ Win32Provider** che rappresenta il provider specifica il modello di hosting del provider.</span><span class="sxs-lookup"><span data-stu-id="13b9d-105">The [**HostingModel**](--win32provider.md) property in the **\_\_Win32Provider** instance that represents your provider specifies the provider hosting model.</span></span> <span data-ttu-id="13b9d-106">L'impostazione di questa proprietà determina il caricamento del provider in un processo host condiviso con un livello di privilegio specificato.</span><span class="sxs-lookup"><span data-stu-id="13b9d-106">Setting this property causes the provider to be loaded into a shared host process that has a specified level of privilege.</span></span>

## <a name="shared-provider-host-process"></a><span data-ttu-id="13b9d-107">Processo host provider condiviso</span><span class="sxs-lookup"><span data-stu-id="13b9d-107">Shared Provider Host Process</span></span>

<span data-ttu-id="13b9d-108">WMI risiede in un host del servizio condiviso con molti altri servizi.</span><span class="sxs-lookup"><span data-stu-id="13b9d-108">WMI resides in a shared service host with several other services.</span></span> <span data-ttu-id="13b9d-109">Per evitare di arrestare tutti i servizi in caso di errore di un provider, i provider vengono caricati in un processo host separato denominato "Wmiprvse.exe".</span><span class="sxs-lookup"><span data-stu-id="13b9d-109">To avoid stopping all the services when a provider fails, providers are loaded into a separate host process named "Wmiprvse.exe".</span></span> <span data-ttu-id="13b9d-110">È possibile eseguire più di un processo con questo nome.</span><span class="sxs-lookup"><span data-stu-id="13b9d-110">More than one process with this name can be running.</span></span> <span data-ttu-id="13b9d-111">Ognuno di essi può essere eseguito con un account diverso con una sicurezza variabile.</span><span class="sxs-lookup"><span data-stu-id="13b9d-111">Each can run under a different account with varying security.</span></span> <span data-ttu-id="13b9d-112">Tenere presente che, a partire da Windows Vista, utilizzare il comando [**WinMgmt**](winmgmt.md) per eseguire WMI in un processo separato utilizzando una porta fissa.</span><span class="sxs-lookup"><span data-stu-id="13b9d-112">Be aware that, starting with Windows Vista, use the [**winmgmt**](winmgmt.md) command to run WMI in a separate process by itself using a fixed port.</span></span> <span data-ttu-id="13b9d-113">Per ulteriori informazioni, vedere [connessione a WMI in modalità remota a partire da vista](connecting-to-wmi-remotely-starting-with-vista.md).</span><span class="sxs-lookup"><span data-stu-id="13b9d-113">For more information, see [Connecting to WMI Remotely Starting with Vista](connecting-to-wmi-remotely-starting-with-vista.md).</span></span>

<span data-ttu-id="13b9d-114">L'host condiviso può essere eseguito con uno degli account di sistema seguenti in un processo host Wmiprvse.exe:</span><span class="sxs-lookup"><span data-stu-id="13b9d-114">The shared host can run under one of the following system accounts in a Wmiprvse.exe host process:</span></span>

-   [<span data-ttu-id="13b9d-115">LocalSystem</span><span class="sxs-lookup"><span data-stu-id="13b9d-115">LocalSystem</span></span>](/windows/desktop/Services/localsystem-account)
-   [<span data-ttu-id="13b9d-116">NetworkService</span><span class="sxs-lookup"><span data-stu-id="13b9d-116">NetworkService</span></span>](/windows/desktop/Services/networkservice-account)
-   [<span data-ttu-id="13b9d-117">LocalService</span><span class="sxs-lookup"><span data-stu-id="13b9d-117">LocalService</span></span>](/windows/desktop/Services/localservice-account)

<span data-ttu-id="13b9d-118">Un provider può inoltre essere un server COM locale (con estensione exe) o self-hosted che non richiede un host del provider WMI.</span><span class="sxs-lookup"><span data-stu-id="13b9d-118">A provider can also be a local COM server (.exe), or self-hosted, which does not require a WMI provider host.</span></span>

## <a name="setting-the-hosting-model"></a><span data-ttu-id="13b9d-119">Impostazione del modello di hosting</span><span class="sxs-lookup"><span data-stu-id="13b9d-119">Setting the Hosting Model</span></span>

<span data-ttu-id="13b9d-120">Poiché LocalSystem è un account con privilegi, è consigliabile impostare [**HostingModel**](--win32provider.md) su **NetworkServiceHost** quando un provider viene eseguito in un Wmiprvse.exe processo.</span><span class="sxs-lookup"><span data-stu-id="13b9d-120">Because LocalSystem is a privileged account, it is recommended that you set [**HostingModel**](--win32provider.md) to **NetworkServiceHost** when a provider is running in a Wmiprvse.exe process.</span></span> <span data-ttu-id="13b9d-121">L'account NetworkServiceHost è per i servizi che non richiedono privilegi estesi, ma che devono comunicare in remoto con altri sistemi.</span><span class="sxs-lookup"><span data-stu-id="13b9d-121">NetworkServiceHost account is for services that do not require extensive privileges, but do need to communicate remotely with other systems.</span></span>

<span data-ttu-id="13b9d-122">Se non si imposta un valore per la proprietà [**HostingModel**](--win32provider.md) , WMI imposta un valore predefinito di **NetworkServiceHostOrSelfHost**.</span><span class="sxs-lookup"><span data-stu-id="13b9d-122">If you do not set a value for the [**HostingModel**](--win32provider.md) property, WMI will set a default value of **NetworkServiceHostOrSelfHost**.</span></span> <span data-ttu-id="13b9d-123">Se il valore **HostingModel** è impostato su **LocalSystemHost**, WMI utilizza la traccia per generare gli eventi 5603 e 5604 nel registro eventi di Windows.</span><span class="sxs-lookup"><span data-stu-id="13b9d-123">If the **HostingModel** value is set to **LocalSystemHost**, WMI uses tracing to generate events 5603 and 5604 in the Windows Event Log.</span></span> <span data-ttu-id="13b9d-124">Poiché l'account [LocalSystem](/windows/desktop/Services/localsystem-account) locale è con privilegi elevati, questa impostazione non è consigliata.</span><span class="sxs-lookup"><span data-stu-id="13b9d-124">Because the local [LocalSystem](/windows/desktop/Services/localsystem-account) account is highly privileged, this setting is not recommended.</span></span> <span data-ttu-id="13b9d-125">È possibile visualizzare questi eventi nel **Visualizzatore eventi**.</span><span class="sxs-lookup"><span data-stu-id="13b9d-125">You can view these events in the **Event Viewer**.</span></span> <span data-ttu-id="13b9d-126">Per ulteriori informazioni, vedere [traccia dell'attività WMI](tracing-wmi-activity.md).</span><span class="sxs-lookup"><span data-stu-id="13b9d-126">For more information, see [Tracing WMI Activity](tracing-wmi-activity.md).</span></span>

<span data-ttu-id="13b9d-127">Impostare la proprietà [**HostingModel**](--win32provider.md) per i provider disaccoppiati come "disaccoppiata: com".</span><span class="sxs-lookup"><span data-stu-id="13b9d-127">Set the [**HostingModel**](--win32provider.md) property for decoupled providers as "Decoupled:Com".</span></span> <span data-ttu-id="13b9d-128">I provider creati aggiungendo classi di strumentazione da [**Microsoft. Management. Infrastructure**](/previous-versions//hh872326(v=vs.85)) nel .NET Framework sono provider disaccoppiati.</span><span class="sxs-lookup"><span data-stu-id="13b9d-128">Providers created by adding instrumentation classes from [**Microsoft.Management.Infrastructure**](/previous-versions//hh872326(v=vs.85)) in the .NET Framework are decoupled providers.</span></span> <span data-ttu-id="13b9d-129">(**System. Management. Instrumentation** non è più supportato). Per ulteriori informazioni sulla creazione di un provider disaccoppiato, vedere [incorporamento di un provider in un'applicazione](incorporating-a-provider-in-an-application.md).</span><span class="sxs-lookup"><span data-stu-id="13b9d-129">(**System.Management.Instrumentation** is no longer supported.) For more information about creating a decoupled provider, see [Incorporating a Provider in an Application](incorporating-a-provider-in-an-application.md).</span></span>

<span data-ttu-id="13b9d-130">Il modello di hosting viene specificato nella proprietà [**HostingModel**](--win32provider.md) dell'istanza **\_ \_ Win32Provider** che rappresenta il provider.</span><span class="sxs-lookup"><span data-stu-id="13b9d-130">The hosting model is specified in the [**HostingModel**](--win32provider.md) property in the **\_\_Win32Provider** instance that represents your provider.</span></span>

<span data-ttu-id="13b9d-131">**Per impostare il modello di hosting per un provider**</span><span class="sxs-lookup"><span data-stu-id="13b9d-131">**To set the hosting model for a provider**</span></span>

1.  <span data-ttu-id="13b9d-132">Nel file MOF che definisce il provider creare un'istanza di [**\_ \_ Win32Provider**](--win32provider.md).</span><span class="sxs-lookup"><span data-stu-id="13b9d-132">In the MOF file that defines your provider, create an instance of [**\_\_Win32Provider**](--win32provider.md).</span></span>
2.  <span data-ttu-id="13b9d-133">Assegnare un nome al provider nella proprietà **Name** e assegnare l'identificatore di classe (CLSID) dell'oggetto com del provider alla proprietà **CLSID** .</span><span class="sxs-lookup"><span data-stu-id="13b9d-133">Assign a name to the provider in the **Name** property and assign the class identifier (CLSID) of the provider COM object to the **Clsid** property.</span></span>

    <span data-ttu-id="13b9d-134">Nell'esempio di codice seguente viene assegnato un nome alla proprietà del **nome** e il CSLID dell'oggetto com del provider alla proprietà **CLSID** .</span><span class="sxs-lookup"><span data-stu-id="13b9d-134">The following code example assigns a name to the **Name** property and the CSLID of the provider COM object to the **Clsid** property.</span></span>

    ``` syntax
    Instance of __Win32Provider as $NewProvider
    {
        Name = "MyProvider";
        Clsid = "{.......}";
    }
    ```

3.  <span data-ttu-id="13b9d-135">Assegnare il valore host condiviso appropriato alla proprietà [**HostingModel**](--win32provider.md) .</span><span class="sxs-lookup"><span data-stu-id="13b9d-135">Assign the appropriate shared host value to the [**HostingModel**](--win32provider.md) property.</span></span> <span data-ttu-id="13b9d-136">I valori host condivisi, ad esempio "NetworkServiceHost", sono definiti nella proprietà **HostingSpecification** della classe [**\_ provider MSFT**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) .</span><span class="sxs-lookup"><span data-stu-id="13b9d-136">Shared host values such as "NetworkServiceHost" are defined in the **HostingSpecification** property of [**MSFT\_Providers**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) class.</span></span>

    <span data-ttu-id="13b9d-137">Nell'esempio di codice seguente viene assegnato un valore host condiviso alla proprietà [**HostingModel**](--win32provider.md) .</span><span class="sxs-lookup"><span data-stu-id="13b9d-137">The following code example assigns a shared host value to the [**HostingModel**](--win32provider.md) property.</span></span>

    ``` syntax
    HostingModel = "NetworkServiceHost";
    ```

<span data-ttu-id="13b9d-138">Nell'esempio di codice seguente viene illustrato come registrare un provider in NetworkServiceHost.</span><span class="sxs-lookup"><span data-stu-id="13b9d-138">The following code example shows how to register a provider in NetworkServiceHost.</span></span>

``` syntax
Instance of __Win32Provider as $NewProvider
{
    Name = "MyProvider";
    Clsid = "{.......}";
    HostingModel = "NetworkServiceHost";
}
```

<span data-ttu-id="13b9d-139">Se si dispone di più provider, è possibile raggrupparli in uno specifico host del servizio registrando il provider in modo che risieda nell'istanza specifica.</span><span class="sxs-lookup"><span data-stu-id="13b9d-139">If you have multiple providers, you can group them into a specific service host by registering your provider so that it resides in the specific instance.</span></span>

<span data-ttu-id="13b9d-140">Nell'esempio di codice riportato di seguito viene inoltre registrato un provider in NetworkServiceHost.</span><span class="sxs-lookup"><span data-stu-id="13b9d-140">The following code example also registers a provider in NetworkServiceHost.</span></span> <span data-ttu-id="13b9d-141">La classe dei [**\_ provider MSFT**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) definisce i valori per i due valori che combinano per creare la proprietà **HostingModel** di [**\_ \_ Win32Provider**](--win32provider.md) .</span><span class="sxs-lookup"><span data-stu-id="13b9d-141">The [**MSFT\_Providers**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) class defines values for the two values that combine to create the [**\_\_Win32Provider**](--win32provider.md) **HostingModel** property.</span></span> <span data-ttu-id="13b9d-142">Nell'esempio, il valore "NetworkServiceHost" deriva dalla proprietà **HostingSpecification** dei **\_ provider MSFT** e "localservicehost" deriva dalla proprietà **HostingGroup** .</span><span class="sxs-lookup"><span data-stu-id="13b9d-142">In the example, "NetworkServiceHost" value comes from the **HostingSpecification** property of **MSFT\_Providers** and "LocalServiceHost" comes from the **HostingGroup** property.</span></span>

``` syntax
Instance of __Win32Provider as $NewProvider
{
    Name = "MyProvider";
    Clsid = "{.......}";
    HostingModel = "NetworkServiceHost:MySharedHost";
}
```

<span data-ttu-id="13b9d-143">Esistono problemi di sviluppo speciali per i provider che non sono disaccoppiati e sono ospitati nel processo Wmiprvse.</span><span class="sxs-lookup"><span data-stu-id="13b9d-143">Special development issues exist for providers that are not decoupled and are hosted in the Wmiprvse process.</span></span> <span data-ttu-id="13b9d-144">Per ulteriori informazioni, vedere [provider di debug](debugging-providers.md).</span><span class="sxs-lookup"><span data-stu-id="13b9d-144">For more information, see [Debugging Providers](debugging-providers.md).</span></span>

<span data-ttu-id="13b9d-145">Se si scrive un provider che contiene la registrazione di una proprietà o di un provider di classi, non tutti i modelli di threading funzionano.</span><span class="sxs-lookup"><span data-stu-id="13b9d-145">If you are writing a provider that contains property or class provider registration, not all threading models work.</span></span> <span data-ttu-id="13b9d-146">Per ulteriori informazioni, vedere [scelta della registrazione corretta](choosing-correct-registration.md).</span><span class="sxs-lookup"><span data-stu-id="13b9d-146">For more information, see [Choosing Correct Registration](choosing-correct-registration.md).</span></span>

## <a name="hostingmodel-values-for-in-process-providers"></a><span data-ttu-id="13b9d-147">Valori HostingModel per provider di In-Process</span><span class="sxs-lookup"><span data-stu-id="13b9d-147">HostingModel Values for In-Process Providers</span></span>

<span data-ttu-id="13b9d-148">Nell'elenco seguente sono elencati i valori del modello di hosting del provider da utilizzare nell'istanza [**\_ \_ Win32Provider**](--win32provider.md) per i provider eseguiti in un processo Wmiprvse.exe.</span><span class="sxs-lookup"><span data-stu-id="13b9d-148">The following list lists the provider hosting model values to use in the [**\_\_Win32Provider**](--win32provider.md) instance for providers that run in a Wmiprvse.exe process.</span></span>



| <span data-ttu-id="13b9d-149">Valore in [ **\_ \_ Win32Provider. HostingModel**](--win32provider.md)</span><span class="sxs-lookup"><span data-stu-id="13b9d-149">Value in [**\_\_Win32Provider.HostingModel**](--win32provider.md)</span></span> | <span data-ttu-id="13b9d-150">Descrizione</span><span class="sxs-lookup"><span data-stu-id="13b9d-150">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|--------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="13b9d-151">**SelfHost**</span><span class="sxs-lookup"><span data-stu-id="13b9d-151">**SelfHost**</span></span>                                                       | <span data-ttu-id="13b9d-152">Il provider inizia a usare l'implementazione del server locale anziché in-process.</span><span class="sxs-lookup"><span data-stu-id="13b9d-152">The provider starts using the local server implementation instead of in-process.</span></span> <span data-ttu-id="13b9d-153">Il contesto di sicurezza del processo in cui viene eseguito il provider determina il contesto di sicurezza del provider.</span><span class="sxs-lookup"><span data-stu-id="13b9d-153">The security context of the process in which the provider runs determines the provider security context.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="13b9d-154">**LocalSystemHost**</span><span class="sxs-lookup"><span data-stu-id="13b9d-154">**LocalSystemHost**</span></span>                                                | <span data-ttu-id="13b9d-155">Il provider, se implementato come in-process, viene caricato in un host del provider condiviso in esecuzione nel contesto [LocalSystem](/windows/desktop/Services/localsystem-account) .</span><span class="sxs-lookup"><span data-stu-id="13b9d-155">The provider, if implemented as in-process, is loaded into a shared provider host running under [LocalSystem](/windows/desktop/Services/localsystem-account) context.</span></span> <span data-ttu-id="13b9d-156">A partire da Windows Vista, **LocalSystemHost** non è più il modello di hosting predefinito se il [**HostingModel**](--win32provider.md) di un provider WMI (**\_ \_ Win32Provider**.\*\*\*\* La proprietà HostingModel) non è specificata.</span><span class="sxs-lookup"><span data-stu-id="13b9d-156">Starting with Windows Vista, **LocalSystemHost** is no longer the default hosting model if the [**HostingModel**](--win32provider.md) of a WMI provider (**\_\_Win32Provider**.**HostingModel** property) is unspecified.</span></span> <span data-ttu-id="13b9d-157">Per ulteriori informazioni, vedere [sicurezza dei modelli di hosting](#provider-hosting-and-security).</span><span class="sxs-lookup"><span data-stu-id="13b9d-157">For more information, see [Security of Hosting Models](#provider-hosting-and-security).</span></span>                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="13b9d-158">**LocalSystemHostOrSelfHost**</span><span class="sxs-lookup"><span data-stu-id="13b9d-158">**LocalSystemHostOrSelfHost**</span></span>                                      | <span data-ttu-id="13b9d-159">Il provider è self-hosted o caricato nel processo Wmiprvse.exe in esecuzione con l'account [LocalSystem](/windows/desktop/Services/localsystem-account) .</span><span class="sxs-lookup"><span data-stu-id="13b9d-159">The provider is self-hosted or loaded into the Wmiprvse.exe process running under the [LocalSystem](/windows/desktop/Services/localsystem-account) account.</span></span> <span data-ttu-id="13b9d-160">Poiché LocalSystem è un account con privilegi elevati, viene generata una voce nel registro eventi di sicurezza NT per notificare agli amministratori di un provider in esecuzione in questo stato attendibile.</span><span class="sxs-lookup"><span data-stu-id="13b9d-160">Because LocalSystem is a highly privileged account, an entry is generated in the Security NT Event Log to notify administrators of a provider running in this trusted status.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="13b9d-161">**NetworkServiceHost**</span><span class="sxs-lookup"><span data-stu-id="13b9d-161">**NetworkServiceHost**</span></span>                                             | <span data-ttu-id="13b9d-162">Il provider, se implementato come in-process, viene caricato nel processo di Wmiprvse.exe in esecuzione con l'account [NetworkService](/windows/desktop/Services/networkservice-account) .</span><span class="sxs-lookup"><span data-stu-id="13b9d-162">The provider, if implemented as in-process, is loaded into the Wmiprvse.exe process running under [NetworkService](/windows/desktop/Services/networkservice-account) account.</span></span> <span data-ttu-id="13b9d-163">A partire da Windows Vista, questo è il modello di hosting predefinito se il [**HostingModel**](--win32provider.md) di un provider WMI (**\_ \_ Win32Provider**.\*\*\*\* La proprietà HostingModel) non è specificata.</span><span class="sxs-lookup"><span data-stu-id="13b9d-163">Starting with Windows Vista, this is the default hosting model if the [**HostingModel**](--win32provider.md) of a WMI provider (**\_\_Win32Provider**.**HostingModel** property) is unspecified.</span></span> <span data-ttu-id="13b9d-164">Per ulteriori informazioni, vedere [sicurezza dei modelli di hosting](#provider-hosting-and-security).</span><span class="sxs-lookup"><span data-stu-id="13b9d-164">For more information, see [Security of Hosting Models](#provider-hosting-and-security).</span></span><br/> <span data-ttu-id="13b9d-165">**NetworkServiceHost** dispone di privilegi limitati e quindi riduce la possibilità di un attacco con elevazione dei privilegi.</span><span class="sxs-lookup"><span data-stu-id="13b9d-165">**NetworkServiceHost** has limited privileges and therefore reduces the possibility of an elevation of privilege attack.</span></span> <span data-ttu-id="13b9d-166">Se il provider opera solo nel computer locale, impostare la proprietà [**HostingModel**](--win32provider.md) su **localservicehost**.</span><span class="sxs-lookup"><span data-stu-id="13b9d-166">If the provider only operates within the local computer, then set the [**HostingModel**](--win32provider.md) property to **LocalServiceHost**.</span></span><br/> |
| <span data-ttu-id="13b9d-167">**NetworkServiceHostOrSelfHost**</span><span class="sxs-lookup"><span data-stu-id="13b9d-167">**NetworkServiceHostOrSelfHost**</span></span>                                   | <span data-ttu-id="13b9d-168">Il provider è self-hosted o caricato nel processo WmiPrvse.exe in esecuzione con l'account [NetworkService](/windows/desktop/Services/networkservice-account) .</span><span class="sxs-lookup"><span data-stu-id="13b9d-168">The provider is self-hosted or loaded into the WmiPrvse.exe process running under the [NetworkService](/windows/desktop/Services/networkservice-account) account.</span></span> <span data-ttu-id="13b9d-169">**NetworkServiceHostOrSelfHost** è la configurazione predefinita quando la proprietà [**HostingModel**](--win32provider.md) in **\_ \_ Win32Provider** è **null**.</span><span class="sxs-lookup"><span data-stu-id="13b9d-169">**NetworkServiceHostOrSelfHost** is the default configuration when the [**HostingModel**](--win32provider.md) property in **\_\_Win32Provider** is **NULL**.</span></span> <span data-ttu-id="13b9d-170">Poiché **NetworkServiceHostOrSelfHost** è l'impostazione predefinita, i provider di sistemi operativi precedenti possono continuare a funzionare in Windows Vista, windows Server 2008 e nei sistemi operativi successivi.</span><span class="sxs-lookup"><span data-stu-id="13b9d-170">Because **NetworkServiceHostOrSelfHost** is the default, providers from earlier operating systems can continue to work in Windows Vista, Windows Server 2008, and later operating systems.</span></span>                                                                                                                                                                                                                                             |
| <span data-ttu-id="13b9d-171">**LocalServiceHost**</span><span class="sxs-lookup"><span data-stu-id="13b9d-171">**LocalServiceHost**</span></span>                                               | <span data-ttu-id="13b9d-172">Il provider, se implementato come in-process, viene caricato nel processo di Wmiprvse.exe in esecuzione con l'account [LocalService](/windows/desktop/Services/localservice-account) .</span><span class="sxs-lookup"><span data-stu-id="13b9d-172">The provider, if implemented as in-process, is loaded into the Wmiprvse.exe process running under the [LocalService](/windows/desktop/Services/localservice-account) account.</span></span> <span data-ttu-id="13b9d-173">Si tratta del modello di hosting consigliato per i servizi perché LocalService ha privilegi limitati.</span><span class="sxs-lookup"><span data-stu-id="13b9d-173">This is the recommended hosting model for services because LocalService has limited privileges.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

## <a name="hostingmodel-values-for-decoupled-providers"></a><span data-ttu-id="13b9d-174">Valori HostingModel per i provider disaccoppiati</span><span class="sxs-lookup"><span data-stu-id="13b9d-174">HostingModel Values for Decoupled Providers</span></span>

<span data-ttu-id="13b9d-175">Nell'elenco seguente sono elencati i valori del modello di hosting del provider per i provider disaccoppiati.</span><span class="sxs-lookup"><span data-stu-id="13b9d-175">The following list lists the provider hosting model values for decoupled providers.</span></span>

<dl> <dt>

<span data-ttu-id="13b9d-176"><span id="Decoupled_Com"></span><span id="decoupled_com"></span><span id="DECOUPLED_COM"></span>**Separato: com**</span><span class="sxs-lookup"><span data-stu-id="13b9d-176"><span id="Decoupled_Com"></span><span id="decoupled_com"></span><span id="DECOUPLED_COM"></span>**Decoupled:Com**</span></span>
</dt> <dd>

<span data-ttu-id="13b9d-177">Il provider è un provider disaccoppiato ospitato in un processo separato che è un client di WMI.</span><span class="sxs-lookup"><span data-stu-id="13b9d-177">The provider is a decoupled provider hosted in a separate process that is a client to WMI.</span></span>

<span data-ttu-id="13b9d-178">Nell'esempio seguente viene illustrato l'identificatore FoldIdentity per la proprietà [**HostingModel**](--win32provider.md) impostata su **false**, che consente al provider di rappresentare il client.</span><span class="sxs-lookup"><span data-stu-id="13b9d-178">The following example shows the FoldIdentity specifier for the [**HostingModel**](--win32provider.md) property set to **FALSE**, which allows the provider to impersonate the client.</span></span>

``` syntax
Decoupled:Com:FoldIdentity(FALSE)
```

<span data-ttu-id="13b9d-179">Se FoldIdentity non è specificato, il valore di FoldIdentity viene impostato su **true** per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="13b9d-179">If FoldIdentity is not specified, the FoldIdentity value is set to **TRUE** by default.</span></span> <span data-ttu-id="13b9d-180">Per motivi di sicurezza, è consigliabile non specificare FoldIdentity (FALSE) poiché un'applicazione non autorizzata con rappresentazione del delegato può influire su un intero dominio.</span><span class="sxs-lookup"><span data-stu-id="13b9d-180">For security reasons, it is recommended that you not specify FoldIdentity(FALSE) since a rogue application with impersonation of Delegate can affect an entire domain.</span></span>

<span data-ttu-id="13b9d-181">Nell'esempio seguente viene illustrata la proprietà [**HostingModel**](--win32provider.md) impostata nel modo consigliato che equivale a impostare FOLDIDENTITY (true).</span><span class="sxs-lookup"><span data-stu-id="13b9d-181">The following example shows the [**HostingModel**](--win32provider.md) property set in the recommended manner that is equivalent to setting FoldIdentity(TRUE).</span></span>

``` syntax
Decoupled:Com
```

</dd> <dt>

<span data-ttu-id="13b9d-182"><span id="Decoupled_Noncom"></span><span id="decoupled_noncom"></span><span id="DECOUPLED_NONCOM"></span>**Separato: noncom**</span><span class="sxs-lookup"><span data-stu-id="13b9d-182"><span id="Decoupled_Noncom"></span><span id="decoupled_noncom"></span><span id="DECOUPLED_NONCOM"></span>**Decoupled:Noncom**</span></span>
</dt> <dd>

<span data-ttu-id="13b9d-183">Solo per uso interno.</span><span class="sxs-lookup"><span data-stu-id="13b9d-183">For internal use only.</span></span> <span data-ttu-id="13b9d-184">Non supportata.</span><span class="sxs-lookup"><span data-stu-id="13b9d-184">Not supported.</span></span>

</dd> </dl>

## <a name="security-of-hosting-models"></a><span data-ttu-id="13b9d-185">Sicurezza dei modelli di hosting</span><span class="sxs-lookup"><span data-stu-id="13b9d-185">Security of Hosting Models</span></span>

<span data-ttu-id="13b9d-186">Per la maggior parte delle situazioni, **LocalSystem** non è necessario e il contesto **NetworkServiceHost** è più appropriato.</span><span class="sxs-lookup"><span data-stu-id="13b9d-186">For most situations, **LocalSystem** is unnecessary and the **NetworkServiceHost** context is more appropriate.</span></span> <span data-ttu-id="13b9d-187">La maggior parte dei provider WMI deve rappresentare il contesto di sicurezza del client per eseguire operazioni richieste per conto del client WMI.</span><span class="sxs-lookup"><span data-stu-id="13b9d-187">Most WMI Providers must impersonate the client security context to perform requested operations on behalf of the WMI client.</span></span> <span data-ttu-id="13b9d-188">A partire da Windows Vista, un provider WMI che non dispone di una definizione di modello di hosting e viene eseguito come se fosse in esecuzione in **LocalSystem** non verrà eseguito correttamente.</span><span class="sxs-lookup"><span data-stu-id="13b9d-188">Starting with Windows Vista, a WMI provider that lacks a hosting model definition and executes as if it is running under **LocalSystem** will not run properly.</span></span> <span data-ttu-id="13b9d-189">Per correggere questa situazione, modificare il modello di hosting previsto e assicurarsi che il codice del provider WMI esegua le operazioni nel contesto di sicurezza del client rappresentando il client WMI.</span><span class="sxs-lookup"><span data-stu-id="13b9d-189">To correct this situation, change the expected hosting model and ensure that the WMI provider code performs the operations in the client security context by impersonating the WMI client.</span></span> <span data-ttu-id="13b9d-190">LocalSystem è raramente un requisito.</span><span class="sxs-lookup"><span data-stu-id="13b9d-190">LocalSystem is rarely an requirement.</span></span> <span data-ttu-id="13b9d-191">Se il provider deve disporre di tale livello di privilegio, specificare il modello di hosting con l'istruzione seguente nel file MOF.</span><span class="sxs-lookup"><span data-stu-id="13b9d-191">If your provider must have that level of privilege, specify the hosting model with the following statement in the MOF file.</span></span>

``` syntax
HostingModel=LocalSystemHost
```

## <a name="related-topics"></a><span data-ttu-id="13b9d-192">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="13b9d-192">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="13b9d-193">Scelta della registrazione corretta</span><span class="sxs-lookup"><span data-stu-id="13b9d-193">Choosing Correct Registration</span></span>](choosing-correct-registration.md)
</dt> <dt>

[<span data-ttu-id="13b9d-194">Accesso agli spazi dei nomi WMI</span><span class="sxs-lookup"><span data-stu-id="13b9d-194">Access to WMI Namespaces</span></span>](access-to-wmi-namespaces.md)
</dt> <dt>

[<span data-ttu-id="13b9d-195">Sicurezza degli spazi dei nomi WMI</span><span class="sxs-lookup"><span data-stu-id="13b9d-195">Securing WMI Namespaces</span></span>](securing-wmi-namespaces.md)
</dt> <dt>

[<span data-ttu-id="13b9d-196">Classi di configurazione e risoluzione dei problemi del provider</span><span class="sxs-lookup"><span data-stu-id="13b9d-196">Provider Configuration and Troubleshooting Classes</span></span>](provider-configuration-and-troubleshooting-classes.md)
</dt> <dt>

[<span data-ttu-id="13b9d-197">**\_Provider MSFT**</span><span class="sxs-lookup"><span data-stu-id="13b9d-197">**MSFT\_Providers**</span></span>](/previous-versions/windows/desktop/wmisystemprov/msft-providers)
</dt> <dt>

[<span data-ttu-id="13b9d-198">Gestione della sicurezza WMI</span><span class="sxs-lookup"><span data-stu-id="13b9d-198">Maintaining WMI Security</span></span>](maintaining-wmi-security.md)
</dt> </dl>

 

