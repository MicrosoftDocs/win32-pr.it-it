---
description: Il provider di Windows Driver Model (WDM) concede l'accesso alle classi, alle istanze, ai metodi e agli eventi dei driver hardware conformi al modello WDM.
ms.assetid: 8686a613-0e53-4e6e-b193-7839abfb70de
ms.tgt_platform: multiple
title: Accesso ai dati dai driver di dispositivo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 72a59b59116ca0f71178fb2faed290d6bc76c9d6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106319313"
---
# <a name="accessing-data-from-device-drivers"></a><span data-ttu-id="43731-103">Accesso ai dati dai driver di dispositivo</span><span class="sxs-lookup"><span data-stu-id="43731-103">Accessing Data from Device Drivers</span></span>

<span data-ttu-id="43731-104">Il provider di Windows Driver Model (WDM) concede l'accesso alle classi, alle istanze, ai metodi e agli eventi dei driver hardware conformi al modello WDM.</span><span class="sxs-lookup"><span data-stu-id="43731-104">The Windows Driver Model (WDM) provider grants access to the classes, instances, methods, and events of hardware drivers that conform to the WDM model.</span></span> <span data-ttu-id="43731-105">Le classi per i driver hardware si trovano nello \\ \\ \\ spazio dei nomi WMI radice.</span><span class="sxs-lookup"><span data-stu-id="43731-105">The classes for hardware drivers reside in the \\\\root\\wmi namespace.</span></span>

<span data-ttu-id="43731-106">Il provider WDM è di interesse per coloro che scrivono i driver di dispositivo e gli amministratori interessati ai dati dei driver di dispositivo.</span><span class="sxs-lookup"><span data-stu-id="43731-106">The WDM provider is of interest to those who write device drivers and to administrators who are interested in device driver data.</span></span>

<span data-ttu-id="43731-107">Le sezioni seguenti sono illustrate in questo argomento:</span><span class="sxs-lookup"><span data-stu-id="43731-107">The following sections are discussed in this topic:</span></span>

-   [<span data-ttu-id="43731-108">Informazioni per i writer di driver di dispositivo</span><span class="sxs-lookup"><span data-stu-id="43731-108">Information for Device Driver Writers</span></span>](#information-for-device-driver-writers)
-   [<span data-ttu-id="43731-109">Informazioni per amministratori e utenti dei dati dei driver</span><span class="sxs-lookup"><span data-stu-id="43731-109">Information for Administrators and Users of Driver Data</span></span>](#information-for-administrators-and-users-of-driver-data)
-   [<span data-ttu-id="43731-110">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="43731-110">Related topics</span></span>](#related-topics)

## <a name="information-for-device-driver-writers"></a><span data-ttu-id="43731-111">Informazioni per i writer di driver di dispositivo</span><span class="sxs-lookup"><span data-stu-id="43731-111">Information for Device Driver Writers</span></span>

<span data-ttu-id="43731-112">Le classi WMI correlate a un driver di dispositivo specifico vengono create quando il provider WDM estrae il file MOF binario dal file eseguibile del driver di dispositivo.</span><span class="sxs-lookup"><span data-stu-id="43731-112">WMI classes related to a specific device driver are created when the WDM provider extracts the binary MOF from the device driver executable file.</span></span> <span data-ttu-id="43731-113">Questa operazione viene eseguita ogni volta che WMI viene avviato, viene installato un nuovo driver di dispositivo o viene eliminata l'istanza di [WMIBinaryMofResource](/windows/desktop/WmiCoreProv/wmibinarymofresource) per un driver specifico.</span><span class="sxs-lookup"><span data-stu-id="43731-113">This takes place whenever WMI is started, a new device driver is installed, or the instance of [WMIBinaryMofResource](/windows/desktop/WmiCoreProv/wmibinarymofresource) for a particular driver is deleted.</span></span> <span data-ttu-id="43731-114">Controllando wmiprov. log, è possibile determinare se si è verificato un errore durante l'estrazione del file MOF binario.</span><span class="sxs-lookup"><span data-stu-id="43731-114">By checking Wmiprov.log, you can determine if an error resulting in failure occurred while extracting the binary MOF file.</span></span> <span data-ttu-id="43731-115">I dettagli degli errori [mofcomp](mofcomp.md) vengono segnalati in mofcomp. log.</span><span class="sxs-lookup"><span data-stu-id="43731-115">Details of [mofcomp](mofcomp.md) errors are reported in Mofcomp.log.</span></span> <span data-ttu-id="43731-116">Per ulteriori informazioni, vedere [file di log WMI](wmi-log-files.md).</span><span class="sxs-lookup"><span data-stu-id="43731-116">For more information, see [WMI Log Files](wmi-log-files.md).</span></span> <span data-ttu-id="43731-117">Per motivi di prestazioni, il provider WDM non genera eventi durante la creazione o l'eliminazione di classi a causa dell'avvio o dell'arresto di un provider WDM.</span><span class="sxs-lookup"><span data-stu-id="43731-117">For performance reasons, the WDM provider does not generate events while creating or deleting classes due to a WDM provider starting or stopping.</span></span>

<span data-ttu-id="43731-118">Il provider WDM trasforma tutti i dati di WNODE in informazioni sulla classe.</span><span class="sxs-lookup"><span data-stu-id="43731-118">The WDM provider transforms all WNODE data into class information.</span></span> <span data-ttu-id="43731-119">Se si verifica un errore durante la trasformazione dei dati da WNODE ai dati della classe, questo viene segnalato in wmiprov. log con l'intestazione formattata e i byte sottoposti a rendering nello stesso formato di un dump di memoria.</span><span class="sxs-lookup"><span data-stu-id="43731-119">If an error is encountered when transforming the data from WNODE to class data, it is reported in Wmiprov.log with the header formatted and bytes rendered in the same form as a memory dump.</span></span>

<span data-ttu-id="43731-120">Le modifiche apportate alle impostazioni di sicurezza del driver non hanno effetto finché il provider WDM non viene scaricato e ricaricato.</span><span class="sxs-lookup"><span data-stu-id="43731-120">Changes made to driver security settings do not take effect until the WDM provider is unloaded and reloaded.</span></span> <span data-ttu-id="43731-121">Per ulteriori informazioni, vedere [scaricamento di un provider](unloading-a-provider.md).</span><span class="sxs-lookup"><span data-stu-id="43731-121">For more information, see [Unloading a Provider](unloading-a-provider.md).</span></span>

<span data-ttu-id="43731-122">WMI può inoltre creare contatori a prestazioni elevate per i driver hardware disponibili.</span><span class="sxs-lookup"><span data-stu-id="43731-122">WMI can also make high-performance counters for hardware drivers available.</span></span> <span data-ttu-id="43731-123">Per ulteriori informazioni sulla creazione di classi a prestazioni elevate e sulla visualizzazione dei dati in monitoraggio di sistema PerfMon, vedere [miglioramento dell'efficienza di un provider di istanze](improving-the-efficiency-of-an-instance-provider.md).</span><span class="sxs-lookup"><span data-stu-id="43731-123">For more information about creating high-performance classes and displaying data in Perfmon System Monitor, see [Improving the Efficiency of an Instance Provider](improving-the-efficiency-of-an-instance-provider.md).</span></span> <span data-ttu-id="43731-124">Per ulteriori informazioni sulla scrittura di driver di dispositivo abilitati per WMI, vedere [https://www.microsoft.com/ddk](https://msdn.microsoft.com/library/aa972908.aspx) .</span><span class="sxs-lookup"><span data-stu-id="43731-124">For more information about writing WMI-enabled device drivers, see [https://www.microsoft.com/ddk](https://msdn.microsoft.com/library/aa972908.aspx).</span></span> <span data-ttu-id="43731-125">Per ulteriori informazioni sui qualificatori specifici di WDM nel file MOF, vedere [**qualificatori specifici del provider WDM**](qualifiers-specific-to-the-wdm-provider.md).</span><span class="sxs-lookup"><span data-stu-id="43731-125">For more information about WDM specific qualifiers in the MOF file, see [**Qualifiers Specific to the WDM Provider**](qualifiers-specific-to-the-wdm-provider.md).</span></span>

## <a name="information-for-administrators-and-users-of-driver-data"></a><span data-ttu-id="43731-126">Informazioni per amministratori e utenti dei dati dei driver</span><span class="sxs-lookup"><span data-stu-id="43731-126">Information for Administrators and Users of Driver Data</span></span>

<span data-ttu-id="43731-127">Elencando le istanze della classe [WMIBinaryMofResource](/windows/desktop/WmiCoreProv/wmibinarymofresource) è disponibile un elenco dei driver nel sistema e informazioni sull'eventuale riuscita del provider WDM a compilare il file MOF per ogni driver.</span><span class="sxs-lookup"><span data-stu-id="43731-127">Listing the instances of the [WMIBinaryMofResource](/windows/desktop/WmiCoreProv/wmibinarymofresource) class provides a list of the drivers in the system and information about whether the WDM provider succeeded in compiling the MOFs for each driver.</span></span> <span data-ttu-id="43731-128">È possibile forzare il provider a ricompilare e rigenerare le classi per un driver eliminando l'istanza di WMIBinaryMofResource che rappresenta tale driver.</span><span class="sxs-lookup"><span data-stu-id="43731-128">You can force the provider to recompile and regenerate the classes for a driver by deleting the instance of WMIBinaryMofResource that represents that driver.</span></span> <span data-ttu-id="43731-129">I dettagli degli errori [mofcomp](mofcomp.md) vengono segnalati in mofcomp. log.</span><span class="sxs-lookup"><span data-stu-id="43731-129">Details of [mofcomp](mofcomp.md) errors are reported in the Mofcomp.log.</span></span>

<span data-ttu-id="43731-130">Se lo spazio dei nomi WMI è danneggiato, è possibile eliminarlo e riaprirlo per forzare la ricompilazione delle classi di driver da parte di WDM.</span><span class="sxs-lookup"><span data-stu-id="43731-130">If the WMI namespace is corrupted, it can be deleted and reopened to force WDM to rebuild the driver classes.</span></span> <span data-ttu-id="43731-131">Per ulteriori informazioni sull'apertura di uno spazio dei nomi, vedere [creazione di gerarchie all'interno di WMI](creating-hierarchies-within-wmi.md).</span><span class="sxs-lookup"><span data-stu-id="43731-131">For more information about opening a namespace, see [Creating Hierarchies Within WMI](creating-hierarchies-within-wmi.md).</span></span>

<span data-ttu-id="43731-132">Le classi di driver possono talvolta ottenere "Stranded" Se il caricamento del driver viene interrotto o se si verificano altre operazioni anomale.</span><span class="sxs-lookup"><span data-stu-id="43731-132">Driver classes can occasionally get "stranded" if driver loading is interrupted or other abnormal operations occur.</span></span> <span data-ttu-id="43731-133">Il provider WDM effettuerà la ricerca e la pulizia delle classi "Stranded" solo quando viene installato un nuovo driver o quando il valore della chiave del registro di sistema **\\ Microsoft \\ WBEM \\ WDMProvider del software** **ProcessStrandedClasses** è impostato su **true**.</span><span class="sxs-lookup"><span data-stu-id="43731-133">The WDM provider will only search for and clean up "stranded" classes when a new driver is installed or when the **Software\\Microsoft\\WBEM\\WDMProvider** registry key value **ProcessStrandedClasses** is set to **TRUE**.</span></span> <span data-ttu-id="43731-134">L'impostazione di questo valore su **true** rallenta le prestazioni di avvio WMI a causa dell'operazione di pulizia.</span><span class="sxs-lookup"><span data-stu-id="43731-134">Setting this value to **TRUE** slows WMI startup performance because of the cleanup operation.</span></span> <span data-ttu-id="43731-135">Il valore predefinito è **false**.</span><span class="sxs-lookup"><span data-stu-id="43731-135">The default value is **FALSE**.</span></span> <span data-ttu-id="43731-136">Il provider WDM controlla solo questo valore del registro di sistema quando lo \\ spazio dei nomi "WMI radice" viene aperto per la prima volta.</span><span class="sxs-lookup"><span data-stu-id="43731-136">The WDM provider only checks this registry value when the "Root\\Wmi" namespace is opened for the first time.</span></span>

<span data-ttu-id="43731-137">Se vengono apportate modifiche di sicurezza a un driver di dispositivo WDM, le modifiche non verranno applicate finché il provider WDM non viene scaricato e ricaricato.</span><span class="sxs-lookup"><span data-stu-id="43731-137">If security changes are made to a WDM device driver, the changes will not go into effect until the WDM provider is unloaded and reloaded.</span></span> <span data-ttu-id="43731-138">Per eseguire questa operazione, è necessario arrestare e riavviare il servizio di gestione di Windows.</span><span class="sxs-lookup"><span data-stu-id="43731-138">The Windows Management service must be stopped and restarted to accomplish this.</span></span>

## <a name="related-topics"></a><span data-ttu-id="43731-139">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="43731-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="43731-140">Utilizzo di WMI</span><span class="sxs-lookup"><span data-stu-id="43731-140">Using WMI</span></span>](using-wmi.md)
</dt> </dl>

 

 
