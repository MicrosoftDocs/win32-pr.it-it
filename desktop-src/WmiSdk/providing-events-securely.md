---
description: È possibile impedire a utenti non autorizzati di ricevere eventi a cui non dovrebbero avere accesso.
ms.assetid: 59788643-f57d-458f-91ab-26552218523b
ms.tgt_platform: multiple
title: Fornire eventi in modo sicuro
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d2c92ed1de08dde4891365440f559544a0b26de5
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "104232904"
---
# <a name="providing-events-securely"></a><span data-ttu-id="da418-103">Fornire eventi in modo sicuro</span><span class="sxs-lookup"><span data-stu-id="da418-103">Providing Events Securely</span></span>

<span data-ttu-id="da418-104">È possibile impedire a utenti non autorizzati di ricevere eventi a cui non dovrebbero avere accesso.</span><span class="sxs-lookup"><span data-stu-id="da418-104">You can prevent unauthorized users from receiving events to which they should not have access.</span></span> <span data-ttu-id="da418-105">Il provider di eventi può fornire istanze delle proprie classi di evento, proprio come il [provider del registro di sistema](/previous-versions/windows/desktop/regprov/system-registry-provider) fornisce classi quali [**RegistryKeyChangeEvent**](/previous-versions/windows/desktop/regprov/registrykeychangeevent).</span><span class="sxs-lookup"><span data-stu-id="da418-105">Your event provider can supply instances of its own event classes, just as the [System Registry Provider](/previous-versions/windows/desktop/regprov/system-registry-provider) supplies classes such as [**RegistryKeyChangeEvent**](/previous-versions/windows/desktop/regprov/registrykeychangeevent).</span></span> <span data-ttu-id="da418-106">Il provider di eventi può anche recapitare eventi intrinseci, ad esempio [**\_ \_ InstanceCreationEvent**](--instancecreationevent.md).</span><span class="sxs-lookup"><span data-stu-id="da418-106">Your event provider can also deliver intrinsic events such as [**\_\_InstanceCreationEvent**](--instancecreationevent.md).</span></span> <span data-ttu-id="da418-107">Per ulteriori informazioni, vedere [scrittura di un provider di eventi](writing-an-event-provider.md).</span><span class="sxs-lookup"><span data-stu-id="da418-107">For more information, see [Writing an Event Provider](writing-an-event-provider.md).</span></span>

<span data-ttu-id="da418-108">Un provider di eventi può controllare l'accesso ai destinatari di eventi nei modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="da418-108">An event provider can control access to event recipients in the following ways:</span></span>

-   <span data-ttu-id="da418-109">L'uso del controllo di accesso mediante l'implementazione di [**IWbemEventProviderSecurity:: AccessCheck**](/windows/desktop/api/Wbemprov/nn-wbemprov-iwbemeventprovidersecurity) è il modo più efficiente.</span><span class="sxs-lookup"><span data-stu-id="da418-109">Using access control by implementing [**IWbemEventProviderSecurity::AccessCheck**](/windows/desktop/api/Wbemprov/nn-wbemprov-iwbemeventprovidersecurity) is the most efficient way.</span></span>

    <span data-ttu-id="da418-110">Il provider determina se il consumer dispone dei privilegi necessari per ricevere un evento richiesto.</span><span class="sxs-lookup"><span data-stu-id="da418-110">The provider determines whether the consumer has privileges to receive a requested event.</span></span> <span data-ttu-id="da418-111">Se il consumer non dispone di privilegi sufficienti per la registrazione, WMI restituisce un errore di accesso negato.</span><span class="sxs-lookup"><span data-stu-id="da418-111">If the consumer lacks sufficient privileges to register, WMI returns an access denied error.</span></span> <span data-ttu-id="da418-112">Usare questa modalità quando il provider può decidere chi può ricevere eventi.</span><span class="sxs-lookup"><span data-stu-id="da418-112">Use this mode when the provider can make the decision about who can receive events.</span></span> <span data-ttu-id="da418-113">Ad esempio, un provider può fornire eventi correlati alla sicurezza e può richiedere che il consumer disponga dei privilegi di amministratore con il privilegio **SeSecurityPrivilege** abilitato.</span><span class="sxs-lookup"><span data-stu-id="da418-113">For example, a provider may supply security related events and can require that the consumer have administrator privileges with the **SeSecurityPrivilege** privilege enabled.</span></span>

-   <span data-ttu-id="da418-114">L'implementazione di [**IWbemEventSink:: SetSinkSecurity**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventsink-setsinksecurity) sul sink usato per generare eventi consente l'impostazione di un descrittore di sicurezza (SD) su un sink per tutti gli eventi che passano.</span><span class="sxs-lookup"><span data-stu-id="da418-114">Implementing [**IWbemEventSink::SetSinkSecurity**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventsink-setsinksecurity) on the sink used to raise events allows the setting of a security descriptor (SD) on a sink for all the events passing through.</span></span>

    <span data-ttu-id="da418-115">WMI esegue controlli di accesso basati su SD.</span><span class="sxs-lookup"><span data-stu-id="da418-115">WMI performs access checks based on the SD.</span></span> <span data-ttu-id="da418-116">Usare questa modalità quando il provider non è in grado di prendere decisioni in merito a chi è autorizzato a utilizzare gli eventi, ma può scegliere una SD per un sink specifico.</span><span class="sxs-lookup"><span data-stu-id="da418-116">Use this mode when the provider cannot make the decision regarding who is allowed to consume its events, but can decide on an SD for a specific sink.</span></span> <span data-ttu-id="da418-117">Usare, ad esempio, [**IWbemEventSink:: SetSinkSecurity**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventsink-setsinksecurity) se il provider di eventi ha ottenuto diversi sink mediante chiamate a [**IWbemEventSink:: GetRestrictedSink**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventsink-getrestrictedsink) e si desidera un descrittore di sicurezza per ogni sink.</span><span class="sxs-lookup"><span data-stu-id="da418-117">For example, use [**IWbemEventSink::SetSinkSecurity**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventsink-setsinksecurity) if your event provider obtained several sinks by calls to [**IWbemEventSink::GetRestrictedSink**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventsink-getrestrictedsink) and you want a security descriptor for each sink.</span></span>

-   <span data-ttu-id="da418-118">L'impostazione della proprietà del **\_ descrittore di sicurezza** di un evento consente l'impostazione di una SD per ogni evento.</span><span class="sxs-lookup"><span data-stu-id="da418-118">Setting the **SECURITY\_DESCRIPTOR** property of an event allows for the setting of an SD for each event.</span></span>

    <span data-ttu-id="da418-119">Utilizzare questo approccio quando ogni evento recapitato al sink può disporre di descrittori di sicurezza diversi.</span><span class="sxs-lookup"><span data-stu-id="da418-119">Use this approach when each event delivered to the sink can have different security descriptors.</span></span> <span data-ttu-id="da418-120">Per usare questo approccio, derivare qualsiasi classe di evento estrinseca definita dal provider da [**\_ \_ Event**](--event.md) o [**\_ \_ ExtrinsicEvent**](--extrinsicevent.md) in modo che la classe contenga la proprietà del **\_ descrittore di sicurezza** .</span><span class="sxs-lookup"><span data-stu-id="da418-120">To use this approach, derive any of the extrinsic event classes defined by your provider from [**\_\_Event**](--event.md) or [**\_\_ExtrinsicEvent**](--extrinsicevent.md) so that your class contains the **SECURITY\_DESCRIPTOR** property.</span></span> <span data-ttu-id="da418-121">Il provider di eventi, ad esempio, può pubblicare eventi sia sicuri che normali tramite un sink.</span><span class="sxs-lookup"><span data-stu-id="da418-121">For example, your event provider may publish both secure and normal events through a sink.</span></span> <span data-ttu-id="da418-122">In questo caso, usare il descrittore di sicurezza dell'account Administrators per gli eventi sicuri e un descrittore di sicurezza **null** per gli eventi normali che possono essere ricevuti da chiunque.</span><span class="sxs-lookup"><span data-stu-id="da418-122">In this case, use the Administrators account security descriptor for secure events and a **NULL** security descriptor for normal events that can be received by anyone.</span></span>

## <a name="securing-events-by-decoupled-event-providers"></a><span data-ttu-id="da418-123">Sicurezza degli eventi per provider di eventi separati</span><span class="sxs-lookup"><span data-stu-id="da418-123">Securing Events by Decoupled Event Providers</span></span>

<span data-ttu-id="da418-124">I provider di eventi disaccoppiati differiscono dai provider di eventi nondecoupled nel modo in cui si registrano con WMI.</span><span class="sxs-lookup"><span data-stu-id="da418-124">Decoupled event providers differ from nondecoupled event providers in the way that they register with WMI.</span></span> <span data-ttu-id="da418-125">La chiamata a [**IWbemEventProviderSecurity:: AccessCheck**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventprovidersecurity-accesscheck) per gli eventi da un provider disaccoppiato non propaga mai il token di accesso client.</span><span class="sxs-lookup"><span data-stu-id="da418-125">The call to [**IWbemEventProviderSecurity::AccessCheck**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventprovidersecurity-accesscheck) for events from a decoupled provider never propagates the client access token.</span></span> <span data-ttu-id="da418-126">WMI gestisce il controllo di accesso in modo analogo ai provider di eventi nondecoupled.</span><span class="sxs-lookup"><span data-stu-id="da418-126">WMI handles the access control in the same manner as for nondecoupled event providers.</span></span> <span data-ttu-id="da418-127">Per ulteriori informazioni sulla scrittura di un provider disaccoppiato, vedere [incorporamento di un provider in un'applicazione](incorporating-a-provider-in-an-application.md).</span><span class="sxs-lookup"><span data-stu-id="da418-127">For more information about writing a decoupled provider, see [Incorporating a Provider in an Application](incorporating-a-provider-in-an-application.md).</span></span>

<span data-ttu-id="da418-128">Solo gli amministratori con i privilegi di **\_ scrittura completi** impostati nel **controllo WMI** del **Pannello di controllo** possono generare eventi per uno spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="da418-128">Only administrators with the **FULL\_WRITE** privilege set in **WMI Control** of the **Control Panel** are allowed to raise events for a namespace.</span></span> <span data-ttu-id="da418-129">Per ulteriori informazioni, vedere [impostazione della sicurezza dello spazio dei nomi con il controllo WMI](setting-namespace-security-with-the-wmi-control.md).</span><span class="sxs-lookup"><span data-stu-id="da418-129">For more information, see [Setting Namespace Security with the WMI Control](setting-namespace-security-with-the-wmi-control.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="da418-130">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="da418-130">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="da418-131">Protezione degli eventi WMI</span><span class="sxs-lookup"><span data-stu-id="da418-131">Securing WMI Events</span></span>](securing-wmi-events.md)
</dt> </dl>

 

 
