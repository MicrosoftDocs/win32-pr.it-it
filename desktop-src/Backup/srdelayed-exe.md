---
title: Srdelayed.exe
description: Le applicazioni che eseguono operazioni di ripristino dello stato del sistema all'avvio del sistema operativo potrebbero non essere in grado di utilizzare le funzioni di gestione file per spostare, eliminare o impostare il nome breve di determinati file di sistema.
ms.assetid: cedeb48e-bc1d-48d1-9bee-0b8b0132c3e5
keywords:
- Backup Srdelayed.exe
- Backup del ripristino dello stato del sistema
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5a5f6b281c07f5b0ad8d6cd7e59b4f93ec9208a5
ms.sourcegitcommit: 46376be61d3fa308f9b1a06d7e2fa122a39755af
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/10/2020
ms.locfileid: "104474570"
---
# <a name="srdelayedexe"></a><span data-ttu-id="3256b-105">Srdelayed.exe</span><span class="sxs-lookup"><span data-stu-id="3256b-105">Srdelayed.exe</span></span>

<span data-ttu-id="3256b-106">Le applicazioni che eseguono operazioni di ripristino dello stato del sistema all'avvio del sistema operativo potrebbero non essere in grado di utilizzare le funzioni di gestione file per spostare, eliminare o impostare il nome breve di determinati file di sistema.</span><span class="sxs-lookup"><span data-stu-id="3256b-106">Applications that perform system state restore operations early in the startup of the operating system may be unable to use the file management functions to move, delete, or set the short name of certain system files.</span></span> <span data-ttu-id="3256b-107">Srdelayed.exe è un file eseguibile, fornito con la funzionalità Windows Server Backup (WSB) in Windows Server 2008, che consente alle applicazioni di ripristino dello stato del sistema di spostare, eliminare e impostare il nome breve dei file di sistema.</span><span class="sxs-lookup"><span data-stu-id="3256b-107">Srdelayed.exe is an executable file, provided with the Windows Server Backup (WSB) feature in Windows Server 2008, that can enable system state recovery applications to move, delete, and set the short name of system files.</span></span>

<span data-ttu-id="3256b-108">Lo strumento Srdelayed è destinato alle applicazioni di ripristino dello stato del sistema; non sostituisce le funzioni di gestione file.</span><span class="sxs-lookup"><span data-stu-id="3256b-108">The Srdelayed tool is intended for system state recovery applications; it does not replace the file management functions.</span></span> <span data-ttu-id="3256b-109">Questo strumento deve essere utilizzato solo quando l'applicazione non è in grado di spostare, eliminare o impostare il nome breve di un file di sistema utilizzando le funzioni [**MoveFileEx**](/windows/desktop/api/winbase/nf-winbase-movefileexa), [**DeleteFile**](/windows/desktop/api/fileapi/nf-fileapi-deletefilea)e [**SetFileShortName**](/windows/desktop/api/winbase/nf-winbase-setfileshortnamea) .</span><span class="sxs-lookup"><span data-stu-id="3256b-109">This tool should be used only when the application is unable to move, delete, or set the short name of a system file using the [**MoveFileEx**](/windows/desktop/api/winbase/nf-winbase-movefileexa), [**DeleteFile**](/windows/desktop/api/fileapi/nf-fileapi-deletefilea), and [**SetFileShortName**](/windows/desktop/api/winbase/nf-winbase-setfileshortnamea) functions.</span></span> <span data-ttu-id="3256b-110">Durante il ripristino e il riavvio dello stato del sistema, Srdelayed.exe viene utilizzato da ripristino configurazione di sistema e dallo strumento da riga di comando wbadmin.exe per spostare, eliminare e impostare il nome breve in alcuni file di sistema.</span><span class="sxs-lookup"><span data-stu-id="3256b-110">During a system state restore and restart, Srdelayed.exe is used by System Restore and the wbadmin.exe command-line tool to move, delete, and set the short name on certain system files.</span></span> <span data-ttu-id="3256b-111">Srdelayed può quindi essere utile per gli sviluppatori che richiedono la possibilità di ripristinare questi file di sistema nelle proprie applicazioni di ripristino dello stato del sistema.</span><span class="sxs-lookup"><span data-stu-id="3256b-111">Srdelayed may therefore be useful to developers that require the capability to restore these system files in their own system state recovery applications.</span></span>

<span data-ttu-id="3256b-112">Srdelayed può eseguire le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="3256b-112">Srdelayed can perform the following operations:</span></span>

-   <span data-ttu-id="3256b-113">Operazione di spostamento del file simile alla funzione [**MoveFileEx**](/windows/desktop/api/winbase/nf-winbase-movefileexa) con **ritardo MOVEFILE \_ \_ fino al \_** flag di riavvio</span><span class="sxs-lookup"><span data-stu-id="3256b-113">A move file operation similar to the [**MoveFileEx**](/windows/desktop/api/winbase/nf-winbase-movefileexa) function with the **MOVEFILE\_DELAY\_UNTIL\_REBOOT** flag</span></span>
-   <span data-ttu-id="3256b-114">Operazione Delete file simile alla funzione [**DeleteFile**](/windows/desktop/api/fileapi/nf-fileapi-deletefilea)</span><span class="sxs-lookup"><span data-stu-id="3256b-114">A delete file operation similar to the [**DeleteFile**](/windows/desktop/api/fileapi/nf-fileapi-deletefilea) function</span></span>
-   <span data-ttu-id="3256b-115">Operazione di impostazione del nome breve simile alla funzione [**SetFileShortName**](/windows/desktop/api/winbase/nf-winbase-setfileshortnamea)</span><span class="sxs-lookup"><span data-stu-id="3256b-115">A set short-name operation similar to the [**SetFileShortName**](/windows/desktop/api/winbase/nf-winbase-setfileshortnamea) function</span></span>

<span data-ttu-id="3256b-116">Per usare Srdelayed, l'applicazione richiede il percorso completo del file di Srdelayed.exe e il percorso completo di un file di testo Unicode che è stato creato per contenere le informazioni necessarie allo strumento per eseguire tutte le operazioni di gestione dei file richieste.</span><span class="sxs-lookup"><span data-stu-id="3256b-116">To use Srdelayed, your application requires the full path to the location of the Srdelayed.exe file and the full path to a Unicode text file that you have authored to contain the information the tool needs to perform all the file management operations being requested.</span></span> <span data-ttu-id="3256b-117">L'applicazione è responsabile di garantire che il file di testo non contenga richieste ridondanti per un'operazione e che gestisca l'ordine richiesto delle operazioni di gestione file.</span><span class="sxs-lookup"><span data-stu-id="3256b-117">Your application is responsible for ensuring that this text file does not contain redundant requests for an operation and that it handles any required ordering of the file management operations.</span></span> <span data-ttu-id="3256b-118">Ad esempio, poiché una cartella deve essere vuota per essere eliminata, l'applicazione deve garantire che il file di testo specifichi la rimozione di tutti i file all'interno della cartella prima di richiedere l'eliminazione della cartella.</span><span class="sxs-lookup"><span data-stu-id="3256b-118">For example, because a folder must be empty to be deleted, your application needs to ensure that the text file specifies the removal of all files inside the folder before requesting the folder be deleted.</span></span>

<span data-ttu-id="3256b-119">Se la voce **SetupExecute** non esiste già nel registro di sistema, l'applicazione deve creare una voce di tipo **reg \_ \_ multisz** denominata **SetupExecute** nella seguente chiave del registro di sistema: **HKEY \_ Local \_ Machine** \\ **System** \\ **CurrentControlSet** \\ **Control** \\ **Session Manager**.</span><span class="sxs-lookup"><span data-stu-id="3256b-119">If the **SetupExecute** entry does not already exist in the registry, your application needs to create a **REG\_MULTI\_SZ** type entry named **SetupExecute** under the following registry key: **HKEY\_LOCAL\_MACHINE**\\**System**\\**CurrentControlSet**\\**Control**\\**Session Manager**.</span></span>

<span data-ttu-id="3256b-120">L'applicazione deve usare il formato seguente per impostare il valore di **SetupExecute** sul percorso completo della posizione del file di Srdelayed.exe e il percorso completo della posizione del file di testo.</span><span class="sxs-lookup"><span data-stu-id="3256b-120">Your application should use the following format to set the value of **SetupExecute** to the full path to the location of the Srdelayed.exe file and the full path to the location of the text file.</span></span> <span data-ttu-id="3256b-121">Anteporre " \\ \\ ?? \\ " al percorso del file di testo, come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="3256b-121">Prefix "\\\\??\\" to the path of the text file, as follows:</span></span>

<span data-ttu-id="3256b-122">*Percorso completo per Srdelayed.exe* \\ ? \\ \\ *Percorso completo del file di testo*</span><span class="sxs-lookup"><span data-stu-id="3256b-122">*Full Path to Srdelayed.exe* \\\\??\\*Full Path to Text file*</span></span>  


<span data-ttu-id="3256b-123">Ad esempio, il valore seguente per **SetupExecute** indica che il Srdelayed.exe si trova nella cartella system32 e il file di testo è denominato DelayedOperations:</span><span class="sxs-lookup"><span data-stu-id="3256b-123">For example, the following value for **SetupExecute** indicates that the Srdelayed.exe is located in the System32 folder and the text file is named DelayedOperations:</span></span>

<span data-ttu-id="3256b-124">C: \\ Windows \\ system32 \\srdelayed.exe \\ \\ ? \\ C: \\ temp \\ DelayedOperations</span><span class="sxs-lookup"><span data-stu-id="3256b-124">C:\\Windows\\System32\\srdelayed.exe \\\\??\\C:\\temp\\DelayedOperations</span></span>  


<span data-ttu-id="3256b-125">Gli spazi nel percorso e nel nome devono essere codificati in formato esadecimale.</span><span class="sxs-lookup"><span data-stu-id="3256b-125">Spaces in the path and name should be hexadecimal encoded.</span></span> <span data-ttu-id="3256b-126">Per *i file di programma*, ad esempio, codificare il percorso come " \\ \\ ?? \\ C:Program%20Files \\a.dll ".</span><span class="sxs-lookup"><span data-stu-id="3256b-126">For example, for *Program Files*, encode the path as "\\\\??\\C:Program%20Files\\a.dll".</span></span>

<span data-ttu-id="3256b-127">Quando il registro di sistema o il sistema viene ripristinato al riavvio, l'applicazione deve assicurarsi che **SetupExecute** venga scritto nell'hive del registro di sistema corretto.</span><span class="sxs-lookup"><span data-stu-id="3256b-127">When the registry or system is being restored upon restart, your application needs to ensure that **SetupExecute** gets written in the correct registry hive.</span></span> <span data-ttu-id="3256b-128">Il ripristino del registro di sistema viene eseguito prima dell'esecuzione Srdelayed.exe.</span><span class="sxs-lookup"><span data-stu-id="3256b-128">Recovery of the registry is performed before Srdelayed.exe is run.</span></span> <span data-ttu-id="3256b-129">L'applicazione deve scrivere **SetupExecute** nella versione ripristinata del registro di sistema, perché si tratta della versione che viene letta.</span><span class="sxs-lookup"><span data-stu-id="3256b-129">The application needs to write **SetupExecute** into the recovered version of the registry because this is the version that is read.</span></span>

## <a name="format-for-the-srdelayed-input-file"></a><span data-ttu-id="3256b-130">Formato per il file di input Srdelayed</span><span class="sxs-lookup"><span data-stu-id="3256b-130">Format for the Srdelayed Input File</span></span>

<span data-ttu-id="3256b-131">Tutte le informazioni Srdelayed devono eseguire operazioni di gestione dei file sono specificate come una stringa di caratteri Unicode in un file di testo Unicode.</span><span class="sxs-lookup"><span data-stu-id="3256b-131">All the information Srdelayed needs to perform file management operations is specified as a string of Unicode characters in a Unicode text file.</span></span> <span data-ttu-id="3256b-132">La stringa di caratteri Unicode viene partizionata in record ognuno dei quali è partizionato in quattro campi.</span><span class="sxs-lookup"><span data-stu-id="3256b-132">The string of Unicode characters is partitioned into records that are themselves each partitioned into four fields.</span></span> <span data-ttu-id="3256b-133">Ogni record specifica un singolo file di spostamento, un file di eliminazione o l'operazione di impostazione del nome breve.</span><span class="sxs-lookup"><span data-stu-id="3256b-133">Each record specifies a single move file, delete file, or set short-name operation.</span></span> <span data-ttu-id="3256b-134">I quattro campi di ogni record contengono i parametri per l'operazione.</span><span class="sxs-lookup"><span data-stu-id="3256b-134">The four fields of each record contain the parameters for the operation.</span></span> <span data-ttu-id="3256b-135">Srdelayed.exe esegue ogni operazione nell'ordine in cui si verificano i record nella stringa.</span><span class="sxs-lookup"><span data-stu-id="3256b-135">Srdelayed.exe performs each operation in the order that their records occur in the string.</span></span> <span data-ttu-id="3256b-136">L'applicazione deve verificare la presenza di eventuali record duplicati in questo file e rimuovere i duplicati.</span><span class="sxs-lookup"><span data-stu-id="3256b-136">Your application should check for any duplicate records in this file and remove the duplicates.</span></span>

<span data-ttu-id="3256b-137">Nella stringa seguente viene illustrato il formato di un file che richiede due operazioni e costituito da due record.</span><span class="sxs-lookup"><span data-stu-id="3256b-137">The following string illustrates the format for a file requesting two operations and consisting of two records.</span></span> <span data-ttu-id="3256b-138">Ogni campo di parametro termina con un singolo carattere L' \\ 0'.</span><span class="sxs-lookup"><span data-stu-id="3256b-138">Each parameter field ends with a single L'\\0' character.</span></span> <span data-ttu-id="3256b-139">Un record è costituito da quattro campi consecutivi.</span><span class="sxs-lookup"><span data-stu-id="3256b-139">A record is composed of four consecutive fields.</span></span> <span data-ttu-id="3256b-140">\\Alla fine di tutti i record viene aggiunto un carattere aggiuntivo a L'0'.</span><span class="sxs-lookup"><span data-stu-id="3256b-140">An additional single L'\\0' character is appended to the end of all records.</span></span>

`<ParamA1>L'\0'<ParamA2>L'\0'<ParamA3>L'\0'<ParamA4>L'\0'<ParamB1>L'\0'<ParamB2>L'\0'<ParamB3>L'\0'<ParamB4>L'\0'L'\0'`  
`|-----------------------RecordA------------------------|------------------------RecordB------------------------|`  


<span data-ttu-id="3256b-141">Il significato dei campi primo, secondo, terzo e quarto parametro varia a seconda che il record Descriva un'operazione di spostamento, eliminazione o impostazione del nome breve.</span><span class="sxs-lookup"><span data-stu-id="3256b-141">The meaning of the first, second, third, and fourth parameter fields depends on whether the record describes a move, delete, or set short-name operation.</span></span>

## <a name="format-for-a-move-file-record"></a><span data-ttu-id="3256b-142">Formato per un record del file di spostamento</span><span class="sxs-lookup"><span data-stu-id="3256b-142">Format for a Move File Record</span></span>

<span data-ttu-id="3256b-143">Il campo 1 lo identifica come una richiesta di spostamento di un file.</span><span class="sxs-lookup"><span data-stu-id="3256b-143">Field 1 identifies this as a request to move a file.</span></span> <span data-ttu-id="3256b-144">Il valore in questo campo è sempre L "MoveFile" e fa distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="3256b-144">The value in this field is always L"MoveFile" and is case sensitive.</span></span>

<span data-ttu-id="3256b-145">Il campo 2 specifica il percorso di origine del file.</span><span class="sxs-lookup"><span data-stu-id="3256b-145">Field 2 specifies the source location of the file.</span></span> <span data-ttu-id="3256b-146">L'operazione di spostamento del file Srdelayed non supporta lo spostamento di una cartella.</span><span class="sxs-lookup"><span data-stu-id="3256b-146">The Srdelayed move file operation does not support moving a folder.</span></span> <span data-ttu-id="3256b-147">È necessario specificare un file in questo campo.</span><span class="sxs-lookup"><span data-stu-id="3256b-147">A file must be specified in this field.</span></span> <span data-ttu-id="3256b-148">Il valore di questo campo è il percorso completo del file accodato a " \\ \\ ?? \\ ", a meno che il percorso non includa un identificatore univoco globale (Guid), che usa " \\ \\ ? \\ " come prefisso.</span><span class="sxs-lookup"><span data-stu-id="3256b-148">The value for this field is the full path of the file appended to "\\\\??\\" unless the path includes a globally unique identifier (GUID), which uses "\\\\?\\" as a prefix.</span></span> <span data-ttu-id="3256b-149">Rimuovere " \\ \\ ? \\ " prima di aggiungere a " \\ \\ ?? \\ ".</span><span class="sxs-lookup"><span data-stu-id="3256b-149">Remove "\\\\?\\" before appending to "\\\\??\\".</span></span>

<span data-ttu-id="3256b-150">Il campo 3 specifica la destinazione del file.</span><span class="sxs-lookup"><span data-stu-id="3256b-150">Field 3 specifies the destination of the file.</span></span> <span data-ttu-id="3256b-151">L'operazione di spostamento del file funziona solo all'interno di un volume.</span><span class="sxs-lookup"><span data-stu-id="3256b-151">The move file operation works only within a volume.</span></span> <span data-ttu-id="3256b-152">L'origine e la destinazione devono trovarsi nello stesso volume.</span><span class="sxs-lookup"><span data-stu-id="3256b-152">The source and destination must be on the same volume.</span></span> <span data-ttu-id="3256b-153">Il valore di questo campo è il percorso completo del file accodato a " \\ \\ ?? \\ ", a meno che il percorso non includa un identificatore univoco globale (Guid), che usa " \\ \\ ? \\ " come prefisso.</span><span class="sxs-lookup"><span data-stu-id="3256b-153">The value for this field is the full path of the file appended to "\\\\??\\" unless the path includes a globally unique identifier (GUID), which uses "\\\\?\\" as a prefix.</span></span> <span data-ttu-id="3256b-154">Rimuovere " \\ \\ ? \\ " prima di aggiungere a " \\ \\ ?? \\ ".</span><span class="sxs-lookup"><span data-stu-id="3256b-154">Remove "\\\\?\\" before appending to "\\\\??\\".</span></span>

<span data-ttu-id="3256b-155">Il campo 4 riceve informazioni sullo stato da Srdelayed.</span><span class="sxs-lookup"><span data-stu-id="3256b-155">Field 4 receives status information from Srdelayed.</span></span> <span data-ttu-id="3256b-156">Il valore in questo campo deve essere impostato su L "NotExecuted" per un nuovo record.</span><span class="sxs-lookup"><span data-stu-id="3256b-156">The value in this field should be set to L"NotExecuted" for a new record.</span></span>

<span data-ttu-id="3256b-157">Nell'esempio seguente viene fatto riferimento al file in base al percorso dell'unità.</span><span class="sxs-lookup"><span data-stu-id="3256b-157">The following example references the file by drive path.</span></span> <span data-ttu-id="3256b-158">Se il percorso e il nome dell'origine sono C: \\ Stage \\a.dll, questo record richiede che Srdelayed lo sposti in c: \\ temp \\a.dll.</span><span class="sxs-lookup"><span data-stu-id="3256b-158">If the path and name of the source is C:\\Stage\\a.dll, this record requests that Srdelayed move it to C:\\temp\\a.dll.</span></span>

<span data-ttu-id="3256b-159">MoveFile \\ \\ ? \\ C: \\ \\a.dll temporanea \\ \\ ? \\ C: \\ temp \\a.dll NotExecuted</span><span class="sxs-lookup"><span data-stu-id="3256b-159">MoveFile \\\\??\\C:\\Stage\\a.dll \\\\??\\C:\\temp\\a.dll NotExecuted</span></span>  


<span data-ttu-id="3256b-160">Nell'esempio seguente viene fatto riferimento al file in base al percorso GUID del volume.</span><span class="sxs-lookup"><span data-stu-id="3256b-160">The following example references the file by volume GUID path.</span></span> <span data-ttu-id="3256b-161">Se il percorso e il nome dell'origine sono \\ \\ ? \\ Volume {26a21bda-a627-11D7-9931-806e6f6e6963} \\ fase \\a.dll, questo record richiede che Srdelayed lo sposti \\ \\ ? \\a.dll Temp del volume {26a21bda-a627-11D7-9931-806e6f6e6963} \\ \\</span><span class="sxs-lookup"><span data-stu-id="3256b-161">If the path and name of the source is \\\\?\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\Stage\\a.dll, this record requests that Srdelayed move it to \\\\?\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\a.dll</span></span>

 <span data-ttu-id="3256b-162">MoveFile \\ \\ ? \\a.dll fase del volume {26a21bda-a627-11D7-9931-806e6f6e6963} \\ \\ \\ \\ ? \\ Volume {26a21bda-a627-11D7-9931-806e6f6e6963} \\ temp \\a.dll NotExecuted</span><span class="sxs-lookup"><span data-stu-id="3256b-162">MoveFile \\\\??\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\Stage\\a.dll \\\\??\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\a.dll NotExecuted</span></span>  


## <a name="format-for-a-delete-file-record"></a><span data-ttu-id="3256b-163">Formato per un record di file Delete</span><span class="sxs-lookup"><span data-stu-id="3256b-163">Format for a Delete File Record</span></span>

<span data-ttu-id="3256b-164">Il campo 1 lo identifica come una richiesta di eliminazione di un file.</span><span class="sxs-lookup"><span data-stu-id="3256b-164">Field 1 identifies this as a request to delete a file.</span></span> <span data-ttu-id="3256b-165">Il valore in questo campo è sempre L "DeleteFile" e fa distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="3256b-165">The value in this field is always L"DeleteFile" and is case sensitive.</span></span>

<span data-ttu-id="3256b-166">Il campo 2 non è usato.</span><span class="sxs-lookup"><span data-stu-id="3256b-166">Field 2 is unused.</span></span> <span data-ttu-id="3256b-167">Il valore in questo campo deve essere impostato su L "inutilizzato".</span><span class="sxs-lookup"><span data-stu-id="3256b-167">The value in this field should be set to L"Unused".</span></span>

<span data-ttu-id="3256b-168">Il campo 3 specifica il file da rimuovere.</span><span class="sxs-lookup"><span data-stu-id="3256b-168">Field 3 specifies the file to be removed.</span></span> <span data-ttu-id="3256b-169">Per rimuovere una cartella, è necessario che sia vuota.</span><span class="sxs-lookup"><span data-stu-id="3256b-169">A folder must be empty to be removed.</span></span> <span data-ttu-id="3256b-170">Utilizzare le operazioni di eliminazione file per rimuovere tutti i file nella cartella prima di rimuovere la cartella.</span><span class="sxs-lookup"><span data-stu-id="3256b-170">Use delete file operations to remove all files in the folder before removing the folder.</span></span> <span data-ttu-id="3256b-171">Il valore di questo campo è il percorso completo del file accodato a " \\ \\ ?? \\ ", a meno che il percorso non includa un identificatore univoco globale (Guid), che usa " \\ \\ ? \\ " come prefisso.</span><span class="sxs-lookup"><span data-stu-id="3256b-171">The value for this field is the full path of the file appended to "\\\\??\\" unless the path includes a globally unique identifier (GUID), which uses "\\\\?\\" as a prefix.</span></span> <span data-ttu-id="3256b-172">Rimuovere " \\ \\ ? \\ " prima di aggiungere a " \\ \\ ?? \\ ".</span><span class="sxs-lookup"><span data-stu-id="3256b-172">Remove "\\\\?\\" before appending to "\\\\??\\".</span></span>

<span data-ttu-id="3256b-173">Il campo 4 riceve informazioni sullo stato da Srdelayed.</span><span class="sxs-lookup"><span data-stu-id="3256b-173">Field 4 receives status information from Srdelayed.</span></span> <span data-ttu-id="3256b-174">Il valore in questo campo deve essere impostato su L "NotExecuted" per un nuovo record.</span><span class="sxs-lookup"><span data-stu-id="3256b-174">The value in this field should be set to L"NotExecuted" for a new record.</span></span>

<span data-ttu-id="3256b-175">Nell'esempio seguente viene fatto riferimento al file in base al percorso dell'unità.</span><span class="sxs-lookup"><span data-stu-id="3256b-175">The following example references the file by drive path.</span></span> <span data-ttu-id="3256b-176">Se il percorso e il nome sono C: \\ temp \\b.dll, questo record richiede che Srdelayed elimini il file.</span><span class="sxs-lookup"><span data-stu-id="3256b-176">If the path and name is C:\\temp\\b.dll, this record requests that Srdelayed delete the file.</span></span>

<span data-ttu-id="3256b-177">DeleteFile non usato \\ \\ ? \\ C: \\ temp \\b.dll NotExecuted</span><span class="sxs-lookup"><span data-stu-id="3256b-177">DeleteFile Unused \\\\??\\C:\\temp\\b.dll NotExecuted</span></span>  


<span data-ttu-id="3256b-178">Nell'esempio seguente viene fatto riferimento al file in base al GUID del volume.</span><span class="sxs-lookup"><span data-stu-id="3256b-178">The following example references the file by volume GUID.</span></span> <span data-ttu-id="3256b-179">Se il percorso e il nome sono \\ \\ ? \\ Volume {26a21bda-a627-11D7-9931-806e6f6e6963} \\ temp \\b.dll, questo record richiede che Srdelayed rimuova il file.</span><span class="sxs-lookup"><span data-stu-id="3256b-179">If the path and name is \\\\?\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\b.dll, this record requests that Srdelayed remove the file.</span></span>

<span data-ttu-id="3256b-180">DeleteFile non usato \\ \\ ? \\ Volume {26a21bda-a627-11D7-9931-806e6f6e6963} \\ temp \\b.dll\\ NotExecuted</span><span class="sxs-lookup"><span data-stu-id="3256b-180">DeleteFile Unused \\\\??\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\b.dll\\ NotExecuted</span></span>  


## <a name="format-for-set-short-name-record"></a><span data-ttu-id="3256b-181">Formato per il record di set Short-Name</span><span class="sxs-lookup"><span data-stu-id="3256b-181">Format for Set Short-Name Record</span></span>

<span data-ttu-id="3256b-182">Il campo 1 lo identifica come una richiesta di impostazione del nome breve di un file.</span><span class="sxs-lookup"><span data-stu-id="3256b-182">Field 1 identifies this as a request to set a file's short name.</span></span> <span data-ttu-id="3256b-183">Il valore in questo campo è sempre L "SetFileShortName" e fa distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="3256b-183">The value in this field is always L"SetFileShortName" and is case sensitive.</span></span>

<span data-ttu-id="3256b-184">Il campo 2 specifica il nome breve.</span><span class="sxs-lookup"><span data-stu-id="3256b-184">Field 2 specifies the short name.</span></span>

<span data-ttu-id="3256b-185">Campo 3 specifica il percorso e il nome lungo per la ricezione del nome breve.</span><span class="sxs-lookup"><span data-stu-id="3256b-185">Field 3 field specifies the path and long name to receive the short name.</span></span> <span data-ttu-id="3256b-186">Il valore di questo campo è il percorso e il nome lungo del file accodato a " \\ \\ ?? \\ ", a meno che il percorso non includa un identificatore univoco globale (Guid), che usa " \\ \\ ? \\ " come prefisso.</span><span class="sxs-lookup"><span data-stu-id="3256b-186">The value for this field is the path and long name of the file appended to "\\\\??\\" unless the path includes a globally unique identifier (GUID), which uses "\\\\?\\" as a prefix.</span></span> <span data-ttu-id="3256b-187">Rimuovere " \\ \\ ? \\ " prima di aggiungere a " \\ \\ ?? \\ ".</span><span class="sxs-lookup"><span data-stu-id="3256b-187">Remove "\\\\?\\" before appending to "\\\\??\\".</span></span>

<span data-ttu-id="3256b-188">Il campo 4 riceve informazioni sullo stato da Srdelayed.</span><span class="sxs-lookup"><span data-stu-id="3256b-188">Field 4 receives status information from Srdelayed.</span></span> <span data-ttu-id="3256b-189">Il valore in questo campo deve essere impostato su L "NotExecuted" per un nuovo record.</span><span class="sxs-lookup"><span data-stu-id="3256b-189">The value in this field should be set to L"NotExecuted" for a new record.</span></span>

<span data-ttu-id="3256b-190">Nell'esempio seguente viene fatto riferimento al file in base al percorso dell'unità.</span><span class="sxs-lookup"><span data-stu-id="3256b-190">The following example references the file by drive path.</span></span> <span data-ttu-id="3256b-191">Se il percorso e il nome del file sono C: \\ temp \\ShortFileName.dll, questo record richiede che il file riceva un nome breve, shortn ~1.dll.</span><span class="sxs-lookup"><span data-stu-id="3256b-191">If the path and name of the file is C:\\temp\\ShortFileName.dll, this record requests that the file receive a short name, ShortN~1.dll.</span></span>

<span data-ttu-id="3256b-192">SetFileShortName shortn ~1.dll \\ \\ ? \\ C: \\ temp \\ShortFileName.dll NotExecuted</span><span class="sxs-lookup"><span data-stu-id="3256b-192">SetFileShortName ShortN~1.dll \\\\??\\C:\\temp\\ShortFileName.dll NotExecuted</span></span>  


<span data-ttu-id="3256b-193">Nell'esempio seguente viene fatto riferimento al file in base al GUID del volume.</span><span class="sxs-lookup"><span data-stu-id="3256b-193">The following example references the file by volume GUID.</span></span> <span data-ttu-id="3256b-194">Se il percorso e il nome del file sono \\ \\ \\ Volume {26a21bda-a627-11D7-9931-806e6f6e6963} \\ temp \\ShortFileName.dll\\ , questo record richiede che il file riceva un nome breve, shortn ~1.dll.</span><span class="sxs-lookup"><span data-stu-id="3256b-194">If the path and name of the file is \\\\?\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\ShortFileName.dll\\, this record requests that the file receive a short name, ShortN~1.dll.</span></span>

<span data-ttu-id="3256b-195">SetFileShortName shortn ~1.dll \\ \\ ? \\ Volume {26a21bda-a627-11D7-9931-806e6f6e6963} \\ temp \\ShortFileName.dll\\ NotExecuted</span><span class="sxs-lookup"><span data-stu-id="3256b-195">SetFileShortName ShortN~1.dll \\\\??\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\ShortFileName.dll\\ NotExecuted</span></span>  


## <a name="srdelayed-operations-status"></a><span data-ttu-id="3256b-196">Stato delle operazioni di Srdelayed</span><span class="sxs-lookup"><span data-stu-id="3256b-196">Srdelayed Operations Status</span></span>

<span data-ttu-id="3256b-197">Srdelayed scrive la stringa L "SC =*xxxxxxx*" nel quarto campo di ogni record del file di testo, dove *xxxxxxx* è un valore esadecimale che indica lo stato dell'operazione richiesta.</span><span class="sxs-lookup"><span data-stu-id="3256b-197">Srdelayed writes the string L"SC=*xxxxxxx*" into the fourth field of each record of the text file, where *xxxxxxx* is a hexadecimal that indicates the status of the requested operation.</span></span> <span data-ttu-id="3256b-198">Un valore pari a zero indica che l'operazione è riuscita.</span><span class="sxs-lookup"><span data-stu-id="3256b-198">A value of zero indicates the operation succeeded.</span></span>

<span data-ttu-id="3256b-199">Srdelayed crea una chiave del registro di sistema denominata **SystemRestore** in **HKEY \_ Local \_ Machine** \\ **software** \\ **Microsoft** \\ **Windows NT** \\ **CurrentVersion** per registrare il risultato dell'intera operazione di ripristino.</span><span class="sxs-lookup"><span data-stu-id="3256b-199">Srdelayed creates a registry key named **SystemRestore** under **HKEY\_LOCAL\_MACHINE**\\**Software**\\**Microsoft**\\**Windows NT**\\**CurrentVersion** to log the outcome of the entire restore operation.</span></span> <span data-ttu-id="3256b-200">Se Srdelayed esegue tutte le operazioni richieste con esito positivo, il nome RestoreStatusResult viene scritto sotto questa chiave con un valore zero.</span><span class="sxs-lookup"><span data-stu-id="3256b-200">If Srdelayed performs all the requested operations with success, the name RestoreStatusResult is written under this key with a zero value.</span></span> <span data-ttu-id="3256b-201">Se Srdelayed non è in grado di eseguire alcuna delle operazioni richieste, i nomi RestoreStatusResult e RestoreStatusDetails vengono scritti sotto questa chiave con valori diversi da zero.</span><span class="sxs-lookup"><span data-stu-id="3256b-201">If Srdelayed is unable to perform any of the requested operations, the names RestoreStatusResult and RestoreStatusDetails are written under this key with nonzero values.</span></span> <span data-ttu-id="3256b-202">Il nome RestoreStatusDetails viene scritto in base a questa chiave solo se Srdelayed non è in grado di eseguire le operazioni richieste.</span><span class="sxs-lookup"><span data-stu-id="3256b-202">The name RestoreStatusDetails is written under this key only if Srdelayed is unable to perform any requested operations.</span></span> <span data-ttu-id="3256b-203">Se un'operazione per impostare il nome breve di un file ha esito negativo, Srdelayed continua con l'operazione successiva.</span><span class="sxs-lookup"><span data-stu-id="3256b-203">If an operation to set the short name of a file is unsuccessful, Srdelayed continues to the next operation.</span></span> <span data-ttu-id="3256b-204">Srdelayed considera cruciali le operazioni di spostamento del file e di eliminazione dei file e non continua se un'operazione di spostamento o eliminazione ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="3256b-204">Srdelayed considers the move file and delete file operations to be critical and does not continue if a move or delete operation is unsuccessful.</span></span>

 

 