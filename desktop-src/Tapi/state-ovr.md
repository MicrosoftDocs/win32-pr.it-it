---
description: Lo stato della sessione o della chiamata indica lo stato corrente di una sessione, ad esempio &\# 0034; offerta&\# 0034; oppure &\# 0034; connected. &\# 0034; Una gestione corretta delle informazioni sullo stato è essenziale per il corretto funzionamento della maggior parte delle applicazioni TAPI.
ms.assetid: a6a49b77-4e9b-4f23-bfe6-26f26549b18f
title: State
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 88fb9c482fcb9e432b5bfb5d36f77cd09f538086
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106318931"
---
# <a name="state"></a><span data-ttu-id="fd776-103">State</span><span class="sxs-lookup"><span data-stu-id="fd776-103">State</span></span>

<span data-ttu-id="fd776-104">Lo stato della sessione o della chiamata indica lo stato corrente di una sessione, ad esempio "offering" o "Connected".</span><span class="sxs-lookup"><span data-stu-id="fd776-104">Session or call state indicates the current status of a session, such as "offering" or "connected."</span></span> <span data-ttu-id="fd776-105">Una gestione corretta delle informazioni sullo stato è essenziale per il corretto funzionamento della maggior parte delle applicazioni TAPI.</span><span class="sxs-lookup"><span data-stu-id="fd776-105">Proper handling of state information is vital to the proper functioning of most TAPI applications.</span></span> <span data-ttu-id="fd776-106">Ad esempio, l'operazione di risposta può essere eseguita solo su una sessione offerta, ma un trasferimento avrà esito negativo se la sessione si trova in tale stato.</span><span class="sxs-lookup"><span data-stu-id="fd776-106">For example, the answer operation can be performed only on an offered session, but a transfer will fail if the session is in that state.</span></span>

<span data-ttu-id="fd776-107">Lo stato di una sessione viene modificato in seguito a eventi.</span><span class="sxs-lookup"><span data-stu-id="fd776-107">A session's state changes as a result of events.</span></span> <span data-ttu-id="fd776-108">Gli eventi possono essere richiesti o non richiesti.</span><span class="sxs-lookup"><span data-stu-id="fd776-108">Events can be solicited or unsolicited.</span></span> <span data-ttu-id="fd776-109">Gli *eventi richiesti* sono causati dall'applicazione che controlla la sessione, ad esempio quando richiama un'operazione di sessione TAPI.</span><span class="sxs-lookup"><span data-stu-id="fd776-109">*Solicited events* are caused by the application controlling the session, such as when it invokes a TAPI session operation.</span></span> <span data-ttu-id="fd776-110">Gli *eventi non richiesti* sono causati dal commutatore, dalla rete telefonica, dall'utente che preme i pulsanti sul telefono locale o dalle azioni della parte remota.</span><span class="sxs-lookup"><span data-stu-id="fd776-110">*Unsolicited events* are caused by the switch, the telephone network, the user pressing buttons on the local phone, or the actions of the remote party.</span></span>

<span data-ttu-id="fd776-111">Ogni volta che un provider di servizi rileva una modifica dello stato della sessione, segnala la modifica a TAPI e TAPI genera una notifica degli eventi per tutte le applicazioni proprietarie e di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="fd776-111">Whenever a service provider detects a session state change, it reports the change to TAPI and TAPI issues an event notification to all owner and monitor applications.</span></span> <span data-ttu-id="fd776-112">L'applicazione deve rispondere in modo appropriato alle notifiche.</span><span class="sxs-lookup"><span data-stu-id="fd776-112">The application must react to these notifications appropriately.</span></span> <span data-ttu-id="fd776-113">Per informazioni sul controllo degli eventi segnalati a un'applicazione, vedere notifica degli eventi nell' [inizializzazione di TAPI](tapi-initialization.md) .</span><span class="sxs-lookup"><span data-stu-id="fd776-113">Please see Event Notification under [TAPI Initialization](tapi-initialization.md) for information on controlling which events are reported to an application.</span></span>

<span data-ttu-id="fd776-114">Un'applicazione deve sempre elaborare le notifiche degli eventi di stato.</span><span class="sxs-lookup"><span data-stu-id="fd776-114">An application should always process state event notifications.</span></span> <span data-ttu-id="fd776-115">Le transizioni di stato valide per una configurazione fisica potrebbero non essere valide per un altro.</span><span class="sxs-lookup"><span data-stu-id="fd776-115">State transitions valid for one physical configuration may be invalid for another.</span></span> <span data-ttu-id="fd776-116">Si consideri, ad esempio, una riga che termina fisicamente sia nel computer che in un set telefonico separato, creando una configurazione della linea di entità tra il computer e il set di telefono.</span><span class="sxs-lookup"><span data-stu-id="fd776-116">For example, consider a line that physically terminates both at the computer and at a separate phone set, creating a party line configuration between the computer and the phone set.</span></span> <span data-ttu-id="fd776-117">È possibile che un'applicazione in esecuzione nel computer non conosca le attività del set di telefono.</span><span class="sxs-lookup"><span data-stu-id="fd776-117">An application running on the computer may not know about phone set activities.</span></span> <span data-ttu-id="fd776-118">Ovvero è possibile che la riga sia in uso senza che il provider di servizi ne sia a conoscenza.</span><span class="sxs-lookup"><span data-stu-id="fd776-118">That is, the line may be in use without the service provider being aware of it.</span></span> <span data-ttu-id="fd776-119">Un'applicazione che tenta di effettuare una chiamata in uscita riuscirà ad allocare un aspetto di chiamata da TAPI, ma ciò comporta la condivisione della chiamata attiva sulla riga.</span><span class="sxs-lookup"><span data-stu-id="fd776-119">An application that attempts to make an outgoing call will succeed in allocating a call appearance from TAPI, but this results in sharing the active call on the line.</span></span> <span data-ttu-id="fd776-120">L'invio cieco di una stringa di connessione DTMF senza prima verificare la presenza di un tono di connessione non può comportare un comportamento intenzionale (o garbato).</span><span class="sxs-lookup"><span data-stu-id="fd776-120">Blindly sending a DTMF dial string without first checking for a dial tone may not result in intended (or polite) behavior.</span></span>

<span data-ttu-id="fd776-121">Un'applicazione non deve presupporre una progressione rigida da uno stato a un altro.</span><span class="sxs-lookup"><span data-stu-id="fd776-121">An application should not assume a rigid progression from one state to another.</span></span> <span data-ttu-id="fd776-122">Gli eventi di stato arrivano e vengono inviati in modo asincrono e le notifiche potrebbero non essere ricevute in un ordine prevedibile.</span><span class="sxs-lookup"><span data-stu-id="fd776-122">State events arrive and are forwarded asynchronously and notifications may not be received in a predictable order.</span></span> <span data-ttu-id="fd776-123">Pertanto, le notifiche dello stato di chiamata devono essere visualizzate come indicare all'applicazione il nuovo stato della chiamata anziché come segnalazione delle transizioni tra due Stati.</span><span class="sxs-lookup"><span data-stu-id="fd776-123">Therefore, call-state notifications should be viewed as telling the application the call's new state instead of as reporting the transitions between two states.</span></span>

<span data-ttu-id="fd776-124">È necessario che tutti i provider di servizi di telefonia forniscano queste informazioni.</span><span class="sxs-lookup"><span data-stu-id="fd776-124">All telephony service providers must supply this information.</span></span>

<span data-ttu-id="fd776-125">\* \* TAPI 2. x: \* \*[**lineGetCallStatus**](/windows/win32/api/tapi/nf-tapi-linegetcallstatus), [**lineGetCallInfo**](/windows/win32/api/tapi/nf-tapi-linegetcallinfo), [**riga \_ CALLSTATE**](./line-callstate.md) Message, [LINECALLSTATE \_ costanti](./linecallstate--constants.md)</span><span class="sxs-lookup"><span data-stu-id="fd776-125">\*\*TAPI 2.x:  \*\*[**lineGetCallStatus**](/windows/win32/api/tapi/nf-tapi-linegetcallstatus), [**lineGetCallInfo**](/windows/win32/api/tapi/nf-tapi-linegetcallinfo), [**LINE\_CALLSTATE**](./line-callstate.md) message, [LINECALLSTATE\_ Constants](./linecallstate--constants.md)</span></span>

<span data-ttu-id="fd776-126">**TAPI 3. x: **[**ITCallInfo:: Get \_ CallInfoLong**](/windows/desktop/api/tapi3if/nf-tapi3if-itcallinfo-get_callinfolong) (** membro CIL \_ CALLID** di [**CALLINFO \_ Long**](/windows/desktop/api/Tapi3if/ne-tapi3if-callinfo_long)), notifica [**ITCallStateEvent**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallstateevent) , enumeratore [**\_ stato chiamata**](/windows/desktop/api/Tapi3if/ne-tapi3if-call_state)</span><span class="sxs-lookup"><span data-stu-id="fd776-126">**TAPI 3.x:  **[**ITCallInfo::get\_CallInfoLong**](/windows/desktop/api/tapi3if/nf-tapi3if-itcallinfo-get_callinfolong) (** CIL\_CALLID** member of [**CALLINFO\_LONG**](/windows/desktop/api/Tapi3if/ne-tapi3if-callinfo_long)), [**ITCallStateEvent**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallstateevent) notification, [**CALL\_STATE**](/windows/desktop/api/Tapi3if/ne-tapi3if-call_state) enumerator</span></span>

 

 
