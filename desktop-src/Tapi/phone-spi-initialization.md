---
description: Come parte dell'astrazione del dispositivo telefonico definita da TSPI, TAPI e il provider di servizi devono prima essere sottoposti a un'inizializzazione di base.
ms.assetid: cd8bb328-fbd0-409c-8471-34ad4c2c8d93
title: Inizializzazione del telefono SPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1d0c54e313c2be3846aeb604217f5324ec0d8a8d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106315272"
---
# <a name="phone-spi-initialization"></a><span data-ttu-id="1157e-103">Inizializzazione del telefono SPI</span><span class="sxs-lookup"><span data-stu-id="1157e-103">Phone SPI Initialization</span></span>

<span data-ttu-id="1157e-104">Come parte dell'astrazione del dispositivo telefonico definita da TSPI, TAPI e il provider di servizi devono prima essere sottoposti a un'inizializzazione di base.</span><span class="sxs-lookup"><span data-stu-id="1157e-104">As part of the phone device abstraction defined by TSPI, TAPI and the service provider must first undergo basic initialization.</span></span> <span data-ttu-id="1157e-105">Questa inizializzazione di base viene eseguita per le metà della linea e del telefono dell'interfaccia con lo stesso set di passaggi.</span><span class="sxs-lookup"><span data-stu-id="1157e-105">This basic initialization is accomplished both for the line and phone halves of the interface by the same set of steps.</span></span> <span data-ttu-id="1157e-106">Il primo di questi passaggi è la negoziazione della versione dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="1157e-106">The first of these steps is interface version negotiation.</span></span> <span data-ttu-id="1157e-107">Questa operazione viene eseguita chiamando la funzione [**TSPI \_ lineNegotiateTSPIVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiatetspiversion) .</span><span class="sxs-lookup"><span data-stu-id="1157e-107">TAPI performs this by calling the [**TSPI\_lineNegotiateTSPIVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiatetspiversion) function.</span></span> <span data-ttu-id="1157e-108">Questa funzione viene in genere usata per negoziare per conto di un singolo dispositivo a linee; dispositivi linea diversi all'interno dello stesso provider di servizi possono funzionare in base a diverse versioni dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="1157e-108">This function is usually used to negotiate on behalf of an individual line device; different line devices within the same service provider may operate according to different interface versions.</span></span> <span data-ttu-id="1157e-109">TAPI passa un valore di identificatore di dispositivo riservato speciale, [**Initialize \_ Negotiation**](initialize-negotiation.md), per indicare che sta negoziando una versione di interfaccia complessiva per le funzioni di inizializzazione che interessano l'intero provider di servizi, sia per le linee che per i telefoni.</span><span class="sxs-lookup"><span data-stu-id="1157e-109">TAPI passes a special reserved device identifier value, [**INITIALIZE\_NEGOTIATION**](initialize-negotiation.md), to indicate that it is negotiating an overall interface version for initialization functions that affect the entire service provider, both for lines and phones.</span></span>

<span data-ttu-id="1157e-110">Il risultato di questa negoziazione viene passato alle procedure successive fino a quando non viene aperto un dispositivo telefonico.</span><span class="sxs-lookup"><span data-stu-id="1157e-110">The result of this negotiation is passed to subsequent procedures until a phone device is opened.</span></span> <span data-ttu-id="1157e-111">A questo punto, il dispositivo telefonico viene sottoposta a commit in una determinata versione dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="1157e-111">At that time, the phone device becomes committed to a particular interface version.</span></span> <span data-ttu-id="1157e-112">Questa versione dell'interfaccia è implicita fino alla chiusura del telefono e non deve essere passata alle funzioni successive che operano su un telefono aperto.</span><span class="sxs-lookup"><span data-stu-id="1157e-112">This interface version is implicit until the phone is closed, and does not need to be passed to subsequent functions that operate on an opened phone.</span></span>

<span data-ttu-id="1157e-113">Dopo la negoziazione complessiva della versione dell'interfaccia, TAPI chiama la funzione [**TSPI \_ providerInit**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit) .</span><span class="sxs-lookup"><span data-stu-id="1157e-113">Following overall interface version negotiation, TAPI calls the [**TSPI\_providerInit**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit) function.</span></span> <span data-ttu-id="1157e-114">Questa funzione Inizializza il provider di servizi, assegnando anche i parametri necessari per l'operazione successiva.</span><span class="sxs-lookup"><span data-stu-id="1157e-114">This function initializes the service provider, also giving it parameters required for subsequent operation.</span></span> <span data-ttu-id="1157e-115">Questi parametri includono quanto segue:</span><span class="sxs-lookup"><span data-stu-id="1157e-115">These parameters include the following:</span></span>

-   <span data-ttu-id="1157e-116">*dwPermanentProviderID*: specifica l'identificatore permanente del provider di servizi da inizializzare, univoco all'interno dei provider di servizi in questo sistema.</span><span class="sxs-lookup"><span data-stu-id="1157e-116">*dwPermanentProviderID*: Specifies the permanent identifier of the service provider being initialized, unique within the service providers on this system.</span></span>
-   <span data-ttu-id="1157e-117">*dwLineDeviceIDBase*: specifica l'identificatore di dispositivo più basso per i dispositivi linea supportati da questo provider di servizi.</span><span class="sxs-lookup"><span data-stu-id="1157e-117">*dwLineDeviceIDBase*: Specifies the lowest device identifier for the line devices supported by this service provider.</span></span>
-   <span data-ttu-id="1157e-118">*dwPhoneDeviceIDBase*: specifica l'identificatore di dispositivo più basso per i dispositivi telefonici supportati da questo provider di servizi.</span><span class="sxs-lookup"><span data-stu-id="1157e-118">*dwPhoneDeviceIDBase*: Specifies the lowest device identifier for the phone devices supported by this service provider.</span></span> <span data-ttu-id="1157e-119">I dispositivi della classe del dispositivo telefonico telefonico sono identificati da numeri interi a partire da zero.</span><span class="sxs-lookup"><span data-stu-id="1157e-119">Devices of the telephony phone device class are identified by integers starting from zero.</span></span> <span data-ttu-id="1157e-120">Questo intervallo di identificatori è contiguo nell'intera gamma di dispositivi telefonici.</span><span class="sxs-lookup"><span data-stu-id="1157e-120">This range of identifiers is contiguous across the full range of phone devices.</span></span> <span data-ttu-id="1157e-121">Poiché possono essere presenti più provider di servizi che gestiscono dispositivi telefonici in un unico sistema, ogni provider di servizi ottiene una porzione contigua dell'intervallo totale.</span><span class="sxs-lookup"><span data-stu-id="1157e-121">Because there may be multiple service providers managing phone devices in a single system, each service provider gets a contiguous portion of the total range.</span></span> <span data-ttu-id="1157e-122">Questo parametro indica al provider di servizi il valore più basso nella parte dell'intervallo.</span><span class="sxs-lookup"><span data-stu-id="1157e-122">This parameter tells the service provider the lowest value in its portion of the range.</span></span> <span data-ttu-id="1157e-123">Il provider di servizi, anziché TAPI, è responsabile del mapping di questo intervallo di variabili ai propri identificatori interni dei dispositivi.</span><span class="sxs-lookup"><span data-stu-id="1157e-123">The service provider, rather than TAPI, is responsible for mapping this variable range to its own internal device identifiers.</span></span> <span data-ttu-id="1157e-124">In questo modo, il fornitore del provider di servizi garantisce una flessibilità sufficiente a usare gli identificatori dei dispositivi in estensioni specifiche del dispositivo, se necessario.</span><span class="sxs-lookup"><span data-stu-id="1157e-124">This gives the service-provider vendor sufficient flexibility to use device identifiers in device-specific extensions if it wants.</span></span> <span data-ttu-id="1157e-125">Poiché il provider di servizi sa quali identificatori di dispositivo vengono visualizzati in strutture di dati e parametri definiti da TAPI, può usare gli identificatori di dispositivo coerenti in strutture di dati e parametri di estensione specifici del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="1157e-125">Because the service provider knows what device identifiers appear in TAPI-defined parameters and data structures, it can use consistent device identifiers in device-specific extension parameters and data structures.</span></span>
-   <span data-ttu-id="1157e-126">*dwNumLines*: specifica il numero di dispositivi linea supportati da questo provider di servizi.</span><span class="sxs-lookup"><span data-stu-id="1157e-126">*dwNumLines*: Specifies how many line devices this service provider supports.</span></span>
-   <span data-ttu-id="1157e-127">*dwNumPhones*: specifica il numero di dispositivi telefonici supportati da questo provider di servizi.</span><span class="sxs-lookup"><span data-stu-id="1157e-127">*dwNumPhones*: Specifies how many phone devices this service provider supports.</span></span>
-   <span data-ttu-id="1157e-128">*lpfnCompletionProc*: specifica la procedura chiamata dal provider di servizi per segnalare il completamento di tutte le procedure operative asincrone sui dispositivi line e Phone.</span><span class="sxs-lookup"><span data-stu-id="1157e-128">*lpfnCompletionProc*: Specifies the procedure the service provider calls to report completion of all asynchronously operating procedures on line and phone devices.</span></span>

<span data-ttu-id="1157e-129">Dopo [**TSPI \_ providerInit**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit), è possibile eseguire operazioni normali, ad esempio l'apertura di telefoni.</span><span class="sxs-lookup"><span data-stu-id="1157e-129">Following [**TSPI\_providerInit**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit), normal operations such as opening phones can be carried out.</span></span>

 

 
