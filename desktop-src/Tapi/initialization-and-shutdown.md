---
description: Per fare in modo che un'applicazione possa usare una qualsiasi delle funzioni telefoniche aggiuntive, è necessaria una connessione a TAPI, tramite la quale può ricevere messaggi.
ms.assetid: c0211f64-4f73-4348-ae49-9a898d3aa093
title: Inizializzazione e arresto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6831b8cfda84ac564450caec554191198fd4c21f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106308602"
---
# <a name="initialization-and-shutdown"></a><span data-ttu-id="efeb8-103">Inizializzazione e arresto</span><span class="sxs-lookup"><span data-stu-id="efeb8-103">Initialization and Shutdown</span></span>

<span data-ttu-id="efeb8-104">Per fare in modo che un'applicazione usi qualsiasi funzione telefono supplementare di TAPI, è necessaria una connessione a TAPI, tramite la quale può ricevere messaggi.</span><span class="sxs-lookup"><span data-stu-id="efeb8-104">For an application to use any of TAPI's 30 supplementary phone functions, it needs a connection to TAPI, through which it can receive messages.</span></span> <span data-ttu-id="efeb8-105">L'applicazione stabilisce la connessione tramite la funzione [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) .</span><span class="sxs-lookup"><span data-stu-id="efeb8-105">The application establishes this connection using the [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) function.</span></span> <span data-ttu-id="efeb8-106">In questa funzione, l'applicazione specifica il meccanismo di notifica mediante il quale TAPI informa l'applicazione delle modifiche nello stato del telefono e il completamento asincrono delle funzioni telefoniche.</span><span class="sxs-lookup"><span data-stu-id="efeb8-106">In this function, the application specifies the notification mechanism by which TAPI informs the application of changes in the state of the phone and of asynchronous completion of phone functions.</span></span>

<span data-ttu-id="efeb8-107">La funzione [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) restituisce due informazioni all'applicazione: un *handle dell'applicazione* e il numero di dispositivi telefonici.</span><span class="sxs-lookup"><span data-stu-id="efeb8-107">The [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) function returns two pieces of information to the application: an *application handle*, and the number of phone devices.</span></span> <span data-ttu-id="efeb8-108">L'handle dell'applicazione rappresenta l'utilizzo dell'applicazione di TAPI.</span><span class="sxs-lookup"><span data-stu-id="efeb8-108">The application handle represents the application's usage of TAPI.</span></span> <span data-ttu-id="efeb8-109">Le funzioni TAPI che usano handle di telefono non richiedono l'handle dell'applicazione, perché questo handle viene derivato dall'handle telefonico specificato.</span><span class="sxs-lookup"><span data-stu-id="efeb8-109">The TAPI functions that use phone handles do not require the application handle, as this handle is derived from the specified phone handle.</span></span>

<span data-ttu-id="efeb8-110">Il secondo elemento di informazioni restituito da [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) è il numero di dispositivi telefonici disponibili per TAPI.</span><span class="sxs-lookup"><span data-stu-id="efeb8-110">The second piece of information returned by [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) is the number of phone devices available to TAPI.</span></span> <span data-ttu-id="efeb8-111">I dispositivi telefonici sono identificati dall'identificatore del dispositivo (*ID dispositivo*).</span><span class="sxs-lookup"><span data-stu-id="efeb8-111">Phone devices are identified by their device identifier (*device ID*).</span></span> <span data-ttu-id="efeb8-112">Gli identificatori di dispositivo validi sono compresi tra zero e il numero di dispositivi telefonici meno uno.</span><span class="sxs-lookup"><span data-stu-id="efeb8-112">Valid device identifiers range from zero to the number of phone devices minus one.</span></span> <span data-ttu-id="efeb8-113">Se, ad esempio, **phoneInitializeEx** segnala che in un sistema sono presenti due dispositivi telefonici, gli identificatori validi per i dispositivi telefonici sono 0 e 1.</span><span class="sxs-lookup"><span data-stu-id="efeb8-113">For example, if **phoneInitializeEx** reports that there are two phone devices in a system, then valid phone device identifiers are 0 and 1.</span></span> <span data-ttu-id="efeb8-114">Al termine dell'applicazione usando le funzioni telefoniche di TAPI, viene richiamato [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown), passando il relativo handle dell'applicazione per arrestare l'utilizzo di TAPI.</span><span class="sxs-lookup"><span data-stu-id="efeb8-114">After an application is finished using the phone functions of TAPI, it invokes [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown), passing its application handle to shut down its usage of TAPI.</span></span> <span data-ttu-id="efeb8-115">Questo consente a TAPI di liberare tutte le risorse assegnate all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="efeb8-115">This allows TAPI to free any resources assigned to the application.</span></span>

<span data-ttu-id="efeb8-116">Le applicazioni non devono richiamare [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) senza aprire successivamente un telefono (almeno per il monitoraggio).</span><span class="sxs-lookup"><span data-stu-id="efeb8-116">Applications should not invoke [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) without subsequently opening a phone (at least for monitoring).</span></span> <span data-ttu-id="efeb8-117">Se l'applicazione non monitora e non usa dispositivi, deve chiamare [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) in modo che le risorse di memoria allocate dalla libreria a collegamento dinamico TAPI possano essere rilasciate se non necessario e la libreria stessa può essere scaricata dalla memoria, ma non necessaria.</span><span class="sxs-lookup"><span data-stu-id="efeb8-117">If the application is not monitoring and not using any devices, it should call [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) so that memory resources allocated by the TAPI dynamic-link library can be released if unneeded, and the library itself can be unloaded from memory while not needed.</span></span>

<span data-ttu-id="efeb8-118">Sia [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) che [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) funzionano in modo sincrono.</span><span class="sxs-lookup"><span data-stu-id="efeb8-118">Both [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) and [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) operate synchronously.</span></span> <span data-ttu-id="efeb8-119">Ovvero, queste funzioni restituiscono un'indicazione di esito positivo o negativo e non restituiscono mai un identificatore di richiesta asincrono.</span><span class="sxs-lookup"><span data-stu-id="efeb8-119">That is, these functions either return a success or failure indication, and never return an asynchronous request identifier.</span></span>

 

 



