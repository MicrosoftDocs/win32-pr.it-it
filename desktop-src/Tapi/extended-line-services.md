---
description: I servizi di linea estesa (o i servizi linea specifici del dispositivo) includono tutte le estensioni definite dal provider di servizi per TSPI.
ms.assetid: 23519d23-27bd-422e-b3c4-00e0d0d93f9e
title: Servizi linea estesa
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dbc1ce08d25633d33fd518d8686271c198ca5034
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106311896"
---
# <a name="extended-line-services"></a><span data-ttu-id="f606f-103">Servizi linea estesa</span><span class="sxs-lookup"><span data-stu-id="f606f-103">Extended Line Services</span></span>

<span data-ttu-id="f606f-104">I servizi di linea estesa (o i servizi linea specifici del dispositivo) includono tutte le estensioni definite dal provider di servizi per TSPI.</span><span class="sxs-lookup"><span data-stu-id="f606f-104">Extended line services (or device-specific line services) include all service-provider defined extensions to TSPI.</span></span> <span data-ttu-id="f606f-105">TSPI definisce un meccanismo che consente ai fornitori del provider di servizi di estendere la telefonia SPI usando estensioni specifiche del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f606f-105">TSPI defines a mechanism that enables service-provider vendors to extend the Telephony SPI using device-specific extensions.</span></span> <span data-ttu-id="f606f-106">TSPI definisce solo il meccanismo di estensione e, in questo modo, fornisce l'accesso alle estensioni specifiche del dispositivo, ma TSPI non ne definisce il comportamento.</span><span class="sxs-lookup"><span data-stu-id="f606f-106">TSPI only defines the extension mechanism, and by doing so provides access to device-specific extensions, but TSPI does not define their behavior.</span></span> <span data-ttu-id="f606f-107">Il comportamento è completamente definito dal provider di servizi.</span><span class="sxs-lookup"><span data-stu-id="f606f-107">Behavior is completely defined by the service provider.</span></span>

<span data-ttu-id="f606f-108">La telefonia SPI è costituita da definizioni di costanti e flag di bit, strutture di dati, funzioni e messaggi di callback.</span><span class="sxs-lookup"><span data-stu-id="f606f-108">The Telephony SPI consists of scalar and bit flag constant definitions, data structures, functions, and callback messages.</span></span> <span data-ttu-id="f606f-109">Sono definite procedure che consentono a un fornitore di estendere la maggior parte di queste come indicato di seguito.</span><span class="sxs-lookup"><span data-stu-id="f606f-109">Procedures are defined that enable a vendor to extend most of these as follows.</span></span>

<span data-ttu-id="f606f-110">Per le costanti di dati scalari estendibili, un fornitore del provider di servizi può definire nuovi valori in un intervallo specificato.</span><span class="sxs-lookup"><span data-stu-id="f606f-110">For extensible scalar data constants, a service-provider vendor can define new values in a specified range.</span></span> <span data-ttu-id="f606f-111">Poiché la maggior parte delle costanti di dati è **DWORD** s, in genere l'intervallo 0x00000000 tramite 0x7FFFFFFF è riservato per le estensioni future comuni, mentre 0X80000000 tramite 0xFFFFFFFF sono disponibili per le estensioni specifiche del fornitore.</span><span class="sxs-lookup"><span data-stu-id="f606f-111">As most data constants are **DWORD** s, typically the range 0x00000000 through 0x7FFFFFFF is reserved for common future extensions, while 0x80000000 through 0xFFFFFFFF are available for vendor-specific extensions.</span></span> <span data-ttu-id="f606f-112">Il presupposto è che un fornitore definisca i valori che sono estensioni naturali dei tipi di databases definiti da TSPI.</span><span class="sxs-lookup"><span data-stu-id="f606f-112">The assumption is that a vendor would define values that are natural extensions of the datatypes defined by TSPI.</span></span>

<span data-ttu-id="f606f-113">Per le costanti di dati dei flag di bit estendibili, un fornitore del provider di servizi può definire nuovi valori per i bit specificati.</span><span class="sxs-lookup"><span data-stu-id="f606f-113">For extensible bit flag data constants, a service-provider vendor can define new values for specified bits.</span></span> <span data-ttu-id="f606f-114">Poiché la maggior parte delle costanti dei flag di bit sono **DWORD** s, in genere un numero specifico di bit inferiori è riservato per le estensioni comuni, mentre i bit superiori rimanenti sono disponibili per le estensioni specifiche del fornitore.</span><span class="sxs-lookup"><span data-stu-id="f606f-114">As most bit flag constants are **DWORD** s, typically a specific number of the lower bits are reserved for common extensions while the remaining upper bits are available for vendor-specific extensions.</span></span> <span data-ttu-id="f606f-115">I flag di bit comuni sono assegnati da zero bit. le estensioni specifiche del fornitore devono essere assegnate dal bit 31 verso il basso.</span><span class="sxs-lookup"><span data-stu-id="f606f-115">Common bit flags are assigned from bit zero up; vendor-specific extensions should be assigned from bit 31 down.</span></span> <span data-ttu-id="f606f-116">Ciò garantisce la massima flessibilità nell'assegnazione di posizioni di bit a estensioni comuni rispetto alle estensioni specifiche del fornitore.</span><span class="sxs-lookup"><span data-stu-id="f606f-116">This provides maximum flexibility in assigning bit positions to common extensions versus vendor-specific extensions.</span></span> <span data-ttu-id="f606f-117">Si prevede che un fornitore definisca nuovi valori che sono estensioni naturali dei flag di bit definiti da TSPI.</span><span class="sxs-lookup"><span data-stu-id="f606f-117">A vendor is expected to define new values that are natural extensions of the bit flags defined by TSPI.</span></span>

<span data-ttu-id="f606f-118">Le strutture di dati estendibili hanno un campo di dimensioni sempre più riservato per l'uso specifico del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f606f-118">Extensible data structures have a variably sized field that is reserved for device-specific use.</span></span> <span data-ttu-id="f606f-119">Con la stessa dimensione, il provider di servizi decide la quantità di informazioni e l'interpretazione.</span><span class="sxs-lookup"><span data-stu-id="f606f-119">Being variably sized, the service provider decides the amount of information and the interpretation.</span></span> <span data-ttu-id="f606f-120">Si prevede che un fornitore che definisce un campo specifico del dispositivo renda le estensioni naturali della struttura di dati originale definita da TSPI.</span><span class="sxs-lookup"><span data-stu-id="f606f-120">A vendor that defines a device-specific field is expected to make these natural extensions of the original data structure defined by TSPI.</span></span>

<span data-ttu-id="f606f-121">Due funzioni, [**TSPI \_ LineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific) e [**TSPI \_ lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature)e quattro messaggi correlati, [**linea \_ DEVSPECIFIC**](/previous-versions/windows/desktop/legacy/ms725225(v=vs.85)), [**linea \_ CALLDEVSPECIFIC**](line-calldevspecific.md), [**linea \_ DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85))e [**riga \_ CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md), offrono un meccanismo di estensione specifico del fornitore.</span><span class="sxs-lookup"><span data-stu-id="f606f-121">Two functions, [**TSPI\_lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific) and [**TSPI\_lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature), and four related messages, [**LINE\_DEVSPECIFIC**](/previous-versions/windows/desktop/legacy/ms725225(v=vs.85)), [**LINE\_CALLDEVSPECIFIC**](line-calldevspecific.md), [**LINE\_DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)), and [**LINE\_CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md), offer a vendor-specific extension mechanism.</span></span> <span data-ttu-id="f606f-122">L'operazione **TSPI \_ lineDevSpecific** e \_ i messaggi linea associati DEVSPECIFIC e linea \_ CALLDEVSPECIFIC consentono all'applicazione client di Tapi32.dll di accedere alle funzionalità di riga, indirizzo o chiamata specifiche del dispositivo che non sono disponibili nei servizi di telefonia di base o supplementari.</span><span class="sxs-lookup"><span data-stu-id="f606f-122">The **TSPI\_lineDevSpecific** operation and associated LINE\_DEVSPECIFIC and LINE\_CALLDEVSPECIFIC messages allow the Tapi32.dll client application to access device-specific line, address, or call features that are unavailable in the Basic or Supplementary Telephony services.</span></span> <span data-ttu-id="f606f-123">Il profilo del parametro della [**funzione \_ lineDevSpecific TSPI**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific) è generico in quanto la minima interpretazione dei parametri viene apportata da TSPI.</span><span class="sxs-lookup"><span data-stu-id="f606f-123">The parameter profile of the [**TSPI\_lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific) function is generic in that little interpretation of the parameters is made by TSPI.</span></span> <span data-ttu-id="f606f-124">I parametri di handle di dispositivo hanno significati definiti da TSPI e vengono convertiti in modo appropriato tra l'applicazione e il provider di servizi.</span><span class="sxs-lookup"><span data-stu-id="f606f-124">Device-handle parameters have TSPI-defined meanings and are translated appropriately between the application and the service provider.</span></span> <span data-ttu-id="f606f-125">I parametri generici vengono semplicemente passati senza modifiche.</span><span class="sxs-lookup"><span data-stu-id="f606f-125">Generic parameters are simply passed through unmodified.</span></span> <span data-ttu-id="f606f-126">L'interpretazione dei parametri generici è definita dal provider di servizi e deve essere riconosciuta da tutte le applicazioni che le utilizzano.</span><span class="sxs-lookup"><span data-stu-id="f606f-126">The interpretation of the generic parameters is defined by the service provider and must be understood by any applications that use them.</span></span> <span data-ttu-id="f606f-127">Un'applicazione che si basa su estensioni specifiche del dispositivo in genere non funziona con altri provider di servizi.</span><span class="sxs-lookup"><span data-stu-id="f606f-127">An application that relies on device-specific extensions generally does not work with other service providers.</span></span> <span data-ttu-id="f606f-128">Tuttavia, le applicazioni scritte interamente nei servizi di telefonia di base e supplementare dovrebbero funzionare con il provider di servizi esteso.</span><span class="sxs-lookup"><span data-stu-id="f606f-128">However, applications written entirely to the Basic and Supplementary Telephony services should work with the extended service provider.</span></span>

<span data-ttu-id="f606f-129">L'implementazione TAPI dei messaggi e delle funzioni specifiche del dispositivo è "pass-through".</span><span class="sxs-lookup"><span data-stu-id="f606f-129">The TAPI implementation of the device-specific functions and messages is "pass-through."</span></span> <span data-ttu-id="f606f-130">TAPI non esamina né modifica i buffer e i parametri generici specifici del dispositivo, ma esegue il mapping dei valori di handle opachi a livello di applicazione (usati a livello TAPI) ai valori di handle opachi a livello di provider di servizi (usati a livello TSPI).</span><span class="sxs-lookup"><span data-stu-id="f606f-130">TAPI does not examine or modify the generic device-specific parameters and buffers, but it does map application-level opaque handle values (used at the TAPI level) to service-provider-level opaque handle values (used at the TSPI level).</span></span>

<span data-ttu-id="f606f-131">Per quanto riguarda la traduzione dell'handle, la natura passthrough delle parti generiche di estensioni specifiche del dispositivo ha una conseguenza importante.</span><span class="sxs-lookup"><span data-stu-id="f606f-131">Regarding handle translation, the passthrough nature of the generic parts of device-specific extensions has an important consequence.</span></span> <span data-ttu-id="f606f-132">Un provider di servizi non ha modo di correlare gli handle usati a livello di TSPI a quelli a livello di TAPI, fatta eccezione per il passaggio attraverso i parametri e i campi predefiniti dell'handle.</span><span class="sxs-lookup"><span data-stu-id="f606f-132">A service provider has no way to relate the handles used at the TSPI level to those at the TAPI level except by passing them through the predefined handle parameters and fields.</span></span> <span data-ttu-id="f606f-133">Qualsiasi handle inserito nell'area di estensione generica non viene convertito da TAPI mentre viene passato tra l'applicazione e il provider di servizi.</span><span class="sxs-lookup"><span data-stu-id="f606f-133">Any handle put into the generic extension area is untranslated by TAPI as it is passed between application and service provider.</span></span> <span data-ttu-id="f606f-134">La finestra di progettazione di un'estensione del provider di servizi non deve in genere definire estensioni che passano handle in questo modo.</span><span class="sxs-lookup"><span data-stu-id="f606f-134">The designer of a service-provider extension should generally not define extensions that pass handles in this way.</span></span>

<span data-ttu-id="f606f-135">L'approccio appropriato per la definizione di un'estensione specifica del dispositivo che deve fare riferimento a dispositivi specifici senza usare handle consiste nel fare riferimento ad essi usando l'identificazione del dispositivo assoluta.</span><span class="sxs-lookup"><span data-stu-id="f606f-135">The appropriate approach when defining a device-specific extension that must refer to specific devices without using handles is to refer to them using their absolute device identification.</span></span> <span data-ttu-id="f606f-136">L'identificatore del dispositivo usato per l'apertura di una linea a livello di TAPI, ad esempio, è esclusivamente lo stesso valore usato a livello di TSPI per aprire la riga.</span><span class="sxs-lookup"><span data-stu-id="f606f-136">The device identifier used in opening a line at the TAPI level, for example, is strictly the same value that is used at the TSPI level to open the line.</span></span> <span data-ttu-id="f606f-137">Analogamente, una tupla (identificatore del dispositivo di linea e identificatore di indirizzo) che identifica in modo univoco un indirizzo a livello di TAPI usa gli stessi valori per identificare la stessa operazione a livello di TSPI.</span><span class="sxs-lookup"><span data-stu-id="f606f-137">Similarly, a (line device identifier, address identifier) tuple that uniquely identifies an address at the TAPI level uses the same values to identify the same thing at the TSPI level.</span></span>

<span data-ttu-id="f606f-138">Per praticità, viene fornita anche una funzione di escape più specializzata.</span><span class="sxs-lookup"><span data-stu-id="f606f-138">For convenience, a more specialized escape function is also provided.</span></span> <span data-ttu-id="f606f-139">È simile a [**TSPI \_ lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific), ma inserisce l'interpretazione su alcuni parametri.</span><span class="sxs-lookup"><span data-stu-id="f606f-139">It is similar to [**TSPI\_lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific), but places interpretation on some of the parameters.</span></span> <span data-ttu-id="f606f-140">La funzione [**TSPI \_ lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature) e i messaggi della [**riga associata \_ DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)) e [**line \_ CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md) consentono a TAPI di emulare il pulsante di stampa sul telefono delle funzionalità della riga.</span><span class="sxs-lookup"><span data-stu-id="f606f-140">The [**TSPI\_lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature) function and associated [**LINE\_DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)) and [**LINE\_CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md) messages allow TAPI to emulate button presses at the line's feature phone.</span></span> <span data-ttu-id="f606f-141">Poiché i telefoni delle funzionalità e i significati dei pulsanti sono specifici del fornitore, la chiamata di funzionalità con **TSPI \_ lineDevSpecificFeature** è anche specifica del fornitore.</span><span class="sxs-lookup"><span data-stu-id="f606f-141">As feature phones and the meanings of their buttons are vendor-specific, feature invocation using **TSPI\_lineDevSpecificFeature** is also vendor specific.</span></span>

<span data-ttu-id="f606f-142">Per riepilogare, la [**funzione \_ LineDevSpecificFeature di TSPI**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature) è una funzione di escape specifica del dispositivo per consentire l'invio di funzionalità switch al Commuter.</span><span class="sxs-lookup"><span data-stu-id="f606f-142">To summarize, the [**TSPI\_lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature) function is a device-specific escape function to allow sending switch features to the switch.</span></span> <span data-ttu-id="f606f-143">Il messaggio di [**riga \_ CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md) è un messaggio specifico del dispositivo inviato al callback dell'applicazione come indicazione delle funzionalità relative alle chiamate inviate al Commuter.</span><span class="sxs-lookup"><span data-stu-id="f606f-143">The [**LINE\_CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md) message is a device-specific message sent to the application's callback as an indication of call-related features sent to the switch.</span></span> <span data-ttu-id="f606f-144">[**Riga \_ di DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)) è un messaggio specifico del dispositivo inviato al callback dell'applicazione come indicazione delle funzionalità correlate alla riga inviate al Commuter.</span><span class="sxs-lookup"><span data-stu-id="f606f-144">[**LINE\_DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)) is a device-specific message sent to the application's callback as an indication of line-related features sent to the switch.</span></span>

<span data-ttu-id="f606f-145">Non esiste alcun registro centrale per gli identificatori del produttore.</span><span class="sxs-lookup"><span data-stu-id="f606f-145">There is no central registry for manufacturer identifiers.</span></span> <span data-ttu-id="f606f-146">Un generatore identificatore univoco denominato Extidgen.exe viene invece reso disponibile come parte di TSPI.</span><span class="sxs-lookup"><span data-stu-id="f606f-146">Instead a unique identifier generator called Extidgen.exe is made available as part of TSPI.</span></span> <span data-ttu-id="f606f-147">Il fornitore che progetta un set di estensioni specifiche del dispositivo usa questa utilità per ottenere un identificatore univoco per tali estensioni.</span><span class="sxs-lookup"><span data-stu-id="f606f-147">The vendor that designs a set of device-specific extensions uses this utility to obtain a unique identifier for those extensions.</span></span>

 

 
