---
description: Un'operazione che viene completata in modo asincrono esegue una parte della relativa elaborazione nella chiamata di funzione effettuata dall'applicazione e il resto in un thread di esecuzione indipendente dopo che TAPI 2. x ha restituito dalla chiamata di funzione.
ms.assetid: 37b544e4-6413-4741-b8b6-ec676ce4ca97
title: Funzioni asincrone
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 135e792a4b1d6a25a4f49fbb2abe2c19ce3071ad
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106314639"
---
# <a name="asynchronous-functions"></a><span data-ttu-id="25691-103">Funzioni asincrone</span><span class="sxs-lookup"><span data-stu-id="25691-103">Asynchronous Functions</span></span>

<span data-ttu-id="25691-104">Un'operazione che viene completata in modo asincrono esegue una parte della relativa elaborazione nella chiamata di funzione effettuata dall'applicazione e il resto in un thread di esecuzione indipendente dopo che TAPI 2. x ha restituito dalla chiamata di funzione.</span><span class="sxs-lookup"><span data-stu-id="25691-104">An operation that completes asynchronously performs part of its processing in the function call made by the application and the remainder of it in an independent execution thread after TAPI 2.x has returned from the function call.</span></span> <span data-ttu-id="25691-105">Per garantire il completamento dell'elaborazione della chiamata, il provider di servizi Vector la richiesta a un'altra entità attiva nel sistema, ad esempio un server LAN, hardware del componente aggiuntivo, un'opzione o una rete, e quindi torna all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="25691-105">To ensure completion of the call's processing, the service provider vectors the request to another active entity in the system—such as a LAN server, add-in hardware, a switch, or a network—and then returns to the application.</span></span> <span data-ttu-id="25691-106">A questo punto, all'applicazione viene restituito un errore negativo o un identificatore di richiesta positivo.</span><span class="sxs-lookup"><span data-stu-id="25691-106">At this time, either a negative error result or a positive request identifier is returned to the application.</span></span>

<span data-ttu-id="25691-107">Al momento del completamento asincrono (il provider di servizi ha ricevuto un interrupt dall'hardware, ovvero un messaggio deve essere recapitato), il provider di servizi chiama TAPISRV e segnala che "l'evento *X* è appena avvenuto.</span><span class="sxs-lookup"><span data-stu-id="25691-107">At the time of asynchronous completion (the service provider has received an interrupt from the hardware, meaning that a message must be delivered), the service provider calls TAPISRV and reports that "Event *X* has just taken place.</span></span> <span data-ttu-id="25691-108">Recapitare un messaggio appropriato a tutte le applicazioni interessate ".</span><span class="sxs-lookup"><span data-stu-id="25691-108">Deliver an appropriate message to all concerned applications."</span></span> <span data-ttu-id="25691-109">Quando TAPISRV riceve questo messaggio, inoltra il messaggio alla libreria a collegamento dinamico TAPI, nel processo dell'applicazione, che a sua volta invia un messaggio di finestra, segnala un handle di evento o Invia un post a una porta di completamento di I/O, in base allo schema di notifica del messaggio selezionato dall'applicazione in [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) o [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa).</span><span class="sxs-lookup"><span data-stu-id="25691-109">When TAPISRV receives this message, it forwards the message to the TAPI dynamic-link library, in the application's process, which in turn posts a window message, signals an event handle, or posts to an I/O completion port, according to the message notification scheme selected by the application in [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) or [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa).</span></span>

<span data-ttu-id="25691-110">Quando la parte asincrona dell'operazione viene completata, all'applicazione viene inviato un messaggio di [**\_ risposta di riga**](./line-reply.md) o [**\_ risposta telefonica**](./phone-reply.md).</span><span class="sxs-lookup"><span data-stu-id="25691-110">When the asynchronous portion of the operation completes, a [**LINE\_REPLY**](./line-reply.md) (or [**PHONE\_REPLY**](./phone-reply.md)) message is sent to the application.</span></span> <span data-ttu-id="25691-111">Questo messaggio contiene, come uno dei relativi parametri, l'identificatore della richiesta restituito dalla chiamata di funzione.</span><span class="sxs-lookup"><span data-stu-id="25691-111">This message contains, as one of its parameters, the request identifier returned by the function call.</span></span> <span data-ttu-id="25691-112">Questo identificatore di richiesta consente all'applicazione di determinare quale richiesta originale è stata completata.</span><span class="sxs-lookup"><span data-stu-id="25691-112">This request identifier allows the application to determine which original request has completed.</span></span> <span data-ttu-id="25691-113">(Le applicazioni devono ricordare gli identificatori di richiesta di tutte le richieste in corso, in modo che i messaggi di risposta possano essere gestiti correttamente). Un secondo parametro per il messaggio di risposta di riga \_ (o \_ risposta telefonica) è il valore restituito asincrono.</span><span class="sxs-lookup"><span data-stu-id="25691-113">(Applications should remember the request identifiers of all their requests in progress so that reply messages can be properly handled.) A second parameter to the LINE\_REPLY (or PHONE\_REPLY) message is the asynchronous return value.</span></span> <span data-ttu-id="25691-114">Si tratta di un valore negativo (per un errore) o zero se l'operazione è stata completata correttamente.</span><span class="sxs-lookup"><span data-stu-id="25691-114">This is either a negative value (for an error) or zero if the operation completed successfully.</span></span> <span data-ttu-id="25691-115">Per le operazioni asincrone, è possibile che i valori restituiti vengano restituiti come parte della funzione Return o come parametro *dwParam2* nel messaggio di risposta di riga \_ o di \_ risposta telefonica.</span><span class="sxs-lookup"><span data-stu-id="25691-115">For asynchronous operations, any of the return values may be returned as part of the function return or as the *dwParam2* parameter in the LINE\_REPLY or PHONE\_REPLY message.</span></span> <span data-ttu-id="25691-116">Il valore 0, che indica l'esito positivo, verrà restituito solo nel \_ messaggio di risposta di riga e mai come valore restituito della funzione.</span><span class="sxs-lookup"><span data-stu-id="25691-116">The value 0, which indicates success, will only be returned in the LINE\_REPLY message, and never as the function's return value.</span></span>

<span data-ttu-id="25691-117">Le funzioni Initialize ( [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) e [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa)) indicano a TAPI come inviare questi messaggi all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="25691-117">The initialize functions ( [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) and [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa)) tell TAPI how to send these messages to the application.</span></span>

> [!Note]  
> <span data-ttu-id="25691-118">In alcuni casi, se un'applicazione multithreading chiama una funzione asincrona da un thread diverso da quello da cui l'applicazione ha inizializzato la linea o il dispositivo telefonico, l'applicazione può ricevere il messaggio di [**\_ risposta di riga**](./line-reply.md) o [**telefono \_**](./phone-reply.md) prima della restituzione della funzione asincrona.</span><span class="sxs-lookup"><span data-stu-id="25691-118">In some cases, if a multithreaded application calls an asynchronous function from a thread other than the thread from which the application initialized the line or phone device, the application may receive the [**LINE\_REPLY**](./line-reply.md) or [**PHONE\_REPLY**](./phone-reply.md) message before the asynchronous function has returned.</span></span> <span data-ttu-id="25691-119">In questi casi, l'applicazione deve salvare i parametri del messaggio e attendere il completamento della funzione asincrona e l'identificatore della richiesta è noto prima dell'elaborazione del messaggio.</span><span class="sxs-lookup"><span data-stu-id="25691-119">In such cases, the application should save the message parameters and wait until the asynchronous function returns and the request identifier is known before processing the message.</span></span>

 

 

 
