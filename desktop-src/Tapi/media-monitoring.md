---
description: Quando una chiamata è nello stato connesso, i dati possono essere trasportati sulla chiamata. Il tipo di supporto di chiamata fornisce un'indicazione del tipo di dati (ad esempio, il tipo di dati o il protocollo di livello superiore) del flusso multimediale.
ms.assetid: 3281387e-3f72-4fda-8199-b3ce6e45e910
title: Monitoraggio dei supporti
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fb54989306fd80c48c0b99c9f8285a83b40bed25
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/03/2021
ms.locfileid: "106320657"
---
# <a name="media-monitoring"></a><span data-ttu-id="41f28-104">Monitoraggio dei supporti</span><span class="sxs-lookup"><span data-stu-id="41f28-104">Media Monitoring</span></span>

<span data-ttu-id="41f28-105">Quando una chiamata è nello stato *connesso* , i dati possono essere trasportati sulla chiamata.</span><span class="sxs-lookup"><span data-stu-id="41f28-105">When a call is in the *connected* state, data can be transported over the call.</span></span> <span data-ttu-id="41f28-106">Il tipo di supporto di chiamata fornisce un'indicazione del tipo di dati (ad esempio, il tipo di dati o il protocollo di livello superiore) del flusso multimediale.</span><span class="sxs-lookup"><span data-stu-id="41f28-106">The call media type provides an indication of the type of data (for example, its datatype, or higher-level protocol) of this media stream.</span></span>

<span data-ttu-id="41f28-107">TAPI consente di fornire le applicazioni con una notifica sulle modifiche apportate al tipo di supporto di una chiamata.</span><span class="sxs-lookup"><span data-stu-id="41f28-107">TAPI allows applications to be provided with a notification about changes in a call's media type.</span></span> <span data-ttu-id="41f28-108">La notifica fornisce un'indicazione del nuovo tipo di supporto della chiamata.</span><span class="sxs-lookup"><span data-stu-id="41f28-108">The notification provides an indication of the call's new media type.</span></span> <span data-ttu-id="41f28-109">Il provider di servizi decide come desidera effettuare questa determinazione.</span><span class="sxs-lookup"><span data-stu-id="41f28-109">The service provider decides how it wants to make this determination.</span></span> <span data-ttu-id="41f28-110">Il provider di servizi, ad esempio, può usare l'elaborazione del segnale del flusso multimediale per determinare il tipo di supporto oppure può basarsi su modelli di suoneria distinti assegnati a flussi multimediali diversi o su elementi di informazioni passati in un protocollo di segnalazione fuori banda.</span><span class="sxs-lookup"><span data-stu-id="41f28-110">For example, the service provider could use signal processing of the media stream to determine the media type, or it could rely on distinctive ringing patterns assigned to different media streams, or on information elements passed in an out-of-band signaling protocol.</span></span> <span data-ttu-id="41f28-111">Indipendentemente dal modo in cui viene eseguita la determinazione del tipo di supporto, l'applicazione viene semplicemente informati sulle modifiche del tipo di supporto in una chiamata esistente.</span><span class="sxs-lookup"><span data-stu-id="41f28-111">Independent of how the media type determination is achieved, the application is simply informed about media type changes on an existing call.</span></span>

<span data-ttu-id="41f28-112">Per ulteriori informazioni e per un elenco dei tipi di supporti o delle modalità TAPI attualmente definiti, vedere [ \_ costanti LINEMEDIAMODE](linemediamode--constants.md).</span><span class="sxs-lookup"><span data-stu-id="41f28-112">For more information and a list of currently defined TAPI media types or modes, see [LINEMEDIAMODE\_ Constants](linemediamode--constants.md).</span></span> <span data-ttu-id="41f28-113">I provider di servizi possono implementare tipi di supporto specifici del provider per i dispositivi altamente specializzati.</span><span class="sxs-lookup"><span data-stu-id="41f28-113">Service providers may implement provider-specific media types for highly specialized devices.</span></span> <span data-ttu-id="41f28-114">Le informazioni su questi dati saranno disponibili nella documentazione del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="41f28-114">Information on these will be found in device documentation.</span></span>

<span data-ttu-id="41f28-115">I tipi di supporto definiti da TAPI includono:</span><span class="sxs-lookup"><span data-stu-id="41f28-115">The media types defined by TAPI include:</span></span>

-   <span data-ttu-id="41f28-116">Sconosciuto.</span><span class="sxs-lookup"><span data-stu-id="41f28-116">Unknown.</span></span> <span data-ttu-id="41f28-117">Il tipo di supporto della chiamata non è attualmente noto — la chiamata non è classificata.</span><span class="sxs-lookup"><span data-stu-id="41f28-117">The media type of the call is not currently known—the call is unclassified.</span></span>
-   <span data-ttu-id="41f28-118">Voce interattiva.</span><span class="sxs-lookup"><span data-stu-id="41f28-118">Interactive voice.</span></span> <span data-ttu-id="41f28-119">L'energia vocale è stata rilevata nella chiamata e la chiamata viene gestita come chiamata vocale interattiva con una persona al termine dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="41f28-119">Voice energy was detected on the call, and the call is handled as an interactive voice call with a person at the application's end.</span></span>
-   <span data-ttu-id="41f28-120">Voice automatizzato.</span><span class="sxs-lookup"><span data-stu-id="41f28-120">Automated voice.</span></span> <span data-ttu-id="41f28-121">L'energia vocale è stata rilevata nella chiamata e la chiamata viene gestita come chiamata vocale, ma senza persona alla fine dell'applicazione, ad esempio con un'applicazione per la segreteria del computer.</span><span class="sxs-lookup"><span data-stu-id="41f28-121">Voice energy was detected on the call, and the call is handled as a voice call but with no person at the application's end, such as with an answering machine application.</span></span>
-   <span data-ttu-id="41f28-122">Modem dati.</span><span class="sxs-lookup"><span data-stu-id="41f28-122">Data modem.</span></span> <span data-ttu-id="41f28-123">Una sessione modem sulla chiamata.</span><span class="sxs-lookup"><span data-stu-id="41f28-123">A modem session on the call.</span></span> <span data-ttu-id="41f28-124">Per i protocolli modem correnti è richiesta la stazione chiamata per avviare l'handshake.</span><span class="sxs-lookup"><span data-stu-id="41f28-124">Current modem protocols require the called station to initiate the handshake.</span></span> <span data-ttu-id="41f28-125">Per una chiamata al modem dati in ingresso, l'applicazione in genere non può eseguire alcun rilevamento positivo.</span><span class="sxs-lookup"><span data-stu-id="41f28-125">For an incoming data modem call, the application can typically make no positive detection.</span></span> <span data-ttu-id="41f28-126">Il modo in cui il provider di servizi effettua questa determinazione è la scelta.</span><span class="sxs-lookup"><span data-stu-id="41f28-126">How the service provider makes this determination is its choice.</span></span> <span data-ttu-id="41f28-127">Ad esempio, un periodo di silenzio immediatamente dopo la risposta a una chiamata in ingresso può essere usato come euristica per decidere che potrebbe trattarsi di una chiamata al modem dati.</span><span class="sxs-lookup"><span data-stu-id="41f28-127">For example, a period of silence just after answering an incoming call can be used as a heuristic to decide that this might be a data modem call.</span></span>
-   <span data-ttu-id="41f28-128">Fax G3.</span><span class="sxs-lookup"><span data-stu-id="41f28-128">G3 fax.</span></span> <span data-ttu-id="41f28-129">Una sessione fax del gruppo 3 nella chiamata.</span><span class="sxs-lookup"><span data-stu-id="41f28-129">A group 3 fax session on the call.</span></span>
-   <span data-ttu-id="41f28-130">Fax G4.</span><span class="sxs-lookup"><span data-stu-id="41f28-130">G4 fax.</span></span> <span data-ttu-id="41f28-131">Una sessione fax del gruppo 4 nella chiamata.</span><span class="sxs-lookup"><span data-stu-id="41f28-131">A group 4 fax session on the call.</span></span>
-   <span data-ttu-id="41f28-132">TDD.</span><span class="sxs-lookup"><span data-stu-id="41f28-132">TDD.</span></span> <span data-ttu-id="41f28-133">Il flusso multimediale della chiamata usa i dispositivi di telefonia per il protocollo Deaf.</span><span class="sxs-lookup"><span data-stu-id="41f28-133">The call's media stream uses the Telephony Devices for the Deaf protocol.</span></span>
-   <span data-ttu-id="41f28-134">Dati digitali.</span><span class="sxs-lookup"><span data-stu-id="41f28-134">Digital data.</span></span> <span data-ttu-id="41f28-135">Flusso di dati digitali di formato non specificato.</span><span class="sxs-lookup"><span data-stu-id="41f28-135">A digital data stream of unspecified format.</span></span>
-   <span data-ttu-id="41f28-136">Teletex, videotex, telex, misto.</span><span class="sxs-lookup"><span data-stu-id="41f28-136">Teletex, Videotex, Telex, Mixed.</span></span> <span data-ttu-id="41f28-137">Questi corrispondono ai servizi telematici con gli stessi nomi.</span><span class="sxs-lookup"><span data-stu-id="41f28-137">These correspond to the telematic services of the same names.</span></span>
-   <span data-ttu-id="41f28-138">ADSI.</span><span class="sxs-lookup"><span data-stu-id="41f28-138">ADSI.</span></span> <span data-ttu-id="41f28-139">Una sessione di interfaccia di servizi di visualizzazione analoga nella chiamata.</span><span class="sxs-lookup"><span data-stu-id="41f28-139">An Analog Display Services Interface session on the call.</span></span> <span data-ttu-id="41f28-140">ADSI migliora le chiamate vocali con le informazioni alfanumeriche scaricate sul telefono e l'uso di pulsanti soft sul telefono.</span><span class="sxs-lookup"><span data-stu-id="41f28-140">ADSI enhances voice calls with alphanumeric information downloaded to the phone and the use of soft buttons on the phone.</span></span>

<span data-ttu-id="41f28-141">Un'applicazione può abilitare o disabilitare il monitoraggio dei supporti in una chiamata specificata con [**lineMonitorMedia**](/windows/desktop/api/Tapi/nf-tapi-linemonitormedia).</span><span class="sxs-lookup"><span data-stu-id="41f28-141">An application can enable or disable media monitoring on a specified call with [**lineMonitorMedia**](/windows/desktop/api/Tapi/nf-tapi-linemonitormedia).</span></span> <span data-ttu-id="41f28-142">L'applicazione specifica quali tipi di supporti sono interessati al monitoraggio e quando il monitoraggio dei supporti è abilitato, il rilevamento di una modifica del tipo di supporto causa la notifica dell'applicazione con il messaggio di [**riga \_ MONITORMEDIA**](line-monitormedia.md) .</span><span class="sxs-lookup"><span data-stu-id="41f28-142">The application specifies which media types it is interested in monitoring, and when media monitoring is enabled, the detection of a media type change causes the application to be notified with the [**LINE\_MONITORMEDIA**](line-monitormedia.md) message.</span></span> <span data-ttu-id="41f28-143">Questo messaggio fornisce l'handle di chiamata su cui è stata rilevata la modifica del tipo di supporto e il nuovo tipo di supporto.</span><span class="sxs-lookup"><span data-stu-id="41f28-143">This message provides the call handle on which the media type change was detected as well as the new media type.</span></span>

<span data-ttu-id="41f28-144">Esiste una differenza tra il tipo di supporto di una chiamata come segnalato da [**lineGetCallInfo**](/windows/desktop/api/Tapi/nf-tapi-linegetcallinfo) e l'evento Media Type segnala i messaggi di riga \_ MONITORMEDIA.</span><span class="sxs-lookup"><span data-stu-id="41f28-144">There is a distinction between the media type of a call as reported by [**lineGetCallInfo**](/windows/desktop/api/Tapi/nf-tapi-linegetcallinfo) and the media type event reports by LINE\_MONITORMEDIA messages.</span></span> <span data-ttu-id="41f28-145">Il tipo di supporto di una chiamata viene determinato esclusivamente dalle applicazioni proprietarie della chiamata e non viene modificato automaticamente dagli eventi di monitoraggio multimediale.</span><span class="sxs-lookup"><span data-stu-id="41f28-145">A call's media type is determined exclusively by owner applications of the call and is not automatically changed by media monitoring events.</span></span> <span data-ttu-id="41f28-146">L'unica eccezione è la determinazione iniziale del tipo di supporto che può essere eseguita dalla libreria a collegamento dinamico TAPI per selezionare il primo proprietario di una chiamata.</span><span class="sxs-lookup"><span data-stu-id="41f28-146">The one exception is the initial media type determination that can be performed by the TAPI dynamic-link library to select the first owner of a call.</span></span> <span data-ttu-id="41f28-147">Si può affermare che in questo caso la libreria è il proprietario della chiamata.</span><span class="sxs-lookup"><span data-stu-id="41f28-147">One could argue that in this case, the library is the owner of the call.</span></span>

<span data-ttu-id="41f28-148">Viene eseguito il monitoraggio del tipo di supporto predefinito per i tipi di supporto per i quali è stato aperto il dispositivo a linee.</span><span class="sxs-lookup"><span data-stu-id="41f28-148">Default media type monitoring is performed for the media types for which the line device has been opened.</span></span> <span data-ttu-id="41f28-149">Ciò consente di determinare il tipo di supporto di una chiamata in ingresso prima che la chiamata venga passata a un'applicazione in base alle richieste dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="41f28-149">This allows an incoming call's media type to be determined before the call is handed to an application based on what the application demands.</span></span> <span data-ttu-id="41f28-150">L'ambito del monitoraggio del supporto di una chiamata è associato alla durata della chiamata.</span><span class="sxs-lookup"><span data-stu-id="41f28-150">The scope of the media monitoring of a call is bound by the lifetime of the call.</span></span> <span data-ttu-id="41f28-151">Il monitoraggio dei supporti in una chiamata termina non appena la chiamata si *disconnette* o diventa *inattiva*.</span><span class="sxs-lookup"><span data-stu-id="41f28-151">Media monitoring on a call ends as soon as the call *disconnects* or goes *idle*.</span></span>

<span data-ttu-id="41f28-152">Un'applicazione può ottenere gli identificatori dei dispositivi per varie classi di dispositivi associate a una riga aperta chiamando [**lineGetID**](/windows/desktop/api/Tapi/nf-tapi-linegetid).</span><span class="sxs-lookup"><span data-stu-id="41f28-152">An application can obtain device identifiers for various device classes associated with an opened line by calling [**lineGetID**](/windows/desktop/api/Tapi/nf-tapi-linegetid).</span></span> <span data-ttu-id="41f28-153">Questa funzione accetta un handle di riga, un indirizzo o un handle di chiamata e una descrizione della classe del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="41f28-153">This function takes a line handle, address, or call handle and a device class description.</span></span> <span data-ttu-id="41f28-154">Restituisce l'identificatore del dispositivo per il dispositivo della classe di dispositivo specificata associata al dispositivo, all'indirizzo o alla chiamata open line.</span><span class="sxs-lookup"><span data-stu-id="41f28-154">It returns the device identifier for the device of the given device class that is associated with the open line device, address, or call.</span></span> <span data-ttu-id="41f28-155">Se la classe del dispositivo è "TAPI/line", viene restituito l'identificatore del dispositivo della linea.</span><span class="sxs-lookup"><span data-stu-id="41f28-155">If the device class is "tapi/line," then the device identifier of the line device is returned.</span></span> <span data-ttu-id="41f28-156">Se la classe del dispositivo è "MCI/Wave", viene restituito l'identificatore del dispositivo WaveAudio MCI (se supportato), che consente attività come la registrazione o la riproduzione di audio sulla chiamata sulla riga.</span><span class="sxs-lookup"><span data-stu-id="41f28-156">If the device class is "mci/wave," then the device identifier of an mci waveaudio device is returned (if supported), which allows activities such as the recording or playback of audio over the call on the line.</span></span>

<span data-ttu-id="41f28-157">L'applicazione può usare l'identificatore di dispositivo restituito con l'API media corrispondente per eseguire query sulle funzionalità del dispositivo e successivamente aprire il dispositivo multimediale.</span><span class="sxs-lookup"><span data-stu-id="41f28-157">The application can use the returned device identifier with the corresponding media API to query the device's capabilities and subsequently open the media device.</span></span> <span data-ttu-id="41f28-158">Ad esempio, se l'applicazione deve usare la riga come dispositivo di forma d'onda, deve prima chiamare [**waveInGetDevCaps**](/windows/win32/api/mmeapi/nf-mmeapi-waveingetdevcaps) e/o [**waveOutGetDevCaps**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetdevcaps) per determinare le funzionalità di forma d'onda del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="41f28-158">For example, if your application needs to use the line as a waveform device, it must first call [**waveInGetDevCaps**](/windows/win32/api/mmeapi/nf-mmeapi-waveingetdevcaps) and/or [**waveOutGetDevCaps**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetdevcaps) to determine the waveform capabilities of the device.</span></span> <span data-ttu-id="41f28-159">Il formato dei dati della forma d'onda tipico supportato dalla telefonia in America del Nord è la m-Law a 8 bit a 8000 campioni al secondo, sebbene il driver di dispositivo Wave possa convertire questa frequenza di campionamento e companding ad altri formati audio multimediali più comuni.</span><span class="sxs-lookup"><span data-stu-id="41f28-159">The typical waveform data format supported by telephony in North America is 8-bit m-law at 8000 samples per second, although the wave device driver can convert this sample rate and companding to other more common multimedia audio formats.</span></span>

<span data-ttu-id="41f28-160">Per aprire successivamente un dispositivo a linee per la riproduzione audio usando l'API Waveform, un'applicazione chiama [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen).</span><span class="sxs-lookup"><span data-stu-id="41f28-160">To subsequently open a line device for audio playback using the waveform API, an application calls [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen).</span></span> <span data-ttu-id="41f28-161">L'implementazione di **waveOutOpen** è specifica del dispositivo e sono disponibili diverse opzioni per l'implementazione di questa funzione.</span><span class="sxs-lookup"><span data-stu-id="41f28-161">The implementation of **waveOutOpen** is device specific, and there are a variety of options for implementing this function.</span></span>

 

 
