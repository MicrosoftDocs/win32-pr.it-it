---
description: Le informazioni principali fornite da un'applicazione per avviare una sessione di comunicazione sono il tipo di indirizzo, il tipo di supporto o i tipi e l'indirizzo di destinazione.
ms.assetid: 65e53587-0e40-411b-8d6c-d6adfc9d1e6c
title: Avviare una sessione
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9e925ba90460b88c85a9aab1624923acdbc4572a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103880501"
---
# <a name="initiate-a-session"></a><span data-ttu-id="0f853-103">Avviare una sessione</span><span class="sxs-lookup"><span data-stu-id="0f853-103">Initiate a Session</span></span>

<span data-ttu-id="0f853-104">Le informazioni principali fornite da un'applicazione per avviare una sessione di comunicazione sono il [tipo di indirizzo](address-type-ovr.md), il [tipo di supporto](media-type-ovr.md) o i tipi e l' [Indirizzo](address-ovr.md)di destinazione.</span><span class="sxs-lookup"><span data-stu-id="0f853-104">The primary pieces of information an application supplies to initiate a communications session are the [address type](address-type-ovr.md), the [media type](media-type-ovr.md) or types, and the destination [address](address-ovr.md).</span></span>

<span data-ttu-id="0f853-105">È possibile che l'indirizzo di destinazione richieda la [conversione degli indirizzi](#address-translation) per inserire le informazioni immesse da un utente nel formato corretto per un tipo di indirizzo specificato.</span><span class="sxs-lookup"><span data-stu-id="0f853-105">The destination address may require [address translation](#address-translation) to put the information entered by a user into the proper format for a given address type.</span></span> <span data-ttu-id="0f853-106">Ad esempio, un numero di telefono che si trovava in una rubrica elettronica in formato [canonico](address-ovr.md) richiederà la conversione in formato di [composizione](address-ovr.md) .</span><span class="sxs-lookup"><span data-stu-id="0f853-106">For example, a phone number that was in an electronic address book in [canonical](address-ovr.md) format will require translation to [dialable](address-ovr.md) format.</span></span>

<span data-ttu-id="0f853-107">Per alcune sessioni possono essere richiesti parametri di installazione speciali, se supportati dal provider di servizi.</span><span class="sxs-lookup"><span data-stu-id="0f853-107">Some sessions may require special setup parameters, if supported by the service provider.</span></span> <span data-ttu-id="0f853-108">Un TSP ISDN può ad esempio trasmettere informazioni utente utente e alcuni MSPs richiedono informazioni sulla direzione del flusso multimediale.</span><span class="sxs-lookup"><span data-stu-id="0f853-108">For example, an ISDN TSP can transmit user-user information, and some MSPs require information about media stream direction.</span></span> <span data-ttu-id="0f853-109">Per una verifica dei dati che possono essere impostati o ottenuti per una sessione, vedere [informazioni sulla sessione](session-information-ovr.md) .</span><span class="sxs-lookup"><span data-stu-id="0f853-109">Please see [Session Information](session-information-ovr.md) for a review of data that may be set or obtained concerning a session.</span></span>

<span data-ttu-id="0f853-110">Una volta avviata una sessione, TAPI informa l'applicazione dello stato di avanzamento della chiamata utilizzando il meccanismo di notifica degli eventi impostato durante l'inizializzazione.</span><span class="sxs-lookup"><span data-stu-id="0f853-110">Once a session has been initiated, TAPI will inform the application of call progress using the event notification mechanism set up during initialization.</span></span>

<span data-ttu-id="0f853-111">**TAPI 2. x:** Le applicazioni avviano una sessione utilizzando la funzione [**lineMakeCall**](/windows/win32/api/tapi/nf-tapi-linemakecall) .</span><span class="sxs-lookup"><span data-stu-id="0f853-111">**TAPI 2.x:** Applications initiate a session using the [**lineMakeCall**](/windows/win32/api/tapi/nf-tapi-linemakecall) function.</span></span> <span data-ttu-id="0f853-112">La funzione [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress) viene usata per eseguire la conversione degli indirizzi, se necessario.</span><span class="sxs-lookup"><span data-stu-id="0f853-112">The [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress) function is used to perform address translation, if required.</span></span>

<span data-ttu-id="0f853-113">I parametri di installazione delle chiamate possono essere archiviati nella struttura dei dati [**LINECALLPARAMS**](/windows/win32/api/tapi/ns-tapi-linecallparams) e un puntatore a questa struttura viene quindi utilizzato come parametro di [**lineMakeCall**](/windows/win32/api/tapi/nf-tapi-linemakecall).</span><span class="sxs-lookup"><span data-stu-id="0f853-113">Call setup parameters can be stored in the [**LINECALLPARAMS**](/windows/win32/api/tapi/ns-tapi-linecallparams) data structure, and a pointer to this structure is then used as a parameter of [**lineMakeCall**](/windows/win32/api/tapi/nf-tapi-linemakecall).</span></span> <span data-ttu-id="0f853-114">Se non viene fornita alcuna struttura **LINECALLPARAMS** per **lineMakeCall**, viene richiesta una chiamata di livello vocale di POT predefiniti con un set di valori predefiniti.</span><span class="sxs-lookup"><span data-stu-id="0f853-114">If no **LINECALLPARAMS** structure is supplied to **lineMakeCall**, a default POTS voice-grade call is requested with a set of default values.</span></span>

<span data-ttu-id="0f853-115">Se la sessione è configurata correttamente, all'applicazione viene restituito un handle di chiamata con [privilegi](privilege-ovr.md) di *proprietario* e TAPI invia i messaggi [**\_ CALLSTATE della riga**](./line-callstate.md) dell'applicazione con informazioni relative allo stato della chiamata.</span><span class="sxs-lookup"><span data-stu-id="0f853-115">If the session is set up successfully, a call handle with *owner* [privileges](privilege-ovr.md) is returned to the application and TAPI sends the application [**LINE\_CALLSTATE**](./line-callstate.md) messages with information concerning the call's progress.</span></span> <span data-ttu-id="0f853-116">Le applicazioni in genere utilizzano questi messaggi per visualizzare i rapporti di stato all'utente.</span><span class="sxs-lookup"><span data-stu-id="0f853-116">Applications typically use these messages to display status reports to the user.</span></span>

<span data-ttu-id="0f853-117">**TAPI 3. x:** Le applicazioni avviano una sessione di comunicazione richiamando il metodo [**ITAddress:: CreateCall**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddress-createcall) su un indirizzo in grado di gestire il tipo di indirizzo e il tipo di supporto richiesto.</span><span class="sxs-lookup"><span data-stu-id="0f853-117">**TAPI 3.x:** Applications initiate a communications session by invoking the [**ITAddress::CreateCall**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddress-createcall) method on an address capable of handling the address type and media type required.</span></span> <span data-ttu-id="0f853-118">Se l'indirizzo espone l'interfaccia [**ITTerminalSupport**](/windows/win32/api/tapi3if/nn-tapi3if-itterminalsupport) , i terminali vengono selezionati nei flussi multimediali dell'oggetto chiamata.</span><span class="sxs-lookup"><span data-stu-id="0f853-118">If the address exposes the [**ITTerminalSupport**](/windows/win32/api/tapi3if/nn-tapi3if-itterminalsupport) interface, terminals are selected onto the media streams of the call object.</span></span> <span data-ttu-id="0f853-119">Per un'illustrazione di questo processo, vedere l'esempio relativo [a un](make-a-call.md) codice di chiamata.</span><span class="sxs-lookup"><span data-stu-id="0f853-119">See the [Make a Call](make-a-call.md) code example for an illustration of this process.</span></span>

<span data-ttu-id="0f853-120">È possibile archiviare o modificare i parametri di installazione delle chiamate usando metodi esposti dall'interfaccia [**ITCallInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallinfo) .</span><span class="sxs-lookup"><span data-stu-id="0f853-120">Call setup parameters can be stored or changed using methods exposed by the [**ITCallInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallinfo) interface.</span></span>

<span data-ttu-id="0f853-121">Se la sessione è configurata correttamente, TAPI restituisce un puntatore a interfaccia [**ITBasicCallControl**](/windows/desktop/api/tapi3if/nn-tapi3if-itbasiccallcontrol) che può essere usato per altre operazioni di sessione o per ottenere un puntatore a interfaccia [**ITCallInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallinfo) che può essere usato per acquisire informazioni aggiuntive sulla sessione.</span><span class="sxs-lookup"><span data-stu-id="0f853-121">If the session is set up successfully, TAPI returns an [**ITBasicCallControl**](/windows/desktop/api/tapi3if/nn-tapi3if-itbasiccallcontrol) interface pointer that can be used for further session operations, or to obtain an [**ITCallInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallinfo) interface pointer that can be used to acquire additional session information.</span></span> <span data-ttu-id="0f853-122">L'interfaccia [**ITCallStateEvent**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallstateevent) elabora gli eventi di stato della chiamata TAPI.</span><span class="sxs-lookup"><span data-stu-id="0f853-122">The [**ITCallStateEvent**](/windows/desktop/api/tapi3if/nn-tapi3if-itcallstateevent) interface processes TAPI call state events.</span></span>

> [!Note]  
> <span data-ttu-id="0f853-123">Non usare TAPI per trasmissioni fax.</span><span class="sxs-lookup"><span data-stu-id="0f853-123">TAPI should not be used for fax transmissions.</span></span> <span data-ttu-id="0f853-124">Usare invece le funzioni disponibili tramite MAPI, l'API Microsoft Messaging.</span><span class="sxs-lookup"><span data-stu-id="0f853-124">Instead, use the functions available through MAPI, the Microsoft Messaging API.</span></span>

 

## <a name="address-translation"></a><span data-ttu-id="0f853-125">Traduzione indirizzi</span><span class="sxs-lookup"><span data-stu-id="0f853-125">Address Translation</span></span>

<span data-ttu-id="0f853-126">Un'applicazione server o un utente finale può archiviare indirizzi in un formato non compatibile con le esigenze di un determinato provider di servizi.</span><span class="sxs-lookup"><span data-stu-id="0f853-126">An end-user or server application may store addresses in a format that is not compatible with the needs of a given service provider.</span></span> <span data-ttu-id="0f853-127">Un numero di telefono, ad esempio, può essere archiviato in una rubrica elettronica in [formato canonico](address-ovr.md), ma la maggior parte dei provider di servizi che gestiscono i numeri di telefono richiede il [formato di composizione](address-ovr.md).</span><span class="sxs-lookup"><span data-stu-id="0f853-127">For example, a phone number may be stored in an electronic address book in [canonical format](address-ovr.md), but most service providers that handle phone numbers require the [dialable format](address-ovr.md).</span></span>

<span data-ttu-id="0f853-128">TAPI fornisce operazioni di conversione degli indirizzi che consentono a un'applicazione di presentare il tipo di indirizzo corretto a un TSP.</span><span class="sxs-lookup"><span data-stu-id="0f853-128">TAPI supplies address translation operations that assist an application in presenting the correct address type to a TSP.</span></span> <span data-ttu-id="0f853-129">Il provider di servizi specifica a TAPI i tipi di indirizzi supportati e non deve includere alcuna forma di conversione degli indirizzi.</span><span class="sxs-lookup"><span data-stu-id="0f853-129">The service provider specifies to TAPI which address types it supports, and need not include any form of address translation.</span></span>

<span data-ttu-id="0f853-130">**TAPI 2. x:** Vedere [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress).</span><span class="sxs-lookup"><span data-stu-id="0f853-130">**TAPI 2.x:** See [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress).</span></span>

<span data-ttu-id="0f853-131">**TAPI 3:** Vedere [**ITAddressTranslation**](/windows/desktop/api/tapi3if/nn-tapi3if-itaddresstranslation), [**ITAddressTranslationInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itaddresstranslationinfo).</span><span class="sxs-lookup"><span data-stu-id="0f853-131">**TAPI 3:** See [**ITAddressTranslation**](/windows/desktop/api/tapi3if/nn-tapi3if-itaddresstranslation), [**ITAddressTranslationInfo**](/windows/desktop/api/tapi3if/nn-tapi3if-itaddresstranslationinfo).</span></span>

## <a name="toll-lists"></a><span data-ttu-id="0f853-132">Elenchi a pedaggio</span><span class="sxs-lookup"><span data-stu-id="0f853-132">Toll Lists</span></span>

<span data-ttu-id="0f853-133">In alcune posizioni America del Nord, tutte le chiamate telefoniche effettuate al codice locale sono chiamate locali.</span><span class="sxs-lookup"><span data-stu-id="0f853-133">In some locations in North America, all telephone calls placed to the local area code are local calls.</span></span> <span data-ttu-id="0f853-134">In altre posizioni, alcune chiamate effettuate al codice dell'area locale sono lunghe e richiedono un prefisso "1" da comporre.</span><span class="sxs-lookup"><span data-stu-id="0f853-134">In other locations, some calls placed to the local area code are long distance, and need a "1" prefix to be dialed.</span></span> <span data-ttu-id="0f853-135">Le prime tre cifre dell'indirizzo (il prefisso) determinano se una chiamata nel codice dell'area locale è una chiamata a pedaggio.</span><span class="sxs-lookup"><span data-stu-id="0f853-135">The first three digits of the address (the prefix) determine whether or not a call within the local area code is a toll call.</span></span>

<span data-ttu-id="0f853-136">Un *elenco* a discesa è costituito da un elenco di prefissi nel codice di area locale i cui indirizzi devono essere composte come indirizzi a distanza lunga e vengono valutati addebiti a distanza.</span><span class="sxs-lookup"><span data-stu-id="0f853-136">A *toll list* is a list of prefixes in the local area code whose addresses must be dialed as long-distance addresses, and are assessed long-distance charges.</span></span>

<span data-ttu-id="0f853-137">Gli elenchi a pedaggio non sono rilevanti per i provider di servizi o per le applicazioni che non accedono a una rete telefonica.</span><span class="sxs-lookup"><span data-stu-id="0f853-137">Toll lists are not relevant to service providers, or to applications that do not access a telephone network.</span></span>

<span data-ttu-id="0f853-138">**TAPI 2. x:** Vedere [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress) (LINETRANSLATERESULT \_ intoll e LINETRANSLATERESULT \_ NOTINTOLLLIST BITS nella struttura [**LINETRANSLATEOUTPUT**](/windows/win32/api/tapi/ns-tapi-linetranslateoutput) ), [**lineSetTollList**](/windows/win32/api/tapi/nf-tapi-linesettolllist).</span><span class="sxs-lookup"><span data-stu-id="0f853-138">**TAPI 2.x:** See [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress) (LINETRANSLATERESULT\_INTOLLLIST and LINETRANSLATERESULT\_NOTINTOLLLIST bits in the [**LINETRANSLATEOUTPUT**](/windows/win32/api/tapi/ns-tapi-linetranslateoutput) structure), [**lineSetTollList**](/windows/win32/api/tapi/nf-tapi-linesettolllist).</span></span>

<span data-ttu-id="0f853-139">**TAPI 3:** Vedere [**ITAddressTranslation:: TranslateAddress**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddresstranslation-translateaddress), [**ITAddressTranslationInfo:: Get \_ TranslationResults**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddresstranslationinfo-get_translationresults).</span><span class="sxs-lookup"><span data-stu-id="0f853-139">**TAPI 3:** See [**ITAddressTranslation::TranslateAddress**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddresstranslation-translateaddress), [**ITAddressTranslationInfo::get\_TranslationResults**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddresstranslationinfo-get_translationresults).</span></span>

 

 
