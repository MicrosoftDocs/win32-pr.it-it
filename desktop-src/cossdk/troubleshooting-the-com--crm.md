---
description: Risoluzione dei problemi relativi a COM+ CRM
ms.assetid: 4d2d9372-b540-4e08-9b57-8687802610b6
title: Risoluzione dei problemi relativi a COM+ CRM
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1b04e37d183dbf3df8d017e780917f955e14a033
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104523865"
---
# <a name="troubleshooting-the-com-crm"></a><span data-ttu-id="50aa1-103">Risoluzione dei problemi relativi a COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="50aa1-103">Troubleshooting the COM+ CRM</span></span>

<span data-ttu-id="50aa1-104">Di seguito sono riportati i problemi più comuni riscontrati durante lo sviluppo e l'utilizzo di COM+ CRM:</span><span class="sxs-lookup"><span data-stu-id="50aa1-104">Following are the most common problems encountered when developing and using the COM+ CRM:</span></span>

-   <span data-ttu-id="50aa1-105">**Messaggi del registro eventi.**</span><span class="sxs-lookup"><span data-stu-id="50aa1-105">**Event log messages.**</span></span> <span data-ttu-id="50aa1-106">Se l'applicazione del server CRM rileva un errore interno grave, FailFast (termina il processo dell'applicazione server CRM) e scrive un messaggio nel registro eventi di Windows.</span><span class="sxs-lookup"><span data-stu-id="50aa1-106">If the CRM server application encounters a serious internal error, it will failfast (terminate the CRM server application process) and write a message to the Windows event log.</span></span> <span data-ttu-id="50aa1-107">Se vengono rilevati problemi, fare riferimento al registro eventi.</span><span class="sxs-lookup"><span data-stu-id="50aa1-107">Please refer to the event log if any problems are encountered.</span></span>

-   <span data-ttu-id="50aa1-108">**Eccezioni dal compensatore CRM.**</span><span class="sxs-lookup"><span data-stu-id="50aa1-108">**Exceptions from the CRM Compensator.**</span></span> <span data-ttu-id="50aa1-109">L'infrastruttura CRM crea il compensatore CRM e lo passa alle notifiche relative ai risultati delle transazioni e ai record di log scritti dal ruolo di lavoro CRM.</span><span class="sxs-lookup"><span data-stu-id="50aa1-109">The CRM infrastructure creates the CRM Compensator and passes it the transaction outcome notifications and the log records written by the CRM Worker.</span></span> <span data-ttu-id="50aa1-110">Se il compensatore CRM restituisce un errore o genera un'eccezione, viene rilevata dall'infrastruttura CRM e genera un FailFast.</span><span class="sxs-lookup"><span data-stu-id="50aa1-110">If the CRM Compensator returns an error or throws an exception, it is caught by the CRM infrastructure and causes a failfast.</span></span> <span data-ttu-id="50aa1-111">Un messaggio nel registro eventi indica che è stata ricevuta un'eccezione dal compensatore CRM.</span><span class="sxs-lookup"><span data-stu-id="50aa1-111">A message in the event log indicates that an exception was received from the CRM Compensator.</span></span> <span data-ttu-id="50aa1-112">È possibile forzare l'ignoranza di queste eccezioni.</span><span class="sxs-lookup"><span data-stu-id="50aa1-112">It is possible to force these exceptions to be ignored.</span></span> <span data-ttu-id="50aa1-113">(Vedere [le impostazioni del registro di sistema com+ CRM](com--crm-registry-settings.md)). Le eccezioni del compensatore CRM più probabile indicano un problema nel componente di compensazione CRM specifico e non nell'infrastruttura di CRM.</span><span class="sxs-lookup"><span data-stu-id="50aa1-113">(See [COM+ CRM Registry Settings](com--crm-registry-settings.md).) Exceptions from the CRM Compensator most likely mean a problem in the specific CRM Compensator component and not in the CRM infrastructure itself.</span></span>

-   <span data-ttu-id="50aa1-114">**Traccia di ripristino.**</span><span class="sxs-lookup"><span data-stu-id="50aa1-114">**Recovery trace.**</span></span> <span data-ttu-id="50aa1-115">La traccia di ripristino può essere molto utile per determinare i problemi durante il ripristino.</span><span class="sxs-lookup"><span data-stu-id="50aa1-115">The recovery trace can be very useful to determine problems during recovery.</span></span> <span data-ttu-id="50aa1-116">Per informazioni sull'abilitazione della traccia di ripristino, vedere [impostazioni del registro di sistema com+ CRM](com--crm-registry-settings.md).</span><span class="sxs-lookup"><span data-stu-id="50aa1-116">For information about enabling recovery trace, see [COM+ CRM Registry Settings](com--crm-registry-settings.md).</span></span>

-   <span data-ttu-id="50aa1-117">**Il tentativo di eseguire con CRM non è abilitato.**</span><span class="sxs-lookup"><span data-stu-id="50aa1-117">**Trying to run with the CRM not enabled.**</span></span> <span data-ttu-id="50aa1-118">Non è sufficiente inserire i componenti di lavoro CRM e Compensator CRM nell'applicazione server COM+.</span><span class="sxs-lookup"><span data-stu-id="50aa1-118">It is not sufficient simply to place the CRM Worker and CRM Compensator components into the COM+ server application.</span></span> <span data-ttu-id="50aa1-119">Il supporto per dispongono deve essere abilitato in modo specifico per l'applicazione server COM+ specifica utilizzando l'opzione **Abilita gestioni risorse di compensazione** nella scheda **Avanzate** delle pagine delle proprietà dell'applicazione com+.</span><span class="sxs-lookup"><span data-stu-id="50aa1-119">Support for CRMs must be specifically enabled for the specific COM+ server application using the **Enable compensating resource managers** option on the **Advanced** tab of the COM+ application's property pages.</span></span> <span data-ttu-id="50aa1-120">Per ulteriori informazioni, vedere [Configuring com+ CRM Components](configuring-com--crm-components.md) . Se viene effettuato un tentativo di usare un CRM in un'applicazione server in cui non è abilitato il CRM, viene restituito un codice di errore al ruolo di lavoro CRM.</span><span class="sxs-lookup"><span data-stu-id="50aa1-120">(See [Configuring COM+ CRM Components](configuring-com--crm-components.md) for more information.) If an attempt is made to use a CRM inside a server application that does not have the CRM enabled, an error code is returned to the CRM Worker.</span></span>

-   <span data-ttu-id="50aa1-121">**Tentativo di eseguire dispongono nei processi client.**</span><span class="sxs-lookup"><span data-stu-id="50aa1-121">**Trying to run CRMs in client processes.**</span></span> <span data-ttu-id="50aa1-122">Dispongono non vengono eseguiti nei processi client; devono essere eseguiti in un processo dell'applicazione server COM+.</span><span class="sxs-lookup"><span data-stu-id="50aa1-122">CRMs do not run in client processes; they must run in a COM+ server application process.</span></span> <span data-ttu-id="50aa1-123">I componenti CRM possono essere inseriti in un pacchetto di libreria per l'uso da più applicazioni server COM+, ma non sono disponibili per l'uso nei processi client.</span><span class="sxs-lookup"><span data-stu-id="50aa1-123">CRM components can be placed in a library package for use by multiple COM+ server applications, but they are not available for use within client processes.</span></span> <span data-ttu-id="50aa1-124">Il tentativo di usare le interfacce CRM all'interno di un processo client restituisce un codice di errore al ruolo di lavoro CRM.</span><span class="sxs-lookup"><span data-stu-id="50aa1-124">Attempting to use the CRM interfaces inside a client process returns an error code to the CRM Worker.</span></span>

-   <span data-ttu-id="50aa1-125">**Ripristino in corso.**</span><span class="sxs-lookup"><span data-stu-id="50aa1-125">**Recovery in progress.**</span></span> <span data-ttu-id="50aa1-126">Il ripristino viene avviato all'avvio di un'applicazione server CRM.</span><span class="sxs-lookup"><span data-stu-id="50aa1-126">Recovery starts when a CRM server application starts.</span></span> <span data-ttu-id="50aa1-127">Tuttavia, il ripristino viene eseguito in background durante la normale elaborazione dell'applicazione server CRM.</span><span class="sxs-lookup"><span data-stu-id="50aa1-127">However, recovery occurs in the background during the normal processing of the CRM server application.</span></span> <span data-ttu-id="50aa1-128">Il ruolo di lavoro CRM può essere creato prima del completamento del ripristino.</span><span class="sxs-lookup"><span data-stu-id="50aa1-128">The CRM Worker can be created prior to recovery being completed.</span></span> <span data-ttu-id="50aa1-129">Non è possibile usare dispongono in un processo dell'applicazione server CRM finché il ripristino non è stato completato correttamente.</span><span class="sxs-lookup"><span data-stu-id="50aa1-129">CRMs cannot be used in a CRM server application process until recovery has been successfully completed.</span></span> <span data-ttu-id="50aa1-130">In questo caso, il ruolo di lavoro CRM riceve un codice di errore "ripristino in corso" durante il tentativo di registrare il compensatore CRM.</span><span class="sxs-lookup"><span data-stu-id="50aa1-130">In this case, the CRM Worker receives a "recovery in progress" error code as it tries to register the CRM Compensator.</span></span> <span data-ttu-id="50aa1-131">Il ruolo di lavoro CRM deve eseguire il polling o ritardare l'operazione fino al completamento del ripristino.</span><span class="sxs-lookup"><span data-stu-id="50aa1-131">The CRM Worker should poll or otherwise delay until recovery has been completed.</span></span> <span data-ttu-id="50aa1-132">Il tempo di recupero è specifico di un determinato tipo di CRM e deve essere preso in considerazione quando si progetta il CRM.</span><span class="sxs-lookup"><span data-stu-id="50aa1-132">The recovery time is specific to a particular type of CRM, and this should be considered when designing the CRM.</span></span> <span data-ttu-id="50aa1-133">I recuperi a lunga durata non sono desiderati.</span><span class="sxs-lookup"><span data-stu-id="50aa1-133">Long duration recoveries are not desirable.</span></span>

-   <span data-ttu-id="50aa1-134">**Sicurezza sul file di log CRM.**</span><span class="sxs-lookup"><span data-stu-id="50aa1-134">**Security on the CRM log file.**</span></span> <span data-ttu-id="50aa1-135">Se l'accesso al file di log CRM viene negato, vedere [considerazioni sulla sicurezza di com+ CRM](com--crm-security-considerations.md) per una descrizione della modalità di impostazione della sicurezza nel file di log CRM.</span><span class="sxs-lookup"><span data-stu-id="50aa1-135">If access to the CRM log file is denied, please see [COM+ CRM Security Considerations](com--crm-security-considerations.md) for a description of how security is set on the CRM log file.</span></span>

-   <span data-ttu-id="50aa1-136">**Transazioni in dubbio.**</span><span class="sxs-lookup"><span data-stu-id="50aa1-136">**In-doubt transactions.**</span></span> <span data-ttu-id="50aa1-137">In rari casi, una transazione DTC potrebbe entrare nello stato in dubbio. ovvero, il DTC non è in grado di determinare il risultato della transazione.</span><span class="sxs-lookup"><span data-stu-id="50aa1-137">In rare cases, a DTC transaction might go into the in-doubt state; that is, the DTC cannot determine the transaction outcome.</span></span> <span data-ttu-id="50aa1-138">In questi casi, durante il ripristino, il CRM mantiene i record del log per la transazione nel file di log CRM.</span><span class="sxs-lookup"><span data-stu-id="50aa1-138">For these cases, during recovery, the CRM maintains the log records for that transaction in the CRM log file.</span></span> <span data-ttu-id="50aa1-139">Quando la transazione in dubbio è stata risolta da DTC, l'esecuzione di un altro ripristino CRM completa la transazione.</span><span class="sxs-lookup"><span data-stu-id="50aa1-139">When the in-doubt transaction has been resolved by the DTC, performing another CRM recovery completes the transaction.</span></span>

-   <span data-ttu-id="50aa1-140">**Creazione e rilascio del compensatore CRM.**</span><span class="sxs-lookup"><span data-stu-id="50aa1-140">**Creation and release of CRM Compensator.**</span></span> <span data-ttu-id="50aa1-141">La prima volta che un compensatore CRM viene registrato da un ruolo di lavoro CRM, viene creato dall'infrastruttura CRM e viene eseguita una query per determinare quale delle interfacce del compensatore CRM supporta.</span><span class="sxs-lookup"><span data-stu-id="50aa1-141">The first time a CRM Compensator is registered by a CRM Worker, it is created by the CRM infrastructure and queried to determine which of the CRM Compensator interfaces it supports.</span></span> <span data-ttu-id="50aa1-142">Viene quindi rilasciata immediatamente.</span><span class="sxs-lookup"><span data-stu-id="50aa1-142">It is then immediately released.</span></span> <span data-ttu-id="50aa1-143">I compensatori CRM devono supportare la possibilità di essere creati e rilasciati senza alcuna chiamata al metodo corrispondente.</span><span class="sxs-lookup"><span data-stu-id="50aa1-143">CRM Compensators need to support the ability to be created and released without having had any intervening method calls.</span></span> <span data-ttu-id="50aa1-144">Se non è possibile creare correttamente il compensatore CRM, probabilmente a causa di una registrazione COM non corretta o se non supporta almeno una delle interfacce di compensazione CRM corrette, al ruolo di lavoro CRM viene restituito un codice di errore.</span><span class="sxs-lookup"><span data-stu-id="50aa1-144">If the CRM Compensator cannot be created correctly, perhaps due to incorrect COM registration, or if it does not support at least one of the correct CRM Compensator interfaces, an error code is returned to the CRM Worker.</span></span>

## <a name="related-topics"></a><span data-ttu-id="50aa1-145">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="50aa1-145">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="50aa1-146">Concetti Gestione risorse di compensazione COM+</span><span class="sxs-lookup"><span data-stu-id="50aa1-146">COM+ Compensating Resource Manager Concepts</span></span>](com--compensating-resource-manager-concepts.md)
</dt> </dl>

 

 



