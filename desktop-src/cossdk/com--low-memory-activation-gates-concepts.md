---
description: COM+ tenta di evitare situazioni in cui tali percorsi di errore devono essere eseguiti in un server.
ms.assetid: 0de125a2-2e91-49b9-a903-6c2e173e22a2
title: Concetti di COM+ Low-Memory Activation Gates
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 37d844a0492301ef067f5b3cd0e0749ec3a21779
ms.sourcegitcommit: bf526e267d3991892733bdd229c66d5365cf244a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/05/2021
ms.locfileid: "103968807"
---
# <a name="com-low-memory-activation-gates-concepts"></a><span data-ttu-id="8b5d2-103">Concetti di COM+ Low-Memory Activation Gates</span><span class="sxs-lookup"><span data-stu-id="8b5d2-103">COM+ Low-Memory Activation Gates Concepts</span></span>

<span data-ttu-id="8b5d2-104">In genere, la sincronizzazione non è necessaria quando si ha un Apartment a thread singolo (STA) perché l'Apartment fornisce la sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-104">Generally, synchronization is not required when you have a single-threaded apartment (STA) because the apartment provides the synchronization for you.</span></span> <span data-ttu-id="8b5d2-105">La sincronizzazione diventa importante quando si dispone di un Apartment a thread multipli (MTA) e di un oggetto a thread libero.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-105">Synchronization becomes important when you have a multithreaded apartment (MTA) and a free-threaded object.</span></span> <span data-ttu-id="8b5d2-106">In passato, gli oggetti a thread libero hanno dovuto gestire il blocco.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-106">In the past, free-threaded objects have had to handle locking.</span></span> <span data-ttu-id="8b5d2-107">È possibile eliminare la necessità di utilizzare il blocco impostando l'attributo di sincronizzazione per un componente.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-107">You can eliminate the need to use locking by setting the synchronization attribute for a component.</span></span>

<span data-ttu-id="8b5d2-108">I problemi di affidabilità si verificano spesso quando le risorse di un server non possono rispondere in modo efficiente ai picchi di carico</span><span class="sxs-lookup"><span data-stu-id="8b5d2-108">Reliability problems often occur when a server's resources cannot react efficiently to peak loads.</span></span> <span data-ttu-id="8b5d2-109">Quando un server non dispone di risorse fisiche sufficienti per soddisfare i picchi della domanda, può esaurire la memoria virtuale.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-109">When a server doesn't have enough physical resources to meet peak demand, it can exhaust virtual memory.</span></span> <span data-ttu-id="8b5d2-110">Questo diventa un problema se il codice utente o il codice di sistema non gestisce correttamente gli errori di allocazione della memoria.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-110">This becomes a problem if the user code or system code does not properly handle memory allocation failures.</span></span> <span data-ttu-id="8b5d2-111">Il server inizia a rallentare e, quando la memoria viene esaurita, le allocazioni di memoria hanno esito negativo.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-111">The server begins to slow down, and as memory is exhausted, memory allocations fail.</span></span> <span data-ttu-id="8b5d2-112">Il server esegue i percorsi degli errori per gestire gli errori di allocazione.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-112">The server executes error paths to handle the allocation failures.</span></span> <span data-ttu-id="8b5d2-113">Se un percorso di errore contiene un bug nel sistema o nel codice utente in esecuzione nel server, è molto difficile da intercettare e gestire in modo sicuro.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-113">If an error path contains a bug in the system or user code running on the server, it's extremely difficult to trap and handle safely.</span></span>

<span data-ttu-id="8b5d2-114">COM+ tenta di evitare situazioni in cui tali percorsi di errore devono essere eseguiti in un server.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-114">COM+ attempts to prevent situations in which these error paths have to be executed on a server.</span></span> <span data-ttu-id="8b5d2-115">Grazie alla funzionalità di controllo di attivazione a memoria insufficiente, COM+ monitora in modo proattivo il carico di memoria nel sistema e garantisce la disponibilità di una quantità di memoria ragionevole prima di eseguire il codice utente.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-115">Through the low-memory activation gates feature, COM+ proactively monitors memory load in the system and ensures that a reasonable amount of memory is available before executing user code.</span></span> <span data-ttu-id="8b5d2-116">Se la percentuale di memoria virtuale disponibile per l'applicazione scende al di sotto di una soglia fissa, l'attivazione avrà esito negativo prima della creazione di un'applicazione o di un oggetto server COM+, come illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-116">If the percentage of virtual memory available to the application falls below a fixed threshold, the activation fails before a COM+ server application or object is created (as shown in the illustration below).</span></span> <span data-ttu-id="8b5d2-117">Se queste attivazioni non vengono eseguite correttamente, la funzionalità relativa ai cancelli di attivazione a memoria ridotta riduce al minimo i problemi associati alle allocazioni di memoria nel codice utente, migliorando significativamente l'affidabilità del sistema.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-117">By failing these activations that would normally run, the low-memory activation gates feature minimizes the problems associated with memory allocations in user code, which significantly enhances system reliability.</span></span>

![Diagramma che mostra la relazione tra un'applicazione COM+ e un gate di attivazione a memoria insufficiente.](images/ada5ef02-f2b1-46bb-b0fc-fe7d65f31b43.png)

<span data-ttu-id="8b5d2-119">La funzionalità di controllo di attivazione a memoria insufficiente si applica solo ai componenti COM configurati installati in un'applicazione COM+.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-119">The low-memory activation gates feature applies only to configured COM components that are installed in a COM+ application.</span></span>

## <a name="how-the-low-memory-activation-gates-feature-works"></a><span data-ttu-id="8b5d2-120">Funzionamento della funzionalità dei controlli di attivazione Low-Memory</span><span class="sxs-lookup"><span data-stu-id="8b5d2-120">How the Low-Memory Activation Gates Feature Works</span></span>

<span data-ttu-id="8b5d2-121">La funzionalità di controllo di attivazione a memoria insufficiente utilizza un livello di soglia fisso diverso a seconda del tipo di attivazione.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-121">The low-memory activation gates feature uses a different fixed threshold level depending on the type of activation.</span></span> <span data-ttu-id="8b5d2-122">Quando si crea un'applicazione server COM+, COM+ consente l'attivazione se è disponibile più del 10% della memoria virtuale.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-122">When creating a COM+ server application, COM+ allows the activation if more than 10 percent of virtual memory is available.</span></span> <span data-ttu-id="8b5d2-123">Se è disponibile meno del 10%, COM+ esegue un'allocazione di test per verificare se il file di paging può espandersi per adattarsi al nuovo carico di memoria.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-123">If less than 10 percent is available, COM+ makes a test allocation to find out if the paging file can expand to accommodate the new memory load.</span></span> <span data-ttu-id="8b5d2-124">Se il file di paging viene espanso, viene creata l'applicazione server.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-124">If the paging file expands, the server application is created.</span></span> <span data-ttu-id="8b5d2-125">Se non è possibile espandere il file di paging, l'attivazione ha esito negativo e la memoria non viene allocata.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-125">If the paging file cannot be expanded, the activation fails and memory is not allocated.</span></span>

<span data-ttu-id="8b5d2-126">Il processo è simile quando si crea un oggetto.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-126">The process is similar when creating an object.</span></span> <span data-ttu-id="8b5d2-127">In questo caso, COM+ consente l'attivazione se è disponibile più del 5% di memoria virtuale.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-127">In this case, COM+ allows the activation if more than 5 percent of virtual memory is available.</span></span> <span data-ttu-id="8b5d2-128">Se è disponibile meno del 5%, COM+ procede con un'allocazione di test.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-128">If less than 5 percent is available, COM+ proceeds with a test allocation.</span></span> <span data-ttu-id="8b5d2-129">Anche in questo caso, se l'allocazione di test espande il file di paging, viene creato l'oggetto.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-129">Again, if the test allocation expands the paging file, the object is created.</span></span> <span data-ttu-id="8b5d2-130">In caso contrario, l'attivazione avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-130">If not, the activation fails.</span></span>

<span data-ttu-id="8b5d2-131">Attualmente non è possibile configurare i livelli di soglia fissa per i controlli di attivazione a memoria insufficiente.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-131">The fixed threshold levels for low-memory activation gates are currently not configurable.</span></span> <span data-ttu-id="8b5d2-132">Per questo motivo, non sono presenti attività associate a questa funzionalità.</span><span class="sxs-lookup"><span data-stu-id="8b5d2-132">For this reason, there are no tasks associated with this feature.</span></span>

 

 



