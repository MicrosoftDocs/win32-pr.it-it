---
description: Miglioramento delle prestazioni con il pool di oggetti
ms.assetid: 7a8a38d8-6549-4686-a298-f3b427b380e3
title: Miglioramento delle prestazioni con il pool di oggetti
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 398b9140080d3a439293b5152b4da7251978e800
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106304947"
---
# <a name="improving-performance-with-object-pooling"></a><span data-ttu-id="b321e-103">Miglioramento delle prestazioni con il pool di oggetti</span><span class="sxs-lookup"><span data-stu-id="b321e-103">Improving Performance with Object Pooling</span></span>

<span data-ttu-id="b321e-104">Il pool di oggetti può essere estremamente efficace in determinate circostanze, ottenendo un aumento sostanziale delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="b321e-104">Object pooling can be extremely effective in certain circumstances, yielding substantial increases in performance.</span></span> <span data-ttu-id="b321e-105">L'idea generale di riutilizzare gli oggetti per sfruttare al meglio il maggior numero possibile consiste nel raggruppare il maggior numero possibile di risorse, escludendo l'inizializzazione dal lavoro effettivo eseguito e quindi adattando in modo amministrativo le caratteristiche del pool all'hardware effettivo in fase di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="b321e-105">The general idea for reusing objects to best advantage is to pool as many resources as possible, factoring out initialization from actual work performed, and then to administratively tailor the pool characteristics to actual hardware at deployment time.</span></span> <span data-ttu-id="b321e-106">Ovvero, è necessario procedere in base ai passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="b321e-106">That is, you should proceed according to the following steps:</span></span>

1.  <span data-ttu-id="b321e-107">Scrivere l'oggetto in modo da fattorizzare l'inizializzazione costosa e l'acquisizione delle risorse eseguita per qualsiasi client come prerequisito per eseguire il lavoro effettivo per conto del client.</span><span class="sxs-lookup"><span data-stu-id="b321e-107">Write the object so as to factor out expensive initialization and resource acquisition that is performed for any client as a prerequisite to doing actual work on the client's behalf.</span></span> <span data-ttu-id="b321e-108">Scrivere i costruttori di oggetti pesanti nel pool del maggior numero possibile di risorse, in modo che vengano mantenuti dall'oggetto e immediatamente disponibili quando i client ottengono un oggetto dal pool.</span><span class="sxs-lookup"><span data-stu-id="b321e-108">Write heavy object constructors to pool as many resources as possible so that these are held by the object and immediately available when clients get an object from the pool.</span></span>
2.  <span data-ttu-id="b321e-109">Configurare il pool in modo amministrativo per ottenere il migliore equilibrio nelle risorse hardware disponibili, in genere negoziando la memoria dedicata alla gestione di un pool di una determinata dimensione in Exchange per un accesso client più rapido e l'utilizzo di oggetti.</span><span class="sxs-lookup"><span data-stu-id="b321e-109">Administratively configure the pool to achieve the best balance in available hardware resources, usually trading the memory dedicated to maintaining a pool of a certain size in exchange for faster client access and use of objects.</span></span> <span data-ttu-id="b321e-110">A un certo punto, i pool otterranno ritorni ridotti ed è possibile ottenere prestazioni soddisfacenti, limitando il possibile utilizzo delle risorse da parte di un particolare componente.</span><span class="sxs-lookup"><span data-stu-id="b321e-110">At a certain point, pooling will achieve diminishing returns and you can get good enough performance while limiting possible resource usage by a particular component.</span></span>

## <a name="doing-actual-work-or-acquiring-resources"></a><span data-ttu-id="b321e-111">Lavoro effettivo o acquisizione delle risorse</span><span class="sxs-lookup"><span data-stu-id="b321e-111">Doing Actual Work or Acquiring Resources</span></span>

<span data-ttu-id="b321e-112">Se si dispone di un componente che i client utilizzeranno brevemente e in rapida successione, in cui una parte significativa del tempo di utilizzo dell'oggetto viene impiegata per l'acquisizione di risorse o l'inizializzazione prima dell'esecuzione di operazioni specifiche per il client, è probabile che la scrittura del componente per l'utilizzo del pool di oggetti sia una grande vittoria.</span><span class="sxs-lookup"><span data-stu-id="b321e-112">If you have a component that clients will use briefly and in rapid succession, where a significant portion of object use time is spent in acquiring resources or initializing prior to doing specific work for the client, chances are that writing your component to use object pooling will be a big win for you.</span></span>

<span data-ttu-id="b321e-113">È possibile scrivere il componente in modo che nel costruttore dell'oggetto venga eseguita la maggior parte del lavoro dispendioso in termini di tempo che è uniforme per tutti i client, acquisendo una o più connessioni, eseguendo script, recuperando i dati di inizializzazione dai file o attraverso una rete e così via.</span><span class="sxs-lookup"><span data-stu-id="b321e-113">You can write the component so that in the object's constructor you perform as much of the time-consuming work that is uniform for all clients as possible—acquiring one or several connections, running scripts, fetching initialization data from files or across a network, and so forth.</span></span> <span data-ttu-id="b321e-114">Questo ha l'effetto di raggruppare ogni risorsa.</span><span class="sxs-lookup"><span data-stu-id="b321e-114">This has the effect of pooling every such resource.</span></span> <span data-ttu-id="b321e-115">È necessario raggruppare la combinazione di risorse e lo stato generico necessario per eseguire alcune operazioni.</span><span class="sxs-lookup"><span data-stu-id="b321e-115">You are pooling the combination of resources and generic state necessary to perform some work.</span></span>

<span data-ttu-id="b321e-116">In questa circostanza, quando i client ottengono un oggetto dal pool, queste risorse sono immediatamente disponibili.</span><span class="sxs-lookup"><span data-stu-id="b321e-116">In this circumstance, when clients get an object from the pool, they have those resources immediately available.</span></span> <span data-ttu-id="b321e-117">In genere, useranno l'oggetto per eseguire una piccola unità di lavoro, il push o il pull dei dati, quindi l'oggetto chiamerà [**IObjectContext:: Tocomplete**](/windows/desktop/api/ComSvcs/nf-comsvcs-iobjectcontext-setcomplete) o [**IObjectContext:: SetAbort**](/windows/desktop/api/ComSvcs/nf-comsvcs-iobjectcontext-setabort) e return.</span><span class="sxs-lookup"><span data-stu-id="b321e-117">Typically, they will use the object to do some small unit of work, pushing or pulling data, and then the object will call [**IObjectContext::SetComplete**](/windows/desktop/api/ComSvcs/nf-comsvcs-iobjectcontext-setcomplete) or [**IObjectContext::SetAbort**](/windows/desktop/api/ComSvcs/nf-comsvcs-iobjectcontext-setabort) and return.</span></span> <span data-ttu-id="b321e-118">Con i modelli di utilizzo rapidi come questo, il pool produce vantaggi ottimali in merito alle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="b321e-118">With rapid-fire use patterns such as this, pooling yields excellent performance benefits.</span></span> <span data-ttu-id="b321e-119">È possibile sfruttare appieno la semplicità del modello di programmazione automatica delle transazioni senza stato, ottenendo al tempo stesso prestazioni analoghe ai tradizionali componenti con stato.</span><span class="sxs-lookup"><span data-stu-id="b321e-119">You can fully leverage the simplicity of the stateless automatic transaction programming model yet achieve performance on par with traditional stateful components.</span></span>

<span data-ttu-id="b321e-120">Tuttavia, se i client usano un oggetto per un lungo periodo di tempo ogni volta che la chiamano, i pool avranno un significato minore.</span><span class="sxs-lookup"><span data-stu-id="b321e-120">However, if clients use an object for a long time each time they call it, pooling will make less sense.</span></span> <span data-ttu-id="b321e-121">Il vantaggio di velocità che si ottiene è marginale perché il tempo di utilizzo aumenta rispetto al tempo di inizializzazione.</span><span class="sxs-lookup"><span data-stu-id="b321e-121">The speed advantage that you gain is marginal as use time increases relative to initialization time.</span></span> <span data-ttu-id="b321e-122">Vengono restituiti ritorni che potrebbero non giustificare il costo della memoria necessaria per mantenere un pool di oggetti attivi.</span><span class="sxs-lookup"><span data-stu-id="b321e-122">You get diminishing returns that may not justify the cost of the memory necessary to hold a pool of active objects.</span></span>

## <a name="sharing-cost-across-multiple-clients"></a><span data-ttu-id="b321e-123">Condivisione dei costi tra più client</span><span class="sxs-lookup"><span data-stu-id="b321e-123">Sharing Cost Across Multiple Clients</span></span>

<span data-ttu-id="b321e-124">Una variante dell'inizializzazione del factoring è che è possibile usare il pool per ammortizzare statisticamente il costo di acquisizione di risorse costose.</span><span class="sxs-lookup"><span data-stu-id="b321e-124">A variation on factoring out initialization is that you can use pooling to statistically amortize the cost of acquiring expensive resources.</span></span> <span data-ttu-id="b321e-125">Se si esegue l'acquisizione o l'inizializzazione una volta e quindi si riutilizza l'oggetto, si condivide tale costo tra tutti i client che utilizzano l'oggetto durante la relativa durata.</span><span class="sxs-lookup"><span data-stu-id="b321e-125">If you take the hit of acquisition or initialization once and then reuse the object, you share that cost across all clients that use the object during its lifetime.</span></span> <span data-ttu-id="b321e-126">Il tempo di costruzione elevato viene eseguito una sola volta per oggetto.</span><span class="sxs-lookup"><span data-stu-id="b321e-126">Heavy construction time is incurred only once per object.</span></span>

## <a name="preallocating-objects"></a><span data-ttu-id="b321e-127">Preallocazione di oggetti</span><span class="sxs-lookup"><span data-stu-id="b321e-127">Preallocating Objects</span></span>

<span data-ttu-id="b321e-128">Se si specifica una dimensione del pool minima diversa da zero, il numero minimo di oggetti verrà creato e in pool all'avvio dell'applicazione, pronto per tutti i client che chiamano l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="b321e-128">If you specify a nonzero minimum pool size, that minimum number of objects will be created and pooled when the application starts, ready for any clients that call in to the application.</span></span>

## <a name="governing-resource-use-with-pool-management"></a><span data-ttu-id="b321e-129">Governare l'uso delle risorse con la gestione del pool</span><span class="sxs-lookup"><span data-stu-id="b321e-129">Governing Resource Use with Pool Management</span></span>

<span data-ttu-id="b321e-130">È possibile utilizzare le dimensioni massime del pool per governare con precisione la modalità di utilizzo delle risorse.</span><span class="sxs-lookup"><span data-stu-id="b321e-130">You can use the maximum pool size to govern very precisely how you use resources.</span></span> <span data-ttu-id="b321e-131">Ad esempio, se si dispone di una licenza per un certo numero di connessioni di database, è possibile controllare il numero di connessioni aperte in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="b321e-131">For example, if you have licensed a certain number of database connections, you can control how many connections you have open at any time.</span></span>

<span data-ttu-id="b321e-132">Quando si prendono in considerazione i modelli di utilizzo dei client, le caratteristiche di utilizzo degli oggetti e le risorse fisiche, ad esempio la memoria e le connessioni, è probabile che si trovi un punto di bilanciamento ottimale quando si esegue l'ottimizzazione delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="b321e-132">When you take into consideration client use patterns, object use characteristics, and physical resources such as memory and connections, you are likely to find some optimal balance point when you do performance tuning.</span></span> <span data-ttu-id="b321e-133">Gli oggetti di pooling restituiranno risultati decrescenti dopo un determinato punto.</span><span class="sxs-lookup"><span data-stu-id="b321e-133">Pooling objects will yield diminishing returns after a certain point.</span></span> <span data-ttu-id="b321e-134">È possibile determinare il livello di prestazioni necessario e bilanciarlo rispetto alle risorse necessarie per ottenerlo.</span><span class="sxs-lookup"><span data-stu-id="b321e-134">You can determine what level of performance you require and balance that against what resources are necessary to achieve it.</span></span>

<span data-ttu-id="b321e-135">Per semplificare l'ottimizzazione delle prestazioni quando si configura il pool di oggetti, è possibile monitorare le statistiche degli oggetti per i componenti di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="b321e-135">To facilitate performance tuning when you configure object pooling, you can monitor object statistics for the components in an application.</span></span> <span data-ttu-id="b321e-136">Per informazioni dettagliate, vedere [monitoraggio delle statistiche degli oggetti](monitoring-object-statistics.md).</span><span class="sxs-lookup"><span data-stu-id="b321e-136">For details, see [Monitoring Object Statistics](monitoring-object-statistics.md).</span></span>

## <a name="improve-performance-of-jit-activated-components"></a><span data-ttu-id="b321e-137">Migliorare le prestazioni dei componenti di JIT-Activated</span><span class="sxs-lookup"><span data-stu-id="b321e-137">Improve Performance of JIT-Activated Components</span></span>

<span data-ttu-id="b321e-138">Il pool di oggetti funziona molto bene con il servizio di [attivazione JIT (just-in-Time) com+](com--just-in-time-activation.md) .</span><span class="sxs-lookup"><span data-stu-id="b321e-138">Object pooling works very well with the [COM+ just-in-time activation](com--just-in-time-activation.md) service.</span></span> <span data-ttu-id="b321e-139">Raggruppando gli oggetti che vengono attivati tramite JIT, è possibile velocizzare la riattivazione degli oggetti.</span><span class="sxs-lookup"><span data-stu-id="b321e-139">By pooling objects that are being JIT-activated, you can speed object reactivation.</span></span> <span data-ttu-id="b321e-140">Si ottengono i vantaggi derivanti dal mantenimento del canale aperto dall'attivazione JIT, riducendo al tempo stesso il costo della riattivazione.</span><span class="sxs-lookup"><span data-stu-id="b321e-140">You get the benefits of holding the channel open by JIT activation while mitigating the cost of reactivation.</span></span> <span data-ttu-id="b321e-141">In questo caso è possibile usare il pool per controllare la quantità di memoria da allocare a oggetti con riferimenti attivi.</span><span class="sxs-lookup"><span data-stu-id="b321e-141">You can use pooling in this case to govern how much memory you wish to allocate to objects that have references active.</span></span>

<span data-ttu-id="b321e-142">È probabile che si stiano raggruppando i componenti attivati tramite JIT quando sono transazionali.</span><span class="sxs-lookup"><span data-stu-id="b321e-142">You are most likely to be pooling JIT-activated components when they are transactional.</span></span> <span data-ttu-id="b321e-143">Il pool di oggetti è ottimizzato per la gestione dei componenti transazionali.</span><span class="sxs-lookup"><span data-stu-id="b321e-143">Object pooling is optimized to handle transactional components.</span></span> <span data-ttu-id="b321e-144">Per ulteriori informazioni, vedere la pagina relativa al [pool di oggetti transazionali](pooling-transactional-objects.md).</span><span class="sxs-lookup"><span data-stu-id="b321e-144">For more information, see [Pooling Transactional Objects](pooling-transactional-objects.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="b321e-145">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="b321e-145">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b321e-146">Stringhe del costruttore di oggetti COM+</span><span class="sxs-lookup"><span data-stu-id="b321e-146">COM+ Object Constructor Strings</span></span>](com--object-constructor-strings.md)
</dt> <dt>

[<span data-ttu-id="b321e-147">Controllo della durata e dello stato degli oggetti</span><span class="sxs-lookup"><span data-stu-id="b321e-147">Controlling Object Lifetime and State</span></span>](controlling-object-lifetime-and-state.md)
</dt> <dt>

[<span data-ttu-id="b321e-148">Funzionamento del pool di oggetti</span><span class="sxs-lookup"><span data-stu-id="b321e-148">How Object Pooling Works</span></span>](how-object-pooling-works.md)
</dt> <dt>

[<span data-ttu-id="b321e-149">Raggruppamento di oggetti transazionali</span><span class="sxs-lookup"><span data-stu-id="b321e-149">Pooling Transactional Objects</span></span>](pooling-transactional-objects.md)
</dt> <dt>

[<span data-ttu-id="b321e-150">Requisiti per gli oggetti pool</span><span class="sxs-lookup"><span data-stu-id="b321e-150">Requirements for Poolable Objects</span></span>](requirements-for-poolable-objects.md)
</dt> </dl>

 

 



