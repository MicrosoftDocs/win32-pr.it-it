---
description: Suggerimenti di progettazione per lo sviluppo di un CRM COM+
ms.assetid: dde1b978-6d35-4a75-91fd-69dfcc6c43d2
title: Suggerimenti di progettazione per lo sviluppo di un CRM COM+
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8dcdb59f0ea23fb6879300d0bacec7df12970d81
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104225638"
---
# <a name="design-suggestions-for-developing-a-com-crm"></a><span data-ttu-id="c153e-103">Suggerimenti di progettazione per lo sviluppo di un CRM COM+</span><span class="sxs-lookup"><span data-stu-id="c153e-103">Design Suggestions for Developing a COM+ CRM</span></span>

<span data-ttu-id="c153e-104">Di seguito sono riportati i passaggi consigliati per lo sviluppo di un CRM COM+:</span><span class="sxs-lookup"><span data-stu-id="c153e-104">Following are suggested steps for developing a COM+ CRM:</span></span>

1.  <span data-ttu-id="c153e-105">Prima di iniziare lo sviluppo, impostare il timeout della transazione su zero (utilizzando lo strumento di amministrazione Servizi componenti).</span><span class="sxs-lookup"><span data-stu-id="c153e-105">Before starting development, set the transaction time-out to zero (using the Component Services administrative tool).</span></span> <span data-ttu-id="c153e-106">Impostare il flag del registro di sistema VTRACE1 (vedere [impostazioni del registro di sistema com+ CRM](com--crm-registry-settings.md)) per visualizzare i messaggi di avviso e di errore di CRM nella traccia di debug.</span><span class="sxs-lookup"><span data-stu-id="c153e-106">Set the VTRACE1 registry flag (see [COM+ CRM Registry Settings](com--crm-registry-settings.md)) to see CRM warning and error messages on the debug trace.</span></span>
2.  <span data-ttu-id="c153e-107">Determinare quale set di interfacce è necessario usare, strutturato (varianti) o non strutturato.</span><span class="sxs-lookup"><span data-stu-id="c153e-107">Determine which set of interfaces you need to use, structured (Variants) or non-structured.</span></span> <span data-ttu-id="c153e-108">(Vedere [interfacce com+ CRM](com--crm-interfaces.md)). Questo dipende dal linguaggio usato per sviluppare il CRM, ad esempio Microsoft Visual C++ o Microsoft Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="c153e-108">(See [COM+ CRM Interfaces](com--crm-interfaces.md).) This will depend on the language that you use to develop your CRM—for example, Microsoft Visual C++ or Microsoft Visual Basic.</span></span>
3.  <span data-ttu-id="c153e-109">Sviluppare prima di tutto il ruolo di lavoro CRM.</span><span class="sxs-lookup"><span data-stu-id="c153e-109">Develop the CRM worker first.</span></span> <span data-ttu-id="c153e-110">Determinare le informazioni necessarie nei record di log.</span><span class="sxs-lookup"><span data-stu-id="c153e-110">Determine the information that is required in the log records.</span></span> <span data-ttu-id="c153e-111">Definire i tipi di record di log necessari e il relativo formato.</span><span class="sxs-lookup"><span data-stu-id="c153e-111">Define the types of log records required and their format.</span></span>
4.  <span data-ttu-id="c153e-112">Un compensatore CRM di debug viene fornito come parte degli esempi di CRM (nella Windows SDK).</span><span class="sxs-lookup"><span data-stu-id="c153e-112">A debug CRM compensator is provided as part of the CRM samples (in the Windows SDK).</span></span> <span data-ttu-id="c153e-113">Questa operazione può essere utilizzata temporaneamente durante il debug del processo di lavoro CRM al posto del compensatore CRM reale.</span><span class="sxs-lookup"><span data-stu-id="c153e-113">This can be used temporarily when debugging the CRM worker in place of the real CRM compensator.</span></span>
5.  <span data-ttu-id="c153e-114">Quando il ruolo di lavoro CRM funziona correttamente, sviluppare il compensatore CRM reale e sostituire il compensatore CRM di debug con il compensatore CRM reale.</span><span class="sxs-lookup"><span data-stu-id="c153e-114">When the CRM worker is working correctly, develop the real CRM compensator and replace the debug CRM compensator with the real CRM compensator.</span></span>
6.  <span data-ttu-id="c153e-115">Potrebbe essere auspicabile testare inizialmente il caso di ripristino.</span><span class="sxs-lookup"><span data-stu-id="c153e-115">It may be desirable to initially not test the recovery case.</span></span> <span data-ttu-id="c153e-116">In tal caso, eliminare ogni volta il file di log CRM per l'applicazione server CRM prima di avviare l'applicazione server CRM.</span><span class="sxs-lookup"><span data-stu-id="c153e-116">If so, delete the CRM log file for the CRM server application each time before starting that CRM server application.</span></span>

## <a name="considerations"></a><span data-ttu-id="c153e-117">Considerazioni</span><span class="sxs-lookup"><span data-stu-id="c153e-117">Considerations</span></span>

1.  <span data-ttu-id="c153e-118">**Scrivi avanti.**</span><span class="sxs-lookup"><span data-stu-id="c153e-118">**Write ahead.**</span></span> <span data-ttu-id="c153e-119">Il componente Worker CRM deve scrivere in anticipo; ovvero deve scrivere un record di log indicante che verrà eseguita un'azione prima di eseguire effettivamente tale azione.</span><span class="sxs-lookup"><span data-stu-id="c153e-119">The CRM worker component must write ahead; that is, it must write a log record indicating it is going to perform an action before actually performing that action.</span></span> <span data-ttu-id="c153e-120">Inoltre, questo record di log deve essere forzato su disco dopo la scrittura e prima che venga eseguita l'azione.</span><span class="sxs-lookup"><span data-stu-id="c153e-120">In addition, this log record must be forced to disk after the write and before the action is performed.</span></span>
2.  <span data-ttu-id="c153e-121">**Isolamento.**</span><span class="sxs-lookup"><span data-stu-id="c153e-121">**Isolation.**</span></span> <span data-ttu-id="c153e-122">Il CRM non impone l'isolamento.</span><span class="sxs-lookup"><span data-stu-id="c153e-122">The CRM does not enforce isolation.</span></span> <span data-ttu-id="c153e-123">La progettazione di CRM deve fornire l'isolamento tra più client in transazioni separate e deve considerare anche il caso prima del ripristino.</span><span class="sxs-lookup"><span data-stu-id="c153e-123">The CRM design must provide isolation between multiple clients on separate transactions and must also consider the case prior to recovery.</span></span>
3.  <span data-ttu-id="c153e-124">**Ripristino in corso.**</span><span class="sxs-lookup"><span data-stu-id="c153e-124">**Recovery in progress.**</span></span> <span data-ttu-id="c153e-125">Il ruolo di lavoro CRM deve gestire il codice di errore "ripristino in corso".</span><span class="sxs-lookup"><span data-stu-id="c153e-125">The CRM worker must handle the "recovery in progress" error code.</span></span> <span data-ttu-id="c153e-126">Per ulteriori informazioni su questo codice di errore, vedere [risoluzione dei problemi di com+ CRM](troubleshooting-the-com--crm.md) .</span><span class="sxs-lookup"><span data-stu-id="c153e-126">See [Troubleshooting the COM+ CRM](troubleshooting-the-com--crm.md) for more information about this error code.</span></span>
4.  <span data-ttu-id="c153e-127">**Gestione degli errori.**</span><span class="sxs-lookup"><span data-stu-id="c153e-127">**Error handling.**</span></span> <span data-ttu-id="c153e-128">Il ruolo di lavoro CRM deve far fronte al caso in cui la transazione venga interrotta prima del previsto.</span><span class="sxs-lookup"><span data-stu-id="c153e-128">The CRM worker must cope with the case where the transaction is aborted earlier than expected.</span></span> <span data-ttu-id="c153e-129">Vedere la sezione [gestione degli errori in com+ CRM](error-handling-in-the-com--crm.md).</span><span class="sxs-lookup"><span data-stu-id="c153e-129">See the section [Error Handling in the COM+ CRM](error-handling-in-the-com--crm.md).</span></span>
5.  <span data-ttu-id="c153e-130">**Tempo di ripristino.**</span><span class="sxs-lookup"><span data-stu-id="c153e-130">**Recovery time.**</span></span> <span data-ttu-id="c153e-131">Il compensatore CRM deve essere progettato per eseguire rapidamente il ripristino, in modo che non sia necessario attendere un nuovo lavoro per l'applicazione server CRM.</span><span class="sxs-lookup"><span data-stu-id="c153e-131">The CRM compensator should be designed to perform recovery quickly so that new work for that CRM server application does not have to wait.</span></span>
6.  <span data-ttu-id="c153e-132">**L'idempotenza.**</span><span class="sxs-lookup"><span data-stu-id="c153e-132">**Idempotence.**</span></span> <span data-ttu-id="c153e-133">È possibile che un compensatore CRM possa ricevere nuovamente lo stesso record di log, per annullare o ripristinare un'azione che è già stata annullata o ripetuta.</span><span class="sxs-lookup"><span data-stu-id="c153e-133">It is possible that a CRM compensator might receive the same log record again, to undo or redo an action that has already been undone or redone.</span></span> <span data-ttu-id="c153e-134">Le azioni che il compensatore CRM può eseguire devono essere idempotente, che spesso significa che i codici di errore restituiti da queste azioni devono essere ignorati.</span><span class="sxs-lookup"><span data-stu-id="c153e-134">Actions that the CRM compensator might perform must be idempotent, which often means that the error codes returned from these actions should be ignored.</span></span>
7.  <span data-ttu-id="c153e-135">**Avvio del ripristino.**</span><span class="sxs-lookup"><span data-stu-id="c153e-135">**Initiation of recovery.**</span></span> <span data-ttu-id="c153e-136">Il ripristino di un'applicazione server CRM viene eseguito all'avvio dell'applicazione server CRM.</span><span class="sxs-lookup"><span data-stu-id="c153e-136">Recovery of a CRM server application is performed when that CRM server application starts up.</span></span> <span data-ttu-id="c153e-137">Tuttavia, non è presente alcun avvio automatico di un'applicazione server CRM.</span><span class="sxs-lookup"><span data-stu-id="c153e-137">However, there is no automatic startup of a CRM server application.</span></span> <span data-ttu-id="c153e-138">Lo sviluppatore di applicazioni deve considerare la modalità di avvio di avvio e ripristino.</span><span class="sxs-lookup"><span data-stu-id="c153e-138">The application developer should consider how both startup and recovery should be initiated.</span></span>

## <a name="related-topics"></a><span data-ttu-id="c153e-139">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="c153e-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c153e-140">Concetti Gestione risorse di compensazione COM+</span><span class="sxs-lookup"><span data-stu-id="c153e-140">COM+ Compensating Resource Manager Concepts</span></span>](com--compensating-resource-manager-concepts.md)
</dt> </dl>

 

 



