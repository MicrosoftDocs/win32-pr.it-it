---
description: È possibile utilizzare il Gestione risorse di compensazione COM+ (CRM) per integrare in modo semplice e rapido le risorse dell'applicazione con le transazioni Microsoft Distributed Transaction Coordinator (DTC).
ms.assetid: 8d1d034f-8a09-40ae-842a-5251135bd3c8
title: Concetti Gestione risorse di compensazione COM+
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 14206a54ffcb4f7e06ddf7362736a722393b0791
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103966111"
---
# <a name="com-compensating-resource-manager-concepts"></a><span data-ttu-id="ac289-103">Concetti Gestione risorse di compensazione COM+</span><span class="sxs-lookup"><span data-stu-id="ac289-103">COM+ Compensating Resource Manager Concepts</span></span>

<span data-ttu-id="ac289-104">È possibile utilizzare il Gestione risorse di compensazione COM+ (CRM) per integrare in modo semplice e rapido le risorse dell'applicazione con le transazioni Microsoft Distributed Transaction Coordinator (DTC).</span><span class="sxs-lookup"><span data-stu-id="ac289-104">You can use the COM+ Compensating Resource Manager (CRM) to easily and quickly integrate application resources with Microsoft Distributed Transaction Coordinator (DTC) transactions.</span></span> <span data-ttu-id="ac289-105">Le risorse dell'applicazione possono votare il risultato di una transazione e possono ricevere una notifica finale del suo esito.</span><span class="sxs-lookup"><span data-stu-id="ac289-105">Your application resources can vote on the outcome of a transaction and can receive final notification of its outcome.</span></span> <span data-ttu-id="ac289-106">Viene generato un log durevole in modo che le risorse dell'applicazione possano scrivere record che sopravvivono a errori e il CRM ripristina il file di log quando l'applicazione viene riavviata.</span><span class="sxs-lookup"><span data-stu-id="ac289-106">A durable log is generated so that your application resources can write records that survive failures, and the CRM recovers this log file when the application restarts.</span></span>

<span data-ttu-id="ac289-107">Un CRM è costituito dai due componenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="ac289-107">A CRM consists of the following two components:</span></span>

-   <span data-ttu-id="ac289-108">Ruolo di lavoro CRM.</span><span class="sxs-lookup"><span data-stu-id="ac289-108">CRM Worker.</span></span> <span data-ttu-id="ac289-109">Questo componente esegue il lavoro principale del CRM specifico e implementa un'interfaccia specifica per l'attività da eseguire.</span><span class="sxs-lookup"><span data-stu-id="ac289-109">This component performs the main work of the specific CRM and implements an interface specific to the task it needs to perform.</span></span> <span data-ttu-id="ac289-110">L'infrastruttura CRM fornisce un'interfaccia per il ruolo di lavoro CRM tramite il quale il ruolo di lavoro CRM può scrivere record in un file di log durevole su disco.</span><span class="sxs-lookup"><span data-stu-id="ac289-110">The CRM infrastructure provides an interface to the CRM Worker through which the CRM Worker can write records to a durable log file on disk.</span></span> <span data-ttu-id="ac289-111">Il ruolo di lavoro CRM deve scrivere record nel log e renderli durevoli prima di eseguire il proprio lavoro in modo che, se si verifica un arresto anomalo, il ripristino possa essere eseguito correttamente.</span><span class="sxs-lookup"><span data-stu-id="ac289-111">The CRM Worker must write records to the log and make them durable before it performs its work so that, if a crash occurs, recovery can occur correctly.</span></span> <span data-ttu-id="ac289-112">Il ruolo di lavoro CRM richiede sempre una transazione.</span><span class="sxs-lookup"><span data-stu-id="ac289-112">The CRM Worker always requires a transaction.</span></span>
-   <span data-ttu-id="ac289-113">Compensatore CRM.</span><span class="sxs-lookup"><span data-stu-id="ac289-113">CRM Compensator.</span></span> <span data-ttu-id="ac289-114">Questo componente viene creato dall'infrastruttura CRM al completamento della transazione.</span><span class="sxs-lookup"><span data-stu-id="ac289-114">This component is created by the CRM infrastructure at the completion of the transaction.</span></span> <span data-ttu-id="ac289-115">Implementa un'interfaccia definita mediante la quale l'infrastruttura CRM può superare le notifiche di completamento delle transazioni e i record di log scritti in precedenza dal ruolo di lavoro CRM.</span><span class="sxs-lookup"><span data-stu-id="ac289-115">It implements a defined interface by which the CRM infrastructure can pass on notifications of transaction completion and the log records that were previously written by the CRM Worker.</span></span>

<span data-ttu-id="ac289-116">Un CRM COM+ fornisce l'atomicità con le notifiche transazionali e la durabilità con il log CRM, ma non fornisce l'isolamento delle risorse.</span><span class="sxs-lookup"><span data-stu-id="ac289-116">A COM+ CRM provides atomicity with transactional notifications, and durability with the CRM log, but does not provide isolation of resources.</span></span> <span data-ttu-id="ac289-117">In un ambiente con multithreading, è responsabilità dello sviluppatore di CRM garantire che l'accesso alle risorse, da più ruoli di lavoro CRM o da applicazioni esterne, venga serializzato in una transazione.</span><span class="sxs-lookup"><span data-stu-id="ac289-117">In a multithreaded environment, it is the responsibility of the CRM developer to ensure that access to resources, either by multiple CRM Workers or external applications, is serialized while in a transaction.</span></span>

<span data-ttu-id="ac289-118">Dopo che la transazione ha superato la fase di preparazione, è possibile eseguire simultaneamente il compensatore CRM e i ruoli di lavoro CRM.</span><span class="sxs-lookup"><span data-stu-id="ac289-118">After the transaction has passed the prepare phase, the CRM Compensator and CRM Workers can be running concurrently.</span></span> <span data-ttu-id="ac289-119">È possibile che il componente Worker CRM di una nuova transazione diventi attivo mentre il compensatore CRM di una transazione precedente sta ancora elaborando la transazione precedente.</span><span class="sxs-lookup"><span data-stu-id="ac289-119">It is possible for the CRM Worker component of a new transaction to become active while the CRM Compensator of a previous transaction is still processing the previous transaction.</span></span>

<span data-ttu-id="ac289-120">Durante gli errori prima del ripristino dell'applicazione server CRM, una transazione interrotta dovrebbe essere considerata attiva e non completata.</span><span class="sxs-lookup"><span data-stu-id="ac289-120">During failures prior to recovery of the CRM server application, an interrupted transaction should be considered active and not complete.</span></span> <span data-ttu-id="ac289-121">Non dovrebbe essere possibile per i processi esterni accedere alle risorse che sono state modificate da questa particolare transazione prima del ripristino del processo del server CRM.</span><span class="sxs-lookup"><span data-stu-id="ac289-121">It should not be possible for external processes to access the resources that were being changed by this particular transaction prior to recovery of the CRM server process.</span></span>

<span data-ttu-id="ac289-122">Il CRM definisce tre tipi di interfaccia per le funzioni CRM di base:</span><span class="sxs-lookup"><span data-stu-id="ac289-122">The CRM defines three interface types for the basic CRM functions:</span></span>

-   <span data-ttu-id="ac289-123">[**ICrmLogControl**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmlogcontrol) viene implementato nel Clerk CRM e viene usato dal ruolo di lavoro CRM per scrivere record di log nel log.</span><span class="sxs-lookup"><span data-stu-id="ac289-123">[**ICrmLogControl**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmlogcontrol) is implemented on the CRM clerk and is used by the CRM Worker to write log records to the log.</span></span> <span data-ttu-id="ac289-124">Può anche essere usato dal compensatore CRM.</span><span class="sxs-lookup"><span data-stu-id="ac289-124">It can also used by the CRM Compensator.</span></span>
-   <span data-ttu-id="ac289-125">[**ICrmCompensator**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensator) e [**ICrmCompensatorVariants**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensatorvariants) sono implementati nella classe Compensator CRM.</span><span class="sxs-lookup"><span data-stu-id="ac289-125">[**ICrmCompensator**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensator) and [**ICrmCompensatorVariants**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensatorvariants) are implemented on the CRM Compensator.</span></span> <span data-ttu-id="ac289-126">Queste interfacce vengono utilizzate per recapitare le notifiche dei risultati delle transazioni e i record di log associati al compensatore CRM.</span><span class="sxs-lookup"><span data-stu-id="ac289-126">These interfaces are used to deliver transaction outcome notifications and their associated log records to the CRM Compensator.</span></span> <span data-ttu-id="ac289-127">Il compensatore CRM, in genere, implementa solo una di queste interfacce, a seconda che siano necessari record di log non strutturati o strutturati.</span><span class="sxs-lookup"><span data-stu-id="ac289-127">Normally, the CRM Compensator would implement only one of these interfaces, depending on whether it required unstructured or structured log records.</span></span> <span data-ttu-id="ac289-128">I *record di log strutturati* sono quelli compilati come una raccolta di varianti e vengono in genere utilizzati da Microsoft Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="ac289-128">*Structured log records* are those that are built up as a collection of Variants and are typically for use by Microsoft Visual Basic.</span></span> <span data-ttu-id="ac289-129">I *record di log non strutturati* sono solo un buffer di byte e vengono in genere utilizzati da Microsoft Visual C++.</span><span class="sxs-lookup"><span data-stu-id="ac289-129">*Unstructured log records* are just a buffer of bytes and are typically for use by Microsoft Visual C++.</span></span> <span data-ttu-id="ac289-130">Un compensatore CRM può implementare entrambe le interfacce del compensatore; Tuttavia, per recapitare i record di log viene usato solo uno alla volta.</span><span class="sxs-lookup"><span data-stu-id="ac289-130">A CRM Compensator can implement both of the compensator interfaces; however, only one at a time is used to deliver log records.</span></span>
-   <span data-ttu-id="ac289-131">Le interfacce di monitoraggio di COM+ CRM vengono utilizzate per il monitoraggio dei dispongono all'interno di una particolare applicazione server.</span><span class="sxs-lookup"><span data-stu-id="ac289-131">The COM+ CRM monitoring interfaces are used for monitoring the CRMs within a particular server application.</span></span> <span data-ttu-id="ac289-132">Per informazioni dettagliate sulle interfacce di monitoraggio, vedere [interfacce di monitoraggio com+ CRM](com--crm-monitoring-interfaces.md).</span><span class="sxs-lookup"><span data-stu-id="ac289-132">For detailed information about the monitoring interfaces, see [COM+ CRM Monitoring Interfaces](com--crm-monitoring-interfaces.md).</span></span>

<span data-ttu-id="ac289-133">Negli argomenti seguenti di questa sezione vengono forniti ulteriori dettagli sul servizio COM+ CRM:</span><span class="sxs-lookup"><span data-stu-id="ac289-133">The following topics in this section provide more detail about the COM+ CRM service:</span></span>

-   [<span data-ttu-id="ac289-134">Considerazioni sulla sicurezza di COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="ac289-134">COM+ CRM Security Considerations</span></span>](com--crm-security-considerations.md)
-   [<span data-ttu-id="ac289-135">Processo operativo COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="ac289-135">COM+ CRM Operating Process</span></span>](com--crm-operating-process.md)
-   [<span data-ttu-id="ac289-136">Avvio e ripristino di COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="ac289-136">COM+ CRM Startup and Recovery</span></span>](com--crm-startup-and-recovery.md)
-   [<span data-ttu-id="ac289-137">Utilizzo di COM+ CRM in un ambiente cluster</span><span class="sxs-lookup"><span data-stu-id="ac289-137">Using the COM+ CRM in a Cluster Environment</span></span>](using-the-com--crm-in-a-cluster-environment.md)
-   [<span data-ttu-id="ac289-138">Gestione degli errori in COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="ac289-138">Error Handling in the COM+ CRM</span></span>](error-handling-in-the-com--crm.md)
-   [<span data-ttu-id="ac289-139">Impostazioni del registro di sistema COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="ac289-139">COM+ CRM Registry Settings</span></span>](com--crm-registry-settings.md)
-   [<span data-ttu-id="ac289-140">Risoluzione dei problemi relativi a COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="ac289-140">Troubleshooting the COM+ CRM</span></span>](troubleshooting-the-com--crm.md)
-   [<span data-ttu-id="ac289-141">Suggerimenti di progettazione per lo sviluppo di un CRM COM+</span><span class="sxs-lookup"><span data-stu-id="ac289-141">Design Suggestions for Developing a COM+ CRM</span></span>](design-suggestions-for-developing-a-com--crm.md)
-   [<span data-ttu-id="ac289-142">Interfacce di monitoraggio COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="ac289-142">COM+ CRM Monitoring Interfaces</span></span>](com--crm-monitoring-interfaces.md)
-   [<span data-ttu-id="ac289-143">Interfacce COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="ac289-143">COM+ CRM Interfaces</span></span>](com--crm-interfaces.md)

## <a name="related-topics"></a><span data-ttu-id="ac289-144">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="ac289-144">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ac289-145">Attività di Gestione risorse di compensazione COM+</span><span class="sxs-lookup"><span data-stu-id="ac289-145">COM+ Compensating Resource Manager Tasks</span></span>](com--compensating-resource-manager-tasks.md)
</dt> </dl>

 

 



