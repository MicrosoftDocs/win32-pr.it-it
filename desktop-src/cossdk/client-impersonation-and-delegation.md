---
description: In alcune circostanze, un'applicazione server deve presentare un'identità dei client alle risorse a cui accede per conto dei client, in genere per consentire l'esecuzione di controlli di accesso o di autenticazione con l'identità dei client.
ms.assetid: fd75eb54-eefe-411f-a7aa-0bc8628f8778
title: Rappresentazione e delega client
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7557dcde4cadf559dd8e116cf4e7bece4221aaae
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106305018"
---
# <a name="client-impersonation-and-delegation"></a><span data-ttu-id="01001-103">Rappresentazione e delega client</span><span class="sxs-lookup"><span data-stu-id="01001-103">Client Impersonation and Delegation</span></span>

<span data-ttu-id="01001-104">In alcune circostanze, un'applicazione server deve presentare l'identità di un client alle risorse a cui accede per conto del client, in genere per eseguire verifiche di accesso o autenticazione per l'identità del client.</span><span class="sxs-lookup"><span data-stu-id="01001-104">In some circumstances, a server application needs to present a client's identity to resources it accesses on the client's behalf, usually to cause access checks or authentication to be performed against the client's identity.</span></span> <span data-ttu-id="01001-105">In un certo senso, il server può agire sotto l'identità del client, un'azione detta rappresentazione del client.</span><span class="sxs-lookup"><span data-stu-id="01001-105">To a certain extent, the server can act under the client's identity—an action referred to as impersonating the client.</span></span>

<span data-ttu-id="01001-106">La *rappresentazione* è la capacità di esecuzione di un thread in un contesto di sicurezza diverso da quello del processo proprietario del thread.</span><span class="sxs-lookup"><span data-stu-id="01001-106">*Impersonation* is the ability of a thread to execute in a security context different from that of the process owning the thread.</span></span> <span data-ttu-id="01001-107">Il thread del server utilizza un token di accesso che rappresenta le credenziali del client e, con questo, può accedere alle risorse a cui il client può accedere.</span><span class="sxs-lookup"><span data-stu-id="01001-107">The server thread uses an access token representing the client's credentials, and with this, it can access resources that the client can access.</span></span>

<span data-ttu-id="01001-108">L'utilizzo della rappresentazione garantisce che il server sia in grado di eseguire esattamente le operazioni che il client può eseguire.</span><span class="sxs-lookup"><span data-stu-id="01001-108">Using impersonation ensures that the server can do precisely what the client can do.</span></span> <span data-ttu-id="01001-109">L'accesso alle risorse può essere limitato o espanso, a seconda di ciò che il client è autorizzato a eseguire.</span><span class="sxs-lookup"><span data-stu-id="01001-109">Access to resources may be either restricted or expanded, depending on what the client has permission to do.</span></span>

<span data-ttu-id="01001-110">È possibile scegliere di fare in modo che un server rappresenti un client durante la connessione a un database in modo che il database possa autenticare e autorizzare il client per se stesso.</span><span class="sxs-lookup"><span data-stu-id="01001-110">You might choose to have a server impersonate a client when connecting to a database so that the database can authenticate and authorize the client for itself.</span></span> <span data-ttu-id="01001-111">In alternativa, se l'applicazione accede ai file protetti con un descrittore di sicurezza e per consentire al client di ottenere l'accesso autorizzato alle informazioni contenute in questi file, l'applicazione può rappresentare il client prima di accedere ai file.</span><span class="sxs-lookup"><span data-stu-id="01001-111">Or, if your application accesses files that are protected with a security descriptor and to enable the client to obtain authorized access to information in these files, the application can impersonate the client before accessing the files.</span></span>

## <a name="how-to-implement-impersonation"></a><span data-ttu-id="01001-112">Come implementare la rappresentazione</span><span class="sxs-lookup"><span data-stu-id="01001-112">How to Implement Impersonation</span></span>

<span data-ttu-id="01001-113">La rappresentazione richiede la partecipazione da parte del client e del server (e, in alcuni casi, degli amministratori di sistema).</span><span class="sxs-lookup"><span data-stu-id="01001-113">Impersonation requires participation by both client and server (and, in some cases, system administrators).</span></span> <span data-ttu-id="01001-114">Il client deve indicare la volontà di consentire al server di usare la propria identità e il server deve presupporre in modo esplicito l'identità del client a livello di codice.</span><span class="sxs-lookup"><span data-stu-id="01001-114">The client must indicate its willingness to let the server use its identity, and the server must explicitly assume the client's identity programmatically.</span></span> <span data-ttu-id="01001-115">Per informazioni dettagliate, vedere gli argomenti [requisiti lato client per la rappresentazione](client-side-requirements-for-impersonation.md) e [requisiti lato server per la rappresentazione](server-side-requirements-for-impersonation.md).</span><span class="sxs-lookup"><span data-stu-id="01001-115">For details, see the topics [Client-Side Requirements for Impersonation](client-side-requirements-for-impersonation.md) and [Server-Side Requirements for Impersonation](server-side-requirements-for-impersonation.md).</span></span>

## <a name="administrative-requirements-for-delegate-level-impersonation"></a><span data-ttu-id="01001-116">Requisiti amministrativi per la rappresentazione Delegate-Level</span><span class="sxs-lookup"><span data-stu-id="01001-116">Administrative Requirements for Delegate-Level Impersonation</span></span>

<span data-ttu-id="01001-117">Per utilizzare in modo efficace la forma di rappresentazione più potente, ovvero la *delega*, ovvero la rappresentazione dei client in rete, gli account utente client e server devono essere configurati correttamente nel servizio Active Directory per supportarlo (oltre all'autorità che concede l'autorizzazione per la rappresentazione a livello di delega), come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="01001-117">To effectively use the most powerful form of impersonation, *delegation*, which is the impersonation of clients over the network, the client and server user accounts must be properly configured in the Active Directory Service to support it (in addition to the client granting authority to do delegate-level impersonation), as follows:</span></span>

-   <span data-ttu-id="01001-118">L'identità del server deve essere contrassegnata come "trusted per la delega" nel servizio Active Directory.</span><span class="sxs-lookup"><span data-stu-id="01001-118">The server identity must be marked as "Trusted for delegation" in the Active Directory Service.</span></span>
-   <span data-ttu-id="01001-119">L'identità del client non deve essere contrassegnata come "l'account è sensibile e non può essere delegato" nel servizio Active Directory.</span><span class="sxs-lookup"><span data-stu-id="01001-119">The client identity must not be marked as "Account is sensitive and cannot be delegated" in the Active Directory Service.</span></span>

<span data-ttu-id="01001-120">Queste funzionalità di configurazione offrono all'amministratore di dominio un elevato livello di controllo sulla delega, che è auspicabile, data la quantità di attendibilità (e di conseguenza il rischio per la sicurezza).</span><span class="sxs-lookup"><span data-stu-id="01001-120">These configuration features give the domain administrator a high degree of control over delegation, which is desirable, given how much trust (and hence security risk) is involved.</span></span> <span data-ttu-id="01001-121">Per ulteriori dettagli sulla delega, vedere [delega e rappresentazione](/windows/desktop/com/delegation-and-impersonation).</span><span class="sxs-lookup"><span data-stu-id="01001-121">For more detail about delegation, see [Delegation and Impersonation](/windows/desktop/com/delegation-and-impersonation).</span></span>

## <a name="cloaking"></a><span data-ttu-id="01001-122">Cloaking</span><span class="sxs-lookup"><span data-stu-id="01001-122">Cloaking</span></span>

<span data-ttu-id="01001-123">Insieme all'autorità un client concede un server attraverso il livello di rappresentazione, la funzionalità di mascheramento del server determina in gran parte il comportamento della rappresentazione.</span><span class="sxs-lookup"><span data-stu-id="01001-123">Along with the authority a client grants a server through the impersonation level, the server's cloaking capability largely determines how impersonation will behave.</span></span> <span data-ttu-id="01001-124">Il cloaking influiscono sull'identità effettivamente presentata dal server quando effettua chiamate per conto dell'utente, ovvero il proprio o il client.</span><span class="sxs-lookup"><span data-stu-id="01001-124">Cloaking affects what identity is actually presented by the server when it makes calls on the client's behalf—its own or the client's.</span></span> <span data-ttu-id="01001-125">Per informazioni dettagliate, vedere [mascheramento](cloaking.md).</span><span class="sxs-lookup"><span data-stu-id="01001-125">For details, see [Cloaking](cloaking.md).</span></span>

## <a name="performance-implications"></a><span data-ttu-id="01001-126">Implicazioni per le prestazioni</span><span class="sxs-lookup"><span data-stu-id="01001-126">Performance Implications</span></span>

<span data-ttu-id="01001-127">La rappresentazione può influire in modo significativo sulle prestazioni e sulla scalabilità.</span><span class="sxs-lookup"><span data-stu-id="01001-127">Impersonation can significantly affect performance and scaling.</span></span> <span data-ttu-id="01001-128">È in genere più oneroso rappresentare un client in una chiamata anziché eseguire direttamente la chiamata.</span><span class="sxs-lookup"><span data-stu-id="01001-128">It is generally more expensive to impersonate a client on a call than to make the call directly.</span></span> <span data-ttu-id="01001-129">Di seguito sono riportati alcuni dei problemi da considerare:</span><span class="sxs-lookup"><span data-stu-id="01001-129">Following are some of the issues to consider:</span></span>

-   <span data-ttu-id="01001-130">Sovraccarico computazionale del passaggio dell'identità in modelli complicati, in particolare se è abilitato il mascheramento dinamico.</span><span class="sxs-lookup"><span data-stu-id="01001-130">The computational overhead of passing around identity in complicated patterns, particularly if dynamic cloaking is enabled.</span></span>
-   <span data-ttu-id="01001-131">Complessità generale dell'applicazione del controllo di sicurezza ridondante in numerose posizioni, anziché solo centralmente nel livello intermedio.</span><span class="sxs-lookup"><span data-stu-id="01001-131">The general complexity of enforcing redundant security checking in numerous places, instead of just centrally in the middle tier.</span></span>
-   <span data-ttu-id="01001-132">Le risorse, ad esempio le connessioni al database, quando si apre la rappresentazione di un client, non possono essere riutilizzate in più client, un ostacolo molto grande per la scalabilità.</span><span class="sxs-lookup"><span data-stu-id="01001-132">Resources such as database connections, when opened impersonating a client, cannot be reused across multiple clients—a very large roadblock to scaling well.</span></span>

<span data-ttu-id="01001-133">A volte l'unica soluzione efficace per un problema consiste nell'usare la rappresentazione, ma questa decisione deve essere ponderata con attenzione.</span><span class="sxs-lookup"><span data-stu-id="01001-133">Sometimes the only effective solution to a problem is to use impersonation, but this decision should be carefully weighed.</span></span> <span data-ttu-id="01001-134">Per ulteriori informazioni su questi problemi, vedere [sicurezza delle applicazioni](multi-tier-application-security.md)a più livelli.</span><span class="sxs-lookup"><span data-stu-id="01001-134">For a further discussion of these issues, see [Multi-Tier Application Security](multi-tier-application-security.md).</span></span>

## <a name="queued-components"></a><span data-ttu-id="01001-135">Componenti in coda</span><span class="sxs-lookup"><span data-stu-id="01001-135">Queued Components</span></span>

<span data-ttu-id="01001-136">I [componenti in coda](com--queued-components.md) non supportano la rappresentazione.</span><span class="sxs-lookup"><span data-stu-id="01001-136">[Queued components](com--queued-components.md) do not support impersonation.</span></span> <span data-ttu-id="01001-137">Quando un client effettua una chiamata a un oggetto in coda, la chiamata viene effettivamente effettuata al registratore, che lo inserisce come parte di un messaggio al server.</span><span class="sxs-lookup"><span data-stu-id="01001-137">When a client makes a call to a queued object, the call is actually made to the recorder, which packages it as part of a message to the server.</span></span> <span data-ttu-id="01001-138">Il listener legge quindi il messaggio dalla coda e lo passa al lettore, che richiama il componente server effettivo ed effettua la stessa chiamata al metodo.</span><span class="sxs-lookup"><span data-stu-id="01001-138">The listener then reads the message from the queue and passes it to the player, which invokes the actual server component and makes the same method call.</span></span> <span data-ttu-id="01001-139">Di conseguenza, quando il server riceve la chiamata, il token client originale non è disponibile tramite la rappresentazione.</span><span class="sxs-lookup"><span data-stu-id="01001-139">As such, when the server receives the call, the original client token is unavailable via impersonation.</span></span> <span data-ttu-id="01001-140">La protezione basata sui ruoli si applica comunque e la sicurezza a livello di codice tramite l'interfaccia [**ISecurityCallContext**](/windows/desktop/api/ComSvcs/nn-comsvcs-isecuritycallcontext) funzionerà.</span><span class="sxs-lookup"><span data-stu-id="01001-140">Role-based security still applies, however, and programmatic security using the [**ISecurityCallContext**](/windows/desktop/api/ComSvcs/nn-comsvcs-isecuritycallcontext) interface will work.</span></span> <span data-ttu-id="01001-141">Per informazioni dettagliate, vedere [sicurezza dei componenti in coda](queued-components-security.md).</span><span class="sxs-lookup"><span data-stu-id="01001-141">For details, see [Queued Components Security](queued-components-security.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="01001-142">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="01001-142">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="01001-143">Autenticazione client</span><span class="sxs-lookup"><span data-stu-id="01001-143">Client Authentication</span></span>](client-authentication.md)
</dt> <dt>

[<span data-ttu-id="01001-144">Sicurezza delle applicazioni di libreria</span><span class="sxs-lookup"><span data-stu-id="01001-144">Library Application Security</span></span>](library-application-security.md)
</dt> <dt>

[<span data-ttu-id="01001-145">Sicurezza delle applicazioni a più livelli</span><span class="sxs-lookup"><span data-stu-id="01001-145">Multi-Tier Application Security</span></span>](multi-tier-application-security.md)
</dt> <dt>

[<span data-ttu-id="01001-146">Sicurezza del componente a livello di codice</span><span class="sxs-lookup"><span data-stu-id="01001-146">Programmatic Component Security</span></span>](programmatic-component-security.md)
</dt> <dt>

[<span data-ttu-id="01001-147">Amministrazione della sicurezza basata sui ruoli</span><span class="sxs-lookup"><span data-stu-id="01001-147">Role-Based Security Administration</span></span>](role-based-security-administration.md)
</dt> <dt>

[<span data-ttu-id="01001-148">Uso dei criteri di restrizione software in COM+</span><span class="sxs-lookup"><span data-stu-id="01001-148">Using the Software Restriction Policy in COM+</span></span>](using-the-software-restriction-policy-in-com-.md)
</dt> </dl>

 

 
