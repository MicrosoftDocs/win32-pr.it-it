---
description: Informazioni su WASAPI
ms.assetid: 452b9725-b0b9-4888-bbb5-a23e0067e840
title: Informazioni su WASAPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f869319f3100b797e58c7b43597869c9767ac037
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103966174"
---
# <a name="about-wasapi"></a><span data-ttu-id="d91a3-103">Informazioni su WASAPI</span><span class="sxs-lookup"><span data-stu-id="d91a3-103">About WASAPI</span></span>

<span data-ttu-id="d91a3-104">L'API di sessione audio (WASAPI) di Windows consente alle applicazioni client di gestire il flusso di dati audio tra l'applicazione e un [dispositivo dell'endpoint audio](audio-endpoint-devices.md).</span><span class="sxs-lookup"><span data-stu-id="d91a3-104">The Windows Audio Session API (WASAPI) enables client applications to manage the flow of audio data between the application and an [audio endpoint device](audio-endpoint-devices.md).</span></span>

<span data-ttu-id="d91a3-105">I file di intestazione Audioclient. h e Audiopolicy. h definiscono le interfacce WASAPI.</span><span class="sxs-lookup"><span data-stu-id="d91a3-105">Header files Audioclient.h and Audiopolicy.h define the WASAPI interfaces.</span></span>

<span data-ttu-id="d91a3-106">Ogni flusso audio è un membro di una [sessione audio](audio-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="d91a3-106">Every audio stream is a member of an [audio session](audio-sessions.md).</span></span> <span data-ttu-id="d91a3-107">Tramite l'astrazione della sessione, un client WASAPI può identificare un flusso audio come membro di un gruppo di flussi audio correlati.</span><span class="sxs-lookup"><span data-stu-id="d91a3-107">Through the session abstraction, a WASAPI client can identify an audio stream as a member of a group of related audio streams.</span></span> <span data-ttu-id="d91a3-108">Il sistema è in grado di gestire tutti i flussi nella sessione come una singola unità.</span><span class="sxs-lookup"><span data-stu-id="d91a3-108">The system can manage all of the streams in the session as a single unit.</span></span>

<span data-ttu-id="d91a3-109">Il motore audio è il [componente audio in modalità utente](user-mode-audio-components.md) tramite il quale le applicazioni condividono l'accesso a un dispositivo endpoint audio.</span><span class="sxs-lookup"><span data-stu-id="d91a3-109">The audio engine is the [user-mode audio component](user-mode-audio-components.md) through which applications share access to an audio endpoint device.</span></span> <span data-ttu-id="d91a3-110">Il motore audio trasporta i dati audio tra un buffer dell'endpoint e un dispositivo endpoint.</span><span class="sxs-lookup"><span data-stu-id="d91a3-110">The audio engine transports audio data between an endpoint buffer and an endpoint device.</span></span> <span data-ttu-id="d91a3-111">Per riprodurre un flusso audio tramite un dispositivo endpoint di rendering, un'applicazione scrive periodicamente i dati audio in un buffer dell'endpoint di rendering.</span><span class="sxs-lookup"><span data-stu-id="d91a3-111">To play an audio stream through a rendering endpoint device, an application periodically writes audio data to a rendering endpoint buffer.</span></span> <span data-ttu-id="d91a3-112">Il motore audio combina i flussi delle diverse applicazioni.</span><span class="sxs-lookup"><span data-stu-id="d91a3-112">The audio engine mixes the streams from the various applications.</span></span> <span data-ttu-id="d91a3-113">Per registrare un flusso audio da un dispositivo dell'endpoint di acquisizione, un'applicazione legge periodicamente i dati audio da un buffer dell'endpoint di acquisizione.</span><span class="sxs-lookup"><span data-stu-id="d91a3-113">To record an audio stream from a capture endpoint device, an application periodically reads audio data from a capture endpoint buffer.</span></span>

<span data-ttu-id="d91a3-114">WASAPI è costituito da diverse interfacce.</span><span class="sxs-lookup"><span data-stu-id="d91a3-114">WASAPI consists of several interfaces.</span></span> <span data-ttu-id="d91a3-115">Il primo è l'interfaccia [**IAudioClient**](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclient) .</span><span class="sxs-lookup"><span data-stu-id="d91a3-115">The first of these is the [**IAudioClient**](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclient) interface.</span></span> <span data-ttu-id="d91a3-116">Per accedere alle interfacce WASAPI, un client ottiene innanzitutto un riferimento all'interfaccia **IAudioClient** di un dispositivo endpoint audio chiamando il metodo [**IMMDevice:: Activate**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-activate) con il parametro *IID* impostato su **REFIID** IID \_ IAudioClient.</span><span class="sxs-lookup"><span data-stu-id="d91a3-116">To access the WASAPI interfaces, a client first obtains a reference to the **IAudioClient** interface of an audio endpoint device by calling the [**IMMDevice::Activate**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-activate) method with parameter *iid* set to **REFIID** IID\_IAudioClient.</span></span> <span data-ttu-id="d91a3-117">Il client chiama il metodo [**IAudioClient:: Initialize**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-initialize) per inizializzare un flusso in un dispositivo endpoint.</span><span class="sxs-lookup"><span data-stu-id="d91a3-117">The client calls the [**IAudioClient::Initialize**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-initialize) method to initialize a stream on an endpoint device.</span></span> <span data-ttu-id="d91a3-118">Dopo l'inizializzazione di un flusso, il client può ottenere riferimenti alle altre interfacce WASAPI chiamando il metodo [**IAudioClient:: GetService**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-getservice) .</span><span class="sxs-lookup"><span data-stu-id="d91a3-118">After initializing a stream, the client can obtain references to the other WASAPI interfaces by calling the [**IAudioClient::GetService**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-getservice) method.</span></span>

<span data-ttu-id="d91a3-119">Molti dei metodi in WASAPI restituiscono il codice di errore AUDCLNT \_ E \_ dispositivo \_ invalidato se il dispositivo dell'endpoint audio che un'applicazione client sta usando diventa non valido.</span><span class="sxs-lookup"><span data-stu-id="d91a3-119">Many of the methods in WASAPI return error code AUDCLNT\_E\_DEVICE\_INVALIDATED if the audio endpoint device that a client application is using becomes invalid.</span></span> <span data-ttu-id="d91a3-120">Spesso l'applicazione può risolvere questo errore.</span><span class="sxs-lookup"><span data-stu-id="d91a3-120">Frequently, the application can recover from this error.</span></span> <span data-ttu-id="d91a3-121">Per ulteriori informazioni, vedere il [ripristino da un errore di Invalid-Device](recovering-from-an-invalid-device-error.md).</span><span class="sxs-lookup"><span data-stu-id="d91a3-121">For more information, see [Recovering from an Invalid-Device Error](recovering-from-an-invalid-device-error.md).</span></span>

<span data-ttu-id="d91a3-122">WASAPI implementa le interfacce seguenti.</span><span class="sxs-lookup"><span data-stu-id="d91a3-122">WASAPI implements the following interfaces.</span></span>



| <span data-ttu-id="d91a3-123">Interfaccia</span><span class="sxs-lookup"><span data-stu-id="d91a3-123">Interface</span></span>                                            | <span data-ttu-id="d91a3-124">Descrizione</span><span class="sxs-lookup"><span data-stu-id="d91a3-124">Description</span></span>                                                                                                                                                     |
|------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="d91a3-125">**IAudioCaptureClient**</span><span class="sxs-lookup"><span data-stu-id="d91a3-125">**IAudioCaptureClient**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudiocaptureclient)   | <span data-ttu-id="d91a3-126">Consente a un client di leggere i dati di input da un buffer dell'endpoint di acquisizione.</span><span class="sxs-lookup"><span data-stu-id="d91a3-126">Enables a client to read input data from a capture endpoint buffer.</span></span>                                                                                             |
| [<span data-ttu-id="d91a3-127">**IAudioClient**</span><span class="sxs-lookup"><span data-stu-id="d91a3-127">**IAudioClient**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclient)                 | <span data-ttu-id="d91a3-128">Consente a un client di creare e inizializzare un flusso audio tra un'applicazione audio e il motore audio o il buffer hardware di un dispositivo endpoint audio.</span><span class="sxs-lookup"><span data-stu-id="d91a3-128">Enables a client to create and initialize an audio stream between an audio application and the audio engine or the hardware buffer of an audio endpoint device.</span></span> |
| [<span data-ttu-id="d91a3-129">**IAudioClock**</span><span class="sxs-lookup"><span data-stu-id="d91a3-129">**IAudioClock**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclock)                   | <span data-ttu-id="d91a3-130">Consente a un client di monitorare la velocità dei dati di un flusso e la posizione corrente nel flusso.</span><span class="sxs-lookup"><span data-stu-id="d91a3-130">Enables a client to monitor a stream's data rate and the current position in the stream.</span></span>                                                                        |
| [<span data-ttu-id="d91a3-131">**IAudioRenderClient**</span><span class="sxs-lookup"><span data-stu-id="d91a3-131">**IAudioRenderClient**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudiorenderclient)     | <span data-ttu-id="d91a3-132">Consente a un client di scrivere i dati di output in un buffer dell'endpoint di rendering.</span><span class="sxs-lookup"><span data-stu-id="d91a3-132">Enables a client to write output data to a rendering endpoint buffer.</span></span>                                                                                           |
| [<span data-ttu-id="d91a3-133">**IAudioSessionControl**</span><span class="sxs-lookup"><span data-stu-id="d91a3-133">**IAudioSessionControl**</span></span>](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessioncontrol) | <span data-ttu-id="d91a3-134">Consente a un client di configurare i parametri di controllo per una sessione audio e di monitorare gli eventi nella sessione.</span><span class="sxs-lookup"><span data-stu-id="d91a3-134">Enables a client to configure the control parameters for an audio session and to monitor events in the session.</span></span>                                                 |
| [<span data-ttu-id="d91a3-135">**IAudioSessionManager**</span><span class="sxs-lookup"><span data-stu-id="d91a3-135">**IAudioSessionManager**</span></span>](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessionmanager) | <span data-ttu-id="d91a3-136">Consente a un client di accedere ai controlli di sessione e ai controlli volume per le sessioni audio sia tra processi che specifiche del processo.</span><span class="sxs-lookup"><span data-stu-id="d91a3-136">Enables a client to access the session controls and volume controls for both cross-process and process-specific audio sessions.</span></span>                                 |
| [<span data-ttu-id="d91a3-137">**IAudioStreamVolume**</span><span class="sxs-lookup"><span data-stu-id="d91a3-137">**IAudioStreamVolume**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudiostreamvolume)     | <span data-ttu-id="d91a3-138">Consente a un client di controllare e monitorare i livelli di volume per tutti i canali in un flusso audio.</span><span class="sxs-lookup"><span data-stu-id="d91a3-138">Enables a client to control and monitor the volume levels for all of the channels in an audio stream.</span></span>                                                           |
| [<span data-ttu-id="d91a3-139">**IChannelAudioVolume**</span><span class="sxs-lookup"><span data-stu-id="d91a3-139">**IChannelAudioVolume**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-ichannelaudiovolume)   | <span data-ttu-id="d91a3-140">Consente a un client di controllare i livelli di volume per tutti i canali della sessione audio a cui appartiene il flusso.</span><span class="sxs-lookup"><span data-stu-id="d91a3-140">Enables a client to control the volume levels for all of the channels in the audio session that the stream belongs to.</span></span>                                          |
| [<span data-ttu-id="d91a3-141">**ISimpleAudioVolume**</span><span class="sxs-lookup"><span data-stu-id="d91a3-141">**ISimpleAudioVolume**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-isimpleaudiovolume)     | <span data-ttu-id="d91a3-142">Consente a un client di controllare il livello del volume master di una sessione audio.</span><span class="sxs-lookup"><span data-stu-id="d91a3-142">Enables a client to control the master volume level of an audio session.</span></span>                                                                                        |



 

<span data-ttu-id="d91a3-143">I client WASAPI che richiedono la notifica di eventi correlati alla sessione devono implementare la seguente interfaccia.</span><span class="sxs-lookup"><span data-stu-id="d91a3-143">WASAPI clients that require notification of session-related events should implement the following interface.</span></span>



| <span data-ttu-id="d91a3-144">Interfaccia</span><span class="sxs-lookup"><span data-stu-id="d91a3-144">Interface</span></span>                                          | <span data-ttu-id="d91a3-145">Descrizione</span><span class="sxs-lookup"><span data-stu-id="d91a3-145">Description</span></span>                                                                                                            |
|----------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="d91a3-146">**IAudioSessionEvents**</span><span class="sxs-lookup"><span data-stu-id="d91a3-146">**IAudioSessionEvents**</span></span>](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessionevents) | <span data-ttu-id="d91a3-147">Fornisce notifiche di eventi correlati alla sessione, ad esempio modifiche a livello di volume, nome visualizzato e stato sessione.</span><span class="sxs-lookup"><span data-stu-id="d91a3-147">Provides notifications of session-related events such as changes in the volume level, display name, and session state.</span></span> |



 

## <a name="related-topics"></a><span data-ttu-id="d91a3-148">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="d91a3-148">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d91a3-149">Gestione dei flussi</span><span class="sxs-lookup"><span data-stu-id="d91a3-149">Stream Management</span></span>](stream-management.md)
</dt> <dt>

[<span data-ttu-id="d91a3-150">**Guida di riferimento alla programmazione**</span><span class="sxs-lookup"><span data-stu-id="d91a3-150">**Programming Reference**</span></span>](programming-reference.md)
</dt> </dl>

 

 



