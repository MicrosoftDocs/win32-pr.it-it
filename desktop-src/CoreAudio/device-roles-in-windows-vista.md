---
description: Utilizzo dei ruoli del dispositivo
ms.assetid: 3b2cb1fe-0f11-4509-a6f3-513d2755cd29
title: Utilizzo dei ruoli del dispositivo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c21ea667a6974634c1f9f0657dd02c13a621641c
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103965895"
---
# <a name="working-with-device-roles"></a><span data-ttu-id="a4eb9-103">Utilizzo dei ruoli del dispositivo</span><span class="sxs-lookup"><span data-stu-id="a4eb9-103">Working with Device Roles</span></span>

<span data-ttu-id="a4eb9-104">L' [API MMDevice](mmdevice-api.md) supporta i ruoli del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-104">The [MMDevice API](mmdevice-api.md) supports device roles.</span></span> <span data-ttu-id="a4eb9-105">L'enumerazione [**ERole**](/windows/win32/api/mmdeviceapi/ne-mmdeviceapi-erole) definisce i ruoli del dispositivo supportati dall'API MMDevice.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-105">The [**ERole**](/windows/win32/api/mmdeviceapi/ne-mmdeviceapi-erole) enumeration defines the device roles that are supported by the MMDevice API.</span></span>

> [!Note]  
> <span data-ttu-id="a4eb9-106">Sebbene l' [API MMDevice](mmdevice-api.md) supporti i ruoli del dispositivo, l'interfaccia utente in Windows Vista non implementa il supporto per questa funzionalità.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-106">Although the [MMDevice API](mmdevice-api.md) supports device roles, the user interface in Windows Vista does not implement support for this feature.</span></span>

 

<span data-ttu-id="a4eb9-107">Un'applicazione può usare l'API MMDevice per supportare i [ruoli del dispositivo](device-roles.md) tramite i metodi [**IMMDeviceEnumerator:: GetDefaultAudioEndpoint**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdefaultaudioendpoint) e [**IMMNotificationClient:: OnDefaultDeviceChanged**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immnotificationclient-ondefaultdevicechanged) .</span><span class="sxs-lookup"><span data-stu-id="a4eb9-107">An application can use MMDevice API to support [device roles](device-roles.md) through the [**IMMDeviceEnumerator::GetDefaultAudioEndpoint**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdefaultaudioendpoint) and [**IMMNotificationClient::OnDefaultDeviceChanged**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immnotificationclient-ondefaultdevicechanged) methods.</span></span> <span data-ttu-id="a4eb9-108">Tuttavia, l'interfaccia utente di Windows Vista non supporta l'assegnazione di singoli ruoli a dispositivi diversi.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-108">However, the user interface in Windows Vista does not support assignment of individual roles to different devices.</span></span> <span data-ttu-id="a4eb9-109">In Windows Vista, l'interfaccia utente consente all'utente di selezionare un dispositivo audio predefinito per il rendering e un dispositivo audio predefinito per l'acquisizione.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-109">In Windows Vista, the user interface enables the user to select a default audio device for rendering and a default audio device for capture.</span></span> <span data-ttu-id="a4eb9-110">Quando l'utente seleziona un dispositivo di rendering o acquisizione predefinito, il sistema assegna tutti e tre i ruoli del dispositivo (eConsole, eMultimedia e comunicazioni elettroniche) a tale dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-110">When the user selects a default rendering or capture device, the system assigns all three device roles (eConsole, eMultimedia, and eCommunications) to that device.</span></span> <span data-ttu-id="a4eb9-111">Le applicazioni non possono modificare i ruoli assegnati a dispositivi endpoint audio.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-111">Applications cannot change the roles that are assigned to audio endpoint devices.</span></span> <span data-ttu-id="a4eb9-112">Il sistema operativo consente solo all'utente di assegnare i ruoli del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-112">The operating system allows only the user to assign device roles.</span></span>

<span data-ttu-id="a4eb9-113">Un client può registrarsi per ricevere una notifica dall'API MMDevice ogni volta che si verifica una modifica nell'assegnazione dei ruoli ai dispositivi dell'endpoint audio.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-113">A client can register itself to receive a notification from the MMDevice API each time a change occurs in the assignment of roles to audio endpoint devices.</span></span> <span data-ttu-id="a4eb9-114">Quando un ruolo passa da un dispositivo a un altro, il client può scegliere se continuare a riprodurre (o registrare) i flussi attraverso lo stesso dispositivo o per spostare i flussi in un altro dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-114">When a role shifts from one device to another, the client can choose whether to continue playing (or recording) its streams through the same device or to switch the streams to another device.</span></span> <span data-ttu-id="a4eb9-115">Per impostazione predefinita, i flussi continuano a essere riprodotti o registrati tramite il dispositivo originale.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-115">By default, the streams continue to play (or be recorded) through the original device.</span></span> <span data-ttu-id="a4eb9-116">In Windows Vista, per passare i flussi a un altro dispositivo, il client deve eliminare i flussi sul dispositivo originale e creare flussi sostitutivi nel nuovo dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-116">In Windows Vista, to switch the streams to another device, the client must delete the streams on the original device and create replacement streams on the new device.</span></span> <span data-ttu-id="a4eb9-117">In Windows 7 il client può rimanere in ascolto di nuove notifiche per implementare un commutire senza interruzioni della riproduzione o della sessione di acquisizione.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-117">In Windows 7, the client can listen for new notifications to implement a seamless switch without interrupting the playback or the capture session.</span></span> <span data-ttu-id="a4eb9-118">Per altre informazioni, vedere [routing del flusso](stream-routing.md).</span><span class="sxs-lookup"><span data-stu-id="a4eb9-118">For more information, see [Stream Routing](stream-routing.md).</span></span>

<span data-ttu-id="a4eb9-119">Se si prevede di utilizzare Windows Vista per testare l'applicazione, è possibile configurare un ambiente di test per verificare che il comportamento dell'applicazione sia quello previsto quando l'utente può assegnare singoli ruoli del dispositivo a dispositivi diversi.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-119">If you plan to use Windows Vista to test your application, you can set up a test environment to verify that the application behaves as expected when the user can assign individual device roles to different devices.</span></span> <span data-ttu-id="a4eb9-120">Per altre informazioni, inviare un messaggio di posta elettronica all'indirizzo uaa@microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-120">For more information, send email to uaa@microsoft.com.</span></span>

## <a name="communication-devices"></a><span data-ttu-id="a4eb9-121">Dispositivi di comunicazione</span><span class="sxs-lookup"><span data-stu-id="a4eb9-121">Communication Devices</span></span>

<span data-ttu-id="a4eb9-122">L'interfaccia utente di Windows 7 è in grado di aggiungere *dispositivi di comunicazione*.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-122">The Windows 7 user interface has the capability of adding *communications devices*.</span></span> <span data-ttu-id="a4eb9-123">Il pannello di controllo **audio** consente all'utente di selezionare un dispositivo di comunicazione predefinito per il rendering e l'acquisizione del flusso audio.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-123">The **Sound** control panel enables the user to select a default communication device each for rendering and capturing audio stream.</span></span> <span data-ttu-id="a4eb9-124">Per impostazione predefinita, quando un nuovo dispositivo è connesso al computer, il sistema operativo esegue il rilevamento automatico dei ruoli e determina se il dispositivo è adatto al ruolo eCommunication.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-124">By default, when a new device is connected to the computer, the operating system performs automatic role detecting and determines whether the device is suitable for the eCommunication role.</span></span> <span data-ttu-id="a4eb9-125">Grazie alla destinazione dei dispositivi di comunicazione, è possibile sviluppare applicazioni che usano le API audio di base per implementare soluzioni di comunicazione per PC e telefono.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-125">By targeting communication devices, you can develop applications that use Core Audio APIs to implement PC-phone communication solutions.</span></span> <span data-ttu-id="a4eb9-126">Ad esempio, un'applicazione VoIP può assegnare i flussi di input e output vocali ai dispositivi dell'endpoint di acquisizione e rendering predefiniti con il ruolo comunicazioni elettroniche.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-126">For example, a VoIP application might assign its voice input and output streams to the default capture and rendering endpoint devices with the eCommunications role.</span></span> <span data-ttu-id="a4eb9-127">Analogamente a qualsiasi altro flusso, un'applicazione di comunicazione deve ottenere un riferimento all'endpoint del dispositivo di comunicazione chiamando [**IMMDeviceEnumerator:: GetDefaultAudioEndpoint**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdefaultaudioendpoint).</span><span class="sxs-lookup"><span data-stu-id="a4eb9-127">Like any other stream, a communication application must get a reference to the communication device's endpoint by calling [**IMMDeviceEnumerator::GetDefaultAudioEndpoint**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdefaultaudioendpoint).</span></span> <span data-ttu-id="a4eb9-128">In questa chiamata, l'applicazione deve specificare **comunicazioni elettroniche** nel parametro *Role* .</span><span class="sxs-lookup"><span data-stu-id="a4eb9-128">In this call, the application must specify **eCommunications** in the *Role* parameter.</span></span> <span data-ttu-id="a4eb9-129">Le operazioni di flusso WASAPI su un flusso, aperto su un dispositivo di comunicazione, sono simili a qualsiasi altro flusso audio.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-129">The WASAPI stream operations on a stream, opened on a communication device, are similar to any other audio stream.</span></span> <span data-ttu-id="a4eb9-130">L'applicazione di comunicazione può migliorare l'esperienza utente implementando comportamenti come ad esempio ducking gestendo le notifiche dall'endpoint del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-130">The communication application can enhance user experience by implementing behaviors such as ducking by handling notifications from the device endpoint.</span></span> <span data-ttu-id="a4eb9-131">Per altre informazioni, vedere [uso di un dispositivo di comunicazione](using-the-communication-device.md).</span><span class="sxs-lookup"><span data-stu-id="a4eb9-131">For more information, see [Using a Communication Device](using-the-communication-device.md).</span></span>

## <a name="automatic-device-role-detection"></a><span data-ttu-id="a4eb9-132">Rilevamento automatico dei ruoli del dispositivo</span><span class="sxs-lookup"><span data-stu-id="a4eb9-132">Automatic Device Role Detection</span></span>

<span data-ttu-id="a4eb9-133">Si consideri uno scenario in cui un computer dispone di un dispositivo di rendering predefinito, dei relatori e di un dispositivo di acquisizione predefinito, un microfono.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-133">Consider a scenario in which a computer has a default rendering device, the speakers, and a default capture device, a microphone.</span></span> <span data-ttu-id="a4eb9-134">L'utente connette una cuffia USB al computer.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-134">The user connects a USB headset to the computer.</span></span> <span data-ttu-id="a4eb9-135">Una volta installati i driver appropriati, il sistema operativo tenta di rilevare un ruolo da assegnare per il nuovo dispositivo audio.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-135">After the appropriate drivers are installed, the operating system attempts to detect a role to assign for the new audio device.</span></span>

<span data-ttu-id="a4eb9-136">In Windows 7 la funzionalità di rilevamento dei ruoli del dispositivo è stata migliorata in modo significativo per determinare i ruoli appropriati adatti ai dispositivi audio.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-136">In Windows 7, the device role detection feature has been improved significantly to determine the appropriate roles suited for audio devices.</span></span> <span data-ttu-id="a4eb9-137">Tutti i dispositivi audio contengono un set di impostazioni di configurazione popolate dal dispositivo OEM, che consentono al sistema di decidere come usare il dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-137">All audio devices contain a set of configuration settings populated by the device OEM, which help the system decide how to use the device.</span></span> <span data-ttu-id="a4eb9-138">Queste impostazioni includono informazioni quali la posizione fisica del Jack audio, il tipo di dispositivo, il sottotipo Jack e le funzionalità di rilevamento, in modo che il sistema possa determinare se il dispositivo è collegato.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-138">These settings include information such as the physical location of the audio jack the device type, the jack subtype, and detection capabilities so that the system can determine whether the device is plugged in.</span></span> <span data-ttu-id="a4eb9-139">Recuperando questi valori dal dispositivo, il sistema operativo determina il ruolo da assegnare al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-139">By retrieving these values from the device, the operating system determines the role to assign to the device.</span></span> <span data-ttu-id="a4eb9-140">In questo scenario, il sistema ha eseguito una query sul dispositivo headset USB, ha eseguito il rilevamento automatico del ruolo e ha deciso che il dispositivo è più adatto per essere un dispositivo di comunicazione.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-140">In this scenario, the system has queried the USB headset device, performed automatic role detection, and decided that the device is best suited to be a communication device.</span></span>

<span data-ttu-id="a4eb9-141">Un'applicazione può anche ottenere informazioni su Jack usando le API di base di audio.</span><span class="sxs-lookup"><span data-stu-id="a4eb9-141">An application can also get jack information by using the Core Audio APIs.</span></span> <span data-ttu-id="a4eb9-142">Per ulteriori informazioni, vedere [**IKsJackDescription**](/windows/desktop/api/Devicetopology/nn-devicetopology-iksjackdescription) e [**IKsJackDescription2**](/windows/desktop/api/Devicetopology/nn-devicetopology-iksjackdescription2).</span><span class="sxs-lookup"><span data-stu-id="a4eb9-142">For more information, see [**IKsJackDescription**](/windows/desktop/api/Devicetopology/nn-devicetopology-iksjackdescription) and [**IKsJackDescription2**](/windows/desktop/api/Devicetopology/nn-devicetopology-iksjackdescription2).</span></span>

## <a name="related-topics"></a><span data-ttu-id="a4eb9-143">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="a4eb9-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a4eb9-144">Ruoli del dispositivo</span><span class="sxs-lookup"><span data-stu-id="a4eb9-144">Device Roles</span></span>](device-roles.md)
</dt> </dl>

 

 



