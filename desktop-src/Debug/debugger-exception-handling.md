---
description: Il sistema di gestione delle eccezioni in modalità utente fornisce supporto per i debugger sofisticati.
ms.assetid: c45a7dc6-e6b2-4fc4-9522-12d96893f4c7
title: Gestione delle eccezioni del debugger
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a6aff6d566e8798aaf4f3113ce6d8f44a3bc71ba
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104482741"
---
# <a name="debugger-exception-handling"></a><span data-ttu-id="a229c-103">Gestione delle eccezioni del debugger</span><span class="sxs-lookup"><span data-stu-id="a229c-103">Debugger Exception Handling</span></span>

<span data-ttu-id="a229c-104">Il sistema di gestione delle eccezioni in modalità utente fornisce supporto per i debugger sofisticati.</span><span class="sxs-lookup"><span data-stu-id="a229c-104">The system's handling of user-mode exceptions provides support for sophisticated debuggers.</span></span> <span data-ttu-id="a229c-105">Se è in corso il debug del processo in cui si verifica un'eccezione, il sistema genera un evento di debug.</span><span class="sxs-lookup"><span data-stu-id="a229c-105">If the process in which an exception occurs is being debugged, the system generates a debug event.</span></span> <span data-ttu-id="a229c-106">Se il debugger usa la funzione [**WaitForDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-waitfordebugevent) , l'evento di debug fa in modo che la funzione restituisca con un puntatore a una struttura di [**\_ eventi di debug**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) .</span><span class="sxs-lookup"><span data-stu-id="a229c-106">If the debugger is using the [**WaitForDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-waitfordebugevent) function, the debug event causes that function to return with a pointer to a [**DEBUG\_EVENT**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) structure.</span></span> <span data-ttu-id="a229c-107">Questa struttura contiene gli identificatori di processo e thread che possono essere utilizzati dal debugger per accedere al record di contesto del thread.</span><span class="sxs-lookup"><span data-stu-id="a229c-107">This structure contains the process and thread identifiers the debugger can use to access the thread's context record.</span></span> <span data-ttu-id="a229c-108">La struttura contiene anche una struttura di [**\_ \_ informazioni di debug dell'eccezione**](/windows/win32/api/minwinbase/ns-minwinbase-exception_debug_info) che include una copia del record di eccezione.</span><span class="sxs-lookup"><span data-stu-id="a229c-108">The structure also contains an [**EXCEPTION\_DEBUG\_INFO**](/windows/win32/api/minwinbase/ns-minwinbase-exception_debug_info) structure that includes a copy of the exception record.</span></span>

<span data-ttu-id="a229c-109">Quando il sistema cerca un gestore di eccezioni, effettua due tentativi di notifica al debugger di un processo.</span><span class="sxs-lookup"><span data-stu-id="a229c-109">When the system is searching for an exception handler, it makes two attempts to notify a process's debugger.</span></span> <span data-ttu-id="a229c-110">Il primo tentativo di notifica fornisce al debugger la possibilità di gestire i punti di interruzione o le eccezioni in un singolo passaggio.</span><span class="sxs-lookup"><span data-stu-id="a229c-110">The first notification attempt provides the debugger with an opportunity to handle breakpoint or single-step exceptions.</span></span> <span data-ttu-id="a229c-111">Questa operazione è nota come *notifica first-chance*.</span><span class="sxs-lookup"><span data-stu-id="a229c-111">This is known as *first-chance notification*.</span></span> <span data-ttu-id="a229c-112">L'utente può quindi inviare comandi del debugger per modificare l'ambiente del processo prima dell'esecuzione di qualsiasi gestore di eccezioni.</span><span class="sxs-lookup"><span data-stu-id="a229c-112">The user can then issue debugger commands to manipulate the process's environment before any exception handlers are executed.</span></span> <span data-ttu-id="a229c-113">Il secondo tentativo di inviare una notifica al debugger si verifica solo se il sistema non è in grado di trovare un gestore di eccezioni basato su frame che gestisce l'eccezione.</span><span class="sxs-lookup"><span data-stu-id="a229c-113">The second attempt to notify the debugger occurs only if the system is unable to find a frame-based exception handler that handles the exception.</span></span> <span data-ttu-id="a229c-114">Questo è noto come *notifica dell'ultima opportunità*.</span><span class="sxs-lookup"><span data-stu-id="a229c-114">This is known as *last-chance notification*.</span></span> <span data-ttu-id="a229c-115">Se il debugger non gestisce l'eccezione dopo la notifica dell'ultima probabilità, il sistema termina il processo di cui è in corso il debug.</span><span class="sxs-lookup"><span data-stu-id="a229c-115">If the debugger does not handle the exception after the last-chance notification, the system terminates the process being debugged.</span></span>

<span data-ttu-id="a229c-116">A ogni tentativo di notifica, il debugger utilizza la funzione [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent) per restituire il controllo al sistema.</span><span class="sxs-lookup"><span data-stu-id="a229c-116">At each notification attempt, the debugger uses the [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent) function to return control to the system.</span></span> <span data-ttu-id="a229c-117">Prima di restituire il controllo, il debugger può gestire l'eccezione e modificare lo stato del thread nel modo appropriato oppure può scegliere di non gestire l'eccezione.</span><span class="sxs-lookup"><span data-stu-id="a229c-117">Before returning control, the debugger can handle the exception and modify the thread state as appropriate, or it can choose not to handle the exception.</span></span> <span data-ttu-id="a229c-118">Utilizzando **ContinueDebugEvent**, il debugger può indicare che l'eccezione è stata gestita, nel qual caso lo stato del computer viene ripristinato e l'esecuzione del thread viene continuata nel punto in cui si è verificata l'eccezione.</span><span class="sxs-lookup"><span data-stu-id="a229c-118">Using **ContinueDebugEvent**, the debugger can indicate that it has handled the exception, in which case the machine state is restored and thread execution is continued at the point at which the exception occurred.</span></span> <span data-ttu-id="a229c-119">Il debugger può anche indicare che l'eccezione non è stata gestita, il che determina la continuazione della ricerca di un gestore di eccezioni da parte del sistema.</span><span class="sxs-lookup"><span data-stu-id="a229c-119">The debugger can also indicate that it did not handle the exception, which causes the system to continue its search for an exception handler.</span></span>

 

 
