---
description: Quando si verifica un'eccezione hardware o software, il processore interrompe l'esecuzione nel punto in cui si è verificata l'eccezione e trasferisce il controllo al sistema.
ms.assetid: 35a1b9bd-8da9-47e6-beda-e0b159bd840d
title: Invio di eccezioni
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e02b40aa132541fe88d692cbbf1881a8b620a209
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104125712"
---
# <a name="exception-dispatching"></a><span data-ttu-id="e049d-103">Invio di eccezioni</span><span class="sxs-lookup"><span data-stu-id="e049d-103">Exception Dispatching</span></span>

<span data-ttu-id="e049d-104">Quando si verifica un'eccezione hardware o software, il processore interrompe l'esecuzione nel punto in cui si è verificata l'eccezione e trasferisce il controllo al sistema.</span><span class="sxs-lookup"><span data-stu-id="e049d-104">When a hardware or software exception occurs, the processor stops execution at the point at which the exception occurred and transfers control to the system.</span></span> <span data-ttu-id="e049d-105">In primo luogo, il sistema salva lo stato del computer del thread corrente e le informazioni che descrivono l'eccezione.</span><span class="sxs-lookup"><span data-stu-id="e049d-105">First, the system saves both the machine state of the current thread and information that describes the exception.</span></span> <span data-ttu-id="e049d-106">Il sistema tenta quindi di trovare un gestore di eccezioni per gestire l'eccezione.</span><span class="sxs-lookup"><span data-stu-id="e049d-106">The system then attempts to find an exception handler to handle the exception.</span></span>

<span data-ttu-id="e049d-107">Lo stato del computer del thread in cui si è verificata l'eccezione viene salvato in una struttura del [**contesto**](/windows/desktop/api/WinNT/ns-winnt-arm64_nt_context) .</span><span class="sxs-lookup"><span data-stu-id="e049d-107">The machine state of the thread in which the exception occurred is saved in a [**CONTEXT**](/windows/desktop/api/WinNT/ns-winnt-arm64_nt_context) structure.</span></span> <span data-ttu-id="e049d-108">Queste informazioni, denominate *record di contesto*, consentono al sistema di continuare l'esecuzione nel punto dell'eccezione se l'eccezione viene gestita correttamente.</span><span class="sxs-lookup"><span data-stu-id="e049d-108">This information (called the *context record*) enables the system to continue execution at the point of the exception if the exception is successfully handled.</span></span> <span data-ttu-id="e049d-109">La descrizione dell'eccezione (denominata **record eccezione**) viene salvata in una struttura [**di \_ record di eccezione**](/windows/desktop/api/WinNT/ns-winnt-exception_record) .</span><span class="sxs-lookup"><span data-stu-id="e049d-109">The description of the exception (called the **exception record**) is saved in an [**EXCEPTION\_RECORD**](/windows/desktop/api/WinNT/ns-winnt-exception_record) structure.</span></span> <span data-ttu-id="e049d-110">Poiché archivia le informazioni dipendenti dal computer del record di contesto separatamente dalle informazioni indipendenti dal computer del record di eccezione, il meccanismo di gestione delle eccezioni è portabile su piattaforme diverse.</span><span class="sxs-lookup"><span data-stu-id="e049d-110">Because it stores the machine-dependent information of the context record separately from the machine-independent information of the exception record, the exception-handling mechanism is portable to different platforms.</span></span>

<span data-ttu-id="e049d-111">Le informazioni nei record di contesto e di eccezione sono disponibili tramite la funzione [**GetExceptionInformation**](getexceptioninformation.md) e possono essere rese disponibili per tutti i gestori di eccezioni eseguiti come risultato dell'eccezione.</span><span class="sxs-lookup"><span data-stu-id="e049d-111">The information in both the context and exception records is available by means of the [**GetExceptionInformation**](getexceptioninformation.md) function, and can be made available to any exception handlers that are executed as a result of the exception.</span></span> <span data-ttu-id="e049d-112">Il record di eccezione include le informazioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="e049d-112">The exception record includes the following information.</span></span>

-   <span data-ttu-id="e049d-113">Codice di eccezione che identifica il tipo di eccezione.</span><span class="sxs-lookup"><span data-stu-id="e049d-113">An exception code that identifies the type of exception.</span></span>
-   <span data-ttu-id="e049d-114">Flag che indicano se l'eccezione è continuabile.</span><span class="sxs-lookup"><span data-stu-id="e049d-114">Flags indicating whether the exception is continuable.</span></span> <span data-ttu-id="e049d-115">Qualsiasi tentativo di continuare l'esecuzione dopo un'eccezione non continua genera un'altra eccezione.</span><span class="sxs-lookup"><span data-stu-id="e049d-115">Any attempt to continue execution after a noncontinuable exception generates another exception.</span></span>
-   <span data-ttu-id="e049d-116">Puntatore a un altro record di eccezione.</span><span class="sxs-lookup"><span data-stu-id="e049d-116">A pointer to another exception record.</span></span> <span data-ttu-id="e049d-117">In questo caso si semplifica la creazione di un elenco collegato di eccezioni se si verificano eccezioni nidificate.</span><span class="sxs-lookup"><span data-stu-id="e049d-117">This facilitates creation of a linked list of exceptions if nested exceptions occur.</span></span>
-   <span data-ttu-id="e049d-118">Indirizzo in corrispondenza del quale si è verificata l'eccezione.</span><span class="sxs-lookup"><span data-stu-id="e049d-118">The address at which the exception occurred.</span></span>
-   <span data-ttu-id="e049d-119">Matrice di argomenti che forniscono informazioni aggiuntive sull'eccezione.</span><span class="sxs-lookup"><span data-stu-id="e049d-119">An array of arguments that provide additional information about the exception.</span></span>

<span data-ttu-id="e049d-120">Quando si verifica un'eccezione nel codice in modalità utente, il sistema usa l'ordine di ricerca seguente per trovare un gestore di eccezioni:</span><span class="sxs-lookup"><span data-stu-id="e049d-120">When an exception occurs in user-mode code, the system uses the following search order to find an exception handler:</span></span>

1.  <span data-ttu-id="e049d-121">Se è in corso il debug del processo, il sistema invia una notifica al debugger.</span><span class="sxs-lookup"><span data-stu-id="e049d-121">If the process is being debugged, the system notifies the debugger.</span></span> <span data-ttu-id="e049d-122">Per ulteriori informazioni, vedere [gestione delle eccezioni del debugger](debugger-exception-handling.md).</span><span class="sxs-lookup"><span data-stu-id="e049d-122">For more information, see [Debugger Exception Handling](debugger-exception-handling.md).</span></span>
2.  <span data-ttu-id="e049d-123">Se il processo non viene sottoposto a debug o se il debugger associato non gestisce l'eccezione, il sistema tenta di individuare un gestore di eccezioni basato su frame eseguendo una ricerca negli stack frame del thread in cui si è verificata l'eccezione.</span><span class="sxs-lookup"><span data-stu-id="e049d-123">If the process is not being debugged, or if the associated debugger does not handle the exception, the system attempts to locate a frame-based exception handler by searching the stack frames of the thread in which the exception occurred.</span></span> <span data-ttu-id="e049d-124">Il sistema cerca prima la stack frame corrente, quindi Cerca negli stack frame precedenti in ordine inverso.</span><span class="sxs-lookup"><span data-stu-id="e049d-124">The system searches the current stack frame first, then searches through preceding stack frames in reverse order.</span></span>
3.  <span data-ttu-id="e049d-125">Se non è possibile trovare un gestore basato su frame oppure nessun gestore basato su frame gestisce l'eccezione, ma è in corso il debug del processo, il sistema invia una notifica al debugger una seconda volta.</span><span class="sxs-lookup"><span data-stu-id="e049d-125">If no frame-based handler can be found, or no frame-based handler handles the exception, but the process is being debugged, the system notifies the debugger a second time.</span></span>
4.  <span data-ttu-id="e049d-126">Se il processo non viene sottoposto a debug o se il debugger associato non gestisce l'eccezione, il sistema fornisce la gestione predefinita basata sul tipo di eccezione.</span><span class="sxs-lookup"><span data-stu-id="e049d-126">If the process is not being debugged, or if the associated debugger does not handle the exception, the system provides default handling based on the exception type.</span></span> <span data-ttu-id="e049d-127">Per la maggior parte delle eccezioni, l'azione predefinita consiste nel chiamare la funzione [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess) .</span><span class="sxs-lookup"><span data-stu-id="e049d-127">For most exceptions, the default action is to call the [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess) function.</span></span>

<span data-ttu-id="e049d-128">Quando si verifica un'eccezione nel codice in modalità kernel, il sistema cerca nello stack frame dello stack del kernel il tentativo di individuare un gestore di eccezioni.</span><span class="sxs-lookup"><span data-stu-id="e049d-128">When an exception occurs in kernel-mode code, the system searches the stack frames of the kernel stack in an attempt to locate an exception handler.</span></span> <span data-ttu-id="e049d-129">Se non è possibile trovare un gestore oppure nessun gestore gestisce l'eccezione, il sistema viene arrestato come se fosse stata chiamata la funzione [**ExitWindows**](/windows/win32/api/winuser/nf-winuser-exitwindows) .</span><span class="sxs-lookup"><span data-stu-id="e049d-129">If a handler cannot be located or no handler handles the exception, the system is shut down as if the [**ExitWindows**](/windows/win32/api/winuser/nf-winuser-exitwindows) function had been called.</span></span>

 

 
