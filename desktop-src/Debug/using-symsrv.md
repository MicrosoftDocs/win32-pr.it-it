---
description: Uso di SymSrv
ms.assetid: d400f222-c50c-4c7b-8f8a-0c3ed3bba3b9
title: Uso di SymSrv
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ae79d9fd045ab3ce946c14468e56419d3074858c
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104225650"
---
# <a name="using-symsrv"></a><span data-ttu-id="34c48-103">Uso di SymSrv</span><span class="sxs-lookup"><span data-stu-id="34c48-103">Using SymSrv</span></span>

<span data-ttu-id="34c48-104">SymSrv recapita i file di simboli da archivi di simboli centralizzati.</span><span class="sxs-lookup"><span data-stu-id="34c48-104">SymSrv delivers symbol files from centralized symbol stores.</span></span> <span data-ttu-id="34c48-105">Questi archivi possono contenere un numero qualsiasi di file di simboli, corrispondenti a un numero qualsiasi di programmi o sistemi operativi.</span><span class="sxs-lookup"><span data-stu-id="34c48-105">These stores can contain any number of symbol files, corresponding to any number of programs or operating systems.</span></span> <span data-ttu-id="34c48-106">Gli archivi possono anche contenere file binari, che risultano particolarmente utili durante il debug dei file di minidump.</span><span class="sxs-lookup"><span data-stu-id="34c48-106">The stores can also contain binary files, which are particularly useful when debugging minidump files.</span></span>

<span data-ttu-id="34c48-107">Gli archivi possono contenere il simbolo e i file binari effettivi o semplicemente i puntatori ai file di simboli.</span><span class="sxs-lookup"><span data-stu-id="34c48-107">The stores can contain the actual symbol and binary files or simply pointers to symbol files.</span></span> <span data-ttu-id="34c48-108">Se l'archivio contiene puntatori, SymSrv recupererà i file effettivi direttamente dalle origini.</span><span class="sxs-lookup"><span data-stu-id="34c48-108">If the store contains pointers, SymSrv will retrieve the actual files directly from their sources.</span></span>

<span data-ttu-id="34c48-109">SymSrv può anche separare un archivio simboli di grandi dimensioni in un subset più piccolo appropriato per un'attività di debug specializzata.</span><span class="sxs-lookup"><span data-stu-id="34c48-109">SymSrv can also separate a large symbol store into a smaller subset that is appropriate for a specialized debugging task.</span></span>

<span data-ttu-id="34c48-110">Infine, SymSrv può ottenere i file di simboli da un'origine HTTP o HTTPS usando le informazioni di accesso fornite dal sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="34c48-110">Finally, SymSrv can obtain symbol files from an HTTP or HTTPS source using the logon information provided by the operating system.</span></span> <span data-ttu-id="34c48-111">SymSrv supporta i siti HTTPS protetti da Smart Card, certificati e account di accesso e password regolari.</span><span class="sxs-lookup"><span data-stu-id="34c48-111">SymSrv supports HTTPS sites protected by smartcards, certificates, and regular logins and passwords.</span></span>

## <a name="setting-the-symbol-path"></a><span data-ttu-id="34c48-112">Impostazione del percorso dei simboli</span><span class="sxs-lookup"><span data-stu-id="34c48-112">Setting the Symbol Path</span></span>

<span data-ttu-id="34c48-113">Come descritto in [percorsi di simboli](symbol-paths.md), il percorso dei simboli ( \_ variabile di ambiente del percorso dei simboli NT \_ \_ ) può essere costituito da diversi elementi di percorso separati da punti e virgola.</span><span class="sxs-lookup"><span data-stu-id="34c48-113">As described in [Symbol Paths](symbol-paths.md), the symbol path (\_NT\_SYMBOL\_PATH environment variable) can be made up of several path elements separated by semicolons.</span></span> <span data-ttu-id="34c48-114">Se uno o più di questi elementi Path iniziano con il testo "SRV \* ", l'elemento è un server di simboli e utilizzerà symsrv per individuare i file di simboli.</span><span class="sxs-lookup"><span data-stu-id="34c48-114">If any one or more of these path elements begins with the text "srv\*", then the element is a symbol server and will use SymSrv to locate symbol files.</span></span>

> [!Note]  
> <span data-ttu-id="34c48-115">Se il testo "SRV \* " non è specificato ma l'elemento Path effettivo è un archivio del server dei simboli, il gestore di simboli fungerà da se è \* stato specificato "SRV".</span><span class="sxs-lookup"><span data-stu-id="34c48-115">If the "srv\*" text is not specified but the actual path element is a symbol server store, then the symbol handler will act as if "srv\*" were specified.</span></span> <span data-ttu-id="34c48-116">Il gestore di simboli esegue questa determinazione cercando l'esistenza di un file denominato "pingme.txt" nella directory radice del percorso specificato.</span><span class="sxs-lookup"><span data-stu-id="34c48-116">The symbol handler makes this determination by searching for the existence of a file called "pingme.txt" in the root directory of the specified path.</span></span>

 

<span data-ttu-id="34c48-117">Così come i percorsi dei simboli sono costituiti da elementi del percorso dei simboli separati da punti e virgola, i server di simboli sono costituiti da elementi di archivio simboli separati da asterischi.</span><span class="sxs-lookup"><span data-stu-id="34c48-117">Just as symbol paths are made up of symbol path elements separated by semicolons, symbol servers are made up of symbol store elements separated by asterisks.</span></span> <span data-ttu-id="34c48-118">Dopo il prefisso "SRV" possono essere presenti fino a 10 archivi simboli \* .</span><span class="sxs-lookup"><span data-stu-id="34c48-118">There can be up to 10 symbol stores after the "srv\*" prefix.</span></span> <span data-ttu-id="34c48-119">Gli archivi elencati a sinistra dell'elenco sono denominati archivi *downstream* e i punti vendita a destra sono detti archivi *upstream* .</span><span class="sxs-lookup"><span data-stu-id="34c48-119">Stores listed to the left of the list are called *downstream* stores and stores to the right are called *upstream* stores.</span></span>

<dl> <span data-ttu-id="34c48-120">SRV \* *SymbolStore*</span><span class="sxs-lookup"><span data-stu-id="34c48-120">srv\**SymbolStore*</span></span>  
<span data-ttu-id="34c48-121">SRV \* *SymbolStore1* \* *SymbolStoreN*  
</span><span class="sxs-lookup"><span data-stu-id="34c48-121">srv\**SymbolStore1*\**SymbolStoreN*  
</span></span></dl>

<span data-ttu-id="34c48-122">Se nel percorso è incluso un solo elemento di archivio simboli, SymSrv tenterà di usare il file richiesto direttamente da tale archivio.</span><span class="sxs-lookup"><span data-stu-id="34c48-122">If only one symbol store element is included in the path, then SymSrv will attempt to use the any requested file directly from that store.</span></span>

<span data-ttu-id="34c48-123">Se sono presenti due archivi simboli nel percorso, SymSrv Cerca il file di simboli nell'archivio dei simboli più a sinistra.</span><span class="sxs-lookup"><span data-stu-id="34c48-123">If there are two symbol stores in the path, SymSrv looks for the symbol file in the leftmost symbol store.</span></span> <span data-ttu-id="34c48-124">Se il file è presente, viene utilizzato.</span><span class="sxs-lookup"><span data-stu-id="34c48-124">If the file is there, it is used.</span></span> <span data-ttu-id="34c48-125">Se non è presente, SymSrv Cerca nell'archivio dei simboli immediatamente a destra.</span><span class="sxs-lookup"><span data-stu-id="34c48-125">If it is not there, SymSrv looks in the symbol store immediately to the right.</span></span> <span data-ttu-id="34c48-126">Se il file è presente, viene copiato nell'archivio di sinistra e aperto da questa posizione.</span><span class="sxs-lookup"><span data-stu-id="34c48-126">If the file is there, it is copied to the left store and opened from there.</span></span>

<span data-ttu-id="34c48-127">Se sono presenti più di due archivi, questo comportamento continua a destra fino a quando il file non viene trovato o nell'elenco non sono presenti altri archivi.</span><span class="sxs-lookup"><span data-stu-id="34c48-127">If there are more than two stores, this behavior continues to the right until the file is found or there are no more stores in the list.</span></span>

<span data-ttu-id="34c48-128">Il file non viene mai aperto da alcun archivio, ma dall'archivio più a sinistra.</span><span class="sxs-lookup"><span data-stu-id="34c48-128">The file is never opened from any store but the leftmost store.</span></span> <span data-ttu-id="34c48-129">Se il file viene trovato altrove nella catena, viene copiato in ogni archivio a sinistra.</span><span class="sxs-lookup"><span data-stu-id="34c48-129">If the file is found anywhere else in the chain, it is copied to every store to the left of it.</span></span> <span data-ttu-id="34c48-130">Questo processo di copia è denominato "propagazione" e offre alcuni vantaggi che si clarfied più avanti in questo documento.</span><span class="sxs-lookup"><span data-stu-id="34c48-130">This copy process is called "cascading" and provides certain benefits that will clarfied later in this document.</span></span>

## <a name="types-of-symbol-stores"></a><span data-ttu-id="34c48-131">Tipi di archivi simboli</span><span class="sxs-lookup"><span data-stu-id="34c48-131">Types of Symbol Stores</span></span>

<span data-ttu-id="34c48-132">Nella tabella seguente sono riportati esempi dei tipi di archivio simboli supportati.</span><span class="sxs-lookup"><span data-stu-id="34c48-132">The following table displays examples of the supported symbol store types..</span></span>

|                            |                                                                                                                                                                                                                                                                                                                                                           |
|----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="34c48-133">\\\\\\condivisione server</span><span class="sxs-lookup"><span data-stu-id="34c48-133">\\\\server\\share</span></span>          | <span data-ttu-id="34c48-134">Percorso UNC completo di una condivisione in un server remoto.</span><span class="sxs-lookup"><span data-stu-id="34c48-134">A fully qualified UNC path to a share on a remote server.</span></span>                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="34c48-135">c: \\ localCache</span><span class="sxs-lookup"><span data-stu-id="34c48-135">c:\\LocalCache</span></span>             | <span data-ttu-id="34c48-136">Percorso di una directory nel computer client.</span><span class="sxs-lookup"><span data-stu-id="34c48-136">A path to a directory on the client computer.</span></span>                                                                                                                                                                                                                                                                                                             |
| https://InternetSite        | <span data-ttu-id="34c48-137">URL di un sito Web che ospita i simboli.</span><span class="sxs-lookup"><span data-stu-id="34c48-137">The URL to a web site hosting the symbols.</span></span> <span data-ttu-id="34c48-138">Deve essere l'archivio più a destra nell'elenco e non deve essere l'unico archivio presente nell'elenco.</span><span class="sxs-lookup"><span data-stu-id="34c48-138">Must be the rightmost store in the list and should not be the only store in the list.</span></span>                                                                                                                                                                                                                          |
| https://SecureInternetSite | <span data-ttu-id="34c48-139">URL di un sito Web protetto che ospita i simboli.</span><span class="sxs-lookup"><span data-stu-id="34c48-139">The URL to a secure web site hosting the symbols.</span></span> <span data-ttu-id="34c48-140">Questo può supportare password, credenziali di accesso di Windows, certificati e smart card.</span><span class="sxs-lookup"><span data-stu-id="34c48-140">This can support passwords, Windows login credentials, certificates, and smartcards.</span></span> <span data-ttu-id="34c48-141">Deve essere l'archivio più a destra nell'elenco e non deve essere l'unico archivio presente nell'elenco.</span><span class="sxs-lookup"><span data-stu-id="34c48-141">Must be the rightmost store in the list and should not be the only store in the list.</span></span>                                                                                                                              |
| <blank>              | <span data-ttu-id="34c48-142">Se non è presente testo tra due asterischi, questo indica l' *Archivio downstream predefinito*.</span><span class="sxs-lookup"><span data-stu-id="34c48-142">If there is no text between two asterisks, this indicates the *default downstream store*.</span></span> <span data-ttu-id="34c48-143">Il percorso viene impostato chiamando [**SymSetHomeDirectory**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsethomedirectory).</span><span class="sxs-lookup"><span data-stu-id="34c48-143">The location is set by calling [**SymSetHomeDirectory**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsethomedirectory).</span></span> <span data-ttu-id="34c48-144">Il valore predefinito è una directory denominata "sym" immediatamente sotto la directory di programma dell'applicazione chiamante.</span><span class="sxs-lookup"><span data-stu-id="34c48-144">The default value is a directory named "sym" immediately below the program directory of the calling application.</span></span> <span data-ttu-id="34c48-145">Questa operazione viene a volte definita *cache locale predefinita*.</span><span class="sxs-lookup"><span data-stu-id="34c48-145">This is sometimes referred to as the *default local cache*.</span></span> |



 

<span data-ttu-id="34c48-146">Poiché non è possibile scrivere in un archivio di simboli basato su HTTP, è necessario che sia l'archivio più a destra dell'elenco.</span><span class="sxs-lookup"><span data-stu-id="34c48-146">Because an HTTP-based symbol store cannot be written to, it must be the rightmost store in the list.</span></span> <span data-ttu-id="34c48-147">Se un archivio di simboli basato su HTTP si trovava al centro o a sinistra dell'elenco dei negozi, non sarebbe possibile copiarvi i file trovati e la catena verrebbe interrotta.</span><span class="sxs-lookup"><span data-stu-id="34c48-147">If an HTTP-based symbol store was located in the middle or the left of the store list, it would not be possible to copy any found files to it and the chain would be broken.</span></span> <span data-ttu-id="34c48-148">Inoltre, poiché il gestore di simboli non è in grado di aprire un file da un sito Web, un archivio basato su HTTP non deve essere l'archivio più a sinistra o solo nell'elenco.</span><span class="sxs-lookup"><span data-stu-id="34c48-148">Furthermore, because the symbol handler cannot open a file from a web site, an HTTP-based store should not be the leftmost or only store on the list.</span></span> <span data-ttu-id="34c48-149">Se SymSrv viene visualizzato con questo percorso dei simboli, tenterà di eseguire il recupero copiando il file nell'archivio downstream predefinito e aprendolo da questa posizione, indipendentemente dal fatto che l'archivio downstream predefinito sia indicato o meno nel percorso dei simboli.</span><span class="sxs-lookup"><span data-stu-id="34c48-149">If SymSrv is ever presented with this symbol path, it will attempt to recover by copying the file to the default downstream store and open it from there, regardless of whether the default downstream store is indicated in the symbol path or not.</span></span>

## <a name="examples"></a><span data-ttu-id="34c48-150">Esempio</span><span class="sxs-lookup"><span data-stu-id="34c48-150">Examples</span></span>

<span data-ttu-id="34c48-151">Per usare SymSrv con un archivio di simboli in \\ \\ compiles \\ , impostare il percorso dei simboli seguente:</span><span class="sxs-lookup"><span data-stu-id="34c48-151">To use SymSrv with a symbol store on \\\\mybuilds\\mysymbols, set the following symbol path:</span></span>

<span data-ttu-id="34c48-152">**imposta \_ il \_ percorso del simbolo NT \_ = SRV \* \\ \\ Compila i \\ simboli**</span><span class="sxs-lookup"><span data-stu-id="34c48-152">**set \_NT\_SYMBOL\_PATH= srv\*\\\\mybuilds\\mysymbols**</span></span>

<span data-ttu-id="34c48-153">Per impostare il percorso dei simboli in modo che il debugger copi i file di simboli da un archivio di simboli in \\ \\ ricompila i simboli nella \\ Directory locale c: \\ localsymbols, usare:</span><span class="sxs-lookup"><span data-stu-id="34c48-153">To set the symbol path so that the debugger will copy symbol files from a symbol store on \\\\mybuilds\\mysymbols to your local directory c:\\localsymbols, use:</span></span>

<span data-ttu-id="34c48-154">**set \_ NT \_ Symbol \_ path = SRV \* c: \\ localsymbols \* \\ \\ Compila i \\ simboli**</span><span class="sxs-lookup"><span data-stu-id="34c48-154">**set \_NT\_SYMBOL\_PATH=srv\*c:\\localsymbols\*\\\\mybuilds\\mysymbols**</span></span>

<span data-ttu-id="34c48-155">Per impostare il percorso dei simboli in modo che il debugger copi i file di simboli da un archivio di simboli in \\ \\ ricompila i simboli nell' \\ Archivio downstream predefinito (in genere c: \\ debugger \\ sym), usare:</span><span class="sxs-lookup"><span data-stu-id="34c48-155">To set the symbol path so that the debugger will copy symbol files from a symbol store on \\\\mybuilds\\mysymbols to the default downstream store (typically c:\\debuggers\\sym), use:</span></span>

<span data-ttu-id="34c48-156">**imposta \_ il \_ percorso del simbolo NT \_ = SRV \* \* \\ \\ Compila i \\ simboli**</span><span class="sxs-lookup"><span data-stu-id="34c48-156">**set \_NT\_SYMBOL\_PATH=srv\*\*\\\\mybuilds\\mysymbols**</span></span>

<span data-ttu-id="34c48-157">Per usare un archivio a catena, impostare il percorso dei simboli seguente:</span><span class="sxs-lookup"><span data-stu-id="34c48-157">To use a cascading store, set the following symbol path:</span></span>

<span data-ttu-id="34c48-158">**set \_ NT \_ Symbol \_ path = SRV \* c: \\ localsymbols \* \\ \\ NearbyServer \\ Store\*https://DistantServer**</span><span class="sxs-lookup"><span data-stu-id="34c48-158">**set \_NT\_SYMBOL\_PATH = srv\*c:\\localsymbols\*\\\\NearbyServer\\store\*https://DistantServer**</span></span>

<span data-ttu-id="34c48-159">In questo esempio, SymSrv cerca innanzitutto il file in c: \\ localsymbols.</span><span class="sxs-lookup"><span data-stu-id="34c48-159">In this example, SymSrv first looks for the file in c:\\localsymbols.</span></span> <span data-ttu-id="34c48-160">Se viene trovato, verrà restituito un percorso al file.</span><span class="sxs-lookup"><span data-stu-id="34c48-160">If it is found there, it will return a path to the file.</span></span> <span data-ttu-id="34c48-161">In caso contrario, SymSrv Cerca il file in \\ \\ NearbyServer \\ Store.</span><span class="sxs-lookup"><span data-stu-id="34c48-161">Otherwise, SymSrv looks for the file in \\\\NearbyServer\\store.</span></span> <span data-ttu-id="34c48-162">Se viene trovato, SymSrv copia il file in c: \\ localsymbols e restituisce un percorso del file. se non viene trovato, symsrv Cerca il file in https://DistantServer e, se viene trovato, symsrv copia il file nell' \\ \\ \\ Archivio NearbyServer, quindi in c: \\ localsymbols.</span><span class="sxs-lookup"><span data-stu-id="34c48-162">If it is found there, SymSrv copies the file to c:\\localsymbols and returns a path to the file; if it is not found, SymSrv looks for the file in https://DistantServer, and if it is found there, SymSrv copies the file to \\\\NearbyServer\\store, then to c:\\localsymbols.</span></span>

<span data-ttu-id="34c48-163">Nell'ultimo esempio viene illustrato come è possibile utilizzare la progettazione oculata di un percorso di simboli per ottimizzare il download dei simboli.</span><span class="sxs-lookup"><span data-stu-id="34c48-163">This last example shows how judicious design of a symbol path can be used to optimize the downloading of symbols.</span></span> <span data-ttu-id="34c48-164">Se si dispone di un sito di lavoro con un gruppo di debugger ed è necessario ottenere i simboli da una posizione distante, è possibile configurare un server comune con un archivio di simboli vicino a tutti i debugger.</span><span class="sxs-lookup"><span data-stu-id="34c48-164">If you have a work site with a group of debuggers and they all need to get symbols from a distant location, you can set up a common server with a symbol store near all the debuggers.</span></span> <span data-ttu-id="34c48-165">Configurare quindi ogni debugger con il percorso dei simboli sopra riportato.</span><span class="sxs-lookup"><span data-stu-id="34c48-165">Then setup every debugger with the symbol path above.</span></span> <span data-ttu-id="34c48-166">Il primo debugger che richiede una determinata versione di foo. pdb lo scaricherà da https://DistantServer nell' \\ \\ \\ Archivio NearbyServer e quindi nel relativo computer in c: \\ localsymbols.</span><span class="sxs-lookup"><span data-stu-id="34c48-166">The first debugger that requires a certain version of foo.pdb will download it from https://DistantServer to \\\\NearbyServer\\store and then to its own machine in c:\\localsymbols.</span></span> <span data-ttu-id="34c48-167">Il debugger successivo che richiede lo stesso file sarà in grado di scaricarlo dall' \\ \\ \\ Archivio NearbyServer perché è già stato scaricato in tale percorso dal debugger precedente.</span><span class="sxs-lookup"><span data-stu-id="34c48-167">The next debugger that requires the same file will be able to download it from \\\\NearbyServer\\store because it was already downloaded to that location by the previous debugger.</span></span> <span data-ttu-id="34c48-168">Questa funzionalità di memorizzazione nella cache a più livelli consente di risparmiare tempo e larghezza di banda di rete notevoli.</span><span class="sxs-lookup"><span data-stu-id="34c48-168">This multi-level caching saves significant time and network bandwidth.</span></span>

## <a name="microsoft-symbol-store"></a><span data-ttu-id="34c48-169">Archivio simboli Microsoft</span><span class="sxs-lookup"><span data-stu-id="34c48-169">Microsoft Symbol Store</span></span>

<span data-ttu-id="34c48-170">Microsoft fornisce l'accesso a un server di simboli Internet che contiene i file di simboli per le numerose versioni del sistema operativo Windows.</span><span class="sxs-lookup"><span data-stu-id="34c48-170">Microsoft provides access to an Internet symbol server that contains symbol files for the many versions of the Windows operating system.</span></span> <span data-ttu-id="34c48-171">Il catalogo dei simboli non è necessariamente completo, ma è esteso.</span><span class="sxs-lookup"><span data-stu-id="34c48-171">This catalog of symbols is not guaranteed to be complete, but it is extensive.</span></span> <span data-ttu-id="34c48-172">Sono rappresentati anche altri prodotti Microsoft.</span><span class="sxs-lookup"><span data-stu-id="34c48-172">Other Microsoft products are also represented.</span></span>

<span data-ttu-id="34c48-173">Il server dei simboli Internet viene popolato con una varietà di simboli Windows per i sistemi operativi Microsoft Windows, tra cui hotfix, Service Pack, pacchetti di rollup della sicurezza e versioni finali.</span><span class="sxs-lookup"><span data-stu-id="34c48-173">The Internet symbol server is populated with a variety of Windows symbols for Microsoft Windows operating systems, including hot fixes, Service Packs, Security Rollup Packages, and retail releases.</span></span> <span data-ttu-id="34c48-174">I simboli sono inoltre disponibili sul server per le versioni beta correnti e i candidati di rilascio per i prodotti Windows, oltre a un'ampia gamma di altri prodotti Microsoft, ad esempio Microsoft Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="34c48-174">Symbols are also available on the server for current Betas and Release Candidates for Windows products, plus a variety of other Microsoft products, such as Microsoft Internet Explorer.</span></span>

<span data-ttu-id="34c48-175">Se si ha accesso a Internet durante il debug, è possibile configurare il debugger per scaricare i simboli in base alle esigenze durante una sessione di debug, anziché scaricare i file di simboli separatamente prima di una sessione di debug.</span><span class="sxs-lookup"><span data-stu-id="34c48-175">If you have access to the Internet during debugging, you can configure the debugger to download symbols as needed during a debugging session, rather than downloading symbol files separately before a debugging session.</span></span> <span data-ttu-id="34c48-176">I simboli vengono scaricati in un percorso di directory specificato e quindi vengono caricati dal debugger.</span><span class="sxs-lookup"><span data-stu-id="34c48-176">The symbols are downloaded to a directory location that you specify and then the debugger loads them from there.</span></span>

<span data-ttu-id="34c48-177">L'URL per l'archivio simboli Microsoft è https://msdl.microsoft.com/download/symbols .</span><span class="sxs-lookup"><span data-stu-id="34c48-177">The URL for the Microsoft symbol store is https://msdl.microsoft.com/download/symbols.</span></span> <span data-ttu-id="34c48-178">Nell'esempio seguente viene illustrato come impostare il percorso dei simboli del debugger (sostituire il percorso dell'archivio downstream per *c: \\ DownstreamStore*):</span><span class="sxs-lookup"><span data-stu-id="34c48-178">The following example shows how to set the debugger symbol path (substitute your downstream store path for *c:\\DownstreamStore*):</span></span>

``` syntax
srv*c:\DownstreamStore*https://msdl.microsoft.com/download/symbols
```

## <a name="compressed-files"></a><span data-ttu-id="34c48-179">File compressi</span><span class="sxs-lookup"><span data-stu-id="34c48-179">Compressed Files</span></span>

<span data-ttu-id="34c48-180">SymSrv è compatibile con gli archivi di simboli che contengono file compressi, purché questa compressione sia stata preformata dallo strumento compress.exe distribuito con il Resource Kit di Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="34c48-180">SymSrv is compatible with symbol stores that contain compressed files, as long as this compression has been preformed with the compress.exe tool that was distributed with the Windows Server 2003 Resource Kit.</span></span> <span data-ttu-id="34c48-181">I file compressi devono avere un carattere di sottolineatura come ultimo carattere nelle estensioni di file, ad esempio Module1. PD \_ o Module2. DB \_ .</span><span class="sxs-lookup"><span data-stu-id="34c48-181">Compressed files should have an underscore as the last character in their file extensions (for example, module1.pd\_ or module2.db\_).</span></span> <span data-ttu-id="34c48-182">Per informazioni dettagliate, vedere [uso di SymStore](using-symstore.md).</span><span class="sxs-lookup"><span data-stu-id="34c48-182">For details, see [Using SymStore](using-symstore.md).</span></span>

<span data-ttu-id="34c48-183">Quando si esegue la propagazione, i file non vengono decompressi, a meno che l'archivio di destinazione non sia l'archivio più a sinistra nel percorso.</span><span class="sxs-lookup"><span data-stu-id="34c48-183">When cascading, files are not uncompressed unless the target store is the leftmost store in the path.</span></span> <span data-ttu-id="34c48-184">Se è presente un solo archivio nel percorso e contiene un file compresso, SymSrv copierà il file nell'archivio downstream predefinito e lo aprirà da qui, anche se l'archivio downstream predefinito non è indicato nel percorso dei simboli.</span><span class="sxs-lookup"><span data-stu-id="34c48-184">If there is only one store in the path and it contains a compressed file, SymSrv will copy the file to the default downstream store and open it from there, even though the default downstream store is not indicated in they symbol path.</span></span>

<span data-ttu-id="34c48-185">**DbgHelp 6,1 e versioni precedenti:** Se i file nell'archivio master sono compressi, è necessario utilizzare un archivio downstream.</span><span class="sxs-lookup"><span data-stu-id="34c48-185">**DbgHelp 6.1 and earlier.:** If the files in the master store are compressed, you must use a downstream store.</span></span> <span data-ttu-id="34c48-186">SymSrv decomprimerà tutti i file prima di copiarli nell'archivio downstream.</span><span class="sxs-lookup"><span data-stu-id="34c48-186">SymSrv will uncompress all files before copying them to the downstream store.</span></span>

## <a name="deleting-the-cache"></a><span data-ttu-id="34c48-187">Eliminazione della cache</span><span class="sxs-lookup"><span data-stu-id="34c48-187">Deleting the Cache</span></span>

<span data-ttu-id="34c48-188">Se si usa un archivio downstream come cache, è possibile eliminare questa directory in qualsiasi momento per risparmiare spazio su disco.</span><span class="sxs-lookup"><span data-stu-id="34c48-188">If you are using a downstream store as a cache, you can delete this directory at any time to save disk space.</span></span>

<span data-ttu-id="34c48-189">È possibile disporre di un archivio di simboli vast che include i file di simboli per molti programmi o versioni di Windows diverse.</span><span class="sxs-lookup"><span data-stu-id="34c48-189">It is possible to have a vast symbol store that includes symbol files for many different programs or Windows versions.</span></span> <span data-ttu-id="34c48-190">Se si aggiorna la versione di Windows utilizzata nel computer di destinazione, i file di simboli memorizzati nella cache corrisponderanno a quelli della versione precedente.</span><span class="sxs-lookup"><span data-stu-id="34c48-190">If you upgrade the version of Windows used on your target computer, the cached symbol files will all match the earlier version.</span></span> <span data-ttu-id="34c48-191">Questi file memorizzati nella cache non saranno più usati e pertanto questo potrebbe essere il momento giusto per eliminare la cache.</span><span class="sxs-lookup"><span data-stu-id="34c48-191">These cached files will not be of any further use, and therefore this might be a good time to delete the cache.</span></span>

<span data-ttu-id="34c48-192">Strumenti di debug per Windows è dotato di un'utilità denominata agestore.exe che consente di rimuovere selettivamente i file da un albero di directory, lasciando i file usati più di recente.</span><span class="sxs-lookup"><span data-stu-id="34c48-192">Debugging Tools for Windows comes with a utility called agestore.exe that will selectively remove files from a directory tree, leaving the most recently used files.</span></span> <span data-ttu-id="34c48-193">Questo strumento è progettato per eliminare i file inutilizzati dagli archivi dei server di simboli.</span><span class="sxs-lookup"><span data-stu-id="34c48-193">This tool is designed for pruning out unused files from symbol server stores.</span></span> <span data-ttu-id="34c48-194">Consente di controllare molte opzioni, tra cui gli algoritmi di riduzione delle dimensioni di data e di directory.</span><span class="sxs-lookup"><span data-stu-id="34c48-194">It allows you to control many options including cut off date and directory size algorithms.</span></span>

## <a name="flat-cache-directory"></a><span data-ttu-id="34c48-195">Directory della cache flat</span><span class="sxs-lookup"><span data-stu-id="34c48-195">Flat Cache Directory</span></span>

<span data-ttu-id="34c48-196">È possibile dichiarare l'archivio downstream predefinito come una directory flat, anziché una struttura ad albero di simboli standard.</span><span class="sxs-lookup"><span data-stu-id="34c48-196">It is possible to declare the default downstream store as a flat directory, rather than a standard symbol tree structure.</span></span> <span data-ttu-id="34c48-197">A tale scopo, chiamare la funzione [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) con **la \_ \_ directory SYMOPT Flat** , che imposta anche l'opzione di **\_ \_ \_ archiviazione predefinita SSRVOPT Flat** in SymSrv.</span><span class="sxs-lookup"><span data-stu-id="34c48-197">To do so, call the [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) function with **SYMOPT\_FLAT\_DIRECTORY** (this also sets the **SSRVOPT\_FLAT\_DEFAULT\_STORE** option in SymSrv).</span></span> <span data-ttu-id="34c48-198">Assicurarsi di chiamare [**SymSetHomeDirectory**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsethomedirectory) prima di procedere. in caso contrario, i file di simboli possono essere scritti nella directory del programma.</span><span class="sxs-lookup"><span data-stu-id="34c48-198">Be sure to call [**SymSetHomeDirectory**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsethomedirectory) before doing so; otherwise, the symbol files can be written to the program directory.</span></span>

## <a name="pointer-files"></a><span data-ttu-id="34c48-199">File puntatore</span><span class="sxs-lookup"><span data-stu-id="34c48-199">Pointer Files</span></span>

<span data-ttu-id="34c48-200">SymStore consente di creare e usare file che puntano a un file di destinazione invece che al file di destinazione.</span><span class="sxs-lookup"><span data-stu-id="34c48-200">SymStore can create and use files that point to a target file rather than the target file itself.</span></span> <span data-ttu-id="34c48-201">Se un archivio di simboli contiene un file di puntatore di questo tipo, l'impostazione predefinita consiste nel copiare il file dal percorso indicato nel file del puntatore nell'archivio.</span><span class="sxs-lookup"><span data-stu-id="34c48-201">If a symbol store contains such a pointer file, the default is to copy the file from the location indicated in the pointer file to the store.</span></span> <span data-ttu-id="34c48-202">Per configurare un archivio in modo tale che il file del puntatore venga copiato al posto del file a cui fa riferimento, creare un file denominato wantsptr.txt nella radice dell'archivio di destinazione.</span><span class="sxs-lookup"><span data-stu-id="34c48-202">To configure a store such that the pointer file is copied instead of the file it points to, create a file named wantsptr.txt in the root of the target store.</span></span> <span data-ttu-id="34c48-203">Il contenuto di wantsptr.txt non è importante, ma solo la presenza del file.</span><span class="sxs-lookup"><span data-stu-id="34c48-203">The contents of wantsptr.txt are not important, only the presence of the file.</span></span>

## <a name="excluding-files-from-symbols-list"></a><span data-ttu-id="34c48-204">Esclusione di file dall'elenco di simboli</span><span class="sxs-lookup"><span data-stu-id="34c48-204">Excluding Files from Symbols List</span></span>

<span data-ttu-id="34c48-205">Per escludere i file da una ricerca di simboli, è possibile specificarne i nomi in symsrv.ini o nel registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="34c48-205">To exclude files from a symbols search, you can specify their names in symsrv.ini or in the registry.</span></span> <span data-ttu-id="34c48-206">Per specificare i file in symsrv.ini, creare una sezione esclusioni e elencare i file.</span><span class="sxs-lookup"><span data-stu-id="34c48-206">To specify the files in symsrv.ini, create a section named Exclusions and list the files.</span></span> <span data-ttu-id="34c48-207">I nomi file possono contenere caratteri jolly, come illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="34c48-207">The file names can contain wildcards, as shown in the following example:</span></span>

``` syntax
[Exclusions]
dbghelp.pdb
symsrv.*
mso*
```

<span data-ttu-id="34c48-208">Symsrv.ini deve trovarsi nella stessa directory in cui risiede symsrv.dll.</span><span class="sxs-lookup"><span data-stu-id="34c48-208">Symsrv.ini should be located in the same directory that symsrv.dll resides.</span></span> <span data-ttu-id="34c48-209">Nella maggior parte delle installazioni, il file non esiste e sarà necessario crearne uno nuovo.</span><span class="sxs-lookup"><span data-stu-id="34c48-209">In most installations, the file does not exist and you will need to create a new one.</span></span>

<span data-ttu-id="34c48-210">In alternativa, è possibile archiviare i file da escludere nel registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="34c48-210">Alternatively, you can store the files to be excluded in the registry.</span></span> <span data-ttu-id="34c48-211">Creare la seguente chiave del registro di sistema: **HKEY \_ Local \_ Machine \\ software \\ Microsoft \\ Symbol Server \\ esclusioni**.</span><span class="sxs-lookup"><span data-stu-id="34c48-211">Create the following registry key: **HKEY\_LOCAL\_MACHINE\\Software\\Microsoft\\Symbol Server\\Exclusions**.</span></span> <span data-ttu-id="34c48-212">Archiviare ogni nome di file come valore stringa (REG \_ SZ) in questa chiave.</span><span class="sxs-lookup"><span data-stu-id="34c48-212">Store each file name as a string value (REG\_SZ) within this key.</span></span> <span data-ttu-id="34c48-213">Il nome del valore stringa specifica il nome del file da escludere.</span><span class="sxs-lookup"><span data-stu-id="34c48-213">The name of the string value specifies the name of the file to be excluded.</span></span> <span data-ttu-id="34c48-214">È possibile usare il contenuto del valore stringa per archiviare un commento che descrive il motivo per cui il file viene escluso.</span><span class="sxs-lookup"><span data-stu-id="34c48-214">You can use the contents of the string value to store a comment describing why the file is being excluded.</span></span>

## <a name="installation"></a><span data-ttu-id="34c48-215">Installazione</span><span class="sxs-lookup"><span data-stu-id="34c48-215">Installation</span></span>

<span data-ttu-id="34c48-216">Il server di simboli SymSrv (symsrv.dll) è incluso nel pacchetto degli strumenti di debug per Windows.</span><span class="sxs-lookup"><span data-stu-id="34c48-216">The SymSrv (symsrv.dll) symbol server is included in the Debugging Tools for Windows package.</span></span> <span data-ttu-id="34c48-217">Deve essere installato nella stessa directory della copia di dbghelp.dll che si sta caricando.</span><span class="sxs-lookup"><span data-stu-id="34c48-217">It must be installed in the same directory as the copy of dbghelp.dll that you are loading.</span></span> <span data-ttu-id="34c48-218">Per ulteriori informazioni, vedere [chiamata della libreria DbgHelp](calling-the-dbghelp-library.md).</span><span class="sxs-lookup"><span data-stu-id="34c48-218">For more details, see [Calling the DbgHelp Library](calling-the-dbghelp-library.md).</span></span>

 

 



