---
title: Classe helper Windows Filtering Platform estendibile
description: Windows Filtering Platform (WFP) include una classe helper NDF (Network Diagnostics Framework), denominata FPHC (Filtering Platform Helper Class).
ms.assetid: 006ea30c-8682-4a3d-803a-73dba5162696
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 858835c1a649602293ed042c13205ca982de9258
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "103963163"
---
# <a name="windows-filtering-platform-extensible-helper-class"></a><span data-ttu-id="c8f36-103">Classe helper Windows Filtering Platform estendibile</span><span class="sxs-lookup"><span data-stu-id="c8f36-103">Windows Filtering Platform Extensible Helper Class</span></span>

<span data-ttu-id="c8f36-104">[Windows Filtering Platform (WFP](/windows/desktop/FWP/windows-filtering-platform-start-page) ) include una classe helper NDF (Network Diagnostics Framework), denominata fphc (Filtering Platform Helper Class).</span><span class="sxs-lookup"><span data-stu-id="c8f36-104">The [Windows Filtering Platform (WFP)](/windows/desktop/FWP/windows-filtering-platform-start-page) includes a Network Diagnostics Framework (NDF) helper class, called the Filtering Platform helper class (FPHC).</span></span> <span data-ttu-id="c8f36-105">FPHC consente di identificare le cause principali dei problemi di connettività causati da WFP.</span><span class="sxs-lookup"><span data-stu-id="c8f36-105">FPHC can help identify the root causes of connectivity issues caused by WFP.</span></span> <span data-ttu-id="c8f36-106">Gli sviluppatori di firewall di terze parti possono implementare le proprie classi helper NDF.</span><span class="sxs-lookup"><span data-stu-id="c8f36-106">Third-party firewall developers can implement their own NDF helper classes.</span></span> <span data-ttu-id="c8f36-107">L'estendibilità di FPHC consente di richiamare le classi helper di terze parti durante la diagnostica.</span><span class="sxs-lookup"><span data-stu-id="c8f36-107">FPHC extensibility allows these third-party helper classes to be invoked during diagnostics.</span></span>

<span data-ttu-id="c8f36-108">In questo argomento si presuppone una certa familiarità con l' [API PAM](/windows/desktop/FWP/windows-filtering-platform-start-page).</span><span class="sxs-lookup"><span data-stu-id="c8f36-108">This topic assumes familiarity with the [WFP API](/windows/desktop/FWP/windows-filtering-platform-start-page).</span></span>

## <a name="why-extend-the-fphc"></a><span data-ttu-id="c8f36-109">Perché estendere il FPHC?</span><span class="sxs-lookup"><span data-stu-id="c8f36-109">Why Extend the FPHC?</span></span>

<span data-ttu-id="c8f36-110">Tutti gli sviluppatori che scrivono applicazioni che chiamano l'API WFP devono scrivere una classe helper NDF che estende FPHC.</span><span class="sxs-lookup"><span data-stu-id="c8f36-110">All developers that write applications that call the WFP API should write an NDF helper class that extends FPHC.</span></span>

<span data-ttu-id="c8f36-111">FPHC è in grado di identificare WFP come causa di un problema di connettività.</span><span class="sxs-lookup"><span data-stu-id="c8f36-111">FPHC can identify WFP as the cause of a connectivity issue.</span></span> <span data-ttu-id="c8f36-112">Se disponibile, FPHC può anche identificare il provider che ha creato il filtro che blocca il traffico di rete.</span><span class="sxs-lookup"><span data-stu-id="c8f36-112">If available, FPHC can also identify the provider that created the filter that is blocking network traffic.</span></span> <span data-ttu-id="c8f36-113">FPHC passa queste informazioni a NDF, che a sua volta può notificare all'utente che il PAM sta causando il problema di connettività e fornire il nome del provider che blocca il traffico.</span><span class="sxs-lookup"><span data-stu-id="c8f36-113">FPHC passes this information to NDF, which in turn can then notify the user that WFP is causing the connectivity problem and give the name of the provider blocking traffic.</span></span>

<span data-ttu-id="c8f36-114">Tuttavia, FPHC non può suggerire un'azione correttiva all'utente, né può fornire il motivo per cui il filtro blocca il traffico verso l'utente.</span><span class="sxs-lookup"><span data-stu-id="c8f36-114">However, the FPHC cannot suggest a corrective action to the user, nor can it provide the reason that the filter is blocking traffic to the user.</span></span> <span data-ttu-id="c8f36-115">Queste attività possono essere eseguite solo da un'estensione FPHC.</span><span class="sxs-lookup"><span data-stu-id="c8f36-115">Only a FPHC extension can perform those tasks.</span></span>

<span data-ttu-id="c8f36-116">Si consideri un'applicazione firewall di terze parti che chiama l'API Pam.</span><span class="sxs-lookup"><span data-stu-id="c8f36-116">Consider a third-party firewall application that calls the WFP API.</span></span> <span data-ttu-id="c8f36-117">Se il firewall di terze parti implementa un'estensione FPHC, è possibile implementare azioni personalizzate per gestire i problemi di connettività identificati da NDF.</span><span class="sxs-lookup"><span data-stu-id="c8f36-117">If the third-party firewall implements a FPHC extension, then custom actions can be implemented to handle connectivity issues identified by NDF.</span></span> <span data-ttu-id="c8f36-118">Quando NDF diagnostica che un'applicazione è stata bloccata dal firewall di terze parti, l'estensione FPHC può gestire l'evento di blocco.</span><span class="sxs-lookup"><span data-stu-id="c8f36-118">When NDF diagnoses that an application has been blocked by the third-party firewall, the FPHC extension can handle the blocking event.</span></span> <span data-ttu-id="c8f36-119">Un modo in cui l'estensione FPHC può gestire un evento consiste nel presentare all'utente un prompt per sbloccare un programma usando il firewall e quindi sbloccare il programma alla conferma dell'utente.</span><span class="sxs-lookup"><span data-stu-id="c8f36-119">One way that the FPHC extension could handle an event is to present the user with a prompt to unblock a program using the firewall and then unblock the program upon user confirmation.</span></span> <span data-ttu-id="c8f36-120">In alternativa, l'estensione FPHC può gestire un evento notificando all'utente il motivo per cui l'applicazione è stata bloccata, ad esempio un'applicazione è stata bloccata perché era considerata malware dal firewall.</span><span class="sxs-lookup"><span data-stu-id="c8f36-120">Alternatively, the FPHC extension could handle an event by notifying the user of the reason why the application was blocked, such as an application was blocked because it was considered malware by the firewall.</span></span>

## <a name="about-wfp-diagnostics"></a><span data-ttu-id="c8f36-121">Informazioni sulla diagnostica WFP</span><span class="sxs-lookup"><span data-stu-id="c8f36-121">About WFP Diagnostics</span></span>

<span data-ttu-id="c8f36-122">Quando NDF viene richiamato per diagnosticare un problema di rete, vengono contattate le classi helper per determinare la causa del problema.</span><span class="sxs-lookup"><span data-stu-id="c8f36-122">When NDF is invoked to diagnose a network issue, helper classes are contacted to determine the cause of the issue.</span></span> <span data-ttu-id="c8f36-123">Se una classe helper di livello superiore determina che un errore di rete potrebbe essere causato da WFP, viene generata un'ipotesi per FPHC in base alle informazioni disponibili.</span><span class="sxs-lookup"><span data-stu-id="c8f36-123">If a higher-level helper class determines that a network failure may be caused by WFP, it generates a hypothesis for FPHC based on available information.</span></span> <span data-ttu-id="c8f36-124">NDF passa questa ipotesi, sotto forma di diversi attributi evento, a FPHC.</span><span class="sxs-lookup"><span data-stu-id="c8f36-124">NDF passes this hypothesis, in the form of several event attributes, to FPHC.</span></span> <span data-ttu-id="c8f36-125">Questi attributi sono descritti in dettaglio nella sezione degli [attributi degli eventi di fphc](#windows-filtering-platform-extensible-helper-class) riportata di seguito.</span><span class="sxs-lookup"><span data-stu-id="c8f36-125">These attributes are described in detail in the [FPHC Event Attributes](#windows-filtering-platform-extensible-helper-class) section below.</span></span>

<span data-ttu-id="c8f36-126">Un problema di rete può essere descritto come un problema di connettività che influisce su un tentativo di connessione specifico.</span><span class="sxs-lookup"><span data-stu-id="c8f36-126">A network issue can be described as a connectivity problem affecting a particular connection attempt.</span></span> <span data-ttu-id="c8f36-127">Ad esempio, è possibile che l'utente abbia accidentalmente bloccato un'applicazione facendo clic inavvertitamente su **non consentire**.</span><span class="sxs-lookup"><span data-stu-id="c8f36-127">For example, the user may have accidentally blocked an application by inadvertently clicking **Don't allow**.</span></span> <span data-ttu-id="c8f36-128">Il firewall bloccherà quindi l'applicazione dal binding a qualsiasi porta.</span><span class="sxs-lookup"><span data-stu-id="c8f36-128">The firewall will then block the application from binding to any port.</span></span> <span data-ttu-id="c8f36-129">L'utente, non sapendo perché l'applicazione è bloccata, può provare a diagnosticare il problema tramite un punto di ingresso offerto dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c8f36-129">The user, not knowing why the application is blocked, may try to diagnose the issue through an entry point offered by the application.</span></span> <span data-ttu-id="c8f36-130">FPHC osserverà i log e, se trova una corrispondenza, recupererà l'ID del filtro e l'ID del provider di quel particolare filtro.</span><span class="sxs-lookup"><span data-stu-id="c8f36-130">FPHC will look at the logs, and if it finds a match it will retrieve the filter ID and the provider ID of that particular filter.</span></span> <span data-ttu-id="c8f36-131">A questo punto, FPHC sa chi è il proprietario di quel filtro e passa il processo diagnostico alla classe helper appropriata per un'ulteriore diagnosi.</span><span class="sxs-lookup"><span data-stu-id="c8f36-131">At this point, FPHC knows who the owner of that filter is, and it will hand over the diagnostic process to the appropriate helper class for further diagnosis.</span></span>

<span data-ttu-id="c8f36-132">L'evento più recente nei registri eventi di WFP per trovare la corrispondenza con gli attributi è selezionato come pertinente per il problema di rete.</span><span class="sxs-lookup"><span data-stu-id="c8f36-132">The most recent event in the WFP event logs to match the attributes is selected as being relevant to the network issue.</span></span> <span data-ttu-id="c8f36-133">Se non viene trovato alcun evento corrispondente e l'ora in cui si è verificato l'evento viene analizzato nel registro WFP, FPHC indica a NDF che è integro.</span><span class="sxs-lookup"><span data-stu-id="c8f36-133">If no matching events are found and the time the event happened is covered in the WFP log, FPHC indicates to NDF that it is healthy.</span></span> <span data-ttu-id="c8f36-134">Se non vengono trovati eventi corrispondenti e i log del WFP non includono l'ora in cui si è verificato l'evento, FPHC restituisce uno stato indeterminato a NDF.</span><span class="sxs-lookup"><span data-stu-id="c8f36-134">If no matching events are found and the WFP logs do not include the time the event occurred, FPHC returns an indeterminate status to NDF.</span></span>

<span data-ttu-id="c8f36-135">Se viene trovato un evento corrispondente, FPHC usa l'ID del provider del filtro che ha provocato l'evento per identificare il provider della regola di sicurezza che ha bloccato la connettività.</span><span class="sxs-lookup"><span data-stu-id="c8f36-135">If a matching event is found, FPHC uses the provider ID of the filter which caused the event to identify the provider of the security rule that blocked connectivity.</span></span> <span data-ttu-id="c8f36-136">FPHC verifica quindi se esiste un'estensione della classe helper per quel provider.</span><span class="sxs-lookup"><span data-stu-id="c8f36-136">FPHC then checks whether a helper class extension exists for that provider.</span></span> <span data-ttu-id="c8f36-137">Se ne viene trovato uno, FPHC genera un'ipotesi per quel provider, quindi NDF richiama l'estensione.</span><span class="sxs-lookup"><span data-stu-id="c8f36-137">If one is found, FPHC generates a hypothesis for that provider and then NDF invokes the extension.</span></span> <span data-ttu-id="c8f36-138">L'estensione deve restituire all'utente informazioni utili di diagnostica e ripristino.</span><span class="sxs-lookup"><span data-stu-id="c8f36-138">The extension should return helpful diagnostic and repair information to the user.</span></span>

## <a name="helper-class-registration"></a><span data-ttu-id="c8f36-139">Registrazione della classe helper</span><span class="sxs-lookup"><span data-stu-id="c8f36-139">Helper Class Registration</span></span>

<span data-ttu-id="c8f36-140">È necessario registrare un'estensione FPHC, come descritto in [registrare le estensioni della classe helper NDF](registering-ndf-helper-class-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="c8f36-140">A FPHC extension must be registered as described in [Registering NDF Helper Class Extensions](registering-ndf-helper-class-extensions.md).</span></span> <span data-ttu-id="c8f36-141">Gli sviluppatori che implementano una classe helper devono registrare le proprie estensioni per assicurarsi che l'estensione venga chiamata da NDF quando appropriato.</span><span class="sxs-lookup"><span data-stu-id="c8f36-141">Developers implementing a helper class must register their extensions to ensure that the extension is called by NDF when appropriate.</span></span> <span data-ttu-id="c8f36-142">L' *attributo corrispondente* descritto di seguito deve essere archiviato nel registro di **sistema in HKLM \\ System \\ CurrentControlSet \\ Control \\ NetDiagFx** \\ *VendorName* \\ **HostDLLs** \\ *Helper Class dll* \\ **HelperClasses** \\ *Helper Class Name* \\ **MatchAttributes**.</span><span class="sxs-lookup"><span data-stu-id="c8f36-142">The *matching attribute* described below must be stored in the registry under **HKLM\\System\\CurrentControlSet\\Control\\NetDiagFx**\\*VendorName*\\**HostDLLs**\\*Helper Class DLL*\\**HelperClasses**\\*Helper Class Name*\\**MatchAttributes**.</span></span>

<span data-ttu-id="c8f36-143">La tabella seguente illustra l'attributo corrispondente usato per identificare l'ipotesi da usare nella diagnostica nel registro eventi di WFP.</span><span class="sxs-lookup"><span data-stu-id="c8f36-143">The following table shows the matching attribute used to identify the hypothesis to use in diagnostics in the WFP event log.</span></span> 

| <span data-ttu-id="c8f36-144">Nome</span><span class="sxs-lookup"><span data-stu-id="c8f36-144">Name</span></span>       | <span data-ttu-id="c8f36-145">Tipo</span><span class="sxs-lookup"><span data-stu-id="c8f36-145">Type</span></span>    | <span data-ttu-id="c8f36-146">Descrizione</span><span class="sxs-lookup"><span data-stu-id="c8f36-146">Description</span></span>                                                                                                                                                                                                                                                                                                 |
|------------|---------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="c8f36-147">ProviderID</span><span class="sxs-lookup"><span data-stu-id="c8f36-147">ProviderID</span></span> | <span data-ttu-id="c8f36-148">REG \_ SZ</span><span class="sxs-lookup"><span data-stu-id="c8f36-148">REG\_SZ</span></span> | <span data-ttu-id="c8f36-149">GUID dell'estensione FPHC.</span><span class="sxs-lookup"><span data-stu-id="c8f36-149">The GUID of the FPHC extension.</span></span> <span data-ttu-id="c8f36-150">Questo valore deve corrispondere al GUID del provider WFP.</span><span class="sxs-lookup"><span data-stu-id="c8f36-150">This value must be the same as the WFP Provider GUID.</span></span> <br/> <span data-ttu-id="c8f36-151">Questa stringa distingue tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="c8f36-151">This string is case-sensitive.</span></span> <span data-ttu-id="c8f36-152">Deve essere archiviato nel registro di sistema in lettere maiuscole con parentesi graffe e trattini di inclusione.</span><span class="sxs-lookup"><span data-stu-id="c8f36-152">It should be stored in the registry in upper case with enclosing braces and hyphens.</span></span> <span data-ttu-id="c8f36-153">Ad esempio, {C200E360-38C5-11CE-AE62-08002B2B79EF} è un ProviderID valido.</span><span class="sxs-lookup"><span data-stu-id="c8f36-153">For example, {C200E360-38C5-11CE-AE62-08002B2B79EF} is a valid ProviderID.</span></span><br/> |



 

<span data-ttu-id="c8f36-154">Quando il ProviderID di un filtro di blocco corrisponde a quello di una classe helper registrata, FPHC informa NDF per richiamare tale classe helper, estendendo in tal modo la funzionalità di diagnostica di FPHC.</span><span class="sxs-lookup"><span data-stu-id="c8f36-154">When the ProviderID of a blocking filter matches that of a registered helper class, FPHC informs NDF to invoke that helper class, thus extending the diagnostic capability of FPHC.</span></span>

## <a name="fphc-event-attributes"></a><span data-ttu-id="c8f36-155">Attributi dell'evento FPHC</span><span class="sxs-lookup"><span data-stu-id="c8f36-155">FPHC Event Attributes</span></span>

<span data-ttu-id="c8f36-156">Nella tabella seguente sono elencati gli attributi degli eventi associati a ogni evento corrispondente.</span><span class="sxs-lookup"><span data-stu-id="c8f36-156">The following table lists the event attributes associated with each matching event.</span></span> <span data-ttu-id="c8f36-157">Ogni attributo dell'evento viene archiviato in una struttura di [**\_ attributi Helper**](/windows/win32/api/ndattrib/ns-ndattrib-helper_attribute) .</span><span class="sxs-lookup"><span data-stu-id="c8f36-157">Each event attribute is stored in a [**HELPER\_ATTRIBUTE**](/windows/win32/api/ndattrib/ns-ndattrib-helper_attribute) structure.</span></span> <span data-ttu-id="c8f36-158">Questi attributi vengono passati da NDF a FPHC quando viene trovato un evento corrispondente.</span><span class="sxs-lookup"><span data-stu-id="c8f36-158">These attributes are passed by NDF to FPHC when a matching event is found.</span></span> <span data-ttu-id="c8f36-159">Questi possono a loro volta essere passati alle estensioni FPHC.</span><span class="sxs-lookup"><span data-stu-id="c8f36-159">These can in turn be passed to FPHC extensions.</span></span>



| <span data-ttu-id="c8f36-160">Attributo</span><span class="sxs-lookup"><span data-stu-id="c8f36-160">Attribute</span></span>     | <span data-ttu-id="c8f36-161">[**Attributo \_ Valore tipo**](/windows/win32/api/ndattrib/ne-ndattrib-attribute_type)</span><span class="sxs-lookup"><span data-stu-id="c8f36-161">[**ATTRIBUTE\_TYPE**](/windows/win32/api/ndattrib/ne-ndattrib-attribute_type) value</span></span> | <span data-ttu-id="c8f36-162">Descrizione</span><span class="sxs-lookup"><span data-stu-id="c8f36-162">Description</span></span>                                                                                                                               |
|---------------|-------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="c8f36-163">GUID del provider</span><span class="sxs-lookup"><span data-stu-id="c8f36-163">Provider GUID</span></span> | <span data-ttu-id="c8f36-164">AL \_ GUID</span><span class="sxs-lookup"><span data-stu-id="c8f36-164">AT\_GUID</span></span>                                        | <span data-ttu-id="c8f36-165">GUID del provider associato al filtro.</span><span class="sxs-lookup"><span data-stu-id="c8f36-165">The GUID of the provider associated with the filter.</span></span>                                                                                      |
| <span data-ttu-id="c8f36-166">Timestamp</span><span class="sxs-lookup"><span data-stu-id="c8f36-166">Timestamp</span></span>     | <span data-ttu-id="c8f36-167">\_stringa a ottetto \_</span><span class="sxs-lookup"><span data-stu-id="c8f36-167">AT\_OCTET\_STRING</span></span>                               | <span data-ttu-id="c8f36-168">Buffer di tipo FILETIME che specifica l'ora in cui si è verificato l'evento.</span><span class="sxs-lookup"><span data-stu-id="c8f36-168">A buffer of type FILETIME that specifies the time at which the event occurred.</span></span> <span data-ttu-id="c8f36-169">Questo timestamp può essere usato per identificare in modo univoco un evento.</span><span class="sxs-lookup"><span data-stu-id="c8f36-169">This time stamp can be used to uniquely identify an event.</span></span> |
| <span data-ttu-id="c8f36-170">ipProtocol</span><span class="sxs-lookup"><span data-stu-id="c8f36-170">ipProtocol</span></span>    | <span data-ttu-id="c8f36-171">A \_ UInt32</span><span class="sxs-lookup"><span data-stu-id="c8f36-171">AT\_UINT32</span></span>                                      | <span data-ttu-id="c8f36-172">Protocollo del livello di trasporto, in formato UINT8.</span><span class="sxs-lookup"><span data-stu-id="c8f36-172">The transport layer protocol, in UINT8 format.</span></span>                                                                                            |
| <span data-ttu-id="c8f36-173">LocalAddr</span><span class="sxs-lookup"><span data-stu-id="c8f36-173">LocalAddr</span></span>     | <span data-ttu-id="c8f36-174">ALLE \_ sockaddr</span><span class="sxs-lookup"><span data-stu-id="c8f36-174">AT\_SOCKADDR</span></span>                                    | <span data-ttu-id="c8f36-175">Indirizzo IP locale e porta, archiviati in una struttura [**\_ sockaddr di Diag**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) .</span><span class="sxs-lookup"><span data-stu-id="c8f36-175">The local IP address and port, stored in a [**DIAG\_SOCKADDR**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) structure.</span></span>                                             |
| <span data-ttu-id="c8f36-176">IndirizzoRemoto</span><span class="sxs-lookup"><span data-stu-id="c8f36-176">RemoteAddr</span></span>    | <span data-ttu-id="c8f36-177">ALLE \_ sockaddr</span><span class="sxs-lookup"><span data-stu-id="c8f36-177">AT\_SOCKADDR</span></span>                                    | <span data-ttu-id="c8f36-178">Indirizzo IP remoto e porta, archiviati in una struttura [**\_ sockaddr diag**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) .</span><span class="sxs-lookup"><span data-stu-id="c8f36-178">The remote IP address and port, stored in a [**DIAG\_SOCKADDR**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) structure.</span></span>                                            |
| <span data-ttu-id="c8f36-179">userId</span><span class="sxs-lookup"><span data-stu-id="c8f36-179">userId</span></span>        | <span data-ttu-id="c8f36-180">\_stringa a ottetto \_</span><span class="sxs-lookup"><span data-stu-id="c8f36-180">AT\_OCTET\_STRING</span></span>                               | <span data-ttu-id="c8f36-181">Buffer di tipo SID che rappresenta l'ID utente.</span><span class="sxs-lookup"><span data-stu-id="c8f36-181">A buffer of type SID that represents the userid.</span></span> <span data-ttu-id="c8f36-182">Se userId è di lunghezza 0, il SID non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="c8f36-182">If userId is of length 0, the SID is unavailable.</span></span>                                        |
| <span data-ttu-id="c8f36-183">appId</span><span class="sxs-lookup"><span data-stu-id="c8f36-183">appId</span></span>         | <span data-ttu-id="c8f36-184">in corrispondenza della \_ stringa</span><span class="sxs-lookup"><span data-stu-id="c8f36-184">AT\_STRING</span></span>                                      | <span data-ttu-id="c8f36-185">Buffer che archivia l'identificatore dell'applicazione recuperato.</span><span class="sxs-lookup"><span data-stu-id="c8f36-185">A buffer that stores the retrieved application identifier.</span></span> <span data-ttu-id="c8f36-186">Se appId ha un valore di L "", l'identificatore dell'applicazione non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="c8f36-186">If appId has a value of L"", the application identifier is unavailable.</span></span>        |



 

## <a name="handling-fphc-events"></a><span data-ttu-id="c8f36-187">Gestione degli eventi FPHC</span><span class="sxs-lookup"><span data-stu-id="c8f36-187">Handling FPHC Events</span></span>

<span data-ttu-id="c8f36-188">Prima di suggerire le informazioni di diagnostica e ripristino all'utente, un'estensione FPHC dovrebbe raccogliere più dati rispetto a quelli forniti dalle notifiche FPHC.</span><span class="sxs-lookup"><span data-stu-id="c8f36-188">Before suggesting diagnostic and repair information to the user, a FPHC extension should gather more data than is provided by the FPHC notifications.</span></span> <span data-ttu-id="c8f36-189">Questi dati possono essere acquisiti dalle [funzioni di gestione degli eventi di WFP](/windows/desktop/FWP/fwp-mgmt-functions).</span><span class="sxs-lookup"><span data-stu-id="c8f36-189">This data can be acquired from the [WFP Event Management Functions](/windows/desktop/FWP/fwp-mgmt-functions).</span></span> <span data-ttu-id="c8f36-190">Queste funzioni vengono illustrate nell'esempio [visualizzazione di eventi NET](/windows/desktop/FWP/displaying-net-events) .</span><span class="sxs-lookup"><span data-stu-id="c8f36-190">These functions are demonstrated in the [Displaying Net Events](/windows/desktop/FWP/displaying-net-events) sample.</span></span>

<span data-ttu-id="c8f36-191">Nell'SDK è incluso un esempio di gestione di eventi più dettagliato.</span><span class="sxs-lookup"><span data-stu-id="c8f36-191">A more detailed event management sample is included in the SDK.</span></span> <span data-ttu-id="c8f36-192">Il codice sorgente per l'esempio è disponibile nel percorso di installazione di SDK in C: \\ programmi \\ Microsoft SDK \\ Windows \\ <version number> \\ Samples \\ NetDs \\ WFP \\ DiagEvents.</span><span class="sxs-lookup"><span data-stu-id="c8f36-192">The source code for the sample can be found in the SDK installation location under C:\\Program Files\\Microsoft SDKs\\Windows\\<version number>\\Samples\\NetDs\\WFP\\DiagEvents.</span></span> <span data-ttu-id="c8f36-193">Windows Vista SDK è disponibile nell' [area download](https://www.microsoft.com/downloads/details.aspx?FamilyID=f26b1aa4-741a-433a-9be5-fa919850bdbf).</span><span class="sxs-lookup"><span data-stu-id="c8f36-193">The Windows Vista SDK is available from the [Download Center](https://www.microsoft.com/downloads/details.aspx?FamilyID=f26b1aa4-741a-433a-9be5-fa919850bdbf).</span></span>

## <a name="built-in-fphc-diagnostics"></a><span data-ttu-id="c8f36-194">Diagnostica FPHC incorporata</span><span class="sxs-lookup"><span data-stu-id="c8f36-194">Built-in FPHC Diagnostics</span></span>

<span data-ttu-id="c8f36-195">In assenza di un'estensione FPHC, FPHC è in grado di diagnosticare gli scenari elencati di seguito.</span><span class="sxs-lookup"><span data-stu-id="c8f36-195">In the absence of an FPHC extension, FPHC can diagnose the scenarios listed below.</span></span> <span data-ttu-id="c8f36-196">La maggior parte degli errori di connettività diagnosticati da FPHC si verifica perché i firewall bloccano il traffico.</span><span class="sxs-lookup"><span data-stu-id="c8f36-196">Most connectivity failures diagnosed by FPHC occur because firewalls block traffic.</span></span> <span data-ttu-id="c8f36-197">Gli scenari IPsec sono meno comuni.</span><span class="sxs-lookup"><span data-stu-id="c8f36-197">The IPsec scenarios are less common.</span></span>

<span data-ttu-id="c8f36-198">La tabella seguente illustra alcuni scenari che causano errori di connettività che possono essere diagnosticati da FPHC, oltre alla descrizione e alle informazioni di ripristino passate a NDF.</span><span class="sxs-lookup"><span data-stu-id="c8f36-198">The following table shows some scenarios causing connectivity failures that can be diagnosed by FPHC, along with the description and repair information passed to NDF.</span></span>



| <span data-ttu-id="c8f36-199">Scenario</span><span class="sxs-lookup"><span data-stu-id="c8f36-199">Scenario</span></span>                   | <span data-ttu-id="c8f36-200">Descrizione di basso livello di integrità</span><span class="sxs-lookup"><span data-stu-id="c8f36-200">Low health description</span></span>                                                                                                               | <span data-ttu-id="c8f36-201">Informazioni di ripristino</span><span class="sxs-lookup"><span data-stu-id="c8f36-201">Repair information</span></span>                   |
|----------------------------|--------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
| <span data-ttu-id="c8f36-202">Eliminazione del firewall</span><span class="sxs-lookup"><span data-stu-id="c8f36-202">Firewall drop</span></span>              | <span data-ttu-id="c8f36-203">Le impostazioni del firewall nel computer bloccano la connessione.</span><span class="sxs-lookup"><span data-stu-id="c8f36-203">The firewall settings on this computer are blocking the connection.</span></span>                                                                  | <span data-ttu-id="c8f36-204">Verificare le impostazioni del firewall.</span><span class="sxs-lookup"><span data-stu-id="c8f36-204">Verify your firewall settings.</span></span>       |
| <span data-ttu-id="c8f36-205">Errore in modalità principale</span><span class="sxs-lookup"><span data-stu-id="c8f36-205">Main Mode Failure</span></span>          | <span data-ttu-id="c8f36-206">Non è possibile connettersi a causa di una mancata corrispondenza dei criteri di sicurezza IPsec.</span><span class="sxs-lookup"><span data-stu-id="c8f36-206">You cannot connect because of an IPsec security policy mismatch.</span></span>                                                                     | <span data-ttu-id="c8f36-207">Contattare il proprietario del criterio IPsec.</span><span class="sxs-lookup"><span data-stu-id="c8f36-207">Contact the IPsec policy owner.</span></span>      |
| <span data-ttu-id="c8f36-208">Errore in modalità rapida</span><span class="sxs-lookup"><span data-stu-id="c8f36-208">Quick Mode Failure</span></span>         | <span data-ttu-id="c8f36-209">Non è possibile connettersi a causa di una mancata corrispondenza dei criteri di sicurezza IPsec.</span><span class="sxs-lookup"><span data-stu-id="c8f36-209">You cannot connect because of an IPsec security policy mismatch.</span></span>                                                                     | <span data-ttu-id="c8f36-210">Contattare il proprietario del criterio IPsec.</span><span class="sxs-lookup"><span data-stu-id="c8f36-210">Contact the IPsec policy owner.</span></span>      |
| <span data-ttu-id="c8f36-211">Errore della modalità utente</span><span class="sxs-lookup"><span data-stu-id="c8f36-211">User Mode Failure</span></span>          | <span data-ttu-id="c8f36-212">Non è possibile connettersi a causa di una mancata corrispondenza dei criteri di sicurezza IPsec.</span><span class="sxs-lookup"><span data-stu-id="c8f36-212">You cannot connect because of an IPsec security policy mismatch.</span></span>                                                                     | <span data-ttu-id="c8f36-213">Contattare il proprietario del criterio IPsec.</span><span class="sxs-lookup"><span data-stu-id="c8f36-213">Contact the IPsec policy owner.</span></span>      |
| <span data-ttu-id="c8f36-214">Errore delle credenziali</span><span class="sxs-lookup"><span data-stu-id="c8f36-214">Credential Failure</span></span>         | <span data-ttu-id="c8f36-215">Non è possibile connettersi perché l'autorità di certificazione radice (CA) del computer non corrisponde alla CA radice nel computer remoto.</span><span class="sxs-lookup"><span data-stu-id="c8f36-215">You cannot connect because the root certification authority (CA) on this computer does not match the root CA on the remote computer.</span></span> | <span data-ttu-id="c8f36-216">Aggiornare il certificato radice attendibile.</span><span class="sxs-lookup"><span data-stu-id="c8f36-216">Update the trusted root certificate.</span></span> |
| <span data-ttu-id="c8f36-217">Certificato scaduto</span><span class="sxs-lookup"><span data-stu-id="c8f36-217">Expired Certificate</span></span>        | <span data-ttu-id="c8f36-218">Il certificato utilizzato per l'autenticazione IPsec è scaduto.</span><span class="sxs-lookup"><span data-stu-id="c8f36-218">The certificate used for IPsec authentication has expired.</span></span>                                                                           | <span data-ttu-id="c8f36-219">Richiedere un certificato.</span><span class="sxs-lookup"><span data-stu-id="c8f36-219">Request a certificate.</span></span>               |
| <span data-ttu-id="c8f36-220">Altri errori relativi ai certificati</span><span class="sxs-lookup"><span data-stu-id="c8f36-220">Other certificate failures</span></span> | <span data-ttu-id="c8f36-221">Impossibile trovare un certificato valido per l'autenticazione IPsec.</span><span class="sxs-lookup"><span data-stu-id="c8f36-221">A valid certificate was not found for IPsec authentication.</span></span>                                                                          | <span data-ttu-id="c8f36-222">Richiedere un certificato.</span><span class="sxs-lookup"><span data-stu-id="c8f36-222">Request a certificate.</span></span>               |
| <span data-ttu-id="c8f36-223">Errore Kerberos</span><span class="sxs-lookup"><span data-stu-id="c8f36-223">Kerberos failure</span></span>           | <span data-ttu-id="c8f36-224">Il computer non fa parte di questo dominio.</span><span class="sxs-lookup"><span data-stu-id="c8f36-224">The computer is not part of this domain.</span></span>                                                                                             | <span data-ttu-id="c8f36-225">Aggiungere il computer a un dominio.</span><span class="sxs-lookup"><span data-stu-id="c8f36-225">Join this computer to a domain.</span></span>      |
| <span data-ttu-id="c8f36-226">Chiave precondivisa</span><span class="sxs-lookup"><span data-stu-id="c8f36-226">Preshared Key</span></span>              | <span data-ttu-id="c8f36-227">Reimpostare le chiavi già condivise.</span><span class="sxs-lookup"><span data-stu-id="c8f36-227">Reset the preshared keys.</span></span>                                                                                                            | <span data-ttu-id="c8f36-228">Reimpostare le chiavi già condivise.</span><span class="sxs-lookup"><span data-stu-id="c8f36-228">Reset the preshared keys.</span></span>            |



 

## <a name="related-topics"></a><span data-ttu-id="c8f36-229">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="c8f36-229">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c8f36-230">Piattaforma filtro Windows</span><span class="sxs-lookup"><span data-stu-id="c8f36-230">Windows Filtering Platform</span></span>](/windows/desktop/FWP/windows-filtering-platform-start-page)
</dt> <dt>

[<span data-ttu-id="c8f36-231">Progettazione di estensioni di classe helper NDF</span><span class="sxs-lookup"><span data-stu-id="c8f36-231">Designing NDF Helper Class Extensions</span></span>](designing-ndf-helper-class-extensions.md)
</dt> <dt>

[<span data-ttu-id="c8f36-232">Registrazione delle estensioni di classe helper NDF</span><span class="sxs-lookup"><span data-stu-id="c8f36-232">Registering NDF Helper Class Extensions</span></span>](registering-ndf-helper-class-extensions.md)
</dt> <dt>

[<span data-ttu-id="c8f36-233">Esempi di classi helper NDF</span><span class="sxs-lookup"><span data-stu-id="c8f36-233">NDF Helper Class Examples</span></span>](ndf-helper-class-examples.md)
</dt> </dl>

 

