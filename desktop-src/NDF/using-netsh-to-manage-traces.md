---
title: Uso di Netsh per gestire le tracce
description: In Windows 7, netsh.exe può essere utilizzato da un prompt dei comandi per abilitare e configurare le tracce di rete. In questa sezione vengono descritti alcuni dei comandi netsh.exe che consentono di risolvere i problemi di traccia, inclusa la nuova funzionalità di traccia Netsh.
ms.assetid: f0f0fc7b-7cfa-43c7-89a3-3b80050875f8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1978345da984ac90699b5355b36af18b9b285d5c
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/16/2019
ms.locfileid: "104396122"
---
# <a name="using-netsh-to-manage-traces"></a><span data-ttu-id="da663-104">Uso di Netsh per gestire le tracce</span><span class="sxs-lookup"><span data-stu-id="da663-104">Using Netsh to Manage Traces</span></span>

<span data-ttu-id="da663-105">In Windows 7, netsh.exe può essere utilizzato da un prompt dei comandi per abilitare e configurare le tracce di rete.</span><span class="sxs-lookup"><span data-stu-id="da663-105">In Windows 7, netsh.exe can be used from a command prompt to enable and configure network traces.</span></span> <span data-ttu-id="da663-106">In questa sezione vengono descritti alcuni dei comandi netsh.exe che consentono di risolvere i problemi di traccia, inclusa la nuova funzionalità di **traccia Netsh** .</span><span class="sxs-lookup"><span data-stu-id="da663-106">This section describes some of the netsh.exe commands which can help in troubleshooting tracing issues, including the new **netsh trace** functionality.</span></span> <span data-ttu-id="da663-107">Si noti che i comandi netsh devono essere eseguiti da un prompt dei comandi con privilegi elevati.</span><span class="sxs-lookup"><span data-stu-id="da663-107">Note that the netsh commands must be run from an elevated command prompt.</span></span>

## <a name="collecting-traces"></a><span data-ttu-id="da663-108">Raccolta di tracce</span><span class="sxs-lookup"><span data-stu-id="da663-108">Collecting traces</span></span>

<span data-ttu-id="da663-109">Gli scenari sono set predefiniti di provider di traccia che possono essere abilitati per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="da663-109">Scenarios are predefined sets of trace providers which can be enabled for troubleshooting.</span></span> <span data-ttu-id="da663-110">Per visualizzare l'elenco degli scenari correlati alla rete disponibili, digitare **netsh trace show Scenarios** (**netsh trace show providers** elenca tutti i provider disponibili, inclusi quelli che non sono rilevanti per la rete).</span><span class="sxs-lookup"><span data-stu-id="da663-110">To display the list of available network-related scenarios, type **netsh trace show scenarios** (**netsh trace show providers** lists every one of the available providers, including ones that are not relevant to networking).</span></span>

<span data-ttu-id="da663-111">Quando è stato identificato uno scenario rilevante per i problemi, è possibile visualizzare un elenco di tutti i provider inclusi in tale scenario.</span><span class="sxs-lookup"><span data-stu-id="da663-111">When you have identified a scenario that looks relevant to your issues, you can see a list of all of the providers included in that scenario.</span></span> <span data-ttu-id="da663-112">Ad esempio, per visualizzare tutti i provider abilitati nello scenario InternetClient, digitare **netsh trace show scenario InternetClient**.</span><span class="sxs-lookup"><span data-stu-id="da663-112">For example, to see all of the providers enabled under the InternetClient scenario, type **netsh trace show scenario internetclient**.</span></span>

<span data-ttu-id="da663-113">È possibile avviare una traccia per tutti i provider in uno scenario o in un set di scenari specifico.</span><span class="sxs-lookup"><span data-stu-id="da663-113">You can start a trace for all of the providers in a given scenario or set of scenarios.</span></span> <span data-ttu-id="da663-114">Ad esempio, per avviare una traccia per tutti i provider abilitati nello scenario InternetClient, digitare **netsh trace start scenario = InternetClient**.</span><span class="sxs-lookup"><span data-stu-id="da663-114">For example, to start a trace for all of the providers enabled under the InternetClient scenario, type **netsh trace start scenario=internetclient**.</span></span> <span data-ttu-id="da663-115">Per acquisire i provider per più di uno scenario, è possibile specificare tutti gli scenari appropriati, ad esempio lo **scenario di avvio della traccia Netsh = scenario filesharing = DirectAccess**.</span><span class="sxs-lookup"><span data-stu-id="da663-115">To capture providers for more than one scenario, you can specify all of the appropriate scenarios, such as **netsh trace start scenario=FileSharing scenario=DirectAccess**.</span></span> <span data-ttu-id="da663-116">Si noti che è possibile abilitare una sola sessione di traccia alla volta. non è possibile acquisire contemporaneamente le informazioni di traccia da diversi set di provider in file distinti.</span><span class="sxs-lookup"><span data-stu-id="da663-116">Note that only one tracing session may be enabled at a time; it is not possible to simultaneously capture trace information from different sets of providers in separate files.</span></span>

<span data-ttu-id="da663-117">È inoltre possibile avviare una traccia per i provider aggiuntivi non inclusi in tale scenario specifico.</span><span class="sxs-lookup"><span data-stu-id="da663-117">You can also start a trace for additional providers not included in that particular scenario.</span></span> <span data-ttu-id="da663-118">Ad esempio, potrebbe essere necessario avviare le tracce per tutti i provider abilitati nello scenario WLAN e anche il provider DHCP.</span><span class="sxs-lookup"><span data-stu-id="da663-118">For example, you might want to start traces for all of the providers enabled under the WLAN scenario and also the DHCP provider.</span></span> <span data-ttu-id="da663-119">A tale scopo, digitare **netsh trace start scenario = WLAN provider = Microsoft-Windows-DHCP-client**.</span><span class="sxs-lookup"><span data-stu-id="da663-119">To do this, type **netsh trace start scenario=wlan provider=Microsoft-Windows-Dhcp-Client**.</span></span>

<span data-ttu-id="da663-120">È anche possibile visualizzare altri dettagli su un provider specifico digitando **netsh trace show provider** seguito dal nome del provider.</span><span class="sxs-lookup"><span data-stu-id="da663-120">You can also see more details about a specific provider by typing **netsh trace show provider** followed by the provider name.</span></span>

<span data-ttu-id="da663-121">Per visualizzare tutte le opzioni e i filtri disponibili, è possibile digitare **netsh trace start/?**.</span><span class="sxs-lookup"><span data-stu-id="da663-121">To see all of the options and filters available you can type **netsh trace start /?**.</span></span>

<span data-ttu-id="da663-122">Per arrestare la traccia, digitare **netsh trace stop**.</span><span class="sxs-lookup"><span data-stu-id="da663-122">To stop tracing, type **netsh trace stop**.</span></span>

## <a name="using-the-output-files"></a><span data-ttu-id="da663-123">Uso dei file di output</span><span class="sxs-lookup"><span data-stu-id="da663-123">Using the output files</span></span>

<span data-ttu-id="da663-124">Quando la traccia viene arrestata, per impostazione predefinita vengono generati due file: un file di log di traccia eventi (ETL) e un file con estensione cab.</span><span class="sxs-lookup"><span data-stu-id="da663-124">When tracing is stopped, two files are generated by default: an Event Trace Log (ETL) file and a .cab file.</span></span>

<span data-ttu-id="da663-125">Gli eventi di traccia vengono raccolti nel file ETL, che possono essere visualizzati tramite strumenti come Network Monitor.</span><span class="sxs-lookup"><span data-stu-id="da663-125">Trace events are collected in the ETL file, which can be viewed using tools such as Network Monitor.</span></span> <span data-ttu-id="da663-126">Per impostazione predefinita, il file ETL verrà denominato NetTrace. etl oppure è possibile specificare un nome diverso includendo **TRACEFILE = filename. etl** all'avvio della traccia.</span><span class="sxs-lookup"><span data-stu-id="da663-126">The ETL file will be named nettrace.etl by default, or you can specify a different name by including **tracefile=filename.etl** when starting the trace.</span></span>

<span data-ttu-id="da663-127">Il file con estensione cab contiene informazioni dettagliate sul software e sull'hardware del sistema, ad esempio le informazioni sull'adapter, la compilazione, il sistema operativo e le impostazioni wireless.</span><span class="sxs-lookup"><span data-stu-id="da663-127">The .cab file contains rich information about the software and hardware on the system such as the adapter information, build, operating system, and wireless settings.</span></span> <span data-ttu-id="da663-128">Il file con estensione cab verrà denominato nettrace.cab per impostazione predefinita, a meno che non sia stato specificato un altro nome come indicato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="da663-128">The .cab file will be named nettrace.cab by default, unless another name was specified as indicated above.</span></span>

<span data-ttu-id="da663-129">Il file con estensione cab conterrà due file, che avranno sempre lo stesso nome.</span><span class="sxs-lookup"><span data-stu-id="da663-129">This .cab file will contain two files, which will always have the same name.</span></span> <span data-ttu-id="da663-130">Report. etl è un'altra copia delle stesse informazioni incluse in NetTrace. etl.</span><span class="sxs-lookup"><span data-stu-id="da663-130">Report.etl is another copy of the same information included in nettrace.etl.</span></span> <span data-ttu-id="da663-131">Il file report.html include informazioni aggiuntive sugli eventi di traccia e le altre informazioni raccolte.</span><span class="sxs-lookup"><span data-stu-id="da663-131">The report.html file includes additional information about the trace events and the other information collected.</span></span> <span data-ttu-id="da663-132">Per ricevere la maggior parte dei dettagli disponibili, includere il comando **report = yes** all'avvio di una traccia.</span><span class="sxs-lookup"><span data-stu-id="da663-132">To receive the most details available, include the command **report = yes** when starting a trace.</span></span>

## <a name="using-filters-to-reduce-the-amount-of-data-in-the-etl-trace-file"></a><span data-ttu-id="da663-133">Utilizzo dei filtri per ridurre la quantità di dati nel file di traccia ETL</span><span class="sxs-lookup"><span data-stu-id="da663-133">Using filters to reduce the amount of data in the ETL trace file</span></span>

<span data-ttu-id="da663-134">Quando le acquisizioni si verificano in un lungo periodo di tempo, il file di traccia ETL può diventare molto grande.</span><span class="sxs-lookup"><span data-stu-id="da663-134">When captures happen over a long period of time, the ETL trace file can become very large.</span></span> <span data-ttu-id="da663-135">Negli scenari in cui sono abilitati più provider, con conseguente traffico elevato, i vincoli del buffer ETW possono causare l'eliminazione di alcune tracce.</span><span class="sxs-lookup"><span data-stu-id="da663-135">In scenarios where multiple providers are enabled, resulting in high traffic, ETW buffer constraints may cause some traces to be dropped.</span></span> <span data-ttu-id="da663-136">A parte questa considerazione, la riduzione della quantità di dati nel file di traccia ETL può semplificare la risoluzione dei problemi riducendo la quantità di dati da rivedere.</span><span class="sxs-lookup"><span data-stu-id="da663-136">Aside from this consideration, reducing the amount of data in the ETL trace file can help make troubleshooting easier by reducing the amount of data to review.</span></span>

<span data-ttu-id="da663-137">I filtri di traccia Netsh possono essere utilizzati per ridurre le dimensioni del file di traccia ETL.</span><span class="sxs-lookup"><span data-stu-id="da663-137">Netsh trace filters can be used to reduce the ETL trace file size.</span></span> <span data-ttu-id="da663-138">Questi filtri di traccia sono livelli ETW e parole chiave che possono essere applicati a singoli provider.</span><span class="sxs-lookup"><span data-stu-id="da663-138">These trace filters are ETW levels and keywords that can be applied to individual providers.</span></span>

<span data-ttu-id="da663-139">Per visualizzare un elenco di filtri che è possibile applicare, digitare **netsh trace start/?**</span><span class="sxs-lookup"><span data-stu-id="da663-139">To see a list of filters which can be applied, type **netsh trace start /?**</span></span>

<span data-ttu-id="da663-140">Un esempio di filtro è **netsh trace start internetClient provider = Microsoft-Windows-TCPIP Level = 5 Keywords = UT: ReceivePath, UT: SendPath**.</span><span class="sxs-lookup"><span data-stu-id="da663-140">An example of a filter is **netsh trace start InternetClient provider=Microsoft-Windows-TCPIP level=5 keywords=ut:ReceivePath,ut:SendPath**.</span></span>

<span data-ttu-id="da663-141">In questo esempio, il livello è impostato su 5, il che significa che verrà visualizzato il numero massimo di eventi.</span><span class="sxs-lookup"><span data-stu-id="da663-141">In this example, the level is set to 5, which means that the maximum number of events will be shown.</span></span> <span data-ttu-id="da663-142">Nella tabella seguente sono illustrate le impostazioni disponibili:</span><span class="sxs-lookup"><span data-stu-id="da663-142">The following table shows the settings available:</span></span>



|       |               |                                                                            |
|-------|---------------|----------------------------------------------------------------------------|
| <span data-ttu-id="da663-143">Level</span><span class="sxs-lookup"><span data-stu-id="da663-143">Level</span></span> | <span data-ttu-id="da663-144">Impostazione</span><span class="sxs-lookup"><span data-stu-id="da663-144">Setting</span></span>       | <span data-ttu-id="da663-145">Descrizione</span><span class="sxs-lookup"><span data-stu-id="da663-145">Description</span></span>                                                                |
| <span data-ttu-id="da663-146">1</span><span class="sxs-lookup"><span data-stu-id="da663-146">1</span></span>     | <span data-ttu-id="da663-147">Critico</span><span class="sxs-lookup"><span data-stu-id="da663-147">Critical</span></span>      | <span data-ttu-id="da663-148">Verranno visualizzati solo gli eventi critici.</span><span class="sxs-lookup"><span data-stu-id="da663-148">Only critical events will be shown.</span></span>                                        |
| <span data-ttu-id="da663-149">2</span><span class="sxs-lookup"><span data-stu-id="da663-149">2</span></span>     | <span data-ttu-id="da663-150">Errors</span><span class="sxs-lookup"><span data-stu-id="da663-150">Errors</span></span>        | <span data-ttu-id="da663-151">Verranno visualizzati gli errori e gli eventi critici.</span><span class="sxs-lookup"><span data-stu-id="da663-151">Critical events and errors will be shown.</span></span>                                  |
| <span data-ttu-id="da663-152">3</span><span class="sxs-lookup"><span data-stu-id="da663-152">3</span></span>     | <span data-ttu-id="da663-153">Avvisi</span><span class="sxs-lookup"><span data-stu-id="da663-153">Warnings</span></span>      | <span data-ttu-id="da663-154">Verranno visualizzati gli eventi, gli errori e gli avvisi critici.</span><span class="sxs-lookup"><span data-stu-id="da663-154">Critical events, errors, and warnings will be shown.</span></span>                       |
| <span data-ttu-id="da663-155">4</span><span class="sxs-lookup"><span data-stu-id="da663-155">4</span></span>     | <span data-ttu-id="da663-156">Informativo</span><span class="sxs-lookup"><span data-stu-id="da663-156">Informational</span></span> | <span data-ttu-id="da663-157">Verranno visualizzati gli eventi critici, gli errori, gli avvisi e gli eventi informativi.</span><span class="sxs-lookup"><span data-stu-id="da663-157">Critical events, errors, warnings, and informational events will be shown.</span></span> |
| <span data-ttu-id="da663-158">5</span><span class="sxs-lookup"><span data-stu-id="da663-158">5</span></span>     | <span data-ttu-id="da663-159">Dettagliato</span><span class="sxs-lookup"><span data-stu-id="da663-159">Verbose</span></span>       | <span data-ttu-id="da663-160">Verranno visualizzati tutti gli eventi.</span><span class="sxs-lookup"><span data-stu-id="da663-160">All events will be shown.</span></span>                                                  |



 

<span data-ttu-id="da663-161">Le parole chiave **UT: ReceivePath** e **UT: SentPath** filtrano gli eventi in modo da visualizzare solo gli eventi tracciati nel percorso di ricezione o di trasmissione.</span><span class="sxs-lookup"><span data-stu-id="da663-161">The keywords **ut:ReceivePath** and **ut:SentPath** filters the events to show only those events traced on the receive or send path.</span></span> <span data-ttu-id="da663-162">È possibile trovare un elenco completo di parole chiave per un provider specifico digitando **netsh trace show provider** seguito dal nome del provider.</span><span class="sxs-lookup"><span data-stu-id="da663-162">A complete list of keywords for a specific provider can be found by typing **netsh trace show provider** followed by the provider name.</span></span> <span data-ttu-id="da663-163">Se, ad esempio, si digita **netsh trace show provider Microsoft-Windows-TCPIP** , vengono visualizzate informazioni sul provider Microsoft-Windows-Tcpip, incluso un elenco di parole chiave.</span><span class="sxs-lookup"><span data-stu-id="da663-163">For example, typing **netsh trace show provider Microsoft-Windows-TCPIP** will display information about the Microsoft-Windows-TCPIP provider, including a list of keywords.</span></span>

<span data-ttu-id="da663-164">Netsh supporta inoltre la funzionalità di filtro dei pacchetti (simile a Network Monitor) quando l'acquisizione di pacchetti è attivata (impostando **capture = yes**).</span><span class="sxs-lookup"><span data-stu-id="da663-164">Netsh also supports packet filtering capability (similar to Network Monitor) when packet capturing is turned on (by setting **capture = yes**).</span></span> <span data-ttu-id="da663-165">Il filtro dei pacchetti può essere utilizzato per acquisire un numero limitato di pacchetti in un file di traccia.</span><span class="sxs-lookup"><span data-stu-id="da663-165">Packet filtering can be used to capture a limited number of packets in a trace file.</span></span> <span data-ttu-id="da663-166">Ad esempio, **netsh trace Start Capture = Yes IPv4. Address = = x.x.** x. x, dove x. x. x. x è l'indirizzo IP, acquisisce solo i pacchetti con traffico IPv4 con tale indirizzo di origine o di destinazione specifico.</span><span class="sxs-lookup"><span data-stu-id="da663-166">For example, **netsh trace start capture = yes ipv4.address == x.x.x.x** , where x.x.x.x is the IP address, will only capture packets with ipv4 traffic with that specific source or destination address.</span></span>

<span data-ttu-id="da663-167">Per ulteriori informazioni sull'utilizzo del filtro pacchetti, è possibile digitare **netsh trace show capturefilterHelp**.</span><span class="sxs-lookup"><span data-stu-id="da663-167">For additional information about how to use packet filtering, you can type **netsh trace show capturefilterHelp**.</span></span>

 

 




