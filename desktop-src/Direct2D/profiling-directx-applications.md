---
title: Profilatura di app DirectX
description: Viene illustrato come misurare alcune delle misurazioni più importanti del tempo di prestazioni per un'app DirectX usando gli strumenti XPerf e GPUView forniti come parte di Windows Performance Toolkit.
ms.assetid: 4B2F7273-C9B0-4DD3-B559-6220CDE62129
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0280389d4f8f2161e5e07f8906df7ea0484ad458
ms.sourcegitcommit: 37f276b5d887a3aad04b1ba86e390dea9d87e591
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/04/2021
ms.locfileid: "104565626"
---
# <a name="profiling-directx-apps"></a><span data-ttu-id="5899d-103">Profilatura di app DirectX</span><span class="sxs-lookup"><span data-stu-id="5899d-103">Profiling DirectX Apps</span></span>

<span data-ttu-id="5899d-104">Viene illustrato come misurare alcune delle misurazioni più importanti del tempo di prestazioni per un'app [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) usando gli strumenti **Xperf** e **GPUView** forniti come parte di Windows Performance Toolkit.</span><span class="sxs-lookup"><span data-stu-id="5899d-104">This shows you how to measure some of the most important performance time measurements for a [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) app using the **XPerf** and **GPUView** tools that ship as part of the Windows Performance Toolkit.</span></span> <span data-ttu-id="5899d-105">Non si tratta di una guida completa per comprendere gli strumenti, piuttosto che per l'analisi delle prestazioni delle app DirectX.</span><span class="sxs-lookup"><span data-stu-id="5899d-105">This is not a comprehensive guide for understanding the tools, rather their specific applicability for analyzing DirectX app performance.</span></span> <span data-ttu-id="5899d-106">Sebbene la maggior parte delle tecniche descritte in questo articolo sia pertinente per tutte le app DirectX, è più rilevante per le app che usano catene di scambio e non per le applicazioni DirectX basate su XAML che usano SIS/VSI e le animazioni XAML.</span><span class="sxs-lookup"><span data-stu-id="5899d-106">While most of the techniques discussed here are relevant to all DirectX apps, it is most relevant to apps that use swap chains and not to DirectX applications built on XAML that use SIS/VSIS and XAML animations.</span></span> <span data-ttu-id="5899d-107">Verranno illustrate le misurazioni del tempo di prestazioni chiave, come acquisire e installare gli strumenti e le tracce di misurazione delle prestazioni e analizzarle per comprendere i colli di bottiglia delle app.</span><span class="sxs-lookup"><span data-stu-id="5899d-107">We walk you through key performance time measurements, how to acquire and install the tools, and take performance measurement traces then analyze them to understand app bottlenecks.</span></span>

## <a name="about-the-tools"></a><span data-ttu-id="5899d-108">Informazioni sugli strumenti</span><span class="sxs-lookup"><span data-stu-id="5899d-108">About the Tools</span></span>

### <a name="xperf"></a><span data-ttu-id="5899d-109">**XPerf**</span><span class="sxs-lookup"><span data-stu-id="5899d-109">**XPerf**</span></span>

<span data-ttu-id="5899d-110">**Xperf** è un set di strumenti di analisi delle prestazioni basati su Event Tracing for Windows (ETW) progettati per la misurazione e l'analisi delle prestazioni e dell'utilizzo delle risorse di sistema e delle app dettagliate.</span><span class="sxs-lookup"><span data-stu-id="5899d-110">**XPerf** is a set of performance analysis tools built on top of Event Tracing for Windows (ETW) designed for measuring and analyzing detailed system and app performance and resource usage.</span></span> <span data-ttu-id="5899d-111">A partire da Windows 8, questo strumento da riga di comando ha un'interfaccia utente grafica e viene chiamato Windows Performance Recorder (WPR) e Windows Performance Analyzer (WPA).</span><span class="sxs-lookup"><span data-stu-id="5899d-111">Starting in Windows 8 this command line tool has a graphical user interface and is called the Windows Performance Recorder (WPR) and Windows Performance Analyzer (WPA).</span></span> <span data-ttu-id="5899d-112">Altre informazioni su questi strumenti sono disponibili nella pagina Web per [Windows Performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)) (WPT): [Windows Performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)).</span><span class="sxs-lookup"><span data-stu-id="5899d-112">More information about these tools can be found at the web page for [Windows Performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)) (WPT): [Windows Performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)).</span></span>

<span data-ttu-id="5899d-113">Un ETW raccoglie gli eventi del kernel richiesti e li salva in un file denominato file ETL (Event Trace Log).</span><span class="sxs-lookup"><span data-stu-id="5899d-113">An ETW collects requested kernel events and saves them into a file called an event trace log (ETL) file.</span></span> <span data-ttu-id="5899d-114">Questi eventi del kernel forniscono informazioni dettagliate su un'app e sulle caratteristiche di sistema durante l'esecuzione dell'app.</span><span class="sxs-lookup"><span data-stu-id="5899d-114">These kernel events provide extensive information about an app and system characteristics when running the app.</span></span> <span data-ttu-id="5899d-115">I dati vengono raccolti abilitando l'acquisizione della traccia, eseguendo lo scenario di app desiderato che richiede l'analisi, arrestando l'acquisizione che salva i dati in un file ETL.</span><span class="sxs-lookup"><span data-stu-id="5899d-115">Data is collected by enabling trace capture, performing the desired app scenario that needs analysis, stopping the capture which saves the data in an ETL file.</span></span> <span data-ttu-id="5899d-116">È quindi possibile analizzare il file nello stesso computer o in un computer diverso usando lo strumento da riga di comando **xperf.exe** o lo strumento di analisi della traccia visiva **xperfview.exe**.</span><span class="sxs-lookup"><span data-stu-id="5899d-116">You can then analyze the file on the same or a different machine using either the command line tool **xperf.exe** or the visual trace analysis tool **xperfview.exe**.</span></span>

### <a name="gpuview"></a><span data-ttu-id="5899d-117">GPUView</span><span class="sxs-lookup"><span data-stu-id="5899d-117">GPUView</span></span>

<span data-ttu-id="5899d-118">**GPUView** è uno strumento di sviluppo per determinare le prestazioni della GPU (Graphics Processing Unit) e della CPU.</span><span class="sxs-lookup"><span data-stu-id="5899d-118">**GPUView** is a development tool for determining the performance of the graphics processing unit (GPU) and CPU.</span></span> <span data-ttu-id="5899d-119">Esamina le prestazioni per quanto riguarda l'elaborazione del buffer DMA (Direct Memory Access) e tutte le altre elaborazioni video sull'hardware video.</span><span class="sxs-lookup"><span data-stu-id="5899d-119">It looks at performance with regard to direct memory access (DMA) buffer processing and all other video processing on the video hardware.</span></span>

<span data-ttu-id="5899d-120">Per le app [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) basate molto sulla GPU, **GPUView** è uno strumento potente per comprendere la relazione tra il lavoro svolto sulla CPU e GPU.</span><span class="sxs-lookup"><span data-stu-id="5899d-120">For [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) apps that rely heavily on the GPU, **GPUView** is a powerful tool for understanding the relationship between work done on the CPU vs. GPU.</span></span> <span data-ttu-id="5899d-121">Per altre informazioni su **GPUView**, vedere [uso di GPUView](/windows-hardware/drivers/display/using-gpuview).</span><span class="sxs-lookup"><span data-stu-id="5899d-121">For more info about **GPUView** see [Using GPUView](/windows-hardware/drivers/display/using-gpuview).</span></span>

<span data-ttu-id="5899d-122">Analogamente a **Xperf**, una traccia ETW viene innanzitutto eseguita avviando il servizio di traccia, esercitando lo scenario che richiede l'analisi per l'app in considerazione, arrestando il servizio e salvando le informazioni in un file ETL.</span><span class="sxs-lookup"><span data-stu-id="5899d-122">Similar to **XPerf**, an ETW trace is first taken by starting the tracing service, exercising the scenario that needs analysis for the app under consideration, stopping the service and saving the information in an ETL file.</span></span> <span data-ttu-id="5899d-123">**GPUView** presenta i dati presenti nel file ETL in formato grafico.</span><span class="sxs-lookup"><span data-stu-id="5899d-123">**GPUView** presents the data present in the ETL file in a graphical format.</span></span>

<span data-ttu-id="5899d-124">Dopo aver installato lo strumento **GPUView** , è consigliabile leggere l'argomento "visualizzazione principale di **GPUView**" nel menu "Guida **GPUView** ".</span><span class="sxs-lookup"><span data-stu-id="5899d-124">After installing the **GPUView** tool, it is we recommend you read the "**GPUView**’s Main Display" topic under the "**GPUView** Help" menu.</span></span> <span data-ttu-id="5899d-125">Contiene informazioni utili su come interpretare l'interfaccia utente di **GPUView** .</span><span class="sxs-lookup"><span data-stu-id="5899d-125">It contains useful information about how to interpret the **GPUView** UI.</span></span>

## <a name="installing-the-tools"></a><span data-ttu-id="5899d-126">Installazione degli strumenti</span><span class="sxs-lookup"><span data-stu-id="5899d-126">Installing the Tools</span></span>

<span data-ttu-id="5899d-127">Sia **Xperf** che **GPUView** sono inclusi in Windows Performance Toolkit (WPT).</span><span class="sxs-lookup"><span data-stu-id="5899d-127">Both **XPerf** and **GPUView** are included in the Windows Performance Toolkit (WPT).</span></span>

<span data-ttu-id="5899d-128">**Xperf** viene fornito come parte di Windows Software Development Kit (SDK) per Windows.</span><span class="sxs-lookup"><span data-stu-id="5899d-128">**XPerf** ships as part of the Windows Software Development Kit (SDK) for Windows.</span></span> <span data-ttu-id="5899d-129">[Scaricare il Windows SDK](https://dev.windows.com/downloads).</span><span class="sxs-lookup"><span data-stu-id="5899d-129">[Download the Windows SDK](https://dev.windows.com/downloads).</span></span>

<span data-ttu-id="5899d-130">**GPUView** è disponibile in Windows Assessment and Deployment Kit (Windows ADK).</span><span class="sxs-lookup"><span data-stu-id="5899d-130">**GPUView** is available in the Windows Assessment and Deployment Kit (Windows ADK).</span></span> <span data-ttu-id="5899d-131">[Scaricare Windows ADK](/windows-hardware/get-started/adk-install).</span><span class="sxs-lookup"><span data-stu-id="5899d-131">[Download the Windows ADK](/windows-hardware/get-started/adk-install).</span></span>

<span data-ttu-id="5899d-132">Dopo l'installazione, è necessario aggiungere le directory che contengono **Xperf** e **GPUView** alla variabile di sistema "Path".</span><span class="sxs-lookup"><span data-stu-id="5899d-132">After installation, you must add the directories that contain **XPerf** and **GPUView** to the system "Path" variable.</span></span>

<span data-ttu-id="5899d-133">Fare clic sul pulsante Start e digitare "variabili di sistema".</span><span class="sxs-lookup"><span data-stu-id="5899d-133">Click the Start button and type "System Variables".</span></span> <span data-ttu-id="5899d-134">Si apre il Finestra Proprietà di sistema.</span><span class="sxs-lookup"><span data-stu-id="5899d-134">The System Properties window opens.</span></span> <span data-ttu-id="5899d-135">Fare clic su "modifica le variabili di ambiente di sistema".</span><span class="sxs-lookup"><span data-stu-id="5899d-135">Click "Edit the system environment variables".</span></span> <span data-ttu-id="5899d-136">Selezionare "variabili di ambiente" nella finestra di dialogo "proprietà di sistema".</span><span class="sxs-lookup"><span data-stu-id="5899d-136">Select "Environment Variables" from the "System Properties" dialog box.</span></span> <span data-ttu-id="5899d-137">La variabile "Path" si trova in "variabili di sistema".</span><span class="sxs-lookup"><span data-stu-id="5899d-137">The "Path" variable is found under "System variables".</span></span> <span data-ttu-id="5899d-138">Accodare la directory contenente **xperf.exe** e **GPUView.exe** al percorso.</span><span class="sxs-lookup"><span data-stu-id="5899d-138">Append the directory containing **xperf.exe** and **GPUView.exe** to the path.</span></span> <span data-ttu-id="5899d-139">Questi file eseguibili si trovano nella directory "Windows Performance Toolkit" all'interno di "Windows Kit".</span><span class="sxs-lookup"><span data-stu-id="5899d-139">These executables are found in the "Windows Performance Toolkit" directory inside the "Windows Kits".</span></span> <span data-ttu-id="5899d-140">Il percorso predefinito è: **C: \\ Program Files (x86) \\ Windows Kit \\ 10 \\ Windows Performance Toolkit**.</span><span class="sxs-lookup"><span data-stu-id="5899d-140">The default location is: **C:\\Program Files (x86)\\Windows Kits\\10\\Windows Performance Toolkit**.</span></span>

## <a name="performance-time-measurements"></a><span data-ttu-id="5899d-141">Misurazioni del tempo di prestazioni</span><span class="sxs-lookup"><span data-stu-id="5899d-141">Performance Time Measurements</span></span>

<span data-ttu-id="5899d-142">La maggior parte delle app si aspettano di essere eseguite senza problemi e rispondono all'input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="5899d-142">Most apps expect to run smoothly and be responsive to user input.</span></span> <span data-ttu-id="5899d-143">Tuttavia, a seconda dello scenario desiderato, un aspetto delle prestazioni potrebbe essere più importante di un altro.</span><span class="sxs-lookup"><span data-stu-id="5899d-143">However, depending upon the scenario the you want, one aspect of performance might be more important than another.</span></span> <span data-ttu-id="5899d-144">Ad esempio, per un'app lettore di notizie in esecuzione su un Tablet PC touch, l'aspetto più importante è quello di visualizzare un singolo articolo alla volta e di eseguire il panning, lo zoom e lo scorrimento dello stesso articolo o di un altro articolo.</span><span class="sxs-lookup"><span data-stu-id="5899d-144">For instance, for a news reader app running on a touch tablet PC, the most important aspect is to view a single article at a time and to pan/zoom/scroll through the same or a different article.</span></span> <span data-ttu-id="5899d-145">In questo scenario la possibilità di eseguire il rendering di tutto il contenuto di ogni frame non è necessaria.</span><span class="sxs-lookup"><span data-stu-id="5899d-145">In this scenario the ability to render all the content every frame is not necessary.</span></span> <span data-ttu-id="5899d-146">Tuttavia, la possibilità di scorrere l'articolo in modo semplice su un movimento tocco è estremamente importante.</span><span class="sxs-lookup"><span data-stu-id="5899d-146">However, the ability to scroll through the article smoothly upon a touch gesture is extremely important.</span></span>

<span data-ttu-id="5899d-147">In un'altra istanza, un gioco o un'app per il rendering video che usa numerose animazioni glitch se i frame vengono eliminati.</span><span class="sxs-lookup"><span data-stu-id="5899d-147">In another instance, a game or a video rendering app that uses lots of animations glitches if frames are dropped.</span></span> <span data-ttu-id="5899d-148">In questo caso, la possibilità di presentare il contenuto sullo schermo senza interruzione dall'input dell'utente è estremamente importante.</span><span class="sxs-lookup"><span data-stu-id="5899d-148">In this case, the ability to present content on the screen without interuption from user input is extremely important.</span></span>

<span data-ttu-id="5899d-149">Per comprendere quale parte dell'app è problematica, il primo passaggio consiste nel decidere gli scenari più importanti.</span><span class="sxs-lookup"><span data-stu-id="5899d-149">In order to understand which part of the app is problematic, the first step is to decide on the most important scenarios.</span></span> <span data-ttu-id="5899d-150">Una volta che gli aspetti principali dell'app sono stati riconosciuti e il modo in cui verranno usati, la ricerca di problemi con gli strumenti risulta più semplice.</span><span class="sxs-lookup"><span data-stu-id="5899d-150">Once the core aspects of the app are understood and how they will be exercised, looking for problems using the tools becomes easier.</span></span>

<span data-ttu-id="5899d-151">Di seguito sono riportate alcune delle metriche del tempo di prestazioni più comuni:</span><span class="sxs-lookup"><span data-stu-id="5899d-151">Some of the most common performance time metrics are as follows:</span></span>

### <a name="startup-time"></a><span data-ttu-id="5899d-152">Tempo di avvio</span><span class="sxs-lookup"><span data-stu-id="5899d-152">Startup-time</span></span>

<span data-ttu-id="5899d-153">Tempo misurato dall'avvio del processo fino al primo intervento visualizzato sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="5899d-153">Time measured from process launch to first present hitting the screen.</span></span> <span data-ttu-id="5899d-154">Questa misurazione è più utile quando il sistema è caldo, ovvero la misurazione viene eseguita dopo che l'app viene avviata alcune volte.</span><span class="sxs-lookup"><span data-stu-id="5899d-154">This measurement is more useful when the system is warm meaning the measurement is taken after the app is launched a few times.</span></span>

### <a name="cpu-time-per-frame"></a><span data-ttu-id="5899d-155">Tempo CPU per fotogramma</span><span class="sxs-lookup"><span data-stu-id="5899d-155">CPU time per frame</span></span>

<span data-ttu-id="5899d-156">Tempo per il quale la CPU elabora attivamente il carico di lavoro dell'app per un frame.</span><span class="sxs-lookup"><span data-stu-id="5899d-156">The time for which CPU actively processes the app workload for one frame.</span></span> <span data-ttu-id="5899d-157">Se l'app è in esecuzione senza problemi, tutte le operazioni di elaborazione necessarie per un frame avvengono all'interno di un intervallo di sincronizzazione v.</span><span class="sxs-lookup"><span data-stu-id="5899d-157">If the app is running smoothly, all the processing required for one frame happens within one v-sync interval.</span></span> <span data-ttu-id="5899d-158">Con la frequenza di aggiornamento del monitoraggio di 60Hz, si tratta di 16ms standard per frame.</span><span class="sxs-lookup"><span data-stu-id="5899d-158">With the monitor refresh rate of 60Hz, this comes to 16ms per frame.</span></span> <span data-ttu-id="5899d-159">Se il tempo di CPU/frame è maggiore di 16ms standard, le ottimizzazioni della CPU potrebbero essere necessarie per produrre un'esperienza di app senza problemi.</span><span class="sxs-lookup"><span data-stu-id="5899d-159">If CPU time/frame is greater than 16ms, CPU optimizations might be needed to produce a glitch free app experience.</span></span>

### <a name="gpu-time-per-frame"></a><span data-ttu-id="5899d-160">Tempo GPU per fotogramma</span><span class="sxs-lookup"><span data-stu-id="5899d-160">GPU time per frame</span></span>

<span data-ttu-id="5899d-161">Tempo per cui GPU elabora attivamente il carico di lavoro dell'app per un frame.</span><span class="sxs-lookup"><span data-stu-id="5899d-161">The time for which GPU actively processes the app workload for one frame.</span></span> <span data-ttu-id="5899d-162">Un'app è associata alla GPU quando il tempo impiegato per elaborare i dati di un frame è maggiore di 16ms standard.</span><span class="sxs-lookup"><span data-stu-id="5899d-162">An app is GPU bound when the time taken to process a frame worth of data is more than 16ms.</span></span>

<span data-ttu-id="5899d-163">La possibilità di comprendere se un'app è associata alla CPU o alla GPU consente di limitare la parte problematica del codice.</span><span class="sxs-lookup"><span data-stu-id="5899d-163">Being able to understand whether an app is CPU or GPU bound will narrow the problematic part of the code.</span></span>

## <a name="taking-performance-time-measurement-trace"></a><span data-ttu-id="5899d-164">Esecuzione della traccia di misurazione del tempo di prestazioni</span><span class="sxs-lookup"><span data-stu-id="5899d-164">Taking performance time measurement trace</span></span>

<span data-ttu-id="5899d-165">Eseguire questi passaggi per eseguire una traccia:</span><span class="sxs-lookup"><span data-stu-id="5899d-165">Perform these steps to take a trace:</span></span>

1.  <span data-ttu-id="5899d-166">Aprire una finestra di comando come amministratore.</span><span class="sxs-lookup"><span data-stu-id="5899d-166">Open a command window as an administrator.</span></span>
2.  <span data-ttu-id="5899d-167">Chiudere l'app se è già in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="5899d-167">Close the app if it is already running.</span></span>
3.  <span data-ttu-id="5899d-168">Passare alla directory *gpuview* all'interno della cartella Windows Performance Toolkit.</span><span class="sxs-lookup"><span data-stu-id="5899d-168">Change directories to the *gpuview* directory inside the Windows Performance Toolkit folder.</span></span>
4.  <span data-ttu-id="5899d-169">Digitare "log. cmd" per avviare la traccia eventi.</span><span class="sxs-lookup"><span data-stu-id="5899d-169">Type "log.cmd" to start event tracing.</span></span> <span data-ttu-id="5899d-170">Questa opzione consente di registrare gli eventi più interessanti.</span><span class="sxs-lookup"><span data-stu-id="5899d-170">This option logs the most interesting events.</span></span> <span data-ttu-id="5899d-171">Altre opzioni disponibili registrano un ambito diverso degli eventi.</span><span class="sxs-lookup"><span data-stu-id="5899d-171">Other available options log different scope of the events.</span></span> <span data-ttu-id="5899d-172">Per l'istanza "v" o la modalità log dettagliata acquisisce tutti gli eventi che il **GPUView** è in grado di riconoscere.</span><span class="sxs-lookup"><span data-stu-id="5899d-172">For instance ‘v’ or verbose log mode captures all events that the **GPUView** is aware of.</span></span>
5.  <span data-ttu-id="5899d-173">Avviare l'esempio ed eseguire l'esempio in modo che copra il percorso di prestazioni che è necessario analizzare.</span><span class="sxs-lookup"><span data-stu-id="5899d-173">Launch the sample, and exercise the sample in a manner that covers the performance path that you need to analyze.</span></span>
6.  <span data-ttu-id="5899d-174">Tornare alla finestra di comando e digitare di nuovo "log. cmd" per arrestare la registrazione.</span><span class="sxs-lookup"><span data-stu-id="5899d-174">Go back to the command windows and type "log.cmd" again to stop logging.</span></span>
7.  <span data-ttu-id="5899d-175">Viene restituito un file denominato "Merged. etl" nella cartella *gpuview* .</span><span class="sxs-lookup"><span data-stu-id="5899d-175">This outputs a file called "merged.etl" in the *gpuview* folder.</span></span> <span data-ttu-id="5899d-176">È possibile salvare questo file in un altro percorso ed è possibile analizzarlo nello stesso computer o in un altro computer.</span><span class="sxs-lookup"><span data-stu-id="5899d-176">You can save this file to another location and you can analyze it on the same or a different machine.</span></span> <span data-ttu-id="5899d-177">Per visualizzare i dettagli di acquisizione dello stack, salvare il file di simboli (con estensione pdb) associato all'app.</span><span class="sxs-lookup"><span data-stu-id="5899d-177">In order to view stack capture details, save the symbol file (.pdb) associated with the app.</span></span>

## <a name="measurements"></a><span data-ttu-id="5899d-178">Misurazioni</span><span class="sxs-lookup"><span data-stu-id="5899d-178">Measurements</span></span>


> [!Note]  
> <span data-ttu-id="5899d-179">Le misure per l'esempio di realizzazione della geometria vengono eseguite in un computer quad core con una scheda grafica DirectX11 integrata.</span><span class="sxs-lookup"><span data-stu-id="5899d-179">The measurements for geometry realization sample are taken on a Quad Core machine with an integrated DirectX11 graphics card.</span></span> <span data-ttu-id="5899d-180">Le misurazioni variano a seconda della configurazione del computer.</span><span class="sxs-lookup"><span data-stu-id="5899d-180">The measurements vary depending upon the machine configuration.</span></span>

 

<span data-ttu-id="5899d-181">Questa sezione illustra come misurare i tempi di avvio, della CPU e della GPU per le misurazioni dei frame.</span><span class="sxs-lookup"><span data-stu-id="5899d-181">This section demonstrates how to measure the startup-time, CPU and GPU time per frame measurements.</span></span> <span data-ttu-id="5899d-182">È possibile acquisire una traccia delle prestazioni per lo stesso campione nel computer e visualizzare le differenze nelle varie misurazioni.</span><span class="sxs-lookup"><span data-stu-id="5899d-182">You can capture a performance trace for the same sample on your machine and see the differences in the various measurements.</span></span>

<span data-ttu-id="5899d-183">Per analizzare la traccia in **GPUView**, aprire il file "Merged. ELT" con **GPUView.exe**.</span><span class="sxs-lookup"><span data-stu-id="5899d-183">To analyze the trace in **GPUView**, open the "merged.elt" file using **GPUView.exe**.</span></span>

### <a name="startup-time"></a><span data-ttu-id="5899d-184">Tempo di avvio</span><span class="sxs-lookup"><span data-stu-id="5899d-184">Startup-time</span></span>

<span data-ttu-id="5899d-185">Il tempo di avvio viene misurato in base al tempo totale impiegato dall'avvio dell'app fino a quando il contenuto non viene visualizzato per la prima volta sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="5899d-185">The startup time is measured by the total time spent from the app start until the content first appears on the screen.</span></span>

<span data-ttu-id="5899d-186">La misurazione del tempo di avvio viene eseguita in modo ottimale attenendosi alla procedura descritta nella sezione precedente con queste varianti:</span><span class="sxs-lookup"><span data-stu-id="5899d-186">The startup-time measurement is best taken by following the steps listed in the previous section with these variations:</span></span>

-   <span data-ttu-id="5899d-187">Se la prima volta che si avvia l'app si esegue la misurazione dell'avvio, viene chiamata avvio a freddo.</span><span class="sxs-lookup"><span data-stu-id="5899d-187">If the you take the start-up measurements the very first time you launch the app, it is called cold startup.</span></span> <span data-ttu-id="5899d-188">Questa operazione può variare rispetto alle misurazioni eseguite dopo l'avvio dell'app più volte in un periodo di tempo ridotto.</span><span class="sxs-lookup"><span data-stu-id="5899d-188">This may vary from measurements taken after you launch the app a few times over in a small duration of time.</span></span> <span data-ttu-id="5899d-189">Questa operazione viene definita avvio a caldo.</span><span class="sxs-lookup"><span data-stu-id="5899d-189">This is called warm startup.</span></span> <span data-ttu-id="5899d-190">A seconda del numero di risorse che un'app crea all'avvio, può esserci una grande differenza tra i due tempi di avvio.</span><span class="sxs-lookup"><span data-stu-id="5899d-190">Depending upon how many resources an app creates at launch, there can be a big difference between the two startup times.</span></span> <span data-ttu-id="5899d-191">A seconda degli obiettivi dell'app, potrebbe essere utile misurare uno o l'altro.</span><span class="sxs-lookup"><span data-stu-id="5899d-191">Depending upon app goals, measuring one or the other might be desirable.</span></span>
-   <span data-ttu-id="5899d-192">Quando si registrano le informazioni sulle prestazioni, terminare l'app non appena il primo frame viene visualizzato sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="5899d-192">When you log performance information, terminate the app as soon as the first frame shows up on the screen.</span></span>

### <a name="calculating-start-up-time-using-gpuview"></a><span data-ttu-id="5899d-193">Calcolo del tempo di avvio con **GPUView**</span><span class="sxs-lookup"><span data-stu-id="5899d-193">Calculating start-up time using **GPUView**</span></span>

1.  <span data-ttu-id="5899d-194">In **GPUView** scorrere fino al processo pertinente, in questo caso GeometryRealization.exe.</span><span class="sxs-lookup"><span data-stu-id="5899d-194">In **GPUView**, scroll down to the relevant process, in this case GeometryRealization.exe.</span></span>

    ![Screenshot che mostra un esempio di processi in GPUView.](images/profile1.png)

2.  <span data-ttu-id="5899d-196">La coda CPU del contesto rappresenta il carico di lavoro grafico accodato all'hardware, ma non necessariamente elaborato dall'hardware.</span><span class="sxs-lookup"><span data-stu-id="5899d-196">The context CPU queue represents the graphics workload queued to the hardware, but not necessarily being processed by the hardware.</span></span> <span data-ttu-id="5899d-197">Quando si apre il file di traccia, vengono visualizzati tutti gli eventi registrati tra il momento in cui è stata eseguita la traccia.</span><span class="sxs-lookup"><span data-stu-id="5899d-197">When the trace file is opened, it shows all the events logged between the time the trace was taken.</span></span> <span data-ttu-id="5899d-198">Per calcolare il tempo di avvio, selezionare l'area di interesse, ingrandire la parte iniziale della coda della CPU del primo contesto, ovvero quella che mostra l'attività, usando Ctrl + Z.</span><span class="sxs-lookup"><span data-stu-id="5899d-198">In order to calculate the startup-time, select the region of interest, zoom into the initial portion of the first Context CPU Queue (this is the one that shows activity) using Ctrl +Z.</span></span> <span data-ttu-id="5899d-199">Altre informazioni sui controlli **GPUView** sono reperibili nella sezione "Riepilogo dei controlli **GPUView** " del file della Guida di **GPUView** .</span><span class="sxs-lookup"><span data-stu-id="5899d-199">More information about **GPUView** Controls can be found in the **GPUView** Help file section "Summary of **GPUView** Controls".</span></span> <span data-ttu-id="5899d-200">La figura seguente mostra solo il processo di GeometryRealization.exe ingrandito alla prima parte della coda della CPU del contesto.</span><span class="sxs-lookup"><span data-stu-id="5899d-200">The figure below only shows the GeometryRealization.exe process zoomed in to the first part of the Context CPU Queue.</span></span> <span data-ttu-id="5899d-201">Il colore della coda della CPU del contesto è indicato dal rettangolo immediatamente sotto la coda e lo stesso pacchetto di dati di colore nella coda Mostra il lavoro della GPU accodato nell'hardware.</span><span class="sxs-lookup"><span data-stu-id="5899d-201">The color of the Context CPU Queue is denoted by the rectangle right below the queue and same color data packets in the queue show GPU work queued up on the hardware.</span></span> <span data-ttu-id="5899d-202">Il pacchetto del modello di tratteggio nella coda del contesto Mostra il pacchetto presente, che significa che l'app desidera che l'hardware presenti il contenuto sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="5899d-202">The hatch pattern packet in the context queue shows the present packet which means that the app wants the hardware to present the content on the screen.</span></span>

    ![Screenshot che mostra esempi della "coda di contesto C P U".](images/profile2.png)

3.  <span data-ttu-id="5899d-204">Il tempo di avvio è il momento in cui l'app viene avviata per la prima volta (in questo caso il modulo del punto di ingresso del thread UI SHCORE.dll) fino al momento in cui viene visualizzato il contesto (contrassegnato da un pacchetto di tratteggio).</span><span class="sxs-lookup"><span data-stu-id="5899d-204">The startup-time is the time when the app first starts (in this case UI thread entry point module SHCORE.dll) till the time the context first appears (marked by a hatch packet).</span></span> <span data-ttu-id="5899d-205">Nella figura riportata di seguito viene evidenziata l'area di interesse.</span><span class="sxs-lookup"><span data-stu-id="5899d-205">The figure here highlights the area of interest.</span></span>

    > [!Note]  
    > <span data-ttu-id="5899d-206">Le informazioni effettive presenti sono rappresentate nella coda di capovolgimento e, di conseguenza, il tempo di esecuzione viene esteso fino a quando il pacchetto corrente non viene effettivamente completato nella coda di scorrimento.</span><span class="sxs-lookup"><span data-stu-id="5899d-206">The actual present info is represented in the flip queue and thus the time take is extended till the present packet actually completes in the flip queue.</span></span>

     

    <span data-ttu-id="5899d-207">La barra di stato completa non è visibile nella figura seguente, che mostra anche il tempo trascorso tra le parti evidenziate.</span><span class="sxs-lookup"><span data-stu-id="5899d-207">The complete status bar is not visible in the figure below which also shows the elapsed time between the highlighted portions.</span></span> <span data-ttu-id="5899d-208">Si tratta del tempo di avvio dell'app.</span><span class="sxs-lookup"><span data-stu-id="5899d-208">This is the startup-time of the app.</span></span> <span data-ttu-id="5899d-209">In questo caso per il computer menzionato in precedenza, il risultato è che si trova intorno a 240ms.</span><span class="sxs-lookup"><span data-stu-id="5899d-209">In this case for the machine mentioned above, it came out to be around 240ms.</span></span>

    ![Screenshot che mostra le aree di interesse relative al tempo di avvio nella coda del contesto C P U.](images/profile3.png)

### <a name="cpu-and-gpu-time-per-frame"></a><span data-ttu-id="5899d-211">Tempo CPU e GPU per fotogramma</span><span class="sxs-lookup"><span data-stu-id="5899d-211">CPU and GPU Time per frame</span></span>

<span data-ttu-id="5899d-212">Ci sono alcuni aspetti da considerare durante la misurazione del tempo di CPU.</span><span class="sxs-lookup"><span data-stu-id="5899d-212">There are a few things to think about when measuring CPU time.</span></span> <span data-ttu-id="5899d-213">Individuare le aree della traccia in cui è stato esercitato lo scenario da analizzare.</span><span class="sxs-lookup"><span data-stu-id="5899d-213">Look for the areas in the trace where you have exercised the scenario to be analyzed.</span></span> <span data-ttu-id="5899d-214">Ad esempio, nell'esempio di realizzazione Geometry uno degli scenari che è stato analizzato è la transizione tra il rendering di primitive 2048 e 8192, tutti non realizzati (come in, la geometria non è tassellati ogni frame).</span><span class="sxs-lookup"><span data-stu-id="5899d-214">For instance, in the geometry realization sample one of the scenarios that has been analyzed is the transition between rendering 2048 and 8192 primitives, all unrealized (as in, geometry is not tessellated every frame).</span></span> <span data-ttu-id="5899d-215">La traccia Mostra chiaramente la differenza nell'attività della CPU e della GPU prima e dopo la transizione nel numero di primitive.</span><span class="sxs-lookup"><span data-stu-id="5899d-215">The trace clearly shows difference in CPU and GPU activity before and after the transition in the number of primitives.</span></span>

<span data-ttu-id="5899d-216">Sono stati analizzati due scenari per calcolare il tempo di CPU e GPU per frame.</span><span class="sxs-lookup"><span data-stu-id="5899d-216">Two scenarios are being analyzed to calculate CPU and GPU time per frame.</span></span> <span data-ttu-id="5899d-217">Sono i seguenti.</span><span class="sxs-lookup"><span data-stu-id="5899d-217">They are as follows.</span></span>

-   <span data-ttu-id="5899d-218">Transizione dal rendering 2048 primitive non realizzate a 8192 primitive non reali.</span><span class="sxs-lookup"><span data-stu-id="5899d-218">Transitioning from rendering 2048 unrealized primitives to 8192 unrealized primitives.</span></span>
-   <span data-ttu-id="5899d-219">Transizione dal rendering 8192 primitive realizzate a 8192 primitive non reali.</span><span class="sxs-lookup"><span data-stu-id="5899d-219">Transitioning from rendering 8192 realized primitives to 8192 unrealized primitives.</span></span>

<span data-ttu-id="5899d-220">In entrambi i casi, si è notato che la frequenza dei fotogrammi è diminuita drasticamente.</span><span class="sxs-lookup"><span data-stu-id="5899d-220">In both the cases, it was observed that the frame rate dropped drastically.</span></span> <span data-ttu-id="5899d-221">Misurazione del tempo di CPU e GPU, la relazione tra i due e altri modelli nella traccia può fornire informazioni utili sulle aree problematiche nell'app.</span><span class="sxs-lookup"><span data-stu-id="5899d-221">Measuring CPU and GPU time, the relationship between the two as well as a few other patterns in the trace can give useful info about problematic areas in the app.</span></span>

### <a name="calculating-cpu-and-gpu-time-when-2048-primitives-are-being-rendered-unrealized"></a><span data-ttu-id="5899d-222">Calcolo del tempo di CPU e GPU quando viene eseguito il rendering di 2048 primitive non realizzati</span><span class="sxs-lookup"><span data-stu-id="5899d-222">Calculating CPU and GPU time when 2048 primitives are being rendered unrealized</span></span>

1.  <span data-ttu-id="5899d-223">Aprire il file di traccia utilizzando **GPUView.exe**.</span><span class="sxs-lookup"><span data-stu-id="5899d-223">Open the trace file using **GPUView.exe**.</span></span>
2.  <span data-ttu-id="5899d-224">Scorrere verso il basso fino al processo di GeometryRealization.exe.</span><span class="sxs-lookup"><span data-stu-id="5899d-224">Scroll down to the GeometryRealization.exe process.</span></span>
3.  <span data-ttu-id="5899d-225">Selezionare un'area per calcolare il tempo della CPU e ingrandirla con CTRL + Z.</span><span class="sxs-lookup"><span data-stu-id="5899d-225">Select an area for calculating CPU time and zoom into it using CTRL + Z.</span></span>

    ![Screenshot che mostra un'area selezionata per il calcolo del tempo di C P U nella "coda CPU del contesto".](images/profile4.png)

4.  <span data-ttu-id="5899d-227">Mostra le informazioni di sincronizzazione v attivando il tasto F8.</span><span class="sxs-lookup"><span data-stu-id="5899d-227">Show v-sync information by toggling between F8.</span></span> <span data-ttu-id="5899d-228">Mantenendo lo zoom avanti fino a quando non è facile vedere chiaramente un valore vsync di dati.</span><span class="sxs-lookup"><span data-stu-id="5899d-228">Keeping zooming in till it is easy to see one vsync worth of data clearly.</span></span> <span data-ttu-id="5899d-229">Le linee blu sono i tempi di sincronizzazione della v.</span><span class="sxs-lookup"><span data-stu-id="5899d-229">The blue lines are where the v-sync times.</span></span> <span data-ttu-id="5899d-230">In genere, questi si verificano ogni 16 ms (60 fps), ma se DWM rileva un problema di prestazioni, viene eseguito più lentamente in modo che si verifichino una volta ogni 32 ms (30 fps).</span><span class="sxs-lookup"><span data-stu-id="5899d-230">Usually, these occur once every 16 ms (60 fps), but if DWM is encountering a performance problem, it runs slower so they will occur once every 32 ms (30 fps).</span></span> <span data-ttu-id="5899d-231">Per ottenere un certo tempo, selezionare da una barra blu a quella successiva, quindi osservare il numero di MS riportato nell'angolo in basso a destra della finestra **GPUView** .</span><span class="sxs-lookup"><span data-stu-id="5899d-231">To get a sense of time, select from one blue bar to the next and then look at the number of ms reported in the lower right hand corner of the **GPUView** window.</span></span>

    ![Screenshot che mostra un esempio di tempi di sincronizzazione v.](images/profile5.png)

5.  <span data-ttu-id="5899d-233">Per misurare il tempo della CPU per fotogramma, misurare la durata del tempo impiegato da tutti i thread interessati dal rendering.</span><span class="sxs-lookup"><span data-stu-id="5899d-233">To measure the CPU time per frame, measure the length of time taken by all the threads involved in rendering.</span></span> <span data-ttu-id="5899d-234">Potrebbe essere utile limitare il thread che dovrebbe essere più pertinente dal punto di vista delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="5899d-234">It might be worthwhile to narrow down the thread that is expected to be most relevant from a performance standpoint.</span></span> <span data-ttu-id="5899d-235">Ad esempio, nell'esempio di realizzazione Geometry, il contenuto viene animato ed è necessario eseguirne il rendering sullo schermo di ogni fotogramma che rende il thread UI quello importante.</span><span class="sxs-lookup"><span data-stu-id="5899d-235">For instance in the geometry realization sample, the content is animating and needs to be rendered on the screen every frame making the UI thread the important one.</span></span> <span data-ttu-id="5899d-236">Una volta determinato il thread da esaminare, misurare la lunghezza delle barre in questo thread.</span><span class="sxs-lookup"><span data-stu-id="5899d-236">Once you determine which thread to look at, measure the length of the bars on this thread.</span></span> <span data-ttu-id="5899d-237">La media di alcuni di questi prodotti produce tempo CPU per fotogramma.</span><span class="sxs-lookup"><span data-stu-id="5899d-237">Averaging a few of these yields CPU time per frame.</span></span> <span data-ttu-id="5899d-238">La figura seguente mostra il tempo impiegato sul thread dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="5899d-238">The figure below shows time taken up on the UI thread.</span></span> <span data-ttu-id="5899d-239">Indica inoltre che questo tempo si adatta perfettamente tra due sincronizzazioni v consecutive, il che significa che sta colpendo 60FPS.</span><span class="sxs-lookup"><span data-stu-id="5899d-239">It also shows that this time fits well between two consecutive v-syncs which mean that it is hitting 60FPS.</span></span>

    ![Screenshot che mostra il tempo impiegato nel thread di U I.](images/profile6.png)

    <span data-ttu-id="5899d-241">È anche possibile verificare esaminando la coda di scorrimento per l'intervallo di tempo corrispondente che mostra che DWM è in grado di presentare tutti i frame.</span><span class="sxs-lookup"><span data-stu-id="5899d-241">You can also verify by looking at the flip queue for the corresponding time frame which shows that DWM is able to present every frame.</span></span>

    ![Screenshot che mostra un esempio di "coda Flip".](images/profile7.png)

6.  <span data-ttu-id="5899d-243">Il tempo della GPU può essere misurato in modo analogo al tempo CPU.</span><span class="sxs-lookup"><span data-stu-id="5899d-243">The GPU time can be measured in the same way as the CPU time.</span></span> <span data-ttu-id="5899d-244">Ingrandire l'area pertinente come nel caso di misurazione del tempo di CPU.</span><span class="sxs-lookup"><span data-stu-id="5899d-244">Zoom into the relevant area as in the case of measuring CPU time.</span></span> <span data-ttu-id="5899d-245">Misurare la lunghezza delle barre nella coda hardware della GPU con lo stesso colore del colore della coda della CPU del contesto.</span><span class="sxs-lookup"><span data-stu-id="5899d-245">Measure the length of the bars in the GPU hardware Queue with the same color as the color of the Context CPU Queue.</span></span> <span data-ttu-id="5899d-246">Fino a quando le barre si adattano all'interno di sincronizzazioni v consecutive, l'app viene eseguita senza problemi in 60FPS.</span><span class="sxs-lookup"><span data-stu-id="5899d-246">As long as the bars fit within consecutive v-syncs, the app is running smoothly at 60FPS.</span></span>

    ![Screenshot che mostra un esempio di "coda hardware GPU" che visualizza le informazioni che un'app è in esecuzione a 60 F P S.](images/profile8.png)

### <a name="calculating-cpu-and-gpu-time-when-8192-primitives-are-being-rendered-unrealized"></a><span data-ttu-id="5899d-248">Calcolo del tempo di CPU e GPU quando viene eseguito il rendering di 8192 primitive non realizzati</span><span class="sxs-lookup"><span data-stu-id="5899d-248">Calculating CPU and GPU time when 8192 primitives are being rendered unrealized</span></span>

1.  <span data-ttu-id="5899d-249">Se si seguono nuovamente gli stessi passaggi, la traccia Mostra che tutto il lavoro della CPU per un frame non rientra tra una sincronizzazione v e la successiva.</span><span class="sxs-lookup"><span data-stu-id="5899d-249">If you follow the same steps again, the trace shows that all the CPU work for one frame does not fit between one v-sync and the next.</span></span> <span data-ttu-id="5899d-250">Ciò significa che l'app è associata alla CPU.</span><span class="sxs-lookup"><span data-stu-id="5899d-250">This means that the app is CPU bound.</span></span> <span data-ttu-id="5899d-251">Il thread UI sta saturando la CPU.</span><span class="sxs-lookup"><span data-stu-id="5899d-251">The UI thread is saturating the CPU.</span></span>

    ![Screenshot che mostra un esempio del thread dell'interfaccia utente che satura la C P U.](images/profile9.png)

    <span data-ttu-id="5899d-253">Esaminando la coda Flip, è inoltre chiaro che DWM non è in grado di presentare tutti i frame.</span><span class="sxs-lookup"><span data-stu-id="5899d-253">Looking at the flip queue, it is also clear that DWM is not able to present every frame.</span></span>

    ![Screenshot che mostra un esempio di D W M non è in grado di presentare tutti i frame.](images/profile10.png)

2.  <span data-ttu-id="5899d-255">Per analizzare dove viene impiegato il tempo, aprire la traccia in **Xperf**.</span><span class="sxs-lookup"><span data-stu-id="5899d-255">In order to analyze where the time is getting spent, open the trace in **XPerf**.</span></span> <span data-ttu-id="5899d-256">Per analizzare i tempi di avvio in **Xperf**, trovare prima di tutto l'intervallo di tempo in **GPUView**.</span><span class="sxs-lookup"><span data-stu-id="5899d-256">To analyze startup time in **XPerf**, first find the time interval in **GPUView**.</span></span> <span data-ttu-id="5899d-257">Puntatore del mouse sulla sinistra dell'intervallo e sulla destra e prendere nota del tempo assoluto visualizzato nella parte inferiore della finestra di **GPUView** .</span><span class="sxs-lookup"><span data-stu-id="5899d-257">Mouse over the left of the interval and the right and take note of the absolute time shown in the bottom of the **GPUView** window.</span></span> <span data-ttu-id="5899d-258">Aprire quindi lo stesso file con estensione ETL in **Xperf** e scorrere verso il basso fino al grafico "CPU Sampling by CPU", fare clic con il pulsante destro del mouse e selezionare "Seleziona intervallo...". In questo modo è possibile digitare nell'intervallo di interesse individuato esaminando la traccia della GPU.</span><span class="sxs-lookup"><span data-stu-id="5899d-258">Then open the same .etl file in **XPerf** and, scroll down to the "CPU Sampling by CPU" graph, right click and select "Select Interval…" This allows for typing in the interval of interest which was discovered by looking at the GPU trace.</span></span>

    ![Screenshot che mostra il campionamento C P U per C P U in "analisi prestazioni Windows".](images/profile11.png)

3.  <span data-ttu-id="5899d-260">Passare al menu Trace e verificare che "Load symbols" sia selezionato.</span><span class="sxs-lookup"><span data-stu-id="5899d-260">Go to the Trace menu, and make sure "Load Symbols" is checked.</span></span> <span data-ttu-id="5899d-261">Passare anche a Trace-> configurare i percorsi dei simboli e digitare il percorso del simbolo dell'app.</span><span class="sxs-lookup"><span data-stu-id="5899d-261">Also, go to Trace -> Configure Symbol Paths, and type in the app symbol path.</span></span> <span data-ttu-id="5899d-262">Un file di simboli contiene informazioni di debug su un eseguibile compilato in un database separato (PDB).</span><span class="sxs-lookup"><span data-stu-id="5899d-262">A symbol file contains debugging information about a compiled executable in a separate database (.pdb).</span></span> <span data-ttu-id="5899d-263">Questo file viene comunemente definito PDB.</span><span class="sxs-lookup"><span data-stu-id="5899d-263">This file is commonly referred to as a PDB.</span></span> <span data-ttu-id="5899d-264">Altre informazioni sui file di simboli sono disponibili qui: [file di simboli](/windows/desktop/Debug/symbol-files).</span><span class="sxs-lookup"><span data-stu-id="5899d-264">More on symbol files can be found here: [Symbol Files](/windows/desktop/Debug/symbol-files).</span></span> <span data-ttu-id="5899d-265">Questo file può trovarsi nella cartella "debug" della directory dell'app.</span><span class="sxs-lookup"><span data-stu-id="5899d-265">This file can be located in the "Debug" folder of the app directory.</span></span>

4.  <span data-ttu-id="5899d-266">Per ottenere la suddivisione del tempo impiegato nell'app, fare clic con il pulsante destro del mouse sull'intervallo selezionato nel passaggio precedente e scegliere tabella di riepilogo.</span><span class="sxs-lookup"><span data-stu-id="5899d-266">In order to get the breakdown of where the time is being spent in the app, right click on the interval selected in the previous step and click Summary Table.</span></span> <span data-ttu-id="5899d-267">Per ottenere una panoramica della quantità di tempo trascorso in ogni dll, deselezionare "stack" dal menu "colonne".</span><span class="sxs-lookup"><span data-stu-id="5899d-267">To get an overview of how much time is spent in each dll, uncheck "Stack" from the "Columns" menu.</span></span> <span data-ttu-id="5899d-268">Si noti che la colonna "count" indica il numero di campioni inclusi nella dll o nella funzione specificata.</span><span class="sxs-lookup"><span data-stu-id="5899d-268">Note that the "Count" column here shows how many samples are within the given dll/function.</span></span> <span data-ttu-id="5899d-269">Poiché viene eseguita approssimativamente un campione per MS, questo numero può essere usato come ipotesi migliore per quanto tempo viene impiegato in ogni DLL o funzione.</span><span class="sxs-lookup"><span data-stu-id="5899d-269">Because approximately one sample is taken per ms, this number can be used as a best guess for how much time is spent in each dll/function.</span></span> <span data-ttu-id="5899d-270">Se si seleziona il menu "stack" da colonne, viene fornito il tempo inclusivo trascorso in ogni funzione nel grafico delle chiamate.</span><span class="sxs-lookup"><span data-stu-id="5899d-270">Checking the "Stack" from Columns menu will give the inclusive time spent in each function in the call graph.</span></span> <span data-ttu-id="5899d-271">Ciò consentirà di suddividere ulteriormente i punti problematici.</span><span class="sxs-lookup"><span data-stu-id="5899d-271">This will help to break down the problem points further.</span></span>

5.  <span data-ttu-id="5899d-272">Le informazioni di analisi dello stack per 2048 primitive non realizzate rivelano che il 30% del tempo di CPU viene impiegato nel processo di realizzazione della geometria.</span><span class="sxs-lookup"><span data-stu-id="5899d-272">Stack trace information for 2048 unrealized primitives reveals that 30% of CPU time is spent in geometry realization process.</span></span> <span data-ttu-id="5899d-273">Circa il 36% del tempo viene impiegato nello schema a mosaico geometrico e nel segno.</span><span class="sxs-lookup"><span data-stu-id="5899d-273">Of that around 36% of the time is being spent in geometry tessellation and stroking.</span></span>

6.  <span data-ttu-id="5899d-274">Le informazioni di analisi dello stack per 8192 primitive non realizzate rivelano che circa il 60% del tempo di CPU (4 core) viene impiegato nella realizzazione della geometria.</span><span class="sxs-lookup"><span data-stu-id="5899d-274">Stack trace information for 8192 unrealized primitives reveals that around 60% of the CPU time (4 cores) is spent in the geometry realization.</span></span>

    ![Screenshot che mostra le informazioni di analisi dello stack per il tempo C P U.](images/profile12.png)

### <a name="calculating-cpu-time-when-8192-primitives-are-being-rendered-realized"></a><span data-ttu-id="5899d-276">Calcolo del tempo di CPU quando viene eseguito il rendering di 8192 primitive</span><span class="sxs-lookup"><span data-stu-id="5899d-276">Calculating CPU time when 8192 primitives are being rendered realized</span></span>

<span data-ttu-id="5899d-277">È chiaro dai profili che l'app è associata alla CPU.</span><span class="sxs-lookup"><span data-stu-id="5899d-277">It is clear from the profiles that the app is CPU bound.</span></span> <span data-ttu-id="5899d-278">Per ridurre il tempo impiegato dalla CPU, le geometrie possono essere create una sola volta e memorizzate nella cache.</span><span class="sxs-lookup"><span data-stu-id="5899d-278">In order to reduce the time spent by the CPU, geometries can be created once and cached.</span></span> <span data-ttu-id="5899d-279">È possibile eseguire il rendering del contenuto memorizzato nella cache di ogni frame senza incorrere nel costo a mosaico della geometria per fotogramma.</span><span class="sxs-lookup"><span data-stu-id="5899d-279">The cached content can be rendered every frame without incurring the geometry tessellation cost per frame.</span></span> <span data-ttu-id="5899d-280">Quando si esamina la traccia in **GPUView** per la parte dell'app realizzata, è chiaro che DWM è in grado di presentare tutti i frame e il tempo della CPU è ridotto drasticamente.</span><span class="sxs-lookup"><span data-stu-id="5899d-280">When looking at the trace in **GPUView** for the realized part of the app, it is clear that DWM is able to present every frame and the CPU time has reduced drastically.</span></span>

![Screenshot che mostra un esempio di traccia in GPUView che mostra D W M è in grado di presentare tutti i frame.](images/profile13.png)

<span data-ttu-id="5899d-282">La prima parte del grafico mostra le primitive 8192 ottenute.</span><span class="sxs-lookup"><span data-stu-id="5899d-282">The first part of the graph shows realized 8192 primitives.</span></span> <span data-ttu-id="5899d-283">Il tempo di CPU corrispondente per fotogramma può rientrare in due sincronizzazioni v consecutive.</span><span class="sxs-lookup"><span data-stu-id="5899d-283">The corresponding CPU time per frame is able to fit within two consecutive v-syncs.</span></span> <span data-ttu-id="5899d-284">Nella parte successiva del grafico questo non è vero.</span><span class="sxs-lookup"><span data-stu-id="5899d-284">In the later part of the graph this is not true.</span></span>

<span data-ttu-id="5899d-285">Quando si cerca in **Xperf**, la CPU è inattiva per il tempo più lungo con solo il 25% del tempo di CPU dedicato all'app per la realizzazione geometrica.</span><span class="sxs-lookup"><span data-stu-id="5899d-285">Looking in **XPerf**, CPU is sitting idle for the longest time with only about 25% of the CPU time being spent on the geometry realization app.</span></span>

![schermata gpuview.](images/profile14.png)

## <a name="summary"></a><span data-ttu-id="5899d-287">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="5899d-287">Summary</span></span>

<span data-ttu-id="5899d-288">Sia **GPUView** che **Xperf** e potenti strumenti per l'analisi delle prestazioni delle app [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) .</span><span class="sxs-lookup"><span data-stu-id="5899d-288">Both **GPUView** and **XPerf** and powerful tools for analyzing performance of [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) apps.</span></span> <span data-ttu-id="5899d-289">Questo articolo è una nozioni di base per l'uso di questi strumenti e per le misure di base delle prestazioni e le caratteristiche delle app.</span><span class="sxs-lookup"><span data-stu-id="5899d-289">This article is a primer for using these tools and understanding basic performance measurements and app characteristics.</span></span> <span data-ttu-id="5899d-290">Oltre a comprendere l'utilizzo degli strumenti, è prima di tutto importante comprendere l'app analizzata.</span><span class="sxs-lookup"><span data-stu-id="5899d-290">Apart from understanding usage of tools, it is first important to understand the app being analyzed.</span></span> <span data-ttu-id="5899d-291">Iniziare a trovare le risposte a domande come l'app che si sta tentando di realizzare.</span><span class="sxs-lookup"><span data-stu-id="5899d-291">Start with finding answers to questions like what is the app trying to achieve?</span></span> <span data-ttu-id="5899d-292">Quali thread del sistema sono più importanti?</span><span class="sxs-lookup"><span data-stu-id="5899d-292">Which threads in the system are most important?</span></span> <span data-ttu-id="5899d-293">Quali sono i compromessi che è possibile fare?</span><span class="sxs-lookup"><span data-stu-id="5899d-293">What trade-offs are you willing to make?</span></span> <span data-ttu-id="5899d-294">Quando si analizzano le tracce delle prestazioni, iniziare esaminando i punti problematici evidenti.</span><span class="sxs-lookup"><span data-stu-id="5899d-294">When analyzing performance traces, start by looking at obvious problematic places.</span></span> <span data-ttu-id="5899d-295">La CPU dell'app o la GPU è associata?</span><span class="sxs-lookup"><span data-stu-id="5899d-295">Is the app CPU or GPU bound?</span></span> <span data-ttu-id="5899d-296">L'app è in grado di presentare tutti i frame?</span><span class="sxs-lookup"><span data-stu-id="5899d-296">Is the app able to present every frame?</span></span> <span data-ttu-id="5899d-297">Gli strumenti con una conoscenza dell'app possono fornire informazioni molto utili per comprendere, individuare e risolvere i problemi relativi alle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="5899d-297">Tools together with an understanding of the app can give very useful information in understanding, finding and finally solving performance problems.</span></span>

 

 