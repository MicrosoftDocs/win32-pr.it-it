---
title: Effetto Mappa tono bianco
description: Questo effetto consente la scalabilità lineare del livello bianco di un'immagine. Questa operazione è particolarmente utile quando si esegue la conversione tra lo spazio luminanza a cui viene fatto riferimento e lo spazio di luminanza a cui viene fatto riferimento, o viceversa.
ms.topic: article
ms.date: 02/01/2019
ms.openlocfilehash: 70a38f37f5a5461b968099bebe4be120a727c053
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/12/2020
ms.locfileid: "103964458"
---
# <a name="white-level-adjustment-effect"></a><span data-ttu-id="75d26-104">Effetto di regolazione del livello bianco</span><span class="sxs-lookup"><span data-stu-id="75d26-104">White level adjustment effect</span></span>

<span data-ttu-id="75d26-105">Questo effetto consente la scalabilità lineare del livello bianco di un'immagine.</span><span class="sxs-lookup"><span data-stu-id="75d26-105">This effect allows the white level of an image to be linearly scaled.</span></span> <span data-ttu-id="75d26-106">Questa operazione è particolarmente utile quando si esegue la conversione tra lo spazio luminanza a cui viene fatto riferimento e lo spazio di luminanza a cui viene fatto riferimento, o viceversa.</span><span class="sxs-lookup"><span data-stu-id="75d26-106">This is especially helpful when you convert between display-referred luminance space and scene-referred luminance space, or vice versa.</span></span>

<span data-ttu-id="75d26-107">Le proprietà di questo effetto sono identificate dall' [**enumerazione D2D1_WHITELEVELADJUSTMENT_PROP**](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_whiteleveladjustment_prop)e il CLSID è **CLSID_D2D1WhiteLevelAdjustment**.</span><span class="sxs-lookup"><span data-stu-id="75d26-107">The properties for this effect are identified by the [**D2D1_WHITELEVELADJUSTMENT_PROP enumeration**](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_whiteleveladjustment_prop), and the CLSID is **CLSID_D2D1WhiteLevelAdjustment**.</span></span>

## <a name="effect-properties"></a><span data-ttu-id="75d26-108">Proprietà effetto</span><span class="sxs-lookup"><span data-stu-id="75d26-108">Effect properties</span></span>

| <span data-ttu-id="75d26-109">Nome visualizzato e enumerazione dell'indice</span><span class="sxs-lookup"><span data-stu-id="75d26-109">Display name and index enumeration</span></span> | <span data-ttu-id="75d26-110">Tipo e valore predefinito</span><span class="sxs-lookup"><span data-stu-id="75d26-110">Type and default value</span></span> | <span data-ttu-id="75d26-111">Descrizione</span><span class="sxs-lookup"><span data-stu-id="75d26-111">Description</span></span> |
|-|-|-|
| <span data-ttu-id="75d26-112">InputWhiteLevel, D2D1_WHITELEVELADJUSTMENT_PROP_INPUT_WHITE_LEVEL</span><span class="sxs-lookup"><span data-stu-id="75d26-112">InputWhiteLevel, D2D1_WHITELEVELADJUSTMENT_PROP_INPUT_WHITE_LEVEL</span></span> | <span data-ttu-id="75d26-113">FLOAT</span><span class="sxs-lookup"><span data-stu-id="75d26-113">FLOAT</span></span> | <span data-ttu-id="75d26-114">Livello bianco dell'immagine di input, in nit.</span><span class="sxs-lookup"><span data-stu-id="75d26-114">The white level of the input image, in nits.</span></span> |
| <span data-ttu-id="75d26-115">OutputWhiteLevel, D2D1_WHITELEVELADJUSTMENT_PROP_OUTPUT_WHITE_LEVEL</span><span class="sxs-lookup"><span data-stu-id="75d26-115">OutputWhiteLevel, D2D1_WHITELEVELADJUSTMENT_PROP_OUTPUT_WHITE_LEVEL</span></span> | <span data-ttu-id="75d26-116">FLOAT</span><span class="sxs-lookup"><span data-stu-id="75d26-116">FLOAT</span></span> | <span data-ttu-id="75d26-117">Livello bianco dell'immagine di output, in nit.</span><span class="sxs-lookup"><span data-stu-id="75d26-117">The white level of the output image, in nits.</span></span> |

## <a name="remarks"></a><span data-ttu-id="75d26-118">Commenti</span><span class="sxs-lookup"><span data-stu-id="75d26-118">Remarks</span></span>
<span data-ttu-id="75d26-119">Questo effetto è concepito per essere combinato con l' [effetto Mappa dei toni HDR](hdr-tone-map-effect.md) per consentire di eseguire il rendering delle immagini HDR in Direct2D con la gestione dei colori e il mapping dei toni appropriati.</span><span class="sxs-lookup"><span data-stu-id="75d26-119">This effect is intended to be combined with the [HDR tone map effect](hdr-tone-map-effect.md) to allow you to render HDR images in Direct2D with proper color management and tone mapping.</span></span> <span data-ttu-id="75d26-120">Per ulteriori informazioni, vedere la **sezione Osservazioni** dell'argomento.</span><span class="sxs-lookup"><span data-stu-id="75d26-120">See that topic's **Remarks** for more details.</span></span> <span data-ttu-id="75d26-121">Gli effetti sono mirati a qualsiasi Framework che desideri offrire una migliore esperienza di visualizzazione delle immagini HDR che gestisce tutti i formati di immagine HDR di Windows e si adatta alle funzionalità dello schermo, sia HDR che WCG/SDR.</span><span class="sxs-lookup"><span data-stu-id="75d26-121">The effects are aimed at any framework that wants to provide a best-in-class HDR image viewing experience that handles all of the Windows HDR image formats, and adapts to the capabilities of the display (whether that's HDR or WCG/SDR).</span></span>

<span data-ttu-id="75d26-122">In Windows, si presuppone che tutti i contenuti SDR/WCG si trovino in uno spazio di luminanza a cui viene fatto riferimento, vale a dire che il livello bianco del contenuto deve essere scalato fino al livello bianco dello schermo prima che venga presentato in finale.</span><span class="sxs-lookup"><span data-stu-id="75d26-122">On Windows, all SDR/WCG content is assumed to be in a display-referred luminance space, meaning that the white level of the content should be scaled up to the display's white level before it is ultimately presented.</span></span> <span data-ttu-id="75d26-123">Tuttavia, non è sempre responsabilità dell'applicazione eseguire questa operazione.</span><span class="sxs-lookup"><span data-stu-id="75d26-123">However, it's not always your application's responsibility to do this.</span></span> <span data-ttu-id="75d26-124">Al contrario, si presuppone che il contenuto HDR si trovi in uno spazio di luminanza a cui viene fatto riferimento in una scena, vale a dire che non deve essere ridimensionato in modo da corrispondere al livello bianco della visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="75d26-124">In contrast, HDR content is assumed to be in a scene-referred luminance space, meaning that it shouldn't ultimately be scaled to match the display's white level.</span></span> <span data-ttu-id="75d26-125">Ciò premesso, l'applicazione potrebbe avere la necessità di eseguire il ridimensionamento in alcune circostanze durante il rendering del contenuto HDR per assicurarsi che questo sia il risultato netto.</span><span class="sxs-lookup"><span data-stu-id="75d26-125">That said, your application may need to perform scaling in some circumstances when rendering HDR content to ensure that this is the net result.</span></span>

<span data-ttu-id="75d26-126">Quando il desktop di Windows è in modalità SDR o WCG, il desktop è composto in uno spazio di luminanza a cui viene fatto riferimento.</span><span class="sxs-lookup"><span data-stu-id="75d26-126">When the Windows desktop is in SDR or WCG mode, the desktop is composed in a display-referred luminance space.</span></span> <span data-ttu-id="75d26-127">Tuttavia, se il desktop di Windows è in modalità HDR, la composizione del desktop viene eseguita nello spazio di luminanza a cui viene fatto riferimento nella scena.</span><span class="sxs-lookup"><span data-stu-id="75d26-127">But if the Windows desktop is in HDR mode, then desktop composition happens in scene-referred luminance space.</span></span> <span data-ttu-id="75d26-128">Ciò premesso, il Gestione finestre desktop (DWM) esegue le regolazioni della luminanza (spesso denominate SDRBoost) per le superfici di composizione a 8 bit e che semplifica l'applicazione per questo caso.</span><span class="sxs-lookup"><span data-stu-id="75d26-128">That said, the Desktop Window Manager (DWM) itself performs luminance adjustments (often called SDRBoost) for 8-bit composition surfaces, and that simplifies your application for that case.</span></span> <span data-ttu-id="75d26-129">Il boost automatico significa anche che il ruolo dell'applicazione nella conversione da uno spazio di luminanza a un altro dipende dal formato di composizione usato dall'applicazione per presentare il contenuto.</span><span class="sxs-lookup"><span data-stu-id="75d26-129">Even so, the automatic boost means that your application's role in converting from one luminance space to another is dependent upon the composition format that your application is using to present its content.</span></span>

<span data-ttu-id="75d26-130">Nella tabella seguente vengono descritti i casi in cui l'applicazione deve e non deve eseguire la regolazione del livello bianco, oltre a quanto dovrebbe essere la regolazione.</span><span class="sxs-lookup"><span data-stu-id="75d26-130">The table below describes the cases when your application should and should not perform a white level adjustment, as well as what that adjustment should be.</span></span> <span data-ttu-id="75d26-131">In generale, la regolazione dipende da tre fattori.</span><span class="sxs-lookup"><span data-stu-id="75d26-131">In general, the adjustment depends on three factors.</span></span>

1. <span data-ttu-id="75d26-132">Spazio cromatico contenuto input.</span><span class="sxs-lookup"><span data-stu-id="75d26-132">Input content colorspace.</span></span> <span data-ttu-id="75d26-133">Indica se il contenuto di input contiene o meno valori di luminanza HDR (High Dynamic Range).</span><span class="sxs-lookup"><span data-stu-id="75d26-133">Whether your input content contains high dynamic range (HDR) luminance values or not.</span></span> <span data-ttu-id="75d26-134">Il contenuto di WCG si comporta allo stesso modo di SDR per il comportamento della luminanza.</span><span class="sxs-lookup"><span data-stu-id="75d26-134">WCG content behaves the same as SDR for luminance behavior.</span></span>
2. <span data-ttu-id="75d26-135">Formato di composizione.</span><span class="sxs-lookup"><span data-stu-id="75d26-135">Composition format.</span></span> <span data-ttu-id="75d26-136">Il formato pixel della superficie di destinazione presentata allo DWM &mdash; , ad esempio una [catena di scambio](/windows/desktop/api/dxgi/nn-dxgi-idxgiswapchain) o una superficie di [composizione](/uwp/api/Windows.UI.Composition.ICompositionSurface).</span><span class="sxs-lookup"><span data-stu-id="75d26-136">The pixel format of the target surface that is presented to the DWM&mdash;for example, a [swap chain](/windows/desktop/api/dxgi/nn-dxgi-idxgiswapchain) or a [composition surface](/uwp/api/Windows.UI.Composition.ICompositionSurface).</span></span> <span data-ttu-id="75d26-137">Quando si esegue il rendering tramite Direct2D, il valore è **Uint8** o **FP16**.</span><span class="sxs-lookup"><span data-stu-id="75d26-137">When rendering using Direct2D, this is either **UINT8** or **FP16**.</span></span>
3. <span data-ttu-id="75d26-138">Modalità colore avanzata desktop.</span><span class="sxs-lookup"><span data-stu-id="75d26-138">Desktop advanced color mode.</span></span> <span data-ttu-id="75d26-139">Se DWM viene eseguito in modalità SDR, WCG o HDR per la visualizzazione corrente.</span><span class="sxs-lookup"><span data-stu-id="75d26-139">Whether the DWM is running in SDR, WCG, or HDR mode for the current display.</span></span> <span data-ttu-id="75d26-140">Ottenere queste informazioni tramite [**DXGI_OUTPUT_DESC1::**](/windows/desktop/api/dxgi1_6/ns-dxgi1_6-dxgi_output_desc1) [**AdvancedColorInfo. CurrentAdvancedColorKind**](/uwp/api/windows.graphics.display.advancedcolorinfo.currentadvancedcolorkind).</span><span class="sxs-lookup"><span data-stu-id="75d26-140">Obtain this information via [**DXGI_OUTPUT_DESC1::ColorSpace**](/windows/desktop/api/dxgi1_6/ns-dxgi1_6-dxgi_output_desc1) or [**AdvancedColorInfo.CurrentAdvancedColorKind**](/uwp/api/windows.graphics.display.advancedcolorinfo.currentadvancedcolorkind).</span></span>

<span data-ttu-id="75d26-141">In base a questi tre fattori, è necessario impostare i valori appropriati per `InputWhiteLevel` le `OutputWhiteLevel` proprietà e.</span><span class="sxs-lookup"><span data-stu-id="75d26-141">Based on these three factors, you should set the appropriate values for the `InputWhiteLevel` and `OutputWhiteLevel` properties.</span></span>

|<span data-ttu-id="75d26-142">Contenuto di input</span><span class="sxs-lookup"><span data-stu-id="75d26-142">Input content</span></span>|<span data-ttu-id="75d26-143">Formato composizione</span><span class="sxs-lookup"><span data-stu-id="75d26-143">Composition format</span></span>|<span data-ttu-id="75d26-144">Modalità colore avanzata</span><span class="sxs-lookup"><span data-stu-id="75d26-144">Advanced color mode</span></span>|<span data-ttu-id="75d26-145">InputWhiteLevel</span><span class="sxs-lookup"><span data-stu-id="75d26-145">InputWhiteLevel</span></span>|<span data-ttu-id="75d26-146">OutputWhiteLevel</span><span class="sxs-lookup"><span data-stu-id="75d26-146">OutputWhiteLevel</span></span>|
|-|-|-|-|-|
|<span data-ttu-id="75d26-147">SDR/WCG</span><span class="sxs-lookup"><span data-stu-id="75d26-147">SDR/WCG</span></span>|<span data-ttu-id="75d26-148">**UINT8**</span><span class="sxs-lookup"><span data-stu-id="75d26-148">**UINT8**</span></span>|<span data-ttu-id="75d26-149">Qualsiasi</span><span class="sxs-lookup"><span data-stu-id="75d26-149">Any</span></span>|<span data-ttu-id="75d26-150">N/D</span><span class="sxs-lookup"><span data-stu-id="75d26-150">N/A</span></span>|<span data-ttu-id="75d26-151">N/D</span><span class="sxs-lookup"><span data-stu-id="75d26-151">N/A</span></span>|
|<span data-ttu-id="75d26-152">SDR/WCG</span><span class="sxs-lookup"><span data-stu-id="75d26-152">SDR/WCG</span></span>|<span data-ttu-id="75d26-153">**FP16**</span><span class="sxs-lookup"><span data-stu-id="75d26-153">**FP16**</span></span>|<span data-ttu-id="75d26-154">SDR/WCG</span><span class="sxs-lookup"><span data-stu-id="75d26-154">SDR/WCG</span></span>|<span data-ttu-id="75d26-155">N/D</span><span class="sxs-lookup"><span data-stu-id="75d26-155">N/A</span></span>|<span data-ttu-id="75d26-156">N/D</span><span class="sxs-lookup"><span data-stu-id="75d26-156">N/A</span></span>|
|<span data-ttu-id="75d26-157">SDR/WCG</span><span class="sxs-lookup"><span data-stu-id="75d26-157">SDR/WCG</span></span>|<span data-ttu-id="75d26-158">**FP16**</span><span class="sxs-lookup"><span data-stu-id="75d26-158">**FP16**</span></span>|<span data-ttu-id="75d26-159">HDR</span><span class="sxs-lookup"><span data-stu-id="75d26-159">HDR</span></span>|<span data-ttu-id="75d26-160">SDRWhite</span><span class="sxs-lookup"><span data-stu-id="75d26-160">SDRWhite</span></span>|<span data-ttu-id="75d26-161">80</span><span class="sxs-lookup"><span data-stu-id="75d26-161">80</span></span>|
|<span data-ttu-id="75d26-162">HDR</span><span class="sxs-lookup"><span data-stu-id="75d26-162">HDR</span></span>|<span data-ttu-id="75d26-163">Qualsiasi</span><span class="sxs-lookup"><span data-stu-id="75d26-163">Any</span></span>|<span data-ttu-id="75d26-164">SDR/WCG</span><span class="sxs-lookup"><span data-stu-id="75d26-164">SDR/WCG</span></span>|<span data-ttu-id="75d26-165">80</span><span class="sxs-lookup"><span data-stu-id="75d26-165">80</span></span>|[<span data-ttu-id="75d26-166">**DXGI_OUTPUT_DESC1:: MaxLuminance**</span><span class="sxs-lookup"><span data-stu-id="75d26-166">**DXGI_OUTPUT_DESC1::MaxLuminance**</span></span>](/windows/desktop/api/dxgi1_6/ns-dxgi1_6-dxgi_output_desc1)|
|<span data-ttu-id="75d26-167">HDR</span><span class="sxs-lookup"><span data-stu-id="75d26-167">HDR</span></span>|<span data-ttu-id="75d26-168">**UINT8**</span><span class="sxs-lookup"><span data-stu-id="75d26-168">**UINT8**</span></span>|<span data-ttu-id="75d26-169">HDR</span><span class="sxs-lookup"><span data-stu-id="75d26-169">HDR</span></span>|<span data-ttu-id="75d26-170">80</span><span class="sxs-lookup"><span data-stu-id="75d26-170">80</span></span>|<span data-ttu-id="75d26-171">SDRWhite</span><span class="sxs-lookup"><span data-stu-id="75d26-171">SDRWhite</span></span>|
|<span data-ttu-id="75d26-172">HDR</span><span class="sxs-lookup"><span data-stu-id="75d26-172">HDR</span></span>|<span data-ttu-id="75d26-173">**FP16**</span><span class="sxs-lookup"><span data-stu-id="75d26-173">**FP16**</span></span>|<span data-ttu-id="75d26-174">HDR</span><span class="sxs-lookup"><span data-stu-id="75d26-174">HDR</span></span>|<span data-ttu-id="75d26-175">N/D</span><span class="sxs-lookup"><span data-stu-id="75d26-175">N/A</span></span>|<span data-ttu-id="75d26-176">N/D</span><span class="sxs-lookup"><span data-stu-id="75d26-176">N/A</span></span>|

<span data-ttu-id="75d26-177">Nella tabella, il valore 80 è il livello bianco di riferimento, in nit, per il contenuto sRGB o scRGB.</span><span class="sxs-lookup"><span data-stu-id="75d26-177">In the table, the value 80 is the reference white level, in nits, for sRGB or scRGB content.</span></span> <span data-ttu-id="75d26-178">A tale proposito, è possibile usare la costante [**D2D1_SCENE_REFERRED_SDR_WHITE_LEVEL**](/windows/desktop/direct2d/direct2d-constants), definita in `d2d1effects_2.h` .</span><span class="sxs-lookup"><span data-stu-id="75d26-178">For this, you can use the constant [**D2D1_SCENE_REFERRED_SDR_WHITE_LEVEL**](/windows/desktop/direct2d/direct2d-constants), which is defined in `d2d1effects_2.h`.</span></span> <span data-ttu-id="75d26-179">Il valore `SDRWhite` è il numero di nit che la visualizzazione deve usare per visualizzare il contenuto sRGB bianco.</span><span class="sxs-lookup"><span data-stu-id="75d26-179">The value `SDRWhite` is the number of nits that the display should use to display white sRGB content.</span></span> <span data-ttu-id="75d26-180">È possibile recuperare questo valore accedendo alla proprietà [**AdvancedColorInfo. SdrWhiteLevelInNits**](/uwp/api/windows.graphics.display.advancedcolorinfo.sdrwhitelevelinnits) .</span><span class="sxs-lookup"><span data-stu-id="75d26-180">You can retrieve this value by accessing the [**AdvancedColorInfo.SdrWhiteLevelInNits**](/uwp/api/windows.graphics.display.advancedcolorinfo.sdrwhitelevelinnits) property.</span></span> <span data-ttu-id="75d26-181">Il valore N/A significa che la regolazione del livello bianco non viene utilizzata in questo scenario. è possibile rimuovere l'effetto dal grafico o impostare i valori per un no-op.</span><span class="sxs-lookup"><span data-stu-id="75d26-181">The value N/A means that white level adjustment is not used in this scenario; you can either remove the effect from your graph, or set values for a no-op.</span></span>

<span data-ttu-id="75d26-182">Si noti che, nei casi in cui non è necessaria alcuna modifica a livello di bianco da parte dell'applicazione, DWM o la visualizzazione potrebbe gestire la conversione dallo spazio di luminanza a cui viene fatto riferimento nella scena.</span><span class="sxs-lookup"><span data-stu-id="75d26-182">Note that, in cases where a white level adjustment is not needed by the application, the DWM or the display may be handling the conversion from display-referred luminance space to scene-referred luminance space.</span></span>

- <span data-ttu-id="75d26-183">In modalità SDR/WCG la conversione viene eseguita dopo la composizione di DWM e si applica a tutto il contenuto presentato a tale visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="75d26-183">In SDR/WCG mode, the conversion happens after DWM composition, and applies to all content presented to that display.</span></span> <span data-ttu-id="75d26-184">Questa conversione viene eseguita in modo implicito nella visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="75d26-184">The display implicitly performs this conversion.</span></span>
- <span data-ttu-id="75d26-185">In modalità HDR la conversione viene eseguita automaticamente da DWM prima della composizione, purché la superficie di composizione dell'applicazione sia SDR.</span><span class="sxs-lookup"><span data-stu-id="75d26-185">In HDR mode, the conversion is performed automatically by the DWM before composition, so long as your application's composition surface is SDR.</span></span>

## <a name="requirements"></a><span data-ttu-id="75d26-186">Requisiti</span><span class="sxs-lookup"><span data-stu-id="75d26-186">Requirements</span></span>

| <span data-ttu-id="75d26-187">Requisito</span><span class="sxs-lookup"><span data-stu-id="75d26-187">Requirement</span></span> | <span data-ttu-id="75d26-188">Valore</span><span class="sxs-lookup"><span data-stu-id="75d26-188">Value</span></span> |
|-|-|
| <span data-ttu-id="75d26-189">Client minimo supportato</span><span class="sxs-lookup"><span data-stu-id="75d26-189">Minimum supported client</span></span> | <span data-ttu-id="75d26-190">Windows 10, versione 1809 (10,0; Build 17763) app \[ Desktop \| UWP app\]</span><span class="sxs-lookup"><span data-stu-id="75d26-190">Windows 10, version 1809 (10.0; Build 17763) \[desktop apps \| UWP apps\]</span></span> |
| <span data-ttu-id="75d26-191">Intestazione</span><span class="sxs-lookup"><span data-stu-id="75d26-191">Header</span></span> | <span data-ttu-id="75d26-192">d2d1effects \_ 2. h</span><span class="sxs-lookup"><span data-stu-id="75d26-192">d2d1effects\_2.h</span></span> |
| <span data-ttu-id="75d26-193">Libreria</span><span class="sxs-lookup"><span data-stu-id="75d26-193">Library</span></span> | <span data-ttu-id="75d26-194">d2d1. lib, dxguid. lib</span><span class="sxs-lookup"><span data-stu-id="75d26-194">d2d1.lib, dxguid.lib</span></span> |

## <a name="related-topics"></a><span data-ttu-id="75d26-195">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="75d26-195">Related topics</span></span>

* [<span data-ttu-id="75d26-196">Interfaccia ID2D1Effect</span><span class="sxs-lookup"><span data-stu-id="75d26-196">ID2D1Effect interface</span></span>](/windows/desktop/api/d2d1_1/nn-d2d1_1-id2d1effect)
* [<span data-ttu-id="75d26-197">Enumerazione D2D1_WHITELEVELADJUSTMENT_PROP</span><span class="sxs-lookup"><span data-stu-id="75d26-197">D2D1_WHITELEVELADJUSTMENT_PROP enumeration</span></span>](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_whiteleveladjustment_prop)
