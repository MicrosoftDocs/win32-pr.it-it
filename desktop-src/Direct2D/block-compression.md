---
title: Compressione a blocchi
description: Viene descritto il funzionamento della compressione a blocchi e il modo in cui utilizzarlo in WIC e Direct2D.
ms.assetid: 52AF86A5-16E8-4AC8-BB67-CC2F1A3635B5
ms.topic: article
ms.date: 05/31/2018
ms.custom: seodec18
ms.openlocfilehash: aeb6ba9427a04f7a251a1d59062be508e4249b41
ms.sourcegitcommit: ee06501cc29132927ade9813e0888aaa4decc487
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/28/2021
ms.locfileid: "104530409"
---
# <a name="block-compression"></a><span data-ttu-id="83b41-103">Compressione a blocchi</span><span class="sxs-lookup"><span data-stu-id="83b41-103">Block compression</span></span>

<span data-ttu-id="83b41-104">A partire da Windows 8.1, Direct2D supporta diversi formati pixel compressi in blocchi.</span><span class="sxs-lookup"><span data-stu-id="83b41-104">Starting with Windows 8.1, Direct2D supports several block compressed pixel formats.</span></span> <span data-ttu-id="83b41-105">Inoltre, Windows 8.1 contiene un nuovo codec di Windows Imaging Component (WIC) DDS per consentire il caricamento e l'archiviazione di immagini compresse a blocchi nel formato di file DDS.</span><span class="sxs-lookup"><span data-stu-id="83b41-105">In addition, Windows 8.1 contains a new Windows Imaging Component (WIC) DDS codec to enable loading and storing block compressed images in the DDS file format.</span></span> <span data-ttu-id="83b41-106">La compressione a blocchi è una tecnica che consente di ridurre la quantità di memoria grafica utilizzata dal contenuto bitmap.</span><span class="sxs-lookup"><span data-stu-id="83b41-106">Block compression is a technique for reducing the amount of graphics memory that is consumed by bitmap content.</span></span> <span data-ttu-id="83b41-107">Usando la compressione a blocchi, l'app può ridurre il consumo di memoria e i tempi di caricamento per le stesse immagini di risoluzione.</span><span class="sxs-lookup"><span data-stu-id="83b41-107">By using block compression, your app can reduce memory consumption and load times for the same resolution images.</span></span> <span data-ttu-id="83b41-108">In alternativa, l'app può usare immagini di risoluzione più o superiore, pur continuando a usare lo stesso footprint di memoria della GPU.</span><span class="sxs-lookup"><span data-stu-id="83b41-108">Or, your app can use more or higher resolution images while still consuming the same GPU memory footprint.</span></span>

<span data-ttu-id="83b41-109">La compressione a blocchi è stata usata dalle applicazioni Direct3D per molto tempo e con Windows 8.1 è disponibile anche per gli sviluppatori di applicazioni mainstream e Direct2D.</span><span class="sxs-lookup"><span data-stu-id="83b41-109">Block compression has been used by Direct3D applications for a long time, and with Windows 8.1 is available to mainstream and Direct2D application developers as well.</span></span>

<span data-ttu-id="83b41-110">In questo argomento viene descritto il funzionamento della compressione dei blocchi e il modo in cui utilizzarlo in WIC e Direct2D.</span><span class="sxs-lookup"><span data-stu-id="83b41-110">This topic describes how block compression works and how to use it in WIC and Direct2D.</span></span>

## <a name="about-block-compression"></a><span data-ttu-id="83b41-111">Informazioni sulla compressione dei blocchi</span><span class="sxs-lookup"><span data-stu-id="83b41-111">About Block Compression</span></span>

<span data-ttu-id="83b41-112">La [compressione dei blocchi](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-resources-block-compression) (BC) si riferisce a una classe di tecniche di compressione per ridurre le dimensioni della trama.</span><span class="sxs-lookup"><span data-stu-id="83b41-112">[Block Compression](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-resources-block-compression) (BC) refers to a class of compression techniques for reducing texture sizes.</span></span> <span data-ttu-id="83b41-113">Direct3D 11 supporta fino a 7 formati BC diversi a seconda del livello di funzionalità.</span><span class="sxs-lookup"><span data-stu-id="83b41-113">Direct3D 11 supports up to 7 different BC formats depending on feature level.</span></span> <span data-ttu-id="83b41-114">In Windows 8.1 Direct2D introduce il supporto per i formati BC1, BC2 e BC3 disponibili in tutti i livelli di funzionalità.</span><span class="sxs-lookup"><span data-stu-id="83b41-114">In Windows 8.1 Direct2D introduces support for the BC1, BC2 and BC3 formats which are available across all feature levels.</span></span>

### <a name="how-block-compression-works"></a><span data-ttu-id="83b41-115">Funzionamento della compressione dei blocchi</span><span class="sxs-lookup"><span data-stu-id="83b41-115">How Block Compression works</span></span>

<span data-ttu-id="83b41-116">I formati compressi in blocchi utilizzano tutti la stessa tecnica di base per ridurre lo spazio utilizzato dai dati di colore.</span><span class="sxs-lookup"><span data-stu-id="83b41-116">The block compressed formats all use the same basic technique to reduce the space consumed by color data.</span></span> <span data-ttu-id="83b41-117">In questa sezione viene riepilogato l'algoritmo più semplice, BC1.</span><span class="sxs-lookup"><span data-stu-id="83b41-117">This section summarizes the simplest algorithm, BC1.</span></span> <span data-ttu-id="83b41-118">Per una spiegazione più dettagliata, vedere [compressione dei blocchi](/windows/desktop/direct3d11/texture-block-compression-in-direct3d-11).</span><span class="sxs-lookup"><span data-stu-id="83b41-118">For a more detailed explanation, see [Block Compression](/windows/desktop/direct3d11/texture-block-compression-in-direct3d-11).</span></span>

<span data-ttu-id="83b41-119">In primo luogo, l'immagine è divisa in blocchi da 4 a 4 pixel.</span><span class="sxs-lookup"><span data-stu-id="83b41-119">First, the image is divided into blocks of 4 by 4 pixels.</span></span> <span data-ttu-id="83b41-120">Ogni blocco viene compresso separatamente.</span><span class="sxs-lookup"><span data-stu-id="83b41-120">Each block is compressed separately.</span></span>

> [!Note]  
> <span data-ttu-id="83b41-121">Ciò significa che la larghezza e l'altezza di un'immagine devono essere un multiplo di 4 pixel affinché venga compresso in blocco.</span><span class="sxs-lookup"><span data-stu-id="83b41-121">This means an image’s width and height must each be a multiple of 4 pixel for it to be block compressed.</span></span>

 

<span data-ttu-id="83b41-122">Questa immagine di esempio mostra un blocco di pixel 4x4 all'interno di un'immagine.</span><span class="sxs-lookup"><span data-stu-id="83b41-122">This example image shows a 4x4 pixel block within an image.</span></span>

![un'immagine di esempio mostra un blocco di pixel 4x4 all'interno di un'immagine.](images/dds1.png)

<span data-ttu-id="83b41-124">Successivamente, all'interno di un blocco 4 per 4, vengono selezionati due colori "Reference" e vengono codificati come valori di bit 2 16 (5 bit in rosso, 6 bit verde, 5 bit blu).</span><span class="sxs-lookup"><span data-stu-id="83b41-124">Next, within a 4 by 4 block, two “reference” colors are selected and are encoded as two 16 bit values (5 bits red, 6 bits green, 5 bits blue).</span></span> <span data-ttu-id="83b41-125">La scelta di questi colori influiscono significativamente sulla qualità dell'immagine e non è semplice.</span><span class="sxs-lookup"><span data-stu-id="83b41-125">The choice of these colors significantly affects image quality and is nontrivial.</span></span> <span data-ttu-id="83b41-126">Due colori intermedi vengono calcolati tramite l'interpolazione lineare tra i due colori di riferimento nello spazio colore RGB.</span><span class="sxs-lookup"><span data-stu-id="83b41-126">Two intermediate colors are calculated by linearly interpolating between the two reference colors in the RGB color space.</span></span> <span data-ttu-id="83b41-127">Ciò produce un totale di 4 colori possibili differenti. a ogni colore viene assegnato un valore di indice a due bit.</span><span class="sxs-lookup"><span data-stu-id="83b41-127">This produces a total of 4 different possible colors; each color is assigned a two bit index value.</span></span> <span data-ttu-id="83b41-128">Si noti tuttavia che è necessario archiviare solo i due colori dell'endpoint durante la correzione dell'interpolazione.</span><span class="sxs-lookup"><span data-stu-id="83b41-128">However, note that only the two endpoint colors need to be stored as the interpolation is fixed.</span></span>

<span data-ttu-id="83b41-129">In questa figura, i colori 0 e 3 vengono selezionati come colori "Reference" per il blocco, mentre i colori 1 e 2 vengono calcolati usando l'interpolazione lineare.</span><span class="sxs-lookup"><span data-stu-id="83b41-129">In this figure, colors 0 and 3 are selected as “reference” colors for the block, while colors 1 and 2 are calculated using linear interpolation.</span></span>

![Diagramma che mostra il calcolo di 4 valori di colore per rappresentare il blocco.](images/dds2.png)

<span data-ttu-id="83b41-131">Infine, ogni pixel nel blocco viene mappato a uno dei quattro colori calcolati in precedenza e ogni pixel viene codificato usando il valore di indice a due bit.</span><span class="sxs-lookup"><span data-stu-id="83b41-131">Finally, every pixel in the block is mapped to one of the four previously calculated colors, and each pixel is encoded using the two bit index value.</span></span>

<span data-ttu-id="83b41-132">La quantità totale di dati usati per rappresentare questi 16 pixel è la seguente:</span><span class="sxs-lookup"><span data-stu-id="83b41-132">The total amount of data used to represent these 16 pixels is:</span></span>

`16 bits [to define a reference color] * 2 + 2 bits * 16 [number of pixels]  = 64 bits`

<span data-ttu-id="83b41-133">Ciò comporta una densità media di 4 bit per pixel.</span><span class="sxs-lookup"><span data-stu-id="83b41-133">This results in an average density of 4 bits per pixel.</span></span> <span data-ttu-id="83b41-134">Per il confronto, il formato DXGI comune \_ \_ B8G8R8A8 \_ UNORM pixel utilizza 32 bit per pixel.</span><span class="sxs-lookup"><span data-stu-id="83b41-134">For comparison, the common DXGI\_FORMAT\_B8G8R8A8\_UNORM pixel format consumes 32 bits per pixel.</span></span>

<span data-ttu-id="83b41-135">Questo diagramma mostra che ogni pixel è codificato come indice a 2 bit.</span><span class="sxs-lookup"><span data-stu-id="83b41-135">This diagram shows that each pixel is encoded as a 2 bit index.</span></span> <span data-ttu-id="83b41-136">L'intero blocco è codificato in 64 bit.</span><span class="sxs-lookup"><span data-stu-id="83b41-136">The entire block is encoded in 64 bits.</span></span>

![calcolo di 4 valori di colore per rappresentare il blocco.](images/dds3.png)

<span data-ttu-id="83b41-138">Esistono varianti per supportare i dati Alpha e variare il numero di canali dei colori.</span><span class="sxs-lookup"><span data-stu-id="83b41-138">There are variations to support alpha data and varying numbers of color channels.</span></span> <span data-ttu-id="83b41-139">BC6H e BC7 usano algoritmi significativamente diversi per supportare il contenuto HDR (High Dynamic Range) e migliorare la qualità dell'immagine, rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="83b41-139">BC6H and BC7 use significantly different algorithms in order to support high dynamic range (HDR) content and increase image quality, respectively.</span></span>

### <a name="directdraw-surface-dds-file-format"></a><span data-ttu-id="83b41-140">Formato file DirectDraw Surface (DDS)</span><span class="sxs-lookup"><span data-stu-id="83b41-140">DirectDraw Surface (DDS) file format</span></span>

<span data-ttu-id="83b41-141">I dati compressi in blocchi vengono in genere archiviati in file di [Superficie DirectDraw (DDS)](/windows/desktop/direct3ddds/dx-graphics-dds-reference) .</span><span class="sxs-lookup"><span data-stu-id="83b41-141">Block compressed data is typically stored in [DirectDraw Surface (DDS)](/windows/desktop/direct3ddds/dx-graphics-dds-reference) files.</span></span> <span data-ttu-id="83b41-142">Se si è uno sviluppatore Direct3D, è possibile che si abbia familiarità con i file DDS.</span><span class="sxs-lookup"><span data-stu-id="83b41-142">You may be familiar with DDS files if you are a Direct3D developer.</span></span> <span data-ttu-id="83b41-143">Si noti che Direct2D supporta solo alcune funzionalità DDS; Per ulteriori informazioni, vedere [requisiti DDS](#dds-requirements).</span><span class="sxs-lookup"><span data-stu-id="83b41-143">Note that Direct2D only supports certain DDS features; for more information see [DDS Requirements](#dds-requirements).</span></span>

### <a name="advantages-of-block-compression"></a><span data-ttu-id="83b41-144">Vantaggi della compressione dei blocchi</span><span class="sxs-lookup"><span data-stu-id="83b41-144">Advantages of block compression</span></span>

<span data-ttu-id="83b41-145">I formati compressi in blocchi differiscono dai formati comuni di compressione delle immagini del settore, ad esempio JPEG, in quanto i formati BC sono supportati in modo nativo dalle GPU moderne.</span><span class="sxs-lookup"><span data-stu-id="83b41-145">Block compressed formats differ from common industry image compression formats such as JPEG in that BC formats are natively supported by modern GPUs.</span></span> <span data-ttu-id="83b41-146">Ciò significa che è possibile caricare direttamente un'immagine compressa a blocchi sulla GPU senza alcuna decodifica o decompressione.</span><span class="sxs-lookup"><span data-stu-id="83b41-146">This means that you can directly load a block compressed image onto the GPU without any decoding or decompression.</span></span> <span data-ttu-id="83b41-147">I formati BC utilizzano la media da 4 a 8 bit per pixel; Se confrontato con una bitmap BGRA non compressa 32 bit per pixel, questo comporta un risparmio di memoria pari al 75% al 87,5%.</span><span class="sxs-lookup"><span data-stu-id="83b41-147">BC formats consume from 4 to 8 bits per pixel on average; when compared to a typical uncompressed 32 bit per pixel BGRA bitmap, this results in memory savings of 75% to 87.5%.</span></span> <span data-ttu-id="83b41-148">Inoltre, poiché non è disponibile un passaggio di decodifica, il tempo necessario per il caricamento di un'immagine BC viene ridotto significativamente rispetto a formati quali JPEG.</span><span class="sxs-lookup"><span data-stu-id="83b41-148">Also, because there is no decode step, the time to load a BC image is significantly reduced compared to formats like JPEG.</span></span>

### <a name="when-to-use-block-compression"></a><span data-ttu-id="83b41-149">Quando usare la compressione a blocchi</span><span class="sxs-lookup"><span data-stu-id="83b41-149">When to use Block Compression</span></span>

<span data-ttu-id="83b41-150">È consigliabile usare le immagini compresse bloccate nell'app anziché altri formati, ad esempio JPEG, se si vuole ridurre il consumo di memoria delle bitmap o si vuole ridurre i tempi di decodifica e di caricamento.</span><span class="sxs-lookup"><span data-stu-id="83b41-150">You should consider using block compressed images in your app instead of other formats such as JPEG if you want to reduce the memory consumption of bitmaps or want to reduce decode and load times.</span></span>

<span data-ttu-id="83b41-151">Tuttavia, la compressione dei blocchi non è appropriata per tutti i casi e richiede alcuni compromessi.</span><span class="sxs-lookup"><span data-stu-id="83b41-151">However, block compression is not appropriate for all cases and requires some tradeoffs.</span></span> <span data-ttu-id="83b41-152">In primo luogo, gli algoritmi di compressione dei blocchi sono di perdita.</span><span class="sxs-lookup"><span data-stu-id="83b41-152">First, the block compression algorithms are lossy.</span></span> <span data-ttu-id="83b41-153">La compressione dei blocchi funziona bene con contenuto fotografico naturale, ma può introdurre artefatti visivi indesiderati in immagini con limiti di contrasto elevato e nitidi, come le schermate generate dal computer.</span><span class="sxs-lookup"><span data-stu-id="83b41-153">Block compression works well with natural photographic content but can introduce unwanted visual artifacts into images with sharp, high contrast boundaries, such as computer-generated screenshots.</span></span> <span data-ttu-id="83b41-154">È necessario assicurarsi che la qualità dell'immagine del blocco delle immagini compresse sia accettabile prima di usarla.</span><span class="sxs-lookup"><span data-stu-id="83b41-154">You should ensure that your block compressed image assets have acceptable image quality before using them.</span></span>

<span data-ttu-id="83b41-155">In secondo luogo, i file DDS compressi utilizzano in genere più spazio sul disco rispetto alle immagini JPEG paragonabili.</span><span class="sxs-lookup"><span data-stu-id="83b41-155">Second, block compressed DDS files generally consume more space on disk than comparable JPEG images.</span></span> <span data-ttu-id="83b41-156">Ciò a sua volta aumenterà le dimensioni del pacchetto dell'app e i requisiti di larghezza di banda di rete.</span><span class="sxs-lookup"><span data-stu-id="83b41-156">This in turn will increase your app’s package size and network bandwidth requirements.</span></span>

## <a name="using-block-compression"></a><span data-ttu-id="83b41-157">Uso della compressione a blocchi</span><span class="sxs-lookup"><span data-stu-id="83b41-157">Using Block Compression</span></span>

<span data-ttu-id="83b41-158">Questa sezione illustra come generare e usare asset compressi in blocchi in un'app Direct2D.</span><span class="sxs-lookup"><span data-stu-id="83b41-158">This section explains how to generate and use block compressed assets in a Direct2D app.</span></span>

### <a name="overview"></a><span data-ttu-id="83b41-159">Panoramica</span><span class="sxs-lookup"><span data-stu-id="83b41-159">Overview</span></span>

<span data-ttu-id="83b41-160">I file DDS compressi sono un formato ottimizzato per il runtime, ovvero sono ottimizzati in modo specifico per prestazioni ottimali in fase di esecuzione dell'app.</span><span class="sxs-lookup"><span data-stu-id="83b41-160">Block compressed DDS files are a runtime-optimized format, meaning that they are specifically optimized for good performance at app runtime.</span></span> <span data-ttu-id="83b41-161">Si consiglia di continuare a usare la pipeline di creazione e modifica degli asset esistente e di convertirla in un formato compresso a blocchi solo quando vengono importati nel progetto di applicazione o in fase di compilazione.</span><span class="sxs-lookup"><span data-stu-id="83b41-161">We recommend that you continue to use your existing asset creation and editing pipeline, and only convert to a block compressed format when you import them into your application project, or at build time.</span></span>

### <a name="dds-requirements"></a><span data-ttu-id="83b41-162">Requisiti DDS</span><span class="sxs-lookup"><span data-stu-id="83b41-162">DDS requirements</span></span>

<span data-ttu-id="83b41-163">Il formato di file DDS è stato progettato per supportare un'ampia gamma di funzionalità usate in Direct3D.</span><span class="sxs-lookup"><span data-stu-id="83b41-163">The DDS file format was designed to support a wide range of features used in Direct3D.</span></span> <span data-ttu-id="83b41-164">Direct2D utilizza solo un subset di queste funzionalità.</span><span class="sxs-lookup"><span data-stu-id="83b41-164">Direct2D only uses a subset of these features.</span></span> <span data-ttu-id="83b41-165">Pertanto, quando si creano immagini DDS da usare con Direct2D, è necessario tenere presenti le restrizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="83b41-165">Therefore when you are creating DDS images for use with Direct2D, you must keep in mind the following restrictions:</span></span>

-   <span data-ttu-id="83b41-166">Sono consentiti solo i valori di [**\_ formato DXGI**](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) seguenti:</span><span class="sxs-lookup"><span data-stu-id="83b41-166">Only the following [**DXGI\_FORMAT**](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) values are allowed:</span></span>
    -   <span data-ttu-id="83b41-167">\_Formato DXGI \_ BC1 \_ UNORM</span><span class="sxs-lookup"><span data-stu-id="83b41-167">DXGI\_FORMAT\_BC1\_UNORM</span></span>
    -   <span data-ttu-id="83b41-168">\_Formato DXGI \_ BC2 \_ UNORM</span><span class="sxs-lookup"><span data-stu-id="83b41-168">DXGI\_FORMAT\_BC2\_UNORM</span></span>
    -   <span data-ttu-id="83b41-169">\_Formato DXGI \_ BC3 \_ UNORM</span><span class="sxs-lookup"><span data-stu-id="83b41-169">DXGI\_FORMAT\_BC3\_UNORM</span></span>
-   <span data-ttu-id="83b41-170">È necessario utilizzare i dati alfa premoltiplicati.</span><span class="sxs-lookup"><span data-stu-id="83b41-170">Premultiplied alpha data must be used.</span></span> <span data-ttu-id="83b41-171">Sono inclusi i file DDS legacy che usano formati che definiscono in modo esplicito i valori alfa premoltiplicati (DXT1, DXT2, DXT4), nonché i file DDS che usano la \_ struttura dell'intestazione DDS \_ DX10 con i \_ \_ \_ \_ \_ \_ valori premoltiplicati per la modalità Alpha DDS e la modalità Alpha DDS.</span><span class="sxs-lookup"><span data-stu-id="83b41-171">This includes legacy DDS files using formats that explicitly define premultiplied alpha (DXT1, DXT2, DXT4), as well as DDS files that use the DDS\_HEADER\_DX10 structure with the DDS\_ALPHA\_MODE\_OPAQUE and DDS\_ALPHA\_MODE\_PREMULTIPLIED values.</span></span>
-   <span data-ttu-id="83b41-172">Le dimensioni X e Y devono essere multipli di 4 pixel.</span><span class="sxs-lookup"><span data-stu-id="83b41-172">The X and Y dimensions must be multiples of 4 pixels.</span></span>
-   <span data-ttu-id="83b41-173">Non sono consentite trame del volume, CubeMaps, mipmap o matrici di trame.</span><span class="sxs-lookup"><span data-stu-id="83b41-173">Volume textures, cubemaps, mipmaps, or texture arrays are not allowed.</span></span> <span data-ttu-id="83b41-174">È consigliabile usare solo immagini di origine con singolo frame.</span><span class="sxs-lookup"><span data-stu-id="83b41-174">You should only use single frame source images.</span></span>

### <a name="generating-block-compressed-assets"></a><span data-ttu-id="83b41-175">Generazione di asset compressi in blocchi</span><span class="sxs-lookup"><span data-stu-id="83b41-175">Generating Block Compressed assets</span></span>

<span data-ttu-id="83b41-176">Sono disponibili diversi strumenti per la creazione di DDS per la creazione o la conversione di file DDS compressi in blocchi.</span><span class="sxs-lookup"><span data-stu-id="83b41-176">There are a variety of DDS authoring tools available to create or convert block compressed DDS files.</span></span> <span data-ttu-id="83b41-177">Si noti che non tutti gli strumenti supportano i requisiti per l'uso di file DDS con Direct2D, come descritto nella sezione precedente.</span><span class="sxs-lookup"><span data-stu-id="83b41-177">Note not all tools support the requirements for using DDS files with Direct2D, as detailed in the previous section.</span></span>

<span data-ttu-id="83b41-178">A partire da Visual Studio 2013, è possibile fare in modo che Visual Studio converta gli asset visivi esistenti, ad esempio JPEG e PNG, nel formato compresso del blocco DDS corretto come parte automatica del processo di compilazione.</span><span class="sxs-lookup"><span data-stu-id="83b41-178">Beginning with Visual Studio 2013, you can have Visual Studio convert existing visual assets such as JPEG and PNG to the correct DDS block compressed format as an automatic part of your build process.</span></span> <span data-ttu-id="83b41-179">Questa operazione viene eseguita usando l'istruzione di compilazione personalizzata dell'attività contenuto immagine.</span><span class="sxs-lookup"><span data-stu-id="83b41-179">This is accomplished using the Image Content Task custom build step.</span></span>

<span data-ttu-id="83b41-180">Per informazioni su come configurare questa impostazione per il progetto, vedere [procedura: esportare una trama da usare con le app Direct2D o JavaScript](/previous-versions/visualstudio/visual-studio-2013/dn392693(v=vs.120)).</span><span class="sxs-lookup"><span data-stu-id="83b41-180">For information on how to set this up for your project, see: [How to: Export a Texture for Use with Direct2D or Javascipt Apps](/previous-versions/visualstudio/visual-studio-2013/dn392693(v=vs.120)).</span></span>

### <a name="direct2d-apis"></a><span data-ttu-id="83b41-181">API Direct2D</span><span class="sxs-lookup"><span data-stu-id="83b41-181">Direct2D APIs</span></span>

<span data-ttu-id="83b41-182">Direct2D viene aggiornato in Windows 8.1 per supportare i formati pixel seguenti:</span><span class="sxs-lookup"><span data-stu-id="83b41-182">Direct2D is updated in Windows 8.1 to support the following pixel formats:</span></span>

-   <span data-ttu-id="83b41-183">\_Formato DXGI \_ BC1 \_ UNORM</span><span class="sxs-lookup"><span data-stu-id="83b41-183">DXGI\_FORMAT\_BC1\_UNORM</span></span>
-   <span data-ttu-id="83b41-184">\_Formato DXGI \_ BC2 \_ UNORM</span><span class="sxs-lookup"><span data-stu-id="83b41-184">DXGI\_FORMAT\_BC2\_UNORM</span></span>
-   <span data-ttu-id="83b41-185">\_Formato DXGI \_ BC3 \_ UNORM</span><span class="sxs-lookup"><span data-stu-id="83b41-185">DXGI\_FORMAT\_BC3\_UNORM</span></span>

<span data-ttu-id="83b41-186">Per i formati precedenti, è necessario usare l'alfa premoltiplicato.</span><span class="sxs-lookup"><span data-stu-id="83b41-186">For the preceding formats, you must use premultiplied alpha.</span></span> <span data-ttu-id="83b41-187">Inoltre, questi formati sono validi solo per l'utilizzo come origine, non come destinazione.</span><span class="sxs-lookup"><span data-stu-id="83b41-187">In addition, these formats are only valid for use as a source, not a target.</span></span> <span data-ttu-id="83b41-188">Questo significa, ad esempio, che è possibile creare una bitmap Direct2D usando BC1, ma non un contesto di dispositivo.</span><span class="sxs-lookup"><span data-stu-id="83b41-188">For example, this means that you can create a Direct2D bitmap using BC1, but not a device context.</span></span>

<span data-ttu-id="83b41-189">I metodi seguenti vengono aggiornati in Windows 8.1 per supportare i formati BC:</span><span class="sxs-lookup"><span data-stu-id="83b41-189">The following methods are updated in Windows 8.1 to support BC formats:</span></span>

-   [<span data-ttu-id="83b41-190">**ID2D1DeviceContext::IsDxgiFormatSupported**</span><span class="sxs-lookup"><span data-stu-id="83b41-190">**ID2D1DeviceContext::IsDxgiFormatSupported**</span></span>](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-isdxgiformatsupported)
-   <span data-ttu-id="83b41-191">[**ID2D1DeviceContext:: CreateBitmap**](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-createbitmap(d2d1_size_u_constvoid_uint32_constd2d1_bitmap_properties1__id2d1bitmap1))</span><span class="sxs-lookup"><span data-stu-id="83b41-191">[**ID2D1DeviceContext::CreateBitmap**](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-createbitmap(d2d1_size_u_constvoid_uint32_constd2d1_bitmap_properties1__id2d1bitmap1))</span></span>
-   <span data-ttu-id="83b41-192">[**ID2D1DeviceContext::CreateBitmapFromDxgiSurface**](/windows/desktop/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-createbitmapfromdxgisurface(idxgisurface_constd2d1_bitmap_properties1__id2d1bitmap1))</span><span class="sxs-lookup"><span data-stu-id="83b41-192">[**ID2D1DeviceContext::CreateBitmapFromDxgiSurface**](/windows/desktop/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-createbitmapfromdxgisurface(idxgisurface_constd2d1_bitmap_properties1__id2d1bitmap1))</span></span>
-   [<span data-ttu-id="83b41-193">**ID2D1RenderTarget:: CreateSharedBitmap**</span><span class="sxs-lookup"><span data-stu-id="83b41-193">**ID2D1RenderTarget::CreateSharedBitmap**</span></span>](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createsharedbitmap)
-   [<span data-ttu-id="83b41-194">**ID2D1RenderTarget:: CreateBitmapFromWicBitmap**</span><span class="sxs-lookup"><span data-stu-id="83b41-194">**ID2D1RenderTarget::CreateBitmapFromWicBitmap**</span></span>](id2d1rendertarget-createbitmapfromwicbitmap.md)
-   [<span data-ttu-id="83b41-195">**ID2D1Bitmap:: CopyFromMemory**</span><span class="sxs-lookup"><span data-stu-id="83b41-195">**ID2D1Bitmap::CopyFromMemory**</span></span>](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfrommemory)
-   [<span data-ttu-id="83b41-196">**ID2D1Bitmap:: CopyFromBitmap**</span><span class="sxs-lookup"><span data-stu-id="83b41-196">**ID2D1Bitmap::CopyFromBitmap**</span></span>](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfrombitmap)
-   [<span data-ttu-id="83b41-197">**ID2D1Bitmap1:: GetSurface**</span><span class="sxs-lookup"><span data-stu-id="83b41-197">**ID2D1Bitmap1::GetSurface**</span></span>](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1bitmap1-getsurface)

<span data-ttu-id="83b41-198">Si noti che [**CreateBitmapFromWicBitmap**](id2d1devicecontext-createbitmapfromwicbitmap-overload.md) accetta [**IWICBitmapSource**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapsource) come interfaccia; Tuttavia, in Windows 8.1 WIC non supporta l'ottenimento di dati compressi di blocco da **IWICBitmapSource** e non esiste alcun formato pixel WIC corrispondente al \_ formato DXGI \_ BC1 UNORM e \_ così via. **CreateBitmapFromWicBitmap** determina invece se **IWICBitmapSource** è un [**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) DDS valido e carica direttamente i dati compressi del blocco.</span><span class="sxs-lookup"><span data-stu-id="83b41-198">Note that [**CreateBitmapFromWicBitmap**](id2d1devicecontext-createbitmapfromwicbitmap-overload.md) takes [**IWICBitmapSource**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapsource) as an interface; however in Windows 8.1 WIC does not support obtaining block compressed data from **IWICBitmapSource**, and there is no WIC pixel format corresponding to DXGI\_FORMAT\_BC1\_UNORM, etc. Instead, **CreateBitmapFromWicBitmap** determines if the **IWICBitmapSource** is a valid DDS [**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) and directly loads the block compressed data.</span></span> <span data-ttu-id="83b41-199">È possibile specificare in modo esplicito il formato pixel nello struct [**d2d1 \_ bitmap \_ PROPERTIES1**](/windows/desktop/api/D2D1_1/ns-d2d1_1-d2d1_bitmap_properties1) oppure consentire a Direct2D di determinare automaticamente il formato corretto.</span><span class="sxs-lookup"><span data-stu-id="83b41-199">You can either explicitly specify the pixel format in the [**D2D1\_BITMAP\_PROPERTIES1**](/windows/desktop/api/D2D1_1/ns-d2d1_1-d2d1_bitmap_properties1) struct, or allow Direct2D to automatically determine the correct format.</span></span>

### <a name="windows-imaging-component-apis"></a><span data-ttu-id="83b41-200">API componenti Windows Imaging</span><span class="sxs-lookup"><span data-stu-id="83b41-200">Windows Imaging Component APIs</span></span>

<span data-ttu-id="83b41-201">Windows Imaging Component (WIC) aggiunge un nuovo codec DDS in Windows 8.1.</span><span class="sxs-lookup"><span data-stu-id="83b41-201">The Windows Imaging Component (WIC) adds a new DDS codec in Windows 8.1.</span></span> <span data-ttu-id="83b41-202">Inoltre, vengono aggiunte nuove interfacce che supportano l'accesso a dati specifici di DDS, inclusi i dati pixel compressi del blocco:</span><span class="sxs-lookup"><span data-stu-id="83b41-202">In addition, it adds new interfaces that support accessing DDS-specific data, including block compressed pixel data:</span></span>

-   [<span data-ttu-id="83b41-203">**IWICDdsDecoder**</span><span class="sxs-lookup"><span data-stu-id="83b41-203">**IWICDdsDecoder**</span></span>](/windows/desktop/api/wincodec/nn-wincodec-iwicddsdecoder)
-   [<span data-ttu-id="83b41-204">**IWICDdsEncoder**</span><span class="sxs-lookup"><span data-stu-id="83b41-204">**IWICDdsEncoder**</span></span>](/windows/desktop/api/wincodec/nn-wincodec-iwicddsencoder)
-   [<span data-ttu-id="83b41-205">**IWICDdsFrameDecode**</span><span class="sxs-lookup"><span data-stu-id="83b41-205">**IWICDdsFrameDecode**</span></span>](/windows/desktop/api/wincodec/nn-wincodec-iwicddsframedecode)

### <a name="block-compressed-wic-pixel-formats"></a><span data-ttu-id="83b41-206">Blocca formati pixel WIC compressi</span><span class="sxs-lookup"><span data-stu-id="83b41-206">Block Compressed WIC pixel formats</span></span>

<span data-ttu-id="83b41-207">Non sono presenti nuovi formati di pixel compressi in blocchi WIC in Windows 8.1.</span><span class="sxs-lookup"><span data-stu-id="83b41-207">There are no new WIC block compressed pixel formats in Windows 8.1.</span></span> <span data-ttu-id="83b41-208">Se invece si ottiene un [**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) dal decodificatore DDS e si chiama [**CopyPixels**](/windows/desktop/api/wincodec/nf-wincodec-iwicbitmapsource-copypixels), si riceveranno pixel standard non compressi, ad esempio WICPixelFormat32bppPBGRA.</span><span class="sxs-lookup"><span data-stu-id="83b41-208">Instead, if you obtain an [**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) from the DDS decoder and call [**CopyPixels**](/windows/desktop/api/wincodec/nf-wincodec-iwicbitmapsource-copypixels), you will receive standard uncompressed pixels such as WICPixelFormat32bppPBGRA.</span></span> <span data-ttu-id="83b41-209">È possibile usare [**IWICDdsFrameDecode:: CopyBlocks**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsframedecode-copyblocks) per ottenere i dati compressi dei blocchi non elaborati sotto forma di buffer di memoria da un file DDS.</span><span class="sxs-lookup"><span data-stu-id="83b41-209">You can use [**IWICDdsFrameDecode::CopyBlocks**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsframedecode-copyblocks) to obtain the raw block compressed data in the form of a memory buffer from a DDS file.</span></span>

### <a name="multi-frame-dds-access"></a><span data-ttu-id="83b41-210">Accesso DDS a più frame</span><span class="sxs-lookup"><span data-stu-id="83b41-210">Multi-frame DDS access</span></span>

<span data-ttu-id="83b41-211">Il formato di file DDS consente di archiviare più immagini correlate in un unico file.</span><span class="sxs-lookup"><span data-stu-id="83b41-211">The DDS file format allows for multiple related images to be stored in a single file.</span></span> <span data-ttu-id="83b41-212">Un file DDS, ad esempio, può contenere una mappa cubi, una trama del volume o una matrice di trama, che può essere mipmap.</span><span class="sxs-lookup"><span data-stu-id="83b41-212">For example, a DDS file may contain a cubemap, volume texture, or texture array, all of which can be mipmapped.</span></span> <span data-ttu-id="83b41-213">In Direct3D queste più immagini sono esposte come sottorisorse.</span><span class="sxs-lookup"><span data-stu-id="83b41-213">In Direct3D, these multiple images are exposed as subresources.</span></span> <span data-ttu-id="83b41-214">In WIC, più immagini sono esposte come frame ([**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) e [**IWICBitmapFrameEncode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframeencode)).</span><span class="sxs-lookup"><span data-stu-id="83b41-214">In WIC, multiple images are exposed as frames ([**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) and [**IWICBitmapFrameEncode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframeencode)).</span></span>

<span data-ttu-id="83b41-215">WIC supporta solo la nozione di una matrice unidimensionale di frame, mentre DDS supporta tre dimensioni indipendenti (anche se solo due possono essere utilizzate in un file qualsiasi).</span><span class="sxs-lookup"><span data-stu-id="83b41-215">WIC only supports the notion of a single dimensional array of frames, while DDS supports three independent dimensions (although only two may be used in any one file).</span></span> <span data-ttu-id="83b41-216">WIC fornisce metodi pratici per semplificare il mapping tra una sottorisorsa DDS e un frame WIC.</span><span class="sxs-lookup"><span data-stu-id="83b41-216">WIC provides convenience methods to assist with mapping between a DDS subresource and WIC frame.</span></span> <span data-ttu-id="83b41-217">Per la decodifica, [**IWICDdsDecoder:: GetFrame**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsdecoder-getframe) consente di specificare l'indice della matrice, il livello MIP e l'indice della sezione della sottorisorsa e restituisce il frame WIC corretto.</span><span class="sxs-lookup"><span data-stu-id="83b41-217">For decoding, [**IWICDdsDecoder::GetFrame**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsdecoder-getframe) lets you specify the array index, mip level and slice index of the subresource, and returns the correct WIC frame.</span></span>

<span data-ttu-id="83b41-218">Per la codifica, [**IWICDdsEncoder:: CreateNewFrame**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsencoder-createnewframe) calcola l'indice della matrice risultante, il livello MIP e l'indice della sezione quando si crea un nuovo frame.</span><span class="sxs-lookup"><span data-stu-id="83b41-218">For encoding, [**IWICDdsEncoder::CreateNewFrame**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsencoder-createnewframe) computes the resulting array index, mip level and slice index when you create a new frame.</span></span> <span data-ttu-id="83b41-219">È necessario avere prima chiamato [**IWICDdsEncoder:: Separameters**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsencoder-setparameters) per definire i parametri del file specifici di DDS.</span><span class="sxs-lookup"><span data-stu-id="83b41-219">You must have first called [**IWICDdsEncoder::SetParameters**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsencoder-setparameters) to define the DDS-specific file parameters.</span></span>

## <a name="related-topics"></a><span data-ttu-id="83b41-220">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="83b41-220">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="83b41-221">[Procedura: Esportare una trama da usare con app Direct2D o Javascript](/previous-versions/visualstudio/visual-studio-2013/dn392693(v=vs.120))</span><span class="sxs-lookup"><span data-stu-id="83b41-221">[How to: Export a Texture for Use with Direct2D or Javascipt Apps](/previous-versions/visualstudio/visual-studio-2013/dn392693(v=vs.120))</span></span>
</dt> <dt>

[<span data-ttu-id="83b41-222">Informazioni di riferimento per DDS</span><span class="sxs-lookup"><span data-stu-id="83b41-222">Reference for DDS</span></span>](/windows/desktop/direct3ddds/dx-graphics-dds-reference)
</dt> <dt>

[<span data-ttu-id="83b41-223">Compressione dei blocchi</span><span class="sxs-lookup"><span data-stu-id="83b41-223">Block Compression</span></span>](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-resources-block-compression)
</dt> </dl>

 

 