---
title: Confronto dell'accelerazione hardware Direct2D e GDI
description: Direct2D e GDI sono sia API di rendering 2D in modalità immediata che offrono un certo grado di accelerazione hardware.
ms.assetid: 0028a0c3-445d-46b7-b55b-46dff3bce9ae
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f05dce8719f4d07d3160c65b88570391c3eb736
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104337639"
---
# <a name="comparing-direct2d-and-gdi-hardware-acceleration"></a><span data-ttu-id="4dda0-103">Confronto dell'accelerazione hardware Direct2D e GDI</span><span class="sxs-lookup"><span data-stu-id="4dda0-103">Comparing Direct2D and GDI Hardware Acceleration</span></span>

<span data-ttu-id="4dda0-104">[Direct2D](./direct2d-portal.md) e [GDI](/windows/desktop/gdi/windows-gdi) sono sia API di rendering 2D in modalità immediata che offrono un certo grado di accelerazione hardware.</span><span class="sxs-lookup"><span data-stu-id="4dda0-104">[Direct2D](./direct2d-portal.md) and [GDI](/windows/desktop/gdi/windows-gdi) are both immediate mode 2D rendering APIs and both offer some degree of hardware acceleration.</span></span> <span data-ttu-id="4dda0-105">In questo argomento vengono esaminate le differenze tra Direct2D e GDI, incluse le differenze precedenti e presenti nelle funzionalità di accelerazione hardware di entrambe le API.</span><span class="sxs-lookup"><span data-stu-id="4dda0-105">This topic explores the differences between Direct2D and GDI, including past and present differences in the hardware acceleration features of both APIs.</span></span>

<span data-ttu-id="4dda0-106">Questo argomento include le parti seguenti:</span><span class="sxs-lookup"><span data-stu-id="4dda0-106">This topic has the following parts:</span></span>

-   [<span data-ttu-id="4dda0-107">Differenze tra Direct2D e GDI</span><span class="sxs-lookup"><span data-stu-id="4dda0-107">Differences between Direct2D and GDI</span></span>](#differences-between-direct2d-and-gdi)
-   [<span data-ttu-id="4dda0-108">Accelerazione hardware GDI e Direct2D</span><span class="sxs-lookup"><span data-stu-id="4dda0-108">GDI and Direct2D hardware acceleration</span></span>](#gdi-and-direct2d-hardware-acceleration)
    -   [<span data-ttu-id="4dda0-109">Aumento della complessità e della dimensione dei driver di visualizzazione</span><span class="sxs-lookup"><span data-stu-id="4dda0-109">Increasing complexity and size of display drivers</span></span>](#increasing-complexity-and-size-of-display-drivers)
    -   [<span data-ttu-id="4dda0-110">Problemi di sincronizzazione degli spazi di indirizzi del kernel e della sessione</span><span class="sxs-lookup"><span data-stu-id="4dda0-110">Difficulty in synchronizing session and global kernel address spaces</span></span>](#difficulty-in-synchronizing-session-and-global-kernel-address-spaces)
    -   [<span data-ttu-id="4dda0-111">Gestione della finestra composita</span><span class="sxs-lookup"><span data-stu-id="4dda0-111">Composited window management</span></span>](#composited-window-management)
-   [<span data-ttu-id="4dda0-112">Rendering GDI in Windows 7</span><span class="sxs-lookup"><span data-stu-id="4dda0-112">GDI rendering in Windows 7</span></span>](#gdi-rendering-in-windows-7)
-   [<span data-ttu-id="4dda0-113">Contrasto dell'accelerazione Direct2D e GDI in Windows 7</span><span class="sxs-lookup"><span data-stu-id="4dda0-113">Contrasting Direct2D and GDI acceleration in Windows 7</span></span>](#contrasting-direct2d-and-gdi-acceleration-in-windows-7)
    -   [<span data-ttu-id="4dda0-114">Percorso delle risorse</span><span class="sxs-lookup"><span data-stu-id="4dda0-114">Location of resources</span></span>](#location-of-resources)
    -   [<span data-ttu-id="4dda0-115">Metodo di rendering</span><span class="sxs-lookup"><span data-stu-id="4dda0-115">Rendering method</span></span>](#rendering-method)
    -   [<span data-ttu-id="4dda0-116">Scalabilità</span><span class="sxs-lookup"><span data-stu-id="4dda0-116">Scalability</span></span>](#scalability)
    -   [<span data-ttu-id="4dda0-117">Posizione</span><span class="sxs-lookup"><span data-stu-id="4dda0-117">Location</span></span>](#location-of-resources)
    -   [<span data-ttu-id="4dda0-118">Disponibilità dell'accelerazione hardware</span><span class="sxs-lookup"><span data-stu-id="4dda0-118">Availability of Hardware Acceleration</span></span>](#availability-of-hardware-acceleration)
    -   [<span data-ttu-id="4dda0-119">Modello di presentazione</span><span class="sxs-lookup"><span data-stu-id="4dda0-119">Presentation Model</span></span>](#presentation-model)
-   [<span data-ttu-id="4dda0-120">Conclusione</span><span class="sxs-lookup"><span data-stu-id="4dda0-120">Conclusion</span></span>](#conclusion)

## <a name="differences-between-direct2d-and-gdi"></a><span data-ttu-id="4dda0-121">Differenze tra Direct2D e GDI</span><span class="sxs-lookup"><span data-stu-id="4dda0-121">Differences between Direct2D and GDI</span></span>

<span data-ttu-id="4dda0-122">[GDI](/windows/desktop/gdi/windows-gdi) esegue il rendering di geometrie opache e con alias, ad esempio poligoni, ellissi e linee.</span><span class="sxs-lookup"><span data-stu-id="4dda0-122">[GDI](/windows/desktop/gdi/windows-gdi) renders opaque, aliased geometries such as polygons, ellipses and lines.</span></span> <span data-ttu-id="4dda0-123">Esegue il rendering del testo con alias e ClearType e può supportare la fusione della trasparenza tramite l'API AlphaBlend.</span><span class="sxs-lookup"><span data-stu-id="4dda0-123">It renders aliased and ClearType text, and it can support transparency blending through the AlphaBlend API.</span></span> <span data-ttu-id="4dda0-124">Tuttavia, la gestione della trasparenza è incoerente e la maggior parte delle API GDI ignora semplicemente il canale alfa.</span><span class="sxs-lookup"><span data-stu-id="4dda0-124">However, its handling of transparency is inconsistent and most GDI APIs simply ignore the alpha channel.</span></span> <span data-ttu-id="4dda0-125">Poche API GDI garantiscono ciò che il canale alfa conterrà dopo un'operazione.</span><span class="sxs-lookup"><span data-stu-id="4dda0-125">Few GDI APIs guarantee what the alpha channel will contain after an operation.</span></span> <span data-ttu-id="4dda0-126">Ancora più importante, il rendering di GDI non è facilmente mappato alle operazioni 3D e una GPU moderna risulta più efficiente sulla parte 3D del motore di rendering.</span><span class="sxs-lookup"><span data-stu-id="4dda0-126">More importantly, GDI's rendering does not map easily to 3D operations, and a modern GPU renders most efficiently on the 3D portion of its rendering engine.</span></span> <span data-ttu-id="4dda0-127">Ad esempio, le righe con alias di [Direct2D](./direct2d-portal.md)sono progettate per essere implementate semplicemente come due triangoli sottoposti a rendering sulla GPU, mentre GDI USA l'algoritmo di disegno a linee di Bresenham.</span><span class="sxs-lookup"><span data-stu-id="4dda0-127">For example, [Direct2D](./direct2d-portal.md)'s aliased lines are designed to be implemented simply as two triangles rendered on the GPU, whereas GDI uses Bresenham's line drawing algorithm.</span></span>

<span data-ttu-id="4dda0-128">[Direct2D](./direct2d-portal.md) rende le primitive opache, trasparenti, con alias e con alias.</span><span class="sxs-lookup"><span data-stu-id="4dda0-128">[Direct2D](./direct2d-portal.md) renders opaque, transparent, aliased and anti-aliased primitives.</span></span> <span data-ttu-id="4dda0-129">Le interfacce utente moderne spesso usano la trasparenza e l'animazione.</span><span class="sxs-lookup"><span data-stu-id="4dda0-129">Modern UIs often make use of transparency and animation.</span></span> <span data-ttu-id="4dda0-130">Direct2D semplifica la creazione di un'interfaccia utente moderna, poiché presenta una rigida garanzia sulla modalità di accettazione e rendering del contenuto trasparente e viene eseguito il rendering di tutte le primitive usando l'accelerazione hardware.</span><span class="sxs-lookup"><span data-stu-id="4dda0-130">Direct2D makes it easier to create a modern UI because it has strict guarantees on how it accepts and renders transparent content, and all of its primitives are rendered using hardware acceleration.</span></span> <span data-ttu-id="4dda0-131">Direct2D non è un superset puro di [GDI](/windows/desktop/gdi/windows-gdi): primitive che sarebbe stato ragionevolmente lento quando l'implementazione in una GPU non è presente in Direct2D.</span><span class="sxs-lookup"><span data-stu-id="4dda0-131">Direct2D is not a pure superset of [GDI](/windows/desktop/gdi/windows-gdi): primitives that would have been unreasonably slow when implemented on a GPU aren't present in Direct2D.</span></span> <span data-ttu-id="4dda0-132">Poiché Direct2D è stato creato con questa enfasi sull'accelerazione 3D, è anche facile da usare con Direct3D.</span><span class="sxs-lookup"><span data-stu-id="4dda0-132">Because Direct2D is built with this emphasis on 3D acceleration it is also easy to use with Direct3D.</span></span>

<span data-ttu-id="4dda0-133">Poiché Windows NT 4, [GDI](/windows/desktop/gdi/windows-gdi) è stato eseguito in modalità kernel.</span><span class="sxs-lookup"><span data-stu-id="4dda0-133">Since Windows NT 4, [GDI](/windows/desktop/gdi/windows-gdi) has run in kernel mode.</span></span> <span data-ttu-id="4dda0-134">L'applicazione chiama GDI, che quindi chiama la controparte della modalità kernel che passa le primitive al proprio modello di driver.</span><span class="sxs-lookup"><span data-stu-id="4dda0-134">The application calls GDI which then calls its kernel mode counterpart which passes the primitives to its own driver model.</span></span> <span data-ttu-id="4dda0-135">Questo driver invia quindi i risultati al driver di visualizzazione in modalità kernel globale.</span><span class="sxs-lookup"><span data-stu-id="4dda0-135">This driver then sends the results to the global kernel mode display driver.</span></span>

<span data-ttu-id="4dda0-136">A partire da Windows 2000, [GDI](/windows/desktop/gdi/windows-gdi) e i driver GDI sono stati eseguiti in uno spazio indipendente nel kernel denominato "spazio sessione".</span><span class="sxs-lookup"><span data-stu-id="4dda0-136">Starting with Windows 2000, [GDI](/windows/desktop/gdi/windows-gdi) and the GDI drivers have run in an independent space in the kernel called "session space."</span></span> <span data-ttu-id="4dda0-137">Uno spazio di indirizzi della sessione viene creato per ogni sessione di accesso e ogni istanza di GDI viene eseguita in modo indipendente in questo spazio di indirizzi in modalità kernel distinto.</span><span class="sxs-lookup"><span data-stu-id="4dda0-137">A session address space is created for each logon session, and each instance of GDI runs independently in this distinct kernel mode address space.</span></span> <span data-ttu-id="4dda0-138">Direct2D, tuttavia, viene eseguito in modalità utente e passa i comandi di disegno tramite il driver Direct3D in modalità utente al driver in modalità kernel.</span><span class="sxs-lookup"><span data-stu-id="4dda0-138">Direct2D, however, runs in user mode and passes drawing commands through the user mode Direct3D driver to the kernel mode driver.</span></span>

![Figura 1-Direct2D rispetto a GDI](images/direct2d-vs-gdi1.png)

## <a name="gdi-and-direct2d-hardware-acceleration"></a><span data-ttu-id="4dda0-140">Accelerazione hardware GDI e Direct2D</span><span class="sxs-lookup"><span data-stu-id="4dda0-140">GDI and Direct2D hardware acceleration</span></span>

<span data-ttu-id="4dda0-141">La differenza più importante tra l'accelerazione hardware [Direct2D](./direct2d-portal.md) e [GDI](/windows/desktop/gdi/windows-gdi) è la tecnologia sottostante che li gestisce.</span><span class="sxs-lookup"><span data-stu-id="4dda0-141">The most important difference between [Direct2D](./direct2d-portal.md) and [GDI](/windows/desktop/gdi/windows-gdi) hardware acceleration is the underlying technology that drives them.</span></span> <span data-ttu-id="4dda0-142">Direct2D è sovrapposto al primo Direct3D e GDI ha il proprio modello di driver, l'interfaccia DDI (Device Driver Interface) GDI, che corrisponde alle primitive GDI.</span><span class="sxs-lookup"><span data-stu-id="4dda0-142">Direct2D is layered on top Direct3D and GDI has its own driver model, the GDI Device Driver Interface (DDI), which corresponds to the GDI primitives.</span></span> <span data-ttu-id="4dda0-143">Il modello di driver Direct3D corrisponde a ciò che l'hardware di rendering 3D in una GPU esegue il rendering.</span><span class="sxs-lookup"><span data-stu-id="4dda0-143">The Direct3D driver model corresponds to what the 3D rendering hardware in a GPU renders.</span></span> <span data-ttu-id="4dda0-144">Quando l'interfaccia DDI GDI è stata definita per la prima volta, la maggior parte Visualizza l'hardware di accelerazione di destinazione delle primitive GDI</span><span class="sxs-lookup"><span data-stu-id="4dda0-144">When the GDI DDI was first defined, most display acceleration hardware targeted the GDI primitives.</span></span> <span data-ttu-id="4dda0-145">Nel corso del tempo, la maggior enfasi è stata concentrata sull'accelerazione del gioco 3D e meno sull'accelerazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4dda0-145">Over time, more and more emphasis was placed on 3D game acceleration and less on application acceleration.</span></span> <span data-ttu-id="4dda0-146">Di conseguenza, l'API BitBlt è stata accelerata dall'hardware e la maggior parte delle altre operazioni GDI non lo era.</span><span class="sxs-lookup"><span data-stu-id="4dda0-146">As a consequence the BitBlt API was hardware accelerated and most other GDI operations were not.</span></span>

<span data-ttu-id="4dda0-147">Questa operazione consente di impostare la fase per una sequenza di modifiche apportate al rendering di [GDI](/windows/desktop/gdi/windows-gdi) nella visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="4dda0-147">This set the stage for a sequence of changes to how [GDI](/windows/desktop/gdi/windows-gdi) renders to the display.</span></span> <span data-ttu-id="4dda0-148">Nella figura seguente viene illustrato come il rendering della visualizzazione GDI sia stato modificato da Windows XP a Windows 7.</span><span class="sxs-lookup"><span data-stu-id="4dda0-148">The following illustration shows how GDI display rendering has changed from Windows XP to Windows 7.</span></span>

![Figura 2-evoluzione del rendering della visualizzazione GDI](images/direct2d-vs-gdi2.png)

<span data-ttu-id="4dda0-150">Sono stati inoltre introdotti alcuni fattori aggiuntivi che hanno causato modifiche al modello di driver [GDI](/windows/desktop/gdi/windows-gdi) , come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="4dda0-150">There were also a number of additional factors that caused changes to the [GDI](/windows/desktop/gdi/windows-gdi) driver model, as explained below.</span></span>

### <a name="increasing-complexity-and-size-of-display-drivers"></a><span data-ttu-id="4dda0-151">Aumento della complessità e della dimensione dei driver di visualizzazione</span><span class="sxs-lookup"><span data-stu-id="4dda0-151">Increasing complexity and size of display drivers</span></span>

<span data-ttu-id="4dda0-152">i driver 3D sono diventati più complessi nel tempo.</span><span class="sxs-lookup"><span data-stu-id="4dda0-152">3D drivers have become more complex over time.</span></span> <span data-ttu-id="4dda0-153">Il codice più complesso tende a avere più difetti che rendono vantaggioso il driver in modalità utente in cui un bug del driver non può causare un riavvio del sistema.</span><span class="sxs-lookup"><span data-stu-id="4dda0-153">More complex code tends to have more defects making it beneficial for the driver to exist in user-mode where a driver bug can't cause a system reboot.</span></span> <span data-ttu-id="4dda0-154">Come si può notare nella figura precedente, il driver di visualizzazione è diviso in un componente in modalità utente complesso e un componente in modalità kernel più semplice.</span><span class="sxs-lookup"><span data-stu-id="4dda0-154">As can be seen in the figure above, the display driver is divided into a complex user mode component and a simpler kernel mode component.</span></span>

### <a name="difficulty-in-synchronizing-session-and-global-kernel-address-spaces"></a><span data-ttu-id="4dda0-155">Problemi di sincronizzazione degli spazi di indirizzi del kernel e della sessione</span><span class="sxs-lookup"><span data-stu-id="4dda0-155">Difficulty in synchronizing session and global kernel address spaces</span></span>

<span data-ttu-id="4dda0-156">In Windows XP, un driver di visualizzazione è presente in due spazi di indirizzi diversi: spazio della sessione e spazio del kernel.</span><span class="sxs-lookup"><span data-stu-id="4dda0-156">In Windows XP, a display driver exists in two different address spaces: session space and kernel space.</span></span> <span data-ttu-id="4dda0-157">Parti del driver devono rispondere a eventi come gli eventi di risparmio energia.</span><span class="sxs-lookup"><span data-stu-id="4dda0-157">Parts of the driver need to respond to events such as power management events.</span></span> <span data-ttu-id="4dda0-158">Questo deve essere sincronizzato con lo stato del driver nello spazio degli indirizzi della sessione.</span><span class="sxs-lookup"><span data-stu-id="4dda0-158">This needs to be synchronized with the driver state in the session address space.</span></span> <span data-ttu-id="4dda0-159">Si tratta di un'attività difficile che può causare errori quando i driver visualizzati tentano di gestire questi spazi di indirizzi distinti.</span><span class="sxs-lookup"><span data-stu-id="4dda0-159">This is a difficult task and can lead to defects when display drivers attempt to deal with these distinct address spaces.</span></span>

### <a name="composited-window-management"></a><span data-ttu-id="4dda0-160">Gestione della finestra composita</span><span class="sxs-lookup"><span data-stu-id="4dda0-160">Composited window management</span></span>

<span data-ttu-id="4dda0-161">Il Gestione finestre desktop (DWM), la funzionalità di gestione delle finestre di composizione introdotta in Windows 7, esegue il rendering di tutte le finestre in superficie fuori schermo e quindi le compone insieme per essere visualizzate sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="4dda0-161">The Desktop Window Manager (DWM), the compositing window manager introduced in Windows 7, renders all windows to off-screen surfaces and then composes them together to be displayed on screen.</span></span> <span data-ttu-id="4dda0-162">A tale scopo è necessario che [GDI](/windows/desktop/gdi/windows-gdi) sia in grado di eseguire il rendering in una superficie che verrà quindi sottoposta a rendering da Direct3D per la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="4dda0-162">This requires [GDI](/windows/desktop/gdi/windows-gdi) to be able to render to a surface which will then be rendered by Direct3D to display.</span></span> <span data-ttu-id="4dda0-163">Si è verificato un problema nel modello di driver XP, perché GDI e Direct3D erano stack di driver paralleli.</span><span class="sxs-lookup"><span data-stu-id="4dda0-163">This posed a problem in the XP driver model, since GDI and Direct3D were parallel driver stacks.</span></span>

<span data-ttu-id="4dda0-164">Di conseguenza, in Windows Vista, il driver per la visualizzazione del dispositivo [GDI](/windows/desktop/gdi/windows-gdi) DDI è stato implementato come il driver di visualizzazione canonica fornito da Microsoft che ha eseguito il rendering del contenuto GDI in una bitmap di memoria di sistema da comporre sullo schermo.</span><span class="sxs-lookup"><span data-stu-id="4dda0-164">As a result, in Windows Vista, the [GDI](/windows/desktop/gdi/windows-gdi) DDI display driver was implemented as the Microsoft supplied Canonical Display Driver (CDD) which rendered GDI content to a system memory bitmap to be composed to the screen.</span></span>

## <a name="gdi-rendering-in-windows-7"></a><span data-ttu-id="4dda0-165">Rendering GDI in Windows 7</span><span class="sxs-lookup"><span data-stu-id="4dda0-165">GDI rendering in Windows 7</span></span>

<span data-ttu-id="4dda0-166">Il modello di driver utilizzato in Windows Vista richiede che ogni finestra [GDI](/windows/desktop/gdi/windows-gdi) sia supportata da una superficie di memoria video e da una superficie di memoria di sistema.</span><span class="sxs-lookup"><span data-stu-id="4dda0-166">The driver model used in Windows Vista required that every [GDI](/windows/desktop/gdi/windows-gdi) window be backed by both a video memory surface and a system memory surface.</span></span> <span data-ttu-id="4dda0-167">Ciò ha comportato la memoria di sistema utilizzata per ogni finestra GDI.</span><span class="sxs-lookup"><span data-stu-id="4dda0-167">This resulted in system memory being used for every GDI window.</span></span>

<span data-ttu-id="4dda0-168">Per questo motivo, [GDI](/windows/desktop/gdi/windows-gdi) è stato nuovamente modificato in Windows 7.</span><span class="sxs-lookup"><span data-stu-id="4dda0-168">For this reason, [GDI](/windows/desktop/gdi/windows-gdi) was changed again in Windows 7.</span></span> <span data-ttu-id="4dda0-169">.</span><span class="sxs-lookup"><span data-stu-id="4dda0-169">.</span></span> <span data-ttu-id="4dda0-170">Anziché eseguire il rendering in una superficie di memoria di sistema, GDI è stato modificato per eseguire il rendering in un segmento di memoria di apertura.</span><span class="sxs-lookup"><span data-stu-id="4dda0-170">Instead of rendering to a system memory surface, GDI was modified to render to an aperture memory segment.</span></span> <span data-ttu-id="4dda0-171">La memoria di apertura può essere aggiornata dall'area di memoria video che contiene il contenuto della finestra.</span><span class="sxs-lookup"><span data-stu-id="4dda0-171">The aperture memory can be updated from the video memory surface holding the window contents.</span></span> <span data-ttu-id="4dda0-172">GDI è in grado di eseguire il rendering alla memoria di apertura e il risultato può quindi essere restituito all'area della finestra.</span><span class="sxs-lookup"><span data-stu-id="4dda0-172">GDI can render back to the aperture memory, and the result can then be sent back to the window surface.</span></span> <span data-ttu-id="4dda0-173">Poiché il segmento di memoria di apertura è indirizzabile dalla GPU, la GPU può accelerare questi aggiornamenti alla superficie di memoria del video.</span><span class="sxs-lookup"><span data-stu-id="4dda0-173">Since the aperture memory segment is addressable by the GPU, the GPU can accelerate these updates to the video memory surface.</span></span> <span data-ttu-id="4dda0-174">In questi casi, ad esempio, il rendering del testo, BitBlts, AlphaBlend, TransparentBlt e StretchBlt sono accelerati.</span><span class="sxs-lookup"><span data-stu-id="4dda0-174">For example, text rendering, BitBlts, AlphaBlend, TransparentBlt, and StretchBlt are all accelerated in these cases.</span></span>

## <a name="contrasting-direct2d-and-gdi-acceleration-in-windows-7"></a><span data-ttu-id="4dda0-175">Contrasto dell'accelerazione Direct2D e GDI in Windows 7</span><span class="sxs-lookup"><span data-stu-id="4dda0-175">Contrasting Direct2D and GDI acceleration in Windows 7</span></span>

<span data-ttu-id="4dda0-176">[Direct2D](./direct2d-portal.md) e [GDI](/windows/desktop/gdi/windows-gdi) sono entrambe API per il rendering in modalità immediata 2D e sono con accelerazione hardware.</span><span class="sxs-lookup"><span data-stu-id="4dda0-176">[Direct2D](./direct2d-portal.md) and [GDI](/windows/desktop/gdi/windows-gdi) are both 2D immediate-mode rendering APIs and are hardware accelerated.</span></span> <span data-ttu-id="4dda0-177">Tuttavia, esistono alcune differenze che rimangono in entrambe le API.</span><span class="sxs-lookup"><span data-stu-id="4dda0-177">However, there are a number of differences that remain in both APIs.</span></span>

### <a name="location-of-resources"></a><span data-ttu-id="4dda0-178">Percorso delle risorse</span><span class="sxs-lookup"><span data-stu-id="4dda0-178">Location of resources</span></span>

<span data-ttu-id="4dda0-179">Per impostazione predefinita, [GDI](/windows/desktop/gdi/windows-gdi) mantiene le risorse, in particolare bitmap, nella memoria di sistema.</span><span class="sxs-lookup"><span data-stu-id="4dda0-179">[GDI](/windows/desktop/gdi/windows-gdi) maintains its resources, in particular bitmaps, in system memory by default.</span></span> <span data-ttu-id="4dda0-180">[Direct2D](./direct2d-portal.md) mantiene le risorse nella memoria video sulla scheda schermo.</span><span class="sxs-lookup"><span data-stu-id="4dda0-180">[Direct2D](./direct2d-portal.md) maintains its resources in video memory on the display adapter.</span></span> <span data-ttu-id="4dda0-181">Quando GDI deve aggiornare la memoria video, questa operazione deve essere eseguita sul bus, a meno che la risorsa non sia già nel segmento di memoria di apertura o se l'operazione può essere espressa direttamente.</span><span class="sxs-lookup"><span data-stu-id="4dda0-181">When GDI needs to update video memory, this must be done over the bus, unless the resource is already in the aperture memory segment or if the operation can be expressed directly.</span></span> <span data-ttu-id="4dda0-182">Al contrario, Direct2D può semplicemente tradurre le primitive nelle primitive Direct3D perché le risorse si trovano già nella memoria video.</span><span class="sxs-lookup"><span data-stu-id="4dda0-182">In contrast, Direct2D can simply translate its primitives to Direct3D primitives because the resources are already in video memory.</span></span>

### <a name="rendering-method"></a><span data-ttu-id="4dda0-183">Metodo di rendering</span><span class="sxs-lookup"><span data-stu-id="4dda0-183">Rendering method</span></span>

<span data-ttu-id="4dda0-184">Per mantenere la compatibilità, [GDI](/windows/desktop/gdi/windows-gdi) esegue una parte notevole del rendering della memoria di apertura mediante la CPU.</span><span class="sxs-lookup"><span data-stu-id="4dda0-184">In order to maintain compatibility, [GDI](/windows/desktop/gdi/windows-gdi) performs a large part of its rendering to aperture memory using the CPU.</span></span> <span data-ttu-id="4dda0-185">Al contrario, [Direct2D](./direct2d-portal.md) converte le chiamate API nelle primitive Direct3D e nelle operazioni di disegno.</span><span class="sxs-lookup"><span data-stu-id="4dda0-185">In contrast, [Direct2D](./direct2d-portal.md) translates its APIs calls into Direct3D primitives and drawing operations.</span></span> <span data-ttu-id="4dda0-186">Il risultato viene quindi sottoposto a rendering nella GPU.</span><span class="sxs-lookup"><span data-stu-id="4dda0-186">The result is then rendered on the GPU.</span></span> <span data-ttu-id="4dda0-187">Il rendering di GDI? s viene eseguito sulla GPU quando la memoria di apertura viene copiata nella superficie di memoria del video che rappresenta la finestra GDI.</span><span class="sxs-lookup"><span data-stu-id="4dda0-187">Some of GDI?s rendering is performed on the GPU when the aperture memory is copied to the video memory surface representing the GDI window.</span></span>

### <a name="scalability"></a><span data-ttu-id="4dda0-188">Scalabilità</span><span class="sxs-lookup"><span data-stu-id="4dda0-188">Scalability</span></span>

<span data-ttu-id="4dda0-189">Le chiamate di rendering di [Direct2D](./direct2d-portal.md)sono tutti flussi di comandi indipendenti alla GPU.</span><span class="sxs-lookup"><span data-stu-id="4dda0-189">[Direct2D](./direct2d-portal.md)'s rendering calls are all independent command streams to the GPU.</span></span> <span data-ttu-id="4dda0-190">Ogni factory Direct2D rappresenta un dispositivo Direct3D diverso.</span><span class="sxs-lookup"><span data-stu-id="4dda0-190">Each Direct2D factory represents a different Direct3D device.</span></span> <span data-ttu-id="4dda0-191">[GDI](/windows/desktop/gdi/windows-gdi) utilizza un flusso di comandi per tutte le applicazioni nel sistema.</span><span class="sxs-lookup"><span data-stu-id="4dda0-191">[GDI](/windows/desktop/gdi/windows-gdi) uses one command stream for all of the applications on the system.</span></span> <span data-ttu-id="4dda0-192">Il metodo GDI può comportare un sovraccarico del contesto di rendering della GPU e della CPU.</span><span class="sxs-lookup"><span data-stu-id="4dda0-192">GDI's method can result in a buildup of GPU and CPU rendering context overhead.</span></span>

### <a name="location"></a><span data-ttu-id="4dda0-193">Location</span><span class="sxs-lookup"><span data-stu-id="4dda0-193">Location</span></span>

<span data-ttu-id="4dda0-194">[Direct2D](./direct2d-portal.md) funziona interamente in modalità utente, inclusi il runtime Direct3D e il driver Direct3D in modalità utente.</span><span class="sxs-lookup"><span data-stu-id="4dda0-194">[Direct2D](./direct2d-portal.md) operates entirely in user mode, including the Direct3D run time and the user mode Direct3D driver.</span></span> <span data-ttu-id="4dda0-195">Ciò consente di evitare arresti anomali del sistema causati da difetti del codice nel kernel.</span><span class="sxs-lookup"><span data-stu-id="4dda0-195">This helps prevent system crashes caused by code defects in the kernel.</span></span> <span data-ttu-id="4dda0-196">[GDI](/windows/desktop/gdi/windows-gdi), tuttavia, ha la maggior parte delle funzionalità nello spazio di sessione in modalità kernel, con la relativa superficie API in modalità utente.</span><span class="sxs-lookup"><span data-stu-id="4dda0-196">[GDI](/windows/desktop/gdi/windows-gdi), however, has most of its functionality in session space in kernel mode, with its API surface in user mode.</span></span>

### <a name="availability-of-hardware-acceleration"></a><span data-ttu-id="4dda0-197">Disponibilità dell'accelerazione hardware</span><span class="sxs-lookup"><span data-stu-id="4dda0-197">Availability of Hardware Acceleration</span></span>

<span data-ttu-id="4dda0-198">[GDI](/windows/desktop/gdi/windows-gdi) viene accelerato in Windows XP e accelerato in Windows 7 quando il Gestione finestre desktop è in esecuzione e un driver WDDM 1,1 è in uso.</span><span class="sxs-lookup"><span data-stu-id="4dda0-198">[GDI](/windows/desktop/gdi/windows-gdi) is hardware accelerated on Windows XP, and accelerated on Windows 7 when the Desktop Window Manager is running and a WDDM 1.1 driver is in use.</span></span> <span data-ttu-id="4dda0-199">[Direct2D](./direct2d-portal.md) viene accelerato in quasi tutti i driver WDDM e se DWM è in uso o meno.</span><span class="sxs-lookup"><span data-stu-id="4dda0-199">[Direct2D](./direct2d-portal.md) is hardware accelerated on almost any WDDM driver and whether or not DWM is in use.</span></span> <span data-ttu-id="4dda0-200">In vista, GDI eseguirà sempre il rendering sulla CPU.</span><span class="sxs-lookup"><span data-stu-id="4dda0-200">On Vista, GDI will always render on the CPU.</span></span>

### <a name="presentation-model"></a><span data-ttu-id="4dda0-201">Modello di presentazione</span><span class="sxs-lookup"><span data-stu-id="4dda0-201">Presentation Model</span></span>

<span data-ttu-id="4dda0-202">Quando Windows è stato progettato per la prima volta, non era disponibile memoria sufficiente per consentire l'archiviazione di ogni finestra nella relativa bitmap.</span><span class="sxs-lookup"><span data-stu-id="4dda0-202">When Windows was first designed, there was insufficient memory to allow every window to be stored in its own bitmap.</span></span> <span data-ttu-id="4dda0-203">Di conseguenza, [GDI](/windows/desktop/gdi/windows-gdi) viene sempre sottoposto a rendering logico direttamente sullo schermo, con diverse aree di ritaglio applicate per garantire che un'applicazione non venga sottoposta a rendering al di fuori della finestra.</span><span class="sxs-lookup"><span data-stu-id="4dda0-203">As a result, [GDI](/windows/desktop/gdi/windows-gdi) always rendered logically directly to the screen, with various clipping regions applied to ensure that an application did not render outside of its window.</span></span> <span data-ttu-id="4dda0-204">Nel modello [Direct2D](./direct2d-portal.md) un'applicazione esegue il rendering in un buffer nascosto e il risultato viene visualizzato al termine del disegno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4dda0-204">In the [Direct2D](./direct2d-portal.md) model, an application renders to a back-buffer, and the result is displayed when the application is done drawing.</span></span> <span data-ttu-id="4dda0-205">In questo modo Direct2D può gestire scenari di animazione molto più fluidi rispetto a GDI.</span><span class="sxs-lookup"><span data-stu-id="4dda0-205">This allows Direct2D to handle animation scenarios much more fluidly than GDI can.</span></span>

## <a name="conclusion"></a><span data-ttu-id="4dda0-206">Conclusione</span><span class="sxs-lookup"><span data-stu-id="4dda0-206">Conclusion</span></span>

<span data-ttu-id="4dda0-207">Il codice [GDI](/windows/desktop/gdi/windows-gdi) esistente continuerà a funzionare correttamente in Windows 7.</span><span class="sxs-lookup"><span data-stu-id="4dda0-207">Existing [GDI](/windows/desktop/gdi/windows-gdi) code will continue to work well under Windows 7.</span></span> <span data-ttu-id="4dda0-208">Tuttavia, quando si scrive un nuovo codice di rendering della grafica, è necessario considerare [Direct2D](./direct2d-portal.md) , perché sfrutta al meglio le GPU moderne.</span><span class="sxs-lookup"><span data-stu-id="4dda0-208">However, when writing new graphics rendering code, [Direct2D](./direct2d-portal.md) should be considered, as it takes better advantage of modern GPUs.</span></span>

 

 