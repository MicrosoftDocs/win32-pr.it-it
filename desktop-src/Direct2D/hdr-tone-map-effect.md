---
title: Effetto mappa colori HDR
description: Questo effetto regola l'intervallo dinamico di un'immagine per adattarlo meglio al contenuto alla funzionalità della visualizzazione dell'output.
ms.topic: article
ms.date: 02/01/2019
ms.openlocfilehash: 4c9234e1b50e155173630a2ff7d94756c5be6130
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/12/2020
ms.locfileid: "103873989"
---
# <a name="hdr-tone-map-effect"></a><span data-ttu-id="bac53-103">Effetto mappa colori HDR</span><span class="sxs-lookup"><span data-stu-id="bac53-103">HDR tone map effect</span></span>

<span data-ttu-id="bac53-104">Questo effetto regola l'intervallo dinamico di un'immagine per adattarlo meglio al contenuto alla funzionalità della visualizzazione dell'output.</span><span class="sxs-lookup"><span data-stu-id="bac53-104">This effect adjusts the dynamic range of an image to better suit its content to the capability of the output display.</span></span>

<span data-ttu-id="bac53-105">Le proprietà di questo effetto sono identificate dall' [**enumerazione D2D1_HDRTONEMAP_PROP**](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_hdrtonemap_prop)e il CLSID è **CLSID_D2D1HdrToneMap**.</span><span class="sxs-lookup"><span data-stu-id="bac53-105">The properties for this effect are identified by the [**D2D1_HDRTONEMAP_PROP enumeration**](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_hdrtonemap_prop), and the CLSID is **CLSID_D2D1HdrToneMap**.</span></span>

## <a name="effect-properties"></a><span data-ttu-id="bac53-106">Proprietà effetto</span><span class="sxs-lookup"><span data-stu-id="bac53-106">Effect properties</span></span>

| <span data-ttu-id="bac53-107">Nome visualizzato e enumerazione dell'indice</span><span class="sxs-lookup"><span data-stu-id="bac53-107">Display name and index enumeration</span></span> | <span data-ttu-id="bac53-108">Tipo e valore predefinito</span><span class="sxs-lookup"><span data-stu-id="bac53-108">Type and default value</span></span> | <span data-ttu-id="bac53-109">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bac53-109">Description</span></span> |
|-|-|-|
| <span data-ttu-id="bac53-110">InputMaxLuminance, D2D1_HDRTONEMAP_PROP_INPUT_MAX_LUMINANCE</span><span class="sxs-lookup"><span data-stu-id="bac53-110">InputMaxLuminance, D2D1_HDRTONEMAP_PROP_INPUT_MAX_LUMINANCE</span></span> | <span data-ttu-id="bac53-111">FLOAT</span><span class="sxs-lookup"><span data-stu-id="bac53-111">FLOAT</span></span> | <span data-ttu-id="bac53-112">Livello di luce massimo (o MaxCLL) dell'immagine, in nit.</span><span class="sxs-lookup"><span data-stu-id="bac53-112">The maximum light level (or MaxCLL) of the image, in nits.</span></span> |
| <span data-ttu-id="bac53-113">OutputMaxLuminance, D2D1_HDRTONEMAP_PROP_OUTPUT_MAX_LUMINANCE</span><span class="sxs-lookup"><span data-stu-id="bac53-113">OutputMaxLuminance, D2D1_HDRTONEMAP_PROP_OUTPUT_MAX_LUMINANCE</span></span> | <span data-ttu-id="bac53-114">FLOAT</span><span class="sxs-lookup"><span data-stu-id="bac53-114">FLOAT</span></span> | <span data-ttu-id="bac53-115">MaxCLL supportato dalla destinazione di output, in nit in &mdash; genere impostati sulla MaxCLL dello schermo.</span><span class="sxs-lookup"><span data-stu-id="bac53-115">The MaxCLL supported by the output target, in nits&mdash;typically set to the MaxCLL of the display.</span></span> |
| <span data-ttu-id="bac53-116">DisplayMode, D2D1_HDRTONEMAP_PROP_DISPLAY_MODE</span><span class="sxs-lookup"><span data-stu-id="bac53-116">DisplayMode, D2D1_HDRTONEMAP_PROP_DISPLAY_MODE</span></span> | [<span data-ttu-id="bac53-117">**D2D1_HDRTONEMAP_DISPLAY_MODE**</span><span class="sxs-lookup"><span data-stu-id="bac53-117">**D2D1_HDRTONEMAP_DISPLAY_MODE**</span></span>](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_hdrtonemap_display_mode) | <span data-ttu-id="bac53-118">Quando è impostato su **_HDR**, la curva di mapping dei toni viene regolata in modo da adattarsi meglio al comportamento delle visualizzazioni HDR comuni.</span><span class="sxs-lookup"><span data-stu-id="bac53-118">When set to **_HDR**, the tone mapping curve is adjusted to better fit the fit the behavior of common HDR displays.</span></span> |

## <a name="remarks"></a><span data-ttu-id="bac53-119">Commenti</span><span class="sxs-lookup"><span data-stu-id="bac53-119">Remarks</span></span>
<span data-ttu-id="bac53-120">Il valore di `InputMaxLuminance` viene in genere derivato dai metadati dell'immagine.</span><span class="sxs-lookup"><span data-stu-id="bac53-120">The value for `InputMaxLuminance` is typically derived from the image metadata.</span></span> <span data-ttu-id="bac53-121">Per i casi in cui i metadati non sono presenti, è possibile usare la funzione **D2DAdvancedColorImagesRenderer:: ComputeHdrMetadata** (nell' [esempio di rendering dell'immagine a colori avanzata Direct2D](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/D2DAdvancedColorImages)) per calcolare il livello di luce massimo (MaxCLL) di un'immagine, in nit.</span><span class="sxs-lookup"><span data-stu-id="bac53-121">For cases where the metadata is not present, you can use the **D2DAdvancedColorImagesRenderer::ComputeHdrMetadata** function (in the [Direct2D advanced color image rendering sample](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/D2DAdvancedColorImages)) to compute the maximum light level (MaxCLL) of an image, in nits.</span></span>

<span data-ttu-id="bac53-122">Il valore per `OutputMaxLuminance` è progettato per essere derivato dalla visualizzazione, usando [**DXGI_OUTPUT_DESC1:: MaxLuminance**](/windows/desktop/api/dxgi1_6/ns-dxgi1_6-dxgi_output_desc1).</span><span class="sxs-lookup"><span data-stu-id="bac53-122">The value for `OutputMaxLuminance` is designed to be derived from the display, using [**DXGI_OUTPUT_DESC1::MaxLuminance**](/windows/desktop/api/dxgi1_6/ns-dxgi1_6-dxgi_output_desc1).</span></span>

<span data-ttu-id="bac53-123">L'effetto Mappa tono HDR presenta curve mappa tono diverse a seconda che la visualizzazione sia una visualizzazione HDR o una visualizzazione SDR/WCG.</span><span class="sxs-lookup"><span data-stu-id="bac53-123">The HDR tone map effect has different tone map curves depending on whether the display is an HDR display or an SDR/WCG display.</span></span>

<span data-ttu-id="bac53-124">Questo effetto è concepito per essere combinato con l' [effetto di regolazione del livello bianco](white-level-adjustment-effect.md) , in modo da consentire il rendering delle immagini HDR in Direct2D con la gestione dei colori e il mapping dei toni appropriati.</span><span class="sxs-lookup"><span data-stu-id="bac53-124">This effect is intended to be combined with the [White level adjustment effect](white-level-adjustment-effect.md) to allow you to render HDR images in Direct2D with proper color management and tone mapping.</span></span> <span data-ttu-id="bac53-125">È destinato a qualsiasi Framework che desideri fornire un'esperienza di visualizzazione delle immagini HDR ottimale che gestisce tutti i formati di immagine HDR di Windows e si adatta alle funzionalità dello schermo, sia HDR che WCG/SDR.</span><span class="sxs-lookup"><span data-stu-id="bac53-125">It's aimed at any framework that wants to provide a best-in-class HDR image viewing experience that handles all of the Windows HDR image formats, and adapts to the capabilities of the display (whether that's HDR or WCG/SDR).</span></span> <span data-ttu-id="bac53-126">Gli effetti sono progettati per essere concatenati in sequenza, come descritto di seguito.</span><span class="sxs-lookup"><span data-stu-id="bac53-126">The effects are intended to be chained together in sequence, as described below.</span></span>

- <span data-ttu-id="bac53-127">Estrarre l'immagine di input con lo spazio colore definito dal codec.</span><span class="sxs-lookup"><span data-stu-id="bac53-127">Take the input image, whose color space defined by its codec.</span></span> <span data-ttu-id="bac53-128">I metadati possono specificare whitePoint.</span><span class="sxs-lookup"><span data-stu-id="bac53-128">Metadata may specify whitePoint.</span></span> <span data-ttu-id="bac53-129">I metadati possono specificare il livello di luminanza di input.</span><span class="sxs-lookup"><span data-stu-id="bac53-129">Metadata may specify input luminance level.</span></span>
- <span data-ttu-id="bac53-130">Applicare l'effetto di gestione colori.</span><span class="sxs-lookup"><span data-stu-id="bac53-130">Apply the color management effect.</span></span> <span data-ttu-id="bac53-131">Convertire nello spazio scRGB (CCCS).</span><span class="sxs-lookup"><span data-stu-id="bac53-131">Convert to scRGB (CCCS) space.</span></span>
- <span data-ttu-id="bac53-132">Applicare l'effetto Mappa a colori HDR.</span><span class="sxs-lookup"><span data-stu-id="bac53-132">Apply the HDR tone map effect.</span></span> <span data-ttu-id="bac53-133">Abbassare il livello di luce dell'immagine al livello desiderato.</span><span class="sxs-lookup"><span data-stu-id="bac53-133">Lower the light level of the image to the desired level.</span></span>
- <span data-ttu-id="bac53-134">Applicare l'effetto di regolazione del livello bianco.</span><span class="sxs-lookup"><span data-stu-id="bac53-134">Apply the white level adjustment effect.</span></span> <span data-ttu-id="bac53-135">Ridimensionare il livello bianco dell'immagine al livello bianco richiesto dalla catena di scambio.</span><span class="sxs-lookup"><span data-stu-id="bac53-135">Scale the white level of the image to the white level required by the swap chain.</span></span>
- <span data-ttu-id="bac53-136">Applicare nuovamente l'effetto di gestione colori.</span><span class="sxs-lookup"><span data-stu-id="bac53-136">Apply the color management effect again.</span></span> <span data-ttu-id="bac53-137">Se viene eseguito il rendering in 8bpc, convertirlo in sRGB.</span><span class="sxs-lookup"><span data-stu-id="bac53-137">If rendering to 8bpc, then convert to sRGB.</span></span>

## <a name="requirements"></a><span data-ttu-id="bac53-138">Requisiti</span><span class="sxs-lookup"><span data-stu-id="bac53-138">Requirements</span></span>

| <span data-ttu-id="bac53-139">Requisito</span><span class="sxs-lookup"><span data-stu-id="bac53-139">Requirement</span></span> | <span data-ttu-id="bac53-140">Valore</span><span class="sxs-lookup"><span data-stu-id="bac53-140">Value</span></span> |
|-|-|
| <span data-ttu-id="bac53-141">Client minimo supportato</span><span class="sxs-lookup"><span data-stu-id="bac53-141">Minimum supported client</span></span> | <span data-ttu-id="bac53-142">Windows 10, versione 1809 (10,0; Build 17763) app \[ Desktop \| UWP app\]</span><span class="sxs-lookup"><span data-stu-id="bac53-142">Windows 10, version 1809 (10.0; Build 17763) \[desktop apps \| UWP apps\]</span></span> |
| <span data-ttu-id="bac53-143">Intestazione</span><span class="sxs-lookup"><span data-stu-id="bac53-143">Header</span></span> | <span data-ttu-id="bac53-144">d2d1effects \_ 2. h</span><span class="sxs-lookup"><span data-stu-id="bac53-144">d2d1effects\_2.h</span></span> |
| <span data-ttu-id="bac53-145">Libreria</span><span class="sxs-lookup"><span data-stu-id="bac53-145">Library</span></span> | <span data-ttu-id="bac53-146">d2d1. lib, dxguid. lib</span><span class="sxs-lookup"><span data-stu-id="bac53-146">d2d1.lib, dxguid.lib</span></span> |

## <a name="related-topics"></a><span data-ttu-id="bac53-147">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="bac53-147">Related topics</span></span>

* [<span data-ttu-id="bac53-148">Interfaccia ID2D1Effect</span><span class="sxs-lookup"><span data-stu-id="bac53-148">ID2D1Effect interface</span></span>](/windows/desktop/api/d2d1_1/nn-d2d1_1-id2d1effect)
* [<span data-ttu-id="bac53-149">Enumerazione D2D1_HDRTONEMAP_PROP</span><span class="sxs-lookup"><span data-stu-id="bac53-149">D2D1_HDRTONEMAP_PROP enumeration</span></span>](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_hdrtonemap_prop)
