---
title: Panoramica delle realizzazioni di geometria
description: Questo argomento descrive come usare le realizzazioni di geometria Direct2D per migliorare le prestazioni di rendering della geometria dell'app in determinati scenari.
ms.assetid: E8C4C4E5-3102-4F53-847E-A4C2D12A6921
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5b903e047ee58a803a7584aaca407281fc803e30
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "106299874"
---
# <a name="geometry-realizations-overview"></a><span data-ttu-id="7fab7-103">Panoramica delle realizzazioni di geometria</span><span class="sxs-lookup"><span data-stu-id="7fab7-103">Geometry Realizations Overview</span></span>

<span data-ttu-id="7fab7-104">Questo argomento descrive come usare le realizzazioni di geometria [Direct2D](direct2d-portal.md) per migliorare le prestazioni di rendering della geometria dell'app in determinati scenari.</span><span class="sxs-lookup"><span data-stu-id="7fab7-104">This topic describes how to use [Direct2D](direct2d-portal.md) geometry realizations to improve your app’s geometry rendering performance in certain scenarios.</span></span>

<span data-ttu-id="7fab7-105">Contiene le sezioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="7fab7-105">It contains the following sections:</span></span>

-   [<span data-ttu-id="7fab7-106">Che cosa sono le realizzazioni di geometria?</span><span class="sxs-lookup"><span data-stu-id="7fab7-106">What are geometry realizations?</span></span>](#what-are-geometry-realizations)
-   [<span data-ttu-id="7fab7-107">Perché usare le realizzazioni di geometria?</span><span class="sxs-lookup"><span data-stu-id="7fab7-107">Why use geometry realizations?</span></span>](#why-use-geometry-realizations)
-   [<span data-ttu-id="7fab7-108">Quando usare le realizzazioni di geometria</span><span class="sxs-lookup"><span data-stu-id="7fab7-108">When to use geometry realizations</span></span>](#when-to-use-geometry-realizations)
-   [<span data-ttu-id="7fab7-109">Creazione di realizzazioni di geometria</span><span class="sxs-lookup"><span data-stu-id="7fab7-109">Creating geometry realizations</span></span>](#creating-geometry-realizations)
-   [<span data-ttu-id="7fab7-110">Creazione di realizzazioni di geometria</span><span class="sxs-lookup"><span data-stu-id="7fab7-110">Drawing geometry realizations</span></span>](#drawing-geometry-realizations)
-   [<span data-ttu-id="7fab7-111">Ridimensionamento delle realizzazioni di geometria</span><span class="sxs-lookup"><span data-stu-id="7fab7-111">Scaling geometry realizations</span></span>](#scaling-geometry-realizations)
    -   [<span data-ttu-id="7fab7-112">Uso delle realizzazioni di geometria nelle app che non si adattano</span><span class="sxs-lookup"><span data-stu-id="7fab7-112">Using geometry realizations in apps that do not scale</span></span>](#using-geometry-realizations-in-apps-that-do-not-scale)
    -   [<span data-ttu-id="7fab7-113">Uso delle realizzazioni di geometria nelle app che vengono ridimensionate in base a una piccola quantità</span><span class="sxs-lookup"><span data-stu-id="7fab7-113">Using geometry realizations in apps that scale by a small amount</span></span>](#using-geometry-realizations-in-apps-that-scale-by-a-small-amount)
    -   [<span data-ttu-id="7fab7-114">Uso delle realizzazioni di geometria nelle app che si adattano a una grande quantità</span><span class="sxs-lookup"><span data-stu-id="7fab7-114">Using geometry realizations in apps that scale by a large amount</span></span>](#using-geometry-realizations-in-apps-that-scale-by-a-large-amount)
-   [<span data-ttu-id="7fab7-115">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="7fab7-115">Related topics</span></span>](#related-topics)

## <a name="what-are-geometry-realizations"></a><span data-ttu-id="7fab7-116">Che cosa sono le realizzazioni di geometria?</span><span class="sxs-lookup"><span data-stu-id="7fab7-116">What are geometry realizations?</span></span>

<span data-ttu-id="7fab7-117">Le realizzazioni di geometria, introdotte in Windows 8.1, sono un nuovo tipo di creazione primitiva che consente alle app [Direct2D](direct2d-portal.md) di migliorare in modo semplice le prestazioni di rendering della geometria in alcuni casi.</span><span class="sxs-lookup"><span data-stu-id="7fab7-117">Geometry realizations, introduced in Windows 8.1, are a new type of drawing primitive that make it easy for [Direct2D](direct2d-portal.md) apps to improve geometry rendering performance in certain cases.</span></span> <span data-ttu-id="7fab7-118">Le realizzazioni di geometria sono rappresentate dall'interfaccia [**ID2D1GeometryRealization**](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1geometryrealization) .</span><span class="sxs-lookup"><span data-stu-id="7fab7-118">Geometry realizations are represented by the [**ID2D1GeometryRealization**](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1geometryrealization) interface.</span></span>

## <a name="why-use-geometry-realizations"></a><span data-ttu-id="7fab7-119">Perché usare le realizzazioni di geometria?</span><span class="sxs-lookup"><span data-stu-id="7fab7-119">Why use geometry realizations?</span></span>

<span data-ttu-id="7fab7-120">Quando [Direct2D](direct2d-portal.md) esegue il rendering di un oggetto [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) , deve convertire tale geometria in un form che l'hardware grafico riconosce tramite un processo denominato mosaico.</span><span class="sxs-lookup"><span data-stu-id="7fab7-120">When [Direct2D](direct2d-portal.md) renders an [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) object, it must convert that geometry to a form the graphics hardware understands through a process called tessellation.</span></span> <span data-ttu-id="7fab7-121">In genere, Direct2D deve conteggiarla suddividerla la geometria ogni frame viene disegnato, anche se la geometria non cambia.</span><span class="sxs-lookup"><span data-stu-id="7fab7-121">Typically, Direct2D must tessellate geometry every frame it is drawn, even if the geometry does not change.</span></span> <span data-ttu-id="7fab7-122">Se l'app esegue il rendering della stessa geometria di ogni frame, la ripetizione dello schema ripetuto rappresenta un lavoro di calcolo sprecato.</span><span class="sxs-lookup"><span data-stu-id="7fab7-122">If your app renders the same geometry every frame, then the repeated re-tessellation represents wasted computational effort.</span></span> <span data-ttu-id="7fab7-123">È più efficiente dal punto di vista del calcolo memorizzare nella cache lo schema a mosaico, o anche la rasterizzazione completa, della geometria e per richiamare la rappresentazione memorizzata nella cache di ogni fotogramma anziché tessellating ripetutamente.</span><span class="sxs-lookup"><span data-stu-id="7fab7-123">It is more computationally efficient to cache the tessellation, or even the full rasterization, of the geometry, and to draw that cached representation each frame instead of repeatedly re-tessellating.</span></span>

<span data-ttu-id="7fab7-124">Un modo comune per risolvere questo problema consiste nel memorizzare nella cache la rasterizzazione completa della geometria.</span><span class="sxs-lookup"><span data-stu-id="7fab7-124">A common way that developers solve this problem is to cache the full rasterization of the geometry.</span></span> <span data-ttu-id="7fab7-125">In particolare, è normale creare una nuova bitmap, rasterizzare la geometria sulla bitmap e quindi creare la bitmap nella scena in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="7fab7-125">In particular, it is common to create a new bitmap, rasterize the geometry to that bitmap, and then draw that bitmap to the scene as needed.</span></span> <span data-ttu-id="7fab7-126">Questo approccio è descritto nella sezione [rendering Geometry](improving-direct2d-performance.md) di miglioramento delle prestazioni delle app Direct2D. Sebbene questo approccio sia molto efficiente dal punto di vista del calcolo, presenta alcuni svantaggi:</span><span class="sxs-lookup"><span data-stu-id="7fab7-126">(This approach is described in the [Geometry rendering](improving-direct2d-performance.md) section of Improving the performance of Direct2D apps.) While this approach is very computationally efficient, it has some drawbacks:</span></span>

-   <span data-ttu-id="7fab7-127">La bitmap memorizzata nella cache è sensibile alle modifiche nella trasformazione applicata alla scena.</span><span class="sxs-lookup"><span data-stu-id="7fab7-127">The cached bitmap is sensitive to changes in the transform applied to the scene.</span></span> <span data-ttu-id="7fab7-128">Ad esempio, il ridimensionamento della rasterizzazione può comportare un notevole ridimensionamento degli artefatti.</span><span class="sxs-lookup"><span data-stu-id="7fab7-128">For example, scaling the rasterization can result in a noticeable scaling artifacts.</span></span> <span data-ttu-id="7fab7-129">La mitigazione di questi elementi con algoritmi di scalabilità di alta qualità può risultare costosa dal punto di vista del calcolo.</span><span class="sxs-lookup"><span data-stu-id="7fab7-129">Mitigating these artifacts with high-quality scaling algorithms can be computationally expensive.</span></span>
-   <span data-ttu-id="7fab7-130">La bitmap memorizzata nella cache utilizza una quantità significativa di memoria, soprattutto se è rasterizzata a una risoluzione elevata.</span><span class="sxs-lookup"><span data-stu-id="7fab7-130">The cached bitmap consumes a significant amount of memory, especially if it is rasterized at a high resolution.</span></span>

<span data-ttu-id="7fab7-131">Le realizzazioni di geometria rappresentano una modalità alternativa per memorizzare nella cache la geometria che evita gli svantaggi precedenti.</span><span class="sxs-lookup"><span data-stu-id="7fab7-131">Geometry realizations provide an alternative way to cache geometry that avoids the above drawbacks.</span></span> <span data-ttu-id="7fab7-132">Le realizzazioni di geometria sono rappresentate non da pixel (come nel caso di una rasterizzazione completa), ma in base ai punti su un piano matematico.</span><span class="sxs-lookup"><span data-stu-id="7fab7-132">Geometry realizations are represented not by pixels (as is the case with a full rasterization) but instead by points on a mathematical plane.</span></span> <span data-ttu-id="7fab7-133">Per questo motivo sono meno sensibili rispetto alle rasterizzazioni complete per la scalabilità e altre manipolazioni e utilizzano una quantità significativamente inferiore di memoria.</span><span class="sxs-lookup"><span data-stu-id="7fab7-133">For this reason they are less sensitive than full rasterizations to scaling and other manipulation, and they consume significantly less memory.</span></span>

## <a name="when-to-use-geometry-realizations"></a><span data-ttu-id="7fab7-134">Quando usare le realizzazioni di geometria</span><span class="sxs-lookup"><span data-stu-id="7fab7-134">When to use geometry realizations</span></span>

<span data-ttu-id="7fab7-135">Provare a usare le realizzazioni di geometria quando l'app esegue il rendering di geometrie complesse le cui forme cambiano raramente, ma che possono essere soggette a trasformazioni mutevoli.</span><span class="sxs-lookup"><span data-stu-id="7fab7-135">Consider using geometry realizations when your app renders complex geometries whose shapes change infrequently but which may be subject to changing transforms.</span></span>

<span data-ttu-id="7fab7-136">Si consideri, ad esempio, un'applicazione di mapping che mostra una mappa statica, ma che consente all'utente di eseguire lo zoom avanti e indietro. Questa app può trarre vantaggio dall'uso delle realizzazioni di geometria.</span><span class="sxs-lookup"><span data-stu-id="7fab7-136">For example, consider a mapping application that shows a static map but which allows the user to zoom in and out. This app can benefit from using geometry realizations.</span></span> <span data-ttu-id="7fab7-137">Poiché le geometrie di cui è in corso il rendering rimangono statiche, è utile memorizzarle nella cache per salvare il lavoro a mosaico.</span><span class="sxs-lookup"><span data-stu-id="7fab7-137">Since the geometries being rendered remain static, it is useful to cache them in order to save tessellation work.</span></span> <span data-ttu-id="7fab7-138">Tuttavia, poiché le mappe vengono ridimensionate quando l'utente esegue lo zoom, la memorizzazione nella cache di una rasterizzazione completa non è ideale, a causa del ridimensionamento degli artefatti.</span><span class="sxs-lookup"><span data-stu-id="7fab7-138">But because the maps are scaled when the user zooms, caching a full rasterization is not ideal, due to scaling artifacts.</span></span> <span data-ttu-id="7fab7-139">La memorizzazione nella cache delle realizzazioni Geometry consente all'app di evitare il rimosaico del lavoro mantenendo al tempo stesso una qualità visiva elevata durante il ridimensionamento.</span><span class="sxs-lookup"><span data-stu-id="7fab7-139">Caching geometry realizations would allow the app to avoid re-tessellation work while maintaining high visual quality during scaling.</span></span>

<span data-ttu-id="7fab7-140">D'altra parte, si consideri un'App Caleidoscopica con geometria animata che cambia continuamente.</span><span class="sxs-lookup"><span data-stu-id="7fab7-140">On the other hand, consider a kaleidoscope app with animated geometry that continually changes.</span></span> <span data-ttu-id="7fab7-141">Questa app probabilmente non trarrà vantaggio dall'uso delle realizzazioni di geometria.</span><span class="sxs-lookup"><span data-stu-id="7fab7-141">This app would probably not benefit from using geometry realizations.</span></span> <span data-ttu-id="7fab7-142">Poiché le forme cambiano da frame a frame, non è utile memorizzare nella cache i relativi tassellature.</span><span class="sxs-lookup"><span data-stu-id="7fab7-142">Since the shapes themselves change from frame to frame, it is not useful to cache their tessellations.</span></span> <span data-ttu-id="7fab7-143">L'approccio migliore per questa app consiste nel creare direttamente gli oggetti [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) .</span><span class="sxs-lookup"><span data-stu-id="7fab7-143">The best approach for this app is to draw [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) objects directly.</span></span>

## <a name="creating-geometry-realizations"></a><span data-ttu-id="7fab7-144">Creazione di realizzazioni di geometria</span><span class="sxs-lookup"><span data-stu-id="7fab7-144">Creating geometry realizations</span></span>

<span data-ttu-id="7fab7-145">È necessario creare un oggetto [**ID2D1GeometryRealization**](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1geometryrealization) da un oggetto [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) esistente.</span><span class="sxs-lookup"><span data-stu-id="7fab7-145">An [**ID2D1GeometryRealization**](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1geometryrealization) object must be created from an existing [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) object.</span></span> <span data-ttu-id="7fab7-146">Per creare una realizzazione di geometria, chiamare il metodo [**CreateFilledGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createfilledgeometryrealization) o il metodo [**CreateStrokedGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createstrokedgeometryrealization) e passare il **ID2D1Geometry** da realizzare.</span><span class="sxs-lookup"><span data-stu-id="7fab7-146">To create a geometry realization, call the [**CreateFilledGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createfilledgeometryrealization) method or the [**CreateStrokedGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createstrokedgeometryrealization) method and pass in the **ID2D1Geometry** to be realized.</span></span>

-   <span data-ttu-id="7fab7-147">[**CreateFilledGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createfilledgeometryrealization) crea una realizzazione della parte interna della forma, ovvero l'area che verrebbe disegnata chiamando [**FillGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-fillgeometry).</span><span class="sxs-lookup"><span data-stu-id="7fab7-147">[**CreateFilledGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createfilledgeometryrealization) creates a realization of the interior of the shape: the region that would be drawn by calling [**FillGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-fillgeometry).</span></span>
-   <span data-ttu-id="7fab7-148">[**CreateStrokedGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createstrokedgeometryrealization) crea una realizzazione del tratto della forma, ovvero l'area che verrebbe disegnata chiamando [**DrawGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawgeometry).</span><span class="sxs-lookup"><span data-stu-id="7fab7-148">[**CreateStrokedGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createstrokedgeometryrealization) creates a realization of the stroke of the shape: the region that would be drawn by calling [**DrawGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawgeometry).</span></span>

<span data-ttu-id="7fab7-149">Entrambi i tipi di realizzazione della geometria sono rappresentati dall'interfaccia [**ID2D1GeometryRealization**](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1geometryrealization) .</span><span class="sxs-lookup"><span data-stu-id="7fab7-149">Both kinds of geometry realization are represented by the [**ID2D1GeometryRealization**](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1geometryrealization) interface.</span></span>

<span data-ttu-id="7fab7-150">Quando si crea una realizzazione di geometria, [Direct2D](direct2d-portal.md) deve appiattire le curve della geometria fornita a approssimazioni poligonali.</span><span class="sxs-lookup"><span data-stu-id="7fab7-150">When creating a geometry realization, [Direct2D](direct2d-portal.md) must flatten any curves in the provided geometry to polygonal approximations.</span></span> <span data-ttu-id="7fab7-151">È necessario specificare un parametro di tolleranza flat per il metodo di creazione, specificando la distanza massima, in DIP (device independent pixel), tra la curva reale della geometria e la relativa approssimazione poligonale.</span><span class="sxs-lookup"><span data-stu-id="7fab7-151">You must provide a flattening tolerance parameter to the creation method—this specifies the maximum distance, in device-independent pixels (DIPs), between the geometry’s true curve and its polygonal approximation.</span></span> <span data-ttu-id="7fab7-152">Più basso è la tolleranza di flatità fornita, più alta è la fedeltà dell'oggetto di realizzazione Geometry risultante.</span><span class="sxs-lookup"><span data-stu-id="7fab7-152">The lower the flattening tolerance you provide, the higher the fidelity of the resulting geometry realization object.</span></span> <span data-ttu-id="7fab7-153">Analogamente, garantire una maggiore tolleranza di appiattimento produce una realizzazione di geometria con minore fedeltà.</span><span class="sxs-lookup"><span data-stu-id="7fab7-153">Similarly, providing a higher flattening tolerance yields a lower-fidelity geometry realization.</span></span> <span data-ttu-id="7fab7-154">Si noti che le realizzazioni di geometria con fedeltà più elevata sono più costose da creare rispetto a quelle più ridotte, ma possono essere ulteriormente ridimensionate prima di introdurre elementi visibili.</span><span class="sxs-lookup"><span data-stu-id="7fab7-154">Note that higher-fidelity geometry realizations are more expensive to draw than lower-fidelity ones, but they can be scaled further before introducing visible artifacts.</span></span> <span data-ttu-id="7fab7-155">Per istruzioni sull'uso delle tolleranze Flat, vedere [ridimensionamento delle realizzazioni Geometry](#scaling-geometry-realizations) di seguito.</span><span class="sxs-lookup"><span data-stu-id="7fab7-155">For guidance on using flattening tolerances, see [Scaling geometry realizations](#scaling-geometry-realizations) below.</span></span>

> [!Note]  
> <span data-ttu-id="7fab7-156">Gli oggetti di realizzazione Geometry sono associati a un particolare dispositivo di grafica: sono risorse dipendenti dal dispositivo.</span><span class="sxs-lookup"><span data-stu-id="7fab7-156">Geometry realization objects are associated with a particular graphics device: they are device-dependent resources.</span></span>

 

## <a name="drawing-geometry-realizations"></a><span data-ttu-id="7fab7-157">Creazione di realizzazioni di geometria</span><span class="sxs-lookup"><span data-stu-id="7fab7-157">Drawing geometry realizations</span></span>

<span data-ttu-id="7fab7-158">Il disegno di realizzazioni di geometria è simile al disegno di altre primitive [Direct2D](direct2d-portal.md) , come le bitmap.</span><span class="sxs-lookup"><span data-stu-id="7fab7-158">Drawing geometry realizations is similar to drawing other [Direct2D](direct2d-portal.md) primitives, like bitmaps.</span></span> <span data-ttu-id="7fab7-159">A tale scopo, chiamare il metodo [**DrawGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-drawgeometryrealization) e passargli l'oggetto di realizzazione Geometry da disegnare e il pennello da usare.</span><span class="sxs-lookup"><span data-stu-id="7fab7-159">To do so, call the [**DrawGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-drawgeometryrealization) method and pass it the geometry realization object to be drawn and the brush to use.</span></span> <span data-ttu-id="7fab7-160">Come per gli altri metodi di disegno Direct2D, è necessario chiamare **DrawGeometryRealization** tra le chiamate a [**BeginDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-begindraw) e [**EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw).</span><span class="sxs-lookup"><span data-stu-id="7fab7-160">As with other Direct2D drawing methods, you must call **DrawGeometryRealization** between calls to [**BeginDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-begindraw) and [**EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw).</span></span>

## <a name="scaling-geometry-realizations"></a><span data-ttu-id="7fab7-161">Ridimensionamento delle realizzazioni di geometria</span><span class="sxs-lookup"><span data-stu-id="7fab7-161">Scaling geometry realizations</span></span>

<span data-ttu-id="7fab7-162">Le realizzazioni di geometria, come altre primitive [Direct2D](direct2d-portal.md) , rispettano il set di trasformazioni nel contesto di dispositivo.</span><span class="sxs-lookup"><span data-stu-id="7fab7-162">Geometry realizations, like other [Direct2D](direct2d-portal.md) primitives, respect the transform set on the device context.</span></span> <span data-ttu-id="7fab7-163">Sebbene le trasformazioni di traslazione e rotazione non abbiano effetto sulla qualità visiva delle realizzazioni di geometria, le trasformazioni di scala possono produrre artefatti visivi.</span><span class="sxs-lookup"><span data-stu-id="7fab7-163">Although translation and rotation transforms have no effect on the visual quality of geometry realizations, scale transforms can produce visual artifacts.</span></span>

<span data-ttu-id="7fab7-164">In particolare, l'applicazione di una scala sufficientemente grande a qualsiasi realizzazione di geometria può rivelare l'approssimazione poligonale delle curve reali.</span><span class="sxs-lookup"><span data-stu-id="7fab7-164">In particular, applying a large enough scale to any geometry realization can reveal the polygonal approximation of the true curves.</span></span> <span data-ttu-id="7fab7-165">Nell'immagine viene illustrata una coppia di realizzazioni di geometria ellittica (riempimento e tratto) che sono state ridimensionate troppo a lungo.</span><span class="sxs-lookup"><span data-stu-id="7fab7-165">The image here shows a pair of elliptical geometry realizations (fill and stroke) that have been scaled up too far.</span></span> <span data-ttu-id="7fab7-166">Gli artefatti di appiattimento curva sono visibili.</span><span class="sxs-lookup"><span data-stu-id="7fab7-166">Curve-flattening artifacts are visible.</span></span>

![coppia di realizzazioni di geometria ellittica (riempimento e tratto) che sono state ridimensionate troppo a lungo.](images/zoomed-in.png)

<span data-ttu-id="7fab7-169">Le app sensibili alla qualità visiva devono adottare misure per garantire che ciò non avvenga.</span><span class="sxs-lookup"><span data-stu-id="7fab7-169">Apps that are sensitive to visual quality should take measures to ensure this does not happen.</span></span> <span data-ttu-id="7fab7-170">La modalità di gestione della scalabilità dipende dalle esigenze dell'app.</span><span class="sxs-lookup"><span data-stu-id="7fab7-170">How you handle scaling depends on the needs of your app.</span></span> <span data-ttu-id="7fab7-171">Di seguito sono riportati diversi approcci consigliati per diversi tipi di app.</span><span class="sxs-lookup"><span data-stu-id="7fab7-171">Following are several recommended approaches for several different types of app.</span></span>

### <a name="using-geometry-realizations-in-apps-that-do-not-scale"></a><span data-ttu-id="7fab7-172">Uso delle realizzazioni di geometria nelle app che non si adattano</span><span class="sxs-lookup"><span data-stu-id="7fab7-172">Using geometry realizations in apps that do not scale</span></span>

<span data-ttu-id="7fab7-173">Se l'app non esegue alcun ridimensionamento sulle realizzazioni di geometria, è possibile creare le realizzazioni solo una volta, usando una singola tolleranza di Flat.</span><span class="sxs-lookup"><span data-stu-id="7fab7-173">If your app does not perform any scaling on the geometry realizations, then it is safe to create the realizations only once, using a single flattening tolerance.</span></span> <span data-ttu-id="7fab7-174">(Le trasformazioni senza scalabilità non influiscono sulla qualità visiva delle realizzazioni di geometria sottoposte a rendering). Usare la funzione [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)) per calcolare la tolleranza di appiattimento appropriata per il valore dpi:</span><span class="sxs-lookup"><span data-stu-id="7fab7-174">(Non-scaling transforms do not affect the visual quality of rendered geometry realizations.) Use the [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)) function to calculate the appropriate flattening tolerance for the DPI:</span></span>


```C++
    float dpiX, dpiY;
    deviceContext->GetDpi(&dpiX, &dpiY);

    float flatteningTolerance = D2D1::ComputeFlatteningTolerance(
        D2D1::Matrix3x2F::Identity(),   // apply no additional scaling transform
        dpiX,                           // horizontal DPI
        dpiY                            // vertical DPI
        );
```



### <a name="using-geometry-realizations-in-apps-that-scale-by-a-small-amount"></a><span data-ttu-id="7fab7-175">Uso delle realizzazioni di geometria nelle app che vengono ridimensionate in base a una piccola quantità</span><span class="sxs-lookup"><span data-stu-id="7fab7-175">Using geometry realizations in apps that scale by a small amount</span></span>

<span data-ttu-id="7fab7-176">Se l'app è in grado di ridimensionare una realizzazione di geometria solo con una piccola quantità (ad esempio, fino a 2x o 3x), potrebbe essere appropriato semplicemente creare la realizzazione della geometria una sola volta, con una tolleranza di Flat proporzionale inferiore rispetto a quella predefinita.</span><span class="sxs-lookup"><span data-stu-id="7fab7-176">If your app can scale a geometry realization up by only a small amount (for example, up to 2x or 3x), then it may be appropriate simply to create the geometry realization once, at a proportionally lower flattening tolerance than the default.</span></span> <span data-ttu-id="7fab7-177">In questo modo si crea una realizzazione con maggiore fedeltà che può essere scalata significativamente prima di generare artefatti di ridimensionamento. il compromesso è che il disegno della realizzazione con maggiore fedeltà richiede un maggior lavoro.</span><span class="sxs-lookup"><span data-stu-id="7fab7-177">This creates a higher-fidelity realization that can be scaled up significantly before incurring scaling artifacts; the trade-off is that drawing the higher-fidelity realization requires more work.</span></span>

<span data-ttu-id="7fab7-178">Si supponga, ad esempio, di sapere che l'app non ridimensiona mai una realizzazione di geometria più di 2x.</span><span class="sxs-lookup"><span data-stu-id="7fab7-178">For example, suppose you know that your app will never scale a geometry realization by more than 2x.</span></span> <span data-ttu-id="7fab7-179">L'app può creare la realizzazione geometrica usando una tolleranza flat che è la metà del valore predefinito e ridimensionare semplicemente la realizzazione in base alle esigenze, fino a 2x.</span><span class="sxs-lookup"><span data-stu-id="7fab7-179">Your app can create the geometry realization using a flattening tolerance that’s half the default value and simply scale the realization as needed, up to 2x.</span></span> <span data-ttu-id="7fab7-180">Usare la funzione [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)) per calcolare la tolleranza di Flat appropriata passando 2,0 come parametro *maxZoomFactor* :</span><span class="sxs-lookup"><span data-stu-id="7fab7-180">Use the [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)) function to calculate the appropriate flattening tolerance by passing 2.0 as the *maxZoomFactor* parameter:</span></span>


```C++
    float dpiX, dpiY;
    deviceContext->GetDpi(&dpiX, &dpiY);
    
    float flatteningTolerance = D2D1::ComputeFlatteningTolerance(
        D2D1::Matrix3x2F::Identity(),   // apply no additional scaling transform
        dpiX,                           // horizontal DPI
        dpiY,                           // vertical DPI
        2.0f                            // realization can be scaled by an additional 2x
        );
```



### <a name="using-geometry-realizations-in-apps-that-scale-by-a-large-amount"></a><span data-ttu-id="7fab7-181">Uso delle realizzazioni di geometria nelle app che si adattano a una grande quantità</span><span class="sxs-lookup"><span data-stu-id="7fab7-181">Using geometry realizations in apps that scale by a large amount</span></span>

<span data-ttu-id="7fab7-182">Se l'app è in grado di aumentare o ridurre le prestazioni di una geometria in base a grandi quantità (ad esempio, per 10 volte o più), la gestione del ridimensionamento in modo appropriato è più complessa.</span><span class="sxs-lookup"><span data-stu-id="7fab7-182">If your app can scale a geometry realization up or down by large amounts (for example, by 10x or more), then handling scaling appropriately is more complicated.</span></span>

<span data-ttu-id="7fab7-183">Per la maggior parte di queste app, l'approccio consigliato consiste nel ricreare la realizzazione di geometria con una riduzione graduale delle tolleranze Man mano che la scena viene ridimensionata, in modo da mantenere la fedeltà visiva ed evitare la scalabilità degli artefatti.</span><span class="sxs-lookup"><span data-stu-id="7fab7-183">For most of these apps, the recommended approach is to recreate the geometry realization at progressively lower flattening tolerances as the scene is scaled up, in order to maintain visual fidelity and avoid scaling artifacts.</span></span> <span data-ttu-id="7fab7-184">Analogamente, man mano che la scena viene ridimensionata, l'app deve ricreare le realizzazioni di geometria con tolleranze progressivamente più elevate, in modo da evitare un inutile rendering dei dettagli che non sono visibili.</span><span class="sxs-lookup"><span data-stu-id="7fab7-184">Similarly, as the scene is scaled down, the app should recreate the geometry realizations at progressively higher flattening tolerances, in order to avoid wastefully rendering details that aren’t visible.</span></span> <span data-ttu-id="7fab7-185">L'app non deve ricreare le realizzazioni di geometria ogni volta che la scala viene modificata, perché in questo modo si vanifica lo scopo della memorizzazione nella cache del lavoro a mosaico.</span><span class="sxs-lookup"><span data-stu-id="7fab7-185">The app shouldn’t recreate the geometry realizations every time the scale changes, because doing so defeats the purpose of caching the tessellation work.</span></span> <span data-ttu-id="7fab7-186">Al contrario, l'app deve ricreare le realizzazioni di geometria con minore frequenza, ad esempio dopo ogni aumento o riduzione della dimensione di 2x.</span><span class="sxs-lookup"><span data-stu-id="7fab7-186">Instead, the app should recreate the geometry realizations less frequently: for example, after every 2x increase or decrease in scale.</span></span>

<span data-ttu-id="7fab7-187">Ogni volta che la scala cambia in un'app in risposta all'interazione dell'utente, l'app potrebbe confrontare la nuova scala con la scala in cui sono state create le realizzazioni di geometria (archiviate, ad esempio, in un membro **\_ lastScale m** ).</span><span class="sxs-lookup"><span data-stu-id="7fab7-187">Each time the scale changes in an app in response to user interaction, the app could compare the new scale against the scale at which the geometry realizations were last created (stored, for example, in an **m\_lastScale** member).</span></span> <span data-ttu-id="7fab7-188">Se i due valori sono vicini (in questo caso, all'interno di un fattore 2), non viene eseguita alcuna azione ulteriore.</span><span class="sxs-lookup"><span data-stu-id="7fab7-188">If the two values are close (in this case, within a factor of 2), then no further action is taken.</span></span> <span data-ttu-id="7fab7-189">Tuttavia, se i due valori non sono vicini, le realizzazioni di geometria vengono ricreate.</span><span class="sxs-lookup"><span data-stu-id="7fab7-189">But if the two values are not close, then the geometry realizations are re-created.</span></span> <span data-ttu-id="7fab7-190">La funzione [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)) viene usata per calcolare una tolleranza appiattita appropriata per la nuova scala e **m \_ lastScale** viene aggiornato alla nuova scala.</span><span class="sxs-lookup"><span data-stu-id="7fab7-190">The [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)) function is used to compute a flattening tolerance appropriate for the new scale, and **m\_lastScale** is updated to the new scale.</span></span>

<span data-ttu-id="7fab7-191">Inoltre, l'app crea sempre le realizzazioni usando una tolleranza inferiore rispetto a quella usata normalmente per la nuova scala, passando il valore 2 come parametro *maxZoomFactor* a [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="7fab7-191">In addition, the app always creates realizations using a smaller tolerance than what would normally be used for the new scale, by passing a value of 2 as the *maxZoomFactor* parameter to [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)).</span></span> <span data-ttu-id="7fab7-192">In questo modo è possibile aumentare la scalabilità delle nuove realizzazioni geometriche con un fattore aggiuntivo pari a 2 senza influire sulla scalabilità degli artefatti.</span><span class="sxs-lookup"><span data-stu-id="7fab7-192">This allows the new geometry realizations to be scaled up by an additional factor of 2 without incurring scaling artifacts.</span></span>

> [!Note]  
> <span data-ttu-id="7fab7-193">L'approccio descritto qui potrebbe non essere appropriato per tutte le app.</span><span class="sxs-lookup"><span data-stu-id="7fab7-193">The approach described here may not be appropriate for all apps.</span></span> <span data-ttu-id="7fab7-194">Se, ad esempio, l'app consente di ridimensionare la scena in modo molto rapido, ad esempio se contiene un dispositivo di scorrimento "zoom", che può essere spostato da 100% a 1 milione% nell'intervallo di pochi frame, questo approccio può comportare un lavoro in eccesso ricreando le realizzazioni Geometry ogni frame.</span><span class="sxs-lookup"><span data-stu-id="7fab7-194">For example, if your app allows the scene to be scaled by very large factors very quickly (for example, if it contains a “zoom” slider that can be moved from 100% to 1,000,000% in the span of a few frames) then this approach may result in excess work by recreating the geometry realizations every frame.</span></span> <span data-ttu-id="7fab7-195">Un approccio alternativo consiste nel ricreare le realizzazioni di geometria solo dopo che ogni modifica della scala della scena è stata completata (ad esempio, dopo che l'utente ha completato un movimento di tocco).</span><span class="sxs-lookup"><span data-stu-id="7fab7-195">An alternative approach is to recreate the geometry realizations only after each manipulation of the scene’s scale has been completed (for example, after the user has completed a pinch gesture).</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="7fab7-196">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="7fab7-196">Related topics</span></span>

[<span data-ttu-id="7fab7-197">Panoramica delle geometrie</span><span class="sxs-lookup"><span data-stu-id="7fab7-197">Geometries Overview</span></span>](direct2d-geometries-overview.md)

[<span data-ttu-id="7fab7-198">Miglioramento delle prestazioni delle app Direct2D</span><span class="sxs-lookup"><span data-stu-id="7fab7-198">Improving the performance of Direct2D apps</span></span>](improving-direct2d-performance.md)

[<span data-ttu-id="7fab7-199">Linee guida generali per il rendering di contenuto statico complesso</span><span class="sxs-lookup"><span data-stu-id="7fab7-199">General guidelines for rendering complex static content</span></span>](improving-direct2d-performance.md)

[<span data-ttu-id="7fab7-200">**ID2D1DeviceContext1**</span><span class="sxs-lookup"><span data-stu-id="7fab7-200">**ID2D1DeviceContext1**</span></span>](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1devicecontext1)

[<span data-ttu-id="7fab7-201">**ID2D1GeometryRealization**</span><span class="sxs-lookup"><span data-stu-id="7fab7-201">**ID2D1GeometryRealization**</span></span>](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1geometryrealization)

<span data-ttu-id="7fab7-202">[**ComputeFlatteningTolerance (funzione)**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="7fab7-202">[**ComputeFlatteningTolerance function**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85))</span></span>