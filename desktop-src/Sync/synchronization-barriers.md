---
description: Una barriera di sincronizzazione consente a più thread di attendere che tutti i thread raggiungano un determinato punto di esecuzione prima che un thread continui.
ms.assetid: 3A76E6F7-C38B-4843-9496-36F3C78B700C
title: Barriere di sincronizzazione
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4276f0bbc5a10eef391c12cc51ebd475e563bd44
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "104233488"
---
# <a name="synchronization-barriers"></a><span data-ttu-id="7c64e-103">Barriere di sincronizzazione</span><span class="sxs-lookup"><span data-stu-id="7c64e-103">Synchronization Barriers</span></span>

<span data-ttu-id="7c64e-104">Una barriera di sincronizzazione consente a più thread di attendere che tutti i thread raggiungano un determinato punto di esecuzione prima che un thread continui.</span><span class="sxs-lookup"><span data-stu-id="7c64e-104">A synchronization barrier enables multiple threads to wait until all threads have all reached a particular point of execution before any thread continues.</span></span> <span data-ttu-id="7c64e-105">Le barriere di sincronizzazione non possono essere condivise tra i processi.</span><span class="sxs-lookup"><span data-stu-id="7c64e-105">Synchronization barriers cannot be shared across processes.</span></span>

<span data-ttu-id="7c64e-106">Le barriere di sincronizzazione sono utili per i calcoli in più fasi, in cui i thread che eseguono lo stesso codice in parallelo devono completare una fase prima di procedere al passaggio successivo.</span><span class="sxs-lookup"><span data-stu-id="7c64e-106">Synchronization barriers are useful for phased computations, in which threads executing the same code in parallel must all complete one phase before moving on to the next.</span></span>

<span data-ttu-id="7c64e-107">Per creare una barriera di sincronizzazione, chiamare la funzione [**InitializeSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-initializesynchronizationbarrier) e specificare un numero massimo di thread e il numero di volte in cui un thread deve essere ruotato prima di bloccarsi.</span><span class="sxs-lookup"><span data-stu-id="7c64e-107">To create a synchronization barrier, call the [**InitializeSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-initializesynchronizationbarrier) function and specify a maximum number of threads and how many times a thread should spin before it blocks.</span></span> <span data-ttu-id="7c64e-108">Avviare quindi i thread che utilizzeranno la barriera.</span><span class="sxs-lookup"><span data-stu-id="7c64e-108">Then launch the threads that will use the barrier.</span></span> <span data-ttu-id="7c64e-109">Al termine del lavoro di ogni thread, viene chiamato [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) per attendere la barriera.</span><span class="sxs-lookup"><span data-stu-id="7c64e-109">After each thread finishes its work, it calls [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) to wait at the barrier.</span></span> <span data-ttu-id="7c64e-110">La funzione **EnterSynchronizationBarrier** blocca ogni thread finché il numero di thread bloccati nella barriera raggiunge il numero massimo di thread per la barriera, a quel punto **EnterSynchronizationBarrier** Sblocca tutti i thread.</span><span class="sxs-lookup"><span data-stu-id="7c64e-110">The **EnterSynchronizationBarrier** function blocks each thread until the number of threads blocked in the barrier reaches the maximum thread count for the barrier, at which point **EnterSynchronizationBarrier** unblocks all the threads.</span></span> <span data-ttu-id="7c64e-111">La funzione **EnterSynchronizationBarrier** restituisce **true** esattamente per uno dei thread che sono stati inseriti nella barriera e restituisce **false** per tutti gli altri thread.</span><span class="sxs-lookup"><span data-stu-id="7c64e-111">The **EnterSynchronizationBarrier** function returns **TRUE** for exactly one of the threads that entered the barrier, and returns **FALSE** for all other threads.</span></span>

<span data-ttu-id="7c64e-112">Per rilasciare una barriera di sincronizzazione quando non è più necessaria, chiamare [**DeleteSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-deletesynchronizationbarrier).</span><span class="sxs-lookup"><span data-stu-id="7c64e-112">To release a synchronization barrier when it is no longer needed, call [**DeleteSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-deletesynchronizationbarrier).</span></span> <span data-ttu-id="7c64e-113">È possibile chiamare questa funzione immediatamente dopo aver chiamato [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) perché tale funzione garantisce che tutti i thread abbiano terminato di usare la barriera prima del rilascio.</span><span class="sxs-lookup"><span data-stu-id="7c64e-113">It is safe to call this function immediately after calling [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) because that function ensures that all threads have finished using the barrier before it is released.</span></span>

<span data-ttu-id="7c64e-114">Se una barriera di sincronizzazione non viene mai eliminata, i thread possono specificare i **flag della barriera di sincronizzazione senza flag di \_ \_ \_ \_ eliminazione** quando entrano nella barriera.</span><span class="sxs-lookup"><span data-stu-id="7c64e-114">If a synchronization barrier will never be deleted, threads can specify the **SYNCHRONIZATION\_BARRIER\_FLAGS\_NO\_DELETE** flag when they enter the barrier.</span></span> <span data-ttu-id="7c64e-115">Tutti i thread che usano la barriera devono specificare questo flag; Se un thread non lo è, il flag viene ignorato.</span><span class="sxs-lookup"><span data-stu-id="7c64e-115">All threads using the barrier must specify this flag; if any thread does not, the flag is ignored.</span></span> <span data-ttu-id="7c64e-116">Questo flag fa in modo che la funzione ignori il lavoro aggiuntivo necessario per la sicurezza dell'eliminazione, che può migliorare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="7c64e-116">This flag causes the function to skip the extra work required for deletion safety, which can improve performance.</span></span> <span data-ttu-id="7c64e-117">Si noti che l'eliminazione di una barriera mentre questo flag è attiva può comportare l'accesso a un handle non valido e uno o più thread bloccati in modo permanente.</span><span class="sxs-lookup"><span data-stu-id="7c64e-117">Note that deleting a barrier while this flag is in effect may result in an invalid handle access and one or more permanently blocked threads.</span></span>

 

 



