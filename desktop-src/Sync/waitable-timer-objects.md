---
description: Un oggetto timer che può essere atteso è un oggetto di sincronizzazione il cui stato è impostato su segnalato quando arriva il tempo di scadenza specificato.
ms.assetid: 5d39ada0-ea31-40d7-b075-aeb657ee508c
title: Oggetti timer waitable
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2b9597617705fcd78bb71f63e33a475e3bca78e3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106316060"
---
# <a name="waitable-timer-objects"></a><span data-ttu-id="bbae8-103">Oggetti timer waitable</span><span class="sxs-lookup"><span data-stu-id="bbae8-103">Waitable Timer Objects</span></span>

<span data-ttu-id="bbae8-104">Un *oggetto timer* che può essere atteso è un oggetto di sincronizzazione il cui stato è impostato su segnalato quando arriva il tempo di scadenza specificato.</span><span class="sxs-lookup"><span data-stu-id="bbae8-104">A *waitable timer object* is a synchronization object whose state is set to signaled when the specified due time arrives.</span></span> <span data-ttu-id="bbae8-105">È possibile creare due tipi di timer che è possibile attendere, ovvero la reimpostazione manuale e la sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="bbae8-105">There are two types of waitable timers that can be created: manual-reset and synchronization.</span></span> <span data-ttu-id="bbae8-106">Un timer di uno dei due tipi può anche essere un timer periodico.</span><span class="sxs-lookup"><span data-stu-id="bbae8-106">A timer of either type can also be a periodic timer.</span></span>



| <span data-ttu-id="bbae8-107">Oggetto</span><span class="sxs-lookup"><span data-stu-id="bbae8-107">Object</span></span>                | <span data-ttu-id="bbae8-108">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bbae8-108">Description</span></span>                                                                                                                                                                                             |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="bbae8-109">timer di reimpostazione manuale</span><span class="sxs-lookup"><span data-stu-id="bbae8-109">manual-reset timer</span></span>    | <span data-ttu-id="bbae8-110">Timer il cui stato rimane segnalato fino a quando non viene chiamato [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) per stabilire una nuova ora di scadenza.</span><span class="sxs-lookup"><span data-stu-id="bbae8-110">A timer whose state remains signaled until [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) is called to establish a new due time.</span></span>                                                                          |
| <span data-ttu-id="bbae8-111">timer di sincronizzazione</span><span class="sxs-lookup"><span data-stu-id="bbae8-111">synchronization timer</span></span> | <span data-ttu-id="bbae8-112">Timer il cui stato rimane segnalato fino al completamento di un'operazione di attesa sull'oggetto timer da parte di un thread.</span><span class="sxs-lookup"><span data-stu-id="bbae8-112">A timer whose state remains signaled until a thread completes a wait operation on the timer object.</span></span>                                                                                                     |
| <span data-ttu-id="bbae8-113">timer periodico</span><span class="sxs-lookup"><span data-stu-id="bbae8-113">periodic timer</span></span>        | <span data-ttu-id="bbae8-114">Timer che viene riattivato ogni volta che il periodo specificato scade, fino a quando il timer viene reimpostato o annullato.</span><span class="sxs-lookup"><span data-stu-id="bbae8-114">A timer that is reactivated each time the specified period expires, until the timer is reset or canceled.</span></span> <span data-ttu-id="bbae8-115">Un timer periodico è un timer di reimpostazione manuale periodico o un timer di sincronizzazione periodico.</span><span class="sxs-lookup"><span data-stu-id="bbae8-115">A periodic timer is either a periodic manual-reset timer or a periodic synchronization timer.</span></span> |



 

> [!Note]  
> <span data-ttu-id="bbae8-116">Quando viene segnalato un timer, il processore deve eseguire per elaborare le istruzioni associate.</span><span class="sxs-lookup"><span data-stu-id="bbae8-116">When a timer is signaled, the processor must run to process the associated instructions.</span></span> <span data-ttu-id="bbae8-117">I timer periodici ad alta frequenza mantengono il processore sempre occupato, impedendo al sistema di rimanere in uno [stato di alimentazione](../power/system-power-states.md) inferiore per un periodo di tempo significativo.</span><span class="sxs-lookup"><span data-stu-id="bbae8-117">High-frequency periodic timers keep the processor continually busy, which prevents the system from remaining in a lower [power state](../power/system-power-states.md) for any meaningful amount of time.</span></span> <span data-ttu-id="bbae8-118">Ciò può avere un impatto negativo sulla durata della batteria dei computer portatili e sugli scenari che dipendono da un risparmio energia efficace, ad esempio Data Center di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="bbae8-118">This can have a negative impact on portable computer battery life and scenarios that depend on effective power management, such as large datacenters.</span></span> <span data-ttu-id="bbae8-119">Per una maggiore efficienza energetica, è consigliabile usare notifiche basate su eventi anziché notifiche basate sul tempo nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bbae8-119">For greater energy efficiency, consider using event-based notifications instead of time-based notifications in your application.</span></span> <span data-ttu-id="bbae8-120">Se è necessario un timer, utilizzare un timer segnalato una volta anziché un timer periodico oppure impostare l'intervallo su un valore maggiore di un secondo.</span><span class="sxs-lookup"><span data-stu-id="bbae8-120">If a timer is necessary, use a timer that is signaled once rather than a periodic timer, or set the interval to a value greater than one second.</span></span>

 

<span data-ttu-id="bbae8-121">Un thread usa la funzione [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) o [**CreateWaitableTimerEx**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerexw) per creare un oggetto timer.</span><span class="sxs-lookup"><span data-stu-id="bbae8-121">A thread uses the [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) or [**CreateWaitableTimerEx**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerexw) function to create a timer object.</span></span> <span data-ttu-id="bbae8-122">Il thread di creazione specifica se il timer è un timer di reimpostazione manuale o un timer di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="bbae8-122">The creating thread specifies whether the timer is a manual-reset timer or a synchronization timer.</span></span> <span data-ttu-id="bbae8-123">Il thread di creazione può specificare un nome per l'oggetto timer.</span><span class="sxs-lookup"><span data-stu-id="bbae8-123">The creating thread can specify a name for the timer object.</span></span> <span data-ttu-id="bbae8-124">I thread di altri processi possono aprire un handle per un timer esistente specificandone il nome in una chiamata alla funzione [**OpenWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-openwaitabletimerw) .</span><span class="sxs-lookup"><span data-stu-id="bbae8-124">Threads in other processes can open a handle to an existing timer by specifying its name in a call to the [**OpenWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-openwaitabletimerw) function.</span></span> <span data-ttu-id="bbae8-125">Qualsiasi thread con un handle a un oggetto timer può utilizzare una delle [funzioni di attesa](wait-functions.md) per attendere che lo stato del timer sia impostato su segnalato.</span><span class="sxs-lookup"><span data-stu-id="bbae8-125">Any thread with a handle to a timer object can use one of the [wait functions](wait-functions.md) to wait for the timer state to be set to signaled.</span></span>

-   <span data-ttu-id="bbae8-126">Il thread chiama la funzione [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) per attivare il timer.</span><span class="sxs-lookup"><span data-stu-id="bbae8-126">The thread calls the [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) function to activate the timer.</span></span> <span data-ttu-id="bbae8-127">Si noti l'uso dei parametri seguenti per **SetWaitableTimer**:</span><span class="sxs-lookup"><span data-stu-id="bbae8-127">Note the use of the following parameters for **SetWaitableTimer**:</span></span>
-   <span data-ttu-id="bbae8-128">Usare il parametro *lpDueTime* per specificare l'ora in cui deve essere impostato il timer sullo stato segnalato.</span><span class="sxs-lookup"><span data-stu-id="bbae8-128">Use the *lpDueTime* parameter to specify the time at which the timer is to be set to the signaled state.</span></span> <span data-ttu-id="bbae8-129">Quando un timer di reimpostazione manuale è impostato sullo stato segnalato, rimane in questo stato fino a quando [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) non stabilisce un nuovo tempo di scadenza.</span><span class="sxs-lookup"><span data-stu-id="bbae8-129">When a manual-reset timer is set to the signaled state, it remains in this state until [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) establishes a new due time.</span></span> <span data-ttu-id="bbae8-130">Quando un timer di sincronizzazione è impostato sullo stato segnalato, rimane in questo stato fino al completamento di un'operazione di attesa sull'oggetto timer da parte di un thread.</span><span class="sxs-lookup"><span data-stu-id="bbae8-130">When a synchronization timer is set to the signaled state, it remains in this state until a thread completes a wait operation on the timer object.</span></span>
-   <span data-ttu-id="bbae8-131">Usare il parametro *lPeriod* della funzione [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) per specificare il periodo del timer.</span><span class="sxs-lookup"><span data-stu-id="bbae8-131">Use the *lPeriod* parameter of the [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) function to specify the timer period.</span></span> <span data-ttu-id="bbae8-132">Se il periodo è diverso da zero, il timer è un timer periodico; viene riattivato ogni volta che il periodo scade, fino a quando il timer viene reimpostato o annullato.</span><span class="sxs-lookup"><span data-stu-id="bbae8-132">If the period is not zero, the timer is a periodic timer; it is reactivated each time the period expires, until the timer is reset or canceled.</span></span> <span data-ttu-id="bbae8-133">Se il punto è zero, il timer non è un timer periodico; viene segnalato una volta e quindi disattivato.</span><span class="sxs-lookup"><span data-stu-id="bbae8-133">If the period is zero, the timer is not a periodic timer; it is signaled once and then deactivated.</span></span>

<span data-ttu-id="bbae8-134">Un thread può utilizzare la funzione [**CancelWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-cancelwaitabletimer) per impostare il timer sullo stato inattivo.</span><span class="sxs-lookup"><span data-stu-id="bbae8-134">A thread can use the [**CancelWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-cancelwaitabletimer) function to set the timer to the inactive state.</span></span> <span data-ttu-id="bbae8-135">Per reimpostare il timer, chiamare [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer).</span><span class="sxs-lookup"><span data-stu-id="bbae8-135">To reset the timer, call [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer).</span></span> <span data-ttu-id="bbae8-136">Al termine dell'oggetto timer, chiamare [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle) per chiudere l'handle per l'oggetto timer.</span><span class="sxs-lookup"><span data-stu-id="bbae8-136">When you are finished with the timer object, call [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle) to close the handle to the timer object.</span></span>

<span data-ttu-id="bbae8-137">Il comportamento di un timer waitable può essere riepilogato come segue:</span><span class="sxs-lookup"><span data-stu-id="bbae8-137">The behavior of a waitable timer can be summarized as follows:</span></span>

-   <span data-ttu-id="bbae8-138">Quando viene impostato un timer, questo viene annullato se era già attivo, lo stato del timer è non segnalato e il timer viene inserito nella coda del timer del kernel.</span><span class="sxs-lookup"><span data-stu-id="bbae8-138">When a timer is set, it is canceled if it was already active, the state of the timer is nonsignaled, and the timer is placed in the kernel timer queue.</span></span>
-   <span data-ttu-id="bbae8-139">Quando un timer scade, il timer viene impostato sullo stato segnalato.</span><span class="sxs-lookup"><span data-stu-id="bbae8-139">When a timer expires, the timer is set to the signaled state.</span></span> <span data-ttu-id="bbae8-140">Se il timer ha una routine di completamento, viene accodato al thread che ha impostato il timer.</span><span class="sxs-lookup"><span data-stu-id="bbae8-140">If the timer has a completion routine, it is queued to the thread that set the timer.</span></span> <span data-ttu-id="bbae8-141">La routine di completamento rimane nella coda della [chiamata di procedura asincrona](asynchronous-procedure-calls.md) (APC) del thread finché il thread non entra in uno stato di attesa di avviso.</span><span class="sxs-lookup"><span data-stu-id="bbae8-141">The completion routine remains in the [asynchronous procedure call](asynchronous-procedure-calls.md) (APC) queue of the thread until the thread enters an alertable wait state.</span></span> <span data-ttu-id="bbae8-142">A questo punto, l'APC viene inviato e viene chiamata la routine di completamento.</span><span class="sxs-lookup"><span data-stu-id="bbae8-142">At that time, the APC is dispatched and the completion routine is called.</span></span> <span data-ttu-id="bbae8-143">Se il timer è periodico, viene inserito nuovamente nella coda del timer del kernel.</span><span class="sxs-lookup"><span data-stu-id="bbae8-143">If the timer is periodic, it is placed back in the kernel timer queue.</span></span>
-   <span data-ttu-id="bbae8-144">Quando un timer viene annullato, viene rimosso dalla coda del timer del kernel se è in sospeso.</span><span class="sxs-lookup"><span data-stu-id="bbae8-144">When a timer is canceled, it is removed from the kernel timer queue if it was pending.</span></span> <span data-ttu-id="bbae8-145">Se il timer è scaduto ed esiste ancora una coda APC al thread che ha impostato il timer, l'APC viene rimosso dalla coda APC del thread.</span><span class="sxs-lookup"><span data-stu-id="bbae8-145">If the timer had expired and there is still an APC queued to the thread that set the timer, the APC is removed from the thread's APC queue.</span></span> <span data-ttu-id="bbae8-146">Lo stato segnalato del timer non è interessato.</span><span class="sxs-lookup"><span data-stu-id="bbae8-146">The signaled state of the timer is not affected.</span></span>

## <a name="related-topics"></a><span data-ttu-id="bbae8-147">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="bbae8-147">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bbae8-148">Chiamate di procedure asincrone</span><span class="sxs-lookup"><span data-stu-id="bbae8-148">Asynchronous Procedure Calls</span></span>](asynchronous-procedure-calls.md)
</dt> <dt>

[<span data-ttu-id="bbae8-149">Uso di oggetti timer waitable</span><span class="sxs-lookup"><span data-stu-id="bbae8-149">Using Waitable Timer Objects</span></span>](using-waitable-timer-objects.md)
</dt> </dl>

 

 
