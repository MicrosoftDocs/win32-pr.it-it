---
description: Le funzioni Wait consentono a un thread di bloccare la propria esecuzione.
ms.assetid: 9c66c71d-fdfd-42ae-895c-2fc842b5bc7a
title: Funzioni Wait
ms.topic: article
ms.date: 06/25/2020
ms.openlocfilehash: f5a21b0d95a316b926fcaad037004edc8c418246
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106316061"
---
# <a name="wait-functions"></a><span data-ttu-id="0a06b-103">Funzioni Wait</span><span class="sxs-lookup"><span data-stu-id="0a06b-103">Wait Functions</span></span>

<span data-ttu-id="0a06b-104">Le *funzioni Wait* consentono a un thread di bloccare la propria esecuzione.</span><span class="sxs-lookup"><span data-stu-id="0a06b-104">*Wait functions* allow a thread to block its own execution.</span></span> <span data-ttu-id="0a06b-105">Le funzioni di attesa non vengono restituite fino a quando non vengono soddisfatti i criteri specificati.</span><span class="sxs-lookup"><span data-stu-id="0a06b-105">The wait functions do not return until the specified criteria have been met.</span></span> <span data-ttu-id="0a06b-106">Il tipo di funzione wait determina il set di criteri utilizzati.</span><span class="sxs-lookup"><span data-stu-id="0a06b-106">The type of wait function determines the set of criteria used.</span></span> <span data-ttu-id="0a06b-107">Quando viene chiamata una funzione Wait, verifica se i criteri di attesa sono stati soddisfatti.</span><span class="sxs-lookup"><span data-stu-id="0a06b-107">When a wait function is called, it checks whether the wait criteria have been met.</span></span> <span data-ttu-id="0a06b-108">Se i criteri non sono stati soddisfatti, il thread chiamante entra nello stato di attesa fino a quando non sono state soddisfatte le condizioni dei criteri di attesa o non è trascorso l'intervallo di timeout specificato.</span><span class="sxs-lookup"><span data-stu-id="0a06b-108">If the criteria have not been met, the calling thread enters the wait state until the conditions of the wait criteria have been met or the specified time-out interval elapses.</span></span>

-   [<span data-ttu-id="0a06b-109">Funzioni di attesa a singolo oggetto</span><span class="sxs-lookup"><span data-stu-id="0a06b-109">Single-object Wait Functions</span></span>](#single-object-wait-functions)
-   [<span data-ttu-id="0a06b-110">Funzioni di attesa di più oggetti</span><span class="sxs-lookup"><span data-stu-id="0a06b-110">Multiple-object Wait Functions</span></span>](#multiple-object-wait-functions)
-   [<span data-ttu-id="0a06b-111">Funzioni di attesa alertable</span><span class="sxs-lookup"><span data-stu-id="0a06b-111">Alertable Wait Functions</span></span>](#alertable-wait-functions)
-   [<span data-ttu-id="0a06b-112">Funzioni di attesa registrate</span><span class="sxs-lookup"><span data-stu-id="0a06b-112">Registered Wait Functions</span></span>](#registered-wait-functions)
-   [<span data-ttu-id="0a06b-113">In attesa di un indirizzo</span><span class="sxs-lookup"><span data-stu-id="0a06b-113">Waiting on an Address</span></span>](#waiting-on-an-address)
-   [<span data-ttu-id="0a06b-114">Funzioni Wait e intervalli di timeout</span><span class="sxs-lookup"><span data-stu-id="0a06b-114">Wait Functions and Time-out Intervals</span></span>](#wait-functions-and-time-out-intervals)
-   [<span data-ttu-id="0a06b-115">Funzioni di attesa e oggetti di sincronizzazione</span><span class="sxs-lookup"><span data-stu-id="0a06b-115">Wait Functions and Synchronization Objects</span></span>](#wait-functions-and-synchronization-objects)
-   [<span data-ttu-id="0a06b-116">Funzioni Wait e creazione di finestre</span><span class="sxs-lookup"><span data-stu-id="0a06b-116">Wait Functions and Creating Windows</span></span>](#wait-functions-and-creating-windows)

## <a name="single-object-wait-functions"></a><span data-ttu-id="0a06b-117">Funzioni di attesa a singolo oggetto</span><span class="sxs-lookup"><span data-stu-id="0a06b-117">Single-object Wait Functions</span></span>

<span data-ttu-id="0a06b-118">Le funzioni [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait), [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject)e [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) richiedono un handle per un oggetto di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="0a06b-118">The [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait), [**WaitForSingleObject**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobject), and [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) functions require a handle to one synchronization object.</span></span> <span data-ttu-id="0a06b-119">Queste funzioni restituiscono quando si verifica una delle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="0a06b-119">These functions return when one of the following occurs:</span></span>

-   <span data-ttu-id="0a06b-120">L'oggetto specificato è nello stato segnalato.</span><span class="sxs-lookup"><span data-stu-id="0a06b-120">The specified object is in the signaled state.</span></span>
-   <span data-ttu-id="0a06b-121">Intervallo di timeout scaduto.</span><span class="sxs-lookup"><span data-stu-id="0a06b-121">The time-out interval elapses.</span></span> <span data-ttu-id="0a06b-122">L'intervallo di timeout può essere impostato su **infinito** per specificare che il timeout dell'attesa non verrà effettuato.</span><span class="sxs-lookup"><span data-stu-id="0a06b-122">The time-out interval can be set to **INFINITE** to specify that the wait will not time out.</span></span>

<span data-ttu-id="0a06b-123">La funzione [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait) consente al thread chiamante di impostare atomicamente lo stato di un oggetto su segnalato e attendere che lo stato di un altro oggetto venga impostato su segnalato.</span><span class="sxs-lookup"><span data-stu-id="0a06b-123">The [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait) function enables the calling thread to atomically set the state of an object to signaled and wait for the state of another object to be set to signaled.</span></span>

## <a name="multiple-object-wait-functions"></a><span data-ttu-id="0a06b-124">Funzioni di attesa di più oggetti</span><span class="sxs-lookup"><span data-stu-id="0a06b-124">Multiple-object Wait Functions</span></span>

<span data-ttu-id="0a06b-125">Le funzioni [**WaitForMultipleObjects**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjects), [**WaitForMultipleObjectsEx**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjectsex), [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects)e [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex) consentono al thread chiamante di specificare una matrice contenente uno o più handle di oggetti di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="0a06b-125">The [**WaitForMultipleObjects**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjects), [**WaitForMultipleObjectsEx**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjectsex), [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects), and [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex) functions enable the calling thread to specify an array containing one or more synchronization object handles.</span></span> <span data-ttu-id="0a06b-126">Queste funzioni restituiscono quando si verifica una delle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="0a06b-126">These functions return when one of the following occurs:</span></span>

-   <span data-ttu-id="0a06b-127">Lo stato di uno degli oggetti specificati è impostato su segnalato oppure gli Stati di tutti gli oggetti sono stati impostati su segnalato.</span><span class="sxs-lookup"><span data-stu-id="0a06b-127">The state of any one of the specified objects is set to signaled or the states of all objects have been set to signaled.</span></span> <span data-ttu-id="0a06b-128">È possibile controllare se nella chiamata di funzione verranno usati uno o tutti gli Stati.</span><span class="sxs-lookup"><span data-stu-id="0a06b-128">You control whether one or all of the states will be used in the function call.</span></span>
-   <span data-ttu-id="0a06b-129">Intervallo di timeout scaduto.</span><span class="sxs-lookup"><span data-stu-id="0a06b-129">The time-out interval elapses.</span></span> <span data-ttu-id="0a06b-130">L'intervallo di timeout può essere impostato su **infinito** per specificare che il timeout dell'attesa non verrà effettuato.</span><span class="sxs-lookup"><span data-stu-id="0a06b-130">The time-out interval can be set to **INFINITE** to specify that the wait will not time out.</span></span>

<span data-ttu-id="0a06b-131">La funzione [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects) e [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex) consentono di specificare oggetti evento di input nella matrice di handle dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="0a06b-131">The [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects) and [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex) function allow you to specify input event objects in the object handle array.</span></span> <span data-ttu-id="0a06b-132">Questa operazione viene eseguita quando si specifica il tipo di input da attendere nella coda di input del thread.</span><span class="sxs-lookup"><span data-stu-id="0a06b-132">This is done when you specify the type of input to wait for in the thread's input queue.</span></span> <span data-ttu-id="0a06b-133">Ad esempio, un thread può usare **MsgWaitForMultipleObjects** per bloccare l'esecuzione fino a quando lo stato di un oggetto specificato non è stato impostato su segnalato e l'input del mouse è disponibile nella coda di input del thread.</span><span class="sxs-lookup"><span data-stu-id="0a06b-133">For example, a thread could use **MsgWaitForMultipleObjects** to block its execution until the state of a specified object has been set to signaled and there is mouse input available in the thread's input queue.</span></span> <span data-ttu-id="0a06b-134">Il thread può usare la funzione [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) o [**PeekMessageA**](/windows/win32/api/winuser/nf-winuser-peekmessagea) o [**PeekMessageW**](/windows/win32/api/winuser/nf-winuser-peekmessagew) per recuperare l'input.</span><span class="sxs-lookup"><span data-stu-id="0a06b-134">The thread can use the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessageA**](/windows/win32/api/winuser/nf-winuser-peekmessagea) or [**PeekMessageW**](/windows/win32/api/winuser/nf-winuser-peekmessagew) function to retrieve the input.</span></span>

<span data-ttu-id="0a06b-135">Quando si attende che lo stato di tutti gli oggetti sia impostato su segnalato, queste funzioni a più oggetti non modificano gli Stati degli oggetti specificati fino a quando non sono stati impostati segnali per gli Stati di tutti gli oggetti.</span><span class="sxs-lookup"><span data-stu-id="0a06b-135">When waiting for the states of all objects to be set to signaled, these multiple-object functions do not modify the states of the specified objects until the states of all objects have been set signaled.</span></span> <span data-ttu-id="0a06b-136">Ad esempio, lo stato di un oggetto mutex può essere segnalato, ma il thread chiamante non ottiene la proprietà finché gli Stati degli altri oggetti specificati nella matrice non sono stati anche impostati su segnalato.</span><span class="sxs-lookup"><span data-stu-id="0a06b-136">For example, the state of a mutex object can be signaled, but the calling thread does not get ownership until the states of the other objects specified in the array have also been set to signaled.</span></span> <span data-ttu-id="0a06b-137">Nel frattempo, un altro thread può ottenere la proprietà dell'oggetto mutex, impostando quindi lo stato su non segnalato.</span><span class="sxs-lookup"><span data-stu-id="0a06b-137">In the meantime, some other thread may get ownership of the mutex object, thereby setting its state to nonsignaled.</span></span>

<span data-ttu-id="0a06b-138">Quando si attende che lo stato di un singolo oggetto sia impostato su segnalato, queste funzioni a più oggetti controllano gli handle nella matrice in ordine a partire dall'indice 0, fino a quando non viene segnalato uno degli oggetti.</span><span class="sxs-lookup"><span data-stu-id="0a06b-138">When waiting for the state of a single object to be set to signaled, these multiple-object functions check the handles in the array in order starting with index 0, until one of the objects is signaled.</span></span> <span data-ttu-id="0a06b-139">Se più oggetti vengono segnalati, la funzione restituisce l'indice del primo handle della matrice il cui oggetto è stato segnalato.</span><span class="sxs-lookup"><span data-stu-id="0a06b-139">If multiple objects become signaled, the function returns the index of the first handle in the array whose object was signaled.</span></span>

## <a name="alertable-wait-functions"></a><span data-ttu-id="0a06b-140">Funzioni di attesa alertable</span><span class="sxs-lookup"><span data-stu-id="0a06b-140">Alertable Wait Functions</span></span>

<span data-ttu-id="0a06b-141">Le funzioni [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex), [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait), [**WaitForMultipleObjectsEx**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjectsex)e [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) sono diverse dalle altre funzioni wait in quanto possono facoltativamente eseguire un'operazione di *attesa di avviso*.</span><span class="sxs-lookup"><span data-stu-id="0a06b-141">The [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex), [**SignalObjectAndWait**](/windows/win32/api/synchapi/nf-synchapi-signalobjectandwait), [**WaitForMultipleObjectsEx**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjectsex), and [**WaitForSingleObjectEx**](/windows/win32/api/synchapi/nf-synchapi-waitforsingleobjectex) functions differ from the other wait functions in that they can optionally perform an *alertable wait operation*.</span></span> <span data-ttu-id="0a06b-142">In un'operazione di attesa di avviso, la funzione può restituire quando vengono soddisfatte le condizioni specificate, ma può anche restituire se il sistema accoda una routine di completamento I/O o un APC per l'esecuzione da parte del thread in attesa.</span><span class="sxs-lookup"><span data-stu-id="0a06b-142">In an alertable wait operation, the function can return when the specified conditions are met, but it can also return if the system queues an I/O completion routine or an APC for execution by the waiting thread.</span></span> <span data-ttu-id="0a06b-143">Per altre informazioni sulle operazioni di attesa per avvisi e sulle routine di completamento I/O, vedere [sincronizzazione e input e output sovrapposti](synchronization-and-overlapped-input-and-output.md).</span><span class="sxs-lookup"><span data-stu-id="0a06b-143">For more information about alertable wait operations and I/O completion routines, see [Synchronization and Overlapped Input and Output](synchronization-and-overlapped-input-and-output.md).</span></span> <span data-ttu-id="0a06b-144">Per ulteriori informazioni su APC, vedere la pagina relativa alle [chiamate asincrone alle procedure](asynchronous-procedure-calls.md).</span><span class="sxs-lookup"><span data-stu-id="0a06b-144">For more information about APCs, see [Asynchronous Procedure Calls](asynchronous-procedure-calls.md).</span></span>

## <a name="registered-wait-functions"></a><span data-ttu-id="0a06b-145">Funzioni di attesa registrate</span><span class="sxs-lookup"><span data-stu-id="0a06b-145">Registered Wait Functions</span></span>

<span data-ttu-id="0a06b-146">La funzione [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) differisce dalle altre funzioni wait in quanto l'operazione Wait viene eseguita da un thread del pool di [thread](../procthread/thread-pooling.md).</span><span class="sxs-lookup"><span data-stu-id="0a06b-146">The [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) function differs from the other wait functions in that the wait operation is performed by a thread from the [thread pool](../procthread/thread-pooling.md).</span></span> <span data-ttu-id="0a06b-147">Quando vengono soddisfatte le condizioni specificate, la funzione di callback viene eseguita da un thread di lavoro dal pool di thread.</span><span class="sxs-lookup"><span data-stu-id="0a06b-147">When the specified conditions are met, the callback function is executed by a worker thread from the thread pool.</span></span>

<span data-ttu-id="0a06b-148">Per impostazione predefinita, un'operazione di attesa registrata è un'operazione di attesa multipla.</span><span class="sxs-lookup"><span data-stu-id="0a06b-148">By default, a registered wait operation is a multiple-wait operation.</span></span> <span data-ttu-id="0a06b-149">Il sistema Reimposta il timer ogni volta che l'evento viene segnalato (o scade l'intervallo di timeout) finché non si chiama la funzione [**unregisterwaitex ha provocato**](unregisterwaitex.md) per annullare l'operazione.</span><span class="sxs-lookup"><span data-stu-id="0a06b-149">The system resets the timer every time the event is signaled (or the time-out interval elapses) until you call the [**UnregisterWaitEx**](unregisterwaitex.md) function to cancel the operation.</span></span> <span data-ttu-id="0a06b-150">Per specificare che un'operazione di attesa deve essere eseguita una sola volta, impostare il parametro *dwFlags* di [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) su **WT \_ EXECUTEONLYONCE**.</span><span class="sxs-lookup"><span data-stu-id="0a06b-150">To specify that a wait operation should be executed only once, set the *dwFlags* parameter of [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) to **WT\_EXECUTEONLYONCE**.</span></span>

<span data-ttu-id="0a06b-151">Se il thread chiama funzioni che usano APC, impostare il parametro *dwFlags* di [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) su **WT \_ EXECUTEINPERSISTENTTHREAD**.</span><span class="sxs-lookup"><span data-stu-id="0a06b-151">If the thread calls functions that use APCs, set the *dwFlags* parameter of [**RegisterWaitForSingleObject**](/windows/desktop/api/WinBase/nf-winbase-registerwaitforsingleobject) to **WT\_EXECUTEINPERSISTENTTHREAD**.</span></span>

## <a name="waiting-on-an-address"></a><span data-ttu-id="0a06b-152">In attesa di un indirizzo</span><span class="sxs-lookup"><span data-stu-id="0a06b-152">Waiting on an Address</span></span>

<span data-ttu-id="0a06b-153">Un thread può usare la funzione [**WaitOnAddress**](/windows/desktop/api/SynchAPI/nf-synchapi-waitonaddress) per attendere che il valore di un indirizzo di destinazione venga modificato da un valore indesiderato a qualsiasi altro valore.</span><span class="sxs-lookup"><span data-stu-id="0a06b-153">A thread can use the [**WaitOnAddress**](/windows/desktop/api/SynchAPI/nf-synchapi-waitonaddress) function to wait for the value of a target address to change from some undesired value to any other value.</span></span> <span data-ttu-id="0a06b-154">Questo consente ai thread di attendere che un valore venga modificato senza dover ruotare o gestire i problemi di sincronizzazione che possono verificarsi quando il thread acquisisce un valore indesiderato, ma il valore viene modificato prima che il thread possa attendere.</span><span class="sxs-lookup"><span data-stu-id="0a06b-154">This enables threads to wait for a value to change without having to spin or handle the synchronization problems that can arise when the thread captures an undesired value but the value changes before the thread can wait.</span></span>

<span data-ttu-id="0a06b-155">[**WaitOnAddress**](/windows/desktop/api/SynchAPI/nf-synchapi-waitonaddress) restituisce quando il codice che modifica il valore di destinazione segnala la modifica chiamando [**WakeByAddressSingle**](/windows/desktop/api/SynchAPI/nf-synchapi-wakebyaddresssingle) per riattivare un singolo thread in attesa o [**WakeByAddressAll**](/windows/desktop/api/SynchAPI/nf-synchapi-wakebyaddressall) per riattivare tutti i thread in attesa.</span><span class="sxs-lookup"><span data-stu-id="0a06b-155">[**WaitOnAddress**](/windows/desktop/api/SynchAPI/nf-synchapi-waitonaddress) returns when code that modifies the target value signals the change by calling [**WakeByAddressSingle**](/windows/desktop/api/SynchAPI/nf-synchapi-wakebyaddresssingle) to wake a single waiting thread or [**WakeByAddressAll**](/windows/desktop/api/SynchAPI/nf-synchapi-wakebyaddressall) to wake all waiting threads.</span></span> <span data-ttu-id="0a06b-156">Se viene specificato un intervallo di timeout con **WaitOnAddress** e nessun thread chiama una funzione Wake, la funzione restituisce quando scade l'intervallo di timeout.</span><span class="sxs-lookup"><span data-stu-id="0a06b-156">If a time-out interval is specified with **WaitOnAddress** and no thread calls a wake function, the function returns when the time-out interval elapses.</span></span> <span data-ttu-id="0a06b-157">Se non viene specificato alcun intervallo di timeout, il thread resta in attesa per un periodo illimitato.</span><span class="sxs-lookup"><span data-stu-id="0a06b-157">If no time-out interval is specified, the thread waits indefinitely.</span></span>

## <a name="wait-functions-and-time-out-intervals"></a><span data-ttu-id="0a06b-158">Funzioni Wait e intervalli di timeout</span><span class="sxs-lookup"><span data-stu-id="0a06b-158">Wait Functions and Time-out Intervals</span></span>

<span data-ttu-id="0a06b-159">L'accuratezza dell'intervallo di timeout specificato dipende dalla risoluzione del clock di sistema.</span><span class="sxs-lookup"><span data-stu-id="0a06b-159">The accuracy of the specified time-out interval depends on the resolution of the system clock.</span></span> <span data-ttu-id="0a06b-160">"Tick" del clock di sistema a una velocità costante.</span><span class="sxs-lookup"><span data-stu-id="0a06b-160">The system clock "ticks" at a constant rate.</span></span> <span data-ttu-id="0a06b-161">Se l'intervallo di timeout è inferiore alla risoluzione del clock di sistema, il timeout dell'attesa potrebbe essere inferiore al periodo di tempo specificato.</span><span class="sxs-lookup"><span data-stu-id="0a06b-161">If the time-out interval is less than the resolution of the system clock, the wait may time out in less than the specified length of time.</span></span> <span data-ttu-id="0a06b-162">Se l'intervallo di timeout è maggiore di un segno di minore di due, l'attesa può trovarsi in qualsiasi punto tra uno e due cicli e così via.</span><span class="sxs-lookup"><span data-stu-id="0a06b-162">If the time-out interval is greater than one tick but less than two, the wait can be anywhere between one and two ticks, and so on.</span></span>

<span data-ttu-id="0a06b-163">Per aumentare l'accuratezza dell'intervallo di timeout per le funzioni di attesa, chiamare la funzione **timeGetDevCaps** per determinare la risoluzione del timer minima supportata e la funzione **timeBeginPeriod** per impostare il valore minimo per la risoluzione del timer.</span><span class="sxs-lookup"><span data-stu-id="0a06b-163">To increase the accuracy of the time-out interval for the wait functions, call the **timeGetDevCaps** function to determine the supported minimum timer resolution and the **timeBeginPeriod** function to set the timer resolution to its minimum.</span></span> <span data-ttu-id="0a06b-164">Prestare attenzione quando si chiama **timeBeginPeriod**, in quanto le chiamate frequenti possono influenzare significativamente il clock di sistema, l'utilizzo dell'alimentazione del sistema e l'utilità di pianificazione.</span><span class="sxs-lookup"><span data-stu-id="0a06b-164">Use caution when calling **timeBeginPeriod**, as frequent calls can significantly affect the system clock, system power usage, and the scheduler.</span></span> <span data-ttu-id="0a06b-165">Se si chiama **timeBeginPeriod**, richiamarlo una volta all'inizio dell'applicazione e assicurarsi di chiamare la funzione **timeEndPeriod** alla fine dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="0a06b-165">If you call **timeBeginPeriod**, call it one time early in the application and be sure to call the **timeEndPeriod** function at the very end of the application.</span></span>

## <a name="wait-functions-and-synchronization-objects"></a><span data-ttu-id="0a06b-166">Funzioni di attesa e oggetti di sincronizzazione</span><span class="sxs-lookup"><span data-stu-id="0a06b-166">Wait Functions and Synchronization Objects</span></span>

<span data-ttu-id="0a06b-167">Le funzioni Wait possono modificare gli Stati di alcuni tipi di [oggetti di sincronizzazione](synchronization-objects.md).</span><span class="sxs-lookup"><span data-stu-id="0a06b-167">The wait functions can modify the states of some types of [synchronization objects](synchronization-objects.md).</span></span> <span data-ttu-id="0a06b-168">La modifica si verifica solo per l'oggetto o gli oggetti il cui stato segnalato ha causato la restituzione della funzione.</span><span class="sxs-lookup"><span data-stu-id="0a06b-168">Modification occurs only for the object or objects whose signaled state caused the function to return.</span></span> <span data-ttu-id="0a06b-169">Le funzioni Wait possono modificare gli Stati degli oggetti di sincronizzazione come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="0a06b-169">Wait functions can modify the states of synchronization objects as follows:</span></span>

-   <span data-ttu-id="0a06b-170">Il numero di un oggetto semaforo diminuisce di uno e lo stato del semaforo è impostato su non segnalato se il conteggio è zero.</span><span class="sxs-lookup"><span data-stu-id="0a06b-170">The count of a semaphore object decreases by one, and the state of the semaphore is set to nonsignaled if its count is zero.</span></span>
-   <span data-ttu-id="0a06b-171">Gli Stati di mutex, l'evento di reimpostazione automatica e gli oggetti di notifica delle modifiche sono impostati su non segnalato.</span><span class="sxs-lookup"><span data-stu-id="0a06b-171">The states of mutex, auto-reset event, and change-notification objects are set to nonsignaled.</span></span>
-   <span data-ttu-id="0a06b-172">Lo stato di un timer di sincronizzazione è impostato su non segnalato.</span><span class="sxs-lookup"><span data-stu-id="0a06b-172">The state of a synchronization timer is set to nonsignaled.</span></span>
-   <span data-ttu-id="0a06b-173">Gli Stati degli eventi di reimpostazione manuale, timer di reimpostazione manuale, processo, thread e input della console non sono interessati da una funzione di attesa.</span><span class="sxs-lookup"><span data-stu-id="0a06b-173">The states of manual-reset event, manual-reset timer, process, thread, and console input objects are not affected by a wait function.</span></span>

## <a name="wait-functions-and-creating-windows"></a><span data-ttu-id="0a06b-174">Funzioni Wait e creazione di finestre</span><span class="sxs-lookup"><span data-stu-id="0a06b-174">Wait Functions and Creating Windows</span></span>

<span data-ttu-id="0a06b-175">È necessario prestare attenzione quando si usano le funzioni di attesa e il codice che crea direttamente o indirettamente Windows.</span><span class="sxs-lookup"><span data-stu-id="0a06b-175">You have to be careful when using the wait functions and code that directly or indirectly creates windows.</span></span> <span data-ttu-id="0a06b-176">Se un thread crea qualsiasi finestra, deve elaborare i messaggi.</span><span class="sxs-lookup"><span data-stu-id="0a06b-176">If a thread creates any windows, it must process messages.</span></span> <span data-ttu-id="0a06b-177">Le trasmissioni di messaggi vengono inviate a tutte le finestre nel sistema.</span><span class="sxs-lookup"><span data-stu-id="0a06b-177">Message broadcasts are sent to all windows in the system.</span></span> <span data-ttu-id="0a06b-178">Se si dispone di un thread che utilizza una funzione wait senza intervallo di timeout, il sistema si blocca.</span><span class="sxs-lookup"><span data-stu-id="0a06b-178">If you have a thread that uses a wait function with no time-out interval, the system will deadlock.</span></span> <span data-ttu-id="0a06b-179">Due esempi di codice che crea indirettamente Windows sono DDE e la funzione **CoInitialize** .</span><span class="sxs-lookup"><span data-stu-id="0a06b-179">Two examples of code that indirectly creates windows are DDE and the **CoInitialize** function.</span></span> <span data-ttu-id="0a06b-180">Se pertanto si dispone di un thread che crea Windows, utilizzare [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects) o [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex)anziché le altre funzioni di attesa.</span><span class="sxs-lookup"><span data-stu-id="0a06b-180">Therefore, if you have a thread that creates windows, use [**MsgWaitForMultipleObjects**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjects) or [**MsgWaitForMultipleObjectsEx**](/windows/desktop/api/Winuser/nf-winuser-msgwaitformultipleobjectsex), rather than the other wait functions.</span></span>

 

 
