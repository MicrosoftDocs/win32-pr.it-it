---
description: Un oggetto mutex è un oggetto di sincronizzazione il cui stato è impostato su segnalato quando non è di proprietà di alcun thread e non segnalato quando è di proprietà.
ms.assetid: eca0795a-1fd0-4034-9d61-9416670919cf
title: Oggetti mutex
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e84c17ba3e99e888f7d1e9137a7f24a4d78ce2d4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103883261"
---
# <a name="mutex-objects"></a><span data-ttu-id="8d435-103">Oggetti mutex</span><span class="sxs-lookup"><span data-stu-id="8d435-103">Mutex Objects</span></span>

<span data-ttu-id="8d435-104">Un *oggetto mutex* è un oggetto di sincronizzazione il cui stato è impostato su segnalato quando non è di proprietà di alcun thread e non segnalato quando è di proprietà.</span><span class="sxs-lookup"><span data-stu-id="8d435-104">A *mutex object* is a synchronization object whose state is set to signaled when it is not owned by any thread, and nonsignaled when it is owned.</span></span> <span data-ttu-id="8d435-105">Un solo thread alla volta può essere proprietario di un oggetto mutex, il cui nome deriva dal fatto che è utile per il coordinamento dell'accesso a una risorsa condivisa in modo reciprocamente esclusivo.</span><span class="sxs-lookup"><span data-stu-id="8d435-105">Only one thread at a time can own a mutex object, whose name comes from the fact that it is useful in coordinating mutually exclusive access to a shared resource.</span></span> <span data-ttu-id="8d435-106">Per impedire, ad esempio, a due thread di scrivere nella memoria condivisa allo stesso tempo, ogni thread attende la proprietà di un oggetto mutex prima di eseguire il codice che accede alla memoria.</span><span class="sxs-lookup"><span data-stu-id="8d435-106">For example, to prevent two threads from writing to shared memory at the same time, each thread waits for ownership of a mutex object before executing the code that accesses the memory.</span></span> <span data-ttu-id="8d435-107">Dopo la scrittura nella memoria condivisa, il thread rilascia l'oggetto mutex.</span><span class="sxs-lookup"><span data-stu-id="8d435-107">After writing to the shared memory, the thread releases the mutex object.</span></span>

<span data-ttu-id="8d435-108">Un thread usa la funzione [**CreateMutex**](/windows/win32/api/synchapi/nf-synchapi-createmutexa) o [**CreateMutexEx**](/windows/win32/api/synchapi/nf-synchapi-createmutexexa) per creare un oggetto mutex.</span><span class="sxs-lookup"><span data-stu-id="8d435-108">A thread uses the [**CreateMutex**](/windows/win32/api/synchapi/nf-synchapi-createmutexa) or [**CreateMutexEx**](/windows/win32/api/synchapi/nf-synchapi-createmutexexa) function to create a mutex object.</span></span> <span data-ttu-id="8d435-109">Il thread di creazione può richiedere la proprietà immediata dell'oggetto mutex ed è anche possibile specificare un nome per l'oggetto mutex.</span><span class="sxs-lookup"><span data-stu-id="8d435-109">The creating thread can request immediate ownership of the mutex object and can also specify a name for the mutex object.</span></span> <span data-ttu-id="8d435-110">Può anche creare un mutex senza nome.</span><span class="sxs-lookup"><span data-stu-id="8d435-110">It can also create an unnamed mutex.</span></span> <span data-ttu-id="8d435-111">Per ulteriori informazioni sui nomi per gli oggetti mutex, Event, Semaphore e timer, vedere [sincronizzazione interprocesso](interprocess-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="8d435-111">For additional information about names for mutex, event, semaphore, and timer objects, see [Interprocess Synchronization](interprocess-synchronization.md).</span></span>

<span data-ttu-id="8d435-112">I thread di altri processi possono aprire un handle per un oggetto mutex denominato esistente specificandone il nome in una chiamata alla funzione [**errore in OpenMutex**](/windows/win32/api/synchapi/nf-synchapi-openmutexw) .</span><span class="sxs-lookup"><span data-stu-id="8d435-112">Threads in other processes can open a handle to an existing named mutex object by specifying its name in a call to the [**OpenMutex**](/windows/win32/api/synchapi/nf-synchapi-openmutexw) function.</span></span> <span data-ttu-id="8d435-113">Per passare un handle a un mutex senza nome a un altro processo, usare la funzione [**DuplicateHandle**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle) o l'ereditarietà dell'handle padre-figlio.</span><span class="sxs-lookup"><span data-stu-id="8d435-113">To pass a handle to an unnamed mutex to another process, use the [**DuplicateHandle**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle) function or parent-child handle inheritance.</span></span>

<span data-ttu-id="8d435-114">Qualsiasi thread con un handle a un oggetto mutex può utilizzare una delle [funzioni Wait](wait-functions.md) per richiedere la proprietà dell'oggetto mutex.</span><span class="sxs-lookup"><span data-stu-id="8d435-114">Any thread with a handle to a mutex object can use one of the [wait functions](wait-functions.md) to request ownership of the mutex object.</span></span> <span data-ttu-id="8d435-115">Se l'oggetto mutex è di proprietà di un altro thread, la funzione wait blocca il thread di richiesta fino a quando il thread proprietario rilascia l'oggetto mutex usando la funzione [**ReleaseMutex**](/windows/win32/api/synchapi/nf-synchapi-releasemutex) .</span><span class="sxs-lookup"><span data-stu-id="8d435-115">If the mutex object is owned by another thread, the wait function blocks the requesting thread until the owning thread releases the mutex object using the [**ReleaseMutex**](/windows/win32/api/synchapi/nf-synchapi-releasemutex) function.</span></span> <span data-ttu-id="8d435-116">Il valore restituito della funzione Wait indica se la funzione restituita per un motivo diverso da quello del mutex impostato su segnalato.</span><span class="sxs-lookup"><span data-stu-id="8d435-116">The return value of the wait function indicates whether the function returned for some reason other than the state of the mutex being set to signaled.</span></span>

<span data-ttu-id="8d435-117">Se più di un thread è in attesa su un mutex, viene selezionato un thread in attesa.</span><span class="sxs-lookup"><span data-stu-id="8d435-117">If more than one thread is waiting on a mutex, a waiting thread is selected.</span></span> <span data-ttu-id="8d435-118">Non presupporre un ordine FIFO (First-in, First-out).</span><span class="sxs-lookup"><span data-stu-id="8d435-118">Do not assume a first-in, first-out (FIFO) order.</span></span> <span data-ttu-id="8d435-119">Gli eventi esterni, ad esempio APC in modalità kernel, possono modificare l'ordine di attesa.</span><span class="sxs-lookup"><span data-stu-id="8d435-119">External events such as kernel-mode APCs can change the wait order.</span></span>

<span data-ttu-id="8d435-120">Quando un thread ottiene la proprietà di un mutex, può specificare lo stesso mutex nelle chiamate ripetute alle [funzioni Wait](wait-functions.md) senza bloccarne l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="8d435-120">After a thread obtains ownership of a mutex, it can specify the same mutex in repeated calls to the [wait-functions](wait-functions.md) without blocking its execution.</span></span> <span data-ttu-id="8d435-121">In questo modo si impedisce a un thread di verificarsi un deadlock durante l'attesa di un mutex di cui è già proprietario.</span><span class="sxs-lookup"><span data-stu-id="8d435-121">This prevents a thread from deadlocking itself while waiting for a mutex that it already owns.</span></span> <span data-ttu-id="8d435-122">Per rilasciare la proprietà in tali circostanze, il thread deve chiamare [**ReleaseMutex**](/windows/win32/api/synchapi/nf-synchapi-releasemutex) una volta per ogni volta che il mutex soddisfa le condizioni di una funzione di attesa.</span><span class="sxs-lookup"><span data-stu-id="8d435-122">To release its ownership under such circumstances, the thread must call [**ReleaseMutex**](/windows/win32/api/synchapi/nf-synchapi-releasemutex) once for each time that the mutex satisfied the conditions of a wait function.</span></span>

<span data-ttu-id="8d435-123">Se un thread termina senza rilasciare la proprietà di un oggetto mutex, l'oggetto mutex viene considerato abbandonato.</span><span class="sxs-lookup"><span data-stu-id="8d435-123">If a thread terminates without releasing its ownership of a mutex object, the mutex object is considered to be abandoned.</span></span> <span data-ttu-id="8d435-124">Un thread in attesa può acquisire la proprietà di un oggetto mutex abbandonato, ma la funzione wait restituirà **Wait \_ Abandoned** per indicare che l'oggetto mutex è stato abbandonato.</span><span class="sxs-lookup"><span data-stu-id="8d435-124">A waiting thread can acquire ownership of an abandoned mutex object, but the wait function will return **WAIT\_ABANDONED** to indicate that the mutex object is abandoned.</span></span> <span data-ttu-id="8d435-125">Un oggetto mutex abbandonato indica che si è verificato un errore e che tutte le risorse condivise protette dall'oggetto mutex sono in uno stato non definito.</span><span class="sxs-lookup"><span data-stu-id="8d435-125">An abandoned mutex object indicates that an error has occurred and that any shared resource being protected by the mutex object is in an undefined state.</span></span> <span data-ttu-id="8d435-126">Se il thread continua come se l'oggetto mutex non fosse stato abbandonato, non viene più considerato abbandonato dopo che il thread rilascia la proprietà.</span><span class="sxs-lookup"><span data-stu-id="8d435-126">If the thread proceeds as though the mutex object had not been abandoned, it is no longer considered abandoned after the thread releases its ownership.</span></span> <span data-ttu-id="8d435-127">In questo modo viene ripristinato il comportamento normale se in una funzione Wait viene successivamente specificato un handle per l'oggetto mutex.</span><span class="sxs-lookup"><span data-stu-id="8d435-127">This restores normal behavior if a handle to the mutex object is subsequently specified in a wait function.</span></span>

<span data-ttu-id="8d435-128">Si noti che [gli oggetti sezione critici](critical-section-objects.md) forniscono una sincronizzazione simile a quella fornita dagli oggetti mutex, ad eccezione del fatto che gli oggetti sezione critici possono essere utilizzati solo dai thread di un singolo processo.</span><span class="sxs-lookup"><span data-stu-id="8d435-128">Note that [critical section objects](critical-section-objects.md) provide synchronization similar to that provided by mutex objects, except that critical section objects can be used only by the threads of a single process.</span></span>

## <a name="related-topics"></a><span data-ttu-id="8d435-129">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="8d435-129">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8d435-130">Utilizzo di oggetti mutex</span><span class="sxs-lookup"><span data-stu-id="8d435-130">Using Mutex Objects</span></span>](using-mutex-objects.md)
</dt> </dl>

 

 
