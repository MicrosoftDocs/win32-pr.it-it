---
description: Per convalidare un database, usare uno strumento di convalida speciale per unire un file con estensione cub che contiene gli analizzatori di coerenza interni (CIEM) nel database, eseguire il servizio di verifica di sistema e segnalare i risultati.
ms.assetid: bdf38673-ee3d-47d8-ad6e-562cd5626918
title: Utilizzo degli analizzatori di coerenza interni
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 423e6dab453ae495dc6029b54eb039c8acc60f33
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106307242"
---
# <a name="using-internal-consistency-evaluators"></a><span data-ttu-id="376ea-103">Utilizzo degli analizzatori di coerenza interni</span><span class="sxs-lookup"><span data-stu-id="376ea-103">Using Internal Consistency Evaluators</span></span>

<span data-ttu-id="376ea-104">Per convalidare un database, usare uno strumento di convalida speciale per unire un file con estensione cub che contiene gli [analizzatori di coerenza interni](internal-consistency-evaluators-ices.md) (CIEM) nel database, eseguire il servizio di verifica di sistema e segnalare i risultati.</span><span class="sxs-lookup"><span data-stu-id="376ea-104">To validate a database, use a special validation tool to merge a .cub file containing the [Internal Consistency Evaluators](internal-consistency-evaluators-ices.md) (ICEs) into your database, execute the ICEs, and report the results.</span></span> <span data-ttu-id="376ea-105">Molti di questi strumenti sono disponibili in Microsoft Windows Software Development Kit (SDK).</span><span class="sxs-lookup"><span data-stu-id="376ea-105">Several such tools are provided in the Microsoft Windows Software Development Kit (SDK).</span></span> <span data-ttu-id="376ea-106">Gli ambienti di creazione di fornitori di terze parti possono anche incorporare il sistema di convalida del ghiaccio nell'ambiente di creazione.</span><span class="sxs-lookup"><span data-stu-id="376ea-106">Authoring environments from third-party vendors also may incorporate the ICE validation system into their authoring environment.</span></span> <span data-ttu-id="376ea-107">È anche possibile scrivere il proprio strumento per eseguire la convalida del ghiaccio.</span><span class="sxs-lookup"><span data-stu-id="376ea-107">It is also possible to write your own tool to perform ICE validation.</span></span> <span data-ttu-id="376ea-108">La maggior parte degli strumenti di convalida del ghiaccio unisce il file con estensione cub e il database in un terzo database temporaneo.</span><span class="sxs-lookup"><span data-stu-id="376ea-108">Most ICE validation tools merge the .cub file and your database into a third, temporary database.</span></span> <span data-ttu-id="376ea-109">Windows Installer Visualizza avvisi, errori, informazioni di debug ed errori API durante l'esecuzione di ogni ghiaccio nel file con estensione cub.</span><span class="sxs-lookup"><span data-stu-id="376ea-109">Windows Installer displays warnings, errors, debugging information, and API errors as it executes each ICE in the .cub file.</span></span> <span data-ttu-id="376ea-110">Al termine dell'esecuzione del programma di installazione, chiude il file con estensione msi, il file con estensione cub e il database temporaneo senza salvare le modifiche.</span><span class="sxs-lookup"><span data-stu-id="376ea-110">When the installer finishes executing the ICEs it closes the .msi file, .cub file, and temporary database without saving any changes.</span></span> <span data-ttu-id="376ea-111">Il file con estensione msi e il file con estensione cub rimangono invariati dal test di convalida.</span><span class="sxs-lookup"><span data-stu-id="376ea-111">The .msi file and .cub file remain unchanged by the validation test.</span></span>

<span data-ttu-id="376ea-112">Le azioni personalizzate del ghiaccio comunicano all'utente chiamando [**MsiProcessMessage**](/windows/desktop/api/Msiquery/nf-msiquery-msiprocessmessage) e inviando un \_ messaggio utente INSTALLMESSAGE.</span><span class="sxs-lookup"><span data-stu-id="376ea-112">ICE custom actions communicate to the user by calling [**MsiProcessMessage**](/windows/desktop/api/Msiquery/nf-msiquery-msiprocessmessage) and posting an INSTALLMESSAGE\_USER message.</span></span> <span data-ttu-id="376ea-113">Un messaggio di ghiaccio restituisce generalmente informazioni come le seguenti:</span><span class="sxs-lookup"><span data-stu-id="376ea-113">An ICE message commonly returns information such as the following:</span></span>

-   <span data-ttu-id="376ea-114">Nome del ghiaccio che ha rilevato un errore</span><span class="sxs-lookup"><span data-stu-id="376ea-114">Name of the ICE that has found an error</span></span>
-   <span data-ttu-id="376ea-115">Data di creazione del ghiaccio</span><span class="sxs-lookup"><span data-stu-id="376ea-115">Date the ICE was created</span></span>
-   <span data-ttu-id="376ea-116">Autore del ghiaccio</span><span class="sxs-lookup"><span data-stu-id="376ea-116">Author of the ICE</span></span>
-   <span data-ttu-id="376ea-117">Data dell'Ultima modifica del ghiaccio.</span><span class="sxs-lookup"><span data-stu-id="376ea-117">Date the ICE was last modified.</span></span>
-   <span data-ttu-id="376ea-118">Descrizione dell'errore dell'API che causa il guasto del ghiaccio</span><span class="sxs-lookup"><span data-stu-id="376ea-118">Description of the API error causing the ICE to fail</span></span>
-   <span data-ttu-id="376ea-119">Descrizione dell'errore</span><span class="sxs-lookup"><span data-stu-id="376ea-119">Description of the error</span></span>
-   <span data-ttu-id="376ea-120">Avviso per l'utente</span><span class="sxs-lookup"><span data-stu-id="376ea-120">A warning to the user</span></span>
-   <span data-ttu-id="376ea-121">Nome della tabella di database contenente l'errore o l'avviso</span><span class="sxs-lookup"><span data-stu-id="376ea-121">Name of the database table containing the error or warning</span></span>
-   <span data-ttu-id="376ea-122">Nome della colonna di tabella contenente l'errore o l'avviso</span><span class="sxs-lookup"><span data-stu-id="376ea-122">Name of the table column containing the error or warning</span></span>
-   <span data-ttu-id="376ea-123">Chiavi primarie della tabella contenente l'errore o l'avviso</span><span class="sxs-lookup"><span data-stu-id="376ea-123">Primary keys of the table containing the error or warning</span></span>
-   <span data-ttu-id="376ea-124">URL di un file HTML che fornisce suggerimenti per il debug</span><span class="sxs-lookup"><span data-stu-id="376ea-124">A URL to a HTML file giving debugging suggestions</span></span>
-   <span data-ttu-id="376ea-125">Stringa che può contenere altre informazioni</span><span class="sxs-lookup"><span data-stu-id="376ea-125">A string that can contain other information</span></span>

<span data-ttu-id="376ea-126">Gli autori dei pacchetti di installazione possono scrivere azioni personalizzate ICE o usare il set standard di gelati inclusi nei file con estensione cub forniti con l'SDK.</span><span class="sxs-lookup"><span data-stu-id="376ea-126">Authors of installation packages can write ICE custom actions or use the standard set of ICEs included in the .cub files provided with the SDK.</span></span> <span data-ttu-id="376ea-127">Per ulteriori informazioni su come scrivere un ghiaccio, vedere la pagina relativa alla [creazione di un ghiaccio](building-an-ice.md).</span><span class="sxs-lookup"><span data-stu-id="376ea-127">For more information on how to write an ICE, see [Building an ICE](building-an-ice.md).</span></span>

<span data-ttu-id="376ea-128">Una volta scritti i database appropriati per la convalida, lo sviluppatore deve raccogliere le azioni personalizzate in un database con estensione msi, denominato file con estensione cub, che contiene solo i ghiacci e le tabelle necessarie.</span><span class="sxs-lookup"><span data-stu-id="376ea-128">After writing the appropriate ICEs for validation, a developer must collect the custom actions together into an .msi database, called a .cub file, that contains only the ICEs and their required tables.</span></span> <span data-ttu-id="376ea-129">Non è possibile installare un file con estensione cub e viene usato solo per archiviare e fornire l'accesso alle azioni personalizzate di ICE.</span><span class="sxs-lookup"><span data-stu-id="376ea-129">A .cub file cannot be installed and is used only to store and provide access to ICE custom actions.</span></span> <span data-ttu-id="376ea-130">Per ulteriori informazioni sulla creazione di file con estensione cub, vedere la pagina relativa alla [creazione di un database Ice](building-an-ice-database.md).</span><span class="sxs-lookup"><span data-stu-id="376ea-130">For more information on making .cub files, see [Building an ICE Database](building-an-ice-database.md).</span></span> <span data-ttu-id="376ea-131">In alternativa, gli sviluppatori possono convalidare il pacchetto di installazione usando i ghiacci esistenti descritti in [Ice Reference](ice-reference.md).</span><span class="sxs-lookup"><span data-stu-id="376ea-131">Alternatively, developers can validate their installation package using the existing ICEs described in [ICE Reference](ice-reference.md).</span></span> <span data-ttu-id="376ea-132">Questi CIEM possono essere ottenuti da file con estensione cub standard forniti con l'SDK.</span><span class="sxs-lookup"><span data-stu-id="376ea-132">These ICEs can be obtained from standard .cub files provided with the SDK.</span></span>

<span data-ttu-id="376ea-133">L'installazione dell'Editor tabella di database Orca o lo strumento di convalida MSIVal2 fornisce i file logo. cub, Darice. cub e Mergemod. cub.</span><span class="sxs-lookup"><span data-stu-id="376ea-133">The installation of the database table editor Orca or the validation tool msival2 provides the Logo.cub, Darice.cub, and Mergemod.cub files.</span></span> <span data-ttu-id="376ea-134">Il set di CIEM nel file logo. cub è un subset di quelli nel file Darice. cub.</span><span class="sxs-lookup"><span data-stu-id="376ea-134">The set of ICEs in the Logo.cub file is a subset of those in the Darice.cub file.</span></span> <span data-ttu-id="376ea-135">Se il pacchetto passa la convalida usando Darice. cub, passerà con logo. cub.</span><span class="sxs-lookup"><span data-stu-id="376ea-135">If your package passes validation using Darice.cub, it will pass with Logo.cub.</span></span> <span data-ttu-id="376ea-136">Mergemod. cub contiene un set di CIEM utilizzati per convalidare i moduli unione.</span><span class="sxs-lookup"><span data-stu-id="376ea-136">Mergemod.cub contains a set of ICEs used to validate merge modules.</span></span> <span data-ttu-id="376ea-137">Per ulteriori informazioni, vedere la pagina relativa al [riferimento ghiaccio del modulo merge](merge-module-ice-reference.md).</span><span class="sxs-lookup"><span data-stu-id="376ea-137">For more information, see [Merge Module ICE Reference](merge-module-ice-reference.md).</span></span>

<span data-ttu-id="376ea-138">**Per convalidare un pacchetto di installazione**</span><span class="sxs-lookup"><span data-stu-id="376ea-138">**To validate an installation package**</span></span>

1.  <span data-ttu-id="376ea-139">Ottenere o creare le azioni personalizzate ICE appropriate.</span><span class="sxs-lookup"><span data-stu-id="376ea-139">Obtain or author the appropriate ICE custom actions.</span></span> <span data-ttu-id="376ea-140">Potrebbe essere possibile usare uno o più dei ghiacci esistenti descritti nella Guida di riferimento a [Ice](ice-reference.md).</span><span class="sxs-lookup"><span data-stu-id="376ea-140">You may be able to use one or more of the existing ICEs described in the [ICE Reference](ice-reference.md).</span></span> <span data-ttu-id="376ea-141">Se la convalida richiede un ghiaccio non ancora presente nell'elenco, è possibile creare un nuovo ghiaccio come descritto in [creazione di un ghiaccio](building-an-ice.md).</span><span class="sxs-lookup"><span data-stu-id="376ea-141">If your validation requires an ICE not yet in this list, you can create a new ICE as described in [Building an ICE](building-an-ice.md).</span></span>
2.  <span data-ttu-id="376ea-142">Preparare un database di ghiaccio contenente tutte le azioni personalizzate del ghiaccio.</span><span class="sxs-lookup"><span data-stu-id="376ea-142">Prepare an ICE Database containing all the ICE custom actions.</span></span> <span data-ttu-id="376ea-143">Per informazioni sulla preparazione di un file con estensione cub, vedere la sezione [creazione di un database di Ice](building-an-ice-database.md) .</span><span class="sxs-lookup"><span data-stu-id="376ea-143">See the section [Building An ICE Database](building-an-ice-database.md) for information about preparing a .cub file.</span></span>
3.  <span data-ttu-id="376ea-144">Fornire il file con estensione cub e il file con estensione msi a uno strumento di convalida del pacchetto, ad esempio [Orca.exe](orca-exe.md) o [Msival2.exe](msival2-exe.md).</span><span class="sxs-lookup"><span data-stu-id="376ea-144">Provide the .cub file and the .msi file to a package validation tool such as [Orca.exe](orca-exe.md) or [Msival2.exe](msival2-exe.md).</span></span>

<span data-ttu-id="376ea-145">Si noti che i moduli merge devono essere convalidati come descritto in [convalida di moduli merge](validating-merge-modules.md).</span><span class="sxs-lookup"><span data-stu-id="376ea-145">Note that merge modules should be validated as described in [Validating Merge Modules](validating-merge-modules.md).</span></span>

 

 



