---
description: L'azione MigrateFeatureStates viene utilizzata durante l'aggiornamento e quando si installa una nuova applicazione in un'applicazione correlata.
ms.assetid: 3f53c555-02a9-4249-9f1a-98cd655fc79f
title: Azione MigrateFeatureStates
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a8e76edb5fa13506291cc85ebcf8c8824e4ee28e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106315899"
---
# <a name="migratefeaturestates-action"></a><span data-ttu-id="7055a-103">Azione MigrateFeatureStates</span><span class="sxs-lookup"><span data-stu-id="7055a-103">MigrateFeatureStates Action</span></span>

<span data-ttu-id="7055a-104">L'azione MigrateFeatureStates viene utilizzata durante l'aggiornamento e quando si installa una nuova applicazione in un'applicazione correlata.</span><span class="sxs-lookup"><span data-stu-id="7055a-104">The MigrateFeatureStates action is used during upgrading and when installing a new application over a related application.</span></span> <span data-ttu-id="7055a-105">MigrateFeatureStates legge gli Stati delle funzionalità nell'applicazione esistente e quindi imposta gli Stati della funzionalità nell'installazione in sospeso.</span><span class="sxs-lookup"><span data-stu-id="7055a-105">MigrateFeatureStates reads the feature states in the existing application and then sets these feature states in the pending installation.</span></span> <span data-ttu-id="7055a-106">Il metodo è utile solo quando la nuova struttura ad albero delle funzionalità non è stata modificata in modo sostanziale rispetto all'originale.</span><span class="sxs-lookup"><span data-stu-id="7055a-106">The method is only useful when the new feature tree has not greatly changed from the original.</span></span>

<span data-ttu-id="7055a-107">L'azione MigrateFeatureStates viene eseguita solo la prima volta che viene installato il prodotto.</span><span class="sxs-lookup"><span data-stu-id="7055a-107">The MigrateFeatureStates action only runs the first time the product is installed.</span></span> <span data-ttu-id="7055a-108">L'azione MigrateFeatureStates non viene eseguita in modalità manutenzione o disinstallazione.</span><span class="sxs-lookup"><span data-stu-id="7055a-108">The MigrateFeatureStates action does not run during maintenance mode or uninstallation.</span></span>

<span data-ttu-id="7055a-109">L'azione MigrateFeatureStates esegue ogni record della [tabella di aggiornamento](upgrade-table.md) in sequenza e confronta il codice di aggiornamento, la versione del prodotto e la lingua di ogni riga con tutti i prodotti installati nel sistema.</span><span class="sxs-lookup"><span data-stu-id="7055a-109">MigrateFeatureStates action runs through each record of the [Upgrade table](upgrade-table.md) in sequence and compares the upgrade code, product version, and language in each row to all products installed on the system.</span></span> <span data-ttu-id="7055a-110">Se l'azione MigrateFeatureStates rileva una corrispondenza e se il flag di bit msidbUpgradeAttributesMigrateFeatures è impostato nella colonna attributi della tabella di aggiornamento, il programma di installazione esegue una query sugli Stati della funzionalità esistente per il prodotto e imposta questi stati per le stesse funzionalità della nuova applicazione.</span><span class="sxs-lookup"><span data-stu-id="7055a-110">If MigrateFeatureStates action detects a correspondence, and if the msidbUpgradeAttributesMigrateFeatures bit flag is set in the Attributes column of the Upgrade table, the installer queries the existing feature states for the product and sets these states for the same features in the new application.</span></span> <span data-ttu-id="7055a-111">L'azione esegue solo la migrazione degli Stati della funzionalità se la proprietà [**preselezionata**](preselected.md) non è impostata.</span><span class="sxs-lookup"><span data-stu-id="7055a-111">The action only migrates the feature states if the [**Preselected**](preselected.md) property is not set.</span></span>

## <a name="sequence-restrictions"></a><span data-ttu-id="7055a-112">Restrizioni sequenza</span><span class="sxs-lookup"><span data-stu-id="7055a-112">Sequence Restrictions</span></span>

<span data-ttu-id="7055a-113">L'azione MigrateFeatureStates dovrebbe essere immediatamente successiva all' [azione CostFinalize secondo](costfinalize-action.md).</span><span class="sxs-lookup"><span data-stu-id="7055a-113">The MigrateFeatureStates action should come immediately after the [CostFinalize action](costfinalize-action.md).</span></span> <span data-ttu-id="7055a-114">MigrateFeatureStates deve essere sequenziato sia nella tabella [InstallUISequence](installuisequence-table.md) che nella [tabella InstallExecuteSequence](installexecutesequence-table.md).</span><span class="sxs-lookup"><span data-stu-id="7055a-114">MigrateFeatureStates must be sequenced in both the [InstallUISequence table](installuisequence-table.md) and the [InstallExecuteSequence table](installexecutesequence-table.md).</span></span> <span data-ttu-id="7055a-115">Il programma di installazione impedisce l'esecuzione di MigrateFeatureStates in InstallExecuteSequence se l'azione è già stata eseguita in InstallUISequence.</span><span class="sxs-lookup"><span data-stu-id="7055a-115">The installer prevents MigrateFeatureStates from running in InstallExecuteSequence if the action has already run in InstallUISequence.</span></span>

## <a name="actiondata-messages"></a><span data-ttu-id="7055a-116">Messaggi ActionData</span><span class="sxs-lookup"><span data-stu-id="7055a-116">ActionData Messages</span></span>

<span data-ttu-id="7055a-117">MigrateFeatureSettings Invia un messaggio di dati di azione per ogni prodotto.</span><span class="sxs-lookup"><span data-stu-id="7055a-117">MigrateFeatureSettings sends an action data message for each product.</span></span>

## <a name="remarks"></a><span data-ttu-id="7055a-118">Commenti</span><span class="sxs-lookup"><span data-stu-id="7055a-118">Remarks</span></span>

<span data-ttu-id="7055a-119">Se più di un prodotto installato condivide una funzionalità, lo stato di installazione di tale funzionalità può essere diverso tra i prodotti.</span><span class="sxs-lookup"><span data-stu-id="7055a-119">If more than one installed product shares a feature, the installation state for that feature may differ between products.</span></span> <span data-ttu-id="7055a-120">L'azione MigrateFeatureState usa l'ordine di precedenza seguente quando si esegue la migrazione degli Stati di installazione della funzionalità: Esegui localmente, Esegui da origine, annunciata e disinstallata.</span><span class="sxs-lookup"><span data-stu-id="7055a-120">MigrateFeatureState action uses the following order of precedence when migrating feature installation states: run local, run from source, advertised, and uninstalled.</span></span> <span data-ttu-id="7055a-121">Ad esempio, il prodotto installato A può avere la funzionalità Y come INSTALLSTATE \_ locale e il prodotto B installato potrebbe avere la funzionalità y come InstallState \_ assente.</span><span class="sxs-lookup"><span data-stu-id="7055a-121">For example, installed product A may have feature Y as INSTALLSTATE\_LOCAL and installed product B may have feature Y as INSTALLSTATE\_ABSENT.</span></span> <span data-ttu-id="7055a-122">Se un aggiornamento installa il prodotto C ed esegue la migrazione dello stato di installazione della funzionalità Y, MigrateFeatureState imposta lo stato di installazione della funzionalità Y nel prodotto C su INSTALLSTATE \_ locale.</span><span class="sxs-lookup"><span data-stu-id="7055a-122">If an upgrade installs product C and migrates the installation state of feature Y, MigrateFeatureState sets the installation state of feature Y in product C to INSTALLSTATE\_LOCAL.</span></span>

<span data-ttu-id="7055a-123">Per altre informazioni su come usare l'azione MigrateFeatureStates per gli aggiornamenti del prodotto, vedere [preparazione di un'applicazione per aggiornamenti principali futuri](preparing-an-application-for-future-major-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="7055a-123">For more information about how to use the MigrateFeatureStates action for product upgrades, see [Preparing an Application for Future Major Upgrades](preparing-an-application-for-future-major-upgrades.md).</span></span>

 

 



