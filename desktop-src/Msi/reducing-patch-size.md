---
description: A partire da Windows Installer versione 3,0, gli autori delle patch possono usare la baseline del prodotto memorizzata nella cache dal programma di installazione per semplificare il servizio di applicazioni con patch Delta più piccole.
ms.assetid: ab5b193d-79ce-4ed4-af53-89a4197197c1
title: Riduzione delle dimensioni delle patch
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4fa365e831ab8685073347dc254bac58269135f1
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106311717"
---
# <a name="reducing-patch-size"></a><span data-ttu-id="a0eed-103">Riduzione delle dimensioni delle patch</span><span class="sxs-lookup"><span data-stu-id="a0eed-103">Reducing Patch Size</span></span>

<span data-ttu-id="a0eed-104">A partire da Windows Installer versione 3,0, gli autori delle patch possono usare la baseline del prodotto memorizzata nella cache dal programma di installazione per semplificare il servizio di applicazioni con patch Delta più piccole.</span><span class="sxs-lookup"><span data-stu-id="a0eed-104">Beginning with Windows Installer version 3.0, patch authors can use the product baseline cached by the installer to more easily service applications with smaller delta patches.</span></span> <span data-ttu-id="a0eed-105">In molti casi, una [*patch Delta*](d-gly.md) che fornisce informazioni sul servizio a un'applicazione può essere notevolmente più piccola rispetto a una patch di file completo o a un pacchetto di installazione che fornisce le stesse informazioni.</span><span class="sxs-lookup"><span data-stu-id="a0eed-105">In many cases, a [*delta patch*](d-gly.md) that delivers servicing information to an application can be significantly smaller than a full-file patch or installation package that delivers the same information.</span></span>

<span data-ttu-id="a0eed-106">**Windows Installer 2,0:** Non supportato.</span><span class="sxs-lookup"><span data-stu-id="a0eed-106">**Windows Installer 2.0:** Not supported.</span></span> <span data-ttu-id="a0eed-107">A partire da Windows Installer 3,0, il programma di installazione salva in modo selettivo le informazioni di base sui file quando vengono aggiornate.</span><span class="sxs-lookup"><span data-stu-id="a0eed-107">Beginning with Windows Installer 3.0, the installer selectively saves baseline information about files when they are updated.</span></span>

<span data-ttu-id="a0eed-108">In Windows Installer sono disponibili tre metodi per l'aggiornamento e la manutenzione di applicazioni: [piccoli aggiornamenti](small-updates.md), aggiornamenti [secondari](minor-upgrades.md)e [aggiornamenti principali](major-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="a0eed-108">Windows Installer provides three methods for updating and servicing applications: [small updates](small-updates.md), [minor upgrades](minor-upgrades.md), and [major upgrades](major-upgrades.md).</span></span> <span data-ttu-id="a0eed-109">Un aggiornamento di piccole dimensioni è noto anche come aggiornamento QFE (Quick Fix Engineering) e un aggiornamento secondario viene definito anche aggiornamento di Service Pack (SP).</span><span class="sxs-lookup"><span data-stu-id="a0eed-109">A small update is also referred to as a quick fix engineering (QFE) update, and a minor upgrade is also referred to as a service pack (SP) update.</span></span> <span data-ttu-id="a0eed-110">Un tipico aggiornamento principale rimuove un'applicazione precedente e installa una nuova applicazione.</span><span class="sxs-lookup"><span data-stu-id="a0eed-110">A typical major upgrade removes a previous application and installs a new application.</span></span> <span data-ttu-id="a0eed-111">Windows Installer possibile recapitare le informazioni di manutenzione alle applicazioni come [pacchetto di installazione](installation-package.md) (file con estensione msi) o come [pacchetto di patch](patch-packages.md) (file con estensione msp).</span><span class="sxs-lookup"><span data-stu-id="a0eed-111">Windows Installer can deliver servicing information to applications as an [installation package](installation-package.md) (.msi file) or as a [patch package](patch-packages.md) (.msp file).</span></span>

<span data-ttu-id="a0eed-112">Un pacchetto Windows Installer patch che fornisce informazioni di manutenzione per un aggiornamento di piccole dimensioni o un aggiornamento secondario è in genere molto più piccolo del pacchetto di installazione equivalente che fornisce le stesse informazioni di manutenzione.</span><span class="sxs-lookup"><span data-stu-id="a0eed-112">A Windows Installer patch package that delivers servicing information for a small update or minor upgrade is generally much smaller than the equivalent installation package that delivers the same servicing information.</span></span> <span data-ttu-id="a0eed-113">È consigliabile usare i pacchetti di patch per la distribuzione di aggiornamenti piccoli e secondari.</span><span class="sxs-lookup"><span data-stu-id="a0eed-113">It is recommended that patch packages be used for the distribution of small and minor upgrades.</span></span> <span data-ttu-id="a0eed-114">Per la distribuzione di un aggiornamento principale è consigliabile usare un pacchetto di installazione.</span><span class="sxs-lookup"><span data-stu-id="a0eed-114">It is recommended that an installation package be used for the distribution of a major upgrade.</span></span>

<span data-ttu-id="a0eed-115">Windows Installer patch (file con estensione msp) possono essere generate da file completi o da differenze di file, denominate anche Delta di file. Una patch Windows Installer generata da Delta di file può essere molto più piccola della patch di file completo equivalente.</span><span class="sxs-lookup"><span data-stu-id="a0eed-115">Windows Installer patches (.msp files) can be generated from either full files or from file differences (also called file deltas.) A Windows Installer patch generated from file deltas can be much smaller than the equivalent full-file patch.</span></span> <span data-ttu-id="a0eed-116">Tutte le versioni del Windows Installer possono usare sia patch di file completi che patch Delta.</span><span class="sxs-lookup"><span data-stu-id="a0eed-116">All versions of the Windows Installer can use both full-file patches or delta patches.</span></span>

<span data-ttu-id="a0eed-117">A partire da Windows Installer versione 3,0, il programma di installazione salva in modo selettivo le informazioni di base sui file quando vengono aggiornate.</span><span class="sxs-lookup"><span data-stu-id="a0eed-117">Beginning with Windows Installer version 3.0, the installer selectively saves baseline information about files when they are updated.</span></span> <span data-ttu-id="a0eed-118">Le informazioni sull'applicazione di base originale (versione RTM) e l'aggiornamento secondario più recente (Service Pack) vengono salvate in un percorso privato quando l'applicazione viene installata o riceve un aggiornamento secondario.</span><span class="sxs-lookup"><span data-stu-id="a0eed-118">Information about the original base application (the RTM version) and the most recent minor upgrade (service pack) are saved in a private location when the application is installed or receives a minor upgrade.</span></span>

<span data-ttu-id="a0eed-119">Il programma di installazione esegue le operazioni seguenti per ridurre al minimo le dimensioni della cache di base:</span><span class="sxs-lookup"><span data-stu-id="a0eed-119">The installer does the following to minimize the size of the baseline cache:</span></span>

-   <span data-ttu-id="a0eed-120">Non vengono mantenute più di due linee di base per ogni applicazione: una linea di base del file come originariamente rilasciata (RTM) e una linea di base del file nell'aggiornamento secondario più recente (Service Pack).</span><span class="sxs-lookup"><span data-stu-id="a0eed-120">No more than two baselines are maintained for each application: a baseline of the file as originally released (RTM) and a baseline of the file at the most recent minor upgrade (service pack.)</span></span>
-   <span data-ttu-id="a0eed-121">Un file non viene aggiunto alla cache finché non viene patchato.</span><span class="sxs-lookup"><span data-stu-id="a0eed-121">A file is not added to the cache until it is patched.</span></span> <span data-ttu-id="a0eed-122">La cache di base è copy-on-Write.</span><span class="sxs-lookup"><span data-stu-id="a0eed-122">The baseline cache is copy-on-write.</span></span>
-   <span data-ttu-id="a0eed-123">Se l'applicazione non è mai stata aggiornata, non sono presenti file nella cache di base.</span><span class="sxs-lookup"><span data-stu-id="a0eed-123">If the application has never been updated, there are no files in the baseline cache.</span></span>
-   <span data-ttu-id="a0eed-124">Quando l'ultima manutenzione dell'applicazione era un aggiornamento secondario (Service Pack), l'applicazione è a livello di base e al massimo due copie di un file possono essere presenti nel computer.</span><span class="sxs-lookup"><span data-stu-id="a0eed-124">When the application's last servicing was a minor upgrade (service pack) the application is at a baseline level and at most two copies of a file can be present on the computer.</span></span> <span data-ttu-id="a0eed-125">Una copia del file si trova nella directory di destinazione dell'installazione.</span><span class="sxs-lookup"><span data-stu-id="a0eed-125">One copy of the file is in the target directory of the installation.</span></span> <span data-ttu-id="a0eed-126">L'altra copia può trovarsi nella cache Baseline RTM.</span><span class="sxs-lookup"><span data-stu-id="a0eed-126">The other copy can be in the RTM baseline cache.</span></span>
-   <span data-ttu-id="a0eed-127">Quando l'ultima manutenzione dell'applicazione era un piccolo aggiornamento (QFE), l'applicazione non si trova a un livello di base e al massimo tre copie di un file possono essere presenti nel computer.</span><span class="sxs-lookup"><span data-stu-id="a0eed-127">When the application's last servicing was a small update (QFE) the application is not at a baseline level and at most three copies of a file can be present on the computer.</span></span> <span data-ttu-id="a0eed-128">La prima copia del file si trova nella directory di destinazione dell'installazione.</span><span class="sxs-lookup"><span data-stu-id="a0eed-128">The first copy of the file is in the target directory of the installation.</span></span> <span data-ttu-id="a0eed-129">La seconda copia del file si trova nella cache di base RTM.</span><span class="sxs-lookup"><span data-stu-id="a0eed-129">The second copy of the file is in the RTM baseline cache.</span></span> <span data-ttu-id="a0eed-130">L'ultima copia del file si trova nella cache di base più recente.</span><span class="sxs-lookup"><span data-stu-id="a0eed-130">The last copy of the file is in the most recent baseline cache.</span></span>
-   <span data-ttu-id="a0eed-131">La cache di base dell'applicazione viene rimossa quando il prodotto viene disinstallato.</span><span class="sxs-lookup"><span data-stu-id="a0eed-131">The application's baseline cache is removed when the product is uninstalled.</span></span>

<span data-ttu-id="a0eed-132">A partire da Windows Installer versione 3,0, il programma di installazione può usare la cache di base quando le patch vengono applicate all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a0eed-132">Beginning with Windows Installer version 3.0, the installer can use the baseline cache when patches are applied to the application.</span></span> <span data-ttu-id="a0eed-133">È possibile usare le informazioni di base per applicare una patch Delta o per ripristinare un file a una versione precedente durante la disinstallazione di una patch.</span><span class="sxs-lookup"><span data-stu-id="a0eed-133">The baseline information can be used to apply a delta patch or to revert a file to a previous version during a patch uninstall.</span></span> <span data-ttu-id="a0eed-134">In questo modo gli autori delle patch possono trarre vantaggio dalle patch Delta più piccole.</span><span class="sxs-lookup"><span data-stu-id="a0eed-134">This can enable patch authors to benefit from smaller delta patches.</span></span> <span data-ttu-id="a0eed-135">Se il programma di installazione rileva che non è possibile applicare la patch Delta al file di destinazione, il programma di installazione può tentare di usare un file salvato nella cache di base come punto di partenza.</span><span class="sxs-lookup"><span data-stu-id="a0eed-135">If the installer finds that the delta patch cannot be applied to the target file, the installer can attempt to use a file saved in the baseline cache as a starting point.</span></span> <span data-ttu-id="a0eed-136">Il programma di installazione ricorre solo alla richiesta dell'origine di installazione originale dopo aver provato tutte le possibilità nella cache.</span><span class="sxs-lookup"><span data-stu-id="a0eed-136">The installer only resorts to requesting the original installation source after trying all the possibilities in the cache.</span></span>

<span data-ttu-id="a0eed-137">L'adesione alle linee guida seguenti può aiutare gli autori di patch a usare Patch Windows Installer versione 3,0 e la cache di base per creare patch Delta più piccole:</span><span class="sxs-lookup"><span data-stu-id="a0eed-137">Adherence to the following guidelines can help patch authors use Windows Installer version 3.0 patches and the baseline cache to create smaller delta patches:</span></span>

-   <span data-ttu-id="a0eed-138">Creare patch che includano la [tabella MsiPatchSequence](msipatchsequence-table.md).</span><span class="sxs-lookup"><span data-stu-id="a0eed-138">Author patches that include the [MsiPatchSequence table](msipatchsequence-table.md).</span></span> <span data-ttu-id="a0eed-139">Questa tabella è necessaria per usare la cache Baseline ed è disponibile a partire dalla versione Windows Installer 3,0.</span><span class="sxs-lookup"><span data-stu-id="a0eed-139">This table is required to use the baseline cache and is available beginning with Windows Installer version 3.0.</span></span>
-   <span data-ttu-id="a0eed-140">Non impostare criteri che impediscono la memorizzazione nella cache di base.</span><span class="sxs-lookup"><span data-stu-id="a0eed-140">Do not set policy that prevents baseline caching.</span></span> <span data-ttu-id="a0eed-141">Il valore del criterio [MaxPatchCacheSize](maxpatchcachesize.md) specifica la percentuale massima di spazio su disco che è possibile utilizzare.</span><span class="sxs-lookup"><span data-stu-id="a0eed-141">The value of the [MaxPatchCacheSize](maxpatchcachesize.md) policy specifies the maximum percentage of disk space that can be used.</span></span> <span data-ttu-id="a0eed-142">Se il criterio MaxPatchCacheSize è impostato su 0, non viene salvato alcun file aggiuntivo nella cache di base.</span><span class="sxs-lookup"><span data-stu-id="a0eed-142">If the MaxPatchCacheSize policy is set to 0, no additional files are saved in the baseline cache.</span></span> <span data-ttu-id="a0eed-143">Se il criterio non è impostato, il valore predefinito è che è possibile utilizzare un massimo del 10% dello spazio su disco.</span><span class="sxs-lookup"><span data-stu-id="a0eed-143">If the policy is not set, the default is that a maximum of 10% of the disk space can be used.</span></span> <span data-ttu-id="a0eed-144">Se la dimensione totale della cache raggiunge la percentuale massima di spazio su disco, non viene salvato alcun file aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="a0eed-144">If the total size of the cache reaches the maximum percentage of disk space, no additional files are saved.</span></span> <span data-ttu-id="a0eed-145">Il criterio non influisce sui file che sono già stati salvati.</span><span class="sxs-lookup"><span data-stu-id="a0eed-145">The policy does not affect files that have already been saved.</span></span> <span data-ttu-id="a0eed-146">Anche quando la memorizzazione nella cache è disabilitata, il programma di installazione può usare le cache di base del prodotto esistenti.</span><span class="sxs-lookup"><span data-stu-id="a0eed-146">Even when caching is disabled, the installer can use existing product baseline caches.</span></span>
-   <span data-ttu-id="a0eed-147">Se la prima patch applicata include la [tabella MsiPatchSequence](msipatchsequence-table.md), la memorizzazione nella cache è abilitata per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a0eed-147">If the first patch applied includes the [MsiPatchSequence table](msipatchsequence-table.md), caching is enabled for the application.</span></span>
-   <span data-ttu-id="a0eed-148">Se una patch nella transazione di manutenzione non include la [tabella MsiPatchSequence](msipatchsequence-table.md), la memorizzazione nella cache è abilitata per l'applicazione solo se una patch di aggiornamento secondaria (Service Pack) che include la tabella MsiPatchSequence è stata applicata correttamente al prodotto.</span><span class="sxs-lookup"><span data-stu-id="a0eed-148">If any patch in the servicing transaction does not include the [MsiPatchSequence table](msipatchsequence-table.md), caching is enabled for the application only if a minor upgrade patch (service pack) that includes the MsiPatchSequence table is successfully applied to the product.</span></span>
-   <span data-ttu-id="a0eed-149">Generare il pacchetto di patch usando gli strumenti di creazione della patch, ad esempio [Msimsp.exe](msimsp-exe.md) e [PATCHWIZ.DLL](patchwiz-dll.md).</span><span class="sxs-lookup"><span data-stu-id="a0eed-149">Generate the patch package using patch creation tools such as [Msimsp.exe](msimsp-exe.md) and [PATCHWIZ.DLL](patchwiz-dll.md).</span></span>
-   <span data-ttu-id="a0eed-150">Usare sempre le patch per la versione RTM dell'applicazione o per una versione di aggiornamento secondaria (Service Pack) dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a0eed-150">Always target patches for the RTM version of the application or a minor upgrade (service pack) version of the application.</span></span> <span data-ttu-id="a0eed-151">Le destinazioni specificate nella [tabella TargetImages](targetimages-table-patchwiz-dll-.md) del file PCP (Patch Creation Properties) devono essere punti di controllo del prodotto definiti dai primi tre campi della proprietà [**ProductVersion**](productversion.md) .</span><span class="sxs-lookup"><span data-stu-id="a0eed-151">The targets specified in the [TargetImages table](targetimages-table-patchwiz-dll-.md) of the Patch Creation Properties (PCP) file should be product check points defined by the first three fields of the [**ProductVersion**](productversion.md) property.</span></span>
-   <span data-ttu-id="a0eed-152">Non utilizzare mai patch per le immagini di aggiornamento di piccole dimensioni.</span><span class="sxs-lookup"><span data-stu-id="a0eed-152">Never target patches at small update images.</span></span> <span data-ttu-id="a0eed-153">Le destinazioni per la compilazione della patch non devono includere le immagini di aggiornamento di piccole dimensioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="a0eed-153">The targets for building the patch should not include previous small update upgrade images.</span></span>

 

 



