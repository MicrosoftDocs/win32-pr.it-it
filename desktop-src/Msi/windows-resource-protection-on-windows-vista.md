---
description: Windows Installer rispetta Protezione risorse di Windows (WRP) quando si installano i file di sistema essenziali, le cartelle e le informazioni del registro di sistema in Windows Server 2008 e versioni successive e Windows Vista e versioni successive.
ms.assetid: 38865ee1-22ef-430b-99ce-1c6983c3b51f
title: Utilizzo di Windows Installer e Protezione risorse di Windows
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 72808184ff11b29bfeb02dda576e9393e34189fd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103967730"
---
# <a name="using-windows-installer-and-windows-resource-protection"></a><span data-ttu-id="bb4cd-103">Utilizzo di Windows Installer e Protezione risorse di Windows</span><span class="sxs-lookup"><span data-stu-id="bb4cd-103">Using Windows Installer and Windows Resource Protection</span></span>

<span data-ttu-id="bb4cd-104">Windows Installer rispetta Protezione risorse di Windows (WRP) quando si installano i file di sistema essenziali, le cartelle e le informazioni del registro di sistema in Windows Server 2008 e versioni successive e Windows Vista e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-104">Windows Installer adheres to Windows Resource Protection (WRP) when installing essential system files, folders, and registry information in Windows Server 2008 and later and Windows Vista and later.</span></span>

<span data-ttu-id="bb4cd-105">WRP in Windows Server 2008 e Windows Vista sostituisce protezione file Windows (WFP) in Windows Server 2003, Windows XP e Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-105">WRP in Windows Server 2008 and Windows Vista replaces Windows File Protection (WFP) in Windows Server 2003, Windows XP, and Windows 2000.</span></span> <span data-ttu-id="bb4cd-106">Windows Installer gli sviluppatori devono tenere presenti le seguenti modifiche nel modo in cui il programma di installazione gestisce le risorse protette in Windows Server 2008 e versioni successive e Windows Vista e versioni successive:</span><span class="sxs-lookup"><span data-stu-id="bb4cd-106">Windows Installer developers should note the following changes in how the installer handles protected resources in Windows Server 2008 and later and Windows Vista and later:</span></span>

-   <span data-ttu-id="bb4cd-107">Quando è in esecuzione in Windows Server 2008 e versioni successive o Windows Vista e versioni successive, il Windows Installer ignora l'installazione di tutti i file protetti da WRP, il programma di installazione immette un avviso nel file di log e continua con il resto dell'installazione senza errori.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-107">When running on Windows Server 2008 and later or Windows Vista and later, the Windows Installer skips the installation of any file that is protected by WRP, the installer enters a warning in the log file, and continues with the remainder of the installation without an error.</span></span> <span data-ttu-id="bb4cd-108">In Windows Server 2003, Windows XP e Windows 2000, quando il Windows Installer ha rilevato un file protetto da WFP, il programma di installazione richiederà l'installazione del file da parte di Pam.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-108">In Windows Server 2003, Windows XP, and Windows 2000, when the Windows Installer encountered a WFP-protected file, the installer would request that WFP install the file.</span></span>
-   <span data-ttu-id="bb4cd-109">WRP in Windows Server 2008 e versioni successive o Windows Vista e versioni successive possono proteggere le chiavi del registro di sistema oltre ai file.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-109">WRP on Windows Server 2008 and later or Windows Vista and later can protect registry keys in addition to files.</span></span> <span data-ttu-id="bb4cd-110">Se il Windows Installer rileva una chiave del registro di sistema protetta da WRP, il programma di installazione ignora l'installazione della chiave del registro di sistema, il programma di installazione immette un avviso nel file di log e continua con il resto dell'installazione senza errori.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-110">If the Windows Installer encounters a WRP-protected registry key, the installer skips the installation of that registry key, the installer enters a warning in the log file, and continues with the remainder of the installation without an error.</span></span>
-   <span data-ttu-id="bb4cd-111">Si noti che se un componente Windows Installer contiene una chiave del registro di sistema o un file protetto da WRP, è necessario usare questa risorsa come percorso di chiave per il componente.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-111">Note that if a Windows Installer component contains a file or registry key that is protected by WRP, this resource must be used as the KeyPath for the component.</span></span> <span data-ttu-id="bb4cd-112">In questo caso, Windows Installer non installa, aggiorna o rimuove il componente.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-112">In this case, Windows Installer does not install, update, or remove the component.</span></span> <span data-ttu-id="bb4cd-113">Non includere risorse protette in un pacchetto di installazione.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-113">You should not include any protected resources in an installation package.</span></span> <span data-ttu-id="bb4cd-114">È invece consigliabile usare i [meccanismi di sostituzione delle risorse supportati](../wfp/supported-file-replacement-mechanisms.md) per [Protezione risorse di Windows](../wfp/windows-resource-protection-portal.md).</span><span class="sxs-lookup"><span data-stu-id="bb4cd-114">Instead, you should use the [supported resource replacement mechanisms](../wfp/supported-file-replacement-mechanisms.md) for [Windows Resource Protection](../wfp/windows-resource-protection-portal.md).</span></span>

<span data-ttu-id="bb4cd-115">Per ulteriori informazioni su WRP, vedere [Protezione risorse di Windows](../wfp/windows-resource-protection-portal.md) e informazioni fornite in [Microsoft TechNet](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc709691(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="bb4cd-115">For more information about WRP, see [Windows Resource Protection](../wfp/windows-resource-protection-portal.md) and information that is provided on [Microsoft Technet](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc709691(v=ws.10)).</span></span>

## <a name="wfp-for-windows-server-2003-and-windows-xp2000"></a><span data-ttu-id="bb4cd-116">WFP per Windows Server 2003 e Windows XP/2000</span><span class="sxs-lookup"><span data-stu-id="bb4cd-116">WFP for Windows Server 2003 and Windows XP/2000</span></span>

<span data-ttu-id="bb4cd-117">Windows Installer rispetta la protezione dei file di Windows (WFP) quando si installano i file di sistema essenziali in Windows Server 2003, Windows XP e Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-117">Windows Installer adheres to Windows File Protection (WFP) when installing essential system files on Windows Server 2003, Windows XP and Windows 2000.</span></span> <span data-ttu-id="bb4cd-118">Se un file di sistema protetto viene modificato da un'installazione automatica di un'applicazione, Pam ripristina il file nella versione verificata.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-118">If a protected system file is modified by an unattended installation of an application, WFP restores the file to the verified file version.</span></span>

<span data-ttu-id="bb4cd-119">Windows Installer non tenta mai di installare o sostituire un file protetto.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-119">Windows Installer never attempts to install or replace a protected file.</span></span> <span data-ttu-id="bb4cd-120">Quando l'azione [InstallFiles](installfiles-action.md) o qualsiasi altra azione pianificata prima di InstallFiles tenta di installare un file protetto in windows Server 2003, Windows XP o Windows 2000, il programma di installazione chiama WFP con una richiesta di installazione o sostituzione del file protetto.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-120">When the [InstallFiles](installfiles-action.md) action or any other action scheduled before InstallFiles attempts to install a file protected on Windows Server 2003, Windows XP or Windows 2000, the installer calls WFP with a request to install or replace the protected file.</span></span> <span data-ttu-id="bb4cd-121">Il programma di installazione richiede l'installazione del file da WFP immediatamente dopo l'esecuzione dell'azione InstallFiles.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-121">The installer requests the file installation from WFP immediately after executing the InstallFiles action.</span></span> <span data-ttu-id="bb4cd-122">Pam installa o sostituisce il file nel sistema dell'utente con una versione memorizzata nella cache del file protetto.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-122">WFP installs or replaces the file on the user's system with a cached version of the protected file.</span></span> <span data-ttu-id="bb4cd-123">Si noti che questo non garantisce che la versione del file installata dalla cache sia la versione richiesta dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-123">Note that this does not guarantee that the version of the file installed from the cache is the version required by the application.</span></span> <span data-ttu-id="bb4cd-124">Dopo l'installazione del file da parte di WFP, il programma di installazione determina se questa versione corrisponde alla versione nel pacchetto.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-124">After WFP has installed the file, the installer determines whether this version matches the version in the package.</span></span> <span data-ttu-id="bb4cd-125">Se la versione del file nel pacchetto è superiore alla versione installata, il programma di installazione informa l'utente che non è possibile aggiornare il sistema e che potrebbe essere necessario un aggiornamento del sistema operativo per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-125">If the file version in the package is greater than the installed version, the installer informs the user that it cannot update the system and that an update of the operating system may be required for the application.</span></span>

<span data-ttu-id="bb4cd-126">Se una qualsiasi azione sequenziata dopo [InstallFiles](installfiles-action.md) tenta di installare o sostituire un file protetto non è già installato nel sistema, il programma di installazione non è in grado di chiamare WFP per installare il file.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-126">If any action sequenced after [InstallFiles](installfiles-action.md) attempts to install or replace a protected file not already installed on the system, the installer cannot call WFP to install the file.</span></span> <span data-ttu-id="bb4cd-127">In questo caso, il programma di installazione informa l'utente che non è possibile aggiornare il sistema e che potrebbe essere necessario un aggiornamento del sistema operativo per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-127">In this case, the installer informs the user that it cannot update the system and that an update of the operating system may be required for the application.</span></span>

<span data-ttu-id="bb4cd-128">Il programma di installazione controlla anche con WFP quando si rimuovono i file e non tenta mai di rimuovere i file di sistema protetti.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-128">The installer also checks with WFP when removing files and never attempts to remove protected system files.</span></span>

## <a name="component-key-files-protected-by-wfp"></a><span data-ttu-id="bb4cd-129">File di chiave del componente protetti da WFP</span><span class="sxs-lookup"><span data-stu-id="bb4cd-129">Component Key Files Protected by WFP</span></span>

<span data-ttu-id="bb4cd-130">Si noti che se un componente Windows Installer contiene un file WFP, questo file deve essere specificato come percorso della chiave per il componente.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-130">Note that if a Windows Installer component contains a WFP file, this file must be specified as the key path for the component.</span></span>

<span data-ttu-id="bb4cd-131">Quando il programma di installazione tenta di installare il file di chiave di un componente in Windows Server 2003, Windows XP o Windows 2000, chiama prima WFP per determinare se il file di chiave è protetto.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-131">When the installer attempts to install a component's key file on Windows Server 2003, Windows XP or Windows 2000, it first calls WFP to determine if the key file is protected.</span></span> <span data-ttu-id="bb4cd-132">Quando il file di chiave di un componente è protetto da WFP e tale file di chiave è già installato, il programma di installazione aggiorna il componente solo se la versione del file di chiave nel pacchetto è superiore alla versione installata.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-132">When the key file of a component is protected by WFP, and that key file is already installed, the installer updates the component only if the version of the key file in the package is greater than the installed version.</span></span> <span data-ttu-id="bb4cd-133">Se il pacchetto di installazione specifica che è installato un componente e il file di chiave del componente non è attualmente installato, a prescindere dal fatto che il file di chiave sia protetto, il programma di installazione installa il componente.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-133">If the installation package specifies that a component be installed, and the key file of the component is not currently installed, then regardless of whether the key file is protected the installer installs the component.</span></span> <span data-ttu-id="bb4cd-134">Quando viene installato un componente con un file di chiave protetto da WFP, questo viene installato in modo permanente e il programma di installazione non rimuove o sostituisce mai il componente.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-134">Once any component having a key file protected by WFP is installed, it is permanently installed, and the installer never removes or replaces the component.</span></span>

## <a name="installation-of-assemblies-by-wfp"></a><span data-ttu-id="bb4cd-135">Installazione degli assembly tramite WFP</span><span class="sxs-lookup"><span data-stu-id="bb4cd-135">Installation of Assemblies by WFP</span></span>

<span data-ttu-id="bb4cd-136">Il WFP per gli assembly è diverso da WFP per i file di sistema.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-136">WFP for assemblies differs from WFP for system files.</span></span>

<span data-ttu-id="bb4cd-137">Pam protegge i file di sistema di Windows Server 2003, Windows XP e Windows 2000 rilevando i tentativi di sostituzione dei file di sistema protetti.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-137">WFP protects Windows Server 2003, Windows XP and Windows 2000 system files by detecting attempts to replace protected system files.</span></span> <span data-ttu-id="bb4cd-138">Questa protezione viene attivata dopo che PAM riceve una notifica di modifica della directory per un file in una directory protetta.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-138">This protection is triggered after WFP receives a directory change notification for a file in a protected directory.</span></span> <span data-ttu-id="bb4cd-139">Quando PAM riceve questa notifica, determina quale file è stato modificato.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-139">When WFP receives this notification, it determines which file has changed.</span></span> <span data-ttu-id="bb4cd-140">Se il file è protetto, PAM cerca la firma del file in un file di catalogo statico per determinare se il nuovo file è la versione corretta.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-140">If the file is protected, WFP looks up the file signature in a static catalog file to determine if the new file is the correct version.</span></span> <span data-ttu-id="bb4cd-141">Se la versione del file non è corretta, il sistema sostituisce il file con la versione corretta dalla cache o dal supporto di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-141">If the file version is not correct, the system replaces the file with the correct version from either the cache or distribution media.</span></span>

<span data-ttu-id="bb4cd-142">Il PAM degli assembly, invece, è dinamico.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-142">In contrast, WFP of assemblies is dynamic.</span></span> <span data-ttu-id="bb4cd-143">Il WFP viene esteso ai file man mano che vengono aggiunti all'Assembly Cache affiancata condivisa.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-143">WFP is extended to files as they are added to the shared side-by-side assembly cache.</span></span> <span data-ttu-id="bb4cd-144">Se un assembly viene danneggiato, Pam chiederà di sostituire il file con il programma di installazione.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-144">If an assembly becomes corrupted, WFP will request that the installer replace the file.</span></span> <span data-ttu-id="bb4cd-145">Windows Installer possibile o non essere in grado di sostituire il file a seconda che il pacchetto di origine sia accessibile o meno.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-145">Windows Installer may or may not be able to replace the file depending on whether the source package is accessible.</span></span> <span data-ttu-id="bb4cd-146">Se il pacchetto di origine non è accessibile, Pam inserisce una finestra di dialogo che informa che non è in grado di ripristinare il file.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-146">If the source package is inaccessible, WFP will put up a dialog box stating that it is unable to restore the file.</span></span>

<span data-ttu-id="bb4cd-147">Si noti che gli assembly side-by-side condivisi non gestiti, installati in% windir% \\ WinSxS, sono protetti da WFP.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-147">Note that unmanaged shared side-by-side assemblies, installed in %windir%\\winsxs, are protected by WFP.</span></span> <span data-ttu-id="bb4cd-148">Gli assembly privati non gestiti, installati nella directory dell'applicazione, non sono protetti da WFP.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-148">Unmanaged private assemblies, installed in the application directory, are not protected by WFP.</span></span> <span data-ttu-id="bb4cd-149">Gli assembly globali gestiti installati nella directory dell'applicazione o nella GAC di% windir% \\ assembly \\ non sono protetti da WFP.</span><span class="sxs-lookup"><span data-stu-id="bb4cd-149">Managed global assemblies installed in the application directory or %windir%\\assembly\\gac are not protected by WFP.</span></span>

## <a name="related-topics"></a><span data-ttu-id="bb4cd-150">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="bb4cd-150">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bb4cd-151">Protezione risorse di Windows</span><span class="sxs-lookup"><span data-stu-id="bb4cd-151">Windows Resource Protection</span></span>](../wfp/windows-resource-protection-portal.md)
</dt> </dl>

 

 
