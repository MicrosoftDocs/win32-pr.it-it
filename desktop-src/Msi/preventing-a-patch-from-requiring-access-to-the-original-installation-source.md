---
description: Non è possibile eliminare tutte le circostanze in cui l'applicazione di una patch potrebbe richiedere l'accesso all'origine dell'installazione originale.
ms.assetid: f7028c55-e4a5-4596-af7a-728c9f4f367e
title: Impedire a una patch di richiedere l'accesso all'origine di installazione originale
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: baee8b261ff0a3f6bb94fb141ee765726ffa2ced
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103881030"
---
# <a name="preventing-a-patch-from-requiring-access-to-the-original-installation-source"></a><span data-ttu-id="535d3-103">Impedire a una patch di richiedere l'accesso all'origine di installazione originale</span><span class="sxs-lookup"><span data-stu-id="535d3-103">Preventing a Patch from Requiring Access to the Original Installation Source</span></span>

<span data-ttu-id="535d3-104">Non è possibile eliminare tutte le circostanze in cui l'applicazione di una patch potrebbe richiedere l'accesso all'origine dell'installazione originale.</span><span class="sxs-lookup"><span data-stu-id="535d3-104">It is not possible to eliminate all circumstances under which the application of a patch may require access to the original installation source.</span></span>

<span data-ttu-id="535d3-105">Attenersi ai punti seguenti per ridurre al minimo la possibilità che la patch richieda l'accesso all'origine originale:</span><span class="sxs-lookup"><span data-stu-id="535d3-105">Adhere to following points to minimize the possibility that your patch will require access to the original source:</span></span>

-   <span data-ttu-id="535d3-106">Utilizzare patch con solo file completi.</span><span class="sxs-lookup"><span data-stu-id="535d3-106">Use whole-file only patches.</span></span> <span data-ttu-id="535d3-107">In questo modo si elimina la necessità di creare patch binarie per tutte le versioni rilasciate in precedenza del file.</span><span class="sxs-lookup"><span data-stu-id="535d3-107">This eliminates the need to create binary patches for all previously released versions of the file.</span></span> <span data-ttu-id="535d3-108">Si noti che le dimensioni dell'intero file sono in genere maggiori delle patch binarie.</span><span class="sxs-lookup"><span data-stu-id="535d3-108">Note that whole file patches are generally larger in size than binary patches.</span></span> <span data-ttu-id="535d3-109">È possibile impostare in modo semplice una patch per l'intero file creando la proprietà IncludeWholeFilesOnly con un valore di 1 (uno) nel file della patch Creation Properties (PCP).</span><span class="sxs-lookup"><span data-stu-id="535d3-109">You can easily set a patch to be a whole file patch by authoring the IncludeWholeFilesOnly property with a value of 1 (one) in the Patch Creation Properties (PCP) file.</span></span>
-   <span data-ttu-id="535d3-110">Assicurarsi che nessuna delle azioni personalizzate acceda al percorso di origine originale.</span><span class="sxs-lookup"><span data-stu-id="535d3-110">Ensure that none of your custom actions access the original source location.</span></span>
-   <span data-ttu-id="535d3-111">Verificare che l'azione ResolveSource sia condizionata in modo che venga eseguita solo quando necessario o in alternativa non è presente.</span><span class="sxs-lookup"><span data-stu-id="535d3-111">Ensure that the ResolveSource action is conditionalized so that it only runs when needed, or alternatively is not present at all.</span></span>
-   <span data-ttu-id="535d3-112">Popolare la [tabella MsiFileHash](msifilehash-table.md) per tutti i file non con versione.</span><span class="sxs-lookup"><span data-stu-id="535d3-112">Populate the [MsiFileHash Table](msifilehash-table.md) for all unversioned files.</span></span> <span data-ttu-id="535d3-113">Lo strumento Windows Installer SDK Msifiler.exe consente di eseguire facilmente questa operazione.</span><span class="sxs-lookup"><span data-stu-id="535d3-113">The Windows Installer SDK tool, Msifiler.exe, can easily do this for you.</span></span>
-   <span data-ttu-id="535d3-114">Verificare che tutti i file dispongano delle informazioni corrette sulla versione e sulla lingua.</span><span class="sxs-lookup"><span data-stu-id="535d3-114">Ensure that all files have the correct version and language information.</span></span> <span data-ttu-id="535d3-115">Lo strumento Windows Installer SDK Msifiler.exe consente di eseguire facilmente questa operazione.</span><span class="sxs-lookup"><span data-stu-id="535d3-115">The Windows Installer SDK tool, Msifiler.exe, can easily do this for you.</span></span>

## <a name="source-requirements-when-patching"></a><span data-ttu-id="535d3-116">Requisiti di origine per l'applicazione di patch</span><span class="sxs-lookup"><span data-stu-id="535d3-116">Source Requirements When Patching</span></span>

<span data-ttu-id="535d3-117">L'accesso alle origini di installazione originali potrebbe essere necessario per applicare la patch nei casi seguenti:</span><span class="sxs-lookup"><span data-stu-id="535d3-117">Access to the original installation sources may be required to apply the patch in the following cases:</span></span>

-   <span data-ttu-id="535d3-118">La patch si applica a una funzionalità attualmente eseguita dall'origine.</span><span class="sxs-lookup"><span data-stu-id="535d3-118">The patch applies to a feature that is currently run from source.</span></span> <span data-ttu-id="535d3-119">In questo caso, la funzionalità viene passata dallo stato di esecuzione dall'origine allo stato locale.</span><span class="sxs-lookup"><span data-stu-id="535d3-119">In this case, the feature is transitioned from the run-from-source state to the local state.</span></span>
-   <span data-ttu-id="535d3-120">La patch si applica a un componente con un file mancante o danneggiato.</span><span class="sxs-lookup"><span data-stu-id="535d3-120">The patch applies to a component that has a missing or corrupted file.</span></span>
-   <span data-ttu-id="535d3-121">La patch si applica a un file in un componente che contiene anche file senza versione senza voci MsiFileHash.</span><span class="sxs-lookup"><span data-stu-id="535d3-121">The patch applies to a file in a component that also contains unversioned files with no MsiFileHash entries.</span></span> <span data-ttu-id="535d3-122">Una [tabella MsiFileHash](msifilehash-table.md) popolata è necessaria per evitare la Ricopia non necessaria dei file non con versione dal percorso di origine.</span><span class="sxs-lookup"><span data-stu-id="535d3-122">A populated [MsiFileHash Table](msifilehash-table.md) is required to prevent unnecessary recopying of unversioned files from the source location.</span></span>
-   <span data-ttu-id="535d3-123">La patch è stata applicata con un REINSTALLMODE di divertimenti o emù.</span><span class="sxs-lookup"><span data-stu-id="535d3-123">The patch was applied with a REINSTALLMODE of amus or emus.</span></span> <span data-ttu-id="535d3-124">Questa opzione è pericolosa perché esegue operazioni di copia dei file indipendentemente dalla versione del file.</span><span class="sxs-lookup"><span data-stu-id="535d3-124">This option is dangerous in that it performs file copy operations regardless of file version.</span></span> <span data-ttu-id="535d3-125">Ciò può compromettere la riesecuzione dei file e richiede quasi sempre l'origine.</span><span class="sxs-lookup"><span data-stu-id="535d3-125">This can lead to down-reving of files and almost always requires the source.</span></span> <span data-ttu-id="535d3-126">Il valore REINSTALLMODE consigliato è omus.</span><span class="sxs-lookup"><span data-stu-id="535d3-126">The recommended REINSTALLMODE value is omus.</span></span>
-   <span data-ttu-id="535d3-127">Il pacchetto memorizzato nella cache per il prodotto è mancante.</span><span class="sxs-lookup"><span data-stu-id="535d3-127">The cached package for the product is missing.</span></span> <span data-ttu-id="535d3-128">Il pacchetto memorizzato nella cache è necessario per l'applicazione di una patch.</span><span class="sxs-lookup"><span data-stu-id="535d3-128">The cached package is needed for application of a patch.</span></span> <span data-ttu-id="535d3-129">Il pacchetto memorizzato nella cache è archiviato nella cartella% windir% \\ Installer.</span><span class="sxs-lookup"><span data-stu-id="535d3-129">The cached package is stored in the %windir%\\Installer folder.</span></span>
-   <span data-ttu-id="535d3-130">Il pacchetto viene creato per effettuare una chiamata all' [azione ResolveSource](resolvesource-action.md).</span><span class="sxs-lookup"><span data-stu-id="535d3-130">The package is authored to make a call to the [ResolveSource Action](resolvesource-action.md).</span></span> <span data-ttu-id="535d3-131">Questa azione dovrebbe in genere essere evitata o condizionata in modo appropriato, perché la sua esecuzione comporta sempre l'accesso all'origine.</span><span class="sxs-lookup"><span data-stu-id="535d3-131">This action should generally be avoided or conditionalized appropriately, because its execution always results in an access to the source.</span></span>
-   <span data-ttu-id="535d3-132">Il pacchetto ha un'azione personalizzata che tenta di accedere all'origine in qualche modo.</span><span class="sxs-lookup"><span data-stu-id="535d3-132">The package has a custom action that attempts to access the source in some manner.</span></span> <span data-ttu-id="535d3-133">L'esempio più comune è un'azione personalizzata di tipo 23 installazione simultanea.</span><span class="sxs-lookup"><span data-stu-id="535d3-133">The most common example is a type 23 concurrent installation custom action.</span></span>
    > [!Note]  
    > <span data-ttu-id="535d3-134">Le installazioni simultanee non sono consigliate per l'installazione di applicazioni destinate al rilascio al pubblico.</span><span class="sxs-lookup"><span data-stu-id="535d3-134">Concurrent installations are not recommended for the installation of applications intended for release to the public.</span></span> <span data-ttu-id="535d3-135">Per informazioni sulle installazioni simultanee, vedere [installazioni simultanee](concurrent-installations.md).</span><span class="sxs-lookup"><span data-stu-id="535d3-135">For information about concurrent installations please see [Concurrent Installations](concurrent-installations.md).</span></span>

     

-   <span data-ttu-id="535d3-136">Il pacchetto di patch è costituito da patch binarie che non si applicano alla versione corrente del file nel computer.</span><span class="sxs-lookup"><span data-stu-id="535d3-136">The patch package consists of binary patches that do not apply to the current version of the file on the computer.</span></span>

<span data-ttu-id="535d3-137">Si consideri l'esempio seguente, in cui Windows Installer richiede l'accesso all'origine originale quando si applica una patch:</span><span class="sxs-lookup"><span data-stu-id="535d3-137">Consider the following example where Windows Installer requires access to the original source when applying a patch:</span></span>

1.  <span data-ttu-id="535d3-138">Installare la versione RTM dell'esempio del prodotto.</span><span class="sxs-lookup"><span data-stu-id="535d3-138">Install RTM version of the product Example.</span></span>
2.  <span data-ttu-id="535d3-139">Applicare la patch Qfe1. msp al computer.</span><span class="sxs-lookup"><span data-stu-id="535d3-139">Apply patch Qfe1.msp to the computer.</span></span> <span data-ttu-id="535d3-140">Questa patch versione 1,0 di Example.dll alla versione 1,1.</span><span class="sxs-lookup"><span data-stu-id="535d3-140">This patches version 1.0 of Example.dll to version 1.1.</span></span>
3.  <span data-ttu-id="535d3-141">Viene fornita una nuova patch, Qfe2. msp, che aggiorna Example.dll alla versione 1,2 e obsolete Qfe1. msp.</span><span class="sxs-lookup"><span data-stu-id="535d3-141">A new patch, Qfe2.msp is provided, which updates Example.dll to version 1.2 and obsoletes Qfe1.msp.</span></span> <span data-ttu-id="535d3-142">Tuttavia, la patch è stata creata solo per la versione 1,0 di Example.dll perché è stata generata con la versione RTM del prodotto.</span><span class="sxs-lookup"><span data-stu-id="535d3-142">However, the patch was only created to target version 1.0 of Example.dll because it was generated using the RTM version of the product.</span></span> <span data-ttu-id="535d3-143">Example.dll versione 1,2 include la correzione contenuta nella versione 1,1 Example.dll, ma il file con estensione msp è stato generato tra le immagini RTM e QFE2.</span><span class="sxs-lookup"><span data-stu-id="535d3-143">Example.dll version 1.2 includes the fix contained in Example.dll version 1.1, but the .msp file was generated between the RTM and QFE2 images.</span></span> <span data-ttu-id="535d3-144">Quindi, quando Qfe2. msp viene applicato al computer, Windows Installer necessario accedere all'origine originale.</span><span class="sxs-lookup"><span data-stu-id="535d3-144">So, when Qfe2.msp is applied to the computer, Windows Installer needs to access the original source.</span></span> <span data-ttu-id="535d3-145">La patch binaria per Example.dll non può essere applicata alla versione 1,1; può essere applicato solo alla versione 1,0.</span><span class="sxs-lookup"><span data-stu-id="535d3-145">The binary patch for Example.dll cannot apply to version 1.1; it can only apply to version 1.0.</span></span> <span data-ttu-id="535d3-146">In questo modo il programma di installazione ricopiando la versione 1,0 di Example.dll dal percorso di origine originale, in modo che la patch possa essere applicata correttamente.</span><span class="sxs-lookup"><span data-stu-id="535d3-146">This results in the Installer recopying version 1.0 of Example.dll from the original source location so that the patch can be applied successfully.</span></span>

## <a name="source-requirements-when-removing-a-patch"></a><span data-ttu-id="535d3-147">Requisiti di origine per la rimozione di una patch</span><span class="sxs-lookup"><span data-stu-id="535d3-147">Source Requirements When Removing a Patch</span></span>

<span data-ttu-id="535d3-148">Potrebbe essere necessario accedere alle origini di installazione originali per rimuovere una patch se il Windows Installer non ha archiviato le informazioni di base sulla patch.</span><span class="sxs-lookup"><span data-stu-id="535d3-148">Access to the original installation sources may be required to remove a patch if the Windows Installer has not stored baseline information about the patch.</span></span> <span data-ttu-id="535d3-149">A partire da Windows Installer 3,0, il programma di installazione salva in modo selettivo le informazioni di base sui file quando vengono aggiornate.</span><span class="sxs-lookup"><span data-stu-id="535d3-149">Beginning with Windows Installer 3.0, the installer selectively saves baseline information about files when they are updated.</span></span> <span data-ttu-id="535d3-150">Per altre informazioni sulla cache di base, vedere [riduzione delle dimensioni delle patch](reducing-patch-size.md) .</span><span class="sxs-lookup"><span data-stu-id="535d3-150">For more information about the baseline cache, see [Reducing Patch Size](reducing-patch-size.md) .</span></span>

 

 



