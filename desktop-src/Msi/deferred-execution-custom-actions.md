---
description: Lo scopo di un'azione personalizzata di esecuzione posticipata consiste nel ritardare l'esecuzione di una modifica di sistema fino al momento in cui viene eseguito lo script di installazione.
ms.assetid: 79bf4d0b-624d-4652-8c4f-0ecd928a88e3
title: Azioni personalizzate di esecuzione posticipata
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e09b91793f5d5bbc7be7099c92f8d8f212012d12
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103967815"
---
# <a name="deferred-execution-custom-actions"></a><span data-ttu-id="d11fa-103">Azioni personalizzate di esecuzione posticipata</span><span class="sxs-lookup"><span data-stu-id="d11fa-103">Deferred Execution Custom Actions</span></span>

<span data-ttu-id="d11fa-104">Lo scopo di un'azione personalizzata di esecuzione posticipata consiste nel ritardare l'esecuzione di una modifica di sistema fino al momento in cui viene eseguito lo script di installazione.</span><span class="sxs-lookup"><span data-stu-id="d11fa-104">The purpose of a deferred execution custom action is to delay the execution of a system change to the time when the installation script is executed.</span></span> <span data-ttu-id="d11fa-105">Questo comportamento è diverso da un'azione personalizzata normale o da un'azione standard in cui il programma di installazione esegue l'azione immediatamente dopo che è stata rilevata in una tabella di sequenza o in una chiamata a [**MsiDoAction**](/windows/desktop/api/Msiquery/nf-msiquery-msidoactiona).</span><span class="sxs-lookup"><span data-stu-id="d11fa-105">This differs from a regular custom action, or a standard action, in which the installer executes the action immediately upon encountering it in a sequence table or in a call to [**MsiDoAction**](/windows/desktop/api/Msiquery/nf-msiquery-msidoactiona).</span></span> <span data-ttu-id="d11fa-106">Un'azione personalizzata di esecuzione posticipata consente a un autore di pacchetti di specificare le operazioni di sistema in un determinato punto all'interno dell'esecuzione dello script di installazione.</span><span class="sxs-lookup"><span data-stu-id="d11fa-106">A deferred execution custom action enables a package author to specify system operations at a particular point within the execution of the installation script.</span></span>

<span data-ttu-id="d11fa-107">Il programma di installazione non esegue un'azione personalizzata di esecuzione posticipata al momento dell'elaborazione della sequenza di installazione.</span><span class="sxs-lookup"><span data-stu-id="d11fa-107">The installer does not execute a deferred execution custom action at the time the installation sequence is processed.</span></span> <span data-ttu-id="d11fa-108">Il programma di installazione scrive invece l'azione personalizzata nello script di installazione.</span><span class="sxs-lookup"><span data-stu-id="d11fa-108">Instead the installer writes the custom action into the installation script.</span></span> <span data-ttu-id="d11fa-109">L'unico parametro di modalità impostato dal programma di installazione in questo caso è MSIRUNMODE \_ scheduled.</span><span class="sxs-lookup"><span data-stu-id="d11fa-109">The only mode parameter the installer sets in this case is MSIRUNMODE\_SCHEDULED.</span></span> <span data-ttu-id="d11fa-110">Per una descrizione dei parametri della modalità di esecuzione, vedere [**MsiGetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode) .</span><span class="sxs-lookup"><span data-stu-id="d11fa-110">See [**MsiGetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode) for a description of the run mode parameters.</span></span>

<span data-ttu-id="d11fa-111">È necessario pianificare un'azione personalizzata di esecuzione posticipata nella tabella Execute Sequence all'interno della sezione che esegue la generazione di script.</span><span class="sxs-lookup"><span data-stu-id="d11fa-111">A deferred execution custom action must be scheduled in the execute sequence table within the section that performs script generation.</span></span> <span data-ttu-id="d11fa-112">Le azioni personalizzate di esecuzione posticipata devono essere successive a [InstallInitialize](installinitialize-action.md) e prima di [InstallFinalize](installfinalize-action.md) nella sequenza di azione.</span><span class="sxs-lookup"><span data-stu-id="d11fa-112">Deferred execution custom actions must come after [InstallInitialize](installinitialize-action.md) and come before [InstallFinalize](installfinalize-action.md) in the action sequence.</span></span>

<span data-ttu-id="d11fa-113">In molti casi le azioni personalizzate che impostano le proprietà, gli Stati delle funzionalità, gli Stati dei componenti o le directory di destinazione o che pianificano le operazioni di sistema inserendo righe nelle tabelle di sequenza possono utilizzare l'esecuzione immediata in modo sicuro.</span><span class="sxs-lookup"><span data-stu-id="d11fa-113">Custom actions that set properties, feature states, component states, or target directories, or that schedule system operations by inserting rows into sequence tables, can in many cases use immediate execution safely.</span></span> <span data-ttu-id="d11fa-114">Tuttavia, le azioni personalizzate che modificano direttamente il sistema o chiamano un altro servizio di sistema devono essere rinviate al momento in cui viene eseguito lo script di installazione.</span><span class="sxs-lookup"><span data-stu-id="d11fa-114">However, custom actions that change the system directly, or call another system service, must be deferred to the time when the installation script is executed.</span></span> <span data-ttu-id="d11fa-115">Per ulteriori informazioni sui potenziali conflitti tra le azioni personalizzate e il thread di installazione principale, vedere [azioni personalizzate sincrone e asincrone](synchronous-and-asynchronous-custom-actions.md) .</span><span class="sxs-lookup"><span data-stu-id="d11fa-115">See [Synchronous and Asynchronous Custom Actions](synchronous-and-asynchronous-custom-actions.md) for more information about potential clashes between their custom actions and the main installation thread.</span></span>

<span data-ttu-id="d11fa-116">Poiché lo script di installazione può essere eseguito all'esterno della sessione di installazione in cui è stato scritto, la sessione potrebbe non esistere più durante l'esecuzione dello script di installazione.</span><span class="sxs-lookup"><span data-stu-id="d11fa-116">Because the installation script can be executed outside of the installation session in which it was written, the session may no longer exist during execution of the installation script.</span></span> <span data-ttu-id="d11fa-117">Ciò significa che l'handle di sessione originale e il set di dati della proprietà durante la sequenza di installazione non sono disponibili per un'azione personalizzata di esecuzione posticipata.</span><span class="sxs-lookup"><span data-stu-id="d11fa-117">This means that the original session handle and property data set during the installation sequence is not available to a deferred execution custom action.</span></span> <span data-ttu-id="d11fa-118">Le azioni personalizzate posticipate che chiamano librerie a collegamento dinamico (dll) passano un handle che può essere usato solo per ottenere una quantità molto limitata di informazioni, come descritto in [ottenere informazioni sul contesto per le azioni personalizzate di esecuzione posticipata](obtaining-context-information-for-deferred-execution-custom-actions.md).</span><span class="sxs-lookup"><span data-stu-id="d11fa-118">Deferred custom actions that call dynamic-link libraries (DLLs) pass a handle which can only be used to obtain a very limited amount of information, as described in [Obtaining Context Information for Deferred Execution Custom Actions](obtaining-context-information-for-deferred-execution-custom-actions.md).</span></span>

<span data-ttu-id="d11fa-119">Si noti che le azioni personalizzate posticipate, incluse le azioni personalizzate di [rollback](rollback-custom-actions.md) e le [azioni personalizzate di commit](commit-custom-actions.md), sono gli unici tipi di azioni che possono essere eseguite all'esterno del contesto di sicurezza degli utenti.</span><span class="sxs-lookup"><span data-stu-id="d11fa-119">Note that deferred custom actions, including [rollback custom actions](rollback-custom-actions.md) and [commit custom actions](commit-custom-actions.md), are the only types of actions that can run outside the users security context.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d11fa-120">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="d11fa-120">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d11fa-121">Opzioni di esecuzione In-Script azione personalizzata</span><span class="sxs-lookup"><span data-stu-id="d11fa-121">Custom Action In-Script Execution Options</span></span>](custom-action-in-script-execution-options.md)
</dt> <dt>

[<span data-ttu-id="d11fa-122">Riferimento all'azione personalizzata</span><span class="sxs-lookup"><span data-stu-id="d11fa-122">Custom Action Reference</span></span>](custom-action-reference.md)
</dt> </dl>

 

 



