---
description: Le installazioni simultanee, denominate anche installazioni annidate, sono una funzionalità deprecata del Windows Installer.
ms.assetid: 579ae4ee-47a0-440e-81ca-ea8bf60c5349
title: Installazioni simultanee
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d89f2ef4af062c8151935fefab471603f79d7633
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103883013"
---
# <a name="concurrent-installations"></a><span data-ttu-id="9d650-103">Installazioni simultanee</span><span class="sxs-lookup"><span data-stu-id="9d650-103">Concurrent Installations</span></span>

<span data-ttu-id="9d650-104">Le installazioni simultanee, denominate anche installazioni annidate, sono una funzionalità deprecata del Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="9d650-104">Concurrent Installations, also called Nested Installations, is a deprecated feature of the Windows Installer.</span></span> <span data-ttu-id="9d650-105">Le applicazioni installate con installazioni simultanee possono avere esito negativo perché risultano difficoltose per il servizio dei clienti.</span><span class="sxs-lookup"><span data-stu-id="9d650-105">Applications installed with concurrent installations can eventually fail because they are difficult for customers to service correctly.</span></span> <span data-ttu-id="9d650-106">Non usare installazioni simultanee per installare i prodotti destinati a essere rilasciati al pubblico.</span><span class="sxs-lookup"><span data-stu-id="9d650-106">Do not use concurrent installations to install products that are intended to be released to the public.</span></span> <span data-ttu-id="9d650-107">Le installazioni simultanee possono avere un'applicabilità limitata negli ambienti aziendali controllati quando vengono usate per installare le applicazioni che non sono destinate alla versione pubblica.</span><span class="sxs-lookup"><span data-stu-id="9d650-107">Concurrent installations can have limited applicability in controlled corporate environments when used to install applications that are not intended for public release.</span></span> <span data-ttu-id="9d650-108">La documentazione sulle installazioni simultanee è disponibile per gli autori di pacchetti che vogliono usare installazioni simultanee con applicazioni non per la distribuzione pubblica.</span><span class="sxs-lookup"><span data-stu-id="9d650-108">The concurrent installations documentation is provided for package authors that wish to use concurrent installations with applications that are not for public distribution.</span></span>

<span data-ttu-id="9d650-109">Un'azione di installazione simultanea installa un altro pacchetto Windows Installer durante un'installazione attualmente in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="9d650-109">A concurrent installation action installs another Windows Installer package during a currently running installation.</span></span> <span data-ttu-id="9d650-110">Un'installazione simultanea viene aggiunta a un pacchetto mediante la creazione di un'azione di installazione simultanea nella [tabella CustomAction](customaction-table.md) e la pianificazione di questa azione personalizzata nelle tabelle di sequenza.</span><span class="sxs-lookup"><span data-stu-id="9d650-110">A concurrent installation is added to a package by authoring a concurrent installation action into the [CustomAction table](customaction-table.md) and scheduling this custom action into the sequence tables.</span></span> <span data-ttu-id="9d650-111">Il campo di destinazione della tabella CustomAction contiene una stringa di impostazioni di proprietà pubbliche utilizzate dall'installazione simultanea.</span><span class="sxs-lookup"><span data-stu-id="9d650-111">The Target field of the CustomAction table contains a string of public property settings used by the concurrent installation.</span></span> <span data-ttu-id="9d650-112">Il campo di origine della tabella CustomAction identifica il pacchetto simultaneo.</span><span class="sxs-lookup"><span data-stu-id="9d650-112">The Source field of the CustomAction table identifies the concurrent package.</span></span> <span data-ttu-id="9d650-113">Un'azione di installazione simultanea può reinstallare o rimuovere solo un'applicazione installata dal pacchetto di installazione dell'applicazione corrente.</span><span class="sxs-lookup"><span data-stu-id="9d650-113">A concurrent installation action can only reinstall or remove an application that has been installed by the current application's installation package.</span></span>

<span data-ttu-id="9d650-114">Il tipo di azione di installazione simultanea è specificato nel campo Type della tabella CustomAction.</span><span class="sxs-lookup"><span data-stu-id="9d650-114">The type of concurrent installation action is specified in the Type field of the CustomAction table.</span></span> <span data-ttu-id="9d650-115">A seconda del tipo di azione personalizzata, il pacchetto per l'applicazione simultanea può risiedere in un sottoarchivio del pacchetto principale, come file in una posizione specificata da una proprietà o come applicazione annunciata nel computer dell'utente.</span><span class="sxs-lookup"><span data-stu-id="9d650-115">Depending upon the custom action type, the package for the concurrent application can reside in a substorage of the main package, as a file at a location specified by a property, or as an advertised application on the user's machine.</span></span> <span data-ttu-id="9d650-116">I tipi di azioni personalizzate seguenti eseguono un'installazione simultanea.</span><span class="sxs-lookup"><span data-stu-id="9d650-116">The following types of custom actions perform a concurrent installation.</span></span>



| <span data-ttu-id="9d650-117">Tipo di azione personalizzata</span><span class="sxs-lookup"><span data-stu-id="9d650-117">Custom action type</span></span>                                 | <span data-ttu-id="9d650-118">Descrizione</span><span class="sxs-lookup"><span data-stu-id="9d650-118">Description</span></span>                                                                     |
|----------------------------------------------------|---------------------------------------------------------------------------------|
| [<span data-ttu-id="9d650-119">Tipo di azione personalizzata 7</span><span class="sxs-lookup"><span data-stu-id="9d650-119">Custom Action Type 7</span></span>](custom-action-type-7.md)   | <span data-ttu-id="9d650-120">Installazione simultanea di un prodotto che risiede nel pacchetto di installazione.</span><span class="sxs-lookup"><span data-stu-id="9d650-120">Concurrent installation of a product residing in the installation package.</span></span>      |
| [<span data-ttu-id="9d650-121">Tipo di azione personalizzata 23</span><span class="sxs-lookup"><span data-stu-id="9d650-121">Custom Action Type 23</span></span>](custom-action-type-23.md) | <span data-ttu-id="9d650-122">Installazione simultanea di un pacchetto di installazione nell'albero di origine corrente.</span><span class="sxs-lookup"><span data-stu-id="9d650-122">Concurrent installation of an installer package within the current source tree.</span></span> |
| [<span data-ttu-id="9d650-123">Tipo di azione personalizzata 39</span><span class="sxs-lookup"><span data-stu-id="9d650-123">Custom Action Type 39</span></span>](custom-action-type-39.md) | <span data-ttu-id="9d650-124">Installazione simultanea di un pacchetto del programma di installazione annunciato.</span><span class="sxs-lookup"><span data-stu-id="9d650-124">Concurrent installation of an advertised installer package.</span></span>                     |



 

<span data-ttu-id="9d650-125">Un'installazione simultanea condivide la stessa interfaccia utente e le stesse impostazioni di registrazione dell'installazione principale.</span><span class="sxs-lookup"><span data-stu-id="9d650-125">A concurrent installation shares the same user interface and logging settings as the main installation.</span></span>

<span data-ttu-id="9d650-126">Le azioni di installazione simultanee devono essere inserite tra l' [azione InstallInitialize](installinitialize-action.md) e l' [azione InstallFinalize](installfinalize-action.md) della sequenza di azione dell'installazione principale.</span><span class="sxs-lookup"><span data-stu-id="9d650-126">Concurrent installation actions should be placed between the [InstallInitialize action](installinitialize-action.md) and [InstallFinalize action](installfinalize-action.md) of the main installation's action sequence.</span></span> <span data-ttu-id="9d650-127">Al rollback dell'installazione principale, il programma di installazione eseguirà il rollback anche dell'installazione simultanea.</span><span class="sxs-lookup"><span data-stu-id="9d650-127">Upon rollback of the main installation, the installer will then rollback the concurrent installation as well.</span></span> <span data-ttu-id="9d650-128">L'uso dell' [esecuzione posticipata](deferred-execution-custom-actions.md) con le azioni di installazione simultanea non è necessario perché il programma di installazione combina le informazioni di rollback dalle installazioni simultanee e principali.</span><span class="sxs-lookup"><span data-stu-id="9d650-128">The use of [deferred execution](deferred-execution-custom-actions.md) with concurrent installation actions is unnecessary because the installer combines rollback information from the concurrent and main installations.</span></span> <span data-ttu-id="9d650-129">Tutte le modifiche vengono annullate durante un'installazione di rollback.</span><span class="sxs-lookup"><span data-stu-id="9d650-129">All changes are reversed upon a rollback installation.</span></span>

<span data-ttu-id="9d650-130">I valori restituiti per le azioni di installazione simultanee sono identici a quelli per altre azioni personalizzate.</span><span class="sxs-lookup"><span data-stu-id="9d650-130">The return values for concurrent installation actions are the same as for other custom actions.</span></span> <span data-ttu-id="9d650-131">Vedere [valori restituiti dell'azione personalizzata](custom-action-return-values.md).</span><span class="sxs-lookup"><span data-stu-id="9d650-131">See [Custom Action Return Values](custom-action-return-values.md).</span></span>

<span data-ttu-id="9d650-132">Anche le azioni standard o personalizzate che specificano un riavvio automatico del sistema o richiedono il riavvio dell'utente possono eseguire il riavvio o la richiesta dall'interno di un'installazione simultanea.</span><span class="sxs-lookup"><span data-stu-id="9d650-132">Standard or custom actions that specify an automatic restart of the system, or request the user to restart, can also perform restart or request from within a concurrent installation.</span></span>

<span data-ttu-id="9d650-133">Quando il programma di installazione avvia un'installazione simultanea, blocca tutte le altre installazioni fino al completamento dell'installazione simultanea e prima di continuare con l'installazione principale.</span><span class="sxs-lookup"><span data-stu-id="9d650-133">Once the installer begins a concurrent installation, it locks out all other installations until the concurrent installation is complete and before continuing the main installation.</span></span> <span data-ttu-id="9d650-134">Il programma di installazione può eseguire installazioni simultanee come azioni personalizzate sincrone.</span><span class="sxs-lookup"><span data-stu-id="9d650-134">The installer can only execute concurrent installations as synchronous custom actions.</span></span> <span data-ttu-id="9d650-135">Vedere [azioni personalizzate sincrone e asincrone](synchronous-and-asynchronous-custom-actions.md).</span><span class="sxs-lookup"><span data-stu-id="9d650-135">See [Synchronous and Asynchronous Custom Actions](synchronous-and-asynchronous-custom-actions.md).</span></span> <span data-ttu-id="9d650-136">I flag di opzione descritti in [Opzioni di elaborazione personalizzate per l'azione restituita](custom-action-return-processing-options.md) devono essere impostati su None (+ 0) o **msidbCustomActionTypeContinue** (+ 64).</span><span class="sxs-lookup"><span data-stu-id="9d650-136">The option flags described in [Custom Action Return Processing Options](custom-action-return-processing-options.md) must be set to none (+0) or **msidbCustomActionTypeContinue** (+64).</span></span>

<span data-ttu-id="9d650-137">Un'azione di installazione simultanea può installare un'applicazione da eseguire localmente, per l'esecuzione dall'origine, per la reinstallazione o per essere rimossa in modo analogo a quando si usa [**MsiInstallProduct**](/windows/desktop/api/Msi/nf-msi-msiinstallproducta) per un'installazione normale.</span><span class="sxs-lookup"><span data-stu-id="9d650-137">A concurrent installation action can install an application to be run locally, to run from source, to be reinstalled, or to be removed in the same manner as when using [**MsiInstallProduct**](/windows/desktop/api/Msi/nf-msi-msiinstallproducta) for a regular installation.</span></span> <span data-ttu-id="9d650-138">Per specificare il tipo di installazione, passare la proprietà [**ADDLOCAL**](addlocal.md), [**addsource**](addsource.md), [**REINSTALL**](reinstall.md)o [**Remove**](remove.md) all'azione di installazione simultanea.</span><span class="sxs-lookup"><span data-stu-id="9d650-138">To specify the type of installation, pass either the [**ADDLOCAL**](addlocal.md), [**ADDSOURCE**](addsource.md), [**REINSTALL**](reinstall.md), or [**REMOVE**](remove.md) property to the concurrent installation action.</span></span>

<span data-ttu-id="9d650-139">Le azioni di installazione simultanee possono essere create in coppie, un'azione utilizzata per l'installazione e l'altra per la rimozione dell'installazione simultanea.</span><span class="sxs-lookup"><span data-stu-id="9d650-139">Concurrent installation actions can be authored in pairs, one action used for installing and the other action used for removing the concurrent installation.</span></span> <span data-ttu-id="9d650-140">Per l'installazione viene in genere usato un tipo di [azione personalizzato 7](custom-action-type-7.md) o un [tipo di azione personalizzata 23](custom-action-type-23.md) .</span><span class="sxs-lookup"><span data-stu-id="9d650-140">A [Custom Action Type 7](custom-action-type-7.md) or [Custom Action Type 23](custom-action-type-23.md) is typically used to install.</span></span> <span data-ttu-id="9d650-141">Un [tipo di azione personalizzata 39](custom-action-type-39.md) viene in genere usato per rimuovere l'installazione simultanea quando viene disinstallato il prodotto padre.</span><span class="sxs-lookup"><span data-stu-id="9d650-141">A [Custom Action Type 39](custom-action-type-39.md) is typically used to remove the concurrent installation when the parent product is uninstalled.</span></span> <span data-ttu-id="9d650-142">Il record per l'azione personalizzata di rimozione nella [tabella CustomAction](customaction-table.md) può includere il GUID del codice del prodotto nel campo di origine e "Remove = All" nel campo di destinazione.</span><span class="sxs-lookup"><span data-stu-id="9d650-142">The record for the removal custom action in the [CustomAction table](customaction-table.md) can have the product code GUID in the Source field and "REMOVE=ALL" in the Target field.</span></span> <span data-ttu-id="9d650-143">Le due azioni personalizzate devono essere create nella tabella di sequenza delle azioni con condizioni che si escludono a vicenda.</span><span class="sxs-lookup"><span data-stu-id="9d650-143">The two custom actions need to be authored in the action sequence table with mutually exclusive conditions.</span></span> <span data-ttu-id="9d650-144">Ad esempio, l'azione personalizzata che installa il prodotto può avere "non installato" nel campo condizione e l'azione personalizzata rimuove l'installazione simultanea può avere REMOVE = "ALL" nel campo condizione.</span><span class="sxs-lookup"><span data-stu-id="9d650-144">For example, the custom action that installs the product can have "NOT Installed" in its Condition field and the custom action removes the concurrent installation can have REMOVE="ALL" in its Condition field.</span></span>

<span data-ttu-id="9d650-145">Non esiste alcun metodo per eseguire query su un pacchetto per il relativo costo.</span><span class="sxs-lookup"><span data-stu-id="9d650-145">There is no method for querying a package for its cost.</span></span> <span data-ttu-id="9d650-146">In questo modo, il costo di un'installazione simultanea risulta difficile.</span><span class="sxs-lookup"><span data-stu-id="9d650-146">This makes the costing of a concurrent installations difficult.</span></span> <span data-ttu-id="9d650-147">Per indicare le cartelle e i costi peggiori del componente associato all'installazione simultanea, è necessario aggiungere le righe alla [tabella ReserveCost](reservecost-table.md) .</span><span class="sxs-lookup"><span data-stu-id="9d650-147">Rows must be added to the [ReserveCost table](reservecost-table.md) to indicate the folders and worst-case costs of the component associated with the concurrent install.</span></span>

<span data-ttu-id="9d650-148">Le uniche [Opzioni di elaborazione della restituzione dell'azione personalizzata](custom-action-return-processing-options.md) disponibili con le azioni di installazione simultanee sono None (+ 0) o **msidbCustomActionTypeContinue** (+ 64).</span><span class="sxs-lookup"><span data-stu-id="9d650-148">The only [Custom Action Return Processing Options](custom-action-return-processing-options.md) available with concurrent installation actions are none (+0) or **msidbCustomActionTypeContinue** (+64).</span></span>

<span data-ttu-id="9d650-149">Si noti che un'installazione padre non può chiamare il proprio pacchetto come azione di installazione simultanea.</span><span class="sxs-lookup"><span data-stu-id="9d650-149">Note that a parent installation cannot call its own package as a concurrent installation action.</span></span>

<span data-ttu-id="9d650-150">Si noti che se un'installazione per computer tenta di eseguire un'installazione simultanea per ogni utente, il programma di installazione registra l'installazione padre come utente per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="9d650-150">Note that if a per-machine installation attempts to run a per-user concurrent installation, the installer registers the parent installation as per-user by default.</span></span> <span data-ttu-id="9d650-151">Questa operazione può causare la rimozione non corretta dell'applicazione da parte del programma di installazione perché il programma di installazione tenta di disinstallare l'applicazione per computer quando viene effettivamente registrata come per utente.</span><span class="sxs-lookup"><span data-stu-id="9d650-151">This can cause the installer to incorrectly remove the application because the installer attempts to uninstall the application per-machine when it is actually registered as per-user.</span></span> <span data-ttu-id="9d650-152">Per forzare lo stato di un'installazione simultanea a tenere traccia dello stato dell'installazione padre, immettere ALLUSERS = " \[ ALLUSERS \] " nella colonna destinazione della [tabella CustomAction](customaction-table.md).</span><span class="sxs-lookup"><span data-stu-id="9d650-152">To force the state of a concurrent installation to track the state of its parent installation, enter ALLUSERS="\[ALLUSERS\]" in the Target column of the [CustomAction table](customaction-table.md).</span></span> <span data-ttu-id="9d650-153">In questo caso, l'installazione simultanea è per computer se l'elemento padre è per computer e l'installazione simultanea è per utente se l'elemento padre è per utente.</span><span class="sxs-lookup"><span data-stu-id="9d650-153">In this case, the concurrent installation is per-machine if the parent is per-machine, and the concurrent installation is per-user if the parent is per-user.</span></span>

<span data-ttu-id="9d650-154">Gli sviluppatori devono tenere presenti gli avvisi seguenti durante la creazione di installazioni simultanee.</span><span class="sxs-lookup"><span data-stu-id="9d650-154">Developers should note the following warnings when authoring concurrent installations.</span></span>

-   <span data-ttu-id="9d650-155">Le installazioni simultanee non possono condividere componenti.</span><span class="sxs-lookup"><span data-stu-id="9d650-155">Concurrent installations cannot share components.</span></span>
-   <span data-ttu-id="9d650-156">Un'installazione amministrativa non può contenere anche un'installazione simultanea.</span><span class="sxs-lookup"><span data-stu-id="9d650-156">An administrative installation cannot also contain a concurrent installation.</span></span>
-   <span data-ttu-id="9d650-157">L'applicazione di patch e l'aggiornamento potrebbero non funzionare con le installazioni simultanee.</span><span class="sxs-lookup"><span data-stu-id="9d650-157">Patching and upgrading may not work with concurrent installations.</span></span>
-   <span data-ttu-id="9d650-158">Il programma di installazione potrebbe non costare correttamente un'installazione simultanea.</span><span class="sxs-lookup"><span data-stu-id="9d650-158">The installer may not properly cost a concurrent installation.</span></span>
-   <span data-ttu-id="9d650-159">Non è possibile usare i ProgressBar integrati con installazioni simultanee.</span><span class="sxs-lookup"><span data-stu-id="9d650-159">Integrated ProgressBars cannot be used with concurrent installations.</span></span>
-   <span data-ttu-id="9d650-160">Le risorse che devono essere annunciate non possono essere installate dall'installazione simultanea.</span><span class="sxs-lookup"><span data-stu-id="9d650-160">Resources that are to be advertised cannot be installed by the concurrent installation.</span></span>
-   <span data-ttu-id="9d650-161">Un pacchetto che esegue un'installazione simultanea di un'applicazione deve disinstallare anche l'applicazione simultanea quando viene disinstallato il prodotto padre.</span><span class="sxs-lookup"><span data-stu-id="9d650-161">A package that performs a concurrent installation of an application should also uninstall the concurrent application when the parent product is uninstalled.</span></span>

<span data-ttu-id="9d650-162">Per impedire l'installazione di un pacchetto come installazione simultanea, aggiungere una delle seguenti istruzioni condizionali alla tabella [LaunchCondition](launchcondition-table.md) .</span><span class="sxs-lookup"><span data-stu-id="9d650-162">To prevent a package from ever being installed as a concurrent installation, add either of the following conditional statements to the [LaunchCondition](launchcondition-table.md) table.</span></span> <span data-ttu-id="9d650-163">In questo modo si impedisce che il pacchetto venga installato da un'azione di installazione simultanea eseguita da un'altra installazione.</span><span class="sxs-lookup"><span data-stu-id="9d650-163">This prevents the package from ever being installed by a concurrent installation action run by another installation.</span></span> <span data-ttu-id="9d650-164">Questo non impedisce che il pacchetto venga rimosso dall'azione [RemoveExistingProducts](removeexistingproducts-action.md) .</span><span class="sxs-lookup"><span data-stu-id="9d650-164">This does not prevent the package from being removed by the [RemoveExistingProducts](removeexistingproducts-action.md) action.</span></span> <span data-ttu-id="9d650-165">Vedere anche la proprietà [**ParentOriginalDatabase**](parentoriginaldatabase.md) e la proprietà [**ParentProductCode**](parentproductcode.md) .</span><span class="sxs-lookup"><span data-stu-id="9d650-165">See also the [**ParentOriginalDatabase**](parentoriginaldatabase.md) property and [**ParentProductCode**](parentproductcode.md) property.</span></span>

``` syntax
"Not ParentProductCode"
```

``` syntax
"Not ParentOriginalDatabase"
```

 

 



