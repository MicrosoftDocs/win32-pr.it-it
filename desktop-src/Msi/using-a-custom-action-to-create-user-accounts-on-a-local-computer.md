---
description: Questo esempio illustra come usare azioni personalizzate per creare account utente in un computer locale durante l'installazione di un componente.
ms.assetid: fc06dd7b-46d7-45a0-85b3-26f808c64f89
title: Uso di un'azione personalizzata per creare account utente in un computer locale
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cfd3bf002c0fa1d661c6bfebb6d1a18cbc4b0652
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "104346576"
---
# <a name="using-a-custom-action-to-create-user-accounts-on-a-local-computer"></a><span data-ttu-id="b8a85-103">Uso di un'azione personalizzata per creare account utente in un computer locale</span><span class="sxs-lookup"><span data-stu-id="b8a85-103">Using a Custom Action to Create User Accounts on a Local Computer</span></span>

<span data-ttu-id="b8a85-104">Questo esempio illustra come usare azioni personalizzate per creare account utente in un computer locale durante l'installazione di un componente.</span><span class="sxs-lookup"><span data-stu-id="b8a85-104">This sample demonstrates how to use custom actions to create user accounts on a local computer when installing a component.</span></span> <span data-ttu-id="b8a85-105">La rimozione di un componente consente di rimuovere gli account utente locali creati dall'azione personalizzata.</span><span class="sxs-lookup"><span data-stu-id="b8a85-105">Removal of a component removes the local user accounts created by the custom action.</span></span> <span data-ttu-id="b8a85-106">Vengono illustrate diverse azioni personalizzate, incluse le [azioni personalizzate di esecuzione posticipata](deferred-execution-custom-actions.md) e le [azioni personalizzate di rollback](rollback-custom-actions.md).</span><span class="sxs-lookup"><span data-stu-id="b8a85-106">Several custom actions are demonstrated including [Deferred Execution Custom Actions](deferred-execution-custom-actions.md) and [Rollback Custom Actions](rollback-custom-actions.md).</span></span>

<span data-ttu-id="b8a85-107">L'esempio soddisfa le specifiche seguenti.</span><span class="sxs-lookup"><span data-stu-id="b8a85-107">The sample meets the following specifications.</span></span>

-   <span data-ttu-id="b8a85-108">L'installazione crea gli account utente solo se si esegue Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="b8a85-108">The installation creates user accounts only if running Windows 2000.</span></span>
-   <span data-ttu-id="b8a85-109">L'installazione crea gli account utente solo se il componente viene installato per l'esecuzione in locale.</span><span class="sxs-lookup"><span data-stu-id="b8a85-109">The installation creates user accounts only if the component is being installed to run locally.</span></span> <span data-ttu-id="b8a85-110">Ciò impedisce la creazione di account utente durante la riparazione o la reinstallazione del componente.</span><span class="sxs-lookup"><span data-stu-id="b8a85-110">This precludes creating user accounts during the repair or reinstallation of the component.</span></span>
-   <span data-ttu-id="b8a85-111">Il programma di installazione rimuove gli account quando il componente viene rimosso.</span><span class="sxs-lookup"><span data-stu-id="b8a85-111">The Installer removes the accounts when the component is removed.</span></span>
-   <span data-ttu-id="b8a85-112">Le informazioni sull'account utente vengono lette da una tabella personalizzata nel database di installazione e non sono hardcoded nel codice dell'azione personalizzata.</span><span class="sxs-lookup"><span data-stu-id="b8a85-112">User account information is read from a custom table in the installation database and is not hard-coded into the custom action code.</span></span>
-   <span data-ttu-id="b8a85-113">Poiché la creazione o la rimozione di account utente richiede privilegi elevati, alcune delle azioni personalizzate devono essere in grado di apportare modifiche al sistema che richiedono privilegi elevati.</span><span class="sxs-lookup"><span data-stu-id="b8a85-113">Because the creation or removal of user accounts requires elevated privileges, some of the custom actions must be capable of making changes to the system that require elevated privileges.</span></span> <span data-ttu-id="b8a85-114">Queste azioni personalizzate devono essere azioni personalizzate posticipate che vengono eseguite quando nello script di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="b8a85-114">These custom actions must be deferred custom actions that run when in the execution script.</span></span>
-   <span data-ttu-id="b8a85-115">Ogni account ha un'azione di rollback personalizzata per assicurarsi che l'account venga rimosso durante il rollback dell'installazione del componente.</span><span class="sxs-lookup"><span data-stu-id="b8a85-115">Each account has a rollback custom action to ensure the account is removed on rollback of the component installation.</span></span> <span data-ttu-id="b8a85-116">Questa operazione non include il rollback di un'eliminazione dell'account durante la rimozione di un componente.</span><span class="sxs-lookup"><span data-stu-id="b8a85-116">This does not include the rollback of an account deletion during the removal of a component.</span></span>
-   <span data-ttu-id="b8a85-117">Le azioni personalizzate inviano messaggi ActionData per ogni account creato o rimosso.</span><span class="sxs-lookup"><span data-stu-id="b8a85-117">Custom actions send ActionData messages for each account that is created or removed.</span></span> <span data-ttu-id="b8a85-118">Questa operazione non include la fornitura di messaggi di stato per il ProgressBar.</span><span class="sxs-lookup"><span data-stu-id="b8a85-118">This does not include providing progress messages for the ProgressBar.</span></span>
-   <span data-ttu-id="b8a85-119">Le azioni personalizzate segnalano un errore se non è possibile creare un account.</span><span class="sxs-lookup"><span data-stu-id="b8a85-119">Custom actions report an error if an account cannot be created.</span></span>
-   <span data-ttu-id="b8a85-120">La password per l'account viene ottenuta tramite l'interazione dell'utente con l'interfaccia utente o, nel caso di un'installazione nell'interfaccia utente di base o in nessuno dei [livelli dell'interfaccia utente](user-interface-levels.md), come proprietà passata nella riga di comando.</span><span class="sxs-lookup"><span data-stu-id="b8a85-120">The password for the account is obtained through the user interaction with the user interface, or in the case of an installation at the Basic UI or None [User Interface Levels](user-interface-levels.md), as a property passed on the command line.</span></span>
-   <span data-ttu-id="b8a85-121">I dati sensibili sono nascosti dal file di log.</span><span class="sxs-lookup"><span data-stu-id="b8a85-121">Sensitive data is hidden from the log file.</span></span>

<span data-ttu-id="b8a85-122">Nell'esempio è incluso un ipotetico componente denominato TestAccount.</span><span class="sxs-lookup"><span data-stu-id="b8a85-122">The sample includes a hypothetical component named TestAccount.</span></span> <span data-ttu-id="b8a85-123">Nelle sezioni seguenti si presuppone che siano già state create le risorse richieste da TestAccount e che siano state create le tabelle [feature](feature-table.md), [Component](component-table.md), [file](file-table.md), [directory](directory-table.md)e [FeatureComponents](featurecomponents-table.md) del database di esempio necessarie per installare questo componente.</span><span class="sxs-lookup"><span data-stu-id="b8a85-123">The discussion in the following sections assumes that you have already created the resources required by TestAccount and have authored the [Feature](feature-table.md), [Component](component-table.md), [File](file-table.md), [Directory](directory-table.md), and [FeatureComponents](featurecomponents-table.md) tables in the sample database required to install this component.</span></span> <span data-ttu-id="b8a85-124">Per ulteriori informazioni, vedere [un esempio di installazione](an-installation-example.md).</span><span class="sxs-lookup"><span data-stu-id="b8a85-124">For more information, see [An Installation Example](an-installation-example.md).</span></span>

<span data-ttu-id="b8a85-125">Negli argomenti seguenti sono contenute informazioni su come creare azioni personalizzate obbligatorie e aggiungerle a un pacchetto di installazione.</span><span class="sxs-lookup"><span data-stu-id="b8a85-125">The following topics contain information about how to create required custom actions and add them to an installation package.</span></span>

-   [<span data-ttu-id="b8a85-126">Creazione di azioni personalizzate</span><span class="sxs-lookup"><span data-stu-id="b8a85-126">Authoring the Custom Actions</span></span>](authoring-the-custom-actions.md)
-   [<span data-ttu-id="b8a85-127">Aggiunta di una tabella CustomUserAccounts personalizzata</span><span class="sxs-lookup"><span data-stu-id="b8a85-127">Adding a Custom CustomUserAccounts Table</span></span>](adding-a-custom-customuseraccounts-table.md)
-   [<span data-ttu-id="b8a85-128">Creazione della tabella CustomAction</span><span class="sxs-lookup"><span data-stu-id="b8a85-128">Authoring the CustomAction Table</span></span>](authoring-the-customaction-table.md)
-   [<span data-ttu-id="b8a85-129">Creazione di tabelle ActionText e Error</span><span class="sxs-lookup"><span data-stu-id="b8a85-129">Authoring the ActionText and Error Tables</span></span>](authoring-the-actiontext-and-error-tables.md)
-   [<span data-ttu-id="b8a85-130">Creazione della tabella InstallExecuteSequence</span><span class="sxs-lookup"><span data-stu-id="b8a85-130">Authoring the InstallExecuteSequence Table</span></span>](authoring-the-installexecutesequence-table.md)
-   [<span data-ttu-id="b8a85-131">Creazione dell'interfaccia utente per l'input della password</span><span class="sxs-lookup"><span data-stu-id="b8a85-131">Authoring the User Interface for Password Input</span></span>](authoring-the-user-interface-for-password-input.md)
-   [<span data-ttu-id="b8a85-132">Sicurezza dell'installazione</span><span class="sxs-lookup"><span data-stu-id="b8a85-132">Securing the installation</span></span>](securing-the-installation.md)

 

 



