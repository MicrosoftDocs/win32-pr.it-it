---
description: In questo argomento viene descritto come creare, identificare, impostare ed eliminare i timer.
ms.assetid: 509a6fc4-ddee-4ff4-88a2-25dad4c48c2f
title: Informazioni sui timer
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b3163dbfd5357de516e0202665cd76d017335593
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103968603"
---
# <a name="about-timers"></a><span data-ttu-id="b45b2-103">Informazioni sui timer</span><span class="sxs-lookup"><span data-stu-id="b45b2-103">About Timers</span></span>

<span data-ttu-id="b45b2-104">In questo argomento viene descritto come creare, identificare, impostare ed eliminare i timer.</span><span class="sxs-lookup"><span data-stu-id="b45b2-104">This topic describes how to create, identify, set, and delete timers.</span></span> <span data-ttu-id="b45b2-105">Un'applicazione usa un timer per pianificare un evento per una finestra dopo che è trascorso un periodo di tempo specificato.</span><span class="sxs-lookup"><span data-stu-id="b45b2-105">An application uses a timer to schedule an event for a window after a specified time has elapsed.</span></span> <span data-ttu-id="b45b2-106">Ogni volta che scade l'intervallo specificato (o il valore di timeout) per un timer, il sistema invia una notifica alla finestra associata al timer.</span><span class="sxs-lookup"><span data-stu-id="b45b2-106">Each time the specified interval (or time-out value) for a timer elapses, the system notifies the window associated with the timer.</span></span> <span data-ttu-id="b45b2-107">Poiché l'accuratezza di un timer dipende dalla frequenza di clock del sistema e dalla frequenza con cui l'applicazione recupera i messaggi dalla coda di messaggi, il valore di timeout è solo approssimativo.</span><span class="sxs-lookup"><span data-stu-id="b45b2-107">Because a timer's accuracy depends on the system clock rate and how often the application retrieves messages from the message queue, the time-out value is only approximate.</span></span>

<span data-ttu-id="b45b2-108">In questo argomento sono incluse le sezioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="b45b2-108">This topic includes the following sections.</span></span>

-   [<span data-ttu-id="b45b2-109">Operazioni timer</span><span class="sxs-lookup"><span data-stu-id="b45b2-109">Timer Operations</span></span>](#timer-operations)
-   [<span data-ttu-id="b45b2-110">Timer ad alta risoluzione</span><span class="sxs-lookup"><span data-stu-id="b45b2-110">High-Resolution Timer</span></span>](#high-resolution-timer)
-   [<span data-ttu-id="b45b2-111">Oggetti timer waitable</span><span class="sxs-lookup"><span data-stu-id="b45b2-111">Waitable Timer Objects</span></span>](#waitable-timer-objects)
-   [<span data-ttu-id="b45b2-112">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="b45b2-112">Related topics</span></span>](#related-topics)

## <a name="timer-operations"></a><span data-ttu-id="b45b2-113">Operazioni timer</span><span class="sxs-lookup"><span data-stu-id="b45b2-113">Timer Operations</span></span>

<span data-ttu-id="b45b2-114">Le applicazioni creano timer utilizzando la funzione [**setimer**](/windows/win32/api/winuser/nf-winuser-settimer) .</span><span class="sxs-lookup"><span data-stu-id="b45b2-114">Applications create timers by using the [**SetTimer**](/windows/win32/api/winuser/nf-winuser-settimer) function.</span></span> <span data-ttu-id="b45b2-115">Un nuovo timer inizia a cronometrare l'intervallo non appena viene creato.</span><span class="sxs-lookup"><span data-stu-id="b45b2-115">A new timer starts timing the interval as soon as it is created.</span></span> <span data-ttu-id="b45b2-116">Un'applicazione può modificare il valore di timeout di un timer utilizzando l'oggetto **setimer** e può eliminare un timer utilizzando la funzione [**KillTimer**](/windows/win32/api/winuser/nf-winuser-killtimer) .</span><span class="sxs-lookup"><span data-stu-id="b45b2-116">An application can change a timer's time-out value by using **SetTimer** and can destroy a timer by using the [**KillTimer**](/windows/win32/api/winuser/nf-winuser-killtimer) function.</span></span> <span data-ttu-id="b45b2-117">Per utilizzare le risorse di sistema in modo efficiente, le applicazioni devono eliminare i timer che non sono più necessari.</span><span class="sxs-lookup"><span data-stu-id="b45b2-117">To use system resources efficiently, applications should destroy timers that are no longer necessary.</span></span>

<span data-ttu-id="b45b2-118">Ogni timer ha un identificatore univoco.</span><span class="sxs-lookup"><span data-stu-id="b45b2-118">Each timer has a unique identifier.</span></span> <span data-ttu-id="b45b2-119">Quando si crea un timer, un'applicazione può specificare un identificatore o fare in modo che il sistema crei un valore univoco.</span><span class="sxs-lookup"><span data-stu-id="b45b2-119">When creating a timer, an application can either specify an identifier or have the system create a unique value.</span></span> <span data-ttu-id="b45b2-120">Il primo parametro di un messaggio di [**\_ timer WM**](wm-timer.md) contiene l'identificatore del timer che ha pubblicato il messaggio.</span><span class="sxs-lookup"><span data-stu-id="b45b2-120">The first parameter of a [**WM\_TIMER**](wm-timer.md) message contains the identifier of the timer that posted the message.</span></span>

<span data-ttu-id="b45b2-121">Se si specifica un handle di finestra nella chiamata a [**setimer**](/windows/win32/api/winuser/nf-winuser-settimer), l'applicazione associa il timer a tale finestra.</span><span class="sxs-lookup"><span data-stu-id="b45b2-121">If you specify a window handle in the call to [**SetTimer**](/windows/win32/api/winuser/nf-winuser-settimer), the application associates the timer with that window.</span></span> <span data-ttu-id="b45b2-122">Ogni volta che il valore di timeout del timer scade, il sistema invia un messaggio [**di \_ timer WM**](wm-timer.md) alla finestra associata al timer.</span><span class="sxs-lookup"><span data-stu-id="b45b2-122">Whenever the time-out value for the timer elapses, the system posts a [**WM\_TIMER**](wm-timer.md) message to the window associated with the timer.</span></span> <span data-ttu-id="b45b2-123">Se non viene specificato alcun handle di finestra nella chiamata a **setimer**, l'applicazione che ha creato il timer deve monitorare la coda di messaggi per i messaggi del **\_ timer WM** e inviarli alla finestra appropriata.</span><span class="sxs-lookup"><span data-stu-id="b45b2-123">If no window handle is specified in the call to **SetTimer**, the application that created the timer must monitor its message queue for **WM\_TIMER** messages and dispatch them to the appropriate window.</span></span> <span data-ttu-id="b45b2-124">Se si specifica una funzione di callback [**TimerProc**](/windows/win32/api/winuser/nc-winuser-timerproc) , la routine della finestra predefinita chiama la funzione di callback quando elabora il **\_ timer WM**.</span><span class="sxs-lookup"><span data-stu-id="b45b2-124">If you specify a [**TimerProc**](/windows/win32/api/winuser/nc-winuser-timerproc) callback function, the default window procedure calls the callback function when it processes **WM\_TIMER**.</span></span> <span data-ttu-id="b45b2-125">Pertanto, è necessario inviare messaggi nel thread chiamante, anche quando si usa **TimerProc** anziché elaborare il **\_ timer WM**.</span><span class="sxs-lookup"><span data-stu-id="b45b2-125">Therefore, you need to dispatch messages in the calling thread, even when you use **TimerProc** instead of processing **WM\_TIMER**.</span></span>

<span data-ttu-id="b45b2-126">Se è necessario ricevere una notifica al termine del timer, utilizzare un timer in attesa.</span><span class="sxs-lookup"><span data-stu-id="b45b2-126">If you need to be notified when a timer elapses, use a waitable timer.</span></span> <span data-ttu-id="b45b2-127">Per altre informazioni, vedere [oggetti timer waitable](/windows/desktop/Sync/waitable-timer-objects).</span><span class="sxs-lookup"><span data-stu-id="b45b2-127">For more information, see [Waitable Timer Objects](/windows/desktop/Sync/waitable-timer-objects).</span></span>

## <a name="high-resolution-timer"></a><span data-ttu-id="b45b2-128">Timer High-Resolution</span><span class="sxs-lookup"><span data-stu-id="b45b2-128">High-Resolution Timer</span></span>

<span data-ttu-id="b45b2-129">Un contatore è un termine generale utilizzato nella programmazione per fare riferimento a una variabile di incremento.</span><span class="sxs-lookup"><span data-stu-id="b45b2-129">A counter is a general term used in programming to refer to an incrementing variable.</span></span> <span data-ttu-id="b45b2-130">Alcuni sistemi includono un contatore delle prestazioni ad alta risoluzione che offre tempi di risoluzione elevata.</span><span class="sxs-lookup"><span data-stu-id="b45b2-130">Some systems include a high-resolution performance counter that provides high-resolution elapsed times.</span></span>

<span data-ttu-id="b45b2-131">Se nel sistema è presente un contatore delle prestazioni ad alta risoluzione, è possibile utilizzare la funzione [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) per esprimere la frequenza, espressa in conteggi al secondo.</span><span class="sxs-lookup"><span data-stu-id="b45b2-131">If a high-resolution performance counter exists on the system, you can use the [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) function to express the frequency, in counts per second.</span></span> <span data-ttu-id="b45b2-132">Il valore del conteggio è dipendente dal processore.</span><span class="sxs-lookup"><span data-stu-id="b45b2-132">The value of the count is processor dependent.</span></span> <span data-ttu-id="b45b2-133">In alcuni processori, ad esempio, il conteggio potrebbe essere la frequenza del ciclo del clock del processore.</span><span class="sxs-lookup"><span data-stu-id="b45b2-133">On some processors, for example, the count might be the cycle rate of the processor clock.</span></span>

<span data-ttu-id="b45b2-134">La funzione [**QueryPerformanceCounter**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancecounter) Recupera il valore corrente del contatore delle prestazioni ad alta risoluzione.</span><span class="sxs-lookup"><span data-stu-id="b45b2-134">The [**QueryPerformanceCounter**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancecounter) function retrieves the current value of the high-resolution performance counter.</span></span> <span data-ttu-id="b45b2-135">Chiamando questa funzione all'inizio e alla fine di una sezione di codice, un'applicazione usa essenzialmente il contatore come timer ad alta risoluzione.</span><span class="sxs-lookup"><span data-stu-id="b45b2-135">By calling this function at the beginning and end of a section of code, an application essentially uses the counter as a high-resolution timer.</span></span> <span data-ttu-id="b45b2-136">Si supponga, ad esempio, che [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) indichi che la frequenza del contatore delle prestazioni ad alta risoluzione è di 50.000 conteggi al secondo.</span><span class="sxs-lookup"><span data-stu-id="b45b2-136">For example, suppose that [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) indicates that the frequency of the high-resolution performance counter is 50,000 counts per second.</span></span> <span data-ttu-id="b45b2-137">Se l'applicazione chiama **QueryPerformanceCounter** immediatamente prima e immediatamente dopo la sezione di codice da cronometrare, i valori del contatore potrebbero essere rispettivamente i conteggi 1500 e 3500.</span><span class="sxs-lookup"><span data-stu-id="b45b2-137">If the application calls **QueryPerformanceCounter** immediately before and immediately after the section of code to be timed, the counter values might be 1500 counts and 3500 counts, respectively.</span></span> <span data-ttu-id="b45b2-138">Questi valori indicheranno che .04 secondi (2000 conteggi) sono trascorsi durante l'esecuzione del codice.</span><span class="sxs-lookup"><span data-stu-id="b45b2-138">These values would indicate that .04 seconds (2000 counts) elapsed while the code executed.</span></span>

## <a name="waitable-timer-objects"></a><span data-ttu-id="b45b2-139">Oggetti timer waitable</span><span class="sxs-lookup"><span data-stu-id="b45b2-139">Waitable Timer Objects</span></span>

<span data-ttu-id="b45b2-140">Un oggetto timer che può essere atteso è un oggetto di sincronizzazione il cui stato è impostato su segnalato quando arriva il tempo di scadenza specificato.</span><span class="sxs-lookup"><span data-stu-id="b45b2-140">A waitable timer object is a synchronization object whose state is set to signaled when the specified due time arrives.</span></span> <span data-ttu-id="b45b2-141">È possibile creare due tipi di timer che è possibile attendere, ovvero la reimpostazione manuale e la sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="b45b2-141">There are two types of waitable timers that can be created: manual-reset and synchronization.</span></span> <span data-ttu-id="b45b2-142">Un timer di uno dei due tipi può anche essere un timer periodico.</span><span class="sxs-lookup"><span data-stu-id="b45b2-142">A timer of either type can also be a periodic timer.</span></span>

<span data-ttu-id="b45b2-143">Un thread usa la funzione [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) o [**CreateWaitableTimerEx**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerexw) per creare un oggetto timer.</span><span class="sxs-lookup"><span data-stu-id="b45b2-143">A thread uses the [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) or [**CreateWaitableTimerEx**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerexw) function to create a timer object.</span></span> <span data-ttu-id="b45b2-144">Il thread di creazione specifica se il timer è un timer di reimpostazione manuale o un timer di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="b45b2-144">The creating thread specifies whether the timer is a manual-reset timer or a synchronization timer.</span></span> <span data-ttu-id="b45b2-145">Il thread di creazione può specificare un nome per l'oggetto timer.</span><span class="sxs-lookup"><span data-stu-id="b45b2-145">The creating thread can specify a name for the timer object.</span></span> <span data-ttu-id="b45b2-146">I thread di altri processi possono aprire un handle per un timer esistente specificandone il nome in una chiamata alla funzione [**OpenWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-openwaitabletimerw) .</span><span class="sxs-lookup"><span data-stu-id="b45b2-146">Threads in other processes can open a handle to an existing timer by specifying its name in a call to the [**OpenWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-openwaitabletimerw) function.</span></span> <span data-ttu-id="b45b2-147">Qualsiasi thread con un handle a un oggetto timer può utilizzare una delle funzioni di attesa per attendere che lo stato del timer sia impostato su segnalato.</span><span class="sxs-lookup"><span data-stu-id="b45b2-147">Any thread with a handle to a timer object can use one of the wait functions to wait for the timer state to be set to signaled.</span></span>

<span data-ttu-id="b45b2-148">Per ulteriori informazioni sull'utilizzo di oggetti timer in attesa per la sincronizzazione dei thread, vedere [oggetti timer di attesa](/windows/desktop/Sync/waitable-timer-objects).</span><span class="sxs-lookup"><span data-stu-id="b45b2-148">For more information about using waitable timer objects for thread synchronization, see [Waitable Timer Objects](/windows/desktop/Sync/waitable-timer-objects).</span></span>

## <a name="related-topics"></a><span data-ttu-id="b45b2-149">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="b45b2-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b45b2-150">Utilizzo di timer</span><span class="sxs-lookup"><span data-stu-id="b45b2-150">Using Timers</span></span>](using-timers.md)
</dt> </dl>

 

 
