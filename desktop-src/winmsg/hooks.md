---
description: In questa sezione vengono illustrati gli hook. Un hook è un punto nel meccanismo di gestione dei messaggi di sistema in cui un'applicazione può installare una subroutine per monitorare il traffico dei messaggi.
ms.assetid: vs|winui|~\winui\windowsuserinterface\windowing\hooks.htm
title: Hook
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a059222b5068a6e5d06be5efc2de6838f0dbc70d5bd70476706d7c69a6926c40
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/11/2021
ms.locfileid: "119932201"
---
# <a name="hooks"></a>Hook

Un hook è un punto nel meccanismo di gestione dei messaggi di sistema in cui un'applicazione può installare una subroutine per monitorare il traffico dei messaggi nel sistema ed elaborare determinati tipi di messaggi prima che raggiungano la procedura della finestra di destinazione.

### <a name="in-this-section"></a>Contenuto della sezione



| Nome                                 | Descrizione                                                         |
|--------------------------------------|---------------------------------------------------------------------|
| [Panoramica dell'hook](about-hooks.md)     | Viene illustrato come usare gli hook.<br/>                      |
| [Uso di hook](using-hooks.md)       | Illustra come eseguire attività associate agli hook.<br/> |
| [Informazioni di riferimento su Hook](hook-reference.md) | Contiene il riferimento all'API.<br/>                              |



 

### <a name="hook-functions"></a>Funzioni hook



| Nome                                               | Descrizione                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|----------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera)             | Passa il messaggio e il codice hook specificati alle routine hook associate alle procedure hook [**WH \_ SYSMSGFILTER**](about-hooks.md) e **WH \_ MSGFILTER.**<br/>                                                                                                                                                                                                                                                                                                                                                                                      |
| [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex)           | Passa le informazioni sull'hook alla procedura hook successiva nella catena di hook corrente. Una routine hook può chiamare questa funzione prima o dopo l'elaborazione delle informazioni sull'hook. <br/>                                                                                                                                                                                                                                                                                                                                                                                                         |
| [*CallWndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85))                   | Funzione di callback definita dall'applicazione o definita dalla libreria usata con la [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) Il sistema chiama questa funzione prima di chiamare la routine della finestra per elaborare un messaggio inviato al thread.<br/>                                                                                                                                                                                                                                                                                                                                               |
| [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc)             | Funzione di callback definita dall'applicazione o definita dalla libreria usata con la [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) Il sistema chiama questa funzione dopo la chiamata della funzione [**SendMessage.**](/windows/win32/api/winuser/nf-winuser-sendmessage) La routine hook può esaminare il messaggio. non può modificarlo. <br/>                                                                                                                                                                                                                                                                                         |
| [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85))                           | Funzione di callback definita dall'applicazione o definita dalla libreria usata con la [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) Il sistema chiama questa funzione prima di attivare, creare, eliminare, ridurre al minimo, ottimizzare, spostare o ridimensionare una finestra; prima di completare un comando di sistema; prima di rimuovere un evento del mouse o della tastiera dalla coda dei messaggi di sistema; prima di impostare lo stato attivo della tastiera; o prima della sincronizzazione con la coda di messaggi di sistema. Un'applicazione CBT (Computer-Based Training) usa questa procedura hook per ricevere notifiche utili dal sistema. <br/> |
| [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85))                       | Funzione di callback definita dall'applicazione o definita dalla libreria usata con la [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) Il sistema chiama questa funzione prima di chiamare le routine hook associate a qualsiasi tipo di hook. Il sistema passa informazioni sull'hook da chiamare alla routine hook [*DebugProc,*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) che esamina le informazioni e determina se consentire la chiamata all'hook. <br/>                                                                                                                                                  |
| [*ForegroundIdleProc*](/previous-versions/windows/desktop/legacy/ms644980(v=vs.85))     | Funzione di callback definita dall'applicazione o definita dalla libreria usata con la [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) Il sistema chiama questa funzione ogni volta che il thread in primo piano sta per diventare inattivo. <br/>                                                                                                                                                                                                                                                                                                                                                                   |
| [*GetMsgProc*](/previous-versions/windows/desktop/legacy/ms644981(v=vs.85))                     | Funzione di callback definita dall'applicazione o definita dalla libreria usata con la [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) Il sistema chiama questa funzione ogni volta che la [**funzione GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) o [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) recupera un messaggio da una coda di messaggi dell'applicazione. Prima di restituire il messaggio recuperato al chiamante, il sistema passa il messaggio alla procedura hook. <br/>                                                                                                                                                        |
| [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85))   | Funzione di callback definita dall'applicazione o definita dalla libreria usata con la [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) In genere, un'applicazione usa questa funzione per riprodurre una serie di messaggi di mouse e tastiera registrati in precedenza dalla routine hook [*JournalRecordProc.*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85)) Se è installata una procedura hook [*JournalPlaybackProc,*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) l'input normale di mouse e tastiera è disabilitato. <br/>                                                                                                                       |
| [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85))       | Funzione di callback definita dall'applicazione o definita dalla libreria usata con la [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) La funzione registra i messaggi rimossi dal sistema dalla coda di messaggi di sistema. In un secondo momento, un'applicazione può usare una procedura hook [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) per riprodurre i messaggi. <br/>                                                                                                                                                                                                                                               |
| [*KeyboardProc*](/previous-versions/windows/desktop/legacy/ms644984(v=vs.85))                 | Funzione di callback definita dall'applicazione o definita dalla libreria usata con la [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) Il sistema chiama questa funzione ogni volta che un'applicazione chiama la [**funzione GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) o [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) ed è presente un messaggio della tastiera ([**WM \_ KEYUP**](/windows/desktop/inputdev/wm-keyup) o [**WM \_ KEYDOWN**](/windows/desktop/inputdev/wm-keydown)) da elaborare. <br/>                                                                                                                                                                         |
| [*LowLevelKeyboardProc*](/previous-versions/windows/desktop/legacy/ms644985(v=vs.85)) | Funzione di callback definita dall'applicazione o definita dalla libreria usata con la [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) Il sistema chiama questa funzione ogni volta che un nuovo evento di input della tastiera sta per essere pubblicato in una coda di input del thread.<br/>                                                                                                                                                                                                                                                                                                                                     |
| [*LowLevelMouseProc*](/previous-versions/windows/desktop/legacy/ms644986(v=vs.85))       | Funzione di callback definita dall'applicazione o definita dalla libreria usata con la [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) Il sistema chiama questa funzione ogni volta che un nuovo evento di input del mouse sta per essere inserito in una coda di input del thread.<br/>                                                                                                                                                                                                                                                                                                                                        |
| [*MessageProc*](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85))                   | Funzione di callback definita dall'applicazione o definita dalla libreria usata con la [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) Il sistema chiama questa funzione dopo che si verifica un evento di input in una finestra di dialogo, una finestra di messaggio, un menu o una barra di scorrimento, ma prima dell'elaborazione del messaggio generato dall'evento di input. La procedura hook consente di monitorare i messaggi per una finestra di dialogo, una finestra di messaggio, un menu o una barra di scorrimento creata da una particolare applicazione o da tutte le applicazioni.<br/>                                                                                                                       |
| [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85))                       | Funzione di callback definita dall'applicazione o definita dalla libreria usata con la [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) Il sistema chiama questa funzione ogni volta che un'applicazione chiama la [**funzione GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) o [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) ed è presente un messaggio del mouse da elaborare. <br/>                                                                                                                                                                                                                                                           |
| [**Setwindowshookex**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa)       | Installa una routine hook definita dall'applicazione in una catena di hook. È necessario installare una procedura hook per monitorare il sistema per determinati tipi di eventi. Questi eventi sono associati a un thread specifico o a tutti i thread nello stesso desktop del thread chiamante.<br/>                                                                                                                                                                                                                                                                                                           |
| [*ShellProc*](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85))                       | Funzione di callback definita dall'applicazione o definita dalla libreria usata con la [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) La funzione riceve le notifiche degli eventi della shell dal sistema.<br/>                                                                                                                                                                                                                                                                                                                                                                                      |
| [*SysMsgProc*](/previous-versions/windows/desktop/legacy/ms644992(v=vs.85))                     | Funzione di callback definita dall'applicazione o definita dalla libreria usata con la [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) Il sistema chiama questa funzione dopo che si verifica un evento di input in una finestra di dialogo, una finestra di messaggio, un menu o una barra di scorrimento, ma prima dell'elaborazione del messaggio generato dall'evento di input. La funzione può monitorare i messaggi per qualsiasi finestra di dialogo, finestra di messaggio, menu o barra di scorrimento nel sistema. <br/>                                                                                                                                                                    |
| [**UnhookWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-unhookwindowshookex) | Rimuove una routine hook installata in una catena di hook dalla [**funzione SetWindowsHookEx.**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

### <a name="hook-notifications"></a>Notifiche hook



| Nome                                          | Descrizione                                                                                                                                                                         |
|-----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**WM \_ CANCELJOURNAL**](wm-canceljournal.md) | Pubblicato in un'applicazione quando un utente annulla le attività di inserimento nel journal dell'applicazione. Il messaggio viene inviato con un **handle di finestra NULL.** <br/>                              |
| [**WM \_ QUEUESYNC**](wm-queuesync.md)         | Inviato da un'applicazione CBT per separare i messaggi di input dell'utente da altri messaggi inviati tramite la [**procedura WH \_ JOURNALPLAYBACK.**](about-hooks.md) <br/> |



 

### <a name="hook-structures"></a>Strutture hook



| Nome                                           | Descrizione                                                                                                                                                                                                                 |
|------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**CBT \_ CREATEWND**](/windows/win32/api/winuser/ns-winuser-cbt_createwnda)        | Contiene informazioni passate a una routine hook **\_ WH CBT,** [*CBTProc,*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85))prima della creazione di una finestra.<br/>                                                                                               |
| [**CBTACTIVATESTRUCT**](/windows/win32/api/winuser/ns-winuser-cbtactivatestruct) | Contiene informazioni passate a una routine hook **\_ WH CBT,** [*CBTProc,*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85))prima che venga attivata una finestra. <br/>                                                                                            |
| [**CWPRETSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpretstruct)           | Definisce i parametri del messaggio passati a una routine hook **WH \_ CALLWNDPROCRET,** [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc). <br/>                                                                                       |
| [**CWPSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpstruct)                 | Definisce i parametri del messaggio passati a una routine hook **WH \_ CALLWNDPROC,** [*CallWndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)). <br/>                                                                                                |
| [**DEBUGHOOKINFO**](/windows/win32/api/winuser/ns-winuser-debughookinfo)         | Contiene le informazioni di debug passate a una routine hook **\_ WH DEBUG,** [*DebugProc.*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) <br/>                                                                                                          |
| [**EVENTMSG**](/windows/win32/api/winuser/ns-winuser-eventmsg)                   | Contiene informazioni su un messaggio hardware inviato alla coda di messaggi di sistema. Questa struttura viene usata per archiviare le informazioni sui messaggi per la funzione di callback [*JournalPlaybackProc.*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) <br/> |
| [**KBDLLHOOKSTRUCT**](/windows/win32/api/winuser/ns-winuser-kbdllhookstruct)     | Contiene informazioni su un evento di input della tastiera di basso livello. <br/>                                                                                                                                                    |
| [**MOUSEHOOKSTRUCT**](/windows/win32/api/winuser/ns-winuser-mousehookstruct)     | Contiene informazioni su un evento del mouse passato a una routine hook **\_ WH MOUSE,** [*MouseProc.*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)) <br/>                                                                                                |
| [**MOUSEHOOKSTRUCTEX**](/windows/win32/api/winuser/ns-winuser-mousehookstructex) | Contiene informazioni su un evento del mouse passato a una routine hook **\_ WH MOUSE,** [*MouseProc.*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)) <br/>                                                                                                |
| [**MSLLHOOKSTRUCT**](/windows/win32/api/winuser/ns-winuser-msllhookstruct)       | Contiene informazioni su un evento di input del mouse di basso livello. <br/>                                                                                                                                                       |



 

## <a name="related-topics"></a>Argomenti correlati

<dl> <dt>

[**SetWinEventHook**](/windows/desktop/api/winuser/nf-winuser-setwineventhook)
</dt> </dl>

 

