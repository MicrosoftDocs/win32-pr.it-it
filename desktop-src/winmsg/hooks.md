---
description: Questa sezione illustra gli hook. Un hook è un punto del meccanismo di gestione dei messaggi di sistema in cui un'applicazione può installare una subroutine per monitorare il traffico dei messaggi.
ms.assetid: vs|winui|~\winui\windowsuserinterface\windowing\hooks.htm
title: Hook
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 74057d25e3152c8782c2be364688bb971b08ddf5
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "104233324"
---
# <a name="hooks"></a>Hook

Un hook è un punto del meccanismo di gestione dei messaggi di sistema in cui un'applicazione può installare una subroutine per monitorare il traffico dei messaggi nel sistema ed elaborare determinati tipi di messaggi prima che raggiungano la procedura della finestra di destinazione.

### <a name="in-this-section"></a>Contenuto della sezione



| Nome                                 | Descrizione                                                         |
|--------------------------------------|---------------------------------------------------------------------|
| [Panoramica Hook](about-hooks.md)     | Viene illustrato come usare gli hook.<br/>                      |
| [Uso di hook](using-hooks.md)       | Viene illustrato come eseguire attività associate a Hook.<br/> |
| [Riferimento Hook](hook-reference.md) | Contiene il riferimento all'API.<br/>                              |



 

### <a name="hook-functions"></a>Funzioni hook



| Nome                                               | Descrizione                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|----------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera)             | Passa il codice del messaggio e dell'hook specificato alle routine hook associate alle routine hook [**\_ SYSMSGFILTER**](about-hooks.md) e **WH \_ msgfilter** .<br/>                                                                                                                                                                                                                                                                                                                                                                                      |
| [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex)           | Passa le informazioni sull'Hook alla successiva routine hook nella catena di hook corrente. Una routine hook può chiamare questa funzione prima o dopo l'elaborazione delle informazioni sull'hook. <br/>                                                                                                                                                                                                                                                                                                                                                                                                         |
| [*CallWndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85))                   | Funzione di callback definita dall'applicazione o definita dalla libreria utilizzata con la funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Il sistema chiama questa funzione prima di chiamare la routine della finestra per elaborare un messaggio inviato al thread.<br/>                                                                                                                                                                                                                                                                                                                                               |
| [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc)             | Funzione di callback definita dall'applicazione o definita dalla libreria utilizzata con la funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Il sistema chiama questa funzione dopo la chiamata della funzione [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) . La routine hook può esaminare il messaggio. non può modificarlo. <br/>                                                                                                                                                                                                                                                                                         |
| [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85))                           | Funzione di callback definita dall'applicazione o definita dalla libreria utilizzata con la funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Il sistema chiama questa funzione prima dell'attivazione, della creazione, dell'eliminazione, della riduzione, della riduzione, della massimizzazione, dello stato di ingrandimento o della dimensione di una finestra prima di completare un comando di sistema; prima di rimuovere un evento del mouse o della tastiera dalla coda dei messaggi di sistema; prima di impostare lo stato attivo della tastiera; o prima della sincronizzazione con la coda di messaggi di sistema. In un'applicazione di training basata su computer (CBT) viene utilizzata questa procedura di hook per ricevere notifiche utili dal sistema. <br/> |
| [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85))                       | Funzione di callback definita dall'applicazione o definita dalla libreria utilizzata con la funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Il sistema chiama questa funzione prima di chiamare le routine hook associate a qualsiasi tipo di hook. Il sistema passa informazioni sull'Hook da chiamare alla routine hook [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) , che esamina le informazioni e determina se consentire la chiamata del hook. <br/>                                                                                                                                                  |
| [*ForegroundIdleProc*](/previous-versions/windows/desktop/legacy/ms644980(v=vs.85))     | Funzione di callback definita dall'applicazione o definita dalla libreria utilizzata con la funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Il sistema chiama questa funzione ogni volta che il thread in primo piano sta per diventare inattivo. <br/>                                                                                                                                                                                                                                                                                                                                                                   |
| [*GetMsgProc*](/previous-versions/windows/desktop/legacy/ms644981(v=vs.85))                     | Funzione di callback definita dall'applicazione o definita dalla libreria utilizzata con la funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Il sistema chiama questa funzione ogni volta che la funzione [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) o [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) ha recuperato un messaggio da una coda di messaggi dell'applicazione. Prima di restituire il messaggio recuperato al chiamante, il sistema passa il messaggio alla routine hook. <br/>                                                                                                                                                        |
| [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85))   | Funzione di callback definita dall'applicazione o definita dalla libreria utilizzata con la funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . In genere, un'applicazione utilizza questa funzione per riprodurre una serie di messaggi di mouse e tastiera registrati in precedenza dalla procedura di hook [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85)) . Finché viene installata una procedura [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) Hook, l'input del mouse e della tastiera normale è disabilitato. <br/>                                                                                                                       |
| [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85))       | Funzione di callback definita dall'applicazione o definita dalla libreria utilizzata con la funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . La funzione registra i messaggi rimossi dal sistema dalla coda dei messaggi di sistema. Successivamente, un'applicazione può usare una procedura di hook [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) per riprodurre i messaggi. <br/>                                                                                                                                                                                                                                               |
| [*KeyboardProc*](/previous-versions/windows/desktop/legacy/ms644984(v=vs.85))                 | Funzione di callback definita dall'applicazione o definita dalla libreria utilizzata con la funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Il sistema chiama questa funzione ogni volta che un'applicazione chiama la funzione [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) o [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) ed è presente un messaggio della tastiera ([**WM \_ KEYUP**](/windows/desktop/inputdev/wm-keyup) o [**WM \_ KeyDown**](/windows/desktop/inputdev/wm-keydown)) da elaborare. <br/>                                                                                                                                                                         |
| [*LowLevelKeyboardProc*](/previous-versions/windows/desktop/legacy/ms644985(v=vs.85)) | Funzione di callback definita dall'applicazione o definita dalla libreria utilizzata con la funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Il sistema chiama questa funzione ogni volta che un nuovo evento di input da tastiera sta per essere inserito in una coda di input del thread.<br/>                                                                                                                                                                                                                                                                                                                                     |
| [*LowLevelMouseProc*](/previous-versions/windows/desktop/legacy/ms644986(v=vs.85))       | Funzione di callback definita dall'applicazione o definita dalla libreria utilizzata con la funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Il sistema chiama questa funzione ogni volta che un nuovo evento di input del mouse sta per essere inserito in una coda di input del thread.<br/>                                                                                                                                                                                                                                                                                                                                        |
| [*MessageProc*](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85))                   | Funzione di callback definita dall'applicazione o definita dalla libreria utilizzata con la funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Il sistema chiama questa funzione dopo che si è verificato un evento di input in una finestra di dialogo, in una finestra di messaggio, in un menu o in una barra di scorrimento, ma prima dell'elaborazione del messaggio generato dall'evento di input. La procedura hook può monitorare i messaggi per una finestra di dialogo, una finestra di messaggio, un menu o una barra di scorrimento creata da una particolare applicazione o da tutte le applicazioni.<br/>                                                                                                                       |
| [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85))                       | Funzione di callback definita dall'applicazione o definita dalla libreria utilizzata con la funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Il sistema chiama questa funzione ogni volta che un'applicazione chiama la funzione [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) o [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) ed è presente un messaggio del mouse da elaborare. <br/>                                                                                                                                                                                                                                                           |
| [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa)       | Installa una routine hook definita dall'applicazione in una catena di hook. È necessario installare una procedura hook per monitorare il sistema per determinati tipi di eventi. Questi eventi sono associati a un thread specifico o a tutti i thread nello stesso desktop del thread chiamante.<br/>                                                                                                                                                                                                                                                                                                           |
| [*ShellProc*](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85))                       | Funzione di callback definita dall'applicazione o definita dalla libreria utilizzata con la funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . La funzione riceve le notifiche degli eventi della shell dal sistema.<br/>                                                                                                                                                                                                                                                                                                                                                                                      |
| [*SysMsgProc*](/previous-versions/windows/desktop/legacy/ms644992(v=vs.85))                     | Funzione di callback definita dall'applicazione o definita dalla libreria utilizzata con la funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . Il sistema chiama questa funzione dopo che si è verificato un evento di input in una finestra di dialogo, in una finestra di messaggio, in un menu o in una barra di scorrimento, ma prima dell'elaborazione del messaggio generato dall'evento di input. La funzione può monitorare i messaggi per qualsiasi finestra di dialogo, finestra di messaggio, menu o barra di scorrimento nel sistema. <br/>                                                                                                                                                                    |
| [**UnhookWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-unhookwindowshookex) | Rimuove una routine hook installata in una catena di hook dalla funzione [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) . <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

### <a name="hook-notifications"></a>Notifiche Hook



| Nome                                          | Descrizione                                                                                                                                                                         |
|-----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**\_CANCELJOURNAL WM**](wm-canceljournal.md) | Inviato a un'applicazione quando un utente annulla le attività di inserimento nel journal dell'applicazione. Il messaggio viene pubblicato con un handle di finestra **null** . <br/>                              |
| [**\_QUEUESYNC WM**](wm-queuesync.md)         | Inviato da un'applicazione CBT per separare i messaggi di input dell'utente da altri messaggi inviati tramite la procedura [**WH \_ JOURNALPLAYBACK**](about-hooks.md) . <br/> |



 

### <a name="hook-structures"></a>Strutture Hook



| Nome                                           | Descrizione                                                                                                                                                                                                                 |
|------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**\_CREATEWND CBT**](/windows/win32/api/winuser/ns-winuser-cbt_createwnda)        | Contiene le informazioni passate a una stored procedure hook di **WH \_** , [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)), prima della creazione di una finestra.<br/>                                                                                               |
| [**CBTACTIVATESTRUCT**](/windows/win32/api/winuser/ns-winuser-cbtactivatestruct) | Contiene le informazioni passate a una routine di hook di un **\_ token WH** , [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)), prima dell'attivazione di una finestra. <br/>                                                                                            |
| [**CWPRETSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpretstruct)           | Definisce i parametri del messaggio passati a una procedura di hook **\_ CALLWNDPROCRET di WH** , [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc). <br/>                                                                                       |
| [**CWPSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpstruct)                 | Definisce i parametri del messaggio passati a una procedura di hook **\_ CALLWNDPROC di WH** , [*CALLWNDPROC*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)). <br/>                                                                                                |
| [**DEBUGHOOKINFO**](/windows/win32/api/winuser/ns-winuser-debughookinfo)         | Contiene le informazioni di debug passate a una routine di hook di **\_ debug WH** , [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)). <br/>                                                                                                          |
| [**EVENTMSG**](/windows/win32/api/winuser/ns-winuser-eventmsg)                   | Contiene informazioni su un messaggio hardware inviato alla coda di messaggi di sistema. Questa struttura viene utilizzata per archiviare le informazioni sul messaggio per la funzione di callback [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) . <br/> |
| [**KBDLLHOOKSTRUCT**](/windows/win32/api/winuser/ns-winuser-kbdllhookstruct)     | Contiene informazioni su un evento di input da tastiera di basso livello. <br/>                                                                                                                                                    |
| [**MOUSEHOOKSTRUCT**](/windows/win32/api/winuser/ns-winuser-mousehookstruct)     | Contiene informazioni su un evento del mouse passato a una routine di hook **\_ del mouse di WH** , [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)). <br/>                                                                                                |
| [**MOUSEHOOKSTRUCTEX**](/windows/win32/api/winuser/ns-winuser-mousehookstructex) | Contiene informazioni su un evento del mouse passato a una routine di hook **\_ del mouse di WH** , [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)). <br/>                                                                                                |
| [**MSLLHOOKSTRUCT**](/windows/win32/api/winuser/ns-winuser-msllhookstruct)       | Contiene informazioni su un evento di input del mouse di basso livello. <br/>                                                                                                                                                       |



 

## <a name="related-topics"></a>Argomenti correlati

<dl> <dt>

[**SetWinEventHook**](/windows/desktop/api/winuser/nf-winuser-setwineventhook)
</dt> </dl>

 

