---
description: Livelli API (Direct3D 10)
ms.assetid: 19c81383-6ac7-49ea-98a3-bf761a32ab40
title: Livelli API (Direct3D 10)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4427083bdcaf389c4b01b590a1bc3fef7eb878b4
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104401396"
---
# <a name="api-layers-direct3d-10"></a><span data-ttu-id="39fe0-103">Livelli API (Direct3D 10)</span><span class="sxs-lookup"><span data-stu-id="39fe0-103">API Layers (Direct3D 10)</span></span>

<span data-ttu-id="39fe0-104">Il runtime di Direct3D 10 viene costruito con i livelli, a partire dalle funzionalità di base e la creazione di funzionalità facoltative e di supporto per gli sviluppatori nei livelli esterni.</span><span class="sxs-lookup"><span data-stu-id="39fe0-104">The Direct3D 10 runtime is constructed with layers, starting with the basic functionality at the core and building optional and developer-assist functionality in outer layers.</span></span>

## <a name="core-layer"></a><span data-ttu-id="39fe0-105">Livello principale</span><span class="sxs-lookup"><span data-stu-id="39fe0-105">Core Layer</span></span>

<span data-ttu-id="39fe0-106">Il livello principale esiste per impostazione predefinita. fornire un mapping molto sottile tra l'API e il driver di dispositivo, riducendo al minimo l'overhead per le chiamate ad alta frequenza.</span><span class="sxs-lookup"><span data-stu-id="39fe0-106">The core layer exists by default; providing a very thin mapping between the API and the device driver, minimizing overhead for high-frequency calls.</span></span> <span data-ttu-id="39fe0-107">Poiché il livello principale è essenziale per le prestazioni, viene eseguita solo la convalida critica.</span><span class="sxs-lookup"><span data-stu-id="39fe0-107">As the core layer is essential for performance, it only performs critical validation.</span></span>

<span data-ttu-id="39fe0-108">I livelli rimanenti sono facoltativi.</span><span class="sxs-lookup"><span data-stu-id="39fe0-108">The remaining layers are optional.</span></span> <span data-ttu-id="39fe0-109">Come regola generale, i livelli aggiungono funzionalità, ma non modificano il comportamento esistente.</span><span class="sxs-lookup"><span data-stu-id="39fe0-109">As a general rule, layers add functionality, but do not modify existing behavior.</span></span> <span data-ttu-id="39fe0-110">Le funzioni di base, ad esempio, avranno gli stessi valori restituiti indipendentemente dal livello di debug di cui viene creata un'istanza, sebbene sia possibile fornire un output di debug aggiuntivo se viene creata un'istanza del livello debug.</span><span class="sxs-lookup"><span data-stu-id="39fe0-110">For example, core functions will have the same return values independent of the debug layer being instantiated, although additional debug output may be provided if the debug layer is instantiated.</span></span>

<span data-ttu-id="39fe0-111">Creare livelli quando un dispositivo viene creato chiamando [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice) e specificando uno o più valori [**di \_ \_ \_ flag di creazione del dispositivo d3d10**](/windows/desktop/api/D3D10/ne-d3d10-d3d10_create_device_flag) .</span><span class="sxs-lookup"><span data-stu-id="39fe0-111">Create layers when a device is created by calling [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice) and supplying one or more [**D3D10\_CREATE\_DEVICE\_FLAG**](/windows/desktop/api/D3D10/ne-d3d10-d3d10_create_device_flag) values.</span></span>

## <a name="debug-layer"></a><span data-ttu-id="39fe0-112">Livello di debug</span><span class="sxs-lookup"><span data-stu-id="39fe0-112">Debug Layer</span></span>

<span data-ttu-id="39fe0-113">Il livello di debug fornisce la convalida estesa di parametri e coerenza, ad esempio la convalida del collegamento shader e dell'associazione di risorse, la convalida della coerenza dei parametri e la segnalazione delle descrizioni degli errori.</span><span class="sxs-lookup"><span data-stu-id="39fe0-113">The debug layer provides extensive additional parameter and consistency validation (such as validating shader linkage and resource binding, validating parameter consistency, and reporting error descriptions).</span></span> <span data-ttu-id="39fe0-114">L'output generato dal livello di debug è costituito da una coda di stringhe accessibili tramite l' [**interfaccia ID3D10InfoQueue**](/windows/desktop/api/D3D10SDKLayers/nn-d3d10sdklayers-id3d10infoqueue) (vedere [personalizzare l'output di debug con ID3D10InfoQueue (Direct3D 10)](d3d10-graphics-programming-guide-api-features-layers-info-queue.md)).</span><span class="sxs-lookup"><span data-stu-id="39fe0-114">The output generated by the debug layer consists of a queue of strings which are accessible using the [**ID3D10InfoQueue Interface**](/windows/desktop/api/D3D10SDKLayers/nn-d3d10sdklayers-id3d10infoqueue) (see [Customize Debug Output with ID3D10InfoQueue (Direct3D 10)](d3d10-graphics-programming-guide-api-features-layers-info-queue.md)).</span></span> <span data-ttu-id="39fe0-115">Gli errori generati dal livello di base sono evidenziati con avvisi dal livello di debug.</span><span class="sxs-lookup"><span data-stu-id="39fe0-115">Errors generated by the core layer are highlighted with warnings by the debug layer.</span></span>

<span data-ttu-id="39fe0-116">Per creare un dispositivo che supporta il livello di debug, è necessario installare DirectX SDK (per ottenere D3D10SDKLayers.DLL), quindi specificare il flag di debug per la creazione di un \_ dispositivo d3d10 \_ quando si \_ chiama [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice).</span><span class="sxs-lookup"><span data-stu-id="39fe0-116">To create a device that supports the debug layer, you must install the DirectX SDK (to get D3D10SDKLayers.DLL), and then specify the D3D10\_CREATE\_DEVICE\_DEBUG flag when calling [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice).</span></span> <span data-ttu-id="39fe0-117">Naturalmente, l'esecuzione di un'applicazione con il livello di debug sarà sostanzialmente più lenta.</span><span class="sxs-lookup"><span data-stu-id="39fe0-117">Of course, running an application with the debug layer will be substantially slower.</span></span> <span data-ttu-id="39fe0-118">Per abilitare o disabilitare i messaggi di debug per le API D3DX10, chiamare [**D3DX10DebugMute**](d3dx10debugmute.md).</span><span class="sxs-lookup"><span data-stu-id="39fe0-118">To enable/disable debug messages for D3DX10 APIs, call [**D3DX10DebugMute**](d3dx10debugmute.md).</span></span>

<span data-ttu-id="39fe0-119">Quando il livello di debug elenca le perdite di memoria, viene restituito un elenco di puntatori dell'interfaccia oggetto insieme ai relativi nomi descrittivi.</span><span class="sxs-lookup"><span data-stu-id="39fe0-119">When the debug layer lists memory leaks, it outputs a list of object interface pointers along with their friendly names.</span></span> <span data-ttu-id="39fe0-120">Il nome descrittivo predefinito è " &lt; senza nome &gt; ".</span><span class="sxs-lookup"><span data-stu-id="39fe0-120">The default friendly name is "&lt;unnamed&gt;".</span></span> <span data-ttu-id="39fe0-121">È possibile impostare il nome descrittivo usando il metodo [**ID3D10DeviceChild:: SetPrivateData**](/windows/desktop/api/D3D10/nf-d3d10-id3d10devicechild-setprivatedata) e il GUID **WKPDID \_ D3DDebugObjectName** in D3Dcommon. h.</span><span class="sxs-lookup"><span data-stu-id="39fe0-121">You can set the friendly name by using the [**ID3D10DeviceChild::SetPrivateData**](/windows/desktop/api/D3D10/nf-d3d10-id3d10devicechild-setprivatedata) method and the **WKPDID\_D3DDebugObjectName** GUID that is in D3Dcommon.h.</span></span> <span data-ttu-id="39fe0-122">Ad esempio, per assegnare un nome a pTexture con il nome SDKLayer mytexture.jpg, usare il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="39fe0-122">For example, to name pTexture with a SDKLayer name of mytexture.jpg, use the following code:</span></span>


```
const char c_szName[] = "mytexture.jpg";
pTexture->SetPrivateData( WKPDID_D3DDebugObjectName, sizeof( c_szName ) - 1, c_szName );
```



<span data-ttu-id="39fe0-123">In genere, è necessario compilare queste chiamate fuori dalla versione di produzione.</span><span class="sxs-lookup"><span data-stu-id="39fe0-123">Typically, you should compile these calls out of your production version.</span></span>

## <a name="switch-to-reference-layer"></a><span data-ttu-id="39fe0-124">Livello passaggio a riferimento</span><span class="sxs-lookup"><span data-stu-id="39fe0-124">Switch-to-Reference Layer</span></span>

<span data-ttu-id="39fe0-125">Questo livello consente a un'applicazione di eseguire la transizione tra un dispositivo hardware (HAL) e un riferimento o un dispositivo software (REF).</span><span class="sxs-lookup"><span data-stu-id="39fe0-125">This layer enables an application to transition between a hardware device (HAL) and a reference or software device (REF).</span></span> <span data-ttu-id="39fe0-126">Per passare a un dispositivo, è prima necessario creare un dispositivo che supporta il livello di commutazione a riferimento (vedere [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice)) e quindi chiamare [**ID3D10SwitchToRef:: SetUseRef**](/windows/desktop/api/D3D10SDKLayers/nf-d3d10sdklayers-id3d10switchtoref-setuseref).</span><span class="sxs-lookup"><span data-stu-id="39fe0-126">To switch a device, you must first create a device that supports the switch-to-reference layer (see [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice)) and then call [**ID3D10SwitchToRef::SetUseRef**](/windows/desktop/api/D3D10SDKLayers/nf-d3d10sdklayers-id3d10switchtoref-setuseref).</span></span>

<span data-ttu-id="39fe0-127">Tutti gli Stati dei dispositivi, le risorse e gli oggetti vengono mantenuti tramite questa transizione del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="39fe0-127">All device states, resources and objects are maintained through this device transition.</span></span> <span data-ttu-id="39fe0-128">Tuttavia, talvolta non è possibile trovare esattamente una corrispondenza con i dati delle risorse.</span><span class="sxs-lookup"><span data-stu-id="39fe0-128">However, it is sometimes not possible to exactly match resource data.</span></span> <span data-ttu-id="39fe0-129">Ciò è dovuto al fatto che alcune informazioni sono disponibili per un dispositivo hardware che non è disponibile per un dispositivo di riferimento.</span><span class="sxs-lookup"><span data-stu-id="39fe0-129">This is due to the fact that some information is available to a hardware device that is not available to a reference device.</span></span>

<span data-ttu-id="39fe0-130">Quasi tutte le applicazioni in tempo reale usano l'implementazione HAL della pipeline.</span><span class="sxs-lookup"><span data-stu-id="39fe0-130">Virtually all real-time applications use the HAL implementation of the pipeline.</span></span> <span data-ttu-id="39fe0-131">Quando la pipeline passa da un dispositivo hardware a un dispositivo di riferimento, le operazioni di rendering vengono eseguite contemporaneamente sia nell'hardware che nel software.</span><span class="sxs-lookup"><span data-stu-id="39fe0-131">When the pipeline is switched from a hardware device to a reference device, rendering operations are done simultaneously in both hardware and software.</span></span> <span data-ttu-id="39fe0-132">Con il rendering del dispositivo software, sarà necessario scaricare le risorse nella memoria di sistema.</span><span class="sxs-lookup"><span data-stu-id="39fe0-132">As the software device is rendering, it will require that resources are downloaded to system memory.</span></span> <span data-ttu-id="39fe0-133">Questa operazione potrebbe richiedere la rimozione di altre risorse memorizzate nella cache di sistema per fare spazio.</span><span class="sxs-lookup"><span data-stu-id="39fe0-133">This may require other resources cached in system memory to be evicted to make room.</span></span>

> [!Note]  
> <span data-ttu-id="39fe0-134">Questa funzionalità di livello switch-to-Reference è supportata solo in Direct3D 10 e Direct3D 10,1 e non è più supportata in Direct3D 11 e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="39fe0-134">This switch-to-reference-layer feature is supported only in Direct3D 10 and Direct3D 10.1, and is no longer supported in Direct3D 11 and later versions.</span></span>

 

## <a name="thread-safe-layer"></a><span data-ttu-id="39fe0-135">Livello Thread-Safe</span><span class="sxs-lookup"><span data-stu-id="39fe0-135">Thread-Safe Layer</span></span>

<span data-ttu-id="39fe0-136">Questo livello è progettato per consentire alle applicazioni multithread di accedere al dispositivo da più thread.</span><span class="sxs-lookup"><span data-stu-id="39fe0-136">This layer is designed to allow multi-threaded applications to access the device from multiple threads.</span></span>

<span data-ttu-id="39fe0-137">Un'applicazione Direct3D 10 può controllare la sincronizzazione di un dispositivo usando le funzioni del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="39fe0-137">A Direct3D 10 application can control a device synchronization using device functions.</span></span> <span data-ttu-id="39fe0-138">Questo consente a un'applicazione di abilitare/disabilitare le sezioni critiche (abilitazione/disabilitazione temporanea della protezione multithreading) e di prendere/rilasciare un blocco di sezione critica su più punti di ingresso dell'API Direct3D 10.</span><span class="sxs-lookup"><span data-stu-id="39fe0-138">This enables an application to enable/disable critical sections (temporarily enabling/disabling multithreading protection), and take/release a critical-section lock over multiple Direct3D 10 API entry points.</span></span> <span data-ttu-id="39fe0-139">Il livello thread-safe è abilitato per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="39fe0-139">The thread-safe layer is enabled by default.</span></span> <span data-ttu-id="39fe0-140">Per le applicazioni a thread singolo, il livello thread-safe non ha alcun effetto sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="39fe0-140">For single-threaded applications, the thread-safe layer has no impact on performance.</span></span>



|                                                                                                                                             |
|---------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="39fe0-141">Differenze tra Direct3D 9 e Direct3D 10:</span><span class="sxs-lookup"><span data-stu-id="39fe0-141">Differences between Direct3D 9 and Direct3D 10:</span></span><br/> <span data-ttu-id="39fe0-142">A differenza di Direct3D 9, l'impostazione predefinita dell'API Direct3D 10 è completamente thread-safe.</span><span class="sxs-lookup"><span data-stu-id="39fe0-142">Unlike Direct3D 9, the Direct3D 10 API defaults to fully thread-safe.</span></span><br/> |



 

## <a name="related-topics"></a><span data-ttu-id="39fe0-143">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="39fe0-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="39fe0-144">Funzionalità API (Direct3D 10)</span><span class="sxs-lookup"><span data-stu-id="39fe0-144">API Features (Direct3D 10)</span></span>](d3d10-graphics-programming-guide-api-features.md)
</dt> </dl>

 

 




