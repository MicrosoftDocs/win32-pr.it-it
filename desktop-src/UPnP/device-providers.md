---
title: Provider di dispositivi
description: I provider di dispositivi sono oggetti registrati che il computer inizia a ogni avvio del sistema.
ms.assetid: 80c08993-0a8b-4ee9-93cd-bcc3c00e843b
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 67fac270342830045fc3bac9f0573f283d87dc6a
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "104117862"
---
# <a name="device-providers"></a><span data-ttu-id="aead0-103">Provider di dispositivi</span><span class="sxs-lookup"><span data-stu-id="aead0-103">Device Providers</span></span>

<span data-ttu-id="aead0-104">I provider di dispositivi sono oggetti registrati che il computer inizia a ogni avvio del sistema.</span><span class="sxs-lookup"><span data-stu-id="aead0-104">Device providers are registered objects that the computer starts on every system startup.</span></span> <span data-ttu-id="aead0-105">I provider di dispositivi registrano e annullano la registrazione dei dispositivi in esecuzione con l'host del dispositivo in risposta a un evento.</span><span class="sxs-lookup"><span data-stu-id="aead0-105">Device providers register and unregister running devices with the device host in response to some event.</span></span> <span data-ttu-id="aead0-106">Questi dispositivi sono dispositivi che sono stati avviati automaticamente al momento dell'avvio del sistema.</span><span class="sxs-lookup"><span data-stu-id="aead0-106">These devices are devices that have been automatically started at system startup time.</span></span> <span data-ttu-id="aead0-107">Per motivi di sicurezza, un provider di dispositivi deve essere in genere eseguito come [LocalService](/windows/desktop/Services/localservice-account), anziché [LocalSystem](/windows/desktop/Services/localsystem-account).</span><span class="sxs-lookup"><span data-stu-id="aead0-107">For security reasons, a device provider should generally run as [LocalService](/windows/desktop/Services/localservice-account), rather than [LocalSystem](/windows/desktop/Services/localsystem-account).</span></span>

<span data-ttu-id="aead0-108">I provider di dispositivi possono essere usati per i dispositivi temporanei.</span><span class="sxs-lookup"><span data-stu-id="aead0-108">Device providers can be used for transient devices.</span></span> <span data-ttu-id="aead0-109">I provider di dispositivi possono anche essere usati per collegare i dispositivi ai supporti sottoposti a polling.</span><span class="sxs-lookup"><span data-stu-id="aead0-109">Device providers can also be used to bridge devices to polled media.</span></span> <span data-ttu-id="aead0-110">Ad esempio, un dispositivo periferico, ad esempio un lettore musicale digitale, è connesso a un computer tramite una porta seriale.</span><span class="sxs-lookup"><span data-stu-id="aead0-110">For example, a peripheral device such as a digital music player is connected to a computer via a serial port.</span></span> <span data-ttu-id="aead0-111">Per esporre Music Player come dispositivo basato su UPnP, sono necessari un oggetto controllo dispositivo e un set di oggetti servizio.</span><span class="sxs-lookup"><span data-stu-id="aead0-111">To expose the music player as a UPnP-based device, a device control object and a set of service objects are required.</span></span> <span data-ttu-id="aead0-112">Questi oggetti implementano le azioni lettore musicale basate su UPnP come comandi seriali.</span><span class="sxs-lookup"><span data-stu-id="aead0-112">These objects implement the UPnP-based music player actions as serial commands.</span></span> <span data-ttu-id="aead0-113">Tuttavia, il lettore musicale deve essere collegato alla porta seriale e disponibile per il controllo prima che questi oggetti vengano registrati.</span><span class="sxs-lookup"><span data-stu-id="aead0-113">However, the music player must be plugged into the serial port and available for control before these objects are registered.</span></span>

<span data-ttu-id="aead0-114">Poiché la porta seriale non offre un meccanismo di notifica esplicito quando i dispositivi sono connessi, è necessario il codice di polling.</span><span class="sxs-lookup"><span data-stu-id="aead0-114">Because the serial port does not offer an explicit notification mechanism when devices are connected, polling code is required.</span></span> <span data-ttu-id="aead0-115">Questo codice può essere implementato in un oggetto provider di dispositivi, in un servizio o in un'applicazione autonoma.</span><span class="sxs-lookup"><span data-stu-id="aead0-115">This code can be implemented in a device provider object, a service, or in a standalone application.</span></span> <span data-ttu-id="aead0-116">Quando il computer viene avviato, l'host del dispositivo crea un'istanza dell'oggetto provider di dispositivi e quindi richiama il metodo [**Start**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-start) .</span><span class="sxs-lookup"><span data-stu-id="aead0-116">When the computer is started, the device host instantiates the device provider object, and then invokes its [**Start**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-start) method.</span></span> <span data-ttu-id="aead0-117">Quando il provider di dispositivi rileva la presenza di un dispositivo Music Player, crea un'istanza dell'oggetto di controllo del dispositivo appropriato e lo registra chiamando [**IUPnPRegistrar:: RegisterRunningDevice**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerrunningdevice).</span><span class="sxs-lookup"><span data-stu-id="aead0-117">When the device provider detects the presence of a music player device, it instantiates the appropriate device control object and registers it by calling [**IUPnPRegistrar::RegisterRunningDevice**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerrunningdevice).</span></span> <span data-ttu-id="aead0-118">Questo metodo pubblica il dispositivo e lo annuncia alla rete basata su UPnP.</span><span class="sxs-lookup"><span data-stu-id="aead0-118">This method publishes the device and announces it to the UPnP-based network.</span></span>

<span data-ttu-id="aead0-119">La stessa funzionalità può essere eseguita anche implementando un servizio che esegue il polling della porta seriale.</span><span class="sxs-lookup"><span data-stu-id="aead0-119">The same functionality can also be achieved by implementing a service that polls the serial port.</span></span> <span data-ttu-id="aead0-120">Tuttavia, i provider di dispositivi semplificano le operazioni richiedendo solo le funzionalità di base, ovvero il polling, da implementare perché i provider di dispositivi si basano sull'host del dispositivo per avviarli e arrestarli.</span><span class="sxs-lookup"><span data-stu-id="aead0-120">However, device providers simplify things by requiring only the core functionality—the polling—to be implemented because device providers rely on the device host to start and stop them.</span></span> <span data-ttu-id="aead0-121">L'uso di provider di dispositivi è più semplice dell'implementazione di un servizio.</span><span class="sxs-lookup"><span data-stu-id="aead0-121">Using device providers is simpler than implementing a service.</span></span>

<span data-ttu-id="aead0-122">Al momento della registrazione e, a ogni avvio del sistema successivo, il computer crea un'istanza dell'oggetto provider di dispositivi e quindi richiama il metodo [**IUPnPDeviceProvider:: Start**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-start) , passandogli la stringa di inizializzazione specificata durante la registrazione.</span><span class="sxs-lookup"><span data-stu-id="aead0-122">At registration time, and on every subsequent system startup, the computer instantiates the device provider object, and then invokes its [**IUPnPDeviceProvider::Start**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-start) method, passing it the initialization string specified during registration.</span></span>

<span data-ttu-id="aead0-123">Una volta chiamato il metodo [**Start**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-start) , il provider di dispositivi esegue tutte le operazioni di elaborazione necessarie e, quando necessario, il provider di dispositivi registra i dispositivi chiamando [**IUPnPRegistrar:: RegisterRunningDevice**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerrunningdevice), come descritto nella sezione [registrazione di un dispositivo ospitato con l'host del dispositivo](registering-a-hosted-device-with-the-device-host.md).</span><span class="sxs-lookup"><span data-stu-id="aead0-123">Once the [**Start**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-start) method is called, the device provider performs any necessary processing, and when necessary, the device provider registers devices by calling [**IUPnPRegistrar::RegisterRunningDevice**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerrunningdevice), as described in the section [Registering a Hosted Device with the Device Host](registering-a-hosted-device-with-the-device-host.md).</span></span>

<span data-ttu-id="aead0-124">Quando il computer viene arrestato, l'host del dispositivo richiama il metodo [**IUPnPDeviceProvider:: Stop**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-stop) per indicare che il provider di dispositivi termina le operazioni.</span><span class="sxs-lookup"><span data-stu-id="aead0-124">When the computer is shut down, the device host invokes the [**IUPnPDeviceProvider::Stop**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-stop) method to indicate that the device provider terminate its operations.</span></span>

 

 