---
title: Panoramica dell'architettura
description: Questa panoramica dell'architettura fornisce il contesto per l'API Windows Touch per tablet e touch Technologies e spiega come si inserisce nella più ampia architettura di Windows 7.
ms.assetid: b284e96f-0998-408c-ae84-92a3acdc3014
keywords:
- Windows Touch, panoramica dell'architettura
- Windows Touch, modifiche
- Windows Touch, messaggi
- Windows Touch, inerzia
- Windows Touch, movimenti
- movimenti, informazioni
- modifiche, informazioni
- inerzia, informazioni
- processore di manipolazione, panoramica dell'architettura
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b807113211d77f0aad0ed01fc24570d033063474
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "103963099"
---
# <a name="architectural-overview"></a><span data-ttu-id="fe7f6-112">Panoramica dell'architettura</span><span class="sxs-lookup"><span data-stu-id="fe7f6-112">Architectural Overview</span></span>

<span data-ttu-id="fe7f6-113">Questa panoramica dell'architettura fornisce il contesto per l'API Windows Touch per tablet e touch Technologies e spiega come si inserisce nella più ampia architettura di Windows 7.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-113">This architectural overview provides context for the Windows Touch API for Tablet and Touch Technologies and explains how it fits into the larger Windows 7 architecture.</span></span>

## <a name="messages-for-windows-touch-input-and-gestures"></a><span data-ttu-id="fe7f6-114">Messaggi per l'input e i movimenti di Windows Touch</span><span class="sxs-lookup"><span data-stu-id="fe7f6-114">Messages for Windows Touch Input and Gestures</span></span>

<span data-ttu-id="fe7f6-115">Le funzionalità di messaggistica per Windows Touch sono abilitate tramite l'ascolto e l'interpretazione dei messaggi durante l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-115">Messaging features for Windows Touch are enabled by listening and interpreting messages during execution.</span></span> <span data-ttu-id="fe7f6-116">Nella figura seguente viene illustrato come i messaggi vengono generati dall'hardware e inviati alle applicazioni da Windows 7.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-116">The following illustration shows how messages are generated from hardware and sent to applications by Windows 7.</span></span>

![illustrazione che illustra in che modo Windows 7 Invia messaggi dall'hardware multitouch a un'applicazione](images/wm-multitouch-messaging.png)

<span data-ttu-id="fe7f6-118">Nella colonna più a sinistra dell'illustrazione, l'hardware sensibile al tocco riceve l'input da un utente.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-118">In the leftmost column of the illustration, touch-sensitive hardware receives input from a user.</span></span> <span data-ttu-id="fe7f6-119">Un driver comunica quindi tra l'hardware e il sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-119">A driver then communicates between the hardware and the OS.</span></span> <span data-ttu-id="fe7f6-120">Successivamente, il sistema operativo genera un messaggio [**WM \_ touch**](wm-touchdown.md) o [**WM \_ gesture**](wm-gesture.md) che viene quindi inviato a HWND di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-120">Next, the OS generates a [**WM\_TOUCH**](wm-touchdown.md) or [**WM\_GESTURE**](wm-gesture.md) message that is then sent to an application's HWND.</span></span> <span data-ttu-id="fe7f6-121">L'applicazione aggiorna quindi l'interfaccia utente in base alle informazioni incapsulate nel messaggio.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-121">The application then updates the UI given the information encapsulated in the message.</span></span>

<span data-ttu-id="fe7f6-122">Per impostazione predefinita, le applicazioni ricevono movimenti.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-122">Applications receive gestures by default.</span></span> <span data-ttu-id="fe7f6-123">A meno che un'applicazione non venga registrata per i messaggi di input Windows Touch con la funzione [**RegisterTouchWindow**](/windows/desktop/api/winuser/nf-winuser-registertouchwindow) , le notifiche per i movimenti (messaggi con [**\_ movimento WM**](wm-gesture.md) ) vengono create da Windows e inviate alla finestra dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-123">Unless an application registers for Windows Touch input messages with the [**RegisterTouchWindow**](/windows/desktop/api/winuser/nf-winuser-registertouchwindow) function, notifications for gestures ([**WM\_GESTURE**](wm-gesture.md) messages) are created by Windows and sent to that application window.</span></span> <span data-ttu-id="fe7f6-124">Se una finestra dell'applicazione si registra per ricevere i messaggi di tocco, le notifiche per l'input di Windows Touch (messaggi [**WM \_ touch**](wm-touchdown.md) ) vengono inviate alla finestra dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-124">If an application Window registers to receive touch messages, notifications for Windows Touch input ([**WM\_TOUCH**](wm-touchdown.md) messages) are sent to that application window.</span></span> <span data-ttu-id="fe7f6-125">I messaggi di Windows Touch e gesture sono greedy nel senso che dopo il tocco o un movimento inizia in una finestra dell'applicazione, tutti i messaggi vengono inviati a tale applicazione fino al completamento del movimento o al completamento del tocco principale.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-125">Windows Touch and gesture messages are greedy in the sense that after a touch is made or a gesture begins on an application Window, all messages are sent to that application until the gesture completes or the primary touch is completed.</span></span>

<span data-ttu-id="fe7f6-126">Per il supporto legacy, Windows interpreta i messaggi di [**\_ movimento WM**](wm-gesture.md) se vengono propagati, quindi INVIeranno o pubblicheranno messaggi appropriati che eseguono il mapping al movimento.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-126">For legacy support, Windows interprets [**WM\_GESTURE**](wm-gesture.md) messages if they are bubbled up and then will SEND or POST appropriate messages that map to the gesture.</span></span> <span data-ttu-id="fe7f6-127">Per evitare di suddividere il supporto legacy, assicurarsi di eseguire il rollforward \_ dei messaggi con movimento WM usando [DefWindowProc](/windows/win32/api/winuser/nf-winuser-defwindowproca).</span><span class="sxs-lookup"><span data-stu-id="fe7f6-127">To avoid breaking legacy support, make sure that you forward WM\_GESTURE messages using [DefWindowProc](/windows/win32/api/winuser/nf-winuser-defwindowproca).</span></span> <span data-ttu-id="fe7f6-128">Altre informazioni sul supporto legacy sono disponibili nella sezione Panoramica dei [movimenti tocco di Windows](windows-touch-gestures-overview.md).</span><span class="sxs-lookup"><span data-stu-id="fe7f6-128">More information on legacy support can be found in the section [Windows Touch Gestures Overview](windows-touch-gestures-overview.md).</span></span>

## <a name="manipulations-and-inertia"></a><span data-ttu-id="fe7f6-129">Modifiche e inerzia</span><span class="sxs-lookup"><span data-stu-id="fe7f6-129">Manipulations and Inertia</span></span>

<span data-ttu-id="fe7f6-130">I programmatori Windows Touch devono essere in grado di interpretare i movimenti da più origini in modo significativo per il movimento.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-130">Windows Touch programmers must be able to interpret gestures from multiple sources in a manner that is meaningful for the gesture taking place.</span></span> <span data-ttu-id="fe7f6-131">Microsoft fornisce l'API di manipolazione per eseguire questi calcoli.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-131">Microsoft provides the manipulation API to perform these calculations.</span></span> <span data-ttu-id="fe7f6-132">Le modifiche sono essenzialmente movimenti con i valori associati che descrivono l'intero movimento.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-132">Manipulations are essentially gestures with values associated with them that describe the entire gesture.</span></span> <span data-ttu-id="fe7f6-133">Dopo aver connesso i dati di input al processore di manipolazione, è possibile recuperare informazioni pertinenti all'azione che l'utente esegue sull'oggetto.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-133">After you connect the input data to the manipulation processor, you can retrieve information pertinent to action that the user makes on the object.</span></span> <span data-ttu-id="fe7f6-134">Nella figura seguente viene illustrato un modo in cui è possibile utilizzare le modifiche.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-134">The following figure shows one way you can use manipulations.</span></span>

![illustrazione che mostra i messaggi di Windows Touch passati al processore di manipolazione di un oggetto, che gestisce gli eventi con l' \- interfaccia IManipulationEvents](images/manipulation-arch.png)

<span data-ttu-id="fe7f6-136">Nell'angolo in alto a sinistra dell'illustrazione, l'utente ha toccato la schermata, che consente di creare messaggi di tocco.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-136">In the top left of the illustration, the user has touched the screen, which creates touch messages.</span></span> <span data-ttu-id="fe7f6-137">Questi messaggi contengono una coordinata x e una coordinata y che vengono usati per determinare l'oggetto attivo.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-137">These messages contain an x-coordinate and a y-coordinate that are used to determine the object that is in focus.</span></span> <span data-ttu-id="fe7f6-138">L'oggetto in stato attivo contiene un processore di manipolazione.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-138">The object in focus contains a manipulation processor.</span></span> <span data-ttu-id="fe7f6-139">Successivamente, nel messaggio [**WM \_ touch**](wm-touchdown.md) con il flag **TOUCHEVENTF \_ up** , l'oggetto nello stato attivo dell'utente è selezionato, viene fatto riferimento al processore di manipolazione e il messaggio viene inviato al processore di manipolazione.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-139">Next, on the [**WM\_TOUCH**](wm-touchdown.md) message with the **TOUCHEVENTF\_UP** flag, the object in the user's focus is selected, the manipulation processor is referenced, and the message is sent to the manipulation processor.</span></span> <span data-ttu-id="fe7f6-140">I successivi messaggi **WM \_ touch** associati al contatto vengono inviati al processore di manipolazione fino a quando non viene ricevuto il messaggio **WM \_ touch** con il flag **TOUCHEVENTF \_ up** e l'oggetto selezionato viene dereferenziato.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-140">Subsequent **WM\_TOUCH** messages associated with this contact are sent to the manipulation processor until the **WM\_TOUCH** message with the **TOUCHEVENTF\_UP** flag is received and the selected object is dereferenced.</span></span> <span data-ttu-id="fe7f6-141">Nella sezione inferiore destra dell'illustrazione, un sink di evento di manipolazione che implementa l'interfaccia [**\_ IManipulationEvents**](/windows/win32/api/manipulations/nn-manipulations-_imanipulationevents) viene utilizzato per gestire gli eventi di manipolazione, che vengono generati durante la creazione dei messaggi di tocco.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-141">In the bottom right section of the illustration, a manipulation event sink that implements the [**\_IManipulationEvents**](/windows/win32/api/manipulations/nn-manipulations-_imanipulationevents) interface is used to handle the manipulation events, which are raised while the touch messages are being created.</span></span> <span data-ttu-id="fe7f6-142">Il sink di evento può eseguire aggiornamenti all'interfaccia in base agli eventi di manipolazione mentre si verificano.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-142">The event sink can perform updates to the interface based on the manipulation events while they occur.</span></span>

<span data-ttu-id="fe7f6-143">Nelle applicazioni Windows Touch, è comune incorporare una fisica semplice, in modo che gli oggetti si arrestino senza interruzioni, anziché arrestarsi bruscamente quando non vengono più modificati.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-143">In Windows Touch applications, it's common to incorporate simple physics so that objects smoothly come to a stop, rather than abruptly stop when they are no longer being touched.</span></span> <span data-ttu-id="fe7f6-144">Microsoft fornisce l'API di inerzia per eseguire i calcoli per questa semplice fisica, in modo che l'applicazione possa comportarsi in modo analogo ad altre applicazioni.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-144">Microsoft provides the Inertia API to perform the calculations for these simple physics so that your application can behave in a manner similar to other applications.</span></span> <span data-ttu-id="fe7f6-145">Questo consente anche di risparmiare il lavoro richiesto per creare funzionalità di fisica affidabili.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-145">This also saves you the effort required to create robust physics functionality.</span></span> <span data-ttu-id="fe7f6-146">Nella figura seguente viene illustrato come è possibile utilizzare l'inerzia.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-146">The following figure shows how you can use inertia.</span></span>

![illustrazione che mostra i messaggi di Windows Touch passati all'interfaccia IInertiaProcessor di un oggetto, che genera eventi con \- interfaccia IManipulationEvents](images/inertia-arch.png)

<span data-ttu-id="fe7f6-148">Si notino le analogie tra inerzia e manipolazione.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-148">Note the similarities between inertia and manipulation.</span></span> <span data-ttu-id="fe7f6-149">L'unica differenza tra i due è che, nel caso di inerzia, i messaggi interpretati vengono consegnati a un processore di inerzia invece che a un processore di manipolazione e il processore di inerzia genera gli eventi.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-149">The only difference between the two is that in the case of inertia, interpreted messages are handed to an inertia processor rather than a manipulation processor and the inertia processor raises the events.</span></span> <span data-ttu-id="fe7f6-150">Nella parte superiore sinistra dell'illustrazione, nel messaggio [**WM \_ touch**](wm-touchdown.md) con il flag **TOUCHEVENTF \_ up** , i messaggi di tocco vengono usati per identificare un oggetto con lo stato attivo che contiene un processore di inerzia e un processore di manipolazione.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-150">In the top left of the illustration, on the [**WM\_TOUCH**](wm-touchdown.md) message with the **TOUCHEVENTF\_UP** flag, touch messages are used to identify an object in focus that contains an inertia processor and a manipulation processor.</span></span> <span data-ttu-id="fe7f6-151">I successivi messaggi **WM \_ touch** vengono inviati al processore di manipolazione e il processore di manipolazione esegue gli aggiornamenti all'interfaccia utente dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-151">Subsequent **WM\_TOUCH** messages are sent to the manipulation processor and the manipulation processor performs updates to the application UI.</span></span> <span data-ttu-id="fe7f6-152">Al termine della manipolazione, i valori di velocità della manipolazione vengono usati per configurare un processore di inerzia.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-152">After the manipulation completes, velocity values from the manipulation are used to set up an inertia processor.</span></span> <span data-ttu-id="fe7f6-153">Come illustrato nella colonna centrale, il metodo [**Process**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-process) o [**ProcessTime**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-processtime) viene chiamato sull'interfaccia [**IInertiaProcessor**](/windows/desktop/api/manipulations/nn-manipulations-iinertiaprocessor) usando un timer o un altro ciclo in un thread separato fino a quando le chiamate indicano che l'elaborazione del processore non è terminata.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-153">As illustrated in the middle column, the [**Process**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-process) or [**ProcessTime**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-processtime) method is called on the [**IInertiaProcessor**](/windows/desktop/api/manipulations/nn-manipulations-iinertiaprocessor) interface using a timer or other loop in a separate thread until the calls indicate the processor is finished processing.</span></span> <span data-ttu-id="fe7f6-154">Durante queste chiamate vengono generati gli eventi di manipolazione, che vengono gestiti da un sink di evento di manipolazione basato sull'interfaccia [**\_ IManipulationEvents**](/windows/win32/api/manipulations/nn-manipulations-_imanipulationevents) .</span><span class="sxs-lookup"><span data-stu-id="fe7f6-154">While these calls are made, manipulation events are raised, which are handled by a manipulation event sink based on the [**\_IManipulationEvents**](/windows/win32/api/manipulations/nn-manipulations-_imanipulationevents) interface.</span></span> <span data-ttu-id="fe7f6-155">Nella parte inferiore destra dell'illustrazione, questo sink di evento esegue quindi gli aggiornamenti all'interfaccia utente dell'applicazione in base agli eventi di manipolazione quando si verificano tramite gestori eventi nel sink di evento.</span><span class="sxs-lookup"><span data-stu-id="fe7f6-155">At the bottom right section of the illustration, this event sink then performs updates to the application UI based on manipulation events when they occur through event handlers in the event sink.</span></span>

## <a name="related-topics"></a><span data-ttu-id="fe7f6-156">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="fe7f6-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="fe7f6-157">Guida per programmatori</span><span class="sxs-lookup"><span data-stu-id="fe7f6-157">Programming Guide</span></span>](programming-guide.md)
</dt> </dl>

 

 