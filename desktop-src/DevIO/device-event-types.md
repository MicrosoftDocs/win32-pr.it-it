---
description: Per determinare il tipo di evento del dispositivo durante l'elaborazione di un \_ messaggio WM DEVICECHANGE, esaminare il parametro wParam.
ms.assetid: 17078548-879d-4a11-a268-27d1f30180ab
title: Tipi di evento del dispositivo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 35ece6b810ba4d1310638bbfbdcdcaa7f67f79d8
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104049185"
---
# <a name="device-event-types"></a><span data-ttu-id="fcfb8-103">Tipi di evento del dispositivo</span><span class="sxs-lookup"><span data-stu-id="fcfb8-103">Device Event Types</span></span>

<span data-ttu-id="fcfb8-104">Per determinare il tipo di evento del dispositivo durante l'elaborazione di un messaggio [**WM \_ DEVICECHANGE**](wm-devicechange.md) , esaminare il parametro *wParam* .</span><span class="sxs-lookup"><span data-stu-id="fcfb8-104">To determine the device event type when processing a [**WM\_DEVICECHANGE**](wm-devicechange.md) message, examine the *wParam* parameter.</span></span> <span data-ttu-id="fcfb8-105">Il valore di *wParam* determina il significato dei dati specifici dell'evento nel parametro *lParam* .</span><span class="sxs-lookup"><span data-stu-id="fcfb8-105">The value of *wParam* determines the meaning of the event-specific data in the *lParam* parameter.</span></span> <span data-ttu-id="fcfb8-106">In generale, i dati specifici dell'evento identificano il dispositivo e forniscono dettagli aggiuntivi sull'evento.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-106">In general, the event-specific data identifies the device and provides additional detail about the event.</span></span> <span data-ttu-id="fcfb8-107">Il formato di questi dati dipende dal tipo di dispositivo, ma i primi byte hanno sempre lo stesso formato della struttura HDR per [**la \_ trasmissione \_ dello sviluppatore**](/windows/desktop/api/Dbt/ns-dbt-dev_broadcast_hdr) .</span><span class="sxs-lookup"><span data-stu-id="fcfb8-107">The format of this data depends on the device type, but the first few bytes always have the same format as the [**DEV\_BROADCAST\_HDR**](/windows/desktop/api/Dbt/ns-dbt-dev_broadcast_hdr) structure.</span></span> <span data-ttu-id="fcfb8-108">Per determinare il formato dei dati, controllare il membro **\_ DeviceType di dbch** .</span><span class="sxs-lookup"><span data-stu-id="fcfb8-108">To determine the format of the data, check the **dbch\_devicetype** member.</span></span>

<span data-ttu-id="fcfb8-109">Il sistema trasmette un evento del dispositivo di tipo [DBT \_ DEVICEARRIVAL](dbt-devicearrival.md) (ovvero un messaggio [**WM \_ DEVICECHANGE**](wm-devicechange.md) con *wParam* impostato su DBT \_ DEVICEARRIVAL) ogni volta che un dispositivo è stato inserito ed è disponibile per l'uso.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-109">The system broadcasts a device event of type [DBT\_DEVICEARRIVAL](dbt-devicearrival.md) (that is, a [**WM\_DEVICECHANGE**](wm-devicechange.md) message with *wParam* set to DBT\_DEVICEARRIVAL) whenever a device has been inserted and is available for use.</span></span> <span data-ttu-id="fcfb8-110">Le applicazioni in genere controllano il tipo di dispositivo e iniziano a usare immediatamente il dispositivo, se appropriato.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-110">Applications typically check the device type and begin using the device immediately if it is appropriate.</span></span>

<span data-ttu-id="fcfb8-111">Il sistema trasmette un evento del dispositivo [ \_ DEVICEQUERYREMOVE DBT](dbt-devicequeryremove.md) per richiedere l'autorizzazione per la rimozione di un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-111">The system broadcasts a [DBT\_DEVICEQUERYREMOVE](dbt-devicequeryremove.md) device event to request permission to remove a device.</span></span> <span data-ttu-id="fcfb8-112">Per determinare se è necessario il dispositivo, un'applicazione può visualizzare una finestra di dialogo per richiedere istruzioni all'utente.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-112">To determine whether it needs the device, an application can display a dialog box to prompt the user for instructions.</span></span> <span data-ttu-id="fcfb8-113">Se un'applicazione determina la necessità del dispositivo, può negare questa richiesta e annullare la rimozione restituendo la query di trasmissione \_ \_ Deny.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-113">If an application determines that it needs the device, it can deny this request and cancel the removal by returning BROADCAST\_QUERY\_DENY.</span></span> <span data-ttu-id="fcfb8-114">Se l'applicazione non richiede il dispositivo, deve restituire **true**.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-114">If the application does not need the device, it must return **TRUE**.</span></span> <span data-ttu-id="fcfb8-115">Il sistema invia immediatamente un messaggio [DBT \_ DEVICEQUERYREMOVEFAILED](dbt-devicequeryremovefailed.md) se un'applicazione o un driver ha annullato una richiesta precedente per rimuovere un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-115">The system immediately sends a [DBT\_DEVICEQUERYREMOVEFAILED](dbt-devicequeryremovefailed.md) message if any application or driver canceled a previous request to remove a device.</span></span>

<span data-ttu-id="fcfb8-116">Il sistema trasmette un evento del dispositivo [ \_ DEVICEREMOVEPENDING di DBT](dbt-deviceremovepending.md) come ultimo avviso prima della rimozione di un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-116">The system broadcasts a [DBT\_DEVICEREMOVEPENDING](dbt-deviceremovepending.md) device event as a last warning before a device is removed.</span></span> <span data-ttu-id="fcfb8-117">A questo punto, l'applicazione non può annullare la rimozione, quindi se usa il dispositivo deve prepararsi per la rimozione per evitare la perdita di dati.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-117">At this point, the application cannot cancel the removal, so if it is using the device it must prepare for its removal to prevent loss of data.</span></span> <span data-ttu-id="fcfb8-118">Questa operazione è particolarmente importante quando viene rimossa una connessione di rete.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-118">This is especially important when a network connection is being removed.</span></span> <span data-ttu-id="fcfb8-119">L'applicazione deve determinare se uno dei relativi file o pipe aperti è presente in tale connessione.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-119">The application must determine whether any of its open files or pipes are on that connection.</span></span> <span data-ttu-id="fcfb8-120">Questa operazione può essere eseguita confrontando l'identificatore di risorsa di rete nei dati specifici dell'evento del messaggio con gli identificatori di risorsa ottenuti in precedenza per i file e le pipe.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-120">It can do this by comparing the network resource identifier in the event-specific data of the message with the resource identifiers previously obtained for the files and pipes.</span></span> <span data-ttu-id="fcfb8-121">Il sistema trasmette un evento [DBT \_ DEVICEREMOVECOMPLETE](dbt-deviceremovecomplete.md) Device quando un dispositivo è stato rimosso e non è più disponibile.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-121">The system broadcasts a [DBT\_DEVICEREMOVECOMPLETE](dbt-deviceremovecomplete.md) device event when a device has been removed and is no longer available.</span></span>

<span data-ttu-id="fcfb8-122">Il sistema trasmette un evento [DBT \_ QUERYCHANGECONFIG](dbt-querychangeconfig.md) Device per richiedere l'autorizzazione per modificare la configurazione corrente (dock o Undock).</span><span class="sxs-lookup"><span data-stu-id="fcfb8-122">The system broadcasts a [DBT\_QUERYCHANGECONFIG](dbt-querychangeconfig.md) device event to request permission to change the current configuration (dock or undock).</span></span> <span data-ttu-id="fcfb8-123">Qualsiasi applicazione può restituire la \_ query broadcast \_ Deny per negare la richiesta e annullare la modifica.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-123">Any application can return BROADCAST\_QUERY\_DENY to deny the request and cancel the change.</span></span> <span data-ttu-id="fcfb8-124">Se un'applicazione nega la richiesta, il sistema invia un messaggio [DBT \_ CONFIGCHANGECANCELED](dbt-configchangecanceled.md) .</span><span class="sxs-lookup"><span data-stu-id="fcfb8-124">If an application denies the request, the system sends a [DBT\_CONFIGCHANGECANCELED](dbt-configchangecanceled.md) message.</span></span> <span data-ttu-id="fcfb8-125">Se la configurazione corrente è cambiata, a causa di un ancoraggio o di Undock, il sistema invia un messaggio [DBT \_ CONFIGCHANGED](dbt-configchanged.md) .</span><span class="sxs-lookup"><span data-stu-id="fcfb8-125">If the current configuration has changed, due to a dock or undock, the system sends a [DBT\_CONFIGCHANGED](dbt-configchanged.md) message.</span></span>

<span data-ttu-id="fcfb8-126">Il sistema trasmette un evento del dispositivo [ \_ DEVICETYPESPECIFIC di DBT](dbt-devicetypespecific.md) ogni volta che si verifica un evento specifico del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-126">The system broadcasts a [DBT\_DEVICETYPESPECIFIC](dbt-devicetypespecific.md) device event whenever a device-specific event occurs.</span></span>

<span data-ttu-id="fcfb8-127">I driver possono creare tipi di evento personalizzati.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-127">Drivers can create their own custom event types.</span></span> <span data-ttu-id="fcfb8-128">Gli eventi personalizzati vengono inviati solo all'applicazione che ha eseguito la registrazione per la notifica degli eventi del dispositivo su un dispositivo specifico e possono essere avviati solo dai driver in modalità kernel.</span><span class="sxs-lookup"><span data-stu-id="fcfb8-128">Custom events are sent only to application that have registered for device-event notification on a particular device, and can only be initiated by kernel-mode drivers.</span></span> <span data-ttu-id="fcfb8-129">Per ulteriori informazioni, vedere [DBT \_ CUSTOMEVENT](dbt-customevent.md).</span><span class="sxs-lookup"><span data-stu-id="fcfb8-129">For more information, see [DBT\_CUSTOMEVENT](dbt-customevent.md).</span></span>

 

 



