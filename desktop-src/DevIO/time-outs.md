---
description: Un handle a una risorsa di comunicazione dispone di un set associato di parametri di timeout che influiscono sul comportamento delle operazioni di lettura e scrittura.
ms.assetid: 271d4c68-1f6d-4483-a9a1-703220de761f
title: Timeout
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6db31fafc0f4d98832f1fb7fa5d22b32cba33d73
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103748335"
---
# <a name="time-outs"></a><span data-ttu-id="ed220-103">Timeout</span><span class="sxs-lookup"><span data-stu-id="ed220-103">Time-Outs</span></span>

<span data-ttu-id="ed220-104">Un handle a una risorsa di comunicazione dispone di un set associato di parametri di timeout che influiscono sul comportamento delle operazioni di lettura e scrittura.</span><span class="sxs-lookup"><span data-stu-id="ed220-104">A handle to a communications resource has an associated set of time-out parameters that affect the behavior of read and write operations.</span></span> <span data-ttu-id="ed220-105">I timeout possono causare la conclusione di un'operazione [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile)o [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) quando scade un intervallo di timeout, anche se il numero di caratteri specificato non è stato letto o scritto.</span><span class="sxs-lookup"><span data-stu-id="ed220-105">Time-outs can cause a [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile), or [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) operation to conclude when a time-out interval elapses, even though the specified number of characters have not been read or written.</span></span> <span data-ttu-id="ed220-106">Non viene considerato un errore quando si verifica un timeout durante un'operazione di lettura o scrittura (ovvero il valore restituito della funzione di lettura o scrittura indica l'esito positivo).</span><span class="sxs-lookup"><span data-stu-id="ed220-106">It is not treated as an error when a time-out occurs during a read or write operation (that is, the read or write function's return value indicates success).</span></span> <span data-ttu-id="ed220-107">Il numero di byte effettivamente letti o scritti viene segnalato da **ReadFile** o **WriteFile** (o dalla funzione [**GetOverlappedResult**](/windows/desktop/api/ioapiset/nf-ioapiset-getoverlappedresult) o [**FileIOCompletionRoutine**](/windows/desktop/api/minwinbase/nc-minwinbase-lpoverlapped_completion_routine) , se l'i/o è stato eseguito come operazione sovrapposta).</span><span class="sxs-lookup"><span data-stu-id="ed220-107">The count of bytes actually read or written is reported by **ReadFile** or **WriteFile** (or by the [**GetOverlappedResult**](/windows/desktop/api/ioapiset/nf-ioapiset-getoverlappedresult) or [**FileIOCompletionRoutine**](/windows/desktop/api/minwinbase/nc-minwinbase-lpoverlapped_completion_routine) function, if the I/O was performed as an overlapped operation).</span></span>

<span data-ttu-id="ed220-108">Quando un'applicazione apre una risorsa di comunicazione, il sistema imposta i valori di timeout della risorsa sui valori in vigore quando la risorsa è stata usata per l'ultima volta.</span><span class="sxs-lookup"><span data-stu-id="ed220-108">When an application opens a communications resource, the system sets the resource's time-out values to the values in effect when the resource was last used.</span></span> <span data-ttu-id="ed220-109">Se la risorsa di comunicazione non è mai stata aperta, il sistema imposta i valori di timeout su un valore predefinito.</span><span class="sxs-lookup"><span data-stu-id="ed220-109">If the communications resource has never been opened, the system sets the time-out values to some default value.</span></span> <span data-ttu-id="ed220-110">In entrambi i casi, un'applicazione deve sempre determinare i valori di timeout correnti dopo l'apertura della risorsa e quindi impostarli in modo esplicito per soddisfare i requisiti.</span><span class="sxs-lookup"><span data-stu-id="ed220-110">In either case, an application should always determine the current time-out values after opening the resource, and then explicitly set them to meet its requirements.</span></span> <span data-ttu-id="ed220-111">Per determinare i valori di timeout correnti di una risorsa di comunicazione, usare la funzione [**GetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-getcommtimeouts) .</span><span class="sxs-lookup"><span data-stu-id="ed220-111">To determine the current time-out values of a communications resource, use the [**GetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-getcommtimeouts) function.</span></span> <span data-ttu-id="ed220-112">Per modificare i valori di timeout, utilizzare la funzione [**SetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-setcommtimeouts) .</span><span class="sxs-lookup"><span data-stu-id="ed220-112">To change the time-out values, use the [**SetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-setcommtimeouts) function.</span></span>

<span data-ttu-id="ed220-113">Due tipi di timeout sono abilitati dai parametri di timeout.</span><span class="sxs-lookup"><span data-stu-id="ed220-113">Two types of time-outs are enabled by the time-out parameters.</span></span> <span data-ttu-id="ed220-114">Si verifica un timeout di intervallo quando il tempo che intercorre tra la ricezione di due caratteri è superiore a un numero specificato di millisecondi.</span><span class="sxs-lookup"><span data-stu-id="ed220-114">An interval time-out occurs when the time between the receipt of any two characters exceeds a specified number of milliseconds.</span></span> <span data-ttu-id="ed220-115">L'intervallo di tempo inizia quando viene ricevuto il primo carattere e viene riavviato quando viene ricevuto ogni nuovo carattere.</span><span class="sxs-lookup"><span data-stu-id="ed220-115">Timing starts when the first character is received and is restarted when each new character is received.</span></span> <span data-ttu-id="ed220-116">Si verifica un timeout totale quando la quantità totale di tempo utilizzata da un'operazione di lettura supera un numero calcolato di millisecondi.</span><span class="sxs-lookup"><span data-stu-id="ed220-116">A total time-out occurs when the total amount of time consumed by a read operation exceeds a calculated number of milliseconds.</span></span> <span data-ttu-id="ed220-117">L'intervallo di tempo inizia immediatamente all'inizio dell'operazione di I/O.</span><span class="sxs-lookup"><span data-stu-id="ed220-117">Timing starts immediately when the I/O operation begins.</span></span> <span data-ttu-id="ed220-118">Le operazioni di scrittura supportano solo i timeout totali.</span><span class="sxs-lookup"><span data-stu-id="ed220-118">Write operations support only total time-outs.</span></span> <span data-ttu-id="ed220-119">Le operazioni di lettura supportano sia i timeout di intervallo che quelli totali, che possono essere usati separatamente o combinati.</span><span class="sxs-lookup"><span data-stu-id="ed220-119">Read operations support both interval and total time-outs, which can be used separately or combined.</span></span>

<span data-ttu-id="ed220-120">Il tempo, in millisecondi, del periodo di timeout totale per un'operazione di lettura o scrittura viene calcolato usando il moltiplicatore e i valori costanti della struttura [**COMMTIMEOUTS**](/windows/desktop/api/Winbase/ns-winbase-commtimeouts) specificata nella funzione [**GetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-getcommtimeouts) o [**SetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-setcommtimeouts) .</span><span class="sxs-lookup"><span data-stu-id="ed220-120">The time, in milliseconds, of the total time-out period for a read or write operation is calculated by using the multiplier and constant values from the [**COMMTIMEOUTS**](/windows/desktop/api/Winbase/ns-winbase-commtimeouts) structure specified in the [**GetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-getcommtimeouts) or [**SetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-setcommtimeouts) function.</span></span> <span data-ttu-id="ed220-121">Viene usata la formula seguente:</span><span class="sxs-lookup"><span data-stu-id="ed220-121">The following formula is used:</span></span>


```C++
Timeout = (MULTIPLIER * number_of_bytes) + CONSTANT
```



<span data-ttu-id="ed220-122">L'utilizzo di un moltiplicatore e di una costante consente di variare il periodo di timeout totale, a seconda della quantità di dati richiesti.</span><span class="sxs-lookup"><span data-stu-id="ed220-122">Using both a multiplier and a constant enables the total time-out period to vary, depending on the amount of data being requested.</span></span> <span data-ttu-id="ed220-123">Un'applicazione può utilizzare solo la costante impostando il moltiplicatore su zero oppure utilizzare solo il moltiplicatore impostando la costante su zero.</span><span class="sxs-lookup"><span data-stu-id="ed220-123">An application can use only the constant by setting the multiplier to zero, or use only the multiplier by setting the constant to zero.</span></span> <span data-ttu-id="ed220-124">Se la costante e il moltiplicatore sono pari a zero, il timeout totale non viene utilizzato.</span><span class="sxs-lookup"><span data-stu-id="ed220-124">If both the constant and multiplier are zero, total time-out is not used.</span></span>

<span data-ttu-id="ed220-125">Se tutti i parametri di timeout di lettura sono pari a zero, i timeout di lettura non vengono usati e un'operazione di lettura non viene completata fino a quando non viene letto il numero di byte richiesto o si verifica un errore.</span><span class="sxs-lookup"><span data-stu-id="ed220-125">If all read time-out parameters are zero, read time-outs are not used, and a read operation is not complete until the requested number of bytes have been read or an error occurs.</span></span> <span data-ttu-id="ed220-126">Analogamente, se tutti i parametri di timeout di scrittura sono pari a zero, un'operazione di scrittura non viene completata fino a quando non viene scritto il numero di byte richiesto o si verifica un errore.</span><span class="sxs-lookup"><span data-stu-id="ed220-126">Similarly, if all write time-out parameters are zero, a write operation is not completed until the requested number of bytes have been written or an error occurs.</span></span>

<span data-ttu-id="ed220-127">Se il parametro di timeout di lettura intervallo è il valore **MAXDWORD** ed entrambi i parametri di timeout di lettura totali sono pari a zero, un'operazione di lettura viene completata immediatamente dopo la lettura dei caratteri disponibili nel buffer di input, anche se è vuota.</span><span class="sxs-lookup"><span data-stu-id="ed220-127">If the read interval time-out parameter is the **MAXDWORD** value and both read total time-out parameters are zero, a read operation is completed immediately after reading whatever characters are available in the input buffer, even if it is empty.</span></span>

<span data-ttu-id="ed220-128">Il tempo di intervallo forza la restituzione di un'operazione di lettura quando si verifica una pausa nella ricezione.</span><span class="sxs-lookup"><span data-stu-id="ed220-128">Interval timing forces a read operation to return when there is a lull in reception.</span></span> <span data-ttu-id="ed220-129">Un processo che usa i timeout di intervallo può impostare un parametro di intervallo piuttosto breve, in modo che possa rispondere rapidamente a piccoli picchi isolati di uno o pochi caratteri, ma può comunque raccogliere buffer di grandi dimensioni di caratteri con una singola chiamata quando i dati vengono ricevuti in un flusso stabile.</span><span class="sxs-lookup"><span data-stu-id="ed220-129">A process using interval time-outs can set a fairly short interval parameter, so it can respond quickly to small, isolated bursts of one or a few characters, yet it can still collect large buffers of characters with a single call when data is received in a steady stream.</span></span>

<span data-ttu-id="ed220-130">I timeout per un'operazione di scrittura possono essere utili quando la trasmissione è bloccata da un tipo di controllo di flusso o quando è stata chiamata la funzione [**SetCommBreak**](/windows/desktop/api/Winbase/nf-winbase-setcommbreak) per sospendere la trasmissione dei caratteri.</span><span class="sxs-lookup"><span data-stu-id="ed220-130">Time-outs for a write operation can be useful when transmission is blocked by some kind of flow control or when the [**SetCommBreak**](/windows/desktop/api/Winbase/nf-winbase-setcommbreak) function has been called to suspend character transmission.</span></span>

<span data-ttu-id="ed220-131">Nella tabella seguente viene riepilogato il comportamento delle operazioni di lettura in base ai valori specificati per i timeout totali e di intervallo.</span><span class="sxs-lookup"><span data-stu-id="ed220-131">The following table summarizes the behavior of read operations based on the values specified for total and interval time-outs.</span></span>



| <span data-ttu-id="ed220-132">Totale</span><span class="sxs-lookup"><span data-stu-id="ed220-132">Total</span></span> | <span data-ttu-id="ed220-133">Interval</span><span class="sxs-lookup"><span data-stu-id="ed220-133">Interval</span></span> | <span data-ttu-id="ed220-134">Comportamento</span><span class="sxs-lookup"><span data-stu-id="ed220-134">Behavior</span></span>                                                                                                                                                                                 |
|-------|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ed220-135">0</span><span class="sxs-lookup"><span data-stu-id="ed220-135">0</span></span>     | <span data-ttu-id="ed220-136">0</span><span class="sxs-lookup"><span data-stu-id="ed220-136">0</span></span>        | <span data-ttu-id="ed220-137">Restituisce quando il buffer viene riempito completamente.</span><span class="sxs-lookup"><span data-stu-id="ed220-137">Returns when the buffer is completely filled.</span></span> <span data-ttu-id="ed220-138">I timeout non vengono usati.</span><span class="sxs-lookup"><span data-stu-id="ed220-138">Time-outs are not used.</span></span>                                                                                                                    |
| <span data-ttu-id="ed220-139">T</span><span class="sxs-lookup"><span data-stu-id="ed220-139">T</span></span>     | <span data-ttu-id="ed220-140">0</span><span class="sxs-lookup"><span data-stu-id="ed220-140">0</span></span>        | <span data-ttu-id="ed220-141">Restituisce quando il buffer viene riempito completamente o quando T millisecondi sono trascorsi dall'inizio dell'operazione.</span><span class="sxs-lookup"><span data-stu-id="ed220-141">Returns when the buffer is completely filled or when T milliseconds have elapsed since the beginning of the operation.</span></span>                                                                   |
| <span data-ttu-id="ed220-142">0</span><span class="sxs-lookup"><span data-stu-id="ed220-142">0</span></span>     | <span data-ttu-id="ed220-143">S</span><span class="sxs-lookup"><span data-stu-id="ed220-143">Y</span></span>        | <span data-ttu-id="ed220-144">Restituisce quando il buffer viene riempito completamente o quando sono trascorsi Y millisecondi tra la ricezione di due caratteri.</span><span class="sxs-lookup"><span data-stu-id="ed220-144">Returns when the buffer is completely filled or when Y milliseconds have elapsed between the receipt of any two characters.</span></span> <span data-ttu-id="ed220-145">L'intervallo di tempo non inizia fino a quando non viene ricevuto il primo carattere.</span><span class="sxs-lookup"><span data-stu-id="ed220-145">Timing does not begin until the first character is received.</span></span> |
| <span data-ttu-id="ed220-146">T</span><span class="sxs-lookup"><span data-stu-id="ed220-146">T</span></span>     | <span data-ttu-id="ed220-147">S</span><span class="sxs-lookup"><span data-stu-id="ed220-147">Y</span></span>        | <span data-ttu-id="ed220-148">Restituisce quando il buffer viene riempito completamente o quando si verifica uno dei due tipi di timeout.</span><span class="sxs-lookup"><span data-stu-id="ed220-148">Returns when the buffer is completely filled or when either type of time-out occurs.</span></span>                                                                                                     |



 

> [!Note]  
> <span data-ttu-id="ed220-149">Tuttavia, tale tempistica è relativa al sistema che controlla il dispositivo fisico.</span><span class="sxs-lookup"><span data-stu-id="ed220-149">However, that timing is relative to the system controlling the physical device.</span></span> <span data-ttu-id="ed220-150">Per un dispositivo remoto, ad esempio un modem, la tempistica è relativa al sistema server a cui è collegato il modem.</span><span class="sxs-lookup"><span data-stu-id="ed220-150">For a remote device such as a modem, the timing is relative to the server system to which the modem is attached.</span></span> <span data-ttu-id="ed220-151">Eventuali ritardi di propagazione della rete non vengono calcolati in.</span><span class="sxs-lookup"><span data-stu-id="ed220-151">Any network propagation delay is not factored in.</span></span> <span data-ttu-id="ed220-152">Ad esempio, un'applicazione client può specificare un timeout totale calcolato per essere 500 millisecondi.</span><span class="sxs-lookup"><span data-stu-id="ed220-152">For example, a client application might specify a total time-out that computes to be 500 milliseconds.</span></span> <span data-ttu-id="ed220-153">Quando sono trascorsi 500 millisecondi sul server, al client viene restituito un errore di timeout.</span><span class="sxs-lookup"><span data-stu-id="ed220-153">When 500 milliseconds have elapsed at the server, a time-out error is returned to the client.</span></span> <span data-ttu-id="ed220-154">Se si verifica un ritardo di propagazione della rete di 50 millisecondi, il client non riceverà alcuna notifica del timeout fino a circa 50 millisecondi dopo il timeout effettivo.</span><span class="sxs-lookup"><span data-stu-id="ed220-154">If there is a 50 milliseconds network propagation delay, the client will not be notified of the time-out until approximately 50 milliseconds after the time-out actually occurred.</span></span>

 

> [!Note]  
> <span data-ttu-id="ed220-155">I parametri di timeout influiscono sul comportamento delle operazioni di lettura e scrittura sovrapposte in un dispositivo di comunicazione.</span><span class="sxs-lookup"><span data-stu-id="ed220-155">The time-out parameters affect the behavior of overlapped read and write operations on a communications device.</span></span> <span data-ttu-id="ed220-156">Con I/O sovrapposti, la funzione [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile), [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex)o [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) può restituire prima del completamento dell'operazione.</span><span class="sxs-lookup"><span data-stu-id="ed220-156">With overlapped I/O, the [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile), [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex), or [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) function can return before the operation has been completed.</span></span> <span data-ttu-id="ed220-157">I parametri di timeout possono determinare il momento in cui l'operazione è stata completata.</span><span class="sxs-lookup"><span data-stu-id="ed220-157">The time-out parameters can determine when the operation has been completed.</span></span>

 

 

 
