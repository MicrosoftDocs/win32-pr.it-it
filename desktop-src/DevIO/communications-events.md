---
description: Un processo può monitorare un set di eventi che si verificano in una risorsa di comunicazione. Ad esempio, un'applicazione può usare il monitoraggio degli eventi per determinare quando i segnali CTS (Clear-to-Send) e DSR (Data-Set-Ready) cambiano lo stato.
ms.assetid: 5d2a7bf3-a972-474b-b8ca-da3351f1e59c
title: Eventi di comunicazione
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 466bd5076405427c7c348c1df3706cb7b5c3edc4
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "104126804"
---
# <a name="communications-events"></a><span data-ttu-id="e30e5-104">Eventi di comunicazione</span><span class="sxs-lookup"><span data-stu-id="e30e5-104">Communications Events</span></span>

<span data-ttu-id="e30e5-105">Un processo può monitorare un set di eventi che si verificano in una risorsa di comunicazione.</span><span class="sxs-lookup"><span data-stu-id="e30e5-105">A process can monitor a set of events that occur in a communications resource.</span></span> <span data-ttu-id="e30e5-106">Ad esempio, un'applicazione può usare il monitoraggio degli eventi per determinare quando i segnali CTS (Clear-to-Send) e DSR (Data-Set-Ready) cambiano lo stato.</span><span class="sxs-lookup"><span data-stu-id="e30e5-106">For example, an application can use event monitoring to determine when the CTS (clear-to-send) and DSR (data-set-ready) signals change state.</span></span>

<span data-ttu-id="e30e5-107">Un processo può monitorare gli eventi in una determinata risorsa di comunicazione usando la funzione [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) per creare una maschera di eventi.</span><span class="sxs-lookup"><span data-stu-id="e30e5-107">A process can monitor events on a given communications resource by using the [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) function to create an event mask.</span></span> <span data-ttu-id="e30e5-108">Per determinare la maschera eventi corrente per una risorsa di comunicazione, un processo può usare la funzione [**GetCommMask**](/windows/desktop/api/Winbase/nf-winbase-getcommmask) .</span><span class="sxs-lookup"><span data-stu-id="e30e5-108">To determine the current event mask for a communications resource, a process can use the [**GetCommMask**](/windows/desktop/api/Winbase/nf-winbase-getcommmask) function.</span></span> <span data-ttu-id="e30e5-109">I valori seguenti specificano gli eventi che possono essere monitorati.</span><span class="sxs-lookup"><span data-stu-id="e30e5-109">The following values specify events that can be monitored.</span></span>



| <span data-ttu-id="e30e5-110">Valore</span><span class="sxs-lookup"><span data-stu-id="e30e5-110">Value</span></span>           | <span data-ttu-id="e30e5-111">Significato</span><span class="sxs-lookup"><span data-stu-id="e30e5-111">Meaning</span></span>                                                                                                                                                                                                                                           |
|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e30e5-112">**\_Interrompi EV**</span><span class="sxs-lookup"><span data-stu-id="e30e5-112">**EV\_BREAK**</span></span>   | <span data-ttu-id="e30e5-113">È stata rilevata un'interruzione nell'input.</span><span class="sxs-lookup"><span data-stu-id="e30e5-113">A break was detected on input.</span></span>                                                                                                                                                                                                                    |
| <span data-ttu-id="e30e5-114">**\_CTS EV**</span><span class="sxs-lookup"><span data-stu-id="e30e5-114">**EV\_CTS**</span></span>     | <span data-ttu-id="e30e5-115">Il segnale CTS (Clear-to-Send) ha modificato lo stato.</span><span class="sxs-lookup"><span data-stu-id="e30e5-115">The CTS (clear-to-send) signal changed state.</span></span>                                                                                                                                                                                                     |
| <span data-ttu-id="e30e5-116">**\_DSR EV**</span><span class="sxs-lookup"><span data-stu-id="e30e5-116">**EV\_DSR**</span></span>     | <span data-ttu-id="e30e5-117">Lo stato del segnale DSR (Data-Set-Ready) è stato modificato.</span><span class="sxs-lookup"><span data-stu-id="e30e5-117">The DSR (data-set-ready) signal changed state.</span></span>                                                                                                                                                                                                    |
| <span data-ttu-id="e30e5-118">**\_errore EV**</span><span class="sxs-lookup"><span data-stu-id="e30e5-118">**EV\_ERR**</span></span>     | <span data-ttu-id="e30e5-119">Si è verificato un errore di stato della riga.</span><span class="sxs-lookup"><span data-stu-id="e30e5-119">A line-status error occurred.</span></span> <span data-ttu-id="e30e5-120">Gli errori di stato della riga sono **\_ Frame CE**, **\_ sovraccarico CE** e **CE \_ RXPARITY**.</span><span class="sxs-lookup"><span data-stu-id="e30e5-120">Line-status errors are **CE\_FRAME**, **CE\_OVERRUN**, and **CE\_RXPARITY**.</span></span>                                                                                                                                        |
| <span data-ttu-id="e30e5-121">**\_anello EV**</span><span class="sxs-lookup"><span data-stu-id="e30e5-121">**EV\_RING**</span></span>    | <span data-ttu-id="e30e5-122">È stato rilevato un indicatore sonoro.</span><span class="sxs-lookup"><span data-stu-id="e30e5-122">A ring indicator was detected.</span></span>                                                                                                                                                                                                                    |
| <span data-ttu-id="e30e5-123">**\_RISD EV**</span><span class="sxs-lookup"><span data-stu-id="e30e5-123">**EV\_RLSD**</span></span>    | <span data-ttu-id="e30e5-124">Lo stato del segnale RISD (Receive-Line-Signal-Detect) è stato modificato.</span><span class="sxs-lookup"><span data-stu-id="e30e5-124">The RLSD (receive-line-signal-detect) signal changed state.</span></span>                                                                                                                                                                                       |
| <span data-ttu-id="e30e5-125">**\_RXCHAR EV**</span><span class="sxs-lookup"><span data-stu-id="e30e5-125">**EV\_RXCHAR**</span></span>  | <span data-ttu-id="e30e5-126">È stato ricevuto un carattere ed è stato collocato nel buffer di input.</span><span class="sxs-lookup"><span data-stu-id="e30e5-126">A character was received and placed in the input buffer.</span></span>                                                                                                                                                                                          |
| <span data-ttu-id="e30e5-127">**\_RXFLAG EV**</span><span class="sxs-lookup"><span data-stu-id="e30e5-127">**EV\_RXFLAG**</span></span>  | <span data-ttu-id="e30e5-128">Il carattere evento è stato ricevuto e inserito nel buffer di input.</span><span class="sxs-lookup"><span data-stu-id="e30e5-128">The event character was received and placed in the input buffer.</span></span> <span data-ttu-id="e30e5-129">Il carattere evento viene specificato nella struttura [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) del dispositivo, che viene applicata a una porta seriale tramite la funzione [**SetCommState**](/windows/desktop/api/Winbase/nf-winbase-setcommstate) .</span><span class="sxs-lookup"><span data-stu-id="e30e5-129">The event character is specified in the device's [**DCB**](/windows/desktop/api/Winbase/ns-winbase-dcb) structure, which is applied to a serial port by using the [**SetCommState**](/windows/desktop/api/Winbase/nf-winbase-setcommstate) function.</span></span> |
| <span data-ttu-id="e30e5-130">**\_TXEMPTY EV**</span><span class="sxs-lookup"><span data-stu-id="e30e5-130">**EV\_TXEMPTY**</span></span> | <span data-ttu-id="e30e5-131">L'ultimo carattere nel buffer di output è stato inviato.</span><span class="sxs-lookup"><span data-stu-id="e30e5-131">The last character in the output buffer was sent.</span></span>                                                                                                                                                                                                 |



 

<span data-ttu-id="e30e5-132">Dopo che è stato specificato un set di eventi, un processo usa la funzione [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) per attendere che si verifichi uno degli eventi.</span><span class="sxs-lookup"><span data-stu-id="e30e5-132">After a set of events is specified, a process uses the [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) function to wait for one of the events to occur.</span></span> <span data-ttu-id="e30e5-133">**WaitCommEvent** può essere utilizzato in modo sincrono o come operazione sovrapposta.</span><span class="sxs-lookup"><span data-stu-id="e30e5-133">**WaitCommEvent** can be used synchronously or as an overlapped operation.</span></span> <span data-ttu-id="e30e5-134">Per ulteriori informazioni sull'esecuzione di una funzione come operazione sovrapposta, vedere [sincronizzazione](/windows/desktop/Sync/synchronization).</span><span class="sxs-lookup"><span data-stu-id="e30e5-134">For additional information about executing a function as an overlapped operation, see [Synchronization](/windows/desktop/Sync/synchronization).</span></span>

<span data-ttu-id="e30e5-135">Quando si verifica uno degli eventi specificati nella maschera di eventi, il processo completa l'operazione di attesa e imposta una variabile event mask per indicare il tipo di evento rilevato.</span><span class="sxs-lookup"><span data-stu-id="e30e5-135">When one of the events specified in the event mask occurs, the process completes the wait operation and sets an event mask variable to indicate the type of event detected.</span></span> <span data-ttu-id="e30e5-136">Se [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) viene chiamato per una risorsa di comunicazione mentre è in sospeso un'attesa per tale risorsa, [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) restituisce un errore.</span><span class="sxs-lookup"><span data-stu-id="e30e5-136">If the [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) is called for a communications resource while a wait is pending for that resource, [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) returns an error.</span></span>

<span data-ttu-id="e30e5-137">La funzione [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) rileva gli eventi che si sono verificati dopo l'ultima chiamata a [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) o **WaitCommEvent**.</span><span class="sxs-lookup"><span data-stu-id="e30e5-137">The [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) function detects events that have occurred since the last call to [**SetCommMask**](/windows/desktop/api/Winbase/nf-winbase-setcommmask) or **WaitCommEvent**.</span></span> <span data-ttu-id="e30e5-138">Se, ad esempio, si specifica l'evento **EV \_ RXCHAR** come evento di soddisfazione dell'attesa, verrà soddisfatta una chiamata a **WaitCommEvent** se sono presenti caratteri nel buffer di input del driver che sono arrivati dall'ultima chiamata a **WaitCommEvent** o **SetCommMask**.</span><span class="sxs-lookup"><span data-stu-id="e30e5-138">For example, if you specify the **EV\_RXCHAR** event as a wait-satisfying event, a call to **WaitCommEvent** will be satisfied if there are characters in the driver's input buffer that have arrived since the last call to **WaitCommEvent** or **SetCommMask**.</span></span> <span data-ttu-id="e30e5-139">Pertanto, data la seguente pseudocodice, qualsiasi carattere ricevuto tra T1 e T2 soddisferà la chiamata successiva a **WaitCommEvent**.</span><span class="sxs-lookup"><span data-stu-id="e30e5-139">Thus, given the following pseudocode, any characters received between T1 and T2 will satisfy the next call to **WaitCommEvent**.</span></span>


```C++
while (!bFinished) 
{ 
    WaitCommEvent(args)
 
T1: // Read bytes 
    // Process bytes 

T2: 
}
```



<span data-ttu-id="e30e5-140">Quando si esegue il monitoraggio di un evento che si verifica quando un segnale (CTS, DSR e così via) cambia stato, [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) segnala la modifica, ma non lo stato corrente.</span><span class="sxs-lookup"><span data-stu-id="e30e5-140">When monitoring an event that occurs when a signal (CTS, DSR, and so on) changes state, [**WaitCommEvent**](/windows/desktop/api/Winbase/nf-winbase-waitcommevent) reports the change, but not the current state.</span></span> <span data-ttu-id="e30e5-141">Per eseguire una query sullo stato corrente dei segnali CTS (Clear-to-Send), DSR (set di dati-Ready), RISD (Receive-Line-Signal-Detect) e indicatore Ring, un processo può usare la funzione [**GetCommModemStatus**](/windows/desktop/api/Winbase/nf-winbase-getcommmodemstatus) .</span><span class="sxs-lookup"><span data-stu-id="e30e5-141">To query the current state of the CTS (clear-to-send), DSR (data-set-ready), RLSD (receive-line-signal-detect), and ring indicator signals, a process can use the [**GetCommModemStatus**](/windows/desktop/api/Winbase/nf-winbase-getcommmodemstatus) function.</span></span>

 

 
