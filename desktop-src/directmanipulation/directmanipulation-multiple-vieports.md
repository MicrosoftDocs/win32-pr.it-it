---
description: Quando si usano più viewport, fare clic su testingdetermines quali viewport sono interessati dall'input dell'utente, prendendo la posizione dello schermo di un contatto e determinando il rettangolo del viewport a cui si riscontri il contatto.
ms.assetid: 960EF92D-F439-4A84-AAF9-1469E2830573
title: Uso di più viewport in DirectManipulation
ms.topic: article
ms.date: 02/03/2020
ms.openlocfilehash: 627a97a7c9563ca0af9decf79b18340343dda345
ms.sourcegitcommit: 3d718d8f69d3f86eaecf94c5705d761c5a9ef4a1
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/20/2020
ms.locfileid: "104568730"
---
# <a name="using-multiple-viewports-in-directmanipulation"></a><span data-ttu-id="12e38-103">Uso di più viewport in DirectManipulation</span><span class="sxs-lookup"><span data-stu-id="12e38-103">Using multiple viewports in DirectManipulation</span></span>

<span data-ttu-id="12e38-104">Quando si usano più viewport, l' *hit testing* determina quali viewport sono interessati dall'input dell'utente, prendendo la posizione dello schermo di un contatto e determinando quale rettangolo del viewport si riscontri il contatto.</span><span class="sxs-lookup"><span data-stu-id="12e38-104">When using multiple viewports, *Hit testing* determines which viewport(s) are affected by user input by taking the screen location of a contact and determining which viewport rectangle the contact hits.</span></span>

<span data-ttu-id="12e38-105">Uno scenario comune nella [manipolazione diretta](direct-manipulation-portal.md) consiste nell'inserire un viewport all'interno di un altro, noto anche come *viewport annidamento*.</span><span class="sxs-lookup"><span data-stu-id="12e38-105">A common scenario in [Direct Manipulation](direct-manipulation-portal.md) is to place one viewport inside another, also known as *nesting viewports*.</span></span> <span data-ttu-id="12e38-106">Se il contatto raggiunge più di un viewport, l'ordine delle chiamate di  [**secontatto**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) dall'oggetto [*WndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) della finestra determina la relazione padre-figlio dei viewport nidificati.</span><span class="sxs-lookup"><span data-stu-id="12e38-106">If the contact hits more than one viewport, the order of  [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) calls by the window's [*WndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) determines the parent-child relationship of the nested viewports.</span></span>

<span data-ttu-id="12e38-107">Rule: l'elemento figlio deve chiamare [**secontact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact)prima di chiamare il padre.</span><span class="sxs-lookup"><span data-stu-id="12e38-107">Rule: The child element should call [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact)before calling the parent.</span></span>

![diagramma che mostra gerarchia di hit testing](images/dm-art-8.png)

<span data-ttu-id="12e38-109">Un contatto si arresta in un riquadro di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="12e38-109">A contact comes down in a viewport.</span></span> <span data-ttu-id="12e38-110">Per stabilire la gerarchia corretta, è innanzitutto necessario chiamare il metodo [**secontact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) sul viewport arancione (figlio) e quindi il viewport verde (padre).</span><span class="sxs-lookup"><span data-stu-id="12e38-110">[**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) should first be called on the orange (child) viewport and then the green (parent) viewport to establish the correct hierarchy.</span></span>

## <a name="targeting-the-correct-viewport"></a><span data-ttu-id="12e38-111">Destinazione del viewport corretto</span><span class="sxs-lookup"><span data-stu-id="12e38-111">Targeting the correct viewport</span></span>

<span data-ttu-id="12e38-112">Un contatto può essere associato a un numero qualsiasi di viewport e ogni contatto può essere assegnato a un set di viewport diverso.</span><span class="sxs-lookup"><span data-stu-id="12e38-112">A contact can be associated with any number of viewports and each contact can be assigned to a different set of viewports.</span></span>

<span data-ttu-id="12e38-113">Ogni Viewport può essere configurato in modo da supportare interazioni specifiche, in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="12e38-113">Each viewport can be configured to support specific interactions, as required.</span></span>

<span data-ttu-id="12e38-114">In base a queste impostazioni, la [manipolazione diretta](direct-manipulation-portal.md) identifica il viewport che gestisce l'input.</span><span class="sxs-lookup"><span data-stu-id="12e38-114">Based on these settings, [Direct Manipulation](direct-manipulation-portal.md) identifies which viewport handles the input.</span></span> <span data-ttu-id="12e38-115">Il viewport più figlio nella gerarchia di hit testing ha la prima possibilità di gestire l'input.</span><span class="sxs-lookup"><span data-stu-id="12e38-115">The child-most viewport in the hit testing hierarchy has the first chance to handle the input.</span></span> <span data-ttu-id="12e38-116">Tuttavia, sia il concatenamento che l'innalzamento di livello padre possono modificare quale viewport gestisce l'input.</span><span class="sxs-lookup"><span data-stu-id="12e38-116">However, both chaining and parent promotion can change which viewport handles the input.</span></span>

## <a name="chaining"></a><span data-ttu-id="12e38-117">Concatenamento</span><span class="sxs-lookup"><span data-stu-id="12e38-117">Chaining</span></span>

<span data-ttu-id="12e38-118">Quando viene raggiunta la fine del contenuto durante una manipolazione, la [manipolazione diretta](direct-manipulation-portal.md) applica un effetto limite per indicare che il contenuto non può andare oltre.</span><span class="sxs-lookup"><span data-stu-id="12e38-118">When the end of the content is reached during a manipulation, [Direct Manipulation](direct-manipulation-portal.md) applies a boundary effect to indicate that the content can go no further.</span></span> <span data-ttu-id="12e38-119">Tuttavia, se un viewport figlio viene *concatenato* a un viewport padre, questo effetto viene eliminato.</span><span class="sxs-lookup"><span data-stu-id="12e38-119">However, if a child viewport is *chained* to a parent viewport, this effect is suppressed.</span></span> <span data-ttu-id="12e38-120">Al contrario, il viewport predecessore più vicino nella gerarchia di hit testing che supporta la manipolazione, gestisce l'input.</span><span class="sxs-lookup"><span data-stu-id="12e38-120">Instead, the closest ancestor viewport in the hit testing hierarchy that supports the manipulation, handles the input.</span></span> <span data-ttu-id="12e38-121">Se la direzione della manipolazione è invertita in modo tale che il predecessore torni fino al punto in cui è stato attivato il concatenamento, la manipolazione "unchains" e il controllo vengono trasferiti di nuovo al viewport figlio.</span><span class="sxs-lookup"><span data-stu-id="12e38-121">If the direction of the manipulation is reversed such that the ancestor returns to the point where chaining was triggered, the manipulation "unchains" and control transfers back to the child viewport.</span></span>

![diagramma che mostra la manipolazione concatenata](images/dm-art-9.png)

<span data-ttu-id="12e38-123">Quando l'utente esegue il panning del viewport figlio fino al bordo del contenuto, la manipolazione "concatena" al viewport padre e l'utente inizia a eseguire il panning del contenuto padre.</span><span class="sxs-lookup"><span data-stu-id="12e38-123">When the user pans the child viewport all the way to the edge of the content, the manipulation "chains" to the parent viewport, and the user begins panning the parent content instead.</span></span>

> [!Note]  
> <span data-ttu-id="12e38-124">La catena degli assi X e Y indipendentemente l'una dall'altra, quindi se una padella diagonale raggiunge il limite x prima del limite Y, la manipolazione sposta l'elemento padre nella direzione x continuando a spostare l'elemento figlio nella direzione y.</span><span class="sxs-lookup"><span data-stu-id="12e38-124">The X and Y axes chain independently of one another, so if a diagonal pan hits the x boundary before the y boundary, the manipulation moves the parent in the x direction while continuing to move the child in the y direction.</span></span> <span data-ttu-id="12e38-125">Per abilitare o disabilitare il concatenamento, chiamare l'API di [**concatenamento**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setchaining) nel viewport figlio.</span><span class="sxs-lookup"><span data-stu-id="12e38-125">To enable or disable chaining, call the [**SetChaining**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setchaining) API on the child viewport.</span></span>

### <a name="rails"></a><span data-ttu-id="12e38-126">Rails</span><span class="sxs-lookup"><span data-stu-id="12e38-126">Rails</span></span>

<span data-ttu-id="12e38-127">La specifica delle guide nella configurazione di un viewport influiscono sul modo in cui l'input viene concatenato dal viewport.</span><span class="sxs-lookup"><span data-stu-id="12e38-127">Specifying rails in a viewport’s configuration affects the way input is chained from the viewport.</span></span> <span data-ttu-id="12e38-128">In particolare, l'input non può essere concatenato da un viewport figlio recintato al relativo elemento padre nella modalità di panning "senza guida".</span><span class="sxs-lookup"><span data-stu-id="12e38-128">Specifically, input cannot chain from a railed child viewport to its parent in the “unrailed” panning mode of rails.</span></span> <span data-ttu-id="12e38-129">Per concatenare l'input quando sono impostate le guide, è necessario che l'utente sia stato stroncato verticalmente o orizzontalmente ed essere bloccato sulle guide.</span><span class="sxs-lookup"><span data-stu-id="12e38-129">To chain input when rails are set, the user must have panned vertically or horizontally and be locked to the rails.</span></span>

### <a name="zooming"></a><span data-ttu-id="12e38-130">Zoom</span><span class="sxs-lookup"><span data-stu-id="12e38-130">Zooming</span></span>

<span data-ttu-id="12e38-131">Se un viewport figlio è annidato all'interno di un elemento padre ed entrambi sono configurati per lo zoom, una manipolazione dello zoom può essere concatenata da figlio a padre.</span><span class="sxs-lookup"><span data-stu-id="12e38-131">If a child viewport is nested inside a parent, and both are configured for zoom, a zoom manipulation can chain from child to parent.</span></span> <span data-ttu-id="12e38-132">Tuttavia, se la manipolazione continua, funziona solo sull'elemento padre e non può "decatenare" al figlio.</span><span class="sxs-lookup"><span data-stu-id="12e38-132">However, if the manipulation continues, it works only on the parent and cannot “unchain” to the child.</span></span> <span data-ttu-id="12e38-133">Se l'utente concatena uno zoom da figlio a padre, la [manipolazione diretta](direct-manipulation-portal.md) sospende l'elemento figlio fino a quando tutti i contatti associati alla manipolazione non vengono rimossi dallo schermo.</span><span class="sxs-lookup"><span data-stu-id="12e38-133">If the user chains a zoom from child to parent, [Direct Manipulation](direct-manipulation-portal.md) suspends the child until all contacts associated with the manipulation are removed from the screen.</span></span> <span data-ttu-id="12e38-134">A questo punto, l'elemento figlio viene rilasciato dalla sospensione e l'utente può fare il panning del viewport figlio.</span><span class="sxs-lookup"><span data-stu-id="12e38-134">At this point, the child is released from suspension and the user can pan the child viewport.</span></span>

## <a name="gesture-targeting-parent-promotion"></a><span data-ttu-id="12e38-135">Destinazione movimento: promozione padre</span><span class="sxs-lookup"><span data-stu-id="12e38-135">Gesture targeting: Parent promotion</span></span>

<span data-ttu-id="12e38-136">La *destinazione del movimento* è il processo mediante il quale i gruppi di [manipolazione diretta](direct-manipulation-portal.md) riuniscono i contatti e determinano quale viewport elabora l'input.</span><span class="sxs-lookup"><span data-stu-id="12e38-136">*Gesture targeting* is the process by which [Direct Manipulation](direct-manipulation-portal.md) groups contacts together and determines which viewport processes the input.</span></span> <span data-ttu-id="12e38-137">La *Promozione padre* si riferisce ai casi in cui l'input viene trasferito dal figlio al padre.</span><span class="sxs-lookup"><span data-stu-id="12e38-137">*Parent promotion* refers to cases where the input is transferred from the child to the parent.</span></span> <span data-ttu-id="12e38-138">Ad esempio, quando un utente inserisce due contatti e pizzica all'interno di un viewport figlio configurato solo per lo scorrimento, l'input viene promosso all'elemento padre in modo che si verifichi lo zoom.</span><span class="sxs-lookup"><span data-stu-id="12e38-138">For example, when a user puts down two contacts and pinches within a child viewport configured only for scrolling, the input is promoted to the parent so that zooming occurs.</span></span> <span data-ttu-id="12e38-139">La promozione padre si verifica indipendentemente dal fatto che il concatenamento sia abilitato nel viewport figlio.</span><span class="sxs-lookup"><span data-stu-id="12e38-139">Parent promotion occurs regardless of whether chaining is enabled on the child viewport.</span></span>

<span data-ttu-id="12e38-140">A differenza del concatenamento, la promozione padre non è invertita.</span><span class="sxs-lookup"><span data-stu-id="12e38-140">Unlike chaining, parent promotion is not reversed.</span></span> <span data-ttu-id="12e38-141">Il viewport padre continua a elaborare l'input interazione fino a quando non vengono rimossi tutti i contatti (i viewport figlio interrompono l'elaborazione dell'input).</span><span class="sxs-lookup"><span data-stu-id="12e38-141">The parent viewport continues to process the interaction input until all contacts are lifted (child viewports stop processing the input).</span></span>
