---
title: IPropertyStorage-implementazione del file system NTFS
description: La versione NTFS 5,0 fornisce un'implementazione dell'interfaccia IPropertyStorage per i file in un volume NTFS quando i file non sono file composti.
ms.assetid: d0ffd975-5bc2-4de3-b0c1-c9188541f46a
keywords:
- IPropertyStorage Strctd STG, implementazioni, NTFS file system
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ca359bebbd05e67a034494023d7fc23089396b32
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/20/2020
ms.locfileid: "106299990"
---
# <a name="ipropertystorage-ntfs-file-system-implementation"></a><span data-ttu-id="50f75-104">IPropertyStorage-implementazione del file system NTFS</span><span class="sxs-lookup"><span data-stu-id="50f75-104">IPropertyStorage-NTFS File System Implementation</span></span>

<span data-ttu-id="50f75-105">La versione NTFS 5,0 fornisce un'implementazione dell'interfaccia [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) per i file in un volume NTFS quando i file non sono file composti.</span><span class="sxs-lookup"><span data-stu-id="50f75-105">The NTFS version 5.0 provides an implementation of the [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) interface for files on an NTFS volume when the files are not compound files.</span></span>

<span data-ttu-id="50f75-106">**Per ottenere un puntatore all'implementazione di file system NTFS di IPropertySetStorage**</span><span class="sxs-lookup"><span data-stu-id="50f75-106">**To get a pointer to the NTFS file system implementation of IPropertySetStorage**</span></span>

1.  <span data-ttu-id="50f75-107">Chiamare [**IPropertySetStorage:: create**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-create) usando l'implementazione NTFS di [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage).</span><span class="sxs-lookup"><span data-stu-id="50f75-107">Call [**IPropertySetStorage::Create**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-create) using the NTFS implementation of [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage).</span></span>
2.  <span data-ttu-id="50f75-108">Chiamare [**IPropertySetStorage:: Open**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-open) usando l'implementazione NTFS di [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage).</span><span class="sxs-lookup"><span data-stu-id="50f75-108">Call [**IPropertySetStorage::Open**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-open) using the NTFS implementation of [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage).</span></span>

## <a name="when-to-use"></a><span data-ttu-id="50f75-109">Utilizzo</span><span class="sxs-lookup"><span data-stu-id="50f75-109">When to Use</span></span>

<span data-ttu-id="50f75-110">Utilizzare [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) per gestire le proprietà all'interno di un singolo set di proprietà.</span><span class="sxs-lookup"><span data-stu-id="50f75-110">Use [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) to manage properties within a single property set.</span></span> <span data-ttu-id="50f75-111">I metodi supportano la lettura, la scrittura e l'eliminazione di proprietà e i nomi di stringa facoltativi che possono essere associati a identificatori di proprietà.</span><span class="sxs-lookup"><span data-stu-id="50f75-111">Its methods support reading, writing, and deleting properties and the optional string names that can be associated with property identifiers.</span></span> <span data-ttu-id="50f75-112">Un altro metodo consente di impostare gli orari associati all'archiviazione delle proprietà, mentre un altro consente l'assegnazione di un CLSID, usato per associare altro codice, ad esempio il codice dell'interfaccia utente, con la proprietà impostata.</span><span class="sxs-lookup"><span data-stu-id="50f75-112">Another method enables you to set times associated with the property storage, and another permits the assignment of a CLSID, used to associate other code, such as user interface (UI) code, with the property set.</span></span> <span data-ttu-id="50f75-113">La chiamata al metodo [**enum**](/windows/desktop/api/Propidl/nf-propidl-ipropertystorage-enum) fornisce un puntatore all'implementazione NTFS di [**IEnumSTATPROPSTG**](/windows/win32/api/propidlbase/nn-propidlbase-ienumstatpropstg), che consente di enumerare le proprietà nel set.</span><span class="sxs-lookup"><span data-stu-id="50f75-113">Calling the [**Enum**](/windows/desktop/api/Propidl/nf-propidl-ipropertystorage-enum) method supplies a pointer to the NTFS implementation of [**IEnumSTATPROPSTG**](/windows/win32/api/propidlbase/nn-propidlbase-ienumstatpropstg), which enables you to enumerate the properties in the set.</span></span>

## <a name="remarks"></a><span data-ttu-id="50f75-114">Commenti</span><span class="sxs-lookup"><span data-stu-id="50f75-114">Remarks</span></span>

<span data-ttu-id="50f75-115">L'implementazione NTFS fornisce essenzialmente le stesse funzionalità dell'implementazione del file composto.</span><span class="sxs-lookup"><span data-stu-id="50f75-115">The NTFS implementation provides essentially the same features as the compound file implementation.</span></span> <span data-ttu-id="50f75-116">Per altre informazioni, vedere [IPropertyStorage-implementazione del file composto](ipropertystorage-compound-file-implementation.md).</span><span class="sxs-lookup"><span data-stu-id="50f75-116">For more information, see [IPropertyStorage-Compound File Implementation](ipropertystorage-compound-file-implementation.md).</span></span>

<span data-ttu-id="50f75-117">Poiché NTFS è una file system affidabile, un set di proprietà NTFS non verrà mai lasciato in uno stato non corretto.</span><span class="sxs-lookup"><span data-stu-id="50f75-117">Because NTFS is a robust file system, an NTFS property set will never be left in an incorrect state.</span></span> <span data-ttu-id="50f75-118">Quando il contenuto di un [**IPROPERTYSTORAGE**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) NTFS viene scaricato nel file NTFS sottostante, tutti gli Stati o nessuno di essi vengono scritti nel file come operazione atomica, anche se si verifica un errore durante l'operazione, ad esempio una chiusura anomala del processo.</span><span class="sxs-lookup"><span data-stu-id="50f75-118">When the content of an NTFS [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) is flushed to the underlying NTFS file, either all or none of the state is written to the file as an atomic operation, even if there is a failure during the operation such as an abnormal process termination.</span></span> <span data-ttu-id="50f75-119">Per ottenere un comportamento simile all'implementazione del file composto, l'interfaccia [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) padre deve essere aperta in modalità transazionale.</span><span class="sxs-lookup"><span data-stu-id="50f75-119">To achieve similar behavior with the compound file implementation, the parent [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) interface must be opened in transacted mode.</span></span>

<span data-ttu-id="50f75-120">Questo livello di affidabilità è possibile solo quando si accede a una proprietà NTFS impostata su un volume NTFS 5,0.</span><span class="sxs-lookup"><span data-stu-id="50f75-120">This level of robustness is only possible when accessing an NTFS property set on an NTFS 5.0 volume.</span></span> <span data-ttu-id="50f75-121">È possibile accedere ai set di proprietà NTFS nelle versioni precedenti di NTFS (ad esempio, un computer in cui è in esecuzione Windows NT o Windows 2000 che accede ai set di proprietà in un file server computer che esegue Windows NT 4,0), ma non è garantito che si trovino in uno stato corretto in caso di errore imprevisto.</span><span class="sxs-lookup"><span data-stu-id="50f75-121">It is possible to access NTFS property sets on earlier versions of NTFS (for example, a computer running on Windows NT or Windows 2000 that accesses the property sets on a file server computer running on Windows NT 4.0), but they are not guaranteed to be in a correct state in the event of an unexpected failure.</span></span>

<span data-ttu-id="50f75-122">Sebbene l'implementazione NTFS di [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) non supporti la transazione, l'implementazione NTFS di [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) la supporta.</span><span class="sxs-lookup"><span data-stu-id="50f75-122">Although the NTFS implementation of [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) does not support transactioning, the NTFS implementation of [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) supports it.</span></span> <span data-ttu-id="50f75-123">Ovvero è possibile specificare **STGM \_ transazionale** nel parametro *GrfMode* per i metodi [**create**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-create) e [**Open**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-open) di **IPropertySetStorage**.</span><span class="sxs-lookup"><span data-stu-id="50f75-123">That is, **STGM\_TRANSACTED** may be specified in the *grfMode* parameter to the [**Create**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-create) and [**Open**](/windows/desktop/api/Propidl/nf-propidl-ipropertysetstorage-open) methods of **IPropertySetStorage**.</span></span> <span data-ttu-id="50f75-124">Come nell'implementazione del file composto, la modalità transazionale è possibile solo per gli archivi di proprietà non semplici (specificando **PROPSETFLAG non \_ semplice** nel parametro *grfFlags* ).</span><span class="sxs-lookup"><span data-stu-id="50f75-124">As in the compound file implementation, transacted mode is possible only for nonsimple property storages (specifying **PROPSETFLAG\_NONSIMPLE** in the *grfFlags* parameter).</span></span>

## <a name="related-topics"></a><span data-ttu-id="50f75-125">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="50f75-125">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="50f75-126">**IPropertyStorage**</span><span class="sxs-lookup"><span data-stu-id="50f75-126">**IPropertyStorage**</span></span>](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage)
</dt> <dt>

[<span data-ttu-id="50f75-127">IPropertySetStorage-implementazione del file system NTFS</span><span class="sxs-lookup"><span data-stu-id="50f75-127">IPropertySetStorage-NTFS File System Implementation</span></span>](ipropertysetstorage-ntfs-file-system-implementation.md)
</dt> </dl>

 

 