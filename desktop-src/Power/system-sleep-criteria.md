---
description: Finché il sistema determina che è presente un'attività dell'utente o dell'applicazione, non entrerà in stato di sospensione.
ms.assetid: 83c9394a-1813-405a-802a-0623e5de50d3
title: Criteri di sospensione del sistema
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b90950b980ec1e0fa06171d7a57d76b410534f96
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103756566"
---
# <a name="system-sleep-criteria"></a><span data-ttu-id="1e808-103">Criteri di sospensione del sistema</span><span class="sxs-lookup"><span data-stu-id="1e808-103">System Sleep Criteria</span></span>

<span data-ttu-id="1e808-104">Finché il sistema determina che è presente un'attività dell'utente o dell'applicazione, non entrerà in stato di sospensione.</span><span class="sxs-lookup"><span data-stu-id="1e808-104">As long as the system determines that there is user or application activity, it will not enter sleep.</span></span> <span data-ttu-id="1e808-105">Il sistema è in grado di rilevare determinate attività, ad esempio l'input dell'utente o le comunicazioni di rete.</span><span class="sxs-lookup"><span data-stu-id="1e808-105">The system can detect certain activities, such as user input or network communications.</span></span> <span data-ttu-id="1e808-106">Tuttavia, esistono altre attività che il sistema non è in grado di rilevare.</span><span class="sxs-lookup"><span data-stu-id="1e808-106">However, there are other activities that the system cannot detect.</span></span> <span data-ttu-id="1e808-107">Ad esempio, un'applicazione di presentazione richiede la visualizzazione della schermata.</span><span class="sxs-lookup"><span data-stu-id="1e808-107">For example, a presentation application requires the screen for display.</span></span> <span data-ttu-id="1e808-108">Tuttavia, potrebbe sembrare che l'applicazione sia inattiva durante la presentazione, causando la disattivazione dello schermo da parte del sistema.</span><span class="sxs-lookup"><span data-stu-id="1e808-108">However, it may appear that the application is idle during the presentation, causing the system to turn off the display.</span></span>

<span data-ttu-id="1e808-109">Per notificare al sistema che l'applicazione è occupata, usare la funzione [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) .</span><span class="sxs-lookup"><span data-stu-id="1e808-109">To notify the system that your application is busy, use the [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) function.</span></span> <span data-ttu-id="1e808-110">Questa funzione impedisce al sistema di entrare in stato di sospensione o di spegnere la visualizzazione mentre l'applicazione è in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="1e808-110">This function prevents the system from entering sleep or turning off the display while the application is running.</span></span>

<span data-ttu-id="1e808-111">Per le applicazioni di presentazione e multimediali è necessario chiamare la funzione [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) con lo **\_ schermo es \_ necessario** , in modo che il sistema sappia che non deve mettere il dispositivo di visualizzazione in sospensione.</span><span class="sxs-lookup"><span data-stu-id="1e808-111">Presentation and multimedia applications must call the [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) function with **ES\_DISPLAY\_REQUIRED** so that the system will know that it should not put the display device to sleep.</span></span> <span data-ttu-id="1e808-112">Le applicazioni per la gestione degli eventi, ad esempio gli strumenti per la gestione dei fax in ingresso, devono chiamare **SetThreadExecutionState** con **es \_ System \_ required**, gestire l'evento e quindi cancellare il flag in modo che il sistema possa tornare in sospensione.</span><span class="sxs-lookup"><span data-stu-id="1e808-112">Event-handling applications, such as tools for managing incoming faxes, must call **SetThreadExecutionState** with **ES\_SYSTEM\_REQUIRED**, handle the event, and then clear the flag so the system can return to sleep.</span></span> <span data-ttu-id="1e808-113">Si noti che la maggior parte delle applicazioni di produttività non deve usare **SetThreadExecutionState** perché il sistema può in genere determinare l'attività in base all'input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="1e808-113">Note that most productivity applications do not need to use **SetThreadExecutionState** because the system can usually determine activity by user input.</span></span>

<span data-ttu-id="1e808-114">Per mantenere il tempo trascorso dall'ultimo input dell'utente, il sistema utilizza un timer di inattività di visualizzazione e un timer di inattività del sistema.</span><span class="sxs-lookup"><span data-stu-id="1e808-114">To maintain the time since the last user input, the system uses a display idle timer and a system idle timer.</span></span> <span data-ttu-id="1e808-115">Il sistema confronta i timer di inattività con i valori configurati nella combinazione per il risparmio di energia.</span><span class="sxs-lookup"><span data-stu-id="1e808-115">The system compares the idle timers to the values configured in the power plan.</span></span> <span data-ttu-id="1e808-116">Se il valore del timer di inattività visualizzato è maggiore del valore di timeout di visualizzazione e nessun thread ha richiesto la visualizzazione chiamando [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) con **lo \_ schermo es \_ necessario**, il sistema spegne lo schermo.</span><span class="sxs-lookup"><span data-stu-id="1e808-116">If the display idle timer value is greater than the display time-out value, and no threads have requested the display by calling [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) with **ES\_DISPLAY\_REQUIRED**, the system powers off the display.</span></span> <span data-ttu-id="1e808-117">Analogamente, se il timer di inattività del sistema è superiore al valore di timeout del sistema e nessuna applicazione ha richiesto il sistema chiamando **SetThreadExecutionState** con **es \_ System \_ required**, il sistema entra in stato di sospensione.</span><span class="sxs-lookup"><span data-stu-id="1e808-117">Similarly, if the system idle timer is greater than the system time-out value and no applications have requested the system by calling **SetThreadExecutionState** with **ES\_SYSTEM\_REQUIRED**, the system enters sleep.</span></span>

<span data-ttu-id="1e808-118">Il sistema gestisce un conteggio delle applicazioni che hanno chiamato [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate).</span><span class="sxs-lookup"><span data-stu-id="1e808-118">The system maintains a count of applications that have called [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate).</span></span> <span data-ttu-id="1e808-119">Il sistema tiene traccia di ogni thread che chiama **SetThreadExecutionState** e modifica di conseguenza il contatore.</span><span class="sxs-lookup"><span data-stu-id="1e808-119">The system tracks each thread that calls **SetThreadExecutionState** and adjusts the counter accordingly.</span></span> <span data-ttu-id="1e808-120">Se il contatore raggiunge il valore zero e non è presente alcun input dell'utente, il sistema entra in stato di sospensione.</span><span class="sxs-lookup"><span data-stu-id="1e808-120">If this counter reaches zero and there has not been any user input, the system enters sleep.</span></span>

<span data-ttu-id="1e808-121">Se il risparmio di energia è basso, un'applicazione può richiedere l'intervento dell'utente o richiedere che il sistema si sospenda automaticamente.</span><span class="sxs-lookup"><span data-stu-id="1e808-121">If power is low, an application can request user intervention or request that the system suspend itself.</span></span> <span data-ttu-id="1e808-122">È possibile sospendere l'operazione di sistema utilizzando la funzione [**SetSuspendState**](/windows/desktop/api/PowrProf/nf-powrprof-setsuspendstate) .</span><span class="sxs-lookup"><span data-stu-id="1e808-122">You can suspend system operation by using the [**SetSuspendState**](/windows/desktop/api/PowrProf/nf-powrprof-setsuspendstate) function.</span></span>

<span data-ttu-id="1e808-123">Se il sistema viene riattivato automaticamente ([PBT \_ APMRESUMEAUTOMATIC](pbt-apmresumeautomatic.md)), nessuno dei timer è pertinente.</span><span class="sxs-lookup"><span data-stu-id="1e808-123">If the system wakes automatically ([PBT\_APMRESUMEAUTOMATIC](pbt-apmresumeautomatic.md)), none of the timers are relevant.</span></span> <span data-ttu-id="1e808-124">Per ulteriori informazioni, vedere [eventi di riattivazione del sistema](system-wake-up-events.md).</span><span class="sxs-lookup"><span data-stu-id="1e808-124">For more information, see [System Wake-up Events](system-wake-up-events.md).</span></span>

## <a name="entering-sleep"></a><span data-ttu-id="1e808-125">Immissione di sospensione</span><span class="sxs-lookup"><span data-stu-id="1e808-125">Entering Sleep</span></span>

<span data-ttu-id="1e808-126">Quando il sistema entra in stato di sospensione, lo stato dell'intero sistema e di tutte le applicazioni verrà mantenuto automaticamente.</span><span class="sxs-lookup"><span data-stu-id="1e808-126">When the system enters sleep, it will automatically preserve the state of the entire system and all applications.</span></span> <span data-ttu-id="1e808-127">Per la maggior parte delle applicazioni, pertanto, non è necessario eseguire alcuna azione speciale.</span><span class="sxs-lookup"><span data-stu-id="1e808-127">Therefore, most applications do not need to take any special action.</span></span> <span data-ttu-id="1e808-128">Le applicazioni che devono eseguire azioni specifiche prima della transizione del sistema possono registrarsi per gli eventi di alimentazione.</span><span class="sxs-lookup"><span data-stu-id="1e808-128">Applications that need to perform specific actions before the system transitions can register for power events.</span></span>

<span data-ttu-id="1e808-129">Quando il sistema invia un evento [PBT \_ APMSUSPEND](pbt-apmsuspend.md) , ogni applicazione ha due secondi per eseguire le azioni necessarie prima che il sistema avvii la transizione alla modalità di sospensione.</span><span class="sxs-lookup"><span data-stu-id="1e808-129">When the system sends a [PBT\_APMSUSPEND](pbt-apmsuspend.md) event, each application has two seconds to perform any necessary actions before the system starts the transition to sleep.</span></span> <span data-ttu-id="1e808-130">Le applicazioni devono limitare l'azione eseguita in risposta a questo evento per assicurarsi che completino tutte le operazioni nel tempo assegnato.</span><span class="sxs-lookup"><span data-stu-id="1e808-130">Applications must limit what action they take in response to this event to ensure that they complete all operations in the time allotted.</span></span>

## <a name="related-topics"></a><span data-ttu-id="1e808-131">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="1e808-131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="1e808-132">Informazioni sul risparmio energia</span><span class="sxs-lookup"><span data-stu-id="1e808-132">About Power Management</span></span>](about-power-management.md)
</dt> <dt>

[<span data-ttu-id="1e808-133">Eventi di riattivazione del sistema</span><span class="sxs-lookup"><span data-stu-id="1e808-133">System Wake-up Events</span></span>](system-wake-up-events.md)
</dt> </dl>

 

 



