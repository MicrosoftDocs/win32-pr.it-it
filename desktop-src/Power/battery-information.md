---
description: Le batterie possono fornire potenza per computer portatili e computer in esecuzione in un gruppo di continuità (UPS, Power Supply).
ms.assetid: 3580b37d-611c-46b4-9300-4943833d6852
title: Informazioni sulla batteria
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a4f9838a2a95db037b9655f116f07e3cf2e072d4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "106312062"
---
# <a name="battery-information"></a><span data-ttu-id="0a47a-103">Informazioni sulla batteria</span><span class="sxs-lookup"><span data-stu-id="0a47a-103">Battery Information</span></span>

<span data-ttu-id="0a47a-104">Le batterie possono fornire potenza per computer portatili e computer in esecuzione in un gruppo di continuità (UPS, Power Supply).</span><span class="sxs-lookup"><span data-stu-id="0a47a-104">Batteries can provide power for portable computers and computers running on an uninterruptible power supply (UPS).</span></span> <span data-ttu-id="0a47a-105">In questi computer, il sistema operativo fornisce informazioni sullo stato della batteria, in modo che le applicazioni possano fornire funzioni utili per l'utente.</span><span class="sxs-lookup"><span data-stu-id="0a47a-105">On these computers, the operating system provides information on the state of the battery so applications can provide useful functions for the user.</span></span> <span data-ttu-id="0a47a-106">Alcuni sistemi a batteria non standard meno recenti e UPS non sono supportati.</span><span class="sxs-lookup"><span data-stu-id="0a47a-106">(Some older nonstandard battery systems and UPSs are not supported.)</span></span>

<span data-ttu-id="0a47a-107">Si noti che questa panoramica presuppone che l'utente abbia familiarità con la [gestione dei dispositivi](/windows/desktop/DevIO/device-management).</span><span class="sxs-lookup"><span data-stu-id="0a47a-107">Note that this overview assumes you are familiar with [device management](/windows/desktop/DevIO/device-management).</span></span>

<span data-ttu-id="0a47a-108">Per ottenere informazioni sullo stato della batteria, usare la funzione [**GetSystemPowerStatus**](/windows/desktop/api/Winbase/nf-winbase-getsystempowerstatus) , che restituisce informazioni generali su tutte le fonti di alimentazione del sistema.</span><span class="sxs-lookup"><span data-stu-id="0a47a-108">To obtain information about the battery status, use the [**GetSystemPowerStatus**](/windows/desktop/api/Winbase/nf-winbase-getsystempowerstatus) function, which returns general information about all power sources in the system.</span></span> <span data-ttu-id="0a47a-109">Quando possibile, è consigliabile usare **GetSystemPowerStatus** .</span><span class="sxs-lookup"><span data-stu-id="0a47a-109">You should use **GetSystemPowerStatus** whenever possible.</span></span>

<span data-ttu-id="0a47a-110">In alcuni casi, tuttavia, sono necessarie informazioni dettagliate su ogni singola batteria.</span><span class="sxs-lookup"><span data-stu-id="0a47a-110">In some cases, however, detailed information about each individual battery is necessary.</span></span> <span data-ttu-id="0a47a-111">A questo scopo, ogni dispositivo della batteria espone un'interfaccia IOCTL.</span><span class="sxs-lookup"><span data-stu-id="0a47a-111">For this purpose, each battery device exposes an IOCTL interface.</span></span> <span data-ttu-id="0a47a-112">Le operazioni IOCTL seguenti vengono eseguite utilizzando la funzione [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) :</span><span class="sxs-lookup"><span data-stu-id="0a47a-112">The following IOCTL operations are performed using the [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) function:</span></span>

<dl>

[<span data-ttu-id="0a47a-113">**\_ \_ informazioni sulle query della batteria IOCTL \_**</span><span class="sxs-lookup"><span data-stu-id="0a47a-113">**IOCTL\_BATTERY\_QUERY\_INFORMATION**</span></span>](ioctl-battery-query-information.md)  
[<span data-ttu-id="0a47a-114">**\_stato della \_ query della batteria IOCTL \_**</span><span class="sxs-lookup"><span data-stu-id="0a47a-114">**IOCTL\_BATTERY\_QUERY\_STATUS**</span></span>](ioctl-battery-query-status.md)  
[<span data-ttu-id="0a47a-115">**\_tag di \_ query della batteria IOCTL \_**</span><span class="sxs-lookup"><span data-stu-id="0a47a-115">**IOCTL\_BATTERY\_QUERY\_TAG**</span></span>](ioctl-battery-query-tag.md)  
[<span data-ttu-id="0a47a-116">**\_ \_ informazioni sui set di batterie IOCTL \_**</span><span class="sxs-lookup"><span data-stu-id="0a47a-116">**IOCTL\_BATTERY\_SET\_INFORMATION**</span></span>](ioctl-battery-set-information.md)  
</dl>

<span data-ttu-id="0a47a-117">Per utilizzare questa interfaccia, un'applicazione deve eseguire diversi passaggi.</span><span class="sxs-lookup"><span data-stu-id="0a47a-117">To use this interface, an application must follow several steps.</span></span> <span data-ttu-id="0a47a-118">Per prima cosa, è necessario usare routine di installazione per enumerare tutti i dispositivi che dispongono di un'interfaccia di classe della batteria.</span><span class="sxs-lookup"><span data-stu-id="0a47a-118">First, it must use setup routines to enumerate all devices that have a battery class interface.</span></span> <span data-ttu-id="0a47a-119">Si noti che questi dispositivi rappresentano le porte della batteria, non le batterie effettive presenti nel sistema.</span><span class="sxs-lookup"><span data-stu-id="0a47a-119">Note that these devices represent the battery ports, not actual batteries present in the system.</span></span> <span data-ttu-id="0a47a-120">L'applicazione deve quindi aprire un handle per ogni dispositivo, in modo che possa usare la funzione [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) per inviare richieste al dispositivo e quindi acquisire i tag per tutte le batterie inserite.</span><span class="sxs-lookup"><span data-stu-id="0a47a-120">The application must then open a handle to each device so it can use the [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) function to send requests to the device, and then acquire tags for any batteries that are inserted.</span></span> <span data-ttu-id="0a47a-121">Dopo aver completato questi passaggi, l'applicazione può inviare query a ogni dispositivo della batteria.</span><span class="sxs-lookup"><span data-stu-id="0a47a-121">After completing these steps, the application can send queries to each battery device.</span></span>

## <a name="battery-tags"></a><span data-ttu-id="0a47a-122">Tag della batteria</span><span class="sxs-lookup"><span data-stu-id="0a47a-122">Battery Tags</span></span>

<span data-ttu-id="0a47a-123">Poiché ogni dispositivo della batteria rappresenta uno slot in cui è possibile inserire una batteria, è necessario un modo per determinare quando la batteria viene rimossa e reinserita, sostituita o modificata in altro modo.</span><span class="sxs-lookup"><span data-stu-id="0a47a-123">Because each battery device represents a slot into which a battery can be inserted, there must be a way to determine when the battery is removed and reinserted, replaced, or changed in any other way.</span></span> <span data-ttu-id="0a47a-124">A tale scopo, a ogni batteria in un particolare slot viene assegnato un tag.</span><span class="sxs-lookup"><span data-stu-id="0a47a-124">To do this, each battery in a particular slot is assigned a tag.</span></span> <span data-ttu-id="0a47a-125">Questo tag deve essere usato per tutte le query per le informazioni.</span><span class="sxs-lookup"><span data-stu-id="0a47a-125">This tag must be used for all queries for information.</span></span> <span data-ttu-id="0a47a-126">Se il tag fornito dall'applicazione non corrisponde alla batteria, la query ha esito negativo, indicando all'applicazione che la batteria è stata modificata in qualche modo.</span><span class="sxs-lookup"><span data-stu-id="0a47a-126">If the tag provided by the application does not match the battery, the query fails, indicating to the application that the battery has changed in some way.</span></span> <span data-ttu-id="0a47a-127">Per completare correttamente la query, è necessario un nuovo tag della batteria.</span><span class="sxs-lookup"><span data-stu-id="0a47a-127">To successfully complete the query, a new battery tag is required.</span></span> <span data-ttu-id="0a47a-128">Acquisire il tag usando l'operazione di [**\_ tag di \_ query \_ della batteria IOCTL**](ioctl-battery-query-tag.md) .</span><span class="sxs-lookup"><span data-stu-id="0a47a-128">Acquire the tag using the [**IOCTL\_BATTERY\_QUERY\_TAG**](ioctl-battery-query-tag.md) operation.</span></span> <span data-ttu-id="0a47a-129">Se in tale slot è presente una batteria, il tag restituito può essere passato a qualsiasi altro IOCTL della batteria per eseguire altre funzioni.</span><span class="sxs-lookup"><span data-stu-id="0a47a-129">If a battery is present in that slot, the tag returned can be passed to any of the other battery IOCTLs to perform other functions.</span></span> <span data-ttu-id="0a47a-130">In un sistema a più batterie, ogni dispositivo batteria (slot) rilascia tag della batteria in modo indipendente, quindi il tag di due dispositivi distinti potrebbe essere identico a volte.</span><span class="sxs-lookup"><span data-stu-id="0a47a-130">On a multi-battery system, each battery device (slot) issues battery tags independently, so the tag from two separate devices could at times be identical.</span></span>

<span data-ttu-id="0a47a-131">Una modifica nel tag della batteria non significa necessariamente che la batteria è stata rimossa e reinserita o sostituita.</span><span class="sxs-lookup"><span data-stu-id="0a47a-131">A change in the battery tag does not necessarily mean that the battery was removed and reinserted or replaced.</span></span> <span data-ttu-id="0a47a-132">È possibile generare un nuovo tag se è presente una modifica in uno dei dati normalmente statici.</span><span class="sxs-lookup"><span data-stu-id="0a47a-132">A new tag can be generated if there is a change in any of the data that would normally be static.</span></span> <span data-ttu-id="0a47a-133">Ad esempio, quando si esegue una ricarica della batteria, è possibile che sia stata modificata l'ultima capacità completamente caricata.</span><span class="sxs-lookup"><span data-stu-id="0a47a-133">For example, when a battery is done charging, the last fully charged capacity may have changed.</span></span> <span data-ttu-id="0a47a-134">Il tag può anche cambiare se la comunicazione della batteria è stata persa temporaneamente o se si è verificata una notifica non corretta dal BIOS.</span><span class="sxs-lookup"><span data-stu-id="0a47a-134">The tag can also change if battery communication was temporarily lost or if there was an improper notification from the BIOS.</span></span> <span data-ttu-id="0a47a-135">In alcuni sistemi, il tag della batteria può essere aggiornato ogni volta che viene modificato lo stato AC.</span><span class="sxs-lookup"><span data-stu-id="0a47a-135">On some systems, the battery tag may be updated whenever the AC status changes.</span></span> <span data-ttu-id="0a47a-136">Questo comportamento è dovuto a una caratteristica del sistema di batteria e non è comune.</span><span class="sxs-lookup"><span data-stu-id="0a47a-136">This behavior is due to a characteristic of the battery system and isn't common.</span></span>

<span data-ttu-id="0a47a-137">Ogni volta che viene aggiornato il tag della batteria, la batteria deve essere considerata come una nuova batteria e tutti i dati memorizzati nella cache devono essere letti nuovamente.</span><span class="sxs-lookup"><span data-stu-id="0a47a-137">Whenever the battery tag is updated, the battery should be treated as if it were a new battery and all cached data should be re-read.</span></span> <span data-ttu-id="0a47a-138">Se un'applicazione deve stabilire se è presente la stessa batteria fisica, deve controllare il valore di **BatteryUniqueID** nel buffer di output delle [**\_ \_ \_ informazioni sulle query della batteria IOCTL**](ioctl-battery-query-information.md) quando viene chiamato con il livello di informazioni **BatteryUniqueID** .</span><span class="sxs-lookup"><span data-stu-id="0a47a-138">If an application needs to know if the same physical battery is present, it should check the value of **BatteryUniqueID** in the output buffer of [**IOCTL\_BATTERY\_QUERY\_INFORMATION**](ioctl-battery-query-information.md) when called with the **BatteryUniqueID** information level.</span></span>

## <a name="related-topics"></a><span data-ttu-id="0a47a-139">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="0a47a-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0a47a-140">Informazioni sul risparmio energia</span><span class="sxs-lookup"><span data-stu-id="0a47a-140">About Power Management</span></span>](about-power-management.md)
</dt> <dt>

[<span data-ttu-id="0a47a-141">Enumerazione dei dispositivi della batteria</span><span class="sxs-lookup"><span data-stu-id="0a47a-141">Enumerating Battery Devices</span></span>](enumerating-battery-devices.md)
</dt> </dl>

 

 
