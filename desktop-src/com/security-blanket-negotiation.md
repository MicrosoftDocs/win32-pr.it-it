---
title: Negoziazione della copertura della sicurezza
description: Negoziazione della copertura della sicurezza
ms.assetid: 5a01912d-611c-4a6e-ab9d-0243cba331f1
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e51407de908eaaf0f79eea452046f8e424ccf900
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/21/2020
ms.locfileid: "104047435"
---
# <a name="security-blanket-negotiation"></a><span data-ttu-id="3e2be-103">Negoziazione della copertura della sicurezza</span><span class="sxs-lookup"><span data-stu-id="3e2be-103">Security Blanket Negotiation</span></span>

<span data-ttu-id="3e2be-104">Una copertura di sicurezza è un gruppo di valori che descrivono le impostazioni di sicurezza che si applicano a tutti i proxy in un processo o solo a un particolare proxy di interfaccia.</span><span class="sxs-lookup"><span data-stu-id="3e2be-104">A security blanket is a group of values that describe the security settings that apply to all proxies in a process or to just a particular interface proxy.</span></span> <span data-ttu-id="3e2be-105">Una copertura di sicurezza comprende i valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="3e2be-105">A security blanket comprises the following values:</span></span>

-   <span data-ttu-id="3e2be-106">Servizio di autenticazione</span><span class="sxs-lookup"><span data-stu-id="3e2be-106">Authentication service</span></span>
-   <span data-ttu-id="3e2be-107">Servizio di autorizzazione</span><span class="sxs-lookup"><span data-stu-id="3e2be-107">Authorization service</span></span>
-   <span data-ttu-id="3e2be-108">Nome principale</span><span class="sxs-lookup"><span data-stu-id="3e2be-108">Principal name</span></span>
-   <span data-ttu-id="3e2be-109">Livello di autenticazione</span><span class="sxs-lookup"><span data-stu-id="3e2be-109">Authentication level</span></span>
-   <span data-ttu-id="3e2be-110">Livello di rappresentazione</span><span class="sxs-lookup"><span data-stu-id="3e2be-110">Impersonation level</span></span>
-   <span data-ttu-id="3e2be-111">Identità di autenticazione</span><span class="sxs-lookup"><span data-stu-id="3e2be-111">Authentication identity</span></span>
-   <span data-ttu-id="3e2be-112">Funzionalità</span><span class="sxs-lookup"><span data-stu-id="3e2be-112">Capabilities</span></span>
-   <span data-ttu-id="3e2be-113">Un elenco di controllo di accesso (ACL) (solo server)</span><span class="sxs-lookup"><span data-stu-id="3e2be-113">An access control list (ACL) (servers only)</span></span>

<span data-ttu-id="3e2be-114">La negoziazione della copertura di sicurezza è il processo usato da COM per scegliere le impostazioni di sicurezza per un proxy al momento della creazione.</span><span class="sxs-lookup"><span data-stu-id="3e2be-114">Security blanket negotiation is the process that COM uses to choose the security settings for a proxy when it is created.</span></span> <span data-ttu-id="3e2be-115">Questo processo comporta il confronto della copertura della sicurezza del server con la coperta di sicurezza del client e l'utilizzo di tali valori per creare una copertura di sicurezza predefinita appropriata per il proxy.</span><span class="sxs-lookup"><span data-stu-id="3e2be-115">This process involves comparing the server's security blanket with the client's security blanket and using those values to create an appropriate default security blanket for the proxy.</span></span> <span data-ttu-id="3e2be-116">I paragrafi seguenti spiegano dove provengono le coperte di sicurezza del client e del server e descrivono in che modo COM negozia la copertura di sicurezza per il proxy usando le coperte di sicurezza del server e del client.</span><span class="sxs-lookup"><span data-stu-id="3e2be-116">The following paragraphs explain where the client's and the server's security blankets come from and describe how COM negotiates the security blanket for the proxy using the client's and server's security blankets.</span></span>

<span data-ttu-id="3e2be-117">Il client e il server possono chiamare [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) per specificare le rispettive coperte di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="3e2be-117">The client and the server can each call [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) to specify their respective security blankets.</span></span> <span data-ttu-id="3e2be-118">Se un'applicazione non chiama **CoInitializeSecurity** in modo esplicito, com la chiama in modo implicito per l'applicazione, usando i valori predefiniti appropriati.</span><span class="sxs-lookup"><span data-stu-id="3e2be-118">If an application doesn't call **CoInitializeSecurity** explicitly, COM calls it implicitly for the application, using appropriate default values.</span></span> <span data-ttu-id="3e2be-119">Per ulteriori informazioni su questi valori predefiniti, vedere la pagina relativa alle [impostazioni predefinite di sicurezza com](com-security-defaults.md).</span><span class="sxs-lookup"><span data-stu-id="3e2be-119">For more information about these default values, see [COM Security Defaults](com-security-defaults.md).</span></span>

<span data-ttu-id="3e2be-120">Alcuni parametri per [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) si applicano quando l'applicazione è un server e altri si applicano quando l'applicazione è un client.</span><span class="sxs-lookup"><span data-stu-id="3e2be-120">Some parameters to [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) apply when the application is a server, and some apply when the application is a client.</span></span> <span data-ttu-id="3e2be-121">Quando l'applicazione funge da server, questi parametri sono rilevanti: un ACL, un elenco di Tuple servizio di autenticazione/servizio di autorizzazione/nome entità e un livello di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="3e2be-121">When the application is acting as a server, these parameters are relevant: an ACL, a list of authentication service/authorization service/principal name tuples, and an authentication level.</span></span> <span data-ttu-id="3e2be-122">La chiamata di un server a **CoInitializeSecurity**, implicita o esplicita, determina la copertura della sicurezza del server, che rimane fissa.</span><span class="sxs-lookup"><span data-stu-id="3e2be-122">A server's call to **CoInitializeSecurity**, whether implicit or explicit, determines the server's security blanket, which remains fixed.</span></span>

<span data-ttu-id="3e2be-123">Quando l'applicazione funge da client, i valori seguenti passati a [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) sono rilevanti: un livello di autenticazione, un livello di rappresentazione, l'identità di autenticazione e le funzionalità.</span><span class="sxs-lookup"><span data-stu-id="3e2be-123">When the application is acting as a client, the following values passed to [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) are relevant: an authentication level, an impersonation level, the authentication identity, and capabilities.</span></span> <span data-ttu-id="3e2be-124">Una chiamata implicita o esplicita di un client a **CoInitializeSecurity** indica la copertura di sicurezza che il client desidera.</span><span class="sxs-lookup"><span data-stu-id="3e2be-124">A client's implicit or explicit call to **CoInitializeSecurity** indicates the security blanket that the client wants.</span></span>

<span data-ttu-id="3e2be-125">Quando viene creato un proxy, COM utilizza i valori specificati dalla copertura di sicurezza del server e la copertura di sicurezza del client per negoziare una copertura di sicurezza predefinita appropriata per il proxy.</span><span class="sxs-lookup"><span data-stu-id="3e2be-125">When a proxy is created, COM uses the values specified by the server's security blanket and the client's security blanket to negotiate a default security blanket that is appropriate for the proxy.</span></span> <span data-ttu-id="3e2be-126">COM sceglie un servizio di autenticazione che funziona sia nel client che nel server.</span><span class="sxs-lookup"><span data-stu-id="3e2be-126">COM picks an authentication service that works on both the client and server.</span></span> <span data-ttu-id="3e2be-127">Il servizio di autorizzazione e il nome dell'entità vengono scelti per lavorare con il servizio di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="3e2be-127">The authorization service and principal name are chosen to work with the authentication service.</span></span> <span data-ttu-id="3e2be-128">Per il livello di autenticazione, COM sceglie maggiore dei livelli di autenticazione specificati dal client e dal server.</span><span class="sxs-lookup"><span data-stu-id="3e2be-128">For the authentication level, COM chooses the higher of the authentication levels specified by the client and the server.</span></span> <span data-ttu-id="3e2be-129">Il livello di rappresentazione e le funzionalità scelte da COM sono quelli specificati dal client.</span><span class="sxs-lookup"><span data-stu-id="3e2be-129">The impersonation level and the capabilities chosen by COM are the ones specified by the client.</span></span> <span data-ttu-id="3e2be-130">L'identità di autenticazione è quella specificata dal client per il servizio di autenticazione scelto.</span><span class="sxs-lookup"><span data-stu-id="3e2be-130">The authentication identity is the one specified by the client for the chosen authentication service.</span></span>

<span data-ttu-id="3e2be-131">Una volta calcolata la copertura di sicurezza predefinita, i relativi valori vengono assegnati al proxy appena creato.</span><span class="sxs-lookup"><span data-stu-id="3e2be-131">Once the default security blanket has been computed, its values are assigned to the newly created proxy.</span></span> <span data-ttu-id="3e2be-132">Il client può eseguire l'override delle impostazioni di sicurezza per il proxy chiamando [**IClientSecurity:: Seblankt**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket).</span><span class="sxs-lookup"><span data-stu-id="3e2be-132">The client can override the security settings for the proxy by calling [**IClientSecurity::SetBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket).</span></span> <span data-ttu-id="3e2be-133">I valori specificati per il **Seblankt** non vengono negoziati; vengono semplicemente assegnati al proxy specificato.</span><span class="sxs-lookup"><span data-stu-id="3e2be-133">The values specified to **SetBlanket** are not negotiated; they are simply assigned to the specified proxy.</span></span> <span data-ttu-id="3e2be-134">Tuttavia, se i parametri predefiniti (ad esempio, il \_ livello IMP C di RPC \_ \_ \_ ) vengono passati a **seblankt**, com usa l'algoritmo di negoziazione della copertura di sicurezza descritto in precedenza per calcolare i parametri predefiniti.</span><span class="sxs-lookup"><span data-stu-id="3e2be-134">However, if default parameters (such as RPC\_C\_IMP\_LEVEL\_DEFAULT) are passed to **SetBlanket**, COM uses the previously described security blanket negotiation algorithm to compute the default parameters.</span></span>

## <a name="related-topics"></a><span data-ttu-id="3e2be-135">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="3e2be-135">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3e2be-136">Sicurezza in COM</span><span class="sxs-lookup"><span data-stu-id="3e2be-136">Security in COM</span></span>](security-in-com.md)
</dt> </dl>

 

 