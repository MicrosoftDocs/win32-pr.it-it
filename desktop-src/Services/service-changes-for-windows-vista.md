---
description: Sono state apportate modifiche significative al modello di servizi per migliorare le prestazioni, l'affidabilità, la sicurezza, la gestione e l'amministrazione dei servizi.
ms.assetid: b1c09468-51e1-4ffd-bf07-6faa9f9336dd
title: Modifiche ai servizi per Windows Vista
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e6ba96cc0c69e2bda4e19e7d093098c578e31c4b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/07/2021
ms.locfileid: "103879030"
---
# <a name="service-changes-for-windows-vista"></a><span data-ttu-id="02fd8-103">Modifiche ai servizi per Windows Vista</span><span class="sxs-lookup"><span data-stu-id="02fd8-103">Service Changes for Windows Vista</span></span>

<span data-ttu-id="02fd8-104">Sono state apportate modifiche significative al modello di servizi per migliorare le prestazioni, l'affidabilità, la sicurezza, la gestione e l'amministrazione dei servizi.</span><span class="sxs-lookup"><span data-stu-id="02fd8-104">There have been significant changes to the services model to improve performance, reliability, security, management, and administration of services.</span></span>

<span data-ttu-id="02fd8-105">Nella tabella seguente sono riepilogati i miglioramenti apportati ai servizi per Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="02fd8-105">The following table summarizes the enhancements to services for Windows Vista.</span></span>



| <span data-ttu-id="02fd8-106">Funzionalità avanzata</span><span class="sxs-lookup"><span data-stu-id="02fd8-106">Enhancement</span></span>                                                                                                                                                                                                  | <span data-ttu-id="02fd8-107">Descrizione</span><span class="sxs-lookup"><span data-stu-id="02fd8-107">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="02fd8-108"><span id="Delayed_Auto-Start"></span><span id="delayed_auto-start"></span><span id="DELAYED_AUTO-START"></span>Avvio automatico ritardato</span><span class="sxs-lookup"><span data-stu-id="02fd8-108"><span id="Delayed_Auto-Start"></span><span id="delayed_auto-start"></span><span id="DELAYED_AUTO-START"></span>Delayed Auto-Start</span></span><br/>                                                                 | <span data-ttu-id="02fd8-109">I servizi con avvio automatico ritardato vengono avviati poco dopo l'avvio del sistema.</span><span class="sxs-lookup"><span data-stu-id="02fd8-109">Delayed auto-start services are started shortly after the system has started.</span></span> <span data-ttu-id="02fd8-110">Ciò consente di migliorare le prestazioni di avvio del sistema garantendo al tempo stesso l'avvio automatico per questi servizi.</span><span class="sxs-lookup"><span data-stu-id="02fd8-110">This improves system startup performance while still providing automatic startup for these services.</span></span> <span data-ttu-id="02fd8-111">Per impostare il flag di avvio automatico ritardato, chiamare la funzione [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) con le **\_ \_ \_ \_ \_ informazioni di avvio automatico ritardato della configurazione del servizio**.</span><span class="sxs-lookup"><span data-stu-id="02fd8-111">To set the delayed auto-start flag, call the [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) function with **SERVICE\_CONFIG\_DELAYED\_AUTO\_START\_INFO**.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="02fd8-112"><span id="Failure_Detection_and_Recovery"></span><span id="failure_detection_and_recovery"></span><span id="FAILURE_DETECTION_AND_RECOVERY"></span>Rilevamento e ripristino degli errori</span><span class="sxs-lookup"><span data-stu-id="02fd8-112"><span id="Failure_Detection_and_Recovery"></span><span id="failure_detection_and_recovery"></span><span id="FAILURE_DETECTION_AND_RECOVERY"></span>Failure Detection and Recovery</span></span><br/>                 | <span data-ttu-id="02fd8-113">Se un servizio ha esito negativo, gestione controllo servizi può eseguire un'azione non riuscita, ad esempio il riavvio del servizio in un tentativo di recupero da tale errore.</span><span class="sxs-lookup"><span data-stu-id="02fd8-113">If a service fails, the service control manager (SCM) can perform a failure action, such as restarting the service in an attempt to recover from that failure.</span></span> <span data-ttu-id="02fd8-114">Per configurare un'azione di errore, chiamare [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) con le azioni di errore di configurazione del **servizio \_ \_ \_**.</span><span class="sxs-lookup"><span data-stu-id="02fd8-114">To configure a failure action, call [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_FAILURE\_ACTIONS**.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="02fd8-115"><span id="Preshutdown_Notifications"></span><span id="preshutdown_notifications"></span><span id="PRESHUTDOWN_NOTIFICATIONS"></span>Notifiche di prechiusura</span><span class="sxs-lookup"><span data-stu-id="02fd8-115"><span id="Preshutdown_Notifications"></span><span id="preshutdown_notifications"></span><span id="PRESHUTDOWN_NOTIFICATIONS"></span>Preshutdown Notifications</span></span><br/>                                     | <span data-ttu-id="02fd8-116">Un servizio può registrarsi per ricevere una notifica di pre- **\_ \_ arresto del controllo del servizio** nella funzione [*HandlerEx*](/windows/desktop/api/WinSvc/nc-winsvc-lphandler_function_ex) prima di ricevere la notifica di arresto effettiva.</span><span class="sxs-lookup"><span data-stu-id="02fd8-116">A service can register to receive a **SERVICE\_CONTROL\_PRESHUTDOWN** notification in its [*HandlerEx*](/windows/desktop/api/WinSvc/nc-winsvc-lphandler_function_ex) function before it receives the actual shutdown notification.</span></span> <span data-ttu-id="02fd8-117">Questa operazione fornisce ai servizi una procedura di arresto molto più lunga per l'arresto normale.</span><span class="sxs-lookup"><span data-stu-id="02fd8-117">This provides services with a lengthy shutdown procedure more time to shut down gracefully.</span></span> <span data-ttu-id="02fd8-118">Per impostare il valore di timeout, chiamare [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) con le **\_ \_ \_ informazioni di prespegnimento della configurazione del servizio**.</span><span class="sxs-lookup"><span data-stu-id="02fd8-118">To set the time-out value, call [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_PRESHUTDOWN\_INFO**.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="02fd8-119"><span id="Restricted_Network_Access"></span><span id="restricted_network_access"></span><span id="RESTRICTED_NETWORK_ACCESS"></span>Accesso alla rete limitato</span><span class="sxs-lookup"><span data-stu-id="02fd8-119"><span id="Restricted_Network_Access"></span><span id="restricted_network_access"></span><span id="RESTRICTED_NETWORK_ACCESS"></span>Restricted Network Access</span></span><br/>                                     | <span data-ttu-id="02fd8-120">È possibile usare i SID del servizio per limitare l'accesso a porte, protocolli o la direzione del traffico di rete.</span><span class="sxs-lookup"><span data-stu-id="02fd8-120">You can use service SIDs to restrict access to ports, protocols, or the direction of network traffic.</span></span> <span data-ttu-id="02fd8-121">Per limitare l'accesso di un servizio alla rete, usare l'interfaccia [**INetFwServiceRestriction**](/windows/desktop/api/netfw/nn-netfw-inetfwservicerestriction) .</span><span class="sxs-lookup"><span data-stu-id="02fd8-121">To restrict a service's access to the network, use the [**INetFwServiceRestriction**](/windows/desktop/api/netfw/nn-netfw-inetfwservicerestriction) interface.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="02fd8-122"><span id="Running_with_Least_Privilege"></span><span id="running_with_least_privilege"></span><span id="RUNNING_WITH_LEAST_PRIVILEGE"></span>Esecuzione con privilegi minimi</span><span class="sxs-lookup"><span data-stu-id="02fd8-122"><span id="Running_with_Least_Privilege"></span><span id="running_with_least_privilege"></span><span id="RUNNING_WITH_LEAST_PRIVILEGE"></span>Running with Least Privilege</span></span><br/>                         | <span data-ttu-id="02fd8-123">I servizi possono essere eseguiti con qualsiasi account che contenga i privilegi richiesti (LocalService, NetworkService, LocalSystem, un account di dominio o un account locale) e indichi i privilegi richiesti chiamando [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) con le **\_ \_ \_ \_ informazioni sui privilegi richiesti** per la configurazione del servizio.</span><span class="sxs-lookup"><span data-stu-id="02fd8-123">Services can run under any account that contains the required privileges (LocalService, NetworkService, LocalSystem, a domain account, or a local account) and indicate the required privileges by calling [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_REQUIRED\_PRIVILEGES\_INFO**.</span></span> <span data-ttu-id="02fd8-124">SCM rimuove tutti i privilegi non necessari.</span><span class="sxs-lookup"><span data-stu-id="02fd8-124">The SCM removes any privileges that are not required.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="02fd8-125"><span id="Service_Isolation"></span><span id="service_isolation"></span><span id="SERVICE_ISOLATION"></span>Isolamento del servizio</span><span class="sxs-lookup"><span data-stu-id="02fd8-125"><span id="Service_Isolation"></span><span id="service_isolation"></span><span id="SERVICE_ISOLATION"></span>Service Isolation</span></span><br/>                                                                     | <span data-ttu-id="02fd8-126">Un servizio può isolare gli oggetti, ad esempio i file o le chiavi del registro di sistema, per utilizzarli in modo esclusivo proteggendo tali oggetti con una voce di controllo di accesso contenente un SID del servizio.</span><span class="sxs-lookup"><span data-stu-id="02fd8-126">A service can isolate objects, such as files or registry keys, for its exclusive use by securing them with an access control entry that contains a service SID.</span></span> <span data-ttu-id="02fd8-127">Dopo l'assegnazione di questo SID a un servizio, il proprietario del servizio può modificare gli elenchi di controllo di accesso degli oggetti per concedere l'accesso al SID.</span><span class="sxs-lookup"><span data-stu-id="02fd8-127">After this SID has been assigned to a service, the service owner can modify the objects' access control lists to grant access to the SID.</span></span> <span data-ttu-id="02fd8-128">Questo consente a un servizio di accedere a oggetti specifici senza eseguire un account con privilegi elevati o di abbassare la sicurezza degli oggetti.</span><span class="sxs-lookup"><span data-stu-id="02fd8-128">This enables a service to access specific objects without running under a high-privilege account or lowering the security on the objects.</span></span> <span data-ttu-id="02fd8-129">Per impostare il SID del servizio, chiamare [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) con **\_ \_ \_ \_ informazioni SID servizio configurazione servizio**.</span><span class="sxs-lookup"><span data-stu-id="02fd8-129">To set the service SID, call [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_SERVICE\_SID\_INFO**.</span></span><br/>                                                                                                                                                                                                                                     |
| <span data-ttu-id="02fd8-130"><span id="Service_State_Change_Notifications"></span><span id="service_state_change_notifications"></span><span id="SERVICE_STATE_CHANGE_NOTIFICATIONS"></span>Notifiche di modifica dello stato del servizio</span><span class="sxs-lookup"><span data-stu-id="02fd8-130"><span id="Service_State_Change_Notifications"></span><span id="service_state_change_notifications"></span><span id="SERVICE_STATE_CHANGE_NOTIFICATIONS"></span>Service State Change Notifications</span></span><br/> | <span data-ttu-id="02fd8-131">I servizi possono essere registrati per ricevere una notifica quando un servizio viene creato, eliminato o presenta una modifica dello stato tramite la funzione [**NotifyServiceStatusChange**](/windows/desktop/api/Winsvc/nf-winsvc-notifyservicestatuschangea) .</span><span class="sxs-lookup"><span data-stu-id="02fd8-131">Services can register to be notified when a service is created, deleted, or has a change in status by using the [**NotifyServiceStatusChange**](/windows/desktop/api/Winsvc/nf-winsvc-notifyservicestatuschangea) function.</span></span> <span data-ttu-id="02fd8-132">Questa operazione è più efficiente rispetto alla chiamata della funzione [**QueryServiceStatusEx**](/windows/desktop/api/Winsvc/nf-winsvc-queryservicestatusex) in un ciclo per eseguire il polling dello stato.</span><span class="sxs-lookup"><span data-stu-id="02fd8-132">This is more efficient than calling the [**QueryServiceStatusEx**](/windows/desktop/api/Winsvc/nf-winsvc-queryservicestatusex) function in a loop to poll for status.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="02fd8-133"><span id="Session_0_Isolation"></span><span id="session_0_isolation"></span><span id="SESSION_0_ISOLATION"></span>Isolamento della sessione 0</span><span class="sxs-lookup"><span data-stu-id="02fd8-133"><span id="Session_0_Isolation"></span><span id="session_0_isolation"></span><span id="SESSION_0_ISOLATION"></span>Session 0 Isolation</span></span><br/>                                                             | <span data-ttu-id="02fd8-134">I servizi sono sempre eseguiti nella sessione 0.</span><span class="sxs-lookup"><span data-stu-id="02fd8-134">Services have always run in session 0.</span></span> <span data-ttu-id="02fd8-135">Prima di Windows Vista, anche il primo utente ad accedere è stato assegnato alla sessione 0.</span><span class="sxs-lookup"><span data-stu-id="02fd8-135">Before Windows Vista, the first user to log on was also assigned to session 0.</span></span> <span data-ttu-id="02fd8-136">A questo punto, la sessione 0 è riservata esclusivamente ai servizi e ad altre applicazioni non associate a una sessione utente interattiva.</span><span class="sxs-lookup"><span data-stu-id="02fd8-136">Now, session 0 is reserved exclusively for services and other applications not associated with an interactive user session.</span></span> <span data-ttu-id="02fd8-137">Il primo utente ad accedere è connesso alla sessione 1, il secondo utente per l'accesso è connesso alla sessione 2 e così via. La sessione 0 non supporta i processi che interagiscono con l'utente.</span><span class="sxs-lookup"><span data-stu-id="02fd8-137">(The first user to log on is connected to session 1, the second user to log on is connected to session 2, and so on.) Session 0 does not support processes that interact with the user.</span></span><br/> <span data-ttu-id="02fd8-138">Questa modifica indica che un servizio non può inviare o inviare un messaggio a un'applicazione e un'applicazione non può inviare o inviare un messaggio a un servizio.</span><span class="sxs-lookup"><span data-stu-id="02fd8-138">This change means that a service cannot post or send a message to an application and an application cannot send or post a message to a service.</span></span> <span data-ttu-id="02fd8-139">Inoltre, i servizi non possono visualizzare direttamente un elemento dell'interfaccia utente, ad esempio una finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="02fd8-139">In addition, services cannot display a user interface item such as a dialog box directly.</span></span> <span data-ttu-id="02fd8-140">Un servizio può utilizzare la funzione [**WTSSendMessage**](/windows/desktop/api/wtsapi32/nf-wtsapi32-wtssendmessagea) per visualizzare una finestra di dialogo in un'altra sessione.</span><span class="sxs-lookup"><span data-stu-id="02fd8-140">A service can use the [**WTSSendMessage**](/windows/desktop/api/wtsapi32/nf-wtsapi32-wtssendmessagea) function to display a dialog box in another session.</span></span><br/> |



 

## <a name="related-topics"></a><span data-ttu-id="02fd8-141">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="02fd8-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="02fd8-142">Services</span><span class="sxs-lookup"><span data-stu-id="02fd8-142">Services</span></span>](services.md)
</dt> </dl>

 

