---
description: Un servizio (o qualsiasi processo in esecuzione in un contesto di sicurezza diverso) che deve accedere a una risorsa remota deve usare il nome Universal Naming Convention (UNC) per accedere alla risorsa.
ms.assetid: 2582259d-077c-4089-9a87-1a377994f0bd
title: Servizi e unità reindirizzate
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a3b1435e69ded3bf13a0869a0b9ad2b90bb4682c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "103968380"
---
# <a name="services-and-redirected-drives"></a><span data-ttu-id="d5112-103">Servizi e unità reindirizzate</span><span class="sxs-lookup"><span data-stu-id="d5112-103">Services and Redirected Drives</span></span>

<span data-ttu-id="d5112-104">Un servizio (o qualsiasi processo in esecuzione in un contesto di sicurezza diverso) che deve accedere a una risorsa remota deve usare il nome Universal Naming Convention (UNC) per accedere alla risorsa.</span><span class="sxs-lookup"><span data-stu-id="d5112-104">A service (or any process running in a different security context) that must access a remote resource should use the Universal Naming Convention (UNC) name to access the resource.</span></span> <span data-ttu-id="d5112-105">Il servizio deve disporre dei privilegi appropriati per accedere alla risorsa.</span><span class="sxs-lookup"><span data-stu-id="d5112-105">The service must have appropriate privileges to access the resource.</span></span> <span data-ttu-id="d5112-106">Se un servizio lato server utilizza una connessione RPC, è necessario abilitare la delega sul server remoto.</span><span class="sxs-lookup"><span data-stu-id="d5112-106">If a server-side service uses an RPC connection, delegation must be enabled on the remote server.</span></span>

<span data-ttu-id="d5112-107">Le lettere di unità non sono globali per il sistema.</span><span class="sxs-lookup"><span data-stu-id="d5112-107">Drive letters are not global to the system.</span></span> <span data-ttu-id="d5112-108">Ogni sessione di accesso riceve un proprio set di lettere di unità da a a Z. Pertanto, le unità reindirizzate non possono essere condivise tra i processi in esecuzione con account utente diversi.</span><span class="sxs-lookup"><span data-stu-id="d5112-108">Each logon session receives its own set of drive letters from A to Z. Therefore, redirected drives cannot be shared between processes running under different user accounts.</span></span> <span data-ttu-id="d5112-109">Inoltre, un servizio (o qualsiasi processo in esecuzione all'interno della propria sessione di accesso) non è in grado di accedere alle lettere di unità stabilite all'interno di un'altra sessione di accesso.</span><span class="sxs-lookup"><span data-stu-id="d5112-109">Moreover, a service (or any process running within its own logon session) cannot access the drive letters that were established within a different logon session.</span></span>

<span data-ttu-id="d5112-110">Un servizio non deve accedere direttamente alle risorse locali o di rete tramite lettere di unità mappate, né chiamare il comando **net use** per eseguire il mapping delle lettere di unità in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="d5112-110">A service should not directly access local or network resources through mapped drive letters, nor should it call the **net use** command to map drive letters at run time.</span></span> <span data-ttu-id="d5112-111">Il comando **net use** non è consigliato per diversi motivi:</span><span class="sxs-lookup"><span data-stu-id="d5112-111">The **net use** command is not recommended for several reasons:</span></span>

-   <span data-ttu-id="d5112-112">I mapping delle unità sono presenti tra i contesti di accesso, quindi se un'applicazione è in esecuzione nel contesto dell' [account LocalService](localservice-account.md), qualsiasi altro servizio in esecuzione in tale contesto potrebbe avere accesso all'unità mappata.</span><span class="sxs-lookup"><span data-stu-id="d5112-112">Drive mappings exist across logon contexts, so if an application is running in the context of the [LocalService account](localservice-account.md), then any other service running in that context may have access to the mapped drive.</span></span>
-   <span data-ttu-id="d5112-113">Se il servizio fornisce credenziali esplicite a un comando **net use** , tali credenziali potrebbero essere inavvertitamente condivise all'esterno dei limiti del servizio.</span><span class="sxs-lookup"><span data-stu-id="d5112-113">If the service provides explicit credentials to a **net use** command, those credentials might be inadvertently shared outside of the service boundaries.</span></span> <span data-ttu-id="d5112-114">Il servizio deve invece usare la [rappresentazione client](/windows/desktop/SecAuthZ/client-impersonation) per rappresentare l'utente.</span><span class="sxs-lookup"><span data-stu-id="d5112-114">Instead, the service should use [client impersonation](/windows/desktop/SecAuthZ/client-impersonation) to impersonate the user.</span></span>
-   <span data-ttu-id="d5112-115">Più servizi in esecuzione nello stesso contesto possono interferire tra loro.</span><span class="sxs-lookup"><span data-stu-id="d5112-115">Multiple services running in the same context may interfere with each other.</span></span> <span data-ttu-id="d5112-116">Se entrambi i servizi eseguono un **utilizzo netto** esplicito e forniscono contemporaneamente le stesse credenziali, un servizio avrà esito negativo con un errore "già connesso".</span><span class="sxs-lookup"><span data-stu-id="d5112-116">If both services perform an explicit **net use** and provide the same credentials at the same time, one service will fail with an "already connected" error.</span></span>

<span data-ttu-id="d5112-117">Inoltre, un servizio non deve utilizzare le [funzioni di rete di Windows](/windows/desktop/WNet/windows-networking-functions) per gestire le lettere di unità mappate.</span><span class="sxs-lookup"><span data-stu-id="d5112-117">Additionally, a service should not use the [Windows Networking Functions](/windows/desktop/WNet/windows-networking-functions) to manage mapped drive letters.</span></span> <span data-ttu-id="d5112-118">Sebbene le funzioni WNet possano restituire correttamente, il comportamento risultante non è quello previsto.</span><span class="sxs-lookup"><span data-stu-id="d5112-118">Although the WNet functions may return successfully, the resulting behavior is not as intended.</span></span> <span data-ttu-id="d5112-119">Quando il sistema stabilisce un'unità reindirizzata, viene archiviata in base ai singoli utenti.</span><span class="sxs-lookup"><span data-stu-id="d5112-119">When the system establishes a redirected drive, it is stored on a per-user basis.</span></span> <span data-ttu-id="d5112-120">Solo l'utente è in grado di gestire l'unità reindirizzata.</span><span class="sxs-lookup"><span data-stu-id="d5112-120">Only the user is able to manage the redirected drive.</span></span> <span data-ttu-id="d5112-121">Il sistema tiene traccia delle unità reindirizzate in base all'ID di sicurezza (SID) di accesso dell'utente.</span><span class="sxs-lookup"><span data-stu-id="d5112-121">The system keeps track of redirected drives based on the user's logon security identifier (SID).</span></span> <span data-ttu-id="d5112-122">Il SID di accesso è un identificatore univoco per la sessione di accesso dell'utente.</span><span class="sxs-lookup"><span data-stu-id="d5112-122">The logon SID is a unique identifier for the user's logon session.</span></span> <span data-ttu-id="d5112-123">Un singolo utente può avere più sessioni di accesso simultanee nel sistema.</span><span class="sxs-lookup"><span data-stu-id="d5112-123">A single user can have multiple, simultaneous logon sessions on the system.</span></span>

<span data-ttu-id="d5112-124">Se un servizio è configurato per l'esecuzione con un account utente, il sistema crea sempre una nuova sessione di accesso per l'utente e avvia il servizio nella nuova sessione di accesso.</span><span class="sxs-lookup"><span data-stu-id="d5112-124">If a service is configured to run under a user account, the system always creates a new logon session for the user and starts the service in that new logon session.</span></span> <span data-ttu-id="d5112-125">Pertanto, un servizio non è in grado di gestire i mapping delle unità stabiliti nelle altre sessioni dell'utente.</span><span class="sxs-lookup"><span data-stu-id="d5112-125">Therefore, a service cannot manage the drive mappings established within the user's other sessions.</span></span>

<span data-ttu-id="d5112-126">**Windows Server 2003:** In un computer con più interfacce di rete (ovvero un computer multihomed), possono verificarsi ritardi fino a 60 secondi quando si utilizzano i percorsi UNC per accedere ai file archiviati in un server SMB (Server Message Block) remoto.</span><span class="sxs-lookup"><span data-stu-id="d5112-126">**Windows Server 2003:** On a computer that has multiple network interfaces (that is, a multihomed computer), delays up to 60 seconds may occur when using UNC paths to access files that are stored on a remote server message block (SMB) server.</span></span> <span data-ttu-id="d5112-127">Per ulteriori informazioni, vedere l' [articolo 890553](https://support.microsoft.com/kb/890553) della Knowledge base della guida e del supporto tecnico.</span><span class="sxs-lookup"><span data-stu-id="d5112-127">For more information, see [article 890553](https://support.microsoft.com/kb/890553) in the Help and Support Knowledge Base.</span></span>

 

 
