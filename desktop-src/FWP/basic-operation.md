---
title: Operazione PAM
description: Windows Filtering Platform (WFP) esegue le proprie attività integrando i livelli, i filtri, gli shim e i callout seguenti delle entità di base.
ms.assetid: bf88ace7-1160-434b-9be0-3f9db6aa2e87
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 44e7a7d38bd0de5b1f549e2187c414644bf68442
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/19/2020
ms.locfileid: "106299756"
---
# <a name="wfp-operation"></a><span data-ttu-id="12842-103">Operazione PAM</span><span class="sxs-lookup"><span data-stu-id="12842-103">WFP Operation</span></span>

<span data-ttu-id="12842-104">Windows Filtering Platform (WFP) esegue le proprie attività integrando le seguenti entità di base: *livelli*, *filtri*, *shim* e *callout*.</span><span class="sxs-lookup"><span data-stu-id="12842-104">Windows Filtering Platform (WFP) performs its tasks by integrating the following basic entities: *Layers*, *Filters*, *Shims*, and *Callouts*.</span></span>

## <a name="layers"></a><span data-ttu-id="12842-105">Livelli</span><span class="sxs-lookup"><span data-stu-id="12842-105">Layers</span></span>

<span data-ttu-id="12842-106">Un *livello* è un contenitore gestito dal motore di filtro la cui funzione consiste nell'organizzare i filtri nei set.</span><span class="sxs-lookup"><span data-stu-id="12842-106">A *layer* is a container managed by the filter engine whose function is to organize filters into sets.</span></span> <span data-ttu-id="12842-107">Un livello non è un modulo nello stack di rete.</span><span class="sxs-lookup"><span data-stu-id="12842-107">A layer is not a module in the network stack.</span></span> <span data-ttu-id="12842-108">Ogni livello dispone di uno schema che definisce il tipo di filtri che è possibile aggiungere.</span><span class="sxs-lookup"><span data-stu-id="12842-108">Each layer has a schema that defines the type of filters that can be added to it.</span></span> <span data-ttu-id="12842-109">Per ulteriori informazioni, vedere [condizioni di filtro disponibili a ogni livello di filtro](filtering-conditions-available-at-each-filtering-layer.md) .</span><span class="sxs-lookup"><span data-stu-id="12842-109">See [Filtering Conditions Available at Each Filtering Layer](filtering-conditions-available-at-each-filtering-layer.md) for more information.</span></span>

<span data-ttu-id="12842-110">I livelli possono contenere sottolivelli per gestire i requisiti di filtro in conflitto, ad esempio "blocca porte TCP sopra 1024" e "Apri porta 1080".</span><span class="sxs-lookup"><span data-stu-id="12842-110">Layers may contain sub-layers to manage conflicting filter requirements such as "Block TCP ports above 1024" and "Open port 1080".</span></span> <span data-ttu-id="12842-111">Le regole per la gestione dei conflitti di filtro sono determinate dall' [arbitraggio dei filtri](filter-arbitration.md).</span><span class="sxs-lookup"><span data-stu-id="12842-111">The rules for managing filtering conflicts are determined by [Filter Arbitration](filter-arbitration.md).</span></span>

<span data-ttu-id="12842-112">PAM contiene un set di [sottolivelli predefiniti](management-filtering-sublayer-identifiers.md).</span><span class="sxs-lookup"><span data-stu-id="12842-112">WFP contains a set of [built-in sub-layers](management-filtering-sublayer-identifiers.md).</span></span> <span data-ttu-id="12842-113">Ogni livello eredita tutti i livelli secondari incorporati.</span><span class="sxs-lookup"><span data-stu-id="12842-113">Every layer inherits all the built-in sub-layers.</span></span> <span data-ttu-id="12842-114">Gli utenti possono anche aggiungere i propri livelli secondari.</span><span class="sxs-lookup"><span data-stu-id="12842-114">Users can also add their own sub-layers.</span></span>

<span data-ttu-id="12842-115">L'elenco dei livelli del motore di filtro è disponibile nella sezione di riferimento argomento [**filtro degli identificatori di livello**](management-filtering-layer-identifiers-.md).</span><span class="sxs-lookup"><span data-stu-id="12842-115">The list of filter engine layers is provided in the reference section topic [**Filtering Layer Identifiers**](management-filtering-layer-identifiers-.md).</span></span>

## <a name="filters"></a><span data-ttu-id="12842-116">Filtri</span><span class="sxs-lookup"><span data-stu-id="12842-116">Filters</span></span>

<span data-ttu-id="12842-117">Un *filtro* è una regola che viene confrontata con i pacchetti in ingresso o in uscita.</span><span class="sxs-lookup"><span data-stu-id="12842-117">A *filter* is a rule that is matched against incoming or outgoing packets.</span></span> <span data-ttu-id="12842-118">La regola indica al motore di filtro le operazioni da eseguire con il pacchetto, incluso per chiamare un modulo di callout per l'ispezione approfondita di pacchetti o flussi.</span><span class="sxs-lookup"><span data-stu-id="12842-118">The rule tells the filtering engine what to do with the packet, including to call a callout module for deep packet or stream inspection.</span></span> <span data-ttu-id="12842-119">Un filtro può, ad esempio, specificare "blocca il traffico con una porta TCP maggiore di 1024" o "richiama gli ID per tutto il traffico non protetto".</span><span class="sxs-lookup"><span data-stu-id="12842-119">For example, a filter may specify "Block traffic with a TCP port greater than 1024" or "Call out to IDS for all traffic that is not secured."</span></span>

<span data-ttu-id="12842-120">Un filtro in fase di avvio è un filtro che viene applicato in fase di avvio non appena viene avviato il driver dello stack TCP/IP (tcpip.sys).</span><span class="sxs-lookup"><span data-stu-id="12842-120">A boot-time filter is a filter that is enforced at boot-time as soon as the TCP/IP stack driver (tcpip.sys) starts.</span></span> <span data-ttu-id="12842-121">Un filtro dell'ora di avvio viene disabilitato all'avvio di BFE.</span><span class="sxs-lookup"><span data-stu-id="12842-121">A boot-time filter is disabled when BFE starts.</span></span> <span data-ttu-id="12842-122">Un filtro è contrassegnato come ora di avvio impostando il [**flag \_ \_ \_ BOOTTIME del flag di filtro FWPM**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_filter0) quando viene richiamato [**FwpmFilterAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmfilteradd0) .</span><span class="sxs-lookup"><span data-stu-id="12842-122">A filter is marked as boot-time by setting the [**FWPM\_FILTER\_FLAG\_BOOTTIME**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_filter0) flag when [**FwpmFilterAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmfilteradd0) is invoked.</span></span>

<span data-ttu-id="12842-123">Un filtro in fase di esecuzione è un filtro che viene applicato dopo l'avvio di BFE.</span><span class="sxs-lookup"><span data-stu-id="12842-123">A run-time filter is a filter that is enforced after BFE starts.</span></span> <span data-ttu-id="12842-124">Un filtro in fase di esecuzione può essere statico, dinamico o permanente a seconda della modalità di creazione.</span><span class="sxs-lookup"><span data-stu-id="12842-124">A run-time filter can be static, dynamic, or persistent depending on the way it was created.</span></span> <span data-ttu-id="12842-125">Per ulteriori informazioni sui diversi tipi di filtri di run-time e sulla relativa durata, vedere [gestione degli oggetti](object-management.md) .</span><span class="sxs-lookup"><span data-stu-id="12842-125">See [Object Management](object-management.md) for more information on the different types of run-time filters and their lifetime.</span></span>

## <a name="shims"></a><span data-ttu-id="12842-126">Shim</span><span class="sxs-lookup"><span data-stu-id="12842-126">Shims</span></span>

<span data-ttu-id="12842-127">Uno *shim* è un componente in modalità kernel che consente di prendere decisioni di filtro mediante la classificazione rispetto ai livelli del motore di filtro.</span><span class="sxs-lookup"><span data-stu-id="12842-127">A *shim* is a kernel-mode component that makes filtering decisions by classifying against the filter engine layers.</span></span> <span data-ttu-id="12842-128">Ogni shim viene classificato in base a uno o più livelli.</span><span class="sxs-lookup"><span data-stu-id="12842-128">Each shim classifies against one or more layers.</span></span> <span data-ttu-id="12842-129">Lo shim del modulo del livello di trasporto, ad esempio, viene classificato in base al livello di trasporto in ingresso, al livello di trasporto in uscita e ai livelli di ALE Connect e Receive-Accept per il primo pacchetto di un flusso.</span><span class="sxs-lookup"><span data-stu-id="12842-129">For example, the Transport Layer Module shim classifies against the Inbound Transport layer, the Outbound Transport layer, and the ALE Connect and Receive-Accept layers for the first packet of a flow.</span></span>

<span data-ttu-id="12842-130">Poiché i pacchetti, i flussi e gli eventi attraversano lo stack di rete, gli shim li analizzano per estrarre le condizioni e i valori classificabili, quindi vengono chiamati nel motore di filtro per valutarli in base ai filtri in un livello specificato.</span><span class="sxs-lookup"><span data-stu-id="12842-130">As packets, streams, and events traverse the network stack, the shims parse them to extract the classifiable conditions and values, and then call into the filter engine to evaluate them against the filters in a given layer.</span></span> <span data-ttu-id="12842-131">Il motore di filtro può richiamare uno o più callout come parte della classificazione.</span><span class="sxs-lookup"><span data-stu-id="12842-131">The filter engine may invoke one or more callouts as part of the classification.</span></span> <span data-ttu-id="12842-132">Gli shim eseguono l'eliminazione effettiva di pacchetti, flussi ed eventi in base al risultato della classificazione eseguita dal motore di filtro.</span><span class="sxs-lookup"><span data-stu-id="12842-132">The shims do the actual dropping of packets, streams, and events based on the result of the classification performed by the filter engine.</span></span>

## <a name="callouts"></a><span data-ttu-id="12842-133">Callout</span><span class="sxs-lookup"><span data-stu-id="12842-133">Callouts</span></span>

<span data-ttu-id="12842-134">Un *callout* è un set di funzioni esposte da un driver e utilizzato per il filtraggio specializzato.</span><span class="sxs-lookup"><span data-stu-id="12842-134">A *callout* is a set of functions exposed by a driver and used for specialized filtering.</span></span> <span data-ttu-id="12842-135">Vengono usati per eseguire l'analisi e la manipolazione dei pacchetti, ad esempio l'analisi del virus, l'analisi dei controlli padre per il contenuto non appropriato, l'analisi dei dati di pacchetti per gli strumenti di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="12842-135">They are used to perform analysis and manipulation of the packets, such as virus scan, parental controls scan for inappropriate content, packet data parsing for monitoring tools.</span></span> <span data-ttu-id="12842-136">Alcuni callout, ad esempio il driver NAT (Network Address Translation), sono incorporati nel sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="12842-136">Some callouts, such as the Network Address Translation (NAT) driver, are built into the operating system.</span></span> <span data-ttu-id="12842-137">Altri, ad esempio un callout HTTP Parental Control o il callout IDS (Intrusion Detection System), possono essere forniti da fornitori di software indipendenti (ISV).</span><span class="sxs-lookup"><span data-stu-id="12842-137">Others, such as an HTTP Parental Control callout or the Intrusion Detection System (IDS) callout, can be provided by independent software vendors (ISVs).</span></span> <span data-ttu-id="12842-138">Le funzioni di callout vengono richiamate dal motore di filtro quando un filtro di callout corrispondente viene associato a un livello specificato.</span><span class="sxs-lookup"><span data-stu-id="12842-138">The callout functions are invoked by the filter engine when a corresponding callout filter is matched at a given layer.</span></span>

<span data-ttu-id="12842-139">I callout possono essere registrati in qualsiasi livello WFP in modalità kernel.</span><span class="sxs-lookup"><span data-stu-id="12842-139">Callouts can be registered at any of the kernel-mode WFP layers.</span></span> <span data-ttu-id="12842-140">I callout possono restituire un'azione ("Block", "Consenti" e, quando eseguono l'ispezione del flusso, "rinviare", "necessitano di più dati", "Drop Connection") e possono modificare e proteggere il traffico di rete in ingresso e in uscita.</span><span class="sxs-lookup"><span data-stu-id="12842-140">Callouts can return an action ("Block", "Permit", and, when performing stream inspection, "Defer", "Need more data", "Drop connection") and can modify and secure inbound and outbound network traffic.</span></span>

<span data-ttu-id="12842-141">Quando un callout viene registrato con il motore di filtro, può ricevere il traffico di rete per l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="12842-141">Once a callout is registered with the filter engine, it can receive network traffic to process.</span></span> <span data-ttu-id="12842-142">Il traffico può essere costituito da pacchetti, flussi o eventi a seconda del livello.</span><span class="sxs-lookup"><span data-stu-id="12842-142">The traffic may be packets, streams, or events depending on the layer.</span></span> <span data-ttu-id="12842-143">Un'applicazione o un agente del firewall fa sì che il traffico venga passato a un callout aggiungendo un filtro la cui azione è "callout" e il cui ID di callout è l'identificatore del callout.</span><span class="sxs-lookup"><span data-stu-id="12842-143">An application or firewall agent causes traffic to be passed to a callout by adding a filter whose action is "Callout" and whose callout ID is that callout's identifier.</span></span> <span data-ttu-id="12842-144">I callout possono indicare al motore di filtro di restituire "Block" o "Consenti" allo shim.</span><span class="sxs-lookup"><span data-stu-id="12842-144">Callouts can instruct the filter engine to return "Block" or "Permit" to the shim.</span></span> <span data-ttu-id="12842-145">I callout possono anche restituire "continue" per consentire ad altri filtri di elaborare il pacchetto.</span><span class="sxs-lookup"><span data-stu-id="12842-145">Callouts can also return "Continue" to allow other filters to process the packet.</span></span>

<span data-ttu-id="12842-146">Più callout possono essere esposti da un solo driver di callout.</span><span class="sxs-lookup"><span data-stu-id="12842-146">Multiple callouts may be exposed by one callout driver.</span></span>

<span data-ttu-id="12842-147">Prima di poter usare un callout, è necessario aggiungerlo (con [**FwpmCalloutAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmcalloutadd0)) e registrarlo (con [FwpsCalloutRegister](/windows-hardware/drivers/ddi/_netvista/)).</span><span class="sxs-lookup"><span data-stu-id="12842-147">A callout needs to be added (with [**FwpmCalloutAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmcalloutadd0)) and registered (with [FwpsCalloutRegister](/windows-hardware/drivers/ddi/_netvista/)) before it can be used.</span></span> <span data-ttu-id="12842-148">Prima della creazione di filtri che fanno riferimento al callout, è necessaria una chiamata a **FwpmCalloutAdd0** .</span><span class="sxs-lookup"><span data-stu-id="12842-148">A call to **FwpmCalloutAdd0** is required before the creation of filters that reference the callout.</span></span> <span data-ttu-id="12842-149">Una chiamata a FwpsCalloutRegister è obbligatoria prima che PAM possa richiamare il callout quando vengono corrispondenti i filtri di callout.</span><span class="sxs-lookup"><span data-stu-id="12842-149">A call to FwpsCalloutRegister is required before WFP can invoke the callout when the callout filters are matched.</span></span> <span data-ttu-id="12842-150">Per impostazione predefinita, i filtri che fanno riferimento a callout che sono stati aggiunti ma che non sono ancora stati registrati con il motore di filtro vengono considerati filtri "Block".</span><span class="sxs-lookup"><span data-stu-id="12842-150">By default filters that reference callouts that have been added but have not yet registered with the filter engine are treated as "Block" filters.</span></span> <span data-ttu-id="12842-151">L'ordine di chiamata di **FwpmCalloutAdd0** e FwpsCalloutRegister non è rilevante.</span><span class="sxs-lookup"><span data-stu-id="12842-151">The order of calling **FwpmCalloutAdd0** and FwpsCalloutRegister does not matter.</span></span> <span data-ttu-id="12842-152">Un callout persistente deve essere aggiunto una sola volta e deve essere registrato ogni volta che viene avviato il driver che implementa il callout, ad esempio dopo un riavvio.</span><span class="sxs-lookup"><span data-stu-id="12842-152">A persistent callout needs to be added just once and needs to be registered every time the driver that implements the callout starts (for example, after a reboot).</span></span>

## <a name="classification"></a><span data-ttu-id="12842-153">Classificazione</span><span class="sxs-lookup"><span data-stu-id="12842-153">Classification</span></span>

<span data-ttu-id="12842-154">La classificazione è il processo di applicazione dei filtri al traffico di rete (pacchetto, flusso o evento) per determinare il risultato di "Consenti" o "blocca" per quel traffico.</span><span class="sxs-lookup"><span data-stu-id="12842-154">Classification is the process of applying filters to network traffic (packet, stream, or event) in order to determine a result of "Permit" or "Block" for that traffic.</span></span> <span data-ttu-id="12842-155">Per un pacchetto, un flusso o un evento è presente una chiamata di classificazione per livello.</span><span class="sxs-lookup"><span data-stu-id="12842-155">For one packet, stream, or event there is one classification call per layer.</span></span>

<span data-ttu-id="12842-156">Durante la classificazione, le proprietà (ad esempio, l'indirizzo di origine) del pacchetto, del flusso o dell'evento vengono confrontate con le condizioni di filtro impostate sui filtri in corrispondenza del livello in cui viene richiamata la classificazione.</span><span class="sxs-lookup"><span data-stu-id="12842-156">During classification, the properties (for example, source address) of the packet, stream, or event are compared with filter conditions set on filters at the layer where the classification is invoked.</span></span> <span data-ttu-id="12842-157">Quando vengono rilevate corrispondenze, viene utilizzato l'algoritmo di [arbitraggio del filtro](filter-arbitration.md) per determinare il risultato del processo di classificazione.</span><span class="sxs-lookup"><span data-stu-id="12842-157">When matches are found, the [Filter Arbitration](filter-arbitration.md) algorithm is used to determines the result of the classification process.</span></span>

<span data-ttu-id="12842-158">Una richiesta di classificazione viene attivata da uno shim.</span><span class="sxs-lookup"><span data-stu-id="12842-158">A classification request is triggered by a shim.</span></span>

<span data-ttu-id="12842-159">Le azioni di classificazione potrebbero essere:</span><span class="sxs-lookup"><span data-stu-id="12842-159">Classification actions could be either:</span></span>

-   <span data-ttu-id="12842-160">Consenti</span><span class="sxs-lookup"><span data-stu-id="12842-160">Permit</span></span>
-   <span data-ttu-id="12842-161">Blocca</span><span class="sxs-lookup"><span data-stu-id="12842-161">Block</span></span>
-   <span data-ttu-id="12842-162">Callout</span><span class="sxs-lookup"><span data-stu-id="12842-162">Callout</span></span>
    -   <span data-ttu-id="12842-163">Consenti</span><span class="sxs-lookup"><span data-stu-id="12842-163">Permit</span></span>
    -   <span data-ttu-id="12842-164">Blocca</span><span class="sxs-lookup"><span data-stu-id="12842-164">Block</span></span>
    -   <span data-ttu-id="12842-165">Continua</span><span class="sxs-lookup"><span data-stu-id="12842-165">Continue</span></span>
    -   <span data-ttu-id="12842-166">Rinviare</span><span class="sxs-lookup"><span data-stu-id="12842-166">Defer</span></span>
    -   <span data-ttu-id="12842-167">Sono necessari altri dati</span><span class="sxs-lookup"><span data-stu-id="12842-167">Need more data</span></span>
    -   <span data-ttu-id="12842-168">Elimina connessione</span><span class="sxs-lookup"><span data-stu-id="12842-168">Drop connection</span></span>

## <a name="wfp-operation"></a><span data-ttu-id="12842-169">Operazione PAM</span><span class="sxs-lookup"><span data-stu-id="12842-169">WFP Operation</span></span>

<span data-ttu-id="12842-170">Al momento dell'avvio, non appena viene avviato il driver dello stack TCP/IP (tcpip.sys), il motore di filtro in modalità kernel impone i criteri di sicurezza del sistema tramite filtri in fase di avvio.</span><span class="sxs-lookup"><span data-stu-id="12842-170">At boot-time, as soon as the TCP/IP stack driver (tcpip.sys) starts, the kernel-mode filter engine enforces the security policy of the system through boot-time filters.</span></span>

<span data-ttu-id="12842-171">Quando il motore di filtro di base (BFE) viene avviato in modalità utente, i filtri permanenti vengono aggiunti alla piattaforma, i filtri della fase di avvio sono disabilitati e le notifiche vengono inviate ai driver di callout sottoscritti mediante [FwpmBfeStateSubscribeChanges0](/windows-hardware/drivers/ddi/fwpmk/nf-fwpmk-fwpmbfestatesubscribechanges0).</span><span class="sxs-lookup"><span data-stu-id="12842-171">Once the Base Filtering Engine (BFE) starts in user mode, persistent filters are added to the platform, boot-time filters are disabled, and notifications are sent to those callout drivers that subscribed using [FwpmBfeStateSubscribeChanges0](/windows-hardware/drivers/ddi/fwpmk/nf-fwpmk-fwpmbfestatesubscribechanges0).</span></span> <span data-ttu-id="12842-172">Le notifiche vengono inviate immediatamente dopo il completamento dell'inizializzazione di BFE.</span><span class="sxs-lookup"><span data-stu-id="12842-172">The notifications are dispatched immediately after the BFE initialization is completed.</span></span> <span data-ttu-id="12842-173">La piattaforma è ora pronta per la registrazione dei callout e per gli oggetti di runtime da aggiungere.</span><span class="sxs-lookup"><span data-stu-id="12842-173">The platform is now ready for callouts to be registered and for run-time objects to be added.</span></span>

<span data-ttu-id="12842-174">La transizione dal tempo di avvio ai filtri permanenti può essere di alcuni secondi o anche più a lungo in un computer lento.</span><span class="sxs-lookup"><span data-stu-id="12842-174">The transition from boot-time to persistent filters could be several seconds, or even longer on a slow machine.</span></span> <span data-ttu-id="12842-175">Si tratta di un valore atomico, pertanto se un provider dispone sia di un filtro di avvio che di un filtro persistente, non sarà mai presente alcuna finestra quando nessuna delle due è attiva.</span><span class="sxs-lookup"><span data-stu-id="12842-175">It is atomic, so if a provider has both a boot-time and a persistent filter, there will never be a window when neither is in effect.</span></span>

<span data-ttu-id="12842-176">Dopo l'avvio di BFE, i filtri di run-time possono essere aggiunti dagli agenti firewall o dalle soluzioni firewall personalizzate.</span><span class="sxs-lookup"><span data-stu-id="12842-176">After BFE starts, run-time filters can be added by firewall agents, or by custom firewall solutions.</span></span> <span data-ttu-id="12842-177">BFE elabora questi filtri e li invia al livello del motore di filtro appropriato per l'imposizione.</span><span class="sxs-lookup"><span data-stu-id="12842-177">BFE processes these filters and sends them to the appropriate filter engine layer for enforcement.</span></span> <span data-ttu-id="12842-178">BFE accetta anche le impostazioni di autenticazione e invia queste impostazioni ai moduli di chiavi IPsec (IKE/AuthIP).</span><span class="sxs-lookup"><span data-stu-id="12842-178">BFE also accepts authentication settings and sends these settings to the IPsec keying modules (IKE/AuthIP).</span></span> <span data-ttu-id="12842-179">Per ulteriori informazioni, vedere [configurazione IPSec](ipsec-configuration.md) .</span><span class="sxs-lookup"><span data-stu-id="12842-179">See [IPsec Configuration](ipsec-configuration.md) for more information.</span></span>

<span data-ttu-id="12842-180">In qualsiasi momento, è possibile aggiungere, rimuovere o modificare i filtri e le impostazioni di autenticazione nel sistema tramite l'interfaccia RPC esposta dal BFE.</span><span class="sxs-lookup"><span data-stu-id="12842-180">At any time, filters and authentication settings can be added, removed or changed in the system through the RPC interface exposed by the BFE.</span></span> <span data-ttu-id="12842-181">È possibile aggiungere o rimuovere in modo analogo i moduli secondari e i moduli di callout.</span><span class="sxs-lookup"><span data-stu-id="12842-181">Sub-layers and callout modules can likewise be added or removed.</span></span>

<span data-ttu-id="12842-182">Flusso di dati:</span><span class="sxs-lookup"><span data-stu-id="12842-182">Data flow:</span></span>

1.  <span data-ttu-id="12842-183">Un pacchetto entra nello stack di rete.</span><span class="sxs-lookup"><span data-stu-id="12842-183">A packet comes into the network stack.</span></span>
2.  <span data-ttu-id="12842-184">Lo stack di rete trova e chiama uno shim.</span><span class="sxs-lookup"><span data-stu-id="12842-184">The network stack finds and calls a shim.</span></span>
3.  <span data-ttu-id="12842-185">Lo shim richiama il processo di classificazione a un livello particolare.</span><span class="sxs-lookup"><span data-stu-id="12842-185">The shim invokes the classification process at a particular layer.</span></span>
4.  <span data-ttu-id="12842-186">Durante la classificazione, vengono confrontati i filtri e viene eseguita l'azione risultante.</span><span class="sxs-lookup"><span data-stu-id="12842-186">During classification, filters are matched and the resultant action is taken.</span></span> <span data-ttu-id="12842-187">(Vedere [arbitraggio di filtro](filter-arbitration.md)).</span><span class="sxs-lookup"><span data-stu-id="12842-187">(See [Filter Arbitration](filter-arbitration.md).)</span></span>
5.  <span data-ttu-id="12842-188">Se durante il processo di classificazione vengono richiamati i filtri di callout, verranno richiamati i callout corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="12842-188">If any callout filters are matched during the classification process, the corresponding callouts are invoked.</span></span>
6.  <span data-ttu-id="12842-189">Lo shim agisce sulla decisione di filtro finale, ad esempio eliminando il pacchetto.</span><span class="sxs-lookup"><span data-stu-id="12842-189">The shim acts on the final filtering decision (for example, drop the packet).</span></span>

<span data-ttu-id="12842-190">Il flusso di dati in uscita segue un modello simile.</span><span class="sxs-lookup"><span data-stu-id="12842-190">Outbound data flow follows a similar pattern.</span></span>

<span data-ttu-id="12842-191">Gli argomenti seguenti descrivono ulteriormente il funzionamento del PAM.</span><span class="sxs-lookup"><span data-stu-id="12842-191">The following topics further describe the operation of the WFP.</span></span>

-   [<span data-ttu-id="12842-192">Flussi di pacchetti TCP</span><span class="sxs-lookup"><span data-stu-id="12842-192">TCP Packet Flows</span></span>](tcp-packet-flows.md)
-   [<span data-ttu-id="12842-193">Flussi di pacchetti UDP</span><span class="sxs-lookup"><span data-stu-id="12842-193">UDP Packet Flows</span></span>](udp-packet-flows.md)
-   [<span data-ttu-id="12842-194">Arbitraggio di filtro</span><span class="sxs-lookup"><span data-stu-id="12842-194">Filter Arbitration</span></span>](filter-arbitration.md)

## <a name="related-topics"></a><span data-ttu-id="12842-195">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="12842-195">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="12842-196">Modello a oggetti</span><span class="sxs-lookup"><span data-stu-id="12842-196">Object Model</span></span>](object-model.md)
</dt> <dt>

[<span data-ttu-id="12842-197">Gestione degli oggetti</span><span class="sxs-lookup"><span data-stu-id="12842-197">Object Management</span></span>](object-management.md)
</dt> </dl>

 

 