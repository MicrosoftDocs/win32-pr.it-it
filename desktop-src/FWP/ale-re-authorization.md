---
title: Riautorizzazione ALE
description: Il traffico di rete a livello di imposizione dell'applicazione (ALE) di Windows Filtering Platform (PAM) viene filtrato in base ai flussi ALE.
ms.assetid: 3cc7f78e-3f9d-4a91-8ea0-9b64c299068a
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ed05c4c0767d449ec128250f852c365455bd0dc7
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/19/2020
ms.locfileid: "103727010"
---
# <a name="ale-reauthorization"></a><span data-ttu-id="b13c0-103">Riautorizzazione ALE</span><span class="sxs-lookup"><span data-stu-id="b13c0-103">ALE Reauthorization</span></span>

<span data-ttu-id="b13c0-104">Il traffico di rete a livello di imposizione dell'applicazione (ALE) di Windows Filtering Platform (PAM) viene filtrato in base ai [flussi ale](ale-stateful-filtering.md).</span><span class="sxs-lookup"><span data-stu-id="b13c0-104">Network traffic at the Application Layer Enforcement (ALE) layers of the Windows Filtering Platform (WFP) is filtered by [ALE flows](ale-stateful-filtering.md).</span></span> <span data-ttu-id="b13c0-105">Una volta che è stato consentito un flusso di ALE, tutto il traffico che fa parte del flusso ALE è consentito.</span><span class="sxs-lookup"><span data-stu-id="b13c0-105">Once an ALE flow has been permitted, all traffic that is part of the ALE flow is permitted.</span></span> <span data-ttu-id="b13c0-106">La riautorizzazione è una richiesta di convalida delle autorizzazioni del flusso di ALE, in genere a causa di una modifica dei criteri di rete.</span><span class="sxs-lookup"><span data-stu-id="b13c0-106">Reauthorization is a request to validate the permissions of the ALE flow, typically due to a change in network policy.</span></span>

<span data-ttu-id="b13c0-107">Ai flussi ALE viene assegnata una direzione, in ingresso o in uscita, in base alla direzione del primo pacchetto che ha attivato la creazione e l'autorizzazione del flusso.</span><span class="sxs-lookup"><span data-stu-id="b13c0-107">ALE flows are assigned a direction, inbound or outbound, based on the direction of the first packet that triggered the creation and authorization of the flow.</span></span> <span data-ttu-id="b13c0-108">I flussi ALE in ingresso vengono creati e autorizzati al livello [**FWPM \_ Layer \_ ale \_ auth \_ ricezione \_ Accept \_ V {4 \| 6}**](management-filtering-layer-identifiers-.md) .</span><span class="sxs-lookup"><span data-stu-id="b13c0-108">Inbound ALE flows are created and authorized at the [**FWPM\_LAYER\_ALE\_AUTH\_RECV\_ACCEPT\_V{4\|6}**](management-filtering-layer-identifiers-.md) layer.</span></span> <span data-ttu-id="b13c0-109">I flussi ALE in uscita vengono creati e autorizzati a livello di **FWPM \_ Layer \_ ale \_ auth \_ Connect \_ V {4 \| 6}** .</span><span class="sxs-lookup"><span data-stu-id="b13c0-109">Outbound ALE flows are created and authorized at the **FWPM\_LAYER\_ALE\_AUTH\_CONNECT\_V{4\|6}** layer.</span></span> <span data-ttu-id="b13c0-110">La direzione del flusso ALE non limita la direzione dei pacchetti che appartengono al flusso.</span><span class="sxs-lookup"><span data-stu-id="b13c0-110">The direction of the ALE flow does not limit the direction of packets that belong to the flow.</span></span> <span data-ttu-id="b13c0-111">I flussi ALE contengono sia i pacchetti in ingresso che quelli in uscita, indipendentemente dalla direzione del flusso ALE.</span><span class="sxs-lookup"><span data-stu-id="b13c0-111">ALE flows contain both inbound and outbound packets regardless of the direction of the ALE flow itself.</span></span>

<span data-ttu-id="b13c0-112">La riautorizzazione di un flusso di ALE viene attivata da:</span><span class="sxs-lookup"><span data-stu-id="b13c0-112">Reauthorization of an ALE flow is triggered by:</span></span>

-   <span data-ttu-id="b13c0-113">Una modifica ai criteri nel livello in cui il flusso ALE è stato originariamente autorizzato o creato.</span><span class="sxs-lookup"><span data-stu-id="b13c0-113">A policy change at the layer where the ALE flow was originally authorized or created.</span></span>
-   <span data-ttu-id="b13c0-114">Interfaccia di arrivo diversa dall'interfaccia in cui il flusso ALE è stato originariamente autorizzato o creato.</span><span class="sxs-lookup"><span data-stu-id="b13c0-114">An arrival interface different from the interface where the ALE flow was originally authorized or created.</span></span>
-   <span data-ttu-id="b13c0-115">Una connessione in sospeso.</span><span class="sxs-lookup"><span data-stu-id="b13c0-115">A pending connection.</span></span>

<span data-ttu-id="b13c0-116">La riautorizzazione si distingue dall'autorizzazione iniziale perché la presenza del flag di [**\_ condizione FWP \_ è \_ la \_ Riautorizzazione**](filtering-condition-flags-.md) del flag.</span><span class="sxs-lookup"><span data-stu-id="b13c0-116">Reauthorization is distinguished from the initial authorization by the presence of the [**FWP\_CONDITION\_FLAG\_IS\_REAUTHORIZE**](filtering-condition-flags-.md) flag.</span></span>

<span data-ttu-id="b13c0-117">La riautorizzazione può essere eseguita solo a [**FWPM \_ Layer \_ ale \_ auth \_ ricezione \_ Accept \_ v {4 \| 6}**](management-filtering-layer-identifiers-.md) e **FWPM \_ Layer \_ ale \_ auth \_ Connect \_ v {4 \| 6}** livelli.</span><span class="sxs-lookup"><span data-stu-id="b13c0-117">Reauthorization can take place only at the [**FWPM\_LAYER\_ALE\_AUTH\_RECV\_ACCEPT\_V{4\|6}**](management-filtering-layer-identifiers-.md) and **FWPM\_LAYER\_ALE\_AUTH\_CONNECT\_V{4\|6}** layers.</span></span>

### <a name="policy-change-reauthorization"></a><span data-ttu-id="b13c0-118">Criteri-modifica Riautorizzazione</span><span class="sxs-lookup"><span data-stu-id="b13c0-118">Policy-Change Reauthorization</span></span>

<span data-ttu-id="b13c0-119">Una modifica del criterio viene implementata come aggiunta o rimozione di un filtro a livello di ALE.</span><span class="sxs-lookup"><span data-stu-id="b13c0-119">A policy change is implemented as a filter addition or removal at an ALE layer.</span></span> <span data-ttu-id="b13c0-120">Una volta rilevata una modifica ai criteri, il primo pacchetto che attraversa un flusso di ALE creato al livello interessato verrà specificato per la riautorizzazione al livello.</span><span class="sxs-lookup"><span data-stu-id="b13c0-120">Once a policy change is detected, the first packet that traverses an ALE flow created at the affected layer will be specified for reauthorization to the layer.</span></span> <span data-ttu-id="b13c0-121">Per la riautorizzazione è pertanto possibile che un pacchetto in uscita sia Classificato al livello [**FWPM \_ Layer \_ ale \_ auth \_ ricezione \_ Accept \_ V {4 \| 6}**](management-filtering-layer-identifiers-.md) e che un pacchetto in ingresso sia Classificato al livello **FWPM \_ Layer \_ ale \_ auth \_ Connect \_ V {4 \| 6}** .</span><span class="sxs-lookup"><span data-stu-id="b13c0-121">Therefore, for reauthorization it is entirely possible that an outbound packet is classified at the [**FWPM\_LAYER\_ALE\_AUTH\_RECV\_ACCEPT\_V{4\|6}**](management-filtering-layer-identifiers-.md) layer and that an inbound packet is classified at the **FWPM\_LAYER\_ALE\_AUTH\_CONNECT\_V{4\|6}** layer.</span></span>

<span data-ttu-id="b13c0-122">Un motivo per questa classificazione a direzione mista è che potrebbe non essere disponibile un ulteriore traffico di rete dalla direzione originale (ad esempio, il pacchetto in ingresso per il flusso di ALE in ingresso).</span><span class="sxs-lookup"><span data-stu-id="b13c0-122">One reason for this mixed-direction classification is that there might not be further network traffic from the original direction (for example, inbound packet for inbound ALE flow).</span></span> <span data-ttu-id="b13c0-123">Uno di questi esempi è un flusso UDP unidirezionale dopo un handshake bidirezionale iniziale.</span><span class="sxs-lookup"><span data-stu-id="b13c0-123">One such example is one-way UDP streaming after an initial two-way handshake.</span></span> <span data-ttu-id="b13c0-124">In questo caso è preferibile chiudere il flusso il prima possibile.</span><span class="sxs-lookup"><span data-stu-id="b13c0-124">In this case it is more desirable to tear down the streaming as soon as possible.</span></span>

### <a name="arrival-interface-reauthorization"></a><span data-ttu-id="b13c0-125">Riautorizzazione dell'interfaccia di arrivo</span><span class="sxs-lookup"><span data-stu-id="b13c0-125">Arrival Interface Reauthorization</span></span>

<span data-ttu-id="b13c0-126">La riautorizzazione dell'interfaccia di arrivo è disponibile a partire da Windows Server 2008 e Windows Vista con Service Pack 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="b13c0-126">Arrival interface reauthorization is available starting with Windows Server 2008 and Windows Vista with Service Pack 1 (SP1).</span></span>

<span data-ttu-id="b13c0-127">I pacchetti appartenenti allo stesso flusso di ALE possono arrivare da più interfacce.</span><span class="sxs-lookup"><span data-stu-id="b13c0-127">Packets belonging to the same ALE flow can arrive from multiple interfaces.</span></span> <span data-ttu-id="b13c0-128">Il primo pacchetto da passare a un'interfaccia diversa dall'interfaccia originale del flusso di ALE viene riautorizzato.</span><span class="sxs-lookup"><span data-stu-id="b13c0-128">The first packet to come in over an interface different from the original interface of the ALE flow is reauthorized.</span></span>

<span data-ttu-id="b13c0-129">In un modello host sicuro, che è il modello di sicurezza predefinito per lo stack TCP/IP, una connessione su un'interfaccia di rete accetta solo i pacchetti presenti nella stessa interfaccia.</span><span class="sxs-lookup"><span data-stu-id="b13c0-129">In a strong host model, which is the default security model for the TCP/IP stack, a connection on a network interface accepts only packets that come in on the same interface.</span></span> <span data-ttu-id="b13c0-130">Quindi, la riautorizzazione dell'interfaccia di arrivo non viene usata in un computer host sicuro.</span><span class="sxs-lookup"><span data-stu-id="b13c0-130">Therefore, arrival interface reauthorization is not used on a strong host computer.</span></span>

<span data-ttu-id="b13c0-131">In un modello host vulnerabile, una connessione su un'interfaccia di rete consente l'ingresso di pacchetti in qualsiasi altra interfaccia di rete.</span><span class="sxs-lookup"><span data-stu-id="b13c0-131">In a weak host model, a connection on a network interface allows packets coming in on any other network interface.</span></span> <span data-ttu-id="b13c0-132">La riautorizzazione dell'interfaccia di arrivo viene usata in un computer host debole per implementare criteri specifici dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="b13c0-132">Arrival interface reauthorization is used on a weak host computer to implement interface-specific policies.</span></span> <span data-ttu-id="b13c0-133">Per ulteriori informazioni, vedere ["The Cable Guy: Strong and vulnerabili host Models".](/previous-versions/technet-magazine/cc137807(v=msdn.10))</span><span class="sxs-lookup"><span data-stu-id="b13c0-133">For more information, see ["The Cable Guy: Strong and Weak Host Models."](/previous-versions/technet-magazine/cc137807(v=msdn.10))</span></span>

<span data-ttu-id="b13c0-134">Alcuni [campi classificabili](filtering-conditions.md) potrebbero essere sconosciuti durante la riautorizzazione.</span><span class="sxs-lookup"><span data-stu-id="b13c0-134">Some [classifiable fields](filtering-conditions.md) may be unknown during reauthorization.</span></span> <span data-ttu-id="b13c0-135">Se, ad esempio, un pacchetto in uscita viene riautorizzato al livello [**FWPM \_ Layer \_ ale \_ auth \_ ricezione \_ Accept \_ V {4 \| 6}**](management-filtering-layer-identifiers-.md) , tutti i campi relativi all'interfaccia di arrivo sono sconosciuti.</span><span class="sxs-lookup"><span data-stu-id="b13c0-135">For example, if an outbound packet is being reauthorized at the [**FWPM\_LAYER\_ALE\_AUTH\_RECV\_ACCEPT\_V{4\|6}**](management-filtering-layer-identifiers-.md) layer, all the fields pertaining to the arrival interface are unknown.</span></span> <span data-ttu-id="b13c0-136">In tal caso, i valori dei campi sconosciuti vengono indicati come [**FWP \_ vuoti**](/windows/desktop/api/Fwptypes/ne-fwptypes-fwp_data_type).</span><span class="sxs-lookup"><span data-stu-id="b13c0-136">In that case, the values of the unknown fields are indicated as [**FWP\_EMPTY**](/windows/desktop/api/Fwptypes/ne-fwptypes-fwp_data_type).</span></span>

<span data-ttu-id="b13c0-137">È possibile trovare una corrispondenza tra i campi di tipo [**FWP \_ empty**](/windows/desktop/api/Fwptypes/ne-fwptypes-fwp_data_type) e [**FWP \_ \_**](/windows/desktop/api/Fwptypes/ne-fwptypes-fwp_match_type).</span><span class="sxs-lookup"><span data-stu-id="b13c0-137">Fields of type [**FWP\_EMPTY**](/windows/desktop/api/Fwptypes/ne-fwptypes-fwp_data_type) can be matched with [**FWP\_MATCH\_EQUAL**](/windows/desktop/api/Fwptypes/ne-fwptypes-fwp_match_type).</span></span> <span data-ttu-id="b13c0-138">È quindi possibile impostare un criterio in modo da bloccare le riautorizzazioni ed eliminare un flusso ALE al momento dell'arrivo delle richieste di Riautorizzazione per il flusso ALE.</span><span class="sxs-lookup"><span data-stu-id="b13c0-138">Therefore, a policy can be set to block reauthorizations and tear down an ALE flow when reauthorization requests for the ALE flow arrive.</span></span>

## <a name="pending-connection-reauthorization"></a><span data-ttu-id="b13c0-139">Riautorizzazione della connessione in sospeso</span><span class="sxs-lookup"><span data-stu-id="b13c0-139">Pending Connection Reauthorization</span></span>

<span data-ttu-id="b13c0-140">Un driver di callout può posticipare un'operazione di classificazione a livelli ALE e completarla in un secondo momento, quando la decisione di filtro può essere effettuata in modo sicuro.</span><span class="sxs-lookup"><span data-stu-id="b13c0-140">A callout driver may postpone a classify operation at ALE layers and complete it at a later time, when the filtering decision can be safely made.</span></span> <span data-ttu-id="b13c0-141">La funzionalità di rimandare/completare ALE è supportata tramite le funzioni in modalità kernel [FwpsPendOperation0](/windows-hardware/drivers/ddi/fwpsk/nf-fwpsk-fwpspendoperation0) e [FwpsCompleteOperation0](/windows-hardware/drivers/ddi/fwpsk/nf-fwpsk-fwpscompleteoperation0).</span><span class="sxs-lookup"><span data-stu-id="b13c0-141">The ALE postpone/complete functionality is supported via the kernel-mode functions [FwpsPendOperation0](/windows-hardware/drivers/ddi/fwpsk/nf-fwpsk-fwpspendoperation0) and [FwpsCompleteOperation0](/windows-hardware/drivers/ddi/fwpsk/nf-fwpsk-fwpscompleteoperation0).</span></span>

<span data-ttu-id="b13c0-142">La riautorizzazione viene attivata immediatamente dopo la chiamata a FwpsCompleteOperation0 e consente al driver di callout di consentire o bloccare il flusso.</span><span class="sxs-lookup"><span data-stu-id="b13c0-142">The reauthorization is triggered immediately following the FwpsCompleteOperation0 call, and it allows the callout driver to permit or to block the flow.</span></span>

<span data-ttu-id="b13c0-143">Solo un'autorizzazione iniziale può essere posticipata.</span><span class="sxs-lookup"><span data-stu-id="b13c0-143">Only an initial authorization can be postponed.</span></span> <span data-ttu-id="b13c0-144">Una chiamata a FwpsPendOperation0 avrà esito negativo se il [**\_ flag di condizione FWP \_ \_ è \_ reautorizzazione**](filtering-condition-flags-.md) flag è impostato.</span><span class="sxs-lookup"><span data-stu-id="b13c0-144">A call to FwpsPendOperation0 will fail if [**FWP\_CONDITION\_FLAG\_IS\_REAUTHORIZE**](filtering-condition-flags-.md) flag is set.</span></span>

<span data-ttu-id="b13c0-145">Per ulteriori informazioni, vedere la documentazione di [Windows Driver Kit](/windows-hardware/drivers/ddi/_netvista/) .</span><span class="sxs-lookup"><span data-stu-id="b13c0-145">For more information, see the [Windows Driver Kit](/windows-hardware/drivers/ddi/_netvista/) documentation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b13c0-146">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="b13c0-146">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b13c0-147">Application Layer Enforcement (ALE)</span><span class="sxs-lookup"><span data-stu-id="b13c0-147">Application Layer Enforcement (ALE)</span></span>](application-layer-enforcement--ale-.md)
</dt> <dt>

[<span data-ttu-id="b13c0-148">Livelli ALE</span><span class="sxs-lookup"><span data-stu-id="b13c0-148">ALE Layers</span></span>](ale-layers.md)
</dt> <dt>

[<span data-ttu-id="b13c0-149">Filtro con stato ALE</span><span class="sxs-lookup"><span data-stu-id="b13c0-149">ALE Stateful Filtering</span></span>](ale-stateful-filtering.md)
</dt> <dt>

[<span data-ttu-id="b13c0-150">Traffico di broadcast/multicast ALE</span><span class="sxs-lookup"><span data-stu-id="b13c0-150">ALE Multicast/Broadcast Traffic</span></span>](ale-multicast-broadcast-traffic.md)
</dt> <dt>

[<span data-ttu-id="b13c0-151">Personalizzazione del flusso di ALE</span><span class="sxs-lookup"><span data-stu-id="b13c0-151">ALE Flow Customization</span></span>](ale-flow-customization.md)
</dt> </dl>

 

 