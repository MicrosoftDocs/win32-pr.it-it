---
title: Arbitraggio di filtro
description: L'arbitraggio di filtro è la logica incorporata in Windows Filtering Platform (WFP) che viene usata per determinare il modo in cui i filtri interagiscono tra loro durante le decisioni di filtro del traffico di rete.
ms.assetid: d097f307-113e-4dc3-ad59-ddfb85061583
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9fd7df778d1c24b7480de3321e7a1ec126d8e642
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/19/2020
ms.locfileid: "103727007"
---
# <a name="filter-arbitration"></a><span data-ttu-id="00051-103">Arbitraggio di filtro</span><span class="sxs-lookup"><span data-stu-id="00051-103">Filter Arbitration</span></span>

<span data-ttu-id="00051-104">L'arbitraggio di filtro è la logica incorporata in Windows Filtering Platform (WFP) che viene usata per determinare il modo in cui i filtri interagiscono tra loro durante le decisioni di filtro del traffico di rete.</span><span class="sxs-lookup"><span data-stu-id="00051-104">Filter arbitration is the logic built into the Windows Filtering Platform (WFP) that is used to determine how filters interact with each other when making network traffic filtering decisions.</span></span>

## <a name="filter-arbitration-behaviors"></a><span data-ttu-id="00051-105">Filtrare i comportamenti degli arbitri</span><span class="sxs-lookup"><span data-stu-id="00051-105">Filter Arbitration Behaviors</span></span>

<span data-ttu-id="00051-106">I comportamenti seguenti caratterizzano il sistema di arbitraggio del filtro:</span><span class="sxs-lookup"><span data-stu-id="00051-106">The following behaviors characterize the filter arbitration system:</span></span>

-   <span data-ttu-id="00051-107">Tutto il traffico può essere controllato.</span><span class="sxs-lookup"><span data-stu-id="00051-107">All traffic can be inspected.</span></span> <span data-ttu-id="00051-108">Nessun traffico può ignorare i filtri a un livello specificato.</span><span class="sxs-lookup"><span data-stu-id="00051-108">No traffic can bypass filters at a given layer.</span></span>
-   <span data-ttu-id="00051-109">Il traffico può essere bloccato da un filtro di callout tramite un **veto** anche se è stato consentito da un filtro con priorità superiore.</span><span class="sxs-lookup"><span data-stu-id="00051-109">Traffic can be blocked by a callout filter via a **Veto** even if a higher priority filter has permitted it.</span></span>
-   <span data-ttu-id="00051-110">Più provider possono ispezionare il traffico allo stesso livello.</span><span class="sxs-lookup"><span data-stu-id="00051-110">Multiple providers can inspect traffic at the same layer.</span></span> <span data-ttu-id="00051-111">Ad esempio, il firewall seguito da filtri di sistema di rilevamento delle intrusioni (ID) o IPsec seguito da filtri di qualità del servizio (QoS) può esaminare il traffico sullo stesso livello.</span><span class="sxs-lookup"><span data-stu-id="00051-111">For example, firewall followed by intrusion-detection system (IDS) filters, or IPsec followed by Quality of Service (QoS) filters may all examine the traffic at the same layer.</span></span>

## <a name="filtering-model"></a><span data-ttu-id="00051-112">Modello di filtro</span><span class="sxs-lookup"><span data-stu-id="00051-112">Filtering Model</span></span>

<span data-ttu-id="00051-113">Ogni livello di filtro è diviso in sottolivelli ordinati per priorità (detto anche peso).</span><span class="sxs-lookup"><span data-stu-id="00051-113">Each filter layer is divided into sub-layers ordered by priority (also called weight).</span></span> <span data-ttu-id="00051-114">Il traffico di rete attraversa i livelli secondari dalla priorità più alta alla priorità più bassa.</span><span class="sxs-lookup"><span data-stu-id="00051-114">Network traffic traverses sub-layers from the highest priority to the lowest priority.</span></span> <span data-ttu-id="00051-115">I sottolivelli vengono creati e gestiti dagli sviluppatori che usano l'API Pam.</span><span class="sxs-lookup"><span data-stu-id="00051-115">Sub-layers are created and managed by the developers using the WFP API.</span></span>

<span data-ttu-id="00051-116">All'interno di ogni sottolivello, i filtri vengono ordinati in base al peso.</span><span class="sxs-lookup"><span data-stu-id="00051-116">Within each sub-layer, filters are ordered by weight.</span></span> <span data-ttu-id="00051-117">Il traffico di rete è indicato per i filtri corrispondenti dal peso più alto a quello più basso.</span><span class="sxs-lookup"><span data-stu-id="00051-117">Network traffic is indicated to matching filters from highest weight to lowest weight.</span></span>

<span data-ttu-id="00051-118">L'algoritmo di arbitraggio del filtro viene applicato a tutti i livelli secondari all'interno di un livello e la decisione di filtro finale viene eseguita dopo la valutazione di tutti i sottolivelli.</span><span class="sxs-lookup"><span data-stu-id="00051-118">The filter arbitration algorithm is applied to all sub-layers within a layer and the final filtering decision is made after all sub-layers have been evaluated.</span></span> <span data-ttu-id="00051-119">Questo consente di individuare più funzionalità di corrispondenza.</span><span class="sxs-lookup"><span data-stu-id="00051-119">This provides for multiple matching capability.</span></span>

<span data-ttu-id="00051-120">All'interno di un sottolivello, l'arbitraggio di filtro viene eseguito come segue:</span><span class="sxs-lookup"><span data-stu-id="00051-120">Within a sub-layer, filter arbitration is performed as follows:</span></span>

-   <span data-ttu-id="00051-121">Consente di calcolare l'elenco dei filtri corrispondenti ordinati in base al peso, dal più alto al più basso.</span><span class="sxs-lookup"><span data-stu-id="00051-121">Compute the list of matching filters ordered by weight from highest to lowest.</span></span>
-   <span data-ttu-id="00051-122">Valutare i filtri corrispondenti in ordine fino a quando non viene restituito un "permesso" o un "blocco" (i filtri possono anche restituire "continua") o fino a quando l'elenco non è esaurito.</span><span class="sxs-lookup"><span data-stu-id="00051-122">Evaluate matching filters in order until a "Permit" or a "Block" is returned (filters can also return "Continue") or until the list is exhausted.</span></span>
-   <span data-ttu-id="00051-123">Ignorare i filtri rimanenti e restituire l'azione dall'ultimo filtro valutato.</span><span class="sxs-lookup"><span data-stu-id="00051-123">Skip the remaining filters and return the action from the last evaluated filter.</span></span>

<span data-ttu-id="00051-124">All'interno di un livello, l'arbitraggio di filtro viene eseguito come segue:</span><span class="sxs-lookup"><span data-stu-id="00051-124">Within a layer, filter arbitration is performed as follows:</span></span>

-   <span data-ttu-id="00051-125">Eseguire l'arbitraggio di filtro a ogni sottolivello in ordine dalla priorità più alta alla priorità più bassa.</span><span class="sxs-lookup"><span data-stu-id="00051-125">Perform filter arbitration at every sub-layer in order from highest priority to lowest priority.</span></span>
-   <span data-ttu-id="00051-126">Valutare tutti i sottolivelli anche se un sottolivello con priorità più alta ha deciso di bloccare il traffico.</span><span class="sxs-lookup"><span data-stu-id="00051-126">Evaluate all sub-layers even if a higher priority sub-layer has decided to block the traffic.</span></span>
-   <span data-ttu-id="00051-127">Restituisce l'azione risultante in base alle regole dei criteri descritte nella sezione seguente.</span><span class="sxs-lookup"><span data-stu-id="00051-127">Return the resulting action based on the policy rules described in the following section.</span></span>

<span data-ttu-id="00051-128">Il diagramma seguente illustra una configurazione di livello secondario di esempio.</span><span class="sxs-lookup"><span data-stu-id="00051-128">The diagram below illustrates a sample sub-layer configuration.</span></span> <span data-ttu-id="00051-129">Le caselle esterne rappresentano i livelli.</span><span class="sxs-lookup"><span data-stu-id="00051-129">The outer boxes represent layers.</span></span> <span data-ttu-id="00051-130">Le caselle interne rappresentano i sottolivelli che contengono filtri.</span><span class="sxs-lookup"><span data-stu-id="00051-130">The inner boxes represent sub-layers that contain filters.</span></span> <span data-ttu-id="00051-131">Il carattere jolly ( \* ) in un filtro indica che tutto il traffico corrisponde al filtro.</span><span class="sxs-lookup"><span data-stu-id="00051-131">The wildcard (\*) in a filter means all traffic matches the filter.</span></span>

![configurazione del sottolivello di esempio](images/fwp-sub-config2.png)

<span data-ttu-id="00051-133">L'unico modo per ignorare un filtro è se un filtro di peso superiore ha consentito o bloccato il traffico all'interno dello stesso sottolivello.</span><span class="sxs-lookup"><span data-stu-id="00051-133">The only way for a filter to be bypassed is if a higher weight filter has permitted or blocked the traffic within the same sub-layer.</span></span> <span data-ttu-id="00051-134">Viceversa, un modo per garantire che un filtro veda sempre tutto il traffico all'interno di un livello consiste nell'aggiungere un sottolivello che contiene un singolo filtro che corrisponde a tutto il traffico.</span><span class="sxs-lookup"><span data-stu-id="00051-134">Conversely, one way of ensuring that a filter always sees all traffic within a layer is to add a sub-layer that contains a single filter that matches all traffic.</span></span>

## <a name="configurable-override-policy"></a><span data-ttu-id="00051-135">Criteri di sostituzione configurabili</span><span class="sxs-lookup"><span data-stu-id="00051-135">Configurable Override Policy</span></span>

<span data-ttu-id="00051-136">Le regole descritte di seguito regolano le decisioni di arbitraggio all'interno di un livello.</span><span class="sxs-lookup"><span data-stu-id="00051-136">The rules described below govern the arbitration decisions within a layer.</span></span> <span data-ttu-id="00051-137">Queste regole vengono usate dal motore di filtro per decidere quale una delle azioni del sottolivello viene applicata al traffico di rete.</span><span class="sxs-lookup"><span data-stu-id="00051-137">These rules are used by the filter engine to decide which one of the sub-layer actions is applied to the network traffic.</span></span>

<span data-ttu-id="00051-138">Il criterio di base è il seguente.</span><span class="sxs-lookup"><span data-stu-id="00051-138">The basic policy is as follows.</span></span>

-   <span data-ttu-id="00051-139">Le azioni vengono valutate in ordine di priorità dei sottolivelli dalla priorità più alta alla priorità più bassa.</span><span class="sxs-lookup"><span data-stu-id="00051-139">Actions are evaluated in priority order of sub-layers from highest priority to lowest priority.</span></span>
-   <span data-ttu-id="00051-140">"Blocco" esegue l'override di "Consenti".</span><span class="sxs-lookup"><span data-stu-id="00051-140">"Block" overrides "Permit".</span></span>
-   <span data-ttu-id="00051-141">"Blocco" è finale (non può essere sottoposto a override) e arresta la valutazione.</span><span class="sxs-lookup"><span data-stu-id="00051-141">"Block" is final (cannot be overridden) and stops the evaluation.</span></span> <span data-ttu-id="00051-142">Il pacchetto viene eliminato.</span><span class="sxs-lookup"><span data-stu-id="00051-142">The packet is discarded.</span></span>

<span data-ttu-id="00051-143">Il criterio di base non supporta lo scenario di un'eccezione non sottoposta a override da un firewall.</span><span class="sxs-lookup"><span data-stu-id="00051-143">The basic policy does not support the scenario of an exception not overridden by a firewall.</span></span> <span data-ttu-id="00051-144">Esempi tipici di questo tipo di scenario sono:</span><span class="sxs-lookup"><span data-stu-id="00051-144">Typical examples of this type of scenario are:</span></span>

-   <span data-ttu-id="00051-145">Porta di amministrazione remota necessaria per l'apertura anche in presenza di un firewall di terze parti.</span><span class="sxs-lookup"><span data-stu-id="00051-145">Remote administration port required to be opened even in the presence of a third-party firewall.</span></span>
-   <span data-ttu-id="00051-146">Componenti che richiedono l'apertura di porte per funzionare, ad esempio Universal Plug and Play UPnP).</span><span class="sxs-lookup"><span data-stu-id="00051-146">Components that require ports to be opened in order to function (for example, Universal Plug and Play UPnP).</span></span> <span data-ttu-id="00051-147">Se l'amministratore ha abilitato in modo esplicito il componente, il firewall non deve bloccare automaticamente il traffico.</span><span class="sxs-lookup"><span data-stu-id="00051-147">If the administrator has explicitly enabled the component, the firewall should not silently block the traffic.</span></span>

<span data-ttu-id="00051-148">Per supportare gli scenari precedenti, una decisione di filtro deve essere resa più difficile da ignorare rispetto a un'altra decisione di filtro gestendo l'autorizzazione per l'override dell'azione.</span><span class="sxs-lookup"><span data-stu-id="00051-148">In order to support the above scenarios, a filtering decision must be made more difficult to override than another filtering decision by managing the action override permission.</span></span> <span data-ttu-id="00051-149">Questa autorizzazione viene implementata come flag **FWPS \_ right \_ Action \_ Write** e viene impostata in base al filtro.</span><span class="sxs-lookup"><span data-stu-id="00051-149">This permission is implemented as the **FWPS\_RIGHT\_ACTION\_WRITE** flag and it is set on a per-filter basis.</span></span>

<span data-ttu-id="00051-150">L'algoritmo di valutazione gestisce l'azione corrente ("Consenti" o "blocco") insieme al flag di **\_ \_ \_ scrittura azione a destra FWPS** .</span><span class="sxs-lookup"><span data-stu-id="00051-150">The evaluation algorithm maintains the current action ("Permit" or "Block") along with the **FWPS\_RIGHT\_ACTION\_WRITE** flag.</span></span> <span data-ttu-id="00051-151">Il flag controlla se un sottolivello con priorità inferiore è autorizzato a eseguire l'override dell'azione.</span><span class="sxs-lookup"><span data-stu-id="00051-151">The flag controls whether a lower priority sub-layer is allowed to override the action.</span></span> <span data-ttu-id="00051-152">Impostando o reimpostando il flag di **\_ \_ \_ scrittura dell'azione right FWPS** nella struttura [FWPS \_ classifica \_ OUT0](/windows/win32/api/fwpstypes/ns-fwpstypes-fwps_classify_out0) , un provider determina il modo in cui le azioni possono o non possono essere sottoposte a override.</span><span class="sxs-lookup"><span data-stu-id="00051-152">By setting or resetting the **FWPS\_RIGHT\_ACTION\_WRITE** flag in the [FWPS\_CLASSIFY\_OUT0](/windows/win32/api/fwpstypes/ns-fwpstypes-fwps_classify_out0) structure, a provider governs how actions can or cannot be overridden.</span></span> <span data-ttu-id="00051-153">Se il flag è impostato, indica che l'azione può essere sottoposta a override.</span><span class="sxs-lookup"><span data-stu-id="00051-153">If the flag is set, it indicates that the action can be overridden.</span></span> <span data-ttu-id="00051-154">Se il flag è assente, l'azione non può essere sottoposta a override.</span><span class="sxs-lookup"><span data-stu-id="00051-154">If the flag is absent, the action cannot be overridden.</span></span>



| <span data-ttu-id="00051-155">Azione</span><span class="sxs-lookup"><span data-stu-id="00051-155">Action</span></span> | <span data-ttu-id="00051-156">Consenti override (FWPS \_ right \_ Action \_ Write è impostato)</span><span class="sxs-lookup"><span data-stu-id="00051-156">Allow override (FWPS\_RIGHT\_ACTION\_WRITE is set)</span></span> | <span data-ttu-id="00051-157">Descrizione</span><span class="sxs-lookup"><span data-stu-id="00051-157">Description</span></span>                                                                                                          |
|--------|----------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="00051-158">Consenti</span><span class="sxs-lookup"><span data-stu-id="00051-158">Permit</span></span> | <span data-ttu-id="00051-159">Sì</span><span class="sxs-lookup"><span data-stu-id="00051-159">Yes</span></span>                                                | <span data-ttu-id="00051-160">Il traffico può essere bloccato a un altro sottolivello.</span><span class="sxs-lookup"><span data-stu-id="00051-160">The traffic can be blocked at another sub-layer.</span></span> <span data-ttu-id="00051-161">Questo è un permesso soft.</span><span class="sxs-lookup"><span data-stu-id="00051-161">This is called a soft permit.</span></span><br/>                            |
| <span data-ttu-id="00051-162">Consenti</span><span class="sxs-lookup"><span data-stu-id="00051-162">Permit</span></span> | <span data-ttu-id="00051-163">No</span><span class="sxs-lookup"><span data-stu-id="00051-163">No</span></span>                                                 | <span data-ttu-id="00051-164">Il traffico può essere bloccato a un altro sottolivello solo da un **veto** di callout.</span><span class="sxs-lookup"><span data-stu-id="00051-164">The traffic can be blocked at another sub-layer only by a callout **Veto**.</span></span> <span data-ttu-id="00051-165">Questa operazione è detta autorizzazione rigida.</span><span class="sxs-lookup"><span data-stu-id="00051-165">This is called a hard permit.</span></span><br/> |
| <span data-ttu-id="00051-166">Blocca</span><span class="sxs-lookup"><span data-stu-id="00051-166">Block</span></span>  | <span data-ttu-id="00051-167">Sì</span><span class="sxs-lookup"><span data-stu-id="00051-167">Yes</span></span>                                                | <span data-ttu-id="00051-168">Il traffico può essere consentito a un altro sottolivello.</span><span class="sxs-lookup"><span data-stu-id="00051-168">The traffic can be permitted at another sub-layer.</span></span> <span data-ttu-id="00051-169">Questa operazione è denominata blocco soft.</span><span class="sxs-lookup"><span data-stu-id="00051-169">This is called a soft block.</span></span><br/>                           |
| <span data-ttu-id="00051-170">Blocca</span><span class="sxs-lookup"><span data-stu-id="00051-170">Block</span></span>  | <span data-ttu-id="00051-171">No</span><span class="sxs-lookup"><span data-stu-id="00051-171">No</span></span>                                                 | <span data-ttu-id="00051-172">Il traffico non può essere consentito a un altro sottolivello.</span><span class="sxs-lookup"><span data-stu-id="00051-172">The traffic cannot be permitted at another sub-layer.</span></span> <span data-ttu-id="00051-173">Questa operazione è denominata blocco rigido.</span><span class="sxs-lookup"><span data-stu-id="00051-173">This is called a hard block.</span></span><br/>                        |



 

<span data-ttu-id="00051-174">L'azione di filtro può essere impostata impostando il membro del **tipo** nella struttura [**FWPM \_ ACTION0**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_action0) su **FWP \_ Action \_ Block** o **FWP \_ Action \_ permessi**.</span><span class="sxs-lookup"><span data-stu-id="00051-174">The filter action can be set by setting the **type** member in the structure [**FWPM\_ACTION0**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_action0) to either **FWP\_ACTION\_BLOCK** or **FWP\_ACTION\_PERMIT**.</span></span> <span data-ttu-id="00051-175">Insieme al tipo di azione, un filtro espone anche il flag **del \_ filtro FWPM flag \_ \_ Clear \_ Action \_ right**.</span><span class="sxs-lookup"><span data-stu-id="00051-175">Along with the action type, a filter also exposes the flag **FWPM\_FILTER\_FLAG\_CLEAR\_ACTION\_RIGHT**.</span></span> <span data-ttu-id="00051-176">Se questo flag è deselezionato, il tipo di azione è rigido e non è possibile eseguirne l'override tranne quando un permesso rigido viene sostituito da un **veto** , come illustrato più avanti, altrimenti è soft, che può essere sostituito da un'azione con priorità alta.</span><span class="sxs-lookup"><span data-stu-id="00051-176">If this flag is cleared, then the action type is hard and cannot be overridden except when a hard permit is overridden by a **Veto** as explained later on, else it is soft which can be overridden by high priority action.</span></span>

<span data-ttu-id="00051-177">Nella tabella seguente viene elencato il comportamento predefinito per le azioni di filtro e di callout.</span><span class="sxs-lookup"><span data-stu-id="00051-177">The following table lists the default behavior for filter and callout actions.</span></span>

| <span data-ttu-id="00051-178">Azione</span><span class="sxs-lookup"><span data-stu-id="00051-178">Action</span></span>         | <span data-ttu-id="00051-179">Comportamento predefinito</span><span class="sxs-lookup"><span data-stu-id="00051-179">Default Behavior</span></span> |
|----------------|------------------|
| <span data-ttu-id="00051-180">Consenti filtro</span><span class="sxs-lookup"><span data-stu-id="00051-180">Filter permit</span></span>  | <span data-ttu-id="00051-181">Permesso soft</span><span class="sxs-lookup"><span data-stu-id="00051-181">Soft permit</span></span>      |
| <span data-ttu-id="00051-182">Consenti callout</span><span class="sxs-lookup"><span data-stu-id="00051-182">Callout permit</span></span> | <span data-ttu-id="00051-183">Permesso soft</span><span class="sxs-lookup"><span data-stu-id="00051-183">Soft permit</span></span>      |
| <span data-ttu-id="00051-184">Blocca filtro</span><span class="sxs-lookup"><span data-stu-id="00051-184">Filter block</span></span>   | <span data-ttu-id="00051-185">Blocco rigido</span><span class="sxs-lookup"><span data-stu-id="00051-185">Hard block</span></span>       |
| <span data-ttu-id="00051-186">Blocco callout</span><span class="sxs-lookup"><span data-stu-id="00051-186">Callout block</span></span>  | <span data-ttu-id="00051-187">Blocco flessibile</span><span class="sxs-lookup"><span data-stu-id="00051-187">Soft block</span></span>       |



 

<span data-ttu-id="00051-188">Un **veto** è un'azione "blocco" restituita dal filtro quando il flag **FWPS \_ right \_ Action \_ Write** è stato reimpostato prima di chiamare il filtro.</span><span class="sxs-lookup"><span data-stu-id="00051-188">A **Veto** is a "Block" action returned by the filter when the **FWPS\_RIGHT\_ACTION\_WRITE** flag was reset prior to calling the filter.</span></span> <span data-ttu-id="00051-189">Un **veto** bloccherà il traffico consentito con un permesso fisso.</span><span class="sxs-lookup"><span data-stu-id="00051-189">A **Veto** will block traffic that was permitted with a hard permit.</span></span>

<span data-ttu-id="00051-190">Quando viene emesso un **veto** , si tratta di un'indicazione del conflitto nella configurazione.</span><span class="sxs-lookup"><span data-stu-id="00051-190">When a **Veto** is issued, it is an indication of conflict in the configuration.</span></span> <span data-ttu-id="00051-191">Per attenuare il conflitto, vengono eseguite le azioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="00051-191">The following actions are taken to mitigate the conflict.</span></span>

-   <span data-ttu-id="00051-192">Il traffico è bloccato.</span><span class="sxs-lookup"><span data-stu-id="00051-192">The traffic is blocked.</span></span>
-   <span data-ttu-id="00051-193">Viene generato un evento di controllo.</span><span class="sxs-lookup"><span data-stu-id="00051-193">An audit event is generated.</span></span>
-   <span data-ttu-id="00051-194">Viene generata una notifica.</span><span class="sxs-lookup"><span data-stu-id="00051-194">A notification is generated.</span></span>
    > [!Note]  
    > <span data-ttu-id="00051-195">La notifica viene ricevuta da tutte le entità che lo hanno sottoscritto.</span><span class="sxs-lookup"><span data-stu-id="00051-195">The notification is received by all entities that have subscribed to it.</span></span> <span data-ttu-id="00051-196">Questo include in genere il firewall (per rilevare le configurazioni errate) o le applicazioni (per rilevare se è stato eseguito l'override del relativo filtro specifico).</span><span class="sxs-lookup"><span data-stu-id="00051-196">This will typically include the firewall (in order to detect mis-configurations), or applications (in order to detect if their particular filter is overridden).</span></span>

     

    > [!Note]  
    > <span data-ttu-id="00051-197">Non è stata creata un'istanza dell'interfaccia utente obbligatoria quando viene eseguito l'override di un filtro "permesso rigido".</span><span class="sxs-lookup"><span data-stu-id="00051-197">There is no mandatory user interface (UI) instantiated when a "Hard Permit" filter is overridden.</span></span> <span data-ttu-id="00051-198">Le notifiche della sostituzione vengono inviate a qualsiasi provider registrato per riceverli, che consente ai firewall o alle applicazioni che hanno creato i filtri "Consenti", di visualizzare l'interfaccia utente che richiede l'intervento dell'utente.</span><span class="sxs-lookup"><span data-stu-id="00051-198">The notifications of the override are sent to any provider that registered to receive them, which allows firewalls, or the applications that created the "Permit" filters, to show UI asking for user action.</span></span> <span data-ttu-id="00051-199">Non esiste alcun valore nella presenza di una notifica dell'interfaccia utente della piattaforma per questi eventi di override, dal momento che gli ISV del firewall che non vogliono bloccarsi in modo invisibile possono eseguire questa operazione registrandosi in una posizione diversa in WFP o (meno preferibile) gestire tutta la logica in un driver di chiamata.</span><span class="sxs-lookup"><span data-stu-id="00051-199">There is no value in having a platform UI notification for these override events since firewall ISVs that do not want to silently block can do so by registering at a different place in WFP, or (less preferred) handle all their logic in a call-out driver.</span></span> <span data-ttu-id="00051-200">Gli ISV che pensano di richiedere agli utenti è una scelta ottimale per l'esperienza utente e per creare la propria interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="00051-200">ISVs that do think prompting users is a good idea will want to own the user experience and create their own UI.</span></span>

     

<span data-ttu-id="00051-201">Il comportamento di mitigazione descritto in precedenza garantisce che un filtro "blocco rigido" non venga sottoposto a override automaticamente da un filtro "blocco" e copra lo scenario in cui una porta di amministrazione remota non può essere bloccata dal firewall.</span><span class="sxs-lookup"><span data-stu-id="00051-201">The mitigation behavior described above ensures that a "Hard Permit" filter is not silently overridden by a "Block" filter, and covers the scenario where a remote administration port is not allowed to be blocked by the firewall.</span></span> <span data-ttu-id="00051-202">Per eseguire l'override invisibile all'utente dei filtri "hard", un firewall deve aggiungere i filtri all'interno di un sottolivello con priorità più alta.</span><span class="sxs-lookup"><span data-stu-id="00051-202">In order to silently override "Hard Permit" filters a firewall has to add its filters within a higher priority sub-layer.</span></span>

> [!Note]  
> <span data-ttu-id="00051-203">Poiché non è presente alcun arbitraggio tra livelli, il traffico consentito con "permesso fisso" può essere ancora bloccato a un altro livello.</span><span class="sxs-lookup"><span data-stu-id="00051-203">Since there is no cross-layer arbitration, traffic permitted with "Hard Permit" may still be blocked at another layer.</span></span> <span data-ttu-id="00051-204">Se necessario, è responsabilità dell'autore del criterio garantire che il traffico sia consentito a ogni livello.</span><span class="sxs-lookup"><span data-stu-id="00051-204">It is the responsibility of the policy author to ensure that traffic is permitted at each layer if necessary.</span></span>

 

<span data-ttu-id="00051-205">Le applicazioni utente che richiedono porte da aprire aggiungono filtri sottoponibili a override a un sottolivello con priorità bassa.</span><span class="sxs-lookup"><span data-stu-id="00051-205">User applications requesting ports to be opened add overridable filters to a low priority sub-layer.</span></span> <span data-ttu-id="00051-206">Il firewall può sottoscrivere gli eventi di notifica del filtro e aggiungere un filtro corrispondente dopo la convalida dell'utente (o dei criteri).</span><span class="sxs-lookup"><span data-stu-id="00051-206">The firewall can subscribe to the filter add notification events and add a matching filter after user (or policy) validation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="00051-207">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="00051-207">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="00051-208">Assegnazione di pesi dei filtri</span><span class="sxs-lookup"><span data-stu-id="00051-208">Filter Weight Assignment</span></span>](filter-weight-assignment.md)
</dt> </dl>

 

