---
description: Prima di poter utilizzare la routine di callback della coda predefinita, specificarla come routine di callback quando si esegue il commit di una coda di file oppure chiamandola da una routine di callback personalizzata, è necessario inizializzarla.
ms.assetid: e25a9787-a4a3-4d06-bf55-f6f7cfb23481
title: Inizializzazione e terminazione del contesto di callback
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 03cb4c144cb9069d395ccd688e2a172680df8a12
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/08/2021
ms.locfileid: "106315322"
---
# <a name="initializing-and-terminating-the-callback-context"></a><span data-ttu-id="094b6-103">Inizializzazione e terminazione del contesto di callback</span><span class="sxs-lookup"><span data-stu-id="094b6-103">Initializing and Terminating the Callback Context</span></span>

<span data-ttu-id="094b6-104">Prima di poter utilizzare la routine di callback della coda predefinita, specificarla come routine di callback quando si esegue il commit di una coda di file oppure chiamandola da una routine di callback personalizzata, è necessario inizializzarla.</span><span class="sxs-lookup"><span data-stu-id="094b6-104">Before the default queue callback routine can be used, either by specifying it as the callback routine when committing a file queue, or by calling it from a custom callback routine, it must be initialized.</span></span>

<span data-ttu-id="094b6-105">La funzione [**SetupInitDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallback) compila la struttura del contesto utilizzata dalla routine di callback della coda predefinita.</span><span class="sxs-lookup"><span data-stu-id="094b6-105">The [**SetupInitDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallback) function builds the context structure that is used by the default queue callback routine.</span></span> <span data-ttu-id="094b6-106">Restituisce un puntatore void a tale struttura.</span><span class="sxs-lookup"><span data-stu-id="094b6-106">It returns a void pointer to that structure.</span></span> <span data-ttu-id="094b6-107">Questa struttura è essenziale per l'operazione predefinita della routine di callback e deve essere passata alla routine di callback.</span><span class="sxs-lookup"><span data-stu-id="094b6-107">This structure is essential for the default callback routine's operation and must be passed to the callback routine.</span></span> <span data-ttu-id="094b6-108">Questa operazione può essere eseguita specificando il puntatore void come contesto in una chiamata a [**SetupCommitFileQueue**](/windows/desktop/api/Setupapi/nf-setupapi-setupcommitfilequeuea)o specificando il puntatore void come parametro di contesto quando si chiama [**SetupDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setupdefaultqueuecallbacka) da una routine di callback personalizzata.</span><span class="sxs-lookup"><span data-stu-id="094b6-108">You do can this either by specifying the void pointer as the context in a call to [**SetupCommitFileQueue**](/windows/desktop/api/Setupapi/nf-setupapi-setupcommitfilequeuea), or by specifying the void pointer as the context parameter when calling [**SetupDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setupdefaultqueuecallbacka) from a custom callback routine.</span></span> <span data-ttu-id="094b6-109">Questa struttura del contesto non deve essere modificata o a cui fa riferimento l'applicazione di installazione.</span><span class="sxs-lookup"><span data-stu-id="094b6-109">This context structure must not be altered or referenced by the setup application.</span></span>

<span data-ttu-id="094b6-110">La funzione [**SetupInitDefaultQueueCallbackEx**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallbackex) Inizializza anche un contesto per la routine di callback della coda predefinita, ma specifica una seconda finestra per ricevere un messaggio di stato specificato dal chiamante ogni volta che la coda Invia una notifica.</span><span class="sxs-lookup"><span data-stu-id="094b6-110">The [**SetupInitDefaultQueueCallbackEx**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallbackex) function also initializes a context for the default queue callback routine, but it specifies a second window to receive a caller-specified progress message each time the queue sends a notification.</span></span> <span data-ttu-id="094b6-111">In questo modo è possibile utilizzare le finestre di dialogo richieste disco predefinite e di errore e incorporare anche un indicatore di stato in una seconda finestra, ad esempio, in una pagina di un'installazione guidata di.</span><span class="sxs-lookup"><span data-stu-id="094b6-111">This enables you to use the default disk prompting and error dialog boxes, and to also embed a progress bar in a second window, for example, in a page of an installation wizard.</span></span>

<span data-ttu-id="094b6-112">Indipendentemente dal fatto che sia stato inizializzato il contesto utilizzato dalla routine di callback della coda predefinita con [**SetupInitDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallback) o [**SetupInitDefaultQueueCallbackEx**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallbackex), al termine dell'elaborazione delle operazioni in coda, chiamare [**SetupTermDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setuptermdefaultqueuecallback) per rilasciare le risorse allocate durante l'inizializzazione della struttura del contesto.</span><span class="sxs-lookup"><span data-stu-id="094b6-112">Regardless of whether you initialized the context used by the default queue callback routine with [**SetupInitDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallback) or [**SetupInitDefaultQueueCallbackEx**](/windows/desktop/api/Setupapi/nf-setupapi-setupinitdefaultqueuecallbackex), after the queued operations have finished processing, call [**SetupTermDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setuptermdefaultqueuecallback) to release the resources allocated in initializing the context structure.</span></span>

 

 



